{"version":3,"sources":["webpack:///./src/app/core/library/invoice/my-bsmodel.service.ts","webpack:///./src/app/modules/vat/deactivate/vat-deactivate.guard.ts","webpack:///./src/app/modules/vouchers/components/import-voucher-from-excel/import-voucher-from-excel.component.html","webpack:///./src/app/modules/vouchers/components/import-voucher-from-excel/import-voucher-from-excel.component.scss","webpack:///./src/app/modules/vouchers/components/import-voucher-from-excel/import-voucher-from-excel.component.ts","webpack:///./src/app/modules/vouchers/components/income-confirmation/income-confirmation.component.html","webpack:///./src/app/modules/vouchers/components/income-confirmation/income-confirmation.component.scss","webpack:///./src/app/modules/vouchers/components/income-confirmation/income-confirmation.component.ts","webpack:///./src/app/modules/vouchers/components/index/index.component.html","webpack:///./src/app/modules/vouchers/components/index/index.component.scss","webpack:///./src/app/modules/vouchers/components/index/index.component.ts","webpack:///./src/app/modules/vouchers/components/send-mail/send-mail.component.html","webpack:///./src/app/modules/vouchers/components/send-mail/send-mail.component.scss","webpack:///./src/app/modules/vouchers/components/send-mail/send-mail.component.ts","webpack:///./src/app/modules/vouchers/components/send-vouchers/send-vouchers.component.html","webpack:///./src/app/modules/vouchers/components/send-vouchers/send-vouchers.component.scss","webpack:///./src/app/modules/vouchers/components/send-vouchers/send-vouchers.component.ts","webpack:///./src/app/modules/vouchers/components/sign-many/sign-many.component.html","webpack:///./src/app/modules/vouchers/components/sign-many/sign-many.component.scss","webpack:///./src/app/modules/vouchers/components/sign-many/sign-many.component.ts","webpack:///./src/app/modules/vouchers/components/view-invoice/view-invoice.component.html","webpack:///./src/app/modules/vouchers/components/view-invoice/view-invoice.component.scss","webpack:///./src/app/modules/vouchers/components/view-invoice/view-invoice.component.ts","webpack:///./src/app/modules/vouchers/components/voucher/voucher.component.html","webpack:///./src/app/modules/vouchers/components/voucher/voucher.component.scss","webpack:///./src/app/modules/vouchers/components/voucher/voucher.component.ts","webpack:///./src/app/modules/vouchers/vouchers-routing.module.ts","webpack:///./src/app/modules/vouchers/vouchers.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAqD;AAErD;IAAsC,oCAAc;IAApD;;IAEA,CAAC;IAAD,uBAAC;AAAD,CAAC,CAFqC,kEAAc,GAEnD;;;;;;;;;;;;;;;;;;;;;;;ACJwC;AAWzC;IAAA;IAKA,CAAC;IAHC,0CAAa,GAAb,UAAc,SAAiC;QAC7C,MAAM,CAAC,SAAS,CAAC,aAAa,IAAI,SAAS,CAAC,aAAa,EAAE,CAAC;IAC9D,CAAC;IAJU,kBAAkB;QAH9B,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;OACW,kBAAkB,CAK9B;IAAD,yBAAC;CAAA;AAL8B;;;;;;;;;;;;ACX/B,gLAAgL,4CAA4C,yKAAyK,sGAAsG,kMAAkM,4CAA4C,+BAA+B,0aAA0a,6eAA6e,4CAA4C,yCAAyC,2TAA2T,+DAA+D,KAAK,yCAAyC,geAAge,uCAAuC,iIAAiI,+BAA+B,kLAAkL,iBAAiB,4OAA4O,6FAA6F,yCAAyC,8UAA8U,khBAAkhB,YAAY,oBAAoB,KAAK,mCAAmC,uBAAuB,iEAAiE,6CAA6C,KAAK,8DAA8D,sGAAsG,uDAAuD,2FAA2F,6CAA6C,o4CAAo4C,wCAAwC,oNAAoN,qBAAqB,oIAAoI,0CAA0C,2QAA2Q,8CAA8C,kNAAkN,uCAAuC,+PAA+P,+CAA+C,+LAA+L,6CAA6C,iMAAiM,4CAA4C,wLAAwL,2CAA2C,8IAA8I,qCAAqC,sLAAsL,mCAAmC,iNAAiN,+CAA+C,4LAA4L,4CAA4C,uQAAuQ,kCAAkC,kTAAkT,wDAAwD,4QAA4Q,4CAA4C,mMAAmM,2CAA2C,wOAAwO,8BAA8B,4EAA4E,yDAAyD,2PAA2P,8BAA8B,gDAAgD,gDAAgD,oWAAoW,8BAA8B,mFAAmF,+DAA+D,yQAAyQ,8BAA8B,gDAAgD,qDAAqD,qWAAqW,8BAA8B,4EAA4E,iEAAiE,oRAAoR,8BAA8B,gCAAgC,+BAA+B,4LAA4L,8BAA8B,gCAAgC,gDAAgD,qRAAqR,8BAA8B,gCAAgC,qDAAqD,oLAAoL,8BAA8B,kPAAkP,8BAA8B,gCAAgC,wCAAwC,sSAAsS,8BAA8B,gCAAgC,qDAAqD,sSAAsS,8BAA8B,gCAAgC,gDAAgD,+SAA+S,8BAA8B,gCAAgC,sDAAsD,wQAAwQ,8BAA8B,gCAAgC,+CAA+C,yQAAyQ,8BAA8B,gCAAgC,mDAAmD,oQAAoQ,8BAA8B,gCAAgC,4CAA4C,uPAAuP,8BAA8B,gCAAgC,sCAAsC,2PAA2P,8BAA8B,gCAAgC,mDAAmD,qLAAqL,8BAA8B,gCAAgC,wCAAwC,mvBAAmvB,iGAAiG,yCAAyC,yBAAyB,4BAA4B,waAAwa,kCAAkC,YAAY,KAAK,mDAAmD,gCAAgC,qDAAqD,+DAA+D,sDAAsD,4DAA4D,kDAAkD,iJAAiJ,oBAAoB,2CAA2C,4BAA4B,uDAAuD,kDAAkD,sBAAsB,qBAAqB,gCAAgC,4DAA4D,6CAA6C,sBAAsB,mBAAmB,qCAAqC,yDAAyD,gDAAgD,sBAAsB,uBAAuB,sRAAsR,8CAA8C,2LAA2L,2CAA2C,qLAAqL,uCAAuC,mwBAAmwB,6CAA6C,6RAA6R,gCAAgC,sOAAsO,uRAAuR,4BAA4B,gKAAgK,qDAAqD,iGAAiG,yCAAyC,oGAAoG,sCAAsC,2G;;;;;;;;;;;ACAn/sB,kDAAkD,gBAAgB,qBAAqB,iBAAiB,YAAY,gBAAgB,yCAAyC,qBAAqB,sBAAsB,8BAA8B,WAAW,qBAAqB,SAAS,4CAA4C,WAAW,kBAAkB,iBAAiB,eAAe,4CAA4C,qBAAqB,gBAAgB,iDAAiD,qBAAqB,wDAAwD,oCAAoC,8DAA8D,sBAAsB,cAAc,SAAS,kBAAkB,0BAA0B,yBAAyB,qBAAqB,WAAW,qBAAqB,qBAAqB,kBAAkB,kBAAkB,kBAAkB,gBAAgB,YAAY,kBAAkB,sBAAsB,gBAAgB,iBAAiB,qBAAqB,UAAU,WAAW,qBAAqB,gBAAgB,kBAAkB,UAAU,aAAa,gBAAgB,eAAe,iBAAiB,kBAAkB,UAAU,mBAAmB,kBAAkB,wBAAwB,QAAQ,mBAAmB,kBAAkB,qBAAqB,6BAA6B,aAAa,qBAAqB,gBAAgB,gCAAgC,YAAY,2CAA2C,4BAA4B,8FAA8F,WAAW,0BAA0B,4GAA4G,yBAAyB,4FAA4F,kBAAkB,sEAAsE,oBAAoB,wBAAwB,cAAc,wBAAwB,eAAe,WAAW,gBAAgB,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAhhE;AACqE;AACrE;AACD;AACjB;AACd;AACwB;AACA;AACpB;AACwB;AACuD;AACF;AACpE;AAEoC;AAE9B;AACpB;AAM5B;IAuHE,yCACU,WAAwB,EACxB,aAA4B,EAC5B,kBAAkC,EACnC,gBAA4B,EAC5B,gBAA4B,EAC3B,SAAmB,EACpB,UAAsB,EACrB,YAA4B,EAC5B,cAA8B,EAC9B,OAA0B;QAT1B,gBAAW,GAAX,WAAW,CAAa;QACxB,kBAAa,GAAb,aAAa,CAAe;QAC5B,uBAAkB,GAAlB,kBAAkB,CAAgB;QACnC,qBAAgB,GAAhB,gBAAgB,CAAY;QAC5B,qBAAgB,GAAhB,gBAAgB,CAAY;QAC3B,cAAS,GAAT,SAAS,CAAU;QACpB,eAAU,GAAV,UAAU,CAAY;QACrB,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,mBAAc,GAAd,cAAc,CAAgB;QAC9B,YAAO,GAAP,OAAO,CAAmB;QAtHpC,mBAAc,GAAQ,EAAE,CAAC;QAGzB,iBAAY,GAAG,EAAE,CAAC;QAClB,WAAM,GAAQ,EAAE,CAAC;QAEjB,gBAAW,GAAQ,EAAE,CAAC;QACtB,iBAAY,GAAG,wDAAO,CAAC,KAAK,CAAC;QAK7B,YAAO,GAAQ,EAAE,CAAC;QAClB,gBAAW,GAAG,KAAK,CAAC;QACpB,iBAAY,GAAG,CAAC,CAAC;QACjB,eAAU,GAAQ,EAAE,CAAC;QACrB,cAAS,GAAQ,EAAE,CAAC;QAEpB,WAAM,GAAQ,EAAE;QAEhB,YAAO,GAAG,IAAI,sEAAY,CAAC,CAAC,CAAC,CAAC;QAE9B,iBAAY,GAAG,CAAC,CAAC;QACjB,gBAAW,GAAG,CAAC,CAAC;QAEhB,kBAAa,GAAG,IAAI,CAAC;QAGrB,wBAAmB,GAAG,KAAK,CAAC;QAG5B,uBAAkB,GAAG,KAAK,CAAC;QAC3B,oBAAe,GAAG,KAAK,CAAC;QAIxB,aAAQ,GAAe,EAAE,CAAC;QAC1B,aAAQ,GAAG,EAAE,CAAC;QACd,WAAM,GAAG,UAAU,CAAC;QACpB,cAAS,GAAG,EAAE,CAAC;QACf,eAAU,GAAG,IAAI,CAAC;QAGlB,kBAAa,GAAW,CAAC,CAAC;QAE1B,4BAAuB,GAAG,EAAE,CAAC;QAC7B,4BAAuB,GAAY,KAAK,CAAC;QACzC,iBAAY,GAAG,EAAE,CAAC;QAClB,eAAU,GAAG,CAAC,CAAC;QAEf,WAAM,GAAY,KAAK,CAAC;QACxB,mBAAc,GAAY,KAAK,CAAC;QAChC,uBAAkB,GAAG,IAAI,CAAC;QAC1B,kBAAa,GAAG,EAAE,CAAC;QACnB,eAAU,GAAG,EAAE,CAAC;QAEhB,iBAAY,GAAQ,EAAE,CAAC;QACvB,aAAQ,GAAG,IAAI,CAAC;QAGhB,iBAAY,GAAG,EAAE,CAAC;QAClB,gBAAW,GAAG,KAAK,CAAC;QAEpB,iBAAY,GAAG,EAAE,CAAC;QAClB,kBAAa,GAAG,EAAE,CAAC;QACnB,oBAAe,GAAQ,EAAE,CAAC;QAE1B,wBAAmB,GAAG,EAAE,CAAC,CAAC,iCAAiC;QAC3D,qBAAgB,GAAG,EAAE,CAAC,CAAC,gCAAgC;QACvD,iBAAY,GAAG,CAAC,aAAa,EAAE,MAAM,EAAE,YAAY,EAAE,QAAQ,CAAC,CAAC,CAAC,mDAAmD;QACnH,mBAAc,GAAG;YACf;gBACE,IAAI,EAAE,wBAAwB;gBAC9B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,8BAA8B;gBACpC,IAAI,EAAE,GAAG;aACV;YACD;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,kCAAkC;gBACxC,IAAI,EAAE,GAAG;aACV;YACD;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,yBAAyB;gBAC/B,IAAI,EAAE,GAAG;aACV;YACD;gBACE,IAAI,EAAE,2BAA2B;gBACjC,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,sCAAsC;gBAC5C,IAAI,EAAE,GAAG;aACV;YACD;gBACE,IAAI,EAAE,sBAAsB;gBAC5B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,gCAAgC;gBACtC,IAAI,EAAE,GAAG;aACV;YACD;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,wCAAwC;gBAC9C,IAAI,EAAE,GAAG;aACV;SACF,CAAC;QA8rBF,WAAM,GAAG,UAAC,KAAK;YACb,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;YACtC,MAAM,CAAC,cAAc,GAAG,OAAO,GAAG,GAAG,CAAC;QACxC,CAAC;QAprBC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAClD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC7C,IAAI,CAAC,UAAU,GAAG,kDAAM,CAAC,4BAA4B,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACvE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;IACvD,CAAC;IAED,kDAAQ,GAAR;QAAA,iBAkFC;QAjFC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,QAAQ,GAAG,IAAI,kEAAU,CAAC;YAC7B,GAAG,EAAE,SAAS;YACd,IAAI,EAAE,EAAE;SACT,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,GAAG,IAAI,kEAAU,CAAC;YAC/B,KAAK,EAAE,IAAI,CAAC,QAAQ;SACrB,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;QACrD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACpE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC;QACjD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,CAAC;QAC3E,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1D,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAC,QAAQ,IAAK,eAAQ,CAAC,KAAK,IAAI,KAAI,CAAC,eAAe,EAAtC,CAAsC,CAAC,CAAC;YACvG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAC,QAAQ,IAAK,eAAQ,CAAC,KAAK,IAAI,KAAI,CAAC,WAAW,EAAlC,CAAkC,CAAC,CAAC;YAE7F,IAAI,SAAS,GAAG,EAAE,CAAC;YACnB,IAAI,CAAC;gBACH,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,wBAAwB,EAAlC,CAAkC,CAAC;YACzF,CAAC;YAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAEjB,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC5C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC;YACpC,CAAC;YAED,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC;YACxD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC;YAC1D,GAAG,CAAC,CAAC,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;gBAChE,IAAI,eAAe,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,eAAe,CAAC;gBACjE,eAAe,GAAG,IAAI,CAAC,mBAAmB,CAAC,eAAe,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;gBAC7E,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,6CAAO,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE,eAAe,CAAC,CAAC;gBAClF,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC;gBACpC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAClE,IAAI,eAAe,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC;oBACzE,eAAe,GAAG,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC;wBACnD,IAAI,KAAK,GAAQ,IAAI,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;wBACxC,IAAI,KAAK,GAAQ,IAAI,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;wBACxC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;oBACvB,CAAC,CAAC,CAAC;oBAEH,IAAI,uBAAuB,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;oBACjD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,uBAAuB,CAAC;oBACzD,EAAE,CAAC,CAAC,uBAAuB,CAAC,8BAA8B;wBACxD,uBAAuB,CAAC,8BAA8B,CAAC,MAAM,GAAG,CAClE,CAAC,CAAC,CAAC;wBACD,IAAI,cAAc,GAAG,IAAI,CAAC,mBAAmB,CAAC,uBAAuB,CAAC,8BAA8B,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;wBACvH,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,6CAAO,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE,cAAc,CAAC,CAAC;oBACnF,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACzB,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;gBAC/C,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,KAAK;YACnD,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACtB,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBACzC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBAC3C,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,wBAAwB,EAAlC,CAAkC,CAAC;gBACxF,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;gBACzC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC;gBACpC,CAAC;gBACD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC;gBACrD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC;YACzD,CAAC;QACH,CAAC;QACD,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,gEAAoB,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QAC9F,IAAI,CAAC,aAAa,GAAG,6DAAiB,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACvE,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAClC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACnB,CAAC;IACH,CAAC;IAGD,qBAAqB;IACrB,yDAAe,GAAf;QAAA,iBA6BC;QA5BC,IAAI,cAAc,GAAQ,EAAE,CAAC;QAC7B,IAAI,kBAAkB,GAAQ,EAAE,CAAC;QACjC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,KAAK,IAAI,KAAI,CAAC,WAAW,EAA3B,CAA2B,CAAC,CAAC;YACzE,IAAI,CAAC,gBAAgB,GAAG,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,eAAK,IAAI,YAAK,CAAC,IAAI,IAAI,GAAG,EAAjB,CAAiB,CAAC;iBAC7E,GAAG,CAAC,UAAC,IAAI;gBACR,MAAM,CAAC;oBACL,IAAI,EAAE,IAAI,CAAC,IAAI;oBACf,IAAI,EAAE,IAAI,CAAC,IAAI;oBACf,KAAK,EAAE,IAAI,CAAC,KAAK;oBACjB,OAAO,EAAE,IAAI,CAAC,OAAO;oBACrB,SAAS,EAAE,IAAI,CAAC,SAAS;iBAC1B;YACH,CAAC,CAAC;QACN,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACzB,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,KAAK,IAAI,KAAI,CAAC,eAAe,EAA/B,CAA+B,CAAC,CAAC;YACpF,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAC,MAAM,CAAC,MAAM,CAAC,eAAK,IAAI,YAAK,CAAC,IAAI,IAAI,GAAG,EAAjB,CAAiB,CAAC;iBACpF,GAAG,CAAC,UAAC,IAAI;gBACR,MAAM,CAAC;oBACL,IAAI,EAAE,IAAI,CAAC,IAAI;oBACf,IAAI,EAAE,IAAI,CAAC,IAAI;oBACf,KAAK,EAAE,IAAI,CAAC,KAAK;oBACjB,OAAO,EAAE,IAAI,CAAC,OAAO;oBACrB,SAAS,EAAE,IAAI,CAAC,SAAS;iBAC1B;YACH,CAAC,CAAC;QACN,CAAC;IACH,CAAC;IAGD,4BAA4B;IAC5B,qDAAW,GAAX;QAAA,iBAwEC;QAvEC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,cAAI;gBACvB,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,KAAK;oBAC1C,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC;wBACxC,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBAC3C,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACxE,UAAU,CAAC,OAAO,CAAC,cAAI;YACrB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACjB,IAAI,MAAM,GAAG;oBACX,WAAW,EAAE,IAAI,CAAC,IAAI;oBACtB,WAAW,EAAE,IAAI,CAAC,IAAI;oBACtB,UAAU,EAAE,IAAI;iBACjB;gBACD,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;oBAC7B,IAAI,MAAM,GACV;wBACE,OAAO,EAAE,IAAI,CAAC,IAAI;wBAClB,SAAS,EAAE,IAAI,CAAC,IAAI;wBACpB,KAAK,EAAE,GAAG;qBACX,CAAC;oBACF,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC5B,CAAC;gBACD,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;oBACjC,IAAI,MAAM,GACV;wBACE,OAAO,EAAE,IAAI,CAAC,IAAI;wBAClB,SAAS,EAAE,IAAI,CAAC,IAAI;wBACpB,KAAK,EAAE,GAAG;wBACV,QAAQ,EAAE,QAAQ;wBAClB,aAAa,EAAE;4BACb,MAAM,EAAE,OAAO;yBAChB;wBACD,MAAM,EAAE,OAAO;qBAChB,CAAC;oBACF,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC5B,CAAC;gBACD,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;oBAC9B,IAAI,MAAM,GACV;wBACE,OAAO,EAAE,IAAI,CAAC,IAAI;wBAClB,SAAS,EAAE,IAAI,CAAC,IAAI;wBACpB,KAAK,EAAE,GAAG;wBACV,QAAQ,EAAE,MAAM;wBAChB,MAAM,EAAE,YAAY;wBACpB,uBAAuB,EAAE,qBAAqB;qBAC/C,CAAC;oBACF,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC5B,CAAC;YACH,CAAC;QACH,CAAC,CAAC;QAEF,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAM,cAAY,GAAG,2CAAK,CAAC,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;YAC1D,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,UAAU,GAAQ;gBAC5D,MAAM,CAAC,GAAG,CAAC,SAAS,KAAK,UAAU,CAAC;YACtC,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,cAAI;gBACvB,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,cAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBACzD,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACjD,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACnC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;IAEH,CAAC;IAGD,yDAAe,GAAf;QACE,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,0DAAgB,GAAhB;QAAA,iBA4CC;QA3CC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,CAAC,SAAS,CAAC,iBAAO;YACvE,IAAI,IAAI,GAAQ,OAAO,CAAC;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,UAAU,CAAC,CAAC,CAAC;oBAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,YAAY,CAAC,CAAC,CAAC;wBACnC,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBAC3C,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,gCAAgC,CAAC,CAAC,CAAC;wBAC9D,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;wBAChD,KAAI,CAAC,cAAc,EAAE,CAAC;oBACxB,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,kBAAkB,CAAC,CAAC,CAAC;wBACjD,KAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBAC9C,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;4BACrC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gCACrC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;4BACxC,CAAC;wBACH,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,UAAU,EAAE,CAAC;wBAClB,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,IAAI,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;4BACzD,KAAI,CAAC,cAAc,EAAE,CAAC;wBACxB,CAAC;oBACH,CAAC;gBACH,CAAC;gBACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,iBAAiB,CAAC,CAAC,CAAC;oBAC5C,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC;wBAC3B,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;oBAC1G,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC;wBAChC,IAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,EAAE,uBAAuB,CAAC,CAAC;wBAC1E,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,OAAO,CAAC,KAAK,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC;wBACrD,CAAC;wBACD,IAAI;4BACF,KAAK,CAAC,KAAK,EAAE,CAAC;wBAChB,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;wBAC1C,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;oBACtB,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,KAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;gBAChC,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;YAC5C,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,0DAAgB,GAAhB,UAAiB,UAAU;QAA3B,iBA0BC;QAzBC,IAAI,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;QAC9C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC;YACnD,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YACnB,UAAU,EAAE,UAAU;YACtB,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,aAAa;SAC1C,CAAC,CAAC,SAAS,CAAC,YAAE;YACb,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;gBAC3B,KAAI,CAAC,aAAa,IAAI,eAAe,CAAC;gBACtC,EAAE,CAAC,CAAC,KAAI,CAAC,MAAM,IAAI,IAAI,CAAC;oBACtB,KAAI,CAAC,YAAY,EAAE,CAAC;gBACtB,IAAI;oBACF,KAAI,CAAC,eAAe,EAAE,CAAC;YAC3B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;YACJ,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,KAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAClC,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,KAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;QACnC,CAAC,CAAC,CAAC;IACL,CAAC;IACD,wDAAc,GAAd;QACE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACrB,CAAC;IACK,uDAAa,GAAnB;;;;;;wBACE,OAAO,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;wBAChC,OAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC;wBACf,qBAAM,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,YAAE;gCAChF,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oCAC5B,KAAI,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oCAC5B,KAAI,CAAC,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;oCAC5D,MAAM,CAAC,IAAI,CAAC;gCACd,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;oCAC1C,MAAM,CAAC,KAAK,CAAC;gCACf,CAAC;4BACH,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;gCACb,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gCAC7B,KAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;gCAChC,MAAM,CAAC,KAAK,CAAC;4BACf,CAAC,CAAC;4BAbF,sBAAO,SAaL,EAAC;;;;KACJ;IACK,gEAAsB,GAA5B,UAA6B,EAAE;;;;;;wBAC7B,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;wBACnB,qBAAM,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,YAAE;gCAC1F,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oCAC5B,KAAI,CAAC,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;oCAC5D,MAAM,CAAC,IAAI,CAAC;gCACd,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;oCAC1C,MAAM,CAAC,KAAK,CAAC;gCACf,CAAC;4BACH,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;gCACb,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gCAC7B,KAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;gCAChC,MAAM,CAAC,KAAK,CAAC;4BACf,CAAC,CAAC;4BAZF,sBAAO,SAYL,EAAC;;;;KACJ;IACD,sDAAY,GAAZ;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;eAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC5H,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;QACxD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;QAClD,CAAC;IACH,CAAC;IACD,yDAAe,GAAf;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YAC1C,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YAChD,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;YACzB,mDAAO,CAAC,MAAM,CAAC,0BAA0B,EAAE,SAAS,CAAC,CAAC;YACtD,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;YAChC,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;YAC7B,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;QACxB,CAAC;IACH,CAAC;IACD,6DAAmB,GAAnB,UAAoB,IAAI;QAAxB,iBAmBC;QAlBC,IAAM,sBAAsB,GAAG;YAC7B,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE;YAClB,QAAQ,EAAE;gBACR,SAAS,EAAE,kBAAkB;gBAC7B,YAAY,EAAE,IAAI;aACnB;SACF;QACD,UAAU,CAAC;YACT,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,EAAE,EAAE,CAAC,CAAC;QACP,IAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC,SAAS,CAAC,YAAE;YAC1E,KAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC,EAAE,aAAG;YACJ,KAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,uDAAa,GAAb,UAAc,UAAU,EAAE,QAAS;QAAnC,iBAQC;QAPC,8BAA8B;QAC9B,IAAI,QAAQ,GAAG,sBAAsB,CAAC;QACtC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,EAAE,kBAAkB,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IACrK,CAAC;IACD,wDAAc,GAAd;QAAA,iBAqKC;QApKC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,MAAM,CAAC;QACX,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YACrD,MAAM,GAAG,iDAAK,CAAC,UAAU,CAAC,OAAO,CAAC;QACpC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YACpD,MAAM,GAAG,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC;QAClC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YACnD,MAAM,GAAG,iDAAK,CAAC,SAAS,CAAC,KAAK,CAAC;QACjC,CAAC;QACD,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAI,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAC9C,OAAO,OAAO,CAAC,KAAK,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,EAAE,CAAC,CAAC,MAAM,KAAK,iDAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;YACxC,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,UAAO,EAAE;;;;;;iCACnE,GAAE,CAAC,MAAM,KAAK,SAAS,GAAvB,wBAAuB;4BACzB,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC;4BACrD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;4BACpC,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;4BACnF,iBAAiB,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;4BACxF,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;4BACzB,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,KAAI,CAAC,OAAO,CAAC,KAAK,EAA9B,CAA8B,CAAC,CAAC,CAAC,CAAC,CAAC;4BAC/E,aAAa,GAAG,KAAK,CAAC;iCACtB,WAAW,EAAX,wBAAW;4BACb,OAAO,WAAW,CAAC,MAAM,CAAC;4BAC1B,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC;4BAC1B,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;4BACpB,qBAAM,IAAI,CAAC,aAAa,EAAE;;4BAA1C,aAAa,GAAG,SAA0B,CAAC;;;4BAG3C,aAAa,GAAG,IAAI,CAAC;;;4BAEvB,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;gCAClB,IAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;gCACvC,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gCAClE,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;oCACrB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2CAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wCAC5H,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;oCACpC,CAAC;oCAAC,IAAI,CAAC,CAAC;wCACN,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,iBAAiB,CAAC,CAAC;oCACjD,CAAC;gCACH,CAAC;4BACH,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gCAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gCACxB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;4BAClC,CAAC;;;4BAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;4BAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;4BACxB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;4BAChC,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;;;;;iBAEvC,EAAE,aAAG;gBACJ,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,KAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;YAClC,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,KAAK,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YAC7C,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,UAAM,EAAE;;;;;;iCAC5E,GAAE,CAAC,MAAM,KAAK,SAAS,GAAvB,wBAAuB;4BACzB,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC;4BACrD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;4BACpC,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;4BACnF,iBAAiB,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;4BACxF,IAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;4BACvC,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;4BAC9D,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,KAAI,CAAC,OAAO,CAAC,EAAE,EAA3B,CAA2B,CAAC,CAAC,CAAC,CAAC,CAAC;4BAC5E,aAAa,GAAG,KAAK,CAAC;iCAEtB,WAAW,EAAX,wBAAW;4BACb,OAAO,WAAW,CAAC,MAAM,CAAC;4BAC1B,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC;4BAC1B,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;4BACpB,qBAAM,IAAI,CAAC,aAAa,EAAE;;4BAA1C,aAAa,GAAG,SAA0B,CAAC;;;4BAG3C,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,UAAU,IAAI,KAAI,CAAC,OAAO,CAAC,EAAE,EAA/B,CAA+B,CAAC,CAAC,CAAC,CAAC,CAAC;iCAC5E,WAAW,EAAX,wBAAW;4BACb,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC;4BAC1B,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;4BACpC,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;4BACpB,qBAAM,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;;4BAArE,aAAa,GAAG,SAAqD,CAAC;;;4BAEtE,aAAa,GAAG,IAAI,CAAC;;;4BAGzB,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;gCAClB,IAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;gCACvC,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gCAClE,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;oCACrB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2CAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wCAC5H,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;oCACpC,CAAC;oCAAC,IAAI,CAAC,CAAC;wCACN,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,iBAAiB,CAAC,CAAC;oCACjD,CAAC;gCACH,CAAC;4BACH,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gCAC7B,2BAA2B;gCAC3B,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;4BAClC,CAAC;;;4BAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;4BAC7B,2BAA2B;4BAC3B,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;4BAChC,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;;;;;iBAEvC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,KAAK,iDAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;YAC5C,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,UAAM,EAAE;;;;;;iCAC5E,GAAE,CAAC,MAAM,KAAK,SAAS,GAAvB,wBAAuB;4BACzB,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;4BACnF,iBAAiB,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;4BACxF,IAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;4BACnC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,KAAI,CAAC,OAAO,CAAC,KAAK,EAA9B,CAA8B,CAAC,CAAC,CAAC,CAAC,CAAC;4BAC/E,aAAa,GAAG,KAAK,CAAC;4BAC1B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iCAChC,WAAW,EAAX,wBAAW;4BACb,OAAO,WAAW,CAAC,MAAM,CAAC;4BAC1B,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC;4BAC1B,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;4BACpB,qBAAM,IAAI,CAAC,aAAa,EAAE;;4BAA1C,aAAa,GAAG,SAA0B,CAAC;;;4BAG3C,aAAa,GAAG,IAAI,CAAC;;;4BAEvB,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;gCAClB,IAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;gCACvC,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gCAClE,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;oCACrB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2CAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wCAC5H,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;oCACpC,CAAC;oCAAC,IAAI,CAAC,CAAC;wCACN,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,iBAAiB,CAAC,CAAC;oCACjD,CAAC;gCACH,CAAC;4BACH,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gCAC7B,2BAA2B;gCAC3B,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;4BAClC,CAAC;;;4BAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;4BAC7B,2BAA2B;4BAC3B,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;4BAChC,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;;;;;iBAEvC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IACD,oDAAU,GAAV,UAAW,UAAU;QACnB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,WAAW,IAAI,UAAU,EAA3B,CAA2B,CAAC,CAAC,CAAC,CAAC,CAAC;YACvE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,KAAK,IAAI,IAAI,CAAC,WAAW,IAAI,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACtF,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBAC1B,CAAC;gBACD,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YAAC,IAAI;gBAAC,MAAM,CAAC,EAAE,WAAW,EAAE,EAAE,EAAE,WAAW,EAAE,EAAE,EAAE,UAAU,EAAE,KAAK,EAAE,CAAC;QACxE,CAAC;IACH,CAAC;IACD,qDAAW,GAAX,UAAY,UAAU;QACpB,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,UAAU,EAApB,CAAoB,CAAC,CAAC;QACxD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACnB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACnB,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,KAAK,CAAC;YACf,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;IACH,CAAC;IACD,gEAAsB,GAAtB,UAAuB,IAAI;QACzB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IAC1C,CAAC;IACD,oDAAU,GAAV,UAAW,UAAU,EAAE,QAAQ;QAA/B,iBAEC;QADC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,EAAE,YAAY,EAAE,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,aAAa,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACzJ,CAAC;IACD,iDAAO,GAAP;QACE,IAAI,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;QACpD,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACZ,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC,CAAC;gBAC/D,IAAM,YAAY,GAAG;oBACnB,KAAK,EAAE,IAAI,CAAC,WAAW;oBACvB,QAAQ,EAAE,KAAK;oBACf,UAAU,EAAE,WAAW;iBACxB,CAAC;gBACF,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAEhD,0FAAoB,EACpB;oBACE,QAAQ,EAAE,QAAQ;oBAClB,QAAQ,EAAE,KAAK;oBACf,KAAK,EAAE,uBAAuB;oBAC9B,YAAY;iBACb,CACF,CAAC;gBACJ,IAAM,UAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;oBACxD,UAAQ,CAAC,WAAW,EAAE,CAAC;gBACzB,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAC7B,CAAC;QACH,CAAC;IACH,CAAC;IACD,kDAAQ,GAAR,UAAS,QAAQ;QAAjB,iBA4EC;QA3EC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;QACD,UAAU,CAAC;YACT,IAAM,GAAG,GAAG,KAAI,CAAC,aAAa,CAAC,oBAAoB,EAAE,CAAC;YACtD,EAAE,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,MAAM,KAAK,OAAO,IAAI,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC;gBACpD,IAAM,YAAY,GAAG;oBACnB,UAAU,EAAE,SAAS;iBACtB,CAAC;gBACF,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,oEAAqB,EAAE;oBAC9D,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ;oBACrC,QAAQ,EAAE,KAAK;oBACf,YAAY;iBACb,CAAC,CAAC;gBACH,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;gBAEnC,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,EAAE,CAAC,CAAC,QAAQ,IAAI,WAAW,CAAC,CAAC,CAAC;oBAC5B,IAAM,YAAY,GAAG;wBACnB,KAAK,EAAE,KAAI,CAAC,WAAW;wBACvB,QAAQ,EAAE,KAAK;wBACf,UAAU,EAAE,WAAW;qBACxB,CAAC;oBACF,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAEhD,0FAAoB,EACpB;wBACE,QAAQ,EAAE,QAAQ;wBAClB,QAAQ,EAAE,KAAK;wBACf,KAAK,EAAE,uBAAuB;wBAC9B,YAAY;qBACb,CACF,CAAC;oBACJ,IAAM,UAAQ,GAAG,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;wBACxD,UAAQ,CAAC,WAAW,EAAE,CAAC;oBACzB,CAAC,CAAC,CAAC;gBACL,CAAC;gBACD,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,IAAI,cAAc,CAAC,CAAC,CAAC;oBACpC,IAAI,YAAY,GAAG,EAAE,CAAC;oBACtB,EAAE,CAAC,CAAC,KAAI,CAAC,MAAM,IAAI,iDAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;wBAChD,YAAY,GAAG,OAAO,CAAC;oBACzB,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,YAAY,GAAG,QAAQ,CAAC;oBAC1B,CAAC;oBACD,IAAM,YAAY,GAAG;wBACnB,KAAK,EAAE,KAAI,CAAC,WAAW;wBACvB,QAAQ,EAAE,IAAI;wBACd,YAAY,EAAE,YAAY;wBAC1B,UAAU,EAAE,WAAW;qBACxB,CAAC;oBAEF,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAEhD,0FAAoB,EACpB;wBACE,QAAQ,EAAE,QAAQ;wBAClB,QAAQ,EAAE,KAAK;wBACf,KAAK,EAAE,uBAAuB;wBAC9B,YAAY;qBACb,CACF,CAAC;oBACJ,IAAM,UAAQ,GAAG,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;wBACxD,EAAE,CAAC,CAAC,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,IAAI,QAAQ,CAAC,CAAC,CAAC;4BAC9D,KAAI,CAAC,gBAAgB,EAAE,CAAC;4BACxB,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;4BAChC,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;wBACtB,CAAC;wBACD,UAAQ,CAAC,WAAW,EAAE,CAAC;oBACzB,CAAC,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,2DAAiB,GAAjB,UAAkB,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QAC1D,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,KAAK,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC;QACxD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC;QAC1D,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,EAAlB,CAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM;QACrE,IAAI,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,wBAAwB,EAAlC,CAAkC,CAAC;QACtE,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC;QACpC,CAAC;QACD,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,wCAAwC;IAC1C,CAAC;IACD,8DAAoB,GAApB,UAAqB,CAAC;QACpB,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QAC7D,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,KAAK,CAAC;QAC/B,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IACD,yDAAe,GAAf,UAAgB,CAAC;QACf,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IACzB,CAAC;IAKD,wDAAc,GAAd,UAAe,CAAC;QACd,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,GAAG,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK,CAAC,CAAC,CAAC;YAC1D,CAAC,GAAG,OAAO,CAAC,qEAAqE,CAAC,CAAC;QACrF,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YACnC,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YACnC,CAAC;YACD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAClC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;QAClB,CAAC;IACH,CAAC;IAED,iDAAO,GAAP,UAAQ,QAAQ;QAAhB,iBAKC;QAJC,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACnD,OAAO,CAAC,OAAO,CAAC,iBAAO;YACrB,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IACL,CAAC;IACD,yDAAe,GAAf;QAAA,iBAcC;QAbC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YACnC,IAAI,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,UAAC,IAAI;gBACnC,MAAM,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,UAAU,IAAI,SAAS,CAAC;YAC7D,CAAC,CAAC,CAAC;YACH,IAAI,oBAAoB,GAAG,UAAU,CAAC,MAAM,CAAC,UAAC,IAAI;gBAChD,MAAM,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,UAAU,IAAI,wBAAwB,CAAC;YAC5E,CAAC,CAAC,CAAC;YACH,IAAI,SAAS,GAAG,UAAU,CAAC,MAAM,CAAC,UAAC,IAAI;gBACrC,MAAM,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,UAAU,IAAI,YAAY,CAAC;YAChE,CAAC,CAAC,CAAC;YACH,KAAI,CAAC,mBAAmB,GAAG,OAAO,CAAC,MAAM,CAAC;YAC1C,KAAI,CAAC,iBAAiB,GAAG,oBAAoB,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;QAC1E,CAAC,CAAC,CAAC;IACL,CAAC;IACD,gDAAM,GAAN,UAAO,IAAI;QACT,EAAE,CAAC,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,yBAAyB,CAAC,KAAK,EAAE,CAAC;YACvC,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACxB,IAAI,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC;QAElD,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACZ,IAAI,CAAC,eAAe,EAAE;YACtB,EAAE,CAAC,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;gBAC5B,IAAI,CAAC,UAAU,EAAE,CAAC;YACpB,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC;gBACnB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;oBACzD,mDAAO,CAAC,MAAM,CAAC,qDAAqD,EAAE,OAAO,CAAC,CAAC;oBAC/E,MAAM,CAAC;gBACT,CAAC;gBACD,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;oBAC7B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,IAAI,CAAC,UAAU,EAAE,CAAC;oBAClB,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;gBACnC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,mBAAmB,EAAE,CAAC;gBAC7B,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IACD,6DAAmB,GAAnB;QAAA,iBAgCC;QA/BC,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;QACtC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC,CAAC;YAC/D,IAAI,YAAY,GAAG,EAAE,CAAC;YACtB,IAAM,YAAY,GAAG;gBACnB,KAAK,EAAE,IAAI,CAAC,WAAW;gBACvB,QAAQ,EAAE,IAAI;gBACd,YAAY,EAAE,YAAY;gBAC1B,UAAU,EAAE,WAAW;aACxB,CAAC;YAEF,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAEhD,0FAAoB,EACpB;gBACE,QAAQ,EAAE,QAAQ;gBAClB,QAAQ,EAAE,KAAK;gBACf,KAAK,EAAE,uBAAuB;gBAC9B,YAAY;aACb,CACF,CAAC;YACJ,IAAM,UAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;gBACxD,EAAE,CAAC,CAAC,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,IAAI,QAAQ,CAAC,CAAC,CAAC;oBAC9D,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;oBAChC,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBACtB,CAAC;gBACD,UAAQ,CAAC,WAAW,EAAE,CAAC;YACzB,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;IACD,+DAAqB,GAArB,UAAsB,IAAI;QAA1B,iBA8FC;QA7FC,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,IAAI,OAAO,GAAG,EAAE;QAChB,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,wBAAwB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACnG,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YACnC,UAAU,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,KAAK;gBAChC,EAAE,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;oBAC3B,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC;wBAAC,mDAAO,CAAC,MAAM,CAAC,+BAA+B,EAAE,OAAO,CAAC,CAAC;wBAAC,OAAO,GAAG,KAAK,CAAC;wBAAC,MAAM,CAAC,KAAK,CAAC;oBAAC,CAAC;oBAC3H,IAAI,OAAO,GAAG,IAAI,sEAAY,CAAC,CAAC,CAAC,CAAC;oBAClC,IAAI,MAAM,GAAG,IAAI,6EAAmB,CAAC;oBACrC,EAAE,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;wBACf,OAAO,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC;wBACxB,MAAM,CAAC,UAAU,GAAG,OAAO,CAAC,EAAE,CAAC;wBAC/B,MAAM,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC;wBAClC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;4BACpB,MAAM,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,EAAE,CAAC;oBAClC,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,OAAO,CAAC,OAAO,CAAC,GAAG,kDAAM,CAAC,MAAM,EAAE;4BAChC,MAAM,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;oBACxC,CAAC;oBACD,OAAO,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;oBAChD,OAAO,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;oBAChD,OAAO,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC;oBACvC,OAAO,CAAC,aAAa,GAAG,KAAI,CAAC,aAAa,CAAC;oBAC3C,OAAO,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,mCAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,mCAAM,EAAE,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,eAAe;oBAClK,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;oBAC1C,OAAO,CAAC,mBAAmB,GAAG,OAAO,CAAC,mBAAmB,CAAC;oBAC1D,OAAO,CAAC,iBAAiB,GAAG,OAAO,CAAC,iBAAiB,CAAC;oBACtD,OAAO,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,CAAC;oBACpD,OAAO,CAAC,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,CAAC;oBACxD,OAAO,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC;oBAClD,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;oBAClC,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;oBAC9C,OAAO,CAAC,mBAAmB,GAAG,OAAO,CAAC,mBAAmB,CAAC;oBAC1D,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;oBAChC,OAAO,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,KAAK,CAAC;oBAEnG,OAAO,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,mCAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;oBACjH,OAAO,CAAC,4BAA4B,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,4BAA4B,EAAE,wBAAwB,CAAC,CAAC;oBACxH,OAAO,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC;oBAClD,OAAO,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,CAAC;oBACpD,OAAO,CAAC,6BAA6B,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,6BAA6B,EAAE,wBAAwB,CAAC,CAAC;oBAC1H,OAAO,CAAC,oBAAoB,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,oBAAoB,EAAE,wBAAwB,CAAC,CAAC;oBACxG,OAAO,CAAC,mCAAmC,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,mCAAmC,EAAE,wBAAwB,CAAC,CAAC;oBACtI,OAAO,CAAC,yBAAyB,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,yBAAyB,EAAE,wBAAwB,CAAC,CAAC;oBAClH,OAAO,CAAC,qCAAqC,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,qCAAqC,EAAE,wBAAwB,CAAC,CAAC;oBAC1I,OAAO,CAAC,SAAS,GAAG,mCAAM,EAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;oBACtD,OAAO,CAAC,cAAc,GAAG,KAAI,CAAC,cAAc,CAAC;oBAC7C,OAAO,CAAC,aAAa,GAAG,KAAI,CAAC,aAAa,CAAC;oBAC3C,OAAO,CAAC,eAAe,GAAG,KAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;oBAEzE,MAAM,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;oBACnC,MAAM,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,mCAAM,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;oBACtH,MAAM,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,CAAC;oBACnD,MAAM,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;oBAC/C,MAAM,CAAC,YAAY,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,YAAY,EAAE,wBAAwB,CAAC,CAAC;oBACvF,MAAM,CAAC,0BAA0B,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,0BAA0B,EAAE,wBAAwB,CAAC,CAAC;oBACnH,MAAM,CAAC,qBAAqB,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,qBAAqB,EAAE,wBAAwB,CAAC,CAAC;oBACzG,MAAM,CAAC,uBAAuB,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,uBAAuB,EAAE,wBAAwB,CAAC,CAAC;oBAC7G,MAAM,CAAC,mBAAmB,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,mBAAmB,EAAE,wBAAwB,CAAC,CAAC;oBACrG,MAAM,CAAC,kBAAkB,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,kBAAkB,EAAE,wBAAwB,CAAC,CAAC;oBACnG,MAAM,CAAC,UAAU,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,EAAE,wBAAwB,CAAC,CAAC;oBACnF,MAAM,CAAC,UAAU,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,EAAE,wBAAwB,CAAC,CAAC;oBACnF,MAAM,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC;oBACjD,MAAM,CAAC,WAAW,GAAG,KAAI,CAAC,eAAe,CAAC;oBAC1C,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC,cAAc,CAAC;oBACrC,MAAM,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,mCAAM,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;oBAChH,MAAM,CAAC,8BAA8B,GAAG,KAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;oBAE1F,EAAE,EAAC,OAAO,CAAC,qBAAqB,CAAC,IAAI,OAAO,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,EAAC;wBAC5E,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;oBAChD,CAAC;oBAAA,IAAI,CAAC,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,CAAC;wBACzD,OAAO,CAAC,aAAa,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,gBAAgB,CAAC;oBACzE,CAAC;oBACD,IAAI,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC,gEAAoB,CAAC,uBAAuB,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC;oBACvG,OAAO,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;oBAClD,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBACvB,EAAE,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;wBAC1B,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;oBACtB,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC;QACpC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC5B,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC;QAC5B,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,MAAM,CAAC;QAElC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAC,KAAK,EAAE,KAAK;YACpD,MAAM,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,OAAO,EAAE,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,OAAO,EAAE,CAAC;QACzF,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,CAAC;IACjB,CAAC;IACD,oDAAU,GAAV;QAAA,iBAkFC;QAjFC,IAAI,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;QAC9C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;QACvD,qCAAqC;QACrC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YACpB,IAAI,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YAC9C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,SAAS,CAAC,UAAM,EAAE;;;;;;iCAC/E,GAAE,CAAC,MAAM,IAAI,SAAS,GAAtB,wBAAsB;4BACxB,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;4BACzB,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,KAAI,CAAC,OAAO,CAAC,EAAE,EAA3B,CAA2B,CAAC,CAAC,CAAC,CAAC,CAAC;iCAC5E,WAAW,EAAX,wBAAW;4BACb,OAAO,WAAW,CAAC,MAAM,CAAC;4BAC1B,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC;4BAC1B,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;4BACpC,qBAAM,IAAI,CAAC,aAAa,EAAE;;4BAA1B,SAA0B,CAAC;;;4BAG3B,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,UAAU,IAAI,KAAI,CAAC,OAAO,CAAC,EAAE,EAA/B,CAA+B,CAAC,CAAC,CAAC,CAAC,CAAC;iCAC5E,WAAW,EAAX,wBAAW;4BACb,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC;4BAC1B,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;4BACpC,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;4BACpC,qBAAM,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;;4BAArD,SAAqD,CAAC;;;4BAG1D,IAAI,CAAC,aAAa,IAAI,eAAe,CAAC;4BACtC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gCAC1C,IAAI,CAAC,YAAY,EAAE,CAAC;gCACpB,IAAI,CAAC,UAAU,EAAE,CAAC;4BACpB,CAAC;4BAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gCAClD,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;gCACvE,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gCAC7B,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;gCAChC,UAAU,CAAC;oCACT,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;oCAC7B,KAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;gCACxB,CAAC,EAAE,GAAG,CAAC,CAAC;4BACV,CAAC;;;4BAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;4BAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;4BACxB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;4BAChC,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;;;;;iBAEvC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YAC9C,OAAO,OAAO,CAAC,KAAK,CAAC;YACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,UAAM,EAAE;;;;;;iCACrE,GAAE,CAAC,MAAM,IAAI,SAAS,GAAtB,wBAAsB;4BACxB,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;4BACzB,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,KAAI,CAAC,OAAO,CAAC,KAAK,EAA9B,CAA8B,CAAC,CAAC,CAAC,CAAC,CAAC;iCAC/E,WAAW,EAAX,wBAAW;4BACb,OAAO,WAAW,CAAC,MAAM,CAAC;4BAC1B,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC;4BAC1B,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;4BACpC,qBAAM,IAAI,CAAC,aAAa,EAAE;;4BAA1B,SAA0B,CAAC;;;4BAE7B,IAAI,CAAC,aAAa,IAAI,eAAe,CAAC;4BACtC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gCAC1C,IAAI,CAAC,YAAY,EAAE,CAAC;gCACpB,IAAI,CAAC,UAAU,EAAE,CAAC;4BACpB,CAAC;4BAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gCAClD,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;gCACvE,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gCAC7B,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;gCAChC,UAAU,CAAC;oCACT,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;oCAC7B,KAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;gCACxB,CAAC,EAAE,GAAG,CAAC,CAAC;4BACV,CAAC;;;4BAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;4BAC7B,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;4BAChC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;4BACxB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;;;;;iBAEvC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IACD,qDAAW,GAAX,UAAY,MAAM,EAAE,CAAC;QACnB,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;YACnB,MAAM,CAAC,MAAM,CAAC;QAChB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACpC,CAAC;IACH,CAAC;IACD,oDAAU,GAAV;QAAA,iBAiBC;QAhBC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;QACvD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;eAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC5H,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;gBACpE,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;oBACrC,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;gBAChK,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,WAAW,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;gBACnE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,sCAAsC,EAAE,gCAAgC,EAAE,eAAe,EAAE,WAAW,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;YACnM,CAAC;QACH,CAAC;IACH,CAAC;IAED,wDAAc,GAAd;QAAA,iBASC;QARC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;eAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC5H,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,IAAI,WAAW,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;YACnE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,sCAAsC,EAAE,gCAAgC,EAAE,eAAe,EAAE,WAAW,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACnM,CAAC;IACH,CAAC;IAED,2DAAiB,GAAjB,UAAkB,CAAC;QAAnB,iBAWC;QAVC,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC;YAC/B,CAAC,CAAC,aAAa,CAAC,cAAc,GAAG,UAAC,IAAI;gBACpC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;oBACpB;wBACE,KAAK,CAAC;gBACV,CAAC;gBACD,KAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACzB,CAAC,CAAC;QACJ,CAAC;IACH,CAAC;IACD,uDAAa,GAAb,UAAc,CAAC;QACb,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC;YAC7B,mCAAmC;YACnC,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC;YAChC,gFAAgF;QAClF,CAAC;IACH,CAAC;IACD,uDAAa,GAAb,UAAc,CAAC;QAAf,iBAgBC;QAfC,IAAM,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO;QAC9B,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACZ,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBACnC,UAAU,CAAC,OAAO,CAAC,aAAG;oBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,OAAO,CAAC,CAAC,CAAC;wBAC3B,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;oBACpC,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC;QACJ,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAC9B,CAAC;QACD,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IACnC,CAAC;IACD,sDAAY,GAAZ,UAAa,CAAC;IAEd,CAAC;IACD,wDAAc,GAAd,UAAe,CAAC;QACd,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,MAAM,CAAC,CAAC,CAAC;YACxB,iGAAiG;YACjG,gDAAgD;YAChD,IAAI;YACJ,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBAC1B,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;oBAC3B,KAAK,cAAc;wBACjB,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,mCAAmC,CAAC,CAAC;wBACzE,KAAK,CAAC;oBACR,KAAK,gBAAgB;wBACnB,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,4BAA4B,CAAC,CAAC;wBAClE,KAAK,CAAC;oBACR,KAAK,oBAAoB;wBACvB,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,gCAAgC,CAAC,CAAC;wBACtE,KAAK,CAAC;oBACR,KAAK,aAAa;wBAChB,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,+BAA+B,CAAC,CAAC;wBACrE,KAAK,CAAC;oBACR,KAAK,mBAAmB;wBACtB,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,6BAA6B,CAAC,CAAC;wBACnE,KAAK,CAAC;oBACR,KAAK,iBAAiB;wBACpB,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,2BAA2B,CAAC,CAAC;wBACjE,KAAK,CAAC;oBACR,KAAK,SAAS;wBACZ,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,kCAAkC,CAAC,CAAC;wBACxE,KAAK,CAAC;oBACR,KAAK,iBAAiB;wBACpB,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,sCAAsC,CAAC,CAAC;wBAC5E,KAAK,CAAC;oBAER;wBACE,KAAK,CAAC;gBACV,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAED,qEAA2B,GAA3B,UAA4B,CAAC,EAAE,OAAO;QACpC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,eAAe,IAAI,EAAE,CAAC,CAAC,CAAC;YAC7D,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,aAAa,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,CAAC;gBACtG,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,UAAU,GAAG,+DAA+D,CAAC;gBACjG,CAAC,CAAC,WAAW,CAAC,KAAK,GAAG,OAAO,CAAC;YAChC,CAAC;YACD,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC;QACnC,CAAC;QACD,IAAI;YACF,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,SAAS;IACjC,CAAC;IACD,uDAAa,GAAb,UAAc,CAAC;QACb,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACX,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,0BAA0B,IAAI,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBAC7E,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;YAC5C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC;YACrC,CAAC;QACH,CAAC;QACD,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IACD,wDAAc,GAAd,UAAe,CAAC;QACd,CAAC,CAAC,SAAS,CAAC,YAAY,CAAC,cAAc,EAAE;YACvC,YAAY,EAAE,CAAC,CAAC;SACjB,CAAC,CAAC;IACL,CAAC;IACD,gEAAsB,GAAtB,UAAuB,CAAC;QAAxB,iBAWC;QAVC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACV,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC;gBAC7B,CAAC,CAAC,KAAK,GAAG,CAAC;wBACT,IAAI,EAAE,eAAe;wBACrB,WAAW,EAAE;4BACX,KAAI,CAAC,MAAM,EAAE,CAAC;wBAChB,CAAC;qBACF,CAAC,CAAC;YACL,CAAC;QACH,CAAC;IACH,CAAC;IACD,gDAAM,GAAN;QACE,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;QACvC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IACnC,CAAC;IACD,qDAAW,GAAX;QACE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;IACjC,CAAC;IACD,iDAAO,GAAP,UAAQ,CAAC;QACP,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,kDAAQ,GAAR,UAAS,CAAC;QACR,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IACD,kDAAQ,GAAR;QAAA,iBAkDC;QAjDC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAM,MAAM,GAAe,IAAI,UAAU,EAAE,CAAC;QAE5C,MAAM,CAAC,MAAM,GAAG,UAAC,CAAM;YACrB,mBAAmB;YACnB,IAAM,IAAI,GAAW,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;YACrC,IAAM,EAAE,GAAkB,yCAAS,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;YAE9D,sBAAsB;YACtB,IAAM,MAAM,GAAW,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACxC,IAAM,EAAE,GAAmB,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAE7C,eAAe;YACf,IAAI,IAAI,GAAQ,CAAC,0CAAU,CAAC,aAAa,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE1E,IAAI,UAAU,GAAQ,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;YAC9D,UAAU,CAAC,KAAK,GAAG,EAAE,CAAC;YACtB,IAAI,QAAQ,GAAQ,EAAE,CAAC;YACvB,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,EAAH,CAAG,CAAC,CAAC;gBACrC,IAAI,MAAM,GAAG,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC;gBAEhD,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjB,mDAAO,CAAC,MAAM,CAAC,8EAA8E,EAAE,OAAO,CAAC,CAAC;oBACxG,MAAM,CAAC,KAAK,CAAC;gBACf,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBACf,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;oBACzB,CAAC;oBACD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBACrC,IAAI,IAAI,GAAQ,EAAE;wBAClB,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gCAChC,IAAM,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;gCAC3B,IAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gCAC3B,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC;4BACvB,CAAC;wBACH,CAAC;wBACD,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACtB,CAAC;gBACH,CAAC;gBACD,KAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;gBAC9B,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC;YACpC,CAAC;YACD,gCAAgC;YAChC,gCAAgC;QAClC,CAAC,CAAC;QACF,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAClD,CAAC;IACD,uDAAa,GAAb,UAAc,GAAG;QACf,IAAI,CAAC,MAAM,GAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACzC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAC1C,6CAA6C;QAC7C,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACnC,mDAAO,CAAC,MAAM,CAAC,2BAA2B,EAAE,OAAO,CAAC,CAAC;YACrD,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;QAC/C,CAAC;QAAA,CAAC;QACF,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;IAC7B,CAAC;IACD,2DAAiB,GAAjB;QACE,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,KAAK,EAAE,CAAC;QAChD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC1B,CAAC;IACD,4BAA4B;IAC5B,kDAAQ,GAAR,UAAS,QAAQ;QAAjB,iBA4HC;QA3HC,IAAI,OAAO,GAAG,IAAI;QAClB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACrB,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBACnC,UAAU,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;oBAC7B,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACrC,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;QACD,QAAQ,CAAC,OAAO,CAAC,iBAAO;YACtB,IAAI,OAAO,GAAG,IAAI,MAAM,CAAC;YACzB,IAAI,wBAAwB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,KAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YACnG,EAAE,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;gBAC3B,OAAO,CAAC,YAAY,CAAC,GAAG,SAAS;gBACjC,IAAI,WAAW,GAAG,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;gBAC3D,IAAI,cAAc,GAAG,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;gBAClE,IAAI,eAAe,GAAG,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;gBAClE,IAAI,aAAa,GAAG,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;gBAC9D,EAAE,CAAC,CAAC,WAAW,IAAI,OAAO,CAAC,CAAC,CAAC;oBAC3B,mDAAO,CAAC,MAAM,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;oBAC7D,OAAO,GAAG,KAAK,CAAC;oBAChB,MAAM,CAAC;gBACT,CAAC;gBACD,OAAO,CAAC,cAAc,CAAC,GAAG,WAAW,CAAC;gBACtC,OAAO,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC;gBACjF,OAAO,CAAC,oBAAoB,CAAC,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC7F,OAAO,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC;gBACxE,OAAO,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,IAAI,CAAC,OAAO,CAAC,mBAAmB,IAAI,GAAG,IAAI,OAAO,CAAC,mBAAmB,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;gBAC1J,OAAO,CAAC,mBAAmB,CAAC,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC1F,OAAO,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC;gBACvF,OAAO,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC;gBACpF,OAAO,CAAC,SAAS,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC5D,OAAO,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAAE,CAAC;gBAChG,OAAO,CAAC,kBAAkB,CAAC,GAAG,cAAc,CAAC;gBAC7C,OAAO,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;gBACzD,OAAO,CAAC,8BAA8B,CAAC,GAAG,OAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC9I,OAAO,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC;gBACvF,OAAO,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC;gBACpF,OAAO,CAAC,+BAA+B,CAAC,GAAG,OAAO,CAAC,6BAA6B,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACjJ,OAAO,CAAC,sBAAsB,CAAC,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACtH,OAAO,CAAC,qCAAqC,CAAC,GAAG,OAAO,CAAC,mCAAmC,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,mCAAmC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACnK,OAAO,CAAC,2BAA2B,CAAC,GAAG,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACrI,OAAO,CAAC,uCAAuC,CAAC,GAAG,OAAO,CAAC,qCAAqC,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,qCAAqC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACzK,OAAO,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC/D,OAAO,CAAC,iBAAiB,CAAC,GAAG,eAAe,CAAC;gBAC7C,OAAO,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC;gBACvF,OAAO,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC;gBACjF,OAAO,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC9F,OAAO,CAAC,yBAAyB,CAAC,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC/H,OAAO,CAAC,uBAAuB,CAAC,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACzH,OAAO,CAAC,4BAA4B,CAAC,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACxI,OAAO,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACnH,OAAO,CAAC,oBAAoB,CAAC,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAChH,OAAO,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACxF,OAAO,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACxF,OAAO,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC;gBACpF,OAAO,CAAC,eAAe,CAAC,GAAG,aAAa,CAAC;gBACzC,OAAO,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;gBAC9B,OAAO,CAAC,qBAAqB,CAAC,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBACrJ,OAAO,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;gBAC9B,EAAE,EAAC,OAAO,CAAC,qBAAqB,CAAC,IAAI,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,EAAC;oBACnF,OAAO,CAAC,eAAe,CAAC,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,gBAAgB,CAAC;gBAC5E,CAAC;gBAED,OAAO,GAAG,6CAAO,CAAC,OAAO,EAAE,KAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC1D,EAAE,CAAC,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC,CAAC;oBAC1C,IAAI,GAAG,GAAG,OAAO,CAAC,6BAA6B,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBAC3D,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;wBACpB,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;oBACrF,CAAC;oBAAC,IAAI;wBACJ,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;gBAC3E,CAAC;gBACD,EAAE,CAAC,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC;oBACjC,IAAI,GAAG,GAAG,OAAO,CAAC,oBAAoB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBAClD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;wBACpB,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;oBACrF,CAAC;oBAAC,IAAI;wBACJ,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;gBAC3E,CAAC;gBACD,EAAE,CAAC,CAAC,OAAO,CAAC,mCAAmC,CAAC,CAAC,CAAC;oBAChD,IAAI,GAAG,GAAG,OAAO,CAAC,mCAAmC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACjE,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;wBACpB,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;oBACrF,CAAC;oBAAC,IAAI;wBACJ,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;gBAC3E,CAAC;gBACD,EAAE,CAAC,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC;oBACtC,IAAI,GAAG,GAAG,OAAO,CAAC,yBAAyB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACvD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;wBACpB,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;oBACrF,CAAC;oBAAC,IAAI;wBACJ,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;gBAC3E,CAAC;gBACD,EAAE,CAAC,CAAC,OAAO,CAAC,qCAAqC,CAAC,CAAC,CAAC;oBAClD,IAAI,GAAG,GAAG,OAAO,CAAC,qCAAqC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACnE,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;wBACpB,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;oBACrF,CAAC;oBAAC,IAAI;wBACJ,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;gBAC3E,CAAC;gBACD,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC;YAC/B,CAAC;QACH,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACZ,IAAI,WAAS,GAAG,EAAE,CAAC;YACnB,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBACnC,IAAI,SAAS,GAAG,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,cAAc,EAAhB,CAAgB,CAAC,CAAC;gBACzD,EAAE,CAAC,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACtC,SAAS,CAAC,OAAO,CAAC,WAAC;wBACjB,IAAI,QAAQ,GAAG,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,oBAAoB,IAAI,CAAC,CAAC,cAAc,EAA1C,CAA0C,CAAC,CAAC;wBAClF,WAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBAClB,EAAE,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;4BACpC,QAAQ,CAAC,OAAO,CAAC,aAAG;gCAClB,WAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;4BACtB,CAAC,CAAC,CAAC;wBACL,CAAC;oBACH,CAAC,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC,CAAC;YACH,mDAAmD;YACnD,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YACjC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC;IACH,CAAC;IAED,sCAAsC;IACtC,yDAAe,GAAf,UAAgB,IAAI,EAAE,IAAS;QAAT,gCAAS;QAC7B,IAAI,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACvE,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,SAAS,CAAC,OAAO,CAAC,gBAAM;YACtB,IAAM,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC;YACxB,IAAI,GAAG,GAAQ,EAAE,CAAC;YAClB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YAEX,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACrC,MAAM,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;wBACzB,KAAK,MAAM;4BACT,GAAG,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;4BACpC,KAAK,CAAC;wBACR,KAAK,SAAS;4BACZ,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;4BACpD,KAAK,CAAC;wBACR;4BACE,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;oBACpB,CAAC;gBACH,CAAC;YACH,CAAC;YACD,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;QACpB,CAAC,CAAC;QACF,MAAM,CAAC,MAAM;IACf,CAAC;IAED,uCAAuC;IACvC,8DAAoB,GAApB,UAAqB,IAAI,EAAE,IAAS;QAAT,gCAAS;QAClC,IAAI,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACrE,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACb,KAAK,UAAU;oBACb,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC;oBAChC,KAAK,CAAC;gBACR,KAAK,aAAa;oBAChB,OAAO,GAAG,IAAI,CAAC,mBAAmB,CAAC;oBACnC,KAAK;YACT,CAAC;QACH,CAAC;QACD,OAAO,CAAC,OAAO,CAAC,cAAI;YAClB,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI;YACpD,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC;gBACtC,KAAK,GAAG,mCAAM,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC;YACrD,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;gBACV,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,KAAK,EAAE,KAAK;aACb,CAAC;QACJ,CAAC,CAAC;QAEF,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAID,qCAAqC;IACrC,kDAAQ,GAAR,UAAS,MAAM;QAAf,iBAYC;QAXC,IAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,cAAI,IAAI,QAAC,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAjC,CAAiC,CAAC;QACxF,IAAI,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,cAAI,IAAI,aAAM,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,SAAS,EAAxG,CAAwG,CAAC;QAChJ,IAAI,MAAM,GAAG,KAAK,CAAC;QACnB,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACtB,MAAM,GAAG,IAAI,CAAC;QAChB,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,8BAA8B,CAAC,CAAC,CAAC;YACrD,EAAE,CAAC,CAAC,MAAM,CAAC,8BAA8B,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,KAAK,IAAI,IAAI,CAAC,CAAC,KAAK,KAAK,EAAE,IAAI,CAAC,CAAC,KAAK,IAAI,SAAS,EAA1D,CAA0D,CAAC,CAAC;gBAC9G,MAAM,CAAC,IAAI;QACf,CAAC;QACD,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAED,kEAAwB,GAAxB;QAAA,iBA4DC;QA3DC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,iBAAO;YACjC,KAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;YACvC,KAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;YAC3C,KAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;YAC7C,IAAI,UAAU,GAAG,IAAI,MAAM,CAAC;YAC5B,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;YAChC,UAAU,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,EAAE,CAAC;YAC9B,UAAU,CAAC,YAAY,CAAC,GAAG,SAAS,CAAC;YACrC,UAAU,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc;YACrD,UAAU,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;YAClD,UAAU,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC;YACtD,UAAU,CAAC,oBAAoB,CAAC,GAAG,OAAO,CAAC,kBAAkB,CAAC;YAC9D,UAAU,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC;YAChD,UAAU,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB;YAC/D,UAAU,CAAC,mBAAmB,CAAC,GAAG,OAAO,CAAC,iBAAiB,CAAC;YAC5D,UAAU,CAAC,mBAAmB,CAAC,GAAG,OAAO,CAAC,iBAAiB,CAAC;YAC5D,UAAU,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC;YAC1D,UAAU,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC,eAAe,CAAC;YACxD,UAAU,CAAC,SAAS,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC;YACxC,UAAU,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;YACpD,UAAU,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC;YAChE,UAAU,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC;YAC1D,UAAU,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC;YACtC,UAAU,CAAC,8BAA8B,CAAC,GAAG,OAAO,CAAC,4BAA4B,CAAC;YAClF,UAAU,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC;YAC1D,UAAU,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC,eAAe,CAAC;YACxD,UAAU,CAAC,+BAA+B,CAAC,GAAG,OAAO,CAAC,6BAA6B,CAAC;YACpF,UAAU,CAAC,sBAAsB,CAAC,GAAG,OAAO,CAAC,oBAAoB,CAAC;YAClE,UAAU,CAAC,qCAAqC,CAAC,GAAG,OAAO,CAAC,mCAAmC,CAAC;YAChG,UAAU,CAAC,2BAA2B,CAAC,GAAG,OAAO,CAAC,yBAAyB,CAAC;YAC5E,UAAU,CAAC,uCAAuC,CAAC,GAAG,OAAO,CAAC,qCAAqC,CAAC;YACpG,UAAU,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,KAAK,CAAC;YACtG,EAAE,EAAC,UAAU,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;gBACrC,UAAU,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC;YACnF,CAAC;YAED,UAAU,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;YAC9C,UAAU,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC;YAC5D,UAAU,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC;YAC9D,UAAU,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC;YAC1D,UAAU,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC;YACtD,UAAU,CAAC,yBAAyB,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC;YAC5E,UAAU,CAAC,uBAAuB,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC;YACxE,UAAU,CAAC,4BAA4B,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC;YAClF,UAAU,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC;YACpE,UAAU,CAAC,oBAAoB,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC;YAClE,UAAU,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;YAClD,UAAU,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;YAClD,UAAU,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC;YAC5D,UAAU,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC;YACxD,IAAI,uBAAuB,GAAG,OAAO,CAAC,GAAG,CAAC;YAC1C,EAAE,CAAC,CAAC,uBAAuB,IAAI,uBAAuB,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC1D,UAAU,CAAC,QAAQ,CAAC,GAAG,uBAAuB,CAAC,EAAE,CAAC;YACpD,CAAC;YACD,UAAU,GAAG,6CAAO,CAAC,UAAU,EAAE,KAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC;YAChE,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;QAChE,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IACD,qDAAW,GAAX;QACE,IAAI,IAAI,GAAG;YACT,OAAO,EAAE;gBACP,YAAY,EAAE,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,eAAe,CAAC;aACvD;SACF;QACD,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;YACvD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC5B,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;gBAC5B,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;gBAC9D,mDAAO,CAAC,MAAM,CAAC,4BAA4B,EAAE,SAAS,CAAC,CAAC;YAC1D,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACvC,CAAC;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,CAAC;IACJ,CAAC;IACD,8CAAI,GAAJ;QACE,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;QAC7B,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;IACxB,CAAC;IAED,2DAAiB,GAAjB;QAAA,iBA2BC;QA1BC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,MAAM,CAAC;QACX,MAAM,GAAG,iDAAK,CAAC,UAAU,CAAC,OAAO,CAAC;QAClC,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,EAAE,CAAC,CAAC,MAAM,KAAK,iDAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;YACxC,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,YAAE;gBACxE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;oBACvC,oBAAoB;oBACpB,KAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC3B,IAAI,SAAS,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBACxE,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wBAC5H,KAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;oBAC1D,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,KAAI,CAAC,aAAa,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;oBAClD,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,mDAAS,GAAT;QAAA,iBAcC;QAbC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,YAAE;YACxE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;gBAC7B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;YACzE,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,oDAAU,GAAV;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC;YAC7D,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACjD,IAAI;YACF,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IACnD,CAAC;IACD,+DAAqB,GAArB,UAAsB,GAAG;QAAzB,iBA6FC;QA5FC,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,EAAE,uBAAuB,CAAC,CAAC;QAC/E,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC;QAC1E,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;QACxB,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,YAAE;YAChE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,IAAM,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;gBAC1C,IAAM,SAAS,GAAG,8DAAkB,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;gBAC9D,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,26DAiD8C,SAAS,g1BAuBtF,CAAC,CAAC;gBACH,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC;gBACjE,KAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;YAC3B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;gBACzB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,4BAA4B;IAC5B,+DAAqB,GAArB,UAAsB,GAAG;QAAzB,iBAqBC;QApBC,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,EAAE,uBAAuB,CAAC,CAAC;QACxE,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC;QAC/D,KAAK,CAAC,IAAI,EAAE,CAAC;QACb,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACpB,IAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,YAAE;YAChE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,2BAA2B;gBAC3B,IAAI,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;gBAC1C,IAAI,OAAO,GAAG,UAAU,CAAC;gBACzB,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,SAAS,EAAE,OAAO,EAAE,oBAAoB,CAAC,CAAC;YACxG,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAK,CAAC,KAAK,EAAE,CAAC;gBACd,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACpB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;YACJ,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,EAAE;YACD,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,qDAAW,GAAX,UAAY,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE,YAAY;QACvD,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,GAAG,CAAC;QACtB,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,GAAG,GAAG,GAAG,GAAG,CAAC;QACzC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,GAAG,EAAE,GAAG,GAAG,CAAC;QACzC,IAAM,QAAQ,GAAG,OAAO,CAAC;QACzB,IAAM,SAAS,GAAG,8DAAkB,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;QAC9D,IAAM,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,CAAC,CAAC;QAC3E,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC;QACpD,GAAG,CAAC,KAAK,EAAE,CAAC;QACZ,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IAGD,6DAAmB,GAAnB,UAAoB,GAAG,EAAE,GAAG,EAAE,KAAK;QACjC,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,CAAC,OAAO,CAAC,cAAI;YACd,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC,CAAC;QACF,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAED,+DAAqB,GAArB,UAAsB,OAAO;QAA7B,iBAkBC;QAjBC,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YAClD,IAAI,GAAG,0DAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACnE,IAAI,CAAC,CAAC;YACJ,IAAI,WAAW,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;YACnE,IAAI,GAAG,0DAAc,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACvE,CAAC;QACD,IAAI,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC;QACpC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,EAAE,CAAC,CAAC,cAAc,IAAI,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAChD,cAAc,CAAC,OAAO,CAAC,cAAI;gBACzB,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;oBACpD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACnE,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC5B,CAAC,CAAC,CAAC;QACL,CAAC;IAEH,CAAC;IA3yD+B;QAA/B,+DAAS,CAAC,sEAAmB,CAAC;kCAAW,sEAAmB;qEAAC;IADnD,+BAA+B;QAL3C,+DAAS,CAAC;YACT,QAAQ,EAAE,+BAA+B;;;SAG1C,CAAC;yCAyHuB,0DAAW;YACT,4DAAa;YACR,4DAAc;YACjB,wDAAU;YACV,wDAAU;YAChB,wDAAQ;YACR,wDAAU;YACP,4DAAc;YACZ,wEAAc;YACrB,8DAAiB;OAjIzB,+BAA+B,CA6yD3C;IAAD,sCAAC;CAAA;AA7yD2C;;;;;;;;;;;;ACvB5C,qEAAqE,wEAAwE,2KAA2K,iBAAiB,oBAAoB,mBAAmB,iBAAiB,wDAAwD,uQAAuQ,sDAAsD,4oBAA4oB,oCAAoC,+fAA+f,gDAAgD,8QAA8Q,yHAAyH,sbAAsb,+BAA+B,uTAAuT,iBAAiB,kBAAkB,iBAAiB,qBAAqB,iDAAiD,wMAAwM,qDAAqD,+0BAA+0B,wCAAwC,8IAA8I,oXAAoX,8PAA8P,qDAAqD,uKAAuK,qkBAAqkB,gDAAgD,uKAAuK,6YAA6Y,oQAAoQ,sDAAsD,uKAAuK,0mBAA0mB,+CAA+C,uKAAuK,2YAA2Y,yPAAyP,mDAAmD,uKAAuK,ykBAAykB,4CAA4C,uKAAuK,qYAAqY,iBAAiB,iBAAiB,qBAAqB,gDAAgD,iQAAiQ,sCAAsC,gJAAgJ,ieAAie,mDAAmD,mXAAmX,wCAAwC,4QAA4Q,yHAAyH,saAAsa,wNAAwN,kBAAkB,oEAAoE,oOAAoO,oCAAoC,qMAAqM,yCAAyC,wNAAwN,uCAAuC,sNAAsN,0CAA0C,qRAAqR,yCAAyC,wTAAwT,2CAA2C,6PAA6P,kCAAkC,gNAAgN,aAAa,8FAA8F,sJAAsJ,iD;;;;;;;;;;;ACAvqd,oCAAoC,qBAAqB,SAAS,iBAAiB,8BAA8B,cAAc,kBAAkB,eAAe,UAAU,6BAA6B,sBAAsB,6BAA6B,qBAAqB,kCAAkC,sBAAsB,6BAA6B,qBAAqB,sBAAsB,qCAAqC,iBAAiB,0DAA0D,8BAA8B,qDAAqD,UAAU,iBAAiB,mBAAmB,gCAAgC,UAAU,8CAA8C,gBAAgB,4CAA4C,gBAAgB,iEAAiE,gBAAgB,gBAAgB,qDAAqD,gBAAgB,gBAAgB,uCAAuC,UAAU,qDAAqD,gBAAgB,mDAAmD,gBAAgB,wEAAwE,gBAAgB,gBAAgB,oCAAoC,4DAA4D,gBAAgB,gBAAgB,uBAAuB,WAAW,4CAA4C,2BAA2B,mBAAmB,yDAAyD,2BAA2B,mBAAmB,oIAAoI,mBAAmB,cAAc,WAAW,6BAA6B,gBAAgB,sBAAsB,UAAU,qBAAqB,SAAS,qBAAqB,qBAAqB,iCAAiC,UAAU,oBAAoB,gCAAgC,kBAAkB,SAAS,cAAc,YAAY,wCAAwC,2BAA2B,8BAA8B,4BAA4B,2BAA2B,6BAA6B,aAAa,SAAS,gCAAgC,aAAa,SAAS,4BAA4B,UAAU,wCAAwC,UAAU,oBAAoB,uCAAuC,kBAAkB,SAAS,cAAc,YAAY,+CAA+C,2BAA2B,qCAAqC,4BAA4B,2BAA2B,oCAAoC,aAAa,SAAS,uCAAuC,aAAa,SAAS,mBAAmB,WAAW,YAAY,2CAA2C,6BAA6B,WAAW,aAAa,sBAAsB,mBAAmB,kDAAkD,WAAW,0DAA0D,aAAa,iEAAiE,gBAAgB,0DAA0D,UAAU,iEAAiE,UAAU,qEAAqE,qBAAqB,iEAAiE,sBAAsB,wEAAwE,UAAU,wEAAwE,qBAAqB,yEAAyE,UAAU,mEAAmE,UAAU,mEAAmE,UAAU,qEAAqE,UAAU,qEAAqE,wBAAwB,4EAA4E,uBAAuB,qEAAqE,YAAY,sDAAsD,UAAU,aAAa,8BAA8B,2DAA2D,kCAAkC,WAAW,YAAY,+BAA+B,kBAAkB,2EAA2E,2BAA2B,4BAA4B,6BAA6B,4BAA4B,2FAA2F,sBAAsB,8BAA8B,+NAA+N,sBAAsB,8BAA8B,gGAAgG,8BAA8B,4HAA4H,0BAA0B,WAAW,gBAAgB,mBAAmB,oDAAoD,4BAA4B,kDAAkD,UAAU,kBAAkB,+CAA+C,YAAY,uDAAuD,uBAAuB,kGAAkG,gBAAgB,4DAA4D,mBAAmB,uDAAuD,UAAU,iBAAiB,UAAU,gBAAgB,UAAU,wCAAwC,wBAAwB,oGAAoG,wBAAwB,YAAY,2BAA2B,4CAA4C,kBAAkB,oBAAoB,mDAAmD,4CAA4C,iBAAiB,oBAAoB,uCAAuC,UAAU,wCAAwC,WAAW,kBAAkB,uBAAuB,eAAe,WAAW,YAAY,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAr8M;AACjF;AACxC;AAC2B;AACA;AACsC;AAC5B;AACZ;AACsF;AAE1G;AAGC;AAC+B;AACjB;AACyB;AACnB;AACG;AACA;AACjB;AAC+D;AAC3B;AACF;AAO1E;IAgDE,qCACU,WAAwB,EACzB,SAA2B,EAC1B,YAA4B,EAC5B,EAAe,EACf,cAA8B,EAC9B,aAA4B,EAC5B,KAAwB,EACxB,cAA8B,EAC9B,OAA0B,EAC1B,KAAqB,EACrB,MAAc,EACd,cAA8B,EAC9B,mBAAqC,EACrC,kBAAsC;QAbtC,gBAAW,GAAX,WAAW,CAAa;QACzB,cAAS,GAAT,SAAS,CAAkB;QAC1B,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,OAAE,GAAF,EAAE,CAAa;QACf,mBAAc,GAAd,cAAc,CAAgB;QAC9B,kBAAa,GAAb,aAAa,CAAe;QAC5B,UAAK,GAAL,KAAK,CAAmB;QACxB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,YAAO,GAAP,OAAO,CAAmB;QAC1B,UAAK,GAAL,KAAK,CAAgB;QACrB,WAAM,GAAN,MAAM,CAAQ;QACd,mBAAc,GAAd,cAAc,CAAgB;QAC9B,wBAAmB,GAAnB,mBAAmB,CAAkB;QACrC,uBAAkB,GAAlB,kBAAkB,CAAoB;QA3DhD,WAAM,GAAQ,EAAE,CAAC;QAGjB,YAAO,GAAQ,EAAE,CAAC;QAMlB,eAAU,GAAG;YACX,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE;YACvB,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE;SAC3B,CAAC;QAGF,WAAM,GAAY,KAAK,CAAC;QACxB,aAAQ,GAAe,EAAE,CAAC;QAK1B,eAAU,GAAG,CAAC,CAAC;QACf,sBAAiB,GAAG,KAAK,CAAC;QAC1B,wBAAmB,GAAG,KAAK,CAAC;QAC5B,aAAQ,GAAG,KAAK,CAAC;QAEjB,mBAAc,GAAQ,EAAE,CAAC;QACzB,cAAS,GAAG,EAAE,CAAC;QACf,gBAAW,GAAG,EAAE,CAAC;QACjB,kBAAa,GAAG,EAAE,CAAC;QACnB,kBAAa,GAAQ,EAAE,CAAC;QAExB,YAAO,GAAQ,EAAE,CAAC;QAClB,kBAAa,GAAQ,EAAE,CAAC;QACxB,WAAM,GAAQ,EAAE,CAAC;QACjB,iBAAY,GAAG,sDAAO,CAAC,KAAK,CAAC;QAC7B,aAAQ,GAAQ,EAAE,CAAC;QACnB,WAAM,GAAQ,EAAE,CAAC;QAEjB,oBAAe,GAAG,IAAI,CAAC;QACvB,kBAAa,GAAG,IAAI,CAAC;QACrB,wBAAmB,GAAG,KAAK,CAAC;QAG5B,iBAAY,GAAG,CAAC,CAAC;QAsyBjB,iBAAY,GAAG,UAAC,CAAC;YACf,IAAI,EAAE,GAAG,CAAC,CAAC;QACb,CAAC;QAvxBC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAClD,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,CAAC;IAChD,CAAC;IAED,8CAAQ,GAAR;QAAA,iBA6DC;QA5DC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;QACrD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC;YACjD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC;gBAC5C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,CAAC;QAC7E,CAAC;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,UAAC,IAAS;YAClD,eAAe;YACf,IAAI,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC7C,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC7C,KAAI,CAAC,SAAS,GAAG,gEAAoB,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;YAC9F,iFAAiF;YACjF,KAAI,CAAC,SAAS,CAAC,WAAW,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC;YACvE,KAAI,CAAC,MAAM,CAAC,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACvF,KAAI,CAAC,MAAM,CAAC,6BAA6B,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACxG,KAAI,CAAC,MAAM,CAAC,oBAAoB,GAAG,QAAQ,CAAC,uBAAuB,CAAC,CAAC,CAAC,QAAQ,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACnH,KAAI,CAAC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YAC7E,KAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YAC/E,KAAI,CAAC,MAAM,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACjF,IAAI,MAAM,GAAG,KAAK,CAAC,CAAC,eAAe;YACnC,IAAI,OAAY,CAAC;YACjB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;gBACtE,MAAM,GAAG,IAAI,CAAC;YAChB,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACX,KAAI,CAAC,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,aAAa,IAAI,uBAAuB,EAA7C,CAA6C,CAAC,CAAC;gBACvG,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACzB,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjB,KAAI,CAAC,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,aAAa,IAAI,uBAAuB,EAA7C,CAA6C,CAAC,CAAC;gBACzG,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,aAAa,IAAI,uBAAuB,EAA7C,CAA6C,CAAC,CAAC;gBACzG,CAAC;YACH,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACX,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;YAC9B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,iBAAiB,EAAE,CAAC;gBAEzB,KAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC;gBAChD,KAAI,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,6BAA6B,CAAC;gBACvE,KAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,mCAAmC,CAAC;gBACpF,KAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACzI,CAAC;YACD,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBACtD,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAClC,CAAC;YACD,KAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,KAAI,CAAC,aAAa,EAAE,CAAC;YACrB,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;QACH,IAAM,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrE,IAAM,IAAI,GAAG,eAAe,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,KAAK,WAAW,EAAjB,CAAiB,CAAC,CAAC;QAC5D,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAChC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QACjC,CAAC;IACH,CAAC;IAED,mDAAa,GAAb;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;YAC9C,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBACzC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;gBAC1B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC/B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;gBAC3B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC/B,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC9B,CAAC;IACH,CAAC;IACD,iDAAW,GAAX;QACE,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;IAC9B,CAAC;IACD,qDAAe,GAAf;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YACnD,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;QAC7B,CAAC;IACH,CAAC;IACD,kCAAkC;IAClC,mDAAa,GAAb,UAAc,CAAC;QAAf,iBAkBC;QAjBC,IAAM,YAAY,GAAG;YACnB,MAAM,EAAE,CAAC;YACT,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,KAAK,EAAE,IAAI;SACZ,CAAC;QACF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,oEAAsB,EAAE;YAC/D,KAAK,EAAE,UAAU,EAAE,YAAY,gBAAE,QAAQ,EAAE,QAAQ;YACnD,QAAQ,EAAE,KAAK;SAChB,CAAC,CAAC;QACH,IAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;YAClD,IAAM,IAAI,GAAG,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,CAAC;YACrD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,gDAAgD;gBAChD,sBAAsB;YACxB,CAAC;YACD,QAAQ,CAAC,WAAW,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,qDAAe,GAAf;QACE,6CAA6C;QAC7C,0BAA0B;QAC1B,MAAM;IACR,CAAC;IACD,4BAA4B;IAC5B,kDAAkD;IAClD,gCAAgC;IAChC,WAAW;IACX,yBAAyB;IACzB,IAAI;IACJ,MAAM;IACN,uDAAiB,GAAjB;QACE,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YAC9D,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YAClD,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/C,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBACrD,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBAC/D,CAAC;YACH,CAAC;YACD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QAC1D,CAAC;QACD,IAAI,YAAY,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACpE,4CAA4C;QAC5C,mDAAmD;IACrD,CAAC;IACD,MAAM;IACN,mDAAa,GAAb,UAAc,IAAI;QAAlB,iBAkDC;QAjDC,wBAAwB;QACxB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAChC,WAAW;QACX,wFAAwF;QACxF,oFAAoF;QACpF,+BAA+B;QAC/B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,IAAI,IAAI,CAAC,WAAW,EAA3B,CAA2B,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QAC3F,WAAW;QACX,uCAAuC;QACvC,IAAI;QACJ,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;YACnB,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,KAAK,KAAI,CAAC,OAAO,CAAC,WAAW,EAApC,CAAoC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7F,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACZ,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC;gBACzC,wDAAwD;gBACxD,sDAAsD;YACxD,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;gBAChC,sCAAsC;gBACtC,qCAAqC;YACvC,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;QACrC,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;YACpC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC5C,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAClC,CAAC;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,cAAI;YACjC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC5C,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;oBACvB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,KAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;oBACvC,CAAC;gBACH,CAAC;gBACD,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;QACH,CAAC,CAAC,CAAC;QACH,sCAAsC;QACtC,sBAAsB;QACtB,wDAAwD;QACxD,kDAAkD;QAClD,kCAAkC;QAClC,IAAI;QACJ,8BAA8B;QAC9B,qGAAqG;IACvG,CAAC;IACD,oDAAc,GAAd;QAAA,iBA4DC;QA3DC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,MAAM,CAAC;QACX,MAAM,GAAG,iDAAK,CAAC,UAAU,CAAC,OAAO,CAAC;QAClC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YACrB,MAAM,GAAG,iDAAK,CAAC,UAAU,CAAC,OAAO,CAAC;QACpC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;YACzD,MAAM,GAAG,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC;QAClC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;YACzD,MAAM,GAAG,UAAU,CAAC;QACtB,CAAC;QAED,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,EAAE,CAAC,CAAC,MAAM,KAAK,iDAAK,CAAC,UAAU,CAAC,OAAO,IAAI,MAAM,KAAK,UAAU,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,IAAI,CAAC;YACvB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,8BAA8B,CAAC,CAAC,CAAC;gBAChD,IAAI,CAAC,OAAO,CAAC,8BAA8B,CAAC,OAAO,CAAC,cAAI;oBACtD,OAAO,IAAI,CAAC,EAAE,CAAC;gBACjB,CAAC,CAAC;YACJ,CAAC;YACD,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,YAAE;gBACzE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;oBACzC,KAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;oBACvC,oBAAoB;oBACpB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wBAC5H,KAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;oBACvD,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,KAAI,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBACpC,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,KAAK,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YAC7C,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,YAAE;gBAChG,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;oBACvC,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wBAC5H,KAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;oBACvD,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,KAAI,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBACvD,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IACD,sDAAgB,GAAhB,UAAiB,IAAI;QAArB,iBA0BC;QAzBC,IAAM,sBAAsB,GAAG;YAC7B,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YACnB,QAAQ,EAAE;gBACR,SAAS,EAAE,kBAAkB;gBAC7B,YAAY,EAAE,IAAI;aACnB;SACF;QACD,UAAU,CAAC;YACT,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,EAAE,EAAE,CAAC,CAAC;QACP,IAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC,SAAS,CAAC,YAAE;YAC1E,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,cAAc,EAAE,CAAC;gBACtB,8CAA8C;gBAC9C,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;gBACjE,KAAI,CAAC,eAAe,GAAG,IAAI,CAAC;gBAC5B,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;YAC3C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,gDAAU,GAAV,UAAW,UAAU,EAAE,QAAS;QAAhC,iBAEC;QADC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,CAAC,YAAY,EAAE,kBAAkB,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IACvL,CAAC;IACD,wBAAwB;IACxB,sDAAgB,GAAhB;QAAA,iBAsBC;QArBC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,iBAAO;YACjE,IAAM,IAAI,GAAQ,OAAO,CAAC;YAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,UAAU,CAAC,CAAC,CAAC;gBAChC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,kBAAkB,CAAC,CAAC,CAAC;oBAC1C,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC3C,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,gCAAgC,CAAC,CAAC,CAAC;oBAC/D,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;oBAChD,KAAI,CAAC,cAAc,EAAE,CAAC;gBACxB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,+CAA+C;oBAC/C,6CAA6C;oBAC7C,6CAA6C;oBAC7C,MAAM;oBACN,MAAM;oBACN,KAAI,CAAC,UAAU,EAAE,CAAC;oBAClB,+DAA+D;oBAC/D,2BAA2B;oBAC3B,IAAI;gBACN,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,kBAAkB;IAClB,oDAAc,GAAd;QACE,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACrB,CAAC;IACD,MAAM;IACN,2DAAqB,GAArB,UAAsB,IAAI;QACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAExC,gEAAgE;IAClE,CAAC;IAED,+DAAyB,GAAzB;QACE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC3C,CAAC;IAED,2DAAqB,GAArB;QACE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC9C,CAAC;IACD,MAAM;IACN,yDAAmB,GAAnB,UAAoB,UAAU,EAAE,QAAQ;QACtC,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC1C,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,8CAAS,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;QACxC,eAAe;IACjB,CAAC;IAED,oDAAc,GAAd;QAAA,iBAgBC;QAfC,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,UAAU,CAAC;YACT,EAAE,EAAC,CAAC,KAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;gBACpB,IAAM,YAAY,GAAG;oBACnB,MAAM,EAAE,gBAAgB;oBACxB,oBAAoB,EAAE,8BAA8B;oBACpD,cAAc,EAAE,+BAA+B;oBAC/C,qBAAqB,EAAE,qCAAqC;iBAC7D;gBACD,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,YAAY,CAAC,EAAC;oBAC9B,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,KAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBAClH,CAAC;YACH,CAAC;YACD,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAGD,6DAAuB,GAAvB;QACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YACrB,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAClE,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,MAAM;IACN,mDAAa,GAAb;QAAA,iBAsCC;QArCC,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,UAAC,GAAG;YACzC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACjC,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC9C,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC/C,CAAC;QACH,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAC9D,MAAM,CAAC,IAAI,gDAAU,CACnB,UAAC,QAAQ;gBACP,KAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC,SAAS,CACrC,eAAK;oBACH,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;wBACd,KAAK,KAAK;4BACR,KAAI,CAAC,OAAO,CAAC,iDAAK,CAAC,SAAS,CAAC,MAAM,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,gBAAM;gCAC5D,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gCACtB,QAAQ,CAAC,QAAQ,EAAE,CAAC;4BACtB,CAAC,CAAC,CAAC;4BACH,KAAK,CAAC;wBACR,KAAK,IAAI;4BACP,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;4BACpB,QAAQ,CAAC,QAAQ,EAAE,CAAC;4BACpB,KAAK,CAAC;wBACR,KAAK,QAAQ;4BACX,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;4BACrB,QAAQ,CAAC,QAAQ,EAAE,CAAC;4BACpB,KAAK,CAAC;wBACR;4BACE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;4BACpB,QAAQ,CAAC,QAAQ,EAAE,CAAC;4BACpB,KAAK,CAAC;oBACV,CAAC;gBACH,CAAC,CACF,CAAC;YACJ,CAAC,CAAC,CAAC;QACP,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;IACH,CAAC;IACD,MAAM;IACA,6CAAO,GAAb,UAAc,IAAI,EAAE,IAAI;;;;;;wBACtB,oDAAoD;wBACpD,6BAA6B;wBAC7B,kBAAkB;wBAClB,IAAI;wBACJ,EAAE,CAAC,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;4BACnC,IAAI,CAAC,yBAAyB,CAAC,KAAK,EAAE,CAAC;4BACvC,MAAM,gBAAC,KAAK,EAAC;wBACf,CAAC;wBACD,qBAAM,IAAI,CAAC,iBAAiB,EAAE;;wBAA9B,SAA8B,CAAC;wBAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,8BAA8B,CAAC,CAAC,CAAC;4BAChD,IAAI,CAAC,OAAO,CAAC,8BAA8B,CAAC,OAAO,CAAC,cAAI;gCACtD,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC;gCACvB,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC;gCACpB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;gCACrB,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC;gCAC1B,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC;gCAC1B,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC;4BACzB,CAAC,CAAC,CAAC;wBACL,CAAC;6BACG,IAAI,CAAC,EAAE,EAAP,wBAAO;wBACT,mDAAO,CAAC,WAAW,EAAE,CAAC;wBACf,qBAAM,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,aAAG;gCACzF,mDAAO,CAAC,WAAW,EAAE,CAAC;gCACtB,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oCAC7B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;oCACjE,MAAM,CAAC,IAAI,CAAC;gCACd,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oCACrC,MAAM,CAAC,KAAK,CAAC;gCACf,CAAC;4BACH,CAAC,CAAC;4BATF,sBAAO,SASL,EAAC;;wBAEH,mDAAO,CAAC,WAAW,EAAE,CAAC;wBACf,qBAAM,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,aAAG;gCAC1E,mDAAO,CAAC,WAAW,EAAE,CAAC;gCACtB,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oCAC7B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;oCACjE,MAAM,CAAC,IAAI,CAAC;gCACd,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oCACrC,MAAM,CAAC,KAAK,CAAC;gCACf,CAAC;4BACH,CAAC,CAAC;4BATF,sBAAO,SASL,EAAC;;;;KAEN;IACD,MAAM;IACN,uDAAiB,GAAjB;QAAA,iBAUC;QATC,IAAM,IAAI,GAAG,UAAC,KAAK;YAAE,cAAO;iBAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;gBAAP,6BAAO;;YAAK,WAAI,OAAO,CAAC,iBAAO,IAAI,iBAAU,gBAAC,OAAO,EAAE,KAAK,SAAK,IAAI,IAAlC,CAAmC,CAAC;QAA3D,CAA2D,CAAC;QAC7F,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACpB,qBAAqB;YACrB,KAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpB,0EAA0E;YAC1E,kCAAkC;YAClC,mHAAmH;YACnH,MAAM,CAAC,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;IACL,CAAC;IACD,kBAAkB;IAClB,6CAAO,GAAP,UAAQ,IAAI,EAAE,YAAa;QAA3B,iBAmCC;QAjCC,EAAE,CAAC,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,yBAAyB,CAAC,KAAK,EAAE,CAAC;YACvC,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,6BAA6B;QAC7B,UAAU,CAAC;YACT,KAAI,CAAC,cAAc,EAAE,CAAC;YACtB,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,UAAU,EAAE,CAAC;YAClC,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnB,MAAM,CAAC;YACT,CAAC;YACD,KAAI,CAAC,QAAQ,GAAG,uFAAe,CAAC,kBAAkB,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YAClF,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnB,mDAAO,CAAC,MAAM,CAAC,oEAAM,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,eAAe,EAAE,mCAAM,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,mCAAM,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;gBACjN,MAAM,CAAC;YACT,CAAC;YACD,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,8BAA8B,CAAC,CAAC,CAAC;gBAChD,KAAI,CAAC,OAAO,CAAC,8BAA8B,CAAC,OAAO,CAAC,cAAI;oBACtD,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC;oBACvB,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC;oBACpB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;oBACrB,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC;oBAC1B,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC;oBAC1B,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC;gBACzB,CAAC,CAAC,CAAC;YACL,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,KAAK,MAAM,IAAI,CAAC,IAAI,KAAK,iDAAK,CAAC,SAAS,CAAC,OAAO,IAAI,KAAI,CAAC,OAAO,CAAC,MAAM,KAAK,iDAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBAClH,KAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,YAAY,CAAC;YAC5C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC;YAC1B,CAAC;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,wBAAwB;IACxB,uDAAiB,GAAjB,UAAkB,IAAI,EAAE,YAAY;QAApC,iBAgBC;QAfC,EAAE,CAAC,CAAC,IAAI,KAAK,iDAAK,CAAC,SAAS,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,iDAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;YAC7F,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAClC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,iDAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;gBACzD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAChC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,kDAAM,CAAC,gBAAgB,CAAC;oBACtB,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gBAC/B,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACnC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;QACjC,CAAC;IACH,CAAC;IACD,yDAAmB,GAAnB,UAAoB,IAAI;QAAxB,iBA+BC;QA9BC,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC;QACtD,IAAI,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACrE,OAAO,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,UAAU,CAAC;QACpD,IAAI,eAAe,GAAG;YACpB,OAAO,EAAE,OAAO;YAChB,UAAU,EAAE,UAAU;YACtB,kBAAkB,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,iCAAiC,CAAC,WAAW,EAAE;YAC7F,mBAAmB,EAAE,KAAK;YAC1B,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,SAAS;YACnD,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,wCAAwC;SACnF;QACD,IAAM,YAAY,GAAG;YACnB,eAAe,EAAE,eAAe;SACjC,CAAC;QAEF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,qHAAuB,EAAE;YACvE,QAAQ,EAAE,QAAQ;YAClB,QAAQ,EAAE,KAAK;YACf,KAAK,EAAE,oCAAoC;YAC3C,YAAY;SACb,CAAC,CAAC;QAEH,IAAM,QAAQ,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,SAAS,CAAC;YACzD,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,IAAI,iDAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;gBACxE,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;gBAChC,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrB,CAAC;YACD,QAAQ,CAAC,WAAW,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,2BAA2B;IAC3B,mDAAa,GAAb,UAAc,IAAI;QAChB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC5B,CAAC;IACD,oDAAc,GAAd;QACE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC;QAC7C,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAEjD,+EAA+E;QAC/E,mHAAmH;IACrH,CAAC;IAED,2DAAqB,GAArB;QACE,IAAI,CAAC,OAAO,GAAG,IAAI,4EAAmB,EAAE,CAAC;QACzC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IACD,cAAc;IACd,gDAAU,GAAV;QACE,IAAI,QAAQ,GAAG,IAAI,CAAC;QAEpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;YAC9B,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,YAAY,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YACjH,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;YACvB,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YAC7G,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,qCAAqC;QACrC,uHAAuH;QACvH,kBAAkB;QAClB,IAAI;QAEJ,sCAAsC;QACtC,kHAAkH;QAClH,kBAAkB;QAClB,IAAI;QAEJ,mCAAmC;QACnC,qHAAqH;QACrH,kBAAkB;QAClB,IAAI;QAEJ,mEAAmE;QACnE,8EAA8E;QAC9E,kBAAkB;QAClB,IAAI;QAEJ,uCAAuC;QACvC,8GAA8G;QAC9G,kBAAkB;QAClB,IAAI;QAEJ,+FAA+F;QAC/F,qFAAqF;QACrF,kBAAkB;QAClB,IAAI;QACJ,MAAM,CAAC,QAAQ,CAAC;IAClB,CAAC;IACD,aAAa;IACb,4CAAM,GAAN,UAAO,IAAI;QAAX,iBAoCC;QAnCC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YACpB,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,YAAE;gBACxF,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;oBACvE,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gBAC3C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;gBACjE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;oBACvE,oDAAoD;oBACpD,oGAAoG;oBACpG,0IAA0I;oBAC1I,IAAI;oBACJ,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gBAC3C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,gDAAU,GAAV,UAAW,IAAI;QACb,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC9M,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;IACH,CAAC;IACD,iBAAiB;IACjB,+CAAS,GAAT,UAAU,IAAI;QAAd,iBAiBC;QAhBC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;YAC1D,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;gBAC7B,wDAAwD;gBACxD,0FAA0F;gBAC1F,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,wBAAwB,EAAE,SAAS,CAAC,CAAC;gBAC3E,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;YAC3C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iDAAW,GAAX,UAAY,CAAC;QAAb,iBAiHC;QAhHC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;YACpC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;gBAC3B,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM;gBACzB,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;gBACtC,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;oBACvB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;wBACxB,KAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;oBACnC,CAAC;gBACH,CAAC;gBACD,kBAAkB;gBAClB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;oBAChB,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC;oBACpB,KAAI,CAAC,WAAW,GAAG,EAAE,CAAC;oBACtB,IAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;oBAC3D,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBACxC,KAAI,CAAC,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;wBACnC,KAAI,CAAC,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;wBACjC,KAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,KAAK,CAAC;wBACpC,KAAI,CAAC,aAAa,CAAC,aAAa,GAAG,KAAK,CAAC;wBACzC,KAAI,CAAC,aAAa,CAAC,iBAAiB,GAAG,KAAK,CAAC;wBAC7C,KAAI,CAAC,aAAa,CAAC,UAAU,GAAG,KAAK,CAAC;wBACtC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;4BAC3C,IAAM,MAAM,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;4BACrC,IAAM,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;4BACvC,IAAM,GAAG,GAAG,0DAAc,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;4BACpD,KAAI,CAAC,aAAa,CAAC,0DAAc,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC;wBACtE,CAAC;oBACH,CAAC;oBACD,IAAM,eAAa,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;oBAC9D,EAAE,CAAC,CAAC,eAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,eAAa,CAAC,OAAO,CAAC,eAAK;4BACzB,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;gCAClB,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;oCAC9B,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,QAAQ,EAAE,cAAc;wCACxB,UAAU,EAAE,WAAW;wCACvB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE;wCAC3B,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC;yCACF;qCACF,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;oCAClC,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,QAAQ,EAAE,cAAc;wCACxB,UAAU,EAAE,aAAa;wCACzB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE;wCAC3B,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC;4CACD,MAAM,EAAE,KAAI,CAAC,SAAS,CAAC,qBAAqB;4CAC5C,eAAe,EAAE,IAAI;yCACtB;qCACF,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;oCAC/B,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,QAAQ,EAAE,cAAc;wCACxB,UAAU,EAAE,WAAW;wCACvB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE;wCAC3B,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC,EAAE,aAAa,EAAE,YAAY,EAAE,uBAAuB,EAAE,qBAAqB;yCAC/E;qCACF,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;oCAClC,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,QAAQ,EAAE,cAAc;wCACxB,UAAU,EAAE,aAAa;wCACzB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE;qCAC5B,CACF,CAAC;gCACJ,CAAC;4BACH,CAAC;wBACH,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;wBAC9C,KAAI,CAAC,OAAO,CAAC,8BAA8B,GAAG,eAAa,CAAC;oBAC9D,CAAC;oBACD,IAAI;wBACF,KAAI,CAAC,OAAO,CAAC,8BAA8B,GAAG,EAAE,CAAC;oBACnD,eAAa,CAAC,OAAO,CAAC,eAAK;wBACzB,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;oBAC/C,CAAC,CAAC,CAAC;gBACL,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC;oBACpB,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC;oBACxB,KAAI,CAAC,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;oBACnC,KAAI,CAAC,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;oBACjC,KAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,KAAK,CAAC;oBACpC,KAAI,CAAC,aAAa,CAAC,aAAa,GAAG,KAAK,CAAC;oBACzC,KAAI,CAAC,aAAa,CAAC,iBAAiB,GAAG,KAAK,CAAC;oBAC7C,KAAI,CAAC,aAAa,CAAC,UAAU,GAAG,KAAK,CAAC;gBACxC,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAID,sDAAgB,GAAhB;QAAA,iBAgGC;QA/FC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;YACpC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC5C,kBAAkB;gBAClB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC1C,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC;oBACpB,KAAI,CAAC,WAAW,GAAG,EAAE,CAAC;oBACtB,IAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;oBAC3D,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBACxC,KAAI,CAAC,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;wBACnC,KAAI,CAAC,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;wBACjC,KAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,KAAK,CAAC;wBACpC,KAAI,CAAC,aAAa,CAAC,aAAa,GAAG,KAAK,CAAC;wBACzC,KAAI,CAAC,aAAa,CAAC,iBAAiB,GAAG,KAAK,CAAC;wBAC7C,KAAI,CAAC,aAAa,CAAC,UAAU,GAAG,KAAK,CAAC;wBACtC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;4BAC3C,IAAM,MAAM,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;4BACrC,IAAM,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;4BACvC,IAAI,GAAG,GAAG,0DAAc,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;4BAClD,KAAI,CAAC,aAAa,CAAC,0DAAc,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC;wBACtE,CAAC;oBACH,CAAC;oBACD,IAAM,eAAa,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;oBAC9D,EAAE,CAAC,CAAC,eAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,eAAa,CAAC,OAAO,CAAC,eAAK;4BACzB,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;gCAClB,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;oCAC9B,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,WAAW;wCACvB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE;wCAC3B,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC;yCACF;qCACF,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;oCAClC,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,aAAa;wCACzB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE;wCAC3B,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC;4CACD,MAAM,EAAE,KAAI,CAAC,SAAS,CAAC,qBAAqB;4CAC5C,eAAe,EAAE,IAAI;yCACtB;qCACF,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;oCAC/B,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,WAAW;wCACvB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE;wCAC3B,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC,EAAE,aAAa,EAAE,YAAY,EAAE,uBAAuB,EAAE,qBAAqB;yCAC/E;qCACF,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;oCAClC,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,aAAa;wCACzB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE;qCAC5B,CACF,CAAC;gCACJ,CAAC;4BACH,CAAC;wBACH,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;oBAChD,CAAC;oBACD,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,8BAA8B,IAAI,KAAI,CAAC,OAAO,CAAC,8BAA8B,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC1G,KAAI,CAAC,OAAO,CAAC,8BAA8B,CAAC,OAAO,CAAC,iBAAO;4BACzD,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC;wBACnD,CAAC,CAAC,CAAC;oBACL,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,eAAa,CAAC,OAAO,CAAC,eAAK;4BACzB,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;wBAC/C,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,OAAO,CAAC,8BAA8B,GAAG,eAAa,CAAC;oBAC9D,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,2CAA2C;IAC3C,gDAAU,GAAV,UAAW,aAAa;QAAxB,iBASC;QARC,aAAa,CAAC,OAAO,CAAC,cAAI;YACxB,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACnC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,KAAK,GAAG,KAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;gBACvC,CAAC;YACH,CAAC;YACD,KAAI,CAAC,OAAO,CAAC,8BAA8B,GAAG,aAAa,CAAC;QAC9D,CAAC,CAAC,CAAC;IACL,CAAC;IACD,uBAAuB;IACvB,uDAAiB,GAAjB;QACE,MAAM,CAAC;YACL,QAAQ,EAAE,OAAO;YACjB,QAAQ,EAAE,GAAG;YACb,KAAK,EAAE,IAAI,CAAC,WAAW;SACxB,CAAC;IACJ,CAAC;IACD,0DAAoB,GAApB;QACE,qCAAqC;QACrC,iBAAiB;QACjB,IAAI;QACJ,gBAAgB;IAClB,CAAC;IACD,gDAAU,GAAV;QACE,kCAAkC;QAClC,oHAAoH;QACpH,mNAAmN;QACnN,6DAA6D;QAC7D,gKAAgK;QAChK,uEAAuE;QACvE,0KAA0K;QAC1K,IAAI;IACN,CAAC;IACD,4BAA4B;IAC5B,6CAAO,GAAP;QAAA,iBAUC;QATC,UAAU,CAAC;YACT,KAAI,CAAC,cAAc,EAAE,CAAC;YACtB,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC;YACT,CAAC;YACD,IAAI,IAAI,GAAG,KAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;YAClE,IAAI,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,UAAU,CAAC;YACjD,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACvC,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,0CAAI,GAAJ;QACE,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC1B,IAAI,MAAW,CAAC;QAChB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;YACrC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAChE,MAAM,CAAC,SAAS,CAAC,GAAG,gDAAW,CAAC,iDAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC,iBAAiB;QACpF,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAClD,MAAM,CAAC,SAAS,CAAC,GAAG,gDAAW,CAAC,iDAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;YAChE,MAAM,CAAC,SAAS,CAAC,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC;QAC7C,CAAC;QACD,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACzC,CAAC;IACD,qDAAe,GAAf,UAAgB,MAAM;QACpB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC3B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC5C,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gBAC3C,IAAI,CACF,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACzC,CAAC;YACD,IAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;YAC/C,mEAAmE;QACrE,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,uCAAuC;QACzC,CAAC;IACH,CAAC;IACD,6CAAO,GAAP,UAAQ,CAAM;QACZ,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC7B,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC;QAClC,CAAC;IACH,CAAC;IACD,uDAAiB,GAAjB;QACE,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAAA,CAAC;IAEF,gBAAgB;IAChB,mBAAmB;IACnB,gCAAgC;IAChC,qBAAqB;IACrB,aAAa;IACb,uEAAuE;IACvE,sCAAsC;IACtC,sBAAsB;IACtB,uBAAuB;IACvB,+BAA+B;IAC/B,4BAA4B;IAC5B,mFAAmF;IACnF,+BAA+B;IAC/B,qCAAqC;IACrC,6BAA6B;IAC7B,8BAA8B;IAC9B,sBAAsB;IACtB,sBAAsB;IACtB,yBAAyB;IACzB,2BAA2B;IAC3B,iCAAiC;IACjC,yBAAyB;IACzB,+BAA+B;IAC/B,iCAAiC;IACjC,yBAAyB;IACzB,yBAAyB;IACzB,yBAAyB;IACzB,gBAAgB;IAChB,cAAc;IACd,aAAa;IACb,eAAe;IACf,uBAAuB;IACvB,QAAQ;IACR,MAAM;IACN,IAAI;IACJ,aAAa;IACb,aAAa;IACb,iDAAiD;IACjD,2CAA2C;IAC3C,mDAAmD;IACnD,yDAAyD;IACzD,uDAAuD;IACvD,qDAAqD;IACrD,uDAAuD;IACvD,yGAAyG;IACzG,sBAAsB;IACtB,yBAAyB;IACzB,kCAAkC;IAClC,8CAA8C;IAC9C,IAAI;IACJ,wDAAkB,GAAlB,UAAmB,CAAC;QAClB,oDAAoD;QACpD,IAAI,CAAC,UAAU,EAAE;IACnB,CAAC;IACD,iDAAW,GAAX,UAAY,UAAU;QACpB,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,UAAU,EAApB,CAAoB,CAAC,CAAC;QACxD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACnB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACnB,MAAM,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;YAC3B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;YAC5B,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;QAC5B,CAAC;IACH,CAAC;IACD,sDAAgB,GAAhB,UAAiB,CAAC;QAChB,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;YAC/D,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACb,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;gBACjC,mCAAmC;YACrC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAClC,CAAC;QACH,CAAC;IACH,CAAC;IACD,wDAAkB,GAAlB;QAAA,iBAgBC;QAfC,kFAAkF;QAClF,IAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,gBAAgB,CAAC;QAC5C,IAAM,IAAI,GAAG;YACX,MAAM,EAAE;gBACN,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;aACrD;SACF,CAAC;QACF,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,aAAG;YACtD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,UAAC,GAAG;oBACzC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;wBAC/B,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAClD,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,0CAAI,GAAJ;QACE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC;IAChD,CAAC;IAhnC8B;QAA9B,kEAAY,CAAC,kEAAe,CAAC;;mEAAiB;IACnB;QAA3B,+DAAS,CAAC,kEAAe,CAAC;kCAAO,kEAAe;6DAAC;IAQzC;QAAR,2DAAK,EAAE;;gEAAS;IACR;QAAR,2DAAK,EAAE;;mEAAY;IAXT,2BAA2B;QALvC,+DAAS,CAAC;YACT,QAAQ,EAAE,yBAAyB;;;SAGpC,CAAC;yCAkDuB,uDAAW;YACd,oEAAgB;YACZ,kEAAc;YACxB,0DAAW;YACC,uEAAc;YACf,yDAAa;YACrB,+DAAiB;YACR,+EAAc;YACrB,8DAAiB;YACnB,+DAAc;YACb,uDAAM;YACE,uEAAc;YACT,0FAAgB;YACjB,wFAAkB;OA9DrC,2BAA2B,CAknCvC;IAAD,kCAAC;CAAA;AAlnCuC;;;;;;;;;;;;AC9BxC,8PAA8P,0IAA0I,iDAAiD,8KAA8K,sCAAsC,60BAA60B,YAAY,4YAA4Y,+BAA+B,8IAA8I,uDAAuD,gBAAgB,kCAAkC,2TAA2T,4CAA4C,IAAI,6CAA6C,uBAAuB,sCAAsC,iIAAiI,qBAAqB,sBAAsB,gDAAgD,gBAAgB,oCAAoC,0SAA0S,6CAA6C,uBAAuB,kCAAkC,0IAA0I,sCAAsC,wJAAwJ,4CAA4C,+LAA+L,oEAAoE,2CAA2C,iCAAiC,qNAAqN,iCAAiC,mPAAmP,gDAAgD,4CAA4C,2CAA2C,yGAAyG,iCAAiC,kMAAkM,yBAAyB,iHAAiH,gBAAgB,eAAe,wBAAwB,kDAAkD,gBAAgB,eAAe,yBAAyB,8KAA8K,iJAAiJ,6BAA6B,2BAA2B,qBAAqB,gBAAgB,0HAA0H,kJAAkJ,0BAA0B,2BAA2B,qBAAqB,gBAAgB,yXAAyX,6CAA6C,0BAA0B,sCAAsC,iBAAiB,qFAAqF,qBAAqB,wQAAwQ,sCAAsC,uLAAuL,4CAA4C,uVAAuV,0CAA0C,6JAA6J,uCAAuC,iFAAiF,2BAA2B,6MAA6M,sCAAsC,2FAA2F,yCAAyC,+HAA+H,iCAAiC,uHAAuH,mCAAmC,2JAA2J,mCAAmC,qMAAqM,qJAAqJ,yEAAyE,oCAAoC,wIAAwI,kDAAkD,4NAA4N,qBAAqB,2ZAA2Z,4BAA4B,wKAAwK,gH;;;;;;;;;;;ACA5gU,uCAAuC,UAAU,QAAQ,cAAc,WAAW,0BAA0B,gBAAgB,oBAAoB,cAAc,gBAAgB,aAAa,qBAAqB,YAAY,YAAY,eAAe,aAAa,gBAAgB,cAAc,YAAY,YAAY,2BAA2B,sBAAsB,oDAAoD,4BAA4B,kDAAkD,iBAAiB,wBAAwB,eAAe,WAAW,YAAY,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA/f;AACpB;AACiB;AACH;AAC8D;AAEhE;AAGL;AAC4D;AACO;AAE1D;AACR;AAIoB;AACzC;AACkE;AACpB;AAM1E;IAgDE,wBACU,WAAwB,EACzB,SAA2B,EAC1B,MAAc,EACd,cAA8B,EAC9B,YAA4B,EAC5B,kBAAkC,EAClC,aAA4B,EAC5B,UAAsB,EACtB,kBAAsC,EACtC,OAA0B;QAVpC,iBA4DC;QA3DS,gBAAW,GAAX,WAAW,CAAa;QACzB,cAAS,GAAT,SAAS,CAAkB;QAC1B,WAAM,GAAN,MAAM,CAAQ;QACd,mBAAc,GAAd,cAAc,CAAgB;QAC9B,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,uBAAkB,GAAlB,kBAAkB,CAAgB;QAClC,kBAAa,GAAb,aAAa,CAAe;QAC5B,eAAU,GAAV,UAAU,CAAY;QACtB,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,YAAO,GAAP,OAAO,CAAmB;QAvDpC,iBAAY,GAAe,EAAE,CAAC;QAE9B,kBAAa,GAAe,EAAE,CAAC;QAC/B,YAAO,GAAQ,EAAE,CAAC;QAClB,UAAK,GAAQ,SAAS,CAAC;QACvB,gBAAW,GAAQ,SAAS,CAAC;QAI7B,WAAM,GAAG,EAAE,CAAC;QAOZ,cAAS,GAAG,EAAE,CAAC;QACf,kBAAa,GAAW,CAAC,CAAC;QAC1B,gBAAW,GAAY,KAAK,CAAC;QAE7B,cAAS,GAAG,KAAK,CAAC;QAElB,iBAAY,GAAG,CAAC,CAAC;QACjB,gBAAW,GAAW,SAAS,CAAC;QAChC,eAAU,GAAG,CAAC,CAAC;QACf,WAAM,GAAY,KAAK,CAAC;QACxB,YAAO,GAAY,KAAK,CAAC;QACzB,WAAM,GAAQ,EAAE,CAAC;QACjB,aAAQ,GAAG,EAAE,CAAC;QAEd,mBAAc,GAAY,KAAK,CAAC;QAEhC,iBAAY,GAAY,KAAK,CAAC;QAG9B,UAAK,GAAG,KAAK,CAAC;QACd,oBAAe,GAAG;YAChB,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,WAAW,EAAE;YACtC,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE;SACrC;QACD,iBAAY,GAAG,KAAK,CAAC;QACrB,WAAM,GAAG,UAAC,KAAK;YACb,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;YACtC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,GAAG,OAAO,GAAG,GAAG,CAAC;QAC9D,CAAC;QA2sBD,oBAAe,GAAG,UAAC,IAAI;YACrB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACV,MAAM,CAAC,QAAQ,CAAC,CAAC,kCAAkC;YACrD,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;QACnB,CAAC;QApsBC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAClD,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,CAAC;QAC9C,IAAI,CAAC,MAAM,GAAG,CAAC;gBACb,EAAE,EAAE,GAAG;gBACP,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM;gBAC5C,KAAK,EAAE;oBACL;wBACE,EAAE,EAAE,iBAAiB;wBACrB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,yBAAyB;wBAC/D,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK;qBAClC;oBAED;wBACE,EAAE,EAAE,KAAK;wBACT,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI;wBAC1C,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI;qBACjC;oBACD;wBACE,EAAE,EAAE,KAAK;wBACT,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM;wBAC5C,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM;qBACnC;oBACD;wBACE,EAAE,EAAE,KAAK;wBACT,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY;wBAClD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI;qBACjC;oBACD;wBACE,EAAE,EAAE,aAAa;wBACjB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,gBAAgB;wBACtD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK;qBAClC;oBACD;wBACE,EAAE,EAAE,aAAa;wBACjB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,YAAY;wBACjD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU;qBACvC;oBACD;wBACE,EAAE,EAAE,YAAY;wBAChB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU;wBAChD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,QAAQ;qBACrC;oBACD;wBACE,EAAE,EAAE,YAAY;wBAChB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU;wBAChD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG;qBAChC;iBACF;aACF,CAAC,CAAC;IACL,CAAC;IAED,iCAAQ,GAAR;QACE,IAAI,CAAC,eAAe,GAAG,kBAAkB,CAAC;QAC1C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC7C,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK,CAAC;QACnC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;QACrD,IAAM,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,2BAA2B,CAAC;YAC5D,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;QAC3B,IAAI;YACF,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC/B,IAAI,eAAe,GAAG,eAAe,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,KAAK,iCAAiC,EAAvC,CAAuC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9F,EAAE,CAAC,CAAC,eAAe,CAAC;YAClB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QAC3B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,eAAe,GAAG,4CAA4C,CAAC;QACtE,CAAC;IACH,CAAC;IACD,yCAAgB,GAAhB,UAAiB,IAAS;QACxB,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC;IAC7C,CAAC;IACD,0CAAiB,GAAjB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACrE,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACf,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC/D,CAAC;IACH,CAAC;IACD,iCAAQ,GAAR,UAAS,MAAO;QACd,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACtB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACX,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAC7D,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC;YACvD,CAAC;QACH,CAAC;IACH,CAAC;IACD,kCAAS,GAAT,UAAU,CAAC;QACT,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC;IACD,sCAAa,GAAb,UAAc,CAAC;QACb,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACtB,KAAK,SAAS;oBACZ,KAAK,CAAC;gBACR,KAAK,SAAS;oBACZ,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;wBAC1B,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;oBACnC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC;oBACvC,CAAC;oBACD,KAAK,CAAC;gBACR,KAAK,QAAQ;oBACX,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC;oBACrC,KAAK,CAAC;gBACR;oBACE,KAAK,CAAC;YACV,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,GAAG,CAAC,CAAC,CAAC;gBACvG,IAAM,IAAI,GAAG,CAAC,CAAC,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;gBACrD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACrC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;wBACvB,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,cAAc,GAAG,cAAc,CAAC;oBAChD,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IACD,6BAAI,GAAJ,UAAK,IAAI;QACP,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;YAC1C,IAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,SAAS,IAAI,CAAC,CAAC,MAAM,KAAK,SAAS,IAAI,CAAC,CAAC,MAAM,KAAK,QAAQ,EAAzE,CAAyE,CAAC,CAAC;YACvH,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;gBAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;oBACpC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;gBACzC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACxB,CAAC;gBACD,IAAI,GAAG,GAAG,EAAE,CAAC;gBACb,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACT,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACpB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;gBAC5B,CAAC;gBACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC,CAAC;oBACrD,IAAI,MAAI,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;oBACpD,MAAI,CAAC,SAAS,CAAC,GAAG,iDAAW,CAAC,iDAAK,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;oBAC3D,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,MAAI,CAAC,CAAC;gBACvC,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,IAAM,YAAY,GAAG;wBACnB,KAAK,EAAE,GAAG;wBACV,QAAQ,EAAE,KAAK;wBACf,YAAY,EAAE,EAAE;wBAChB,UAAU,EAAE,iDAAK,CAAC,QAAQ,CAAC,YAAY;qBACxC,CAAC;oBACF,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;gBACxD,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;YACrE,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;QACrE,CAAC;IACH,CAAC;IACD,uCAAc,GAAd;QACE,IAAM,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;QACrC,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC9C,EAAE,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;gBAChD,cAAc,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;YAC1C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,cAAc,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;YAC1C,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,cAAc,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;QAC1C,CAAC;IACH,CAAC;IACD,gCAAO,GAAP,UAAQ,IAAI;QACV,IAAI,CAAC,KAAK,GAAG,IAAI;QACjB,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,OAAO,CAAC,cAAI;YACf,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;QACnB,CAAC,CAAC;QACF,IAAI,MAAW,CAAC;QAChB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;YAChC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3D,MAAM,CAAC,SAAS,CAAC,GAAG,iDAAW,CAAC,iDAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC,iBAAiB;QACpF,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAClD,MAAM,CAAC,SAAS,CAAC,GAAG,iDAAW,CAAC,iDAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;YAChE,MAAM,CAAC,SAAS,CAAC,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC;QAC7C,CAAC;QACD,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACzC,CAAC;IACK,6BAAI,GAAV,UAAW,IAAI;;;;;4BACQ,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,iDAAK,CAAC,WAAW,CAAC,aAAa,CAAC;;wBAAxF,cAAc,GAAG,SAAuE;wBAC5F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACL,OAAO,GAAQ,IAAI,CAAC;wBACxB,gBAAgB;wBAChB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACT,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC;gCAC1E,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;4BACtF,IAAI;gCACF,OAAO,GAAG,IAAI,CAAC;4BACjB,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gCACZ,EAAE,CAAC,CAAC,OAAO,CAAC,uBAAuB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oCAC/C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,yBAAuB,0DAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,CAAG,EAAE,EAAE,KAAK,EAAE,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;gCAClJ,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,yBAAuB,0DAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,CAAG,CAAC,CAAC,CAAC;gCAChG,CAAC;4BACH,CAAC;wBACH,CAAC;wBACD,IAAI,CAAC,CAAC;4BACJ,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gCAClC,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAI,IAAI,WAAI,CAAC,MAAM,IAAI,iDAAK,CAAC,SAAS,CAAC,MAAM,EAArC,CAAqC,CAAC,CAAC,CAAC,CAAC;oCAC1E,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;oCACpF,MAAM,gBAAC;gCACT,CAAC;gCACG,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;gCAChD,cAAc,GAAG,IAAI,CAAC;gCAC1B,GAAG,EAAK,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;oCAC9D,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,WAAW,IAAI,WAAW,CAAC,CAAC,CAAC;wCACxD,mDAAO,CAAC,MAAM,CAAC,qDAAqD,EAAE,OAAO,CAAC,CAAC;wCAC/E,MAAM,gBAAC;oCACT,CAAC;oCACD,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wCAC5D,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,MAAM,GAAC,CAAC,CAAC,CAAC;wCACnI,EAAE,EAAC,cAAc,IAAI,IAAI,CAAC,CAAC,CAAC;4CAC1B,cAAc,GAAG,cAAc,CAAC,WAAW,CAAC;wCAC9C,CAAC;wCAAA,IAAI,CAAC,EAAE,EAAC,cAAc,CAAC,WAAW,IAAI,cAAc,CAAC,CAAC,CAAC;4CACtD,mDAAO,CAAC,MAAM,CAAC,qDAAqD,EAAE,OAAO,CAAC,CAAC;4CAC/E,MAAM,gBAAC;wCACT,CAAC;oCACH,CAAC;gCACH,CAAC;gCACD,uCAAuC;gCAEvC,KAAK;gCAEL,oBAAoB;gCACpB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,aAAa,EAAE,WAAW,EAAE,cAAc,CAAC;4BACtE,CAAC;4BACD,IAAI,CAAC,CAAC;gCACJ,mDAAO,CAAC,MAAM,CAAC,iCAAiC,EAAE,OAAO,CAAC,CAAC;4BAC7D,CAAC;wBACH,CAAC;;;;;KACF;IACK,gCAAO,GAAb,UAAc,IAAI;;;;;4BACK,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,iDAAK,CAAC,WAAW,CAAC,aAAa,CAAC;;wBAAxF,cAAc,GAAG,SAAuE;wBAC5F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACT,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,yBAAuB,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAG,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;;;;KAC/J;IACK,+BAAM,GAAZ,UAAa,IAAI;;;;;;4BACM,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,iDAAK,CAAC,WAAW,CAAC,aAAa,CAAC;;wBAAxF,cAAc,GAAG,SAAuE;wBAC5F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACT,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;4BAChC,WAAS,EAAE,CAAC;4BACd,QAAM,EAAE,CAAC;4BACb,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gCACT,KAAG,GAAG,IAAI,CAAC,EAAE,CAAC;4BAChB,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,KAAG,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;4BACpC,CAAC;4BACK,MAAM,GAAG,mDAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;4BAC9F,MAAM,CAAC,IAAI,CAAC,UAAC,YAAY;gCACvB,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;oCACjB,mDAAO,CAAC,WAAW,EAAE,CAAC;oCACtB,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAG,CAAC,CAAC,SAAS,CAAC,YAAE;wCAC1C,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;4CAC5B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;4CACjE,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;wCAClC,CAAC;wCAAC,IAAI,CAAC,CAAC;4CACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;wCACtC,CAAC;oCACH,CAAC,EAAE,aAAG;oCACN,CAAC,EAAE;wCACD,mDAAO,CAAC,WAAW,EAAE,CAAC;oCACxB,CAAC,CAAC,CAAC;gCACL,CAAC;4BACH,CAAC,CAAC,CAAC;wBACL,CAAC;;;;;KACF;IACD,mCAAU,GAAV;QAAA,iBA4CC;QA3CC,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,MAAM,IAAI,SAAS,EAAxB,CAAwB,CAAC,CAAC;QACxE,IAAI,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,MAAM,IAAI,SAAS,EAAxB,CAAwB,CAAC;QAC7E,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,WAAW,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;YAChD,wCAAwC;YACxC,qGAAqG;YACrG,kBAAkB;YAClB,IAAI;YACJ,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,IAAI,KAAG,GAAG,EAAE,CAAC;YACb,KAAG,GAAG,IAAI,CAAC,YAAY,CAAC;YACxB,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,KAAG,CAAC,CAAC,SAAS,CAAC,UAAC,EAAO;gBAC7D,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,IAAM,YAAY,GAAG;wBACnB,WAAW,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ;wBAC7B,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,OAAO;wBACxB,QAAQ,EAAE,KAAI,CAAC,WAAW,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;wBACtD,GAAG,EAAE,KAAG;qBACT,CAAC;oBACF,KAAI,CAAC,cAAc,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,iFAAiB,EAAE;wBAC9D,QAAQ,EAAE,QAAQ;wBAClB,QAAQ,EAAE,KAAK;wBACf,KAAK,EAAE,qBAAqB;wBAC5B,YAAY;qBACb,CAAC,CAAC;oBACH,IAAM,UAAQ,GAAG,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;wBAClD,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;4BAChD,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC;4BACxB,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;4BACvB,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;4BAChC,UAAQ,CAAC,WAAW,EAAE,CAAC;wBACzB,CAAC;oBACH,CAAC,CAAC,CAAC;gBACL,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;gBACpE,CAAC;YAEH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,mDAAO,CAAC,MAAM,CAAC,gDAAgD,EAAE,OAAO,CAAC,CAAC;QAC5E,CAAC;IACH,CAAC;IACD,kCAAS,GAAT,UAAU,IAAI;QAAd,iBAuDC;QAtDC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACrE,CAAC;QACD,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC9B,KAAK,GAAG,KAAK,CAAC;YAChB,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,SAAS,EAAtB,CAAsB,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBACxE,KAAK,GAAG,KAAK,CAAC;YAChB,CAAC;QACH,CAAC;QAED,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;YACjD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,IAAI,KAAG,GAAG,EAAE,CAAC;YACb,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,KAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACpB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,KAAK,SAAS,EAAtB,CAAsB,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;YAC9E,CAAC;YACD,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,KAAG,CAAC,CAAC,SAAS,CAAC,UAAC,EAAO;gBACxD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,IAAM,YAAY,GAAG;wBACnB,WAAW,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ;wBAC7B,OAAO,EAAE,KAAI,CAAC,OAAO;wBACrB,GAAG,EAAE,KAAG;qBACT,CAAC;oBACF,KAAI,CAAC,cAAc,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,sEAAwB,EAAE;wBACrE,QAAQ,EAAE,QAAQ;wBAClB,QAAQ,EAAE,KAAK;wBACf,KAAK,EAAE,qBAAqB;wBAC5B,YAAY;qBACb,CAAC,CAAC;oBACH,IAAM,UAAQ,GAAG,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;wBAClD,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;4BAChD,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC;4BACxB,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;4BACvB,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;4BAChC,UAAQ,CAAC,WAAW,EAAE,CAAC;wBACzB,CAAC;oBACH,CAAC,CAAC,CAAC;gBACL,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;gBACpE,CAAC;YAEH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;QACtE,CAAC;IACH,CAAC;IACD,iCAAQ,GAAR;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAClC,IAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,iDAAK,CAAC,SAAS,CAAC,MAAM,EAAlC,CAAkC,CAAC,CAAC;YAChF,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,GAAG,GAAG,EAAE,CAAC;gBACb,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;gBAC1B,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,IAAI,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,YAAE;oBACvD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;wBAC3B,kDAAM,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;oBACrE,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oBACtC,CAAC;gBACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;oBACb,KAAG,CAAC,WAAW,EAAE,CAAC;oBAClB,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACxB,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,8BAA8B,EAAE,OAAO,CAAC,CAAC;gBAC/E,MAAM,CAAC;YACT,CAAC;QACH,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,8BAA8B,EAAE,OAAO,CAAC,CAAC;YAC/E,MAAM,CAAC;QACT,CAAC;IACH,CAAC;IACD,iCAAQ,GAAR;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAClC,IAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,iDAAK,CAAC,SAAS,CAAC,MAAM,EAAlC,CAAkC,CAAC,CAAC;YAChF,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;gBAC9B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,GAAG,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;YAClE,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,8BAA8B,EAAE,OAAO,CAAC,CAAC;gBAC/E,MAAM,CAAC;YACT,CAAC;QACH,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,8BAA8B,EAAE,OAAO,CAAC,CAAC;YAC/E,MAAM,CAAC;QACT,CAAC;IACH,CAAC;IAGK,sCAAa,GAAnB;;;;;4BACuB,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,iDAAK,CAAC,WAAW,CAAC,aAAa,CAAC;;wBAAxF,cAAc,GAAG,SAAuE;wBAC5F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACT,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,2BAA2B,CAAC,CAAC,CAAC;;;;;KACrD;IAED,wCAAe,GAAf,UAAgB,CAAC;QACf,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,aAAa,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,kBAAkB,CAAC,CAAC,CAAC;YAChD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,mCAAmC,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,sBAAsB,CAAC,CAAC,CAAC;YACpD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,IAAI,YAAY,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,IAAI,YAAY,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,IAAI,iBAAiB,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,aAAa,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACzB,CAAC;IACH,CAAC;IACD,oCAAW,GAAX,UAAY,EAAE;QAAd,iBA0BC;QAzBC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACb,IAAI,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,YAAE;YAChE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,IAAM,YAAY,GAAG;oBACnB,QAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ;iBAC3B,CAAC;gBACF,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,wEAA0B,EAAE;oBACnE,KAAK,EAAE,qBAAqB,EAAE,YAAY,gBAAE,QAAQ,EAAE,QAAQ;oBAC9D,QAAQ,EAAE,KAAK;iBAChB,CAAC,CAAC;gBACH,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;oBACjC,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;wBAC5C,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;oBAClC,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,wCAAe,GAAf,UAAgB,IAAI;QAClB,MAAM,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACpB,KAAK,SAAS;gBACZ,KAAK,CAAC;YACR,KAAK,SAAS;gBACZ,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;oBACxB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;gBACnD,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;gBACxD,CAAC;YACH,KAAK,QAAQ;gBACX,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;YACpD;gBACE,KAAK,CAAC;QACV,CAAC;IACH,CAAC;IACK,sCAAa,GAAnB,UAAoB,GAAG;;;;;4BACA,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,iDAAK,CAAC,WAAW,CAAC,aAAa,CAAC;;wBAAxF,cAAc,GAAG,SAAuE;wBAC5F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACT,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;4BAC7B,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;wBACtF,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,yBAAuB,GAAG,CAAC,EAAI,CAAC,CAAC,CAAC;wBAC1D,CAAC;;;;;KACF;IACD,0CAAiB,GAAjB,UAAkB,GAAG;QACnB,EAAE,CAAC,CAAC,GAAG,CAAC,uBAAuB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,yBAAuB,GAAG,CAAC,EAAI,EAAE,EAAE,KAAK,EAAE,GAAG,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACxG,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,yBAAuB,GAAG,CAAC,EAAI,CAAC,CAAC,CAAC;QAC1D,CAAC;IACH,CAAC;IACK,sCAAa,GAAnB,UAAoB,GAAG;;;;;4BACA,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,iDAAK,CAAC,WAAW,CAAC,aAAa,CAAC;;wBAAxF,cAAc,GAAG,SAAuE;wBAC5F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACT,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,yBAAuB,GAAG,CAAC,EAAI,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;;;;;KACjF;IAEK,6BAAI,GAAV,UAAW,IAAI;;;;;;4BACQ,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,iDAAK,CAAC,WAAW,CAAC,aAAa,CAAC;;wBAAxF,cAAc,GAAG,SAAuE;wBAC5F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACH,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;wBAC5C,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,YAAE;4BACrD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gCAC3B,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;oCACpB,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,IAAI,CAAC;oCAC1B,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;oCACjC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;oCAC9B,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC;oCACtC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC;oCACpC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC;oCACtC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,GAAG,CAAC,CAAC;oCACpC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAiB,GAAG,IAAI,CAAC;oCACzC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAiB,GAAG,IAAI,CAAC;oCACzC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;oCACnC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wCAClF,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC,cAAI;4CAC1C,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC;4CAClB,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC;wCAC5B,CAAC,CAAC,CAAC;oCACL,CAAC;oCACD,KAAI,CAAC,cAAc,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC;oCAC3C,KAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC;gCACpC,CAAC;gCACD,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;oCAC7B,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,2BAA2B,CAAC,CAAC,CAAC;gCACtD,CAAC;gCACD,sCAAsC;gCACtC,yDAAyD;gCACzD,WAAW;gCACX,oDAAoD;gCACpD,kEAAkE;gCAClE,yDAAyD;gCACzD,4DAA4D;gCAC5D,IAAI;4BACN,CAAC;wBACH,CAAC,CAAC,CAAC;;;;;KACJ;IACD,sDAAsD;IACtD,mCAAU,GAAV,UAAW,EAAE;QACX,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,EAAE,IAAI,IAAI,CAAC,WAAW,KAAK,EAAE,CAAC,CAAC,CAAC;YACvD,IAAI,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAC7D,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC;gBAChB,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACvD,IAAI,CAAC,CAAC;gBACJ,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBACnE,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACvD,CAAC;QACH,CAAC;QACD,IAAI;YACF,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACvD,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IACxB,CAAC;IACD,uCAAc,GAAd,UAAe,IAAI,EAAE,WAAW,EAAE,eAAe;QAAjD,iBA8BC;QA7BC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,2CAAK,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;gBAC/F,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ;gBACnC,KAAI,CAAC,SAAS,GAAG,kDAAM,CAAC,iCAAiC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBAClE,IAAM,YAAY,GAAG;oBACnB,SAAS,EAAE,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,aAAa,KAAK,uBAAuB,EAA9C,CAA8C,CAAC;oBACxF,YAAY,EAAE,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,aAAa,IAAI,uBAAuB,EAA7C,CAA6C,CAAC;oBAC1F,cAAc,EAAE,KAAI,CAAC,OAAO;oBAC5B,WAAW,EAAE,WAAW;oBACxB,eAAe,EAAE,eAAe;iBACjC,CAAC;gBACF,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAClD,8HAA+B,EAC/B;oBACE,QAAQ,EAAE,QAAQ;oBAClB,QAAQ,EAAE,KAAK;oBACf,KAAK,EAAE,qBAAqB;oBAC5B,YAAY;iBACb,CACF,CAAC;gBACF,IAAM,QAAQ,GAAG,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;oBACxD,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,EAAE;oBACpC,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;oBAChC,QAAQ,CAAC,WAAW,EAAE,CAAC;gBACzB,CAAC,CAAC,CAAC;gBACH,mDAAO,CAAC,WAAW,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IACK,uCAAc,GAApB;;;;;;4BACuB,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,iDAAK,CAAC,WAAW,CAAC,aAAa,CAAC;;wBAAxF,cAAc,GAAG,SAAuE;wBAC5F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACT,mDAAO,CAAC,WAAW,EAAE,CAAC;wBACtB,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;4BACxE,+CAA+C;4BAC/C,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gCAC5B,KAAI,CAAC,SAAS,GAAG,kDAAM,CAAC,iCAAiC,CAAC,GAAG,CAAC,CAAC;gCAC/D,IAAM,YAAY,GAAG;oCACnB,SAAS,EAAE,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,aAAa,KAAK,uBAAuB,EAA9C,CAA8C,CAAC;oCACxF,YAAY,EAAE,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,aAAa,IAAI,uBAAuB,EAA7C,CAA6C,CAAC;oCAC1F,MAAM,EAAE,KAAI,CAAC,MAAM;iCACpB,CAAC;gCACF,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAClD,8HAA+B,EAC/B;oCACE,QAAQ,EAAE,QAAQ;oCAClB,QAAQ,EAAE,KAAK;oCACf,KAAK,EAAE,qBAAqB;oCAC5B,YAAY;iCACb,CACF,CAAC;gCACF,IAAM,UAAQ,GAAG,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;oCACxD,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;oCAChC,UAAQ,CAAC,WAAW,EAAE,CAAC;gCACzB,CAAC,CAAC,CAAC;gCACH,mDAAO,CAAC,WAAW,EAAE,CAAC;4BACxB,CAAC;wBACH,CAAC,CAAC,CAAC;;;;;KACJ;IACD,uCAAc,GAAd,UAAe,CAAC;QACd,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC;YAC1D,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;IAED,gDAAgD;IAChD,mBAAmB;IACnB,8DAA8D;IAC9D,6EAA6E;IAC7E,WAAW;IACX,0EAA0E;IAC1E,4EAA4E;IAC5E,MAAM;IACN,yEAAyE;IACzE,IAAI;IACJ,oCAAW,GAAX,UAAY,IAAI;QACd,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACrE,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;YACtC,IAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,SAAS,EAArB,CAAqB,CAAC,CAAC;YACnE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;gBAC5B,IAAI,GAAG,GAAG,EAAE,CAAC;gBACb,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACT,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;wBAC9B,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBACpB,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;wBAClE,MAAM,CAAC;oBACT,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;gBAC5B,CAAC;gBACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC,CAAC;oBACrD,IAAM,MAAI,GAAG,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;oBAC5D,MAAI,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,OAAO,CAAC;oBAC9C,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,MAAI,CAAC,CAAC;gBACvC,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,IAAM,YAAY,GAAG;wBACnB,KAAK,EAAE,GAAG;wBACV,QAAQ,EAAE,KAAK;wBACf,YAAY,EAAE,EAAE;wBAChB,UAAU,EAAE,iDAAK,CAAC,QAAQ,CAAC,kBAAkB;qBAC9C,CAAC;oBACF,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;gBACxD,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;YACrE,CAAC;QAEH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;QACrE,CAAC;IACH,CAAC;IAOD,kDAAyB,GAAzB,UAA0B,WAAW,EAAE,uBAAuB;QAC5D,uBAAuB,GAAG,UAAU,CAAC,CAAC,4BAA4B;QAClE,MAAM,CAAC,CAAC,CAAC,oBAAoB,EAAE,uBAAuB,IAAI,GAAG,EAAE,WAAW,CAAC,EAAE,IAAI,EAAE,CAAC,qBAAqB,EAAE,uBAAuB,IAAI,GAAG,EAAE,WAAW,CAAC,CAAC,CAAC;IAC3J,CAAC;IAlwB+B;QAA/B,+DAAS,CAAC,sEAAmB,CAAC;kCAAW,sEAAmB;oDAAC;IAC7B;QAAhC,+DAAS,CAAC,4GAAoB,CAAC;kCAAc,4GAAoB;uDAAC;IAFxD,cAAc;QAL1B,+DAAS,CAAC;YACT,QAAQ,EAAE,WAAW;;;SAGtB,CAAC;yCAkDuB,uDAAW;YACd,oEAAgB;YAClB,sDAAM;YACE,uEAAc;YAChB,kEAAc;YACR,kEAAc;YACnB,yDAAa;YAChB,+DAAU;YACF,wFAAkB;YAC7B,6DAAiB;OA1DzB,cAAc,CAqwB1B;IAAD,qBAAC;CAAA;AArwB0B;;;;;;;;;;;;AC3B3B,wD;;;;;;;;;;;ACAA,mB;;;;;;;;;;;;;;;;;;;;;;;;ACAkD;AAOlD;IAEE;IAAgB,CAAC;IAEjB,oCAAQ,GAAR;IACA,CAAC;IALU,iBAAiB;QAL7B,+DAAS,CAAC;YACT,QAAQ,EAAE,eAAe;;;SAG1B,CAAC;;OACW,iBAAiB,CAO7B;IAAD,wBAAC;CAAA;AAP6B;;;;;;;;;;;;ACP9B,4D;;;;;;;;;;;ACAA,mB;;;;;;;;;;;;;;;;;;;;;;;;ACAkD;AAOlD;IAEE;IAAgB,CAAC;IAEjB,wCAAQ,GAAR;IACA,CAAC;IALU,qBAAqB;QALjC,+DAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;;;SAG9B,CAAC;;OACW,qBAAqB,CAOjC;IAAD,4BAAC;CAAA;AAPiC;;;;;;;;;;;;ACPlC,0FAA0F,+CAA+C,gJAAgJ,mdAAmd,uDAAuD,iGAAiG,4CAA4C,0GAA0G,6CAA6C,6JAA6J,gDAAgD,8LAA8L,6CAA6C,kGAAkG,sCAAsC,gGAAgG,4CAA4C,6IAA6I,oEAAoE,qFAAqF,iCAAiC,sFAAsF,+CAA+C,wGAAwG,mDAAmD,qPAAqP,qCAAqC,oiBAAoiB,oCAAoC,oDAAoD,gCAAgC,8FAA8F,iCAAiC,yHAAyH,6CAA6C,sDAAsD,iEAAiE,oGAAoG,gFAAgF,wHAAwH,4GAA4G,sEAAsE,iBAAiB,mJAAmJ,wKAAwK,4JAA4J,yKAAyK,4CAA4C,8WAA8W,gBAAgB,2FAA2F,gBAAgB,kDAAkD,iCAAiC,YAAY,yBAAyB,kHAAkH,sCAAsC,YAAY,4BAA4B,sMAAsM,8BAA8B,gOAAgO,2LAA2L,uBAAuB,UAAU,mD;;;;;;;;;;;ACAxyM,wCAAwC,eAAe,UAAU,gBAAgB,4BAA4B,cAAc,eAAe,YAAY,WAAW,kBAAkB,aAAa,mBAAmB,uBAAuB,eAAe,YAAY,WAAW,aAAa,cAAc,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAzP;AAEoB;AACrC;AAEoF;AACpE;AACQ;AACT;AACU;AACgB;AAM1E;IAkCE,2BACS,UAAsB,EACrB,UAAsB,EACtB,aAA4B,EAC5B,WAAwB,EACxB,MAAc,EACd,OAA0B,EAC1B,cAA8B,EAC9B,kBAAsC;QARhD,iBAWC;QAVQ,eAAU,GAAV,UAAU,CAAY;QACrB,eAAU,GAAV,UAAU,CAAY;QACtB,kBAAa,GAAb,aAAa,CAAe;QAC5B,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,YAAO,GAAP,OAAO,CAAmB;QAC1B,mBAAc,GAAd,cAAc,CAAgB;QAC9B,uBAAkB,GAAlB,kBAAkB,CAAoB;QApChD,iBAAY,GAAG,CAAC,CAAC;QACjB,eAAU,GAAG,CAAC,CAAC;QAEf,WAAM,GAAY,KAAK,CAAC;QACxB,YAAO,GAAY,KAAK,CAAC;QAEzB,kBAAa,GAAW,CAAC,CAAC;QAC1B,gBAAW,GAAY,KAAK,CAAC;QAE7B,cAAS,GAAG,KAAK,CAAC;QAIlB,mBAAc,GAAY,KAAK,CAAC;QAChC,mBAAc,GAAQ,EAAE,CAAC;QACzB,mBAAc,GAAQ,EAAE,CAAC;QACzB,WAAM,GAAY,KAAK,CAAC;QAMxB,aAAQ,GAAY,KAAK,CAAC;QAC1B,WAAM,GAAG,UAAC,KAAK;YACb,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;YACtC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,GAAG,OAAO,GAAG,GAAG,CAAC;QAC9D,CAAC;QAYC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;IACpD,CAAC;IAED,oCAAQ,GAAR;QACE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC7C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QACrD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;QACrD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC;QACnD,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,WAAW,CAAC;gBACxC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACvB,CAAC;QACD,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED,uCAAW,GAAX;QACE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAC,KAAK,EAAE,KAAK;YACpD,MAAM,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,OAAO,EAAE,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,OAAO,EAAE,CAAC;QACzF,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,cAAI;YAC3B,IAAI,CAAC,YAAY,GAAG,mCAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;YAC5E,OAAO,IAAI,CAAC,UAAU,CAAC;YACvB,OAAO,IAAI,CAAC,eAAe,CAAC;YAC5B,OAAO,IAAI,CAAC,oBAAoB,CAAC;YACjC,IAAI,CAAC,UAAU,CAAC,GAAG,KAAK,CAAC;QAC3B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,2CAAe,GAAf,UAAgB,CAAC;QACf,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IACzB,CAAC;IAED,0CAAc,GAAd,UAAe,CAAC;QACd,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,GAAG,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK,CAAC,CAAC,CAAC;YAC1D,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QACjD,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YACnC,CAAC;YACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACzB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;QAClB,CAAC;IACH,CAAC;IAED,4CAAgB,GAAhB;QAAA,iBA8CC;QA7CC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,CAAC,SAAS,CAAC,iBAAO;YACvE,IAAI,IAAI,GAAQ,OAAO,CAAC;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,UAAU,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,GAAG,KAAI,CAAC,YAAY,CAAC;oBAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,YAAY,CAAC,CAAC,CAAC;wBACnC,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC7D,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,gCAAgC,CAAC,CAAC,CAAC;wBAC9D,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;wBACpD,KAAI,CAAC,cAAc,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;oBACxC,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,kBAAkB,CAAC,CAAC,CAAC;wBACjD,KAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBAC9C,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;4BACzC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gCACrC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;4BACxC,CAAC;wBACH,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,UAAU,EAAE,CAAC;wBAClB,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,IAAI,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;4BAC7D,KAAI,CAAC,cAAc,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;wBACxC,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,EAAE,uBAAuB,CAAC,CAAC;gBAC1E,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,OAAO,CAAC,KAAK,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC;gBACrD,CAAC;gBACD,IAAI;oBACF,KAAK,CAAC,KAAK,EAAE,CAAC;gBAChB,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACpB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBACvB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBAC1B,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,kBAAkB,CAAC;wBACxC,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC;oBAC3F,IAAI;wBACF,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC;oBAChE,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC3B,KAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;gBACrC,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,kDAAsB,GAAtB,UAAuB,SAAS;QAAhC,iBAiCC;QAhCC,IAAI,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;QAC9C,IAAI,CAAC,aAAa,IAAI,eAAe,CAAC;QACtC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;YACzB,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,SAAS,CAAC;gBACpC,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;YACvE,IAAI,CAAC,CAAC;gBACJ,IAAI,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,SAAS,IAAI,CAAC,CAAC,MAAM,IAAI,SAAS,EAA9C,CAA8C,CAAC,CAAC;gBACjG,IAAI,CAAC,cAAc,GAAG,KAAK,GAAG,aAAa,CAAC,MAAM,GAAG,yCAAyC,CAAC;gBAC/F,mDAAO,CAAC,MAAM,CAAC,KAAK,GAAG,aAAa,CAAC,MAAM,GAAG,kBAAkB,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;YACrF,CAAC;YACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,UAAU,CAAC;gBACT,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,uEAAuE;gBACvE,yCAAyC;gBACzC,KAAK;YACP,CAAC,EAAE,GAAG,CAAC,CAAC;YACR,IAAI,CAAC;gBACH,IAAI,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,SAAS,IAAI,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,SAAS,EAArH,CAAqH,CAAC,CAAC;gBACnK,EAAE,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;oBAClC,IAAI,CAAC,cAAc,GAAG,KAAK,GAAG,QAAQ,CAAC,MAAM,GAAG,6CAA6C,CAAC;YAClG,CAAC;YACD,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YAEf,CAAC;QACH,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC;YACnD,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC;IACH,CAAC;IACD,sCAAU,GAAV,UAAW,UAAU,EAAE,QAAQ;QAA/B,iBAEC;QADC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,EAAE,YAAY,EAAE,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,aAAa,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACzJ,CAAC;IAED,0CAAc,GAAd,UAAe,OAAO;QAAtB,iBAmCC;QAlCC,IAAI,YAAY,GAAG,OAAO,CAAC,QAAQ,CAAC;QACpC,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,IAAI,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;QAC9C,OAAO,YAAY,CAAC,QAAQ,CAAC;QAC7B,OAAO,YAAY,CAAC,QAAQ,CAAC;QAC7B,OAAO,YAAY,CAAC,uBAAuB,CAAC;QAC5C,OAAO,YAAY,CAAC,oBAAoB,CAAC;QACzC,IAAI,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;YAClF,OAAO,CAAC,QAAQ,GAAG,YAAY,CAAC;YAChC,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,OAAO,CAAC,YAAY,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;gBAClF,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,sBAAsB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC;gBACrF,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC;gBAC9B,KAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;gBACvC,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAClE,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;oBACrB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wBAC5H,KAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;oBAC7C,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,KAAI,CAAC,UAAU,CAAC,UAAU,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC;oBACpD,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,EAAE,CAAC,CAAC,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,MAAM,IAAI,SAAS,CAAC;oBAC1D,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC;gBAC1D,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;gBAC3B,KAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;YACrC,CAAC;QACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;YACb,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IAEL,CAAC;IAEK,4CAAgB,GAAtB,UAAuB,UAAU,EAAE,OAAO;;;;gBACxC,uDAAuD;gBACvD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC;oBACnD,EAAE,EAAE,OAAO,CAAC,EAAE;oBACd,UAAU,EAAE,UAAU;oBACtB,aAAa,EAAE,OAAO,CAAC,aAAa;iBACrC,CAAC,CAAC,SAAS,CAAC,UAAM,EAAE;;;;;gCACf,SAAS,GAAG,KAAK,CAAC;gCACtB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gCACpB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;gCAChB,OAAO,GAAG,KAAK,CAAC;gCACpB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gCACnB,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oCAC3B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,sBAAsB,CAAC,CAAC;oCACjH,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,SAAS,CAAC;oCACvD,SAAS,GAAG,IAAI,CAAC;oCACjB,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;wCACtB,OAAO,GAAG,IAAI,CAAC;gCACnB,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,IAAI,SAAS,CAAC;wCAC1D,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC;oCAC1D,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;gCAC7B,CAAC;qCACG,OAAO,EAAP,wBAAO;gCACT,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;gCAC5B,qBAAM,IAAI,CAAC,aAAa,EAAE;;gCAA3C,cAAc,GAAG,SAA0B;gCAC/C,EAAE,CAAC,CAAC,cAAc,CAAC;oCACjB,IAAI,CAAC,YAAY,EAAE,CAAC;gCACtB,IAAI;oCACF,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;;;gCAGzC,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;;;;;qBAC1C,EAAE,aAAG,IAAM,CAAC,EAAE;oBACb,yBAAyB;oBACzB,KAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;gBACnC,CAAC,CAAC,CAAC;;;;KACJ;IACK,yCAAa,GAAnB;;;;;4BACS,qBAAM,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,YAAE;4BACtG,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gCAC5B,KAAI,CAAC,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;gCAC5D,KAAI,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;gCACnF,MAAM,CAAC,IAAI,CAAC;4BACd,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,MAAM,CAAC,KAAK,CAAC;4BACf,CAAC;wBACH,CAAC,EACC,aAAG,IAAM,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CACzB,CAAC,KAAK,CAAC,UAAC,KAAK;4BACZ,MAAM,CAAC,KAAK,CAAC;wBACf,CAAC,CAAC;4BAZF,sBAAO,SAYL,EAAC;;;;KACJ;IACD,wCAAY,GAAZ;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;eAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC5H,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;QACxD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;QAC5E,CAAC;IACH,CAAC;IACD,+CAAmB,GAAnB,UAAoB,IAAI;QAAxB,iBAwBC;QAvBC,IAAM,sBAAsB,GAAG;YAC7B,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE;YAClB,QAAQ,EAAE;gBACR,SAAS,EAAE,kBAAkB;gBAC7B,YAAY,EAAE,IAAI;aACnB;SACF;QACD,UAAU,CAAC;YACT,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,EAAE,EAAE,CAAC,CAAC;QACP,IAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC,SAAS,CAAC,YAAE;YAC1E,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,SAAS,CAAC;YACpF,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC;YACrF,CAAC;YACD,KAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;QACpC,CAAC,EAAE,aAAG;YACJ,KAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;QACpC,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,yCAAa,GAAb,UAAc,UAAU,EAAE,QAAS;QAAnC,iBAQC;QAPC,8BAA8B;QAC9B,IAAI,QAAQ,GAAG,sBAAsB,CAAC;QACtC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,EAAE,kBAAkB,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IACrK,CAAC;IACD,sCAAU,GAAV;QAAA,iBAgBC;QAfC,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;QAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;eAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC5H,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QACxC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC5E,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;oBACzC,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;gBACpK,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,WAAW,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;gBACnE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,sCAAsC,EAAE,gCAAgC,EAAE,eAAe,EAAE,WAAW,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;YACnM,CAAC;QACH,CAAC;IACH,CAAC;IAED,sCAAU,GAAV;QAAA,iBASC;QARC,mDAAO,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE;YACvF,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YAC7D,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;YACzC,KAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACtB,KAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpB,KAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,gCAAI,GAAJ;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,GAAG,SAAS,CAAC;QACtD,CAAC;QACD,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;IACzB,CAAC;IAED,6CAAiB,GAAjB,UAAkB,IAAI;QACpB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,IAAM,GAAG,GAAG,EAAE,CAAC;YACf,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACpB,CAAC;YACD,IAAI,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YACtD,MAAM,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,OAAO,CAAC;YAChD,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACzC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;QACrE,CAAC;IACH,CAAC;IACD,sCAAU,GAAV,UAAW,IAAI;QACb,EAAE,CAAC,CAAC,IAAI,CAAC,uBAAuB,IAAI,IAAI,CAAC,uBAAuB,CAAC,MAAM,GAAG,CAAC,CAAC;YAC1E,MAAM,CAAC,IAAI,CAAC;QACd,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IACD,0CAAc,GAAd,UAAe,MAAM;QAArB,iBAOC;QANC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;QACtC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,cAAI;YAC3B,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC1B,IAAI,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;YAC3C,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,2CAAe,GAAf,UAAgB,MAAM;QAAtB,iBAQC;QAPC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC;YAC1C,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACjD,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAC,IAAI,YAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,EAApC,CAAoC,CAAC,CAAC;YACjF,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;gBACb,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACzB,CAAC;IACH,CAAC;IA/XU,iBAAiB;QAL7B,+DAAS,CAAC;YACT,QAAQ,EAAE,eAAe;;;SAG1B,CAAC;yCAoCqB,mFAAU;YACT,8DAAU;YACP,yDAAa;YACf,uDAAW;YAChB,sDAAM;YACL,6DAAiB;YACV,uEAAc;YACV,uFAAkB;OA1CrC,iBAAiB,CAgY7B;IAAD,wBAAC;CAAA;AAhY6B;;;;;;;;;;;;AChB9B,0FAA0F,UAAU,qEAAqE,mCAAmC,+EAA+E,uGAAuG,qBAAqB,qFAAqF,uBAAuB,oHAAoH,iBAAiB,yMAAyM,0FAA0F,uQAAuQ,aAAa,gCAAgC,SAAS,iLAAiL,8DAA8D,iBAAiB,KAAK,QAAQ,qGAAqG,2DAA2D,iBAAiB,kHAAkH,0DAA0D,iBAAiB,KAAK,eAAe,sMAAsM,8BAA8B,gOAAgO,2LAA2L,uBAAuB,UAAU,mD;;;;;;;;;;;ACAvhF,gCAAgC,aAAa,8BAA8B,mBAAmB,YAAY,aAAa,cAAc,YAAY,WAAW,iBAAiB,qBAAqB,wBAAwB,YAAY,0BAA0B,aAAa,uBAAuB,mBAAmB,sBAAsB,WAAW,eAAe,kBAAkB,iBAAiB,kBAAkB,sCAAsC,SAAS,UAAU,aAAa,mBAAmB,yCAAyC,2BAA2B,GAAG,UAAU,GAAG,UAAU,IAAI,WAAW,IAAI,UAAU,IAAI,WAAW,IAAI,WAAW,SAAS,aAAa,mBAAmB,iBAAiB,gBAAgB,kBAAkB,eAAe,gBAAgB,sBAAsB,yBAAyB,gBAAgB,SAAS,aAAa,2BAA2B,eAAe,WAAW,YAAY,2BAA2B,QAAQ,SAAS,0BAA0B,kBAAkB,iBAAiB,kBAAkB,WAAW,YAAY,SAAS,QAAQ,wCAAwC,gCAAgC,kBAAkB,sBAAsB,4CAA4C,gBAAgB,aAAa,2CAA2C,iBAAiB,UAAU,mBAAmB,gBAAgB,wBAAwB,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA10C;AACoB;AAG7B;AACc;AACoF;AAE1G;AAEe;AACU;AAO1D;IAyCE,8BACS,OAAmB,EAClB,cAA8B,EAC9B,MAAc,EACf,SAA2B,EAC1B,WAAwB,EACxB,aAA4B,EAC5B,OAA0B;QAPpC,iBAaC;QAZQ,YAAO,GAAP,OAAO,CAAY;QAClB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,WAAM,GAAN,MAAM,CAAQ;QACf,cAAS,GAAT,SAAS,CAAkB;QAC1B,gBAAW,GAAX,WAAW,CAAa;QACxB,kBAAa,GAAb,aAAa,CAAe;QAC5B,YAAO,GAAP,OAAO,CAAmB;QA7CpC,QAAG,GAAW,MAAM,CAAC;QACrB,YAAO,GAAY,KAAK,CAAC;QAWzB,YAAO,GAAY,KAAK,CAAC;QACzB,aAAQ,GAAG,EAAE,CAAC;QACd,cAAS,GAAG,KAAK,CAAC;QAElB,iBAAY,GAAG,CAAC,CAAC;QACjB,eAAU,GAAG,CAAC,CAAC;QACf,WAAM,GAAY,KAAK,CAAC;QACxB,YAAO,GAAY,KAAK,CAAC;QACzB,kBAAa,GAAW,CAAC,CAAC;QAC1B,gBAAW,GAAY,KAAK,CAAC;QAE7B,mBAAc,GAAY,KAAK,CAAC;QAMhC,MAAC,GAAW,CAAC,CAAC;QAKd,WAAM,GAAG,UAAC,KAAK;YACb,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;YACtC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,GAAG,OAAO,GAAG,GAAG,CAAC;QAC9D,CAAC;QAUC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAChD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAClD,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC9B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,WAAW,GAAG,GAAG,CAAC;IAC1C,CAAC;IA1BD,mCAAI,GAAJ,UAAK,GAAG;QACN,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;IAC/B,CAAC;IAyBD,uCAAQ,GAAR;QACE,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC7C,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACxB,KAAK,WAAW;gBACd,IAAI,CAAC,QAAQ,GAAG,8BAA8B,CAAC;gBAC/C,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,KAAK,CAAC;YACR,KAAK,aAAa;gBAChB,IAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;gBACvC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,KAAK,CAAC;QACV,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;IACrC,CAAC;IACD,4CAAa,GAAb,UAAc,IAAI;QAChB,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;IACnB,CAAC;IAED,sCAAO,GAAP,UAAQ,IAAY,EAAE,IAAqB,EAAE,KAAyB;QAAhD,oCAAqB;QAAE,yCAAyB;QACpE,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACxB,KAAK,WAAW;gBACd,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;gBAC3B,KAAK,CAAC;YACR,KAAK,aAAa;gBAChB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;gBAC5B,KAAK,CAAC;QACV,CAAC;IACH,CAAC;IACD,8CAAe,GAAf,UAAgB,IAAI;QAApB,iBA8CC;QA7CC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;QACd,IAAI,UAAe,CAAC;QACpB,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,GAAG,CAAC,CAAa,UAAU,EAAV,SAAI,CAAC,KAAK,EAAV,cAAU,EAAV,IAAU;YAAtB,IAAI,IAAI;YACX,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;gBAClB,UAAU,GAAG,IAAI,CAAC;gBAClB,KAAK,CAAC;YACR,CAAC;YACD,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC;SACnB;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACpB,IAAI,WAAW,GAAG,EAAE,CAAC;QACrB,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC7B,IAAI,IAAI,GAAG;YACT,QAAQ,EAAE,WAAW;SACtB;QACD,IAAI,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;YACnE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,uBAAuB;gBACvB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC,CAAC;oBAC/D,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa;oBAClD,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;oBAC1C,KAAI,CAAC,MAAM,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;oBACxE,KAAI,CAAC,QAAQ,GAAG,8BAA8B,GAAG,KAAI,CAAC,SAAS,CAAC;oBAChE,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;oBACvD,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC;oBAC1C,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,2BAA2B;oBAC3B,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa;oBAClD,IAAI,YAAY,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;oBAChD,IAAI,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;oBAC1C,IAAI,OAAO,GAAG,UAAU,CAAC;oBACzB,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,SAAS,EAAE,OAAO,EAAE,oBAAoB,EAAE,KAAI,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;gBACzI,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACpC,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACtB,CAAC;QACH,CAAC,EAAE,aAAG;YACJ,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,EAAE;YACD,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,+CAAgB,GAAhB,UAAiB,IAAI;QAArB,iBA2CC;QA1CC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;QACd,IAAI,EAAO,CAAC;QACZ,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,GAAG,CAAC,CAAa,UAAU,EAAV,SAAI,CAAC,KAAK,EAAV,cAAU,EAAV,IAAU;YAAtB,IAAI,IAAI;YACX,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;gBAClB,EAAE,GAAG,IAAI,CAAC;gBACV,KAAK,CAAC;YACR,CAAC;YACD,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC;SACnB;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACpB,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACf,IAAI,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,YAAE;YAChE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,uBAAuB;gBACvB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC,CAAC;oBAC/D,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;oBAC1C,KAAI,CAAC,MAAM,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;oBACxE,KAAI,CAAC,QAAQ,GAAG,8BAA8B,GAAG,KAAI,CAAC,SAAS,CAAC;oBAChE,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;oBACvD,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC;oBAC1C,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,2BAA2B;oBAC3B,IAAI,YAAY,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;oBAChD,IAAI,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;oBAC1C,IAAI,OAAO,GAAG,MAAM,CAAC;oBACrB,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;wBACnC,OAAO,GAAG,MAAM,CAAC;oBACnB,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,SAAS,EAAE,OAAO,EAAE,oBAAoB,EAAE,KAAI,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;gBACzI,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACpB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;YACJ,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,EAAE;YACD,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,mCAAI,GAAJ;QACE,uDAAuD;QACvD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;IACrB,CAAC;IACD,oCAAK,GAAL;QACE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,GAAG,QAAQ,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IACD,wBAAwB;IACxB,+CAAgB,GAAhB;QAAA,iBAYC;QAXC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,iBAAO;YACjE,IAAM,IAAI,GAAQ,OAAO,CAAC;YAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,iBAAiB,CAAC,CAAC,CAAC;gBACvC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC;oBAC3B,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBAC1G,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC;oBAChC,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;oBACpB,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;gBAC5C,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,0CAAW,GAAX;QACE,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;IACjC,CAAC;IACD,0CAAW,GAAX,UAAY,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE,YAAY;QACvD,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC;QACzB,IAAI,CAAC,MAAM,GAAG,mCAAM,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QACxD,IAAI,CAAC,QAAQ,GAAG,8BAA8B,GAAG,IAAI,CAAC,SAAS,CAAC;QAChE,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;QACvD,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC1C,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IAED,qDAAsB,GAAtB,UAAuB,SAAS;QAAhC,iBAiBC;QAhBC,IAAI,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;QAC9C,IAAI,CAAC,aAAa,IAAI,eAAe,CAAC;QACtC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,SAAS,CAAC;gBACpC,mDAAO,CAAC,MAAM,CAAC,wBAAwB,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;YAC5D,IAAI,CAAC,CAAC;gBACJ,gBAAgB;YAClB,CAAC;YACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,UAAU,CAAC;gBACT,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACzB,CAAC,EAAE,GAAG,CAAC,CAAC;QACV,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC;YACnD,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC;IACH,CAAC;IACD,uCAAQ,GAAR,UAAS,CAAC,EAAE,IAAI,EAAE,IAAI;QACpB,IAAI,OAAO,GAAG,IAAI,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;QACjB,IAAI,GAAG,GAAG,OAAO,GAAG,IAAI,CAAC;QACzB,IAAI,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;QACjC,OAAO,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IACD,8CAAe,GAAf,UAAgB,CAAC;QACf,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IACzB,CAAC;IAED,6CAAc,GAAd,UAAe,CAAC;QACd,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,GAAG,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK,CAAC,CAAC,CAAC;YAC1D,CAAC,GAAG,OAAO,CAAC,sEAAsE,CAAC,CAAC;QACtF,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YACnC,CAAC;YACD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACzB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;QAClB,CAAC;IACH,CAAC;IA9PU,oBAAoB;QALhC,+DAAS,CAAC;YACT,QAAQ,EAAE,kBAAkB;;;SAG7B,CAAC;yCA2CkB,mFAAU;YACF,uEAAc;YACtB,sDAAM;YACJ,oEAAgB;YACb,uDAAW;YACT,yDAAa;YACnB,6DAAiB;OAhDzB,oBAAoB,CA+PhC;IAAD,2BAAC;CAAA;AA/PgC;;;;;;;;;;;;AClBjC,gVAAgV,4FAA4F,2KAA2K,iBAAiB,oBAAoB,mBAAmB,iBAAiB,oDAAoD,uSAAuS,yCAAyC,mHAAmH,kSAAkS,0CAA0C,0TAA0T,wCAAwC,+mBAA+mB,kDAAkD,0aAA0a,2CAA2C,mUAAmU,oJAAoJ,smBAAsmB,yCAAyC,kZAAkZ,iBAAiB,kBAAkB,iBAAiB,qBAAqB,mDAAmD,wLAAwL,oCAAoC,icAAic,uCAAuC,kdAAkd,mCAAmC,6SAA6S,wBAAwB,OAAO,sGAAsG,yFAAyF,wCAAwC,iVAAiV,yFAAyF,oCAAoC,sUAAsU,gEAAgE,6FAA6F,+CAA+C,ohBAAohB,+GAA+G,iBAAiB,KAAK,iCAAiC,ynBAAynB,wBAAwB,sLAAsL,kjBAAkjB,wBAAwB,mBAAmB,kBAAkB,qBAAqB,8DAA8D,uMAAuM,mCAAmC,+XAA+X,+CAA+C,mYAAmY,4CAA4C,wQAAwQ,2GAA2G,kVAAkV,iBAAiB,kBAAkB,iBAAiB,qBAAqB,0EAA0E,sMAAsM,kCAAkC,gdAAgd,gEAAgE,yBAAyB,wDAAwD,uIAAuI,+iBAA+iB,cAAc,IAAI,8CAA8C,mEAAmE,KAAK,iCAAiC,iYAAiY,gCAAgC,4iBAA4iB,6CAA6C,yBAAyB,yDAAyD,uIAAuI,+rBAA+rB,6CAA6C,yBAAyB,gDAAgD,oIAAoI,gpBAAgpB,oDAAoD,yBAAyB,+DAA+D,iKAAiK,6qBAA6qB,+CAA+C,yBAAyB,qDAAqD,sIAAsI,wvBAAwvB,gEAAgE,KAAK,kEAAkE,KAAK,oDAAoD,uBAAuB,iEAAiE,mIAAmI,kJAAkJ,gEAAgE,uBAAuB,iEAAiE,mIAAmI,geAAge,gJAAgJ,+PAA+P,KAAK,0CAA0C,kJAAkJ,kBAAkB,mEAAmE,6OAA6O,4CAA4C,yNAAyN,wCAAwC,4NAA4N,4CAA4C,yRAAyR,2CAA2C,+KAA+K,uCAAuC,4RAA4R,kCAAkC,4KAA4K,aAAa,8FAA8F,kUAAkU,iD;;;;;;;;;;;ACAt5rB,oCAAoC,qBAAqB,SAAS,iBAAiB,4CAA4C,cAAc,aAAa,mBAAmB,eAAe,UAAU,6BAA6B,sBAAsB,6BAA6B,qBAAqB,kCAAkC,sBAAsB,6BAA6B,qBAAqB,sBAAsB,mDAAmD,UAAU,mBAAmB,qDAAqD,UAAU,iBAAiB,mBAAmB,gCAAgC,UAAU,8CAA8C,gBAAgB,4CAA4C,gBAAgB,iEAAiE,gBAAgB,gBAAgB,qDAAqD,gBAAgB,gBAAgB,uCAAuC,UAAU,qDAAqD,gBAAgB,mDAAmD,gBAAgB,wEAAwE,gBAAgB,gBAAgB,oCAAoC,4DAA4D,gBAAgB,gBAAgB,uBAAuB,WAAW,4CAA4C,2BAA2B,mBAAmB,yDAAyD,2BAA2B,mBAAmB,oIAAoI,mBAAmB,cAAc,WAAW,6BAA6B,gBAAgB,sBAAsB,UAAU,qBAAqB,SAAS,qBAAqB,qBAAqB,iCAAiC,UAAU,oBAAoB,gCAAgC,kBAAkB,SAAS,cAAc,YAAY,wCAAwC,2BAA2B,8BAA8B,4BAA4B,2BAA2B,6BAA6B,aAAa,SAAS,gCAAgC,aAAa,SAAS,4BAA4B,UAAU,wCAAwC,UAAU,oBAAoB,uCAAuC,kBAAkB,SAAS,cAAc,YAAY,+CAA+C,2BAA2B,qCAAqC,4BAA4B,2BAA2B,oCAAoC,aAAa,SAAS,uCAAuC,aAAa,SAAS,mBAAmB,WAAW,YAAY,2CAA2C,6BAA6B,WAAW,aAAa,sBAAsB,mBAAmB,kDAAkD,WAAW,0DAA0D,aAAa,iEAAiE,gBAAgB,0DAA0D,UAAU,iEAAiE,UAAU,qEAAqE,qBAAqB,iEAAiE,sBAAsB,wEAAwE,UAAU,wEAAwE,uBAAuB,mEAAmE,UAAU,qEAAqE,wBAAwB,4EAA4E,uBAAuB,qEAAqE,YAAY,sDAAsD,UAAU,aAAa,8BAA8B,2DAA2D,kCAAkC,WAAW,YAAY,+BAA+B,kBAAkB,2EAA2E,2BAA2B,4BAA4B,6BAA6B,4BAA4B,2FAA2F,sBAAsB,8BAA8B,+NAA+N,sBAAsB,8BAA8B,gGAAgG,8BAA8B,4HAA4H,0BAA0B,WAAW,gBAAgB,mBAAmB,oDAAoD,4BAA4B,kDAAkD,UAAU,kBAAkB,+CAA+C,YAAY,uDAAuD,uBAAuB,kGAAkG,gBAAgB,4DAA4D,mBAAmB,uDAAuD,UAAU,iBAAiB,UAAU,gBAAgB,UAAU,wCAAwC,wBAAwB,oGAAoG,wBAAwB,YAAY,2BAA2B,4CAA4C,kBAAkB,oBAAoB,mDAAmD,4CAA4C,iBAAiB,oBAAoB,qGAAqG,eAAe,gBAAgB,2GAA2G,UAAU,mBAAmB,iBAAiB,wIAAwI,uBAAuB,6IAA6I,eAAe,yCAAyC,iKAAiK,UAAU,kVAAkV,oCAAoC,wLAAwL,yBAAyB,aAAa,WAAW,6BAA6B,sBAAsB,UAAU,gBAAgB,kCAAkC,yBAAyB,+BAA+B,YAAY,wCAAwC,WAAW,kBAAkB,uBAAuB,eAAe,WAAW,YAAY,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAhsP;AACpF;AACxC;AAC2B;AACA;AACsC;AAC5B;AAE6F;AAE7H;AAGC;AAC+B;AACjB;AACyB;AACnB;AACG;AACA;AACjB;AAC2D;AACI;AAC3B;AACF;AAO1E;IA4FE,0BACU,WAAwB,EACzB,SAA2B,EAC1B,YAA4B,EAC5B,EAAe,EACf,cAA8B;IACtC,wCAAwC;IAChC,KAAwB,EACxB,cAA8B,EAC9B,OAA0B,EAC1B,KAAqB,EACrB,MAAc,EACd,cAA8B,EAC9B,mBAAqC,EACrC,kBAAsC;QAdhD,iBAsBC;QArBS,gBAAW,GAAX,WAAW,CAAa;QACzB,cAAS,GAAT,SAAS,CAAkB;QAC1B,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,OAAE,GAAF,EAAE,CAAa;QACf,mBAAc,GAAd,cAAc,CAAgB;QAE9B,UAAK,GAAL,KAAK,CAAmB;QACxB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,YAAO,GAAP,OAAO,CAAmB;QAC1B,UAAK,GAAL,KAAK,CAAgB;QACrB,WAAM,GAAN,MAAM,CAAQ;QACd,mBAAc,GAAd,cAAc,CAAgB;QAC9B,wBAAmB,GAAnB,mBAAmB,CAAkB;QACrC,uBAAkB,GAAlB,kBAAkB,CAAoB;QApGhD,YAAO,GAAQ,EAAE,CAAC;QAIlB,yBAAoB,GAAG,KAAK,CAAC;QAC7B,YAAO,GAAQ,IAAI,qEAAY,CAAC,CAAC,CAAC,CAAC;QACnC,gBAAW,GAAwB,IAAI,4EAAmB,EAAE,CAAC;QAC7D,eAAU,GAAG;YACX,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE;YACvB,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE;SAC3B,CAAC;QAIF,WAAM,GAAY,KAAK,CAAC;QACxB,aAAQ,GAAe,EAAE,CAAC;QAK1B,eAAU,GAAG,CAAC,CAAC;QACf,sBAAiB,GAAG,KAAK,CAAC;QAC1B,wBAAmB,GAAG,KAAK,CAAC;QAC5B,aAAQ,GAAG,KAAK,CAAC;QACjB,WAAM,GAAQ,EAAE,CAAC;QAEjB,mBAAc,GAAQ,EAAE,CAAC;QACzB,cAAS,GAAG,EAAE,CAAC;QACf,gBAAW,GAAG,EAAE,CAAC;QACjB,kBAAa,GAAG,EAAE,CAAC;QACnB,kBAAa,GAAQ,EAAE,CAAC;QAExB,YAAO,GAAQ,EAAE,CAAC;QAClB,kBAAa,GAAQ,EAAE,CAAC;QACxB,WAAM,GAAQ,EAAE,CAAC;QACjB,iBAAY,GAAG,sDAAO,CAAC,KAAK,CAAC;QAC7B,aAAQ,GAAQ,EAAE,CAAC;QACnB,WAAM,GAAQ,EAAE,CAAC;QAIjB,iBAAY,GAAG,CAAC,CAAC;QACjB,oBAAe,GAAQ,EAAE,CAAC;QAC1B,cAAS,GAAG,KAAK,CAAC;QAGlB,SAAI,GAAG,EAAE;QAET,mBAAc,GAAG;YACf;gBACE,IAAI,EAAE,wBAAwB;gBAC9B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,8BAA8B;gBACpC,IAAI,EAAE,GAAG;aACV;YACD;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,kCAAkC;gBACxC,IAAI,EAAE,GAAG;aACV;YACD;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,yBAAyB;gBAC/B,IAAI,EAAE,GAAG;aACV;YACD;gBACE,IAAI,EAAE,2BAA2B;gBACjC,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,sCAAsC;gBAC5C,IAAI,EAAE,GAAG;aACV;YACD;gBACE,IAAI,EAAE,sBAAsB;gBAC5B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,gCAAgC;gBACtC,IAAI,EAAE,GAAG;aACV;YACD;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,wCAAwC;gBAC9C,IAAI,EAAE,GAAG;aACV;SACF,CAAC;QAwzBF,iBAAY,GAAG,UAAC,CAAC;YACf,IAAI,EAAE,GAAG,CAAC,CAAC;QACb,CAAC;QAycD,mBAAc,GAAG,UAAC,CAAC;YACjB,KAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QACtC,CAAC;QApvCC,IAAI,CAAC,aAAa,GAAG,IAAI,yDAAa,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC;QACzF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAClD,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,CAAC;QAC9C,IAAI,CAAC,IAAI,GAAG,6DAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC3D,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACxB,CAAC;IAED,mCAAQ,GAAR;QAAA,iBAiEC;QAhEC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;QACrD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC;YACjD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC;gBAC5C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,CAAC;QAC7E,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YACrD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACnC,CAAC;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,UAAC,IAAS;YAClD,eAAe;YACf,IAAI,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC7C,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC7C,KAAI,CAAC,UAAU,GAAG,gDAAW,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YAC7D,KAAI,CAAC,SAAS,GAAG,gEAAoB,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;YAC9F,KAAI,CAAC,OAAO,CAAC,gBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YAC9E,KAAI,CAAC,SAAS,CAAC,WAAW,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC;YACvE,KAAI,CAAC,MAAM,CAAC,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACvF,KAAI,CAAC,MAAM,CAAC,6BAA6B,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACxG,KAAI,CAAC,MAAM,CAAC,oBAAoB,GAAG,QAAQ,CAAC,uBAAuB,CAAC,CAAC,CAAC,QAAQ,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACnH,KAAI,CAAC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YAC7E,KAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YAC/E,KAAI,CAAC,MAAM,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACjF,IAAI,MAAM,GAAG,KAAK,CAAC;YACnB,IAAI,OAAY,CAAC;YACjB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;gBACvB,MAAM,GAAG,IAAI,CAAC;YAChB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACX,KAAI,CAAC,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,aAAa,KAAK,uBAAuB,EAA9C,CAA8C,CAAC,CAAC;gBACxG,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACzB,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,KAAI,CAAC,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,aAAa,KAAK,uBAAuB,EAA9C,CAA8C,CAAC,CAAC;YAC1G,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,IAAI,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;gBACzC,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC/B,KAAI,CAAC,aAAa,CAAC,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;gBAC/C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,2BAA2B;oBAC3B,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;gBAC9B,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3B,CAAC;YACD,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACnD,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,gBAAgB,CAAC;YAC9E,CAAC;YACD,KAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,4DAA4D;YAC5D,UAAU,CAAC;gBACT,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gBACzC,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC;YACvD,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACpE,IAAM,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,KAAK,WAAW,EAAjB,CAAiB,CAAC,CAAC;QACjE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAChC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QACjC,CAAC;IACH,CAAC;IACD,sCAAW,GAAX;QACE,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;QAC5B,kCAAkC;QAClC,kCAAkC;IACpC,CAAC;IACD,0CAAe,GAAf;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YACnD,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;QAC7B,CAAC;IACH,CAAC;IACD,kCAAkC;IAClC,wCAAa,GAAb,UAAc,CAAC;QAAf,iBAkBC;QAjBC,IAAM,YAAY,GAAG;YACnB,MAAM,EAAE,CAAC;YACT,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,SAAS,EAAE,IAAI;SAChB,CAAC;QACF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,oEAAsB,EAAE;YAC/D,KAAK,EAAE,UAAU,EAAE,YAAY,gBAAE,QAAQ,EAAE,QAAQ;YACnD,QAAQ,EAAE,KAAK;SAChB,CAAC,CAAC;QACH,IAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;YAClD,IAAM,IAAI,GAAG,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,CAAC;YACrD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,gDAAgD;gBAChD,sBAAsB;YACxB,CAAC;YACD,QAAQ,CAAC,WAAW,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,0CAAe,GAAf;QACE,6CAA6C;QAC7C,0BAA0B;QAC1B,MAAM;IACR,CAAC;IACD,gDAAqB,GAArB;QACE,6CAA6C;QAC7C,2BAA2B;QAC3B,MAAM;QACN,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACtB,CAAC;IACD,MAAM;IACN,4CAAiB,GAAjB;QACE,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YAC9D,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,wBAAwB,EAAlC,CAAkC,CAAC;YACnG,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YACpD,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC;YACpC,CAAC;YACD,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC;YAC1E,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC;YACxE,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/C,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBACrD,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBAC/D,CAAC;YACH,CAAC;YACD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QAC1D,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,qBAAqB,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,CAAC,CAAC,KAAK,CAAC;QACpJ,IAAI,YAAY,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACpE,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,YAAY,CAAC;QACzC,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;IAClD,CAAC;IACD,MAAM;IACN,wCAAa,GAAb,UAAc,IAAI;QAAlB,iBAoDC;QAnDC,wBAAwB;QACxB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAEhC,IAAI,CAAC,OAAO,CAAC,qBAAqB,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,KAAK,CAAC;QAClG,WAAW;QACX,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,IAAI,IAAI,CAAC,WAAW,EAA3B,CAA2B,CAAC,CAAC,CAAC,CAAC;QACrF,IAAI,UAAU,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,wBAAwB,EAAlC,CAAkC,CAAC;QACjF,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,IAAI,IAAI,CAAC,WAAW,EAA3B,CAA2B,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QAC7F,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC;QACpC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;YACnB,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,KAAK,KAAI,CAAC,OAAO,CAAC,WAAW,EAApC,CAAoC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7F,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACZ,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC;gBACzC,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;gBACrD,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;YACrD,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;gBAChC,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC;gBACnC,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC;YACpC,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;QACrC,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;YACpC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC5C,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAClC,CAAC;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,cAAI;YACjC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC5C,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;oBACvB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,KAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;oBACvC,CAAC;gBACH,CAAC;gBACD,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;QACH,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC;YACnD,IAAM,GAAG,GAAG,aAAa,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YAC7C,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC/B,CAAC;QACD,8BAA8B;QAC9B,IAAI,CAAC,SAAS,GAAG,gEAAoB,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;IACpG,CAAC;IACD,yCAAc,GAAd;QAAA,iBA6FC;QA5FC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,MAAM,CAAC;QACX,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YACrD,MAAM,GAAG,iDAAK,CAAC,UAAU,CAAC,OAAO,CAAC;QACpC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YACpD,MAAM,GAAG,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC;QAClC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YACnD,MAAM,GAAG,iDAAK,CAAC,SAAS,CAAC,KAAK,CAAC;QACjC,CAAC;QACD,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,EAAE,CAAC,CAAC,MAAM,KAAK,iDAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;YACxC,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;gBACrE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,kBAAkB,EAAE,CAAC;oBAC1B,KAAI,CAAC,OAAO,CAAC,cAAc,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC;oBACrD,KAAI,CAAC,OAAO,CAAC,YAAY,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBACvF,IAAI,iBAAiB,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBACxF,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;oBACzC,KAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;oBACvC,oBAAoB;oBACpB,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBAClE,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;wBACrB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;+BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;4BAC5H,KAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;wBACpC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,KAAI,CAAC,UAAU,CAAC,UAAU,EAAE,iBAAiB,CAAC,CAAC;wBACjD,CAAC;oBACH,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,KAAK,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YAC7C,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;gBACpF,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,kBAAkB,EAAE,CAAC;oBAC1B,KAAI,CAAC,OAAO,CAAC,cAAc,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC;oBACrD,KAAI,CAAC,OAAO,CAAC,YAAY,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBACvF,IAAI,iBAAiB,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBACxF,KAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;oBACvC,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBAClE,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;oBACzC,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;wBACrB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;+BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;4BAC5H,KAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;wBACpC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,KAAI,CAAC,UAAU,CAAC,UAAU,EAAE,iBAAiB,CAAC,CAAC;wBACjD,CAAC;oBACH,CAAC;gBAEH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,KAAK,iDAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;YAC5C,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;gBACpF,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,kBAAkB,EAAE,CAAC;oBAC1B,KAAI,CAAC,OAAO,CAAC,YAAY,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBACvF,IAAI,iBAAiB,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBACxF,KAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;oBACvC,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBAClE,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;oBACzC,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;wBACrB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;+BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;4BAC5H,KAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;wBACpC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,KAAI,CAAC,UAAU,CAAC,UAAU,EAAE,iBAAiB,CAAC,CAAC;wBACjD,CAAC;oBACH,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IACD,2CAAgB,GAAhB,UAAiB,UAAU;QAA3B,iBAiCC;QAhCC,UAAU,CAAC;YACT,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,EAAE,EAAE,CAAC,CAAC;QACP,IAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC;YAC1C,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YACnB,UAAU,EAAE,UAAU;YACtB,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,aAAa;SAC1C,CAAC,CAAC,SAAS,CAAC,YAAE;YACb,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK;gBAClC,KAAI,CAAC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;gBACrC,KAAI,CAAC,cAAc,EAAE,CAAC;gBACtB,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC;gBAC3C,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;gBACjE,KAAI,CAAC,eAAe,GAAG,IAAI,CAAC;gBAC5B,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gBAEzC,KAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK,CAAC;gBACnC,sBAAsB;gBACtB,+DAA+D;gBAC/D,0BAA0B;gBAC1B,6FAA6F;gBAC7F,WAAW;gBACX,IAAI;YACN,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,qCAAU,GAAV,UAAW,UAAU,EAAE,QAAQ;QAA/B,iBAEC;QADC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,EAAE,YAAY,EAAE,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,aAAa,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACzJ,CAAC;IACD,wBAAwB;IACxB,2CAAgB,GAAhB;QAAA,iBAsBC;QArBC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,iBAAO;YACjE,IAAM,IAAI,GAAQ,OAAO,CAAC;YAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,UAAU,CAAC,CAAC,CAAC;gBAChC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,YAAY,CAAC,CAAC,CAAC;oBACpC,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC3C,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,gCAAgC,CAAC,CAAC,CAAC;oBAC/D,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;oBAChD,KAAI,CAAC,cAAc,EAAE,CAAC;gBACxB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;wBACrC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;4BACtC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;wBACxC,CAAC;oBACH,CAAC,CAAC,CAAC;oBACH,KAAI,CAAC,UAAU,EAAE,CAAC;oBAClB,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,KAAK,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;wBAC1D,KAAI,CAAC,cAAc,EAAE,CAAC;oBACxB,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,kBAAkB;IAClB,yCAAc,GAAd;QACE,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACrB,CAAC;IACD,MAAM;IACN,gDAAqB,GAArB,UAAsB,IAAI;QACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,2BAA2B,CAAC,cAAc,EAAE;QACjD,iDAAiD;IACnD,CAAC;IACD,MAAM;IACN,8CAAmB,GAAnB,UAAoB,UAAU,EAAE,QAAQ;QACtC,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC1C,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,8CAAS,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;QACxC,eAAe;IACjB,CAAC;IACD,MAAM;IACN,wCAAa,GAAb;QAAA,iBAsCC;QArCC,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,UAAC,GAAG;YACzC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACjC,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC9C,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC/C,CAAC;QACH,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAC9D,MAAM,CAAC,IAAI,+CAAU,CACnB,UAAC,QAAQ;gBACP,KAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC,SAAS,CACrC,eAAK;oBACH,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;wBACd,KAAK,KAAK;4BACR,KAAI,CAAC,OAAO,CAAC,iDAAK,CAAC,SAAS,CAAC,MAAM,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,gBAAM;gCAC5D,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gCACtB,QAAQ,CAAC,QAAQ,EAAE,CAAC;4BACtB,CAAC,CAAC,CAAC;4BACH,KAAK,CAAC;wBACR,KAAK,IAAI;4BACP,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;4BACpB,QAAQ,CAAC,QAAQ,EAAE,CAAC;4BACpB,KAAK,CAAC;wBACR,KAAK,QAAQ;4BACX,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;4BACrB,QAAQ,CAAC,QAAQ,EAAE,CAAC;4BACpB,KAAK,CAAC;wBACR;4BACE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;4BACpB,QAAQ,CAAC,QAAQ,EAAE,CAAC;4BACpB,KAAK,CAAC;oBACV,CAAC;gBACH,CAAC,CACF,CAAC;YACJ,CAAC,CAAC,CAAC;QACP,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;IACH,CAAC;IACD,MAAM;IACA,kCAAO,GAAb,UAAc,IAAI,EAAE,IAAI;;;;;;wBACtB,EAAE,CAAC,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;4BACnC,IAAI,CAAC,yBAAyB,CAAC,KAAK,EAAE,CAAC;4BACvC,MAAM,gBAAC,KAAK,EAAC;wBACf,CAAC;wBACD,qBAAM,IAAI,CAAC,iBAAiB,EAAE;;wBAA9B,SAA8B,CAAC;wBAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;4BACjC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC,cAAI;gCACvC,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC;gCACvB,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC;gCACpB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;gCACrB,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC;4BAC5B,CAAC,CAAC,CAAC;wBACL,CAAC;6BACG,IAAI,CAAC,EAAE,EAAP,wBAAO;wBACT,mDAAO,CAAC,WAAW,EAAE,CAAC;wBACf,qBAAM,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,aAAG;gCACvE,mDAAO,CAAC,WAAW,EAAE,CAAC;gCACtB,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oCAC7B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;oCACjE,MAAM,CAAC,IAAI,CAAC;gCACd,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oCACrC,MAAM,CAAC,KAAK,CAAC;gCACf,CAAC;4BACH,CAAC,CAAC;4BATF,sBAAO,SASL,EAAC;;wBAEH,mDAAO,CAAC,WAAW,EAAE,CAAC;wBACf,qBAAM,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,aAAG;gCAChE,mDAAO,CAAC,WAAW,EAAE,CAAC;gCACtB,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oCAC7B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;oCACjE,MAAM,CAAC,IAAI,CAAC;gCACd,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oCACrC,MAAM,CAAC,KAAK,CAAC;gCACf,CAAC;4BACH,CAAC,CAAC;4BATF,sBAAO,SASL,EAAC;;;;KAEN;IACD,MAAM;IACN,4CAAiB,GAAjB;QAAA,iBAUC;QATC,IAAM,IAAI,GAAG,UAAC,KAAK;YAAE,cAAO;iBAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;gBAAP,6BAAO;;YAAK,WAAI,OAAO,CAAC,iBAAO,IAAI,iBAAU,gBAAC,OAAO,EAAE,KAAK,SAAK,IAAI,IAAlC,CAAmC,CAAC;QAA3D,CAA2D,CAAC;QAC7F,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACpB,qBAAqB;YACrB,KAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpB,0EAA0E;YAC1E,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,EAAE;YAC/B,KAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC,gEAAoB,CAAC,uBAAuB,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAChH,MAAM,CAAC,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;IACL,CAAC;IACD,kBAAkB;IAClB,kCAAO,GAAP,UAAQ,IAAI,EAAE,YAAa;QAA3B,iBA+BC;QA9BC,EAAE,CAAC,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,yBAAyB,CAAC,KAAK,EAAE,CAAC;YACvC,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,UAAU,CAAC;YACT,KAAI,CAAC,cAAc,EAAE,CAAC;YACtB,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,UAAU,EAAE,CAAC;YAClC,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnB,MAAM,CAAC;YACT,CAAC;YACD,KAAI,CAAC,QAAQ,GAAG,uFAAe,CAAC,kBAAkB,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YAClF,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnB,mDAAO,CAAC,MAAM,CAAC,oEAAM,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,eAAe,EAAE,mCAAM,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,mCAAM,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;gBACjN,MAAM,CAAC;YACT,CAAC;YACD,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;gBACjC,KAAI,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC,cAAI;oBACvC,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC;oBACvB,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC;oBACpB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;oBACrB,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC;gBAC5B,CAAC,CAAC,CAAC;YACL,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,KAAK,MAAM,IAAI,CAAC,IAAI,KAAK,iDAAK,CAAC,SAAS,CAAC,OAAO,IAAI,KAAI,CAAC,OAAO,CAAC,MAAM,KAAK,iDAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBAClH,KAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,YAAY,CAAC;YAC5C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC;YAC1B,CAAC;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,wBAAwB;IACxB,4CAAiB,GAAjB,UAAkB,IAAI,EAAE,YAAY;QAApC,iBAoBC;QAnBC,EAAE,CAAC,CAAC,IAAI,KAAK,iDAAK,CAAC,SAAS,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,iDAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;YAC7F,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAClC,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;YACzD,mDAAO,CAAC,MAAM,CAAC,qDAAqD,EAAE,OAAO,CAAC,CAAC;YAC/E,MAAM,CAAC;QACT,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,iDAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;gBACzD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAChC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,kDAAM,CAAC,gBAAgB,CAAC;oBACtB,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gBAC/B,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACnC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;QACjC,CAAC;IACH,CAAC;IACD,8CAAmB,GAAnB,UAAoB,IAAI;QAAxB,iBAmCC;QAlCC,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC;QACtD,IAAI,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,wBAAwB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACzE,OAAO,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,OAAO,CAAC;QACjD,IAAI,eAAe,GAAG;YACpB,OAAO,EAAE,OAAO;YAChB,YAAY,EAAE,EAAE;YAChB,UAAU,EAAE,UAAU;YACtB,SAAS,EAAE,EAAE;YACb,kBAAkB,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,oBAAoB,CAAC,WAAW,EAAE;YAChF,SAAS,EAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,6BAA6B;YACnE,mBAAmB,EAAE,IAAI;YACzB,iBAAiB,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,aAAa;YAC1D,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,SAAS;YACnD,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,oCAAoC;SAC/E;QACD,IAAM,YAAY,GAAG;YACnB,eAAe,EAAE,eAAe;SACjC,CAAC;QAEF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,qHAAuB,EAAE;YACvE,QAAQ,EAAE,QAAQ;YAClB,QAAQ,EAAE,KAAK;YACf,KAAK,EAAE,oCAAoC;YAC3C,YAAY;SACb,CAAC,CAAC;QAEH,IAAM,QAAQ,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,SAAS,CAAC;YACzD,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,IAAI,iDAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;gBACxE,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;gBAChC,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrB,CAAC;YACD,QAAQ,CAAC,WAAW,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,2BAA2B;IAC3B,wCAAa,GAAb,UAAc,IAAI;QAChB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC5B,CAAC;IACD,yCAAc,GAAd;QACE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,EAAE,CAAC,6CAA4C;QAC5E,IAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC,gEAAoB,CAAC,uBAAuB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;IAClH,CAAC;IACD,cAAc;IACd,qCAAU,GAAV;QACE,IAAI,QAAQ,GAAG,IAAI,CAAC;QAEpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;YAC9B,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,YAAY,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YACjH,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;YAC/B,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YACpH,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;YAChC,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YAClH,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YACjC,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YAC7G,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;YAC9B,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YAChH,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAkB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;YAC9D,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC;YACzE,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;YAClC,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YACzG,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;YAC1F,mDAAO,CAAC,MAAM,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;YAChF,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QACD,MAAM,CAAC,QAAQ,CAAC;IAClB,CAAC;IACD,aAAa;IACb,iCAAM,GAAN,UAAO,IAAI;QAAX,iBAoCC;QAnCC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YACpB,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;gBACtE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,kBAAkB,EAAE,CAAC;oBAC1B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;oBACvE,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gBAC3C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,IAAM,KAAG,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;gBACvD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,kBAAkB,EAAE,CAAC;oBAC1B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;oBACvE,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;oBACzC,KAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK,CAAC;oBACnC,+DAA+D;gBACjE,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,qCAAU,GAAV,UAAW,IAAI;QAAf,iBAeC;QAdC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;eAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC5H,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;gBACtC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;oBACrC,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;gBAChK,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,WAAW,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;gBACnE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,sCAAsC,EAAE,gCAAgC,EAAE,eAAe,EAAE,WAAW,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;YACnM,CAAC;QACH,CAAC;IACH,CAAC;IACD,iBAAiB;IACjB,oCAAS,GAAT,UAAU,IAAI;QAAd,iBAkBC;QAjBC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;YAC1D,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;gBAC7B,KAAI,CAAC,OAAO,CAAC,cAAc,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC;gBACrD,KAAI,CAAC,OAAO,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;gBAC9B,KAAI,CAAC,OAAO,CAAC,YAAY,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;gBACvF,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,wBAAwB,EAAE,SAAS,CAAC,CAAC;gBAC3E,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;YAC3C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,sCAAW,GAAX,UAAY,CAAC;QAAb,iBA2HC;QA1HC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;YACpC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;gBAC3B,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,wBAAwB,EAAlC,CAAkC,CAAC,CAAC;gBAC5E,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACzB,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC5B,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,MAAM,GAAG,KAAI,CAAC,cAAc;gBACnC,CAAC;gBACD,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;gBACtC,KAAI,CAAC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;gBAClD,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;gBAChD,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;oBACvB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;wBACxB,KAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;oBACnC,CAAC;gBACH,CAAC;gBACD,KAAI,CAAC,OAAO,CAAC,4BAA4B,GAAG,KAAI,CAAC,WAAW,CAAC,wBAAwB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC,IAAI,CAAC;gBAClJ,KAAI,CAAC,OAAO,CAAC,6BAA6B,GAAG,KAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC,CAAC,IAAI,CAAC;gBAChJ,KAAI,CAAC,OAAO,CAAC,oBAAoB,GAAG,KAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC9H,KAAI,CAAC,OAAO,CAAC,mCAAmC,GAAG,KAAI,CAAC,WAAW,CAAC,2BAA2B,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mCAAmC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACnK,KAAI,CAAC,OAAO,CAAC,yBAAyB,GAAG,KAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC1I,KAAI,CAAC,OAAO,CAAC,qCAAqC,GAAG,KAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,qCAAqC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAChK,kBAAkB;gBAClB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;oBAChB,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC;oBACpB,KAAI,CAAC,WAAW,GAAG,EAAE,CAAC;oBACtB,IAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;oBAC3D,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBACxC,KAAI,CAAC,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;wBACnC,KAAI,CAAC,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;wBACjC,KAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,KAAK,CAAC;wBACpC,KAAI,CAAC,aAAa,CAAC,aAAa,GAAG,KAAK,CAAC;wBACzC,KAAI,CAAC,aAAa,CAAC,iBAAiB,GAAG,KAAK,CAAC;wBAC7C,KAAI,CAAC,aAAa,CAAC,UAAU,GAAG,KAAK,CAAC;wBACtC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;4BAC3C,IAAM,MAAM,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;4BACrC,IAAM,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;4BACvC,IAAM,GAAG,GAAG,0DAAc,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;4BACpD,KAAI,CAAC,aAAa,CAAC,0DAAc,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC;wBACtE,CAAC;oBACH,CAAC;oBACD,IAAM,eAAa,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;oBAC9D,EAAE,CAAC,CAAC,eAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,eAAa,CAAC,OAAO,CAAC,eAAK;4BACzB,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;gCAClB,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;oCAC9B,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,WAAW;wCACvB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;wCAC7C,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC;yCACF;qCACF,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;oCAClC,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,aAAa;wCACzB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;wCAC7C,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC;4CACD,MAAM,EAAE,KAAI,CAAC,SAAS,CAAC,UAAU;4CACjC,eAAe,EAAE,IAAI;yCACtB;wCACD,MAAM,EAAE,KAAI,CAAC,SAAS,CAAC,UAAU;qCAClC,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;oCAC/B,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,WAAW;wCACvB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;wCAC7C,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC,EAAE,aAAa,EAAE,YAAY,EAAE,uBAAuB,EAAE,qBAAqB;yCAC/E;qCACF,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;oCAClC,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,aAAa;wCACzB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;qCAC9C,CACF,CAAC;gCACJ,CAAC;4BACH,CAAC;wBACH,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;wBAC9C,KAAI,CAAC,OAAO,CAAC,eAAe,GAAG,eAAa,CAAC;oBAC/C,CAAC;oBACD,IAAI;wBACF,KAAI,CAAC,OAAO,CAAC,eAAe,GAAG,EAAE,CAAC;oBACpC,eAAa,CAAC,OAAO,CAAC,eAAK;wBACzB,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;oBAC/C,CAAC,CAAC,CAAC;gBACL,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC;oBACpB,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC;oBACxB,KAAI,CAAC,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;oBACnC,KAAI,CAAC,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;oBACjC,KAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,KAAK,CAAC;oBACpC,KAAI,CAAC,aAAa,CAAC,aAAa,GAAG,KAAK,CAAC;oBACzC,KAAI,CAAC,aAAa,CAAC,iBAAiB,GAAG,KAAK,CAAC;oBAC7C,KAAI,CAAC,aAAa,CAAC,UAAU,GAAG,KAAK,CAAC;gBACxC,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAID,2CAAgB,GAAhB;QAAA,iBA0HC;QAzHC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;YACpC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC5C,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,wBAAwB,EAAlC,CAAkC,CAAC,CAAC;gBAC5E,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACzB,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC5B,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,MAAM,GAAG,KAAI,CAAC,cAAc;gBACnC,CAAC;gBACD,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;gBACtC,KAAI,CAAC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;gBAClD,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;gBAChD,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;oBACvB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;wBACxB,KAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;oBACnC,CAAC;gBACH,CAAC;gBACD,KAAI,CAAC,OAAO,CAAC,4BAA4B,GAAG,KAAI,CAAC,WAAW,CAAC,wBAAwB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC,IAAI,CAAC;gBAClJ,KAAI,CAAC,OAAO,CAAC,6BAA6B,GAAG,KAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC,CAAC,IAAI,CAAC;gBAChJ,KAAI,CAAC,OAAO,CAAC,oBAAoB,GAAG,KAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC9H,KAAI,CAAC,OAAO,CAAC,mCAAmC,GAAG,KAAI,CAAC,WAAW,CAAC,2BAA2B,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mCAAmC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACnK,KAAI,CAAC,OAAO,CAAC,yBAAyB,GAAG,KAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC1I,KAAI,CAAC,OAAO,CAAC,qCAAqC,GAAG,KAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,qCAAqC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAChK,kBAAkB;gBAClB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC1C,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC;oBACpB,KAAI,CAAC,WAAW,GAAG,EAAE,CAAC;oBACtB,IAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;oBAC3D,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBACxC,KAAI,CAAC,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;wBACnC,KAAI,CAAC,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;wBACjC,KAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,KAAK,CAAC;wBACpC,KAAI,CAAC,aAAa,CAAC,aAAa,GAAG,KAAK,CAAC;wBACzC,KAAI,CAAC,aAAa,CAAC,iBAAiB,GAAG,KAAK,CAAC;wBAC7C,KAAI,CAAC,aAAa,CAAC,UAAU,GAAG,KAAK,CAAC;wBACtC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;4BAC3C,IAAM,MAAM,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;4BACrC,IAAM,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;4BACvC,IAAI,GAAG,GAAG,0DAAc,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;4BAClD,KAAI,CAAC,aAAa,CAAC,0DAAc,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC;wBACtE,CAAC;oBACH,CAAC;oBACD,IAAM,eAAa,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;oBAC9D,EAAE,CAAC,CAAC,eAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,eAAa,CAAC,OAAO,CAAC,eAAK;4BACzB,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;gCAClB,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;oCAC9B,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,WAAW;wCACvB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;wCAC7C,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC;yCACF;qCACF,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;oCAClC,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,aAAa;wCACzB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;wCAC7C,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC;4CACD,MAAM,EAAE,KAAI,CAAC,SAAS,CAAC,UAAU;4CACjC,eAAe,EAAE,IAAI;yCACtB;wCACD,MAAM,EAAE,KAAI,CAAC,SAAS,CAAC,UAAU;qCAClC,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;oCAC/B,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,WAAW;wCACvB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;wCAC7C,aAAa,EAAE;4CACb,cAAc,EAAE;gDACd,KAAI,CAAC,UAAU,CAAC,eAAa,CAAC,CAAC;4CACjC,CAAC,EAAE,aAAa,EAAE,YAAY,EAAE,uBAAuB,EAAE,qBAAqB;yCAC/E;qCACF,CACF,CAAC;gCACJ,CAAC;gCACD,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;oCAClC,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB;wCACE,UAAU,EAAE,aAAa;wCACzB,SAAS,EAAE,KAAK,CAAC,IAAI;wCACrB,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;qCAC9C,CACF,CAAC;gCACJ,CAAC;4BACH,CAAC;wBACH,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;oBAChD,CAAC;oBACD,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,eAAe,IAAI,KAAI,CAAC,OAAO,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC5E,KAAI,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC,iBAAO;4BAC1C,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,IAAI,SAAS,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;gCACpD,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;4BAC7D,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC;4BACnD,CAAC;wBACH,CAAC,CAAC,CAAC;oBACL,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,eAAa,CAAC,OAAO,CAAC,eAAK;4BACzB,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;wBAC/C,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,OAAO,CAAC,eAAe,GAAG,eAAa,CAAC;oBAC/C,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,2CAA2C;IAC3C,qCAAU,GAAV,UAAW,aAAa;QAAxB,iBASC;QARC,aAAa,CAAC,OAAO,CAAC,cAAI;YACxB,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACnC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,KAAK,GAAG,KAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;gBACvC,CAAC;YACH,CAAC;YACD,KAAI,CAAC,OAAO,CAAC,eAAe,GAAG,aAAa,CAAC;QAC/C,CAAC,CAAC,CAAC;IACL,CAAC;IACD,uBAAuB;IACvB,4CAAiB,GAAjB;QACE,MAAM,CAAC;YACL,QAAQ,EAAE,OAAO;YACjB,QAAQ,EAAE,GAAG;YACb,KAAK,EAAE,IAAI,CAAC,WAAW;SACxB,CAAC;IACJ,CAAC;IACD,+CAAoB,GAApB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YAChC,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IACD,qCAAU,GAAV;QACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACnD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;oBACrD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,yBAAyB,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,mCAAmC,IAAI,IAAI,CAAC;wBAC7G,IAAI,CAAC,OAAO,CAAC,qCAAqC,GAAG,gEAAoB,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,yBAAyB,GAAG,IAAI,CAAC,OAAO,CAAC,mCAAmC,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;oBAC9M,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,yBAAyB,IAAI,IAAI,CAAC;wBACtD,IAAI,CAAC,OAAO,CAAC,qCAAqC,GAAG,gEAAoB,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;oBAC3J,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mCAAmC,IAAI,IAAI,CAAC;wBAChE,IAAI,CAAC,OAAO,CAAC,qCAAqC,GAAG,gEAAoB,CAAC,WAAW,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,mCAAmC,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;gBAC3K,CAAC;gBACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;oBACxD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,6BAA6B,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,mCAAmC,IAAI,IAAI,CAAC;wBACjH,IAAI,CAAC,OAAO,CAAC,qCAAqC,GAAG,gEAAoB,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,6BAA6B,GAAG,IAAI,CAAC,OAAO,CAAC,mCAAmC,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;oBAClN,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,6BAA6B,IAAI,IAAI,CAAC;wBAC1D,IAAI,CAAC,OAAO,CAAC,qCAAqC,GAAG,gEAAoB,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;oBAC/J,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mCAAmC,IAAI,IAAI,CAAC;wBAChE,IAAI,CAAC,OAAO,CAAC,qCAAqC,GAAG,gEAAoB,CAAC,WAAW,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,mCAAmC,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;gBAC3K,CAAC;YACH,CAAC;YACD,IAAI;gBACF,IAAI,CAAC,OAAO,CAAC,qCAAqC,GAAG,IAAI,CAAC;QAC9D,CAAC;IACH,CAAC;IACD,wBAAwB;IACxB,kCAAO,GAAP;QAAA,iBAUC;QATC,UAAU,CAAC;YACT,KAAI,CAAC,cAAc,EAAE,CAAC;YACtB,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC;YACT,CAAC;YACD,IAAI,IAAI,GAAG,KAAI,CAAC,cAAc,CAAC,wBAAwB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;YACtE,IAAI,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,OAAO,CAAC;YAC9C,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACvC,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,+BAAI,GAAJ;QACE,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC1B,IAAI,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;QACpD,IAAI,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,OAAO,CAAC;QAC9C,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IACvC,CAAC;IACD,0CAAe,GAAf,UAAgB,MAAM;QACpB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC3B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC5C,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gBAC3C,IAAI,CACF,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACzC,CAAC;YACD,IAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;YAC/C,IAAI,CAAC,OAAO,CAAC,eAAe,GAAG,aAAa,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAClE,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,eAAe,GAAG,IAAI,CAAC;QACtC,CAAC;IACH,CAAC;IACD,kCAAO,GAAP,UAAQ,CAAM;QACZ,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC7B,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC;QAClC,CAAC;IACH,CAAC;IACD,4CAAiB,GAAjB;QACE,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAAA,CAAC;IACF,aAAa;IACb,uCAAY,GAAZ;QAAA,iBAiCC;QAhCC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;gBAC9D,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE;qBAC1B,SAAS,CACR,eAAK;oBACH,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;wBACd,KAAK,KAAK;4BACR,KAAI,CAAC,OAAO,CAAC,iDAAK,CAAC,SAAS,CAAC,MAAM,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,aAAG;gCACzD,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;oCACR,KAAI,CAAC,MAAM,EAAE,CAAC;gCAChB,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,MAAM,CAAC;gCACT,CAAC;4BACH,CAAC,CAAC,CAAC;4BACH,KAAK,CAAC;wBACR,KAAK,IAAI;4BACP,KAAI,CAAC,MAAM,EAAE,CAAC;4BACd,KAAK,CAAC;wBACR,KAAK,QAAQ;4BACX,KAAI,CAAC,MAAM,EAAE,CAAC;4BACd,KAAK,CAAC;wBACR;4BACE,KAAK,CAAC;oBACV,CAAC;gBACH,CAAC,CACF,CAAC;YACN,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,MAAM,EAAE,CAAC;YAChB,CAAC;QACH,CAAC;IACH,CAAC;IACD,4BAA4B;IAC5B,+CAAoB,GAApB;QAAA,iBAUC;QATC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,cAAI;YAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACnB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,aAAa,CAAC,CAAC,CAAC;oBACrC,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;gBAC5C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;gBAC1C,CAAC;YACH,CAAC;QACH,CAAC,CAAC;IACJ,CAAC;IACD,aAAa;IACb,iCAAM,GAAN;QAAA,iBAiBC;QAhBC,IAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5C,IAAI,CAAC,OAAO,GAAG,IAAI,qEAAY,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,GAAG,CAAC,cAAc,CAAC;QACjD,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,GAAG,CAAC,aAAa,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,GAAG,CAAC,YAAY,CAAC;QAC7C,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,GAAG,CAAC,aAAa,CAAC;QAC/C,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,SAAS,GAAG,gEAAoB,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,CAAC;QACjG,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,UAAU,CAAC;YACT,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;YACzC,KAAI,CAAC,2BAA2B,CAAC,qBAAqB,EAAE;QAC1D,CAAC,CAAC,CAAC;IACL,CAAC;IACD,6CAAkB,GAAlB,UAAmB,CAAC;QAClB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,CAAC,OAAO,CAAC;YACnD,IAAI,CAAC,OAAO,CAAC,yBAAyB,GAAG,CAAC,CAAC,KAAK,CAAC;QACnD,IAAI;YACF,IAAI,CAAC,OAAO,CAAC,yBAAyB,GAAG,IAAI,CAAC;QAChD,IAAI,CAAC,UAAU,EAAE;IACnB,CAAC;IACD,sCAAW,GAAX,UAAY,UAAU;QACpB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1C,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,UAAU,EAApB,CAAoB,CAAC,CAAC;YACxD,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,wBAAwB,EAAlC,CAAkC,CAAC,CAAC;YAC1E,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,YAAY,GAAG,CAAC;YACvB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,YAAY,GAAG,CAAC;YACvB,CAAC;YACD,IAAI,WAAW,GAAG,IAAI,CAAC;YACvB,IAAI,gBAAgB,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,IAAI,IAAI,2BAA2B,IAAI,IAAI,CAAC,IAAI,IAAI,sBAAsB,IAAI,IAAI,CAAC,IAAI,IAAI,oBAAoB,EAApH,CAAoH,CAAC,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,OAAO,IAAI,IAAI,EAApB,CAAoB,CAAC,CAAC;YAC7M,EAAE,CAAC,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAChC,WAAW,GAAG,KAAK,CAAC;YACtB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,WAAW,GAAG,IAAI,CAAC;YACrB,CAAC;YACD,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,IAAI,IAAI,wBAAwB,IAAI,IAAI,CAAC,IAAI,IAAI,oBAAoB,IAAI,IAAI,CAAC,IAAI,IAAI,oBAAoB,IAAI,IAAI,CAAC,IAAI,IAAI,2BAA2B,IAAI,IAAI,CAAC,IAAI,IAAI,sBAAsB,IAAI,IAAI,CAAC,IAAI,IAAI,oBAAoB,EAAvO,CAAuO,CAAC,CAAC;YAChR,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,OAAO,IAAI,IAAI,EAApB,CAAoB,CAAC,CAAC;YACjE,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,cAAI,IAAI,WAAI,CAAC,IAAI,IAAI,UAAU,EAAvB,CAAuB,CAAC;YAC1E,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACnB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;oBACnB,MAAM,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,WAAW,EAAE,CAAC;gBACnE,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,MAAM,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;gBAC5B,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;YAC5B,CAAC;QACH,CAAC;QACD,IAAI;YACF,MAAM,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;IAC9B,CAAC;IACD,2CAAgB,GAAhB,UAAiB,CAAC;QAChB,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;YAC/D,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACb,IAAI,CAAC,OAAO,CAAC,qBAAqB,CAAC,GAAG,KAAK,CAAC;gBAC5C,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,EAAE,CAAC;YAClC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,OAAO,CAAC,qBAAqB,CAAC,GAAG,IAAI,CAAC;YAC7C,CAAC;QACH,CAAC;IACH,CAAC;IACD,6CAAkB,GAAlB;QAAA,iBAmBC;QAlBC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,gBAAgB,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;YACjF,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;YAC/E,IAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,gBAAgB,CAAC;YAC5C,IAAM,IAAI,GAAG;gBACX,MAAM,EAAE;oBACN,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;oBACpD,aAAa,EAAE,IAAI;iBACpB;aACF,CAAC;YACF,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,aAAG;gBACtD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,UAAC,GAAG;wBACzC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;4BAC/B,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBAClD,CAAC,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,iDAAsB,GAAtB;QAAA,iBAgBC;QAfC,IAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,gBAAgB,CAAC;QAC5C,IAAM,IAAI,GAAG;YACX,MAAM,EAAE;gBACN,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC;gBACtC,aAAa,EAAE,IAAI;aACpB;SACF,CAAC;QACF,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,aAAG;YACtD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,UAAC,GAAG;oBACzC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;wBAC/B,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAClD,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,oCAAS,GAAT,UAAU,CAAC;QAAX,iBAiFC;QAhFC,IAAM,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC;QAC5B,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACZ,KAAK,UAAU;gBACb,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,2BAA2B,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC;oBAChE,IAAI,SAAO,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,yEAAyE,CAAC;yBACjH,SAAS,CACR,eAAK;wBACH,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;4BACd,KAAK,KAAK;gCACR,0BAA0B;gCAC1B,KAAI,CAAC,2BAA2B,CAAC,yBAAyB,EAAE,CAAC;gCAC7D,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gCACtB,KAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;gCAClC,KAAK,CAAC;4BACR,KAAK,IAAI;gCACP,KAAI,CAAC,2BAA2B,CAAC,qBAAqB,EAAE;gCACxD,KAAI,CAAC,2BAA2B,CAAC,yBAAyB,EAAE,CAAC;gCAC7D,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gCACtB,KAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;gCAClC,KAAK,CAAC;4BACR,KAAK,QAAQ;gCACX,iBAAiB;gCACjB,KAAI,CAAC,aAAa,GAAG,CAAC,CAAC;gCACvB,KAAK,CAAC;4BACR;gCACE,KAAK,CAAC;wBACV,CAAC;oBACH,CAAC,EACD,aAAG,IAAM,CAAC,EACV;wBACE,SAAO,CAAC,WAAW,EAAE,CAAC;oBACxB,CAAC,CACF,CAAC;gBACN,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;gBACpC,CAAC;gBACD,KAAK,CAAC;YACR,KAAK,QAAQ;gBACX,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC9E,IAAI,SAAO,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,yEAAyE,CAAC;yBACjH,SAAS,CACR,eAAK;wBACH,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;4BACd,KAAK,KAAK;gCACR,0BAA0B;gCAC1B,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gCACzC,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gCACvB,KAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;gCACjC,KAAK,CAAC;4BACR,KAAK,IAAI;gCACP,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;gCAC5C,KAAI,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gCACzC,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gCACvB,KAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;gCACjC,KAAI,CAAC,gBAAgB,EAAE,CAAC;gCACxB,KAAK,CAAC;4BACR,KAAK,QAAQ;gCACX,iBAAiB;gCACjB,KAAI,CAAC,aAAa,GAAG,CAAC,CAAC;gCACvB,KAAK,CAAC;4BACR;gCACE,KAAK,CAAC;wBACV,CAAC;oBACH,CAAC,EACD,aAAG,IAAM,CAAC,EACV;wBACE,SAAO,CAAC,WAAW,EAAE,CAAC;oBACxB,CAAC,CACF,CAAC;gBACN,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC;oBACxC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBACvB,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;gBACnC,CAAC;gBACD,KAAK,CAAC;YACR;gBACE,KAAK,CAAC;QACV,CAAC;IACH,CAAC;IACD,+BAAI,GAAJ;QACE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC;IAChD,CAAC;IAMD,gDAAqB,GAArB,UAAsB,OAAO;QAA7B,iBAkBC;QAjBC,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YAClD,IAAI,GAAG,0DAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACnE,IAAI,CAAC,CAAC;YACJ,IAAI,WAAW,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;YACnE,IAAI,GAAG,0DAAc,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACvE,CAAC;QACD,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC;QAC1C,IAAI,CAAC,MAAM,CAAC,aAAa,GAAG,EAAE,CAAC;QAC/B,EAAE,CAAC,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACtC,SAAS,CAAC,OAAO,CAAC,cAAI;gBACpB,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;oBACpD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACnE,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC;QACL,CAAC;IAEH,CAAC;IAj3CuC;QAAvC,+DAAS,CAAC,+GAA2B,CAAC;kCAA8B,+GAA2B;yEAAC;IAHtF,gBAAgB;QAL5B,+DAAS,CAAC;YACT,QAAQ,EAAE,aAAa;;;SAGxB,CAAC;yCA8FuB,uDAAW;YACd,oEAAgB;YACZ,kEAAc;YACxB,0DAAW;YACC,uEAAc;YAEvB,+DAAiB;YACR,+EAAc;YACrB,8DAAiB;YACnB,+DAAc;YACb,uDAAM;YACE,uEAAc;YACT,0FAAgB;YACjB,wFAAkB;OA1GrC,gBAAgB,CAq3C5B;IAAD,uBAAC;CAAA;AAr3C4B;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BY;AACc;AAC6B;AACM;AACR;AAClB;AAEhE,IAAM,MAAM,GAAW;IACrB,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,iGAAc,EAAE;IACvC;QACE,IAAI,EAAE,QAAQ;QACd,SAAS,EAAE,uGAAgB;QAC3B,aAAa,EAAE,CAAC,+FAAkB,CAAC;QACnC,OAAO,EAAE,EAAE,IAAI,EAAE,uDAAe,EAAE;QAClC,IAAI,EAAE,EAAE,IAAI,EAAE,gBAAgB,EAAE;KACjC;IACD;QACE,IAAI,EAAE,MAAM;QACZ,SAAS,EAAE,uGAAgB;QAC3B,aAAa,EAAE,CAAC,+FAAkB,CAAC;QACnC,OAAO,EAAE,EAAE,IAAI,EAAE,2DAAmB,EAAE;QACtC,IAAI,EAAE,EAAE,IAAI,EAAE,iBAAiB,EAAE;KAClC;IACD;QACE,IAAI,EAAE,YAAY;QAClB,SAAS,EAAE,uGAAgB;QAC3B,aAAa,EAAE,CAAC,+FAAkB,CAAC;QACnC,OAAO,EAAE,EAAE,IAAI,EAAE,2DAAmB,EAAE;QACtC,IAAI,EAAE,EAAE,IAAI,EAAE,iBAAiB,EAAE;KAClC;CACF,CAAC;AAMF;IAAA;IAAqC,CAAC;IAAzB,qBAAqB;QAJjC,8DAAQ,CAAC;YACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;SACxB,CAAC;OACW,qBAAqB,CAAI;IAAD,4BAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpCO;AACM;AACF;AACqB;AACE;AACM;AACmD;AAC9C;AACY;AAC7B;AACK;AACA;AACpB;AACgD;AACf;AAC3B;AACY;AACZ;AACS;AAC8C;AAC7D;AACyC;AACT;AAC8B;AACN;AAC3B;AACF;AA+C1E;IAAA;IAA8B,CAAC;IAAlB,cAAc;QA9C1B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,8EAAqB;gBACrB,2DAAY;gBACZ,4DAAgB;gBAChB,iFAAgB;gBAChB,mEAAe;gBACf,6DAAgB;gBAChB,8DAAe;gBACf,yDAAU;gBACV,mEAAmB;gBACnB,gEAAY;gBACZ,mEAAmB;gBACnB,6DAAgB;aACjB;YACD,YAAY,EAAE;gBACZ,gFAAc;gBACd,sFAAgB;gBAChB,4FAAiB;gBACjB,yIAA+B;gBAC/B,2FAAiB;gBACjB,uGAAqB;gBACrB,qGAAoB;gBACpB,0HAA2B;aAC5B;YACD,eAAe,EAAE;gBACf,4EAA6B;gBAC7B,oEAAqB;gBACrB,uEAAwB;gBACxB,yEAA0B;gBAC1B,yIAA+B;gBAC/B,qGAAoB;gBACpB,4FAAiB;gBACjB,qHAAuB;aACxB;YACD,SAAS,EAAE;gBACT,uDAAe;gBACf,2DAAmB;gBACnB,gGAAkB;gBAClB,+EAAc;gBACd,+DAAU;gBACV,0FAAgB;gBAChB,wFAAkB;aACnB;SACF,CAAC;OACW,cAAc,CAAI;IAAD,qBAAC;CAAA;AAAJ","file":"vouchers-vouchers-module.js","sourcesContent":["import { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nexport class MyBsModalService extends BsModalService {\r\n    \r\n}","import {Injectable} from '@angular/core';\r\nimport {CanDeactivate} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\n\r\nexport interface CanComponentDeactivate {\r\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VatDeactivateGuard implements CanDeactivate<CanComponentDeactivate> {\r\n\r\n  canDeactivate(component: CanComponentDeactivate) {\r\n    return component.canDeactivate && component.canDeactivate();\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"import-invoices\\\">\\r\\n  <form class=\\\"form-import-invoices\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">{{ _translate.MENU.import_license_from_excel}}</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalImportRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\" style=\\\"padding-bottom: 0px;\\\">\\r\\n      <div class=\\\"row inport-selector\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.MENU.voucher_form}}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [items]=\\\"templates\\\" displayExpr=\\\"name\\\" [(value)]=\\\"template_id\\\" valueExpr=\\\"value\\\"\\r\\n                  [disabled]=\\\"disabledInvoiceReleases\\\" (onValueChanged)=\\\"onInvoiceTemplate($event)\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">Mẫu thư XN</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [items]=\\\"templatesTXN\\\" displayExpr=\\\"name\\\" [(value)]=\\\"templatesTXN_id\\\" valueExpr=\\\"value\\\"\\r\\n                  [disabled]=\\\"disabledInvoiceReleases\\\" (onValueChanged)=\\\"onInvoiceTemplateTXN($event)\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- <div class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.invoice_form}}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box  displayExpr=\\\"name\\\"\\r\\n                               valueExpr=\\\"value\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div> -->\\r\\n            <!-- <div class=\\\"field field-first\\\" style=\\\"width: 27%;\\\">\\r\\n              <div class=\\\"label\\\" style=\\\"width: 135px;\\\">{{ _translate.CONTROLL.LABEL.export_form }}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [(value)]=\\\"htXuat\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\"\\r\\n                  [disabled]=\\\"!configs.system_parameter.allow_keep_invoice_number\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div> -->\\r\\n          </div>\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.file_name }}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-text-box [readOnly]=\\\"true\\\" style=\\\"width: 92.5%!important; border-style: solid!important;\\\"\\r\\n                  [value]=\\\"fileName\\\">\\r\\n                </dx-text-box>\\r\\n              </div>\\r\\n              <div class=\\\"btn-select-file\\\" style=\\\"margin-left: 30px;margin-top: 13px;\\\">\\r\\n                <a href=\\\"javascript:void(0)\\\" class=\\\"support-link\\\" (click)=\\\"napDuLieuTuBangKe()\\\">\\r\\n                  <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx, .xls\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\"\\r\\n                    (change)=\\\"onFileChanged($event)\\\" />\\r\\n                  <span>{{ _translate.CONTROLL.LABEL.select_file }}</span>\\r\\n                </a>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- <div class=\\\"col-md-5\\\">\\r\\n            <div class=\\\"select-file\\\">\\r\\n              <div class=\\\"field\\\" *ngIf=\\\"!isAllowEditInvoiceDate\\\">\\r\\n                <div class=\\\"label\\\" style=\\\"width: 135px;\\\">Ngày xuất hóa đơn</div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-date-box\\r\\n                    [(value)]=\\\"invoice_date\\\"\\r\\n                    displayFormat=\\\"dd/MM/yyyy\\\"\\r\\n                    dateSerializationFormat=\\\"yyyy-MM-dd\\\"\\r\\n                    >\\r\\n                  </dx-date-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div> -->\\r\\n      </div>\\r\\n      <div class=\\\"note-template-import\\\">\\r\\n        <p><span style=\\\"font-weight: 600; color: red; padding-right: 5px;\\\">{{ _translate.CONTROLL.LABEL.note1 }}</span>\\r\\n          {{ _translate.CONTROLL.LABEL.import_list_license_from_file_excel }}</p>\\r\\n        <p style=\\\"margin-left: 48px;\\\">{{ _translate.CONTROLL.LABEL.correct_format_download_template }} <a\\r\\n            href=\\\"javascript:void(0)\\\" style=\\\"font-weight: 600\\\" (click)=\\\"getFileTemp()\\\">{{\\r\\n            _translate.CONTROLL.LABEL.click_here }}</a></p>\\r\\n      </div>\\r\\n      <div class=\\\"read-file\\\">\\r\\n        <dx-button text=\\\"{{ _translate.CONTROLL.LABEL.read_file_excel }}\\\" type=\\\"default\\\" [disabled]=\\\"isDisReadFile\\\"\\r\\n          (click)=\\\"chonDocFile()\\\"></dx-button>\\r\\n      </div>\\r\\n      <!-- phần table hiển thị -->\\r\\n      <div class=\\\"row invoice-table\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <dx-data-grid id=\\\"gridImportInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n            [wordWrapEnabled]=\\\"true\\\" [columnAutoWidth]=\\\"false\\\" [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\"\\r\\n            [columnResizingMode]=\\\"true\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n            (onEditorPreparing)=\\\"onEditorPreparing($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\"\\r\\n            (onCellPrepared)=\\\"onCellPrepared($event)\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n            (onRowUpdated)=\\\"onRowUpdated($event)\\\" (onRowRemoving)=\\\"onRowRemoving($event)\\\"\\r\\n            (onKeyDown)=\\\"onGripKeyDown($event)\\\">\\r\\n            <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n            <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\" [allowDeleting]=\\\"true\\\" [useIcons]=\\\"true\\\">\\r\\n            </dxo-editing>\\r\\n            <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n            <dxo-column-fixing [enabled]=\\\"true\\\"></dxo-column-fixing>\\r\\n            <!-- ngày chứng từ -->\\r\\n            <dxi-column dataField=\\\"license_date\\\" [width]=\\\"130\\\" caption=\\\"{{infoColumn('license_date').column_name}}\\\"\\r\\n              alignment=\\\"left\\\" [fixed]=\\\"true\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\"\\r\\n              fixedPosition=\\\"left\\\" dataType=\\\"date\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Họ tên -->\\r\\n            <dxi-column dataField=\\\"taxpayers_name\\\" caption=\\\"{{infoColumn('taxpayers_name').column_name}}\\\" [width]=\\\"140\\\"\\r\\n              alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- mã số thuế -->\\r\\n            <dxi-column dataField=\\\"taxpayers_tax_code\\\" [width]=\\\"140\\\"\\r\\n              caption=\\\"{{infoColumn('taxpayers_tax_code').column_name}}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n              fixedPosition=\\\"left\\\"></dxi-column>\\r\\n            <!-- quốc tịch -->\\r\\n            <dxi-column dataField=\\\"nationality\\\" [width]=\\\"100\\\" caption=\\\"{{infoColumn('nationality').column_name}}\\\"\\r\\n              alignment=\\\"center\\\"></dxi-column>\\r\\n            <!-- cá nhân cư trú -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('resident_individual').is_visible\\\" dataField=\\\"resident_individual\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('resident_individual').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- địa chỉ  -->\\r\\n            <dxi-column dataField=\\\"taxpayers_address\\\" [width]=\\\"180\\\"\\r\\n              caption=\\\"{{infoColumn('taxpayers_address').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- số điện thoại -->\\r\\n            <dxi-column dataField=\\\"taxpayers_mobile\\\" [width]=\\\"120\\\"\\r\\n              caption=\\\"{{infoColumn('taxpayers_mobile').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- email -->\\r\\n            <dxi-column dataField=\\\"taxpayers_email\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('taxpayers_email').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"emailPattern\\\"\\r\\n                message=\\\"Email {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n            <!-- số CMND -->\\r\\n            <dxi-column dataField=\\\"id_card\\\" [width]=\\\"120\\\" caption=\\\"{{infoColumn('id_card').column_name}}\\\"\\r\\n              alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Nơi cấp -->\\r\\n            <dxi-column dataField=\\\"card_issuer_address\\\" [width]=\\\"200\\\"\\r\\n              caption=\\\"{{infoColumn('card_issuer_address').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- ngày cấp -->\\r\\n            <dxi-column dataField=\\\"card_issuer_date\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('card_issuer_date').column_name}}\\\" alignment=\\\"left\\\" format=\\\"dd/MM/yyyy\\\"\\r\\n              dateSerializationFormat=\\\"yyyy/MM/dd\\\" dataType=\\\"date\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Khoản thu nhập -->\\r\\n            <dxi-column dataField=\\\"income\\\" [width]=\\\"200\\\" caption=\\\"{{infoColumn('income').column_name}}\\\"\\r\\n              alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <!-- Khoản đóng bảo hiểm bắt buộc -->\\r\\n            <dxi-column dataField=\\\"compulsory_insurance_payment\\\" [width]=\\\"100\\\"\\r\\n              *ngIf=\\\"inforFields('tien-dong-bao-hiem-nnt')\\\"\\r\\n              caption=\\\"{{infoColumn('compulsory_insurance_payment').column_name}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tháng trả thu nhập -->\\r\\n            <dxi-column dataField=\\\"month_pay_income\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('month_pay_income').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Năm trả thu nhập -->\\r\\n            <dxi-column dataField=\\\"year_pay_income\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('year_pay_income').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tổng thu nhập thuế phải khấu trừ -->\\r\\n            <dxi-column dataField=\\\"total_taxable_income_deducted\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" *ngIf=\\\"inforFields('tien-chiu-thue-nnt')\\\"\\r\\n              caption=\\\"{{infoColumn('total_taxable_income_deducted').column_name}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tổng thu nhập tính thuế -->\\r\\n            <dxi-column dataField=\\\"total_taxable_income\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('total_taxable_income').column_name}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              *ngIf=\\\"inforFields('tien-tinh-thue-nnt')\\\" [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số thuế thu nhập cá nhân đã khấu trừ -->\\r\\n            <dxi-column dataField=\\\"amount_personal_income_tax_withheld\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" *ngIf=\\\"inforFields('tien-thue-da-khau-tru-nnt')\\\"\\r\\n              caption=\\\"{{infoColumn('amount_personal_income_tax_withheld').column_name}}\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n              alignment=\\\"left\\\" dataType=\\\"number\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tổng thu nhập chịu thuế phải trả -->\\r\\n            <dxi-column dataField=\\\"total_taxable_income_paid\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('total_taxable_income_paid').column_name}}\\\" alignment=\\\"left\\\"\\r\\n              dataType=\\\"number\\\" [format]=\\\"formatter.tong_tien\\\" *ngIf=\\\"inforFields('tien-thue-da-tra-nnt')\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số thu nhập cá nhân còn được nhận -->\\r\\n            <dxi-column dataField=\\\"amount_personal_income_still_received\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" *ngIf=\\\"inforFields('tien-duoc-nhan-nnt')\\\"\\r\\n              caption=\\\"{{infoColumn('amount_personal_income_still_received').column_name}}\\\" alignment=\\\"left\\\"\\r\\n              dataType=\\\"number\\\" [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Thư xác nhận -->\\r\\n            <!-- Chức vụ -->\\r\\n            <dxi-column dataField=\\\"position\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.GRID.USER.position}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Ngày đến việt nam -->\\r\\n            <dxi-column dataField=\\\"date_to_vietnam\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.day_came_to_Viet_Nam}}\\\" alignment=\\\"left\\\" dataType=\\\"date\\\"\\r\\n              format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\">\\r\\n            </dxi-column>\\r\\n            <!-- THu nhập từ -->\\r\\n            <dxi-column dataField=\\\"income_from_date\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.income_in_the_period_from}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- THu nhập đến -->\\r\\n            <dxi-column dataField=\\\"income_to_date\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"Thu nhập trong giai đoạn đến\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Thu nhập chịu thuế -->\\r\\n            <dxi-column dataField=\\\"income_taxes\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.income_taxes}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số tiền chịu thuế tại việt nam -->\\r\\n            <dxi-column dataField=\\\"income_taxes_in_vietnam\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.taxable_amount_in_Vietnam}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số tiền chịu thuế tại nước ngoài -->\\r\\n            <dxi-column dataField=\\\"income_taxable_abroad\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.in_a_foreign_country}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Các khoản bị khấu trừ ngài việt nam  -->\\r\\n            <dxi-column dataField=\\\"deductions_outside_vietnam\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.deductions_outside_Vietnam}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- thuế thu nhập cá nhân -->\\r\\n            <dxi-column dataField=\\\"personal_income_tax\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.personal_income_tax}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- các khoản đóng bảo hiểm -->\\r\\n            <dxi-column dataField=\\\"insurance_payments\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.insurance_contributions}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- các khoản bị khấu trừ khác -->\\r\\n            <dxi-column dataField=\\\"deductions\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.other_deductions}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tiền thuê nhà -->\\r\\n            <dxi-column dataField=\\\"rent_money\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.house_rent}}\\\" alignment=\\\"left\\\" dataType=\\\"number\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số hợp đồng  -->\\r\\n            <dxi-column dataField=\\\"contract_number\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.vehicle_contract_number}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Ngày hợp đồng  -->\\r\\n            <dxi-column dataField=\\\"contract_date\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n              caption=\\\"{{_translate.CONTROLL.LABEL.day_contract}}\\\" alignment=\\\"center\\\" dataType=\\\"date\\\"\\r\\n              dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\">\\r\\n            </dxi-column>\\r\\n            <!-- <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n              <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n            </div> -->\\r\\n\\r\\n            <div *dxTemplate=\\\"let data of 'DinhKemFile'\\\">\\r\\n              <a href=\\\"javascript:void(0)\\\" *ngIf=\\\"data.data.number_of_vouchers != ''\\\">\\r\\n                <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"data.rowIndex\\\"\\r\\n                  accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\" />\\r\\n                <!-- <span><i class=\\\"fa fa-file\\\"></i></span> -->\\r\\n                {{ _translate.CONTROLL.LABEL.select_file }}\\r\\n                <p>{{data.data.file_attach_name}}</p>\\r\\n              </a>\\r\\n            </div>\\r\\n            <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n            <dxo-paging [enabled]=\\\"true\\\"></dxo-paging>\\r\\n          </dx-data-grid>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-md-7\\\">\\r\\n          <div class=\\\"note-footer\\\">\\r\\n            <p style=\\\"margin-left: 0;\\\"><span style=\\\"font-weight: 500; color: red;\\\">{{ _translate.GRID.GENERAL.note\\r\\n                }}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.can_edit_delete_on_grid }}</p>\\r\\n            <!-- <p><span class=\\\"mau-vang\\\"> </span>{{ _translate.CONTROLL.LABEL.yellow_number_of_voucher }}</p> -->\\r\\n            <p><span class=\\\"mau-do\\\"> </span>{{ _translate.CONTROLL.LABEL.red_incorrect_format }}</p>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"col-md-5\\\">\\r\\n          <div class=\\\"note-footer\\\" style=\\\"text-align: right; margin-right: 50px;\\\">\\r\\n            <p style=\\\"padding: 8px;\\\"></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_valid_documents }} <span\\r\\n                style=\\\"color: seagreen; font-weight: 600\\\">{{totalInvoiceInvalid}}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_voucher_wrong_format }} <span\\r\\n                style=\\\"color: red; font-weight: 600\\\">{{totalErrorInvoice}}</span></p>\\r\\n            <!-- <p>{{ _translate.CONTROLL.LABEL.number_of_voucher_duplicate }} <span\\r\\n                style=\\\"color: yellow; font-weight: 600\\\">{{totalDuplicateInvoice}}</span></p> -->\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.preview_voucher }}\\\"\\r\\n          type=\\\"default\\\" (click)=\\\"preview()\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.view_voucher }}\\\" (click)=\\\"xemChungTu()\\\"\\r\\n          type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-8 btn-right\\\">\\r\\n        <dx-button disableDoubleClick text=\\\"{{ _translate.CONTROLL.BUTTON.come_back}}\\\" type=\\\"default\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\"\\r\\n          (click)=\\\"dong()\\\">\\r\\n        </dx-button>\\r\\n        <!-- <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"Xuất dữ liệu trên lưới ra Excel\\\"\\r\\n          icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"xuatFile()\\\" type=\\\"default\\\"></dx-button> -->\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"Ghi tạm\\\" icon=\\\"assets\\\\img\\\\icons\\\\GhiTam.png\\\" type=\\\"default\\\" (click)=\\\"submit('LUU')\\\"></dx-button>\\r\\n        <!-- <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\"  text=\\\"Xuất chờ ký\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"submit('CHO_KY')\\\" type=\\\"default\\\" ></dx-button> -->\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.export_vouchers}}\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\"\\r\\n          type=\\\"default\\\" (click)=\\\"submit('XUAT')\\\"></dx-button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.processing }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopupImport\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"500\\\" [height]=\\\"160\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"popupCachNapDuLieu\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p>{{ _translate.CONTROLL.LABEL.please_choose_load_data }} </p>\\r\\n    <div class=\\\"text-center\\\" style=\\\"margin-top: 25px\\\">\\r\\n      <dx-button text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all}}\\\" type=\\\"default\\\" (click)=\\\"thayThe($event)\\\">\\r\\n      </dx-button>\\r\\n      <dx-button text=\\\"{{ _translate.CONTROLL.BUTTON.add_more}}\\\" type=\\\"default\\\" (click)=\\\"themTiep($event)\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</dx-popup>\"","module.exports = \".import-invoices .dx-texteditor{border-radius:0;display:inline-block;margin-right:8px;height:28px;max-height:32px}.import-invoices .select-file .field>div{display:inline-block;vertical-align:middle}.import-invoices .select-file{width:100%;display:inline-block;margin:0}.import-invoices .select-file .field .label{width:90px;margin-right:10px;text-align:right;margin-top:7px}.import-invoices .select-file .field .value{width:35% !important;margin-top:10px}.import-invoices .select-file .field.field-first{display:inline-block}.import-invoices .select-file .field.field-first .value{width:calc(100% - 150px) !important}::ng-deep .import-invoices .select-file .field .dx-texteditor{width:100% !important}.support-link{top:-2px;position:relative;padding:5px 25px 7px 25px;background-color:#337ab7;border-color:#2d6da3;color:#fff;text-decoration:none}.support-link.mgr-15{margin-right:15px}.support-link img{margin-right:10px;margin-top:-2px}#auto-input{margin-right:75px}.note-template-import{margin-top:10px;margin-left:52px;display:inline-block;width:39%}.read-file{display:inline-block;margin-left:6px;position:relative;top:-10px}.note-footer{margin-top:10px}.note-footer p{margin-left:20px;margin-bottom:5px}.mau-vang{padding-right:15px;margin-right:10px;background-color:yellow}.mau-do{padding-right:15px;margin-right:10px;background-color:red}::ng-deep #gridImportInvoice{height:400px}::ng-deep .btn-right{padding-right:0}::ng-deep .btn-right .dx-button{float:right}::ng-deep .btn-right .dx-button:last-child{margin-right:8px !important}::ng-deep #gridImportInvoice .dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit{width:40px;min-width:20px !important}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-validator.dx-datagrid-invalid .dx-highlight-outline::after{border:2px solid #d9534f}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-cell-modified .dx-highlight-outline::after{border-color:#fff}::ng-deep .form-import-invoices .inport-selector .dx-texteditor-input{padding-bottom:15px}::ng-deep .notify-modal{max-width:22%}::ng-deep .view-invoice{max-width:100%;margin:0px;min-height:100%}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Helper, Library, sEnum, VChanggeMoneyService, VPreviewInvService, VSelectBoxService, VStringService } from '@core/index';\r\nimport { AuthService, SocketService, } from '@core/services';\r\nimport { BsModalRef, BsModalService, } from 'ngx-bootstrap';\r\nimport { Location } from '@angular/common';\r\nimport * as XLSX from 'xlsx';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport * as moment from 'moment';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { ConfigColumnImportExcelComponent, NotifySuccessComponent, SignatureOffComponent } from '@shared/index';\r\nimport { ConfirmLettersModel, VoucherModel, VoucherResolver, VoucherService } from '@modules/vouchers/shared';\r\nimport { pattern } from '@config/pattern';\r\nimport { Subscription } from 'rxjs';\r\nimport { ViewVoucherComponent } from '../view-invoice/view-invoice.component';\r\nimport { async } from 'rxjs/internal/scheduler/async';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport * as _ from 'lodash';\r\n@Component({\r\n  selector: 'app-import-voucher-from-excel',\r\n  templateUrl: './import-voucher-from-excel.component.html',\r\n  styleUrls: ['./import-voucher-from-excel.component.scss']\r\n})\r\nexport class ImportVoucherFromExcelComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  _language: string;\r\n  _translate: any;\r\n  dataExcelFile: any;\r\n  invoice_releases: any;\r\n  dataSource: DataSource;\r\n  taxCodePattern: any;\r\n  phonePattern: any;\r\n  template_code: any;\r\n  license_series: any;\r\n  licenseOptions: any = [];\r\n  licenses: ArrayStore;\r\n  license: any;\r\n  fieldDisable = [];\r\n  select: any = {};\r\n  lookupColumnOptions: any;\r\n  licensesArr: any = [];\r\n  emailPattern = pattern.email;\r\n  totalErrorInvoice: any;\r\n  totalDuplicateInvoice: any;\r\n  windowPreviewBeforeSubmit: any;\r\n  totalInvoiceInvalid: any;\r\n  columns: any = [];\r\n  errorImport = false;\r\n  countInvoice = 1;\r\n  listColumn: any = [];\r\n  formatter: any = {};\r\n  configs: any;\r\n  fields: any = []\r\n  subXuatHoaDon: any;\r\n  frmData = new VoucherModel(1);\r\n  subLuuChoXuat: any;\r\n  totalInvoice = 0;\r\n  totalLetter = 0;\r\n  template_id: any;\r\n  isDisReadFile = true;\r\n  target: DataTransfer;\r\n  province_name: any;\r\n  confirmCheckPreview = false;\r\n  currentUser: any;\r\n  valueChange: string;\r\n  popupCachNapDuLieu = false;\r\n  showPopupImport = false;\r\n  bsModalSignRef: BsModalRef;\r\n  license_date: any;\r\n  ioSignature: Subscription;\r\n  fileData: Array<any> = [];\r\n  fileName = \"\";\r\n  htXuat = \"XuatVaKy\";\r\n  templates = [];\r\n  isThemTiep = true;\r\n  nodeSign: any;\r\n  private isExportInvoice: boolean;\r\n  valueProgress: number = 0;\r\n  licensesImport: any;\r\n  licenseHaveTaxpayerName = [];\r\n  disabledInvoiceReleases: boolean = false;\r\n  dataFormGird = [];\r\n  tempKiFile = 0;\r\n  taxCode: any;\r\n  DaXuat: boolean = false;\r\n  ttDaXuatHoaDon: boolean = false;\r\n  isVisibleBtnSubmit = true;\r\n  htXuatOptions = [];\r\n  licensesId = [];\r\n  tempFile: any;\r\n  lettersArray: any = [];\r\n  isHdGTGT = true;\r\n  letterId: any;\r\n  letter: any;\r\n  templatesTXN = [];\r\n  isGhiTamTXN = false;\r\n  templatesTXN_id: any;\r\n  dsThuXacNhan = [];\r\n  idDaXuatArray = [];\r\n  listpermissions: any = [];\r\n  checkSubmit: any;\r\n  templatesTXNOptions = []; //trường mở rộng của mẫu chứng từ\r\n  templatesOptions = []; // trường mở rộng của mẫu thư xn\r\n  fieldsKTTTXN = ['template_id', 'name', 'license_id', 'id_txn']; //Các fields trong model nhưng ko tồn tại trong TXN\r\n  dataSourceTNCN = [\r\n    {\r\n      code: \"tien-dong-bao-hiem-nnt\",\r\n      is_show: true,\r\n      name: 'Khoản đóng bảo hiểm bắt buộc',\r\n      type: '5'\r\n    },\r\n    {\r\n      code: \"tien-chiu-thue-nnt\",\r\n      is_show: true,\r\n      name: 'Thu nhập chịu thuế phải khấu trừ',\r\n      type: '5'\r\n    },\r\n    {\r\n      code: \"tien-tinh-thue-nnt\",\r\n      is_show: true,\r\n      name: 'Tổng thu nhập tính thuế',\r\n      type: '5'\r\n    },\r\n    {\r\n      code: \"tien-thue-da-khau-tru-nnt\",\r\n      is_show: true,\r\n      name: 'Số thuế thu nhập cá nhân đã khấu trừ',\r\n      type: '5'\r\n    },\r\n    {\r\n      code: \"tien-thue-da-tra-nnt\",\r\n      is_show: true,\r\n      name: 'Tổng thu nhập chịu thuế đã trả',\r\n      type: '5'\r\n    },\r\n    {\r\n      code: \"tien-duoc-nhan-nnt\",\r\n      is_show: true,\r\n      name: 'Số thuế thu nhập cá nhân còn được nhận',\r\n      type: '5'\r\n    },\r\n  ];\r\n  constructor(\r\n    private authService: AuthService,\r\n    private socketService: SocketService,\r\n    private modalImportService: BsModalService,\r\n    public bsModalViewModel: BsModalRef,\r\n    public bsModalImportRef: BsModalRef,\r\n    private _location: Location,\r\n    public bsModalRef: BsModalRef,\r\n    private modalService: BsModalService,\r\n    private voucherService: VoucherService,\r\n    private spinner: NgxSpinnerService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    this.configs = this.authService.getConfigs();\r\n    this.listColumn = Helper.listColumnImportExcelVoucher(this._translate);\r\n    this.currentUser = this.authService.getCurrentUser();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.connectWebsocket();\r\n    this.licenses = new ArrayStore({\r\n      key: 'keyData',\r\n      data: []\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.licenses\r\n    });\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    this.listpermissions = this.currentUser.user.permissions.split(',');\r\n    this.taxCode = this.currentUser.account.tax_code;\r\n    if (this.currentUser.account.van_account_info) {\r\n      this.province_name = this.currentUser.account.van_account_info.city_name;\r\n    }\r\n\r\n    if (this.licensesImport && this.licensesImport.length > 0) {\r\n      this.select.templateTXN = this.templatesTXN.find((template) => template.value == this.templatesTXN_id);\r\n      this.select.template = this.templates.find((template) => template.value == this.template_id);\r\n\r\n      let isOldTemp = [];\r\n      try {\r\n        isOldTemp = this.select.template.fields.filter(p => p.code == \"tien-dong-bao-hiem-nnt\")\r\n      } catch (err) { }\r\n\r\n      if (isOldTemp.length > 0) {\r\n        this.fields = this.select.template.fields;\r\n      } else {\r\n        this.fields = this.dataSourceTNCN;\r\n      }\r\n\r\n      this.template_code = this.select.template.template_code;\r\n      this.license_series = this.select.template.invoice_series;\r\n      for (let index = 0; index < this.licensesImport.length; index++) {\r\n        let license_options = this.licensesImport[index].license_options;\r\n        license_options = this.converArrayToObject(license_options, \"code\", \"value\");\r\n        this.licensesImport[index] = _.merge(this.licensesImport[index], license_options);\r\n        this.licensesImport[index].TXN = {};\r\n        if (this.licensesImport[index].license_confirm_letters.length > 0) {\r\n          let license_letters = this.licensesImport[index].license_confirm_letters;\r\n          license_letters = license_letters.sort(function (a, b) {\r\n            var dateA: any = new Date(a.updated_at);\r\n            var dateB: any = new Date(b.updated_at);\r\n            return dateB - dateA;\r\n          });\r\n\r\n          let license_confirm_letters = license_letters[0];\r\n          this.licensesImport[index].TXN = license_confirm_letters;\r\n          if (license_confirm_letters.license_confirm_letter_options &&\r\n            license_confirm_letters.license_confirm_letter_options.length > 0\r\n          ) {\r\n            let letter_options = this.converArrayToObject(license_confirm_letters.license_confirm_letter_options, \"code\", \"value\");\r\n            this.licensesImport[index] = _.merge(this.licensesImport[index], letter_options);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      if (this.templatesTXN[0]) {\r\n        this.select.templateTXN = this.templatesTXN[0];\r\n        this.templatesTXN_id = this.templatesTXN[0].value\r\n      }\r\n      if (this.templates[0]) {\r\n        this.select.template = this.templates[0];\r\n        this.template_id = this.templates[0].value;\r\n        let isOldTemp = this.templates[0].fields.filter(p => p.code == \"tien-dong-bao-hiem-nnt\")\r\n        if (isOldTemp.length > 0) {\r\n          this.fields = this.templates[0].fields;\r\n        } else {\r\n          this.fields = this.dataSourceTNCN;\r\n        }\r\n        this.template_code = this.templates[0].template_code;\r\n        this.license_series = this.templates[0].invoice_series;\r\n      }\r\n    }\r\n    this.layTruongMoRong();\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate);\r\n    if (this.licensesImport) {\r\n      this.layDuLieuTuHoaDonChoXuat();\r\n    } else {\r\n      this.loadRow(10);\r\n    }\r\n  }\r\n\r\n\r\n  // Lấy trường mở rộng\r\n  layTruongMoRong() {\r\n    let templateCurren: any = {};\r\n    let templateTXNCurrent: any = {};\r\n    if (this.template_id) {\r\n      templateCurren = this.templates.find((t) => t.value == this.template_id);\r\n      this.templatesOptions = templateCurren.fields.filter(field => field.type == \"4\")\r\n        .map((item) => {\r\n          return {\r\n            code: item.code,\r\n            name: item.name,\r\n            value: item.value,\r\n            is_show: item.is_show,\r\n            data_type: item.data_type\r\n          }\r\n        })\r\n    }\r\n    if (this.templatesTXN_id) {\r\n      templateTXNCurrent = this.templatesTXN.find((t) => t.value == this.templatesTXN_id);\r\n      this.templatesTXNOptions = templateTXNCurrent.fields.filter(field => field.type == \"4\")\r\n        .map((item) => {\r\n          return {\r\n            code: item.code,\r\n            name: item.name,\r\n            value: item.value,\r\n            is_show: item.is_show,\r\n            data_type: item.data_type\r\n          }\r\n        })\r\n    }\r\n  }\r\n\r\n\r\n  //set lại các cột trong gird\r\n  setFormGird() {\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.forEach((column, index) => {\r\n          if (column[\"dataField\"] == item.dataField)\r\n            this.dataGrid.columns.splice(index, 1);\r\n        });\r\n      });\r\n    }\r\n    this.columns = [];\r\n    let arrColumns = this.templatesOptions.concat(this.templatesTXNOptions);\r\n    arrColumns.forEach(item => {\r\n      if (item.is_show) {\r\n        let oField = {\r\n          column_code: item.code,\r\n          column_name: item.name,\r\n          is_visible: true\r\n        }\r\n        this.listColumn.push(oField);\r\n        if (item.data_type === 'chu') {\r\n          let column =\r\n          {\r\n            caption: item.name,\r\n            dataField: item.code,\r\n            width: 150,\r\n          };\r\n          this.columns.push(column);\r\n        }\r\n        if (item.data_type === 'soluong') {\r\n          let column =\r\n          {\r\n            caption: item.name,\r\n            dataField: item.code,\r\n            width: 150,\r\n            dataType: \"number\",\r\n            editorOptions: {\r\n              format: '#,###'\r\n            },\r\n            format: '#,###'\r\n          };\r\n          this.columns.push(column);\r\n        }\r\n        if (item.data_type === 'ngay') {\r\n          let column =\r\n          {\r\n            caption: item.name,\r\n            dataField: item.code,\r\n            width: 150,\r\n            dataType: 'date',\r\n            format: \"dd/MM/yyyy\",\r\n            dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'\r\n          };\r\n          this.columns.push(column);\r\n        }\r\n      }\r\n    })\r\n\r\n    if (this.columns.length > 0) {\r\n      const codeTemplate = _.map(this.templatesOptions, 'code');\r\n      var index = this.dataGrid.columns.findIndex(function (obj: any) {\r\n        return obj.dataField === 'position';\r\n      });\r\n\r\n      this.columns.forEach(item => {\r\n        if (index != -1 && codeTemplate.includes(item.dataField)) {\r\n          this.dataGrid.columns.splice(index++, 0, item);\r\n        } else {\r\n          this.dataGrid.columns.push(item);\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n\r\n  ngAfterViewInit() {\r\n    this.setFormGird();\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.license.issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat();\r\n          } else if (data.Data.Name === 'thu_xac_nhan.pdf') {\r\n            this.goiApiXuatHoaDonThu(data.Data.Content);\r\n          } else {\r\n            this.license.license_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.license.license_files.length) {\r\n              this.xuLiApiKhiXuat();\r\n            }\r\n          }\r\n        }\r\n        else if (data.SvcName === 'efy_viewInvoice') {\r\n          if (data.Status == \"success\")\r\n            this.viewInvoice(data.Data.Content, data.Data.typeView, data.Data.hinhthucxuat, data.Data.invoice_date);\r\n          else if (data.Status == \"error\") {\r\n            const popUp = window.open('about:blank', 'name', 'width=200, height=100');\r\n            if (popUp == null || typeof (popUp) == 'undefined') {\r\n            }\r\n            else\r\n              popUp.close();\r\n            Library.notify(data.Description, 'error');\r\n            this.spinner.hide();\r\n          }\r\n        }\r\n      } else {\r\n        this.errorImport = true;\r\n        this.showPopupImport = false;\r\n        this.isVisibleBtnSubmit = false;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n  goiApiXuatHoaDon(xml_string) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.subXuatHoaDon = this.voucherService.xuatChungTu({\r\n      id: this.license.id,\r\n      xml_string: xml_string,\r\n      license_files: this.license.license_files\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.ttDaXuatHoaDon = true;\r\n        this.valueProgress += percentComplete;\r\n        if (this.letter != null)\r\n          this.kyThuXacNhan();\r\n        else\r\n          this.xuatTiepChungTu();\r\n      } else {\r\n        this.showPopupImport = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n      this.showPopupImport = false;\r\n      this.isVisibleBtnSubmit = false;\r\n    }, () => {\r\n      Library.hideloading();\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n  disablleScreen() {\r\n    this.DaXuat = true;\r\n  }\r\n  async taoThuXacNhan() {\r\n    delete this.letter.file_content;\r\n    delete this.letter.id;\r\n    return await this.voucherService.ghiTamThuXacNhan(this.letter).toPromise().then(rs => {\r\n      if (rs.status === 'success') {\r\n        this.letter.id = rs.data.id;\r\n        this.letter['file_content'] = rs.data.pdf_file.file_content;\r\n        return true;\r\n      } else {\r\n        Library.notify(rs.message, 'error', 5000);\r\n        return false;\r\n      }\r\n    }).catch((error) => {\r\n      this.showPopupImport = false;\r\n      this.isVisibleBtnSubmit = false;\r\n      return false;\r\n    });\r\n  }\r\n  async updateGhiTamThuXacNhan(id) {\r\n    delete this.letter.id_txn;\r\n    return await this.voucherService.updateGhiTamThuXacNhan(this.letter, id).toPromise().then(rs => {\r\n      if (rs.status === 'success') {\r\n        this.letter['file_content'] = rs.data.pdf_file.file_content;\r\n        return true;\r\n      } else {\r\n        Library.notify(rs.message, 'error', 5000);\r\n        return false;\r\n      }\r\n    }).catch((error) => {\r\n      this.showPopupImport = false;\r\n      this.isVisibleBtnSubmit = false;\r\n      return false;\r\n    });\r\n  }\r\n  kyThuXacNhan() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.goiApiXuatHoaDonThu(this.letter['file_content']);\r\n    } else {\r\n      this.xuLyKiFileThu(this.letter['file_content']);\r\n    }\r\n  }\r\n  xuatTiepChungTu() {\r\n    if (this.countInvoice < this.totalInvoice) {\r\n      this.countInvoice++;\r\n      this.xuatHoaDon();\r\n    }\r\n    else if (this.countInvoice == this.totalInvoice) {\r\n      this.valueProgress = 100;\r\n      Library.notify(\"Xuất chứng từ thành công\", 'success');\r\n      this.isVisibleBtnSubmit = false;\r\n      this.showPopupImport = false;\r\n      this.bsModalImportRef.hide();\r\n      this._location.back();\r\n    }\r\n  }\r\n  goiApiXuatHoaDonThu(data) {\r\n    const license_confirm_letter = {\r\n      id: this.letter.id,\r\n      pdf_file: {\r\n        file_name: \"thu_xac_nhan.pdf\",\r\n        file_content: data\r\n      }\r\n    }\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    const sub = this.voucherService.xuatTXN(license_confirm_letter).subscribe(rs => {\r\n      this.xuatTiepChungTu();\r\n    }, err => {\r\n      this.xuatTiepChungTu();\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xuLyKiFileThu(xmlInvoice, signDate?) {\r\n    // this.connectWebsocketThu();\r\n    let nodeSign = '//CTu/DSCKS/TCTTNhap';\r\n    this.connectWebsocket();\r\n    if (this.socketService.checkNull()) {\r\n      this.socketService.connect();\r\n    }\r\n    this.socketService.kiFile(() => this.connectWebsocket(), xmlInvoice, 'thu_xac_nhan.pdf', 'pdf', nodeSign, signDate, 'ALIGN_LEFT', 'PAGE_LAST', null, this.taxCode);\r\n  }\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let status;\r\n    if (!this.license.id && !this.license.license_number) {\r\n      status = sEnum.processInv.ThemMoi;\r\n    }\r\n    if (this.license.id && !this.license.license_number) {\r\n      status = sEnum.statusInv.GhiTam;\r\n    }\r\n    if (this.license.id && this.license.license_number) {\r\n      status = sEnum.statusInv.ChoKy;\r\n    }\r\n    let xmlInvoice = \"\";\r\n    let license = Object.assign({}, this.license);\r\n    delete license.id_ct;\r\n    this.letter = null;\r\n    if (status === sEnum.processInv.ThemMoi) {\r\n      const sub = this.voucherService.ghiTam(license, true).subscribe(async (rs) => {\r\n        if (rs.status === 'success') {\r\n          this.license.license_number = rs.data.license_number;\r\n          this.idDaXuatArray.push(rs.data.id);\r\n          this.license.license_date = moment(rs.data.license_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let license_sign_date = moment(rs.data.license_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.license.id = rs.data.id;\r\n          let oThuXacNhan = this.lettersArray.filter(p => p.id_txn == this.license.id_ct)[0];\r\n          let isXuatChungTu = false;\r\n          if (oThuXacNhan) {\r\n            delete oThuXacNhan.id_txn;\r\n            this.letter = oThuXacNhan;\r\n            this.letter.license_id = rs.data.id;\r\n            isXuatChungTu = await this.taoThuXacNhan();\r\n          }\r\n          else {\r\n            isXuatChungTu = true;\r\n          }\r\n          if (isXuatChungTu) {\r\n            this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, license_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            this.isVisibleBtnSubmit = false;\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          this.isVisibleBtnSubmit = false;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n        this.showPopupImport = false;\r\n        this.isVisibleBtnSubmit = false;\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status === sEnum.statusInv.GhiTam) {\r\n      const sub = this.voucherService.edit(license.id, license, true).subscribe(async rs => {\r\n        if (rs.status === 'success') {\r\n          this.license.license_number = rs.data.license_number;\r\n          this.idDaXuatArray.push(rs.data.id);\r\n          this.license.license_date = moment(rs.data.license_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let license_sign_date = moment(rs.data.license_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          let oThuXacNhan = this.lettersArray.filter(p => p.id_txn == this.license.id)[0];\r\n          let isXuatChungTu = false;\r\n          // Chứng từ chưa có thư xác nhận\r\n          if (oThuXacNhan) {\r\n            delete oThuXacNhan.id_txn;\r\n            this.letter = oThuXacNhan;\r\n            this.letter.license_id = rs.data.id;\r\n            isXuatChungTu = await this.taoThuXacNhan();\r\n          }\r\n          else {\r\n            oThuXacNhan = this.lettersArray.filter(p => p.license_id == this.license.id)[0];\r\n            if (oThuXacNhan) {\r\n              this.letter = oThuXacNhan;\r\n              this.letter.license_id = rs.data.id;\r\n              this.letter.id = this.letter.id_txn;\r\n              isXuatChungTu = await this.updateGhiTamThuXacNhan(this.letter.id_txn);\r\n            } else {\r\n              isXuatChungTu = true;\r\n            }\r\n          }\r\n          if (isXuatChungTu) {\r\n            this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, license_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            // this.errorImport = true;\r\n            this.isVisibleBtnSubmit = false;\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          // this.errorImport = true;\r\n          this.isVisibleBtnSubmit = false;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status === sEnum.statusInv.ChoKy) {\r\n      const sub = this.voucherService.edit(license.id, license, true).subscribe(async rs => {\r\n        if (rs.status === 'success') {\r\n          this.license.license_date = moment(rs.data.license_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let license_sign_date = moment(rs.data.license_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n          let oThuXacNhan = this.lettersArray.filter(p => p.id_txn == this.license.id_ct)[0];\r\n          let isXuatChungTu = false;\r\n          this.idDaXuatArray.push(rs.data.id);\r\n          if (oThuXacNhan) {\r\n            delete oThuXacNhan.id_txn;\r\n            this.letter = oThuXacNhan;\r\n            this.letter.license_id = rs.data.id;\r\n            isXuatChungTu = await this.taoThuXacNhan();\r\n          }\r\n          else {\r\n            isXuatChungTu = true;\r\n          }\r\n          if (isXuatChungTu) {\r\n            this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, license_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            // this.errorImport = true;\r\n            this.isVisibleBtnSubmit = false;\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          // this.errorImport = true;\r\n          this.isVisibleBtnSubmit = false;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  infoColumn(columnName) {\r\n    if (this.listColumn && this.listColumn.length > 0) {\r\n      let _obj = this.listColumn.filter(p => p.column_code == columnName)[0];\r\n      if (_obj) {\r\n        if ((_obj.column_code == \"vat\" || _obj.column_code == \"amount_vat\") && !this.isHdGTGT) {\r\n          _obj.is_visible = false;\r\n        }\r\n        return _obj;\r\n      } else return { column_code: \"\", column_name: \"\", is_visible: false };\r\n    }\r\n  }\r\n  inforFields(field_name) {\r\n    let ojb = this.fields.filter(p => p.code == field_name);\r\n    if (ojb.length > 0) {\r\n      if (ojb[0].is_show) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  setDataSessionStorage1(data) {\r\n    this.valueChange = JSON.stringify(data);\r\n  }\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'LicenseData', '', true, this.taxCode, true);\r\n  }\r\n  preview() {\r\n    let convert = this.convertGirdToInvoices(\"preview\");\r\n    if (convert) {\r\n      if (this.configs.system_parameter.display_template_from_server) {\r\n        const initialState = {\r\n          items: this.licensesArr,\r\n          isXuatHD: false,\r\n          typeAction: 'NAP_EXCEL'\r\n        };\r\n        this.bsModalViewModel = this.modalImportService.show\r\n          (\r\n            ViewVoucherComponent,\r\n            {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-xl view-invoice',\r\n              initialState\r\n            }\r\n          );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          subModal.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        this.checkCKS(\"XEM_TRUOC\");\r\n      }\r\n    }\r\n  }\r\n  checkCKS(typeView) {\r\n    this.connectWebsocket();\r\n    if (this.socketService.checkNull()) {\r\n      this.socketService.connect();\r\n    }\r\n    setTimeout(() => {\r\n      const res = this.socketService.getStatusCertificate();\r\n      if (res && res.status === 'error' && res.code == 10) {\r\n        const initialState = {\r\n          typeNotify: \"XEM_MAU\",\r\n        };\r\n        this.bsModalRef = this.modalService.show(SignatureOffComponent, {\r\n          class: 'modal-lg', backdrop: 'static',\r\n          keyboard: false,\r\n          initialState\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n\r\n        });\r\n      }\r\n      else {\r\n        if (typeView == \"XEM_TRUOC\") {\r\n          const initialState = {\r\n            items: this.licensesArr,\r\n            isXuatHD: false,\r\n            typeAction: 'NAP_EXCEL'\r\n          };\r\n          this.bsModalViewModel = this.modalImportService.show\r\n            (\r\n              ViewVoucherComponent,\r\n              {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'modal-xl view-invoice',\r\n                initialState\r\n              }\r\n            );\r\n          const subModal = this.modalImportService.onHide.subscribe(() => {\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n        else if (typeView == \"XUAT_HOA_DON\") {\r\n          let hinhthucxuat = \"\";\r\n          if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n            hinhthucxuat = \"và ký\";\r\n          } else {\r\n            hinhthucxuat = \"chờ ký\";\r\n          }\r\n          const initialState = {\r\n            items: this.licensesArr,\r\n            isXuatHD: true,\r\n            hinhthucxuat: hinhthucxuat,\r\n            typeAction: 'NAP_EXCEL'\r\n          };\r\n\r\n          this.bsModalViewModel = this.modalImportService.show\r\n            (\r\n              ViewVoucherComponent,\r\n              {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'modal-xl view-invoice',\r\n                initialState\r\n              }\r\n            );\r\n          const subModal = this.modalImportService.onHide.subscribe(() => {\r\n            if (this.bsModalViewModel.content.successSaveItem == \"DONG_Y\") {\r\n              this.connectWebsocket();\r\n              this.confirmCheckPreview = true;\r\n              this.submit('XUAT');\r\n            }\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  onInvoiceTemplate(e) {\r\n    this.select.template = e.component.option(\"selectedItem\");\r\n    this.template_id = e.value;\r\n    this.template_code = this.select.template.template_code;\r\n    this.license_series = this.select.template.invoice_series;\r\n    let fields = this.templates.filter(p => p.value == e.value)[0].fields\r\n    let isOldTemp = fields.filter(p => p.code == \"tien-dong-bao-hiem-nnt\")\r\n    if (isOldTemp.length > 0) {\r\n      this.fields = fields;\r\n    } else {\r\n      this.fields = this.dataSourceTNCN;\r\n    }\r\n    this.layTruongMoRong();\r\n    this.setFormGird();\r\n    //Load lại danh sách cấu hình các trường\r\n  }\r\n  onInvoiceTemplateTXN(e) {\r\n    this.select.templateTXN = e.component.option(\"selectedItem\");\r\n    this.templatesTXN_id = e.value;\r\n    this.layTruongMoRong();\r\n    this.setFormGird();\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return 'Hoàn thành: ' + percent + '%';\r\n  }\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình nạp dữ liệu sẽ dừng lại nếu bạn đóng cửa sổ này\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      if (this.subLuuChoXuat) {\r\n        this.subLuuChoXuat.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n      this.totalInvoice = 0;\r\n      this.isVisibleBtnSubmit = false;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  loadRow(countRow) {\r\n    let tempRow = this.frmData.tempImportRow(countRow);\r\n    tempRow.forEach(element => {\r\n      this.licenses.insert(element);\r\n    });\r\n  }\r\n  checkStatusData() {\r\n    this.licenses.load().then((dataSource) => {\r\n      let invalid = dataSource.filter((item) => {\r\n        return item.taxpayers_name && item.statusData == \"INVALID\";\r\n      });\r\n      let errorDuplicateOngird = dataSource.filter((item) => {\r\n        return item.taxpayers_name && item.statusData == \"ERROR_DUPLICATE_ONGIRD\";\r\n      });\r\n      let errorData = dataSource.filter((item) => {\r\n        return item.taxpayers_name && item.statusData == \"DATA_ERROR\";\r\n      });\r\n      this.totalInvoiceInvalid = invalid.length;\r\n      this.totalErrorInvoice = errorDuplicateOngird.length + errorData.length;\r\n    });\r\n  }\r\n  submit(type) {\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.dsThuXacNhan = [];\r\n    this.idDaXuatArray = [];\r\n    let convert = this.convertGirdToInvoices(\"submit\")\r\n\r\n    if (convert) {\r\n      this.checkStatusData()\r\n      if (type == \"LUU\") {\r\n        this.showPopupImport = true;\r\n        this.luuChoXuat();\r\n      }\r\n      if (type == \"XUAT\") {\r\n        if (!this.listpermissions.includes('phe_duyet_chung_tu')) {\r\n          Library.notify(\"Bạn không có quyền thực hiện chức năng 'Xuất và ký'\", 'error');\r\n          return;\r\n        }\r\n        if (this.confirmCheckPreview) {\r\n          this.showPopupImport = true;\r\n          this.xuatHoaDon();\r\n          this.confirmCheckPreview = false;\r\n        } else {\r\n          this.previewBeforeSubmit();\r\n        }\r\n      }\r\n    }\r\n  }\r\n  previewBeforeSubmit() {\r\n    this.convertGirdToInvoices(\"preview\");\r\n    if (this.configs.system_parameter.display_template_from_server) {\r\n      let hinhthucxuat = \"\";\r\n      const initialState = {\r\n        items: this.licensesArr,\r\n        isXuatHD: true,\r\n        hinhthucxuat: hinhthucxuat,\r\n        typeAction: 'NAP_EXCEL'\r\n      };\r\n\r\n      this.bsModalViewModel = this.modalImportService.show\r\n        (\r\n          ViewVoucherComponent,\r\n          {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-xl view-invoice',\r\n            initialState\r\n          }\r\n        );\r\n      const subModal = this.modalImportService.onHide.subscribe(() => {\r\n        if (this.bsModalViewModel.content.successSaveItem == \"DONG_Y\") {\r\n          this.confirmCheckPreview = true;\r\n          this.submit('XUAT');\r\n        }\r\n        subModal.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      this.checkCKS(\"XUAT_HOA_DON\");\r\n    }\r\n  }\r\n  convertGirdToInvoices(type) {\r\n    let vouchers = [];\r\n    let letters = []\r\n    let invalid = true;\r\n    let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n    this.licenses.load().then((dataSource) => {\r\n      dataSource.forEach((element, index) => {\r\n        if (element.taxpayers_name) {\r\n          if (element.nationality == \"\") { Library.notify(\"Quốc tịch không được để trống\", \"error\"); invalid = false; return false; }\r\n          let voucher = new VoucherModel(1);\r\n          let letter = new ConfirmLettersModel;\r\n          if (element.id) {\r\n            voucher.id = element.id;\r\n            letter.license_id = element.id;\r\n            letter[\"id_txn\"] = element.id_txn;\r\n            if (!letter[\"id_txn\"])\r\n              letter[\"id_txn\"] = voucher.id;\r\n          }\r\n          else {\r\n            voucher['id_ct'] = Helper.makeid(),\r\n              letter['id_txn'] = voucher['id_ct'];\r\n          }\r\n          voucher.license_number = element.license_number;\r\n          voucher.taxpayers_name = element.taxpayers_name;\r\n          voucher.template_id = this.template_id;\r\n          voucher.province_name = this.province_name;\r\n          voucher.license_date = element.license_date ? moment(element.license_date).format('YYYY-MM-DD HH:mm:ss') : moment().format('YYYY-MM-DD HH:mm:ss'); // Ngày hóa đơn\r\n          voucher.nationality = element.nationality;\r\n          voucher.resident_individual = element.resident_individual;\r\n          voucher.taxpayers_address = element.taxpayers_address;\r\n          voucher.taxpayers_mobile = element.taxpayers_mobile;\r\n          voucher.taxpayers_tax_code = element.taxpayers_tax_code;\r\n          voucher.taxpayers_email = element.taxpayers_email;\r\n          voucher.id_card = element.id_card;\r\n          voucher.license_files = element.license_files;\r\n          voucher.card_issuer_address = element.card_issuer_address;\r\n          voucher.income = element.income;\r\n          voucher['is_voucher_currency'] = element.is_voucher_currency ? element.is_voucher_currency : false;\r\n          \r\n          voucher.card_issuer_date = element.card_issuer_date ? moment(element.card_issuer_date).format('YYYY-MM-DD') : \"\";\r\n          voucher.compulsory_insurance_payment = this.roundNumber(element.compulsory_insurance_payment, decimal_amount_after_vat);\r\n          voucher.year_pay_income = element.year_pay_income;\r\n          voucher.month_pay_income = element.month_pay_income;\r\n          voucher.total_taxable_income_deducted = this.roundNumber(element.total_taxable_income_deducted, decimal_amount_after_vat);\r\n          voucher.total_taxable_income = this.roundNumber(element.total_taxable_income, decimal_amount_after_vat);\r\n          voucher.amount_personal_income_tax_withheld = this.roundNumber(element.amount_personal_income_tax_withheld, decimal_amount_after_vat);\r\n          voucher.total_taxable_income_paid = this.roundNumber(element.total_taxable_income_paid, decimal_amount_after_vat);\r\n          voucher.amount_personal_income_still_received = this.roundNumber(element.amount_personal_income_still_received, decimal_amount_after_vat);\r\n          voucher.recept_no = moment().format('YYYYMMDDHHmmss');\r\n          voucher.license_series = this.license_series;\r\n          voucher.template_code = this.template_code;\r\n          voucher.license_options = this.layGiaTriMoRongDayDu(element, 'template');\r\n\r\n          letter.position = element.position;\r\n          letter.date_to_vietnam = element.date_to_vietnam ? moment(element.date_to_vietnam).format('YYYY-MM-DD HH:mm:ss') : '';\r\n          letter.income_from_date = element.income_from_date;\r\n          letter.income_to_date = element.income_to_date;\r\n          letter.income_taxes = this.roundNumber(element.income_taxes, decimal_amount_after_vat);\r\n          letter.deductions_outside_vietnam = this.roundNumber(element.deductions_outside_vietnam, decimal_amount_after_vat);\r\n          letter.income_taxable_abroad = this.roundNumber(element.income_taxable_abroad, decimal_amount_after_vat);\r\n          letter.income_taxes_in_vietnam = this.roundNumber(element.income_taxes_in_vietnam, decimal_amount_after_vat);\r\n          letter.personal_income_tax = this.roundNumber(element.personal_income_tax, decimal_amount_after_vat);\r\n          letter.insurance_payments = this.roundNumber(element.insurance_payments, decimal_amount_after_vat);\r\n          letter.deductions = this.roundNumber(element.deductions, decimal_amount_after_vat);\r\n          letter.rent_money = this.roundNumber(element.rent_money, decimal_amount_after_vat);\r\n          letter.contract_number = element.contract_number;\r\n          letter.template_id = this.templatesTXN_id;\r\n          letter.name = element.taxpayers_name;\r\n          letter.contract_date = element.contract_date ? moment(element.contract_date).format('YYYY-MM-DD HH:mm:ss') : '';\r\n          letter.license_confirm_letter_options = this.layGiaTriMoRongDayDu(element, 'templateTXN');\r\n\r\n          if(voucher['is_voucher_currency'] && element.hasOwnProperty('currency_code')){\r\n            voucher.currency_code = element.currency_code;\r\n          }else if (this.configs.system_parameter.voucher_currency) {\r\n            voucher.currency_code = this.configs.system_parameter.voucher_currency;\r\n          }\r\n          let decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n          voucher.decimal_places_json = decimal_places_json;\r\n          vouchers.push(voucher);\r\n          if (this.checkTXN(letter)) {\r\n            letters.push(letter)\r\n          }\r\n        }\r\n      });\r\n    });\r\n    this.totalInvoice = vouchers.length;\r\n    this.licensesArr = vouchers;\r\n    this.lettersArray = letters;\r\n    this.totalLetter = letters.length;\r\n\r\n    this.licensesArr = this.licensesArr.sort((itemA, itemB) => {\r\n      return new Date(itemA.license_date).getTime() - new Date(itemB.license_date).getTime();\r\n    });\r\n    return invalid;\r\n  }\r\n  luuChoXuat() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.license = this.licensesArr[this.countInvoice - 1];\r\n    /* Tạm thời chưa xử lý sửa ghi tạm */\r\n    if (this.license.id) {\r\n      let license = Object.assign({}, this.license);\r\n      this.letter = null;\r\n      this.subLuuChoXuat = this.voucherService.edit(license.id, license).subscribe(async rs => {\r\n        if (rs.status == 'success') {\r\n          this.license.id = rs.data.id;\r\n          let oThuXacNhan = this.lettersArray.filter(p => p.id_txn == this.license.id)[0];\r\n          if (oThuXacNhan) {\r\n            delete oThuXacNhan.id_txn;\r\n            this.letter = oThuXacNhan;\r\n            this.letter.license_id = rs.data.id;\r\n            await this.taoThuXacNhan();\r\n          }\r\n          else {\r\n            oThuXacNhan = this.lettersArray.filter(p => p.license_id == this.license.id)[0];\r\n            if (oThuXacNhan) {\r\n              this.letter = oThuXacNhan;\r\n              this.letter.license_id = rs.data.id;\r\n              this.letter.id = this.letter.id_txn;\r\n              await this.updateGhiTamThuXacNhan(this.letter.id_txn);\r\n            }\r\n          }\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.luuChoXuat();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.isVisibleBtnSubmit = false;\r\n            setTimeout(() => {\r\n              this.bsModalImportRef.hide();\r\n              this._location.back();\r\n            }, 500);\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          this.isVisibleBtnSubmit = false;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      let license = Object.assign({}, this.license);\r\n      delete license.id_ct;\r\n      this.letter = null;\r\n      this.subLuuChoXuat = this.voucherService.ghiTam(license).subscribe(async rs => {\r\n        if (rs.status == 'success') {\r\n          this.license.id = rs.data.id;\r\n          let oThuXacNhan = this.lettersArray.filter(p => p.id_txn == this.license.id_ct)[0];\r\n          if (oThuXacNhan) {\r\n            delete oThuXacNhan.id_txn;\r\n            this.letter = oThuXacNhan;\r\n            this.letter.license_id = rs.data.id;\r\n            await this.taoThuXacNhan();\r\n          }\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.luuChoXuat();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.isVisibleBtnSubmit = false;\r\n            setTimeout(() => {\r\n              this.bsModalImportRef.hide();\r\n              this._location.back();\r\n            }, 500);\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.isVisibleBtnSubmit = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n  }\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n  xuatHoaDon() {\r\n    this.license = this.licensesArr[this.countInvoice - 1];\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      this.connectWebsocket();\r\n      if (this.license.license_files && this.license.license_files.length) {\r\n        this.license.license_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.license.license_date);\r\n        });\r\n      }\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", '', true, this.taxCode, true);\r\n      }\r\n    }\r\n  }\r\n\r\n  xuatThuXacNhan() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      this.connectWebsocket();\r\n      let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n      this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", '', true, this.taxCode, true);\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      e.editorOptions.onValueChanged = (args) => {\r\n        switch (e.dataField) {\r\n          default:\r\n            break;\r\n        }\r\n        this.checkStatusData();\r\n        e.setValue(args.value);\r\n      };\r\n    }\r\n  }\r\n  onGripKeyDown(e) {\r\n    if (e.event.code == \"Delete\") {\r\n      // console.log(e.event.srcElement);\r\n      e.event.srcElement.value = null;\r\n      // e.event.srcElement.parentNode.parentNode.querySelector('input').value = null;\r\n    }\r\n  }\r\n  onRowRemoving(e) {\r\n    const keyData = e.data.keyData\r\n    if (keyData) {\r\n      this.licenses.load().then((dataSource) => {\r\n        dataSource.forEach(row => {\r\n          if (row.keyData == keyData) {\r\n            this.licenses.remove(row.keyData);\r\n          }\r\n        });\r\n      })\r\n    }\r\n    else {\r\n      this.licenses.remove(e.key);\r\n    }\r\n    this.checkStatusData();\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n  onRowUpdated(e) {\r\n\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      // if (e.data.statusData == \"ERROR_DUPLICATE_ONGIRD\" && e.column.dataField == \"taxpayers_name\") {\r\n      //   e.cellElement.style.background = \"#FF0000\";\r\n      // }\r\n      if (e.data.taxpayers_name) {\r\n        switch (e.column.dataField) {\r\n          case \"license_date\":\r\n            this.setStatusDataOnCellPrepared(e, \"Ngày chứng từ không được để trống\");\r\n            break;\r\n          case \"taxpayers_name\":\r\n            this.setStatusDataOnCellPrepared(e, \"Họ tên không được để trống\");\r\n            break;\r\n          case \"taxpayers_tax_code\":\r\n            this.setStatusDataOnCellPrepared(e, \"Mã số thuế không được để trống\");\r\n            break;\r\n          case \"nationality\":\r\n            this.setStatusDataOnCellPrepared(e, \"Quốc tịch không được để trống\");\r\n            break;\r\n          case \"taxpayers_address\":\r\n            this.setStatusDataOnCellPrepared(e, \"Địa chỉ không được để trống\");\r\n            break;\r\n          case \"taxpayers_email\":\r\n            this.setStatusDataOnCellPrepared(e, \"Email không được để trống\");\r\n            break;\r\n          case \"id_card\":\r\n            this.setStatusDataOnCellPrepared(e, \"Số CMND/CCCD không được để trống\");\r\n            break;\r\n          case \"year_pay_income\":\r\n            this.setStatusDataOnCellPrepared(e, \"Năm trả thu nhập không được để trống\");\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  setStatusDataOnCellPrepared(e, message) {\r\n    if (e.data.nationality == \"\" || e.data.year_pay_income == \"\") {\r\n      if ((e.column.dataField == \"nationality\" || e.column.dataField == \"year_pay_income\") && e.value == \"\") {\r\n        e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n        e.cellElement.title = message;\r\n      }\r\n      e.data.statusData = \"DATA_ERROR\";\r\n    }\r\n    else\r\n      e.data.statusData = \"INVALID\"\r\n  }\r\n  onRowPrepared(e) {\r\n    if (e.data) {\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_DATABASE\" && e.data.taxpayers_name) {\r\n        e.rowElement.style.background = \"#FFFF00\";\r\n      } else {\r\n        e.rowElement.style.background = \"\";\r\n      }\r\n    }\r\n    this.checkStatusData();\r\n  }\r\n  onContentReady(e) {\r\n    e.component.columnOption(\"command:edit\", {\r\n      visibleIndex: -1\r\n    });\r\n  }\r\n  onContextMenuPreparing(e) {\r\n    if (e.row) {\r\n      if (e.row.rowType === \"data\") {\r\n        e.items = [{\r\n          text: \"Thêm chứng từ\",\r\n          onItemClick: () => {\r\n            this.addRow();\r\n          }\r\n        }];\r\n      }\r\n    }\r\n  }\r\n  addRow() {\r\n    let data = this.frmData.addImportRow();\r\n    this.licenses.insert(data);\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n  chonDocFile() {\r\n    this.popupCachNapDuLieu = true;\r\n  }\r\n  thayThe(e) {\r\n    this.isThemTiep = false;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  themTiep(e) {\r\n    this.isThemTiep = true;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n  readFile() {\r\n    this.isDisReadFile = true;\r\n    Library.showloading();\r\n    const reader: FileReader = new FileReader();\r\n\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      let data = <any>(XLSX.utils.sheet_to_json(ws, { header: \"A\", range: 0 }));\r\n\r\n      let fileBangKe: any = document.getElementById(\"file-bang-ke\");\r\n      fileBangKe.value = \"\";\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"license_date\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n        this.dataExcelFile = _arrData;\r\n        this.fillData(this.dataExcelFile);\r\n      }\r\n      //  this.countAll = data.length;\r\n      //  this.showPopupImport = true;\r\n    };\r\n    reader.readAsBinaryString(this.target.files[0]);\r\n  }\r\n  onFileChanged(evt) {\r\n    this.target = <DataTransfer>(evt.target);\r\n    this.fileName = this.target.files[0].name;\r\n    // this.fileSize = target.files[0].size/1024;\r\n    if (this.target.files.length !== 1) {\r\n      Library.notify('Không thể chọn nhiều file', 'error');\r\n      throw new Error('Không thể chọn nhiều file');\r\n    };\r\n    this.isDisReadFile = false;\r\n  }\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById(\"file-bang-ke\").click();\r\n    this.isThemTiep = false;\r\n  }\r\n  //fill dữ liệu từ file excel\r\n  fillData(fileData) {\r\n    let isValid = true\r\n    if (!this.isThemTiep) {\r\n      this.licenses.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.licenses.remove(item.keyData);\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n      let voucher = new Object;\r\n      let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n      if (element.taxpayers_name) {\r\n        voucher[\"statusData\"] = \"INVALID\"\r\n        let licenseDate = Helper.processDate(element.license_date);\r\n        let cardIssuerDate = Helper.processDate(element.card_issuer_date);\r\n        let date_to_vietnam = Helper.processDate(element.date_to_vietnam);\r\n        let contract_date = Helper.processDate(element.contract_date);\r\n        if (licenseDate == \"ERROR\") {\r\n          Library.notify(\"Ngày hóa đơn không đúng định dạng\", \"error\");\r\n          isValid = false;\r\n          return;\r\n        }\r\n        voucher[\"license_date\"] = licenseDate;\r\n        voucher[\"taxpayers_name\"] = element.taxpayers_name ? element.taxpayers_name : \"\";\r\n        voucher[\"taxpayers_tax_code\"] = element.taxpayers_tax_code ? element.taxpayers_tax_code : \"\";\r\n        voucher[\"nationality\"] = element.nationality ? element.nationality : \"\";\r\n        voucher[\"resident_individual\"] = element.resident_individual && (element.resident_individual == \"X\" || element.resident_individual == \"x\") ? true : false;\r\n        voucher[\"taxpayers_address\"] = element.taxpayers_address ? element.taxpayers_address : \"\";\r\n        voucher[\"taxpayers_mobile\"] = element.taxpayers_mobile ? element.taxpayers_mobile : \"\";\r\n        voucher[\"taxpayers_email\"] = element.taxpayers_email ? element.taxpayers_email : \"\";\r\n        voucher[\"id_card\"] = element.id_card ? element.id_card : \"\";\r\n        voucher[\"card_issuer_address\"] = element.card_issuer_address ? element.card_issuer_address : \"\";\r\n        voucher[\"card_issuer_date\"] = cardIssuerDate;\r\n        voucher[\"income\"] = element.income ? element.income : \"\";\r\n        voucher[\"compulsory_insurance_payment\"] = element.compulsory_insurance_payment ? Helper.toNumber(element.compulsory_insurance_payment) : null;\r\n        voucher[\"month_pay_income\"] = element.month_pay_income ? element.month_pay_income : \"\";\r\n        voucher[\"year_pay_income\"] = element.year_pay_income ? element.year_pay_income : \"\";\r\n        voucher[\"total_taxable_income_deducted\"] = element.total_taxable_income_deducted ? Helper.toNumber(element.total_taxable_income_deducted) : null;\r\n        voucher[\"total_taxable_income\"] = element.total_taxable_income ? Helper.toNumber(element.total_taxable_income) : null;\r\n        voucher[\"amount_personal_income_tax_withheld\"] = element.amount_personal_income_tax_withheld ? Helper.toNumber(element.amount_personal_income_tax_withheld) : null;\r\n        voucher[\"total_taxable_income_paid\"] = element.total_taxable_income_paid ? Helper.toNumber(element.total_taxable_income_paid) : null;\r\n        voucher[\"amount_personal_income_still_received\"] = element.amount_personal_income_still_received ? Helper.toNumber(element.amount_personal_income_still_received) : null;\r\n        voucher[\"position\"] = element.position ? element.position : \"\";\r\n        voucher[\"date_to_vietnam\"] = date_to_vietnam;\r\n        voucher[\"income_from_date\"] = element.income_from_date ? element.income_from_date : \"\";\r\n        voucher[\"income_to_date\"] = element.income_to_date ? element.income_to_date : \"\";\r\n        voucher[\"income_taxes\"] = element.income_taxes ? Helper.toNumber(element.income_taxes) : null;\r\n        voucher[\"income_taxes_in_vietnam\"] = element.income_taxes_in_vietnam ? Helper.toNumber(element.income_taxes_in_vietnam) : null;\r\n        voucher[\"income_taxable_abroad\"] = element.income_taxable_abroad ? Helper.toNumber(element.income_taxable_abroad) : null;\r\n        voucher[\"deductions_outside_vietnam\"] = element.deductions_outside_vietnam ? Helper.toNumber(element.deductions_outside_vietnam) : null;\r\n        voucher[\"personal_income_tax\"] = element.personal_income_tax ? Helper.toNumber(element.personal_income_tax) : null;\r\n        voucher[\"insurance_payments\"] = element.insurance_payments ? Helper.toNumber(element.insurance_payments) : null;\r\n        voucher[\"deductions\"] = element.deductions ? Helper.toNumber(element.deductions) : null;\r\n        voucher[\"rent_money\"] = element.rent_money ? Helper.toNumber(element.rent_money) : null;\r\n        voucher[\"contract_number\"] = element.contract_number ? element.contract_number : \"\";\r\n        voucher[\"contract_date\"] = contract_date;\r\n        voucher[\"license_files\"] = [];\r\n        voucher[\"is_voucher_currency\"] = this.configs.system_parameter[\"is_voucher_currency\"] ? this.configs.system_parameter[\"is_voucher_currency\"] : false;\r\n        voucher['currency_code'] = '';\r\n        if(voucher['is_voucher_currency'] && this.configs.system_parameter.voucher_currency){\r\n          voucher['currency_code'] = this.configs.system_parameter.voucher_currency;\r\n        }\r\n\r\n        voucher = _.merge(voucher, this.layGiaTriMoRong(element));\r\n        if (element.total_taxable_income_deducted) {\r\n          let arr = element.total_taxable_income_deducted.split('.');\r\n          if (arr.length == 2) {\r\n            this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n          } else\r\n            this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n        }\r\n        if (element.total_taxable_income) {\r\n          let arr = element.total_taxable_income.split('.');\r\n          if (arr.length == 2) {\r\n            this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n          } else\r\n            this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n        }\r\n        if (element.amount_personal_income_tax_withheld) {\r\n          let arr = element.amount_personal_income_tax_withheld.split('.');\r\n          if (arr.length == 2) {\r\n            this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n          } else\r\n            this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n        }\r\n        if (element.total_taxable_income_paid) {\r\n          let arr = element.total_taxable_income_paid.split('.');\r\n          if (arr.length == 2) {\r\n            this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n          } else\r\n            this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n        }\r\n        if (element.amount_personal_income_still_received) {\r\n          let arr = element.amount_personal_income_still_received.split('.');\r\n          if (arr.length == 2) {\r\n            this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n          } else\r\n            this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n        }\r\n        this.licenses.insert(voucher)\r\n      }\r\n    });\r\n    if (isValid) {\r\n      let dataTempt = [];\r\n      this.licenses.load().then((dataSource) => {\r\n        let datagroup = dataSource.filter(p => p.taxpayers_name);\r\n        if (datagroup && datagroup.length > 0) {\r\n          datagroup.forEach(e => {\r\n            let listItem = dataSource.filter(w => w.productTaxpayersName == e.taxpayers_name);\r\n            dataTempt.push(e);\r\n            if (listItem && listItem.length > 0) {\r\n              listItem.forEach(inv => {\r\n                dataTempt.push(inv);\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n      //  this.checkDuplicateNumberOfVouchers(dataTempt);\r\n      this.checkStatusData();\r\n      this.dataGrid.instance.refresh();\r\n      Library.hideloading();\r\n    }\r\n  }\r\n\r\n  // Lấy giá trị mở rộng(dạng key:value)\r\n  layGiaTriMoRong(data, type = '') {\r\n    let arrMoRong = this.templatesOptions.concat(this.templatesTXNOptions);\r\n    let result = {};\r\n    arrMoRong.forEach(column => {\r\n      const col = column.code;\r\n      let val: any = '';\r\n      if (type) {\r\n\r\n      } else {\r\n        if (data.hasOwnProperty(column.code)) {\r\n          switch (column.data_type) {\r\n            case 'ngay':\r\n              val = Helper.processDate(data[col]);\r\n              break;\r\n            case 'soluong':\r\n              val = data[col] ? Helper.toNumber(data[col]) : null;\r\n              break;\r\n            default:\r\n              val = data[col];\r\n          }\r\n        }\r\n      }\r\n      result[col] = val;\r\n    })\r\n    return result\r\n  }\r\n\r\n  //Lấy giá trị các trường mở rộng đầy đủ\r\n  layGiaTriMoRongDayDu(data, type = '') {\r\n    let arrGtmr = this.templatesOptions.concat(this.templatesTXNOptions);\r\n    let result = [];\r\n    if (type) {\r\n      switch (type) {\r\n        case 'template':\r\n          arrGtmr = this.templatesOptions;\r\n          break;\r\n        case 'templateTXN':\r\n          arrGtmr = this.templatesTXNOptions;\r\n          break\r\n      }\r\n    }\r\n    arrGtmr.forEach(item => {\r\n      let value = data[item.code] ? data[item.code] : null\r\n      if (item.data_type == 'ngay' && value) {\r\n        value = moment(value).format('YYYY-MM-DD HH:mm:ss')\r\n      }\r\n      result.push({\r\n        code: item.code,\r\n        data_type: item.data_type,\r\n        name: item.name,\r\n        value: value\r\n      })\r\n    })\r\n\r\n    return result;\r\n  }\r\n\r\n\r\n\r\n  //Kiểm tra có nhập mẫu thư XN không ?\r\n  checkTXN(letter) {\r\n    const dataLetter = Object.keys(letter).filter(item => !this.fieldsKTTTXN.includes(item))\r\n    let exists = dataLetter.filter(item => letter.hasOwnProperty(item) && letter[item] !== null && letter[item] !== '' && letter[item] != undefined)\r\n    let status = false;\r\n    if (exists.length > 1) {\r\n      status = true;\r\n    }\r\n    if (!status && letter.license_confirm_letter_options) {\r\n      if (letter.license_confirm_letter_options.find(o => o.value !== null && o.value !== '' && o.value != undefined))\r\n        return true\r\n    }\r\n    return status;\r\n  }\r\n\r\n  layDuLieuTuHoaDonChoXuat() {\r\n    this.licensesImport.forEach(license => {\r\n      this.template_id = license.template_id;\r\n      this.template_code = license.template_code;\r\n      this.license_series = license.license_series;\r\n      let rowVoucher = new Object;\r\n      this.licensesId.push(license.id)\r\n      rowVoucher[\"id\"] = license.id;\r\n      rowVoucher[\"statusData\"] = \"INVALID\";\r\n      rowVoucher['license_number'] = license.license_number\r\n      rowVoucher[\"license_date\"] = license.license_date;\r\n      rowVoucher[\"taxpayers_name\"] = license.taxpayers_name;\r\n      rowVoucher[\"taxpayers_tax_code\"] = license.taxpayers_tax_code;\r\n      rowVoucher[\"nationality\"] = license.nationality;\r\n      rowVoucher[\"resident_individual\"] = license.resident_individual\r\n      rowVoucher[\"taxpayers_address\"] = license.taxpayers_address;\r\n      rowVoucher[\"taxpayers_address\"] = license.taxpayers_address;\r\n      rowVoucher[\"taxpayers_mobile\"] = license.taxpayers_mobile;\r\n      rowVoucher[\"taxpayers_email\"] = license.taxpayers_email;\r\n      rowVoucher[\"id_card\"] = license.id_card;\r\n      rowVoucher[\"license_files\"] = license.license_files;\r\n      rowVoucher[\"card_issuer_address\"] = license.card_issuer_address;\r\n      rowVoucher[\"card_issuer_date\"] = license.card_issuer_date;\r\n      rowVoucher[\"income\"] = license.income;\r\n      rowVoucher[\"compulsory_insurance_payment\"] = license.compulsory_insurance_payment;\r\n      rowVoucher[\"month_pay_income\"] = license.month_pay_income;\r\n      rowVoucher[\"year_pay_income\"] = license.year_pay_income;\r\n      rowVoucher[\"total_taxable_income_deducted\"] = license.total_taxable_income_deducted;\r\n      rowVoucher[\"total_taxable_income\"] = license.total_taxable_income;\r\n      rowVoucher[\"amount_personal_income_tax_withheld\"] = license.amount_personal_income_tax_withheld;\r\n      rowVoucher[\"total_taxable_income_paid\"] = license.total_taxable_income_paid;\r\n      rowVoucher[\"amount_personal_income_still_received\"] = license.amount_personal_income_still_received;\r\n      rowVoucher[\"is_voucher_currency\"] = license.is_voucher_currency ? license.is_voucher_currency : false;\r\n      if(rowVoucher[\"is_voucher_currency\"]) {\r\n        rowVoucher['currency_code'] = license.currency_code ? license.currency_code : '';\r\n      }\r\n      \r\n      rowVoucher[\"position\"] = license.TXN.position;\r\n      rowVoucher[\"date_to_vietnam\"] = license.TXN.date_to_vietnam;\r\n      rowVoucher[\"income_from_date\"] = license.TXN.income_from_date;\r\n      rowVoucher[\"income_to_date\"] = license.TXN.income_to_date;\r\n      rowVoucher[\"income_taxes\"] = license.TXN.income_taxes;\r\n      rowVoucher[\"income_taxes_in_vietnam\"] = license.TXN.income_taxes_in_vietnam;\r\n      rowVoucher[\"income_taxable_abroad\"] = license.TXN.income_taxable_abroad;\r\n      rowVoucher[\"deductions_outside_vietnam\"] = license.TXN.deductions_outside_vietnam;\r\n      rowVoucher[\"personal_income_tax\"] = license.TXN.personal_income_tax;\r\n      rowVoucher[\"insurance_payments\"] = license.TXN.insurance_payments;\r\n      rowVoucher[\"deductions\"] = license.TXN.deductions;\r\n      rowVoucher[\"rent_money\"] = license.TXN.rent_money;\r\n      rowVoucher[\"contract_number\"] = license.TXN.contract_number;\r\n      rowVoucher[\"contract_date\"] = license.TXN.contract_date;\r\n      let license_confirm_letters = license.TXN;\r\n      if (license_confirm_letters && license_confirm_letters.id) {\r\n        rowVoucher[\"id_txn\"] = license_confirm_letters.id;\r\n      }\r\n      rowVoucher = _.merge(rowVoucher, this.layGiaTriMoRong(license));\r\n      this.licenses.insert(rowVoucher);\r\n    });\r\n    this.changeTemplateInvoice(this.licensesImport[0].license_date);\r\n    this.checkStatusData();\r\n  }\r\n  getFileTemp() {\r\n    let data = {\r\n      license: {\r\n        template_ids: [this.template_id, this.templatesTXN_id]\r\n      }\r\n    }\r\n    Library.showloading();\r\n    this.voucherService.getTempFile(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất file Excel thành công\", 'success');\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    })\r\n  }\r\n  dong() {\r\n    this.bsModalImportRef.hide();\r\n    this._location.back();\r\n  }\r\n\r\n  xuLiApiKhiXuatThu() {\r\n    Library.showloading();\r\n    let status;\r\n    status = sEnum.processInv.ThemMoi;\r\n    let xmlInvoice = \"\";\r\n    if (status === sEnum.processInv.ThemMoi) {\r\n      const sub = this.voucherService.ghiTamThuXacNhan(this.letter).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n          //  Lấy xml từ serer\r\n          this.letterId = rs.data.id;\r\n          let sign_date = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            this.goiApiXuatHoaDonThu(rs.data.pdf_file.file_content);\r\n          } else {\r\n            this.xuLyKiFileThu(rs.data.pdf_file, sign_date);\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  ghiTamThu() {\r\n    Library.showloading();\r\n    const sub = this.voucherService.ghiTamThuXacNhan(this.letter).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.frmData.id = rs.data.id;\r\n        Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xemChungTu() {\r\n    if (this.configs.system_parameter.display_template_from_server)\r\n      this.viewInvoiceFromServer(this.idDaXuatArray);\r\n    else\r\n      this.viewInvoiceFromClient(this.idDaXuatArray);\r\n  }\r\n  viewInvoiceFromServer(ids) {\r\n    this.checkSubmit = window.open('about:blank', 'name', 'width=200, height=100');\r\n    this.checkSubmit.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    this.checkSubmit.blur();\r\n    Library.showloading();\r\n    const sub = this.voucherService.xemChungTuImport(ids).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const pdf_file = rs.data.license.pdf_file;\r\n        const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n        this.checkSubmit.document.write(`\r\n              <style type=\"text/css\" >\r\n                    .text-button{\r\n                        color: #fff;\r\n                        text-decoration: none;\r\n                    }\r\n                   .design-button{\r\n                        position: fixed;\r\n                        bottom: 0;\r\n                        left: 0;\r\n                        right: 0;\r\n                        padding: 9px 25px;\r\n                        background: white;\r\n                   }\r\n                   .button-content-style{\r\n                      background-color: #337ab7;\r\n                      color: #fff;\r\n                      border: 1px solid #2d6da3;\r\n                      margin: 0 10px;\r\n                      padding: 5px 10px 5px;\r\n                   }\r\n                   .dropdown {\r\n                    position: relative;\r\n                    display: inline-block;\r\n                   }\r\n                   .dropdown-content {\r\n                      display: none;\r\n                      position: absolute;\r\n                      bottom: 28px;\r\n                      background-color: #f9f9f9;\r\n                      min-width: 160px;\r\n                      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\r\n                      z-index: 1;\r\n                    }\r\n                   .dropdown-content a {\r\n                      color: black;\r\n                      padding: 12px 16px;\r\n                      text-decoration: none;\r\n                      display: block;\r\n                   }\r\n                   .dropdown-content a:hover {background-color: #b5acac;}\r\n                   .dropdown:hover .dropdown-content {\r\n                      display: block;\r\n                    }\r\n                    .dropdown:hover .dropbtn {\r\n                      background-color: #2d6da3;\r\n                    }\r\n              </style>\r\n           <div>\r\n                <iframe width=\"100%\" height=\"94%\" style=\"padding-bottom: 29px\" src=\"${objectUrl}\"></iframe>\r\n           </div>\r\n            <script type=\"text/javascript\">\r\n              function setConfirmInvoice() {\r\n                document.cookie = \"AK_SS_I=CHECKED; path=/\";\r\n                window.close();\r\n              }\r\n              function setConfirmInvoice2() {\r\n                document.cookie = \"AK_SS_I=CHECKED2; path=/\";\r\n                window.close();\r\n              }\r\n              function setConfirmInvoice3() {\r\n                document.cookie = \"AK_SS_I=CHECKED3; path=/\";\r\n                window.close();\r\n              }\r\n              function setConfirmInvoice4() {\r\n                document.cookie = \"AK_SS_I=CHECKED4; path=/\";\r\n                window.close();\r\n              }\r\n              function closeWin(){\r\n                window.close();\r\n              }\r\n            </script>\r\n        `);\r\n        this.checkSubmit.resizeTo(screen.availWidth, screen.availHeight);\r\n        this.checkSubmit.focus();\r\n      } else {\r\n        this.checkSubmit.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  /* View hóa đơn từ client */\r\n  viewInvoiceFromClient(ids) {\r\n    let popup = window.open('about:blank', 'name', `width=200, height=100`);\r\n    popup.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    popup.blur();\r\n    this.spinner.show();\r\n    const sub = this.voucherService.xemChungTuImport(ids).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        /* Xem hóa đơn từ Client */\r\n        let json_data = rs.data.license.json_data;\r\n        let appCode = \"VOUCHERS\";\r\n        this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\");\r\n      } else {\r\n        popup.close();\r\n        this.spinner.hide();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  viewInvoice(content, typeView, hinhthucxuat, invoice_date) {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    const pdf_file = content;\r\n    const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n    const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n    win.resizeTo(screen.availWidth, screen.availHeight);\r\n    win.focus();\r\n    this.spinner.hide();\r\n  }\r\n\r\n\r\n  converArrayToObject(arr, key, value) {\r\n    let obj = {};\r\n    arr.forEach(item => {\r\n      obj[item[key]] = item[value];\r\n    })\r\n    return obj;\r\n  }\r\n\r\n  changeTemplateInvoice(strDate) {\r\n    let year = \"\";\r\n    if (VStringService._getValueToString(strDate) != \"\")\r\n      year = VStringService._getValueToString(strDate).substring(4, 2);\r\n    else {\r\n      let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n      year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n    }\r\n    let templates_temp = this.templates;\r\n    this.templates = [];\r\n    if (templates_temp && templates_temp.length > 0) {\r\n      templates_temp.forEach(item => {\r\n        if (VStringService._getValueToString(item.name) != \"\")\r\n          item.name = item.name.replace(item.name.substring(15, 13), year);\r\n        this.templates.push(item);\r\n      });\r\n    }\r\n\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"row\\\" style=\\\"background-color: white;\\\">\\r\\n  <!-- <div class=\\\"col-md-1\\\" style=\\\"background-color: #F5F5F5;\\\"></div> -->\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <div class=\\\"voucher-container\\\">\\r\\n      <!-- Chứng từ khấu trừ thuế TNCN -->\\r\\n      <h1 style=\\\"font-weight: bold; font-size: 16px; text-align: center; padding: 20px 0px;\\\">\\r\\n        {{_translate.MENU.income_confirmation_letter | uppercase}}</h1>\\r\\n      <div class=\\\"proof-of-tax-deduction\\\">\\r\\n        <!-- Mẫu hóa đơn -->\\r\\n        <div class=\\\"proof\\\">\\r\\n          <div>\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.LABEL.sample_confirmation_letter}}</span><span\\r\\n                    class=\\\"req-text\\\">*</span></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-select-box [(value)]=\\\"frmData.template_id\\\" displayExpr=\\\"name\\\" valueExpr=\\\"value\\\"\\r\\n                    [dataSource]=\\\"select.templatesTT78\\\" (onValueChanged)=\\\"onChangeTem($event)\\\">\\r\\n                  </dx-select-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- họ tên-- -->\\r\\n            <div class=\\\"column\\\" *ngIf=\\\"inforFields('ten-txn').is_show || !frmData.template_id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.fullname}} <span class=\\\"req-text\\\">*</span></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.name\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div>\\r\\n            <!-- Ngày chứng từ -->\\r\\n            <div class=\\\"column\\\" *ngIf=\\\"inforFields('ngay-den-viet-nam-txn').is_show || !frmData.template_id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.LABEL.day_came_to_Viet_Nam}}</span></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n                    <dxi-item dataField=\\\"date_to_vietnam\\\" editorType=\\\"dxDateBox\\\"\\r\\n                      [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', showClearButton: true}\\\">\\r\\n                      <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n                    </dxi-item>\\r\\n                  </dx-form>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Chức vụ -->\\r\\n            <div class=\\\"column\\\" *ngIf=\\\"inforFields('chuc-vu-txn').is_show || !frmData.template_id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.GRID.USER.position}}</span></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.position\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Thông tin thu nhập -->\\r\\n          <h1 style=\\\"font-weight: bold; font-size: 13px; text-align: left; padding: 7px 6%;\\\">\\r\\n            {{_translate.TITLE.income_information | uppercase}}</h1>\\r\\n          <div>\\r\\n            <!-- Thgu nhập trong giai đoạn -->\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.LABEL.income_in_the_period_from}}</span></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.income_from_date\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Đến -->\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>Đến</span>\\r\\n                </div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.income_to_date\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Thu nhập chịu thuế   -->\\r\\n          <div class=\\\"column\\\" *ngIf=\\\"inforFields('so-tien-txn').is_show || !frmData.template_id\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.income_taxes}} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"\\r\\n                  (click)=\\\"configDecimal('thu_xac_nhan_thu_nhap')\\\" style=\\\"cursor: pointer;\\\">\\r\\n              </div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-number-box [(value)]=\\\"frmData.income_taxes\\\" [format]=\\\"formatter.thu_xac_nhan_thu_nhap\\\"\\r\\n                  [showClearButton]=\\\"true\\\">\\r\\n                </dx-number-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div style=\\\"display: flex;\\\">\\r\\n            <!-- Số tiền chịu thuế tại VN -->\\r\\n            <div class=\\\"column\\\" *ngIf=\\\"inforFields('so-tien-tai-viet-nam-txn').is_show || !frmData.template_id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.taxable_amount_in_Vietnam}} <img\\r\\n                    src=\\\"assets/img/icons/SoThapPhan.png\\\" (click)=\\\"configDecimal('thu_xac_nhan_thu_nhap')\\\"\\r\\n                    style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.income_taxes_in_vietnam\\\" [format]=\\\"formatter.thu_xac_nhan_thu_nhap\\\"\\r\\n                    [showClearButton]=\\\"true\\\">\\r\\n                  </dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Tại nước ngoài -->\\r\\n            <div class=\\\"column\\\" *ngIf=\\\"inforFields('so-tien-tai-nuoc-ngoai-txn').is_show || !frmData.template_id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.in_a_foreign_country}} <img\\r\\n                    src=\\\"assets/img/icons/SoThapPhan.png\\\" (click)=\\\"configDecimal('thu_xac_nhan_thu_nhap')\\\"\\r\\n                    style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.income_taxable_abroad\\\" [format]=\\\"formatter.thu_xac_nhan_thu_nhap\\\"\\r\\n                    [showClearButton]=\\\"true\\\">\\r\\n                  </dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div style=\\\"display: flex;\\\">\\r\\n            <!-- Các khoản khấu trừ ngoài Việt Nam  -->\\r\\n            <div class=\\\"column\\\" *ngIf=\\\"inforFields('cac-khoan-bi-tru-txn').is_show || !frmData.template_id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.deductions_outside_Vietnam}} <img\\r\\n                    src=\\\"assets/img/icons/SoThapPhan.png\\\" (click)=\\\"configDecimal('thu_xac_nhan_thu_nhap')\\\"\\r\\n                    style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.deductions_outside_vietnam\\\" [showClearButton]=\\\"true\\\"\\r\\n                    [format]=\\\"formatter.thu_xac_nhan_thu_nhap\\\" [showClearButton]=\\\"true\\\">\\r\\n                  </dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Thuế thu nhập các nhân -->\\r\\n            <div class=\\\"column\\\" *ngIf=\\\"inforFields('thue-thu-nhap-ca-nhan-txn').is_show || !frmData.template_id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.personal_income_tax}} <img\\r\\n                    src=\\\"assets/img/icons/SoThapPhan.png\\\" (click)=\\\"configDecimal('thu_xac_nhan_thu_nhap')\\\"\\r\\n                    style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.personal_income_tax\\\" [format]=\\\"formatter.thu_xac_nhan_thu_nhap\\\"\\r\\n                    [showClearButton]=\\\"true\\\">\\r\\n                  </dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div style=\\\"display: flex;\\\">\\r\\n            <!-- Các khoản đóng bảo hiểm  -->\\r\\n            <div class=\\\"column\\\" *ngIf=\\\"inforFields('bao-hiem-xa-hoi-txn').is_show || !frmData.template_id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.insurance_contributions}} <img\\r\\n                    src=\\\"assets/img/icons/SoThapPhan.png\\\" (click)=\\\"configDecimal('thu_xac_nhan_thu_nhap')\\\"\\r\\n                    style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.insurance_payments\\\" [format]=\\\"formatter.thu_xac_nhan_thu_nhap\\\"\\r\\n                    [showClearButton]=\\\"true\\\">\\r\\n                  </dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Các khoản bị khẩu trừ khác -->\\r\\n            <div class=\\\"column\\\" *ngIf=\\\"inforFields('khoan-khau-tru-khac-txn').is_show || !frmData.template_id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.other_deductions}} <img\\r\\n                    src=\\\"assets/img/icons/SoThapPhan.png\\\" (click)=\\\"configDecimal('thu_xac_nhan_thu_nhap')\\\"\\r\\n                    style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.deductions\\\" [format]=\\\"formatter.thu_xac_nhan_thu_nhap\\\"\\r\\n                    [showClearButton]=\\\"true\\\">\\r\\n                  </dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <h1 style=\\\"font-weight: bold; font-size: 13px; padding: 7px 6%;\\\">\\r\\n            {{_translate.TITLE.other_information | uppercase}}</h1>\\r\\n          <div>\\r\\n            <!-- Tiền thuê nhà -->\\r\\n            <div class=\\\"column\\\" *ngIf=\\\"inforFields('tien-thue-nha-txn').is_show || !frmData.template_id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.house_rent}} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"\\r\\n                    (click)=\\\"configDecimal('thu_xac_nhan_thu_nhap')\\\" style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.rent_money\\\" [format]=\\\"formatter.thu_xac_nhan_thu_nhap\\\"\\r\\n                    [showClearButton]=\\\"true\\\">\\r\\n                  </dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Số hợp đồng -->\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.vehicle_contract_number}}</div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.contract_number\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div>\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.LABEL.day_contract}}</span></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n                    <dxi-item dataField=\\\"contract_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n                      [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', showClearButton: true}\\\">\\r\\n                      <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n                    </dxi-item>\\r\\n                  </dx-form>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div>\\r\\n            <div class=\\\"column name-customer\\\">\\r\\n              <dx-form [formData]=\\\"customerTempt\\\" [items]=\\\"formItems\\\"\\r\\n                style=\\\"margin-top:7px; margin-bottom: 10px\\\" class=\\\"customer-tempt\\\">\\r\\n              </dx-form>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row rowButton\\\" style=\\\"padding-left: 7%;padding-right: 1%;\\\">\\r\\n        <div class=\\\"col-md-12\\\" style=\\\"padding-right: 50px;\\\">\\r\\n          <div class=\\\"pull-left\\\">\\r\\n            <!-- Xem trước -->\\r\\n            <dx-button disableDoubleClick *ngIf=\\\"!DaXuat\\\" (click)=\\\"preview()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n              text=\\\"{{_translate.CONTROLL.BUTTON.preview}}\\\" type=\\\"default\\\"></dx-button>\\r\\n            <!-- in thư -->\\r\\n            <!-- <dx-button *ngIf=\\\"DaXuat\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n              text=\\\"{{_translate.CONTROLL.BUTTON.print_letter}}\\\" type=\\\"default\\\"></dx-button> -->\\r\\n            <!-- Xem thư -->\\r\\n            <dx-button disableDoubleClick *ngIf=\\\"DaXuat\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n              text=\\\"{{_translate.CONTROLL.BUTTON.see_letter}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          </div>\\r\\n          <div class=\\\"pull-right\\\">\\r\\n            <!-- xuất thư-->\\r\\n            <dx-button disableDoubleClick *ngIf=\\\"!DaXuat\\\" type=\\\"default\\\" text=\\\"{{_translate.CONTROLL.BUTTON.export_letter}}\\\"\\r\\n              [(icon)]=\\\"this._translate.ICONS.export_inv\\\" (click)=\\\"eSubmit('XUAT',true)\\\" [disabled]=\\\"isDisableXuat\\\">\\r\\n            </dx-button>\\r\\n            <!-- xuất thư-->\\r\\n            <dx-button disableDoubleClick *ngIf=\\\"DaXuat\\\" type=\\\"default\\\" text=\\\"{{_translate.CONTROLL.BUTTON.export_again}}\\\"\\r\\n              [(icon)]=\\\"this._translate.ICONS.export_inv\\\" (click)=\\\"eSubmit('XUAT',true)\\\"></dx-button>\\r\\n            <!-- Ghi tạm -->\\r\\n            <dx-button disableDoubleClick *ngIf=\\\"!DaXuat\\\" (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" [disabled]=\\\"isDisableGhiTam\\\"\\r\\n              text=\\\"{{_translate.CONTROLL.BUTTON.save_temporary}}\\\" [(icon)]=\\\"this._translate.ICONS.save\\\">\\r\\n            </dx-button>\\r\\n            <!-- Đóng -->\\r\\n            <dx-button disableDoubleClick (click)=\\\"dong()\\\" [(icon)]=\\\"this._translate.ICONS.come_back\\\" type=\\\"default\\\"\\r\\n              text=\\\"{{_translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- Button -->\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n    <!-- <div class=\\\"row\\\" style=\\\"background-color: #F5F5F5;height: 20px;\\\"></div> -->\\r\\n  </div>\\r\\n  <!-- <div class=\\\"col-md-1\\\" style=\\\"background-color: #F5F5F5;\\\"></div> -->\\r\\n</div>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \"::ng-deep .column{display:inline-block;margin:0;text-align:right}:host::ng-deep .column .field{padding:5px 0;text-align:center}::ng-deep .day{width:32%}::ng-deep .day .field .label{width:61px !important}::ng-deep .day .field .value{width:56% !important}::ng-deep .day .field .dx-datebox{width:100% !important}::ng-deep .column .field>div{display:inline-block;vertical-align:middle}:host::ng-deep .column .field .label{text-align:right}:host::ng-deep .column .field .value .dx-texteditor-input{padding-bottom:3px !important}::ng-deep .number .field .value .dx-texteditor-input{color:red;font-weight:bold;padding-bottom:0px}::ng-deep .column .field .value{width:53%}::ng-deep .column .field .value .dx-selectbox{border-radius:0}::ng-deep .column .field .value .dx-datebox{border-radius:0}::ng-deep .column .field .value .dx-datebox .dx-texteditor-input{min-height:20px;max-height:25px}::ng-deep .column .field .value .dx-texteditor-input{min-height:20px;max-height:25px}::ng-deep .column .field .valueProcess{width:56%}::ng-deep .column .field .valueProcess .dx-selectbox{border-radius:0}::ng-deep .column .field .valueProcess .dx-datebox{border-radius:0}::ng-deep .column .field .valueProcess .dx-datebox .dx-texteditor-input{min-height:20px;max-height:25px;padding:3px 35px 3px 3px !important}::ng-deep .column .field .valueProcess .dx-texteditor-input{min-height:20px;max-height:25px}::ng-deep .search-date{width:100%}::ng-deep .search-date .dx-texteditor-input{padding-top:5px !important;padding-bottom:0px}::ng-deep .search-panel .dx-textbox .dx-texteditor-input{padding-top:5px !important;padding-bottom:0px}::ng-deep .proof-of-tax-deduction .dx-textbox .dx-texteditor-input,::ng-deep .advanced-invoice-buy .dx-textbox .dx-texteditor-input{padding-bottom:3px}.search-panel{width:100%}.search-panel .dx-texteditor{border-radius:0}.search-panel .column{width:68%}.search-panel .label{margin:0}.search-panel .value{width:76% !important}.search-panel .value .dx-textbox{width:83%;display:inline-flex}.search-panel .value .dx-button{position:relative;top:-2px;border-left:0;height:27px}.search-panel .value .dx-button-content{padding-right:0 !important}.search-panel .value .dx-icon{margin-right:3px !important;margin-left:3px !important}.search-panel .value #advBtn{margin-top:0;width:5%}.search-panel .value #searchBtn{margin-top:0;width:9%}.search-panel .valueProcess{width:63%}.search-panel .valueProcess .dx-textbox{width:94%;display:inline-flex}.search-panel .valueProcess .dx-button{position:relative;top:-2px;border-left:0;height:27px}.search-panel .valueProcess .dx-button-content{padding-right:0 !important}.search-panel .valueProcess .dx-icon{margin-right:3px !important;margin-left:3px !important}.search-panel .valueProcess #advBtn{margin-top:0;width:5%}.search-panel .valueProcess #searchBtn{margin-top:0;width:9%}.voucher-container{width:100%;height:100%}.voucher-container .proof-of-tax-deduction{transition:all .3s linear 0s;width:100%;display:flex;flex-direction:column;align-items:center}.voucher-container .proof-of-tax-deduction .proof{width:100%}.voucher-container .proof-of-tax-deduction .proof .custom{display:flex}.voucher-container .proof-of-tax-deduction .proof .dx-texteditor{border-radius:0}.voucher-container .proof-of-tax-deduction .proof .column{width:50%}.voucher-container .proof-of-tax-deduction .proof .column .value{width:47%}.voucher-container .proof-of-tax-deduction .proof .column .loai-tien{width:44% !important}.voucher-container .proof-of-tax-deduction .proof .name-customer{width:100% !important}.voucher-container .proof-of-tax-deduction .proof .name-customer .label{width:25%}.voucher-container .proof-of-tax-deduction .proof .name-customer .value{width:47% !important}.voucher-container .proof-of-tax-deduction .proof div .citizen-id .label{width:47%}.voucher-container .proof-of-tax-deduction .proof div .time .label{width:26%}.voucher-container .proof-of-tax-deduction .proof div .time .value{width:20%}.voucher-container .proof-of-tax-deduction .proof .citizen-id .label{width:20%}.voucher-container .proof-of-tax-deduction .proof .name-customer-buy{width:35.07% !important}.voucher-container .proof-of-tax-deduction .proof .name-customer-buy .value{width:63.5% !important}.voucher-container .proof-of-tax-deduction .proof :host .dx-fieldset{width:100px}.voucher-container .proof-of-tax-deduction .group-btn{width:80%;display:flex;justify-content:space-between}.voucher-container .proof-of-tax-deduction .group-btn .btn{padding:10px 10px 10px !important}.button-ok{height:30px;padding-bottom:10px !important;padding-left:20px}::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-popup-content{padding-top:5px !important;padding-left:5px !important;padding-right:5px !important;padding-bottom:0 !important}::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-template-wrapper .dx-treeview{height:80% !important;padding-bottom:5px !important}::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-template-wrapper .processing_status-search.dx-treeview,::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-template-wrapper .exporter-search.dx-treeview{height:75% !important;padding-bottom:5px !important}::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-template-wrapper .dx-button-search{border-radius:12px !important}::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-template-wrapper .dx-button-search .dx-button-content .dx-icon{font-size:13px !important}.rowButton{margin-top:25px;margin-bottom:10px}::ng-deep .nguoi-nop-thue .dx-field-item-label-text{font-weight:bold !important}::ng-deep .khong-co-mst .dx-field-item-label-text{color:red;font-style:italic}::ng-deep .thang-thu-nhap .dx-field-item-label{width:125px}::ng-deep .thang-thu-nhap .dx-field-item-label-content{width:110px !important}::ng-deep .tinh-tien .dx-texteditor-container .dx-texteditor-input-container .dx-texteditor-input{padding:0px 3px}::ng-deep .thue-thu-nhap .dx-field-item-label-location-left{padding-right:18px}::ng-deep .chungtu.invoice-number-create-invoice input{color:red;font-weight:bold}.req-text{margin-left:2px;color:red}::ng-deep .so-tien .dx-texteditor-input{padding:0px 9px 0px 9px}::ng-deep.custom-input .dx-texteditor-container .dx-texteditor-input-container .dx-texteditor-input{padding:0px 0px 0px 3px;height:25px}@media (min-width: 1367px){::ng-deep.custom-input .dx-field-item-label{padding-left:28px;padding-right:10px}}@media (max-width: 1367px) and (min-width: 1023px){::ng-deep.custom-input .dx-field-item-label{padding-left:0px;padding-right:10px}}:host::ng-deep .dx-item .dx-texteditor{width:91%}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport * as _ from 'lodash';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ConfigDecimalComponent } from '@shared/index';\r\nimport { ConfirmLettersModel, VoucherModel, VoucherService } from '@modules/vouchers/shared';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { AuthService, Helper, Library, sEnum, SocketService, VChanggeMoneyService, VPreviewInvService, VStringService } from '@core/index';\r\ndeclare var $: any;\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { Observable } from 'rxjs';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { pattern } from '@config/index';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-income-confirmation',\r\n  templateUrl: './income-confirmation.component.html',\r\n  styleUrls: ['./income-confirmation.component.scss']\r\n})\r\nexport class IncomeConfirmationComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  select: any = {};\r\n  formatter: any;\r\n  exportSchedules: any;\r\n  configs: any = {};\r\n  dataSource: any;\r\n  _translate: any;\r\n  bsModalRef: BsModalRef;\r\n  @Input() frmData;\r\n  @Input() frmData_ct;\r\n  priorities = [\r\n    { code: 1, name: 'Có' },\r\n    { code: 0, name: 'Không' }\r\n  ];\r\n  valueChange: string;\r\n  nodeSign: any;\r\n  DaXuat: boolean = false;\r\n  fileData: Array<any> = [];\r\n  private isExportInvoice: boolean;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  windowPreviewBeforeSubmit: any;\r\n  tempKiFile = 0;\r\n  isAccessExportInv = false;\r\n  confirmCheckPreview = false;\r\n  _isValid = false;\r\n  invoiceTemplateTT78: any;\r\n  _oTemplateTT78: any = {};\r\n  formItems = [];\r\n  customForms = [];\r\n  customerTempt = {};\r\n  extentionGrid: any = {};\r\n  currentUser: any;\r\n  taxCode: any = '';\r\n  province_name: any = '';\r\n  fields: any = [];\r\n  emailPattern = pattern.email;\r\n  arrEmail: any = [];\r\n  emails: any = [];\r\n  tong_tien: any;\r\n  isDisableGhiTam = true;\r\n  isDisableXuat = true;\r\n  is_voucher_currency = false;\r\n  listFieldsShow: any;\r\n  frmLincese: any;\r\n  currentIndex = 3;\r\n  constructor(\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private modalService: BsModalService,\r\n    private fb: FormBuilder,\r\n    private voucherService: VoucherService,\r\n    private socketService: SocketService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private confirmService: ConfirmService,\r\n    private spinner: NgxSpinnerService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private configsService: ConfigsService,\r\n    private customeModalService: MyBsModalService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.connectWebsocket();\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (this.currentUser.account) {\r\n      this.taxCode = this.currentUser.account.tax_code;\r\n      if (this.currentUser.account.van_account_info)\r\n        this.province_name = this.currentUser.account.van_account_info.city_name;\r\n    }\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // get cấu hình\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.configs = this.authService.getConfigs();\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      // this.frmData.display_currency = JSON.stringify(this.configs.display_currency);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      this.select.countrys = danh_muc.DM_QUOC_GIA ? danh_muc.DM_QUOC_GIA.data : null;\r\n      this.select.cities = danh_muc.DM_TINH_THANH ? danh_muc.DM_TINH_THANH.data : null;\r\n      let isEdit = false; //có TXN chưa ?\r\n      let invoice: any;\r\n      if (data.init[1] == true && this.route.snapshot.paramMap.get('idTXN')) {\r\n        isEdit = true;\r\n      }\r\n      if (isEdit) {\r\n        this.select.templatesTT78 = data.init[2].filter(item => item.template_type == 'THU_XAC_NHAN_THU_NHAP');\r\n        invoice = data.init[3];\r\n      }\r\n      else {\r\n        if (data.init[2]) {\r\n          this.select.templatesTT78 = data.init[2].filter(item => item.template_type == 'THU_XAC_NHAN_THU_NHAP');\r\n        } else {\r\n          this.select.templatesTT78 = data.init[0].filter(item => item.template_type == 'THU_XAC_NHAN_THU_NHAP');\r\n        }\r\n      }\r\n      if (isEdit) {\r\n        this.khoiTaoKhiSua(invoice);\r\n      } else {\r\n        this.khoiTaoKhiThemMoi();\r\n\r\n        this.frmData.name = data.init[0].taxpayers_name;\r\n        this.frmData.income_taxes = data.init[0].total_taxable_income_deducted;\r\n        this.frmData.personal_income_tax = data.init[0].amount_personal_income_tax_withheld;\r\n        this.frmData.insurance_payments = data.init[0].compulsory_insurance_payment ? Number(data.init[0].compulsory_insurance_payment) : null;\r\n      }\r\n      if (this.configs.system_parameter.is_voucher_currency) {\r\n        this.is_voucher_currency = true;\r\n      }\r\n      this.changeValueTempt();\r\n      this.setDisableBtn();\r\n      this.setDataSessionStorage(this.frmData);\r\n    });\r\n    const listpermissions = this.currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n  }\r\n\r\n  setDisableBtn() {\r\n    if (this.frmData_ct && this.frmData_ct.status) {\r\n      if (this.frmData_ct.status === 'GHI_TAM') {\r\n        this.isDisableXuat = true;\r\n        this.isDisableGhiTam = false;\r\n      } else {\r\n        this.isDisableXuat = false;\r\n        this.isDisableGhiTam = false;\r\n      }\r\n    } else {\r\n      this.isDisableXuat = true;\r\n      this.isDisableGhiTam = true;\r\n    }\r\n  }\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n  }\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status === sEnum.statusInv.DaXuat) {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      isTxn: true,\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        // this.formatter[data.column] = data.character;\r\n        // this._tinhGiaTri();\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  readonlyAllForm() {\r\n    // this.listDxForm._results.forEach(item => {\r\n    //   item.readOnly = true;\r\n    // });\r\n  }\r\n  // removeReadonlyAllForm() {\r\n  //   // this.listDxForm._results.forEach(item => {\r\n  //   //   item.readOnly = false;\r\n  //   // });\r\n  //   this.DaXuat = false;\r\n  // }\r\n  /*  */\r\n  khoiTaoKhiThemMoi() {\r\n    this.fileData = [];\r\n    if (this.select.templatesTT78.length) {\r\n      this.frmData.template_id = this.select.templatesTT78[0].value;\r\n      this.fields = this.select.templatesTT78[0].fields;\r\n      for (const key in this.select.templatesTT78[0]) {\r\n        if (this.select.templatesTT78[0].hasOwnProperty(key)) {\r\n          this._oTemplateTT78[key] = this.select.templatesTT78[0][key];\r\n        }\r\n      }\r\n      this.invoiceTemplateTT78 = this.select.templatesTT78[0];\r\n    }\r\n    let license_date = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n    // this.frmData.license_date = license_date;\r\n    // this.frmData.province_name = this.province_name;\r\n  }\r\n  /*  */\r\n  khoiTaoKhiSua(data) {\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    // lấy file\r\n    // let isOldTemp = this.select.templatesTT78.filter(p => p.value == data.template_id)[0]\r\n    // let lengthTemp = isOldTemp.fields.filter(p => p.code == \"tien-dong-bao-hiem-nnt\")\r\n    // if (lengthTemp.length > 0) {\r\n    this.fields = this.select.templatesTT78.filter(p => p.value == data.template_id)[0].fields;\r\n    // } else {\r\n    //   this.fields = this.dataSourceTNCN;\r\n    // }\r\n    if (this.voucherService.isCopy) {\r\n      this.fileData = [];\r\n      let _oTempt = this.select.templatesTT78.filter(p => p.value === this.frmData.template_id)[0];\r\n      if (_oTempt) {\r\n        this.frmData.template_id = _oTempt.value;\r\n        // this.frmData.license_series = _oTempt.invoice_series;\r\n        // this.frmData.template_code = _oTempt.template_code;\r\n      }\r\n      else {\r\n        this.frmData.template_id = null;\r\n        // this.frmData.license_series = null;\r\n        // this.frmData.template_code = null;\r\n      }\r\n    } else {\r\n      this.fileData = data.license_files;\r\n    }\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (item.value === this.frmData.template_id) {\r\n        this.invoiceTemplateTT78 = item;\r\n      }\r\n    });\r\n    this.select.templatesTT78.some(item => {\r\n      if (item.value === this.frmData.template_id) {\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            this._oTemplateTT78[key] = item[key];\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n    });\r\n    // if (this.frmData.taxpayers_email) {\r\n    //   this.emails = [];\r\n    //   const emailToString = this.frmData.taxpayers_email;\r\n    //   const a11 = emailToString.replace(/;/g, ',');\r\n    //   this.emails = a11.split(',');\r\n    // }\r\n    // cấu hình thập phân thêm mới\r\n    // this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n  }\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let status;\r\n    status = sEnum.processInv.ThemMoi;\r\n    if (!this.frmData.id) {\r\n      status = sEnum.processInv.ThemMoi;\r\n    }\r\n    if (this.frmData.id && this.frmData.status === \"GHI_TAM\") {\r\n      status = sEnum.statusInv.GhiTam;\r\n    }\r\n    if (this.frmData.id && this.frmData.status === 'DA_XUAT') {\r\n      status = 'XUAT_LAI';\r\n    }\r\n\r\n    let xmlInvoice = \"\";\r\n    if (status === sEnum.processInv.ThemMoi || status === 'XUAT_LAI') {\r\n      this.frmData.id = null;\r\n      if (this.frmData.license_confirm_letter_options) {\r\n        this.frmData.license_confirm_letter_options.forEach(item => {\r\n          delete item.id;\r\n        })\r\n      }\r\n      const sub = this.voucherService.ghiTamThuXacNhan(this.frmData).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          this.setDataSessionStorage(this.frmData);\r\n          this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n          //  Lấy xml từ serer\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            this.goiApiXuatHoaDon(rs.data.pdf_file.file_content);\r\n          } else {\r\n            this.xuLyKiFile(rs.data.pdf_file);\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status === sEnum.statusInv.GhiTam) {\r\n      const sub = this.voucherService.updateGhiTamThuXacNhan(this.frmData, this.frmData.id).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            this.goiApiXuatHoaDon(rs.data.pdf_file.file_content);\r\n          } else {\r\n            this.xuLyKiFile(rs.data.pdf_file, rs.data.sign_date);\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  goiApiXuatHoaDon(data) {\r\n    const license_confirm_letter = {\r\n      id: this.frmData.id,\r\n      pdf_file: {\r\n        file_name: \"thu_xac_nhan.pdf\",\r\n        file_content: data\r\n      }\r\n    }\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    const sub = this.voucherService.xuatTXN(license_confirm_letter).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.disablleScreen();\r\n        // this.fileData = this.frmData.license_files;\r\n        Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n        this.isExportInvoice = true;\r\n        this.setDataSessionStorage(this.frmData);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xuLyKiFile(xmlInvoice, signDate?) {\r\n    this.socketService.kiFile(() => this.connectWebsocket(), xmlInvoice.file_content, 'thu_xac_nhan.pdf', 'pdf', this.nodeSign, signDate, 'ALIGN_LEFT', 'PAGE_LAST', null, this.taxCode);\r\n  }\r\n  /* Kết nối đến socket */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        if (data.Data.Name === 'thu_xac_nhan.pdf') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.frmData.issuer_name = data.Data.IssuerName;\r\n          this.xuLiApiKhiXuat();\r\n        } else {\r\n          // this.frmData.license_files.forEach(item => {\r\n          //   if (item.file_name === data.Data.Name) {\r\n          //     item.file_content = data.Data.Content;\r\n          //   }\r\n          // });\r\n          this.tempKiFile++;\r\n          // if (this.tempKiFile === this.frmData.license_files.length) {\r\n          //   this.xuLiApiKhiXuat();\r\n          // }\r\n        }\r\n      }\r\n    });\r\n  }\r\n  /* Disbale Form */\r\n  disablleScreen() {\r\n    this.readonlyAllForm();\r\n    this.DaXuat = true;\r\n  }\r\n  /*  */\r\n  setDataSessionStorage(data) {\r\n    this.valueChange = JSON.stringify(data);\r\n\r\n    // localStorage.setItem('txn', JSON.stringify(this.valueChange))\r\n  }\r\n\r\n  setDataSessionStorage_lct() {\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  setFrmdataStorage_lct() {\r\n    this.frmData = JSON.parse(this.valueChange);\r\n  }\r\n  /*  */\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n    // return true;\r\n  }\r\n\r\n  updateData_lct() {\r\n    this.setDisableBtn();\r\n    setTimeout(() => {   \r\n      if(!this.frmData.id) {\r\n        const setMapFields = {\r\n          'name': 'taxpayers_name',\r\n          'insurance_payments': 'compulsory_insurance_payment',\r\n          'income_taxes': 'total_taxable_income_deducted',\r\n          'personal_income_tax': 'amount_personal_income_tax_withheld'\r\n        }\r\n        for (const key in setMapFields){\r\n          this.frmData[key] = this.frmData_ct[setMapFields[key]] ? this.frmData_ct[setMapFields[key]] : this.frmData[key];\r\n        }\r\n      }\r\n      this.setDataSessionStorage(this.frmData)\r\n    });\r\n  }\r\n\r\n\r\n  checkDataFormChange_lct() {\r\n    if (!this.frmData.id) {\r\n      return this.checkDataFormChange(this.valueChange, this.frmData);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /*  */\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    this.configsService.getAll().subscribe((res) => {\r\n      if (res.data && res.data.configs) {\r\n        this.authService.setConfigs(res.data.configs);\r\n        this.configs = this.authService.getConfigs();\r\n      }\r\n    });\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData(sEnum.statusInv.GhiTam, this.frmData).then(value1 => {\r\n                    observer.next(value1);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  /*  */\r\n  async subData(type, data) {\r\n    // const checkValid = this.form.instance.validate();\r\n    // if (!checkValid.isValid) {\r\n    //   return false;\r\n    // }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    await this.handleFormDataSub();\r\n    if (this.frmData.license_confirm_letter_options) {\r\n      this.frmData.license_confirm_letter_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n        delete item['index_name'];\r\n        delete item['name_en'];\r\n      });\r\n    }\r\n    if (data.id) {\r\n      Library.showloading();\r\n      return await this.voucherService.updateGhiTamThuXacNhan(data, data.id).toPromise().then(res => {\r\n        Library.hideloading();\r\n        if (res.status === 'success') {\r\n          Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n          return true;\r\n        } else {\r\n          Library.notify(res.message, 'error');\r\n          return false;\r\n        }\r\n      });\r\n    } else {\r\n      Library.showloading();\r\n      return await this.voucherService.ghiTamThuXacNhan(data).toPromise().then(res => {\r\n        Library.hideloading();\r\n        if (res.status === 'success') {\r\n          Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n          return true;\r\n        } else {\r\n          Library.notify(res.message, 'error');\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /*  */\r\n  handleFormDataSub() {\r\n    const wait = (delay, ...args) => new Promise(resolve => setTimeout(resolve, delay, ...args));\r\n    return wait(200).then(() => {\r\n      // this.fileData =[];\r\n      this.tempKiFile = 0;\r\n      // this.frmData.license_files = JSON.parse(JSON.stringify(this.fileData));\r\n      // this.frmData.license_files = []\r\n      // this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n      return true;\r\n    });\r\n  }\r\n  /* Xuất hóa đơn */\r\n  eSubmit(type, isCheckNoVat?) {\r\n\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.tong_tien = \"\";\r\n    // this.setCurrencyVoucher();\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      this._isValid = this._validForm();\r\n      if (!this._isValid) {\r\n        return;\r\n      }\r\n      this._isValid = InvoicesService.checkTimeExportInv(this.configs.system_parameter);\r\n      if (!this._isValid) {\r\n        Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n        return;\r\n      }\r\n      if (this.frmData.license_confirm_letter_options) {\r\n        this.frmData.license_confirm_letter_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n          delete item['index_name'];\r\n          delete item['name_en'];\r\n        });\r\n      }\r\n      if (type === 'XUAT' || (type === sEnum.statusInv.TrinhKy && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy)) {\r\n        this.processXuatHoaDon(type, isCheckNoVat)\r\n      } else {\r\n        this.processGhiTam(type)\r\n      }\r\n    }, 300);\r\n  }\r\n  /* Xử lý xuất hóa đơn */\r\n  processXuatHoaDon(type, isCheckNoVat) {\r\n    if (type === sEnum.statusInv.TrinhKy && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n      this.confirmCheckPreview = true;\r\n    }\r\n    if (this.confirmCheckPreview) {\r\n      if (this.frmData.status !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        this.xuatHoaDon(this.frmData);\r\n      } else {\r\n        Helper.confirmXuatChoKy(() => {\r\n          this.xuatChoKy(this.frmData);\r\n        });\r\n      }\r\n      this.confirmCheckPreview = false;\r\n    } else {\r\n      this.previewBeforeExport(type);\r\n    }\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n    let du_lieu = this.voucherService.taodulieuxemtruoctxn(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.thuxacnhan;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      trang_thai: trang_thai,\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_thu_xac_nhan_thu_nhap.toUpperCase(),\r\n      is_display_img_note: false,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_thu_xac_nhan_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  /* Xử lý ghi tạm hóa đơn */\r\n  processGhiTam(type) {\r\n    this.ghiTam(this.frmData);\r\n  }\r\n  handleFormData() {\r\n    this.tempKiFile = 0;\r\n    this.frmData.license_id = this.frmData_ct.id;\r\n    console.log('this.frmData_ct: ',this.frmData_ct);\r\n    \r\n    // this.frmData.license_files = [];//JSON.parse(JSON.stringify(this.fileData));\r\n    // this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n  }\r\n\r\n  newLicenseConfirm_lct() {\r\n    this.frmData = new ConfirmLettersModel();\r\n    this.khoiTaoKhiThemMoi();\r\n    this.DaXuat = false;\r\n    this.updateData_lct();\r\n  }\r\n  /* Validate */\r\n  _validForm() {\r\n    let _isValid = true;\r\n\r\n    if (!this.frmData.template_id) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.invoice_form + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n\r\n    if (!this.frmData.name) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.fullname + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n\r\n    // if (!this.frmData.province_name) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.province_city + ' ' + this._translate.VALIDATION.required, 'error');\r\n    //   return false;\r\n    // }\r\n\r\n    // if (!this.frmData.taxpayers_name) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.fullname + ' ' + this._translate.VALIDATION.required, 'error');\r\n    //   return false;\r\n    // }\r\n\r\n    // if (!this.frmData.nationality) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n    //   return false;\r\n    // }\r\n\r\n    // if (!this.frmData.taxpayers_tax_code && !this.frmData.id_card) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.req_taxcode_cmnd, 'error');\r\n    //   return false;\r\n    // }\r\n\r\n    // if (!this.frmData.year_pay_income) {\r\n    //   Library.notify(this._translate.CONTROLL.COMBO.year + ' ' + this._translate.VALIDATION.required, 'error');\r\n    //   return false;\r\n    // }\r\n\r\n    // if (this.frmData.taxpayers_email && !this.emailPattern.test(this.frmData.taxpayers_email)) {\r\n    //   Library.notify(\"Email\" + ' ' + this._translate.VALIDATION.not_pattern, 'error');\r\n    //   return false;\r\n    // }\r\n    return _isValid;\r\n  }\r\n  /* Ghi tạm */\r\n  ghiTam(data) {\r\n    if (this.frmData.id) {\r\n      Library.showloading();\r\n      const sub = this.voucherService.updateGhiTamThuXacNhan(data, this.frmData.id).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      Library.showloading();\r\n      const sub = this.voucherService.ghiTamThuXacNhan(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n          // if (this.frmData.license_id && this.frmData.id) {\r\n          // this.router.navigate([`/system/voucher-tax/${this.frmData.license_id};idTXN=${this.frmData.id}`])\r\n          // this.router.navigate([`/system/voucher-tax/${VStringService._getValueToString(this.frmData.license_id)}`, { idTXN: this.frmData.id }]);\r\n          // }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatHoaDon(data) {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      this.xuLiApiKhiXuat();\r\n    }\r\n  }\r\n  /* Xuất chờ ký */\r\n  xuatChoKy(data) {\r\n    Library.showloading();\r\n    const sub = this.voucherService.xuatChoKy(data).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.frmData.id = rs.data.id;\r\n        // this.frmData.license_number = rs.data.license_number;\r\n        // this.frmData.license_date = moment(rs.data.license_date).format('YYYY-MM-DD HH:mm:ss');\r\n        Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n        this.setDataSessionStorage(this.frmData);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  \r\n  onChangeTem(e) {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.fields = item.fields\r\n        this.frmData.template_id = item.value;\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        // Nếu là mẫu html\r\n        if (item.fields) {\r\n          this.formItems = [];\r\n          this.customForms = [];\r\n          const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n          if (_arrayGrid && _arrayGrid.length > 0) {\r\n            this.extentionGrid.ma_hang = false;\r\n            this.extentionGrid.so_lo = false;\r\n            this.extentionGrid.han_dung = false;\r\n            this.extentionGrid.nuoc_san_xuat = false;\r\n            this.extentionGrid.don_hang_hop_dong = false;\r\n            this.extentionGrid.ma_quan_ly = false;\r\n            for (let i = 0; i < _arrayGrid.length; i++) {\r\n              const column = _arrayGrid[i]['name'];\r\n              const value = _arrayGrid[i]['is_show'];\r\n              const _ma = VStringService._convertToViKdau(column);\r\n              this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n            }\r\n          }\r\n          const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n          if (_dulieumorong.length > 0) {\r\n            _dulieumorong.forEach(item1 => {\r\n              if (item1.is_show) {\r\n                if (item1.data_type === 'chu') {\r\n                  this.customForms.push(\r\n                    {\r\n                      cssClass: 'custom-input',\r\n                      editorType: 'dxTextBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'soluong') {\r\n                  this.customForms.push(\r\n                    {\r\n                      cssClass: 'custom-input',\r\n                      editorType: 'dxNumberBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        },\r\n                        format: this.formatter.thu_xac_nhan_thu_nhap,\r\n                        showClearButton: true\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'ngay') {\r\n                  this.customForms.push(\r\n                    {\r\n                      cssClass: 'custom-input',\r\n                      editorType: 'dxDateBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'danhmuc') {\r\n                  this.customForms.push(\r\n                    {\r\n                      cssClass: 'custom-input',\r\n                      editorType: 'dxSelectBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name }\r\n                    }\r\n                  );\r\n                }\r\n              }\r\n            });\r\n            this.formItems.push(this.createCustomGroup());\r\n            this.frmData.license_confirm_letter_options = _dulieumorong;\r\n          }\r\n          else\r\n            this.frmData.license_confirm_letter_options = [];\r\n          _dulieumorong.forEach(value => {\r\n            this.customerTempt[value.code] = value.value;\r\n          });\r\n        } else {\r\n          this.formItems = [];\r\n          this.customerTempt = {};\r\n          this.extentionGrid.ma_hang = false;\r\n          this.extentionGrid.so_lo = false;\r\n          this.extentionGrid.han_dung = false;\r\n          this.extentionGrid.nuoc_san_xuat = false;\r\n          this.extentionGrid.don_hang_hop_dong = false;\r\n          this.extentionGrid.ma_quan_ly = false;\r\n        }\r\n      }\r\n    });\r\n  }\r\n  onChangeCity = (e) => {\r\n    let ts = e;\r\n  }\r\n  changeValueTempt() {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (item.value === this.frmData.template_id) {\r\n        // Nếu là mẫu html\r\n        if (item.fields && item.fields.length > 0) {\r\n          this.formItems = [];\r\n          this.customForms = [];\r\n          const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n          if (_arrayGrid && _arrayGrid.length > 0) {\r\n            this.extentionGrid.ma_hang = false;\r\n            this.extentionGrid.so_lo = false;\r\n            this.extentionGrid.han_dung = false;\r\n            this.extentionGrid.nuoc_san_xuat = false;\r\n            this.extentionGrid.don_hang_hop_dong = false;\r\n            this.extentionGrid.ma_quan_ly = false;\r\n            for (let i = 0; i < _arrayGrid.length; i++) {\r\n              const column = _arrayGrid[i]['name'];\r\n              const value = _arrayGrid[i]['is_show'];\r\n              let _ma = VStringService._convertToViKdau(column);\r\n              this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n            }\r\n          }\r\n          const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n          if (_dulieumorong.length > 0) {\r\n            _dulieumorong.forEach(item1 => {\r\n              if (item1.is_show) {\r\n                if (item1.data_type === 'chu') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxTextBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'soluong') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxNumberBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        },\r\n                        format: this.formatter.thu_xac_nhan_thu_nhap,\r\n                        showClearButton: true\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'ngay') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxDateBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'danhmuc') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxSelectBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name }\r\n                    }\r\n                  );\r\n                }\r\n              }\r\n            });\r\n            this.formItems.push(this.createCustomGroup());\r\n          }\r\n          if (this.frmData.license_confirm_letter_options && this.frmData.license_confirm_letter_options.length > 0) {\r\n            this.frmData.license_confirm_letter_options.forEach(iteminv => {\r\n              this.customerTempt[iteminv.code] = iteminv.value;\r\n            });\r\n          } else {\r\n            _dulieumorong.forEach(item2 => {\r\n              this.customerTempt[item2.code] = item2.value;\r\n            });\r\n            this.frmData.license_confirm_letter_options = _dulieumorong;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (let key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.license_confirm_letter_options = _dulieumorong;\r\n    });\r\n  }\r\n  ////// Tạo form mở rộng\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n  disableTemplateInput() {\r\n    // if (this.frmData.license_number) {\r\n    //   return true;\r\n    // }\r\n    // return false;\r\n  }\r\n  tinhgiatri() {\r\n    // if (!this.frmData.auto_value) {\r\n    //   if (this.frmData.total_taxable_income_paid != null && this.frmData.amount_personal_income_tax_withheld != null)\r\n    //     this.frmData.amount_personal_income_still_received = VChanggeMoneyService.roundNumber(this.frmData.total_taxable_income_paid - this.frmData.amount_personal_income_tax_withheld, this.formatter.so_tncncdn);\r\n    //   else if (this.frmData.total_taxable_income_paid != null)\r\n    //     this.frmData.amount_personal_income_still_received = VChanggeMoneyService.roundNumber(this.frmData.total_taxable_income_paid, this.formatter.so_tncncdn);\r\n    //   else if (this.frmData.amount_personal_income_tax_withheld != null)\r\n    //     this.frmData.amount_personal_income_still_received = VChanggeMoneyService.roundNumber(this.frmData.amount_personal_income_tax_withheld, this.formatter.so_tncncdn);\r\n    // }\r\n  }\r\n  /* Xem trước thư xác nhận */\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm()) {\r\n        return;\r\n      }\r\n      let data = this.voucherService.taodulieuxemtruoctxn(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.thuxacnhan;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    let dulieu: any;\r\n    if (this.frmData.status == 'GHI_TAM') {\r\n      dulieu = this.voucherService.taodulieuxemtruoctxn(this.frmData);\r\n      dulieu['configs'] = _.cloneDeep(sEnum.cauhinhxemmau.thuxacnhan); //clone đối tượng\r\n    }\r\n    else {\r\n      dulieu = this.voucherService.taodulieuxemtxn(ids);\r\n      dulieu['configs'] = _.cloneDeep(sEnum.cauhinhxemmau.thuxacnhan);\r\n      dulieu['configs']['is_view_server'] = true;\r\n    }\r\n    this.vPreviewInvService.xemMau(dulieu);\r\n  }\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      // this.frmData.taxpayers_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      // this.frmData.taxpayers_email = null;\r\n    }\r\n  }\r\n  keyDown(e: any) {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n  onChangeAutoValue() {\r\n    this.tinhgiatri();\r\n  };\r\n\r\n  // /* Tạo mới */\r\n  // handleAddNew() {\r\n  //   if (this.isExportInvoice) {\r\n  //     this.addNew();\r\n  //   } else {\r\n  //     if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n  //       this.confirmService.confirm()\r\n  //         .subscribe(\r\n  //           value => {\r\n  //             switch (value) {\r\n  //               case 'yes':\r\n  //                 this.subData(sEnum.statusInv.GhiTam, this.frmData).then(res => {\r\n  //                   if (res) {\r\n  //                     this.addNew();\r\n  //                   } else {\r\n  //                     return;\r\n  //                   }\r\n  //                 });\r\n  //                 break;\r\n  //               case 'no':\r\n  //                 this.addNew();\r\n  //                 break;\r\n  //               case 'cancel':\r\n  //                 this.addNew();\r\n  //                 break;\r\n  //               default:\r\n  //                 break;\r\n  //             }\r\n  //           }\r\n  //         );\r\n  //     } else {\r\n  //       this.addNew();\r\n  //     }\r\n  //   }\r\n  // }\r\n  /* Tạo mới */\r\n  // addNew() {\r\n  //   const inv = Object.assign({}, this.frmData);\r\n  //   // this.frmData = new VoucherModel(1);\r\n  //   // this.frmData.template_id = inv.template_id;\r\n  //   // this.frmData.license_series = inv.license_series;\r\n  //   // this.frmData.template_code = inv.template_code;\r\n  //   // this.frmData.license_date = inv.license_date;\r\n  //   // this.frmData.province_name = inv.province_name;\r\n  //   // this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(inv.decimal_places_json));\r\n  //   this.emails = [];\r\n  //   this.DaXuat = false;\r\n  //   this.removeReadonlyAllForm();\r\n  //   this.setDataSessionStorage(this.frmData);\r\n  // }\r\n  totalTaxableChange(e) {\r\n    // this.frmData.total_taxable_income_paid = e.value;\r\n    this.tinhgiatri()\r\n  }\r\n  inforFields(field_name) {\r\n    let ojb = this.fields.filter(p => p.code == field_name);\r\n    if (ojb.length > 0) {\r\n      if (ojb[0].is_show) {\r\n        return { is_show: true };\r\n      } else {\r\n        return { is_show: false };\r\n      }\r\n    } else {\r\n      return { is_show: false };\r\n    }\r\n  }\r\n  onChangeCurrency(e) {\r\n    if (e) {\r\n      this.configs.system_parameter[\"is_voucher_currency\"] = e.value;\r\n      if (!e.value) {\r\n        this.is_voucher_currency = false;\r\n        // this.frmData.currency_code = '';\r\n      } else {\r\n        this.is_voucher_currency = true;\r\n      }\r\n    }\r\n  }\r\n  setCurrencyVoucher() {\r\n    // this.configs.system_parameter[\"voucher_currency\"] = this.frmData.currency_code;\r\n    const id = this.configs.id.system_parameter;\r\n    const data = {\r\n      config: {\r\n        value: JSON.stringify(this.configs.system_parameter)\r\n      }\r\n    };\r\n    this.voucherService.updateConfig(id, data).subscribe(res => {\r\n      if (res.status == 'success') {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n        });\r\n      }\r\n    });\r\n  }\r\n  dong() {\r\n    this.router.navigate([`/system/voucher-tax`]);\r\n  }\r\n}\r\n\r\n","module.exports = \"<div class=\\\"row search-section\\\">\\r\\n  <div class=\\\"col-md-8\\\">\\r\\n    <app-voucher-search (searchContentChange)=\\\"getSearch($event)\\\"></app-voucher-search>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-4 list-header\\\" style=\\\"max-height: 70px;\\\">\\r\\n    <div *ngIf=\\\"isLapChungTu\\\" class=\\\"pull-right button-panel\\\">\\r\\n      <dx-button [(icon)]=\\\"_translate.ICONS.plus\\\" text=\\\"{{ 'CONTROLL.BUTTON.create_vouchers' | translate }}\\\"\\r\\n        type=\\\"default\\\" (click)=\\\"createLicense()\\\"></dx-button>\\r\\n      <dx-button [(icon)]=\\\"_translate.ICONS.pencil\\\" (click)=\\\"kyHangLoat()\\\"\\r\\n        text=\\\"{{ 'CONTROLL.BUTTON.sign' | translate }}\\\" type=\\\"default\\\" [disabled]=\\\"!selectedRows.length\\\"></dx-button>\\r\\n      <dx-menu [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\"\\r\\n        cssClass='button-dropdown-extend' (onItemClick)=\\\"itemExtrasClick($event)\\\">\\r\\n      </dx-menu>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainerInvoice\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n  [showRowLines]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\"\\r\\n  id=\\\"gridContainerVat\\\" [showBorders]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n  (onRowPrepared)=\\\"onRowPrepared($event)\\\" [noDataText]=\\\"textHienThiLuoi\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n  <dxo-selection selectAllMode=\\\"{{pageSelect}}\\\" mode=\\\"multiple\\\">\\r\\n  </dxo-selection>\\r\\n  <!-- <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"handleinvoice\\\"></dxo-state-storing> -->\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"single\\\"></dxo-sorting>\\r\\n  <!-- <dxo-selection mode=\\\"multiple\\\"></dxo-selection> -->\\r\\n  <dxo-filter-row [visible]=\\\"true\\\" showAllText='{{_translate.CONTROLL.COMBO.all}}'></dxo-filter-row>\\r\\n  <!-- Số chứng từ -->\\r\\n  <dxi-column cellTemplate=\\\"licenseNumber\\\" dataField=\\\"license_number\\\"\\r\\n    caption=\\\"{{ 'CONTROLL.LABEL.vehicle_license_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n    alignment=\\\"center\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"1\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n  <!-- Mẫu số, ký hiệu -->\\r\\n  <dxi-column cellTemplate=\\\"templateCode\\\" [filterOperations]=\\\"['contains']\\\" [calculateFilterExpression]=\\\"calculateFilterExpression\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  <!-- Ngày chứng từ -->\\r\\n  <dxi-column dataField=\\\"license_date\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\"\\r\\n    caption=\\\"{{ 'CONTROLL.LABEL.invoice_voucher' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\"\\r\\n    dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"dd/MM/yyyy\\\" alignment=\\\"center\\\"\\r\\n    headerCellTemplate=\\\"titleHeaderTemplate\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"0\\\"></dxi-column>\\r\\n  <!-- Mã số thuế -->\\r\\n  <dxi-column dataField=\\\"taxpayers_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"center\\\" allowSearch=\\\"true\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Số CMND -->\\r\\n  <dxi-column dataField=\\\"id_card\\\" caption=\\\"{{ 'GRID.INVOICE.id_card' | translate }}\\\" alignment=\\\"center\\\" minWidth=\\\"120\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tên người nộp thuế -->\\r\\n  <dxi-column dataField=\\\"taxpayers_name\\\" caption=\\\"{{ 'GRID.INVOICE.taxpayer_name' | translate }}\\\" alignment=\\\"left\\\"\\r\\n    minWidth=\\\"160\\\"></dxi-column>\\r\\n  <!-- Số TNCN còn được nhận -->\\r\\n  <dxi-column dataField=\\\"amount_personal_income_still_received_format\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.amount_personal_income_still_received' | translate }}\\\" alignment=\\\"right\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column caption=\\\"Thư xác nhận thu nhập\\\" alignment=\\\"center\\\" cellTemplate=\\\"thuXacNhan\\\" [allowSorting]=\\\"false\\\"\\r\\n    dataField=\\\"license_confirm_letters.status\\\" minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\">\\r\\n    <dxo-lookup [dataSource]=\\\"adjustmentTypes\\\" valueExpr=\\\"code\\\" [displayExpr]=\\\"displayFunction\\\" width=\\\"120\\\"></dxo-lookup>\\r\\n  </dxi-column>\\r\\n  <!-- Email| Ghi chú -->\\r\\n  <dxi-column cellTemplate=\\\"actionEmail\\\" caption=\\\"{{ 'GRID.INVOICE.send_email_status' | translate }}\\\" alignment=\\\"center\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Chức năng -->\\r\\n  <dxi-column cellTemplate=\\\"actionIcon\\\" minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <div *dxTemplate=\\\"let d of 'licenseNumber'\\\">\\r\\n    <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailVoucher(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.license_number }}</a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p style=\\\"text-decoration: underline;cursor: pointer;\\\">\\r\\n      {{ d.data.template_code }}</p>\\r\\n    <p style=\\\"text-decoration: underline;cursor: pointer;\\\">\\r\\n      {{ d.data.license_series }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'thuXacNhan'\\\">\\r\\n    <a title=\\\"Xuất lại\\\" (click)=\\\"editTXN(d.data)\\\" href=\\\"javascript:void(0)\\\" style=\\\"color: #474747;\\\"\\r\\n      *ngIf=\\\"d.data.license_confirm_letters.length > 0 && d.data.license_confirm_letters[0].status == 'DA_XUAT'\\\"><i\\r\\n        class=\\\"{{_translate.ICONS.export_inv}}\\\" style=\\\"font-size: 20px; margin-right: 20px ;cursor: pointer;\\\"></i></a>\\r\\n    <a title=\\\"Lập thư XN\\\" (click)=\\\"editTXN(d.data)\\\" href=\\\"javascript:void(0)\\\" style=\\\"color: #474747;\\\"\\r\\n      *ngIf=\\\"d.data.license_confirm_letters.length > 0 && d.data.license_confirm_letters[0].status == 'GHI_TAM'\\\"> <i\\r\\n        class=\\\"{{_translate.ICONS.add_new}}\\\" style=\\\"font-size: 20px; margin-right: 20px ;cursor: pointer;\\\"></i></a>\\r\\n    <a title=\\\"Xem thư XN\\\" class=\\\"xemIcon actionIcon\\\" (click)=\\\"viewTXN(d.data.license_confirm_letters)\\\"\\r\\n      href=\\\"javascript:void(0)\\\" *ngIf=\\\"d.data.license_confirm_letters.length > 0\\\">\\r\\n    </a>\\r\\n    <a title=\\\"Lập thư XN\\\" *ngIf=\\\"d.data.license_confirm_letters.length === 0\\\" (click)=\\\"taoThuXacNhan(d.data)\\\"\\r\\n      style=\\\"color: #474747;\\\" href=\\\"javascript:void(0)\\\"> <i class=\\\"{{_translate.ICONS.add_new}}\\\"\\r\\n        style=\\\"font-size: 20px; cursor: pointer;\\\"></i></a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    {{d.data.license_date}}\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'actionEmail'\\\">\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status !='GIU_SO'\\\" class=\\\"chua-gui-khach-hang gach-chan\\\"\\r\\n      (click)=\\\"sendVoucher(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.un_sent' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status =='GIU_SO'\\\" class=\\\"cho-ky\\\"\\r\\n      (click)=\\\"sendVoucher(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_sign' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'GUI_LOI'\\\" class=\\\"chua-gui-khach-hang gach-chan\\\"\\r\\n      (click)=\\\"sendVoucher(d.data.id)\\\" href=\\\"javascript:void(0)\\\">Gửi mail lỗi</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_GUI'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendVoucher(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_it' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_NHAN'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendVoucher(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.received' | translate }}</a>\\r\\n    <p *ngIf=\\\"!d.data.send_email_status\\\" href=\\\"javascript:void(0)\\\">{{ trangthaihoadon(d.data) }} <a\\r\\n        *ngIf=\\\"trangthaihoadon(d.data) == 'Lỗi ký HD' || trangthaihoadon(d.data) == 'Signed error'\\\" class=\\\"gach-chan\\\"\\r\\n        (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">({{ 'GRID.INVOICE.re_sign' | translate }})</a></p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.view_invoice}}\\\" class=\\\"xemIcon actionIcon\\\" (click)=\\\"view(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.edit}}\\\" class=\\\"suaIcon actionIcon\\\" (click)=\\\"edit(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.delete}}\\\" class=\\\"xoaIcon actionIcon\\\" (click)=\\\"delete(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <div class=\\\"dropdown\\\">\\r\\n      <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" class=\\\"morongIcon actionIcon\\\" (click)=\\\"myFunction(d.data.id)\\\"\\r\\n        href=\\\"javascript:void(0)\\\"></a>\\r\\n      <div [id]=\\\"d.data.id\\\" class=\\\"dropdown-content\\\"\\r\\n        [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n        <a (click)=\\\"copy(d.data)\\\" href=\\\"javascript:void(0)\\\">{{'CONTROLL.BUTTON.copy' | translate}}\\r\\n          <i [class]=\\\"_translate.ICONS.copy\\\"></i></a>\\r\\n        <a (click)=\\\"inChuyenDoi(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.print_conversion' | translate }}\\r\\n            <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n    <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{info.column.caption}} </p>\\r\\n  </div>\\r\\n\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"configs.system_parameter.number_row_per_page\\\"></dxo-paging>\\r\\n  <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 35, 50, 100]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n    [showInfo]=\\\"true\\\" infoText=\\\"{{ _translate.DXO_PAGER.page}}\\\">>\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n<!-- popup -->\\r\\n<app-download-pdf></app-download-pdf>\\r\\n\"","module.exports = \".chua-gui-khach-hang{color:red}.cho-ky{color:#008b8b}.gach-chan{text-decoration:underline}.search-section{padding-bottom:15px}.button-panel{margin-top:30px}.mainmenubtn{background-color:red;color:white;border:none;cursor:pointer;padding:20px;margin-top:20px}.last-drodown{bottom:30px}.small-grid{position:fixed  !important;right:39px !important}::ng-deep #gridContainerVat .dx-cell-focus-disabled{overflow:visible !important}::ng-deep #gridContainerVat .dx-datagrid-rowsview{overflow:visible}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { VoucherService } from '@modules/vouchers/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AuthService, Helper, Library, VPreviewInvService, sEnum, VStringService, SocketService } from '@core/index';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { SignatureOffComponent, SendListVoucherComponent, LogProcessVoucherComponent } from '@shared/index';\r\nimport { ImportVoucherFromExcelComponent } from '../import-voucher-from-excel/import-voucher-from-excel.component';\r\nimport { element } from 'protractor';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport * as moment from 'moment';\r\nimport { String } from 'typescript-string-operations';\r\nimport { SignManyComponent } from '../sign-many/sign-many.component';\r\nimport * as _ from 'lodash';\r\nimport { DownloadPdfComponent } from '@shared/components/download-pdf/download-pdf.component';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @ViewChild(DownloadPdfComponent) downloadPdf: DownloadPdfComponent;\r\n  selectedRows: Array<any> = [];\r\n  pageSize: any;\r\n  selectedItems: Array<any> = [];\r\n  configs: any = {};\r\n  idRow: any = undefined;\r\n  clickCurent: any = undefined;\r\n  dataSource: any;\r\n  _translate: any;\r\n  paramSearch: any;\r\n  extras = [];\r\n  dataInfor: any;\r\n  bsModalRef: BsModalRef;\r\n  bsModalImportRef: BsModalRef;\r\n  bsModalSignRef: BsModalRef;\r\n  ioSignature: Subscription;\r\n  checkSubmit: any;\r\n  templates = [];\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  loaiChungTu: string = '01CTT56';\r\n  tempKiFile = 0;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n  select: any = {};\r\n  invoices = [];\r\n  license: any;\r\n  isExportFailed: boolean = false;\r\n  currentUser: any;\r\n  isLapChungTu: boolean = false;\r\n  textHienThiLuoi: any;\r\n  pageSelect: any;\r\n  isTXN = false;\r\n  adjustmentTypes = [\r\n    { code: 'GHI_TAM', name: 'Chưa xuất' },\r\n    { code: 'DA_XUAT', name: 'Đã xuất' }\r\n  ]\r\n  isViewGhiTam = false;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private voucherService: VoucherService,\r\n    private modalService: BsModalService,\r\n    private modalImportService: BsModalService,\r\n    private socketService: SocketService,\r\n    private vatService: VatService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private spinner: NgxSpinnerService) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.extend,\r\n      items: [\r\n        {\r\n          id: \"NAP_CT_TU_EXCEL\",\r\n          name: this._translate.CONTROLL.BUTTON.import_license_from_excel,\r\n          icon: this._translate.ICONS.excel\r\n        },\r\n\r\n        {\r\n          id: 'SUA',\r\n          name: this._translate.CONTROLL.BUTTON.edit,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n        {\r\n          id: 'XOA',\r\n          name: this._translate.CONTROLL.BUTTON.delete,\r\n          icon: this._translate.ICONS.delete\r\n        },\r\n        {\r\n          id: 'XEM',\r\n          name: this._translate.CONTROLL.BUTTON.view_voucher,\r\n          icon: this._translate.ICONS.view\r\n        },\r\n        {\r\n          id: 'INCHUYENDOI',\r\n          name: this._translate.CONTROLL.BUTTON.print_conversion,\r\n          icon: this._translate.ICONS.print\r\n        },\r\n        {\r\n          id: 'GUI_BEN_MUA',\r\n          name: this._translate.CONTROLL.LABEL.send_voucher,\r\n          icon: this._translate.ICONS.send_email\r\n        },\r\n        {\r\n          id: 'TAI_CT_PDF',\r\n          name: this._translate.CONTROLL.BUTTON.tai_ct_pdf,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: \"TAI_CT_XML\",\r\n          name: this._translate.CONTROLL.BUTTON.tai_ct_xml,\r\n          icon: this._translate.ICONS.xml\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.textHienThiLuoi = \"Không có dữ liệu\";\r\n    this.configs = this.authService.getConfigs();\r\n    this.voucherService.isCopy = false;\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    const listpermissions = this.currentUser.user.permissions.split(',');\r\n    if (this.configs.system_parameter.select_invoice_current_page)\r\n      this.pageSelect = \"page\";\r\n    else\r\n      this.pageSelect = \"allPages\";\r\n    let quyenlapchungtu = listpermissions.filter(p => p === 'lap_chung_tu_khau_tru_thue_tncn')[0];\r\n    if (quyenlapchungtu)\r\n      this.isLapChungTu = true;\r\n    if (!this.isLapChungTu) {\r\n      this.textHienThiLuoi = \"Bạn không có quyền thực hiện chức năng này\";\r\n    }\r\n  }\r\n  selectionChanged(data: any) {\r\n    this.hidenDropdownList();\r\n    this.selectedItems = data.selectedRowsData;\r\n  }\r\n  hidenDropdownList() {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.idRow) {\r\n      document.getElementById(this.idRow).classList.remove('show');\r\n    }\r\n  }\r\n  loadList(params?) {\r\n    this.dataSource = {};\r\n    if (this.isLapChungTu) {\r\n      if (params) {\r\n        this.dataSource.store = this.voucherService.getAll(params);\r\n      } else {\r\n        this.dataSource.store = this.voucherService.getAll();\r\n      }\r\n    }\r\n  }\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadList(e);\r\n  }\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.license_number) {\r\n            e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type === '2' || e.data.adjustment_type === '7' || e.data.adjustment_type === '6') {\r\n        const eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  view(data) {\r\n    if (this.selectedItems.length > 0 || data) {\r\n      const _lst = this.selectedItems.filter(p => p.status === 'DA_XUAT' || p.status === 'GHI_TAM' || p.status === 'KY_LOI');\r\n      if (_lst.length > 0 || data) {\r\n        if (this.selectedItems.length === 1) {\r\n          this.dataInfor = this.selectedItems[0];\r\n        } else {\r\n          this.dataInfor = data;\r\n        }\r\n        let ids = [];\r\n        if (data) {\r\n          ids.push(data.id);\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          let data = this.voucherService.taodulieuXemMau(ids);\r\n          data['configs'] = _.cloneDeep(sEnum.cauhinhxemmau.chungtu);\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_chung_tu\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n  viewTXN(data) {\r\n    this.isTXN = true\r\n    let ids = [];\r\n    data.forEach(item => {\r\n      ids.push(item.id)\r\n    })\r\n    let dulieu: any;\r\n    if (data[0].status == 'GHI_TAM') {\r\n      dulieu = this.voucherService.taodulieuxemtruoctxn(data[0]);\r\n      dulieu['configs'] = _.cloneDeep(sEnum.cauhinhxemmau.thuxacnhan); //clone đối tượng\r\n    }\r\n    else {\r\n      dulieu = this.voucherService.taodulieuxemtxn(ids);\r\n      dulieu['configs'] = _.cloneDeep(sEnum.cauhinhxemmau.thuxacnhan);\r\n      dulieu['configs']['is_view_server'] = true;\r\n    }\r\n    this.vPreviewInvService.xemMau(dulieu);\r\n  }\r\n  async edit(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.thunhapcanhan);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    let rowData: any = null;\r\n    //edit 1 bản ghi\r\n    if (data) {\r\n      if (VStringService._getValueToString(data.status) == sEnum.statusInv.DaXuat)\r\n        Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_voucher, 'error');\r\n      else\r\n        rowData = data;\r\n      if (rowData) {\r\n        if (rowData.license_confirm_letters.length > 0) {\r\n          this.router.navigate([`/system/voucher-tax/${VStringService._getValueToString(rowData.id)}`, { idTXN: rowData.license_confirm_letters[0].id }]);\r\n        } else {\r\n          this.router.navigate([`/system/voucher-tax/${VStringService._getValueToString(rowData.id)}`]);\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (this.selectedItems.length > 0) {\r\n        if(this.selectedItems.find(item => item.status == sEnum.statusInv.DaXuat)) {\r\n          Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_voucher, 'error');\r\n          return;\r\n        }\r\n        let template_id = this.selectedItems[0].template_id;\r\n        let templateTXN_id = null;\r\n        for(let index = 0; index < this.selectedItems.length; index++) {\r\n          if(this.selectedItems[index].template_id != template_id) {\r\n            Library.notify(\"Vui lòng chọn chứng từ và thư xác nhận có cùng mẫu.\", 'error');\r\n            return;\r\n          }\r\n          if(this.selectedItems[index].license_confirm_letters.length > 0) {\r\n            let recordCuoiCung = this.selectedItems[index].license_confirm_letters[this.selectedItems[index].license_confirm_letters.length-1];\r\n            if(templateTXN_id == null) {\r\n              templateTXN_id = recordCuoiCung.template_id;\r\n            }else if(recordCuoiCung.template_id != templateTXN_id) {\r\n              Library.notify(\"Vui lòng chọn chứng từ và thư xác nhận có cùng mẫu.\", 'error');\r\n              return;\r\n            }\r\n          }\r\n        }\r\n        // this.selectedItems.forEach(item => {\r\n\r\n        // })\r\n\r\n        // Mở form nạp excel\r\n        this.openImportForm(this.selectedItems, template_id, templateTXN_id)\r\n      }\r\n      else {\r\n        Library.notify('Vui lòng chọn chứng từ cần sửa.', 'error');\r\n      }\r\n    }\r\n  }\r\n  async editTXN(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.thunhapcanhan);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    this.router.navigate([`/system/voucher-tax/${VStringService._getValueToString(data.id)}`, { isThuXacNhan: true, idTXN: data.license_confirm_letters[0].id }]);\r\n  }\r\n  async delete(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.thunhapcanhan);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.selectedItems.length || data) {\r\n      const status = '';\r\n      let ids = '';\r\n      if (data) {\r\n        ids = data.id;\r\n      } else {\r\n        ids = this.selectedRows.join(',');\r\n      }\r\n      const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          Library.showloading();\r\n          this.voucherService.delete(ids).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n              this.loadList(this.paramSearch);\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => {\r\n          }, () => {\r\n            Library.hideloading();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n  kyHangLoat() {\r\n    let check = this.selectedItems.filter(item => item.status != 'DA_XUAT');\r\n    let checkDaSuat = this.selectedItems.filter(item => item.status == 'DA_XUAT')\r\n    if (check.length > 0 && checkDaSuat.length == 0) {\r\n      // if (this.selectedItems.length > 50) {\r\n      //   Library.notify(this._translate.NOTIFY.only_up_to_25_invoices_can_be_selected_for_sign, 'error');\r\n      //   return false;\r\n      // }\r\n      Library.showloading();\r\n      let ids = [];\r\n      ids = this.selectedRows;\r\n      this.voucherService.getInvoicesWaitSign(ids).subscribe((rs: any) => {\r\n        if (rs.status === 'success') {\r\n          const initialState = {\r\n            licenseList: rs.data.licenses,\r\n            configs: rs.data.configs,\r\n            isHdGTGT: this.loaiChungTu === '01GTKT' ? true : false,\r\n            ids: ids\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SignManyComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(\"Vui lòng chỉ chọn chứng từ ghi tạm hoặc ký lỗi\", 'error');\r\n    }\r\n  }\r\n  guibenmua(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'DA_XUAT') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      if (this.selectedItems.filter(p => p.status === 'DA_XUAT').length === 0) {\r\n        check = false;\r\n      }\r\n    }\r\n\r\n    if (check && (this.selectedItems.length || data)) {\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedItems.filter(p => p.status === 'DA_XUAT').map(p => p.id);\r\n      }\r\n      this.voucherService.getListVoucher(ids).subscribe((rs: any) => {\r\n        if (rs.status === 'success') {\r\n          const initialState = {\r\n            licenseList: rs.data.licenses,\r\n            configs: this.configs,\r\n            ids: ids\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SendListVoucherComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_invoice_selected, 'error');\r\n    }\r\n  }\r\n  taiHDXml() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = [];\r\n        ids = _lst.map(e => e.id);\r\n        Library.showloading();\r\n        let sub = this.voucherService.xuatCTXml(ids).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n          } else {\r\n            Library.notify(rs.message, \"error\");\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.please_choose_voucher_exported, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.please_choose_voucher_exported, 'error');\r\n      return;\r\n    }\r\n  }\r\n  taiHDPdf() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = _lst.map(e => e.id);\r\n        this.downloadPdf.downloadPdf(ids, 'licenses', 'license', false);\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.please_choose_voucher_exported, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.please_choose_voucher_exported, 'error');\r\n      return;\r\n    }\r\n  }\r\n\r\n\r\n  async createLicense() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.thunhapcanhan);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    this.router.navigate(['system/voucher-tax/create']);\r\n  }\r\n\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'KY_SO') {\r\n      this.kyHangLoat();\r\n    } else if (e.itemData.id === 'SUA') {\r\n      this.edit(null);\r\n    } else if (e.itemData.id === 'XOA') {\r\n      this.delete(null);\r\n    } else if (e.itemData.id === 'XEM') {\r\n      this.view(null);\r\n    } else if (e.itemData.id === 'GUI_BEN_MUA') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'LIST_INVOICE_BUY') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'DETAILS_OF_EACH_GOODS_AND_SERVICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'ADD_MULTIPLE_INVOICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id == \"TAI_CT_XML\") {\r\n      this.taiHDXml();\r\n    } else if (e.itemData.id == \"TAI_CT_PDF\") {\r\n      this.taiHDPdf();\r\n    } else if (e.itemData.id == \"NAP_CT_TU_EXCEL\") {\r\n      this.napHDTuExcelDt();\r\n    } else if (e.itemData.id === 'INCHUYENDOI') {\r\n      this.inChuyenDoi(null);\r\n    }\r\n  }\r\n  sendVoucher(id) {\r\n    Library.showloading();\r\n    let ids = [];\r\n    ids.push(id);\r\n    let sub = this.voucherService.layDanhSachChungTu(ids).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        const initialState = {\r\n          licenses: rs.data.licenses,\r\n        };\r\n        this.bsModalRef = this.modalService.show(LogProcessVoucherComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.license_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  async editNotSelect(row) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.thunhapcanhan);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (row.status === 'DA_XUAT') {\r\n      Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_voucher, 'error');\r\n    } else {\r\n      this.router.navigate([`/system/voucher-tax/${row.id}`]);\r\n    }\r\n  }\r\n  viewDetailVoucher(row) {\r\n    if (row.license_confirm_letters.length > 0) {\r\n      this.router.navigate([`/system/voucher-tax/${row.id}`, { idTXN: row.license_confirm_letters[0].id }]);\r\n    } else {\r\n      this.router.navigate([`/system/voucher-tax/${row.id}`]);\r\n    }\r\n  }\r\n  async taoThuXacNhan(row) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.thunhapcanhan);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    this.router.navigate([`/system/voucher-tax/${row.id}`, { isThuXacNhan: true }]);\r\n  }\r\n\r\n  async copy(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.thunhapcanhan);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    const row = data ? data : this.selectedItems[0];\r\n    let sub = this.voucherService.show(row.id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        if (rs.data.license) {\r\n          rs.data.license.id = null;\r\n          rs.data.license.origin_id = null;\r\n          rs.data.license.status = null;\r\n          rs.data.license.license_number = null;\r\n          rs.data.license.destroy_date = null;\r\n          rs.data.license.destroy_reason = null;\r\n          rs.data.license.adjustment_type = 1;\r\n          rs.data.license.license_sign_date = null;\r\n          rs.data.license.send_email_status = null;\r\n          rs.data.license.verify_code = null;\r\n          if (rs.data.license.license_options && rs.data.license.license_options.length > 0) {\r\n            rs.data.license.license_options.forEach(item => {\r\n              delete item['id'];\r\n              delete item['license_id'];\r\n            });\r\n          }\r\n          this.voucherService.data = rs.data.license;\r\n          this.voucherService.isCopy = true;\r\n        }\r\n        if (this.voucherService.data) {\r\n          this.router.navigate(['system/voucher-tax/create']);\r\n        }\r\n        // if (this.loaiHoaDon === '01GTKT') {\r\n        //   this.router.navigate(['system/vat-invoice/create']);\r\n        // } else {\r\n        //   if (this.loaiHoaDon == sEnum.loaihoadon.KPTQ07)\r\n        //     this.router.navigate(['system/non-tariff-invoice/create']);\r\n        //   else if (this.loaiHoaDon == sEnum.loaihoadon.GTTT02)\r\n        //     this.router.navigate(['system/sale-invoice/create']);\r\n        // }\r\n      }\r\n    });\r\n  }\r\n  /* Xử lý sự kiện click phần mở rộng của từng hóa đơn*/\r\n  myFunction(id) {\r\n    if (this.clickCurent !== '' && this.clickCurent !== id) {\r\n      let valueCurrent = document.getElementById(this.clickCurent);\r\n      if (!valueCurrent)\r\n        document.getElementById(id).classList.toggle('show');\r\n      else {\r\n        document.getElementById(this.clickCurent).classList.remove('show');\r\n        document.getElementById(id).classList.toggle('show');\r\n      }\r\n    }\r\n    else\r\n      document.getElementById(id).classList.toggle('show');\r\n    this.clickCurent = id;\r\n  }\r\n  openImportForm(data, template_id, templatesTXN_id) {\r\n    Library.showloading();\r\n    if (data && data.length > 0) {\r\n      this.voucherService.getEditImportVoucher(_.map(data, 'id'), this.loaiChungTu).subscribe((res: any) => {\r\n        this.license = res[0].data.licenses\r\n        this.templates = Helper.convertTemplatesToVoucherResolver(res[1]);\r\n        const initialState = {\r\n          templates: this.templates.filter(item => item.template_type !== 'THU_XAC_NHAN_THU_NHAP'),\r\n          templatesTXN: this.templates.filter(item => item.template_type == 'THU_XAC_NHAN_THU_NHAP'),\r\n          licensesImport: this.license,\r\n          template_id: template_id,\r\n          templatesTXN_id: templatesTXN_id\r\n        };\r\n        this.bsModalImportRef = this.modalImportService.show(\r\n          ImportVoucherFromExcelComponent,\r\n          {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-width',\r\n            initialState\r\n          }\r\n        );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          this.dataGrid.instance.deselectAll()\r\n          this.loadList(this.paramSearch);\r\n          subModal.unsubscribe();\r\n        });\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n  async napHDTuExcelDt() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.thunhapcanhan);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    Library.showloading();\r\n    this.voucherService.getImportVoucher(this.loaiChungTu).subscribe((res: any) => {\r\n      // this.select.products = res[5].data.products;\r\n      if (res.status == 'success') {\r\n        this.templates = Helper.convertTemplatesToVoucherResolver(res);\r\n        const initialState = {\r\n          templates: this.templates.filter(item => item.template_type !== 'THU_XAC_NHAN_THU_NHAP'),\r\n          templatesTXN: this.templates.filter(item => item.template_type == 'THU_XAC_NHAN_THU_NHAP'),\r\n          select: this.select,\r\n        };\r\n        this.bsModalImportRef = this.modalImportService.show(\r\n          ImportVoucherFromExcelComponent,\r\n          {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-width',\r\n            initialState\r\n          }\r\n        );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          this.loadList(this.paramSearch);\r\n          subModal.unsubscribe();\r\n        });\r\n        Library.hideloading();\r\n      }\r\n    });\r\n  }\r\n  onContentReady(e) {\r\n    if (e) {\r\n      const dataSource = this.dataGrid.instance.getDataSource();\r\n      this.pageSize = dataSource ? dataSource.items().length : 0;\r\n    }\r\n  }\r\n\r\n  // convertKyHieu(license_series, license_date) {\r\n  //   let year = \"\";\r\n  //   if (VStringService._getValueToString(license_date) != \"\")\r\n  //     year = VStringService._getValueToString(license_date).substring(4, 2);\r\n  //   else {\r\n  //     let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n  //     year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n  //   }\r\n  //   return license_series.replace(license_series.substring(7, 5), year);\r\n  // }\r\n  inChuyenDoi(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.selectedItems.length || data) {\r\n      const _lst = this.selectedItems.filter(p => p.status == 'DA_XUAT');\r\n      if (_lst.length > 0 || data) {\r\n        let ids = [];\r\n        if (data) {\r\n          if (data.status === 'DA_XUAT') {\r\n            ids.push(data.id);\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_print_convert, 'error');\r\n            return;\r\n          }\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          const data = this.voucherService.taodulieuInMau(ids, false);\r\n          data['configs'] = sEnum.cauhinhxemmau.chungtu;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.in_chuyen_doi_tncn\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  displayFunction = (item) => {\r\n    if (!item) {\r\n      return 'Tất cả'; // Thay thế từ \"All\" bằng \"Tất cả\"\r\n    }\r\n    return item.name;\r\n  }\r\n  calculateFilterExpression(filterValue, selectedFilterOperation) {\r\n    selectedFilterOperation = \"contains\"; //Helper.multilfilterColumn;\r\n    return [[\"template_code_temp\", selectedFilterOperation || '=', filterValue], 'or', [\"license_series_temp\", selectedFilterOperation || '=', filterValue]];\r\n  }\r\n\r\n}\r\n","module.exports = \"<p>\\r\\n  send-mail works!\\r\\n</p>\\r\\n\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-send-mail',\r\n  templateUrl: './send-mail.component.html',\r\n  styleUrls: ['./send-mail.component.scss']\r\n})\r\nexport class SendMailComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","module.exports = \"<p>\\r\\n  send-vouchers works!\\r\\n</p>\\r\\n\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-send-vouchers',\r\n  templateUrl: './send-vouchers.component.html',\r\n  styleUrls: ['./send-vouchers.component.scss']\r\n})\r\nexport class SendVouchersComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{ 'THONG_TIN.danh_sach_cho_ky_so' | translate }}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"dong()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid id=\\\"gridContainer\\\" [dataSource]=\\\"licenseList\\\" [showRowLines]=\\\"true\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n    [columnMinWidth]=\\\"50\\\" [columnResizingMode]=\\\"true\\\" [columnAutoWidth]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\">\\r\\n\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"license_number\\\"\\r\\n      caption=\\\"{{ 'CONTROLL.LABEL.vehicle_license_number' | translate }}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template_code\\\" caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}\\\" alignment=\\\"center\\\">\\r\\n    </dxi-column>\\r\\n    <dxi-column dataField=\\\"license_series\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\" alignment=\\\"center\\\"\\r\\n      [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"license_date\\\" caption=\\\"{{ 'CONTROLL.LABEL.invoice_voucher' | translate }}\\\"\\r\\n      dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"taxpayers_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n      alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"id_card\\\" caption=\\\"{{ 'GRID.INVOICE.id_card' | translate }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"taxpayers_name\\\" caption=\\\"{{ 'GRID.INVOICE.taxpayer_name' | translate }}\\\" alignment=\\\"left\\\">\\r\\n    </dxi-column>\\r\\n    <!-- <dxi-column dataField=\\\"amount_personal_income_still_received\\\"\\r\\n      caption=\\\"{{ 'GRID.INVOICE.amount_personal_income_still_received' | translate }}\\\" dataType=\\\"number\\\"\\r\\n      format=\\\"0,###.##\\\" alignment=\\\"right\\\" minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\">\\r\\n    </dxi-column> -->\\r\\n    <dxi-column cellTemplate=\\\"statusCT\\\" caption=\\\"{{ 'THONG_TIN.trang_thai_chung_tu' | translate }}\\\" alignment=\\\"center\\\">\\r\\n    </dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"statusTXN\\\" caption=\\\"{{ 'THONG_TIN.trang_thai_thu_xac_nhan' | translate }}\\\" alignment=\\\"center\\\">\\r\\n    </dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"cellCheckbox\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n    \\r\\n    </dxi-column>\\r\\n    <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n      <p>{{ 'THONG_TIN.ky_so_txn' | translate }}</p>\\r\\n      <input class=\\\"all-checkbox\\\" type=\\\"checkbox\\\" (change)=\\\"changeCheckAll($event)\\\" [ngModel] = \\\"checkAll\\\" />\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'cellCheckbox'\\\" class=\\\"contain-checkbox\\\">\\r\\n      <input *ngIf=\\\"kiemtraTXN(d.data)\\\" class=\\\"item-checkbox\\\" type=\\\"checkbox\\\" [(ngModel)] = \\\"d.data.checkTXN\\\" (change)=\\\"changeCheckItem($event)\\\"/>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.license_number\\r\\n        }}<span *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template.template_code }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n      <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name || 'Hóa đơn chờ ký' }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'statusCT'\\\">\\r\\n      <p style=\\\"color:green;\\\" *ngIf=\\\"d.data.status =='DA_XUAT'\\\">Đã ký</p>\\r\\n      <p style=\\\"color: red;\\\" *ngIf=\\\"d.data.status =='GHI_TAM' && d.data.license_number\\\">Ký lỗi</p>\\r\\n      <p style=\\\"color: rgb(222, 169, 96);\\\" *ngIf=\\\"d.data.status =='GHI_TAM' && !d.data.license_number\\\">Ghi tạm</p>\\r\\n      <p style=\\\"color: red;\\\" *ngIf=\\\"d.data.status !='DA_XUAT' && d.data.status !='GHI_TAM'\\\">{{ d.data.status }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'statusTXN'\\\">\\r\\n      <div *ngIf=\\\"kiemtraTXN(d.data)\\\">\\r\\n        <p style=\\\"color:green;\\\" *ngIf=\\\"d.data.license_confirm_letters.length > 0 && d.data.license_confirm_letters[0].status =='DA_XUAT'\\\">Đã ký</p>\\r\\n        <p style=\\\"color: rgb(222, 169, 96);\\\" *ngIf=\\\"d.data.license_confirm_letters.length > 0 && d.data.license_confirm_letters[0].status =='GHI_TAM'\\\">Ghi tạm</p>\\r\\n        <p style=\\\"color: red;\\\" *ngIf=\\\"d.data.license_confirm_letters.length > 0 && d.data.license_confirm_letters[0].status !='DA_XUAT' && d.data.license_confirm_letters[0].status !='GHI_TAM'\\\">{{ d.data.license_confirm_letters[0].status }}</p>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <div style=\\\"width: 89%\\\">\\r\\n    <label class=\\\"custom-control-label label-block\\\" for=\\\"customRadio212\\\">{{reportCountERR}}</label>\\r\\n    <label class=\\\"custom-control-label label-block\\\" for=\\\"customRadio213\\\">{{reportCountTXN}}</label>\\r\\n  </div>\\r\\n\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.sign}}\\\" icon=\\\"{{_translate.ICONS.pencil}}\\\" *ngIf=\\\"!daXong\\\"\\r\\n    type=\\\"default\\\" (click)=\\\"kyHangLoat()\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\"\\r\\n    (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".custom-control-label{margin-top:4px;color:red;font-weight:800;font-family:Times New Roman}.all-checkbox{margin-top:5px;height:16px;width:16px}.contain-checkbox{display:flex;align-items:center;justify-content:center}.item-checkbox{height:16px;width:16px}.label-block{display:block}\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as moment from 'moment';\r\n\r\nimport { Helper, Library, SocketService, AuthService, VStringService, VPreviewInvService, sEnum } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { VoucherService } from '@modules/vouchers/shared';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n@Component({\r\n  selector: 'app-sign-many',\r\n  templateUrl: './sign-many.component.html',\r\n  styleUrls: ['./sign-many.component.scss']\r\n})\r\nexport class SignManyComponent implements OnInit {\r\n\r\n  licenses: any;\r\n  configs: any;\r\n  ioSignature: any;\r\n  licenseList: any;\r\n  licenseIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  _translate: any;\r\n  nodeSign: any;\r\n  isExportFailed: boolean = false;\r\n  reportCountERR: any = \"\";\r\n  reportCountTXN: any = \"\";\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  isHdGTGT: any;\r\n  currentUser: any;\r\n  taxCode: any;\r\n  ids: any;\r\n  checkAll: boolean = false;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  letter: any;\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private spinner: NgxSpinnerService,\r\n    private voucherService: VoucherService,\r\n    private vPreviewInvService: ViewInvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (this.currentUser.account) {\r\n      this.taxCode = this.currentUser.account.tax_code;\r\n    }\r\n    if (this.infoDangKy) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n        this.isTT78 = true;\r\n    }\r\n    this.convertData();\r\n    this.connectWebsocket();\r\n  }\r\n\r\n  convertData() {\r\n    this.licenseList = this.licenseList.sort((itemA, itemB) => {\r\n      return new Date(itemA.license_date).getTime() - new Date(itemB.license_date).getTime();\r\n    });\r\n    this.licenseList.forEach(item => {\r\n      item.license_date = moment(item.license_date).format('YYYY-MM-DD HH:mm:ss');\r\n      delete item.updated_at;\r\n      delete item.decpoint_is_dot;\r\n      delete item.money_decimal_format;\r\n      item[\"checkTXN\"] = false;\r\n    });\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.daXong = true;\r\n      this.totalInvoice = 0;\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          let i = this.licenseIndex;\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content, this.licenses[i]);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.licenses[i].issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat(this.licenses[i]);\r\n          } else if (data.Data.Name === 'thu_xac_nhan.pdf') {\r\n            this.goiApiXuatHoaDonThu(data.Data.Content);\r\n          } else {\r\n            this.licenses[i].invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.licenses[i].invoice_files.length) {\r\n              this.xuLiApiKhiXuat(this.licenses[i]);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        const popUp = window.open('about:blank', 'name', 'width=200, height=100');\r\n        if (popUp == null || typeof (popUp) == 'undefined') {\r\n        }\r\n        else\r\n          popUp.close();\r\n        this.spinner.hide();\r\n        if (data.Description == \"\") {\r\n          this.showPopup = false;\r\n          this.errorImport = true;\r\n        }\r\n        else {\r\n          if (data.Data.Name === 'thu_xac_nhan.pdf')\r\n            this.licenseList[this.licenseIndex].license_confirm_letters[0].status = data.Description;\r\n          else\r\n            this.licenseList[this.licenseIndex].status = data.Description;\r\n          this.isExportFailed = true;\r\n          this.continuteExportInvoice(false);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  continuteExportInvoice(isSuccess) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.valueProgress += percentComplete;\r\n    if (this.licenseIndex == this.totalInvoice - 1) {\r\n      this.reportCountERR = \"\";\r\n      this.reportCountTXN = \"\";\r\n      if (!this.isExportFailed && isSuccess)\r\n        Library.notify(this._translate.NOTIFY.sign_success, 'success', 5000);\r\n      else {\r\n        let lstInvoiceERR = this.licenseList.filter(p => p.status != \"DA_XUAT\" && p.status != \"GHI_TAM\");\r\n        this.reportCountERR = \"Có \" + lstInvoiceERR.length + \" chứng từ ký lỗi. Đề nghị kiểm tra lại!\";\r\n        Library.notify(\"Có \" + lstInvoiceERR.length + \" chứng từ ký lỗi\", 'success', 5000);\r\n      }\r\n      this.daXong = true;\r\n      setTimeout(() => {\r\n        this.showPopup = false;\r\n        // this.voucherService.getInvoicesWaitSign(this.ids).subscribe(res => {\r\n        //   this.licenseList = res.data.licenses\r\n        // })\r\n      }, 300);\r\n      try {\r\n        let dsTxnErr = this.licenseList.filter(p => p['checkTXN'] && p.license_confirm_letters[0].status != 'DA_XUAT' && p.license_confirm_letters[0].status != 'GHI_TAM');\r\n        if (dsTxnErr && dsTxnErr.length > 0)\r\n          this.reportCountTXN = \"Có \" + dsTxnErr.length + \" thư xác nhận ký lỗi. Đề nghị kiểm tra lại!\";\r\n      }\r\n      catch (error) {\r\n\r\n      }\r\n    }\r\n    else if (this.licenseIndex < this.totalInvoice - 1) {\r\n      this.licenseIndex++;\r\n      this.xuatHoaDon();\r\n    }\r\n  }\r\n  xuLyKiFile(xmlLicense, signDate) {\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlLicense, 'hoadon.xml', this.nodeSign, signDate, 'LicenseData', '', true, this.taxCode, true);\r\n  }\r\n\r\n  xuLiApiKhiXuat(license) {\r\n    let tempTemplate = license.template;\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    let licenseClone = Object.assign({}, license);\r\n    delete licenseClone.checkTXN;\r\n    delete licenseClone.template;\r\n    delete licenseClone.license_confirm_letters;\r\n    delete licenseClone.license_number_tempt;\r\n    let sub = this.voucherService.edit(licenseClone.id, licenseClone, true).subscribe(rs => {\r\n      license.template = tempTemplate;\r\n      if (rs.status == 'success') {\r\n        license.license_date = moment(rs.data.license_date).format('YYYY-MM-DD HH:mm:ss');\r\n        this.licenseList[this.licenseIndex][\"license_number_tempt\"] = rs.data.license_number;\r\n        isNewXml = rs.data.is_new_xml;\r\n        this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n        xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n        if (xmlInvoice != \"\") {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            this.goiApiXuatHoaDon(xmlInvoice, license);\r\n          } else {\r\n            this.xuLyKiFile(xmlInvoice, license.invoice_date);\r\n          }\r\n        }\r\n      } else {\r\n        if (this.licenseList[this.licenseIndex].status != 'DA_XUAT')\r\n          this.licenseList[this.licenseIndex].status = rs.message;\r\n        this.isExportFailed = true;\r\n        this.continuteExportInvoice(false);\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n\r\n  }\r\n\r\n  async goiApiXuatHoaDon(xml_string, license) {\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    this.subXuatHoaDon = this.voucherService.xuatChungTu({\r\n      id: license.id,\r\n      xml_string: xml_string,\r\n      license_files: license.license_files\r\n    }).subscribe(async rs => {\r\n      let isSuccess = false;\r\n      this.ganXong = true;\r\n      this.tempKiFile = 0;\r\n      let isKyTXN = false;\r\n      this.letter = null;\r\n      if (rs.status == 'success') {\r\n        this.licenseList[this.licenseIndex].license_number = this.licenseList[this.licenseIndex][\"license_number_tempt\"];\r\n        this.licenseList[this.licenseIndex].status = 'DA_XUAT';\r\n        isSuccess = true;\r\n        if (license[\"checkTXN\"])\r\n          isKyTXN = true;\r\n      } else {\r\n        if (this.licenseList[this.licenseIndex].status != 'DA_XUAT')\r\n          this.licenseList[this.licenseIndex].status = rs.message;\r\n        this.isExportFailed = true;\r\n      }\r\n      if (isKyTXN) {\r\n        this.letter = license.license_confirm_letters[0];\r\n        let isTaoThanhCong = await this.taoThuXacNhan();\r\n        if (isTaoThanhCong)\r\n          this.kyThuXacNhan();\r\n        else\r\n          this.continuteExportInvoice(isSuccess);\r\n      }\r\n      else\r\n        this.continuteExportInvoice(isSuccess);\r\n    }, err => { }, () => {\r\n      // Library.hideloading();\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n  async taoThuXacNhan() {\r\n    return await this.voucherService.updateGhiTamThuXacNhan(this.letter, this.letter.id).toPromise().then(rs => {\r\n      if (rs.status === 'success') {\r\n        this.letter['file_content'] = rs.data.pdf_file.file_content;\r\n        this.letter['sign_date'] = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n      err => { return false; }\r\n    ).catch((error) => {\r\n      return false;\r\n    });\r\n  }\r\n  kyThuXacNhan() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.goiApiXuatHoaDonThu(this.letter['file_content']);\r\n    } else {\r\n      this.xuLyKiFileThu(this.letter['file_content'], this.letter['sign_date']);\r\n    }\r\n  }\r\n  goiApiXuatHoaDonThu(data) {\r\n    const license_confirm_letter = {\r\n      id: this.letter.id,\r\n      pdf_file: {\r\n        file_name: \"thu_xac_nhan.pdf\",\r\n        file_content: data\r\n      }\r\n    }\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    const sub = this.voucherService.xuatTXN(license_confirm_letter).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.licenseList[this.licenseIndex].license_confirm_letters[0].status = 'DA_XUAT';\r\n      } else {\r\n        this.licenseList[this.licenseIndex].license_confirm_letters[0].status = rs.message;\r\n      }\r\n      this.continuteExportInvoice(true);\r\n    }, err => {\r\n      this.continuteExportInvoice(true);\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xuLyKiFileThu(xmlInvoice, signDate?) {\r\n    // this.connectWebsocketThu();\r\n    let nodeSign = '//CTu/DSCKS/TCTTNhap';\r\n    this.connectWebsocket();\r\n    if (this.socketService.checkNull()) {\r\n      this.socketService.connect();\r\n    }\r\n    this.socketService.kiFile(() => this.connectWebsocket(), xmlInvoice, 'thu_xac_nhan.pdf', 'pdf', nodeSign, signDate, 'ALIGN_LEFT', 'PAGE_LAST', null, this.taxCode);\r\n  }\r\n  xuatHoaDon() {\r\n    let i = this.licenseIndex;\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat(this.licenses[i]);\r\n    } else {\r\n      if (this.licenses[i].license_files && this.licenses[i].license_files.length) {\r\n        this.licenses[i].license_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.licenses[i].license_date);\r\n        });\r\n      }\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", '', true, this.taxCode, true);\r\n      }\r\n    }\r\n  }\r\n\r\n  kyHangLoat() {\r\n    Library.confirmVA(this._translate.THONG_TIN.dong_y_ky_so, this._translate.NOTIFY.notify, () => {\r\n      this.showPopup = true;\r\n      this.licenses = JSON.parse(JSON.stringify(this.licenseList));\r\n      this.totalInvoice = this.licenses.length;\r\n      this.licenseIndex = 0;\r\n      this.tempKiFile = 0;\r\n      this.xuatHoaDon();\r\n    });\r\n  }\r\n\r\n  dong() {\r\n    if (this.ganXong) {\r\n      this.bsModalRef.content.successSaveItem = \"success\";\r\n    }\r\n    this.bsModalRef.hide();\r\n  }\r\n\r\n  viewDetailInvoice(data) {\r\n    if (data) {\r\n      const ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      }\r\n      let dulieu = this.voucherService.taodulieuXemMau(ids);\r\n      dulieu['configs'] = sEnum.cauhinhxemmau.chungtu;\r\n      this.vPreviewInvService.xemMau(dulieu);\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  kiemtraTXN(data) {\r\n    if (data.license_confirm_letters && data.license_confirm_letters.length > 0)\r\n      return true;\r\n    return false;\r\n  }\r\n  changeCheckAll($event) {\r\n    this.checkAll = $event.target.checked;\r\n    this.licenseList.forEach(item => {\r\n      if (this.kiemtraTXN(item)) {\r\n        item[\"checkTXN\"] = $event.target.checked;\r\n      }\r\n    });\r\n  }\r\n  changeCheckItem($event) {\r\n    if (!$event.target.checked && this.checkAll)\r\n      this.checkAll = false;\r\n    else if ($event.target.checked && !this.checkAll) {\r\n      let itemCheck = this.licenseList.some(p => this.kiemtraTXN(p) && !p[\"checkTXN\"]);\r\n      if (!itemCheck)\r\n        this.checkAll = true;\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{lblTitle}}</h4>\\r\\n  <div>\\r\\n    <div *ngFor=\\\"let item of items | paginate: { itemsPerPage: 1, currentPage: p }; let i = index\\\">\\r\\n    </div>\\r\\n    <pagination-controls style=\\\"width: 50%;\\\" (pageChange)=\\\"getPage($event)\\\"></pagination-controls>\\r\\n  </div>\\r\\n  <div style=\\\"display: flex; align-items: center;\\\">\\r\\n    <dx-button disableDoubleClick *ngIf=\\\"isXuatHD\\\" text=\\\"Đồng ý\\\" icon=\\\"{{_translate.ICONS.save}}\\\" type=\\\"default\\\" (click)=\\\"dongy()\\\">\\r\\n    </dx-button>\\r\\n    <i class=\\\"fa fa-times\\\" style=\\\"font-size:25px; cursor: pointer;\\\" (click)=\\\"dong()\\\"></i>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <div class=\\\"body-content\\\">\\r\\n    <div *ngIf=\\\"isXuatHD\\\" class=\\\"canh-bao\\\">\\r\\n      <p style=\\\"font-weight: 600;\\\">\\r\\n        <span class=\\\"nhap-nhay\\\"></span>\\r\\n        <span style=\\\"font-size: 17px;\\\">Lưu ý: </span>\\r\\n        Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên\\r\\n        hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.\\r\\n      </p>\\r\\n    </div>\\r\\n    <div style=\\\"display: flex; width: 100%;\\\">\\r\\n      <iframe height=\\\"{{heightT}}\\\" id=\\\"preview-iframe\\\"></iframe>\\r\\n      <div *ngIf=\\\"isXuatHD\\\" class=\\\"thong-tin-hoa-don\\\" >\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\" font-weight: 600;\\\">Ngày chứng từ : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">{{ngayHD}}</p>\\r\\n        </div>\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\"font-weight: 600;\\\">Trạng thái : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">Xuất và ký</p>\\r\\n        </div>\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\"font-weight: 600;\\\">Tổng tiền : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">{{total_payment}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".modal-header{display:flex;justify-content:space-between;align-items:center}.pagination{display:flex}.pagination a{color:black;float:left;padding:8px 16px;text-decoration:none}::ng-deep .body-content{height:100%}.modal-body .body-content{display:flex;justify-content:center;align-items:center;flex-direction:column}.nhap-nhay{background:red;padding:0.5px 9px;margin-right:5px;border-radius:57%;-webkit-animation:flicker 1s infinite}.ht-xuat{width:25%;padding:15px;background:#ffffff;box-shadow:rgba(0,0,0,0.35) 0px 5px 15px}@-webkit-keyframes flicker{0%{opacity:0}9%{opacity:0}10%{opacity:.5}13%{opacity:0}20%{opacity:.5}25%{opacity:1}}.example{padding:20px}input[type=button]{padding:5px 10px;margin:10px 5px;border-radius:5px;cursor:pointer;background:#ddd;border:1px solid #ccc}input[type=button]:hover{background:#ccc}.confirm{display:none}.confirm>div:first-of-type{position:fixed;width:100%;height:100%;background:rgba(0,0,0,0.5);top:0px;left:0px}.confirm>div:last-of-type{padding:10px 20px;background:white;position:absolute;width:auto;height:auto;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border-radius:5px;border:1px solid #333}.confirm>div:last-of-type div:first-of-type{min-width:150px;padding:10px}.confirm>div:last-of-type div:last-of-type{text-align:right}.canh-bao{margin-bottom:10px}#preview-iframe{width:calc(100% - 20px)}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { VStringService, SocketService, AuthService, sEnum, Library, Helper, VChanggeMoneyService, VPreviewInvService } from '@core/index';\r\ndeclare var $: any;\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { VoucherService } from '@modules/vouchers/shared';\r\n\r\n@Component({\r\n  selector: 'app-view-invoice',\r\n  templateUrl: './view-invoice.component.html',\r\n  styleUrls: ['./view-invoice.component.scss']\r\n})\r\nexport class ViewVoucherComponent implements OnInit {\r\n  bsModalSignRef: BsModalRef;\r\n  items: any;\r\n  key: string = 'name';\r\n  reverse: boolean = false;\r\n  objectUrl: any;\r\n  mainTest: any;\r\n  _language: string;\r\n  _translate: any;\r\n  isXuatHD: any;\r\n  ngayHD: any;\r\n  hinhthucxuat: any;\r\n  configs: any;\r\n  ioSignature: Subscription;\r\n  lblTitle: any;\r\n  isTaiHD: boolean = false;\r\n  invoices = [];\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  isExportFailed: boolean = false;\r\n  total_payment:any;\r\n  sort(key) {\r\n    this.key = key;\r\n    this.reverse = !this.reverse;\r\n  }\r\n  p: number = 1;\r\n  widthT: any;\r\n  heightT: any;\r\n  typeAction: any;// XEM_HOA_DON;IN_CHUYEN_DOI;NAP_EXCEL\r\n  ids: any;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    public bsModal: BsModalRef,\r\n    private voucherService: VoucherService,\r\n    private router: Router,\r\n    public translate: TranslateService,\r\n    private authService: AuthService,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n    this.heightT = screen.availHeight - 195;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.connectWebsocket();\r\n    this.configs = this.authService.getConfigs();\r\n    switch (this.typeAction) {\r\n      case \"NAP_EXCEL\":\r\n        this.lblTitle = \"BẢN DỰ THẢO CHỨNG TỪ ĐIỆN TỬ\";\r\n        this.isTaiHD = false;\r\n        break;\r\n      case \"XEM_HOA_DON\":\r\n        this.lblTitle = \"XEM CHỨNG TỪ ĐIỆN TỬ\";\r\n        this.isTaiHD = true;\r\n        break;\r\n    }\r\n    this.getPage(1, 'desc', 'created');\r\n  }\r\n  viewTransport(item) {\r\n    let id = item.id;\r\n  }\r\n\r\n  getPage(page: number, sort: string = 'desc', order: string = 'created') {\r\n    switch (this.typeAction) {\r\n      case \"NAP_EXCEL\":\r\n        this.action_napexcel(page);\r\n        break;\r\n      case \"XEM_HOA_DON\":\r\n        this.action_xemhoadon(page);\r\n        break;\r\n    }\r\n  }\r\n  action_napexcel(page) {\r\n    this.p = page;\r\n    let oTransport: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        oTransport = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let licensesArr = [];\r\n    licensesArr.push(oTransport);\r\n    let data = {\r\n      licenses: licensesArr\r\n    }\r\n    let sub = this.voucherService.previewVoucherImport(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.total_payment = rs.data.license.total_payment\r\n          this.objectUrl = rs.data.license.pdf_file;\r\n          this.ngayHD = moment(rs.data.license.license_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          this.total_payment = rs.data.license.total_payment\r\n          let license_date = rs.data.license.license_date;\r\n          let json_data = rs.data.license.json_data;\r\n          let appCode = \"VOUCHERS\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, license_date);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n        this.spinner.hide();\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  action_xemhoadon(page) {\r\n    this.p = page;\r\n    let id: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        id = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let arrId = [];\r\n    arrId.push(id);\r\n    let sub = this.voucherService.xemChungTuImport(arrId).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.objectUrl = rs.data.license.pdf_file;\r\n          this.ngayHD = moment(rs.data.license.license_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          let license_date = rs.data.license.license_date;\r\n          let json_data = rs.data.license.json_data;\r\n          let appCode = \"REPX\";\r\n          if (rs.data.license.is_html_template)\r\n            appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, license_date);\r\n        }\r\n      } else {\r\n        this.spinner.hide();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  \r\n  dong() {\r\n    // this.router.navigate(['/system/transport-license']);\r\n    this.bsModal.hide()\r\n  }\r\n  dongy() {\r\n    this.bsModal.content.successSaveItem = 'DONG_Y';\r\n    this.bsModal.hide();\r\n  }\r\n  /* Kết nối đến socket */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_viewInvoice') {\r\n        if (data.Status == \"success\")\r\n          this.viewInvoice(data.Data.Content, data.Data.typeView, data.Data.hinhthucxuat, data.Data.license_date);\r\n        else if (data.Status == \"error\") {\r\n          this.spinner.hide();\r\n          Library.notify(data.Description, 'error');\r\n        }\r\n      }\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n  }\r\n  viewInvoice(content, typeView, hinhthucxuat, license_date) {\r\n    this.objectUrl = content;\r\n    this.ngayHD = moment(license_date).format('DD/MM/YYYY');\r\n    this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n    let iframe = document.getElementById('preview-iframe');\r\n    iframe.setAttribute(\"src\", this.mainTest);\r\n    this.spinner.hide();\r\n  }\r\n  \r\n  continuteExportInvoice(isSuccess) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.valueProgress += percentComplete;\r\n    if (this.invoiceIndex == this.totalInvoice - 1) {\r\n      if (!this.isExportFailed && isSuccess)\r\n        Library.notify(\"Tải hóa đơn thành công\", 'success', 5000);\r\n      else {\r\n        // Danh sách lỗi\r\n      }\r\n      this.daXong = true;\r\n      setTimeout(() => {\r\n        this.showPopup = false;\r\n      }, 300);\r\n    }\r\n    else if (this.invoiceIndex < this.totalInvoice - 1) {\r\n      this.invoiceIndex++;\r\n    }\r\n  }\r\n  iterator(a, take, skip) {\r\n    let current = skip * 10;\r\n    let l = a.length;\r\n    let end = current + take;\r\n    let part = a.slice(current, end);\r\n    current = end < l ? end : 0;\r\n    return part;\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình tải hóa đơn sẽ dừng lại nếu bạn đóng cửa sổ này?\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"list-header row\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <div id=\\\"tab-invoice\\\">\\r\\n      <dx-tabs [dataSource]=\\\"tabs\\\" [(selectedIndex)]=\\\"selectedIndex\\\" (onItemClick)=\\\"selectTab($event)\\\">\\r\\n      </dx-tabs>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"row\\\" style=\\\"background-color: white;\\\" *ngIf=\\\"isVoucher\\\">\\r\\n  <!-- <div class=\\\"col-md-1\\\" style=\\\"background-color: #F5F5F5;\\\"></div> -->\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <div class=\\\"voucher-container\\\">\\r\\n      <!-- Chứng từ khấu trừ thuế TNCN -->\\r\\n      <h1 style=\\\"font-weight: bold; font-size: 16px; text-align: center; padding: 20px 0px;\\\">\\r\\n        {{_translate.MENU.proof_of_tax_deduction | uppercase}}</h1>\\r\\n      <div class=\\\"proof-of-tax-deduction\\\">\\r\\n        <!-- Mẫu hóa đơn -->\\r\\n        <div class=\\\"proof\\\">\\r\\n          <!-- Loại tiền -->\\r\\n          <div>\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.LABEL.currency_code}}</span>\\r\\n                  <dx-check-box (onValueChanged)=\\\"onChangeCurrency($event)\\\" style=\\\"margin-left: 15px;\\\"\\r\\n                    [value]=\\\"frmData.is_voucher_currency\\\">\\r\\n                  </dx-check-box>\\r\\n                </div>\\r\\n                <div class=\\\"value loai-tien\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.currency_code\\\"\\r\\n                    placeholder=\\\"{{_translate.CONTROLL.LABEL.enter_currency}}\\\" *ngIf=\\\"frmData.is_voucher_currency\\\">\\r\\n                  </dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div>\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.LABEL.invoice_form}}</span><span\\r\\n                    class=\\\"req-text\\\">*</span></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-select-box [(value)]=\\\"frmData.template_id\\\" displayExpr=\\\"name\\\" valueExpr=\\\"value\\\"\\r\\n                    [dataSource]=\\\"select.templatesTT78\\\" (onValueChanged)=\\\"onChangeTem($event)\\\" [(readOnly)]=\\\"DaXuat\\\">\\r\\n                  </dx-select-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Số chứng từ-- -->\\r\\n            <div class=\\\"column number\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.vehicle_license_number}}</div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.license_number\\\" disabled=\\\"true\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div>\\r\\n            <!-- Ngày chứng từ -->\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.LABEL.invoice_voucher}}</span><span\\r\\n                    class=\\\"req-text\\\">*</span></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n                    <dxi-item dataField=\\\"license_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n                      [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', readOnly: DaXuat, onValueChanged: changeDateTime}\\\">\\r\\n                      <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n                    </dxi-item>\\r\\n                  </dx-form>\\r\\n                  <!-- <dx-date-box type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\" [displayFormat]=\\\"'dd/MM/yyyy'\\\"\\r\\n                    [(value)]=\\\"frmData.license_date\\\" [(readOnly)] = \\\"DaXuat\\\">\\r\\n                  </dx-date-box> -->\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Tỉnh/thành phố -->\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.LABEL.province_city}}</span><span\\r\\n                    class=\\\"req-text\\\">*</span></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.province_name\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Thông tin người nộp thuế -->\\r\\n          <h1 style=\\\"font-weight: bold; font-size: 13px; text-align: left; padding: 7px 7%;\\\">\\r\\n            {{_translate.TITLE.taxpayer_information | uppercase}}</h1>\\r\\n          <div>\\r\\n            <!-- Họ và tên -->\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.LABEL.fullname}}</span><span class=\\\"req-text\\\">*</span>\\r\\n                </div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.taxpayers_name\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Quốc tịch -->\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.LABEL.nationality}}</span><span class=\\\"req-text\\\">*</span>\\r\\n                </div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.nationality\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Địa chỉ   -->\\r\\n          <div class=\\\"column name-customer\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.address}}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-text-box [(value)]=\\\"frmData.taxpayers_address\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"custom\\\">\\r\\n            <div style=\\\"display: flex; flex-direction: column;flex:1;\\\">\\r\\n              <!-- Số điện thoại -->\\r\\n              <div class=\\\"column\\\" style=\\\"width:100%;\\\">\\r\\n                <div class=\\\"field\\\">\\r\\n                  <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.phone_number}}</div>\\r\\n                  <div class=\\\"value\\\">\\r\\n                    <dx-text-box [(value)]=\\\"frmData.taxpayers_mobile\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n              <!-- Mã số thuế -->\\r\\n              <div class=\\\"column\\\" style=\\\"width:100%;\\\">\\r\\n                <div class=\\\"field\\\">\\r\\n                  <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.tax_code}}</div>\\r\\n                  <div class=\\\"value\\\">\\r\\n                    <dx-text-box [(value)]=\\\"frmData.taxpayers_tax_code\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n              <!-- Cá nhân cư trú -->\\r\\n              <div style=\\\"width:100%;\\\">\\r\\n                <div class=\\\"column\\\" style=\\\"width:100%;\\\">\\r\\n                  <div class=\\\"field\\\">\\r\\n                    <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.resident_individual}}</div>\\r\\n                    <div class=\\\"value\\\">\\r\\n                      <dx-radio-group [dataSource]=\\\"priorities\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"\\r\\n                        [(value)]=\\\"frmData.resident_individual\\\" layout=\\\"horizontal\\\" [(readOnly)]=\\\"DaXuat\\\">\\r\\n                      </dx-radio-group>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Email -->\\r\\n            <div class=\\\"column\\\" style=\\\"flex:1;\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\" style=\\\"vertical-align: top; margin-top: 5px;\\\">{{_translate.CONTROLL.LABEL.email}}\\r\\n                </div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" style=\\\"flex:1\\\">\\r\\n                    <dxi-item>\\r\\n                      <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n                      <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n                        <div\\r\\n                          class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n                          <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                            <app-tag-input-email [variableName]=\\\"this.emails\\\"\\r\\n                              (numberGenerated)=\\\"renderDataEmail($event)\\\" style=\\\"flex: 1;\\\"></app-tag-input-email>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </dxi-item>\\r\\n                  </dx-form>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Dữ liệu mở rộng -->\\r\\n          <div class=\\\"column name-customer\\\">\\r\\n            <dx-form [formData]=\\\"customerTempt\\\" [items]=\\\"formItems\\\" class=\\\"customer-tempt\\\">\\r\\n            </dx-form>\\r\\n          </div>\\r\\n\\r\\n          <div style=\\\"color:red; padding:0px 0px 7px 7%;font-style: italic; margin-top: 15px;\\\">\\r\\n            {{_translate.CONTROLL.LABEL.in_case_taxpayer_does_not_have_tax}}:</div>\\r\\n          <!-- Số CMND/CCCD hoặc số hộ chiếu  -->\\r\\n          <div class=\\\"column name-customer citizen-id\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.id_card}}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-text-box [(value)]=\\\"frmData.id_card\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div>\\r\\n            <!-- Nơi cấp -->\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.card_issuer_address}}</div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.card_issuer_address\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Ngày cấp -->\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">{{_translate.CONTROLL.LABEL.card_issuer_date}}</div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n                    <dxi-item dataField=\\\"card_issuer_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n                      [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd', readOnly: DaXuat}\\\">\\r\\n                      <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n                    </dxi-item>\\r\\n                  </dx-form>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Thông tin thuế thu nhập cá nhân khấu trừ -->\\r\\n          <h1 style=\\\"font-weight: bold; font-size: 13px; text-align: left; padding: 7px 7%;\\\">\\r\\n            {{_translate.TITLE.personal_income_tax_information_withholding | uppercase}}</h1>\\r\\n          <div>\\r\\n            <!-- Khoản thu nhập -->\\r\\n            <div class=\\\"column citizen-id\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">[1] {{_translate.CONTROLL.LABEL.income}}</div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.income\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Khoản đóng bảo hiểm bắt buộc   -->\\r\\n            <div class=\\\"column citizen-id\\\" *ngIf=\\\"inforFields('tien-dong-bao-hiem-nnt').is_show\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">[{{inforFields('tien-dong-bao-hiem-nnt').index + currentIndex - 1}}]\\r\\n                  {{_translate.CONTROLL.LABEL.compulsory_insurance_payment}}<img src=\\\"assets/img/icons/SoThapPhan.png\\\"\\r\\n                    (click)=\\\"configDecimal('khoan_dong_bh')\\\" style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value so-tien\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.compulsory_insurance_payment\\\" [(readOnly)]=\\\"DaXuat\\\"\\r\\n                    [format]=\\\"formatter.khoan_dong_bh\\\" [showClearButton]=\\\"true\\\"></dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div>\\r\\n            <!-- Thời điểm trả thu nhập:  -->\\r\\n            <div class=\\\"column time\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">[{{currentIndex}}] {{_translate.CONTROLL.LABEL.time_to_pay_income}}</div>\\r\\n                <div class=\\\"label\\\"  style=\\\"width: 27%;\\\">{{_translate.CONTROLL.COMBO.month}}</div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.month_pay_income\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Năm -->\\r\\n            <div class=\\\"column\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\"><span>{{_translate.CONTROLL.COMBO.year}}</span><span class=\\\"req-text\\\">*</span></div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-text-box [(value)]=\\\"frmData.year_pay_income\\\" [(readOnly)]=\\\"DaXuat\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div>\\r\\n            <!-- Tổng thu nhập chịu thuế phải khấu trừ  -->\\r\\n            <div class=\\\"column citizen-id\\\" *ngIf=\\\"inforFields('tien-chiu-thue-nnt').is_show\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">[{{inforFields('tien-chiu-thue-nnt').index + 3}}]\\r\\n                  {{_translate.CONTROLL.LABEL.total_taxable_income_deducted}} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"\\r\\n                    (click)=\\\"configDecimal('tong_tnctpkt')\\\" style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value so-tien\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.total_taxable_income_deducted\\\"\\r\\n                    (onValueChanged)=\\\"totalTaxableChange($event)\\\" [format]=\\\"formatter.tong_tnctpkt\\\"\\r\\n                    (onKeyDown)=\\\"keyDown($event)\\\" [(readOnly)]=\\\"DaXuat\\\" [showClearButton]=\\\"true\\\">\\r\\n                  </dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Tổng thu nhập tính thuế  -->\\r\\n            <div class=\\\"column citizen-id\\\" *ngIf=\\\"inforFields('tien-tinh-thue-nnt').is_show\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">[{{inforFields('tien-tinh-thue-nnt').index + 3}}]\\r\\n                  {{_translate.CONTROLL.LABEL.total_taxable_income}} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"\\r\\n                    (click)=\\\"configDecimal('tong_tntt')\\\" style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value so-tien\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.total_taxable_income\\\" [format]=\\\"formatter.tong_tntt\\\"\\r\\n                    (onKeyDown)=\\\"keyDown($event)\\\" [(readOnly)]=\\\"DaXuat\\\" [showClearButton]=\\\"true\\\"></dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div>\\r\\n            <!-- Số thuế thu nhập cá nhân đã khấu trừ -->\\r\\n            <div class=\\\"column citizen-id\\\" *ngIf=\\\"inforFields('tien-thue-da-khau-tru-nnt').is_show\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">[{{inforFields('tien-thue-da-khau-tru-nnt').index + 3}}]\\r\\n                  {{_translate.CONTROLL.LABEL.amount_personal_income_tax_withheld}} <img\\r\\n                    src=\\\"assets/img/icons/SoThapPhan.png\\\" (click)=\\\"configDecimal('so_thue_tncndkt')\\\"\\r\\n                    style=\\\"cursor: pointer;\\\"></div>\\r\\n                <div class=\\\"value so-tien\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.amount_personal_income_tax_withheld\\\"\\r\\n                    [format]=\\\"formatter.so_thue_tncndkt\\\" (onValueChanged)=\\\"tinhgiatri()\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                    [(readOnly)]=\\\"DaXuat\\\" [showClearButton]=\\\"true\\\"></dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <!-- Tổng thu nhập chịu thuế đã trả  -->\\r\\n            <div class=\\\"column citizen-id\\\" *ngIf=\\\"inforFields('tien-thue-da-tra-nnt').is_show\\\">\\r\\n              <div class=\\\"field\\\">\\r\\n                <div class=\\\"label\\\">[{{inforFields('tien-thue-da-tra-nnt').index + 3}}]\\r\\n                  {{_translate.CONTROLL.LABEL.total_taxable_income_paid}} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"\\r\\n                    (click)=\\\"configDecimal('tong_tnctdt')\\\" style=\\\"cursor: pointer;\\\">\\r\\n                </div>\\r\\n                <div class=\\\"value so-tien\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.total_taxable_income_paid\\\" [format]=\\\"formatter.tong_tnctdt\\\"\\r\\n                    (onValueChanged)=\\\"tinhgiatri()\\\" (onKeyDown)=\\\"keyDown($event)\\\" [(readOnly)]=\\\"DaXuat\\\" [showClearButton]=\\\"true\\\"></dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Số thu nhập cá nhân còn được nhận  -->\\r\\n          <div class=\\\"column name-customer\\\" *ngIf=\\\"inforFields('tien-duoc-nhan-nnt').is_show\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\" *ngIf=\\\"inforFields('tien-duoc-nhan-nnt').calculation\\\">\\r\\n                [{{inforFields('tien-duoc-nhan-nnt').index +\\r\\n                3}}]=[{{inforFields('tien-thue-da-tra-nnt').index +\\r\\n                3}}]-[{{inforFields('tien-thue-da-khau-tru-nnt').index + 3}}]\\r\\n                {{_translate.CONTROLL.LABEL.amount_personal_income_still_received}} <img\\r\\n                  src=\\\"assets/img/icons/SoThapPhan.png\\\" (click)=\\\"configDecimal('so_tncncdn')\\\" style=\\\"cursor: pointer;\\\">\\r\\n              </div>\\r\\n              <div class=\\\"label\\\" *ngIf=\\\"!inforFields('tien-duoc-nhan-nnt').calculation\\\">\\r\\n                [{{inforFields('tien-duoc-nhan-nnt').index +\\r\\n                3}}]\\r\\n                {{_translate.CONTROLL.LABEL.amount_personal_income_still_received}} <img\\r\\n                  src=\\\"assets/img/icons/SoThapPhan.png\\\" (click)=\\\"configDecimal('so_tncncdn')\\\" style=\\\"cursor: pointer;\\\">\\r\\n              </div>\\r\\n              <div class=\\\"value so-tien\\\">\\r\\n                <dx-number-box [(value)]=\\\"frmData.amount_personal_income_still_received\\\" [format]=\\\"formatter.so_tncncdn\\\"\\r\\n                  (onKeyDown)=\\\"keyDown($event)\\\" [(readOnly)]=\\\"DaXuat\\\" [showClearButton]=\\\"true\\\"></dx-number-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Không tự tính -->\\r\\n        <div style=\\\"display: flex; width: 60%\\\">\\r\\n          <div class=\\\"column\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"value\\\" style=\\\"width: 5%;\\\">\\r\\n                <dx-check-box [(value)]=\\\"frmData.auto_value\\\" (onValueChanged)=\\\"onChangeAutoValue()\\\"\\r\\n                  [(readOnly)]=\\\"DaXuat\\\"></dx-check-box>\\r\\n              </div>\\r\\n              <div class=\\\"label\\\" style=\\\"width: 143px;\\\">{{_translate.CONTROLL.LABEL.no_calculation}}</div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row rowButton\\\" style=\\\"padding-left: 7%;padding-right: 7%;\\\">\\r\\n        <div class=\\\"col-md-12\\\" style=\\\"padding-right: 0px;\\\">\\r\\n          <div class=\\\"pull-left\\\">\\r\\n            <!-- Xem trước chứng từ -->\\r\\n            <dx-button disableDoubleClick *ngIf=\\\"!DaXuat\\\" (click)=\\\"preview()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n              text=\\\"{{_translate.CONTROLL.BUTTON.preview_voucher}}\\\" type=\\\"default\\\"></dx-button>\\r\\n            <!-- Xem chứng từ -->\\r\\n            <dx-button disableDoubleClick *ngIf=\\\"DaXuat\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n              text=\\\"{{_translate.CONTROLL.BUTTON.see_voucher}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          </div>\\r\\n          <div class=\\\"pull-right\\\">\\r\\n            <!-- xuất chứng từ -->\\r\\n            <dx-button disableDoubleClick *ngIf=\\\"!DaXuat\\\" type=\\\"default\\\" text=\\\"{{_translate.CONTROLL.BUTTON.export_vouchers}}\\\"\\r\\n              [(icon)]=\\\"this._translate.ICONS.export_inv\\\" (click)=\\\"eSubmit('XUAT',true)\\\"></dx-button>\\r\\n            <!-- Ghi tạm -->\\r\\n            <dx-button disableDoubleClick *ngIf=\\\"!DaXuat\\\" (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\"\\r\\n              text=\\\"{{_translate.CONTROLL.BUTTON.save_temporary}}\\\" [(icon)]=\\\"this._translate.ICONS.save\\\">\\r\\n            </dx-button>\\r\\n            <!-- Tạo mới -->\\r\\n            <dx-button disableDoubleClick type=\\\"default\\\" text=\\\"{{_translate.CONTROLL.BUTTON.create_new}}\\\"\\r\\n              [(icon)]=\\\"this._translate.ICONS.add_new\\\" (click)=\\\"handleAddNew()\\\"></dx-button>\\r\\n            <!-- Đóng -->\\r\\n            <dx-button disableDoubleClick (click)=\\\"dong()\\\" [(icon)]=\\\"this._translate.ICONS.come_back\\\" type=\\\"default\\\"\\r\\n              text=\\\"{{_translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- Button -->\\r\\n    <!-- <div class=\\\"row\\\" style=\\\"background-color: #F5F5F5;height: 20px;\\\"></div> -->\\r\\n  </div>\\r\\n  <!-- <div class=\\\"col-md-1\\\" style=\\\"background-color: #F5F5F5;\\\"></div> -->\\r\\n</div>\\r\\n<div [hidden]=\\\"!isIncomeConfirmation\\\">\\r\\n  <app-income-confirmation [frmData]=\\\"frmData_txn\\\" [frmData_ct]=\\\"frmData\\\">\\r\\n  </app-income-confirmation>\\r\\n</div>\\r\\n\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \"::ng-deep .column{display:inline-block;margin:0;text-align:right}::ng-deep .voucher-container .column .field{padding:5px 0;display:flex;align-items:center}::ng-deep .day{width:32%}::ng-deep .day .field .label{width:61px !important}::ng-deep .day .field .value{width:56% !important}::ng-deep .day .field .dx-datebox{width:100% !important}::ng-deep .column .field>div{display:inline-block;vertical-align:middle}::ng-deep .voucher-container .column .field .label{width:40%;padding-right:10px}::ng-deep .number .field .value .dx-texteditor-input{color:red;font-weight:bold;padding-bottom:0px}::ng-deep .column .field .value{width:53%}::ng-deep .column .field .value .dx-selectbox{border-radius:0}::ng-deep .column .field .value .dx-datebox{border-radius:0}::ng-deep .column .field .value .dx-datebox .dx-texteditor-input{min-height:20px;max-height:25px}::ng-deep .column .field .value .dx-texteditor-input{min-height:20px;max-height:25px}::ng-deep .column .field .valueProcess{width:56%}::ng-deep .column .field .valueProcess .dx-selectbox{border-radius:0}::ng-deep .column .field .valueProcess .dx-datebox{border-radius:0}::ng-deep .column .field .valueProcess .dx-datebox .dx-texteditor-input{min-height:20px;max-height:25px;padding:3px 35px 3px 9px !important}::ng-deep .column .field .valueProcess .dx-texteditor-input{min-height:20px;max-height:25px}::ng-deep .search-date{width:100%}::ng-deep .search-date .dx-texteditor-input{padding-top:5px !important;padding-bottom:0px}::ng-deep .search-panel .dx-textbox .dx-texteditor-input{padding-top:5px !important;padding-bottom:0px}::ng-deep .proof-of-tax-deduction .dx-textbox .dx-texteditor-input,::ng-deep .advanced-invoice-buy .dx-textbox .dx-texteditor-input{padding-bottom:3px}.search-panel{width:100%}.search-panel .dx-texteditor{border-radius:0}.search-panel .column{width:68%}.search-panel .label{margin:0}.search-panel .value{width:76% !important}.search-panel .value .dx-textbox{width:83%;display:inline-flex}.search-panel .value .dx-button{position:relative;top:-2px;border-left:0;height:27px}.search-panel .value .dx-button-content{padding-right:0 !important}.search-panel .value .dx-icon{margin-right:3px !important;margin-left:3px !important}.search-panel .value #advBtn{margin-top:0;width:5%}.search-panel .value #searchBtn{margin-top:0;width:9%}.search-panel .valueProcess{width:63%}.search-panel .valueProcess .dx-textbox{width:94%;display:inline-flex}.search-panel .valueProcess .dx-button{position:relative;top:-2px;border-left:0;height:27px}.search-panel .valueProcess .dx-button-content{padding-right:0 !important}.search-panel .valueProcess .dx-icon{margin-right:3px !important;margin-left:3px !important}.search-panel .valueProcess #advBtn{margin-top:0;width:5%}.search-panel .valueProcess #searchBtn{margin-top:0;width:9%}.voucher-container{width:100%;height:100%}.voucher-container .proof-of-tax-deduction{transition:all .3s linear 0s;width:100%;display:flex;flex-direction:column;align-items:center}.voucher-container .proof-of-tax-deduction .proof{width:100%}.voucher-container .proof-of-tax-deduction .proof .custom{display:flex}.voucher-container .proof-of-tax-deduction .proof .dx-texteditor{border-radius:0}.voucher-container .proof-of-tax-deduction .proof .column{width:50%}.voucher-container .proof-of-tax-deduction .proof .column .value{width:47%}.voucher-container .proof-of-tax-deduction .proof .column .loai-tien{width:47% !important}.voucher-container .proof-of-tax-deduction .proof .name-customer{width:100% !important}.voucher-container .proof-of-tax-deduction .proof .name-customer .label{width:20%}.voucher-container .proof-of-tax-deduction .proof .name-customer .value{width:73.5% !important}.voucher-container .proof-of-tax-deduction .proof div .time .value{width:20%}.voucher-container .proof-of-tax-deduction .proof .name-customer-buy{width:35.07% !important}.voucher-container .proof-of-tax-deduction .proof .name-customer-buy .value{width:63.5% !important}.voucher-container .proof-of-tax-deduction .proof :host .dx-fieldset{width:100px}.voucher-container .proof-of-tax-deduction .group-btn{width:80%;display:flex;justify-content:space-between}.voucher-container .proof-of-tax-deduction .group-btn .btn{padding:10px 10px 10px !important}.button-ok{height:30px;padding-bottom:10px !important;padding-left:20px}::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-popup-content{padding-top:5px !important;padding-left:5px !important;padding-right:5px !important;padding-bottom:0 !important}::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-template-wrapper .dx-treeview{height:80% !important;padding-bottom:5px !important}::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-template-wrapper .processing_status-search.dx-treeview,::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-template-wrapper .exporter-search.dx-treeview{height:75% !important;padding-bottom:5px !important}::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-template-wrapper .dx-button-search{border-radius:12px !important}::ng-deep .dx-dropdowneditor-overlay .dx-overlay-content .dx-template-wrapper .dx-button-search .dx-button-content .dx-icon{font-size:13px !important}.rowButton{margin-top:25px;margin-bottom:10px}::ng-deep .nguoi-nop-thue .dx-field-item-label-text{font-weight:bold !important}::ng-deep .khong-co-mst .dx-field-item-label-text{color:red;font-style:italic}::ng-deep .thang-thu-nhap .dx-field-item-label{width:125px}::ng-deep .thang-thu-nhap .dx-field-item-label-content{width:110px !important}::ng-deep .tinh-tien .dx-texteditor-container .dx-texteditor-input-container .dx-texteditor-input{padding:0px 9px}::ng-deep .thue-thu-nhap .dx-field-item-label-location-left{padding-right:18px}::ng-deep .chungtu.invoice-number-create-invoice input{color:red;font-weight:bold}.req-text{margin-left:2px;color:red}::ng-deep .so-tien .dx-texteditor-input{padding:0px 9px 0px 9px}::ng-deep.custom-input .dx-texteditor-container .dx-texteditor-input-container .dx-texteditor-input{padding:0px 0px 0px 3px;height:25px}@media (min-width: 1367px){::ng-deep.custom-input .dx-field-item-label{padding-left:28px;padding-right:10px}}@media (max-width: 1367px) and (min-width: 1023px){::ng-deep.custom-input .dx-field-item-label{padding-left:0px;padding-right:10px}}::ng-deep .customer-tempt .dx-layout-manager .dx-field-item-optional.dx-flex-layout.dx-label-h-align{padding-left:0;padding-right:0}::ng-deep .customer-tempt .dx-layout-manager .dx-field-item-optional.dx-flex-layout.dx-label-h-align label{width:40%;padding-right:10px;text-align:right}::ng-deep .customer-tempt .dx-layout-manager .dx-field-item-optional.dx-flex-layout.dx-label-h-align label .dx-field-item-label-content{width:unset !important}::ng-deep .customer-tempt .dx-layout-manager .dx-field-item-optional.dx-flex-layout.dx-label-h-align label .dx-field-item-label-content span{text-wrap:wrap;font-family:Arial, Helvetica, sans-serif}::ng-deep .customer-tempt .dx-layout-manager .dx-field-item-optional.dx-flex-layout.dx-label-h-align .dx-field-item-content.dx-field-item-content-location-right{width:40%}::ng-deep .customer-tempt .dx-layout-manager .dx-field-item-optional.dx-flex-layout.dx-label-h-align .dx-field-item-content.dx-field-item-content-location-right .dx-datebox.dx-textbox.dx-texteditor.dx-widget.dx-visibility-change-handler.dx-auto-width.dx-dropdowneditor-button-visible.dx-dropdowneditor.dx-datebox-date.dx-datebox-calendar{width:calc((47/60)*100%) !important}::ng-deep .customer-tempt .dx-layout-manager .dx-field-item-optional.dx-flex-layout.dx-label-h-align .dx-field-item-content.dx-field-item-content-location-right .dx-show-invalid-badge{width:calc((47/60)*100%)}#tab-invoice{width:100%;border-bottom:1px solid #ddd}#tab-invoice .dx-tabs{width:20%;border-bottom:0}::ng-deep .dx-tab.dx-tab-selected{color:#2680eb !important}::ng-deep #tab-invoice .dx-tab{padding:4px}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, HostBinding, OnDestroy, OnInit, ViewChild, ViewChildren, ViewEncapsulation } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport * as _ from 'lodash';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ConfigDecimalComponent } from '@shared/index';\r\nimport { ConfirmLettersModel, VoucherModel, VoucherService } from '@modules/vouchers/shared';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { AuthService, Helper, Library, sEnum, SocketService, VChanggeMoneyService, VPreviewInvService, VSelectBoxService, VStringService } from '@core/index';\r\ndeclare var $: any;\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { Observable } from 'rxjs';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { pattern } from '@config/index';\r\nimport { IncomeConfirmationComponent } from '../income-confirmation/income-confirmation.component';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-voucher',\r\n  templateUrl: './voucher.component.html',\r\n  styleUrls: ['./voucher.component.scss']\r\n})\r\nexport class VoucherComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  // @ViewChildren(DxFormComponent) listDxForm: any;\r\n  // @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @ViewChild(IncomeConfirmationComponent) incomeConfirmationComponent: IncomeConfirmationComponent;\r\n  formatter: any;\r\n  exportSchedules: any;\r\n  configs: any = {};\r\n  dataSource: any;\r\n  _translate: any;\r\n  bsModalRef: BsModalRef;\r\n  isIncomeConfirmation = false;\r\n  frmData: any = new VoucherModel(1);\r\n  frmData_txn: ConfirmLettersModel = new ConfirmLettersModel();\r\n  priorities = [\r\n    { code: 1, name: 'Có' },\r\n    { code: 0, name: 'Không' }\r\n  ];\r\n  oldConfigs: any;\r\n  valueChange: string;\r\n  nodeSign: any;\r\n  DaXuat: boolean = false;\r\n  fileData: Array<any> = [];\r\n  private isExportInvoice: boolean;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  windowPreviewBeforeSubmit: any;\r\n  tempKiFile = 0;\r\n  isAccessExportInv = false;\r\n  confirmCheckPreview = false;\r\n  _isValid = false;\r\n  select: any = {};\r\n  invoiceTemplateTT78: any;\r\n  _oTemplateTT78: any = {};\r\n  formItems = [];\r\n  customForms = [];\r\n  customerTempt = {};\r\n  extentionGrid: any = {};\r\n  currentUser: any;\r\n  taxCode: any = '';\r\n  province_name: any = '';\r\n  fields: any = [];\r\n  emailPattern = pattern.email;\r\n  arrEmail: any = [];\r\n  emails: any = [];\r\n  tong_tien: any;\r\n  // is_voucher_currency = false;\r\n  listFieldsShow: any;\r\n  currentIndex = 3;\r\n  listpermissions: any = [];\r\n  isVoucher = false;\r\n  // isSuaGhiTam = false;\r\n  selectedIndex: any;\r\n  tabs = []\r\n  socketService: SocketService;\r\n  dataSourceTNCN = [\r\n    {\r\n      code: \"tien-dong-bao-hiem-nnt\",\r\n      is_show: true,\r\n      name: 'Khoản đóng bảo hiểm bắt buộc',\r\n      type: '5'\r\n    },\r\n    {\r\n      code: \"tien-chiu-thue-nnt\",\r\n      is_show: true,\r\n      name: 'Thu nhập chịu thuế phải khấu trừ',\r\n      type: '5'\r\n    },\r\n    {\r\n      code: \"tien-tinh-thue-nnt\",\r\n      is_show: true,\r\n      name: 'Tổng thu nhập tính thuế',\r\n      type: '5'\r\n    },\r\n    {\r\n      code: \"tien-thue-da-khau-tru-nnt\",\r\n      is_show: true,\r\n      name: 'Số thuế thu nhập cá nhân đã khấu trừ',\r\n      type: '5'\r\n    },\r\n    {\r\n      code: \"tien-thue-da-tra-nnt\",\r\n      is_show: true,\r\n      name: 'Tổng thu nhập chịu thuế đã trả',\r\n      type: '5'\r\n    },\r\n    {\r\n      code: \"tien-duoc-nhan-nnt\",\r\n      is_show: true,\r\n      name: 'Số thuế thu nhập cá nhân còn được nhận',\r\n      type: '5'\r\n    },\r\n  ];\r\n  constructor(\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private modalService: BsModalService,\r\n    private fb: FormBuilder,\r\n    private voucherService: VoucherService,\r\n    // private socketService: SocketService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private confirmService: ConfirmService,\r\n    private spinner: NgxSpinnerService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private configsService: ConfigsService,\r\n    private customeModalService: MyBsModalService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n  ) {\r\n    this.socketService = new SocketService(this.authService, this.modalService, this.spinner)\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.tabs = VSelectBoxService.tabsVoucher(this._translate);\r\n    this.selectedIndex = 0;\r\n    this.isVoucher = true;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.connectWebsocket();\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (this.currentUser.account) {\r\n      this.taxCode = this.currentUser.account.tax_code;\r\n      if (this.currentUser.account.van_account_info)\r\n        this.province_name = this.currentUser.account.van_account_info.city_name;\r\n    }\r\n    if (this.route.snapshot.paramMap.get('isThuXacNhan')) {\r\n      this.selectedIndex = 1;\r\n      this.isVoucher = false;\r\n      this.isIncomeConfirmation = true;\r\n    }\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // get cấu hình\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.configs = this.authService.getConfigs();\r\n      this.oldConfigs = _.cloneDeep(this.configs.system_parameter);\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      this.frmData.display_currency = JSON.stringify(this.configs.display_currency);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      this.select.countrys = danh_muc.DM_QUOC_GIA ? danh_muc.DM_QUOC_GIA.data : null;\r\n      this.select.cities = danh_muc.DM_TINH_THANH ? danh_muc.DM_TINH_THANH.data : null;\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      if (data.init[1] == true)\r\n        isEdit = true;\r\n      if (isEdit) {\r\n        this.select.templatesTT78 = data.init[2].filter(item => item.template_type !== 'THU_XAC_NHAN_THU_NHAP');\r\n        invoice = data.init[0];\r\n      }\r\n      else {\r\n        this.select.templatesTT78 = data.init[0].filter(item => item.template_type !== 'THU_XAC_NHAN_THU_NHAP');\r\n      }\r\n      if (isEdit || this.voucherService.isCopy) {\r\n        if (this.voucherService.isCopy) {\r\n          this.khoiTaoKhiSua(this.voucherService.data);\r\n        } else {\r\n          // this.isSuaGhiTam = true;\r\n          this.khoiTaoKhiSua(invoice);\r\n        }\r\n      } else {\r\n        this.khoiTaoKhiThemMoi();\r\n      }\r\n      if (this.configs.system_parameter.voucher_currency) {\r\n        this.frmData.currency_code = this.configs.system_parameter.voucher_currency;\r\n      }\r\n      this.changeValueTempt();\r\n      // localStorage.setItem('lct', JSON.stringify(this.frmData))\r\n      setTimeout(() => {\r\n        this.setDataSessionStorage(this.frmData);\r\n        this.changeTemplateInvoice(this.frmData.license_date)\r\n      });\r\n    });\r\n    this.listpermissions = this.currentUser.user.permissions.split(',');\r\n    const _obj = this.listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n  }\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n    // localStorage.removeItem('lct');\r\n    // localStorage.removeItem('txn');\r\n  }\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status === sEnum.statusInv.DaXuat) {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      isVoucher: true,\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        // this.formatter[data.column] = data.character;\r\n        // this._tinhGiaTri();\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  readonlyAllForm() {\r\n    // this.listDxForm._results.forEach(item => {\r\n    //   item.readOnly = true;\r\n    // });\r\n  }\r\n  removeReadonlyAllForm() {\r\n    // this.listDxForm._results.forEach(item => {\r\n    //   item.readOnly = false;\r\n    // });\r\n    this.DaXuat = false;\r\n  }\r\n  /*  */\r\n  khoiTaoKhiThemMoi() {\r\n    this.fileData = [];\r\n    if (this.select.templatesTT78.length) {\r\n      this.frmData.template_id = this.select.templatesTT78[0].value;\r\n      let isOldTemp = this.select.templatesTT78[0].fields.filter(p => p.code == \"tien-dong-bao-hiem-nnt\")\r\n      if (isOldTemp.length > 0) {\r\n        this.fields = this.select.templatesTT78[0].fields;\r\n      } else {\r\n        this.fields = this.dataSourceTNCN;\r\n      }\r\n      this.frmData.license_series = this.select.templatesTT78[0].invoice_series;\r\n      this.frmData.template_code = this.select.templatesTT78[0].template_code;\r\n      for (const key in this.select.templatesTT78[0]) {\r\n        if (this.select.templatesTT78[0].hasOwnProperty(key)) {\r\n          this._oTemplateTT78[key] = this.select.templatesTT78[0][key];\r\n        }\r\n      }\r\n      this.invoiceTemplateTT78 = this.select.templatesTT78[0];\r\n    }\r\n\r\n    this.frmData['is_voucher_currency'] = this.configs.system_parameter.is_voucher_currency ? this.configs.system_parameter.is_voucher_currency : false;\r\n    let license_date = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n    this.frmData.license_date = license_date;\r\n    this.frmData.province_name = this.province_name;\r\n  }\r\n  /*  */\r\n  khoiTaoKhiSua(data) {\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n\r\n    this.frmData['is_voucher_currency'] = data.is_voucher_currency ? data.is_voucher_currency : false;\r\n    // lấy file\r\n    let isOldTemp = this.select.templatesTT78.filter(p => p.value == data.template_id)[0]\r\n    let lengthTemp = isOldTemp.fields.filter(p => p.code == \"tien-dong-bao-hiem-nnt\")\r\n    if (lengthTemp.length > 0) {\r\n      this.fields = this.select.templatesTT78.filter(p => p.value == data.template_id)[0].fields;\r\n    } else {\r\n      this.fields = this.dataSourceTNCN;\r\n    }\r\n    if (this.voucherService.isCopy) {\r\n      this.fileData = [];\r\n      let _oTempt = this.select.templatesTT78.filter(p => p.value === this.frmData.template_id)[0];\r\n      if (_oTempt) {\r\n        this.frmData.template_id = _oTempt.value;\r\n        this.frmData.license_series = _oTempt.invoice_series;\r\n        this.frmData.template_code = _oTempt.template_code;\r\n      }\r\n      else {\r\n        this.frmData.template_id = null;\r\n        this.frmData.license_series = null;\r\n        this.frmData.template_code = null;\r\n      }\r\n    } else {\r\n      this.fileData = data.license_files;\r\n    }\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (item.value === this.frmData.template_id) {\r\n        this.invoiceTemplateTT78 = item;\r\n      }\r\n    });\r\n    this.select.templatesTT78.some(item => {\r\n      if (item.value === this.frmData.template_id) {\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            this._oTemplateTT78[key] = item[key];\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n    });\r\n    if (this.frmData.taxpayers_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.taxpayers_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n  }\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let status;\r\n    if (!this.frmData.id && !this.frmData.license_number) {\r\n      status = sEnum.processInv.ThemMoi;\r\n    }\r\n    if (this.frmData.id && !this.frmData.license_number) {\r\n      status = sEnum.statusInv.GhiTam;\r\n    }\r\n    if (this.frmData.id && this.frmData.license_number) {\r\n      status = sEnum.statusInv.ChoKy;\r\n    }\r\n    let xmlInvoice = \"\";\r\n    if (status === sEnum.processInv.ThemMoi) {\r\n      const sub = this.voucherService.ghiTam(this.frmData, true).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.setCurrencyVoucher();\r\n          this.frmData.license_number = rs.data.license_number;\r\n          this.frmData.license_date = moment(rs.data.license_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let license_sign_date = moment(rs.data.license_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.frmData.id = rs.data.id;\r\n          this.setDataSessionStorage(this.frmData);\r\n          this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n          //  Lấy xml từ serer\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, license_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status === sEnum.statusInv.GhiTam) {\r\n      const sub = this.voucherService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.setCurrencyVoucher();\r\n          this.frmData.license_number = rs.data.license_number;\r\n          this.frmData.license_date = moment(rs.data.license_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let license_sign_date = moment(rs.data.license_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          this.setDataSessionStorage(this.frmData);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, license_sign_date);\r\n            }\r\n          }\r\n\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status === sEnum.statusInv.ChoKy) {\r\n      const sub = this.voucherService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.setCurrencyVoucher();\r\n          this.frmData.license_date = moment(rs.data.license_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let license_sign_date = moment(rs.data.license_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          this.setDataSessionStorage(this.frmData);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, license_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  goiApiXuatHoaDon(xml_string) {\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    const sub = this.voucherService.xuatChungTu({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n      license_files: this.frmData.license_files\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.voucherService.isCopy = false\r\n        this.frmData.status = rs.data.status;\r\n        this.disablleScreen();\r\n        this.fileData = this.frmData.license_files;\r\n        Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n        this.isExportInvoice = true;\r\n        this.setDataSessionStorage(this.frmData);\r\n\r\n        this.voucherService.isCopy = false;\r\n        // if(this.frmData.id)\r\n        // this.router.navigate([`/system/voucher-tax/${rs.data.id}`]);\r\n        // if (this.isSuaGhiTam) {\r\n        //   this.router.navigate([`/system/voucher-tax/${this.frmData.id}`, { isSuaGhiTam: true }]);\r\n        // } else {\r\n        // }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'LicenseData', '', true, this.taxCode, true);\r\n  }\r\n  /* Kết nối đến socket */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.frmData.issuer_name = data.Data.IssuerName;\r\n          this.xuLiApiKhiXuat();\r\n        } else {\r\n          this.frmData.license_files.forEach(item => {\r\n            if (item.file_name === data.Data.Name) {\r\n              item.file_content = data.Data.Content;\r\n            }\r\n          });\r\n          this.tempKiFile++;\r\n          if (this.tempKiFile === this.frmData.license_files.length) {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n  /* Disbale Form */\r\n  disablleScreen() {\r\n    this.readonlyAllForm();\r\n    this.DaXuat = true;\r\n  }\r\n  /*  */\r\n  setDataSessionStorage(data) {\r\n    this.valueChange = JSON.stringify(data);\r\n    this.incomeConfirmationComponent.updateData_lct()\r\n    // localStorage.setItem('lct', this.valueChange);\r\n  }\r\n  /*  */\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n    // return true;\r\n  }\r\n  /*  */\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    this.configsService.getAll().subscribe((res) => {\r\n      if (res.data && res.data.configs) {\r\n        this.authService.setConfigs(res.data.configs);\r\n        this.configs = this.authService.getConfigs();\r\n      }\r\n    });\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData(sEnum.statusInv.GhiTam, this.frmData).then(value1 => {\r\n                    observer.next(value1);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  /*  */\r\n  async subData(type, data) {\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    await this.handleFormDataSub();\r\n    if (this.frmData.license_options) {\r\n      this.frmData.license_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (data.id) {\r\n      Library.showloading();\r\n      return await this.voucherService.edit(data.id, data).toPromise().then(res => {\r\n        Library.hideloading();\r\n        if (res.status === 'success') {\r\n          Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n          return true;\r\n        } else {\r\n          Library.notify(res.message, 'error');\r\n          return false;\r\n        }\r\n      });\r\n    } else {\r\n      Library.showloading();\r\n      return await this.voucherService.ghiTam(data).toPromise().then(res => {\r\n        Library.hideloading();\r\n        if (res.status === 'success') {\r\n          Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n          return true;\r\n        } else {\r\n          Library.notify(res.message, 'error');\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /*  */\r\n  handleFormDataSub() {\r\n    const wait = (delay, ...args) => new Promise(resolve => setTimeout(resolve, delay, ...args));\r\n    return wait(200).then(() => {\r\n      // this.fileData =[];\r\n      this.tempKiFile = 0;\r\n      // this.frmData.license_files = JSON.parse(JSON.stringify(this.fileData));\r\n      this.frmData.license_files = []\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n      return true;\r\n    });\r\n  }\r\n  /* Xuất hóa đơn */\r\n  eSubmit(type, isCheckNoVat?) {\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.tong_tien = \"\";\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      this._isValid = this._validForm();\r\n      if (!this._isValid) {\r\n        return;\r\n      }\r\n      this._isValid = InvoicesService.checkTimeExportInv(this.configs.system_parameter);\r\n      if (!this._isValid) {\r\n        Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n        return;\r\n      }\r\n      if (this.frmData.license_options) {\r\n        this.frmData.license_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n        });\r\n      }\r\n      if (type === 'XUAT' || (type === sEnum.statusInv.TrinhKy && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy)) {\r\n        this.processXuatHoaDon(type, isCheckNoVat)\r\n      } else {\r\n        this.processGhiTam(type)\r\n      }\r\n    }, 300);\r\n  }\r\n  /* Xử lý xuất hóa đơn */\r\n  processXuatHoaDon(type, isCheckNoVat) {\r\n    if (type === sEnum.statusInv.TrinhKy && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n      this.confirmCheckPreview = true;\r\n    }\r\n    if (!this.listpermissions.includes('phe_duyet_chung_tu')) {\r\n      Library.notify(\"Bạn không có quyền thực hiện chức năng 'Xuất và ký'\", 'error');\r\n      return;\r\n    }\r\n    if (this.confirmCheckPreview) {\r\n      if (this.frmData.status !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        this.xuatHoaDon(this.frmData);\r\n      } else {\r\n        Helper.confirmXuatChoKy(() => {\r\n          this.xuatChoKy(this.frmData);\r\n        });\r\n      }\r\n      this.confirmCheckPreview = false;\r\n    } else {\r\n      this.previewBeforeExport(type);\r\n    }\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n    let du_lieu = this.voucherService.taodulieuXemTruocChungTu(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.chungtu;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_chung_tu.toUpperCase(),\r\n      note_warn : this._translate.THONG_TIN.luu_y_truoc_khi_xuat_chung_tu,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_chung_tu,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_chung_tu_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  /* Xử lý ghi tạm hóa đơn */\r\n  processGhiTam(type) {\r\n    this.ghiTam(this.frmData);\r\n  }\r\n  handleFormData() {\r\n    this.tempKiFile = 0;\r\n    this.frmData.license_files = [];//JSON.parse(JSON.stringify(this.fileData));\r\n    this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n  }\r\n  /* Validate */\r\n  _validForm() {\r\n    let _isValid = true;\r\n\r\n    if (!this.frmData.template_id) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.invoice_form + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n\r\n    if (!this.frmData.license_date) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.invoice_voucher + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n\r\n    if (!this.frmData.province_name) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.province_city + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n\r\n    if (!this.frmData.taxpayers_name) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.fullname + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n\r\n    if (!this.frmData.nationality) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n\r\n    if (!this.frmData.taxpayers_tax_code && !this.frmData.id_card) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.req_taxcode_cmnd, 'error');\r\n      return false;\r\n    }\r\n\r\n    if (!this.frmData.year_pay_income) {\r\n      Library.notify(this._translate.CONTROLL.COMBO.year + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n\r\n    if (this.frmData.taxpayers_email && !this.emailPattern.test(this.frmData.taxpayers_email)) {\r\n      Library.notify(\"Email\" + ' ' + this._translate.VALIDATION.not_pattern, 'error');\r\n      return false;\r\n    }\r\n    return _isValid;\r\n  }\r\n  /* Ghi tạm */\r\n  ghiTam(data) {\r\n    if (this.frmData.id) {\r\n      Library.showloading();\r\n      const sub = this.voucherService.edit(this.frmData.id, data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.setCurrencyVoucher();\r\n          this.frmData.id = rs.data.id;\r\n          Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      Library.showloading();\r\n      const sub = this.voucherService.ghiTam(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.setCurrencyVoucher();\r\n          this.frmData.id = rs.data.id;\r\n          Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n          this.setDataSessionStorage(this.frmData);\r\n          this.voucherService.isCopy = false;\r\n          // this.router.navigate([`/system/voucher-tax/${rs.data.id}`]);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatHoaDon(data) {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      if (this.frmData.license_files.length) {\r\n        this.frmData.license_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.frmData.license_date);\r\n        });\r\n      }\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", '', true, this.taxCode, true);\r\n      }\r\n    }\r\n  }\r\n  /* Xuất chờ ký */\r\n  xuatChoKy(data) {\r\n    Library.showloading();\r\n    const sub = this.voucherService.xuatChoKy(data).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.frmData.id = rs.data.id;\r\n        this.frmData.license_number = rs.data.license_number;\r\n        this.frmData = rs.data.status;\r\n        this.frmData.license_date = moment(rs.data.license_date).format('YYYY-MM-DD HH:mm:ss');\r\n        Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n        this.setDataSessionStorage(this.frmData);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  onChangeTem(e) {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        let isOldTemp = item.fields.filter(p => p.code == 'tien-dong-bao-hiem-nnt');\r\n        if (isOldTemp.length > 0) {\r\n          this.fields = item.fields;\r\n        } else {\r\n          this.fields = this.dataSourceTNCN\r\n        }\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.license_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        this.frmData.compulsory_insurance_payment = this.inforFields('tien-dong-bao-hiem-nnt').is_show ? this.frmData.compulsory_insurance_payment : null;\r\n        this.frmData.total_taxable_income_deducted = this.inforFields('tien-chiu-thue-nnt').is_show ? this.frmData.total_taxable_income_deducted : null;\r\n        this.frmData.total_taxable_income = this.inforFields('tien-tinh-thue-nnt').is_show ? this.frmData.total_taxable_income : null;\r\n        this.frmData.amount_personal_income_tax_withheld = this.inforFields('tien-thue-da-khau-tru-nnt').is_show ? this.frmData.amount_personal_income_tax_withheld : null;\r\n        this.frmData.total_taxable_income_paid = this.inforFields('tien-thue-da-tra-nnt').is_show ? this.frmData.total_taxable_income_paid : null;\r\n        this.frmData.amount_personal_income_still_received = this.inforFields('tien-duoc-nhan-nnt').is_show ? this.frmData.amount_personal_income_still_received : null;\r\n        // Nếu là mẫu html\r\n        if (item.fields) {\r\n          this.formItems = [];\r\n          this.customForms = [];\r\n          const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n          if (_arrayGrid && _arrayGrid.length > 0) {\r\n            this.extentionGrid.ma_hang = false;\r\n            this.extentionGrid.so_lo = false;\r\n            this.extentionGrid.han_dung = false;\r\n            this.extentionGrid.nuoc_san_xuat = false;\r\n            this.extentionGrid.don_hang_hop_dong = false;\r\n            this.extentionGrid.ma_quan_ly = false;\r\n            for (let i = 0; i < _arrayGrid.length; i++) {\r\n              const column = _arrayGrid[i]['name'];\r\n              const value = _arrayGrid[i]['is_show'];\r\n              const _ma = VStringService._convertToViKdau(column);\r\n              this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n            }\r\n          }\r\n          const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n          if (_dulieumorong.length > 0) {\r\n            _dulieumorong.forEach(item1 => {\r\n              if (item1.is_show) {\r\n                if (item1.data_type === 'chu') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxTextBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name, showColon: false },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'soluong') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxNumberBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name, showColon: false },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        },\r\n                        format: this.formatter.so_tncncdn,\r\n                        showClearButton: true\r\n                      },\r\n                      format: this.formatter.so_tncncdn,\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'ngay') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxDateBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name, showColon: false },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'danhmuc') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxSelectBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name, showColon: false }\r\n                    }\r\n                  );\r\n                }\r\n              }\r\n            });\r\n            this.formItems.push(this.createCustomGroup());\r\n            this.frmData.license_options = _dulieumorong;\r\n          }\r\n          else\r\n            this.frmData.license_options = [];\r\n          _dulieumorong.forEach(value => {\r\n            this.customerTempt[value.code] = value.value;\r\n          });\r\n        } else {\r\n          this.formItems = [];\r\n          this.customerTempt = {};\r\n          this.extentionGrid.ma_hang = false;\r\n          this.extentionGrid.so_lo = false;\r\n          this.extentionGrid.han_dung = false;\r\n          this.extentionGrid.nuoc_san_xuat = false;\r\n          this.extentionGrid.don_hang_hop_dong = false;\r\n          this.extentionGrid.ma_quan_ly = false;\r\n        }\r\n      }\r\n    });\r\n  }\r\n  onChangeCity = (e) => {\r\n    let ts = e;\r\n  }\r\n  changeValueTempt() {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (item.value === this.frmData.template_id) {\r\n        let isOldTemp = item.fields.filter(p => p.code == 'tien-dong-bao-hiem-nnt');\r\n        if (isOldTemp.length > 0) {\r\n          this.fields = item.fields;\r\n        } else {\r\n          this.fields = this.dataSourceTNCN\r\n        }\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.license_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        this.frmData.compulsory_insurance_payment = this.inforFields('tien-dong-bao-hiem-nnt').is_show ? this.frmData.compulsory_insurance_payment : null;\r\n        this.frmData.total_taxable_income_deducted = this.inforFields('tien-chiu-thue-nnt').is_show ? this.frmData.total_taxable_income_deducted : null;\r\n        this.frmData.total_taxable_income = this.inforFields('tien-tinh-thue-nnt').is_show ? this.frmData.total_taxable_income : null;\r\n        this.frmData.amount_personal_income_tax_withheld = this.inforFields('tien-thue-da-khau-tru-nnt').is_show ? this.frmData.amount_personal_income_tax_withheld : null;\r\n        this.frmData.total_taxable_income_paid = this.inforFields('tien-thue-da-tra-nnt').is_show ? this.frmData.total_taxable_income_paid : null;\r\n        this.frmData.amount_personal_income_still_received = this.inforFields('tien-duoc-nhan-nnt').is_show ? this.frmData.amount_personal_income_still_received : null;\r\n        // Nếu là mẫu html\r\n        if (item.fields && item.fields.length > 0) {\r\n          this.formItems = [];\r\n          this.customForms = [];\r\n          const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n          if (_arrayGrid && _arrayGrid.length > 0) {\r\n            this.extentionGrid.ma_hang = false;\r\n            this.extentionGrid.so_lo = false;\r\n            this.extentionGrid.han_dung = false;\r\n            this.extentionGrid.nuoc_san_xuat = false;\r\n            this.extentionGrid.don_hang_hop_dong = false;\r\n            this.extentionGrid.ma_quan_ly = false;\r\n            for (let i = 0; i < _arrayGrid.length; i++) {\r\n              const column = _arrayGrid[i]['name'];\r\n              const value = _arrayGrid[i]['is_show'];\r\n              let _ma = VStringService._convertToViKdau(column);\r\n              this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n            }\r\n          }\r\n          const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n          if (_dulieumorong.length > 0) {\r\n            _dulieumorong.forEach(item1 => {\r\n              if (item1.is_show) {\r\n                if (item1.data_type === 'chu') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxTextBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name, showColon: false },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'soluong') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxNumberBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name, showColon: false },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        },\r\n                        format: this.formatter.so_tncncdn,\r\n                        showClearButton: true\r\n                      },\r\n                      format: this.formatter.so_tncncdn,\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'ngay') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxDateBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name, showColon: false },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'danhmuc') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxSelectBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name, showColon: false }\r\n                    }\r\n                  );\r\n                }\r\n              }\r\n            });\r\n            this.formItems.push(this.createCustomGroup());\r\n          }\r\n          if (this.frmData.license_options && this.frmData.license_options.length > 0) {\r\n            this.frmData.license_options.forEach(iteminv => {\r\n              if (iteminv.data_type == 'soluong' && iteminv.value) {\r\n                this.customerTempt[iteminv.code] = parseInt(iteminv.value);\r\n              } else {\r\n                this.customerTempt[iteminv.code] = iteminv.value;\r\n              }\r\n            });\r\n          } else {\r\n            _dulieumorong.forEach(item2 => {\r\n              this.customerTempt[item2.code] = item2.value;\r\n            });\r\n            this.frmData.license_options = _dulieumorong;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (let key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.license_options = _dulieumorong;\r\n    });\r\n  }\r\n  ////// Tạo form mở rộng\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n  disableTemplateInput() {\r\n    if (this.frmData.license_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  tinhgiatri() {\r\n    if (!this.frmData.auto_value) {\r\n      if (this.inforFields('tien-duoc-nhan-nnt').is_show) {\r\n        if (this.inforFields('tien-thue-da-tra-nnt').is_show) {\r\n          if (this.frmData.total_taxable_income_paid != null && this.frmData.amount_personal_income_tax_withheld != null)\r\n            this.frmData.amount_personal_income_still_received = VChanggeMoneyService.roundNumber(this.frmData.total_taxable_income_paid - this.frmData.amount_personal_income_tax_withheld, this.formatter.so_tncncdn);\r\n          else if (this.frmData.total_taxable_income_paid != null)\r\n            this.frmData.amount_personal_income_still_received = VChanggeMoneyService.roundNumber(this.frmData.total_taxable_income_paid, this.formatter.so_tncncdn);\r\n          else if (this.frmData.amount_personal_income_tax_withheld != null)\r\n            this.frmData.amount_personal_income_still_received = VChanggeMoneyService.roundNumber(0 - this.frmData.amount_personal_income_tax_withheld, this.formatter.so_tncncdn);\r\n        }\r\n        else if (this.inforFields('tien-chiu-thue-nnt').is_show) {\r\n          if (this.frmData.total_taxable_income_deducted != null && this.frmData.amount_personal_income_tax_withheld != null)\r\n            this.frmData.amount_personal_income_still_received = VChanggeMoneyService.roundNumber(this.frmData.total_taxable_income_deducted - this.frmData.amount_personal_income_tax_withheld, this.formatter.so_tncncdn);\r\n          else if (this.frmData.total_taxable_income_deducted != null)\r\n            this.frmData.amount_personal_income_still_received = VChanggeMoneyService.roundNumber(this.frmData.total_taxable_income_deducted, this.formatter.so_tncncdn);\r\n          else if (this.frmData.amount_personal_income_tax_withheld != null)\r\n            this.frmData.amount_personal_income_still_received = VChanggeMoneyService.roundNumber(0 - this.frmData.amount_personal_income_tax_withheld, this.formatter.so_tncncdn);\r\n        }\r\n      }\r\n      else\r\n        this.frmData.amount_personal_income_still_received = null;\r\n    }\r\n  }\r\n  /* Xem trước chứng từ */\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm()) {\r\n        return;\r\n      }\r\n      let data = this.voucherService.taodulieuXemTruocChungTu(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.chungtu;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    let data = this.voucherService.taodulieuXemMau(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.chungtu;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.taxpayers_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.taxpayers_email = null;\r\n    }\r\n  }\r\n  keyDown(e: any) {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n  onChangeAutoValue() {\r\n    this.tinhgiatri();\r\n  };\r\n  /* Tạo mới */\r\n  handleAddNew() {\r\n    if (this.isExportInvoice) {\r\n      this.addNew();\r\n    } else {\r\n      if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n        this.confirmService.confirm()\r\n          .subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData(sEnum.statusInv.GhiTam, this.frmData).then(res => {\r\n                    if (res) {\r\n                      this.addNew();\r\n                    } else {\r\n                      return;\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  this.addNew();\r\n                  break;\r\n                case 'cancel':\r\n                  this.addNew();\r\n                  break;\r\n                default:\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n      } else {\r\n        this.addNew();\r\n      }\r\n    }\r\n  }\r\n  /* Refresh trường mở rộng */\r\n  refreshLicenseOprion() {\r\n    this.customForms.forEach(item => {\r\n      if (item.dataField) {\r\n        if (item.editorType == \"dxNumberBox\") {\r\n          this.customerTempt[item.dataField] = null;\r\n        } else {\r\n          this.customerTempt[item.dataField] = \"\";\r\n        }\r\n      }\r\n    })\r\n  }\r\n  /* Tạo mới */\r\n  addNew() {\r\n    const inv = Object.assign({}, this.frmData);\r\n    this.frmData = new VoucherModel(1);\r\n    this.frmData.template_id = inv.template_id;\r\n    this.frmData.license_series = inv.license_series;\r\n    this.frmData.template_code = inv.template_code;\r\n    this.frmData.license_date = inv.license_date;\r\n    this.frmData.province_name = inv.province_name;\r\n    this.refreshLicenseOprion();\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(inv.decimal_places_json));\r\n    this.emails = [];\r\n    this.DaXuat = false;\r\n    this.removeReadonlyAllForm();\r\n    setTimeout(() => {\r\n      this.setDataSessionStorage(this.frmData);\r\n      this.incomeConfirmationComponent.newLicenseConfirm_lct()\r\n    });\r\n  }\r\n  totalTaxableChange(e) {\r\n    if (this.inforFields('tien-thue-da-tra-nnt').is_show)\r\n      this.frmData.total_taxable_income_paid = e.value;\r\n    else\r\n      this.frmData.total_taxable_income_paid = null;\r\n    this.tinhgiatri()\r\n  }\r\n  inforFields(field_name) {\r\n    if (this.fields && this.fields.length > 0) {\r\n      let ojb = this.fields.filter(p => p.code == field_name);\r\n      let baoHiem = this.fields.filter(p => p.code == 'tien-dong-bao-hiem-nnt');\r\n      if (baoHiem[0].is_show) {\r\n        this.currentIndex = 3\r\n      } else {\r\n        this.currentIndex = 2\r\n      }\r\n      let calculation = true;\r\n      let arrayCalculation = this.fields.filter(item => item.code == \"tien-thue-da-khau-tru-nnt\" || item.code == \"tien-thue-da-tra-nnt\" || item.code == \"tien-duoc-nhan-nnt\").filter(item => item.is_show == true);\r\n      if (arrayCalculation.length < 3) {\r\n        calculation = false;\r\n      } else {\r\n        calculation = true;\r\n      }\r\n      let array = this.fields.filter(item => item.code == 'tien-dong-bao-hiem-nnt' || item.code == 'tien-chiu-thue-nnt' || item.code == \"tien-tinh-thue-nnt\" || item.code == \"tien-thue-da-khau-tru-nnt\" || item.code == \"tien-thue-da-tra-nnt\" || item.code == \"tien-duoc-nhan-nnt\");\r\n      this.listFieldsShow = array.filter(item => item.is_show == true);\r\n      let index = this.listFieldsShow.findIndex(item => item.code == field_name)\r\n      if (ojb.length > 0) {\r\n        if (ojb[0].is_show) {\r\n          return { is_show: true, index: index, calculation: calculation };\r\n        } else {\r\n          return { is_show: false };\r\n        }\r\n      } else {\r\n        return { is_show: false };\r\n      }\r\n    }\r\n    else\r\n      return { is_show: false };\r\n  }\r\n  onChangeCurrency(e) {\r\n    if (e) {\r\n      this.configs.system_parameter[\"is_voucher_currency\"] = e.value;\r\n      if (!e.value) {\r\n        this.frmData['is_voucher_currency'] = false;\r\n        this.frmData.currency_code = '';\r\n      } else {\r\n        this.frmData['is_voucher_currency'] = true;\r\n      }\r\n    }\r\n  }\r\n  setCurrencyVoucher() {\r\n    if (this.configs.system_parameter.voucher_currency != this.frmData.currency_code) {\r\n      this.configs.system_parameter[\"voucher_currency\"] = this.frmData.currency_code;\r\n      const id = this.configs.id.system_parameter;\r\n      const data = {\r\n        config: {\r\n          value: JSON.stringify(this.configs.system_parameter),\r\n          is_no_add_log: true\r\n        }\r\n      };\r\n      this.voucherService.updateConfig(id, data).subscribe(res => {\r\n        if (res.status == 'success') {\r\n          this.configsService.getAll().subscribe((res) => {\r\n            if (res.data && res.data.configs)\r\n              this.authService.setConfigs(res.data.configs);\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  updateOddCurrenVoucher() {\r\n    const id = this.configs.id.system_parameter;\r\n    const data = {\r\n      config: {\r\n        value: JSON.stringify(this.oldConfigs),\r\n        is_no_add_log: true\r\n      }\r\n    };\r\n    this.voucherService.updateConfig(id, data).subscribe(res => {\r\n      if (res.status == 'success') {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n        });\r\n      }\r\n    });\r\n  }\r\n  selectTab(e) {\r\n    const tab = e.itemData.code;\r\n    switch (tab) {\r\n      case 'CHUNG_TU':\r\n        this.connectWebsocket();\r\n        if (!this.incomeConfirmationComponent.checkDataFormChange_lct()) {\r\n          let confirm = this.confirmService.confirm('Có một số thông tin thay đổi chưa được lưu lại, bạn có muốn chuyển tab?')\r\n            .subscribe(\r\n              value => {\r\n                switch (value) {\r\n                  case 'yes':\r\n                    // this.eSubmit('GHI_TAM')\r\n                    this.incomeConfirmationComponent.setDataSessionStorage_lct();\r\n                    this.isVoucher = true;\r\n                    this.isIncomeConfirmation = false;\r\n                    break;\r\n                  case 'no':\r\n                    this.incomeConfirmationComponent.setFrmdataStorage_lct()\r\n                    this.incomeConfirmationComponent.setDataSessionStorage_lct();\r\n                    this.isVoucher = true;\r\n                    this.isIncomeConfirmation = false;\r\n                    break;\r\n                  case 'cancel':\r\n                    // this.addNew();\r\n                    this.selectedIndex = 1;\r\n                    break;\r\n                  default:\r\n                    break;\r\n                }\r\n              },\r\n              err => { },\r\n              () => {\r\n                confirm.unsubscribe();\r\n              }\r\n            );\r\n        } else {\r\n          this.isVoucher = true;\r\n          this.isIncomeConfirmation = false;\r\n        }\r\n        break;\r\n      case 'THU_XN':\r\n        if (!this.checkDataFormChange(this.valueChange, this.frmData) && !this.DaXuat) {\r\n          let confirm = this.confirmService.confirm('Có một số thông tin thay đổi chưa được lưu lại, bạn có muốn chuyển tab?')\r\n            .subscribe(\r\n              value => {\r\n                switch (value) {\r\n                  case 'yes':\r\n                    // this.eSubmit('GHI_TAM')\r\n                    this.setDataSessionStorage(this.frmData);\r\n                    this.isVoucher = false;\r\n                    this.isIncomeConfirmation = true;\r\n                    break;\r\n                  case 'no':\r\n                    this.frmData = JSON.parse(this.valueChange);\r\n                    this.setDataSessionStorage(this.frmData);\r\n                    this.isVoucher = false;\r\n                    this.isIncomeConfirmation = true;\r\n                    this.changeValueTempt();\r\n                    break;\r\n                  case 'cancel':\r\n                    // this.addNew();\r\n                    this.selectedIndex = 0;\r\n                    break;\r\n                  default:\r\n                    break;\r\n                }\r\n              },\r\n              err => { },\r\n              () => {\r\n                confirm.unsubscribe();\r\n              }\r\n            );\r\n        } else {\r\n          this.setDataSessionStorage(this.frmData)\r\n          this.isVoucher = false;\r\n          this.isIncomeConfirmation = true;\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  dong() {\r\n    this.router.navigate([`/system/voucher-tax`]);\r\n  }\r\n\r\n  changeDateTime = (e) => {\r\n    this.changeTemplateInvoice(e.value);\r\n  }\r\n\r\n  changeTemplateInvoice(strDate) {\r\n    let year = \"\";\r\n    if (VStringService._getValueToString(strDate) != \"\")\r\n      year = VStringService._getValueToString(strDate).substring(4, 2);\r\n    else {\r\n      let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n      year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n    }\r\n    let templates = this.select.templatesTT78;\r\n    this.select.templatesTT78 = [];\r\n    if (templates && templates.length > 0) {\r\n      templates.forEach(item => {\r\n        if (VStringService._getValueToString(item.name) != \"\")\r\n          item.name = item.name.replace(item.name.substring(15, 13), year);\r\n        this.select.templatesTT78.push(item);\r\n      });\r\n    }\r\n\r\n  }\r\n}\r\n\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IndexComponent } from '@modules/vouchers/components/index/index.component';\r\nimport { VoucherComponent } from '@modules/vouchers/components/voucher/voucher.component';\r\nimport { VatDeactivateGuard } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { VoucherResolver, ShowVoucherResolver } from './shared';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: IndexComponent },\r\n  {\r\n    path: 'create',\r\n    component: VoucherComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: VoucherResolver },\r\n    data: { brec: 'create_voucher' }\r\n  },\r\n  {\r\n    path: 'edit',\r\n    component: VoucherComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ShowVoucherResolver },\r\n    data: { brec: 'voucher_details' }\r\n  },\r\n  {\r\n    path: ':voucherId',\r\n    component: VoucherComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ShowVoucherResolver },\r\n    data: { brec: 'voucher_details' }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class VouchersRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {devextremeModule} from '@core/index';\r\nimport { VouchersRoutingModule } from './vouchers-routing.module';\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { VoucherComponent } from './components/voucher/voucher.component';\r\nimport { ImportVoucherFromExcelComponent } from './components/import-voucher-from-excel/import-voucher-from-excel.component';\r\nimport { SendMailComponent } from './components/send-mail/send-mail.component';\r\nimport { SendVouchersComponent } from './components/send-vouchers/send-vouchers.component';\r\nimport {VoucherResolver, ShowVoucherResolver} from './shared';\r\nimport { vTranslateModule } from '@core/module/v-translate.module';\r\nimport { DxFormModule, DxPopoverModule } from 'devextreme-angular';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport {SharedModule, VatSharedModule, SomeModule,NotifySuccessComponent} from '@shared/index';\r\nimport {VatDeactivateGuard} from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { SignatureOffComponent, SendListVoucherComponent, LogProcessVoucherComponent } from '@shared/index';\r\nimport {VatService} from '@modules/vat/shared';\r\nimport { ViewVoucherComponent } from './components/view-invoice/view-invoice.component';\r\nimport { SignManyComponent } from './components/sign-many/sign-many.component';\r\nimport { IncomeConfirmationComponent } from './components/income-confirmation/income-confirmation.component';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    VouchersRoutingModule,\r\n    SharedModule,\r\n    devextremeModule,\r\n    vTranslateModule,\r\n    DxPopoverModule,\r\n    NgxSpinnerModule,\r\n    VatSharedModule,\r\n    SomeModule,\r\n    ReactiveFormsModule,\r\n    DxFormModule,\r\n    NgxPaginationModule,\r\n    NgxSpinnerModule,\r\n  ],\r\n  declarations: [\r\n    IndexComponent,\r\n    VoucherComponent,\r\n    SignManyComponent,\r\n    ImportVoucherFromExcelComponent,\r\n    SendMailComponent,\r\n    SendVouchersComponent,\r\n    ViewVoucherComponent,\r\n    IncomeConfirmationComponent,\r\n  ],\r\n  entryComponents: [\r\n    ViewInvoiceMultipageComponent,\r\n    SignatureOffComponent,\r\n    SendListVoucherComponent,\r\n    LogProcessVoucherComponent,\r\n    ImportVoucherFromExcelComponent,\r\n    ViewVoucherComponent,\r\n    SignManyComponent,\r\n    PreviewInvoiceComponent\r\n  ],\r\n  providers: [\r\n    VoucherResolver,\r\n    ShowVoucherResolver,\r\n    VatDeactivateGuard,\r\n    ConfirmService,\r\n    VatService,\r\n    MyBsModalService,\r\n    ViewInvoiceService\r\n  ]\r\n})\r\nexport class VouchersModule { }\r\n"],"sourceRoot":""}