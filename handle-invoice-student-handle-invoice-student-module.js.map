{"version":3,"sources":["webpack:///./src/app/modules/handle-invoice-student/components/adjust/adjust-form/adjust-form.component.html","webpack:///./src/app/modules/handle-invoice-student/components/adjust/adjust-form/adjust-form.component.scss","webpack:///./src/app/modules/handle-invoice-student/components/adjust/adjust-form/adjust-form.component.ts","webpack:///./src/app/modules/handle-invoice-student/components/adjust/adjust-grip/adjust-grip.component.html","webpack:///./src/app/modules/handle-invoice-student/components/adjust/adjust-grip/adjust-grip.component.scss","webpack:///./src/app/modules/handle-invoice-student/components/adjust/adjust-grip/adjust-grip.component.ts","webpack:///./src/app/modules/handle-invoice-student/components/adjust/adjust-invoice/adjust-invoice.component.html","webpack:///./src/app/modules/handle-invoice-student/components/adjust/adjust-invoice/adjust-invoice.component.scss","webpack:///./src/app/modules/handle-invoice-student/components/adjust/adjust-invoice/adjust-invoice.component.ts","webpack:///./src/app/modules/handle-invoice-student/components/choose-hdck/choose-hdck.component.html","webpack:///./src/app/modules/handle-invoice-student/components/choose-hdck/choose-hdck.component.scss","webpack:///./src/app/modules/handle-invoice-student/components/choose-hdck/choose-hdck.component.ts","webpack:///./src/app/modules/handle-invoice-student/components/index/index.component.html","webpack:///./src/app/modules/handle-invoice-student/components/index/index.component.scss","webpack:///./src/app/modules/handle-invoice-student/components/index/index.component.ts","webpack:///./src/app/modules/handle-invoice-student/components/remove/remove.component.html","webpack:///./src/app/modules/handle-invoice-student/components/remove/remove.component.scss","webpack:///./src/app/modules/handle-invoice-student/components/remove/remove.component.ts","webpack:///./src/app/modules/handle-invoice-student/components/replace/replace-form/replace-form.component.html","webpack:///./src/app/modules/handle-invoice-student/components/replace/replace-form/replace-form.component.scss","webpack:///./src/app/modules/handle-invoice-student/components/replace/replace-form/replace-form.component.ts","webpack:///./src/app/modules/handle-invoice-student/components/replace/replace-grip/replace-grip.component.html","webpack:///./src/app/modules/handle-invoice-student/components/replace/replace-grip/replace-grip.component.scss","webpack:///./src/app/modules/handle-invoice-student/components/replace/replace-grip/replace-grip.component.ts","webpack:///./src/app/modules/handle-invoice-student/components/replace/replace-invoice/replace-invoice.component.html","webpack:///./src/app/modules/handle-invoice-student/components/replace/replace-invoice/replace-invoice.component.scss","webpack:///./src/app/modules/handle-invoice-student/components/replace/replace-invoice/replace-invoice.component.ts","webpack:///./src/app/modules/handle-invoice-student/handle-invoice-student.module.ts","webpack:///./src/app/modules/handle-invoice-student/handle-invoice-student.routing.ts","webpack:///./src/app/modules/handle-invoice-student/shared/adjust-invoice-student-resolver.service.ts","webpack:///./src/app/modules/handle-invoice-student/shared/handle-invoice-student.service.ts","webpack:///./src/app/modules/handle-invoice-student/shared/replace-invoice-student-resolver.service.ts"],"names":[],"mappings":"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","file":"handle-invoice-student-handle-invoice-student-module.js","sourcesContent":["module.exports = \"<div class=\\\"row invoice-form\\\">\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item *ngIf=\\\"!isTT78\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.invoice_form }\\\" dataField=\\\"invoice_release_id\\\"\\r\\n                  editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.invoice_releases, onValueChanged: templateChange, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"isTT78\\\" dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\" [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n        <dxi-validation-rule type=\\\"required\\\" message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n      </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"adjustment_form\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.adjustment_form}\\\"\\r\\n                  editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.adjustment_forms, onValueChanged: adjustmentFormChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.adjustment_form}} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"adjustment_object\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.adjustment_object}\\\"\\r\\n                  editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.adjustment_objects, onValueChanged: adjustmentObjectChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.adjustment_object}} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: _translate.GRID.INVOICE.invoice_date}\\\" editorType=\\\"dxDateBox\\\"\\r\\n                  [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate, onValueChanged: changeDateTime}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item cssClass=\\\"vat invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\"\\r\\n                  [label]=\\\"{text: _translate.GRID.INVOICE.invoice_number}\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                  [editorOptions]=\\\"{ disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_code}\\\" dataField=\\\"currency_code\\\"\\r\\n                  editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"currency_rate\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_rate}\\\"\\r\\n                  editorType=\\\"dxNumberBox\\\"\\r\\n                  [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: '0,###'}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_method}\\\" dataField=\\\"payment_method_name\\\"\\r\\n                  editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.payment_method_names, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.payment_method}} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item name=\\\"ht-xuat\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.export_form}}\\\"></dxo-label>\\r\\n          <div *dxTemplate>\\r\\n            <dx-select-box\\r\\n              [(value)]=\\\"frmData.status\\\"\\r\\n              displayExpr=\\\"name\\\"\\r\\n              valueExpr=\\\"code\\\"\\r\\n              [items]=\\\"htXuatOptions\\\"\\r\\n              [disabled] = \\\"!configs.system_parameter.allow_keep_invoice_number\\\"\\r\\n            ></dx-select-box>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"origin-invoice-number\\\">\\r\\n            <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number_original}}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-text-box\\r\\n                [(value)]=\\\"oldForm.invoice_number\\\"\\r\\n                disabled=\\\"true\\\"\\r\\n              ></dx-text-box>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"origin_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"soXacThucGoc\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.certificate_code}\\\"\\r\\n                  [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- <dxi-item dataField=\\\"doc_relate_symbol\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.doc_relate_symbol}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_symbol}} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"doc_relate_date\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.doc_relate_date}\\\"\\r\\n                  editorType=\\\"dxDateBox\\\"\\r\\n                  [editorOptions]=\\\"{displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          <dxi-validation-rule type=\\\"range\\\" [min]=\\\"minNgayVB\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}} {{ _translate.VALIDATION.less_date_inv }}\\\"></dxi-validation-rule>\\r\\n          <dxi-validation-rule type=\\\"range\\\" [max]=\\\"maxNgayVB\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}} {{ _translate.VALIDATION.than_date_curent }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item> -->\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_export_place\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.export_place}\\\" dataField=\\\"export_place\\\"\\r\\n                  editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.export_places, onValueChanged: exportPlaceChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_transport_number\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"transport_number\\\">\\r\\n          <dxo-label text=\\\"{{ 'CONTROLL.LABEL.transport_number' | translate }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isTT78\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Lý do thay thế -->\\r\\n        <dxi-item dataField=\\\"destroy_reason\\\">\\r\\n          <dxo-label text=\\\"Lý do điều chỉnh\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form\\r\\n      [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"student_code\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.code_student }\\\"\\r\\n                  [editorOptions]=\\\"{disabled: tod.student_code || disableForm.rest, isRequired: false}\\\">\\r\\n\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"student_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.name_student }\\\"\\r\\n                  [editorOptions]=\\\"{disabled: tod.student_name || disableForm.rest, isRequired: false}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"class_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.class }\\\"\\r\\n                  [editorOptions]=\\\"{disabled: tod.class_name || disableForm.rest, isRequired: false}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"study_year\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.study_year }\\\"\\r\\n                  [editorOptions]=\\\"{disabled: tod.study_year || disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"buyer_address\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.address }\\\"\\r\\n                  [editorOptions]=\\\"{disabled: tod.buyer_address || disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Tỷ lệ miễn giảm HP -->\\r\\n        <dxi-item dataField=\\\"student_reduce_rate_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n                  [label]=\\\"{text: _translate.CONTROLL.LABEL.exemption_and_reduction_rates }\\\"\\r\\n                  [editorOptions]=\\\"{items: TLMG_student, disabled: disableForm.rest, displayExpr: 'name', valueExpr: 'code'}\\\"\\r\\n        >\\r\\n        </dxi-item>\\r\\n        <dxi-item [label]=\\\"{text: 'Email'}\\\">\\r\\n          <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n            <div\\r\\n              class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n              <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\"\\r\\n                ></app-tag-input-email>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"col-md-12\\\" style=\\\"margin-top:7px;margin-bottom:7px\\\">\\r\\n    <dx-form>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!--        <dxi-item name=\\\"xuat-mau-bb\\\">-->\\r\\n        <!--          <dx-button id=\\\"btn-xuat-mau-bb\\\" (click)=\\\"xuatMauBienBan()\\\" icon=\\\"{{_translate.ICONS.file_word}}\\\"-->\\r\\n        <!--                     text=\\\"{{_translate.CONTROLL.BUTTON.export_record}}\\\" type=\\\"default\\\"></dx-button>-->\\r\\n        <!--        </dxi-item>-->\\r\\n\\r\\n        <ng-container *ngIf=\\\"configs.system_parameter.allow_keep_invoice_number\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item name=\\\"btn-chossen-hdck\\\">\\r\\n              <dx-button id=\\\"btn-chossen-hdck\\\" (click)=\\\"showModalHdck()\\\" icon=\\\"assets\\\\img\\\\icons\\\\GiuSo.png\\\"\\r\\n                         text=\\\"{{_translate.CONTROLL.BUTTON.select_inv_wait_sign}}\\\" type=\\\"default\\\"></dx-button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </ng-container>\\r\\n\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"350\\\"\\r\\n  [height]=\\\"175\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"Thông báo\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{_translate.CONFIRM.update_customer}}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{_translate.CONTROLL.LABEL.update}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\"","module.exports = \"::ng-deep .vat.invoice-number-create-invoice input{color:red;font-weight:bold}\\n\"","import { Component, EventEmitter, Input, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { AddCustomerComponent } from '@shared/components';\r\nimport { AuthService } from '@core/services';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport * as moment from 'moment';\r\nimport { pattern } from '@config/index';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { sEnum } from '@config/sEnum';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { VChanggeMoneyService } from '@core/library/invoice/v-changge-money.service';\r\nimport { VStringService } from '@core/library/public/v-string.service';\r\nimport { Helper } from '@core/helper/Helper';\r\nimport { Library } from '@core/library';\r\nimport { Router, NavigationExtras } from '@angular/router';\r\nimport { ChooseHdckComponent } from '@modules/handle-invoice-student/components/choose-hdck/choose-hdck.component';\r\n\r\n@Component({\r\n  selector: 'app-adjust-form',\r\n  templateUrl: './adjust-form.component.html',\r\n  styleUrls: ['./adjust-form.component.scss']\r\n})\r\nexport class AdjustFormComponent implements OnInit {\r\n\r\n  routeSub: Subscription;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n\r\n  @Input() frmData: any;\r\n  @Input() TLMG_student: any;\r\n  @Input() dataSource: any;\r\n  @Input() oldForm: any;\r\n  @Input() type: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('adjustmentObjectChange') adjustmentObject = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  @Output('onTemplateTT78TypeChange') onTemplateTT78TypeChange = new EventEmitter<any>();\r\n  @Input() infoDangKy: any;\r\n  @Input() isTT78: boolean;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() fileData: any;\r\n\r\n  bsModalRef: BsModalRef;\r\n  bsModalHdckRef: BsModalRef;\r\n\r\n  emails: any = [];\r\n  private arrEmail: any = [];\r\n\r\n  select: any = {};\r\n  pattern = pattern;\r\n  tax_codes: any = [];\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  minNgayVB: string;\r\n  maxNgayVB: string;\r\n  customerCurent: any = {};\r\n  showPopup = false;\r\n  disableForm = {\r\n    tax_code: true,\r\n    rest: true\r\n  };\r\n  formItems = [];\r\n  customForms = [];\r\n  customerTempt = {};\r\n  // thay đổi disable của 3 input customer_name, buyer_name, buyer_address\r\n  tod: any = {};\r\n  disableInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuatOptions = [];\r\n  _translate: any;\r\n  configs: any;\r\n  origin_btn_options = {\r\n    text: '', icon: 'fa fa-eye', type: 'default',\r\n    onClick: () => {\r\n      let ids = [];\r\n      ids.push(this.oldForm.id);\r\n\r\n      if (this.oldForm.adjustment_type === 5) {\r\n        if (this.oldForm.template_code.indexOf('02GTTT') >= 0)\r\n          window.open(`/system/handle-invoice-student/edit-adjust-sale/${this.oldForm.id}`, '_blank');\r\n        else\r\n          window.open(`/system/handle-invoice-student/edit-adjust-vat/${this.oldForm.id}`, '_blank');\r\n      } else if (this.oldForm.adjustment_type === 3) {\r\n        if (this.oldForm.template_code.indexOf('02GTTT') >= 0)\r\n          window.open(`/system/handle-invoice-student/edit-replace-sale/${this.oldForm.id}`, '_blank');\r\n        else\r\n          window.open(`/system/handle-invoice-student/edit-replace-vat/${this.oldForm.id}`, '_blank');\r\n      } else {\r\n        if (this.oldForm.template_code.indexOf('02GTTT') >= 0) {\r\n          window.open(`/system/student-sale-invoice/${this.oldForm.id}`, '_blank');\r\n        } else {\r\n          window.open(`/system/student-vat-invoice/${this.oldForm.id}`, '_blank');\r\n        }\r\n      }\r\n\r\n    }\r\n  };\r\n\r\n  mst_btn_options = {\r\n    text: '', icon: 'assets/img/icons/Them.png', type: 'default',\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n          if (customer.bank_account_number) {\r\n            this.frmData.bank_account_number = customer.bank_account_number;\r\n          }\r\n          if (customer.bank_name) {\r\n            this.frmData.bank_name = customer.bank_name;\r\n          }\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n    private router: Router,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.minNgayVB = moment(this.oldForm.invoice_date).format('YYYY-MM-DD');\r\n    this.maxNgayVB = moment(new Date()).format('YYYY-MM-DD');\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n\r\n      this.configs = this.authService.getConfigs();\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.currency_codes = data.init[1].DM_LOAI_TIEN;\r\n      this.select.customer_types = data.init[1].DM_NHOM_KHACH_HANG;\r\n      this.select.export_places = data.init[1].DM_NOI_XUAT_HOA_DON;\r\n      this.select.adjustment_forms = VSelectBoxService._adjustmentForms(this._translate);\r\n      this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate, this.frmData.status);\r\n      if (this.configs.system_parameter.allow_keep_invoice_number === false) {\r\n        this.htXuatOptions = this.htXuatOptions.filter(e => e.code !== sEnum.hinhThucXuat.XuatChoKy);\r\n      }\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n\r\n        temptTT78 = data.init[0].filter(item => item.template_type !== 'HOA_DON_KHOI_TAO_TU_MAY_TINH_TIEN'&& item.template_type !== 'PHIEU_THU_MAY_TINH_TIEN');\r\n        this.select.adjustment_forms = this.select.adjustment_forms.filter(p => p.code != 'TANG_GIAM');\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (Number.parseInt(this.frmData.invoice_number) > 0) {\r\n            if (this.frmData.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.frmData.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n        if (this.frmData.id)\r\n          this.changeTemplateInvoice(this.frmData.invoice_date);\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n      }\r\n    });\r\n    this.select.customer_object_codes = VSelectBoxService._customerObject(this._translate);\r\n    this.select.adjustment_objects = [];\r\n    if (this.frmData.adjustment_form) {\r\n      this.adjustmentFormChange({ value: this.frmData.adjustment_form });\r\n    }\r\n    // Set disabled cho đơn vị tổ chức\r\n    this.setDisabledByCustomer_object_code(this.frmData.customer_object_code);\r\n\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          // Nếu là mẫu html\r\n          if (item.fields && item.fields.length > 0) {\r\n            this.formItems = [];\r\n            this.customForms = [];\r\n            const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n            if (_dulieumorong.length > 0) {\r\n              _dulieumorong.forEach(item => {\r\n                if (item.is_show) {\r\n                  if (item.data_type === 'chu') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxTextBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'soluong') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxNumberBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'ngay') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxDateBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'danhmuc') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxSelectBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name }\r\n                      }\r\n                    );\r\n                  }\r\n                }\r\n              });\r\n              this.formItems.push(this.createCustomGroup());\r\n            }\r\n            if (this.frmData.invoice_options && this.frmData.invoice_options.length > 0) {\r\n              this.frmData.invoice_options.forEach(iteminv => {\r\n                this.customerTempt[iteminv.code] = iteminv.value;\r\n              });\r\n            } else {\r\n              _dulieumorong.forEach(item => {\r\n                this.customerTempt[item.code] = item.value;\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          // Nếu là mẫu html\r\n          if (item.fields && item.fields.length > 0) {\r\n            this.formItems = [];\r\n            this.customForms = [];\r\n            const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n            if (_dulieumorong.length > 0) {\r\n              _dulieumorong.forEach(item => {\r\n                if (item.is_show) {\r\n                  if (item.data_type === 'chu') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxTextBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'soluong') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxNumberBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'ngay') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxDateBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'danhmuc') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxSelectBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name }\r\n                      }\r\n                    );\r\n                  }\r\n                }\r\n              });\r\n              this.formItems.push(this.createCustomGroup());\r\n            }\r\n            if (this.frmData.invoice_options && this.frmData.invoice_options.length > 0) {\r\n              this.frmData.invoice_options.forEach(iteminv => {\r\n                this.customerTempt[iteminv.code] = iteminv.value;\r\n              });\r\n            } else {\r\n              _dulieumorong.forEach(item => {\r\n                this.customerTempt[item.code] = item.value;\r\n              });\r\n              this.frmData.invoice_options = _dulieumorong;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // this.listDxForm._results[1].readOnly = true;\r\n  }\r\n\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n  public removeReadonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n      // item.instance.resetValues();\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n  ////// Tạo form mở rộng\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (const key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.invoice_options = _dulieumorong;\r\n    });\r\n  }\r\n\r\n  setDisabledByCustomer_object_code(value) {\r\n    this.tod.customer_name = false;\r\n    this.tod.buyer_name = false;\r\n    this.tod.buyer_address = false;\r\n    switch (value) {\r\n      case 'DOANH_NGHIEP':\r\n        break;\r\n      case 'TRUONG_HOC':\r\n        this.frmData.customer_name = '';\r\n        this.tod.customer_name = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  getHtXuatValue() {\r\n    return this.frmData.status;\r\n  }\r\n\r\n  // gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    if (this.frmData.adjustment_object === 'MST') {\r\n      this.dataSource.items()[0].product_name = `Điều chỉnh mã số thuế Công ty/đơn vị mua hàng từ ${this.oldForm.buyer_tax_code} thành ${this.frmData.buyer_tax_code}`;\r\n      this.dataSource.reload();\r\n    }\r\n    if (this.frmData.adjustment_object === 'KH_DC') {\r\n      let _noiDungDc = '';\r\n      if (this.frmData.student_name && this.oldForm.student_name !== this.frmData.student_name) {\r\n        _noiDungDc = `Điều chỉnh tên học sinh từ ${this.oldForm.student_name} thành ${this.frmData.student_name}`;\r\n      }\r\n      if (this.frmData.buyer_address && this.oldForm.buyer_address !== this.frmData.buyer_address) {\r\n        if (_noiDungDc) {\r\n          _noiDungDc += '\\n';\r\n        }\r\n        _noiDungDc += `Điều chỉnh địa chỉ của đơn vị mua hàng từ ${this.oldForm.buyer_address} thành ${this.frmData.buyer_address}`;\r\n      }\r\n      this.dataSource.items()[0].product_name = _noiDungDc;\r\n      this.dataSource.reload();\r\n    }\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  adjustmentFormChange = (e) => {\r\n    switch (e.value) {\r\n      case 'THONG_TIN':\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Tiền chữ',\r\n            code: 'TIEN_CHU'\r\n          },\r\n          {\r\n            name: 'Tên học sinh, Địa chỉ, ...',\r\n            code: 'KH_DC'\r\n          },\r\n        ];\r\n        break;\r\n      case 'TANG':\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Hàng hóa dịch vụ',\r\n            code: 'HH_DV'\r\n          },\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC_TANG'\r\n          },\r\n        ];\r\n        break;\r\n      case 'GIAM':\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Hàng hóa dịch vụ',\r\n            code: 'HH_DV'\r\n          },\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC_GIAM'\r\n          },\r\n        ];\r\n        break;\r\n      case 'KHAC':\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC'\r\n          },\r\n        ];\r\n        this.frmData.adjustment_object = 'KHAC';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  adjustmentObjectChange = (e) => {\r\n    if (this.frmData.adjustment_form === 'THONG_TIN' && e.value === 'KH_DC') {\r\n      this.disableForm = { tax_code: false, rest: false };\r\n      this.adjustmentObject.emit('THONG_TIN_KH_DC');\r\n    } else if (this.frmData.adjustment_form === 'THONG_TIN' && e.value === 'TIEN_CHU') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('THONG_TIN_TIEN_CHU');\r\n    } else if (this.frmData.adjustment_form === 'KHAC' && e.value === 'KHAC') {\r\n      this.disableForm = { tax_code: false, rest: false };\r\n      this.adjustmentObject.emit('KHAC_KHAC');\r\n    } else if (this.frmData.adjustment_form === 'TANG' && e.value === 'HH_DV') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('TANG_HH_DV');\r\n    } else if (this.frmData.adjustment_form === 'TANG' && e.value === 'KHAC_TANG') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('TANG_KHAC_TANG');\r\n    } else if (this.frmData.adjustment_form === 'GIAM' && e.value === 'HH_DV') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('GIAM_HH_DV');\r\n    } else if (this.frmData.adjustment_form === 'GIAM' && e.value === 'KHAC_GIAM') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('GIAM_KHAC_GIAM');\r\n    }\r\n    if (e.value) {\r\n      this.frmData.buyer_tax_code = this.oldForm.buyer_tax_code;\r\n      this.frmData.customer_name = this.oldForm.customer_name;\r\n      this.frmData.buyer_address = this.oldForm.buyer_address;\r\n    }\r\n    // this.adjustmentObject.emit(e.value);\r\n  };\r\n\r\n  taxCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    if (customer.bank_account_number) {\r\n      this.frmData.bank_account_number = customer.bank_account_number;\r\n    }\r\n    if (customer.bank_name) {\r\n      this.frmData.bank_name = customer.bank_name;\r\n    }\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customer_object_codeChange = (e) => {\r\n    this.setDisabledByCustomer_object_code(e.value);\r\n  };\r\n\r\n  templateChange = (e) => {\r\n    this.select.invoice_releases.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.template_id = item.template_id;\r\n        this._objTemplateSelect = item;\r\n        this.onTemplateTypeChange.emit(item);\r\n        if (!this._objTemplateSelect.is_discount) {\r\n          this.dataSource.items().forEach(item => {\r\n            item.discount = null;\r\n            item.amount_discount = null;\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n          }\r\n        }\r\n        // Nếu là mẫu html\r\n        if (item.fields) {\r\n          this.formItems = [];\r\n          this.customForms = [];\r\n          const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n          if (_dulieumorong.length > 0) {\r\n            _dulieumorong.forEach(item => {\r\n              if (item.is_show) {\r\n                if (item.data_type === 'chu') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxTextBox',\r\n                      dataField: item.code,\r\n                      label: { text: item.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, disabled: true\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item.data_type === 'soluong') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxNumberBox',\r\n                      dataField: item.code,\r\n                      label: { text: item.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, disabled: true\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item.data_type === 'soluong') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxNumberBox',\r\n                      dataField: item.code,\r\n                      label: { text: item.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, disabled: true\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item.data_type === 'ngay') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxDateBox',\r\n                      dataField: item.code,\r\n                      label: { text: item.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: true\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item.data_type === 'danhmuc') {\r\n                  this.customForms.push(\r\n                    {\r\n                      editorType: 'dxSelectBox',\r\n                      dataField: item.code,\r\n                      label: { text: item.name }\r\n                    }\r\n                  );\r\n                }\r\n              }\r\n            });\r\n            this.formItems.push(this.createCustomGroup());\r\n          }\r\n          _dulieumorong.forEach(item => {\r\n            this.customerTempt[item.code] = item.value;\r\n          });\r\n\r\n        } else {\r\n          this.formItems = [];\r\n          this.customerTempt = {};\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.invoice_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateTT78TypeChange.emit(item);\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        if (!this._oTemplateTT78.is_discount) {\r\n          this.invoice_products.load().then((dataSource) => {\r\n            dataSource.forEach((item, index) => {\r\n              item.discount = null;\r\n              item.amount_discount = null;\r\n            });\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n          }\r\n        }\r\n\r\n        // Nếu là mẫu html\r\n        if (item.fields) {\r\n          this.formItems = [];\r\n          this.customForms = [];\r\n          const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n          const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n          if (_dulieumorong.length > 0) {\r\n            _dulieumorong.forEach(item1 => {\r\n              if (item1.is_show) {\r\n                if (item1.data_type === 'chu') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //  cssClass: 'vat layout_input',\r\n                      editorType: 'dxTextBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'soluong') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //    cssClass: 'vat layout_input',\r\n                      editorType: 'dxNumberBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'ngay') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //   cssClass: 'vat layout_input',\r\n                      editorType: 'dxDateBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'danhmuc') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //    cssClass: 'vat layout_input',\r\n                      editorType: 'dxSelectBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name }\r\n                    }\r\n                  );\r\n                }\r\n              }\r\n            });\r\n            this.formItems.push(this.createCustomGroup());\r\n            this.frmData.invoice_options = _dulieumorong;\r\n          }\r\n          else\r\n            this.frmData.invoice_options = [];\r\n          _dulieumorong.forEach(value => {\r\n            this.customerTempt[value.code] = value.value;\r\n          });\r\n        } else {\r\n          this.formItems = [];\r\n          this.customerTempt = {};\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  currencyCodeChange = (e) => {\r\n    if (this.frmData.currency_code === 'VND') {\r\n      this.frmData.currency_rate = null;\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(this.frmData.total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n  exportPlaceChange = (e) => {\r\n    this.select.export_places.forEach(item => {\r\n      if (e.value === item.code) {\r\n        this.frmData.export_address = item.dia_chi;\r\n      }\r\n    });\r\n  };\r\n  currencyRateChange = (e) => {\r\n    if (!this.isTT78)\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n    else\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n  };\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  xuatMauBienBan() {\r\n    Library.showloading();\r\n    const inv = Object.assign({}, this.oldForm);\r\n    inv.doc_relate_date = this.frmData.doc_relate_date;\r\n    inv.doc_relate_symbol = this.frmData.doc_relate_symbol;\r\n    inv.destroy_reason = this.frmData.destroy_reason;\r\n\r\n    inv.invoice_files = [];\r\n    this.vatService.xuatMauBienBanDc(inv).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  showModalHdck() {\r\n    const initialState = {\r\n      invoiceNumberOrigin: this.oldForm.invoice_number,\r\n      templateCode: this.oldForm.template_code,\r\n      invoiceDateOrigin: this.oldForm.invoice_date,\r\n      onSave: (data) => {\r\n        this.frmData.id = data.id;\r\n        this.frmData.invoice_date = data.invoice_date;\r\n        this.frmData.invoice_number = data.invoice_number;\r\n        this.frmData.batch_id = data.batch_id;\r\n      }\r\n    };\r\n    this.bsModalHdckRef = this.modalService.show(ChooseHdckComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-lg full-modal',\r\n      initialState\r\n    });\r\n  }\r\n\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n\r\n  changeDateTime = (e) => {\r\n    this.changeTemplateInvoice(e.value);\r\n  }\r\n\r\n  changeTemplateInvoice(strDate) {\r\n    if (this.isTT78) {\r\n      let year = \"\";\r\n      if (VStringService._getValueToString(strDate) != \"\")\r\n        year = VStringService._getValueToString(strDate).substring(4, 2);\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n      }\r\n      let templates = this.select.templatesTT78;\r\n      this.select.templatesTT78 = [];\r\n      if (templates && templates.length > 0) {\r\n        templates.forEach(item => {\r\n          if (VStringService._getValueToString(item.name) != \"\")\r\n            item.name = item.name.replace(item.name.substring(4, 2), year);\r\n          // for (const key in item) {\r\n          //   if (item.hasOwnProperty(key)) {\r\n          //     const value = item[key];\r\n          //     this._oTemplateTT78[key] = value;\r\n          //   }\r\n          // }\r\n          if (item.value === this.frmData.template_id) {\r\n            this.onTemplateTT78TypeChange.emit(item);\r\n          //  item.invoice_series = item.invoice_series.replace(item.invoice_series.substring(3, 1), year);\r\n           // this.frmData.invoice_series = item.invoice_series;\r\n           // this.frmData.template_code = item.template_code;\r\n          }\r\n          this.select.templatesTT78.push(item);\r\n        });\r\n      }\r\n    }\r\n  }\r\n  disableTemplateInput() {\r\n    if (this.frmData.invoice_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","module.exports = \"<!-- Phần không tự tính giá trị, nhập mẫu bảng kê -->\\r\\n<div class=\\\"row support-invoice\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <!-- <dx-check-box *ngIf=\\\"configs.system_parameter.view_sale_by_phone\\\" id=\\\"auto-input\\\"\\r\\n                    text=\\\"{{ _translate.CONTROLL.LABEL.sale_by_phone }}\\\"\\r\\n                    [(value)]=\\\"frmData.sale_by_phone\\\"></dx-check-box> -->\\r\\n      <dx-check-box text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\" [(value)]=\\\"frmData.auto_value\\\"\\r\\n        (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <dx-check-box *ngIf=\\\"isHdGTGT\\\" text=\\\"{{_translate.CONTROLL.LABEL.auto_value_price }}\\\"\\r\\n        [(value)]=\\\"frmData.auto_value_price\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- <button type=\\\"button\\\" (click)=\\\"aa()\\\">aaa</button> -->\\r\\n\\r\\n<!-- phần table hiển thị -->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onCellClick)=\\\"onCellClick($event)\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"gripAllowEdit\\\"></dxo-editing>\\r\\n      <!-- <dxo-selection showCheckBoxesMode=\\\"none\\\" mode=\\\"single\\\"></dxo-selection> -->\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\" [allowEditing]=\\\"false\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"view_order\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\" width=\\\"{{ _translate.GRID_WIDTH.stt }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column *ngIf=\\\"isTextProductName\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        [editorOptions]=\\\"{showClearButton: true}\\\" dataField=\\\"product_name\\\"\\r\\n        caption=\\\"{{ _translate.GRID.REVENUE.revenue_name }}\\\" alignment=\\\"left\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"product_name\\\" valueExpr=\\\"product_name\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column *ngIf=\\\"!isTextProductName\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" dataField=\\\"product_name\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <!-- <dxi-column [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" dataField=\\\"product_code\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.REVENUE.revenue_code }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column> -->\\r\\n\\r\\n      <dxi-column dataField=\\\"school_fee_month\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.school_fee_month }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thang_thu_hp }}\\\" [editorOptions]=\\\"{disabled: true}\\\" alignment=\\\"center\\\"\\r\\n        [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Học kỳ -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_semester\\\" dataField=\\\"semester\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.hoc_ky }}\\\" caption=\\\"{{  _translate.GRID.INVOICE_DETAILS.semester }}\\\"\\r\\n        alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"unit_code\\\" [editorOptions]=\\\"lookupColumnOptions\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\" width=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\" [editorOptions]=\\\"{ format: formatter.so_luong }\\\"\\r\\n        [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\" [editorOptions]=\\\"{ format: formatter.don_gia }\\\"\\r\\n        [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"isHdGTGT\\\" dataField=\\\"vat\\\" [editorOptions]=\\\"{showClearButton: true}\\\"\\r\\n        headerCellTemplate=\\\"vatHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.vat }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.vat }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"isHdGTGT\\\" dataField=\\\"amount_vat\\\" headerCellTemplate=\\\"amountVatHeader\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tien_thue }\\\" [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.tong_tien_sau_thue }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tong_tien_sau_thue }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n\\r\\n      <!-- config column header -->\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.quantity }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }} <img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_promotion_new\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.total_money\\r\\n          }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\"> {{ _translate.GRID.INVOICE_DETAILS.amount_vat\\r\\n          }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:15px}.support-invoice .support-link img{margin-right:15px;margin-top:-2px}.support-invoice #auto-input{margin-right:75px}\\n\"","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxDataGridComponent, DxFormComponent } from 'devextreme-angular';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\n\r\nimport { AuthService, Helper, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { ConfigDecimalComponent } from '@shared/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { sEnum } from '@config/sEnum';\r\nimport * as moment from 'moment';\r\nimport { SelectMonthComponent } from '@shared/components/select-month/select-month.component';\r\n\r\n@Component({\r\n  selector: 'app-adjust-grip',\r\n  templateUrl: './adjust-grip.component.html',\r\n  styleUrls: ['./adjust-grip.component.scss']\r\n})\r\nexport class AdjustGripComponent implements OnInit, OnDestroy {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n\r\n  routeSub: Subscription;\r\n\r\n  contextMenu = [{ text: 'Thêm' }, { text: 'Xóa' }];\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() not_auto: any;\r\n  @Input() oldForm: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() isTT78: boolean;\r\n  @Input() _oTemplateTT78: any;\r\n  select: any = {};\r\n  @Input() frmData: any;\r\n  fee_months: any;\r\n  bsModalRef: BsModalRef;\r\n  showPopup = false;\r\n  dataExcelFile: any = null;\r\n  ttDaXuatHoaDon = false;\r\n  isTextProductName = false;\r\n  gripAllowEdit = false;\r\n  configs: any;\r\n  isHdGTGT = true;\r\n  _translate: any;\r\n  selectMonth = false;\r\n  @Output('gripChange') gripChange = new EventEmitter<Array<any>>();\r\n  @Output('autoChange') autoChange = new EventEmitter<any>();\r\n\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.oldForm.template_code.indexOf('02GTTT') >= 0 || this.oldForm.template_code == \"2\") {\r\n      this.isHdGTGT = false;\r\n    }\r\n    this.configs = this.authService.getConfigs();\r\n    const currentUser = this.authService.getCurrentUser();\r\n    const moth: any = moment();\r\n    this.select.arrayYears = Helper.listYears(currentUser.account.start_time_study, moth);\r\n    this.fee_months = this.select.arrayYears[1];\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.products = [];\r\n      this.oldForm.invoice_products.forEach(item => {\r\n        this.select.products.push(item);\r\n      });\r\n      this.select.productsView = {\r\n        store: new CustomStore({\r\n          key: 'product_name',\r\n          loadMode: 'raw',\r\n          load: (loadOptions) => {\r\n            return this.select.products;\r\n          },\r\n          byKey: function (key) {\r\n            return [];\r\n          }\r\n        }),\r\n        paginate: true,\r\n        sort: 'product_name'\r\n      };\r\n    });\r\n\r\n    //Event\r\n    this.createUpdateEvent();\r\n  }\r\n\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n\r\n  aa() {\r\n    this.isTextProductName = !this.isTextProductName;\r\n    // this.dataGrid.instance.repaint()\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.repaint();\r\n      this.dataGrid.instance.refresh();\r\n    }, 100);\r\n  }\r\n\r\n  changeColumnProductNameToSelect() {\r\n    this.isTextProductName = true;\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.refresh();\r\n    }, 100);\r\n  }\r\n\r\n  changeColumnProductNameToText() {\r\n    this.isTextProductName = false;\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.refresh();\r\n    }, 100);\r\n  }\r\n\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        this.invoice_products.byKey(key).then((row) => {\r\n          switch (column) {\r\n            case 'view_order':\r\n              this.view_orderChange();\r\n              break;\r\n            case 'product_name':\r\n              this.product_nameChange(row);\r\n              break;\r\n            case 'unit_code':\r\n              this.unit_codeChange(row);\r\n              break;\r\n            case 'quantity':\r\n            case 'price':\r\n            case 'price_nte':\r\n            case 'vat':\r\n            case 'amount':\r\n            case 'amount_vat':\r\n            case 'amount_after_vat':\r\n            case 'amount_discount':\r\n            case 'discount':\r\n            case 'amount_without_discount':\r\n            case 'other_tax':\r\n            case 'other_charge':\r\n              this._tinhGiaTri();\r\n              break;\r\n            default:\r\n              break;\r\n            // }\r\n          }\r\n        }, (error) => {\r\n          alert(error);\r\n        });\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onCellClick(e) {\r\n    if (e.column.dataField === 'school_fee_month') {\r\n      this.selectMonth = false;\r\n      const product = this.select.products.filter(p => p.code === e.row.data.product_code)[0];\r\n      if (product) {\r\n        if (product.form_revenue === sEnum.hinhthucthu.Thang) {\r\n          const initialState = {\r\n            fee_months: this.fee_months,\r\n            month_year: e.row.data.school_fee_month,\r\n            product_code: e.row.data.product_code\r\n          };\r\n          this.bsModalRef = this.modalService.show(SelectMonthComponent, {\r\n            class: 'second child-modal',\r\n            initialState,\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n          });\r\n          let index = 0;\r\n          this.modalService.onHide.subscribe(() => {\r\n            if (!this.selectMonth) {\r\n              index++;\r\n              let tr = index;\r\n              if (index == 1) {\r\n                if (e.row.data.product_code == this.bsModalRef.content.product_code) {\r\n                  if (this.bsModalRef.content.successSaveItem) {\r\n                    e.row.data.school_fee_month = this.bsModalRef.content.successSaveData;\r\n                  }\r\n                  else {\r\n                  }\r\n                  let _lstMonth = [];\r\n                  if (e.row.data.school_fee_month)\r\n                    _lstMonth = e.row.data.school_fee_month.split(';').filter(p => p !== '');\r\n                  if (_lstMonth && _lstMonth.length > 0) {\r\n                    e.row.data.quantity = _lstMonth.length;\r\n                  } else {\r\n                    e.row.data.quantity = null;\r\n                  }\r\n                  if (e.row.data.quantity) {\r\n                    e.row.data.amount = e.row.data.price ? parseFloat(e.row.data.price) * parseFloat(e.row.data.quantity) : 0;\r\n                  } else {\r\n                    e.row.data.amount = e.row.data.price ? parseFloat(e.row.data.price) : 0;\r\n                  }\r\n                  if (this.isHdGTGT) {\r\n                    e.row.data.amount_vat = (e.row.data.vat >= 0) ? this.caculatorAmountVat(e.row.data.amount, e.row.data.vat) : null;\r\n                  } else {\r\n                    e.row.data.amount_vat = null;\r\n                  }\r\n                  e.row.data.amount_after_vat = e.row.data.amount + (e.row.data.amount_vat != null ? e.row.data.amount_vat : 0);\r\n                  this.invoice_products.update(e.row.data.id, e.row.data);\r\n                  this._tinhGiaTri();\r\n                  return true;\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.dataField === 'product_name' && e.parentType === 'dataRow' && e.editorName !== 'dxSelectBox') {\r\n      e.editorName = 'dxTextArea';\r\n    }\r\n    // if (e.parentType === 'dataRow') {\r\n    //   e.editorOptions.onFocusOut = (args) => {\r\n    //     if (e.dataField === 'unit_code') {\r\n    //       const _obj = this.select.unit_codes.filter(p => p.code === e.row.data.unit_code)[0];\r\n    //       if (_obj) {\r\n    //         e.row.data.unit_name = _obj.name;\r\n    //       } else {\r\n    //         e.row.data.unit_name = '';\r\n    //       }\r\n    //     }\r\n    //     if (e.dataField === 'country_code') {\r\n    //       const _obj = this.select.countrys.filter(p => p.code === e.row.data.country_code)[0];\r\n    //       if (_obj) {\r\n    //         e.row.data.country_name = _obj.name;\r\n    //       } else {\r\n    //         e.row.data.country_name = '';\r\n    //       }\r\n    //     }\r\n    //     this.invoice_products.update(e.row.data.id, e.row.data);\r\n    //   };\r\n    // }\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount' || e.dataField === 'amount_vat' || e.dataField === 'amount_after_vat') && e.parentType === 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row.rowType === 'data') {\r\n      e.items = [{\r\n        text: 'Thêm hàng',\r\n        onItemClick: () => {\r\n          this.addRow();\r\n        }\r\n      },\r\n      {\r\n        text: 'Xóa hàng',\r\n        onItemClick: () => {\r\n          this.deleteRow(e.row.data);\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n  addRow() {\r\n    let len, order;\r\n    if (this.dataSource.items().length >= 1) {\r\n      len = this.dataSource.items().length;\r\n      order = this.dataSource.items()[len - 1].order + 1;\r\n    } else {\r\n      order = 1;\r\n    }\r\n    this.invoice_products.insert(this.frmData.add_invoice_products_data(order, order));\r\n    this.dataSource.reload();\r\n  }\r\n\r\n  view_orderChange() {\r\n    if (!this.isTT78) {\r\n      let _index = 0;\r\n      this.dataSource.items().forEach(item => {\r\n        if (item.view_order && VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          item.view_order = ++_index;\r\n        }\r\n        if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          if (!item.is_money_service) {\r\n            item.view_order = ++_index;\r\n          } else {\r\n            item.view_order = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      let _index = 0;\r\n      this.dataSource.items().forEach(item => {\r\n        if (item.view_order && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          item.view_order = ++_index;\r\n        }\r\n        if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          if (!item.is_money_service) {\r\n            item.view_order = ++_index;\r\n          } else {\r\n            item.view_order = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  // Thay đổi cột mã hàng\r\n  product_nameChange(row) {\r\n    setTimeout(() => {\r\n      this.select.products.some(item => {\r\n        if (item.product_name === row.product_name) {\r\n          row.unit_code = this.checkUnitCode(item.unit_code);\r\n          row.quantity = item.quantity ? parseFloat(item.quantity) : item.quantity;\r\n          row.price = item.price ? parseFloat(item.price) : item.price;\r\n          row.price_nte = item.price_nte ? parseFloat(item.price_nte) : item.price_nte;\r\n          row.amount = item.price ? parseFloat(item.price) : 0;\r\n          row.engine_number = item.engine_number;\r\n          row.school_fee_month = item.school_fee_month;\r\n          row.chassis_number = item.chassis_number;\r\n          row.other_tax = item.other_tax;\r\n          row.product_code = item.product_code;\r\n          row.other_charge = item.other_charge;\r\n          row.semester = item.semester;\r\n          if (this.isHdGTGT) {\r\n            row.vat = item.vat != null ? item.vat.toString() : null;\r\n            row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n            row.amount_after_vat = row.amount + row.amount_vat;\r\n          } else {\r\n            row.amount_after_vat = row.amount;\r\n          }\r\n          this.invoice_products.update(row.order, row);\r\n          return true;\r\n        }\r\n      });\r\n      this._tinhGiaTri();\r\n    }, 200);\r\n\r\n  }\r\n\r\n  unit_codeChange(row) {\r\n    let _obj = this.select.unit_codes.filter(p => p.code == row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code == unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _tinhGiaTri() {\r\n    if (!this.isTT78) {\r\n      setTimeout(() => {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._objTemplateSelect, this.configs.system_parameter);\r\n        if (VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBay\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayThuTien\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayTongHop\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayChung\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonXangDau) {\r\n          VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n        }\r\n      }, 100);\r\n    }\r\n    else {\r\n      setTimeout(() => {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._oTemplateTT78, this.configs.system_parameter);\r\n        if (VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBay\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayThuTien\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayTongHop\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayChung\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonXangDau) {\r\n          VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n        }\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    let p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    this.modalService.onHide.subscribe(() => {\r\n      let data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n    });\r\n  }\r\n\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    // setTimeout(() => {\r\n    const check = confirm('Bạn có đồng ý xóa không?');\r\n    if (check && !this.ttDaXuatHoaDon) {\r\n      setTimeout(() => {\r\n        this.invoice_products.remove(item.id);\r\n\r\n        // this.dataSource.store().remove(item.id);\r\n        this.dataSource.reload();\r\n        this._tinhGiaTri();\r\n\r\n      }, 100);\r\n    }\r\n    // }, 200);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  changePhiDV(row) {\r\n    this.view_orderChange();\r\n    if (row.is_money_service) {\r\n      row.commercial_discount = false;\r\n    }\r\n    if (row.is_money_service && VStringService._getValueToString(row.product_name) === '') {\r\n      row.product_name = 'Phí dịch vụ';\r\n      this.invoice_products.update(row.id, row);\r\n    } else if (!row.is_money_service && VStringService._getValueToString(row.product_name) === 'Phí dịch vụ') {\r\n      row.product_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  cktmChange(row) {\r\n    if (row.commercial_discount) {\r\n      row.is_money_service = false;\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"container-fluid\\\" style=\\\"margin-bottom: 0!important; padding-left: 0!important;\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"pl-0 col-md-12\\\">\\r\\n      <div class=\\\"button-redirect\\\">\\r\\n        <ul class=\\\"nav nav-tabs\\\">\\r\\n          <li class=\\\"nav-item\\\">\\r\\n            <a class=\\\"nav-link active\\\" href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.BUTTON.report_adjustment}}</a>\\r\\n          </li>\\r\\n          <li class=\\\"nav-item\\\">\\r\\n            <a class=\\\"nav-link \\\" (click)=\\\"routeReport()\\\" href=\\\"javascript:void(0)\\\">\\r\\n              {{this.textReport}}\\r\\n            </a>\\r\\n          </li>\\r\\n        </ul>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<form (ngSubmit)=\\\"onSubmit()\\\">\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <!-- phần form thông tin -->\\r\\n    <app-adjust-form\\r\\n      [type]=\\\"1\\\"\\r\\n      [frmData]=\\\"frmData\\\"\\r\\n      [oldForm]=\\\"oldForm\\\"\\r\\n      [dataSource]=\\\"dataSource\\\"\\r\\n      [invoice_products]=\\\"invoice_products\\\"\\r\\n      [formatter]=\\\"formatter\\\"\\r\\n      [_objTemplateSelect]=\\\"_objTemplateSelect\\\"\\r\\n      [fileData]=\\\"fileData\\\"\\r\\n      [TLMG_student]=\\\"select.TLMG\\\"\\r\\n      (adjustmentObjectChange)=\\\"adjustmentObjectChange($event)\\\"\\r\\n      (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\"\\r\\n      [_oTemplateTT78] = \\\"_oTemplateTT78\\\"\\r\\n      [isTT78] = \\\"isTT78\\\"\\r\\n      [infoDangKy] = \\\"infoDangKy\\\"\\r\\n      (onTemplateTT78TypeChange)=\\\"onTemplateTT78TypeChange($event)\\\"\\r\\n    ></app-adjust-form>\\r\\n\\r\\n    <!-- <dx-button id=\\\"btn-chossen-hdck\\\" (click)=\\\"showModalHdck()\\\" icon=\\\"assets\\\\img\\\\icons\\\\GiuSo.png\\\" text=\\\"Chọn hóa đơn chờ ký\\\" type=\\\"default\\\"></dx-button> -->\\r\\n\\r\\n    <!-- table product -->\\r\\n    <app-adjust-grip\\r\\n        #child\\r\\n        [dataSource]=\\\"dataSource\\\"\\r\\n        [invoice_products]=\\\"invoice_products\\\"\\r\\n        [formatter]=\\\"formatter\\\"\\r\\n        [oldForm]=\\\"oldForm\\\"\\r\\n        [frmData]=\\\"frmData\\\"\\r\\n        [isTT78] = \\\"isTT78\\\"\\r\\n        [_oTemplateTT78] = \\\"_oTemplateTT78\\\"\\r\\n        [_objTemplateSelect]=\\\"_objTemplateSelect\\\">\\r\\n      >\\r\\n    </app-adjust-grip>\\r\\n\\r\\n    <!-- <button type=\\\"button\\\" (click)=\\\"updateCustomer()\\\">aa</button> -->\\r\\n\\r\\n    <div class=\\\"table-footer\\\">\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_after_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                      [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: true,step:'0'}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-2\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-vat-table-footer\\\" dataField=\\\"total_amount_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                      [editorOptions]=\\\"{format: formatter.tien_thue, disabled: true, step:'0'}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-after-vat-table-footer\\\" dataField=\\\"amount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                      [editorOptions]=\\\"{format: formatter.tong_tien, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-4\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_without_discount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                      [editorOptions]=\\\"{format: formatter.thanh_tien_chua_ck, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <!-- vùng chọn file -->\\r\\n    <div class=\\\"row after-table\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <file-upload-multiple [fileData]=\\\"fileData\\\" (fileChange)=\\\"getFileData($event)\\\"></file-upload-multiple>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <!-- <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item dataField=\\\"aaa\\\" [label]=\\\"{text: 'Tiền phí khác'}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: '0,###'}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"on_currency_amount\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.on_currency_amount}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: '0,###', disabled: checkDisabledTotalPaymentInWord(),onKeyDown:keyDown}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"amount\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.amount}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: checkDisabledTotalPaymentInWord(),onKeyDown:keyDown}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"amount_vat5\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.amount_vat5}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.tien_thue, disabled: checkDisabledTotalPaymentInWord(),onKeyDown:keyDown}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"amount_vat10\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.amount_vat10}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.tien_thue, disabled: checkDisabledTotalPaymentInWord(),onKeyDown:keyDown}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"total_payment\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.amount_after_vat}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.tong_tien, onValueChanged: totalPaymentChange, disabled: checkDisabledTotalPaymentInWord(),onKeyDown:keyDown}\\\"></dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form> -->\\r\\n        <div class=\\\"vat money-pull-right\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.on_currency_amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.on_currency_amount\\\" tabIndex=\\\"-1\\\" format=\\\"0,###\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                             [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_amount_discount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_discount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_chiet_khau\\\"\\r\\n                             [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat5}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat5\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat8}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat8\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat10}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat10\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat_other\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-4\\\" style=\\\"margin-top: 10px\\\">\\r\\n        <div class=\\\"vat money-pull-right\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_payment\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                             [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\"\\r\\n                             tabIndex=\\\"-1\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                             (onValueChanged)=\\\"totalPaymentChange($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item *ngIf=\\\"frmData.adjustment_form == 'THONG_TIN' && frmData.adjustment_object == 'TIEN_CHU'\\\"\\r\\n                      cssClass=\\\"vat total-payment-in-word\\\" name=\\\"origin-invoice-number\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.amount_pre_adjusted}}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-text-box\\r\\n                  [(value)]=\\\"oldForm.total_payment_in_word\\\"\\r\\n                  readOnly=\\\"true\\\"\\r\\n                ></dx-text-box>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat total-payment-in-word\\\"\\r\\n                      [label]=\\\"{text: _translate.CONTROLL.LABEL.total_payment_in_word}\\\"\\r\\n                      dataField=\\\"total_payment_in_word\\\"\\r\\n                      [editorOptions]=\\\"{readOnly: checkDisabledTotalPaymentInWord(), onValueChanged: total_payment_in_wordChange}\\\"></dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" icon=\\\"{{_translate.ICONS.view}}\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" icon=\\\"{{_translate.ICONS.view}}\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"inChuyenDoi()\\\" icon=\\\"{{_translate.ICONS.print}}\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.print_conversion}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"isTuChoi\\\" (click)=\\\"xemlydotuchoi()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n                     text=\\\"{{_translate.CONTROLL.BUTTON.reason_reject}}\\\"\\r\\n                     type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !isAccessExportInv\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.sign_approval}}\\\"\\r\\n                     icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"eSubmit('TRINH_KY')\\\" type=\\\"default\\\"\\r\\n                     validationGroup=\\\"formData\\\"\\r\\n                     [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <!-- <button type=\\\"button\\\" (click)=\\\"test()\\\">Test</button> -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\" appScrollToInvalid\\r\\n                     icon=\\\"{{_translate.ICONS.export_inv}}\\\" (click)=\\\"eSubmit('XUAT')\\\" type=\\\"default\\\"\\r\\n                     validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" appScrollToInvalid\\r\\n                     icon=\\\"{{_translate.ICONS.save}}\\\" (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\"\\r\\n                     validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <dx-button appBackButton type=\\\"default\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</form>\\r\\n<ngx-spinner\\r\\nbdColor=\\\"rgba(51,51,51,0.8)\\\"\\r\\nsize=\\\"medium\\\"\\r\\ncolor=\\\"#fff\\\"\\r\\ntype=\\\"timer\\\">\\r\\n<p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}#btn-chossen-hdck{margin-top:10px;margin-left:50%;margin-bottom:10px}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:25px}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild, OnDestroy, AfterViewInit, ChangeDetectorRef } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { Base64 } from 'js-base64';\r\nimport { SocketService, AuthService, Library, Helper, VPreviewInvService, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { VatService, InvoiceModel } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { SendInvoicesComponent } from '@modules/handle-invoice/components/send-invoices/send-invoices.component';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { Observable } from 'rxjs';\r\nimport * as _ from 'lodash';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { AdjustFormComponent } from '@modules/handle-invoice-student/components/adjust/adjust-form/adjust-form.component';\r\nimport { AdjustGripComponent } from '@modules/handle-invoice-student/components/adjust/adjust-grip/adjust-grip.component';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\n@Component({\r\n  selector: 'app-adjust-invoice',\r\n  templateUrl: './adjust-invoice.component.html',\r\n  styleUrls: ['./adjust-invoice.component.scss']\r\n})\r\nexport class AdjustInvoiceComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  @ViewChild(AdjustGripComponent) productGrip: AdjustGripComponent;\r\n  @ViewChild(AdjustFormComponent) formInvoice: AdjustFormComponent;\r\n\r\n  bsModalRef: BsModalRef;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  total_payment:any;\r\n  frmData: InvoiceModel = new InvoiceModel(5);\r\n  oldForm: any;\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  dataInvoice: any;\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n  select: any = {};\r\n  _objTemplateSelect: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  configs: any;\r\n  tempKiFile = 0;\r\n  textReport: any;\r\n  listDM: any;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  isTuChoi = false;\r\n  isAccessExportInv = false;\r\n  fileData: Array<any> = [];\r\n  _translate: any;\r\n  isHdGTGT = true;\r\n  valueChange: string;\r\n  invoicereleaseTempt: any;\r\n  nodeSign: any;\r\n  _oTemplateTT78: any = {};\r\n  invoiceTemplateTT78: any;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private confirmService: ConfirmService,\r\n    private spinner: NgxSpinnerService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status === 'DA_XUAT') {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  routeReport() {\r\n    if (this.dataInvoice.origin_id !== null) {\r\n      if (this.dataInvoice.status === 'GHI_TAM') {\r\n        this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.origin_id, 'DIEU_CHINH']);\r\n      } else {\r\n        this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.id, 'DIEU_CHINH']);\r\n      }\r\n    } else {\r\n      this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.id, 'DIEU_CHINH']);\r\n    }\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let status;\r\n    if (!this.frmData.id && !this.frmData.invoice_number) {\r\n      status = 'THEM_MOI';\r\n    }\r\n    if (this.frmData.id && !this.frmData.invoice_number) {\r\n      status = 'GHI_TAM';\r\n    }\r\n    if (this.frmData.id && this.frmData.invoice_number) {\r\n      status = 'GIU_SO';\r\n    }\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (status === 'THEM_MOI') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTamForSeries(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamForSeriesTT78(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else if (status === 'GHI_TAM') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.editBatch(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editBatchTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else if (status === 'GIU_SO') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.editBatch(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editBatchTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\"\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    let sub = this.vatService.xuatHoaDon({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n      invoice_files: this.frmData.invoice_files\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.disablleScreen();\r\n        Library.notify('Xuất hóa đơn thành công', 'success');\r\n        this.fileData = this.frmData.invoice_files;\r\n        this.setDataSessionStorage(this.frmData);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    // kết nối websocket\r\n    this.connectWebsocket();\r\n    let isViewTT32 = false;\r\n    if (this.route.snapshot.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      if (data.init[4].length > 0) {\r\n        this.textReport = this._translate.CONTROLL.BUTTON.view_report;\r\n      } else {\r\n        this.textReport = this._translate.CONTROLL.BUTTON.create_report;\r\n      }\r\n      this.configs = this.authService.getConfigs();\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.TLMG = data.init[1].DM_TY_LE_MIEN_GIAM_HOC_PHI;\r\n      this.frmData.total_payment_in_word = null;\r\n\r\n      if (this.infoDangKy) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n          this.isTT78 = true;\r\n      }\r\n      if (this.isTT78 == true && isViewTT32)\r\n        this.isTT78 = false;\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        temptTT78 = data.init[0];\r\n\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (data.init[3] && Number.parseInt(data.init[3].invoice_number) > 0) {\r\n            if (data.init[3].is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == data.init[3].is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n      }\r\n      if (data.status === 'dieuchinhmoi') {\r\n        this.khoiTaoKhiThemMoi(data.init[3]);\r\n        this.oldForm = data.init[3];\r\n      } else {\r\n        this.khoiTaoKhiSua(data.init[3]);\r\n        this.oldForm = data.init[3].origin;\r\n      }\r\n      if (data.init[4].length > 0 && this.isTT78) {\r\n        let oReport = data.init[4][data.init[4].length - 1];\r\n        if (oReport)\r\n          this.frmData.destroy_reason = oReport.adjustment_reason;\r\n      }\r\n      if (this.oldForm.template_code.indexOf('02GTTT') >= 0) {\r\n        this.isHdGTGT = false;\r\n      }\r\n      this.dataInvoice = data.init[3];\r\n    });\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.some(item => {\r\n        if (item.value === this.oldForm.invoice_release_id) {\r\n          this._objTemplateSelect = item;\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.some(item => {\r\n        if (item.value === this.oldForm.template_id) {\r\n          this.invoiceTemplateTT78 = item;\r\n          for (const key in item) {\r\n            if (item.hasOwnProperty(key)) {\r\n              this._oTemplateTT78[key] = item[key];\r\n            }\r\n          }\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n\r\n    const currentUser = this.authService.getCurrentUser();\r\n    const listpermissions = currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        // Helper.dowloadFile('test.xml', 'xml', data.Data.Content);\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.frmData.issuer_name = data.Data.IssuerName;\r\n          this.xuLiApiKhiXuat();\r\n        } else {\r\n          this.frmData.invoice_files.forEach(item => {\r\n            if (item.file_name === data.Data.Name) {\r\n              item.file_content = data.Data.Content;\r\n            }\r\n          });\r\n          this.tempKiFile++;\r\n          if (this.tempKiFile === this.frmData.invoice_files.length) {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  khoiTaoKhiThemMoi(data) {\r\n    // khởi tạo mới lưới\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    // tạo mới đối tượng file\r\n    this.fileData = [];\r\n    // khởi tạo dữ liệu form điều chỉnh\r\n    this.frmData.fillFormDieuChinh(data);\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0);\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id == this.frmData.template_id) {\r\n          this.invoicereleaseTempt = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      if (this.select.templatesTT78.length) {\r\n        this.select.templatesTT78.forEach(item => {\r\n          if (item.value === this.frmData.template_id) {\r\n            this.invoiceTemplateTT78 = item;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  checkDisabledTotalPaymentInWord() {\r\n    if ((this.frmData.adjustment_form == sEnum.adjustmentForm.thong_tin && this.frmData.adjustment_object == sEnum.adjustmentForm.tien_chu) || this.frmData.adjustment_form == sEnum.adjustmentForm.khac || this.frmData.auto_value) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    // khởi tạo lưới từ dữ liệu sửa\r\n    let _lst = this.frmData.setInvoice_products_data(data.invoice_products);\r\n    if (_lst) {\r\n      _lst.forEach(item => {\r\n        if (item.product_name && item.unit_name) {\r\n          const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n          if (!obj1) {\r\n            item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n          }\r\n          else\r\n            if (!item.unit_code || (item.unit_code && item.unit_code != obj1.code))\r\n              item.unit_code = obj1.code;\r\n        }\r\n      });\r\n    }\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: _lst\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    if (VStringService._getValueToString(this.frmData.approve_status) == sEnum.statusApprove.TuChoi) {\r\n      this.isTuChoi = true;\r\n    }\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id == this.frmData.template_id) {\r\n          this.invoicereleaseTempt = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.invoiceTemplateTT78 = item;\r\n        }\r\n      });\r\n    }\r\n\r\n    // lấy file\r\n    // this.fileData = [];\r\n    this.fileData = data.invoice_files;\r\n    // this.fileData = data.invoice_files;\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n\r\n    // co cho sua luoi hang hoa ko\r\n    let temp = this.frmData.adjustment_form + '_' + this.frmData.adjustment_object;\r\n    if (temp === 'THONG_TIN_MST' || temp === 'THONG_TIN_KH_DC' || temp === 'THONG_TIN_TIEN_CHU') {\r\n      this.productGrip.gripAllowEdit = false;\r\n    } else {\r\n      this.productGrip.gripAllowEdit = true;\r\n    }\r\n    if (temp === 'TANG_HH_DV' || temp === 'GIAM_HH_DV') {\r\n      this.setContentProductNameV2('', 'select');\r\n    }\r\n  }\r\n\r\n  /** Tương tác giữa các component */\r\n  getDataInChildForm(e) {\r\n    this.frmData = e;\r\n    if (this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'MST') {\r\n      this.dataSource.items()[0].product_name = `Điều chỉnh mã số thuế Công ty/đơn vị mua hàng từ ${this.oldForm.buyer_tax_code} thành ${this.frmData.buyer_tax_code}`;\r\n      this.productGrip.dataGrid.instance.refresh();\r\n    } else if (this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'KH_DC') {\r\n      if (this.oldForm.customer_name !== this.frmData.customer_name && this.oldForm.buyer_address === this.frmData.buyer_address) {\r\n        this.dataSource.items()[0].product_name = `Điều chỉnh tên đơn vị mua hàng từ ${this.oldForm.customer_name} thành ${this.frmData.customer_name}`;\r\n      } else if (this.oldForm.customer_name === this.frmData.customer_name && this.oldForm.buyer_address !== this.frmData.buyer_address) {\r\n        this.dataSource.items()[0].product_name = `Điều chỉnh địa chỉ của đơn vị mua hàng từ ${this.oldForm.buyer_address} thành ${this.frmData.buyer_address}`;\r\n      } else if (this.oldForm.customer_name === this.frmData.customer_name && this.oldForm.buyer_address === this.frmData.buyer_address) {\r\n        this.dataSource.items()[0].product_name = '';\r\n      } else {\r\n        this.dataSource.items()[0].product_name = `Điều chỉnh tên đơn vị mua hàng từ ${this.oldForm.customer_name} thành ${this.frmData.customer_name}\\nĐiều chỉnh địa chỉ của đơn vị mua hàng từ ${this.oldForm.buyer_address} thành ${this.frmData.buyer_address}`;\r\n      }\r\n      this.productGrip.dataGrid.instance.refresh();\r\n    }\r\n  }\r\n\r\n  total_payment_in_wordChange = (e) => {\r\n    if (this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'TIEN_CHU') {\r\n      let invoice_date = moment(this.oldForm.invoice_date).format('DD/MM/YYYY');\r\n      this.dataSource.items()[0].product_name = `Điều chỉnh dòng số tiền bằng chữ của hóa đơn số ${this.oldForm.invoice_number}, ký hiệu ${this.oldForm.invoice_series} ngày ${invoice_date} từ: ${this.oldForm.total_payment_in_word} thành ${e.value}`;\r\n      this.productGrip.dataGrid.instance.refresh();\r\n    }\r\n  };\r\n\r\n  updateSomeTotalInput(e) {\r\n    \r\n  }\r\n\r\n  fillAutoInput(e) {\r\n    this.frmData.auto_value = e;\r\n  }\r\n\r\n  // Lấy data khi chọn file đính kèm bảng kê\r\n  getFileData(fileData) {\r\n    this.fileData = fileData;\r\n  }\r\n\r\n  adjustmentObjectChange(v) {\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(this.frmData.total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n    switch (v) {\r\n      case 'TANG_HH_DV':\r\n        this.setContentProductName('', 'select');\r\n        this.productGrip.gripAllowEdit = true;\r\n        break;\r\n      case 'TANG_KHAC_TANG':\r\n        this.setContentProductName('', 'text');\r\n        this.productGrip.gripAllowEdit = true;\r\n        break;\r\n      case 'GIAM_HH_DV':\r\n        this.setContentProductName('', 'select');\r\n        this.productGrip.gripAllowEdit = true;\r\n        break;\r\n      case 'GIAM_KHAC_GIAM':\r\n        this.setContentProductName('', 'text');\r\n        this.productGrip.gripAllowEdit = true;\r\n        break;\r\n      case 'THONG_TIN_KH_DC':\r\n        this.setContentProductName(`Điều chỉnh tên học sinh từ ${this.oldForm.student_name} thành ${this.oldForm.student_name}\\nĐiều chỉnh địa chỉ của học sinh từ ${this.oldForm.buyer_address} thành ${this.oldForm.buyer_address}`, 'text');\r\n        this.productGrip.gripAllowEdit = false;\r\n        break;\r\n      case 'THONG_TIN_TIEN_CHU':\r\n        let invoice_date = moment(this.oldForm.invoice_date).format('DD/MM/YYYY');\r\n        this.setContentProductName(`Điều chỉnh dòng số tiền bằng chữ của hóa đơn số ${this.oldForm.invoice_number}, ký hiệu ${this.oldForm.invoice_series} ngày ${invoice_date} từ: ${this.oldForm.total_payment_in_word} thành `, 'text');\r\n        this.productGrip.gripAllowEdit = false;\r\n        break;\r\n      case 'KHAC_KHAC':\r\n        this.productGrip.changeColumnProductNameToText();\r\n        this.productGrip.gripAllowEdit = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  setContentProductName(value, type) {\r\n    setTimeout(() => {\r\n      this.productGrip.dataSource.items()[0].product_name = value;\r\n      if (type === 'text') {\r\n        this.productGrip.changeColumnProductNameToText();\r\n      } else if (type === 'select') {\r\n        this.productGrip.changeColumnProductNameToSelect();\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  setContentProductNameV2(value, type) {\r\n    setTimeout(() => {\r\n      if (type === 'text') {\r\n        this.productGrip.changeColumnProductNameToText();\r\n      } else if (type === 'select') {\r\n        this.productGrip.changeColumnProductNameToSelect();\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  /** Kết thúc */\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number === 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  // sự kiện form\r\n  totalPaymentChange = (e) => {\r\n    // this.onNumberChange();\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(e.value, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n\r\n  // Các hàm chức năng chính\r\n  getDataPreview() {\r\n    let formatter: any = {};\r\n    formatter = this.configs.system_parameter.decpoint_is_dot ? { decimal: '.', thousands: ',' } : { decimal: ',', thousands: '.' };\r\n\r\n    const data = JSON.parse(JSON.stringify(this.frmData));\r\n    const decimal_quatity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n    const decimal_price = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia);\r\n    const decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    const decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n    const decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n    // let decimal_amount =  VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let total_amount_product_with_vatx = null, total_amount_product_with_vat0 = null, total_amount_product_with_vat5 = null,\r\n      total_amount_product_with_vat10 = null, amount_vat0 = null;\r\n\r\n\r\n    data.invoice_products.forEach(item => {\r\n      if (item.vat === -1) {\r\n        total_amount_product_with_vatx += item.amount_after_vat;\r\n      }\r\n      if (item.vat === 0) {\r\n        total_amount_product_with_vat0 += item.amount_after_vat;\r\n      }\r\n      if (item.vat === 0) {\r\n        amount_vat0 += item.amount_vat;\r\n      }\r\n      if (item.vat === 5) {\r\n        total_amount_product_with_vat5 += item.amount_after_vat;\r\n      }\r\n      if (item.vat === 10) {\r\n        total_amount_product_with_vat10 += item.amount_after_vat;\r\n      }\r\n      item['unit_name'] = '';\r\n      this.select.unit_codes.forEach(unit => {\r\n        item.discount = '';\r\n        item.total_discount = '';\r\n        if (unit.code === item.unit_code) {\r\n          item['unit_name'] = unit.name;\r\n        }\r\n      });\r\n      item.amount = Helper.formatMoney(item.amount, decimal_amount, formatter);\r\n      item.price = Helper.formatMoney(item.price, decimal_price, formatter);\r\n      item.quantity = Helper.formatMoney(item.quantity, decimal_quatity, formatter);\r\n      item.amount_vat = Helper.formatMoney(item.amount_vat, 0, formatter);\r\n      item.amount_after_vat = Helper.formatMoney(item.amount_after_vat, decimal_amount_after_vat, formatter);\r\n    });\r\n\r\n    data.total_amount_product_with_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n    data.total_amount_product_with_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n    data.total_amount_product_with_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n    data.total_amount_product_with_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n    data.amount_vat0 = amount_vat0;\r\n\r\n    data.total_amount_product_vatx = Helper.formatMoney(data.total_amount_product_vatx, decimal_amount, formatter);\r\n    data.total_amount_product_vat0 = Helper.formatMoney(data.total_amount_product_vat0, decimal_amount, formatter);\r\n    data.total_amount_product_vat5 = Helper.formatMoney(data.total_amount_product_vat5, decimal_amount, formatter);\r\n    data.total_amount_product_vat10 = Helper.formatMoney(data.total_amount_product_vat10, decimal_amount, formatter);\r\n    data.amount_vat5 = Helper.formatMoney(data.amount_vat5, decimal_amount_vat, formatter);\r\n    data.amount_vat10 = Helper.formatMoney(data.amount_vat10, decimal_amount_vat, formatter);\r\n    data.amount = Helper.formatMoney(data.amount, decimal_amount, formatter);\r\n    data.total_amount_vat = Helper.formatMoney(data.total_amount_vat, decimal_amount_vat, formatter);\r\n    data.total_payment = Helper.formatMoney(data.total_payment, decimal_amount_after_vat, formatter);\r\n\r\n    return data;\r\n  }\r\n\r\n  demo() {\r\n    //\r\n  }\r\n\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n      let data = this.vatService.taodulieuXemTruocHS(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    let data = this.vatService.taodulieuXemMauHS(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    const data = this.vatService.taodulieuInchuyendoiHS(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  ghiTam(data) {\r\n    if (this.frmData.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.editBatch(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify('Trình ký thành công', 'success');\r\n            } else {\r\n              Library.notify('Cập nhật thành công', 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editBatchTT78(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify('Trình ký thành công', 'success');\r\n            } else {\r\n              Library.notify('Cập nhật thành công', 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTamForSeries(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            Library.notify('Ghi tạm thành công', 'success');\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamForSeriesTT78(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            Library.notify('Ghi tạm thành công', 'success');\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuatChoKy(data) {\r\n    Library.showloading();\r\n    if (!this.isTT78) {\r\n      let sub = this.vatService.xuatChoKyForSeries(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify('Trình ký thành công', 'success');\r\n          } else {\r\n            Library.notify('Xuất chờ ký thành công', 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      let sub = this.vatService.xuatChoKyForSeriesTT78(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify('Trình ký thành công', 'success');\r\n          } else {\r\n            Library.notify('Xuất chờ ký thành công', 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatHoaDon(data) {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      if (this.frmData.invoice_files.length) {\r\n        this.frmData.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.frmData.invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n      }\r\n    }\r\n  }\r\n\r\n  _validForm(isOnlyCheckAm) {\r\n    let _isValid = true;\r\n    if ((this.frmData.amount_vat5 < 0 || this.frmData.amount_vat10 < 0 || this.frmData.total_payment < 0)\r\n    && !this.configs.system_parameter.allow_export_with_negative) {\r\n      Library.notify(this._translate.NOTIFY.discount_same_vat, 'error');\r\n      return false;\r\n    }\r\n    if (isOnlyCheckAm) {\r\n      return true;\r\n    }\r\n    if (this.frmData.customer_object_code === 'TRUONG_HOC') {\r\n      if (!this.frmData.student_code) {\r\n        if (this.formInvoice.form.instance.getEditor('student_code')) {\r\n          this.formInvoice.form.instance.getEditor('student_code').focus();\r\n        }\r\n        Library.notify(this._translate.CONTROLL.LABEL.code_student + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n\r\n      if (!this.frmData.student_name) {\r\n        if (this.formInvoice.form.instance.getEditor('student_name')) {\r\n          this.formInvoice.form.instance.getEditor('student_name').focus();\r\n        }\r\n        Library.notify(this._translate.CONTROLL.LABEL.name_student + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n    }\r\n    const _lst = this.frmData.invoice_products.filter(p => p.product_name);\r\n    if (_lst.length === 0) {\r\n      Library.notify(this._translate.NOTIFY.no_product, 'error');\r\n      this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n      return false;\r\n    }\r\n    else {\r\n      for (let i = 0; i < _lst.length; i++) {\r\n        if ((_lst[i].group_code == \"HOCPHI\" || _lst[i].group_code == \"HOCTHEM\") && (_lst[i].school_fee_month == '' || !_lst[i].school_fee_month)) {\r\n          Library.notify(this._translate.GRID.INVOICE_DETAILS.school_fee_month + \" \" + this._translate.VALIDATION.required, 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n        let _lstProduct = _lst.filter(p => p.product_code == _lst[i].product_code)\r\n        if (_lstProduct && _lstProduct.length > 1) {\r\n          Library.notify(\"Mã '\" + _lst[i].product_code + \"' bị trùng\", 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n      }\r\n      if (!this.isTT78) {\r\n        let numberRow = this.invoicereleaseTempt.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(\"Chỉ được chọn 1 khoản thu để xuất hóa đơn\", 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        if (this.frmData.destroy_reason === null || VStringService._getValueToString(this.frmData.destroy_reason) == \"\") {\r\n          this.formInvoice.form.instance.getEditor('destroy_reason').focus();\r\n          Library.notify(\"Lý do điều chỉnh\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        let numberRow = this.invoiceTemplateTT78.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(\"Chỉ được chọn 1 khoản thu để xuất hóa đơn\", 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return _isValid;\r\n  }\r\n\r\n  eSubmit(type) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.total_payment = \"\"\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (type !== 'GHI_TAM') {\r\n        if (!this._validForm(false)) {\r\n          return;\r\n        }\r\n        if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n          Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n          return;\r\n        }\r\n      }\r\n      if (this.frmData.invoice_options) {\r\n        this.frmData.invoice_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n          delete item['id'];\r\n          delete item['invoice_id'];\r\n        });\r\n      }\r\n      if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n        Library.notify('Vui lòng chọn HTTT chuyển khoản cho hóa đơn có giá trị lớn hơn 20 triệu đồng', 'error');\r\n        return false;\r\n      }\r\n      if (!this.isAccessExportInv && type === 'XUAT' && this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        Library.notify(this._translate.NOTIFY.you_not_permissions, 'error');\r\n        return false;\r\n      }\r\n      if (type === 'XUAT' || (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy)) {\r\n        if (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n          this.confirmCheckPreview = true;\r\n        }\r\n        if (this.confirmCheckPreview) {\r\n          if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.xuatHoaDon(this.frmData);\r\n          } else {\r\n            Helper.confirmXuatChoKy(() => {\r\n              if (!this.isAccessExportInv) {\r\n                if (type === 'TRINH_KY') {\r\n                  this.frmData.refuse_reason = '';\r\n                  this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n                } else {\r\n                  if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                    this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                  }\r\n                }\r\n\r\n              }\r\n              this.xuatChoKy(this.frmData);\r\n            });\r\n          }\r\n          this.confirmCheckPreview = false;\r\n        } else {\r\n          this.previewBeforeExport(type);\r\n        }\r\n      } else {\r\n        if (!this.isAccessExportInv) {\r\n          if (type === 'TRINH_KY') {\r\n            this.frmData.refuse_reason = '';\r\n            this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n          } else {\r\n            if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n              this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n            }\r\n          }\r\n        }\r\n        this.ghiTam(this.frmData);\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = '';\r\n    if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n      trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n    } else {\r\n      trang_thai = this._translate.THONG_TIN.xuat_cho_ky;\r\n    }\r\n    let du_lieu = this.vatService.taodulieuXemTruocHS(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn : this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  \r\n  handleFormData() {\r\n    this.tempKiFile = 0;\r\n    let invoice_products = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        delete item.error;\r\n        if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n          if ((this.frmData.adjustment_form === 'TANG' && this.frmData.adjustment_object === 'HH_DV') || (this.frmData.adjustment_form == 'GIAM' && this.frmData.adjustment_object === 'HH_DV'))\r\n            item.row_content = this.rowContentInInvoiceProduct(item, this.frmData.adjustment_form);\r\n          else\r\n            item.row_content = item.product_name;\r\n          invoice_products.push(item);\r\n          if (item.is_transport_number) {\r\n            this.frmData.transport_number = item.product_name;\r\n          }\r\n        }\r\n      });\r\n    });\r\n    if ((this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'MST') || (this.frmData.adjustment_form == 'THONG_TIN' && this.frmData.adjustment_object === 'KH_DC')) {\r\n      this.frmData.total_payment_in_word = '';\r\n    }\r\n    this.frmData.payment_method_view_name = this.frmData.payment_method_name;\r\n    this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n    this.frmData.note_view_on_invoice = `Hóa đơn này điều chỉnh cho hóa đơn số ${this.oldForm.invoice_number}, mẫu số ${this.oldForm.template_code}, ký hiệu ${this.oldForm.invoice_series} ngày ${moment(this.oldForm.invoice_date).format('DD/MM/YYYY')}`;\r\n    this.frmData.invoice_products = invoice_products;\r\n    this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n  }\r\n  handleFormDataSub() {\r\n    const wait = (delay, ...args) => new Promise(resolve => setTimeout(resolve, delay, ...args));\r\n    return wait(200).then(() => {\r\n      this.tempKiFile = 0;\r\n      let invoice_products = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          delete item.error;\r\n          if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n            if ((this.frmData.adjustment_form === 'TANG' && this.frmData.adjustment_object === 'HH_DV') || (this.frmData.adjustment_form == 'GIAM' && this.frmData.adjustment_object === 'HH_DV'))\r\n              item.row_content = this.rowContentInInvoiceProduct(item, this.frmData.adjustment_form);\r\n            else\r\n              item.row_content = item.product_name;\r\n            invoice_products.push(item);\r\n            if (item.is_transport_number) {\r\n              this.frmData.transport_number = item.product_name;\r\n            }\r\n          }\r\n        });\r\n      });\r\n      if ((this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'MST') || (this.frmData.adjustment_form == 'THONG_TIN' && this.frmData.adjustment_object === 'KH_DC')) {\r\n        this.frmData.total_payment_in_word = '';\r\n      }\r\n      this.frmData.payment_method_view_name = this.frmData.payment_method_name;\r\n      this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n      this.frmData.note_view_on_invoice = `Hóa đơn này điều chỉnh cho hóa đơn số ${this.oldForm.invoice_number}, mẫu số ${this.oldForm.template_code}, ký hiệu ${this.oldForm.invoice_series} ngày ${moment(this.oldForm.invoice_date).format('DD/MM/YYYY')}`;\r\n      this.frmData.invoice_products = invoice_products;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n      return true;\r\n    });\r\n  }\r\n  rowContentInInvoiceProduct(row, status) {\r\n    if (this.oldForm.template_code.indexOf('02GTTT') >= 0) {\r\n      let status_view = (status === 'TANG') ? 'tăng' : 'giảm';\r\n      let str, temp, quantity, price;\r\n      this.oldForm.invoice_products.some(item => {\r\n        if (item.product_name === row.product_name) {\r\n          temp = item;\r\n          return true;\r\n        }\r\n      });\r\n\r\n      if (temp.quantity !== row.quantity) {\r\n        quantity = true;\r\n      }\r\n      if (temp.price !== row.price) {\r\n        price = true;\r\n      }\r\n\r\n      if (quantity === true || price === true) {\r\n        str = `Điều chỉnh ${status_view} ${quantity ? 'Số lượng, ' : ''}${price ? 'Đơn giá, ' : ''}thành tiền của mặt hàng`;\r\n      } else {\r\n        str = `Điều chỉnh ${status_view} Số lượng, Đơn giá, thành tiền của mặt hàng`;\r\n      }\r\n      return str + ` ${row.product_name}`;\r\n    } else if (this.oldForm.template_code.indexOf('01GTKT') >= 0) {\r\n      let status_view = (status === 'TANG') ? 'tăng' : 'giảm';\r\n      let str, temp, quantity, price, vat;\r\n      this.oldForm.invoice_products.some(item => {\r\n        if (item.product_name === row.product_name) {\r\n          temp = item;\r\n          return true;\r\n        }\r\n      });\r\n\r\n      if (temp.quantity !== row.quantity) {\r\n        quantity = true;\r\n      }\r\n      if (temp.price !== row.price) {\r\n        price = true;\r\n      }\r\n      if (temp.vat !== row.vat) {\r\n        vat = true;\r\n      }\r\n\r\n      let vat_view = ((temp.vat === -1 || temp.vat === 0) && vat !== true) ? '' : ', tiền thuế';\r\n\r\n      if (vat) {\r\n        str = `Điều chỉnh ${status_view} thuế suất và tiền thuế GTGT của mặt hàng`;\r\n      } else if (quantity === true || price === true) {\r\n        str = `Điều chỉnh ${status_view} ${quantity ? 'Số lượng, ' : ''}${price ? 'Đơn giá, ' : ''}thành tiền${vat_view} của mặt hàng`;\r\n      } else {\r\n        str = `Điều chỉnh ${status_view} Số lượng, Đơn giá, thành tiền, thuế suất${vat_view} của mặt hàng`;\r\n      }\r\n      return str + ` ${row.product_name}`;\r\n    }\r\n  }\r\n\r\n\r\n  test() {\r\n    this.productGrip.createUpdateEvent();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n    // this.socketService.close();\r\n  }\r\n\r\n  xemlydotuchoi() {\r\n    Library.showloading();\r\n    let sub = this.vatService.showToSendInvoice(this.frmData.id).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n          listDM: this.listDM\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n  }\r\n\r\n  keyDown(e: any) {\r\n    // setTimeout(() => {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n    // }, 100);\r\n  }\r\n\r\n  onTemplateTypeChange(e) {\r\n    this.invoicereleaseTempt = e;\r\n  }\r\n  onTemplateTT78TypeChange(e) {\r\n    this.invoiceTemplateTT78 = e;\r\n  }\r\n\r\n  onNumberTicketChange() {\r\n    if (!this.isTT78) {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n      }\r\n    }\r\n    else {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  onVatChange() {\r\n    let decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n    let decimal_vat = this.getFormatterToNumber(this.formatter.vat);\r\n    if (this.frmData.vat_service_ticket === '5' || this.frmData.vat_service_ticket === '10') {\r\n      this.frmData.total_vat_service_ticket = this.roundNumber((Number.parseInt(this.frmData.vat_service_ticket) * this.frmData.money_service_ticket) / 100, decimal_amount_vat);\r\n    } else {\r\n      this.frmData.total_vat_service_ticket = 0;\r\n    }\r\n    this.frmData.total_service_ticket_with_vat = this.roundNumber(this.frmData.money_service_ticket + this.frmData.total_vat_service_ticket, decimal_amount);\r\n  }\r\n\r\n  getFormatterToNumber(formatter) {\r\n    let s1 = formatter.replace('0,###', '');\r\n    if (s1 === '') {\r\n      return 0;\r\n    } else {\r\n      let s2 = s1.replace('.', '');\r\n      return s2.split('').length;\r\n    }\r\n  }\r\n\r\n  setDataSessionStorage(value) {\r\n    this.valueChange = JSON.stringify(value);\r\n  }\r\n\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  async subData(type, value) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return false;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    await this.handleFormDataSub();\r\n    if (this.frmData.invoice_options) {\r\n      this.frmData.invoice_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n      Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error');\r\n      return false;\r\n    }\r\n    if (!this.isAccessExportInv) {\r\n      if (type === 'TRINH_KY') {\r\n        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n        this.frmData.refuse_reason = '';\r\n      } else {\r\n        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    if (value.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.editBatch(this.frmData.id, value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.editBatchTT78(this.frmData.id, value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.ghiTamForSeries(value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.ghiTamForSeriesTT78(value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM', this.frmData).then(value1 => {\r\n                    observer.next(value1);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    }\r\n    return true;\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">DANH SÁCH HÓA ĐƠN CHỜ KÝ</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid \\r\\n    id=\\\"gridContainer\\\"\\r\\n    [dataSource]=\\\"invoiceList\\\"\\r\\n    [showRowLines]=\\\"true\\\"\\r\\n    [allowColumnResizing]=\\\"true\\\"\\r\\n    [(selectedRowKeys)]=\\\"selectedRows\\\"\\r\\n    [columnMinWidth]=\\\"50\\\"\\r\\n    [columnResizingMode]=\\\"true\\\"\\r\\n    [columnAutoWidth]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\">\\r\\n\\r\\n    <dxo-selection selectAllMode=\\\"page\\\" mode=\\\"single\\\"></dxo-selection>\\r\\n\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <dxi-column dataField=\\\"invoice_number\\\" caption=\\\"Số hóa đơn\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"Ngày HĐ\\\" [width]=\\\"110\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"student_code\\\" caption=\\\"Mã học sinh\\\" [width]=\\\"140\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"Tên học sinh\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p>{{ d.data.student_name || 'Hóa đơn chờ ký' }}</p>\\r\\n    </div>\\r\\n    \\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <!-- <dxo-paging [enabled]=\\\"false\\\"></dxo-paging> -->\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button text=\\\"Chọn\\\" icon=\\\"assets\\\\img\\\\icons\\\\Ghi.png\\\" type=\\\"default\\\" (click)=\\\"choose()\\\" [disabled]=\\\"!(selectedRows.length == 1)\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"Quay lại\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n  </dx-button>\\r\\n</div>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as moment from 'moment';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { Library} from '@core/index';\r\n@Component({\r\n  selector: 'app-choose-hdck',\r\n  templateUrl: './choose-hdck.component.html',\r\n  styleUrls: ['./choose-hdck.component.scss']\r\n})\r\nexport class ChooseHdckComponent implements OnInit {\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n  ) { }\r\n\r\n  selectedRows: Array<any> = [];\r\n\r\n  invoiceList: any;\r\n  invoiceNumberOrigin: any;\r\n  invoiceReleaseId: any;\r\n  invoiceDateOrigin: any;\r\n  onSave: any;\r\n\r\n  ngOnInit() {\r\n    // console.log(this.invoiceNumberOrigin);\r\n    // console.log(this.templateCode);\r\n    Library.showloading();\r\n    this.handleInvoiceService.layCacHoaDonChoKy(this.invoiceDateOrigin, this.invoiceReleaseId).subscribe((rs: any) => {\r\n      this.invoiceList = rs.data.invoices;\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  choose() {\r\n    this.onSave(this.selectedRows[0]);\r\n    this.bsModalRef.hide();\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"row search-section\\\">\\r\\n  <div class=\\\"col-md-7\\\">\\r\\n    <app-search-advanced\\r\\n      (searchContentChange)=\\\"getSearch($event)\\\"\\r\\n      [isSearchStudent]=\\\"isSearchStudent\\\"\\r\\n    >\\r\\n    </app-search-advanced>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-5 list-header\\\" style=\\\"max-height: 70px;\\\">\\r\\n    <div class=\\\"pull-right button-panel\\\">\\r\\n      <dx-button *ngIf=\\\"isDaDKTT78\\\" (click)=\\\"BaoCaoCQT()\\\" icon=\\\"assets\\\\img\\\\icons\\\\DieuChinh.png\\\"\\r\\n                 text=\\\"Báo CQT HĐ sai\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"dieuChinh()\\\" icon=\\\"assets\\\\img\\\\icons\\\\DieuChinh.png\\\" [disabled]=\\\"isDisableAdjust\\\"\\r\\n                 text=\\\"{{ 'CONTROLL.BUTTON.adjusted' | translate }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"thayThe()\\\" icon=\\\"assets\\\\img\\\\icons\\\\ThayThe.png\\\"\\r\\n                 text=\\\"{{ 'CONTROLL.BUTTON.replaced' | translate }}\\\" type=\\\"default\\\"\\r\\n                 [disabled]=\\\"isDisableReplace\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"routerCancelInvoice()\\\" [(icon)]=\\\"_translate.ICONS.delete\\\"\\r\\n                 text=\\\"{{_translate.CONTROLL.LABEL.cancel_invoice}}\\\" type=\\\"default\\\"\\r\\n                 [disabled]=\\\"(selectedRows.length == 0)\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainerInvoice\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n              [showRowLines]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n              [columnMinWidth]=\\\"50\\\"  [showBorders]=\\\"true\\\"\\r\\n              [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n  <dxo-selection selectAllMode=\\\"{{pageSelect}}\\\" mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <!--  <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"handleinvoice\\\"></dxo-state-storing> -->\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"single\\\"></dxo-sorting>\\r\\n  <dxo-selection mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row>\\r\\n  <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" [width]=\\\"_translate.GRID_WIDTH.so_hoa_don\\\"\\r\\n              alignment=\\\"center\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"1\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n  <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n              [width]=\\\"_translate.GRID_WIDTH.mau_so_ky_hieu\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  <!-- <dxi-column dataField=\\\"template.invoice_series\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"\\r\\n      [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column> -->\\r\\n  <dxi-column dataField=\\\"invoice_date\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\"\\r\\n              [width]=\\\"_translate.GRID_WIDTH.ngay_hoa_don\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\"\\r\\n              dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"\\r\\n              headerCellTemplate=\\\"titleHeaderTemplate\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"0\\\"></dxi-column>\\r\\n  <dxi-column dataField=\\\"student_code\\\"\\r\\n              caption=\\\"{{ 'CONTROLL.LABEL.code_student' | translate }}\\\"\\r\\n              [width]=\\\"_translate.GRID_WIDTH.ma_so_thue\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <dxi-column cellTemplate=\\\"studentName\\\"\\r\\n              caption=\\\"{{ 'CONTROLL.LABEL.name_student' | translate }}\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <dxi-column dataField=\\\"class_name\\\"\\r\\n              caption=\\\"{{ 'CONTROLL.LABEL.class' | translate }}\\\"\\r\\n              [width]=\\\"_translate.GRID_WIDTH.ma_so_thue\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_transport_number_from_product\\\" dataField=\\\"transport_number\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE_DETAILS.transport_number' | translate }}\\\"\\r\\n              width=\\\"{{_translate.GRID_WIDTH.transport_number}}\\\" alignment=\\\"left\\\"\\r\\n              headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n  <!-- total_payment_string: trường này không có trong invoice, để hiển thị định dạng tổng tiền ngoài màn hình -->\\r\\n  <dxi-column dataField=\\\"total_payment_string\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" alignment=\\\"right\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"\\r\\n              [width]=\\\"_translate.GRID_WIDTH.tong_tien\\\"></dxi-column>\\r\\n\\r\\n  <dxi-column cellTemplate=\\\"statusInvoice\\\" caption=\\\"{{ 'CONTROLL.LABEL.processing_status' | translate }}\\\"\\r\\n              [width]=\\\"_translate.GRID_WIDTH.trang_thai_gui_mail\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  <!-- <dxi-column dataField=\\\"note_view_on_invoice\\\" caption=\\\"{{ 'GRID.GENERAL.note' | translate }}\\\"\\r\\n              headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column> -->\\r\\n  <dxi-column *ngIf=\\\"isDaDKTT78\\\" cellTemplate=\\\"statusSendTax\\\" caption=\\\"TT gửi HĐ sai sót\\\"\\r\\n              [width]=\\\"106\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column caption=\\\"{{ 'GRID.GENERAL.handle-report' | translate }}\\\">\\r\\n    <dxi-column cellTemplate=\\\"invoice_reports\\\" caption=\\\"{{ 'GRID.GENERAL.electric_report' | translate }}\\\"\\r\\n                [width]=\\\"_translate.GRID_WIDTH.electric_report\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"file_content\\\" caption=\\\"{{ 'GRID.GENERAL.paper_report' | translate }}\\\"\\r\\n                [width]=\\\"_translate.GRID_WIDTH.electric_report\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  </dxi-column>\\r\\n\\r\\n  <dxi-column cellTemplate=\\\"actionIcon\\\" minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong_2}}\\\"\\r\\n              width=\\\"{{_translate.GRID_WIDTH.hanh_dong_2}}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p (click)=\\\"editNotSelect(d.data)\\\" style=\\\"text-decoration: underline;cursor: pointer;\\\">\\r\\n      {{ d.data.template_code }}</p>\\r\\n    <p (click)=\\\"editNotSelect(d.data)\\\" style=\\\"text-decoration: underline;cursor: pointer;\\\">\\r\\n      {{ d.data.invoice_series }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n    <a *ngIf=\\\"d.data.status === 'DA_XUAT'\\\" class=\\\"gach-chan\\\" (click)=\\\"viewNotSelect(d.data)\\\"\\r\\n       href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ\\r\\n        ({{ d.data.time_print_conversion }})</span></a>\\r\\n    <p *ngIf=\\\"d.data.status !== 'DA_XUAT'\\\">{{ d.data.invoice_number }}<span *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ\\r\\n        ({{ d.data.time_print_conversion }})</span></p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n    <p class=\\\"gach-chan\\\" (click)=\\\"editNotSelect(d.data)\\\" *ngIf=\\\"d.data.status !='GIU_SO' && d.data.status !='DA_XUAT'\\\">\\r\\n      {{ d.data.customer_name || d.data.buyer_name }}\\r\\n    </p>\\r\\n    <p class=\\\"gach-chan\\\" (click)=\\\"editNotSelect(d.data)\\\" *ngIf=\\\"d.data.status =='GIU_SO'\\\">\\r\\n      {{ d.data.customer_name || _translate.GRID.INVOICE.invoice_wait_for_sign }}</p>\\r\\n    <p *ngIf=\\\"d.data.status =='DA_XUAT'\\\">{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'studentName'\\\">\\r\\n    <p class=\\\"gach-chan\\\" (click)=\\\"editNotSelect(d.data)\\\" *ngIf=\\\"d.data.status !='GIU_SO' && d.data.status !='DA_XUAT'\\\">\\r\\n      {{ d.data.student_name }}\\r\\n    </p>\\r\\n    <p class=\\\"gach-chan\\\" (click)=\\\"editNotSelect(d.data)\\\" *ngIf=\\\"d.data.status =='GIU_SO'\\\">\\r\\n      {{ d.data.student_name || _translate.GRID.INVOICE.invoice_wait_for_sign }}</p>\\r\\n    <p *ngIf=\\\"d.data.status =='DA_XUAT'\\\">{{ d.data.student_name }}</p>\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'actionEmail'\\\">\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status !='GIU_SO'\\\" class=\\\"chua-gui-khach-hang gach-chan\\\"\\r\\n       (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.un_sent' | translate }}\\r\\n    </a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status =='GIU_SO'\\\" class=\\\"cho-ky\\\"\\r\\n       (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_sign' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_GUI'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n       href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_it' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_NHAN'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n       href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.received' | translate }}</a>\\r\\n    <p *ngIf=\\\"!d.data.send_email_status\\\" href=\\\"javascript:void(0)\\\">{{ trangthaihoadon(d.data) }} <a\\r\\n      *ngIf=\\\"trangthaihoadon(d.data) == 'Lỗi ký HD' || trangthaihoadon(d.data) == 'Signed error'\\\" class=\\\"gach-chan\\\"\\r\\n      (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">({{ 'GRID.INVOICE.re_sign' | translate }})</a></p>\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'statusInvoice'\\\">\\r\\n    <ng-container [ngSwitch]=\\\"d.data.adjustment_type\\\">\\r\\n      <p *ngSwitchCase=\\\"1\\\">{{ 'GRID.GENERAL.original_invoice' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"2\\\">{{ 'GRID.GENERAL.invoice_replaced' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"3\\\">{{ 'GRID.GENERAL.invoice_replacement' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"4\\\">{{ 'GRID.GENERAL.invoice_adjusted' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"5\\\">{{ 'GRID.GENERAL.adjustment_invoice' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"6\\\">{{ 'GRID.GENERAL.invoice_deleted' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"7\\\">{{ 'GRID.GENERAL.invoice_removed' | translate }}</p>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    <a *ngIf=\\\"getStatusSendTax(d.data) != ''\\\" href=\\\"javascript:void(0)\\\"\\r\\n      (click)=\\\"ThongDiepGuiNhan(d.data)\\\">{{ getStatusSendTax(d.data) }}</a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'invoice_reports'\\\">\\r\\n    <ng-container\\r\\n      *ngIf=\\\"filterReport(d.data.invoice_reports,'0').length >0 || filterReport(d.data.invoice_reports,'1').length ==0\\\">\\r\\n      <ng-container *ngFor=\\\"let data of d.data.invoice_reports; let i=index\\\">\\r\\n\\r\\n        <ng-container *ngIf=\\\"data.status === 'HOAT_DONG'\\\">\\r\\n          <div *ngIf=\\\"data.signature_status === 'CHUA_KY' && data.suggest_adjustment_content === null\\\">\\r\\n            <div>\\r\\n                <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">Chưa gửi</a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <div>\\r\\n                <span>\\r\\n                  <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n                </span>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"data.signature_status === 'NGUOI_BAN_KY' && data.suggest_adjustment_content === null\\\">\\r\\n            <div>\\r\\n                <span>\\r\\n                  <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\"\\r\\n                     href=\\\"javascript:void(0)\\\">Chờ KH ký</a>\\r\\n                </span>\\r\\n            </div>\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <a title=\\\"file {{_translate.GRID.GENERAL.attach}}\\\"\\r\\n               class=\\\"attachIcon actionIcon text-decoration\\\" (click)=\\\"downloadFile(d.data,'0')\\\"\\r\\n               href=\\\"javascript:void(0)\\\">\\r\\n            </a>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"data.signature_status === 'NGUOI_MUA_KY' && data.suggest_adjustment_content === null\\\">\\r\\n            <div>\\r\\n                <span>\\r\\n                  <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">KH đã ký</a>\\r\\n                </span>\\r\\n            </div>\\r\\n            <div>\\r\\n                <span>\\r\\n                  <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n                </span>\\r\\n            </div>\\r\\n            <a title=\\\"file {{_translate.GRID.GENERAL.attach}}\\\"\\r\\n               class=\\\"attachIcon actionIcon text-decoration\\\" (click)=\\\"downloadFile(d.data,'0')\\\"\\r\\n               href=\\\"javascript:void(0)\\\">\\r\\n            </a>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"data.signature_status === 'CHUA_KY' && data.suggest_adjustment_content !== null\\\">\\r\\n            <div>\\r\\n                <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n                  KH đề nghị điều chỉnh\\r\\n                </a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <div>\\r\\n                <span>\\r\\n                  <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n                </span>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"data.signature_status === 'NGUOI_BAN_KY' && data.suggest_adjustment_content !== null\\\">\\r\\n            <div>\\r\\n                <span>\\r\\n                  <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n                    KH đề nghị điều chỉnh\\r\\n                  </a>\\r\\n                </span>\\r\\n            </div>\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <a title=\\\"file {{_translate.GRID.GENERAL.attach}}\\\"\\r\\n               class=\\\"attachIcon actionIcon text-decoration\\\" (click)=\\\"downloadFile(d.data,'0')\\\"\\r\\n               href=\\\"javascript:void(0)\\\">\\r\\n            </a>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"data.signature_status === 'NGUOI_MUA_KY' && data.suggest_adjustment_content !== null\\\">\\r\\n            <div>\\r\\n                <span>\\r\\n                  <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n                    KH đề nghị điều chỉnh\\r\\n                  </a>\\r\\n                </span>\\r\\n            </div>\\r\\n            <div>\\r\\n                <span>\\r\\n                  <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n                </span>\\r\\n            </div>\\r\\n            <a title=\\\"file {{_translate.GRID.GENERAL.attach}}\\\"\\r\\n               class=\\\"attachIcon actionIcon text-decoration\\\" (click)=\\\"downloadFile(d.data,'0')\\\"\\r\\n               href=\\\"javascript:void(0)\\\">\\r\\n            </a>\\r\\n          </div>\\r\\n\\r\\n        </ng-container>\\r\\n      </ng-container>\\r\\n      <!-- <ng-container *ngIf=\\\"filterReport(d.data.invoice_reports,'0').length > 0\\\">\\r\\n            <a title=\\\"file đính kèm\\\"\\r\\n               class=\\\"attachIcon actionIcon text-decoration\\\" (click)=\\\"downloadFile(data.invoice_id,'0')\\\" href=\\\"javascript:void(0)\\\">\\r\\n            </a>\\r\\n      </ng-container> -->\\r\\n      <!-- <div *ngIf=\\\"d.data.invoice_reports.length == 0\\\">\\r\\n        <div class=\\\"dropdown\\\" style=\\\"float:none;\\\">\\r\\n          <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" style=\\\"font-size: 27px\\\"\\r\\n             (click)=\\\"myFunction1(d.data.id + d.data.invoice_number)\\\"\\r\\n             href=\\\"javascript:void(0)\\\"><i class=\\\"dx-icon fa fa-plus-circle\\\"></i></a>\\r\\n          <div [id]=\\\"d.data.id + d.data.invoice_number\\\" class=\\\"dropdown-content\\\" style=\\\"min-width: 180px!important;\\\">\\r\\n            <a href=\\\"javascript:void(0)\\\"\\r\\n               (click)=\\\"cancelReport(d.data)\\\">{{ 'CONTROLL.BUTTON.cancel_report' | translate }}\\r\\n            </a>\\r\\n            <a href=\\\"javascript:void(0)\\\"\\r\\n               (click)=\\\"dieuChinhBtn(d.data)\\\">{{ 'CONTROLL.BUTTON.create_adjustment_report' | translate }}\\r\\n            </a>\\r\\n            <a href=\\\"javascript:void(0)\\\" (click)=\\\"thayTheBtn(d.data)\\\">{{ 'CONTROLL.BUTTON.create_replace_report' | translate }}\\r\\n            </a>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div>\\r\\n          <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n        </div>\\r\\n      </div> -->\\r\\n    </ng-container>\\r\\n\\r\\n    <div *ngIf=\\\"d.data.invoice_reports.length == 0\\\">\\r\\n      <!-- <div class=\\\"dropdown\\\" style=\\\"float:none;\\\">\\r\\n        <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" style=\\\"font-size: 27px\\\"\\r\\n           (click)=\\\"myFunction1(d.data.id + d.data.invoice_number)\\\"\\r\\n           href=\\\"javascript:void(0)\\\"><i class=\\\"dx-icon fa fa-plus-circle\\\"></i></a>\\r\\n        <div [id]=\\\"d.data.id + d.data.invoice_number\\\" class=\\\"dropdown-content\\\" style=\\\"min-width: 180px!important;\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\"\\r\\n             (click)=\\\"cancelReport(d.data)\\\">{{ 'CONTROLL.BUTTON.cancel_report' | translate }}\\r\\n          </a>\\r\\n          <a href=\\\"javascript:void(0)\\\"\\r\\n             (click)=\\\"dieuChinhBtn(d.data)\\\">{{ 'CONTROLL.BUTTON.create_adjustment_report' | translate }}\\r\\n          </a>\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"thayTheBtn(d.data)\\\">{{ 'CONTROLL.BUTTON.create_replace_report' | translate }}\\r\\n          </a>\\r\\n        </div>\\r\\n      </div> -->\\r\\n      <div>\\r\\n        <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'file_content'\\\">\\r\\n    <div *ngIf=\\\"filterReport(d.data.invoice_reports,'0').length == 0\\\">\\r\\n      <div *ngIf=\\\"filterReport(d.data.invoice_reports,'1').length == 0 && d.data.status !='GHI_TAM'\\\"\\r\\n           style=\\\"float:none;\\\">\\r\\n        <a class=\\\"{{_translate.ICONS.upload}}\\\" (click)=\\\"dinhKemFile($event)\\\" title=\\\"{{_translate.GRID.GENERAL.attach}}\\\"\\r\\n           style=\\\"color: #007BFF;font-size:18px;cursor: pointer;line-height: 26px\\\">\\r\\n          <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"d.data.id\\\"\\r\\n                 accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\"\\r\\n                 style=\\\"display: none;\\\"/>\\r\\n          <!-- Chọn file -->\\r\\n          <!-- <i class=\\\"{{_translate.ICONS.upload}}\\\"></i> -->\\r\\n        </a>\\r\\n        <div class=\\\"dropdown\\\">\\r\\n          <a title=\\\"{{_translate.CONTROLL.BUTTON.get_template_report}}\\\" style=\\\"float: right;\\\"\\r\\n             class=\\\"{{_translate.ICONS.download}}\\\"\\r\\n             style=\\\"color: #007BFF;font-size:18px;cursor: pointer;line-height: 26px\\\"\\r\\n             (click)=\\\"myFunction1(d.data.id + d.data.invoice_number)\\\"\\r\\n             href=\\\"javascript:void(0)\\\"></a>\\r\\n          <div [id]=\\\"d.data.id + d.data.invoice_number\\\" class=\\\"dropdown-content\\\" style=\\\"min-width: 227px!important;\\\" [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n            <!-- <a  (click)=\\\"kyHangLoat(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.sign' | translate }} <i [(class)]=\\\"_translate.ICONS.pencil\\\"></i></a> -->\\r\\n            <a (click)=\\\"downloadFileDocx(d.data, 'HUY')\\\"\\r\\n               href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.get_file_content_cancel' | translate }}\\r\\n              <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n            <a (click)=\\\"downloadFileDocx(d.data, 'DIEU_CHINH')\\\"\\r\\n               href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.get_file_content_adjust' | translate }}\\r\\n              <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n            <!-- <a  (click)=\\\"viewAttachFile(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.view_attach_file' | translate }} <i [(class)]=\\\"_translate.ICONS.view_attach_file\\\"></i></a> -->\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"filterReport(d.data.invoice_reports,'1').length > 0\\\" class=\\\"dropdown\\\" style=\\\"float:none;\\\">\\r\\n        <a title=\\\"file {{_translate.GRID.GENERAL.attach}}\\\"\\r\\n           class=\\\"attachIcon actionIcon text-decoration\\\" (click)=\\\"downloadFile(d.data,'1')\\\" href=\\\"javascript:void(0)\\\">\\r\\n        </a>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n    <div class=\\\"dropdown\\\">\\r\\n      <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\"\\r\\n         style=\\\"float: right;\\\" class=\\\"morongIcon actionIcon\\\"\\r\\n         (click)=\\\"myFunction(d.data.id)\\\"\\r\\n         href=\\\"javascript:void(0)\\\"></a>\\r\\n      <div [id]=\\\"d.data.id\\\" class=\\\"dropdown-content\\\" style=\\\"margin-top: 26px!important;\\\" [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n        <!-- <a  (click)=\\\"kyHangLoat(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.sign' | translate }} <i [(class)]=\\\"_translate.ICONS.pencil\\\"></i></a> -->\\r\\n        <a (click)=\\\"inChuyenDoi(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.print_conversion' | translate }}\\r\\n          <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n        <!-- <a  (click)=\\\"viewAttachFile(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.view_attach_file' | translate }} <i [(class)]=\\\"_translate.ICONS.view_attach_file\\\"></i></a> -->\\r\\n      </div>\\r\\n    </div>\\r\\n    <a *ngIf=\\\"d.data.invoice_files &&d.data.invoice_files.length>0\\\"\\r\\n       style=\\\"float: right;\\\" title=\\\"{{_translate.CONTROLL.BUTTON.view_attach_file}}\\\" class=\\\"attachIcon actionIcon\\\"\\r\\n       (click)=\\\"viewAttachFile(d.data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a *ngIf=\\\"d.data.status =='GHI_TAM'\\\" style=\\\"float: right;\\\" title=\\\"{{_translate.CONTROLL.BUTTON.delete}}\\\"\\r\\n       class=\\\"xoaIcon actionIcon\\\" (click)=\\\"deleteItem(d.data)\\\"\\r\\n       href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a *ngIf=\\\"d.data.status =='GHI_TAM'\\\" style=\\\"float: right;\\\" title=\\\"{{_translate.CONTROLL.BUTTON.edit}}\\\"\\r\\n       class=\\\"suaIcon actionIcon\\\" (click)=\\\"editNotSelect(d.data)\\\"\\r\\n       href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.view_invoice}}\\\" style=\\\"float: right;\\\" class=\\\"xemIcon actionIcon\\\"\\r\\n       (click)=\\\"view(d.data)\\\"\\r\\n       href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n    <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{info.column.caption}} </p>\\r\\n  </div>\\r\\n\\r\\n  <dxo-summary>\\r\\n    <dxi-total-item summaryType=\\\"custom\\\" cssClass=\\\"dxi-total-payment-total_payment_string\\\" [customizeText]=\\\"customizeText\\\" showInColumn=\\\"total_payment_string\\\">\\r\\n    </dxi-total-item>\\r\\n  </dxo-summary>\\r\\n\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"configs.system_parameter.number_row_per_page\\\"></dxo-paging>\\r\\n  <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 35, 50, 100]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n             [showInfo]=\\\"true\\\">\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n<ngx-spinner\\r\\nbdColor=\\\"rgba(51,51,51,0.8)\\\"\\r\\nsize=\\\"medium\\\"\\r\\ncolor=\\\"#fff\\\"\\r\\ntype=\\\"timer\\\">\\r\\n<p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n\"","module.exports = \".chua-gui-khach-hang{color:red}.cho-ky{color:#008b8b}.gach-chan{text-decoration:underline;cursor:pointer}.search-section{padding-bottom:15px}.button-panel{margin-top:30px}.last-drodown{bottom:30px}.small-grid{position:fixed  !important;right:39px !important}.text-decoration{text-decoration:none}::ng-deep .truyen-nhan{max-width:80% !important;margin:auto}::ng-deep #gridContainerInvoice .dx-cell-focus-disabled{overflow:visible !important}::ng-deep #gridContainerInvoice .dx-datagrid-rowsview{overflow:visible}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { AuthService, Library, VPreviewInvService, SocketService, sEnum } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ViewAttachFileComponent } from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport { HanldeReportService } from '@modules/handle-report/hanlde-report.service';\r\nimport { Helper } from '@core/helper/Helper';\r\nimport { finalize, map } from 'rxjs/operators';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport * as moment from 'moment';\r\nimport { SendInvoicesComponent } from '@modules/handle-invoice/components/send-invoices/send-invoices.component';\r\nimport { HandleInvoiceStudentService } from '@modules/handle-invoice-student/shared/handle-invoice-student.service';\r\nimport { SendDataForTaxComponent } from '@shared/index';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { ReportTaxInvoiceErrorComponent } from '@modules/handle-invoice/components/report-tax-invoice-error/report-tax-invoice-error.component'\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { RemoveComponent } from '../remove/remove.component';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  pageSize: any;\r\n  dataSource: any;\r\n  selectedRows: Array<any> = [];\r\n  selectedItems: Array<any> = [];\r\n  bsModalRef: BsModalRef;\r\n  paramSearch: any;\r\n  _translate: any;\r\n  clickCurent: any = undefined;\r\n  idRow: any = undefined;\r\n  checkSubmit: any;\r\n  private fileName: string;\r\n  arrayFileContent: any;\r\n  formFileContent: FormGroup;\r\n  configs: any = {};\r\n  isSearchStudent = true;\r\n  currentUser: any;\r\n  isDaDKTT78: boolean = false;\r\n  infoDangKy: any;\r\n  isExistFormRelease: boolean = false;\r\n  bsModalSignRef: BsModalRef;\r\n  ioSignature: Subscription;\r\n  dataInfor: any;\r\n  pageSelect: any;\r\n  isDisableAdjust = true;\r\n  isDisableReplace = true;\r\n  objStatusBtn = {};\r\n  constructor(\r\n    private authService: AuthService,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    private router: Router,\r\n    public translate: TranslateService,\r\n    private handleReportService: HanldeReportService,\r\n    private handleStudentService: HandleInvoiceStudentService,\r\n    private fb: FormBuilder,\r\n    private templateService: TemplateService,\r\n    private spinner: NgxSpinnerService,\r\n    private socketService: SocketService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.formFileContent = this.fb.group(this.handleReportService.generatedFormControlAll);\r\n    this.configs = this.authService.getConfigs();\r\n    if (this.configs.system_parameter.select_invoice_current_page)\r\n      this.pageSelect = \"page\";\r\n    else\r\n      this.pageSelect = \"allPages\";\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (this.currentUser.is_convert_TT78) {\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      if (this.infoDangKy && this.infoDangKy.id) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n          this.isDaDKTT78 = true;\r\n          let infoFormRelease = this.authService.getInfoFormRelease();\r\n          if (infoFormRelease && infoFormRelease.invoice_releases && infoFormRelease.invoice_releases.length > 0) {\r\n            let invoicesReleases = infoFormRelease.invoice_releases.filter(p => (parseInt(p.amount) - parseInt(p.used_amount)) > 0);\r\n            if (invoicesReleases && invoicesReleases.length > 0)\r\n              this.isExistFormRelease = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /* Hiện nút điều chỉnh/thay thế */\r\n    if (this.configs.system_parameter.incurred_adjustment_invoice || this.configs.system_parameter.process_not_in_software) {\r\n      this.isDisableAdjust = false;\r\n      if (this.configs.system_parameter.process_not_in_software)\r\n        this.isDisableReplace = false;\r\n    }\r\n  }\r\n\r\n  // HS-SV\r\n  loadList(params?) {\r\n    this.dataSource = {};\r\n    this.dataSource.store = this.handleStudentService.getAllStudent(params);\r\n  }\r\n\r\n  filterReport(data, _condition) {\r\n    if (data && data.length > 0) {\r\n      return data.filter(p => p.is_paper_report === _condition && p.status === 'HOAT_DONG');\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.invoice_number) {\r\n            if (e.data.send_department_status == \"DA_GUI_CQT\")\r\n              e.rowElement.style.color = '#008B8B';\r\n            else if (e.data.send_department_status == \"DA_CAP\")\r\n              e.rowElement.style.color = 'black';\r\n            else if (e.data.send_department_status == \"DA_TIEP_NHAN\")\r\n              e.rowElement.style.color = 'black';\r\n            else\r\n              e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type === '2' || e.data.adjustment_type === '7' || e.data.adjustment_type === '6') {\r\n        let eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.invoice_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadList(e);\r\n  }\r\n\r\n  checkDisableButton() {\r\n    if (this.selectedItems.length) {\r\n      if (this.selectedItems[0].status == 'DA_XUAT') {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  myFunction(e) {\r\n    if (this.idRow && document.getElementById(this.idRow)) {\r\n      document.getElementById(this.idRow).classList.remove('show');\r\n    }\r\n    if (this.clickCurent !== undefined && this.clickCurent !== e && document.getElementById(this.clickCurent)) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    document.getElementById(e).classList.toggle('show');\r\n    this.clickCurent = e;\r\n  }\r\n\r\n  myFunction1(e) {\r\n    if (this.clickCurent && document.getElementById(this.clickCurent)) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.idRow !== '' && this.idRow !== e && document.getElementById(this.idRow)) {\r\n      document.getElementById(this.idRow).classList.remove('show');\r\n    }\r\n    document.getElementById(e).classList.toggle('show');\r\n    this.idRow = e;\r\n  }\r\n\r\n  // Chọn đối tượng trong màn hình danh sách\r\n  selectionChanged(data: any) {\r\n    this.hidenDropdownList();\r\n    this.selectedItems = data.selectedRowsData;\r\n    if (this.selectedRows.length == 1 || this.configs.system_parameter.incurred_adjustment_invoice || this.configs.system_parameter.process_not_in_software) {\r\n      if (this.selectedRows.length == 1 || this.configs.system_parameter.process_not_in_software) {\r\n        this.isDisableAdjust = false;\r\n        this.isDisableReplace = false;\r\n      }\r\n      else {\r\n        this.isDisableAdjust = false;\r\n        this.isDisableReplace = true;\r\n      }\r\n    }\r\n    else {\r\n      this.isDisableAdjust = true;\r\n      this.isDisableReplace = true;\r\n    }\r\n  }\r\n\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n\r\n  routerCancelInvoice() {\r\n    if (this.selectedItems && this.selectedItems.length > 0) {\r\n      let lstGhiTam = this.selectedItems.filter(p => p.status == 'GHI_TAM');\r\n      if (lstGhiTam && lstGhiTam.length == this.selectedItems.length) {\r\n        const ids = this.selectedRows.join(',');\r\n        const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n        result.then((dialogResult) => {\r\n          if (dialogResult) {\r\n            Library.showloading();\r\n            this.handleInvoiceService.delete(ids).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n                this.loadList(this.paramSearch);\r\n              } else {\r\n                Library.notify(rs.message, 'error');\r\n              }\r\n            }, err => {\r\n            }, () => {\r\n              Library.hideloading();\r\n            });\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        let lstInvoice = this.selectedItems.filter(p => p.status == 'DA_XUAT' && p.adjustment_type == '1');\r\n        if (lstInvoice && lstInvoice.length > 0) {\r\n          if (lstInvoice.length == 1) {\r\n            const row = lstInvoice[0];\r\n            this.setUrlNavigate();\r\n            this.router.navigate(['/system/handle-report/', row.id, 'HUY']);\r\n          }\r\n          else {\r\n            let _lstCancel = lstInvoice.filter(p => p.adjustment_type == '7' || p.adjustment_type == '2');\r\n            if (_lstCancel && _lstCancel.length > 0) {\r\n              Library.notify(this._translate.NOTIFY.choose_cancel_invoice, 'error');\r\n            }\r\n            else\r\n              this.delete(lstInvoice);\r\n          }\r\n\r\n        }\r\n        else\r\n          Library.notify('Bạn không thể hủy hóa đơn này', 'error');\r\n      }\r\n    }\r\n  }\r\n\r\n  dieuChinh() {\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (this.selectedItems && this.selectedItems.length == 0) {\r\n      if (this.configs.system_parameter.process_not_in_software) {\r\n        this.router.navigate(['/system/handle-invoice/adjust-without-software']);\r\n      }\r\n      else if (this.configs.system_parameter.incurred_adjustment_invoice)\r\n        this.router.navigate(['/system/handle-invoice/multiple-adjust']);\r\n    }\r\n    else {\r\n      const row = this.selectedItems[0];\r\n      if (row.status === 'DA_XUAT' && row.adjustment_type !== '7' && row.adjustment_type !== '2') {\r\n        const template_code = row.template_code.split('/');\r\n        switch (template_code[0]) {\r\n          case '01GTKT0':\r\n          case '02GTTT0':\r\n          case '1':\r\n          case '2':\r\n            this.setUrlNavigate();\r\n            this.router.navigate(['/system/handle-report/', row.id, 'DIEU_CHINH']);\r\n            break;\r\n          // case '02GTTT0':\r\n          //   this.router.navigate(['/system/handle-report/', row.id, 'DIEU_CHINH']);\r\n          //   break;\r\n          default:\r\n            break;\r\n        }\r\n      } else {\r\n        Library.notify('Bạn không thể điều chỉnh hóa đơn này', 'error');\r\n      }\r\n    }\r\n  }\r\n\r\n  thayThe() {\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (this.selectedItems && this.selectedItems.length == 0 && this.configs.system_parameter.process_not_in_software) {\r\n      this.router.navigate(['/system/handle-invoice/replace-without-software']);\r\n    }\r\n    else {\r\n      const row = this.selectedItems[0];\r\n      if (row.status === 'DA_XUAT' && row.adjustment_type !== '4') {\r\n        this.router.navigate([`/system/handle-invoice/replace/${row.id}`]);\r\n        const template_code = row.template_code.split('/');\r\n        switch (template_code[0]) {\r\n          case '01GTKT0':\r\n          case '02GTTT0':\r\n          case '2':\r\n          case '1':\r\n            this.setUrlNavigate();\r\n            this.router.navigate(['/system/handle-report/', row.id, 'THAY_THE']);\r\n            break;\r\n          // case '02GTTT0':\r\n          //   this.router.navigate([`/system/handle-invoice/sale-replace/${row.id}`]);\r\n          //   break;\r\n          default:\r\n            break;\r\n        }\r\n      } else {\r\n        Library.notify('Bạn không thể thay thế hóa đơn này', 'error');\r\n      }\r\n    }\r\n  }\r\n\r\n  editNotSelect(row) {\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    this.hidenDropdownList();\r\n    if (row.status === 'DA_XUAT') {\r\n      Library.notify('Bạn không thể sửa hóa đơn đã xuất', 'error');\r\n    } else {\r\n      if (row.adjustment_type === '5') {\r\n        if (row.is_adjustment_invoices || row.is_outside_process) {\r\n          if (row.is_adjustment_invoices)\r\n            this.router.navigate([`/system/handle-invoice/multiple-adjust/${row.id}`]);\r\n          else\r\n            this.router.navigate([`/system/handle-invoice/adjust-without-software/${row.id}`]);\r\n        }\r\n        else {\r\n          switch (row.invoice_type) {\r\n            case '01GTKT':\r\n              if (row.batch_id)\r\n                this.router.navigate([`/system/handle-invoice-student/edit-adjust-vat/${row.id}`]);\r\n              else\r\n                this.router.navigate([`/system/handle-invoice/edit-adjust/${row.id}`]);\r\n              break;\r\n            case '02GTTT':\r\n              if (row.batch_id)\r\n                this.router.navigate([`/system/handle-invoice-student/edit-adjust-sale/${row.id}`]);\r\n              else\r\n                this.router.navigate([`/system/handle-invoice/edit-sale-adjust/${row.id}`]);\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      } else if (row.adjustment_type === '3') {\r\n        if (row.is_outside_process) {\r\n          this.router.navigate([`/system/handle-invoice/replace-without-software/${row.id}`]);\r\n        }\r\n        else {\r\n          switch (row.invoice_type) {\r\n            case '01GTKT':\r\n              if (row.batch_id)\r\n                this.router.navigate([`/system/handle-invoice-student/edit-replace-vat/${row.id}`]);\r\n              else\r\n                this.router.navigate([`/system/handle-invoice/edit-replace/${row.id}`]);\r\n              break;\r\n            case '02GTTT':\r\n              if (row.batch_id)\r\n                this.router.navigate([`/system/handle-invoice-student/edit-replace-sale/${row.id}`]);\r\n              else\r\n                this.router.navigate([`/system/handle-invoice/edit-sale-replace/${row.id}`]);\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  viewNotSelect(row) {\r\n    this.hidenDropdownList();\r\n    if (row.status == 'DA_XUAT') {\r\n      let ids = [];\r\n      ids.push(row.id);\r\n      if (this.configs.system_parameter.view_multi_invoice) {\r\n        let data = this.vatService.taodulieuXemMau(ids);\r\n        data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n        this.vPreviewInvService.xemMau(data);\r\n      }\r\n      else {\r\n        const initialState = {\r\n          items: ids,\r\n          isXuatHD: false,\r\n          hinhthucxuat: '',\r\n          typeAction: sEnum.typeCode.xem_hoa_don\r\n        };\r\n        this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n      }\r\n    } else {\r\n      Library.notify('Hóa đơn bị ký lỗi, bạn vui lòng ký lại hóa đơn', 'error');\r\n    }\r\n  }\r\n\r\n  view(data) {\r\n    if (data) {\r\n      this.dataInfor = data;\r\n      const ids = [];\r\n      ids.push(data.id);\r\n      if (this.configs.system_parameter.view_multi_invoice) {\r\n        let data = this.vatService.taodulieuXemMauHS(ids);\r\n        data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n        this.vPreviewInvService.xemMau(data);\r\n      }\r\n      else {\r\n        const initialState = {\r\n          items: ids,\r\n          isXuatHD: false,\r\n          hinhthucxuat: '',\r\n          typeAction: sEnum.typeCode.xem_hoa_don\r\n        };\r\n        this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  viewDetailInvoice(row) {\r\n    this.router.navigate([`/system/vat-invoice/${row.id}`]);\r\n  }\r\n\r\n  viewReport(idInv, data) {\r\n    const url = window.location.pathname;\r\n    let type;\r\n    if (data.type === 'HUY') {\r\n      type = 'THAY_THE';\r\n    } else {\r\n      type = data.type;\r\n    }\r\n    if (sessionStorage.hasOwnProperty('urlCreate')) {\r\n      if (sessionStorage.getItem('urlCreate') !== null) {\r\n        sessionStorage.setItem('urlCreate', url);\r\n      } else {\r\n        sessionStorage.setItem('urlCreate', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlCreate', url);\r\n    }\r\n    this.handleReportService.createReport(idInv, type);\r\n  }\r\n\r\n  sendInvoice(id) {\r\n    Library.showloading();\r\n    let sub = this.vatService.showToSendInvoice(id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  delete(lstInvoice) {\r\n    this.hidenDropdownList();\r\n    let ids = [];\r\n    lstInvoice = lstInvoice.sort((invA, invB) => {\r\n      return <any>new Date(invB.invoice_date) - <any>new Date(invA.invoice_date) || invB.invoice_number.localeCompare(invA.invoice_number);\r\n    });\r\n\r\n    ids = lstInvoice.map(e => e.id);\r\n    Library.showloading();\r\n    let isView = false;\r\n    const sub = this.handleInvoiceService.showHDXoaBo(ids, isView).subscribe(rs => {\r\n      // let countReport = 0;\r\n      // if (rs[1].data.invoice_reports)\r\n      //   countReport = rs[1].data.invoice_reports.length;\r\n      let lstInvoice = rs[0].data.invoices.filter(p => p.adjustment_type == '7');\r\n      if (lstInvoice && lstInvoice.length > 0)\r\n        isView = true;\r\n      let lstInv = [];\r\n      ids.forEach(id => {\r\n        let inv = rs[0].data.invoices.filter(p => p.id == id)[0];\r\n        lstInv.push(inv);\r\n      });\r\n      const initialState = {\r\n        isView: isView,\r\n        data: lstInv,\r\n        configs: this.configs,\r\n        infoDangKy: this.infoDangKy\r\n        //  countReport: countReport,\r\n      };\r\n      this.bsModalRef = this.modalService.show(RemoveComponent, {\r\n        class: 'modal-lg full-width', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveItem) {\r\n          this.loadList(this.paramSearch);\r\n        }\r\n      });\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  viewAttachFile(data) {\r\n    this.hidenDropdownList();\r\n    if (data) {\r\n      Library.showloading();\r\n      this.vatService.showAttachFile(data.id).subscribe((rs: any) => {\r\n        if (rs.status == 'success') {\r\n          if (rs.data && rs.data.invoice && rs.data.invoice.invoice_files.length > 0) {\r\n            let initialState = {\r\n              fileData: rs.data.invoice.invoice_files,\r\n              view_attach_file: true,\r\n            };\r\n            this.bsModalRef = this.modalService.show(ViewAttachFileComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-lg',\r\n              initialState\r\n            });\r\n\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_file_attach, 'error');\r\n          }\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n\r\n  inChuyenDoi(data) {\r\n    if (this.selectedItems.length || data) {\r\n      let _lst = this.selectedItems.filter(p => p.status == 'DA_XUAT');\r\n      if (_lst.length > 0 || data) {\r\n        let ids = [];\r\n        if (data) {\r\n          if (data.status == 'DA_XUAT') {\r\n            ids.push(data.id);\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_print_convert, 'error');\r\n            return;\r\n          }\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          const data = this.vatService.taodulieuInchuyendoiHS(ids);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.in_chuyen_doi_hs\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  customizeText = (url) => {\r\n    this.invoiceService.handleTotalGrid(url.value, this.objStatusBtn, this.dataGrid);\r\n    return '';\r\n  }\r\n\r\n  downloadFile(data, isBBGiay) {\r\n    this.hidenDropdownList();\r\n    Library.showloading();\r\n    this.handleReportService.getAllFileContentOfReport(data.id, isBBGiay)\r\n      .pipe(\r\n        map(value => {\r\n          if (value.status === 'success') {\r\n            return value.data.invoice_reports;\r\n          }\r\n        }),\r\n        finalize(() => Library.hideloading())\r\n      )\r\n      .subscribe(\r\n        value => {\r\n          this.arrayFileContent = [];\r\n          for (let i = 0; i < value.length; i++) {\r\n            if (value[i].file_content !== null) {\r\n              if (value[i].type === 'DIEU_CHINH') {\r\n                this.arrayFileContent.push({ id: value[i].id, file_content: value[i].file_content, file_name: value[i].file_name });\r\n              } else {\r\n                this.arrayFileContent.push({ id: value[i].id, file_content: value[i].file_content, file_name: value[i].file_name });\r\n              }\r\n            }\r\n          }\r\n\r\n          const initialState = {\r\n            fileData: this.arrayFileContent,\r\n            view_attach_file: true,\r\n            view_paper_report: (isBBGiay == '1' ? true : false),\r\n            _objInv: data\r\n          };\r\n          this.bsModalRef = this.modalService.show(ViewAttachFileComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg',\r\n            initialState\r\n          });\r\n\r\n        },\r\n        error => {\r\n          Library.notify(error, 'error');\r\n        }\r\n      );\r\n  }\r\n\r\n  dieuChinhBtn(data) {\r\n    const row = data;\r\n    if (row.status === 'DA_XUAT' && row.adjustment_type !== '7' && row.adjustment_type !== '2') {\r\n      const template_code = row.template_code.split('/');\r\n      switch (template_code[0]) {\r\n        case '01GTKT0':\r\n        case '1':\r\n          this.router.navigate(['/system/handle-report/', row.id, 'DIEU_CHINH']);\r\n          break;\r\n        case '02GTTT0':\r\n        case '2':\r\n          this.router.navigate([`/system/handle-invoice/sale-adjust/${row.id}`]);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    } else {\r\n      Library.notify('Bạn không thể điều chỉnh hóa đơn này', 'error');\r\n    }\r\n  }\r\n\r\n  thayTheBtn(data) {\r\n    const row = data;\r\n    if (row.status === 'DA_XUAT' && row.adjustment_type !== 7 && row.adjustment_type !== 2 && row.adjustment_type !== 4 && row.adjustment_type !== 5) {\r\n      this.router.navigate([`/system/handle-invoice/replace/${row.id}`]);\r\n      const template_code = row.template_code.split('/');\r\n      switch (template_code[0]) {\r\n        case '01GTKT0':\r\n        case '1':\r\n          this.router.navigate(['/system/handle-report/', row.id, 'THAY_THE']);\r\n          break;\r\n        case '02GTTT0':\r\n        case '2':\r\n          this.router.navigate([`/system/handle-invoice/sale-replace/${row.id}`]);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    } else {\r\n      Library.notify('Bạn không thể thay thế hóa đơn này', 'error');\r\n    }\r\n  }\r\n\r\n  cancelReport(data) {\r\n    const row = data;\r\n    if (row.status === 'DA_XUAT' && row.adjustment_type !== '7') {\r\n      this.router.navigate(['/system/handle-report/', row.id, 'HUY']);\r\n    } else {\r\n      Library.notify('Hóa đơn đã bị hủy', 'error');\r\n    }\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n    // document.getElementById(\"file-dinh-kem\").click();\r\n    // console.log(e)\r\n\r\n  }\r\n\r\n  onDinhKemFile(e) {\r\n    const rowIndex = e.target.dataset.rowindex;\r\n    const fileAttachData: Array<any> = [];\r\n    const fileReader = new FileReader();\r\n    const file = e.target.files[0];\r\n    if (file.size <= 2000000) {\r\n      const pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n      if (pattFile.test(file.name)) {\r\n        fileReader.readAsDataURL(file);\r\n        fileReader.onload = (e) => {\r\n          const base64result = fileReader.result.toString().split(',')[1];\r\n          fileAttachData.unshift({\r\n            type: 'DK',\r\n            file_name: file.name,\r\n            file_content: base64result,\r\n          });\r\n          const data = {\r\n            invoice_report: {\r\n              invoice_id: rowIndex,\r\n              type: 'HUY',\r\n              status: 'HOAT_DONG',\r\n              signature_status: 'NGUOI_BAN_KY',\r\n              file_content: base64result,\r\n              is_paper_report: '1',\r\n              file_name: file.name\r\n            }\r\n          };\r\n          this.handleReportService.apiCreateReport(data).pipe(finalize(() => Library.hideloading()))\r\n            .subscribe(value => {\r\n              if (value.status === 'success') {\r\n                this.loadList(this.paramSearch);\r\n                Library.notify(this._translate.NOTIFY.attach_paper_report, 'success');\r\n              } else {\r\n                Library.notify(value.message, 'error');\r\n              }\r\n            },\r\n              error => {\r\n                Library.notify(error, 'error');\r\n              }\r\n            );\r\n        };\r\n      } else {\r\n        Library.notify('File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml', 'error');\r\n      }\r\n    } else {\r\n      Library.notify('Yêu cầu file nhỏ hơn 2MB', 'error');\r\n    }\r\n  }\r\n\r\n  downloadFileDocx(data, type) {\r\n    const dataSeller = JSON.parse(window.localStorage.getItem('currentUser'));\r\n\r\n    const a = {\r\n      invoice_report: {\r\n        invoice_id: data.id,\r\n        file_extension: 'docx',\r\n        doc_relate_date: moment(new Date()).format('YYYY-MM-DD'),\r\n        type: type,\r\n        json_data: {\r\n          seller_name: dataSeller.account.name,\r\n          seller_address: dataSeller.account.business_address,\r\n          seller_tax_code: dataSeller.account.tax_code,\r\n          seller_mobile: dataSeller.account.contact_mobile,\r\n          seller_surrogate_name: dataSeller.account.surrogate_name,\r\n          seller_surrogate_position: dataSeller.account.surrogate_position,\r\n          buyer_name: data.hasOwnProperty('customer_name') && data.customer_name !== null ? data.customer_name : data.buyer_name,\r\n          buyer_address: data.hasOwnProperty('buyer_address') ? data.buyer_address : null,\r\n          buyer_tax_code: data.hasOwnProperty('buyer_tax_code') ? data.buyer_tax_code : null,\r\n          buyer_mobile: data.hasOwnProperty('buyer_mobile') ? data.buyer_mobile : null,\r\n          buyer_surrogate_name: data.hasOwnProperty('buyer_surrogate_name') ? data.buyer_surrogate_name : null,\r\n          buyer_surrogate_position: data.hasOwnProperty('buyer_surrogate_position') ? data.buyer_surrogate_position : null,\r\n          template_code: data.hasOwnProperty('template_code') ? data.template_code : null,\r\n          invoice_series: data.hasOwnProperty('invoice_series') ? data.invoice_series : null,\r\n          invoice_date: data.hasOwnProperty('invoice_date') ? data.invoice_date : null,\r\n          invoice_number: data.hasOwnProperty('invoice_number') ? data.invoice_number : null,\r\n        },\r\n        is_paper_report: 1\r\n      }\r\n    };\r\n    Library.showloading();\r\n    this.handleReportService.apiGetFileContent(a).subscribe(\r\n      value => {\r\n        if (value.status === 'success') {\r\n          Helper.dowloadFile(value.data.invoice.file_name, 'docx', value.data.invoice.file_content);\r\n        } else {\r\n          Library.notify(value.message, 'error');\r\n        }\r\n      }, error => {\r\n        Library.notify(error.message, 'error');\r\n\r\n      }, () => {\r\n        Library.hideloading();\r\n      }\r\n    );\r\n  }\r\n\r\n  hidenDropdownList() {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.idRow) {\r\n      document.getElementById(this.idRow).classList.remove('show');\r\n    }\r\n  }\r\n  LydoKTiepNhan(data) {\r\n    let lstErr = JSON.parse(data.error_content);\r\n    const initialState = {\r\n      lstErr: lstErr,\r\n      notifyType: \"THONG_BAO_LOI_CQT\"\r\n    };\r\n    this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n      backdrop: 'static',\r\n      keyboard: true,\r\n      class: 'modal-lg modal-margin-width',\r\n      initialState\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  BaoCaoCQT() {\r\n    this.hidenDropdownList();\r\n    Library.showloading();\r\n    let sub = this.templateService.getAll1().subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let listTemplate = rs.data.templates;\r\n        let lstInvoice = this.selectedItems;\r\n        lstInvoice = lstInvoice.sort((invA, invB) => {\r\n          return <any>new Date(invB.invoice_date) - <any>new Date(invA.invoice_date) || invB.invoice_number.localeCompare(invA.invoice_number);\r\n        });\r\n        const initialState = {\r\n          data: lstInvoice,\r\n          configs: this.configs,\r\n          listTemplate: listTemplate,\r\n          infoDangKy: this.infoDangKy\r\n        };\r\n        this.bsModalRef = this.modalService.show(ReportTaxInvoiceErrorComponent, {\r\n          class: 'modal-lg full-width', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n  }\r\n  onContentReady(e) {\r\n    if (e) {\r\n      const dataSource = this.dataGrid.instance.getDataSource();\r\n      this.pageSize = dataSource.items().length\r\n    }\r\n  }\r\n  ThongDiepGuiNhan(data) {\r\n    Library.showloading();\r\n    if (data.invoice_wrongs && data.invoice_wrongs.length > 0) {\r\n      let lstErr = data.invoice_wrongs;\r\n      const initialState = {\r\n        lstErr: lstErr,\r\n        notifyType: \"THONG_DIEP_TRUYEN_NHAN_MTT\",\r\n      };\r\n      this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n        backdrop: 'static',\r\n        keyboard: true,\r\n        class: 'modal-lg truyen-nhan',\r\n        initialState\r\n      });\r\n      const subModal = this.modalService.onHide.subscribe(() => {\r\n        subModal.unsubscribe();\r\n      });\r\n      Library.hideloading();\r\n    }\r\n    else {\r\n      let message = {\r\n        message_code: data.message_wrong_code\r\n      }\r\n      let sub = this.handleInvoiceService.getInforSendRecieve(message).subscribe(\r\n        (rs: any) => {\r\n          if (rs.status == \"success\") {\r\n            let lstErr = rs.data;\r\n            const initialState = {\r\n              lstErr: lstErr,\r\n              notifyType: \"THONG_DIEP_TRUYEN_NHAN\",\r\n              send_wrong_status: data.send_wrong_status,\r\n              noi_dung_loi: data.error_content\r\n            };\r\n            this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n              backdrop: 'static',\r\n              keyboard: true,\r\n              class: 'modal-lg modal-margin-width truyen-nhan',\r\n              initialState\r\n            });\r\n            const subModal = this.modalService.onHide.subscribe(() => {\r\n              subModal.unsubscribe();\r\n            });\r\n          }\r\n          else {\r\n            Library.notify(rs.message, \"error\");\r\n          }\r\n        },\r\n        err => {\r\n\r\n        },\r\n        () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        }\r\n      );\r\n    }\r\n  }\r\n  deleteItem(data) {\r\n    let ids = data.id;\r\n    const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n    result.then((dialogResult) => {\r\n      if (dialogResult) {\r\n        Library.showloading();\r\n        this.handleInvoiceService.delete(ids).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n            this.loadList(this.paramSearch);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n        });\r\n      }\r\n    });\r\n  }\r\n  getStatusSendTax(data) {\r\n    let status = \"\";\r\n    if (data.invoice_wrongs && data.invoice_wrongs.length > 0) {\r\n      switch (data.invoice_wrongs[0].status) {\r\n        case \"DA_GUI\":\r\n        case \"DA_GUI_CQT\":\r\n          status = \"Đã gửi TB\";\r\n          break;\r\n        case \"KHONG_TIEP_NHAN\":\r\n          status = \"CQT không tiếp nhận\";\r\n          break;\r\n        case \"TIEP_NHAN\":\r\n          status = \"CQT tiếp nhận\";\r\n          break;\r\n        case \"CHAP_NHAN\":\r\n          status = \"CQT chấp nhận\";\r\n          break;\r\n        case \"KHONG_CHAP_NHAN\":\r\n          status = \"CQT không chấp nhận\";\r\n          break;\r\n      }\r\n    }\r\n    else {\r\n      switch (data.send_wrong_status) {\r\n        case \"DA_GUI\":\r\n        case \"DA_GUI_CQT\":\r\n          status = \"Đã gửi TB\";\r\n          break;\r\n        case \"KHONG_TIEP_NHAN\":\r\n          status = \"CQT không tiếp nhận\";\r\n          break;\r\n        case \"TIEP_NHAN\":\r\n          status = \"CQT tiếp nhận\";\r\n          break;\r\n        case \"CHAP_NHAN\":\r\n          status = \"CQT chấp nhận\";\r\n          break;\r\n        case \"KHONG_CHAP_NHAN\":\r\n          status = \"CQT không chấp nhận\";\r\n          break;\r\n      }\r\n    }\r\n    return status;\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.LABEL.cancel_invoice}}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid\\r\\n    id=\\\"invoiceHistoryGrid\\\"\\r\\n    [dataSource]=\\\"dataSource\\\"\\r\\n    [showBorders]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\"\\r\\n    (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n    (onCellPrepared)=\\\"onCellPrepared($event)\\\"\\r\\n    [showRowLines]=\\\"true\\\">\\r\\n    <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n    <!-- Số hóa đơn -->\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n              alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Mẫu số, ký hiệu -->\\r\\n    <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Ngày hóa đơn -->\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n              format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Mã số thuế -->\\r\\n     <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Tên khách hàng -->\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\"\\r\\n              alignment=\\\"left\\\" minWidth=\\\"200\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Địa chỉ bên mua -->\\r\\n    <dxi-column dataField=\\\"buyer_address\\\" caption=\\\"{{_translate.CONTROLL.LABEL.address}}\\\" minWidth=\\\"200\\\" \\r\\n                [allowEditing]=\\\"false\\\" alignment=\\\"left\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Tổng tiền -->\\r\\n    <dxi-column dataField=\\\"total_payment\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" alignment=\\\"right\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\" [allowEditing]=\\\"false\\\" dataType=\\\"number\\\" format=\\\"0,###.##\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Số văn bản -->\\r\\n    <!-- <dxi-column dataField=\\\"doc_relate_symbol\\\" [allowEditing]=\\\"!isView\\\"\\r\\n                caption=\\\"{{_translate.CONTROLL.LABEL.doc_relate_symbol}}\\\" minWidth=\\\"150\\\" alignment=\\\"left\\\">\\r\\n    </dxi-column> -->\\r\\n    <!-- Ngày văn bản -->\\r\\n    <!-- <dxi-column dataField=\\\"doc_relate_date\\\" [allowEditing]=\\\"!isView\\\" \\r\\n                caption=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}}\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"left\\\" minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\">\\r\\n    </dxi-column> -->\\r\\n    <!-- Ngày hủy -->\\r\\n    <dxi-column dataField=\\\"destroy_date\\\"\\r\\n                caption=\\\"{{ 'GRID.INVOICE.date_cancel' | translate }}\\\" [editorOptions]=\\\"{ placeholder: 'dd/MM/yyyy',useMaskBehavior:true }\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"left\\\" minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Lý do hủy -->\\r\\n    <dxi-column dataField=\\\"destroy_reason\\\"\\r\\n                caption=\\\"{{_translate.CONTROLL.LABEL.destroy_reason}}\\\" alignment=\\\"left\\\" minWidth=\\\"150\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Email -->\\r\\n    <!-- <dxi-column dataField=\\\"buyer_email\\\" [allowEditing]=\\\"!isView\\\" \\r\\n                caption=\\\"Email\\\" alignment=\\\"left\\\" minWidth=\\\"150\\\">\\r\\n    </dxi-column> -->\\r\\n    <!-- <dxi-column cellTemplate=\\\"DinhKemFile\\\" caption=\\\"{{_translate.CONTROLL.LABEL.attach_file}}\\\" [width]=\\\"150\\\" alignment=\\\"left\\\"></dxi-column> -->\\r\\n    <!-- <dxi-column *ngIf=\\\"!isView\\\" cellTemplate=\\\"downloadBB\\\" caption=\\\"{{_translate.CONTROLL.LABEL.doc_relate}}\\\" [width]=\\\"90\\\" alignment=\\\"center\\\"></dxi-column> -->\\r\\n\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template_code }}</p>\\r\\n      <p>{{ d.data.invoice_series }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n        *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.customer_name }}</p>\\r\\n      <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.customer_name || _translate.GRID.INVOICE.invoice_wait_for_sign }}</p>\\r\\n    </div>\\r\\n      <div *dxTemplate=\\\"let data of 'DinhKemFile'\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"dinhKemFile($event)\\\">\\r\\n            <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"data.rowIndex\\\" accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n\\r\\n            <p *ngIf=\\\"data.data.invoice_files&&data.data.invoice_files.length\\\" (click)=\\\"downloadFile(data.data.invoice_files[0])\\\">{{data.data.invoice_files[0].file_name}}</p>\\r\\n          </a>\\r\\n        </div>\\r\\n      <!-- <div *dxTemplate=\\\"let d of 'downloadBB'\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"xuatMauBienBan(d.data)\\\"><img src=\\\"assets\\\\img\\\\icons\\\\TaiMauBangKe.png\\\"></a>\\r\\n        </div> -->\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button *ngIf=\\\"!isView\\\" text=\\\"{{_translate.CONTROLL.BUTTON.save }}\\\" (click)=\\\"xoaBo()\\\" icon=\\\"{{_translate.ICONS.save }}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back }}\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".gach-chan{text-decoration:underline}.img-upload-second{text-align:center}.img-upload-second i{margin-top:10px;width:40px;height:auto;cursor:pointer}.img-upload-second p{margin-top:10px}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { Base64 } from 'js-base64';\r\nimport * as moment from 'moment';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\n\r\nimport { Library, SocketService, AuthService, Helper, VStringService } from '@core/index';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String, StringBuilder } from 'typescript-string-operations';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { pattern } from '@config/index';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\n@Component({\r\n  selector: 'app-remove',\r\n  templateUrl: './remove.component.html',\r\n  styleUrls: ['./remove.component.scss']\r\n})\r\nexport class RemoveComponent implements OnInit {\r\n\r\n  data: any;\r\n  isView: any;\r\n  configs: any;\r\n  invoices: any;\r\n  invoicesStore: ArrayStore;\r\n  dataSource: DataSource;\r\n  ioSignature: any;\r\n  _language: string;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  _translate: any;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  nodeSign: any;\r\n  countReport: any;     \r\n  emailPattern: any = pattern.email;\r\n  infoDangKy: any;\r\n  isTT78: boolean = false;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private socketService: SocketService,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n    private authService: AuthService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n  ngOnInit() {\r\n    this.invoicesStore = new ArrayStore({\r\n      key: 'id',\r\n      data: this.data\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoicesStore\r\n    });\r\n    if (this.infoDangKy && this.infoDangKy.id) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n        this.isTT78 = true;\r\n    }\r\n    // this.invoicesStore.load().then((dataSource) => {\r\n    //   dataSource.forEach((item, index) => {\r\n    //     item.doc_relate_symbol = this.createDocRelateNumber();\r\n    //   });\r\n    // });\r\n    this.connectWebsocket();\r\n  }\r\n  createDocRelateNumber() {\r\n    let number_report = \"\";\r\n    if (this.countReport < 10)\r\n      number_report = '0' + this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    else\r\n      number_report = this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    this.countReport++;\r\n    return number_report;\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          let i = this.invoiceIndex;\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content, this.invoices[i]);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.invoices[i].issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat(this.invoices[i]);\r\n          } else {\r\n            this.invoices[i].invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoices[i].invoice_files.length) {\r\n              this.xuLiApiKhiXuat(this.invoices[i]);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  _validGrid() {\r\n    let invalid = true;\r\n    this.invoicesStore.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        item.doc_relate_date = item.doc_relate_date ? moment(item.doc_relate_date).format('YYYY-MM-DD') : item.doc_relate_date;\r\n        item.destroy_date = item.destroy_date ? moment(item.destroy_date).format('YYYY-MM-DD') : item.destroy_date;\r\n        if (!item.destroy_date && invalid) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.cancel_date + \" \" + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n          invalid = false;\r\n          return false;\r\n        } else {\r\n          let currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n          if (moment(item.destroy_date) > moment(currentDate) && invalid) {\r\n            Library.notify(this._translate.NOTIFY.date_cancel_invoice_not_greater_date_current, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          let invoice_date = moment(item.invoice_date).format('YYYY-MM-DD');\r\n          if (moment(item.destroy_date) < moment(invoice_date) && invalid) {\r\n            Library.notify(this._translate.NOTIFY.date_cancel_invoice_greater_or_equal_date_invoice, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n        }\r\n        if (!item.destroy_reason && invalid) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.reason_cancels + \" \" + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_reason'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n        if (item.buyer_email && !this.emailPattern.test(item.buyer_email) && invalid) {\r\n          Library.notify('Email ' + this._translate.VALIDATION.not_pattern, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'buyer_email'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n      });\r\n    });\r\n    return invalid;\r\n  }\r\n\r\n  xoaBo() {\r\n    if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n      Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      if (this._validGrid()) {\r\n        Library.confirmVA(this._translate.CONFIRM.acction_function, this._translate.NOTIFY.notify, () => {\r\n          this.showPopup = true;\r\n          this.invoicesStore.load().then((dataSource) => {\r\n            if (dataSource.length > 0) {\r\n              this.invoices = dataSource.filter(p => p.adjustment_type != '7');\r\n              this.totalInvoice = this.invoices.length;\r\n              this.invoiceIndex = 0;\r\n              this.tempKiFile = 0;\r\n              this.xuatHoaDon();\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    let i = this.invoiceIndex;\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat(this.invoices[i]);\r\n    } else {\r\n      if (this.invoices[i].invoice_files.length) {\r\n        this.invoices[i].invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.invoices[i].invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n      }\r\n    }\r\n  }\r\n  xuLiApiKhiXuat(invoice) {\r\n    let tempTemplate = invoice.template;\r\n    delete invoice.template;\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    let data = {\r\n      id: invoice.id,\r\n      adjustment_type: \"7\",\r\n      destroy_reason: invoice.destroy_reason,\r\n      email: invoice.buyer_email,\r\n      date: invoice.destroy_date\r\n    };\r\n    let sub = this.handleInvoiceService.getXmlString(data).subscribe(rs => {\r\n      invoice.template = tempTemplate;\r\n      if (rs.status == 'success') {\r\n        xmlInvoice = rs.data.invoice.xml_string;\r\n        let isNewXml = rs.data.invoice.is_new_xml;\r\n        let sign_date = moment(rs.data.invoice.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (isNewXml)\r\n          this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n        else\r\n          this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n        if (xmlInvoice != \"\") {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n          else {\r\n            if (this.isTT78)\r\n              this.xuLyKiFile(xmlInvoice, sign_date);\r\n            else\r\n              this.xuLyKiFile(xmlInvoice, invoice.invoice_date);\r\n          }\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        //this.onImportHiding();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string, invoice) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    this.subXuatHoaDon = this.handleInvoiceService.cancelInvoice({\r\n      invoice: {\r\n        id: invoice.id,\r\n        // doc_relate_symbol: invoice.doc_relate_symbol,\r\n        // doc_relate_date: invoice.doc_relate_date,\r\n        destroy_reason: invoice.destroy_reason,\r\n        destroy_date: invoice.destroy_date,\r\n        //email: invoice.buyer_email,\r\n        xml_string: xml_string\r\n      },\r\n      invoice_files: invoice.invoice_files,\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.valueProgress += percentComplete;\r\n        this.tempKiFile = 0;\r\n        invoice.adjustment_type = '7';\r\n        if (this.invoiceIndex < this.totalInvoice - 1) {\r\n          this.invoiceIndex++;\r\n          this.xuatHoaDon();\r\n        } else if (this.invoiceIndex == this.totalInvoice - 1) {\r\n          Library.notify(this._translate.NOTIFY.cancel_invoice_done, 'success');\r\n          this.isView = true;\r\n          setTimeout(() => {\r\n            this.showPopup = false;\r\n          }, 300);\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      // Library.hideloading();\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n    // document.getElementById(\"file-dinh-kem\").click();\r\n    // console.log(e)\r\n\r\n  }\r\n  choseFile(evt) {\r\n    //evt.srcElement.firstChild.click();\r\n    document.getElementById(\"file-input\").click();\r\n  }\r\n  fileChanged(e) {\r\n    setTimeout(() => {\r\n      //let rowIndex = e.target.dataset.rowindex;\r\n      let fileAttachData: Array<any> = [];\r\n      let fileReader = new FileReader();\r\n      let file = e.target.files[0];\r\n      let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n      // console.log(file)\r\n      if (pattFile.test(file.name)) {\r\n        fileReader.readAsDataURL(file);\r\n        fileReader.onload = (e) => {\r\n          let base64result = fileReader.result.toString().split(',')[1];\r\n          fileAttachData.unshift({\r\n            type: \"DK\",\r\n            file_name: file.name,\r\n            file_content: base64result,\r\n          });\r\n          // if (document.getElementById('list-file')) {\r\n          //   document.getElementById('list-file').scrollTop = 0;\r\n          // }\r\n          let _lstAttach: any = [];\r\n          _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n          if (_lstAttach == null) {\r\n            _lstAttach = [];\r\n          } else {\r\n            _lstAttach.push(fileAttachData[0]);\r\n          }\r\n          this.dataSource[0][\"invoice_files\"] = _lstAttach;\r\n          // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n          //this.dataSource.reload();\r\n        }\r\n      } else {\r\n        Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n      }\r\n    }, 200);\r\n  }\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let test = fileReader.result;\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"DK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.invoicesStore.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (index == rowIndex)\r\n              item.invoice_files = fileAttachData;\r\n          });\r\n        });\r\n        // this.dataSource[rowIndex][\"invoice_files\"] = fileAttachData;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_content\"] = base64result;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n  removeFile(i) {\r\n    let _lstAttach: any = [];\r\n    _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n    _lstAttach.splice(i, 1);\r\n  }\r\n  downloadFile(data) {\r\n    var re = /(?:\\.([^.]+))?$/;\r\n    var fileType = re.exec(data.file_name)[1];\r\n    Helper.dowloadFile(data.file_name, fileType, data.file_content);\r\n  }\r\n\r\n  xuatMauBienBan(data) {\r\n    if (this._validGrid()) {\r\n      Library.showloading();\r\n      let inv = Object.assign({}, data);\r\n      inv.adjustment_type = \"1\";\r\n      inv.auto_value_price = inv.auto_value_price == null ? false : inv.auto_value_price;\r\n      inv.invoice_files = [];\r\n      inv.doc_relate_date = moment(data.doc_relate_date).format('YYYY-MM-DD');\r\n      this.vatService.xuatMauBienBan(inv).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let file = rs.data.invoice;\r\n          Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n  viewDetailInvoice(data) {\r\n    if (data) {\r\n      const ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      }\r\n      Library.showloading();\r\n      const win = window.open('', '', 'width=200, height=100');\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      const sub = this.vatService.xemHoaDonInvoiceImport(ids).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          const pdf_file = rs.data.invoice.pdf_file;\r\n          win.document.write(`\r\n            <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n          `);\r\n          win.resizeTo(screen.availWidth, screen.availHeight);\r\n          win.focus();\r\n        } else {\r\n          win.close();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n  dong() {\r\n    this.bsModalRef.hide();\r\n    this.router.navigate(['/system/handle-invoice-student/']);\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'destroy_date' || e.dataField === 'destroy_reason') {\r\n        if (this.isView || e.row.data.adjustment_type == \"7\")\r\n          e.editorOptions.disabled = true;\r\n      }\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      /* Bôi đỏ các trường bắt buộc */\r\n      if (e.column.dataField == \"destroy_date\") {\r\n        if (!e.data.destroy_date) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.CONTROLL.LABEL.cancel_date + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n        else {\r\n          let currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n          let invoice_date = moment(e.data.invoice_date).format('YYYY-MM-DD');\r\n          let destroy_date = moment(e.data.destroy_date).format('YYYY-MM-DD');\r\n          if (moment(destroy_date) > moment(currentDate)) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = this._translate.NOTIFY.date_cancel_invoice_not_greater_date_current;\r\n          }\r\n          if (moment(destroy_date) < moment(invoice_date)) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = this._translate.NOTIFY.date_cancel_invoice_greater_or_equal_date_invoice;\r\n          }\r\n        }\r\n      }\r\n      if (e.column.dataField == \"destroy_reason\") {\r\n        if (!e.data.destroy_reason) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.CONTROLL.LABEL.reason_cancels + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n      }\r\n      if (e.column.dataField == \"buyer_email\") {\r\n        if (e.data.buyer_email && !this.emailPattern.test(e.data.buyer_email)) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = 'Email ' + this._translate.VALIDATION.not_pattern;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"row invoice-form\\\">\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item *ngIf=\\\"!isTT78\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.invoice_form}\\\" dataField=\\\"invoice_release_id\\\"\\r\\n                  editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.invoice_releases, onValueChanged: templateChange, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"_translate.CONTROLL.LABEL.invoice_form {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"isTT78\\\" dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\" [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n        <dxi-validation-rule type=\\\"required\\\" message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n      </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: _translate.GRID.INVOICE.invoice_date }\\\"\\r\\n                  editorType=\\\"dxDateBox\\\"\\r\\n                  [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate, onValueChanged: changeDateTime}\\\">\\r\\n        </dxi-item>\\r\\n\\r\\n        <dxi-item cssClass=\\\"vat invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\"\\r\\n                  [label]=\\\"{text: _translate.GRID.INVOICE.invoice_number }\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                  [editorOptions]=\\\"{ disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_code}\\\" dataField=\\\"currency_code\\\"\\r\\n                  editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"currency_rate\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_rate}\\\"\\r\\n                  editorType=\\\"dxNumberBox\\\"\\r\\n                  [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: '0,###'}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_method}\\\" dataField=\\\"payment_method_name\\\"\\r\\n                  editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.payment_method}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item name=\\\"ht-xuat\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_form }}\\\"></dxo-label>\\r\\n          <div *dxTemplate>\\r\\n            <dx-select-box [(value)]=\\\"frmData.status\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\" [disabled] = \\\"!configs.system_parameter.allow_keep_invoice_number\\\">\\r\\n            </dx-select-box>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.view_bank_account_seller\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"seller_bank_account_number\\\" editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.list_bank_account_seller, onValueChanged: bankAccountSellerChange, displayExpr: 'name_display', valueExpr: 'code',showClearButton: true}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.seller_bank_account_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"origin-invoice-number\\\">\\r\\n            <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number_original}}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-text-box [(value)]=\\\"oldForm.invoice_number\\\" disabled=\\\"true\\\"></dx-text-box>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"origin_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"soXacThucGoc\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.certificate_code}\\\"\\r\\n                  [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"doc_relate_symbol\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.doc_relate_symbol}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_symbol}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"doc_relate_date\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.doc_relate_date}\\\"\\r\\n                  editorType=\\\"dxDateBox\\\" [editorOptions]=\\\"{displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n          <dxi-validation-rule type=\\\"range\\\" [min]=\\\"minNgayVB\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}} {{ _translate.VALIDATION.less_date_inv }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n          <dxi-validation-rule type=\\\"range\\\" [max]=\\\"maxNgayVB\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}} {{ _translate.VALIDATION.than_date_curent }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item> -->\\r\\n      <!-- <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"destroy_reason\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.destroy_reason}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.destroy_reason}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item> -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_export_place\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.export_place}\\\" dataField=\\\"export_place\\\"\\r\\n                  editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.export_places, onValueChanged: exportPlaceChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_transport_number\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"transport_number\\\">\\r\\n          <dxo-label text=\\\"{{ 'CONTROLL.LABEL.transport_number' | translate }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isTT78\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Lý do thay thế -->\\r\\n        <dxi-item dataField=\\\"destroy_reason\\\">\\r\\n          <dxo-label text=\\\"Lý do thay thế\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"student_code\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.code_student }\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"student_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.name_student }\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"class_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.class }\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"study_year\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.study_year }\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"buyer_address\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.address }\\\">\\r\\n        </dxi-item>\\r\\n\\r\\n        <dxi-item dataField=\\\"student_reduce_rate_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n                  [label]=\\\"{text: _translate.CONTROLL.LABEL.exemption_and_reduction_rates }\\\"\\r\\n                  [editorOptions]=\\\"{\\r\\n                  items: select.student_reduce_rate_codes,\\r\\n                   displayExpr: 'name', valueExpr: 'code',\\r\\n                   onValueChanged: reduceMethodChange}\\\"\\r\\n        >\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"{{ _translate.CONTROLL.LABEL.exemption_and_reduction_rates }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n\\r\\n        <dxi-item [label]=\\\"{text: 'Email'}\\\" >\\r\\n          <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n            <div\\r\\n              class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n              <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\"\\r\\n                ></app-tag-input-email>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-12\\\" style=\\\"margin-top:7px;margin-bottom:7px\\\">\\r\\n    <dx-form>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <ng-container *ngIf=\\\"configs.system_parameter.allow_keep_invoice_number\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item name=\\\"btn-chossen-hdck\\\">\\r\\n              <dx-button id=\\\"btn-chossen-hdck\\\" (click)=\\\"showModalHdck()\\\" icon=\\\"assets\\\\img\\\\icons\\\\GiuSo.png\\\"\\r\\n                         text=\\\"{{_translate.CONTROLL.BUTTON.select_inv_wait_sign}}\\\" type=\\\"default\\\"></dx-button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </ng-container>\\r\\n\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n          [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">Bạn có muốn cập nhật lại dữ liệu vào danh mục khách hàng không?</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"Cập nhật\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"Hủy\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\"","module.exports = \"::ng-deep .vat.invoice-number-create-invoice input{color:red;font-weight:bold}\\n\"","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { pattern } from '@config/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { AddCustomerComponent } from '@shared/index';\r\nimport { ChooseHdckComponent } from '@modules/handle-invoice-student/components/choose-hdck/choose-hdck.component';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { sEnum } from '@config/sEnum';\r\n\r\n@Component({\r\n  selector: 'app-replace-form',\r\n  templateUrl: './replace-form.component.html',\r\n  styleUrls: ['./replace-form.component.scss']\r\n})\r\nexport class ReplaceFormComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  routeSub: Subscription;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n\r\n  @Input() frmData: any;\r\n  @Input() dataSource: any;\r\n  @Input() oldForm: any;\r\n  @Input() type: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() fileData: any;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('adjustmentObjectChange') adjustmentObject = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  @Output('onRedueFeeChange') onRedueFeeChange = new EventEmitter<any>();\r\n  @Output('onTemplateTT78TypeChange') onTemplateTT78TypeChange = new EventEmitter<any>();\r\n  @Input() infoDangKy: any;\r\n  @Input() isTT78: boolean;\r\n  @Input() _oTemplateTT78: any;\r\n  bsModalRef: BsModalRef;\r\n  select: any = {};\r\n  pattern = pattern;\r\n  tax_codes: any = [];\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  minNgayVB: string;\r\n  maxNgayVB: string;\r\n  configs: any = {};\r\n  _translate: any;\r\n  emails: any = [];\r\n  private arrEmail: any = [];\r\n  // thay đổi disable của 3 input customer_name, buyer_name, buyer_address\r\n  formItems = [];\r\n  customForms = [];\r\n  customerTempt = {};\r\n  tod: any = {};\r\n  disableInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuatOptions = [];\r\n  showPopup = false;\r\n  customerCurent: any = {};\r\n  origin_btn_options = {\r\n    text: '', icon: 'fa fa-eye', type: 'default',\r\n    onClick: () => {\r\n      let ids = [];\r\n      ids.push(this.oldForm.id);\r\n\r\n      if (this.oldForm.adjustment_type === 5) {\r\n        if (this.oldForm.template_code.indexOf('02GTTT') >= 0)\r\n          window.open(`/system/handle-invoice-student/edit-adjust-sale/${this.oldForm.id}`, '_blank');\r\n        else\r\n          window.open(`/system/handle-invoice-student/edit-adjust-vat/${this.oldForm.id}`, '_blank');\r\n      } else if (this.oldForm.adjustment_type === 3) {\r\n        if (this.oldForm.template_code.indexOf('02GTTT') >= 0)\r\n          window.open(`/system/handle-invoice-student/edit-replace-sale/${this.oldForm.id}`, '_blank');\r\n        else\r\n          window.open(`/system/handle-invoice-student/edit-replace-vat/${this.oldForm.id}`, '_blank');\r\n      } else {\r\n        if (this.oldForm.template_code.indexOf('02GTTT') >= 0) {\r\n          window.open(`/system/student-sale-invoice/${this.oldForm.id}`, '_blank');\r\n        } else {\r\n          window.open(`/system/student-vat-invoice/${this.oldForm.id}`, '_blank');\r\n        }\r\n      }\r\n\r\n    }\r\n  };\r\n\r\n  mst_btn_options = {\r\n    text: '', icon: 'assets/img/icons/Them.png', type: 'default',\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n          if (customer.bank_account_number) {\r\n            this.frmData.bank_account_number = customer.bank_account_number;\r\n          }\r\n          if (customer.bank_name) {\r\n            this.frmData.bank_name = customer.bank_name;\r\n          }\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private authService: AuthService,\r\n    private customersService: CustomersService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.minNgayVB = moment(this.oldForm.invoice_date).format('YYYY-MM-DD');\r\n    this.maxNgayVB = moment(new Date()).format('YYYY-MM-DD');\r\n    this.configs = this.authService.getConfigs();\r\n\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.currency_codes = data.init[1].DM_LOAI_TIEN;\r\n      this.select.customer_types = data.init[1].DM_NHOM_KHACH_HANG;\r\n      this.select.export_places = data.init[1].DM_NOI_XUAT_HOA_DON;\r\n      this.select.list_bank_account_seller = data.init[1].DM_TAI_KHOAN_NGAN_HANG;\r\n      this.select.student_reduce_rate_codes = data.init[1].DM_TY_LE_MIEN_GIAM_HOC_PHI;\r\n      this.select.list_bank_account_seller.forEach(item => {\r\n        item.name_display = item.code + ': ' + item.name;\r\n      });\r\n      this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate, this.frmData.status);\r\n      if (this.configs.system_parameter.allow_keep_invoice_number === false) {\r\n        this.htXuatOptions = this.htXuatOptions.filter(e => e.code !== sEnum.hinhThucXuat.XuatChoKy);\r\n      }\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        temptTT78 = data.init[0].filter(item => item.template_type !== 'HOA_DON_KHOI_TAO_TU_MAY_TINH_TIEN' && item.template_type !== 'PHIEU_THU_MAY_TINH_TIEN');\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (Number.parseInt(this.frmData.invoice_number) > 0) {\r\n            if (this.frmData.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.frmData.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n        if (this.frmData.id)\r\n          this.changeTemplateInvoice(this.frmData.invoice_date);\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n      }\r\n    });\r\n    this.select.customer_object_codes = VSelectBoxService._customerObject(this._translate);\r\n    this.select.adjustment_objects = [];\r\n\r\n    // Set disabled cho đơn vị tổ chức\r\n    this.setDisabledByCustomer_object_code(this.frmData.customer_object_code);\r\n\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          // Nếu là mẫu html\r\n          if (item.fields && item.fields.length > 0) {\r\n            this.formItems = [];\r\n            this.customForms = [];\r\n            const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n            if (_dulieumorong.length > 0) {\r\n              _dulieumorong.forEach(item => {\r\n                if (item.is_show) {\r\n                  if (item.data_type === 'chu') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxTextBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'soluong') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxNumberBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'ngay') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxDateBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'danhmuc') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxSelectBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name }\r\n                      }\r\n                    );\r\n                  }\r\n                }\r\n              });\r\n              this.formItems.push(this.createCustomGroup());\r\n            }\r\n            if (this.frmData.invoice_options && this.frmData.invoice_options.length > 0) {\r\n              this.frmData.invoice_options.forEach(iteminv => {\r\n                this.customerTempt[iteminv.code] = iteminv.value;\r\n              });\r\n            } else {\r\n              _dulieumorong.forEach(item => {\r\n                this.customerTempt[item.code] = item.value;\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          // Nếu là mẫu html\r\n          if (item.fields && item.fields.length > 0) {\r\n            this.formItems = [];\r\n            this.customForms = [];\r\n            const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n            if (_dulieumorong.length > 0) {\r\n              _dulieumorong.forEach(item => {\r\n                if (item.is_show) {\r\n                  if (item.data_type === 'chu') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxTextBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'soluong') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxNumberBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'ngay') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxDateBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'danhmuc') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxSelectBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name }\r\n                      }\r\n                    );\r\n                  }\r\n                }\r\n              });\r\n              this.formItems.push(this.createCustomGroup());\r\n            }\r\n            if (this.frmData.invoice_options && this.frmData.invoice_options.length > 0) {\r\n              this.frmData.invoice_options.forEach(iteminv => {\r\n                this.customerTempt[iteminv.code] = iteminv.value;\r\n              });\r\n            } else {\r\n              _dulieumorong.forEach(item => {\r\n                this.customerTempt[item.code] = item.value;\r\n              });\r\n              this.frmData.invoice_options = _dulieumorong;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n  }\r\n\r\n  ////// Tạo form mở rộng\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n\r\n  reduceMethodChange = (e) => {\r\n    this.select.student_reduce_rate_codes.forEach(item => {\r\n      if (e.value === item.code) {\r\n        this.onRedueFeeChange.emit(item);\r\n      }\r\n    });\r\n  };\r\n\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (const key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.invoice_options = _dulieumorong;\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // this.listDxForm._results[1].readOnly = true;\r\n  }\r\n\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n  public removeReadonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n      // item.instance.resetValues();\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n  setDisabledByCustomer_object_code(value) {\r\n    this.tod.customer_name = false;\r\n    this.tod.buyer_name = false;\r\n    this.tod.buyer_address = false;\r\n\r\n    switch (value) {\r\n      case 'DOANH_NGHIEP':\r\n        break;\r\n      case 'CA_NHAN':\r\n        this.frmData.customer_name = '';\r\n        this.tod.customer_name = true;\r\n        break;\r\n      case 'KHACH_LE':\r\n        this.frmData.customer_name = '';\r\n        this.frmData.buyer_address = '';\r\n        this.tod.customer_name = true;\r\n        this.tod.buyer_address = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  getHtXuatValue() {\r\n    return this.frmData.status;\r\n  }\r\n\r\n  // gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  // sự kiện\r\n  taxCodeKeyUp = (e) => {\r\n    const str = this.frmData.buyer_tax_code;\r\n    const len = str.length;\r\n    if (len >= 3) {\r\n      this.vatService.searchMST(str).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          const arr = [];\r\n          rs.data.customers.forEach(item => {\r\n            arr.push(item);\r\n          });\r\n          this.tax_codes = arr;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  taxCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.bank_account_number = customer.bank_account_number ? customer.bank_account_number : '';\r\n    this.frmData.bank_name = customer.bank_name ? customer.bank_name : '';\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerChanged = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.name) !== VStringService._getValueToString(this.frmData.customer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_person_name) !== VStringService._getValueToString(this.frmData.buyer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_mobile) !== VStringService._getValueToString(this.frmData.buyer_mobile)\r\n              || VStringService._getValueToString(this.customerCurent.business_address) !== VStringService._getValueToString(this.frmData.buyer_address)\r\n              || VStringService._getValueToString(this.customerCurent.email) !== VStringService._getValueToString(this.frmData.buyer_email)\r\n              || VStringService._getValueToString(this.customerCurent.bank_name) !== VStringService._getValueToString(this.frmData.bank_name)\r\n              || VStringService._getValueToString(this.customerCurent.bank_account_number) !== VStringService._getValueToString(this.frmData.bank_account_number)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n\r\n      });\r\n\r\n    }\r\n  };\r\n  customer_object_codeChange = (e) => {\r\n    this.setDisabledByCustomer_object_code(e.value);\r\n  };\r\n\r\n  templateChange = (e) => {\r\n    this.select.invoice_releases.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.template_id = item.template_id;\r\n        this._objTemplateSelect = item;\r\n        this.onTemplateTypeChange.emit(item);\r\n        if (!this._objTemplateSelect.is_discount) {\r\n          this.dataSource.items().forEach(item => {\r\n            item.discount = null;\r\n            item.amount_discount = null;\r\n          });\r\n\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n          }\r\n        }\r\n      }\r\n      // Nếu là mẫu html\r\n      if (item.fields) {\r\n        this.formItems = [];\r\n        this.customForms = [];\r\n        const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n        if (_dulieumorong.length > 0) {\r\n          _dulieumorong.forEach(item => {\r\n            if (item.is_show) {\r\n              if (item.data_type === 'chu') {\r\n                this.customForms.push(\r\n                  {\r\n                    editorType: 'dxTextBox',\r\n                    dataField: item.code,\r\n                    label: { text: item.name },\r\n                    editorOptions: {\r\n                      onValueChanged: () => {\r\n                        this.changeItem(_dulieumorong);\r\n                      }\r\n                    }\r\n                  }\r\n                );\r\n              }\r\n              if (item.data_type === 'soluong') {\r\n                this.customForms.push(\r\n                  {\r\n                    editorType: 'dxNumberBox',\r\n                    dataField: item.code,\r\n                    label: { text: item.name },\r\n                    editorOptions: {\r\n                      onValueChanged: () => {\r\n                        this.changeItem(_dulieumorong);\r\n                      }\r\n                    }\r\n                  }\r\n                );\r\n              }\r\n              if (item.data_type === 'ngay') {\r\n                this.customForms.push(\r\n                  {\r\n                    editorType: 'dxDateBox',\r\n                    dataField: item.code,\r\n                    label: { text: item.name },\r\n                    editorOptions: {\r\n                      onValueChanged: () => {\r\n                        this.changeItem(_dulieumorong);\r\n                      }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'\r\n                    }\r\n                  }\r\n                );\r\n              }\r\n              if (item.data_type === 'danhmuc') {\r\n                this.customForms.push(\r\n                  {\r\n                    editorType: 'dxSelectBox',\r\n                    dataField: item.code,\r\n                    label: { text: item.name }\r\n                  }\r\n                );\r\n              }\r\n            }\r\n          });\r\n          this.formItems.push(this.createCustomGroup());\r\n        }\r\n        _dulieumorong.forEach(item => {\r\n          this.customerTempt[item.code] = item.value;\r\n        });\r\n\r\n      } else {\r\n        this.formItems = [];\r\n        this.customerTempt = {};\r\n      }\r\n    });\r\n  };\r\n\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value == item.value) {\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.invoice_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateTT78TypeChange.emit(item);\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        if (!this._oTemplateTT78.is_discount) {\r\n          this.invoice_products.load().then((dataSource) => {\r\n            dataSource.forEach((item, index) => {\r\n              item.discount = null;\r\n              item.amount_discount = null;\r\n            });\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n          }\r\n        }\r\n\r\n        // Nếu là mẫu html\r\n        if (item.fields) {\r\n          this.formItems = [];\r\n          this.customForms = [];\r\n          const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n          if (_dulieumorong.length > 0) {\r\n            _dulieumorong.forEach(item1 => {\r\n              if (item1.is_show) {\r\n                if (item1.data_type === 'chu') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //  cssClass: 'vat layout_input',\r\n                      editorType: 'dxTextBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'soluong') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //    cssClass: 'vat layout_input',\r\n                      editorType: 'dxNumberBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'ngay') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //   cssClass: 'vat layout_input',\r\n                      editorType: 'dxDateBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'danhmuc') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //    cssClass: 'vat layout_input',\r\n                      editorType: 'dxSelectBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name }\r\n                    }\r\n                  );\r\n                }\r\n              }\r\n            });\r\n            this.formItems.push(this.createCustomGroup());\r\n            this.frmData.invoice_options = _dulieumorong;\r\n          }\r\n          else\r\n            this.frmData.invoice_options = [];\r\n          _dulieumorong.forEach(value => {\r\n            this.customerTempt[value.code] = value.value;\r\n          });\r\n        } else {\r\n          this.formItems = [];\r\n          this.customerTempt = {};\r\n        }\r\n      }\r\n    });\r\n  };\r\n  //\r\n  currencyCodeChange = (e) => {\r\n    if (this.frmData.currency_code === 'VND') {\r\n      this.frmData.currency_rate = null;\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(this.frmData.total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n\r\n\r\n  ///////////////\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  onSubmit() {\r\n  }\r\n\r\n  //\r\n  clone(): any {\r\n    const cloneObj = new (<any>this.constructor());\r\n    for (const attribut in this) {\r\n      if (typeof this[attribut] === 'object') {\r\n        cloneObj[attribut] = this.clone();\r\n      } else {\r\n        cloneObj[attribut] = this[attribut];\r\n      }\r\n    }\r\n    return cloneObj;\r\n  }\r\n\r\n  xuatMauBienBan() {\r\n    Library.showloading();\r\n    const inv = Object.assign({}, this.oldForm);\r\n    inv.doc_relate_date = this.frmData.doc_relate_date;\r\n    inv.doc_relate_symbol = this.frmData.doc_relate_symbol;\r\n    inv.destroy_reason = this.frmData.destroy_reason;\r\n    inv.adjustment_type = '1';\r\n    inv.auto_value_price = inv.auto_value_price === null ? false : inv.auto_value_price;\r\n    // inv.invoice_products =this.oldForm.invoice_products;\r\n    // this.dataSource.items().forEach(item => {\r\n    //   if (item.product_name)\r\n    //     inv.invoice_products.push(item);\r\n    // });\r\n    inv.invoice_files = [];\r\n    this.vatService.xuatMauBienBanThuHoi(inv).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n\r\n    // if (!this.frmData.doc_relate_symbol) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.doc_relate_symbol +\" \"+this._translate.VALIDATION.required, 'error');\r\n    // } else if (!this.frmData.doc_relate_date) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.doc_relate_date +\" \"+this._translate.VALIDATION.required, 'error');\r\n    // } else if (!this.frmData.destroy_reason) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.destroy_reason +\" \"+this._translate.VALIDATION.required, 'error');\r\n    // } else {\r\n    //   const initialState = {\r\n    //     oldForm: this.oldForm,\r\n    //     frmData: this.frmData,\r\n    //     _objTemplateSelect: this._objTemplateSelect,\r\n    //     fileData: this.fileData,\r\n    //     onSave: (data) => {\r\n    //       console.log(data);\r\n    //       this.frmData.id = data.id;\r\n    //       this.frmData.invoice_date = data.invoice_date;\r\n    //       this.frmData.invoice_number = data.invoice_number;\r\n    //     }\r\n    //   };\r\n    //   this.bsModalRef = this.modalService.show(ReportCancelInvComponent, {\r\n    //     backdrop: 'static',\r\n    //     keyboard: false,\r\n    //     class: 'modal-lg full-modal',\r\n    //     initialState\r\n    //   });\r\n    // }\r\n\r\n  }\r\n\r\n  exportPlaceChange = (e) => {\r\n    const _obj = this.select.export_places.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.export_address = _obj.dia_chi;\r\n      this.frmData.export_place_name = _obj.name;\r\n    }\r\n  };\r\n  bankAccountSellerChange = (e) => {\r\n    const _obj = this.select.list_bank_account_seller.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.seller_bank_account_name = _obj.name;\r\n      // this.frmData.export_place_name = _obj.name;\r\n    } else {\r\n      this.frmData.seller_bank_account_name = '';\r\n    }\r\n  };\r\n\r\n  paymentMethodChange = (e) => {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.payment_method_view_name = _obj.name;\r\n    }\r\n  };\r\n  currencyRateChange = (e) => {\r\n    if (!this.isTT78)\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n    else\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n  };\r\n\r\n\r\n  showModalHdck() {\r\n    const initialState = {\r\n      invoiceNumberOrigin: this.oldForm.invoice_number,\r\n      templateCode: this.oldForm.template_code,\r\n      invoiceDateOrigin: this.oldForm.invoice_date,\r\n      onSave: (data) => {\r\n        this.frmData.id = data.id;\r\n        this.frmData.invoice_date = data.invoice_date;\r\n        this.frmData.invoice_number = data.invoice_number;\r\n        this.frmData.batch_id = data.batch_id;\r\n      }\r\n    };\r\n    this.bsModalRef = this.modalService.show(ChooseHdckComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-lg full-modal',\r\n      initialState\r\n    });\r\n  }\r\n\r\n  capNhatDmKhachHang() {\r\n    this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.buyer_tax_code);\r\n    this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n    this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n    this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.buyer_name);\r\n    this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.buyer_mobile);\r\n    this.customerCurent.business_address = VStringService._getValueToString(this.frmData.buyer_address);\r\n    this.customerCurent.email = VStringService._getValueToString(this.frmData.buyer_email);\r\n    this.customerCurent.bank_name = VStringService._getValueToString(this.frmData.bank_name);\r\n    this.customerCurent.bank_account_number = VStringService._getValueToString(this.frmData.bank_account_number);\r\n    const data = { customer: this.customerCurent };\r\n    this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n      if (response.status === 'success') {\r\n        this.showPopup = false;\r\n      } else {\r\n        Library.notify(response.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n    });\r\n\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  updateCustomerInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  updateTaxcodeInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.tax_code) !== VStringService._getValueToString(this.frmData.buyer_tax_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  changeDateTime = (e) => {\r\n    this.changeTemplateInvoice(e.value);\r\n  }\r\n  changeTemplateInvoice(strDate) {\r\n    if (this.isTT78) {\r\n      let year = \"\";\r\n      if (VStringService._getValueToString(strDate) != \"\")\r\n        year = VStringService._getValueToString(strDate).substring(4, 2);\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n      }\r\n      let templates = this.select.templatesTT78;\r\n      this.select.templatesTT78 = [];\r\n      if (templates && templates.length > 0) {\r\n        templates.forEach(item => {\r\n          if (VStringService._getValueToString(item.name) != \"\")\r\n            item.name = item.name.replace(item.name.substring(4, 2), year);\r\n          // for (const key in item) {\r\n          //   if (item.hasOwnProperty(key)) {\r\n          //     const value = item[key];\r\n          //     this._oTemplateTT78[key] = value;\r\n          //   }\r\n          // }\r\n          if (item.value === this.frmData.template_id) {\r\n            this.onTemplateTT78TypeChange.emit(item);\r\n            //  item.invoice_series = item.invoice_series.replace(item.invoice_series.substring(3, 1), year);\r\n            // this.frmData.invoice_series = item.invoice_series;\r\n            // this.frmData.template_code = item.template_code;\r\n          }\r\n          this.select.templatesTT78.push(item);\r\n        });\r\n      }\r\n    }\r\n  }\r\n  disableTemplateInput() {\r\n    if (this.frmData.invoice_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","module.exports = \"<!-- Phần không tự tính giá trị, nhập mẫu bảng kê -->\\r\\n<div class=\\\"row support-invoice\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <!-- <dx-check-box *ngIf=\\\"configs.system_parameter.view_sale_by_phone\\\" id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.sale_by_phone }}\\\"\\r\\n                    [(value)]=\\\"frmData.sale_by_phone\\\"></dx-check-box> -->\\r\\n      <dx-check-box id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\" [(value)]=\\\"frmData.auto_value\\\"\\r\\n        (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <dx-check-box *ngIf=\\\"isHdGTGT\\\" id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.auto_value_price }}\\\"\\r\\n        [(value)]=\\\"frmData.auto_value_price\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <!-- <a href=\\\"javascript:void(0)\\\" (click)=\\\"layMauBangKe()\\\" class=\\\"support-link mgr-15\\\">\\r\\n      <img src=\\\"assets/img/icons/TaiMauBangKe.png\\\"><span>{{ _translate.CONTROLL.BUTTON.get_the_sample_file }}</span>\\r\\n    </a>\\r\\n    <a href=\\\"javascript:void(0)\\\" (click)=\\\"napDuLieuTuBangKe()\\\" [class.disabled-link]=\\\"ttDaXuatHoaDon\\\"\\r\\n      class=\\\"support-link\\\">\\r\\n      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n        style=\\\"display: none;\\\" />\\r\\n      <img src=\\\"assets/img/icons/NapDuLieuBangKe.png\\\"><span>{{ _translate.CONTROLL.BUTTON.import_data }}</span>\\r\\n    </a> -->\\r\\n      <dx-menu [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\"\\r\\n        (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n      </dx-menu>\\r\\n      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n        style=\\\"display: none;\\\" />\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.import_type }}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"thayTheToanBo()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all }}\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"themTiep()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n<!-- <button type=\\\"button\\\" (click)=\\\"aa()\\\">aaa</button> -->\\r\\n\\r\\n<!-- phần table hiển thị -->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onCellClick)=\\\"onCellClick($event)\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" -->\\r\\n\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n      <!-- <dxo-selection showCheckBoxesMode=\\\"none\\\" mode=\\\"single\\\"></dxo-selection> -->\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"view_order\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"product_code\\\" [editorOptions]=\\\"{showClearButton: true}\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        caption=\\\"{{ _translate.GRID.REVENUE.revenue_code }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n        alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\" itemTemplate=\\\"item\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"product_name\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\" caption=\\\"{{ _translate.GRID.REVENUE.revenue_name }}\\\"\\r\\n        alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"unit_code\\\" [editorOptions]=\\\"lookupColumnOptions\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\" width=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"school_fee_month\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.school_fee_month }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thang_thu_hp }}\\\" [editorOptions]=\\\"{disabled: true}\\\" alignment=\\\"center\\\"\\r\\n        [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Học kỳ -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_semester\\\" dataField=\\\"semester\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.hoc_ky }}\\\" caption=\\\"{{  _translate.GRID.INVOICE_DETAILS.semester }}\\\"\\r\\n        alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\" [editorOptions]=\\\"{ format: formatter.so_luong }\\\"\\r\\n        [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia }\\\" [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column *ngIf=\\\"isHdGTGT\\\" dataField=\\\"vat\\\" [editorOptions]=\\\"{showClearButton: true}\\\"\\r\\n        headerCellTemplate=\\\"vatHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.vat }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.vat }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"isHdGTGT\\\" dataField=\\\"amount_vat\\\" headerCellTemplate=\\\"amountVatHeader\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tien_thue }\\\" [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tong_tien_sau_thue }}\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n        [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.quantity }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.total_money\\r\\n          }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_promotion_new\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\"> {{ _translate.GRID.INVOICE_DETAILS.amount_vat\\r\\n          }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:20px;margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:15px}.support-invoice .support-link img{margin-right:15px;margin-top:-2px}.support-invoice #auto-input{margin-right:75px}.button-dropdown-extend{display:inline-flex}\\n\"","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport * as XLSX from 'xlsx';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { ConfigDecimalComponent } from '@shared/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport * as moment from 'moment';\r\nimport { SelectMonthComponent } from '@shared/components/select-month/select-month.component';\r\nimport { ProductsService } from '@modules/products/shared';\r\n@Component({\r\n  selector: 'app-replace-grip',\r\n  templateUrl: './replace-grip.component.html',\r\n  styleUrls: ['./replace-grip.component.scss']\r\n})\r\nexport class ReplaceGripComponent implements OnInit, OnDestroy {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n\r\n  routeSub: Subscription;\r\n  fee_months: any;\r\n  contextMenu = [{ text: 'Thêm' }, { text: 'Xóa' }];\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() student_reduce_rate_code: any;\r\n  // @Input() not_auto: any; //Không tự tính giá trị\r\n  @Input() oldForm: any; // Không tự tính giá trị\r\n  select: any = {};\r\n  @Input() frmData: any; // Không tự tính giá trị\r\n  @Input() arrProducts = [];\r\n\r\n  // frmData: InvoiceModel = new InvoiceModel(1);\r\n  bsModalRef: BsModalRef;\r\n  showPopup = false; // Popup\r\n  dataExcelFile: any = null;\r\n  ttDaXuatHoaDon = false;\r\n  gripAllowEdit = false;\r\n  configs: any;\r\n  isHdGTGT = true;\r\n  dataExcelFileInfo: any = null;\r\n  _translate: any;\r\n  selectMonth = false;\r\n  extras = [];\r\n  @Input() isTT78: boolean;\r\n  @Input() _oTemplateTT78: any;\r\n  @Output('gripChange') gripChange = new EventEmitter<Array<any>>();\r\n  @Output('autoChange') autoChange = new EventEmitter<any>();\r\n\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private productsService: ProductsService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.oldForm.template_code.indexOf('02GTTT') >= 0 || this.oldForm.template_code == \"2\") {\r\n      this.isHdGTGT = false;\r\n    }\r\n    this.configs = this.authService.getConfigs();\r\n    const moth: any = moment();\r\n    const currentUser = this.authService.getCurrentUser();\r\n    this.select.arrayYears = Helper.listYears(currentUser.account.start_time_study, moth);\r\n    this.fee_months = this.select.arrayYears[1];\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.countrys = data.init[1].DM_QUOC_GIA;\r\n      this.select.revenue_forms = data.init[1].DM_HINH_THUC_THU;\r\n      // Hàng hóa dịch vụ\r\n      this.select.products = data.init[2];\r\n\r\n      this.select.products.forEach(item => {\r\n        item.mhvth = item.code + ': ' + item.name;\r\n        item.vat = item.vat != null ? item.vat.toString() : null;\r\n      });\r\n      this.select.productsView = {\r\n        store: new CustomStore({\r\n          key: 'code',\r\n          loadMode: 'raw',\r\n          load: (loadOptions) => {\r\n            return this.select.products;\r\n          },\r\n          byKey: function (key) {\r\n            return data.init[2].filter(p => p.code === key.toString());\r\n          }\r\n        }),\r\n        paginate: true,\r\n        sort: 'name'\r\n      };\r\n    });\r\n\r\n    // Event\r\n    this.createUpdateEvent();\r\n  }\r\n\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    const product = this.invoice_products;\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        this.invoice_products.byKey(key).then((row) => {\r\n          switch (column) {\r\n            case 'view_order':\r\n              this.view_orderChange();\r\n              break;\r\n            case 'product_code':\r\n              this.product_codeChange(row);\r\n              break;\r\n            case 'unit_code':\r\n              this.unit_codeChange(row);\r\n              break;\r\n            case 'country_code':\r\n              this.country_codeChange(row);\r\n              break;\r\n            case 'quantity':\r\n            case 'price':\r\n            case 'price_nte':\r\n            case 'vat':\r\n            case 'amount':\r\n            case 'amount_vat':\r\n            case 'amount_after_vat':\r\n            case 'amount_discount':\r\n            case 'discount':\r\n            case 'amount_without_discount':\r\n            case 'other_tax':\r\n            case 'other_charge':\r\n              this._tinhGiaTri();\r\n              break;\r\n            default:\r\n              break;\r\n            // }\r\n          }\r\n        }, (error) => {\r\n          alert(error);\r\n        });\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onCellClick(e) {\r\n    if (e.column.dataField === 'school_fee_month') {\r\n      this.selectMonth = false;\r\n      const product = this.select.products.filter(p => p.code === e.row.data.product_code)[0];\r\n      if (product) {\r\n        this.productsService.getProduct(product.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let productServ = rs.data.product;\r\n            if (productServ) {\r\n              if (productServ.form_revenue === sEnum.hinhthucthu.Thang) {\r\n                const initialState = {\r\n                  fee_months: this.fee_months,\r\n                  month_year: e.row.data.school_fee_month,\r\n                  product_code: e.row.data.product_code\r\n                };\r\n                this.bsModalRef = this.modalService.show(SelectMonthComponent, {\r\n                  class: 'second child-modal',\r\n                  initialState,\r\n                  backdrop: 'static',\r\n                  keyboard: false,\r\n                });\r\n                let index = 0;\r\n                this.modalService.onHide.subscribe(() => {\r\n                  if (!this.selectMonth) {\r\n                    index++;\r\n                    let tr = index;\r\n                    if (index == 1) {\r\n                      if (e.row.data.product_code == this.bsModalRef.content.product_code) {\r\n                        if (this.bsModalRef.content.successSaveItem) {\r\n                          e.row.data.school_fee_month = this.bsModalRef.content.successSaveData;\r\n                        }\r\n                        else {\r\n                        }\r\n                        let _lstMonth = [];\r\n                        if (e.row.data.school_fee_month)\r\n                          _lstMonth = e.row.data.school_fee_month.split(';').filter(p => p !== '');\r\n                        if (_lstMonth && _lstMonth.length > 0) {\r\n                          e.row.data.quantity = _lstMonth.length;\r\n                        } else {\r\n                          e.row.data.quantity = null;\r\n                        }\r\n                        if (e.row.data.quantity) {\r\n                          e.row.data.amount = e.row.data.price ? parseFloat(e.row.data.price) * parseFloat(e.row.data.quantity) : 0;\r\n                        } else {\r\n                          e.row.data.amount = e.row.data.price ? parseFloat(e.row.data.price) : 0;\r\n                        }\r\n                        if (this.isHdGTGT) {\r\n                          e.row.data.amount_vat = (e.row.data.vat >= 0) ? this.caculatorAmountVat(e.row.data.amount, e.row.data.vat) : null;\r\n                        } else {\r\n                          e.row.data.amount_vat = null;\r\n                        }\r\n                        e.row.data.amount_after_vat = e.row.data.amount + (e.row.data.amount_vat != null ? e.row.data.amount_vat : 0);\r\n                        this.invoice_products.update(e.row.data.id, e.row.data);\r\n                        this._tinhGiaTri();\r\n                        return true;\r\n                      }\r\n                    }\r\n                  }\r\n                });\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n      const eles = e.rowElement.getElementsByTagName('td');\r\n      if (!e.isEditing) {\r\n        eles[2].innerHTML = e.data.product_code;\r\n      }\r\n      if (e.data.error) {\r\n        const ele = eles[eles.length - 1];\r\n        ele.style.background = 'red url(\\'assets/img/icons/fa-remove.png\\') no-repeat 2% center';\r\n        ele.title = e.data.error;\r\n      }\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'product_code') {\r\n        e.editorOptions.onOpened = function (arg) {\r\n          const popupInstance = arg.component._popup;\r\n          popupInstance.option('width', 400);\r\n          popupInstance.option('minWidth', 400);\r\n          // popupInstance.off(\"optionChanged\", this.optionChangedHandler);\r\n          // popupInstance.on(\"optionChanged\", this.optionChangedHandler);\r\n        };\r\n      }\r\n      if (e.dataField === 'product_name') {\r\n        e.editorName = 'dxTextArea';\r\n      }\r\n      e.editorOptions.onFocusOut = (args) => {\r\n        if (e.dataField === 'unit_code') {\r\n          const _obj = this.select.unit_codes.filter(p => p.code === e.row.data.unit_code)[0];\r\n          if (_obj) {\r\n            e.row.data.unit_name = _obj.name;\r\n          } else {\r\n            e.row.data.unit_name = '';\r\n          }\r\n        }\r\n        if (e.dataField === 'country_code') {\r\n          const _obj = this.select.countrys.filter(p => p.code === e.row.data.country_code)[0];\r\n          if (_obj) {\r\n            e.row.data.country_name = _obj.name;\r\n          } else {\r\n            e.row.data.country_name = '';\r\n          }\r\n        }\r\n        this.invoice_products.update(e.row.data.id, e.row.data);\r\n      };\r\n    }\r\n\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount' || e.dataField === 'amount_vat' || e.dataField === 'amount_after_vat') && e.parentType === 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row.rowType === 'data') {\r\n      e.items = [{\r\n        text: 'Thêm hàng',\r\n        onItemClick: () => {\r\n          this.addRow();\r\n        }\r\n      },\r\n      {\r\n        text: 'Xóa hàng',\r\n        onItemClick: () => {\r\n          this.deleteRow(e.row.data);\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n  addRow() {\r\n    let len, order;\r\n    if (this.dataSource.items().length >= 1) {\r\n      len = this.dataSource.items().length;\r\n      order = this.dataSource.items()[len - 1].order + 1;\r\n    } else {\r\n      order = 1;\r\n    }\r\n\r\n    const data = this.frmData.add_invoice_products_data(order, order);\r\n    this.invoice_products.insert(data);\r\n    // this.dataSource.store().insert(data);\r\n    this.dataSource.reload();\r\n  }\r\n\r\n  view_orderChange() {\r\n    if(!this.isTT78)\r\n    {\r\n      let _index = 0;\r\n      this.dataSource.items().forEach(item => {\r\n        if (item.view_order && VStringService._getValueToString(this._objTemplateSelect.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          item.view_order = ++_index;\r\n        }\r\n        if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          if (!item.is_money_service) {\r\n            item.view_order = ++_index;\r\n          } else {\r\n            item.view_order = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n    else\r\n    {\r\n      let _index = 0;\r\n      this.dataSource.items().forEach(item => {\r\n        if (item.view_order && VStringService._getValueToString(this._oTemplateTT78.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          item.view_order = ++_index;\r\n        }\r\n        if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          if (!item.is_money_service) {\r\n            item.view_order = ++_index;\r\n          } else {\r\n            item.view_order = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n    \r\n  }\r\n\r\n  // Thay đổi cột mã hàng\r\n  product_codeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code === row.product_code) {\r\n        this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              let isUpdate = true;\r\n              let _indexNumber = 0;\r\n              if (isUpdate) {\r\n                if (product.form_revenue == sEnum.hinhthucthu.Thang) {\r\n                  this.selectMonth = true;\r\n\r\n                  const initialState = {\r\n                    fee_months: this.fee_months,\r\n                    product_code: row.product_code\r\n                  };\r\n                  this.bsModalRef = this.modalService.show(SelectMonthComponent, {\r\n                    class: 'second child-modal',\r\n                    initialState,\r\n                    backdrop: 'static',\r\n                    keyboard: false,\r\n                  });\r\n                  let index = 0;\r\n                  this.modalService.onHide.subscribe(() => {\r\n                    if (this.selectMonth) {\r\n                      index++;\r\n                      if (index == 1) {\r\n                        if (this.bsModalRef.content.successSaveItem) {\r\n                          if (row.product_code == this.bsModalRef.content.product_code) {\r\n                            let _lstMonth = this.bsModalRef.content.successSaveData;\r\n                            _lstMonth = _lstMonth.split(';').filter(p => p != \"\");\r\n                            row.school_fee_month = this.bsModalRef.content.successSaveData;\r\n                            row.product_name = product.name;\r\n                            if (this.select.revenue_forms && this.select.revenue_forms.length > 0) {\r\n                              const _obj = this.select.revenue_forms.filter(p => p.code === product.form_revenue)[0];\r\n                              if (_obj) {\r\n                                row.semester = _obj.name;\r\n                              }\r\n                            }\r\n                            row.unit_code = this.checkUnitCode(product.unit_code);\r\n                            if (row.unit_code == \"NAM\" || row.unit_code == \"NAMHOC\" || row.unit_code == \"KY\")\r\n                              row.quantity = 1;\r\n                            else\r\n                              if (row.unit_code == \"THANG\")\r\n                                row.quantity = _lstMonth.length;\r\n                              else\r\n                                row.quantity = null;\r\n                            row.price = product.price ? parseFloat(product.price) : product.price;\r\n                            row.price = row.price ? parseFloat(row.price) - (row.price * parseFloat(this.student_reduce_rate_code)) / 100 : row.price;\r\n                            row.amount = row.price ? parseFloat(row.price) * parseFloat(row.quantity) : row.price;\r\n                            if (this.isHdGTGT) {\r\n                              row.vat = product.vat != null ? product.vat.toString() : null;\r\n                            } else {\r\n                              row.vat = null;\r\n                            }\r\n                            if (this.isHdGTGT) {\r\n                              row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n                            } else {\r\n                              row.amount_vat = null;\r\n                            }\r\n                            row.group_code = product.group_code;\r\n                            row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n                            this.invoice_products.update(row.id, row);\r\n                            this._tinhGiaTri();\r\n                            let prot = this.arrProducts;\r\n                            if (!this.arrProducts || (this.arrProducts && this.arrProducts.length == 0)) {\r\n                              const IProduct = {\r\n                                code: product.code,\r\n                                price: product.price\r\n                              };\r\n                              this.arrProducts.push(IProduct);\r\n                            } else {\r\n                              const product = this.arrProducts.filter(p => p.code === product.code)[0];\r\n                              if (!product) {\r\n                                const IProduct = {\r\n                                  code: product.code,\r\n                                  price: product.price\r\n                                };\r\n                                this.arrProducts.push(IProduct);\r\n                              }\r\n                            }\r\n                            return true;\r\n                          }\r\n\r\n                        }\r\n                        else {\r\n                          if (row.product_code == this.bsModalRef.content.product_code) {\r\n                            row.school_fee_month = \"\";\r\n                            row.product_name = product.name;\r\n                            row.group_code = product.group_code;\r\n                            row.unit_code = this.checkUnitCode(product.unit_code);\r\n                            row.quantity = null;\r\n                            if (this.select.revenue_forms && this.select.revenue_forms.length > 0) {\r\n                              const _obj = this.select.revenue_forms.filter(p => p.code === product.form_revenue)[0];\r\n                              if (_obj) {\r\n                                row.semester = _obj.name;\r\n                              }\r\n                            }\r\n                            row.price = product.price ? parseFloat(product.price) : product.price;\r\n                            row.price = row.price ? parseFloat(row.price) - (row.price * parseFloat(this.student_reduce_rate_code)) / 100 : row.price;\r\n                            row.amount = row.price ? parseFloat(product.price) : row.price;\r\n                            if (this.isHdGTGT) {\r\n                              row.vat = product.vat != null ? product.vat.toString() : null;\r\n                            } else {\r\n                              row.vat = null;\r\n                            }\r\n                            if (this.isHdGTGT) {\r\n                              row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n                            } else {\r\n                              row.amount_vat = null;\r\n                            }\r\n                            row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n                            let test = this.invoice_products;\r\n                            this.invoice_products.update(row.id, row);\r\n                            this._tinhGiaTri();\r\n                            if (!this.arrProducts || (this.arrProducts && this.arrProducts.length == 0)) {\r\n                              const IProduct = {\r\n                                code: product.code,\r\n                                price: product.price\r\n                              };\r\n                              this.arrProducts.push(IProduct);\r\n                            } else {\r\n                              const product = this.arrProducts.filter(p => p.code === product.code)[0];\r\n                              if (!product) {\r\n                                const IProduct = {\r\n                                  code: product.code,\r\n                                  price: product.price\r\n                                };\r\n                                this.arrProducts.push(IProduct);\r\n                              }\r\n                            }\r\n                            return true;\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  });\r\n\r\n                }\r\n                else {\r\n                  row.school_fee_month = '';\r\n                  const _oHinhThucThu = this.select.revenue_forms.filter(p => p.code == product.form_revenue)[0];\r\n                  if (_oHinhThucThu) {\r\n                    if (_oHinhThucThu.note) {\r\n                      const mapObj = {\r\n                        T: VStringService._getValueToString(this.fee_months.code).split('-')[0],\r\n                        S: VStringService._getValueToString(this.fee_months.code).split('-')[1],\r\n                      };\r\n                      row.school_fee_month = VStringService._getValueToString(_oHinhThucThu.note).replace(/T|S/gi, function (matched) {\r\n                        return mapObj[matched];\r\n                      });\r\n                    }\r\n                  }\r\n                  let _lstMonth = null;\r\n                  if (row.school_fee_month !== '') {\r\n                    _lstMonth = row.school_fee_month.split(';').filter(p => p !== '');\r\n                  }\r\n                  if (_lstMonth) {\r\n                    row.quantity = _lstMonth.length;\r\n                  } else {\r\n                    row.quantity = null;\r\n                  }\r\n                  row.product_name = product.name;\r\n                  row.group_code = product.group_code;\r\n                  if (this.select.revenue_forms && this.select.revenue_forms.length > 0) {\r\n                    const _obj = this.select.revenue_forms.filter(p => p.code === product.form_revenue)[0];\r\n                    if (_obj) {\r\n                      row.semester = _obj.name;\r\n                    }\r\n                  }\r\n                  row.unit_code = this.checkUnitCode(product.unit_code);\r\n                  if (row.unit_code == \"NAM\" || row.unit_code == \"NAMHOC\" || row.unit_code == \"KY\")\r\n                    row.quantity = 1;\r\n                  else\r\n                    if (row.unit_code == \"THANG\")\r\n                      row.quantity = _lstMonth.length;\r\n                    else\r\n                      row.quantity = null;\r\n                  row.price = product.price ? parseFloat(product.price) : product.price;\r\n                  let t = this.student_reduce_rate_code;\r\n                  row.price = row.price ? parseFloat(row.price) - (row.price * parseFloat(this.student_reduce_rate_code)) / 100 : row.price;\r\n                  if (row.quantity) {\r\n                    row.amount = row.price ? parseFloat(row.price) * parseFloat(row.quantity) : row.price;\r\n                  } else {\r\n                    row.amount = row.price ? parseFloat(row.price) : row.price;\r\n                  }\r\n                  if (this.isHdGTGT) {\r\n                    row.vat = product.vat != null ? product.vat.toString() : null;\r\n                  } else {\r\n                    row.vat = null;\r\n                  }\r\n                  if (this.isHdGTGT) {\r\n                    row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n                  } else {\r\n                    row.amount_vat = null;\r\n                  }\r\n                  row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n                  this.invoice_products.update(row.id, row);\r\n                  this._tinhGiaTri();\r\n                  if (!this.arrProducts || (this.arrProducts && this.arrProducts.length == 0)) {\r\n                    const IProduct = {\r\n                      code: product.code,\r\n                      price: product.price\r\n                    };\r\n                    this.arrProducts.push(IProduct);\r\n                  } else {\r\n                    const product = this.arrProducts.filter(p => p.code === product.code)[0];\r\n                    if (!product) {\r\n                      const IProduct = {\r\n                        code: product.code,\r\n                        price: product.price\r\n                      };\r\n                      this.arrProducts.push(IProduct);\r\n                    }\r\n                  }\r\n                  return true;\r\n                }\r\n\r\n              } else {\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  unit_codeChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  country_codeChange(row) {\r\n    const _obj = this.select.countrys.filter(p => p.code === row.country_code)[0];\r\n    if (_obj) {\r\n      row.country_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.country_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  _tinhGiaTri() {\r\n    if(!this.isTT78)\r\n    {\r\n      setTimeout(() => {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._objTemplateSelect,this.configs.system_parameter);\r\n        if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayTongHop\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayChung\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n          VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n        }\r\n      }, 100);\r\n    }\r\n    else\r\n    {\r\n      setTimeout(() => {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._oTemplateTT78,this.configs.system_parameter);\r\n        if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayTongHop\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayChung\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n          VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n        }\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    const p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n    });\r\n  }\r\n\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    // setTimeout(() => {\r\n    const check = confirm('Bạn có đồng ý xóa không?');\r\n    if (check && !this.ttDaXuatHoaDon) {\r\n      setTimeout(() => {\r\n        this.invoice_products.remove(item.id);\r\n\r\n        // this.dataSource.store().remove(item.id);\r\n        this.dataSource.reload();\r\n        this._tinhGiaTri();\r\n\r\n      }, 100);\r\n    }\r\n    // }, 200);\r\n  }\r\n\r\n  updateSomeTotalInputNotCheckCktm() {\r\n    setTimeout(() => {\r\n      this.gripChange.emit([this.dataSource, this.invoice_products, this.formatter]);\r\n    }, 200);\r\n  }\r\n\r\n  // Lấy mẫu bảng kê\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    this.vatService.layFileMau({\r\n      customer_name: this.frmData.customer_name,\r\n      buyer_tax_code: this.frmData.buyer_tax_code,\r\n      buyer_address: this.frmData.buyer_address,\r\n      buyer_name: this.frmData.buyer_name,\r\n      invoice_type_name : \"\"\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  // Nạp dữ liệu bảng kê\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById('file-bang-ke').click();\r\n  }\r\n\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) {\r\n      throw new Error('Không thể chọn nhiều file');\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      const data = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 10 }));\r\n      const account = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 0 }));\r\n      const fileBangKe: any = document.getElementById('file-bang-ke');\r\n      fileBangKe.value = '';\r\n      this.dataExcelFile = data;\r\n      this.dataExcelFileInfo = account.slice(0, 4);\r\n      this.showPopup = true;\r\n    };\r\n    reader.readAsBinaryString(target.files[0]);\r\n  }\r\n\r\n  thayTheToanBo() {\r\n    this.fillDataFromFile(this.dataExcelFile, this.dataExcelFileInfo, 'thaythe');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  themTiep() {\r\n    this.fillDataFromFile(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  fillDataFromFile(data, info, status) {\r\n    if (info.length === 4) {\r\n      const customer_name = info[0].A.split(':');\r\n      if (customer_name.length > 1) {\r\n        this.frmData.customer_name = customer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_tax_code = info[1].A.split(':');\r\n      if (buyer_tax_code.length > 1) {\r\n        this.frmData.buyer_tax_code = buyer_tax_code[1].trim();\r\n      }\r\n      ////\r\n      const buyer_name = info[2].A.split(':');\r\n      if (buyer_name.length > 1) {\r\n        this.frmData.buyer_name = buyer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_address = info[3].A.split(':');\r\n      if (buyer_address.length > 1) {\r\n        this.frmData.buyer_address = buyer_address[1].trim();\r\n      }\r\n    }\r\n    if (status === 'thaythe') {\r\n      this.dataSource.items().forEach(item => {\r\n        // this.dataSource.store().remove(item.id);\r\n        this.invoice_products.remove(item.id);\r\n\r\n\r\n      });\r\n    } else {\r\n      this.dataSource.items().forEach(item => {\r\n        if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount && !item.amount_vat && !item.amount_after_vat) {\r\n          // this.dataSource.store().remove(item.id);\r\n          this.invoice_products.remove(item.id);\r\n\r\n        }\r\n      });\r\n    }\r\n    // let arr = [];\r\n    let j = 10000;\r\n    data.forEach(item => {\r\n      // item.A = item.A || \"0\";\r\n      item.B = item.B || '';\r\n      item.C = item.C || '';\r\n      item.D = item.D || '';\r\n      item.E = item.E || '0';\r\n      item.F = item.F || '0';\r\n      item.G = item.G || '0';\r\n      // item.H = item.H || \"0\";\r\n      // item.I = item.I || \"0\";\r\n      const temp: any = {};\r\n      if (this.frmData.auto_value) {\r\n        // temp.order = (status === 'thaythe') ? parseInt(item.A) : j;\r\n        temp.id = Helper.makeid();\r\n        if (item.A) {\r\n          temp.view_order = parseInt(item.A, 10);\r\n        } else {\r\n          temp.view_order = null;\r\n        }\r\n        temp.product_code = item.B;\r\n        temp.product_name = item.C;\r\n        temp.unit_code = this.getUnitCodeByUnitName(item.D);\r\n        temp.quantity = Helper.toNumber(item.E);\r\n        temp.price = Helper.toNumber(item.F);\r\n        temp.amount = Helper.toNumber(item.G);\r\n        if (item.H && this.isHdGTGT) {\r\n          temp.vat = item.H;\r\n        } else {\r\n          temp.vat = null;\r\n        }\r\n        if (this.isHdGTGT) {\r\n          temp.amount_vat = item.I != null ? Helper.toNumber(item.I) : null;\r\n        } else {\r\n          temp.amount_vat = null;\r\n        }\r\n        temp.amount_after_vat = temp.amount_vat + temp.amount;\r\n      } else {\r\n        temp.id = Helper.makeid();\r\n        // temp.order = (status === 'thaythe') ? parseInt(item.A) : j;\r\n        if (item.A) {\r\n          temp.view_order = parseInt(item.A, 10);\r\n        } else {\r\n          temp.view_order = null;\r\n        }\r\n        temp.product_code = item.B;\r\n        temp.product_name = item.C;\r\n        temp.unit_code = this.getUnitCodeByUnitName(item.D);\r\n        temp.quantity = Helper.toNumber(item.E);\r\n        temp.price = Helper.toNumber(item.F);\r\n        // temp.amount = temp.price * temp.quantity;\r\n        if (item.H && this.isHdGTGT) {\r\n          temp.vat = item.H;\r\n        } else {\r\n          temp.vat = null;\r\n        }\r\n        // if (this.isHdGTGT){\r\n        //   temp.amount_vat = (temp.vat > 0) ? temp.vat * temp.amount / 100 : 0;\r\n\r\n        // }\r\n        // else\r\n        //   temp.amount_vat = null;\r\n        // temp.amount_after_vat = temp.amount_vat + temp.amount;\r\n      }\r\n      temp.commercial_discount = false;\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n      // arr.push(temp);\r\n      // this.dataSource.store().insert(temp);\r\n      this.invoice_products.insert(temp);\r\n      j++;\r\n    });\r\n\r\n    this.dataSource.reload();\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (this.select.unit_codes && this.select.unit_codes.length > 0) {\r\n        const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n        if (_obj) {\r\n          return _obj.code;\r\n        } else {\r\n          let code = VStringService._convertToViKdau(unitName);\r\n          let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n          if (oDuplicate)\r\n            code = code + Helper.addtionalUnitCode();\r\n          this.select.unit_codes.push({ code: code, name: unitName });\r\n          return code;\r\n        }\r\n      } else {\r\n        this.select.unit_codes = [];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'LAY_MAU_BANG_KE') {\r\n      this.layMauBangKe();\r\n    } else if (e.itemData.id === 'NAP_DU_LIEU_BANG_KE') {\r\n      this.napDuLieuTuBangKe();\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"container-fluid\\\" style=\\\"margin-bottom: 0!important; padding-left: 0!important;\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"pl-0 col-md-12\\\">\\r\\n      <div class=\\\"button-redirect\\\">\\r\\n        <ul class=\\\"nav nav-tabs\\\">\\r\\n          <li class=\\\"nav-item\\\">\\r\\n            <a class=\\\"nav-link active\\\" href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.BUTTON.report_replace}}</a>\\r\\n          </li>\\r\\n          <li class=\\\"nav-item\\\">\\r\\n            <a class=\\\"nav-link \\\" (click)=\\\"routeReport()\\\" href=\\\"javascript:void(0)\\\">\\r\\n              {{this.textReport}}\\r\\n            </a>\\r\\n          </li>\\r\\n        </ul>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<form (ngSubmit)=\\\"onSubmit()\\\">\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <!-- phần form thông tin -->\\r\\n    <app-replace-form [type]=\\\"1\\\"\\r\\n                      [frmData]=\\\"frmData\\\"\\r\\n                      [oldForm]=\\\"oldForm\\\"\\r\\n                      [dataSource]=\\\"dataSource\\\"\\r\\n                      [invoice_products]=\\\"invoice_products\\\"\\r\\n                      [formatter]=\\\"formatter\\\"\\r\\n                      [fileData]=\\\"fileData\\\"\\r\\n                      (onRedueFeeChange)=\\\"onRedueFeeChange($event)\\\"\\r\\n                      (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\"\\r\\n                      [_oTemplateTT78] = \\\"_oTemplateTT78\\\"\\r\\n                      [isTT78] = \\\"isTT78\\\"\\r\\n                      [infoDangKy] = \\\"infoDangKy\\\"\\r\\n                      (onTemplateTT78TypeChange)=\\\"onTemplateTT78TypeChange($event)\\\"\\r\\n                      [_objTemplateSelect]=\\\"_objTemplateSelect\\\">\\r\\n    </app-replace-form>\\r\\n\\r\\n    <!-- <dx-button id=\\\"btn-chossen-hdck\\\" (click)=\\\"showModalHdck()\\\" icon=\\\"assets\\\\img\\\\icons\\\\GiuSo.png\\\"\\r\\n      text=\\\"Chọn hóa đơn chờ ký\\\" type=\\\"default\\\"></dx-button> -->\\r\\n\\r\\n    <!-- table product -->\\r\\n    <app-replace-grip\\r\\n        #child\\r\\n        [dataSource]=\\\"dataSource\\\"\\r\\n        [invoice_products]=\\\"invoice_products\\\"\\r\\n        [formatter]=\\\"formatter\\\"\\r\\n        [oldForm]=\\\"oldForm\\\"\\r\\n        [frmData]=\\\"frmData\\\"\\r\\n        [arrProducts]=\\\"arrProducts\\\"\\r\\n        [student_reduce_rate_code] = \\\"student_reduce_rate_code\\\"\\r\\n        [isTT78] = \\\"isTT78\\\"\\r\\n        [_oTemplateTT78] = \\\"_oTemplateTT78\\\"\\r\\n        [_objTemplateSelect]=\\\"_objTemplateSelect\\\">\\r\\n    </app-replace-grip>\\r\\n\\r\\n    <div class=\\\" table-footer\\\">\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_after_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                      [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-2\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-vat-table-footer\\\" dataField=\\\"total_amount_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                      [editorOptions]=\\\"{format: formatter.tien_thue, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-after-vat-table-footer\\\" dataField=\\\"amount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                      [editorOptions]=\\\"{format: formatter.tong_tien, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-4\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_without_discount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                      [editorOptions]=\\\"{format: formatter.thanh_tien_chua_ck, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <!-- vùng chọn file -->\\r\\n    <div class=\\\"row after-table\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <file-upload-multiple [fileData]=\\\"fileData\\\" (fileChange)=\\\"getFileData($event)\\\"></file-upload-multiple>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <div class=\\\"vat money-pull-right\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.on_currency_amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.on_currency_amount\\\" tabIndex=\\\"-1\\\" format=\\\"0,###\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_amount_discount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_discount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_chiet_khau\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat5}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat5\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat8}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat8\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat10}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat10\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat_other\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-4\\\" style=\\\"margin-top: 10px\\\">\\r\\n        <div class=\\\"vat money-pull-right\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_payment\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                             (onValueChanged)=\\\"totalPaymentChange($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"vat total-payment-in-word\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_payment_in_word}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-text-box [(value)]=\\\"frmData.total_payment_in_word\\\" [disabled]=\\\"!frmData.auto_value\\\"></dx-text-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" icon=\\\"{{_translate.ICONS.view}}\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" icon=\\\"{{_translate.ICONS.view}}\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice}}\\\"\\r\\n                     type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"inChuyenDoi()\\\" icon=\\\"{{_translate.ICONS.print}}\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.print_conversion}}\\\"\\r\\n                     type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"isTuChoi\\\" (click)=\\\"xemlydotuchoi()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n                     text=\\\"{{_translate.CONTROLL.BUTTON.reason_reject}}\\\"\\r\\n                     type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !isAccessExportInv\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.sign_approval}}\\\"\\r\\n                     icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"eSubmit('TRINH_KY')\\\" type=\\\"default\\\"\\r\\n                     validationGroup=\\\"formData\\\"\\r\\n                     [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <!-- <button type=\\\"button\\\" (click)=\\\"test()\\\">Test</button> -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\" appScrollToInvalid\\r\\n                     icon=\\\"{{_translate.ICONS.export_inv}}\\\"\\r\\n                     (click)=\\\"eSubmit('XUAT', false)\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n                     [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" appScrollToInvalid\\r\\n                     icon=\\\"{{_translate.ICONS.save}}\\\"\\r\\n                     (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n          </dx-button>\\r\\n          <dx-button appBackButton type=\\\"default\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</form>\\r\\n\\r\\n<ngx-spinner\\r\\nbdColor=\\\"rgba(51,51,51,0.8)\\\"\\r\\nsize=\\\"medium\\\"\\r\\ncolor=\\\"#fff\\\"\\r\\ntype=\\\"timer\\\">\\r\\n<p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}.vat.total-payment-in-word .dx-field-label{width:12%}.vat.total-payment-in-word .dx-field-value{width:88% !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}#btn-chossen-hdck{margin-top:10px;margin-left:50%;margin-bottom:10px}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:25px}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { Base64 } from 'js-base64';\r\nimport { AuthService, Helper, Library, SocketService, VChanggeMoneyService, VPreviewInvService, VStringService } from '@core/index';\r\nimport { ChooseHdckComponent } from '@modules/handle-invoice/components/choose-hdck/choose-hdck.component';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { SendInvoicesComponent } from '@modules/handle-invoice/components/send-invoices/send-invoices.component';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport * as _ from 'lodash';\r\nimport { Observable } from 'rxjs';\r\nimport { RouterLibraryService } from '@shared/router/router-library.service';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { ReplaceFormComponent } from '@modules/handle-invoice-student/components/replace/replace-form/replace-form.component';\r\nimport { ReplaceGripComponent } from '@modules/handle-invoice-student/components/replace/replace-grip/replace-grip.component';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\n@Component({\r\n  selector: 'app-replace-invoice',\r\n  templateUrl: './replace-invoice.component.html',\r\n  styleUrls: ['./replace-invoice.component.scss']\r\n})\r\nexport class ReplaceInvoiceComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  @ViewChild(ReplaceGripComponent) productGrip: ReplaceGripComponent;\r\n  @ViewChild(ReplaceFormComponent) formInvoice: ReplaceFormComponent;\r\n\r\n  bsModalRef: BsModalRef;\r\n  bsModalHdckRef: BsModalRef;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  frmData: InvoiceModel = new InvoiceModel(3);\r\n  oldForm: any;\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  total_payment:any;\r\n  is_multi_vat: any;\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n  select: any = {};\r\n  _objTemplateSelect: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  tempKiFile = 0;\r\n  dataInvoice: any;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  isHdGTGT = true;\r\n  fileData: Array<any> = [];\r\n  configs: any;\r\n  _translate: any;\r\n  isTuChoi = false;\r\n  listDM: any;\r\n  isAccessExportInv = false;\r\n  textReport: any;\r\n  valueChange: string;\r\n  invoicereleaseTempt: any;\r\n  arrProducts = [];\r\n  student_reduce_rate_code: any;\r\n  nodeSign: any;\r\n  _oTemplateTT78: any = {};\r\n  invoiceTemplateTT78: any;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private routerLibrary: RouterLibraryService,\r\n    private confirmService: ConfirmService,\r\n    private spinner: NgxSpinnerService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status === 'DA_XUAT') {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  onRedueFeeChange(e) {\r\n    this.dataSource.items().forEach(item => {\r\n      const product = this.arrProducts.filter(p => p.code = item.product_code)[0];\r\n      if (product) {\r\n        item.price = parseFloat(product.price) - (product.price * parseFloat(e.note)) / 100;\r\n      }\r\n    });\r\n    VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n    this.student_reduce_rate_code = e.note;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let status;\r\n    if (!this.frmData.id && !this.frmData.invoice_number) {\r\n      status = 'THEM_MOI';\r\n    }\r\n    if (this.frmData.id && !this.frmData.invoice_number) {\r\n      status = 'GHI_TAM';\r\n    }\r\n    if (this.frmData.id && this.frmData.invoice_number) {\r\n      status = 'GIU_SO';\r\n    }\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (status === 'THEM_MOI') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTamForSeries(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamForSeriesTT78(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else if (status === 'GHI_TAM') {\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.editBatch(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editBatchTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else if (status === 'GIU_SO') {\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.editBatch(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editBatchTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    const sub = this.vatService.xuatHoaDon({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n      invoice_files: this.frmData.invoice_files\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.disablleScreen();\r\n        Library.notify('Xuất hóa đơn thành công', 'success');\r\n        this.fileData = this.frmData.invoice_files;\r\n        this.setDataSessionStorage(this.frmData);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    // kết nối websocket\r\n    this.connectWebsocket();\r\n    this.configs = this.authService.getConfigs();\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    this.formatter.display_int = this.configs.system_parameter.display_int;\r\n    ///////\r\n    let isViewTT32 = false;\r\n    if (this.route.snapshot.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      if (data.init[5].length > 0) {\r\n        this.textReport = this._translate.CONTROLL.BUTTON.view_report;\r\n      } else {\r\n        this.textReport = this._translate.CONTROLL.BUTTON.create_report;\r\n      }\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.student_reduce_rate_codes = data.init[1].DM_TY_LE_MIEN_GIAM_HOC_PHI;\r\n\r\n      if (this.infoDangKy) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n          this.isTT78 = true;\r\n      }\r\n      if (this.isTT78 == true && isViewTT32)\r\n        this.isTT78 = false;\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        temptTT78 = data.init[0];\r\n\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (data.init[4] && Number.parseInt(data.init[4].invoice_number) > 0) {\r\n            if (data.init[4].is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == data.init[4].is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n      }\r\n      if (data.status === 'thaythemoi') {\r\n        this.khoiTaoKhiThemMoi(data.init[4]);\r\n        this.oldForm = data.init[4];\r\n      } else {\r\n        this.khoiTaoKhiSua(data.init[4]);\r\n        this.oldForm = data.init[4].origin;\r\n      }\r\n      if (data.init[5].length > 0 && this.isTT78) {\r\n        let oReport = data.init[5][data.init[5].length - 1];\r\n        if (oReport)\r\n          this.frmData.destroy_reason = oReport.destroy_reason;\r\n      }\r\n      if (this.oldForm.template_code.indexOf('02GTTT') >= 0 || this.oldForm.template_code == \"2\") {\r\n        this.isHdGTGT = false;\r\n      }\r\n      // mẫu nhiều loại thuế suất ko\r\n      if (!this.isTT78) {\r\n        this.select.invoice_releases.some(item => {\r\n          if (item.value === this.oldForm.invoice_release_id) {\r\n            this.is_multi_vat = item.is_multi_vat;\r\n            this._objTemplateSelect = item;\r\n            return true;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.select.templatesTT78.forEach(item => {\r\n          if (item.value === this.oldForm.template_id) {\r\n            this.invoiceTemplateTT78 = item;\r\n          }\r\n        });\r\n        this.select.templatesTT78.some(item => {\r\n          if (item.value === this.oldForm.template_id) {\r\n            this.is_multi_vat = item.is_multi_vat;\r\n            for (const key in item) {\r\n              if (item.hasOwnProperty(key)) {\r\n                this._oTemplateTT78[key] = item[key];\r\n              }\r\n            }\r\n            return true;\r\n          }\r\n        });\r\n      }\r\n      this.dataInvoice = data.init[4];\r\n    });\r\n    const currentUser = this.authService.getCurrentUser();\r\n    const listpermissions = currentUser.user.permissions.split(',');\r\n    const obj2 = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (obj2.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        // Helper.dowloadFile('test.xml', 'xml', data.Data.Content);\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.frmData.issuer_name = data.Data.IssuerName;\r\n          this.xuLiApiKhiXuat();\r\n        } else {\r\n          this.frmData.invoice_files.forEach(item => {\r\n            if (item.file_name === data.Data.Name) {\r\n              item.file_content = data.Data.Content;\r\n            }\r\n          });\r\n          this.tempKiFile++;\r\n          if (this.tempKiFile === this.frmData.invoice_files.length) {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  khoiTaoKhiThemMoi(data) {\r\n    // khởi tạo mới lưới\r\n    const inv_products = this.frmData.setInvoice_products_data(data.invoice_products);\r\n    inv_products.forEach(item => {\r\n      item.vat = item.vat != null ? item.vat.toString() : null;\r\n    });\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: inv_products\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    // tạo mới đối tượng file\r\n    this.fileData = [];\r\n\r\n\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormThayThe(data);\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0);\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          this.invoicereleaseTempt = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      if (this.select.templatesTT78.length) {\r\n        this.select.templatesTT78.forEach(item => {\r\n          if (item.value === this.frmData.template_id) {\r\n            this.invoiceTemplateTT78 = item;\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    this.select.student_reduce_rate_codes.forEach(item => {\r\n      if (this.frmData.student_reduce_rate_code === item.code) {\r\n        this.student_reduce_rate_code = item.note;\r\n      }\r\n    });\r\n  }\r\n\r\n  checkDisabledTotalPaymentInWord() {\r\n\r\n    if (this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'TIEN_CHU') {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    const inv_products = this.frmData.setInvoice_products_data(data.invoice_products);\r\n    inv_products.forEach(item => {\r\n      item.vat = item.vat != null ? item.vat.toString() : null;\r\n    });\r\n    // khởi tạo lưới từ dữ liệu sửa\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: inv_products\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    if (VStringService._getValueToString(this.frmData.approve_status) === sEnum.statusApprove.TuChoi) {\r\n      this.isTuChoi = true;\r\n    }\r\n    // lấy file\r\n    this.fileData = data.invoice_files || [];\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          this.invoicereleaseTempt = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.invoiceTemplateTT78 = item;\r\n        }\r\n      });\r\n    }\r\n    this.select.student_reduce_rate_codes.forEach(item => {\r\n      if (this.frmData.student_reduce_rate_code === item.code) {\r\n        this.student_reduce_rate_code = item.note;\r\n      }\r\n    });\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n\r\n  }\r\n\r\n  updateSomeTotalInput(e) {\r\n  }\r\n\r\n  fillAutoInput(e) {\r\n    // this.frmData.auto_value = e;\r\n  }\r\n\r\n  // Lấy data khi chọn file đính kèm bảng kê\r\n  getFileData(fileData) {\r\n    this.fileData = fileData;\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number === 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n  onTemplateTT78TypeChange(e) {\r\n    this.invoiceTemplateTT78 = e;\r\n  }\r\n\r\n  // sự kiện form\r\n  totalPaymentChange = (e) => {\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(e.value, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n\r\n  // Các hàm chức năng chính\r\n\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n      let data = this.vatService.taodulieuXemTruocHS(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    let data = this.vatService.taodulieuXemMauHS(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    const data = this.vatService.taodulieuInchuyendoiHS(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n \r\n  ghiTam(data) {\r\n    if (this.frmData.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.editBatch(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify('Trình ký thành công', 'success');\r\n            } else {\r\n              Library.notify('Cập nhật thành công', 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editBatchTT78(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify('Trình ký thành công', 'success');\r\n            } else {\r\n              Library.notify('Cập nhật thành công', 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.ghiTamForSeries(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            Library.notify('Ghi tạm thành công', 'success');\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.ghiTamForSeriesTT78(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            Library.notify('Ghi tạm thành công', 'success');\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuatChoKy(data) {\r\n    Library.showloading();\r\n    if (!this.isTT78) {\r\n      const sub = this.vatService.xuatChoKyForSeries(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify('Trình ký thành công', 'success');\r\n          } else {\r\n            Library.notify('Xuất chờ ký thành công', 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      const sub = this.vatService.xuatChoKyForSeriesTT78(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify('Trình ký thành công', 'success');\r\n          } else {\r\n            Library.notify('Xuất chờ ký thành công', 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatHoaDon(data) {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      if (this.frmData.invoice_files.length) {\r\n        this.frmData.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.frmData.invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n      }\r\n    }\r\n  }\r\n\r\n  _validForm(isOnlyCheckAm) {\r\n    let _isValid = true;\r\n    if ((this.frmData.amount_vat5 < 0 || this.frmData.amount_vat10 < 0 || this.frmData.total_payment < 0)\r\n    && !this.configs.system_parameter.allow_export_with_negative) {\r\n      Library.notify(this._translate.NOTIFY.discount_same_vat, 'error');\r\n      return false;\r\n    }\r\n    if (isOnlyCheckAm) {\r\n      return true;\r\n    }\r\n    if (!this.frmData.student_code) {\r\n      if (this.formInvoice.form.instance.getEditor('student_code')) {\r\n        this.formInvoice.form.instance.getEditor('student_code').focus();\r\n      }\r\n      Library.notify(this._translate.CONTROLL.LABEL.code_student + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n\r\n    if (!this.frmData.student_name) {\r\n      if (this.formInvoice.form.instance.getEditor('student_name')) {\r\n        this.formInvoice.form.instance.getEditor('student_name').focus();\r\n      }\r\n      Library.notify(this._translate.CONTROLL.LABEL.name_student + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    if (!this.frmData.total_payment && this.frmData.total_payment !== 0) {\r\n      Library.notify(\"Tổng tiền hóa đơn không được để trống\", 'error');\r\n      return false;\r\n    }\r\n    const _lst = this.frmData.invoice_products.filter(p => p.product_name);\r\n    if (_lst.length === 0) {\r\n      Library.notify(this._translate.NOTIFY.no_product, 'error');\r\n      this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n      return false;\r\n    }\r\n    else {\r\n      const _lstValidThanhTien = this.frmData.invoice_products.filter(p => !p.amount && p.amount !== 0);\r\n      if (_lstValidThanhTien.length == this.frmData.invoice_products.length) {\r\n        Library.notify(\"Thành tiền không được để trống\", 'error', 5000);\r\n        this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount'));\r\n        return false;\r\n      }\r\n      const _lstValidTongTien = this.frmData.invoice_products.filter(p => !p.amount_after_vat && p.amount_after_vat !== 0);\r\n      if (_lstValidTongTien.length == this.frmData.invoice_products.length) {\r\n        Library.notify(\"Tổng tiền hàng hóa không được để trống\", 'error', 5000);\r\n        this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount_after_vat'));\r\n        return false;\r\n      }\r\n      for (let i = 0; i < _lst.length; i++) {\r\n        if ((_lst[i].group_code == \"HOCPHI\" || _lst[i].group_code == \"HOCTHEM\") && (_lst[i].school_fee_month == '' || !_lst[i].school_fee_month)) {\r\n          Library.notify(this._translate.GRID.INVOICE_DETAILS.school_fee_month + \" \" + this._translate.VALIDATION.required, 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n        let _lstProduct = _lst.filter(p => p.product_code == _lst[i].product_code)\r\n        if (_lstProduct && _lstProduct.length > 1) {\r\n          Library.notify(\"Mã '\" + _lst[i].product_code + \"' bị trùng\", 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n      }\r\n      if (!this.isTT78) {\r\n        let numberRow = this.invoicereleaseTempt.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(\"Chỉ được chọn 1 khoản thu để xuất hóa đơn\", 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        if (this.frmData.destroy_reason === null || VStringService._getValueToString(this.frmData.destroy_reason) == \"\") {\r\n          this.formInvoice.form.instance.getEditor('destroy_reason').focus();\r\n          Library.notify(\"Lý do thay thế\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        let numberRow = this.invoiceTemplateTT78.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(this._translate.NOTIFY.only_seclected_1_product_to_export_invoice, 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n        this.invoice_products.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion && !item.is_promotion_new && !item.commercial_discount && _isValid) {\r\n              // if (item.quantity == null && _isValid) {\r\n              //   Library.notify(\"Số lượng\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'quantity'));\r\n              //   _isValid = false;\r\n              //   return false;\r\n              // }\r\n              // if (item.price == null && _isValid) {\r\n              //   Library.notify(\"Đơn giá\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'price'));\r\n              //   _isValid = false;\r\n              //   return false;\r\n              // }\r\n            }\r\n            else if (item.is_promotion || item.is_promotion_new || item.commercial_discount) {\r\n              if ((item.product_name == null || item.product_name == '') && _isValid) {\r\n                Library.notify(\"Tên hàng hóa\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'product_name'));\r\n                _isValid = false;\r\n                return false;\r\n              }\r\n            }\r\n            if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion) {\r\n              if (this.isHdGTGT) {\r\n                if (item.vat == null && _isValid) {\r\n                  Library.notify(\"Thuế suất\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'vat'));\r\n                  _isValid = false;\r\n                  return false;\r\n                }\r\n                if (item.vat != \"-1\" && item.amount_vat == null && _isValid) {\r\n                  Library.notify(\"Tiền thuế\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount_vat'));\r\n                  _isValid = false;\r\n                  return false;\r\n                }\r\n              }\r\n              if (item.amount == null && _isValid) {\r\n                Library.notify(\"Thành tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount'));\r\n                _isValid = false;\r\n                return false;\r\n              }\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }\r\n    return _isValid;\r\n  }\r\n\r\n  eSubmit(type, isCheckNoVat?) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.total_payment = \"\";\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (type !== 'GHI_TAM') {\r\n        if (!this._validForm(false)) {\r\n          return;\r\n        }\r\n        if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n          Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n          return;\r\n        }\r\n      }\r\n      if (this.frmData.invoice_options) {\r\n        this.frmData.invoice_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n          delete item['id'];\r\n          delete item['invoice_id'];\r\n        });\r\n      }\r\n      if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n        Library.notify('Vui lòng chọn HTTT chuyển khoản cho hóa đơn có giá trị lớn hơn 20 triệu đồng', 'error');\r\n        return false;\r\n      }\r\n      if (!this.isAccessExportInv && type === 'XUAT' && this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        Library.notify(this._translate.NOTIFY.you_not_permissions, 'error');\r\n        return false;\r\n      }\r\n      if (type === 'XUAT' || (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy)) {\r\n        let _lstInv = [];\r\n        this.invoice_products.load().then((dataSource) => {\r\n          _lstInv = dataSource.filter(p => p.product_name);\r\n        });\r\n        let _index = 0;\r\n        let _isValid = true;\r\n        for (let i = 0; i < _lstInv.length; i++) {\r\n          if (_lstInv[i].amount > 0 && !_lstInv[i].vat) {\r\n            _index = i;\r\n            _isValid = false;\r\n            break;\r\n          }\r\n        }\r\n        if (!this.vatService.checkVatMauHoaDon(_lstInv, this.is_multi_vat)) {\r\n          return false;\r\n        }\r\n        if (!_isValid && isCheckNoVat) {\r\n          const result = Library.confirm(this._translate.CONFIRM.no_vat, this._translate.NOTIFY.notify);\r\n          result.then((dialogResult) => {\r\n            if (dialogResult) {\r\n              this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(_index, 'vat'));\r\n              return false;\r\n            } else {\r\n              if (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n                this.confirmCheckPreview = true;\r\n              }\r\n              if (this.confirmCheckPreview) {\r\n                if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n                  this.xuatHoaDon(this.frmData);\r\n                } else {\r\n                  Helper.confirmXuatChoKy(() => {\r\n                    if (!this.isAccessExportInv) {\r\n                      if (type === 'TRINH_KY') {\r\n                        this.frmData.refuse_reason = '';\r\n                        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n                      } else {\r\n                        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                        }\r\n                      }\r\n                    }\r\n                    this.xuatChoKy(this.frmData);\r\n                  });\r\n                }\r\n                this.confirmCheckPreview = false;\r\n              } else {\r\n                this.previewBeforeExport(type);\r\n              }\r\n            }\r\n          });\r\n        } else {\r\n          if (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.confirmCheckPreview = true;\r\n          }\r\n          if (this.confirmCheckPreview) {\r\n            if (this.formInvoice.getHtXuatValue() != sEnum.hinhThucXuat.XuatChoKy) {\r\n              this.xuatHoaDon(this.frmData);\r\n            } else {\r\n              Helper.confirmXuatChoKy(() => {\r\n                if (!this.isAccessExportInv) {\r\n                  if (type === 'TRINH_KY') {\r\n                    this.frmData.refuse_reason = '';\r\n                    this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n                  } else {\r\n                    if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                      this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                    }\r\n                  }\r\n\r\n                }\r\n                this.xuatChoKy(this.frmData);\r\n              });\r\n            }\r\n          } else {\r\n            this.previewBeforeExport(type);\r\n          }\r\n        }\r\n      } else {\r\n        if (!this.isAccessExportInv) {\r\n          if (type === 'TRINH_KY') {\r\n            this.frmData.refuse_reason = '';\r\n            this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n          } else {\r\n            if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n              this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n            }\r\n          }\r\n        }\r\n        this.ghiTam(this.frmData);\r\n      }\r\n    }, 300);\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = '';\r\n    if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n      trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n    } else {\r\n      trang_thai = this._translate.THONG_TIN.xuat_cho_ky;\r\n    }\r\n    let du_lieu = this.vatService.taodulieuXemTruocHS(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn : this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  handleFormData() {\r\n    this.tempKiFile = 0;\r\n    const invoice_products = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        //delete item.error;\r\n        if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n          item.row_content = item.product_name;\r\n          invoice_products.push(item);\r\n          if (item.is_transport_number) {\r\n            this.frmData.transport_number = item.product_name;\r\n          }\r\n        }\r\n      });\r\n    });\r\n    this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n    this.frmData.note_view_on_invoice = `Hóa đơn này thay thế cho hóa đơn số ${this.oldForm.invoice_number}, mẫu số ${this.oldForm.template_code}, ký hiệu ${this.oldForm.invoice_series} ngày ${moment(this.oldForm.invoice_date).format('DD/MM/YYYY')}`;\r\n    this.frmData.invoice_products = invoice_products;\r\n    this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n  }\r\n\r\n  handleFormDataSub() {\r\n    const wait = (delay, ...args) => new Promise(resolve => setTimeout(resolve, delay, ...args));\r\n    return wait(200).then(() => {\r\n      this.tempKiFile = 0;\r\n      const invoice_products = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          //delete item.error;\r\n          if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n            item.row_content = item.product_name;\r\n            invoice_products.push(item);\r\n            if (item.is_transport_number) {\r\n              this.frmData.transport_number = item.product_name;\r\n            }\r\n          }\r\n        });\r\n      });\r\n      this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n      this.frmData.note_view_on_invoice = `Hóa đơn này thay thế cho hóa đơn số ${this.oldForm.invoice_number}, mẫu số ${this.oldForm.template_code}, ký hiệu ${this.oldForm.invoice_series} ngày ${moment(this.oldForm.invoice_date).format('DD/MM/YYYY')}`;\r\n      this.frmData.invoice_products = invoice_products;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n      return true;\r\n    });\r\n  }\r\n\r\n  showModalHdck() {\r\n    const initialState = {\r\n      invoiceNumberOrigin: this.oldForm.invoice_number,\r\n      invoiceReleaseId: this.oldForm.invoice_release_id,\r\n      onSave: (data) => {\r\n        this.frmData.id = data.id;\r\n        this.frmData.invoice_date = data.invoice_date;\r\n        this.frmData.invoice_number = data.invoice_number;\r\n      }\r\n    };\r\n    this.bsModalHdckRef = this.modalService.show(ChooseHdckComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-lg full-modal',\r\n      initialState\r\n    });\r\n  }\r\n\r\n  test() {\r\n    this.productGrip.createUpdateEvent();\r\n    // this.handleFormData();\r\n    // window.scrollTo(100, 100);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n    // this.socketService.close();\r\n  }\r\n\r\n  xemlydotuchoi() {\r\n    Library.showloading();\r\n    const sub = this.vatService.showToSendInvoice(this.frmData.id).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n          listDM: this.listDM\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n  }\r\n\r\n  routeReport() {\r\n    if (this.dataInvoice.origin_id !== null) {\r\n      if (this.dataInvoice.status === 'GHI_TAM') {\r\n        this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.origin_id, 'THAY_THE']);\r\n      } else {\r\n        this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.id, 'THAY_THE']);\r\n      }\r\n    } else {\r\n      this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.id, 'THAY_THE']);\r\n    }\r\n  }\r\n\r\n  onTemplateTypeChange(e) {\r\n    this.invoicereleaseTempt = e;\r\n  }\r\n\r\n  onNumberTicketChange() {\r\n    if (!this.isTT78) {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n      }\r\n    }\r\n    else {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n      }\r\n    }\r\n  }\r\n\r\n  onVatChange() {\r\n    const decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n    const decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n    const decimal_vat = this.getFormatterToNumber(this.formatter.vat);\r\n    if (this.frmData.vat_service_ticket === '5' || this.frmData.vat_service_ticket == '10') {\r\n      this.frmData.total_vat_service_ticket = this.roundNumber((Number.parseInt(this.frmData.vat_service_ticket) * this.frmData.money_service_ticket) / 100, decimal_amount_vat);\r\n    } else {\r\n      this.frmData.total_vat_service_ticket = 0;\r\n    }\r\n    this.frmData.total_service_ticket_with_vat = this.roundNumber(this.frmData.money_service_ticket + this.frmData.total_vat_service_ticket, decimal_amount);\r\n  }\r\n\r\n  getFormatterToNumber(formatter) {\r\n    const s1 = formatter.replace('0,###', '');\r\n    if (s1 === '') {\r\n      return 0;\r\n    } else {\r\n      const s2 = s1.replace('.', '');\r\n      return s2.split('').length;\r\n    }\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  keyDown(e: any) {\r\n    // setTimeout(() => {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n    // }, 100);\r\n  }\r\n\r\n  setDataSessionStorage(value) {\r\n    this.valueChange = JSON.stringify(value);\r\n  }\r\n\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  async subData(type, value) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return false;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    await this.handleFormDataSub();\r\n    if (this.frmData.invoice_options) {\r\n      this.frmData.invoice_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n      Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error');\r\n      return false;\r\n    }\r\n    if (!this.isAccessExportInv) {\r\n      if (type === 'TRINH_KY') {\r\n        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n        this.frmData.refuse_reason = '';\r\n      } else {\r\n        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    if (value.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.editBatch(this.frmData.id, value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.editBatchTT78(this.frmData.id, value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.ghiTamForSeries(value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.ghiTamForSeriesTT78(value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM', this.frmData).then(value1 => {\r\n                    observer.next(value1);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    }\r\n    return true;\r\n  }\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport {VatSharedModule} from '@shared/modules/vat-shared/vat-shared.module';\r\nimport {devextremeModule} from '@core/library';\r\nimport {vTranslateModule} from '@core/module/v-translate.module';\r\nimport {VatService} from '@modules/vat/shared';\r\nimport {HanldeReportService} from '@modules/handle-report/hanlde-report.service';\r\nimport {VatDeactivateGuard} from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport {RouterLibraryService} from '@shared/router/router-library.service';\r\nimport {ConfirmService} from '@shared/service/confirm.service';\r\nimport {AdjustInvoiceResolver, HandleInvoiceService, ReplaceInvoiceResolver} from '@modules/handle-invoice/shared';\r\nimport {AdjustFormComponent} from '@modules/handle-invoice-student/components/adjust/adjust-form/adjust-form.component';\r\nimport {AdjustGripComponent} from '@modules/handle-invoice-student/components/adjust/adjust-grip/adjust-grip.component';\r\nimport {AdjustInvoiceComponent} from '@modules/handle-invoice-student/components/adjust/adjust-invoice/adjust-invoice.component';\r\nimport {ReplaceFormComponent} from '@modules/handle-invoice-student/components/replace/replace-form/replace-form.component';\r\nimport {ReplaceGripComponent} from '@modules/handle-invoice-student/components/replace/replace-grip/replace-grip.component';\r\nimport {ReplaceInvoiceComponent} from '@modules/handle-invoice-student/components/replace/replace-invoice/replace-invoice.component';\r\nimport {IndexComponent} from '@modules/handle-invoice-student/components/index/index.component';\r\nimport {HandleInvoiceStudentRouting} from '@modules/handle-invoice-student/handle-invoice-student.routing';\r\nimport {ReplaceInvoiceStudentResolver} from '@modules/handle-invoice-student/shared/replace-invoice-student-resolver.service';\r\nimport { ChooseHdckComponent } from './components/choose-hdck/choose-hdck.component';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { SendDataForTaxComponent } from '@shared/index';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport {HandleInvoiceModule} from '@modules/handle-invoice/handle-invoice.module';\r\nimport { ReportTaxInvoiceErrorComponent } from '@modules/handle-invoice/components/report-tax-invoice-error/report-tax-invoice-error.component'\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport { RemoveComponent } from './components/remove/remove.component';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    VatSharedModule,\r\n    devextremeModule,\r\n    vTranslateModule,\r\n    HandleInvoiceStudentRouting,\r\n    HandleInvoiceModule,\r\n    NgxSpinnerModule\r\n  ],\r\n  declarations: [\r\n    IndexComponent,\r\n    AdjustFormComponent,\r\n    AdjustGripComponent,\r\n    AdjustInvoiceComponent,\r\n    ReplaceFormComponent,\r\n    ReplaceGripComponent,\r\n    ReplaceInvoiceComponent,\r\n    ChooseHdckComponent,\r\n    RemoveComponent\r\n    \r\n  ],\r\n  providers: [\r\n    HandleInvoiceService,\r\n    VatService,\r\n    AdjustInvoiceResolver,\r\n    ReplaceInvoiceResolver,\r\n    HanldeReportService,\r\n    VatDeactivateGuard,\r\n    RouterLibraryService,\r\n    ConfirmService,\r\n    ReplaceInvoiceStudentResolver,\r\n    ProductsService,\r\n    TemplateService,\r\n    ViewInvoiceService,\r\n    MyBsModalService\r\n  ],\r\n  entryComponents: [\r\n    ChooseHdckComponent,\r\n    SendDataForTaxComponent,\r\n    ReportTaxInvoiceErrorComponent,\r\n    RemoveComponent,\r\n    PreviewInvoiceComponent\r\n  ],\r\n})\r\nexport class HandleInvoiceStudentModule {\r\n}\r\n","import {RouterModule, Routes} from '@angular/router';\r\nimport {NgModule} from '@angular/core';\r\nimport {VatDeactivateGuard} from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport {ReplaceInvoiceResolver} from '@modules/handle-invoice/shared';\r\nimport {IndexComponent} from '@modules/handle-invoice-student/components/index/index.component';\r\nimport {AdjustInvoiceComponent} from '@modules/handle-invoice-student/components/adjust/adjust-invoice/adjust-invoice.component';\r\nimport {ReplaceInvoiceComponent} from '@modules/handle-invoice-student/components/replace/replace-invoice/replace-invoice.component';\r\nimport {AdjustInvoiceStudentResolverService} from '@modules/handle-invoice-student/shared/adjust-invoice-student-resolver.service';\r\nimport {ReplaceInvoiceStudentResolver} from '@modules/handle-invoice-student/shared/replace-invoice-student-resolver.service';\r\n\r\nconst routes: Routes = [\r\n  {path: '', component: IndexComponent},\r\n  {\r\n    path: 'adjust-vat/:originId',\r\n    component: AdjustInvoiceComponent,\r\n    resolve: {init: AdjustInvoiceStudentResolverService},\r\n    canDeactivate: [VatDeactivateGuard],\r\n    data: {\r\n      type: '01GTKT',\r\n      brec: 'create_invoice_adjustment',\r\n      status: 'dieuchinhmoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'adjust-sale/:originId',\r\n    component: AdjustInvoiceComponent,\r\n    resolve: {init: AdjustInvoiceStudentResolverService},\r\n    canDeactivate: [VatDeactivateGuard],\r\n    data: {\r\n      type: '02GTTT',\r\n      brec: 'create_invoice_adjustment',\r\n      status: 'dieuchinhmoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'replace-vat/:originId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: {init: ReplaceInvoiceStudentResolver},\r\n    data: {\r\n      type: '01GTKT',\r\n      brec: 'create_invoice_instead',\r\n      status: 'thaythemoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'replace-sale/:originId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: {init: ReplaceInvoiceStudentResolver},\r\n    data: {\r\n      type: '02GTTT',\r\n      brec: 'create_invoice_instead',\r\n      status: 'thaythemoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-adjust-vat/:invoiceId',\r\n    component: AdjustInvoiceComponent,\r\n    resolve: {init: AdjustInvoiceStudentResolverService},\r\n    canDeactivate: [VatDeactivateGuard],\r\n    data: {\r\n      type: '01GTKT',\r\n      brec: 'create_invoice_adjustment',\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-adjust-sale/:invoiceId',\r\n    component: AdjustInvoiceComponent,\r\n    resolve: {init: AdjustInvoiceStudentResolverService},\r\n    canDeactivate: [VatDeactivateGuard],\r\n    data: {\r\n      type: '02GTTT',\r\n      brec: 'create_invoice_adjustment',\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-replace-vat/:invoiceId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: {init: ReplaceInvoiceStudentResolver},\r\n    data: {\r\n      type: '01GTKT',\r\n      brec: 'create_invoice_instead',\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-replace-sale/:invoiceId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: {init: ReplaceInvoiceStudentResolver},\r\n    data: {\r\n      type: '02GTTT',\r\n      brec: 'create_invoice_instead',\r\n    }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HandleInvoiceStudentRouting {\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Resolve, Router, RouterStateSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { Library } from '@core/library';\r\nimport { map, take } from 'rxjs/operators';\r\nimport { HandleInvoiceStudentService } from '@modules/handle-invoice-student/shared/handle-invoice-student.service';\r\nimport { Helper } from '@core/helper/Helper';\r\nimport { AuthService } from '@core/index';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AdjustInvoiceStudentResolverService implements Resolve<any[]> {\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private handleInvoiceService: HandleInvoiceStudentService,\r\n    private authService: AuthService,\r\n  ) {\r\n  }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> | Promise<any[]> | any[] {\r\n    Library.showloading();\r\n    let check = false;\r\n    const origin_id = route.paramMap.get('originId');\r\n    const invoiceId = route.paramMap.get('invoiceId');\r\n    const loaiHoaDon = route.data.type;\r\n    let isTT78 = false;\r\n    let isViewTT32 = false;\r\n    if (route.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    let infoDangKy = this.authService.getInfoRegister();\r\n    if (infoDangKy && infoDangKy.id) {\r\n      if (infoDangKy.status == \"CHAP_NHAN\")\r\n        isTT78 = true;\r\n    }\r\n    if (isTT78 == true && isViewTT32)\r\n      isTT78 = false;\r\n    if (invoiceId) {\r\n      check = true;\r\n    }\r\n    if (isTT78) {\r\n      return this.handleInvoiceService.showInvoiceAdjustResolverTT78(origin_id || invoiceId, check, loaiHoaDon)\r\n        .pipe(\r\n          take(1),\r\n          map(rs => {\r\n            Library.hideloading();\r\n            if (rs[0].status === 'success' && rs[1].status === 'success' && rs[2].status === 'success' && rs[3].status === 'success') {\r\n              let templates = Helper.convertTemplatesToInvoiceResolver(rs[3]);\r\n              return [\r\n                templates,\r\n                rs[0].data,\r\n                '',\r\n                rs[1].data.invoice,\r\n                rs[2].data.invoice_reports\r\n              ];\r\n            } else { // error\r\n              if (loaiHoaDon === '01GTKT') {\r\n                this.router.navigate(['/system/vat-invoice']);\r\n              } else {\r\n                this.router.navigate(['/system/sale-invoice']);\r\n              }\r\n\r\n              return null;\r\n            }\r\n          })\r\n        );\r\n    }\r\n    else {\r\n      return this.handleInvoiceService.showInvoiceAdjustResolver(origin_id || invoiceId, check, loaiHoaDon)\r\n        .pipe(\r\n          take(1),\r\n          map(rs => {\r\n            Library.hideloading();\r\n            if (rs[0].status === 'success' && rs[1].status === 'success' && rs[2].status === 'success' && rs[3].status === 'success') {\r\n              const invoice_releases = Helper.convertDataToInvoiceResolver(rs[0]);\r\n              return [\r\n                invoice_releases,\r\n                rs[1].data,\r\n                '',\r\n                rs[2].data.invoice,\r\n                rs[3].data.invoice_reports,\r\n              ];\r\n            } else { // error\r\n              if (loaiHoaDon === '01GTKT') {\r\n                this.router.navigate(['/system/vat-invoice']);\r\n              } else {\r\n                this.router.navigate(['/system/sale-invoice']);\r\n              }\r\n\r\n              return null;\r\n            }\r\n          })\r\n        );\r\n    }\r\n\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ApiService, AuthService } from '@core/services';\r\nimport { forkJoin } from 'rxjs';\r\nimport * as moment from 'moment';\r\nimport { Helper } from '@core/index';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class HandleInvoiceStudentService {\r\n  currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private authService: AuthService,\r\n  ) {\r\n  }\r\n\r\n  getAllStudent(params?) {\r\n    const company_type = this.authService.getCurrentUser().account.company_type;\r\n    let filter_value;\r\n    switch (company_type) {\r\n      case 'KHAU_TRU':\r\n        filter_value = '01GTKT';\r\n        break;\r\n      case 'TRUC_TIEP':\r\n        filter_value = '02GTTT';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    const fields = Helper.danh_sach_truong.hoa_don;\r\n    const includes = 'includes[]=invoice_wrongs&includes[]=invoice_files&includes[]=invoice_reports&options[is_view_index]=1&options[with_invoice_wrongs]=1';\r\n    const filter_string = `\r\n    &filter_groups[1][or]=true\r\n    &filter_groups[1][filters][0][key]=originInvoiceExported\r\n    &filter_groups[1][filters][0][value]=true\r\n    &filter_groups[1][filters][0][operator]=eq\r\n    &filter_groups[1][filters][1][key]=adjustment_type\r\n    &filter_groups[1][filters][1][value]=1\r\n    &filter_groups[1][filters][1][operator]=eq\r\n    &filter_groups[1][filters][1][not]=true\r\n\r\n    &filter_groups[2][filters][0][key]=send_department_status\r\n    &filter_groups[2][filters][0][value]=KHONG_HOP_LE\r\n    &filter_groups[2][filters][0][operator]=eq\r\n    &filter_groups[2][filters][0][not]=true\r\n    `;\r\n    let filter = filter_value ? filter_string + `&filter_groups[2][filters][0][key]=template.invoice_type&filter_groups[2][filters][0][value]=${filter_value}&filter_groups[2][filters][0][operator]=eq` : filter_string;\r\n    if (params) {\r\n      filter += '&' + params + '&filter_groups[3][filters][3][key]=invoice_type&filter_groups[3][filters][3][value]=08HSPT&filter_groups[3][filters][3][operator]=eq&filter_groups[3][filters][3][not]=true';\r\n    }\r\n    const sort = '&sort[0][key]=status_order&sort[0][direction]=ASC';\r\n    return this.apiService.getDataTable('/invoices', includes + fields + filter, sort);\r\n  }\r\n\r\n  showInvoiceAdjustResolver(id, edit, loaiHoaDon) {\r\n    const arr = [\r\n      this.apiService.get(`/invoice-releases?includes[]=template&filter_groups[0][filters][0][key]=release_status&filter_groups[0][filters][0][value][0]=DA_TB_THUE&filter_groups[0][filters][0][value][1]=DA_HUY_SO&filter_groups[0][filters][0][operator]=in&filter_groups[0][filters][2][key]=start_using_date&filter_groups[0][filters][2][value]=${this.currentDate}&filter_groups[0][filters][2][operator]=lte&filter_groups[1][filters][1][key]=template.invoice_type&filter_groups[1][filters][1][value]=${loaiHoaDon}&filter_groups[1][filters][1][operator]=eq`),\r\n      this.apiService.get('/get-lists-by-listtype-code/DM_NHOM_KHACH_HANG,DM_LOAI_TIEN,DM_HINH_THUC_THANH_TOAN,DM_DON_VI_TINH,DM_TY_LE_VAT,DM_DINH_KHOAN,DM_NOI_XUAT_HOA_DON,DM_QUOC_GIA,DM_TAI_KHOAN_NGAN_HANG,DM_HINH_THUC_THU,DM_TY_LE_MIEN_GIAM_HOC_PHI'),\r\n      this.apiService.get('/invoices/' + id + '?includes[]=invoice_files&includes[]=invoice_products&includes[]=invoice_options&includes[]=origin&includes[]=origin.invoice_products&includes[]=origin.invoice_options'),\r\n      this.apiService.get(`/invoice-reports?filter_groups[0][filters][1][key]=invoice_id&filter_groups[0][filters][1][value]=${id}&filter_groups[0][filters][1][operator]=eq&filter_groups[1][filters][1][key]=status&filter_groups[1][filters][1][value]=HOAT_DONG&filter_groups[1][filters][1][operator]=eq&filter_groups[1][filters][4][key]=type&filter_groups[1][filters][4][value]=DIEU_CHINH&filter_groups[1][filters][4][operator]=eq&filter_groups[2][filters][4][key]=is_paper_report&filter_groups[2][filters][4][value]=0&filter_groups[2][filters][4][operator]=eq`),\r\n    ];\r\n    return forkJoin(arr);\r\n  }\r\n  showInvoiceAdjustResolverTT78(id, edit, loaiHoaDon) {\r\n    const arr = [\r\n      this.apiService.get('/get-lists-by-listtype-code/DM_NHOM_KHACH_HANG,DM_LOAI_TIEN,DM_HINH_THUC_THANH_TOAN,DM_DON_VI_TINH,DM_TY_LE_VAT,DM_DINH_KHOAN,DM_NOI_XUAT_HOA_DON,DM_QUOC_GIA,DM_TAI_KHOAN_NGAN_HANG,DM_HINH_THUC_THU,DM_TY_LE_MIEN_GIAM_HOC_PHI'),\r\n      this.apiService.get('/invoices/' + id + '?includes[]=invoice_files&includes[]=invoice_products&includes[]=invoice_options&includes[]=origin&includes[]=origin.invoice_products&includes[]=origin.invoice_options'),\r\n      this.apiService.get(`/invoice-reports?filter_groups[0][filters][1][key]=invoice_id&filter_groups[0][filters][1][value]=${id}&filter_groups[0][filters][1][operator]=eq&filter_groups[1][filters][1][key]=status&filter_groups[1][filters][1][value]=HOAT_DONG&filter_groups[1][filters][1][operator]=eq&filter_groups[1][filters][4][key]=type&filter_groups[1][filters][4][value]=DIEU_CHINH&filter_groups[1][filters][4][operator]=eq&filter_groups[2][filters][4][key]=is_paper_report&filter_groups[2][filters][4][value]=0&filter_groups[2][filters][4][operator]=eq`),\r\n      this.apiService.get(`/templates?filter_groups[0][filters][0][key]=is_decree_new&filter_groups[0][filters][0][value]=1&filter_groups[0][filters][0][operator]=eq&filter_groups[1][filters][1][key]=invoice_type&filter_groups[1][filters][1][value]=${loaiHoaDon}&filter_groups[1][filters][1][operator]=eq`)\r\n    ];\r\n    return forkJoin(arr);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map } from 'rxjs/operators';\r\n\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { Library, Helper, AuthService } from '@core/index';\r\n\r\n@Injectable()\r\nexport class ReplaceInvoiceStudentResolver implements Resolve<any[]> {\r\n  constructor(\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    private authService: AuthService,\r\n  ) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    Library.showloading();\r\n    let check = false;\r\n    let dmHS = ',DM_TY_LE_MIEN_GIAM_HOC_PHI,DM_HINH_THUC_THU,DM_LOP_HOC';\r\n    let origin_id = route.paramMap.get('originId');\r\n    let invoiceId = route.paramMap.get('invoiceId');\r\n    let loaiHoaDon = route.data.type;\r\n    let isTT78 = false;\r\n    let isViewTT32 = false;\r\n    if (route.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    let infoDangKy = this.authService.getInfoRegister();\r\n    if (infoDangKy && infoDangKy.id) {\r\n      if (infoDangKy.status == \"CHAP_NHAN\")\r\n        isTT78 = true;\r\n    }\r\n    if (isTT78 == true && isViewTT32)\r\n      isTT78 = false;\r\n    if (invoiceId) {\r\n      check = true;\r\n    }\r\n    if (isTT78) {\r\n      return this.vatService.showInvoiceReplaceResolverTT78(origin_id || invoiceId, check, loaiHoaDon, dmHS).pipe(\r\n        take(1),\r\n        map(rs => {\r\n          Library.hideloading();\r\n          if (rs[0].status == \"success\" && rs[1].status == \"success\" && rs[2].status == \"success\" && rs[3].status == \"success\") {\r\n            let templates = Helper.convertTemplatesToInvoiceResolver(rs[0]);\r\n            return [\r\n              templates,\r\n              rs[1].data,\r\n              rs[2].data.products,\r\n              rs[3].data.configs,\r\n              rs[4].data.invoice,\r\n              rs[5].data.invoice_reports,\r\n            ];\r\n          } else { // error\r\n            if (loaiHoaDon == \"01GTKT\")\r\n              this.router.navigate(['/system/vat-invoice']);\r\n            else\r\n              this.router.navigate(['/system/sale-invoice']);\r\n            return null;\r\n          }\r\n        })\r\n      );\r\n    }\r\n    else {\r\n      return this.vatService.showInvoiceReplaceResolver(origin_id || invoiceId, check, loaiHoaDon, dmHS).pipe(\r\n        take(1),\r\n        map(rs => {\r\n          Library.hideloading();\r\n          if (rs[0].status == \"success\" && rs[1].status == \"success\" && rs[2].status == \"success\" && rs[3].status == \"success\") {\r\n            let invoice_releases = Helper.convertDataToInvoiceResolver(rs[0]);\r\n            return [\r\n              invoice_releases,\r\n              rs[1].data,\r\n              rs[2].data.products,\r\n              rs[3].data.configs,\r\n              rs[4].data.invoice,\r\n              rs[5].data.invoice_reports,\r\n            ];\r\n          } else { // error\r\n            if (loaiHoaDon == \"01GTKT\")\r\n              this.router.navigate(['/system/vat-invoice']);\r\n            else\r\n              this.router.navigate(['/system/sale-invoice']);\r\n            return null;\r\n          }\r\n        })\r\n      );\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}