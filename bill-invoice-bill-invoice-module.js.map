{"version":3,"sources":["webpack:///./src/app/modules/bill-invoice/bill-invoice-routing.module.ts","webpack:///./src/app/modules/bill-invoice/bill-invoice.module.ts","webpack:///./src/app/modules/bill-invoice/components/form-invoice/form-invoice.component.html","webpack:///./src/app/modules/bill-invoice/components/form-invoice/form-invoice.component.scss","webpack:///./src/app/modules/bill-invoice/components/form-invoice/form-invoice.component.ts","webpack:///./src/app/modules/bill-invoice/components/import-invoices-dt/import-invoices-dt.component.html","webpack:///./src/app/modules/bill-invoice/components/import-invoices-dt/import-invoices-dt.component.scss","webpack:///./src/app/modules/bill-invoice/components/import-invoices-dt/import-invoices-dt.component.ts","webpack:///./src/app/modules/bill-invoice/components/index/index.component.html","webpack:///./src/app/modules/bill-invoice/components/index/index.component.scss","webpack:///./src/app/modules/bill-invoice/components/index/index.component.ts","webpack:///./src/app/modules/bill-invoice/components/invoice/invoice.component.html","webpack:///./src/app/modules/bill-invoice/components/invoice/invoice.component.scss","webpack:///./src/app/modules/bill-invoice/components/invoice/invoice.component.ts","webpack:///./src/app/modules/bill-invoice/components/product-grip/product-grip.component.html","webpack:///./src/app/modules/bill-invoice/components/product-grip/product-grip.component.scss","webpack:///./src/app/modules/bill-invoice/components/product-grip/product-grip.component.ts","webpack:///./src/app/modules/bill-invoice/components/send-invoice-to-tax/send-invoice-to-tax.component.html","webpack:///./src/app/modules/bill-invoice/components/send-invoice-to-tax/send-invoice-to-tax.component.scss","webpack:///./src/app/modules/bill-invoice/components/send-invoice-to-tax/send-invoice-to-tax.component.ts","webpack:///./src/app/modules/bill-invoice/components/send-invoices/send-invoices.component.html","webpack:///./src/app/modules/bill-invoice/components/send-invoices/send-invoices.component.scss","webpack:///./src/app/modules/bill-invoice/components/send-invoices/send-invoices.component.ts","webpack:///./src/app/modules/bill-invoice/components/send-mail/send-mail.component.html","webpack:///./src/app/modules/bill-invoice/components/send-mail/send-mail.component.scss","webpack:///./src/app/modules/bill-invoice/components/send-mail/send-mail.component.ts","webpack:///./src/app/modules/bill-invoice/components/view-invoice/view-invoice.component.html","webpack:///./src/app/modules/bill-invoice/components/view-invoice/view-invoice.component.scss","webpack:///./src/app/modules/bill-invoice/components/view-invoice/view-invoice.component.ts","webpack:///./src/app/modules/bill-invoice/shared/invoice.resolver.ts","webpack:///./src/app/modules/bill-invoice/shared/show-invoice.resolver.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAyC;AACc;AACa;AACM;AACd;AACS;AAErE,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,gFAAc;KAC1B;IACD;QACE,IAAI,EAAE,QAAQ;QACd,SAAS,EAAE,sFAAgB;QAC3B,OAAO,EAAE,EAAC,IAAI,EAAE,wEAAe,EAAC;QAChC,IAAI,EAAE,EAAC,IAAI,EAAE,gBAAgB,EAAC;KAC/B;IACD;QACE,IAAI,EAAE,YAAY;QAClB,SAAS,EAAE,sFAAgB;QAC3B,OAAO,EAAE,EAAC,IAAI,EAAE,iFAAmB,EAAC;QACpC,IAAI,EAAE,EAAC,IAAI,EAAE,iBAAiB,EAAC;KAChC;CACF,CAAC;AAMF;IAAA;IAAwC,CAAC;IAA5B,wBAAwB;QAJpC,8DAAQ,CAAC;YACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;SACxB,CAAC;OACW,wBAAwB,CAAI;IAAD,+BAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9BI;AACM;AAGM;AACJ;AACkB;AACmB;AAC3C;AACU;AACN;AACc;AACgC;AACpB;AACL;AACoB;AACA;AACd;AACd;AACS;AAChB;AACQ;AACZ;AACuB;AACmB;AACZ;AACpB;AAC8C;AACb;AAChB;AAC+B;AACJ;AAC7B;AAmD1E;IAAA;IAAiC,CAAC;IAArB,iBAAiB;QAhD7B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,kEAAY;gBACZ,sFAAwB;gBACxB,8DAAgB;gBAChB,gFAAgB;gBAChB,iEAAc;gBACd,wDAAc;gBACd,kEAAe;gBACf,kEAAe;gBACf,kEAAmB;gBACnB,4DAAgB;gBAChB,8DAAe;aAChB;YACD,YAAY,EAAE;gBACZ,iFAAc;gBACd,uFAAgB;gBAChB,qGAAoB;gBACpB,qGAAoB;gBACpB,wGAAqB;gBACrB,sHAAyB;gBACzB,yGAAwB;gBACxB,wHAAyB;gBACzB,4FAAiB;aAAC;YACpB,eAAe,EAAE;gBACf,gFAA6B;gBAC7B,qEAAsB;gBACtB,wGAAqB;gBACrB,4FAAiB;gBACjB,sHAAyB;gBACzB,yGAAwB;gBACxB,0EAAuB;gBACvB,2EAAwB;gBACxB,wHAAyB;gBACzB,qHAAuB;aACtB;YACH,SAAS,EAAE;gBACT,yEAAe;gBACf,kFAAmB;gBACnB,mEAAY;gBACZ,2EAAgB;gBAChB,+DAAU;gBACV,yEAAe;gBACf,0FAAgB;gBAChB,wFAAkB;aACnB;SACF,CAAC;OACW,iBAAiB,CAAI;IAAD,wBAAC;CAAA;AAAJ;;;;;;;;;;;;ACnF9B,uYAAuY,oIAAoI,qCAAqC,0CAA0C,+FAA+F,0CAA0C,GAAG,kCAAkC,ySAAyS,mIAAmI,uCAAuC,wCAAwC,qLAAqL,0CAA0C,0eAA0e,sCAAsC,mJAAmJ,yDAAyD,qYAAqY,eAAe,IAAI,aAAa,odAAod,yBAAyB,2BAA2B,qTAAqT,2CAA2C,mLAAmL,yDAAyD,2SAA2S,WAAW,IAAI,aAAa,wlBAAwlB,mDAAmD,uCAAuC,2CAA2C,kOAAkO,gCAAgC,uCAAuC,wCAAwC,uPAAuP,2CAA2C,oUAAoU,+GAA+G,uCAAuC,4CAA4C,2EAA2E,cAAc,sUAAsU,wBAAwB,scAAsc,gCAAgC,uCAAuC,mCAAmC,8HAA8H,mCAAmC,GAAG,qCAAqC,2UAA2U,wCAAwC,GAAG,kCAAkC,sSAAsS,uCAAuC,6dAA6d,qBAAqB,2LAA2L,oCAAoC,keAAke,KAAK,oCAAoC,qGAAqG,kCAAkC,gFAAgF,mCAAmC,0E;;;;;;;;;;;ACA/rS,yEAAyE,UAAU,iBAAiB,WAAW,eAAe,cAAc,iBAAiB,mBAAmB,WAAW,yBAAyB,YAAY,uBAAuB,aAAa,sCAAsC,cAAc,iBAAiB,yBAAyB,wBAAwB,8DAA8D,uBAAuB,6DAA6D,2BAA2B,QAAQ,WAAW,YAAY,gBAAgB,+CAA+C,UAAU,iBAAiB,gBAAgB,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA9iB;AAChF;AAGG;AACA;AACA;AACrD,iFAAiF;AACN;AACnC;AACa;AACE;AACM;AACR;AACJ;AAC0C;AAChE;AAC6C;AASxE;IA+BE,8BACU,WAAwB,EACzB,SAA2B,EAC1B,KAAqB,EACrB,UAAsB,EACtB,gBAAkC,EAClC,WAAyB,EACzB,YAA4B,EAC5B,WAAwB;QARlC,iBAYC;QAXS,gBAAW,GAAX,WAAW,CAAa;QACzB,cAAS,GAAT,SAAS,CAAkB;QAC1B,UAAK,GAAL,KAAK,CAAgB;QACrB,eAAU,GAAV,UAAU,CAAY;QACtB,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,gBAAW,GAAX,WAAW,CAAc;QACzB,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,gBAAW,GAAX,WAAW,CAAa;QApClC,WAAM,GAAQ,EAAE,CAAC;QACjB,WAAM,GAAQ,EAAE,CAAC;QACjB,cAAS,GAAQ,EAAE,CAAC;QAGpB,kBAAkB;QAClB,gBAAW,GAAG,eAAe;QAC7B,mBAAc,GAAQ,EAAE,CAAC;QAEzB,YAAO,GAAG,qDAAO,CAAC;QAClB,mBAAc,GAAQ,EAAE,CAAC;QACzB,cAAS,GAAG,KAAK,CAAC;QAIlB,aAAQ,GAAQ,EAAE;QAClB,gBAAW,GAAG,EAAE,CAAC;QACjB,kBAAa,GAAG,EAAE,CAAC;QACnB,cAAS,GAAG,EAAE,CAAC;QACf,YAAO,GAAQ,EAAE,CAAC;QAGT,mBAAc,GAAY,KAAK,CAAC;QAGjB,cAAS,GAAG,IAAI,0DAAY,EAAO,CAAC;QAC5B,yBAAoB,GAAG,IAAI,0DAAY,EAAO,CAAC;QA4D/E,gBAAW,GAAG,UAAC,CAAC;YACd,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;gBACpC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC;oBACrC,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;oBAC5B,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;oBACtC,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;oBAC5C,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;oBAChD,IAAI,cAAc,GAAG,EAAE,CAAC;oBACxB,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;wBACvB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;4BAC7B,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;4BACxB,cAAc,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;wBAC9B,CAAC;oBACH,CAAC;oBACD,KAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACvC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QAwBD,oBAAe,GAAG,UAAC,CAAC;YAClB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC7B,KAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,kBAAQ;oBAC5E,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;wBAClB,KAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;wBAC7C,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC;4BACxB,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC;mCAC1H,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,KAAK,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,UAAU,CAAC;mCACvI,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,cAAc,CAAC,cAAc,CAAC,KAAK,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC;mCACpI,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,KAAK,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC;mCACvI,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC;mCAC1H,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,cAAc,CAAC,SAAS,CAAC,KAAK,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC;mCAC5H,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,KAAK,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;gCACtJ,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gCACtB,MAAM,CAAC;4BACT,CAAC;wBACH,CAAC;oBACH,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC;QAiEF,sBAAiB,GAAG,UAAC,CAAC;YACpB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC7B,KAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,kBAAQ;oBAC5E,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;wBAClB,KAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;wBAC7C,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC;4BACxB,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,KAAK,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gCACrI,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gCACtB,MAAM,CAAC;4BACT,CAAC;wBACH,CAAC;oBACH,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC;QA6CF,uBAAkB,GAAG,UAAC,CAAC;YACrB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC7B,KAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,kBAAQ;oBAC5E,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;wBAClB,KAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;wBAC7C,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC;4BACxB,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;gCAChI,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gCACtB,MAAM,CAAC;4BACT,CAAC;wBACH,CAAC;oBACH,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC;QAgGF,wBAAmB,GAAG,UAAC,CAAC;YACtB,IAAM,IAAI,GAAG,KAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,CAAC,CAAC,KAAK,EAAlB,CAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;YACjF,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,KAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,IAAI,CAAC,IAAI,CAAC;YAC/C,CAAC;QACH,CAAC,CAAC;QA7VA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAClD,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,CAAC;IAChD,CAAC;IACD,8CAAe,GAAf;QAAA,iBAOC;QANC,IAAI,QAAQ,GAAG,IAAI,CAAC;QACpB,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,cAAI,IAAI,WAAI,CAAC,KAAK,IAAI,KAAI,CAAC,OAAO,CAAC,WAAW,EAAtC,CAAsC,CAAC,CAAC;QAC1F,IAAM,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC;QAC7D,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YAC7C,IAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;IAC3D,CAAC;IAED,uCAAQ,GAAR;QAAA,iBA+BC;QA9BC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,UAAC,IAAS;YAClD,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC7C,IAAI,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC7C,KAAI,CAAC,MAAM,CAAC,oBAAoB,GAAG,QAAQ,CAAC,uBAAuB,CAAC,CAAC,CAAC,QAAQ,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACnH,IAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;gBACzB,KAAI,CAAC,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC1C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,MAAM,CAAC,aAAa,GAAG,SAAS,CAAC;YACxC,CAAC;QACH,CAAC,CAAC;QACF,sBAAsB;QACtB,IAAI,CAAC,SAAS,GAAG,IAAI,kEAAU,CAAC;YAC9B,IAAI,EAAE,UAAC,WAAW;gBAChB,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,WAAW,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;YAChF,CAAC;SACF,CAAC,CAAC;QAEH,4BAA4B;QAC5B,IAAI,CAAC,cAAc,GAAG,IAAI,kEAAU,CAAC;YACnC,IAAI,EAAE,UAAC,WAAW;gBAChB,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,WAAW,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;YAC5E,CAAC;SACF,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;YAC/C,IAAM,GAAG,GAAG,aAAa,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YAC7C,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC/B,CAAC;IACH,CAAC;IACD,0CAAW,GAAX;IAEA,CAAC;IAsBD,wDAAyB,GAAzB,UAA0B,QAAQ;QAChC,EAAE,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;YAChC,IAAM,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,cAAI,IAAI,WAAI,CAAC,IAAI,IAAI,sCAAsC,EAAnD,CAAmD,CAAC,CAAC;YACzG,EAAE,CAAC,CAAC,cAAc,IAAI,cAAc,CAAC,OAAO,IAAI,IAAI,CAAC,CAAC,CAAC;gBACrD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC;oBACpC,IAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,MAAM;YAC7C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,EAAE;YACvC,CAAC;QACH,CAAC;IACH,CAAC;IAED,6CAAc,GAAd;IAEA,CAAC;IACD,8CAAe,GAAf;QACE,8BAA8B;QAC9B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,eAAe;IAC5D,CAAC;IACD,yDAA0B,GAA1B;IAEA,CAAC;IAsBD,8CAAe,GAAf,UAAgB,MAAM;QACpB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC3B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC5C,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gBAC3C,IAAI,CACF,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACzC,CAAC;YACD,IAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;YAC/C,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,aAAa,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAC9D,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;QAClC,CAAC;QACD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;IACD,8CAAe,GAAf;QACE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,cAAI;YACnC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACvB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;IACtC,CAAC;IAEM,oDAAqB,GAA5B;QACE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,cAAI;YACnC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,+BAA+B;QACjC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;IACvC,CAAC;IACD,4CAAa,GAAb,UAAc,CAAC;QACb,IAAM,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC;QAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,KAAK,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,oBAAoB,KAAK,UAAU,CAAC,CAAC,CAAC;YACxG,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,QAAQ,CAAC,IAAI,CAAC;QAC7C,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,QAAQ,CAAC,mBAAmB,CAAC;QACvD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,KAAK,UAAU,CAAC,CAAC,CAAC;YACrD,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,QAAQ,CAAC,gBAAgB,CAAC;QACzD,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,QAAQ,CAAC,IAAI,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC;QACpD,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC;YAC1C,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAM,kBAAkB,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,kBAAkB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACnD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,kBAAkB,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,kBAAkB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACrF,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC;YAC1C,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACnB,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,EAAE,CAAC;QACvC,IAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,QAAQ,CAAC,mBAAmB,CAAC,CAAC,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAAE,CAAC;QACpG,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;QACtE,IAAI;QACJ,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IACD,4CAAa,GAAb,UAAc,CAAC;QACb,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,CAAC,CAAC,KAAK;IACvC,CAAC;IAgBD,4CAAa,GAAb;QAAA,iBAgBC;QAfC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YACjC,mDAAO,CAAC,MAAM,CAAC,2BAA2B,EAAE,OAAO,CAAC;QACtD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,aAAG;gBACvE,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;oBACrC,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC;oBACnD,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,KAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC;gBACjE,CAAC;YACH,CAAC,CAAC;QACJ,CAAC;QACD,UAAU,CAAC;YACT,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,EAAE,IAAI,CAAC,CAAC;IACX,CAAC;IACD,iDAAkB,GAAlB,UAAmB,CAAC;QAClB,IAAM,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC;QAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,KAAK,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,oBAAoB,KAAK,UAAU,CAAC,CAAC,CAAC;YACxG,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,QAAQ,CAAC,IAAI,CAAC;QAC7C,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,QAAQ,CAAC,mBAAmB,CAAC;QACvD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,KAAK,UAAU,CAAC,CAAC,CAAC;YACrD,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,QAAQ,CAAC,gBAAgB,CAAC;QACzD,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,QAAQ,CAAC,QAAQ,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC;QACpD,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC;YAC1C,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAM,kBAAkB,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,kBAAkB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACnD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,kBAAkB,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,kBAAkB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACrF,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC;YAC1C,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACnB,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,EAAE,CAAC;QACvC,IAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,QAAQ,CAAC,mBAAmB,CAAC,CAAC,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAAE,CAAC;QACpG,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;QACtE,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAgBK,0CAAW,GAAjB;;;;;;;wBACE,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;6BAC3B,IAAI,CAAC,WAAW,EAAhB,wBAAgB;wBACD,qBAAM,IAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE;;wBAA3D,QAAQ,GAAG,SAAgD;6BAC7D,QAAQ,EAAR,wBAAQ;wBACV,SAAI;wBAAwB,qBAAM,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC;;wBAArE,GAAK,oBAAoB,GAAG,SAAyC,CAAC;;;wBAEtE,SAAI;wBAAwB,qBAAM,IAAI,CAAC,WAAW,CAAC,wBAAwB,EAAE;;wBAA7E,GAAK,oBAAoB,GAAG,SAAiD,CAAC;;;wBAEhF,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC;4BACjF,EAAE,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gCAC3C,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,eAAK;oCAChE,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;wCAC5B,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;wCACrB,MAAM,CAAC,KAAK,CAAC;oCACf,CAAC;gCACH,CAAC,CAAC,CAAC;4BACL,CAAC;wBACH,CAAC;;;wBAEG,YAAY,GAAG;4BACnB,qBAAqB,EAAE,KAAK;4BAC5B,WAAW,EAAE,IAAI,CAAC,WAAW;4BAC7B,gBAAgB,EAAE,IAAI,CAAC,oBAAoB;yBAC5C,CAAC;wBACF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,kEAAoB,EAAE;4BAC7D,KAAK,EAAE,qBAAqB,EAAE,YAAY,gBAAE,QAAQ,EAAE,QAAQ;4BAC9D,QAAQ,EAAE,KAAK;yBAChB,CAAC,CAAC;wBACG,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;4BAClD,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;gCAC5C,IAAM,QAAQ,GAAG,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,CAAC;gCACzD,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,QAAQ,CAAC,IAAI,CAAC;gCAC3C,KAAI,CAAC,OAAO,CAAC,cAAc,GAAG,QAAQ,CAAC,QAAQ,CAAC;gCAChD,KAAI,CAAC,OAAO,CAAC,UAAU,GAAG,QAAQ,CAAC,mBAAmB,CAAC;gCACvD,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,QAAQ,CAAC,gBAAgB,CAAC;gCACvD,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,QAAQ,CAAC,IAAI,CAAC;gCAC3C,KAAI,CAAC,OAAO,CAAC,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC;gCAEpD,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;oCACnB,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC;oCAC1C,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC;oCACjB,IAAM,kBAAkB,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oCACrD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,kBAAkB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wCACnD,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,kBAAkB,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,kBAAkB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;oCACrF,CAAC;gCACH,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC;oCAC1C,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC;gCACnB,CAAC;gCACD,EAAE,CAAC,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC,CAAC;oCACjC,KAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,QAAQ,CAAC,mBAAmB,CAAC;gCAClE,CAAC;gCACD,EAAE,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;oCACvB,KAAI,CAAC,OAAO,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;gCAC9C,CAAC;4BACH,CAAC;4BACD,QAAQ,CAAC,WAAW,EAAE,CAAC;wBACzB,CAAC,CAAC,CAAC;;;;;KACJ;IACD,iDAAkB,GAAlB;QACE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;IACK,mDAAoB,GAA1B,UAA2B,QAAQ;;;;;4BAEvB,qBAAM,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,QAAQ,CAAC;;wBAAhE,OAAO,GAAG,SAAsD,CAAC;wBACjE,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;4BAC7C,MAAM,gBAAC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,EAAC;wBAClD,CAAC;wBACD,sBAAO,IAAI,EAAC;;;;KACb;IACD,iDAAkB,GAAlB;QAAA,iBAoBC;QAnBC,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC7F,IAAI,CAAC,cAAc,CAAC,IAAI,GAAG,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QACxF,IAAI,CAAC,cAAc,CAAC,IAAI,GAAG,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QACxF,IAAI,CAAC,cAAc,CAAC,mBAAmB,GAAG,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QACpG,IAAI,CAAC,cAAc,CAAC,cAAc,GAAG,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QACjG,IAAI,CAAC,cAAc,CAAC,gBAAgB,GAAG,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QACpG,IAAI,CAAC,cAAc,CAAC,KAAK,GAAG,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QACvF,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QACzF,IAAI,CAAC,cAAc,CAAC,mBAAmB,GAAG,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QAC7G,IAAM,IAAI,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,CAAC;QAC/C,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,UAAC,QAAa;YAC/E,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAClC,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YAC5C,CAAC;QACH,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,kCAAG,GAAH;QACE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACzB,CAAC;IAQD,uBAAuB;IAChB,uCAAQ,GAAf;QACE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;QAC5B,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC;IACjC,CAAC;IAGD,+CAAgB,GAAhB,UAAiB,IAAI;QAArB,iBAwBC;QAvBC,IAAI,aAAa,GAAG,iDAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;QACzE,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC;QAClC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACxB,IAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;QAE/C,EAAE,CAAC,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,aAAa,GAAG,aAAa,CAAC,GAAG,CAAC,UAAC,EAAE;gBACnC,IAAI,MAAM,GAAG,YAAY,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,EAAE,CAAC,IAAI,EAAjB,CAAiB,CAAC;gBACtD,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBACX,EAAE,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;gBAC1B,CAAC;gBACD,MAAM,CAAC,EAAE,CAAC;YACZ,CAAC,CAAC,CAAC;QACL,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,aAAa,CAAC;QAC1C,EAAE,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,aAAa,CAAC;QAC7D,CAAC;QACD,aAAa,CAAC,OAAO,CAAC,eAAK;YACzB,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;QAC/C,CAAC,CAAC,CAAC;IACL,CAAC;IACD,mDAAoB,GAApB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;YAC7B,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAva8B;QAA9B,kEAAY,CAAC,kEAAe,CAAC;;4DAAiB;IACf;QAA/B,+DAAS,CAAC,yGAAmB,CAAC;;4DAAW;IAiBjC;QAAR,2DAAK,EAAE;;yDAAc;IACb;QAAR,2DAAK,EAAE;;gEAAiC;IAChC;QAAR,2DAAK,EAAE;;+DAAoB;IACnB;QAAR,2DAAK,EAAE;;4DAAiB;IACD;QAAvB,4DAAM,CAAC,cAAc,CAAC;;2DAAqC;IAC5B;QAA/B,4DAAM,CAAC,sBAAsB,CAAC;;sEAAgD;IACtE;QAAR,2DAAK,EAAE;;2DAAgB;IA9Bb,oBAAoB;QALhC,+DAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;;;SAG9B,CAAC;yCAiCuB,uDAAW;YACd,oEAAgB;YACnB,8DAAc;YACT,+DAAU;YACJ,0EAAgB;YACrB,mEAAY;YACX,kEAAc;YACf,sFAAW;OAvCvB,oBAAoB,CA8ahC;IAAD,2BAAC;CAAA;AA9agC;;;;;;;;;;;;AC1BjC,gLAAgL,4CAA4C,wJAAwJ,sGAAsG,kMAAkM,4CAA4C,yCAAyC,wcAAwc,+DAA+D,KAAK,yCAAyC,4dAA4d,uCAAuC,iIAAiI,+BAA+B,8JAA8J,iBAAiB,sSAAsS,mCAAmC,yCAAyC,+NAA+N,YAAY,oBAAoB,KAAK,mCAAmC,uBAAuB,iEAAiE,6CAA6C,KAAK,8DAA8D,sGAAsG,uDAAuD,qHAAqH,6CAA6C,+JAA+J,oCAAoC,22CAA22C,8CAA8C,0OAA0O,qCAAqC,uWAAuW,yCAAyC,0PAA0P,0CAA0C,mMAAmM,sCAAsC,GAAG,qCAAqC,kOAAkO,yCAAyC,gQAAgQ,sCAAsC,gQAAgQ,yCAAyC,2MAA2M,wCAAwC,wIAAwI,0CAA0C,GAAG,qCAAqC,gQAAgQ,mCAAmC,oRAAoR,qCAAqC,gPAAgP,uCAAuC,8IAA8I,qCAAqC,8OAA8O,+CAA+C,qWAAqW,yCAAyC,uDAAuD,2BAA2B,2PAA2P,wCAAwC,kOAAkO,sBAAsB,eAAe,wCAAwC,8VAA8V,wCAAwC,qOAAqO,sCAAsC,4OAA4O,wCAAwC,qQAAqQ,+CAA+C,+PAA+P,qCAAqC,yWAAyW,oCAAoC,uDAAuD,6BAA6B,gQAAgQ,iCAAiC,qCAAqC,4BAA4B,sPAAsP,oCAAoC,uDAAuD,qCAAqC,gQAAgQ,2CAA2C,uDAAuD,oCAAoC,6RAA6R,kCAAkC,uDAAuD,+BAA+B,uOAAuO,sBAAsB,gCAAgC,+BAA+B,sVAAsV,sCAAsC,uDAAuD,8BAA8B,sQAAsQ,4CAA4C,uDAAuD,8BAA8B,isBAAisB,kCAAkC,YAAY,KAAK,mDAAmD,gCAAgC,qDAAqD,0DAA0D,sDAAsD,wDAAwD,kDAAkD,iJAAiJ,oBAAoB,2CAA2C,4BAA4B,uDAAuD,kDAAkD,sBAAsB,qBAAqB,gCAAgC,4DAA4D,6CAA6C,sBAAsB,mBAAmB,gCAAgC,yDAAyD,gDAAgD,sBAAsB,uBAAuB,4QAA4Q,8CAA8C,2KAA2K,2CAA2C,wJAAwJ,uCAAuC,8ZAA8Z,4CAA4C,6RAA6R,gCAAgC,sOAAsO,uRAAuR,4BAA4B,gKAAgK,qDAAqD,6HAA6H,yCAAyC,qGAAqG,sCAAsC,8E;;;;;;;;;;;ACA5nlB,kDAAkD,gBAAgB,qBAAqB,iBAAiB,YAAY,gBAAgB,yCAAyC,qBAAqB,sBAAsB,8BAA8B,WAAW,qBAAqB,SAAS,4CAA4C,WAAW,kBAAkB,iBAAiB,eAAe,4CAA4C,qBAAqB,gBAAgB,iDAAiD,qBAAqB,wDAAwD,oCAAoC,8DAA8D,sBAAsB,cAAc,SAAS,kBAAkB,0BAA0B,yBAAyB,qBAAqB,WAAW,qBAAqB,qBAAqB,kBAAkB,kBAAkB,kBAAkB,gBAAgB,YAAY,kBAAkB,sBAAsB,gBAAgB,iBAAiB,qBAAqB,UAAU,WAAW,qBAAqB,gBAAgB,kBAAkB,UAAU,aAAa,gBAAgB,eAAe,iBAAiB,kBAAkB,UAAU,mBAAmB,kBAAkB,wBAAwB,QAAQ,mBAAmB,kBAAkB,qBAAqB,6BAA6B,aAAa,qBAAqB,gBAAgB,gCAAgC,YAAY,2CAA2C,4BAA4B,8FAA8F,WAAW,0BAA0B,4GAA4G,yBAAyB,4FAA4F,kBAAkB,sEAAsE,oBAAoB,wBAAwB,cAAc,wBAAwB,eAAe,WAAW,YAAY,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACArgE;AAEuE;AAEtF;AACiB;AACP;AACN;AAEgC;AAChB;AACJ;AACxC;AACW;AACP;AAC6C;AAEzB;AACA;AACC;AAEX;AAGf;AACsD;AACd;AACI;AACb;AAClB;AACQ;AAC2B;AACX;AAOjE;IA6EE,mCACU,KAAqB,EACtB,gBAA4B,EAC3B,YAA4B,EAC5B,UAAsB,EACtB,aAA4B,EAC5B,WAAwB,EACxB,kBAAoC,EACrC,gBAA4B,EAC3B,SAAmB,EACnB,WAAwB,EACxB,eAAgC,EAChC,MAAc,EACd,cAA8B;QAZ9B,UAAK,GAAL,KAAK,CAAgB;QACtB,qBAAgB,GAAhB,gBAAgB,CAAY;QAC3B,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,eAAU,GAAV,UAAU,CAAY;QACtB,kBAAa,GAAb,aAAa,CAAe;QAC5B,gBAAW,GAAX,WAAW,CAAa;QACxB,uBAAkB,GAAlB,kBAAkB,CAAkB;QACrC,qBAAgB,GAAhB,gBAAgB,CAAY;QAC3B,cAAS,GAAT,SAAS,CAAU;QACnB,gBAAW,GAAX,WAAW,CAAa;QACxB,oBAAe,GAAf,eAAe,CAAiB;QAChC,WAAM,GAAN,MAAM,CAAQ;QACd,mBAAc,GAAd,cAAc,CAAgB;QAnFxC,aAAQ,GAAG,EAAE,CAAC;QAGd,kBAAa,GAAG,IAAI,CAAC;QACrB,WAAM,GAAQ,EAAE,CAAC;QACjB,sBAAiB,GAAY,KAAK,CAAC;QAEnC,cAAS,GAAQ,EAAE,CAAC;QACpB,YAAO,GAAG,IAAI,kFAAS,CAAC,CAAC,CAAC,CAAC;QAC3B,iBAAY,GAAG,CAAC,oBAAoB,EAAE,WAAW,EAAE,eAAe,EAAE,eAAe,EAAE,eAAe,EAAE,gBAAgB,EAAE,eAAe,EAAE,YAAY,EAAE,eAAe,EAAE,cAAc,EAAE,aAAa,EAAE,qBAAqB,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;QAGzP,iBAAY,GAAG,EAAE,CAAC;QAClB,mBAAc,GAAG,EAAE,CAAC;QACpB,2BAAsB,GAAG,IAAI,CAAC,WAAW,CAAC,sBAAsB,EAAE,CAAC;QACnE,WAAM,GAAG,UAAU,CAAC;QAEpB,eAAU,GAAQ,EAAE,CAAC;QACrB,kBAAa,GAAG,EAAE,CAAC;QAEnB,eAAU,GAAG,CAAC,CAAC;QACf,mBAAc,GAAY,KAAK,CAAC,CAAC,qCAAqC;QAGtE,iBAAY,GAAG,CAAC,CAAC;QACjB,sBAAiB,GAAG,CAAC,CAAC;QACtB,0BAAqB,GAAG,CAAC,CAAC;QAC1B,iBAAY,GAAG,CAAC,CAAC;QACjB,kBAAa,GAAW,CAAC,CAAC;QAC1B,oBAAe,GAAG,KAAK,CAAC;QACxB,eAAU,GAAG,KAAK,CAAC;QAGnB,gBAAW,GAAG,KAAK,CAAC;QAGpB,mBAAc,GAAG,sDAAO,CAAC,QAAQ,CAAC;QAClC,iBAAY,GAAG,sDAAO,CAAC,KAAK,CAAC;QAC7B,iBAAY,GAAG,sDAAO,CAAC,KAAK,CAAC;QAC7B,oBAAe,GAAG,sDAAO,CAAC,QAAQ,CAAC;QACnC,uBAAkB,GAAQ,sDAAO,CAAC,kBAAkB,CAAC;QACrD,uBAAkB,GAAG,IAAI,CAAC;QAC1B,oBAAe,GAAG,KAAK,CAAC;QACxB,iBAAY,GAAG,EAAE,CAAC;QAClB,4BAAuB,GAAY,KAAK,CAAC;QAEzC,eAAU,GAAG,EAAE,CAAC;QAChB,YAAO,GAAQ,EAAE,CAAC;QAClB,gBAAW,GAAQ,EAAE,CAAC;QAGtB,wBAAmB,GAAG,KAAK,CAAC;QAC5B,uBAAkB,GAAG,KAAK,CAAC;QAC3B,eAAU,GAAG,IAAI,CAAC;QAOlB,WAAM,GAAY,KAAK,CAAC;QAGxB,iBAAY,GAAG,KAAK,CAAC;QACrB,eAAU,GAAY,KAAK,CAAC;QAG5B,mBAAc,GAAY,IAAI,CAAC;QA8W/B,WAAM,GAAG,UAAC,KAAK;YACb,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;YACtC,MAAM,CAAC,cAAc,GAAG,OAAO,GAAG,GAAG,CAAC;QACxC,CAAC;QAkhED,wBAAmB,GAAG;YACpB,iBAAiB,EAAE,IAAI;YACvB,eAAe,EAAE,IAAI;YACrB,oBAAoB,EAAE,UAAU,IAAI;gBAAd,iBAmBrB;gBAlBC,EAAE;gBACF,EAAE;gBACF,IAAI,OAAO,GAAQ,EAAE,CAAC;gBACtB,OAAO,CAAC,IAAI,GAAG,0DAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC1D,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,EAAvB,CAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChF,EAAE,CAAC,CAAC,UAAU,CAAC;oBACb,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,GAAG,kDAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3D,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;gBACzB,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gBAExC,UAAU,CAAC;oBACT,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,WAAW,EAAE,QAAQ,EAAE;wBACzD,UAAU,EAAE,KAAI,CAAC,MAAM,CAAC,UAAU;wBAClC,WAAW,EAAE,MAAM;wBACnB,SAAS,EAAE,MAAM;qBAClB,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;gBACH,MAAM,CAAC,OAAO,CAAC;YACjB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;SACb;QAv4EC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;IAEpD,CAAC;IAED,4CAAQ,GAAR;QAAA,iBAoFC;QAnFC,eAAe;QACf,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,gBAAgB,GAAG,IAAI,mEAAU,CAAC;YACrC,GAAG,EAAE,SAAS;YACd,IAAI,EAAE,EAAE;SACT,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,GAAG,IAAI,mEAAU,CAAC;YAC/B,KAAK,EAAE,IAAI,CAAC,gBAAgB;SAC7B,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC7C,IAAI,CAAC,SAAS,GAAG,gEAAoB,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QAC9F,IAAI,CAAC,UAAU,GAAG,kDAAM,CAAC,yBAAyB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACpE,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,WAAW,CAAC,CAAC,CAAC;gBAC1C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACrB,CAAC;QACH,CAAC;QACD,IAAI,CAAC,aAAa,GAAG,4FAAiB,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACvE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;QAC5F,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC;QAChG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;QACtF,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC;QAE9F,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,oCAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAC7I,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;YAC3D,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;gBAC7B,EAAE,EAAC,IAAI,CAAC,KAAK,KAAK,KAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACnC,KAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YAEjD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC;gBACxC,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;YAC3B,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,IAAI,KAAI,CAAC,WAAW,EAA3B,CAA2B,CAAC,CAAC;YAC3E,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxB,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;YAC/C,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,QAAQ,CAAC,CAAC,CAAC;gBACnD,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;YACtC,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBACpD,IAAM,YAAY,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,cAAI,IAAI,eAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAA9B,CAA8B,CAAC,CAAC;gBAC3F,EAAE,CAAC,CAAC,YAAY,CAAC;oBACf,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;YACxC,CAAC;YACD,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAClC,CAAC;QACD,IAAI,CACJ,CAAC;YACC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACnB,CAAC;QACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;QACrD,IAAI,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACnE,IAAI,IAAI,GAAG,eAAe,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,IAAI,WAAW,EAAhB,CAAgB,CAAC,CAAC;QACzD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAChC,CAAC;QAAC,IAAI;YACJ,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YAC3C,UAAU,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;gBAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;oBACxC,IAAM,IAAI,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,EAAzB,CAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC9E,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;wBACV,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;4BACzD,IAAI,CAAC,SAAS,GAAG,0DAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;wBACnE,IAAI,UAAU,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,EAAzB,CAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;wBAClF,EAAE,CAAC,CAAC,UAAU,CAAC;4BACb,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,GAAG,kDAAM,CAAC,iBAAiB,EAAE,CAAC;wBAC/D,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;oBAC9E,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;4BAC3D,IAAI,UAAU,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,EAAzB,CAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;4BAClF,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC;gCACd,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;wBAChF,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IACD,mDAAe,GAAf;QAAA,iBAWC;QAVC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,cAAI;gBACvB,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACnC,CAAC,CAAC,CAAC;QACL,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;YACpE,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC;QAAA,IAAI,CAAC,CAAC;YACL,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;QACtD,CAAC;IACH,CAAC;IACD,oDAAgB,GAAhB;QAAA,iBA+BC;QA9BC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,CAAC,SAAS,CAAC,iBAAO;YACvE,IAAI,IAAI,GAAQ,OAAO,CAAC;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,UAAU,CAAC,CAAC,CAAC;oBAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,YAAY,CAAC,CAAC,CAAC;wBACnC,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBACtC,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,eAAe,CAAC,CAAC,CAAC;wBAC9C,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBAC3C,CAAC;oBACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,gCAAgC,CAAC,CAAC,CAAC;wBAC5D,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;wBAChD,KAAI,CAAC,cAAc,EAAE,CAAC;oBACxB,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;4BACrC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gCACrC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;4BACxC,CAAC;wBACH,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,UAAU,EAAE,CAAC;wBAClB,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,IAAI,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;4BACzD,KAAI,CAAC,cAAc,EAAE,CAAC;wBACxB,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;YAC5C,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,4DAAwB,GAAxB;QAAA,iBAkBC;QAjBC,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,iBAAO;YACtC,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,UAAC,KAAK,EAAE,KAAK;gBAC9D,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;YACnC,CAAC,CAAC,CAAC;YAEH,IAAI,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,kDAAM,CAAC,kBAAkB,CAAC,KAAI,CAAC,mBAAmB,CAAC,CAAC;YACvI,IAAM,YAAY,GAAG,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;YACjD,EAAE,EAAC,OAAO,CAAC,aAAa,IAAI,OAAO,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC7D,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACtD,IAAI,OAAO,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;oBACvC,KAAI,CAAC,aAAa,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,kBAAkB,EAAE,YAAY,CAAC,CAAC;gBAC5E,CAAC;YACH,CAAC;YAAA,IAAI,EAAC;gBACJ,KAAI,CAAC,aAAa,CAAC,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,kBAAkB,EAAE,YAAY,CAAC,CAAC;YACvE,CAAC;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,iDAAa,GAAb,UAAc,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,kBAAkB,EAAE,YAAY;QACjE,IAAI,UAAU,GAAG,IAAI,MAAM,CAAC;QAC5B,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;QACvC,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;QAC3C,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;QACvC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACX,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;YAChC,UAAU,CAAC,YAAY,CAAC,GAAG,SAAS,CAAC;YACrC,UAAU,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,EAAE,CAAC;YAC9B,UAAU,CAAC,oBAAoB,CAAC,GAAG,kBAAkB,CAAC;YACtD,UAAU,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;YACpD,UAAU,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;YACpD,UAAU,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC;YACtD,UAAU,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;YACpD,UAAU,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC;YACtC,UAAU,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC;YAC9C,UAAU,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;YACpD,UAAU,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC;YACtD,UAAU,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;YAClD,UAAU,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;YACpD,WAAW;YACX,UAAU,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC;YAChD,UAAU,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC;YAChE,UAAU,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC;YAChE,UAAU,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;YAClD,UAAU,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC;YAClC,UAAU,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC;YAChD,UAAU,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC;YAC5C,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC,UAAU,CAAC;YACrD,UAAU,GAAG,6CAAO,CAAC,UAAU,EAAE,YAAY,CAAC,OAAO,CAAC,CAAC;QACzD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,UAAU,CAAC,oBAAoB,CAAC,GAAG,EAAE,CAAC;YACtC,UAAU,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;YACjC,UAAU,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;YACjC,UAAU,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;YACnC,UAAU,CAAC,gBAAgB,CAAC,GAAG,EAAE,CAAC;YAClC,UAAU,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;YACjC,UAAU,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC;YAC9B,UAAU,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;YACjC,UAAU,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;YAChC,UAAU,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;YAC/B,UAAU,CAAC,qBAAqB,CAAC,GAAG,EAAE,CAAC;YACvC,UAAU,CAAC,qBAAqB,CAAC,GAAG,EAAE,CAAC;YACvC,UAAU,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;YAChC,UAAU,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;YACxB,UAAU,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;YACpC,UAAU,CAAC,yBAAyB,CAAC,GAAG,kBAAkB,CAAC;YAC3D,UAAU,GAAG,6CAAO,CAAC,UAAU,EAAE,iDAAW,CAAC,YAAY,CAAC,OAAO,EAAE,cAAM,SAAE,EAAF,CAAE,CAAC,CAAC,CAAC;QAChF,CAAC;QACD,UAAU,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,KAAK,CAAC;QACtG,UAAU,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,gBAAe;QAC1F,UAAU,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,iBAAgB;QACjG,UAAU,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC;QAChF,UAAU,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC;QAChF,UAAU,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC;QACvE,UAAU,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC;QACvE,UAAU,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC;QACpE,UAAU,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC;QACpE,UAAU,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC;QACzF,UAAU,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;QAC3D,UAAU,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;QAC9D,UAAU,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC;QACrD,UAAU,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC;QAC1E,UAAU,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC;QAC5F,UAAU,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;QAC3D,UAAU,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC;QAE1E,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;IAC3C,CAAC;IAED,iDAAa,GAAb,UAAc,IAAI;QAChB,IAAI,OAAO,GAAG,EAAE,CAAC;QACjB,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;QAE9D,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,cAAI;YAC3B,IAAI,IAAI,gBAAO,IAAI,CAAC;YACpB,IAAM,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAnB,CAAmB,CAAC,CAAC;YACzD,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;YACxB,EAAE,EAAC,MAAM,CAAC,EAAC;gBACT,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;gBAC1B,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,KAAK;YACnC,CAAC;YACD,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxB,CAAC,CAAC;QACF,MAAM,CAAC;YACL,OAAO;YACP,UAAU;SACX;IACH,CAAC;IACD,2CAAO,GAAP,UAAQ,QAAQ;QAAhB,iBAKC;QAJC,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACnD,OAAO,CAAC,OAAO,CAAC,iBAAO;YACrB,KAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,qDAAiB,GAAjB;QACE,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,KAAK,EAAE,CAAC;QAChD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC1B,CAAC;IAED,+CAAW,GAAX,UAAY,GAAG;QACb,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;IACpC,CAAC;IAED,uCAAG,GAAH,UAAI,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAE9B,iDAAa,GAAb,UAAc,CAAC;QAAf,iBA2BC;QA1BC,IAAI,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QACzC,IAAI,cAAc,GAAe,EAAE,CAAC;QACpC,IAAI,UAAU,GAAG,IAAI,UAAU,EAAE,CAAC;QAClC,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC7B,IAAI,QAAQ,GAAG,2CAA2C,CAAC;QAC3D,oBAAoB;QACpB,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC7B,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC/B,UAAU,CAAC,MAAM,GAAG,UAAC,CAAC;gBACpB,IAAI,YAAY,GAAG,UAAU,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC9D,cAAc,CAAC,OAAO,CAAC;oBACrB,IAAI,EAAE,IAAI;oBACV,SAAS,EAAE,IAAI,CAAC,IAAI;oBACpB,YAAY,EAAE,YAAY;iBAC3B,CAAC,CAAC;gBACH,EAAE,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;oBACzC,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC;gBACrD,CAAC;gBACD,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;oBAC3C,UAAU,CAAC,QAAQ,CAAC,CAAC,aAAa,CAAC,GAAG,cAAc,CAAC;oBACrD,UAAU,CAAC,QAAQ,CAAC,CAAC,kBAAkB,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;gBACvD,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,mDAAO,CAAC,MAAM,CAAC,mEAAmE,EAAE,OAAO,CAAC,CAAC;QAC/F,CAAC;IACH,CAAC;IAED,iDAAa,GAAb,UAAc,CAAC;QACb,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACb,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;QACd,CAAC;QACD,IAAI,SAAS,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QAC/C,IAAI,UAAU,GAAG,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,UAAU,CAAC;IACpB,CAAC;IAED,iDAAa,GAAb,UAAc,GAAG;QACf,IAAI,CAAC,MAAM,GAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACzC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAC1C,6CAA6C;QAC7C,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACnC,mDAAO,CAAC,MAAM,CAAC,2BAA2B,EAAE,OAAO,CAAC,CAAC;YACrD,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;QAC/C,CAAC;QAAA,CAAC;QACF,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;IAC7B,CAAC;IAED,0CAAM,GAAN;QACE,IAAI,GAAG,EAAE,KAAK,CAAC;QACf,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YAC3C,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC3B,GAAG,GAAG,UAAU,CAAC,MAAM,CAAC;gBACxB,KAAK,GAAG,UAAU,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;YACxC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAK,GAAG,CAAC,CAAC;YACZ,CAAC;QACH,CAAC,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QACnD,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IACnC,CAAC;IAED,+CAAW,GAAX;QACE,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,IAAI,GAAG;YACT,OAAO,EAAE;gBACP,YAAY,EAAE,iDAAK,CAAC,UAAU,CAAC,MAAM;gBACrC,OAAO,EAAE,EAAE;gBACX,WAAW,EAAE,IAAI,CAAC,WAAW;aAC9B;SACF;QACD,IAAI,CAAC,WAAW,CAAC,0BAA0B,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;YACnE,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC5B,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;gBAC5B,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;gBAC9D,mDAAO,CAAC,MAAM,CAAC,4BAA4B,EAAE,SAAS,CAAC,CAAC;YAC1D,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACvC,CAAC;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,CAAC;IACJ,CAAC;IAOD,kDAAc,GAAd,UAAe,CAAC;QACd,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,GAAG,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK,CAAC,CAAC,CAAC;YAC1D,CAAC,GAAG,OAAO,CAAC,qEAAqE,CAAC,CAAC;QACrF,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YACnC,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YACnC,CAAC;YACD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAClC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;QAClB,CAAC;IACH,CAAC;IAED,mDAAe,GAAf,UAAgB,CAAC;QACf,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IACzB,CAAC;IAED,mDAAe,GAAf;QAAA,iBAUC;QATC,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YAC3C,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC1B,UAAU,CAAC,OAAO,CAAC,aAAG;oBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,kBAAkB,IAAI,GAAG,CAAC,uBAAuB,CAAC,CAAC,CAAC;wBAC1D,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;oBAC9B,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,+CAAW,GAAX;QACE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;IACjC,CAAC;IAED,2CAAO,GAAP,UAAQ,CAAC;QACP,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,4CAAQ,GAAR,UAAS,CAAC;QACR,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,4CAAQ,GAAR;QAAA,iBAgDC;QA/CC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAM,MAAM,GAAe,IAAI,UAAU,EAAE,CAAC;QAE5C,MAAM,CAAC,MAAM,GAAG,UAAC,CAAM;YACrB,mBAAmB;YACnB,IAAM,IAAI,GAAW,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;YACrC,IAAM,EAAE,GAAkB,yCAAS,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;YAE9D,sBAAsB;YACtB,IAAM,MAAM,GAAW,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACxC,IAAM,EAAE,GAAmB,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAE7C,eAAe;YACf,IAAI,IAAI,GAAQ,CAAC,0CAAU,CAAC,aAAa,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE1E,IAAI,UAAU,GAAQ,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;YAC9D,UAAU,CAAC,KAAK,GAAG,EAAE,CAAC;YACtB,IAAI,QAAQ,GAAQ,EAAE,CAAC;YACvB,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,EAAH,CAAG,CAAC,CAAC;gBACrC,IAAI,MAAM,GAAG,WAAW,CAAC,OAAO,CAAC,oBAAoB,CAAC;gBAEtD,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjB,mDAAO,CAAC,MAAM,CAAC,8EAA8E,EAAE,OAAO,CAAC,CAAC;oBACxG,MAAM,CAAC,KAAK,CAAC;gBACf,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBACf,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;oBACzB,CAAC;oBACD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBACrC,IAAI,IAAI,GAAQ,EAAE;wBAClB,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gCAChC,IAAM,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;gCAC3B,IAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gCAC3B,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC;4BACvB,CAAC;wBACH,CAAC;wBACD,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACtB,CAAC;gBACH,CAAC;gBACD,KAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;gBAC9B,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC;YACpC,CAAC;QACH,CAAC,CAAC;QACF,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAClD,CAAC;IAED,4CAAQ,GAAR,UAAS,QAAQ;QAAjB,iBAoQC;QAnQC,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,IAAI,gBAAgB,GAAG,EAAE,CAAC;QAC1B,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACrB,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBAC3C,UAAU,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;oBAC7B,KAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC7C,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;QACD,QAAQ,CAAC,OAAO,CAAC,iBAAO;YACtB,IAAI,OAAO,GAAG,IAAI,MAAM,CAAC;YACzB,EAAE,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBAC/B,OAAO,CAAC,YAAY,CAAC,GAAG,SAAS;gBACjC,IAAI,SAAS,GAAG,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;gBACtD,EAAE,CAAC,CAAC,SAAS,IAAI,OAAO,CAAC,CAAC,CAAC;oBACzB,mDAAO,CAAC,MAAM,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;oBAC7D,OAAO,GAAG,KAAK,CAAC;oBAChB,MAAM,CAAC;gBACT,CAAC;gBACD,IAAI,CACF,EAAE,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC;oBAClB,OAAO,CAAC,WAAW,CAAC,GAAG,SAAS,CAAC;gBACrC,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC9E,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC;gBACjF,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC;gBAChF,OAAO,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC;gBACjF,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC9E,OAAO,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;gBACrE,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC9E,OAAO,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC3E,OAAO,CAAC,SAAS,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC5D,OAAO,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC;gBACxE,OAAO,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,KAAI,CAAC,0BAA0B,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBACjI,OAAO,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAAE,CAAC;gBAChG,OAAO,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC3E,OAAO,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;gBACnD,OAAO,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC3E,OAAO,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC3E,OAAO,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,GAAG,IAAI,OAAO,CAAC,UAAU,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,gBAAe;gBACrI,OAAO,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,IAAI,CAAC,OAAO,CAAC,YAAY,IAAI,GAAG,IAAI,OAAO,CAAC,YAAY,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,iBAAgB;gBAC9I,OAAO,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,IAAI,CAAC,OAAO,CAAC,mBAAmB,IAAI,GAAG,IAAI,OAAO,CAAC,mBAAmB,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;gBAC1J,wBAAwB;gBACxB,IAAI,WAAW,GAAG,iDAAW,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;gBAChD,WAAW,CAAC,OAAO,CAAC,mBAAS;oBAC3B,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,OAAO,CAAC,CAAC,CAAC;wBACxB,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;4BAC3B,EAAE,CAAC,CAAC,SAAS,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;gCACnC,IAAI,IAAI,GAAG,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;gCAC5C,EAAE,CAAC,CAAC,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC;oCACpB,mDAAO,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,GAAG,uBAAuB,EAAE,OAAO,CAAC,CAAC;oCAClE,OAAO,GAAG,KAAK,CAAC;oCAChB,MAAM,CAAC;gCACT,CAAC;gCACD,IAAI,CACF,EAAE,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC;oCACb,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;4BAC7B,CAAC;4BACD,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;gCAC3C,SAAS,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;4BACxE,CAAC;4BACD,IAAI;gCACF,SAAS,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;wBACnC,CAAC;oBACH,CAAC;gBACH,CAAC,CAAC,CAAC;gBACH,OAAO,CAAC,cAAc,CAAC,GAAG,WAAW,CAAC;gBACtC,wBAAwB;gBACxB,EAAE,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,OAAO,CAAC,cAAc,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAClE,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,mBAAS;wBACvC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC;oBAC5C,CAAC,CAAC,CAAC;gBACL,CAAC;gBAID,EAAE,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;oBAClC,IAAI,IAAI,GAAG,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,OAAO,CAAC,cAAc,CAAC,EAAjC,CAAiC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAClF,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;wBACV,IAAI,QAAQ,GAAG;4BACb,IAAI,EAAE,OAAO,CAAC,cAAc,CAAC;4BAC7B,IAAI,EAAE,OAAO,CAAC,cAAc,CAAC;4BAC7B,KAAK,EAAE,OAAO,CAAC,cAAc,CAAC,GAAG,IAAI,GAAG,OAAO,CAAC,cAAc,CAAC;yBAChE;wBACD,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBACtC,CAAC;gBACH,CAAC;gBACD,OAAO,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,KAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC9F,OAAO,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;gBAClE,OAAO,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAClF,OAAO,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACzE,OAAO,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAClF,OAAO,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACvG,OAAO,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC5G,EAAE,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAClB,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;oBACjE,OAAO,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC;oBACjE,OAAO,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC9H,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;oBACtB,OAAO,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC;oBAC3B,OAAO,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;gBAC/B,CAAC;gBACD,OAAO,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,IAAI,OAAO,CAAC,gBAAgB,CAAC,IAAI,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACpJ,OAAO,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;gBACnD,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;oBAChB,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;wBACrB,IAAI,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACtC,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;4BACpB,KAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBACpF,CAAC;wBAAC,IAAI;4BACJ,KAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;oBAC1E,CAAC;oBACD,wBAAwB;oBACxB,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;wBACrB,IAAI,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACtC,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;4BACpB,KAAI,CAAC,SAAS,CAAC,gBAAgB,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBAC5F,CAAC;wBAAC,IAAI;4BACJ,KAAI,CAAC,SAAS,CAAC,gBAAgB,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;oBAElF,CAAC;oBACD,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;wBAClB,IAAI,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACnC,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;4BACpB,KAAI,CAAC,SAAS,CAAC,OAAO,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBACnF,CAAC;wBAAC,IAAI;4BACJ,KAAI,CAAC,SAAS,CAAC,OAAO,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;oBACzE,CAAC;oBAED,EAAE,CAAC,CAAC,OAAO,CAAC,qBAAqB,IAAI,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;wBAC3D,IAAI,GAAG,GAAG,EAAE,CAAC;wBACb,EAAE,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC;4BAChC,GAAG,GAAG,OAAO,CAAC,qBAAqB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACjD,IAAI;4BACF,GAAG,GAAG,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACzC,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;4BACpB,KAAI,CAAC,SAAS,CAAC,MAAM,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBAClF,CAAC;wBAAC,IAAI;4BACJ,KAAI,CAAC,SAAS,CAAC,MAAM,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;oBACxE,CAAC;oBAED,EAAE,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;wBAC5B,IAAI,GAAG,GAAG,OAAO,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBAC7C,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;4BACpB,KAAI,CAAC,SAAS,CAAC,eAAe,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBAC3F,CAAC;wBAAC,IAAI;4BACJ,KAAI,CAAC,SAAS,CAAC,eAAe,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;oBACjF,CAAC;oBAED,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;wBACnB,IAAI,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACpC,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;4BACpB,KAAI,CAAC,SAAS,CAAC,UAAU,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBACtF,CAAC;wBAAC,IAAI;4BACJ,KAAI,CAAC,SAAS,CAAC,UAAU,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;oBAC5E,CAAC;oBACD,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;wBACvB,IAAI,GAAG,GAAG,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACxC,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;4BACpB,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBACrF,CAAC;wBAAC,IAAI;4BACJ,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;oBAC3E,CAAC;oBACD,EAAE,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;wBAC7B,IAAI,GAAG,GAAG,OAAO,CAAC,gBAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBAC9C,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;4BACpB,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBACrF,CAAC;wBAAC,IAAI;4BACJ,KAAI,CAAC,SAAS,CAAC,SAAS,GAAG,gEAAoB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;oBAC3E,CAAC;gBACH,CAAC;gBACD,MAAM,EAAE,CAAC;gBACT,EAAE,CAAC,CAAC,KAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjE,IAAI,KAAG,GAAG,CAAC,CAAC;oBACZ,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;wBAC3C,IAAI,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,kBAAkB,IAAI,OAAO,CAAC,kBAAkB,IAAI,CAAC,CAAC,uBAAuB,IAAI,OAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC,UAAU,EAAnJ,CAAmJ,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC7L,EAAE,CAAC,CAAC,OAAO,CAAC;4BACV,KAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,kBAAkB,IAAI,OAAO,CAAC,kBAAkB,IAAI,CAAC,CAAC,uBAAuB,IAAI,OAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC,UAAU,EAAnJ,CAAmJ,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC/O,EAAE,KAAG,CAAC;oBACR,CAAC,CAAC,CAAC;oBACH,OAAO,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;oBACjC,OAAO,CAAC,oBAAoB,CAAC,GAAG,EAAE,CAAC;oBACnC,OAAO,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;oBAC7B,OAAO,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;oBAC9B,OAAO,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;oBAC9B,OAAO,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;oBAChC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,CAAC;oBAC/B,OAAO,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;oBAC9B,OAAO,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC;oBAC3B,OAAO,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC;oBAC9B,OAAO,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;oBAC7B,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;oBACxB,OAAO,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;oBAC5B,OAAO,CAAC,qBAAqB,CAAC,GAAG,EAAE,CAAC;oBACpC,OAAO,CAAC,qBAAqB,CAAC,GAAG,EAAE,CAAC;oBACpC,OAAO,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;oBAC7B,OAAO,CAAC,yBAAyB,CAAC,GAAG,OAAO,CAAC,kBAAkB,CAAC;oBAChE,OAAO,CAAC,OAAO,CAAC,GAAG,KAAG,CAAC;oBACvB,EAAE,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;wBACrD,OAAO,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC;oBAC7B,CAAC;oBAAC,IAAI;wBACJ,OAAO,CAAC,YAAY,CAAC,GAAG,KAAG,CAAC;gBAChC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,OAAO,CAAC,2BAA2B,CAAC,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,CAAC;oBACpG,OAAO,CAAC,oBAAoB,CAAC,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,CAAC;oBAC7F,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC;oBACrD,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBACrB,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;oBAC1B,OAAO,CAAC,mBAAmB,CAAC,GAAG,OAAO,CAAC,iBAAiB,IAAI,OAAO,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,kDAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;oBAExJ,EAAE,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,OAAO,CAAC,YAAY,CAAC,CAAC;wBACnD,OAAO,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC;gBAC/B,CAAC;gBACD,KAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YACxC,CAAC;QACH,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACZ,IAAI,WAAS,GAAG,EAAE,CAAC;YACnB,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBAC3C,IAAI,SAAS,GAAG,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,kBAAkB,EAApB,CAAoB,CAAC,CAAC;gBAC7D,EAAE,CAAC,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACtC,SAAS,CAAC,OAAO,CAAC,WAAC;wBACjB,IAAI,QAAQ,GAAG,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,uBAAuB,IAAI,CAAC,CAAC,kBAAkB,EAAjD,CAAiD,CAAC,CAAC;wBACzF,WAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBAClB,EAAE,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;4BACpC,QAAQ,CAAC,OAAO,CAAC,aAAG;gCAClB,WAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;4BACtB,CAAC,CAAC,CAAC;wBACL,CAAC;oBACH,CAAC,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,4BAA4B,GAAG,EAAE,CAAC;YACvC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,CAAC,CAAC;gBAC7D,IAAI,CAAC,UAAU,CAAC,+BAA+B,CAAC,gBAAgB,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;oBACnF,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;wBAC5B,KAAI,CAAC,4BAA4B,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;wBACtD,KAAI,CAAC,8BAA8B,CAAC,WAAS,CAAC,CAAC;wBAC/C,KAAI,CAAC,eAAe,EAAE,CAAC;wBACvB,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;oBACnC,CAAC;oBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACxB,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,8BAA8B,CAAC,WAAS,CAAC,CAAC;gBAC/C,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YACnC,CAAC;QACH,CAAC;QACD,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,mDAAO,CAAC,WAAW,EAAE,CAAC;IAExB,CAAC;IAED,4CAAQ,GAAR,UAAS,GAAG;QACV,EAAE,CAAC,CAAC,GAAG,IAAI,iBAAiB,IAAI,GAAG,IAAI,iBAAiB,CAAC,CAAC,CAAC;YACzD,MAAM,CAAC,CAAC,CAAC,CAAC;QACZ,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,mCAAmC,IAAI,GAAG,IAAI,mCAAmC,CAAC;YAChG,MAAM,CAAC,CAAC,CAAC,CAAC;QACZ,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,iBAAiB,IAAI,GAAG,IAAI,iBAAiB,CAAC;YAC5D,MAAM,CAAC,CAAC,CAAC,CAAC;QACZ,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,WAAW,CAAC;YAC1B,MAAM,CAAC,CAAC,CAAC;QACX,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,UAAU,CAAC;YACzB,MAAM,CAAC,GAAG,CAAC;QACb,IAAI,CAAC,CAAC;YACJ,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACvB,CAAC;IACH,CAAC;IACD,kEAA8B,GAA9B,UAA+B,IAAI;QACjC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;oCACX,CAAC;gBACR,IAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,eAAe,GAAG,OAAK,4BAA4B,CAAC,MAAM,CAAC,UAAC,IAAI;oBAClE,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,GAAG,CAAC,kBAAkB,CAAC;gBAC3D,CAAC,CAAC,CAAC;gBACH,IAAI,WAAW,GAAG,OAAK,YAAY,CAAC,MAAM,CAAC,UAAC,IAAI;oBAC9C,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,GAAG,CAAC,kBAAkB,CAAC;gBAC3D,CAAC,CAAC,CAAC;gBACH,EAAE,CAAC,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,0BAA0B,CAAC;gBAClD,CAAC;gBACD,EAAE,CAAC,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,kBAAkB,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,IAAI,0BAA0B,CAAC,CAAC,CAAC;oBAC7G,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,wBAAwB,CAAC;gBAChD,CAAC;YACH,CAAC;;YAdD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;wBAA3B,CAAC;aAcT;YACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,mEAAU,CAAC;gBACrC,GAAG,EAAE,SAAS;gBACd,IAAI,EAAE,IAAI;aACX,CAAC,CAAC;YACH,IAAI,CAAC,UAAU,GAAG,IAAI,mEAAU,CAAC;gBAC/B,KAAK,EAAE,IAAI,CAAC,gBAAgB;aAC7B,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;oCACG,CAAC;gBACR,IAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,eAAe,GAAG,OAAK,4BAA4B,CAAC,MAAM,CAAC,UAAC,IAAI;oBAClE,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,GAAG,CAAC,kBAAkB,CAAC;gBAC3D,CAAC,CAAC,CAAC;gBACH,EAAE,CAAC,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,0BAA0B,CAAC;gBAClD,CAAC;YACH,CAAC;;YARD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;wBAA3B,CAAC;aAQT;YACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,mEAAU,CAAC;gBACrC,GAAG,EAAE,SAAS;gBACd,IAAI,EAAE,IAAI;aACX,CAAC,CAAC;YACH,IAAI,CAAC,UAAU,GAAG,IAAI,mEAAU,CAAC;gBAC/B,KAAK,EAAE,IAAI,CAAC,gBAAgB;aAC7B,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;IACzB,CAAC;IAED,yDAAqB,GAArB,UAAsB,gBAAgB;QACpC,IAAI,qBAAqB,CAAC;QAC1B,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YAC3C,qBAAqB,GAAG,UAAU,CAAC,SAAS,CAAC,UAAC,IAAI;gBAChD,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,gBAAgB,CAAC;YACrD,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,qBAAqB,CAAC;IAC/B,CAAC;IAED,mDAAe,GAAf;QAAA,iBAkBC;QAjBC,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YAC3C,IAAI,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,UAAC,IAAI;gBACnC,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC,UAAU,IAAI,SAAS,CAAC;YACjE,CAAC,CAAC,CAAC;YACH,IAAI,sBAAsB,GAAG,UAAU,CAAC,MAAM,CAAC,UAAC,IAAI;gBAClD,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC,UAAU,IAAI,0BAA0B,CAAC;YAClF,CAAC,CAAC,CAAC;YACH,IAAI,oBAAoB,GAAG,UAAU,CAAC,MAAM,CAAC,UAAC,IAAI;gBAChD,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC,UAAU,IAAI,wBAAwB,CAAC;YAChF,CAAC,CAAC,CAAC;YACH,IAAI,SAAS,GAAG,UAAU,CAAC,MAAM,CAAC,UAAC,IAAI;gBACrC,MAAM,CAAC,IAAI,CAAC,UAAU,IAAI,YAAY,CAAC;YACzC,CAAC,CAAC,CAAC;YACH,KAAI,CAAC,mBAAmB,GAAG,OAAO,CAAC,MAAM,CAAC;YAC1C,KAAI,CAAC,qBAAqB,GAAG,sBAAsB,CAAC,MAAM,CAAC;YAC3D,KAAI,CAAC,iBAAiB,GAAG,oBAAoB,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;QAC1E,CAAC,CAAC,CAAC;IACL,CAAC;IAED,uDAAmB,GAAnB,UAAoB,MAAM;QACxB,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;YAChB,MAAM,CAAC,OAAO,CAAC;QACjB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACvC,CAAC;IACH,CAAC;IAED,0DAAsB,GAAtB,UAAuB,CAAC;QAAxB,iBAyCC;QAxCC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACV,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC;gBAC7B,CAAC,CAAC,KAAK,GAAG,CAAC;wBACT,IAAI,EAAE,iBAAiB;wBACvB,WAAW,EAAE;4BACX,KAAI,CAAC,MAAM,EAAE,CAAC;wBAChB,CAAC;qBACF;oBACD;wBACE,IAAI,EAAE,eAAe;wBACrB,WAAW,EAAE;4BACX,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC;gCACxE,IAAI,MAAI,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,uBAAuB,CAAC;gCAC9G,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;oCAC3C,IAAI,QAAQ,GAAG,UAAU,CAAC,MAAM,CAAC,UAAC,IAAI;wCACpC,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,MAAI,IAAI,IAAI,CAAC,uBAAuB,IAAI,MAAI,CAAC;oCACjF,CAAC,CAAC,CAAC;oCACH,IAAI,IAAI,GAAG,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oCAC/E,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;oCAC3B,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;wCAClC,IAAI,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC;wCAChE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;oCAC3D,CAAC;oCAAC,IAAI,CAAC,CAAC;wCACN,IAAI,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,uBAAuB,CAAC;wCACrE,IAAI,KAAK,GAAG,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;wCACjH,UAAU,CAAC,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;oCAC1D,CAAC;oCACD,KAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;oCAC9B,UAAU,CAAC,OAAO,CAAC,aAAG;wCACpB,KAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;oCACpC,CAAC,CAAC;gCACJ,CAAC,CAAC,CAAC;gCACH,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;4BACnC,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,mDAAO,CAAC,MAAM,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;4BAC/D,CAAC;wBACH,CAAC;qBACF,CAAC,CAAC;YACL,CAAC;QACH,CAAC;IACH,CAAC;IACD,qDAAiB,GAAjB,UAAkB,CAAC;QAAnB,iBAgEC;QA/DC,IAAI,YAAY,GAAG,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QACtD,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC,WAAW,CAAC;QAC5C,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,KAAK,CAAC;QAClC,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC,YAAY,CAAC;QAC9C,wCAAwC;QACxC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,8BAA8B,IAAI,IAAI,CAAC,OAAO,CAAC,8BAA8B,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1G,IAAI,CAAC,UAAU,GAAG,kDAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAChE,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,cAAI;gBAC1B,IAAI,IAAI,GAAG,KAAI,CAAC,OAAO,CAAC,8BAA8B,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,EAAjC,CAAiC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACzG,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACT,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;gBACpC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,UAAU,GAAG,kDAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAClE,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,cAAI;gBACvB,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,KAAK;oBAC1C,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC;wBACxC,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBAC3C,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;QAED,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QAEtB,EAAE,CAAC,CAAC,YAAY,CAAC,MAAM,IAAI,YAAY,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1D,IAAM,aAAa,GAAG,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;YACtE,EAAE,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC7B,aAAa,CAAC,OAAO,CAAC,cAAI;oBACxB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;wBACjB,IAAI,MAAM,GAAG;4BACX,WAAW,EAAE,IAAI,CAAC,IAAI;4BACtB,WAAW,EAAE,IAAI,CAAC,IAAI;4BACtB,UAAU,EAAE,IAAI;yBACjB;wBACD,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBAC7B,IAAI,MAAM,GACV;4BACE,OAAO,EAAE,IAAI,CAAC,IAAI;4BAClB,SAAS,EAAE,IAAI,CAAC,IAAI;4BACpB,KAAK,EAAE,GAAG;yBACX,CAAC;wBACF,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBAC1B,IAAI,UAAU,GACd;4BACE,IAAI,EAAE,IAAI,CAAC,IAAI;4BACf,IAAI,EAAE,IAAI,CAAC,IAAI;4BACf,KAAK,EAAE,EAAE;4BACT,SAAS,EAAE,IAAI,CAAC,SAAS;yBAC1B;wBACD,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBACpC,CAAC;gBACH,CAAC,CAAC,CAAC;gBACH,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC5B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,cAAI;wBACvB,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnC,CAAC,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAED,qDAAiB,GAAjB,UAAkB,CAAC,EAAE,OAAY;QAAZ,wCAAY;QAC/B,EAAE,EAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACf,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QACzD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACxB,CAAC;QACD,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,KAAK,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC;QACrD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC;QACjD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC;QACnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM;aACxC,MAAM,CAAC,eAAK,IAAI,YAAK,CAAC,IAAI,IAAI,GAAG,EAAjB,CAAiB,CAAC;aAClC,GAAG,CAAC,UAAC,EAAgC;gBAA9B,cAAI,EAAE,cAAI,EAAE,gBAAK,EAAE,wBAAS;YAAO,QAAC,EAAE,IAAI,QAAE,IAAI,QAAE,KAAK,SAAE,SAAS,aAAE,CAAC;QAAlC,CAAkC,CAAC,CAAC;QACjF,IAAI,CAAC,YAAY,GAAG,+CAAS,CAAC,4CAAM,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,2CAAK,CAAC,IAAI,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QACjG,EAAE,EAAC,OAAO,CAAC,CAAC,CAAC;YACX,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC;IACH,CAAC;IAED,4BAA4B;IAC5B,+CAAW,GAAX;QAAA,iBAkEC;QAjEC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,cAAI;gBACvB,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,KAAK;oBAC1C,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC;wBACxC,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBAC3C,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;QAED,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACpE,IAAM,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,EAAd,CAAc,CAAC,CAAC;YAC3E,EAAE,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC7B,aAAa,CAAC,OAAO,CAAC,cAAI;oBACxB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;wBACjB,IAAI,MAAM,GAAG;4BACX,WAAW,EAAE,IAAI,CAAC,IAAI;4BACtB,WAAW,EAAE,IAAI,CAAC,IAAI;4BACtB,UAAU,EAAE,IAAI;yBACjB;wBACD,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;4BAC7B,IAAI,MAAM,GACV;gCACE,OAAO,EAAE,IAAI,CAAC,IAAI;gCAClB,SAAS,EAAE,IAAI,CAAC,IAAI;gCACpB,KAAK,EAAE,GAAG;6BACX,CAAC;4BACF,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBAC5B,CAAC;wBACD,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;4BACjC,IAAI,MAAM,GACV;gCACE,OAAO,EAAE,IAAI,CAAC,IAAI;gCAClB,SAAS,EAAE,IAAI,CAAC,IAAI;gCACpB,KAAK,EAAE,GAAG;gCACV,QAAQ,EAAE,QAAQ;gCAClB,aAAa,EAAE;oCACb,MAAM,EAAE,OAAO;iCAChB;gCACD,MAAM,EAAE,OAAO;6BAChB,CAAC;4BACF,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBAC5B,CAAC;wBACD,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;4BAC9B,IAAI,MAAM,GACV;gCACE,OAAO,EAAE,IAAI,CAAC,IAAI;gCAClB,SAAS,EAAE,IAAI,CAAC,IAAI;gCACpB,KAAK,EAAE,GAAG;gCACV,QAAQ,EAAE,MAAM;gCAChB,MAAM,EAAE,YAAY;gCACpB,uBAAuB,EAAE,YAAY;6BACtC,CAAC;4BACF,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBAC5B,CAAC;oBACH,CAAC;gBACH,CAAC,CAAC,CAAC;gBACH,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC5B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,cAAI;wBACvB,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnC,CAAC,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IACD,kDAAc,GAAd,UAAe,CAAC;QACd,CAAC,CAAC,SAAS,CAAC,YAAY,CAAC,cAAc,EAAE;YACvC,YAAY,EAAE,CAAC,CAAC;SACjB,CAAC,CAAC;IACL,CAAC;IACD,qDAAiB,GAAjB,UAAkB,CAAC;QAAnB,iBA4CC;QA3CC,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC;YAC/B,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;gBACf,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,IAAI,UAAU,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBACxG,CAAC,CAAC,aAAa,CAAC,QAAQ,GAAG,IAAI,CAAC;gBAClC,CAAC;YACH,CAAC;YACD,CAAC,CAAC,aAAa,CAAC,cAAc,GAAG,UAAC,IAAI;gBACpC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;oBACpB,KAAK,oBAAoB;wBACvB,KAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;wBACvC,KAAK,CAAC;oBACR,uBAAuB;oBACvB,2CAA2C;oBAC3C,sCAAsC;oBACtC,WAAW;oBACX,mBAAmB;oBACnB,mBAAmB;oBACnB,0BAA0B;oBAC1B,gBAAgB;oBAChB,qBAAqB;oBACrB,2BAA2B;oBAC3B,qCAAqC;oBACrC,sCAAsC;oBACtC,WAAW;oBACX,cAAc;oBACd,mCAAmC;oBACnC,sCAAsC;oBACtC,WAAW;oBACX,oBAAoB;oBACpB,oCAAoC;oBACpC,sCAAsC;oBACtC,WAAW;oBACX,iBAAiB;oBACjB,sCAAsC;oBACtC,sCAAsC;oBACtC,WAAW;oBACX;wBACE,KAAK,CAAC;gBACV,CAAC;gBACD,KAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACzB,CAAC,CAAC;QACJ,CAAC;IACH,CAAC;IACD,kDAAc,GAAd,UAAe,CAAC;QACd,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,MAAM,CAAC,CAAC,CAAC;YACxB,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,UAAU,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBACvG,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;YAC7C,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,wBAAwB,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,oBAAoB,CAAC,CAAC,CAAC;gBAChG,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;YAC7C,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBAC9B,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;oBAC3B,KAAK,cAAc;wBACjB,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,kCAAkC,CAAC,CAAC;wBACxE,KAAK,CAAC;oBACR,KAAK,QAAQ;wBACX,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,gCAAgC,CAAC,CAAC;wBACtE,KAAK,CAAC;oBACR,KAAK,kBAAkB;wBACrB,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,+BAA+B,CAAC,CAAC;wBACrE,KAAK,CAAC;oBACR,KAAK,cAAc;wBACjB,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,oBAAoB,CAAC,CAAC;wBACrF,KAAK,CAAC;oBACR;wBACE,KAAK,CAAC;gBACV,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,IAAI,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,YAAY,IAAI,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,oBAAoB,CAAC,CAAC,CAAC;gBACnJ,IAAI,CAAC,2BAA2B,CAAC,CAAC,EAAE,wCAAwC,CAAC,CAAC;YAChF,CAAC;QACH,CAAC;IACH,CAAC;IAED,+DAA2B,GAA3B,UAA4B,CAAC,EAAE,OAAO;QACpC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,QAAQ,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,kBAAkB,CAAC,IAAI,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,QAAQ,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,kBAAkB,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,cAAc,IAAI,0DAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACna,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,UAAU,GAAG,+DAA+D,CAAC;YACjG,CAAC,CAAC,WAAW,CAAC,KAAK,GAAG,OAAO,CAAC;YAC9B,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,0BAA0B,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,wBAAwB,CAAC;gBAAC,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC;QACzI,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBACpH,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,YAAY,CAAC;YACpC,IAAI,CACF,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,EAAE,CAAC;gBAC3D,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,YAAY,CAAC;YACpC,IAAI,CACF,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC;gBACxB,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,YAAY,CAAC;YACpC,IAAI,CACF,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC;gBAClC,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,YAAY,CAAC;YACpC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,IAAI,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,YAAY,IAAI,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,oBAAoB,CAAC;gBAC/I,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,YAAY,CAAC;YACpC,IAAI;gBACF,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,SAAS;QACvC,CAAC;IACH,CAAC;IACD,iDAAa,GAAb,UAAc,CAAC;QAAf,iBAgBC;QAfC,IAAM,kBAAkB,GAAG,CAAC,CAAC,IAAI,CAAC,kBAAkB;QACpD,EAAE,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBAC3C,UAAU,CAAC,OAAO,CAAC,aAAG;oBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,uBAAuB,IAAI,kBAAkB,IAAI,GAAG,CAAC,kBAAkB,IAAI,kBAAkB,CAAC,CAAC,CAAC;wBACtG,KAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;oBAC5C,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC;QACJ,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACtC,CAAC;QACD,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IACnC,CAAC;IAED,iDAAa,GAAb,UAAc,CAAC;QACb,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC;YAC7B,mCAAmC;YACnC,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC;YAChC,gFAAgF;QAClF,CAAC;IACH,CAAC;IAED,iDAAa,GAAb,UAAc,CAAC;QACb,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACX,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,0BAA0B,IAAI,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBACjF,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;YAC5C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC;YACrC,CAAC;QACH,CAAC;QACD,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,gDAAY,GAAZ,UAAa,CAAC;QACZ,+BAA+B;QAC/B,uCAAuC;QACvC,oBAAoB;QACpB,+BAA+B;QAC/B,kCAAkC;QAClC,aAAa;QACb,yBAAyB;QACzB,iCAAiC;QACjC,wCAAwC;QACxC,aAAa;QACb,qBAAqB;QACrB,2BAA2B;QAC3B,wCAAwC;QACxC,aAAa;QACb,qBAAqB;QACrB,2BAA2B;QAC3B,wCAAwC;QACxC,aAAa;QACb,4BAA4B;QAC5B,2BAA2B;QAC3B,wCAAwC;QACxC,aAAa;QACb,kBAAkB;QAClB,2BAA2B;QAC3B,wCAAwC;QACxC,aAAa;QACb,gBAAgB;QAChB,yBAAyB;QACzB,wCAAwC;QACxC,aAAa;QACb,sBAAsB;QACtB,0BAA0B;QAC1B,wCAAwC;QACxC,aAAa;QACb,mBAAmB;QACnB,4BAA4B;QAC5B,wCAAwC;QACxC,aAAa;QACb,uBAAuB;QACvB,2BAA2B;QAC3B,wCAAwC;QACxC,aAAa;QACb,6BAA6B;QAC7B,2BAA2B;QAC3B,wCAAwC;QACxC,aAAa;QACb,aAAa;QACb,aAAa;QACb,IAAI;QACJ,0BAA0B;IAC5B,CAAC;IAID,sDAAkB,GAAlB,UAAmB,CAAC,EAAE,KAAK;QAA3B,iBA2CC;QA1CC,IAAI,gBAAgB,GAAG,KAAK,CAAC;QAC7B,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBAC3C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC3C,IAAM,GAAG,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;oBAC1B,EAAE,CAAC,CAAC,GAAG,CAAC,uBAAuB,IAAI,GAAG,CAAC,uBAAuB,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC,CAAC;wBACtG,UAAU,CAAC,CAAC,CAAC,CAAC,uBAAuB,GAAG,gBAAgB,CAAC;oBAC3D,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;YACH,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,yBAAyB,GAAG,gBAAgB,CAAC;QACzD,CAAC;QAED,EAAE,CAAC,CAAC,gBAAgB,IAAI,EAAE,CAAC,CAAC,CAAC;YAC3B,wBAAwB;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,CAAC,CAAC;gBAC7D,IAAI,CAAC,UAAU,CAAC,+BAA+B,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;oBACrF,IAAI,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;oBACpC,EAAE,CAAC,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC3B,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,GAAG,0BAA0B,CAAC;wBAClD,gCAAgC;wBAChC,iDAAiD;oBACnD,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,GAAG,0BAA0B,CAAC,CAAC,CAAC;4BACtD,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,GAAG,SAAS,CAAC;4BACjC,oEAAoE;wBACtE,CAAC;wBACD,uBAAuB;oBACzB,CAAC;oBACD,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;wBAC3C,IAAI,WAAW,GAAG,UAAU,CAAC,MAAM,CAAC,UAAC,IAAI;4BACvC,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,gBAAgB,CAAC;wBACrD,CAAC,CAAC,CAAC;wBACH,EAAE,CAAC,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,IAAI,0BAA0B,CAAC,CAAC,CAAC;4BACjF,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,GAAG,wBAAwB,CAAC;wBAClD,CAAC;oBACH,CAAC,CAAC,CAAC;oBACH,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;oBACjC,KAAI,CAAC,eAAe,EAAE,CAAC;gBACzB,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC;IACH,CAAC;IAED,sBAAsB;IACtB,qDAAiB,GAAjB,UAAkB,GAAG;QAArB,iBAwBC;QAvBC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAI;YAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC;gBACnC,IAAI,KAAG,GAAG,KAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,YAAE;oBAC7D,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;wBAC3B,IAAI,OAAO,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC;wBAC9B,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;4BACZ,GAAG,CAAC,YAAY,GAAG,OAAO,CAAC,IAAI,CAAC;4BAChC,GAAG,CAAC,SAAS,GAAG,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;4BACtD,KAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;4BAC1C,KAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;4BACrB,MAAM,CAAC,IAAI,CAAC;wBACd,CAAC;oBACH,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oBACtC,CAAC;gBACH,CAAC,EACC,aAAG,IAAM,CAAC,EACV;oBACE,KAAG,CAAC,WAAW,EAAE,CAAC;gBACpB,CAAC,CAAC,CAAC;YACP,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,+CAAW,GAAX,UAAY,CAAC,EAAE,KAAK;QAClB,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,IAAI,CAAC,CAAC;QACvC,IAAI,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;QACvB,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;YAClB,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,KAAK,GAAG,QAAQ,CAAC;YACpC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,eAAe,CAAC;YACrJ,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,eAAe,GAAG,CAAC,CAAC;gBAChC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,eAAe,CAAC;YAC5C,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAChB,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAChH,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,gBAAgB,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7F,CAAC;IACH,CAAC;IAED,6CAAS,GAAT,UAAU,CAAC,EAAE,KAAK;QAChB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;YAChB,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,GAAG,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAChG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,gBAAgB,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7F,CAAC;IACD,8CAAU,GAAV,UAAW,GAAG;QACZ,IAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,CAAC,SAAS,EAAxB,CAAwB,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7E,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;YAC1B,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;QAC5C,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,GAAG,CAAC,SAAS,GAAG,EAAE,CAAC;YACnB,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;QAC5C,CAAC;IACH,CAAC;IACD,uDAAmB,GAAnB,UAAoB,GAAG;QACrB,IAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,CAAC,mBAAmB,EAAlC,CAAkC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjG,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,GAAG,CAAC,mBAAmB,GAAG,IAAI,CAAC,IAAI,CAAC;YACpC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;QAC5C,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,GAAG,CAAC,mBAAmB,GAAG,EAAE,CAAC;YAC7B,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;QAC5C,CAAC;IACH,CAAC;IACD,gDAAY,GAAZ,UAAa,CAAC,EAAE,KAAK;QACnB,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;YAC5C,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,gBAAgB,GAAG,KAAK,CAAC;QACrC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,IAAI,CAAC,CAAC;YACvC,IAAI,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,CAAC;YACjC,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;gBAClB,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,QAAQ,CAAC;gBAC9C,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,eAAe,CAAC;gBACrJ,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,eAAe,GAAG,CAAC,CAAC;oBAChC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,eAAe,CAAC;gBAChD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;oBAChB,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAChH,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,gBAAgB,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7F,CAAC;QACH,CAAC;IACH,CAAC;IAED,8DAA0B,GAA1B;QACE,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YAC3C,UAAU,CAAC,OAAO,CAAC,aAAG;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,kBAAkB,IAAI,EAAE,CAAC,CAAC,CAAC;oBACjC,mDAAO,CAAC,MAAM,CAAC,wCAAwC,EAAE,OAAO,CAAC,CAAC;gBACpE,CAAC;gBAAC,IAAI,CAAC,CAAC;gBACR,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iDAAa,GAAb,UAAc,QAAQ;QACpB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;QACnC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACtC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC;gBAC9B,MAAM,CAAC,QAAQ,CAAC;YAClB,CAAC;QACH,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,6DAAyB,GAAzB,UAA0B,IAAI;QAC5B,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,6BAA6B,CAAC,IAAI,CAAC,UAAU,OAAO;YAC1E,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,IAAI,CAAC;YAAA,CAAC;QAChC,CAAC,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,EAAE,CAAC;QAEd,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACV,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;QACpB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,mDAAO,CAAC,MAAM,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;QAC/D,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAGD,sDAAkB,GAAlB,UAAmB,MAAM,EAAE,GAAG;QAC5B,IAAI,IAAI,GAAG,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IACnC,CAAC;IAED,2DAAuB,GAAvB,UAAwB,KAAK,EAAE,QAAQ;QACrC,IAAI,IAAI,GAAG,KAAK,GAAG,QAAQ,GAAG,GAAG,CAAC;QAClC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IACnC,CAAC;IAED,+CAAW,GAAX,UAAY,MAAM,EAAE,CAAC;QACnB,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;YACnB,MAAM,CAAC,MAAM,CAAC;QAChB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACpC,CAAC;IACH,CAAC;IAED,yDAAqB,GAArB,UAAsB,QAAQ;QAC5B,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACrD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;gBAC1B,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC;YAC9B,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,QAAQ,EAAlB,CAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;YACrE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;YACnB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,MAAI,GAAG,0DAAc,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;gBACrD,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,MAAI,EAAf,CAAe,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxE,EAAE,CAAC,CAAC,UAAU,CAAC;oBACb,MAAI,GAAG,MAAI,GAAG,kDAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3C,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,MAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;gBAC5D,MAAM,CAAC,MAAI,CAAC;YACd,CAAC;QACH,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,8DAA0B,GAA1B,UAA2B,mBAAmB;QAC5C,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC;QAC7C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACtC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,mBAAmB,CAAC,CAAC,CAAC;gBACzC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACvB,CAAC;QACH,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IACD,+CAAW,GAAX,UAAY,UAAU,EAAE,QAAQ;QAAhC,iBASC;QARC,IAAI,gBAAgB,GAAG,OAAO,CAAC;QAC/B,IAAI,QAAQ,GAAG,gBAAgB,CAAC;QAChC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC9D,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,aAAa,IAAI,UAAU,IAAI,CAAC,CAAC,aAAa,IAAI,SAAS,EAA7D,CAA6D,CAAC,CAAC;YACnI,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;gBACtC,gBAAgB,GAAG,UAAU,CAAC,GAAG,CAAC,UAAC,GAAQ,IAAK,UAAG,CAAC,WAAW,EAAf,CAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC/E,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,EAAE,eAAe,EAAE,QAAQ,EAAE,QAAQ,EAAE,aAAa,EAAE,gBAAgB,EAAE,IAAI,CAAC,CAAC;IACjJ,CAAC;IAED,8CAAU,GAAV,UAAW,UAAU,EAAE,QAAQ;QAA/B,iBASC;QARC,IAAI,QAAQ,GAAG,mBAAmB,CAAC;QACnC,IAAI,gBAAgB,GAAG,OAAO,CAAC;QAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC9D,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,aAAa,IAAI,UAAU,IAAI,CAAC,CAAC,aAAa,IAAI,SAAS,EAA7D,CAA6D,CAAC,CAAC;YACnI,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;gBACtC,gBAAgB,GAAG,UAAU,CAAC,GAAG,CAAC,UAAC,GAAQ,IAAK,UAAG,CAAC,WAAW,EAAf,CAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC/E,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAE,aAAa,EAAE,gBAAgB,EAAE,IAAI,CAAC,CAAC;IAC9I,CAAC;IAED,kDAAc,GAAd;QAAA,iBA+FC;QA9FC,IAAI,MAAM,CAAC;QACX,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YACrB,MAAM,GAAG,UAAU,CAAC;QACtB,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;gBAC5B,MAAM,GAAG,SAAS,CAAC;YACrB,IAAI,CAAC,CAAC;gBACJ,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,QAAQ,CAAC;oBAClC,MAAM,GAAG,QAAQ,CAAC;gBACpB,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,SAAS,CAAC;oBACxC,MAAM,GAAG,SAAS,CAAC;YACvB,CAAC;QACH,CAAC;QACD,0EAA0E;QAC1E,wEAAwE;QACxE,sEAAsE;QACtE,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,IAAI,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QACnD,OAAO,YAAY,CAAC,YAAY,CAAC;QACjC,EAAE,CAAC,CAAC,MAAM,IAAI,UAAU,CAAC,CAAC,CAAC;YACzB,IAAI,KAAG,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;gBAChE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC;oBAC/C,KAAI,CAAC,OAAO,CAAC,SAAS,GAAG,oCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBACjF,IAAI,cAAc,GAAG,oCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBAC7E,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBACjC,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBAClE,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wBAC5H,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;oBAC9B,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,mBAAmB,CAAC;4BACpD,KAAI,CAAC,UAAU,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;wBAC9C,IAAI,CAAC,CAAC;4BACJ,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC;4BACpD,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gCACzE,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gCAC5F,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;oCACrB,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;gCAC/C,CAAC;4BACH,CAAC;wBACH,CAAC;oBACH,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;oBAC7B,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oBACxB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;gBACb,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;YAC/B,IAAI,KAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;gBAC/E,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC;oBAC/C,KAAI,CAAC,OAAO,CAAC,SAAS,GAAG,oCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBACjF,IAAI,cAAc,GAAG,oCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBAC7E,qBAAqB;oBACrB,oBAAoB;oBACpB,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC;oBAC9B,EAAE,CAAC,CAAC,QAAQ,CAAC;wBACX,KAAI,CAAC,QAAQ,GAAG,mBAAmB,CAAC;oBACtC,IAAI;wBACF,KAAI,CAAC,QAAQ,GAAG,4CAA4C,CAAC;oBAC/D,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBAClE,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wBAC5H,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;oBAC9B,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,mBAAmB,CAAC;4BACpD,KAAI,CAAC,UAAU,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;wBAC9C,IAAI,CAAC,CAAC;4BACJ,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC;4BACpD,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gCACzE,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gCAC5F,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;oCACrB,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;gCAC/C,CAAC;4BACH,CAAC;wBACH,CAAC;oBACH,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;oBAC7B,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oBACxB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;gBACb,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,+CAAW,GAAX,UAAY,UAAU;QAAtB,iBA0BC;QAzBC,UAAU,CAAC;YACT,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,EAAE,EAAE,CAAC,CAAC;QACP,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;YACvC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YACnB,UAAU,EAAE,UAAU;SACvB,CAAC,CAAC,SAAS,CAAC,YAAE;YACb,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC;gBACpD,IAAI,cAAc,GAAG,oCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;gBAClF,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;oBACzE,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;oBAC5F,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;wBACrB,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;oBAC/C,CAAC;gBACH,CAAC;YACH,CAAC;YACD,IAAI;gBACF,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACxC,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,oDAAgB,GAAhB,UAAiB,UAAU;QAA3B,iBAoBC;QAnBC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;YAChD,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YACnB,YAAY,EAAE;gBACZ,OAAO,EAAE;oBACP,OAAO,EAAE,UAAU;oBACnB,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,YAAY;iBAChE;gBACD,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,QAAQ;gBAC/C,eAAe,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,eAAe;aAC9D;SACF,CAAC,CAAC,SAAS,CAAC,YAAE;YACb,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YAC9B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,8CAAU,GAAV;QAAA,iBAiBC;QAhBC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;QACvD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;eAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC5H,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,IAAI,gBAAgB,GAAG,OAAO,CAAC;YAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAAC;gBAC9D,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,aAAa,IAAI,UAAU,IAAI,CAAC,CAAC,aAAa,IAAI,SAAS,EAA7D,CAA6D,CAAC,CAAC;gBACnI,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;oBACtC,gBAAgB,GAAG,UAAU,CAAC,GAAG,CAAC,UAAC,GAAQ,IAAK,UAAG,CAAC,WAAW,EAAf,CAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC/E,CAAC;YACD,IAAI,WAAW,GAAG,oCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;YACnE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,sCAAsC,EAAE,gCAAgC,EAAE,eAAe,EAAE,WAAW,EAAE,EAAE,EAAE,gBAAgB,EAAE,IAAI,CAAC,CAAC;QAC7L,CAAC;QACD,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;IACtB,CAAC;IAED,6CAAS,GAAT;QAAA,iBA+CC;QA9CC,IAAI,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;QAC9C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;QACvD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,YAAE;gBACvE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,KAAI,CAAC,aAAa,IAAI,eAAe,CAAC;oBACtC,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;wBAC1C,KAAI,CAAC,YAAY,EAAE,CAAC;wBACpB,KAAI,CAAC,SAAS,EAAE,CAAC;oBACnB,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;wBAClD,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,wBAAwB,EAAE,SAAS,CAAC,CAAC;wBAC3E,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;wBAC7B,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;wBAC7B,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,GAAG,SAAS,CAAC;wBAC1D,KAAI,CAAC,YAAY,EAAE,CAAC;oBACtB,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;oBAC7B,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oBACxB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,YAAE;gBAC3E,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,KAAI,CAAC,aAAa,IAAI,eAAe,CAAC;oBACtC,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;wBAC1C,KAAI,CAAC,YAAY,EAAE,CAAC;wBACpB,KAAI,CAAC,SAAS,EAAE,CAAC;oBACnB,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;wBAClD,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,wBAAwB,EAAE,SAAS,CAAC,CAAC;wBAC3E,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;wBAC7B,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;wBAC7B,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,GAAG,SAAS,CAAC;wBAC1D,KAAI,CAAC,YAAY,EAAE,CAAC;oBACtB,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;oBAC7B,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oBACxB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,8CAAU,GAAV;QAAA,iBA8CC;QA7CC,IAAI,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;QAC9C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;QACvD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,YAAE;gBACpF,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,KAAI,CAAC,aAAa,IAAI,eAAe,CAAC;oBACtC,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;wBAC1C,KAAI,CAAC,YAAY,EAAE,CAAC;wBACpB,KAAI,CAAC,UAAU,EAAE,CAAC;oBACpB,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;wBAClD,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;wBACvE,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;wBAC7B,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;wBAC7B,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,GAAG,SAAS,CAAC;wBAC1D,KAAI,CAAC,YAAY,EAAE,CAAC;oBACtB,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;oBAC7B,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oBACxB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,YAAE;gBACrE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC7B,KAAI,CAAC,aAAa,IAAI,eAAe,CAAC;oBACtC,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;wBAC1C,KAAI,CAAC,YAAY,EAAE,CAAC;wBACpB,KAAI,CAAC,UAAU,EAAE,CAAC;oBACpB,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;wBAClD,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;wBACvE,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;wBAC7B,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;wBAC7B,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,GAAG,SAAS,CAAC;wBAC1D,KAAI,CAAC,YAAY,EAAE,CAAC;oBACtB,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;oBAC7B,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oBACxB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,4CAAQ,GAAR;QACE,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YAC3C,UAAU,CAAC,OAAO,CAAC,iBAAO;gBACxB,EAAE,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC;oBAC/B,IAAI,OAAO,GAAG,EAAE,CAAC;oBACjB,OAAO,CAAC,oBAAoB,CAAC,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC,oBAAoB;oBAChF,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,2BAA2B;oBAC7E,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;oBACjD,OAAO,CAAC,sBAAsB,CAAC,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,iBAAiB;oBAC9G,OAAO,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC,YAAY;oBAChE,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,6BAA6B;oBAC/E,OAAO,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,eAAe;oBAC3D,OAAO,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;oBAC/C,OAAO,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC;oBAC3C,OAAO,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,oBAAoB;oBACpE,WAAW;oBACX,OAAO,CAAC,iBAAiB,CAAC,GAAG,OAAO,CAAC,eAAe,CAAC;oBACrD,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;oBACjD,OAAO,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC;oBAC3C,OAAO,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC;oBACnD,OAAO,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC;oBACzC,OAAO,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC;oBACjC,OAAO,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC;oBACjC,OAAO,CAAC,uBAAuB,CAAC,GAAG,OAAO,CAAC,qBAAqB,CAAC;oBACjE,OAAO,CAAC,wBAAwB,CAAC,GAAG,OAAO,CAAC,sBAAsB,CAAC;oBACnE,OAAO,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC;oBACvD,OAAO,CAAC,mBAAmB,CAAC,GAAG,OAAO,CAAC,iBAAiB,CAAC;oBACzD,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;oBACjD,OAAO,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC;oBACnD,OAAO,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC;oBAC3C,OAAO,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC;oBAC7C,OAAO,CAAC,yBAAyB,CAAC,GAAG,OAAO,CAAC,uBAAuB,CAAC;oBACrE,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;oBACjD,OAAO,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC;oBACvD,KAAK;oBACL,OAAO,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,OAAO;oBACrD,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,SAAS;oBAC3D,OAAO,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,SAAS;oBACnD,OAAO,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC,SAAS;oBAC7D,OAAO,CAAC,wBAAwB,CAAC,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC,SAAS;oBAC7E,OAAO,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,SAAS;oBACvE,OAAO,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,sBAAsB;oBACpF,OAAO,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,cAAc;oBAC5E,OAAO,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,iBAAiB;oBAC3D,OAAO,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,SAAS;oBACzC,mBAAmB;oBACnB,OAAO,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC;oBACvD,OAAO,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC;oBACvD,OAAO,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC;oBACnD,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;oBACjD,OAAO,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC;oBAC7C,OAAO,CAAC,gBAAgB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC;oBACnD,OAAO,CAAC,mBAAmB,CAAC,GAAG,OAAO,CAAC,iBAAiB,CAAC;oBACzD,OAAO,CAAC,kBAAkB,CAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC;oBACvD,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC;oBACjD,OAAO,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC;oBAEvC,IAAI,OAAO,GAAG;wBACZ,YAAY,EAAE,OAAO,CAAC,YAAY;wBAClC,2BAA2B,EAAE,OAAO,CAAC,2BAA2B;wBAChE,SAAS,EAAE,OAAO,CAAC,SAAS;wBAC5B,QAAQ,EAAE,OAAO,CAAC,QAAQ;wBAC1B,SAAS,EAAE,OAAO,CAAC,SAAS;wBAC5B,YAAY,EAAE,OAAO,CAAC,YAAY;wBAClC,KAAK,EAAE,OAAO,CAAC,KAAK;wBACpB,qBAAqB,EAAE,OAAO,CAAC,qBAAqB;wBACpD,eAAe,EAAE,OAAO,CAAC,eAAe;wBACxC,MAAM,EAAE,OAAO,CAAC,MAAM;wBACtB,QAAQ,EAAE,OAAO,CAAC,QAAQ;wBAC1B,UAAU,EAAE,OAAO,CAAC,UAAU;wBAC9B,gBAAgB,EAAE,OAAO,CAAC,gBAAgB;wBAC1C,QAAQ,EAAE,OAAO,CAAC,QAAQ;wBAC1B,eAAe,EAAE,OAAO,CAAC,eAAe;wBACxC,uBAAuB,EAAE,OAAO,CAAC,uBAAuB;wBACxD,aAAa,EAAE,OAAO,CAAC,aAAa;wBACpC,oBAAoB,EAAE,OAAO,CAAC,oBAAoB;wBAClD,cAAc,EAAE,OAAO,CAAC,cAAc;wBACtC,cAAc,EAAE,OAAO,CAAC,cAAc;wBACtC,cAAc,EAAE,OAAO,CAAC,cAAc;wBACtC,UAAU,EAAE,OAAO,CAAC,UAAU;wBAC9B,eAAe,EAAE,OAAO,CAAC,eAAe;qBACzC;oBACD,OAAO,CAAC,kBAAkB,CAAC,GAAG,EAAE,CAAC;oBACjC,OAAO,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBAC1C,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACzB,CAAC;gBAED,EAAE,CAAC,CAAC,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC;oBACpC,uBAAuB;oBACvB,IAAI,cAAc,GAAG;wBACnB,YAAY,EAAE,OAAO,CAAC,YAAY;wBAClC,2BAA2B,EAAE,OAAO,CAAC,2BAA2B;wBAChE,SAAS,EAAE,OAAO,CAAC,SAAS;wBAC5B,QAAQ,EAAE,OAAO,CAAC,QAAQ;wBAC1B,SAAS,EAAE,OAAO,CAAC,SAAS;wBAC5B,YAAY,EAAE,OAAO,CAAC,YAAY;wBAClC,KAAK,EAAE,OAAO,CAAC,KAAK;wBACpB,qBAAqB,EAAE,OAAO,CAAC,qBAAqB;wBACpD,eAAe,EAAE,OAAO,CAAC,eAAe;wBACxC,MAAM,EAAE,OAAO,CAAC,MAAM;wBACtB,QAAQ,EAAE,OAAO,CAAC,GAAG;wBACrB,UAAU,EAAE,OAAO,CAAC,UAAU;wBAC9B,gBAAgB,EAAE,OAAO,CAAC,gBAAgB;wBAC1C,QAAQ,EAAE,OAAO,CAAC,QAAQ;wBAC1B,eAAe,EAAE,OAAO,CAAC,eAAe;wBACxC,uBAAuB,EAAE,OAAO,CAAC,uBAAuB;wBACxD,aAAa,EAAE,OAAO,CAAC,aAAa;wBACpC,oBAAoB,EAAE,OAAO,CAAC,oBAAoB;wBAClD,cAAc,EAAE,OAAO,CAAC,cAAc;wBACtC,cAAc,EAAE,OAAO,CAAC,cAAc;wBACtC,cAAc,EAAE,OAAO,CAAC,cAAc;wBACtC,UAAU,EAAE,OAAO,CAAC,UAAU;wBAC9B,eAAe,EAAE,OAAO,CAAC,eAAe;qBACzC;oBACD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBACzC,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,kBAAkB,IAAI,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC;4BACtE,QAAQ,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;wBACpD,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,IAAI,GAAG;YACT,UAAU,EAAE,QAAQ;SACrB;QACD,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;YACrD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC5B,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;gBAC5B,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;gBAC9D,mDAAO,CAAC,MAAM,CAAC,kCAAkC,EAAE,SAAS,CAAC,CAAC;YAChE,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACvC,CAAC;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,yDAAqB,GAArB,UAAsB,IAAI,EAAE,UAAW;QAAvC,iBA+TC;QA9TC,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,wBAAwB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACnG,IAAI,cAAc,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QAC1F,IAAI,kBAAkB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QAC7F,IAAI,gBAAgB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QAC1F,IAAI,aAAa,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QACrF,IAAI,uBAAuB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;QACxG,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YAC3C,IAAI,WAAW,GAAG,UAAU,CAAC,KAAK,CAAC,cAAI,IAAI,iEAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,EAA/D,CAA+D,CAAC,CAAC;YAC5G,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;gBAChB,mDAAO,CAAC,MAAM,CAAC,wCAAwC,EAAE,OAAO,CAAC,CAAC;gBAClE,OAAO,GAAG,KAAK,CAAC;gBAChB,MAAM,CAAC;YACT,CAAC;YACD,UAAU,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,KAAK;gBAChC,EAAE,CAAC,CAAC,OAAO,CAAC,kBAAkB,IAAI,EAAE,IAAI,OAAO,CAAC,QAAQ,IAAI,YAAY,IAAI,OAAO,CAAC,YAAY,IAAI,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC;oBACrH,mDAAO,CAAC,MAAM,CAAC,wCAAwC,EAAE,OAAO,CAAC,CAAC;oBAClE,OAAO,GAAG,KAAK,CAAC;oBAChB,MAAM,CAAC;gBACT,CAAC;gBACD,sBAAsB;gBACtB,EAAE,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC;oBAC/B,EAAE,CAAC,CAAC,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC;wBACrB,EAAE,CAAC,CAAC,OAAO,CAAC,YAAY,IAAI,EAAE,CAAC,CAAC,CAAC;4BAAC,mDAAO,CAAC,MAAM,CAAC,kCAAkC,EAAE,OAAO,CAAC,CAAC;4BAAC,OAAO,GAAG,KAAK,CAAC;4BAAC,MAAM,CAAC,KAAK,CAAC;wBAAC,CAAC;wBAC/H,EAAE,CAAC,CAAC,OAAO,CAAC,gBAAgB,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;4BAAC,mDAAO,CAAC,MAAM,CAAC,+BAA+B,EAAE,OAAO,CAAC,CAAC;4BAAC,OAAO,GAAG,KAAK,CAAC;4BAAC,MAAM,CAAC,KAAK,CAAC;wBAAC,CAAC;wBACzJ,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;4BAAC,mDAAO,CAAC,MAAM,CAAC,gCAAgC,EAAE,OAAO,CAAC,CAAC;4BAAC,OAAO,GAAG,KAAK,CAAC;4BAAC,MAAM,CAAC,KAAK,CAAC;wBAAC,CAAC;oBAClJ,CAAC;oBACD,IAAI,SAAO,GAAG,IAAI,kFAAS,CAAC,CAAC,CAAC,CAAC;oBAC/B,EAAE,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;wBACf,SAAO,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC;wBACxB,SAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;oBAClC,CAAC;oBACD,SAAO,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;oBAC1C,SAAO,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC;oBACvC,SAAO,CAAC,oBAAoB,CAAC,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC,oBAAoB;oBAChF,SAAO,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,oCAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,oCAAM,EAAE,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,eAAe;oBACzJ,SAAO,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC,YAAY;oBAC7D,SAAO,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,eAAe;oBACxD,SAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,EAAC,6BAA6B;oBAC3E,SAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,2BAA2B;oBAC1E,SAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;oBAC9C,SAAO,CAAC,aAAa,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;oBAC/E,SAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,SAAS;oBACxD,SAAO,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,UAAU;oBAC7C,SAAO,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,sBAAsB;oBACnE,SAAO,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,oBAAoB;oBACjE,SAAO,CAAC,aAAa,GAAG,KAAI,CAAC,aAAa,CAAC;oBAC3C,SAAO,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC;oBACvC,KAAK;oBACL,SAAO,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,OAAO;oBAClD,SAAO,CAAC,mBAAmB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,sBAAsB;oBACjF,SAAO,CAAC,mBAAmB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,sBAAsB;oBACjF,EAAE,CAAC,CAAC,CAAC,SAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC;wBACjC,IAAI,IAAI,GAAG,KAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,OAAO,CAAC,mBAAmB,EAArC,CAAqC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAClG,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACT,SAAO,CAAC,mBAAmB,GAAG,IAAI,CAAC,IAAI,CAAC;wBAC1C,CAAC;oBACH,CAAC;oBACD,SAAO,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,SAAS;oBACtC,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;oBAC7D,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;oBAC7D,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;oBACvD,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;oBACvD,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;oBACrD,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;oBACrD,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC;oBACnE,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;oBAC/C,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;oBACjD,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;oBAC3C,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;oBACzD,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,CAAC;oBACrE,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;oBAC/C,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;oBACzD,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,mBAAmB,GAAG,OAAO,CAAC,mBAAmB,CAAC;oBAC3E,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;oBAC7D,SAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;oBACzD,IAAI,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC,gEAAoB,CAAC,uBAAuB,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC;oBACvG,SAAO,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;oBAClD,EAAE,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;wBACf,SAAO,CAAC,EAAE,GAAG,SAAO,CAAC,EAAE,CAAC;oBAC1B,CAAC;oBACD,wBAAwB;oBACxB,EAAE,CAAC,CAAC,KAAI,CAAC,WAAW,IAAI,KAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBACpD,IAAI,WAAW,GAAG,iDAAW,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;wBAChD,WAAW,CAAC,OAAO,CAAC,oBAAU;4BAC5B,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,OAAO,CAAC,CAAC,CAAC;gCACxB,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;oCAC5B,EAAE,CAAC,CAAC,UAAU,CAAC,SAAS,IAAI,MAAM,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC;wCACjD,UAAU,CAAC,KAAK,GAAG,oCAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oCACxE,IAAI;wCACF,UAAU,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;gCACpC,CAAC;4BACH,CAAC;wBACH,CAAC,CAAC,CAAC;wBACH,SAAO,CAAC,YAAY,GAAG,EAAE,CAAC;wBAC1B,WAAW,CAAC,OAAO,CAAC,aAAG,IAAI,gBAAO,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,EAAjD,CAAiD,CAAC,CAAC;oBAChF,CAAC;oBACD,QAAQ,CAAC,IAAI,CAAC,SAAO,CAAC,CAAC;gBACzB,CAAC;gBAED,EAAE,CAAC,CAAC,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC;oBACpC,IAAI,cAAc,GAAG;wBACnB,YAAY,EAAE,OAAO,CAAC,YAAY;wBAClC,YAAY,EAAE,OAAO,CAAC,YAAY;wBAClC,SAAS,EAAE,OAAO,CAAC,SAAS;wBAC5B,SAAS,EAAE,OAAO,CAAC,SAAS;wBAC5B,QAAQ,EAAE,OAAO,CAAC,QAAQ;wBAC1B,KAAK,EAAE,OAAO,CAAC,KAAK;wBACpB,GAAG,EAAE,OAAO,CAAC,GAAG;wBAChB,mBAAmB,EAAE,OAAO,CAAC,mBAAmB;wBAChD,YAAY,EAAE,OAAO,CAAC,YAAY;wBAClC,UAAU,EAAE,OAAO,CAAC,UAAU;wBAC9B,eAAe,EAAE,OAAO,CAAC,eAAe;wBACxC,QAAQ,EAAE,OAAO,CAAC,QAAQ;wBAC1B,KAAK,EAAE,OAAO,CAAC,KAAK;wBACpB,UAAU,EAAE,OAAO,CAAC,UAAU;wBAC9B,MAAM,EAAE,OAAO,CAAC,MAAM;wBACtB,UAAU,EAAE,OAAO,CAAC,UAAU;wBAC9B,gBAAgB,EAAE,OAAO,CAAC,gBAAgB;qBAC3C;oBACD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBACzC,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,kBAAkB,IAAI,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC;4BACtE,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;wBACjD,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;gCAGM,CAAC;YACR,IACE,MAAM,GAAG,IAAI,EAAE,gBAAgB,GAAG,IAAI,EAAE,gBAAgB,GAAG,IAAI,EAAE,iBAAiB,GAAG,IAAI,EAAE,iBAAiB,GAAG,IAAI,EAAE,iBAAiB,GAAG,IAAI,EAAE,iBAAiB,GAAG,IAAI,EAAE,kBAAkB,GAAG,IAAI,EAAE,yBAAyB,GAAG,IAAI,EAAE,WAAW,GAAG,IAAI,EAAE,WAAW,GAAG,IAAI,EAAE,YAAY,GAAG,IAAI,EAAE,WAAW,GAAG,IAAI,EACrT,yBAAyB,GAAG,IAAI,EAAE,yBAAyB,GAAG,IAAI,EAAE,0BAA0B,GAAG,IAAI,EAAE,yBAAyB,GAAG,IAAI,EAAE,sBAAsB,GAAG,IAAI,EAAE,sBAAsB,GAAG,IAAI,EAAE,8BAA8B,EAAE,8BAA8B,EAAE,gBAAgB,EAAE,YAAY,GAAG,IAAI,EAAE,SAAS,GAAG,IAAI,EAAE,eAAe,GAAG,IAAI,CAAC;YACzV,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,KAAK;gBAC/C,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,mBAAmB,IAAI,OAAO,CAAC,CAAC,CAAC;gBAC9J,CAAC;gBACD,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC;oBACnF,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,IAAI,IAAI,IAAI,OAAO,CAAC,YAAY,IAAI,EAAE,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC;wBAC5E,mDAAO,CAAC,MAAM,CAAC,cAAc,GAAG,GAAG,GAAG,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;wBACpF,OAAO,GAAG,KAAK,CAAC;wBAChB,MAAM,CAAC,KAAK,CAAC;oBACf,CAAC;gBACH,CAAC;gBACD,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;oBACxF,EAAE,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;wBAClB,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC;4BACnC,mDAAO,CAAC,MAAM,CAAC,WAAW,GAAG,GAAG,GAAG,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;4BACjF,OAAO,GAAG,KAAK,CAAC;4BAChB,MAAM,CAAC,KAAK,CAAC;wBACf,CAAC;wBACD,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,IAAI,IAAI,OAAO,CAAC,GAAG,IAAI,IAAI,IAAI,OAAO,CAAC,UAAU,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC;4BACxF,mDAAO,CAAC,MAAM,CAAC,WAAW,GAAG,GAAG,GAAG,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;4BACjF,OAAO,GAAG,KAAK,CAAC;4BAChB,MAAM,CAAC,KAAK,CAAC;wBACf,CAAC;oBACH,CAAC;oBACD,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC;wBACtC,mDAAO,CAAC,MAAM,CAAC,YAAY,GAAG,GAAG,GAAG,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;wBAClF,OAAO,GAAG,KAAK,CAAC;wBAChB,MAAM,CAAC,KAAK,CAAC;oBACf,CAAC;gBACH,CAAC;gBACD,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;oBACjD,EAAE,CAAC,CAAC,OAAO,CAAC,mBAAmB,IAAI,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;wBAC5D,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,KAAK,IAAI,CAAC;4BAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC;wBACtD,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,gBAAgB,IAAI,OAAO,CAAC,UAAU,CAAC;wBACxE,EAAE,CAAC,CAAC,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,gBAAgB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBACpF,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,IAAI,CAAC;4BAAC,SAAS,IAAI,OAAO,CAAC,SAAS,CAAC;wBAC/D,EAAE,CAAC,CAAC,OAAO,CAAC,YAAY,KAAK,IAAI,CAAC;4BAAC,YAAY,IAAI,OAAO,CAAC,YAAY,CAAC;wBACxE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,iBAAiB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBAC1G,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,iBAAiB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBACzG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,iBAAiB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBACzG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,iBAAiB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBACzG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,EAAE,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,kBAAkB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBAC3G,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,sBAAsB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBAC/G,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,sBAAsB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBAE3J,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,WAAW,IAAI,OAAO,CAAC,UAAU,CAAC;wBACvF,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,WAAW,IAAI,OAAO,CAAC,UAAU,CAAC;wBACvF,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,WAAW,IAAI,OAAO,CAAC,UAAU,CAAC;wBACvF,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,EAAE,IAAI,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,YAAY,IAAI,OAAO,CAAC,UAAU,CAAC;wBACzF,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,gBAAgB,IAAI,OAAO,CAAC,UAAU,CAAC;wBAEzI,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;4BAAC,yBAAyB,IAAI,OAAO,CAAC,MAAM,CAAC;wBACnE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,yBAAyB,IAAI,OAAO,CAAC,MAAM,CAAC;wBAClE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,yBAAyB,IAAI,OAAO,CAAC,MAAM,CAAC;wBAClE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,yBAAyB,IAAI,OAAO,CAAC,MAAM,CAAC;wBAClE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,EAAE,CAAC;4BAAC,0BAA0B,IAAI,OAAO,CAAC,MAAM,CAAC;wBACpE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;4BAAC,8BAA8B,IAAI,OAAO,CAAC,MAAM,CAAC;wBACxE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC;4BAAC,8BAA8B,IAAI,OAAO,CAAC,MAAM,CAAC;oBACpH,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,KAAK,IAAI,CAAC;4BAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC;wBACtD,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,gBAAgB,IAAI,OAAO,CAAC,UAAU,CAAC;wBACxE,EAAE,CAAC,CAAC,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,gBAAgB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBACpF,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,IAAI,CAAC;4BAAC,SAAS,IAAI,OAAO,CAAC,SAAS,CAAC;wBAC/D,EAAE,CAAC,CAAC,OAAO,CAAC,YAAY,KAAK,IAAI,CAAC;4BAAC,YAAY,IAAI,OAAO,CAAC,YAAY,CAAC;wBACxE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,iBAAiB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBAC1G,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,iBAAiB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBACzG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,iBAAiB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBACzG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,iBAAiB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBACzG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,EAAE,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,kBAAkB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBAC3G,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,sBAAsB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBAC/G,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC;4BAAC,sBAAsB,IAAI,OAAO,CAAC,gBAAgB,CAAC;wBAE3J,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,WAAW,IAAI,OAAO,CAAC,UAAU,CAAC;wBACvF,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,WAAW,IAAI,OAAO,CAAC,UAAU,CAAC;wBACvF,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,WAAW,IAAI,OAAO,CAAC,UAAU,CAAC;wBACvF,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,EAAE,IAAI,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,YAAY,IAAI,OAAO,CAAC,UAAU,CAAC;wBACzF,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,OAAO,CAAC,UAAU,KAAK,IAAI,CAAC;4BAAC,gBAAgB,IAAI,OAAO,CAAC,UAAU,CAAC;wBAEzI,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;4BAAC,yBAAyB,IAAI,OAAO,CAAC,MAAM,CAAC;wBACnE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,yBAAyB,IAAI,OAAO,CAAC,MAAM,CAAC;wBAClE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,yBAAyB,IAAI,OAAO,CAAC,MAAM,CAAC;wBAClE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,yBAAyB,IAAI,OAAO,CAAC,MAAM,CAAC;wBAClE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,EAAE,CAAC;4BAAC,0BAA0B,IAAI,OAAO,CAAC,MAAM,CAAC;wBACpE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;4BAAC,8BAA8B,IAAI,OAAO,CAAC,MAAM,CAAC;wBACxE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC;4BAAC,8BAA8B,IAAI,OAAO,CAAC,MAAM,CAAC;oBACpH,CAAC;oBACD,2BAA2B;oBAC3B,EAAE,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC;wBAC9B,eAAe,IAAI,OAAO,CAAC,MAAM,CAAC;oBACpC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,eAAe,IAAI,IAAI,CAAC;wBACvC,eAAe,IAAI,OAAO,CAAC,eAAe,CAAC;oBAE7C,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,KAAK,GAAG,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,OAAO,CAAC,CAAC,CAAC;wBACnI,IAAI,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,GAAG,IAAI,IAAI,EAAjD,CAAiD,CAAC,CAAC,CAAC,CAAC,CAAC;wBACvG,IAAI,MAAI,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC;wBAClC,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;4BACvB,IAAI,gBAAc,GAAG,IAAI,CAAC;4BAC1B,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;gCACpC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;oCACrB,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,KAAK,MAAI,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;wCACrF,gBAAc,GAAG,KAAK,CAAC;oCACzB,CAAC;gCACH,CAAC;4BACH,CAAC,CAAC,CAAC;4BACH,EAAE,CAAC,CAAC,CAAC,gBAAc,CAAC,CAAC,CAAC;gCACpB,mDAAO,CAAC,MAAM,CAAC,oFAAoF,EAAE,OAAO,CAAC,CAAC;gCAC9G,OAAO,GAAG,KAAK,CAAC;gCAChB,MAAM,CAAC;4BACT,CAAC;wBACH,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;YACH,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,OAAK,WAAW,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;YAC9D,yFAAyF;YACzF,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,OAAK,WAAW,CAAC,gBAAgB,EAAE,kBAAkB,CAAC,CAAC;YAChF,QAAQ,CAAC,CAAC,CAAC,CAAC,gBAAgB,GAAG,OAAK,WAAW,CAAC,gBAAgB,EAAE,wBAAwB,CAAC,CAAC;YAC5F,QAAQ,CAAC,CAAC,CAAC,CAAC,iBAAiB,GAAG,iBAAiB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,iBAAiB,EAAE,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACjI,QAAQ,CAAC,CAAC,CAAC,CAAC,iBAAiB,GAAG,iBAAiB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,iBAAiB,EAAE,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACjI,QAAQ,CAAC,CAAC,CAAC,CAAC,iBAAiB,GAAG,iBAAiB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,iBAAiB,EAAE,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACjI,QAAQ,CAAC,CAAC,CAAC,CAAC,iBAAiB,GAAG,iBAAiB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,iBAAiB,EAAE,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACjI,QAAQ,CAAC,CAAC,CAAC,CAAC,kBAAkB,GAAG,kBAAkB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,kBAAkB,EAAE,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACpI,QAAQ,CAAC,CAAC,CAAC,CAAC,sBAAsB,GAAG,sBAAsB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,sBAAsB,EAAE,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAChJ,QAAQ,CAAC,CAAC,CAAC,CAAC,sBAAsB,GAAG,sBAAsB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,sBAAsB,EAAE,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAChJ,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,SAAS,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,SAAS,EAAE,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACzG,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,YAAY,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,YAAY,EAAE,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAClH,QAAQ,CAAC,CAAC,CAAC,CAAC,eAAe,GAAG,eAAe,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,eAAe,EAAE,uBAAuB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC1H,EAAE,CAAC,CAAC,OAAK,QAAQ,CAAC,CAAC,CAAC;gBAClB,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,WAAW,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACzG,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,WAAW,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACzG,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,WAAW,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACzG,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,YAAY,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,YAAY,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC5G,QAAQ,CAAC,CAAC,CAAC,CAAC,gBAAgB,GAAG,gBAAgB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,gBAAgB,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC1H,CAAC;YACD,QAAQ,CAAC,CAAC,CAAC,CAAC,yBAAyB,GAAG,yBAAyB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,yBAAyB,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC/I,QAAQ,CAAC,CAAC,CAAC,CAAC,yBAAyB,GAAG,yBAAyB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,yBAAyB,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC/I,QAAQ,CAAC,CAAC,CAAC,CAAC,yBAAyB,GAAG,yBAAyB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,yBAAyB,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC/I,QAAQ,CAAC,CAAC,CAAC,CAAC,yBAAyB,GAAG,yBAAyB,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,yBAAyB,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC/I,QAAQ,CAAC,CAAC,CAAC,CAAC,0BAA0B,GAAG,0BAA0B,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,0BAA0B,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAClJ,QAAQ,CAAC,CAAC,CAAC,CAAC,8BAA8B,GAAG,8BAA8B,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,8BAA8B,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC9J,QAAQ,CAAC,CAAC,CAAC,CAAC,8BAA8B,GAAG,8BAA8B,IAAI,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,8BAA8B,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC9J,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,wBAAwB,CAAC,CAAC,CAAC,CAAC,OAAK,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,gBAAgB,EAAE,wBAAwB,CAAC,CAAC;YAC9K,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,OAAK,WAAW,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,EAAE,wBAAwB,CAAC,CAAC;YACpH,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,OAAK,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,gBAAgB,EAAE,wBAAwB,CAAC,CAAC;YACrG,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC;YAC1F,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;YACtF,IAAM,QAAQ,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,EAAE,wBAAwB,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,EAAE,OAAK,OAAO,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,CAAC;YACxL,QAAQ,CAAC,CAAC,CAAC,CAAC,kBAAkB,GAAG,OAAK,cAAc,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,EAAE,QAAQ,EAAE,OAAK,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC;YAC7I,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,QAAQ,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,mBAAmB,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,QAAQ,IAAI,OAAO,CAAC,CAAC,CAAC;gBACrH,mDAAO,CAAC,MAAM,CAAC,8EAA8E,EAAE,OAAO,CAAC,CAAC;gBACxG,IAAI,cAAc,GAAG,CAAC,CAAC;gBACvB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC3B,cAAc,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC;gBACrD,CAAC;gBACD,OAAK,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAK,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,cAAc,EAAE,qBAAqB,CAAC,CAAC,CAAC;gBAC3G,OAAO,GAAG,KAAK,CAAC;;YAElB,CAAC;YACD,sFAAe,CAAC,gBAAgB,CAAC,IAAI,kFAAS,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;YACtE,eAAe;YACf,IAAI,gBAAgB,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,cAAI,IAAI,WAAI,CAAC,qBAAqB,EAA1B,CAA0B,CAAC,CAAC;YAC5F,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,IAAI,KAAK,CAAC,CAAC,CAAC;gBACpE,EAAE,CAAC,CAAC,gBAAgB,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACpD,EAAE,CAAC,CAAC,gBAAgB,CAAC,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;wBACjE,mDAAO,CAAC,MAAM,CAAC,OAAK,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,GAAG,GAAG,GAAG,OAAK,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;wCAC3G,KAAK;oBACd,CAAC;gBACH,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;wBAC/B,mDAAO,CAAC,MAAM,CAAC,OAAK,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,GAAG,GAAG,GAAG,OAAK,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;wCAC3G,KAAK;oBACd,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;;QAnLD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE;kCAA/B,CAAC;;;SAmLT;QAED,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC;QACpC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC5B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAC,KAAK,EAAE,KAAK;YACpD,MAAM,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,OAAO,EAAE,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,OAAO,EAAE,CAAC;QACzF,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,CAAC;IACjB,CAAC;IACD,kDAAc,GAAd,UAAe,KAAK,EAAE,KAAK;QACzB,0EAA0E;QAC1E,oBAAoB;QACpB,EAAE,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;YAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC7B,EAAE,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;YAAC,MAAM,CAAC,CAAC,CAAC;QAC5B,MAAM,CAAC,CAAC,CAAC;IACX,CAAC;IAAA,CAAC;IACF,uBAAuB;IACvB,2CAAO,GAAP;QACE,IAAI,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;QACpD,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACZ,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC,CAAC;gBAC/D,IAAM,YAAY,GAAG;oBACnB,KAAK,EAAE,IAAI,CAAC,WAAW;oBACvB,QAAQ,EAAE,KAAK;oBACf,UAAU,EAAE,cAAc;iBAC3B,CAAC;gBACF,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAEhD,8FAAwB,EACxB;oBACE,QAAQ,EAAE,QAAQ;oBAClB,QAAQ,EAAE,KAAK;oBACf,KAAK,EAAE,uBAAuB;oBAC9B,YAAY;iBACb,CACF,CAAC;gBACJ,IAAM,UAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;oBACxD,UAAQ,CAAC,WAAW,EAAE,CAAC;gBACzB,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAC7B,CAAC;QACH,CAAC;IACH,CAAC;IAED,uDAAmB,GAAnB;QAAA,iBAmNC;QAlNC,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;QACtC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC,CAAC;YAC/D,IAAI,YAAY,GAAG,EAAE,CAAC;YACtB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,iDAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;gBAChD,YAAY,GAAG,OAAO,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,YAAY,GAAG,QAAQ,CAAC;YAC1B,CAAC;YACD,IAAM,YAAY,GAAG;gBACnB,KAAK,EAAE,IAAI,CAAC,WAAW;gBACvB,QAAQ,EAAE,IAAI;gBACd,YAAY,EAAE,YAAY;gBAC1B,UAAU,EAAE,cAAc;aAC3B,CAAC;YAEF,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAEhD,8FAAwB,EACxB;gBACE,QAAQ,EAAE,QAAQ;gBAClB,QAAQ,EAAE,KAAK;gBACf,KAAK,EAAE,uBAAuB;gBAC9B,YAAY;aACb,CACF,CAAC;YACJ,IAAM,UAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;gBACxD,EAAE,CAAC,CAAC,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,IAAI,QAAQ,CAAC,CAAC,CAAC;oBAC9D,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;oBAChC,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBACtB,CAAC;gBACD,UAAQ,CAAC,WAAW,EAAE,CAAC;YACzB,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAChC,CAAC;QAGD,oHAAoH;QACpH,gFAAgF;QAChF,yCAAyC;QAEzC,kCAAkC;QAClC,iDAAiD;QACjD,4BAA4B;QAC5B,kDAAkD;QAClD,kDAAkD;QAClD,kCAAkC;QAClC,+CAA+C;QAC/C,yCAAyC;QACzC,6BAA6B;QAC7B,QAAQ;QACR,MAAM;QACN,WAAW;QACX,gBAAgB;QAChB,qDAAqD;QACrD,mBAAmB;QACnB,WAAW;QACX,oBAAoB;QACpB,IAAI;QACJ,yEAAyE;QACzE,kCAAkC;QAClC,+CAA+C;QAC/C,mEAAmE;QACnE,sDAAsD;QACtD,qCAAqC;QACrC,uBAAuB;QACvB,6BAA6B;QAC7B,gCAAgC;QAChC,+BAA+B;QAC/B,gCAAgC;QAChC,oDAAoD;QACpD,YAAY;QACZ,oBAAoB;QACpB,mCAAmC;QACnC,gCAAgC;QAChC,2BAA2B;QAC3B,0BAA0B;QAC1B,iCAAiC;QACjC,YAAY;QACZ,qCAAqC;QACrC,YAAY;QACZ,0BAA0B;QAC1B,0BAA0B;QAC1B,4BAA4B;QAC5B,2BAA2B;QAC3B,4BAA4B;QAC5B,2BAA2B;QAC3B,YAAY;QACZ,qBAAqB;QACrB,2BAA2B;QAC3B,YAAY;QAEZ,+BAA+B;QAC/B,+BAA+B;QAC/B,8BAA8B;QAC9B,gCAAgC;QAChC,6BAA6B;QAC7B,8BAA8B;QAC9B,oCAAoC;QACpC,YAAY;QACZ,qCAAqC;QACrC,8BAA8B;QAC9B,YAAY;QAEZ,qBAAqB;QACrB,2BAA2B;QAC3B,YAAY;QACZ,yCAAyC;QACzC,6BAA6B;QAC7B,yBAAyB;QACzB,0BAA0B;QAC1B,4CAA4C;QAC5C,sBAAsB;QACtB,uBAAuB;QACvB,YAAY;QACZ,wCAAwC;QACxC,gCAAgC;QAChC,+BAA+B;QAC/B,gCAAgC;QAChC,yBAAyB;QACzB,0BAA0B;QAC1B,uBAAuB;QACvB,sBAAsB;QACtB,8CAA8C;QAC9C,gCAAgC;QAChC,oCAAoC;QACpC,YAAY;QACZ,0DAA0D;QAC1D,8BAA8B;QAC9B,2BAA2B;QAC3B,YAAY;QACZ,yDAAyD;QACzD,+BAA+B;QAC/B,YAAY;QACZ,eAAe;QACf,uCAAuC;QACvC,qFAAqF;QACrF,0GAA0G;QAC1G,mLAAmL;QACnL,aAAa;QAEb,YAAY;QACZ,kGAAkG;QAClG,8BAA8B;QAC9B,uGAAuG;QACvG,0KAA0K;QAC1K,mHAAmH;QACnH,eAAe;QACf,aAAa;QAEb,gGAAgG;QAChG,+GAA+G;QAC/G,kGAAkG;QAClG,aAAa;QAEb,4BAA4B;QAC5B,sBAAsB;QACtB,gBAAgB;QAChB,wDAAwD;QACxD,kBAAkB;QAClB,qEAAqE;QACrE,sEAAsE;QACtE,mBAAmB;QACnB,iBAAiB;QACjB,aAAa;QAEb,sCAAsC;QACtC,mBAAmB;QACnB,2DAA2D;QAC3D,QAAQ;QAER,2CAA2C;QAC3C,iDAAiD;QACjD,6CAA6C;QAE7C,yCAAyC;QACzC,wCAAwC;QAExC,wFAAwF;QACxF,wFAAwF;QAExF,gCAAgC;QAChC,YAAY;QACZ,QAAQ;QAER,8CAA8C;QAC9C,8FAA8F;QAC9F,qBAAqB;QACrB,wDAAwD;QACxD,0BAA0B;QAC1B,gBAAgB;QAChB,UAAU;QACV,QAAQ;QAER,6BAA6B;QAC7B,0BAA0B;QAC1B,UAAU;QACV,gBAAgB;QAChB,gGAAgG;QAChG,UAAU;QACV,8CAA8C;QAC9C,aAAa;QACb,8CAA8C;QAC9C,2CAA2C;QAC3C,MAAM;QACN,yBAAyB;QACzB,2BAA2B;QAC3B,uBAAuB;QACvB,MAAM;IACR,CAAC;IA2BD,kDAAc,GAAd;QAAA,iBA4GC;QA3GC,IAAI,SAAS,CAAC;QACd,IAAI,eAAe,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;QAGtC,IAAI,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC;QAC/G,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC;QAElL,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,cAAI;YAC3B,IAAI,eAAe,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YACzF,IAAI,aAAa,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YACtF,IAAI,uBAAuB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,KAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;YACzG,IAAI,cAAc,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,KAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;YAC1F,IAAI,kBAAkB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,KAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YAC7F,IAAI,wBAAwB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,KAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YACnG,IAAI,cAAc,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YACtF,IAAI,uBAAuB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,KAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;YAE3G,IAAI,8BAA8B,GAAG,IAAI,EAAE,8BAA8B,GAAG,IAAI,EAAE,8BAA8B,GAAG,IAAI,EAAE,8BAA8B,GAAG,IAAI,EAAE,+BAA+B,GAAG,IAAI,EAAE,WAAW,GAAG,IAAI,EAAE,8BAA8B,GAAG,IAAI,EAAE,8BAA8B,GAAG,IAAI,CAAC;YAEzS,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAI;gBAChC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;oBAC3C,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;wBAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC5E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC3E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,WAAW,IAAI,IAAI,CAAC,UAAU,CAAC;wBAClD,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC3E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC3E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC;4BAAC,+BAA+B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC7E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC5E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;oBAClH,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC5E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC3E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,WAAW,IAAI,IAAI,CAAC,UAAU,CAAC;wBAClD,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC3E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC3E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC;4BAAC,+BAA+B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC7E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;wBAC5E,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC;4BAAC,8BAA8B,IAAI,IAAI,CAAC,gBAAgB,CAAC;oBAClH,CAAC;gBACH,CAAC;gBAED,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;gBACvB,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,cAAI;oBACjC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;oBACnB,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;oBACzB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;wBAChC,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;oBAChC,CAAC;gBACH,CAAC,CAAC,CAAC;gBAEH,IAAI,CAAC,MAAM,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;gBACzE,IAAI,CAAC,KAAK,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,aAAa,EAAE,SAAS,CAAC,CAAC;gBACtE,IAAI,CAAC,qBAAqB,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,qBAAqB,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;gBACvG,IAAI,CAAC,eAAe,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,EAAE,uBAAuB,EAAE,SAAS,CAAC,CAAC;gBACpG,IAAI,CAAC,QAAQ,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,eAAe,EAAE,SAAS,CAAC,CAAC;gBAC9E,IAAI,CAAC,SAAS,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;gBAC/E,IAAI,CAAC,YAAY,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;gBACrF,IAAI,CAAC,QAAQ,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,eAAe,EAAE,SAAS,CAAC,CAAC;gBAC9E,IAAI,CAAC,eAAe,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,EAAE,eAAe,EAAE,SAAS,CAAC,CAAC;gBAC5F,IAAI,CAAC,uBAAuB,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,uBAAuB,EAAE,uBAAuB,EAAE,SAAS,CAAC,CAAC;YAEtH,CAAC,CAAC,CAAC;YACH,IAAI,IAAI,GAAG,KAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,IAAI,CAAC,mBAAmB,EAAlC,CAAkC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,IAAI,CAAC;YACvC,CAAC;YACD,IAAI,CAAC,8BAA8B,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YAC9H,IAAI,CAAC,8BAA8B,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YAC9H,IAAI,CAAC,8BAA8B,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YAC9H,IAAI,CAAC,8BAA8B,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YAC9H,IAAI,CAAC,8BAA8B,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YAC9H,IAAI,CAAC,8BAA8B,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YAC9H,IAAI,CAAC,+BAA+B,GAAG,kDAAM,CAAC,WAAW,CAAC,+BAA+B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YAEhI,IAAI,CAAC,sBAAsB,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YACtH,IAAI,CAAC,sBAAsB,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YACtH,IAAI,CAAC,iBAAiB,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YACjH,IAAI,CAAC,iBAAiB,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YACjH,IAAI,CAAC,iBAAiB,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YACjH,IAAI,CAAC,iBAAiB,GAAG,kDAAM,CAAC,WAAW,CAAC,8BAA8B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YACjH,IAAI,CAAC,kBAAkB,GAAG,kDAAM,CAAC,WAAW,CAAC,+BAA+B,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YAGnH,IAAI,CAAC,sBAAsB,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,sBAAsB,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;YACzG,IAAI,CAAC,sBAAsB,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,sBAAsB,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;YACzG,IAAI,CAAC,yBAAyB,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,yBAAyB,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;YAC/G,IAAI,CAAC,yBAAyB,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,yBAAyB,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;YAC/G,IAAI,CAAC,yBAAyB,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,yBAAyB,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;YAC/G,IAAI,CAAC,yBAAyB,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,yBAAyB,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;YAC/G,IAAI,CAAC,0BAA0B,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,0BAA0B,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;YAEjH,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,IAAI,CAAC,gBAAgB,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,EAAE,kBAAkB,EAAE,SAAS,CAAC,CAAC;YACjG,IAAI,CAAC,WAAW,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,kBAAkB,EAAE,SAAS,CAAC,CAAC;YACvF,IAAI,CAAC,WAAW,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,kBAAkB,EAAE,SAAS,CAAC,CAAC;YACvF,IAAI,CAAC,YAAY,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,EAAE,kBAAkB,EAAE,SAAS,CAAC,CAAC;YAEzF,IAAI,CAAC,MAAM,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;YACzE,IAAI,CAAC,gBAAgB,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,EAAE,kBAAkB,EAAE,SAAS,CAAC,CAAC;YACjG,IAAI,CAAC,aAAa,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,EAAE,wBAAwB,EAAE,SAAS,CAAC,CAAC;YAEjG,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,eAAe,CAAC;IACzB,CAAC;IAED,+CAAW,GAAX;QACE,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,GAAG,CAAC;QACtB,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,GAAG,GAAG,GAAG,GAAG,CAAC;QACzC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,GAAG,EAAE,GAAG,GAAG,CAAC;QACzC,IAAI,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,EAAE,uBAAuB,CAAC,CAAC;QACtE,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC;QAC7D,GAAG,CAAC,IAAI,EAAE,CAAC;QACX,mDAAO,CAAC,WAAW,EAAE,CAAC;QAEtB,IAAI,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,wBAAwB,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,SAAS,CAAC,YAAE;YACrF,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,IAAI,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;gBACxC,IAAI,SAAS,GAAG,8DAAkB,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;gBAC5D,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC;gBACpD,GAAG,CAAC,KAAK,EAAE,CAAC;gBACZ,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,CAAC,CAAC;gBAC5D,yBAAyB;gBACzB,oIAAoI;gBACpI,6GAA6G;gBAC7G,yGAAyG;gBAEzG,MAAM;gBACN,yDAAyD;gBACzD,iBAAiB;YACnB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,CAAC,KAAK,EAAE,CAAC;gBACZ,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;YACb,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,6CAAS,GAAT;QACE,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,GAAG,CAAC;QACtB,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,GAAG,GAAG,GAAG,GAAG,CAAC;QACzC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,GAAG,EAAE,GAAG,GAAG,CAAC;QACzC,IAAI,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,EAAE,uBAAuB,CAAC,CAAC;QACtE,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC;QAC7D,GAAG,CAAC,IAAI,EAAE,CAAC;QACX,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,YAAE;YAC3D,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,IAAI,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;gBACxC,IAAI,SAAS,GAAG,8DAAkB,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;gBAC5D,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC;gBACpD,GAAG,CAAC,KAAK,EAAE,CAAC;gBACZ,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,CAAC,CAAC;gBAC5D,kHAAkH;gBAClH,uDAAuD;gBACvD,eAAe;YACjB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,CAAC,KAAK,EAAE,CAAC;gBACZ,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;YACb,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,0CAAM,GAAN,UAAO,IAAI;QAAX,iBAgCC;QA/BC,EAAE,CAAC,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,yBAAyB,CAAC,KAAK,EAAE,CAAC;YACvC,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,eAAe,EAAE;QACtB,EAAE,CAAC,CAAC,CAAC,sFAAe,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;YACvE,mDAAO,CAAC,MAAM,CAAC,mEAAM,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,eAAe,EAAE,oCAAM,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,oCAAM,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;YACjN,MAAM,CAAC;QACT,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC,CAAC,CAAC;YACnC,mDAAO,CAAC,MAAM,CAAC,6BAA6B,EAAE,OAAO,CAAC,CAAC;YACvD,MAAM,CAAC;QACT,CAAC;QACD,UAAU,CAAC;YACT,IAAI,OAAO,GAAG,KAAI,CAAC,qBAAqB,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YACzD,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACZ,EAAE,CAAC,CAAC,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC;oBACnB,EAAE,CAAC,CAAC,KAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;wBAC7B,KAAI,CAAC,eAAe,GAAG,IAAI,CAAC;wBAC5B,KAAI,CAAC,UAAU,EAAE,CAAC;wBAClB,KAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;wBACjC,MAAM;oBACR,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,KAAI,CAAC,mBAAmB,EAAE,CAAC;oBAC7B,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC;oBACzB,KAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oBAC5B,KAAI,CAAC,UAAU,EAAE,CAAC;gBACpB,CAAC;YACH,CAAC;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,KAAK;IACL,gDAAY,GAAZ;QAAA,iBAkBC;QAjBC,IAAM,YAAY,GAAG;YACnB,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,eAAe,EAAE,IAAI,CAAC,UAAU;YAChC,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,UAAU,EAAE,iDAAK,CAAC,UAAU,CAAC,MAAM;SACpC,CAAC;QACF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,8EAAgC,EAAE;YACzE,KAAK,EAAE,UAAU,EAAE,YAAY,gBAAE,QAAQ,EAAE,QAAQ;YACnD,QAAQ,EAAE,KAAK;SAChB,CAAC,CAAC;QACH,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;YAChD,IAAI,IAAI,GAAG,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,CAAC;YACnD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACpC,CAAC;YACD,QAAQ,CAAC,WAAW,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,8CAAU,GAAV,UAAW,UAAU;QACnB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,WAAW,IAAI,UAAU,EAA3B,CAA2B,CAAC,CAAC,CAAC,CAAC,CAAC;YACvE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,KAAK,IAAI,IAAI,CAAC,WAAW,IAAI,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACtF,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBAC1B,CAAC;gBACD,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YAAC,IAAI;gBAAC,MAAM,CAAC,EAAE,WAAW,EAAE,EAAE,EAAE,WAAW,EAAE,EAAE,EAAE,UAAU,EAAE,KAAK,EAAE,CAAC;QACxE,CAAC;IACH,CAAC;IAED,4CAAQ,GAAR,UAAS,QAAQ;QAAjB,iBA4EC;QA3EC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;QACD,UAAU,CAAC;YACT,IAAM,GAAG,GAAG,KAAI,CAAC,aAAa,CAAC,oBAAoB,EAAE,CAAC;YACtD,EAAE,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,MAAM,KAAK,OAAO,IAAI,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC;gBACpD,IAAM,YAAY,GAAG;oBACnB,UAAU,EAAE,SAAS;iBACtB,CAAC;gBACF,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,mEAAqB,EAAE;oBAC9D,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ;oBACrC,QAAQ,EAAE,KAAK;oBACf,YAAY;iBACb,CAAC,CAAC;gBACH,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;gBAEnC,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,EAAE,CAAC,CAAC,QAAQ,IAAI,WAAW,CAAC,CAAC,CAAC;oBAC5B,IAAM,YAAY,GAAG;wBACnB,KAAK,EAAE,KAAI,CAAC,WAAW;wBACvB,QAAQ,EAAE,KAAK;wBACf,UAAU,EAAE,cAAc;qBAC3B,CAAC;oBACF,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAEhD,8FAAwB,EACxB;wBACE,QAAQ,EAAE,QAAQ;wBAClB,QAAQ,EAAE,KAAK;wBACf,KAAK,EAAE,uBAAuB;wBAC9B,YAAY;qBACb,CACF,CAAC;oBACJ,IAAM,UAAQ,GAAG,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;wBACxD,UAAQ,CAAC,WAAW,EAAE,CAAC;oBACzB,CAAC,CAAC,CAAC;gBACL,CAAC;gBACD,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,IAAI,cAAc,CAAC,CAAC,CAAC;oBACpC,IAAI,YAAY,GAAG,EAAE,CAAC;oBACtB,EAAE,CAAC,CAAC,KAAI,CAAC,MAAM,IAAI,iDAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;wBAChD,YAAY,GAAG,OAAO,CAAC;oBACzB,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,YAAY,GAAG,QAAQ,CAAC;oBAC1B,CAAC;oBACD,IAAM,YAAY,GAAG;wBACnB,KAAK,EAAE,KAAI,CAAC,WAAW;wBACvB,QAAQ,EAAE,IAAI;wBACd,YAAY,EAAE,YAAY;wBAC1B,UAAU,EAAE,cAAc;qBAC3B,CAAC;oBAEF,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAEhD,8FAAwB,EACxB;wBACE,QAAQ,EAAE,QAAQ;wBAClB,QAAQ,EAAE,KAAK;wBACf,KAAK,EAAE,uBAAuB;wBAC9B,YAAY;qBACb,CACF,CAAC;oBACJ,IAAM,UAAQ,GAAG,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;wBACxD,EAAE,CAAC,CAAC,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,IAAI,QAAQ,CAAC,CAAC,CAAC;4BAC9D,KAAI,CAAC,gBAAgB,EAAE,CAAC;4BACxB,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;4BAChC,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;wBACtB,CAAC;wBACD,UAAQ,CAAC,WAAW,EAAE,CAAC;oBACzB,CAAC,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,wCAAI,GAAJ;QACE,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;QAC7B,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IACD,8BAA8B;IAC9B,qDAAiB,GAAjB;QAAA,iBAuBC;QAtBC,UAAU,CAAC;YACT,KAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,GAAG,EAAE,KAAK;gBAC7C,IAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrC,KAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;oBACxC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;wBACf,KAAK,WAAW;4BACd,KAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;4BACrB,KAAK,CAAC;wBACR,KAAK,qBAAqB;4BACxB,KAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;4BAC9B,KAAK,CAAC;wBACR,KAAK,cAAc;4BACjB,KAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;4BAC5B,KAAK,CAAC;wBACR;4BACE,KAAK,CAAC;oBAEV,CAAC;gBACH,CAAC,EAAE,UAAC,KAAK;gBACT,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,kDAAc,GAAd,UAAe,IAAI;QACjB,EAAE,CAAC,CAAC,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC;YACnB,IAAI,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;YAC9C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,aAAa,IAAI,eAAe,CAAC;YACtC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC1C,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,IAAI,CAAC,UAAU,EAAE,CAAC;YACpB,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAClD,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;gBACzB,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;gBACjE,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;gBAChC,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;gBAC7B,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,GAAG,SAAS,CAAC;gBAC1D,IAAI,CAAC,YAAY,EAAE,CAAC;YACtB,CAAC;QACH,CAAC;IACH,CAAC;IACD,gDAAY,GAAZ;QACE,IAAI,OAAO,GAAG,2BAA2B,CAAC;QAC1C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;YACjB,OAAO,GAAG,4BAA4B,CAAC;QACzC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YACd,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,EAAE,EAAE,WAAW,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAChE,IAAI;YACF,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;IACpC,CAAC;IAr1F+B;QAA/B,+DAAS,CAAC,sEAAmB,CAAC;kCAAW,sEAAmB;+DAAC;IADnD,yBAAyB;QALrC,+DAAS,CAAC;YACT,QAAQ,EAAE,wBAAwB;;;SAGnC,CAAC;yCA+EiB,+DAAc;YACJ,mFAAU;YACb,kEAAc;YAChB,8DAAU;YACP,yDAAa;YACf,uDAAW;YACJ,0FAAgB;YACnB,mFAAU;YAChB,yDAAQ;YACN,sFAAW;YACP,yEAAe;YACxB,uDAAM;YACE,+EAAc;OA1F7B,yBAAyB,CAu1FrC;IAAD,gCAAC;CAAA;AAv1FqC;;;;;;;;;;;;ACvCtC,0iBAA0iB,gDAAgD,0gCAA0gC,YAAY,2XAA2X,+BAA+B,0IAA0I,6CAA6C,gBAAgB,kCAAkC,iRAAiR,kDAAkD,gBAAgB,gCAAgC,4LAA4L,0CAA0C,gBAAgB,gCAAgC,4LAA4L,4CAA4C,IAAI,6CAA6C,uBAAuB,sCAAsC,4HAA4H,2CAA2C,uBAAuB,oCAAoC,sBAAsB,qBAAqB,0PAA0P,6CAA6C,uBAAuB,kCAAkC,kRAAkR,4CAA4C,uOAAuO,uDAAuD,uBAAuB,wCAAwC,oOAAoO,6CAA6C,sFAAsF,kCAAkC,+KAA+K,iDAAiD,sFAAsF,kCAAkC,gHAAgH,4CAA4C,sFAAsF,iCAAiC,0LAA0L,6CAA6C,gBAAgB,2CAA2C,wMAAwM,2CAA2C,uTAAuT,gDAAgD,uBAAuB,2CAA2C,8HAA8H,iCAAiC,uBAAuB,iCAAiC,2GAA2G,wBAAwB,iBAAiB,sBAAsB,uKAAuK,sBAAsB,6DAA6D,gCAAgC,wFAAwF,6CAA6C,4QAA4Q,sCAAsC,kFAAkF,6EAA6E,8CAA8C,uLAAuL,4CAA4C,4JAA4J,0CAA0C,6JAA6J,uCAAuC,iFAAiF,2BAA2B,6MAA6M,sCAAsC,+rBAA+rB,6NAA6N,8BAA8B,qGAAqG,yCAAyC,+HAA+H,iCAAiC,uHAAuH,mCAAmC,2JAA2J,mCAAmC,qMAAqM,qJAAqJ,yEAAyE,oCAAoC,8RAA8R,kDAAkD,0NAA0N,qBAAqB,koBAAkoB,4BAA4B,wKAAwK,gJAAgJ,usBAAusB,aAAa,2T;;;;;;;;;;;ACAv2Z,uCAAuC,UAAU,QAAQ,cAAc,WAAW,0BAA0B,gBAAgB,oBAAoB,cAAc,gBAAgB,aAAa,qBAAqB,YAAY,YAAY,eAAe,aAAa,gBAAgB,cAAc,YAAY,YAAY,2BAA2B,sBAAsB,oDAAoD,4BAA4B,wBAAwB,eAAe,WAAW,YAAY,qBAAqB,eAAe,WAAW,YAAY,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAvf;AACJ;AACnB;AACyD;AACvD;AACoB;AACL;AACmB;AACf;AACX;AAEf;AACL;AAC4C;AACuC;AAC9B;AAEtB;AACmB;AAClD;AACmE;AACtB;AACwB;AACH;AAC7B;AACS;AAO1E;IAoQE,wBACU,WAAwB,EACxB,WAAwB,EACxB,YAA4B,EAC5B,kBAAkC,EAClC,MAAc,EACd,KAAqB,EACtB,SAA2B,EAC1B,aAA4B,EAC5B,OAA0B,EAC1B,eAAgC,EAChC,cAA8B,EAC9B,kBAAsC;QAZhD,iBAsHC;QArHS,gBAAW,GAAX,WAAW,CAAa;QACxB,gBAAW,GAAX,WAAW,CAAa;QACxB,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,uBAAkB,GAAlB,kBAAkB,CAAgB;QAClC,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK,CAAgB;QACtB,cAAS,GAAT,SAAS,CAAkB;QAC1B,kBAAa,GAAb,aAAa,CAAe;QAC5B,YAAO,GAAP,OAAO,CAAmB;QAC1B,oBAAe,GAAf,eAAe,CAAiB;QAChC,mBAAc,GAAd,cAAc,CAAgB;QAC9B,uBAAkB,GAAlB,kBAAkB,CAAoB;QAzQhD,iBAAY,GAAe,EAAE,CAAC;QAC9B,kBAAa,GAAe,EAAE,CAAC;QAO/B,SAAI,GAAG,IAAI,CAAC;QACZ,sBAAiB,GAAG,IAAI,CAAC;QACzB,qBAAgB,GAAG,EAAE,CAAC;QACtB,kBAAa,GAAG,EAAE,CAAC;QACnB,eAAU,GAAQ,EAAE,CAAC;QAKrB,WAAM,GAAG,EAAE,CAAC;QACZ,gBAAW,GAAW,CAAC,CAAC;QACxB,4BAAuB,GAAG,EAAE,CAAC;QAC7B,WAAM,GAAG,EAAE,CAAC;QACZ,0BAAqB,GAAG,EAEvB,CAAC;QACM,cAAS,GAAG,KAAK,CAAC;QAC1B,WAAM,GAAQ,EAAE,CAAC;QACjB,YAAO,GAAQ,EAAE,CAAC;QAClB,iBAAY,GAAG,IAAI,CAAC;QAEpB,cAAS,GAAG;YACV,OAAO,EAAE,EAAE;YACX,iBAAiB,EAAE,EAAE;SACtB,CAAC;QACF,WAAM,GAAG,EAAE,CAAC;QACZ,gBAAW,GAAG,EAAE,CAAC;QAIjB,sBAAiB,GAAG,EAAE,CAAC;QACvB,eAAU,GAAQ,EAAE,CAAC;QACrB,mBAAc,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAEpC,WAAM,GAAY,KAAK,CAAC;QACxB,uBAAkB,GAAY,KAAK,CAAC;QAEpC,UAAK,GAAY,KAAK,CAAC;QAEvB,kBAAa,GAAW,CAAC,CAAC;QAC1B,gBAAW,GAAY,KAAK,CAAC;QAE7B,cAAS,GAAG,KAAK,CAAC;QAElB,iBAAY,GAAG,CAAC,CAAC;QACjB,eAAU,GAAG,CAAC,CAAC;QACf,WAAM,GAAY,KAAK,CAAC;QACxB,YAAO,GAAY,KAAK,CAAC;QACzB,aAAQ,GAAG,EAAE,CAAC;QAEd,mBAAc,GAAY,KAAK,CAAC;QAEhC,iBAAY,GAAQ,EAAE,CAAC;QAEvB,gBAAW,GAAG,KAAK,CAAC;QAIpB,YAAO,GAAG,KAAK,CAAC;QAIhB,eAAU,GAAG;YACX;gBACE,IAAI,EAAE,WAAW;gBACjB,KAAK,EAAE,UAAU;gBACjB,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,GAAG;aACb;YACD;gBACE,IAAI,EAAE,2CAA2C;gBACjD,KAAK,EAAE,gBAAgB;gBACvB,KAAK,EAAE,2CAA2C;gBAClD,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,SAAS;gBAChB,OAAO,EAAE,OAAO;aACjB;YACD;gBACE,IAAI,EAAE,kBAAkB;gBACxB,KAAK,EAAE,iBAAiB;gBACxB,KAAK,EAAE,kBAAkB;gBACzB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,cAAc;gBACrB,OAAO,EAAE,iBAAiB;aAC3B;YACD;gBACE,IAAI,EAAE,aAAa;gBACnB,KAAK,EAAE,YAAY;gBACnB,KAAK,EAAE,aAAa;gBACpB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,QAAQ;gBACf,OAAO,EAAE,MAAM;aAChB;YACD;gBACE,IAAI,EAAE,eAAe;gBACrB,KAAK,EAAE,cAAc;gBACrB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,UAAU;gBACjB,OAAO,EAAE,OAAO;aACjB;YACD;gBACE,IAAI,EAAE,2CAA2C;gBACjD,KAAK,EAAE,WAAW;gBAClB,KAAK,EAAE,2CAA2C;gBAClD,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,OAAO;aACjB;YACD;gBACE,IAAI,EAAE,2CAA2C;gBACjD,KAAK,EAAE,cAAc;gBACrB,KAAK,EAAE,2CAA2C;gBAClD,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,UAAU;gBACjB,OAAO,EAAE,SAAS;aACnB;YACD;gBACE,IAAI,EAAE,2CAA2C;gBACjD,KAAK,EAAE,aAAa;gBACpB,KAAK,EAAE,2CAA2C;gBAClD,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,eAAe;gBACtB,OAAO,EAAE,UAAU;aACpB;YACD;gBACE,IAAI,EAAE,iBAAiB;gBACvB,KAAK,EAAE,gBAAgB;gBACvB,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,aAAa;gBACpB,OAAO,EAAE,OAAO;aACjB;YACD;gBACE,IAAI,EAAE,eAAe;gBACrB,KAAK,EAAE,cAAc;gBACrB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,UAAU;gBACjB,OAAO,EAAE,GAAG;aACb;YACD;gBACE,IAAI,EAAE,cAAc;gBACpB,KAAK,EAAE,aAAa;gBACpB,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,SAAS;gBAChB,OAAO,EAAE,WAAW;aACrB;YACD;gBACE,IAAI,EAAE,cAAc;gBACpB,KAAK,EAAE,aAAa;gBACpB,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,iBAAiB;gBACxB,OAAO,EAAE,EAAE;aACZ;YACD;gBACE,IAAI,EAAE,uBAAuB;gBAC7B,KAAK,EAAE,sBAAsB;gBAC7B,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,4BAA4B;gBACnC,OAAO,EAAE,WAAW;aACrB;YACD;gBACE,IAAI,EAAE,iBAAiB;gBACvB,KAAK,EAAE,gBAAgB;gBACvB,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,YAAY;gBACnB,OAAO,EAAE,WAAW;aACrB;YACD;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,KAAK,EAAE,mBAAmB;gBAC1B,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,gBAAgB;gBACvB,OAAO,EAAE,GAAG;aACb;YACD;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,KAAK,EAAE,mBAAmB;gBAC1B,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,gBAAgB;gBACvB,OAAO,EAAE,GAAG;aACb;YACD;gBACE,IAAI,EAAE,wBAAwB;gBAC9B,KAAK,EAAE,uBAAuB;gBAC9B,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,qBAAqB;gBAC5B,OAAO,EAAE,WAAW;aACrB;YACD;gBACE,IAAI,EAAE,YAAY;gBAClB,KAAK,EAAE,WAAW;gBAClB,KAAK,EAAE,YAAY;gBACnB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,OAAO;aACjB;YACD;gBACE,IAAI,EAAE,gBAAgB;gBACtB,KAAK,EAAE,eAAe;gBACtB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,IAAI;aACd;YACD;gBACE,IAAI,EAAE,gBAAgB;gBACtB,KAAK,EAAE,eAAe;gBACtB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,IAAI;aACd;YACD;gBACE,IAAI,EAAE,gBAAgB;gBACtB,KAAK,EAAE,eAAe;gBACtB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,WAAW;aACrB;YACD;gBACE,IAAI,EAAE,eAAe;gBACrB,KAAK,EAAE,cAAc;gBACrB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,UAAU;gBACjB,OAAO,EAAE,WAAW;aACrB;SACF,CAAC;QACF,iBAAY,GAAG,EAAE;QACjB,WAAM,GAAG,UAAC,KAAK;YACb,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;YACtC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,GAAG,OAAO,GAAG,GAAG,CAAC;QAC9D,CAAC;QAupBD,kBAAa,GAAG,UAAC,GAAG;YAClB,KAAI,CAAC,cAAc,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,EAAE,KAAI,CAAC,YAAY,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC;YACjF,MAAM,CAAC,EAAE,CAAC;QACZ,CAAC;QA+yBD,oBAAe,GAAG,UAAC,IAAI;YACrB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACV,MAAM,CAAC,QAAQ,CAAC;YAClB,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;QACnB,CAAC;QA/7CC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAChD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAClD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;QACpD,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAG;YACZ,EAAE,EAAE,QAAQ;YACZ,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,mBAAmB;YACzD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK;SAClC;QACD,IAAI,CAAC,MAAM,GAAG,CAAC;gBACb,EAAE,EAAE,GAAG;gBACP,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM;gBAC5C,KAAK,EAAE;oBACL;wBACE,EAAE,EAAE,oBAAoB;wBACxB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,mBAAmB;wBACnD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK;qBAClC;oBACD;wBACE,EAAE,EAAE,KAAK;wBACT,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI;wBAC1C,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI;qBACjC;oBACD;wBACE,EAAE,EAAE,KAAK;wBACT,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM;wBAC5C,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM;qBACnC;oBACD;wBACE,EAAE,EAAE,KAAK;wBACT,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY;wBAClD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI;qBACjC;oBACD;wBACE,EAAE,EAAE,aAAa;wBACjB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,YAAY;wBACjD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU;qBACvC;oBACD;wBACE,EAAE,EAAE,YAAY;wBAChB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,mBAAmB;wBACnD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU;qBACvC;oBACD;wBACE,EAAE,EAAE,eAAe;wBACnB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,gBAAgB;wBACtD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK;qBAClC;oBACD;wBACE,EAAE,EAAE,YAAY;wBAChB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU;wBAChD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,QAAQ;qBACrC;oBACD;wBACE,EAAE,EAAE,YAAY;wBAChB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU;wBAChD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG;qBAChC;iBAEF;aACF,CAAC,CAAC;QACH,IAAI,CAAC,uBAAuB,GAAG,CAAC;gBAC9B,EAAE,EAAE,GAAG;gBACP,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW;gBAChD,KAAK,EAAE;oBACL;wBACE,EAAE,EAAE,kBAAkB;wBACtB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,gBAAgB;wBACrD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK;qBAClC;oBACD;wBACE,EAAE,EAAE,mCAAmC;wBACvC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,iCAAiC;wBACtE,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI;qBACjC;iBACF;aACF,CAAC,CAAC;QACH,IAAI,CAAC,iBAAiB,GAAG,CAAC;gBACxB,EAAE,EAAE,GAAG;gBACP,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG;gBACzC,KAAK,EAAE;oBACL;wBACE,EAAE,EAAE,iBAAiB;wBACrB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe;wBACpD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO;qBACpC;oBACD;wBACE,EAAE,EAAE,sBAAsB;wBAC1B,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,oBAAoB;wBACzD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO;qBACpC;iBACF;aACF,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,GAAG,CAAC;gBACb,EAAE,EAAE,GAAG;gBACP,IAAI,EAAE,EAAE;gBACR,KAAK,EAAE;oBACL;wBACE,EAAE,EAAE,aAAa;wBACjB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,gBAAgB;wBACtD,IAAI,EAAE,yBAAyB;qBAChC;iBACF;aACF,CAAC,CAAC;IACL,CAAC;IACD,iCAAQ,GAAR;QAAA,iBAsDC;QArDC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC7C,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,aAAG;YACnE,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC9B,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC5C,KAAI,CAAC,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAC,IAAI;oBAC9C,MAAM,cACD,IAAI,IACP,IAAI,EAAE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,IAC/C;gBACH,CAAC,CAAC;YACJ,CAAC;QACH,CAAC,CAAC;QACF,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,IAAI,YAAY,CAAC;YACnD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QACpB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,2BAA2B,CAAC;YAC5D,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;QAC3B,IAAI;YACF,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC/B,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;QACrD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC9F,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,CAAC;QAC3E,CAAC;QACD,IAAI,CAAC,SAAS,GAAG,gEAAoB,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QAC9F,IAAM,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrE,IAAM,IAAI,GAAG,eAAe,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,KAAK,WAAW,EAAjB,CAAiB,CAAC,CAAC;QAC5D,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAChC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QACjC,CAAC;QACD,IAAI,CAAC,qBAAqB,GAAG,4FAAiB,CAAC,gBAAgB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACjF,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;YACrD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC1C,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,WAAW,CAAC,CAAC,CAAC;oBAC1C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oBACnB,IAAI,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC;oBAC5D,EAAE,CAAC,CAAC,eAAe,IAAI,eAAe,CAAC,gBAAgB,IAAI,eAAe,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBACvG,IAAI,gBAAgB,GAAG,eAAe,CAAC,gBAAgB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,EAAlD,CAAkD,CAAC,CAAC;wBACxH,EAAE,CAAC,CAAC,gBAAgB,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC;4BAClD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;oBACnC,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,4CAA4C;YAC5C,yGAAyG;YACzG,IAAI;QACN,CAAC;IACH,CAAC;IAED,iCAAQ,GAAR,UAAS,KAAK;QACZ,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC1B,CAAC;IACD,sDAAsD;IACtD,mCAAU,GAAV,UAAW,EAAE;QACX,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,EAAE,IAAI,IAAI,CAAC,WAAW,KAAK,EAAE,CAAC,CAAC,CAAC;YACvD,IAAI,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAC7D,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC;gBAChB,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACvD,IAAI,CAAC,CAAC;gBACJ,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBACnE,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACvD,CAAC;QACH,CAAC;QACD,IAAI;YACF,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACvD,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IAExB,CAAC;IACD,iCAAQ,GAAR,UAAS,MAAO;QACd,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAM,GAAG,GAAG,EAAE,CAAC;QACf,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,IAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;YAC9D,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC;YAC7B,IAAI,CAAC,SAAS,GAAG;gBACf,OAAO,EAAE,IAAI,CAAC,OAAO;gBACrB,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;aAC1C,CAAC;QACJ,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;QAC3E,CAAC;IACH,CAAC;IAED,sCAAa,GAAb,UAAc,CAAC;QACb,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACtB,KAAK,SAAS;oBACZ,KAAK,CAAC;gBACR,KAAK,SAAS;oBACZ,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;wBACvB,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,sBAAsB,IAAI,YAAY,CAAC;4BAChD,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC;wBACvC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,sBAAsB,IAAI,QAAQ,CAAC;4BACjD,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC;wBACrC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,sBAAsB,IAAI,cAAc,CAAC;4BACvD,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC;wBACrC,IAAI;4BACF,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;oBACrC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC;oBACvC,CAAC;oBACD,KAAK,CAAC;gBACR,KAAK,QAAQ;oBACX,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC;oBACrC,KAAK,CAAC;gBACR;oBACE,KAAK,CAAC;YACV,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,GAAG,CAAC,CAAC,CAAC;gBACvG,IAAM,IAAI,GAAG,CAAC,CAAC,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;gBACrD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACrC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;wBACvB,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,cAAc,GAAG,cAAc,CAAC;oBAChD,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAED,kCAAS,GAAT,UAAU,CAAC;QACT,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC;IAED,2CAAkB,GAAlB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;YAC9B,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC/C,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,wCAAe,GAAf,UAAgB,IAAI;QAClB,MAAM,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACpB,KAAK,SAAS;gBACZ,KAAK,CAAC;YACR,KAAK,SAAS;gBACZ,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACrB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;gBACnD,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;gBACxD,CAAC;YACH,KAAK,QAAQ;gBACX,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;YACpD;gBACE,KAAK,CAAC;QACV,CAAC;IACH,CAAC;IAED,0CAA0C;IAC1C,yCAAgB,GAAhB,UAAiB,IAAS;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACrE,CAAC;QACD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC;IAC7C,CAAC;IAEK,kCAAS,GAAf;;;;;4BACuB,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,mDAAK,CAAC,WAAW,CAAC,WAAW,CAAC;;wBAAtF,cAAc,GAAG,SAAqE;wBAC1F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACT,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,KAAK,QAAQ,CAAC;wBACjC,mGAAmG;wBACnG,CAAC;4BACC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,iCAAiC,CAAC,CAAC,CAAC;wBAC5D,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,kCAAkC,CAAC,CAAC,CAAC;wBAC7D,CAAC;;;;;KACF;IAEK,6BAAI,GAAV,UAAW,IAAI;;;;;;4BACQ,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,mDAAK,CAAC,WAAW,CAAC,WAAW,CAAC;;wBAAtF,cAAc,GAAG,SAAqE;wBAC1F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACH,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;wBAC5C,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,YAAE;4BAClD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gCAC3B,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;oCACjB,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;oCACvB,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;oCACnC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;oCACtC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oCACpC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oCAChC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oCAC9B,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oCAC3B,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;oCAC/B,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;oCAC/B,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oCACjC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;oCACpC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;oCACtC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;oCACtC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;oCAC3C,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;oCACrC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;oCACxC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;oCAC7B,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oCAChC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;oCAChC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;oCACnC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oCACjC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oCAC9B,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wCACtE,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,cAAI;4CACpC,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC;4CAClB,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC;wCACzB,CAAC,CAAC,CAAC;oCACL,CAAC;oCACD,KAAI,CAAC,WAAW,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;oCACrC,KAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC;gCACjC,CAAC;gCACD,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC;oCACjC,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,iCAAiC,CAAC,CAAC,CAAC;gCAC5D,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,kCAAkC,CAAC,CAAC,CAAC;gCAC7D,CAAC;4BACH,CAAC;wBACH,CAAC,CAAC,CAAC;;;;;KACJ;IAEK,6BAAI,GAAV,UAAW,IAAI;;;;;;4BACQ,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,mDAAK,CAAC,WAAW,CAAC,WAAW,CAAC;;wBAAtF,cAAc,GAAG,SAAqE;wBAC1F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACL,OAAO,GAAG,IAAI,CAAC;wBACnB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACT,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,mDAAK,CAAC,SAAS,CAAC,MAAM,CAAC;gCAC1E,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;4BACtF,IAAI,CAAC,CAAC;gCACJ,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,mDAAK,CAAC,SAAS,CAAC,MAAM,IAAI,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,sBAAsB,CAAC,IAAI,oBAAoB,CAAC;oCACnK,qDAAO,CAAC,MAAM,CAAC,kDAAkD,EAAE,OAAO,CAAC,CAAC;gCAC9E,IAAI;oCACF,OAAO,GAAG,IAAI,CAAC;4BACnB,CAAC;wBACH,CAAC;wBACD,IAAI,CAAC,CAAC;4BACJ,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gCAClC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,CAAC,CAAC;oCACjC,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;gCAClC,IAAI,CAAC,CAAC;oCAEA,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,sBAAsB,EAAxB,CAAwB,CAAC,CAAC,CAAC,CAAC,CAAC;oCACvE,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,mDAAK,CAAC,SAAS,CAAC,MAAM,EAAlC,CAAkC,CAAC,CAAC,CAAC,CAAC,CAAC;oCACtF,EAAE,CAAC,CAAC,SAAS,IAAI,QAAQ,CAAC,CAAC,CAAC;wCAC1B,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;wCACpF,MAAM,gBAAC;oCACT,CAAC;oCAEK,gBAAgB,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,cAAI,IAAI,WAAI,CAAC,WAAW,IAAI,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,WAAW,EAArD,CAAqD,CAAC,CAAC;oCACjH,EAAE,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;wCACtB,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;wCACzE,MAAM,gBAAC;oCACT,CAAC;oCAEK,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAI,IAAI,WAAI,CAAC,eAAe,IAAI,CAAC,EAAzB,CAAyB,CAAC,CAAC;oCAChF,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;wCACjB,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,wBAAwB,EAAE,OAAO,CAAC,CAAC;wCAC5E,MAAM,gBAAC;oCACT,CAAC;oCAEG,YAAY,GAAG,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;oCACrC,kBAAgB,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,UAAC,GAAQ,IAAK,UAAG,CAAC,MAAM,EAAV,CAAU,CAAC,CAAC;oCACjE,MAAM,GAAG,YAAY,CAAC,KAAK,CAAC,aAAG,IAAI,sBAAa,CAAC,QAAQ,CAAC,GAAG,CAAC,EAA3B,CAA2B,CAAC,CAAC;oCACpE,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;wCACX,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;wCACpE,MAAM,gBAAC;oCACT,CAAC;oCAED,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;gCAC/B,CAAC;4BACH,CAAC;wBACH,CAAC;wBACD,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;4BACZ,EAAE,CAAC,CAAC,OAAO,CAAC,eAAe,KAAK,GAAG,CAAC,CAAC,CAAC;gCACpC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,sCAAoC,OAAO,CAAC,EAAI,CAAC,CAAC,CAAC;4BAC3E,CAAC;4BAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,eAAe,KAAK,GAAG,CAAC,CAAC,CAAC;gCAC3C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,uCAAqC,OAAO,CAAC,EAAI,CAAC,CAAC,CAAC;4BAC5E,CAAC;4BACD,IAAI,CAAC,CAAC;gCACJ,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC;oCACjC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,8BAA4B,0DAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,CAAG,CAAC,CAAC,CAAC;gCACrG,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+BAA6B,0DAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,CAAG,CAAC,CAAC,CAAC;gCACtG,CAAC;4BACH,CAAC;wBACH,CAAC;;;;;KACF;IAEK,uCAAc,GAApB,UAAqB,IAAI;;;;;gBACvB,qDAAO,CAAC,WAAW,EAAE,CAAC;gBAClB,IAAI,GAAG,EAAE,CAAC;gBACd,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACT,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACrB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC;gBAC3B,CAAC;gBACK,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;oBACnG,mBAAmB;oBACnB,UAAU,CAAC;wBACT,KAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;wBAC5C,KAAI,CAAC,mBAAmB,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAC,KAAK,EAAE,KAAK;4BAC7D,MAAM,CAAC,oCAAM,CAAC,KAAK,CAAC,UAAU,EAAE,qBAAqB,CAAC,CAAC,OAAO,EAAE,GAAG,oCAAM,CAAC,KAAK,CAAC,UAAU,EAAE,qBAAqB,CAAC,CAAC,OAAO,EAAE,CAAC;wBAC/H,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,MAAM,CAAC,UAAU,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC;wBACpD,KAAI,CAAC,MAAM,CAAC,6BAA6B,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC;wBACtE,KAAI,CAAC,MAAM,CAAC,oBAAoB,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC;wBACvE,KAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;wBAC5C,KAAI,CAAC,aAAa,GAAG,kDAAM,CAAC,8BAA8B,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;wBACnE,KAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,iBAAO;4BACtC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,aAAG;gCAC/B,EAAE,CAAC,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC;oCACrB,IAAM,IAAI,GAAG,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,CAAC,YAAY,EAA3B,CAA2B,CAAC,CAAC,CAAC,CAAC,CAAC;oCAC9E,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;wCACV,IAAM,QAAQ,GAAG;4CACf,IAAI,EAAE,GAAG,CAAC,YAAY;4CACtB,IAAI,EAAE,GAAG,CAAC,YAAY;4CACtB,KAAK,EAAE,GAAG,CAAC,YAAY,GAAG,IAAI,GAAG,GAAG,CAAC,YAAY;yCAClD,CAAC;wCACF,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oCACtC,CAAC;gCACH,CAAC;4BACH,CAAC,CAAC,CAAC;wBACL,CAAC,CAAC,CAAC;wBACH,IAAI,MAAM,GAAG,uFAAe,CAAC,eAAe,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;wBACzD,IAAM,YAAY,GAAG;4BACnB,QAAQ,EAAE,KAAI,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;4BACrD,MAAM,EAAE,KAAI,CAAC,MAAM;4BACnB,mBAAmB,EAAE,KAAI,CAAC,mBAAmB;4BAC7C,aAAa,EAAE,KAAI,CAAC,aAAa;4BACjC,UAAU,EAAE,KAAI,CAAC,UAAU;4BAC3B,MAAM,EAAE,MAAM;yBACf,CAAC;wBACF,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAEhD,2GAAyB,EACzB;4BACE,QAAQ,EAAE,QAAQ;4BAClB,QAAQ,EAAE,KAAK;4BACf,KAAK,EAAE,qBAAqB;4BAC5B,YAAY;yBACb,CACF,CAAC;wBACJ,IAAM,QAAQ,GAAG,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;4BACxD,EAAE,CAAC,CAAC,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;gCAClD,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC;gCACxB,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;4BACzB,CAAC;4BACD,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;4BAChC,QAAQ,CAAC,WAAW,EAAE,CAAC;wBACzB,CAAC,CAAC,CAAC;oBACL,CAAC,EAAE,EAAE,CAAC,CAAC;oBACP,qDAAO,CAAC,WAAW,EAAE,CAAC;gBACxB,CAAC,EAAE,UAAC,GAAG;gBACP,CAAC,EAAE;oBACD,QAAQ,CAAC,WAAW,EAAE,CAAC;gBACzB,CAAC,CAAC,CAAC;;;;KACJ;IAEK,sCAAa,GAAnB,UAAoB,GAAG;;;;;4BACA,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,mDAAK,CAAC,WAAW,CAAC,WAAW,CAAC;;wBAAtF,cAAc,GAAG,SAAqE;wBAC1F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACT,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;4BAC5B,qDAAO,CAAC,MAAM,CAAC,iFAAiF,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;4BACjH,MAAM,gBAAC;wBACT,CAAC;wBACD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;4BAC5B,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;wBACtF,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,EAAE,CAAC,CAAC,GAAG,CAAC,eAAe,KAAK,GAAG,CAAC,CAAC,CAAC;gCAChC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,sCAAoC,GAAG,CAAC,EAAI,CAAC,CAAC,CAAC;4BACvE,CAAC;4BAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,eAAe,KAAK,GAAG,CAAC,CAAC,CAAC;gCACvC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,uCAAqC,GAAG,CAAC,EAAI,CAAC,CAAC,CAAC;4BACxE,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC;oCACjC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,8BAA4B,0DAAc,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAAE,CAAG,CAAC,CAAC,CAAC;gCACjG,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+BAA6B,0DAAc,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAAE,CAAG,CAAC,CAAC,CAAC;gCAClG,CAAC;4BACH,CAAC;wBACH,CAAC;;;;;KACF;IAED,0CAAiB,GAAjB,UAAkB,IAAI;QACpB,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,GAAG,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,sCAAoC,IAAI,CAAC,EAAI,CAAC,CAAC,CAAC;QACxE,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,GAAG,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,uCAAqC,IAAI,CAAC,EAAI,CAAC,CAAC,CAAC;QACzE,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC;gBACjC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,8BAA4B,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAG,CAAC,CAAC,CAAC;YAClG,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,+BAA6B,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAG,CAAC,CAAC,CAAC;YACnG,CAAC;QACH,CAAC;IAEH,CAAC;IAEK,+BAAM,GAAZ,UAAa,IAAI;;;;;;4BACM,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,mDAAK,CAAC,WAAW,CAAC,WAAW,CAAC;;wBAAtF,cAAc,GAAG,SAAqE;wBAC1F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACT,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;4BAChC,WAAS,EAAE,CAAC;4BACd,QAAM,EAAE,CAAC;4BACb,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gCACT,KAAG,GAAG,IAAI,CAAC,EAAE,CAAC;4BAChB,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,KAAG,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;4BACpC,CAAC;4BACK,MAAM,GAAG,qDAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;4BAC9F,MAAM,CAAC,IAAI,CAAC,UAAC,YAAY;gCACvB,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;oCACjB,qDAAO,CAAC,WAAW,EAAE,CAAC;oCACtB,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAG,CAAC,CAAC,SAAS,CAAC,YAAE;wCACvC,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;4CAC5B,qDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;4CACjE,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;wCAClC,CAAC;wCAAC,IAAI,CAAC,CAAC;4CACN,qDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;wCACtC,CAAC;oCACH,CAAC,EAAE,aAAG;oCACN,CAAC,EAAE;wCACD,qDAAO,CAAC,WAAW,EAAE,CAAC;oCACxB,CAAC,CAAC,CAAC;gCACL,CAAC;4BACH,CAAC,CAAC,CAAC;wBACL,CAAC;;;;;KACF;IAED,8BAAK,GAAL;IAEA,CAAC;IACD,uCAAc,GAAd;QACE,IAAM,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;QACrC,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC9C,EAAE,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;gBAChD,cAAc,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;YAC1C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,cAAc,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;YAC1C,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,cAAc,CAAC,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;QAC1C,CAAC;IACH,CAAC;IAGD,kCAAS,GAAT,UAAU,IAAI;QAAd,iBAuDC;QAtDC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACrE,CAAC;QACD,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC9B,KAAK,GAAG,KAAK,CAAC;YAChB,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,WAAW,EAAb,CAAa,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC/D,KAAK,GAAG,KAAK,CAAC;YAChB,CAAC;QACH,CAAC;QAED,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;YACjD,qDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACpB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,WAAW,EAAb,CAAa,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;YACrE,CAAC;YACD,IAAI,CAAC,WAAW,CAAC,wBAAwB,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,UAAC,EAAO;gBAChF,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC/B,IAAM,YAAY,GAAG;wBACnB,MAAM,EAAE,IAAI;wBACZ,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK;wBAC7B,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO;qBAC5B,CAAC;oBACF,KAAI,CAAC,cAAc,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,qEAAsB,EAAE;wBACnE,QAAQ,EAAE,QAAQ;wBAClB,QAAQ,EAAE,KAAK;wBACf,KAAK,EAAE,qBAAqB;wBAC5B,YAAY;qBACb,CAAC,CAAC;oBACH,IAAM,UAAQ,GAAG,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;wBAClD,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;4BAChD,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC;4BACxB,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;4BACvB,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;4BAChC,UAAQ,CAAC,WAAW,EAAE,CAAC;wBACzB,CAAC;oBACH,CAAC,CAAC,CAAC;gBACL,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,qDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;gBACpE,CAAC;YAEH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,qDAAO,CAAC,WAAW,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;QACtE,CAAC;IACH,CAAC;IAED,uCAAc,GAAd,UAAe,IAAI;IAEnB,CAAC;IAED,oCAAW,GAAX,UAAY,EAAE;QAAd,iBAwBC;QAvBC,qDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,YAAE;YAC3D,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,IAAM,YAAY,GAAG;oBACnB,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI;iBACtB,CAAC;gBACF,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,6FAAqB,EAAE;oBAC9D,KAAK,EAAE,qBAAqB,EAAE,YAAY,gBAAE,QAAQ,EAAE,QAAQ;oBAC9D,QAAQ,EAAE,KAAK;iBAChB,CAAC,CAAC;gBACH,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;oBACjC,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;wBAC5C,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;oBAClC,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,qDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,qDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAOD,mCAAU,GAAV,UAAW,IAAK;IAEhB,CAAC;IAEK,uCAAc,GAApB;;;;;;4BACuB,qBAAM,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,mDAAK,CAAC,WAAW,CAAC,WAAW,CAAC;;wBAAtF,cAAc,GAAG,SAAqE;wBAC1F,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;4BAClB,MAAM,gBAAC;wBACT,qDAAO,CAAC,WAAW,EAAE,CAAC;wBAClB,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,UAAC,GAAQ;4BACpF,KAAI,CAAC,aAAa,GAAG,kDAAM,CAAC,8BAA8B,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;4BACnE,KAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;4BAC5C,KAAI,CAAC,MAAM,CAAC,UAAU,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC;4BACpD,KAAI,CAAC,MAAM,CAAC,6BAA6B,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC;4BACtE,KAAI,CAAC,MAAM,CAAC,oBAAoB,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC;4BACvE,KAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;4BAC5C,IAAI,MAAM,GAAG,uFAAe,CAAC,eAAe,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;4BAEzD,IAAM,YAAY,GAAG;gCACnB,QAAQ,EAAE,KAAI,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;gCACrD,MAAM,EAAE,KAAI,CAAC,MAAM;gCACnB,iBAAiB,EAAE,KAAI,CAAC,iBAAiB;gCACzC,aAAa,EAAE,KAAI,CAAC,aAAa;gCACjC,UAAU,EAAE,KAAI,CAAC,UAAU;gCAC3B,MAAM,EAAE,MAAM;6BACf,CAAC;4BACF,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAClD,2GAAyB,EACzB;gCACE,QAAQ,EAAE,QAAQ;gCAClB,QAAQ,EAAE,KAAK;gCACf,KAAK,EAAE,qBAAqB;gCAC5B,YAAY;6BACb,CACF,CAAC;4BACF,IAAM,QAAQ,GAAG,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;gCACxD,EAAE,CAAC,CAAC,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;oCAClD,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC;oCACxB,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;gCACzB,CAAC;gCACD,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;gCAChC,QAAQ,CAAC,WAAW,EAAE,CAAC;4BACzB,CAAC,CAAC,CAAC;4BACH,qDAAO,CAAC,WAAW,EAAE,CAAC;wBACxB,CAAC,EACC,aAAG,IAAM,CAAC,EACV,cAAQ,SAAS,CAAC,WAAW,EAAE,EAAC,CAAC,CAClC,CAAC;;;;;KACH;IACD,8BAAK,GAAL,UAAM,IAAI;IAEV,CAAC;IACD,0BAA0B;IAC1B,oCAAW,GAAX,UAAY,IAAI;IAEhB,CAAC;IACD,iCAAQ,GAAR;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAClC,IAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,MAAM,IAAI,cAAc,IAAI,CAAC,CAAC,MAAM,IAAI,mDAAK,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,IAAI,YAAY,CAAC,EAA9F,CAA8F,CAAC,CAAC;YAC5I,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;gBAC9B,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,GAAG,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;YAC5D,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;gBACtE,MAAM,CAAC;YACT,CAAC;QACH,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;YACtE,MAAM,CAAC;QACT,CAAC;IACH,CAAC;IACD,qCAAY,GAAZ;IAEA,CAAC;IACD,wCAAe,GAAf,UAAgB,CAAC;QACf,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,oBAAoB,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,KAAK,EAAE,CAAC;QACf,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,eAAe,CAAC,CAAC,CAAC;YAC7C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACzB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,aAAa,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,kBAAkB,CAAC,CAAC,CAAC;YAChD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,mCAAmC,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,iBAAiB,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC;QACvD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,sBAAsB,CAAC,CAAC,CAAC;YACpD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACnB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,IAAI,YAAY,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,IAAI,YAAY,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,IAAI,iBAAiB,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,YAAY,CAAC,CAAC,CAAC;YAC1C,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC;IACH,CAAC;IACD,sCAAa,GAAb,UAAc,IAAI;QAChB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC5C,IAAM,YAAY,GAAG;YACnB,MAAM,EAAE,MAAM;YACd,UAAU,EAAE,mBAAmB;SAChC,CAAC;QACF,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,sEAAuB,EAAE;YACpE,QAAQ,EAAE,QAAQ;YAClB,QAAQ,EAAE,IAAI;YACd,KAAK,EAAE,6BAA6B;YACpC,YAAY;SACb,CAAC,CAAC;QACH,IAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;YAClD,QAAQ,CAAC,WAAW,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,yBAAyB;IACzB,yCAAgB,GAAhB;QAAA,iBAkBC;QAjBC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,iBAAO;YACjE,IAAM,IAAI,GAAQ,OAAO,CAAC;YAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,iBAAiB,CAAC,CAAC,CAAC;gBACvC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAE/B,CAAC;gBACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC;oBAChC,IAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,EAAE,uBAAuB,CAAC,CAAC;oBAC1E,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,OAAO,CAAC,KAAK,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC;oBACrD,CAAC;oBACD,IAAI;wBACF,KAAK,CAAC,KAAK,EAAE,CAAC;oBAChB,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;oBAC1C,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,oCAAW,GAAX;QACE,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;IACjC,CAAC;IACD,2BAA2B;IAC3B,2CAAkB,GAAlB,UAAmB,IAAI;QACrB,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1C,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC;gBACtB,MAAM,CAAC,eAAe,CAAC;YACzB,IAAI;gBACF,MAAM,CAAC,iBAAiB,CAAC;QAC7B,CAAC;QACD,IAAI;YACF,MAAM,CAAC,EAAE,CAAC;IACd,CAAC;IAED,uCAAc,GAAd,UAAe,CAAC;QACd,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC;YAC1D,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;IACD,iCAAQ,GAAR;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAClC,IAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,WAAW,EAAb,CAAa,CAAC,CAAC;YAC3D,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,GAAG,GAAG,EAAE,CAAC;gBACb,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;gBAC1B,qDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,IAAI,KAAG,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,YAAE;oBACpD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;wBAC3B,kDAAM,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;oBACrE,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,qDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oBACtC,CAAC;gBACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;oBACb,KAAG,CAAC,WAAW,EAAE,CAAC;oBAClB,qDAAO,CAAC,WAAW,EAAE,CAAC;gBACxB,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;gBACtE,MAAM,CAAC;YACT,CAAC;QACH,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;YACtE,MAAM,CAAC;QACT,CAAC;IACH,CAAC;IACD,6BAAI,GAAJ,UAAK,IAAI;QACP,IAAI,oBAAoB,GAAG,IAAI,CAAC;QAChC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;YAC1C,IAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC;YAChC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;gBAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;oBACpC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;gBACzC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACxB,CAAC;gBACD,IAAI,GAAG,GAAG,EAAE,CAAC;gBACb,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACT,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBAClB,EAAE,CAAC,CAAC,CAAC,0DAAc,CAAC,mBAAmB,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;wBAChE,oBAAoB,GAAG,KAAK,CAAC;gBACjC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;oBAC1B,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,WAAC,IAAI,iEAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC,mBAAmB,CAAC,EAAzD,CAAyD,CAAC,CAAC;oBAC7F,IAAI,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,0DAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC,mBAAmB,CAAC,EAA1D,CAA0D,CAAC,CAAC;oBACjG,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,IAAI,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBACtD,qDAAO,CAAC,MAAM,CAAC,6EAA6E,EAAE,OAAO,CAAC,CAAC;wBACvG,MAAM,CAAC;oBACT,CAAC;oBACD,IAAI,CAAC,EAAE,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC;wBAChC,oBAAoB,GAAG,KAAK,CAAC;gBACjC,CAAC;gBACD,EAAE,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;oBACzB,IAAM,YAAY,GAAG;wBACnB,KAAK,EAAE,GAAG;wBACV,QAAQ,EAAE,KAAK;wBACf,YAAY,EAAE,EAAE;wBAChB,UAAU,EAAE,mDAAK,CAAC,QAAQ,CAAC,oBAAoB;qBAChD,CAAC;oBACF,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;gBACxD,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC,CAAC;wBACrD,IAAI,MAAI,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;wBACjD,MAAI,CAAC,SAAS,CAAC,GAAG,mDAAK,CAAC,aAAa,CAAC,MAAM,CAAC;wBAC7C,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,MAAI,CAAC,CAAC;oBACvC,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,IAAM,YAAY,GAAG;4BACnB,KAAK,EAAE,GAAG;4BACV,QAAQ,EAAE,KAAK;4BACf,YAAY,EAAE,EAAE;4BAChB,UAAU,EAAE,mDAAK,CAAC,QAAQ,CAAC,eAAe;4BAC1C,QAAQ,EAAE,oBAAoB;yBAC/B,CAAC;wBACF,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;oBACxD,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;YACrE,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;QACrE,CAAC;IACH,CAAC;IACK,iCAAQ,GAAd,UAAe,IAAK;;;;;gBAClB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACrB,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBACrE,CAAC;gBACD,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACjC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,CAAC,CAAC;wBAC5D,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;4BAClC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM;4BACtC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,cAAI,IAAI,QAAC,IAAI,CAAC,WAAW,EAAjB,CAAiB,CAAC;4BACnE,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gCACxB,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oCACjC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;wCACjB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,YAAE;4CAC7D,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gDAC3B,qDAAO,CAAC,WAAW,EAAE,CAAC;gDACtB,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;oDAC7B,KAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;oDAClD,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;oDACvC,KAAI,CAAC,aAAa,CAAC,UAAU,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,IAAI,CAAC;gDACpE,CAAC,CAAC;gDACF,UAAU,CAAC;oDACT,qDAAO,CAAC,WAAW,EAAE,CAAC;oDACtB,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;gDAC1C,CAAC,EAAE,IAAI,CAAC,CAAC;4CACX,CAAC;4CAAC,IAAI,CAAC,CAAC;gDACN,MAAM,CAAC,IAAI,CAAC;4CACd,CAAC;wCACH,CAAC,CAAC,CAAC;oCACL,CAAC;oCAAC,IAAI,CAAC,CAAC;wCACN,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oCAC1B,CAAC;gCACH,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,YAAE;wCACpE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;4CAC3B,qDAAO,CAAC,WAAW,EAAE,CAAC;4CACtB,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;gDAC7B,KAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;gDAClD,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gDACvC,KAAI,CAAC,aAAa,CAAC,UAAU,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,IAAI,CAAC;4CACpE,CAAC,CAAC;4CACF,UAAU,CAAC;gDACT,qDAAO,CAAC,WAAW,EAAE,CAAC;gDACtB,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;4CAC1C,CAAC,EAAE,IAAI,CAAC,CAAC;wCACX,CAAC;wCAAC,IAAI,CAAC,CAAC;4CACN,MAAM,CAAC,IAAI,CAAC;wCACd,CAAC;oCACH,CAAC,CAAC,CAAC;gCACL,CAAC;4BACH,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,qDAAO,CAAC,MAAM,CAAC,+BAA+B,EAAE,OAAO,CAAC;4BAC1D,CAAC;wBACH,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,IAAI,CAAC,WAAW,GAAG,CAAC;4BACpB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gCACT,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oCACrB,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wCACjC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;4CACjB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,YAAE;gDAC7D,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oDAC3B,qDAAO,CAAC,WAAW,EAAE,CAAC;oDACtB,KAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;oDAClD,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;oDACvC,KAAI,CAAC,aAAa,CAAC,UAAU,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,IAAI,CAAC;oDAClE,UAAU,CAAC;wDACT,qDAAO,CAAC,WAAW,EAAE,CAAC;wDACtB,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;wDACxC,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;oDACvB,CAAC,EAAE,IAAI,CAAC,CAAC;gDACX,CAAC;gDAAC,IAAI,CAAC,CAAC;oDACN,MAAM,CAAC,IAAI,CAAC;gDACd,CAAC;4CACH,CAAC,CAAC,CAAC;wCACL,CAAC;wCAAC,IAAI,CAAC,CAAC;4CACN,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;4CACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;wCACxB,CAAC;oCACH,CAAC;oCAAC,IAAI,CAAC,CAAC;wCACN,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,YAAE;4CACpE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gDAC3B,qDAAO,CAAC,WAAW,EAAE,CAAC;gDACtB,KAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;gDAClD,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;gDACvC,KAAI,CAAC,aAAa,CAAC,UAAU,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,IAAI,CAAC;gDAClE,UAAU,CAAC;oDACT,qDAAO,CAAC,WAAW,EAAE,CAAC;oDACtB,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;gDAC1C,CAAC,EAAE,IAAI,CAAC,CAAC;4CACX,CAAC;4CAAC,IAAI,CAAC,CAAC;gDACN,MAAM,CAAC,IAAI,CAAC;4CACd,CAAC;wCACH,CAAC,CAAC,CAAC;oCACL,CAAC;gCACH,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,qDAAO,CAAC,MAAM,CAAC,+BAA+B,EAAE,OAAO,CAAC;gCAC1D,CAAC;4BACH,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;oCACjB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,YAAE;wCAC7D,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;4CAC3B,qDAAO,CAAC,WAAW,EAAE,CAAC;4CACtB,KAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAI,CAAC,SAAS,CAAC,CAAC;4CAC5D,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;4CACvC,KAAI,CAAC,aAAa,CAAC,UAAU,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,IAAI,CAAC;4CAClE,UAAU,CAAC;gDACT,qDAAO,CAAC,WAAW,EAAE,CAAC;gDACtB,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;gDACxC,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;4CACxB,CAAC,EAAE,IAAI,CAAC,CAAC;wCACX,CAAC;wCAAC,IAAI,CAAC,CAAC;4CACN,MAAM,CAAC,IAAI,CAAC;wCACd,CAAC;oCACH,CAAC,CAAC,CAAC;gCACL,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oCACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gCACxB,CAAC;4BACH,CAAC;wBACH,CAAC;oBACH,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,qDAAO,CAAC,MAAM,CAAC,uBAAuB,EAAE,OAAO,CAAC;oBAClD,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,qDAAO,CAAC,MAAM,CAAC,6BAA6B,EAAE,OAAO,CAAC;gBACxD,CAAC;;;;KACF;IACD,4BAAG,GAAH;QACE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IAC3B,CAAC;IACD,6CAAoB,GAApB,UAAqB,QAAQ,EAAE,IAAI;QAAnC,iBA0XC;QAzXC,IAAI,eAAe,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACvD,IAAI,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;QACjD,IAAI,UAAU,GAAG,cAAc,CAAC,IAAI,GAAG,SAAS,CAAC;QACjD,IAAI,uBAAuB,GAAG,cAAc,CAAC,uBAAuB,CAAC;QACrE,IAAI,eAAe,GAAG,cAAc,CAAC,eAAe,CAAC;QACrD,IAAI,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC;QACtC,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,MAAM,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;YAC5B,KAAK,mDAAK,CAAC,UAAU,CAAC,KAAK;gBACzB,SAAS,GAAG,OAAO,CAAC;gBACpB,KAAK,CAAC;YACR,KAAK,mDAAK,CAAC,UAAU,CAAC,OAAO;gBAC3B,SAAS,GAAG,OAAO,CAAC;gBACpB,KAAK,CAAC;YACR,KAAK,mDAAK,CAAC,UAAU,CAAC,OAAO;gBAC3B,SAAS,GAAG,OAAO,CAAC;gBACpB,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC;gBAC5B,KAAK,CAAC;YACR;gBACE,SAAS,GAAG,OAAO,CAAC;gBACpB,KAAK,CAAC;QACV,CAAC;QACD,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC;QAC9D,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC9C,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;QACpC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACxD,MAAM,EAAE,CAAC;QACT,uBAAuB;QACvB,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,GAAG,CAAC,kBAAkB,EAAE,iBAAiB,GAAG,KAAK,GAAG,UAAU,GAAG,uBAAuB,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC3L,SAAS;QACT,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,kBAAkB,EAAE,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC5I,sBAAsB;QACtB,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC1F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,kBAAkB,EAAE,iBAAiB,GAAG,KAAK,GAAG,UAAU,GAAG,eAAe,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QACvM,eAAe;QACf,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACvF,6BAA6B;QAC7B,eAAe;QACf,IAAI,CAAC,GAAQ,oCAAM,EAAE,CAAC;QACtB,IAAI,OAAY,CAAC;QACjB,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC;YACjB,OAAO,GAAG,oCAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACnC,IAAI;YACF,OAAO,GAAG,oCAAM,EAAE,CAAC;QACrB,IAAI,OAAO,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;QAC7B,IAAI,QAAQ,GAAG,OAAO,CAAC,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7D,IAAI,MAAM,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;QAC5B,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3D,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAErE,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5D,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAExE,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1D,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAErE,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;YAChE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAC1F,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3D,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QACtF,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC;YACvE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC,CAAC;QACzI,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC;YACvF,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACvF,IAAI;YACF,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACzE,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC;YACnF,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,oCAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;QAChH,IAAI;YACF,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACvE,qBAAqB;QACrB,EAAE,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;YAC3B,EAAE,CAAC,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAC;gBAClC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;gBAC1F,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACtE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;oBAC7F,EAAE,CAAC,CAAC,IAAI,CAAC,sBAAsB,IAAI,oBAAoB,CAAC;wBACtD,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;gBACrG,CAAC;YACH,CAAC;YACD,IAAI;gBACF,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QAC7F,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,CAAC,CAAC;YAC5D,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;YACrD,8BAA8B;YAC9B,6EAA6E;YAC7E,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAChF,yEAAyE;YACzE,wGAAwG;QAC1G,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;YAC5C,8BAA8B;YAC9B,oEAAoE;YACpE,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAChF,yEAAyE;YACzE,wGAAwG;QAC1G,CAAC;QACD,wBAAwB;QACxB,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACtH,wBAAwB;QACxB,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACrH,gBAAgB;QAChB,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACjG,IAAI,MAAI,GAAG,EAAE;YACb,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,MAAI,GAAG,IAAI,CAAC,aAAa;YAC3B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAI,GAAG,IAAI,CAAC,UAAU;YACxB,CAAC;YACD,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,MAAI,CAAC,CAAC;QACvG,CAAC;QACD,MAAM;QACN,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC/G,4BAA4B;QAC5B,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAChI,wBAAwB;QACxB,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QAC3H,4BAA4B;QAC5B,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5G,kBAAkB;QAClB,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACrH,UAAU;QACV,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAClH,cAAc;QACd,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7D,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACjF,eAAe;QACf,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAErH,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;QACnG,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChF,+BAA+B;QAC/B,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;QACrI,IAAI,MAAM,CAAC;QACX,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QACzI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC;QAE9J,IAAI,eAAe,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QACzF,kGAAkG;QAClG,kGAAkG;QAElG,IAAI,aAAa,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QACtF,IAAI,iBAAiB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;QAC9F,IAAI,cAAc,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QAC1F,IAAI,kBAAkB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QAC7F,IAAI,WAAW,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QAChF,IAAI,wBAAwB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACnG,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YAChB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,iBAAO;gBAChC,KAAI,CAAC,KAAK,IAAI,oDAAoD,CAAC;gBACnE,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,2DAA2D,GAAG,OAAO,CAAC,YAAY,GAAG,cAAc,CAAC;gBACvJ,KAAI,CAAC,KAAK,IAAI,OAAO,CAAC;gBACtB,KAAI,CAAC,KAAK,IAAI,oDAAoD,CAAC;gBACnE,IAAI,GAAG,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC7E,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACpC,IAAI,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;oBACjC,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;wBAClB,KAAK,WAAW;4BACd,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;gCAC9D,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,0CAA0C,GAAG,OAAO,CAAC,UAAU,GAAG,cAAc,CAAC;4BACtI,KAAK,CAAC;wBAER,KAAK,2CAA2C;4BAC9C,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,0GAA0G,GAAG,OAAO,CAAC,YAAY,GAAG,cAAc,CAAC;4BACtM,KAAK,CAAC;wBAER,KAAK,kBAAkB;4BACrB,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,kCAAkC,GAAG,OAAO,CAAC,YAAY,GAAG,cAAc,CAAC;4BAC9H,KAAK,CAAC;wBAER,KAAK,2CAA2C;4BAC9C,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;4BACzC,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,yFAAyF,GAAG,GAAG,GAAG,eAAe,CAAC;4BACrK,KAAK,CAAC;wBAER,KAAK,2CAA2C;4BAC9C,IAAI,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC;4BAC7E,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,+FAA+F,GAAG,eAAe,GAAG,eAAe,CAAC;4BACvL,KAAK,CAAC;wBAER,KAAK,2CAA2C;4BAC9C,IAAI,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;4BACpE,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,kGAAkG,GAAG,YAAY,GAAG,eAAe,CAAC;4BACvL,KAAK,CAAC;wBAER,0BAA0B;wBAC1B,gEAAgE;wBAChE,sIAAsI;wBACtI,WAAW;wBAEX,KAAK,eAAe;4BAClB,IAAI,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;4BAC7C,KAAI,CAAC,MAAM,CAAC,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;4BACvF,IAAI,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,eAAe,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;4BACrG,IAAI,SAAS,GAAG,EAAE,CAAC;4BACnB,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;gCACtB,EAAE,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC;oCAC5B,SAAS,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,cAAI,IAAI,WAAI,CAAC,IAAI,KAAK,OAAO,CAAC,SAAS,EAA/B,CAA+B,CAAC,CAAC,IAAI;gCACvF,CAAC;gCACD,QAAQ,IAAI,GAAG,GAAG,SAAS,CAAC;4BAC9B,CAAC;4BACD,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,qEAAqE,GAAG,QAAQ,GAAG,cAAc,CAAC;4BACrJ,KAAK,CAAC;wBAER,KAAK,cAAc;4BACjB,IAAI,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,EAAE,aAAa,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;4BAC1F,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,6CAA6C,GAAG,KAAK,GAAG,cAAc,CAAC;4BAC1H,KAAK,CAAC;wBAER,KAAK,oBAAoB;4BACvB,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;4BACzC,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,0DAA0D,GAAG,GAAG,GAAG,cAAc,CAAC;4BACrI,KAAK,CAAC;wBAER,KAAK,oBAAoB;4BACvB,IAAI,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;4BAC9D,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,mDAAmD,GAAG,UAAU,GAAG,cAAc,CAAC;4BACrI,KAAK,CAAC;wBAER,KAAK,cAAc;4BACjB,IAAI,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC;4BAC7E,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,6CAA6C,GAAG,eAAe,GAAG,cAAc,CAAC;4BACpI,KAAK,CAAC;wBAER,KAAK,iBAAiB;4BACpB,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,EAAE,cAAc,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;4BAC9F,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,gDAAgD,GAAG,MAAM,GAAG,cAAc,CAAC;4BAC9H,KAAK,CAAC;wBAER,KAAK,wBAAwB;4BAC3B,IAAI,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC;4BAChF,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,uDAAuD,GAAG,gBAAgB,GAAG,cAAc,CAAC;4BAC/I,KAAK,CAAC;wBAER,KAAK,gBAAgB;4BACnB,IAAI,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,CAAC;4BACtF,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,sDAAsD,GAAG,kBAAkB,GAAG,cAAc,CAAC;4BAChJ,KAAK,CAAC;wBAER,KAAK,gBAAgB;4BACnB,IAAI,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,CAAC;4BACtF,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,sDAAsD,GAAG,kBAAkB,GAAG,cAAc,CAAC;4BAChJ,KAAK,CAAC;wBAER,KAAK,uBAAuB;4BAC1B,IAAI,uBAAuB,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC,EAAE,CAAC;4BACrG,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,sDAAsD,GAAG,uBAAuB,GAAG,cAAc,CAAC;4BACrJ,KAAK,CAAC;wBAER,KAAK,aAAa;4BAChB,IAAI,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC;4BACvE,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,4CAA4C,GAAG,aAAa,GAAG,cAAc,CAAC;4BACjI,KAAK,CAAC;wBAER,KAAK,eAAe;4BAClB,IAAI,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC;4BAC1E,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,8CAA8C,GAAG,cAAc,GAAG,cAAc,CAAC;4BACpI,KAAK,CAAC;wBAER,KAAK,gBAAgB;4BACnB,IAAI,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;4BAC3D,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,+CAA+C,GAAG,SAAS,GAAG,cAAc,CAAC;4BAChI,KAAK,CAAC;wBAER,KAAK,eAAe;4BAClB,IAAI,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;4BACpE,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,8CAA8C,GAAG,YAAY,GAAG,cAAc,CAAC;4BAClI,KAAK,CAAC;oBACV,CAAC;gBACH,CAAC;gBACD,KAAI,CAAC,KAAK,IAAI,OAAO,CAAC;YACxB,CAAC,CAAC,CAAC;YACH,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC;gBACzC,IAAI,KAAK,GAAG,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;gBACjD,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;YACtC,CAAC;QACH,CAAC;QACD,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAG1F,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/E,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAEjH,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;YACrE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAEvG,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;YACrE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAEvG,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC;YACtE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;QAEzG,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;YACzE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAExF,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;YACnE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAE7F,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;YACpE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAExF,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;YACpE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAExF,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;YACrE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAE1F,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,CAAC;YACxE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAEjG,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/E,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAEzG,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1E,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAEpG,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1E,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAEpG,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3E,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAEtG,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;YACzE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAElG,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,CAAC,CAAC,CAAC;YACrF,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,cAAc,EAAE,MAAM,CAAC,CAAC,CAAC;QAEhJ,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACjE,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC;QACzG,CAAC;QACD,IAAI,CACF,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;YACnE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,EAAE,CAAC;QAEzE,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;YACrE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,kBAAkB,EAAE,MAAM,CAAC,CAAC,CAAC;QACxI,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,CAAC,CAAC,CAAC;YACrF,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,MAAM,CAAC,CAAC,CAAC;QAEpJ,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,EAAE,wBAAwB,EAAE,MAAM,CAAC,CAAC,CAAC;QAE9I,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAC1H,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;YACnE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,kBAAkB,EAAE,MAAM,CAAC,CAAC,CAAC;QAChI,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC;YACvE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,kBAAkB,EAAE,MAAM,CAAC,CAAC,CAAC;QACvI,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC;YACvE,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAGhG,UAAU;QACV,IAAI,SAAS,GAAG,qLACuC,GAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,eAAe,CAAC,SAAS,GAAG,wBAAwB,CAAC;QAC1I,SAAS,IAAI,SAAS,CAAC;QACvB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;IAC3B,CAAC;IACD,sCAAa,GAAb,UAAc,QAAQ,EAAE,QAAQ;QAC9B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC;YAClC,IAAI,CAAC,KAAK,IAAI,oDAAoD,CAAC;YACnE,IAAI,GAAG,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;gBAE3E,IAAI,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;gBACjC,IAAI,MAAM,GAAG,OAAK,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,SAAS,EAAnB,CAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjE,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBACX,IAAI,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC;oBAC/B,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;oBAC3B,EAAE,CAAC,CAAC,QAAQ,CAAC,UAAU,IAAI,mDAAK,CAAC,UAAU,CAAC,OAAO,CAAC;wBAClD,MAAM,GAAG,MAAM,CAAC;oBAClB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;wBACR,WAAW,GAAG,EAAE,CAAC;oBACnB,EAAE,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;wBACnE,OAAK,KAAK,IAAI,qBAAqB,GAAG,MAAM,GAAG,IAAI,GAAG,UAAU,GAAG,MAAM,CAAC,KAAK,GAAG,iBAAiB,GAAG,WAAW,GAAG,gBAAgB,CAAC;gBACzI,CAAC;YACH,CAAC;;YAbD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE;;aAalC;YACD,IAAI,CAAC,KAAK,IAAI,OAAO,CAAC;QACxB,CAAC;IACH,CAAC;IACD,uCAAc,GAAd,UAAe,GAAG,EAAE,GAAG;QAAvB,iBAUC;QATC,IAAM,UAAU,GAAG,mCAAmC,GAAG,GAAG,GAAG,OAAO,GAAG,GAAG,GAAG,UAAU,CAAC,CAAC,+BAA+B;QAC1H,IAAM,aAAa,GAAG;YACpB,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;SACZ,CAAC,CAAC,yBAAyB;QAC5B,8CAAM,CAAC,SAAS,CAAC,UAAU,EAAE,aAAa,EAAE,UAAC,GAAG,EAAE,GAAG;YACnD,EAAE,CAAC,CAAC,GAAG,CAAC;gBAAC,MAAM,GAAG,CAAC;YACnB,KAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,2CAAkB,GAAlB,UAAmB,CAAC;QAClB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,KAAK;IAC5B,CAAC;IACD,8BAAK,GAAL;QAAA,iBAMC;QALC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,UAAU,CAAC;YACT,KAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAED,kDAAyB,GAAzB,UAA0B,WAAW,EAAE,uBAAuB;QAC5D,uBAAuB,GAAG,UAAU,CAAC;QACrC,MAAM,CAAC,CAAC,CAAC,oBAAoB,EAAE,uBAAuB,IAAI,GAAG,EAAE,WAAW,CAAC,EAAE,IAAI,EAAE,CAAC,iBAAiB,EAAE,uBAAuB,IAAI,GAAG,EAAE,WAAW,CAAC,CAAC,CAAC;IACvJ,CAAC;IAQD,qCAAY,GAAZ;QAAA,iBAgCC;QA/BC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAClC,IAAI,oBAAoB,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,mDAAK,CAAC,SAAS,CAAC,MAAM,EAAlC,CAAkC,CAAC,CAAC;YAC7F,EAAE,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;gBAC1B,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,qCAAqC,EAAE,OAAO,CAAC,CAAC;gBACzF,MAAM,CAAC;YACT,CAAC;YACD,IAAI,WAAW,GAAG,iDAAW,CAAC,IAAI,CAAC,aAAa,CAAC;YACjD,IAAI,MAAM,GAAG,uFAAe,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACzD,IAAM,YAAY,GAAG;gBACnB,WAAW,EAAE,WAAW;gBACxB,QAAQ,EAAE,IAAI,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;gBACrD,MAAM,EAAE,MAAM;aACf,CAAC;YACF,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,6GAAyB,EAAE;gBACtE,QAAQ,EAAE,QAAQ;gBAClB,QAAQ,EAAE,KAAK;gBACf,KAAK,EAAE,qBAAqB;gBAC5B,YAAY;aACb,CAAC,CAAC;YACH,IAAM,UAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;gBAClD,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;oBAChD,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC;oBACxB,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;oBACvB,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;oBAChC,UAAQ,CAAC,WAAW,EAAE,CAAC;gBACzB,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,qCAAqC,EAAE,OAAO,CAAC,CAAC;QAC3F,CAAC;IACH,CAAC;IAED,oCAAW,GAAX,UAAY,IAAI;QACd,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACrE,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;YACtC,iCAAiC;YACjC,IAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,IAAI,cAAc,EAA1B,CAA0B,CAAC,CAAC;YACxE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;gBAC5B,IAAI,GAAG,GAAG,EAAE,CAAC;gBACb,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACT,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,cAAc,CAAC,CAAC,CAAC;wBACnC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBACpB,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;wBAClE,MAAM,CAAC;oBACT,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;gBAC5B,CAAC;gBACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC,CAAC;oBACrD,IAAM,MAAI,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;oBACzD,MAAI,CAAC,SAAS,CAAC,GAAG,mDAAK,CAAC,aAAa,CAAC,MAAM,CAAC;oBAC7C,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,MAAI,CAAC,CAAC;gBACvC,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,mBAAmB;oBACnB,IAAM,YAAY,GAAG;wBACnB,KAAK,EAAE,GAAG;wBACV,QAAQ,EAAE,KAAK;wBACf,YAAY,EAAE,EAAE;wBAChB,UAAU,EAAE,mDAAK,CAAC,QAAQ,CAAC,oBAAoB;qBAChD,CAAC;oBACF,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;gBACxD,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;YACrE,CAAC;QAEH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,qDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;QACrE,CAAC;IACH,CAAC;IA5xD2B;QAA3B,+DAAS,CAAC,kEAAe,CAAC;kCAAS,kEAAe;kDAAC;IACpB;QAA/B,+DAAS,CAAC,sEAAmB,CAAC;kCAAW,sEAAmB;oDAAC;IACrC;QAAxB,+DAAS,CAAC,YAAY,CAAC;;sDAAY;IACH;QAAhC,+DAAS,CAAC,4GAAoB,CAAC;kCAAc,4GAAoB;uDAAC;IAJxD,cAAc;QAL1B,+DAAS,CAAC;YACT,QAAQ,EAAE,WAAW;;;SAGtB,CAAC;yCAsQuB,0DAAW;YACX,sFAAW;YACV,4DAAc;YACR,4DAAc;YAC1B,sDAAM;YACP,8DAAc;YACX,oEAAgB;YACX,4DAAa;YACnB,6DAAiB;YACT,yEAAe;YAChB,+EAAc;YACV,wFAAkB;OAhRrC,cAAc,CA8xD1B;IAAD,qBAAC;CAAA;AA9xD0B;;;;;;;;;;;;AChC3B,gKAAgK,kiEAAkiE,8DAA8D,oHAAoH,qBAAqB,kBAAkB,gEAAgE,kBAAkB,y6BAAy6B,+OAA+O,8DAA8D,gBAAgB,0PAA0P,uCAAuC,6MAA6M,mCAAmC,kgBAAkgB,uCAAuC,4dAA4d,kDAAkD,+fAA+f,6CAA6C,6iDAA6iD,KAAK,kDAAkD,qEAAqE,4gBAA4gB,6CAA6C,8MAA8M,0CAA0C,ieAAie,4CAA4C,yoBAAyoB,4CAA4C,gUAAgU,wCAAwC,6QAA6Q,mCAAmC,qNAAqN,sgC;;;;;;;;;;;ACAh1U,qCAAqC,gBAAgB,aAAa,gBAAgB,qCAAqC,gBAAgB,2CAA2C,cAAc,iBAAiB,iBAAiB,2CAA2C,UAAU,2CAA2C,qBAAqB,sCAAsC,iBAAiB,uCAAuC,iBAAiB,wCAAwC,iBAAiB,sCAAsC,UAAU,sCAAsC,qBAAqB,yIAAyI,iBAAiB,iBAAiB,cAAc,eAAe,gBAAgB,cAAc,YAAY,mBAAmB,gBAAgB,8BAA8B,qBAAqB,YAAY,YAAY,8BAA8B,qBAAqB,YAAY,kBAAkB,YAAY,8BAA8B,qBAAqB,YAAY,kBAAkB,YAAY,8BAA8B,qBAAqB,YAAY,mBAAmB,YAAY,qEAAqE,YAAY,qCAAqC,UAAU,oCAAoC,UAAU,sCAAsC,UAAU,wCAAwC,WAAW,kBAAkB,uBAAuB,eAAe,WAAW,YAAY,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAx9C;AACjD;AAExB;AACE;AACwG;AAEtF;AACA;AACA;AACE;AACM;AAMI;AACR;AACjB;AACiB;AACT;AAC8B;AACA;AACV;AACI;AACb;AAC/B;AACqB;AAE2B;AACF;AAC6B;AAEZ;AAC1B;AAQjE;IAuPE,0BACU,KAAqB,EACrB,MAAc,EACd,YAA4B,EAC5B,WAAwB,EACxB,aAA4B,EAC5B,WAAwB,EACxB,KAAwB,EACzB,SAA2B,EAC1B,gBAAkC,EAClC,cAA8B,EAC9B,cAA8B,EAC9B,eAAgC,EAChC,OAA0B,EAC1B,UAAsB,EACtB,kBAAsC,EACtC,mBAAqC,EACrC,cAA8B;QAjBxC,iBAqBC;QApBS,UAAK,GAAL,KAAK,CAAgB;QACrB,WAAM,GAAN,MAAM,CAAQ;QACd,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,gBAAW,GAAX,WAAW,CAAa;QACxB,kBAAa,GAAb,aAAa,CAAe;QAC5B,gBAAW,GAAX,WAAW,CAAa;QACxB,UAAK,GAAL,KAAK,CAAmB;QACzB,cAAS,GAAT,SAAS,CAAkB;QAC1B,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,mBAAc,GAAd,cAAc,CAAgB;QAC9B,mBAAc,GAAd,cAAc,CAAgB;QAC9B,oBAAe,GAAf,eAAe,CAAiB;QAChC,YAAO,GAAP,OAAO,CAAmB;QAC1B,eAAU,GAAV,UAAU,CAAY;QACtB,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,wBAAmB,GAAnB,mBAAmB,CAAkB;QACrC,mBAAc,GAAd,cAAc,CAAgB;QAlQxC,YAAO,GAAc,IAAI,kFAAS,CAAC,CAAC,CAAC,CAAC;QACtC,cAAS,GAAG;YACV,MAAM,EAAE,EAAE;SACX,CAAC;QACF,mBAAc,GAAG,KAAK,CAAC,CAAC,sCAAsC;QAK9D,eAAU,GAAG,KAAK,CAAC;QACnB,gBAAW,GAAG,KAAK,CAAC;QACpB,aAAQ,GAAG,KAAK,CAAC;QACjB,sBAAiB,GAAG,KAAK,CAAC;QAC1B,cAAS,GAAG,KAAK,CAAC;QAGlB,cAAS,GAAQ,EAAE,CAAC;QACpB,WAAM,GAAQ,EAAE,CAAC;QACjB,cAAS,GAAG,KAAK,CAAC;QAClB,uBAAkB,GAAQ,EAAE,CAAC;QAC7B,iBAAY,GAAG,kDAAM,CAAC,sBAAsB,CAAC;QAC7C,kBAAa,GAAQ,EAAE,CAAC;QAGxB,aAAQ,GAAe,EAAE,CAAC;QAC1B,eAAU,GAAG,CAAC,CAAC;QAEf,wBAAmB,GAAG,KAAK,CAAC;QAE5B,aAAQ,GAAG,KAAK,CAAC;QAEjB,aAAQ,GAAG,KAAK,CAAC;QACjB,YAAO,GAAG,KAAK,CAAC;QAEhB,wBAAmB,GAAQ,EAAE,CAAC;QAG9B,uBAAkB,GAAQ,sDAAO,CAAC,kBAAkB,CAAC;QAGrD,0BAAqB,GAAY,IAAI,CAAC;QACtC,WAAM,GAAY,KAAK,CAAC;QAExB,eAAU,GAAY,KAAK,CAAC;QAC5B,uBAAkB,GAAY,KAAK,CAAC;QAEpC,aAAQ,GAAQ,EAAE,CAAC;QASnB,iBAAY,GAAW,QAAQ,CAAC;QAIhC,eAAU,GAAG;YACX;gBACE,IAAI,EAAE,WAAW;gBACjB,KAAK,EAAE,UAAU;gBACjB,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,GAAG;aACb;YACD;gBACE,IAAI,EAAE,2CAA2C;gBACjD,KAAK,EAAE,gBAAgB;gBACvB,KAAK,EAAE,2CAA2C;gBAClD,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,SAAS;gBAChB,OAAO,EAAE,OAAO;aACjB;YACD;gBACE,IAAI,EAAE,kBAAkB;gBACxB,KAAK,EAAE,iBAAiB;gBACxB,KAAK,EAAE,kBAAkB;gBACzB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,cAAc;gBACrB,OAAO,EAAE,iBAAiB;aAC3B;YACD;gBACE,IAAI,EAAE,aAAa;gBACnB,KAAK,EAAE,YAAY;gBACnB,KAAK,EAAE,aAAa;gBACpB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,QAAQ;gBACf,OAAO,EAAE,MAAM;aAChB;YACD;gBACE,IAAI,EAAE,eAAe;gBACrB,KAAK,EAAE,cAAc;gBACrB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,UAAU;gBACjB,OAAO,EAAE,OAAO;aACjB;YACD;gBACE,IAAI,EAAE,2CAA2C;gBACjD,KAAK,EAAE,WAAW;gBAClB,KAAK,EAAE,2CAA2C;gBAClD,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,OAAO;aACjB;YACD;gBACE,IAAI,EAAE,2CAA2C;gBACjD,KAAK,EAAE,cAAc;gBACrB,KAAK,EAAE,2CAA2C;gBAClD,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,UAAU;gBACjB,OAAO,EAAE,SAAS;aACnB;YACD;gBACE,IAAI,EAAE,2CAA2C;gBACjD,KAAK,EAAE,aAAa;gBACpB,KAAK,EAAE,2CAA2C;gBAClD,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,eAAe;gBACtB,OAAO,EAAE,UAAU;aACpB;YACD;gBACE,IAAI,EAAE,iBAAiB;gBACvB,KAAK,EAAE,gBAAgB;gBACvB,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,aAAa;gBACpB,OAAO,EAAE,OAAO;aACjB;YACD;gBACE,IAAI,EAAE,eAAe;gBACrB,KAAK,EAAE,cAAc;gBACrB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,UAAU;gBACjB,OAAO,EAAE,GAAG;aACb;YACD;gBACE,IAAI,EAAE,cAAc;gBACpB,KAAK,EAAE,aAAa;gBACpB,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,SAAS;gBAChB,OAAO,EAAE,WAAW;aACrB;YACD;gBACE,IAAI,EAAE,cAAc;gBACpB,KAAK,EAAE,aAAa;gBACpB,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,iBAAiB;gBACxB,OAAO,EAAE,EAAE;aACZ;YACD;gBACE,IAAI,EAAE,uBAAuB;gBAC7B,KAAK,EAAE,sBAAsB;gBAC7B,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,4BAA4B;gBACnC,OAAO,EAAE,WAAW;aACrB;YACD;gBACE,IAAI,EAAE,iBAAiB;gBACvB,KAAK,EAAE,gBAAgB;gBACvB,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,YAAY;gBACnB,OAAO,EAAE,WAAW;aACrB;YACD;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,KAAK,EAAE,mBAAmB;gBAC1B,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,gBAAgB;gBACvB,OAAO,EAAE,GAAG;aACb;YACD;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,KAAK,EAAE,mBAAmB;gBAC1B,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,gBAAgB;gBACvB,OAAO,EAAE,GAAG;aACb;YACD;gBACE,IAAI,EAAE,wBAAwB;gBAC9B,KAAK,EAAE,uBAAuB;gBAC9B,KAAK,EAAE,QAAQ;gBACf,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,qBAAqB;gBAC5B,OAAO,EAAE,WAAW;aACrB;YACD;gBACE,IAAI,EAAE,YAAY;gBAClB,KAAK,EAAE,WAAW;gBAClB,KAAK,EAAE,YAAY;gBACnB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,OAAO;aACjB;YACD;gBACE,IAAI,EAAE,gBAAgB;gBACtB,KAAK,EAAE,eAAe;gBACtB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,IAAI;aACd;YACD;gBACE,IAAI,EAAE,gBAAgB;gBACtB,KAAK,EAAE,eAAe;gBACtB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,IAAI;aACd;YACD;gBACE,IAAI,EAAE,gBAAgB;gBACtB,KAAK,EAAE,eAAe;gBACtB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,WAAW;aACrB;YACD;gBACE,IAAI,EAAE,eAAe;gBACrB,KAAK,EAAE,cAAc;gBACrB,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,MAAM;gBACd,KAAK,EAAE,UAAU;gBACjB,OAAO,EAAE,WAAW;aACrB;SACF,CAAC;QACF,gBAAW,GAAG,KAAK,CAAC;QAGpB,wBAAmB,GAAY,KAAK,CAAC;QA04BrC,uBAAkB,GAAG,UAAC,CAAC;YACrB,KAAI,CAAC,cAAc,EAAE,CAAC;YACtB,KAAI,CAAC,OAAO,CAAC,IAAI,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB;YACjD,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,OAAO,CAAC,gBAAgB,GAAG,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC;gBAC3D,KAAI,CAAC,OAAO,CAAC,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;YAC3E,CAAC;YACD,IAAI,aAAa,GAAG,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC;YAC/C,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC,CAAC;gBACjD,aAAa,GAAG,KAAK,CAAC;YACxB,CAAC;YACD,IAAI,QAAQ,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,KAAI,CAAC,oBAAoB,CAAC,KAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,aAAa,EAAE,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,CAAC,wCAAuC;YAC1N,KAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,KAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;QAClH,CAAC,CAAC;QAn4BA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAClD,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,CAAC;IAChD,CAAC;IACD,0CAAe,GAAf;QAAA,iBA2FC;QA1FC,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,iDAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YACjH,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;QAC7B,CAAC;QACD,IAAI,YAAY,GAAG,mCAAM,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC3E,IAAI,eAAe,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC9D,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;YAClB,eAAe,GAAG,mCAAM,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5E,gCAAgC;QAChC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,eAAe,IAAI,YAAY,CAAC,CAAC,CAAC;YACtD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,cAAc,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC/D,IAAM,YAAY,GAAG;oBACnB,UAAU,EAAE,0BAA0B;iBACvC,CAAC;gBACF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,uEAAwB,EAAE;oBACjE,QAAQ,EAAE,QAAQ;oBAClB,QAAQ,EAAE,KAAK;oBACf,KAAK,EAAE,qBAAqB;oBAC5B,YAAY;iBACb,CAAC,CAAC;gBAEH,IAAM,UAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;oBAClD,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,IAAI,QAAQ,CAAC,CAAC,CAAC;wBACxD,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,cAAc,GAAG,IAAI,CAAC;oBACtD,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,cAAc,GAAG,KAAK,CAAC;oBACvD,CAAC;oBACD,IAAI,IAAI,GAAG;wBACT,MAAM,EAAE;4BACN,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;yBACrD;qBACF,CAAC;oBACF,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,UAAC,QAAa;wBACzF,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;4BACjC,KAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,UAAC,GAAG;gCACzC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;oCAC/B,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;4BAClD,CAAC,CAAC,CAAC;4BACH,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC,CAAC;gCACjD,IAAM,cAAY,GAAG;oCACnB,UAAU,EAAE,0BAA0B;iCACvC,CAAC;gCACF,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,uEAAwB,EAAE;oCACjE,QAAQ,EAAE,QAAQ;oCAClB,QAAQ,EAAE,KAAK;oCACf,KAAK,EAAE,qBAAqB;oCAC5B,YAAY;iCACb,CAAC,CAAC;gCACH,IAAM,UAAQ,GAAG,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;oCAClD,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,IAAI,QAAQ,CAAC;wCACtD,KAAI,CAAC,OAAO,CAAC,gBAAgB,GAAG,IAAI,CAAC;oCACvC,IAAI;wCACF,KAAI,CAAC,OAAO,CAAC,gBAAgB,GAAG,KAAK,CAAC;oCACxC,UAAQ,CAAC,WAAW,EAAE,CAAC;gCACzB,CAAC,CAAC,CAAC;4BACL,CAAC;wBACH,CAAC;wBAAC,IAAI,CAAC,CAAC;wBACR,CAAC;oBACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;oBACf,CAAC,CAAC,CAAC;oBACH,UAAQ,CAAC,WAAW,EAAE,CAAC;gBACzB,CAAC,CAAC,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;oBACrE,IAAM,YAAY,GAAG;wBACnB,UAAU,EAAE,0BAA0B;qBACvC,CAAC;oBACF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,uEAAwB,EAAE;wBACjE,QAAQ,EAAE,QAAQ;wBAClB,QAAQ,EAAE,KAAK;wBACf,KAAK,EAAE,qBAAqB;wBAC5B,YAAY;qBACb,CAAC,CAAC;oBACH,IAAM,UAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;wBAClD,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,IAAI,QAAQ,CAAC;4BACtD,KAAI,CAAC,OAAO,CAAC,gBAAgB,GAAG,IAAI,CAAC;wBACvC,IAAI;4BACF,KAAI,CAAC,OAAO,CAAC,gBAAgB,GAAG,KAAK,CAAC;wBACxC,UAAQ,CAAC,WAAW,EAAE,CAAC;oBACzB,CAAC,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;QACH,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;YACjC,IAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;YACjD,IAAI,QAAQ,GAAG,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAE,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,CAAC,wCAAuC;YAChP,IAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,QAAQ,EAAE,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;QACxI,CAAC;IACH,CAAC;IAED,mCAAQ,GAAR;QAAA,iBAsEC;QArEC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC7C,IAAI,CAAC,SAAS,GAAG,gEAAoB,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QAC9F,oBAAoB;QACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI;QAC/C,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,aAAG;YACnE,KAAI,CAAC,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAC,IAAI;gBAC/C,MAAM,cACD,IAAI,IACP,IAAI,EAAE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,IAC/C;YACH,CAAC,CAAC,CAAC;YACH,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,IAAI,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxD,KAAI,CAAC,cAAc,GAAG,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC/C,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YAC7C,CAAC;QACH,CAAC,CAAC;QACF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,UAAC,IAAS;YAClD,IAAI,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC7C,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC7C,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;YACrD,KAAI,CAAC,SAAS,GAAG,gEAAoB,CAAC,qBAAqB,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;YAC9F,oFAAoF;YACpF,KAAI,CAAC,SAAS,CAAC,WAAW,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC;YACvE,KAAI,CAAC,MAAM,CAAC,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACvF,KAAI,CAAC,MAAM,CAAC,6BAA6B,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACxG,KAAI,CAAC,MAAM,CAAC,oBAAoB,GAAG,QAAQ,CAAC,uBAAuB,CAAC,CAAC,CAAC,QAAQ,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACnH,KAAI,CAAC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YAG7E,IAAI,MAAM,GAAG,KAAK,CAAC;YACnB,IAAI,OAAY,CAAC;YACjB,IAAI,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC;YAC3B,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;YACrD,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,IAAI,WAAW,CAAC,CAAC,CAAC;gBAC1C,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACrB,CAAC;YACD,EAAE,CAAC,CAAC,UAAU,KAAK,iDAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC3C,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACvB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACxB,CAAC;YACD,IAAI,SAAS,GAAG,EAAE,CAAC;YACnB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;gBACzB,MAAM,GAAG,IAAI,CAAC;gBACd,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACzB,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACzB,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC3B,CAAC;YACD,EAAE,CAAC,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACtC,KAAI,CAAC,MAAM,CAAC,aAAa,GAAG,SAAS,CAAC;YACxC,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,IAAI,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC;gBACtC,EAAE,CAAC,CAAC,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,aAAa,CAAC,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAC5C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;gBAC9B,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;oBACzC,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;oBAChC,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBACnD,CAAC;gBACD,KAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3B,CAAC;QACH,CAAC,CAAC;IACJ,CAAC;IACD,sCAAW,GAAX,UAAY,IAAI;QAAhB,iBAQC;QAPC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,YAAE;YACjD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,KAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC;YACnC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,sCAAW,GAAX;IAEA,CAAC;IACD,aAAa;IACb,kBAAkB;IAClB,yCAAc,GAAd,UAAe,GAAG,EAAE,GAAG;QAAvB,iBAUC;QATC,IAAM,UAAU,GAAG,mCAAmC,GAAG,GAAG,GAAG,OAAO,GAAG,GAAG,GAAG,UAAU,CAAC,CAAC,+BAA+B;QAC1H,IAAM,aAAa,GAAG;YACpB,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;SACZ,CAAC,CAAC,yBAAyB;QAC5B,8CAAM,CAAC,SAAS,CAAC,UAAU,EAAE,aAAa,EAAE,UAAC,GAAG,EAAE,GAAG;YACnD,EAAE,CAAC,CAAC,GAAG,CAAC;gBAAC,MAAM,GAAG,CAAC;YACnB,KAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,4CAAiB,GAAjB;QACE,8BAA8B;QAC9B,+CAA+C;QAC/C,6GAA6G;QAC7G,iHAAiH;QACjH,IAAI,CAAC,aAAa,GAAG,IAAI,kEAAU,CAAC;YAClC,GAAG,EAAE,IAAI;YACT,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE;SACxC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,GAAG,IAAI,kEAAU,CAAC;YAC/B,KAAK,EAAE,IAAI,CAAC,aAAa;SAC1B,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YAC9D,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;YACpE,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC;YACxE,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/C,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBACrD,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBACnE,CAAC;YACH,CAAC;YACD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;YAC9D,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QAC1D,CAAC;IACH,CAAC;IACD,wCAAa,GAAb,UAAc,IAAI;QAAlB,iBAiDC;QAhDC,8BAA8B;QAC9B,IAAI,CAAC,mBAAmB,GAAG,0DAAc,CAAC,mBAAmB,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACxF,IAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACvE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,WAAW,CAAC;QAC5C,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,IAAI,CAAC,OAAO,CAAC,cAAI;gBACf,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;oBACxC,IAAM,IAAI,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,EAAzB,CAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC9E,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;wBACV,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;4BACzD,IAAI,CAAC,SAAS,GAAG,0DAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;wBACnE,IAAI,UAAU,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,EAAzB,CAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;wBAClF,EAAE,CAAC,CAAC,UAAU,CAAC;4BACb,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,GAAG,kDAAM,CAAC,iBAAiB,EAAE,CAAC;oBACjE,CAAC;oBACD,IAAI,CACF,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;wBACrE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;gBACjC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,aAAa,GAAG,IAAI,kEAAU,CAAC;YAClC,GAAG,EAAE,IAAI;YACT,IAAI,EAAE,IAAI;SACX,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,GAAG,IAAI,kEAAU,CAAC;YAC/B,KAAK,EAAE,IAAI,CAAC,aAAa;SAC1B,CAAC,CAAC;QACH,wBAAwB;QACxB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAChC,IAAI,CAAC,SAAS,GAAG,gEAAoB,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAClG,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;QAC/C,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,cAAI;YACpC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC5C,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAClC,CAAC;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,cAAI;YACjC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,KAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC5C,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;gBACtC,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;oBACvB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,KAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;oBAC3C,CAAC;gBACH,CAAC;gBACD,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,kCAAO,GAAP,UAAQ,IAAI;QAAZ,iBA8BC;QA7BC,IAAI,CAAC,YAAY,GAAG,IAAI;QACxB,UAAU,CAAC;YACT,KAAI,CAAC,cAAc,EAAE,CAAC;YACtB,EAAE,CAAC,CAAC,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,SAAS,CAAC,CAAC,CAAC;gBACxC,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,UAAU,EAAE,CAAC;gBAClC,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACnB,MAAM,CAAC;gBACT,CAAC;YACH,CAAC;YACD,EAAE,CAAC,CAAC,KAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;gBACnC,KAAI,CAAC,yBAAyB,CAAC,KAAK,EAAE,CAAC;gBACvC,MAAM,CAAC;YACT,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,KAAK,MAAM,IAAI,IAAI,IAAI,SAAS,CAAC,CAAC,CAAC;gBACzC,EAAE,CAAC,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC,CAAC;oBAChB,EAAE,CAAC,CAAC,KAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;wBAC7B,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;wBACtB,KAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;oBACnC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,KAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;oBACjC,CAAC;gBACH,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,mDAAO,CAAC,MAAM,CAAC,qCAAqC,EAAE,OAAO,CAAC,CAAC;gBACjE,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,MAAM,EAAE,CAAC;YAChB,CAAC;QACH,CAAC,EAAE,GAAG,CAAC;IACT,CAAC;IACD,8CAAmB,GAAnB,UAAoB,IAAI;QAAxB,iBAmCC;QAlCC,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,YAAY,CAAC;QACxD,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClE,OAAO,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,MAAM,CAAC;QAChD,IAAI,eAAe,GAAG;YACpB,OAAO,EAAE,OAAO;YAChB,YAAY,EAAE,EAAE;YAChB,UAAU,EAAE,UAAU;YACtB,SAAS,EAAE,EAAE;YACb,kBAAkB,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,mBAAmB,CAAC,WAAW,EAAE;YAC/E,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,oBAAoB;YACzD,mBAAmB,EAAE,IAAI;YACzB,iBAAiB,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,YAAY;YACzD,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,SAAS;YACnD,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,mCAAmC;SAC9E;QACD,IAAM,YAAY,GAAG;YACnB,eAAe,EAAE,eAAe;SACjC,CAAC;QAEF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,qHAAuB,EAAE;YACvE,QAAQ,EAAE,QAAQ;YAClB,QAAQ,EAAE,KAAK;YACf,KAAK,EAAE,oCAAoC;YAC3C,YAAY;SACb,CAAC,CAAC;QAEH,IAAM,QAAQ,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,SAAS,CAAC;YACzD,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,IAAI,iDAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;gBACxE,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;gBAChC,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrB,CAAC;YACD,QAAQ,CAAC,WAAW,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,qCAAU,GAAV;QAAA,iBAgEC;QA/DC,IAAI,QAAQ,GAAG,IAAI,CAAC;QACpB,IAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;QACxC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,KAAK,CAAC,CAAC,CAAC,CAAC;YAC1E,mDAAO,CAAC,MAAM,CAAC,uCAAuC,EAAE,OAAO,CAAC,CAAC;YACjE,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAChE,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QACD,2BAA2B;QAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACnC,mDAAO,CAAC,MAAM,CAAC,4CAA4C,EAAE,OAAO,CAAC,CAAC;gBACtE,MAAM,CAAC,KAAK,CAAC;YACf,CAAC;YACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,IAAI,CAAC;mBAC5E,IAAI,CAAC,OAAO,CAAC,gBAAgB,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC9E,mDAAO,CAAC,MAAM,CAAC,4DAA4D,EAAE,OAAO,CAAC,CAAC;gBACtF,MAAM,CAAC,KAAK,CAAC;YACf,CAAC;QACH,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YACxC,UAAU,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;gBAC7B,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,mBAAmB,IAAI,QAAQ,CAAC,CAAC,CAAC;gBACzJ,CAAC;gBACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;oBAChF,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,IAAI,IAAI,CAAC,YAAY,IAAI,EAAE,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC;wBACvE,mDAAO,CAAC,MAAM,CAAC,cAAc,GAAG,GAAG,GAAG,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;wBACpF,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC,CAAC;wBACnH,QAAQ,GAAG,KAAK,CAAC;wBACjB,MAAM,CAAC,KAAK,CAAC;oBACf,CAAC;gBACH,CAAC;gBACD,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;oBAClF,EAAE,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;wBAClB,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC;4BACjC,mDAAO,CAAC,MAAM,CAAC,WAAW,GAAG,GAAG,GAAG,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;4BACjF,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;4BAC1G,QAAQ,GAAG,KAAK,CAAC;4BACjB,MAAM,CAAC,KAAK,CAAC;wBACf,CAAC;wBACD,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,IAAI,IAAI,CAAC,GAAG,IAAI,IAAI,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC;4BAChF,mDAAO,CAAC,MAAM,CAAC,WAAW,GAAG,GAAG,GAAG,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;4BACjF,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC,CAAC;4BACjH,QAAQ,GAAG,KAAK,CAAC;4BACjB,MAAM,CAAC,KAAK,CAAC;wBACf,CAAC;oBACH,CAAC;oBACD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC;wBACpC,mDAAO,CAAC,MAAM,CAAC,YAAY,GAAG,GAAG,GAAG,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;wBAClF,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;wBAC7G,QAAQ,GAAG,KAAK,CAAC;wBACjB,MAAM,CAAC,KAAK,CAAC;oBACf,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,UAAU,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;YACjE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC;YAC/G,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QACD,MAAM,CAAC,QAAQ,CAAC;IAClB,CAAC;IACD,qCAAU,GAAV,UAAW,IAAI;QAAf,iBAeC;QAdC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;eAC9E,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC5H,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,gBAAgB,GAAG,OAAO,CAAC;YAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAAC;gBAC9D,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,aAAa,IAAI,UAAU,IAAI,CAAC,CAAC,aAAa,IAAI,SAAS,EAA7D,CAA6D,CAAC,CAAC;gBACnI,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;oBACtC,gBAAgB,GAAG,UAAU,CAAC,GAAG,CAAC,UAAC,GAAQ,IAAK,UAAG,CAAC,WAAW,EAAf,CAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC/E,CAAC;YACD,IAAI,WAAW,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;YACnE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAA3B,CAA2B,EAAE,sCAAsC,EAAE,gCAAgC,EAAE,eAAe,EAAE,WAAW,EAAE,EAAE,EAAE,gBAAgB,EAAE,IAAI,CAAC,CAAC;QACjM,CAAC;IACH,CAAC;IACD,iCAAM,GAAN;QAAA,iBAsBC;QArBC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YACrB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,SAAS,CAAC,aAAG;gBACxD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC7B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC9B,mDAAO,CAAC,MAAM,CAAC,4BAA4B,EAAE,SAAS,CAAC;gBACzD,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC;gBACtC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,SAAS,CAAC,aAAG;gBACvE,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC7B,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC9B,mDAAO,CAAC,MAAM,CAAC,4BAA4B,EAAE,SAAS,CAAC;gBACzD,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC;gBACtC,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;IAEH,CAAC;IACD,+CAAoB,GAApB,UAAqB,SAAS;QAA9B,iBA0UC;QAzUC,IAAI,eAAe,GAAG,gDAAM,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC5D,IAAI,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;QACjD,IAAI,UAAU,GAAG,cAAc,CAAC,IAAI,GAAG,SAAS,CAAC;QACjD,IAAI,uBAAuB,GAAG,cAAc,CAAC,uBAAuB,CAAC;QACrE,IAAI,eAAe,GAAG,cAAc,CAAC,eAAe,CAAC;QACrD,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;QAC3C,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;YACjC,KAAK,iDAAK,CAAC,UAAU,CAAC,KAAK;gBACzB,SAAS,GAAG,OAAO,CAAC;gBACpB,KAAK,CAAC;YACR,KAAK,iDAAK,CAAC,UAAU,CAAC,OAAO;gBAC3B,SAAS,GAAG,OAAO,CAAC;gBACpB,KAAK,CAAC;YACR,KAAK,iDAAK,CAAC,UAAU,CAAC,OAAO;gBAC3B,SAAS,GAAG,OAAO,CAAC;gBACpB,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC;gBAC5B,KAAK,CAAC;YACR;gBACE,SAAS,GAAG,OAAO,CAAC;gBACpB,KAAK,CAAC;QACV,CAAC;QACD,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC;QAC/D,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC9C,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;QACpC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAChE,MAAM,EAAE,CAAC;QACT,uBAAuB;QACvB,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,GAAG,CAAC,kBAAkB,EAAE,iBAAiB,GAAG,KAAK,GAAG,UAAU,GAAG,uBAAuB,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC5L,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,kBAAkB,EAAE,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC7I,sBAAsB;QACtB,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC3F,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,kBAAkB,EAAE,iBAAiB,GAAG,KAAK,GAAG,UAAU,GAAG,eAAe,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QACxM,eAAe;QACf,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACxF,6BAA6B;QAC7B,eAAe;QACf,IAAI,CAAC,GAAQ,mCAAM,EAAE,CAAC;QACtB,IAAI,OAAY,CAAC;QACjB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;YACzB,OAAO,GAAG,mCAAM,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QAC3C,IAAI;YACF,OAAO,GAAG,mCAAM,EAAE,CAAC;QACrB,IAAI,OAAO,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;QAC7B,IAAI,QAAQ,GAAG,OAAO,CAAC,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7D,IAAI,MAAM,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;QAC5B,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5D,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEtE,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7D,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEzE,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3D,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACtE,0BAA0B;QAC1B,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACd,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YAExF,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;gBAClE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YAEtF,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC9D,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YAElF,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/D,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YAEnF,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YAEzF,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QAC3F,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,CAAC,CAAC;gBAC5D,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;gBACrD,8BAA8B;gBAC9B,6EAA6E;gBAC7E,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;oBACrE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACjF,0EAA0E;gBAC1E,yGAAyG;YAC3G,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;gBAC5C,8BAA8B;gBAC9B,oEAAoE;gBACpE,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;oBACrE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACjF,0EAA0E;gBAC1E,yGAAyG;YAC3G,CAAC;QACH,CAAC;QACD,6CAA6C;QAC7C,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;YACjE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAChG,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5D,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAC5F,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC;YACxE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC,CAAC;QAEpJ,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAChG,IAAI;YACF,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC1E,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;YAC5F,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,mCAAM,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;QACzH,IAAI;YACF,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACxE,qBAAqB;QACrB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;YAChC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAC;gBACvC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;YAC7F,CAAC;YACD,IAAI;gBACF,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QAC9F,CAAC;QACD,qBAAqB;QACrB,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC/H,wBAAwB;QACxB,OAAO;QACP,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACxH,gBAAgB;QAChB,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAClG,IAAI,MAAI,GAAG,EAAE;YACb,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC/B,MAAI,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa;YACnC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAI,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU;YAChC,CAAC;YACD,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,MAAI,CAAC,CAAC;QACxG,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC/H,wBAAwB;QACxB,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAC9H,4BAA4B;QAC5B,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC/H,wBAAwB;QACxB,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC/H,4BAA4B;QAC5B,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACrH,mBAAmB;QACnB,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC/H,UAAU;QACV,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC/H,cAAc;QACd,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAC9D,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC7F,eAAe;QACf,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAE9H,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjF,+BAA+B;QAC/B,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;QAC9I,IAAI,MAAM,CAAC;QACX,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QACzI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC;QAE9J,IAAI,eAAe,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QACzF,kGAAkG;QAClG,kGAAkG;QAElG,IAAI,aAAa,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QACtF,IAAI,iBAAiB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;QAC9F,IAAI,cAAc,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QAC1F,IAAI,kBAAkB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QAC7F,IAAI,WAAW,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QAChF,IAAI,wBAAwB,GAAG,gEAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACnG,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;YAEhB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YAChB,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,iBAAO;gBACxC,KAAI,CAAC,KAAK,IAAI,oDAAoD,CAAC;gBACnE,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,2DAA2D,GAAG,OAAO,CAAC,YAAY,GAAG,cAAc,CAAC;gBACvJ,KAAI,CAAC,KAAK,IAAI,OAAO,CAAC;gBACtB,KAAI,CAAC,KAAK,IAAI,oDAAoD,CAAC;gBACnE,IAAI,GAAG,GAAG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC9E,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACpC,IAAI,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;oBACjC,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;wBAClB,KAAK,WAAW;4BACd,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;gCAC/D,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,0CAA0C,GAAG,OAAO,CAAC,KAAK,GAAG,cAAc,CAAC;4BACjI,KAAK,CAAC;wBAER,KAAK,2CAA2C;4BAC9C,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,0GAA0G,GAAG,OAAO,CAAC,YAAY,GAAG,cAAc,CAAC;4BACtM,KAAK,CAAC;wBAER,KAAK,kBAAkB;4BACrB,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,kCAAkC,GAAG,OAAO,CAAC,YAAY,GAAG,cAAc,CAAC;4BAC9H,KAAK,CAAC;wBACR,KAAK,eAAe;4BAClB,IAAI,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,eAAe,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;4BACrG,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;gCACtB,IAAI,SAAS,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,cAAI,IAAI,WAAI,CAAC,IAAI,KAAK,OAAO,CAAC,SAAS,EAA/B,CAA+B,CAAC,CAAC,IAAI;gCACzF,QAAQ,IAAI,GAAG,GAAG,SAAS,CAAC;4BAC9B,CAAC;4BACD,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,2FAA2F,GAAG,QAAQ,GAAG,cAAc,CAAC;4BAC3K,KAAK,CAAC;wBAER,KAAK,cAAc;4BACjB,IAAI,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,EAAE,aAAa,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;4BAC1F,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,6CAA6C,GAAG,KAAK,GAAG,cAAc,CAAC;4BAC1H,KAAK,CAAC;wBAER,KAAK,oBAAoB;4BACvB,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;4BACzC,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,0DAA0D,GAAG,GAAG,GAAG,cAAc,CAAC;4BACrI,KAAK,CAAC;wBAER,KAAK,oBAAoB;4BACvB,IAAI,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;4BAC9D,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,mDAAmD,GAAG,UAAU,GAAG,cAAc,CAAC;4BACrI,KAAK,CAAC;wBAIR,KAAK,iBAAiB;4BACpB,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,kDAAM,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,EAAE,cAAc,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;4BAC9F,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,gDAAgD,GAAG,MAAM,GAAG,cAAc,CAAC;4BAC9H,KAAK,CAAC;wBAER,KAAK,wBAAwB;4BAC3B,IAAI,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC;4BAChF,KAAI,CAAC,KAAK,IAAI,sBAAsB,GAAG,SAAS,GAAG,uDAAuD,GAAG,gBAAgB,GAAG,cAAc,CAAC;4BAC/I,KAAK,CAAC;oBAEV,CAAC;gBACH,CAAC;gBACD,KAAI,CAAC,KAAK,IAAI,OAAO,CAAC;YACxB,CAAC,CAAC,CAAC;QACL,CAAC;QACD,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAG3F,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,CAAC;YAChF,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAEvG,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;YACtE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAE7F,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;YACtE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAE7F,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC;YACvE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAE9F,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1E,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAEjG,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;YACpE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAEnG,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;YACrE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAE5F,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;YACrE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAE5F,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;YACtE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAE7F,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,CAAC;YACzE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;QAE1G,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,CAAC;YAChF,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAEvG,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3E,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAElG,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3E,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAElG,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5E,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAEnG,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1E,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;QAE3G,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,CAAC,CAAC,CAAC;YACtF,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,cAAc,EAAE,MAAM,CAAC,CAAC,CAAC;QAEzJ,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACjF,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC;QAClH,CAAC;QACD,IAAI,CACF,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;YACpE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAErG,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;YACtE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,kBAAkB,EAAE,MAAM,CAAC,CAAC,CAAC;QAEjJ,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC;YACnE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,wBAAwB,EAAE,MAAM,CAAC,CAAC,CAAC;QAEvJ,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;QACnI,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;YACpE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,kBAAkB,EAAE,MAAM,CAAC,CAAC,CAAC;QACzI,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC;YACxE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,kDAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,kBAAkB,EAAE,MAAM,CAAC,CAAC,CAAC;QAChJ,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC;YACxE,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;QAEzG,UAAU;QAEV,IAAI,SAAS,GAAG,qLACuC,GAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,eAAe,CAAC,SAAS,GAAG,wBAAwB,CAAC;QAC1I,SAAS,IAAI,SAAS,CAAC;QAEvB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;IAC3B,CAAC;IACD,wCAAa,GAAb,UAAc,QAAQ;QACpB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC;YAClC,IAAI,CAAC,KAAK,IAAI,oDAAoD,CAAC;YACnE,IAAI,GAAG,GAAG,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;gBAE5E,IAAI,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;gBACjC,IAAI,MAAM,GAAG,OAAK,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,SAAS,EAAnB,CAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjE,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBACX,IAAI,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC;oBAC/B,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;oBAC3B,EAAE,CAAC,CAAC,OAAK,QAAQ,CAAC,UAAU,IAAI,iDAAK,CAAC,UAAU,CAAC,OAAO,CAAC;wBACvD,MAAM,GAAG,MAAM,CAAC;oBAClB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;wBACR,WAAW,GAAG,EAAE,CAAC;oBACnB,EAAE,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;wBACpE,OAAK,KAAK,IAAI,qBAAqB,GAAG,MAAM,GAAG,IAAI,GAAG,UAAU,GAAG,MAAM,CAAC,KAAK,GAAG,iBAAiB,GAAG,WAAW,GAAG,gBAAgB,CAAC;gBACzI,CAAC;YACH,CAAC;;YAbD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE;;aAalC;YACD,IAAI,CAAC,KAAK,IAAI,OAAO,CAAC;QACxB,CAAC;IACH,CAAC;IACD,kCAAO,GAAP;QAAA,iBAUC;QATC,UAAU,CAAC;YACT,KAAI,CAAC,cAAc,EAAE,CAAC;YACtB,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC;YACT,CAAC;YACD,IAAI,IAAI,GAAG,KAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;YAC/D,IAAI,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,MAAM,CAAC;YAC7C,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACvC,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACK,mCAAQ,GAAd;;;;;;;6BACM,KAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,GAA7B,wBAA6B;6BAC3B,KAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,GAA7B,wBAA6B;6BAC3B,IAAI,CAAC,OAAO,EAAZ,wBAAY;wBACd,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC;6BACjC,KAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,CAAC,GAAhD,wBAAgD;wBAClD,qBAAM,IAAI,CAAC,cAAc,EAAE;;wBAA3B,SAA2B,CAAC;wBAC5B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;4BACvB,MAAM,gBAAC;wBACT,CAAC;wBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;wBACtB,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;wBAC5B,IAAI,GAAG,gDAAM,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;wBACvC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,IAAI,CAAC;wBAClE,UAAU,CAAC;4BACT,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;4BACrB,mDAAO,CAAC,WAAW,EAAE,CAAC;wBACxB,CAAC,EAAE,GAAG,CAAC,CAAC;;;;wBAGV,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;;;;6BAGtB,KAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,CAAC,GAAhD,wBAAgD;wBAClD,qBAAM,IAAI,CAAC,cAAc,EAAE;;wBAA3B,SAA2B,CAAC;wBAC5B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;4BACvB,MAAM,gBAAC;wBACT,CAAC;wBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;wBACtB,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;wBAC5B,IAAI,GAAG,gDAAM,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;wBACvC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,IAAI,CAAC;wBAClE,UAAU,CAAC;4BACT,mDAAO,CAAC,WAAW,EAAE,CAAC;wBACxB,CAAC,EAAE,GAAG,CAAC,CAAC;;;;wBAIZ,mDAAO,CAAC,MAAM,CAAC,6BAA6B,EAAE,OAAO,CAAC;;;;;;KAEzD;IAED,yCAAc,GAAd;QAAA,iBAuCC;QAtCC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,cAAI;gBACpC,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC;gBACvB,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC;gBACpB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;gBACrB,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC;YAC5B,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;QAC3D,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,KAAK,CAAC;QACnC,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,CAAC;QAC/B,qCAAqC;QACrC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;YAC7B,OAAO,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC;QACtC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,QAAQ,CAAC,CAAC,CAAC;YAChC,OAAO,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC;QACtC,CAAC;QACD,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAM,aAAa,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;YACxC,UAAU,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;gBAC7B,OAAO,IAAI,CAAC,KAAK,CAAC;gBAClB,OAAO,IAAI,CAAC,eAAe,CAAC;gBAC5B,OAAO,IAAI,CAAC,kBAAkB,CAAC;gBAC/B,OAAO,IAAI,CAAC,kBAAkB,CAAC;gBAC/B,OAAO,IAAI,CAAC,uBAAuB,CAAC;gBACpC,OAAO,IAAI,CAAC,oBAAoB;gBAChC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;oBACxF,EAAE,CAAC,CAAC,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;wBAChE,IAAI,CAAC,EAAE,GAAG,kDAAM,CAAC,MAAM,EAAE,CAAC;oBAC5B,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC3B,CAAC;YACH,CAAC,CAAC,CAAC;YACH,KAAI,CAAC,OAAO,CAAC,aAAa,GAAG,aAAa,CAAC;YAC3C,KAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC,gEAAoB,CAAC,uBAAuB,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAClH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,yCAAc,GAAd;QACE,gEAAoB,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;IAC9F,CAAC;IAeD,+CAAoB,GAApB,UAAqB,SAAS;QAC5B,IAAM,EAAE,GAAG,SAAS,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC1C,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;YACd,MAAM,CAAC,CAAC,CAAC;QACX,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAM,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;YAC/B,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC;QAC7B,CAAC;IACH,CAAC;IACD,kCAAO,GAAP,UAAQ,CAAM;QACZ,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC7B,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC;QAClC,CAAC;IACH,CAAC;IACD,qCAAU,GAAV,UAAW,CAAC;QACV,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACZ,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;QAC3E,CAAC;IACH,CAAC;IACD,2CAAgB,GAAhB;QACE,IAAM,WAAW,GAAc,IAAI,kFAAS,CAAC,CAAC,CAAC,CAAC;QAChD,IAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC3C,IAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3C,IAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC;QAC9B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC1C,IAAI,KAAK,GAAG,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACX,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAClC,CAAC;QACH,CAAC;QACD,OAAO,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;IACvC,CAAC;IACD,+CAAoB,GAApB,UAAqB,CAAC;QACpB,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBACxC,UAAU,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;oBAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;oBACrB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;gBAC9B,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QACjC,CAAC;QACD,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,YAAY,CAAC;IACrC,CAAC;IACD,yCAAc,GAAd;QACE,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QACnC,IAAI,CAAC,WAAW,CAAC,cAAc,GAAG,IAAI,CAAC;QACvC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC7B,CAAC;IACD,+BAAI,GAAJ;QACE,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YAC7B,IAAM,YAAY,GAAG;gBACnB,KAAK,EAAE,GAAG;gBACV,QAAQ,EAAE,KAAK;gBACf,YAAY,EAAE,EAAE;gBAChB,UAAU,EAAE,iDAAK,CAAC,QAAQ,CAAC,oBAAoB;aAChD,CAAC;YACF,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;QACxD,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBACrD,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;gBACjD,IAAI,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,MAAM,CAAC;gBAC7C,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACvC,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAM,YAAY,GAAG;oBACnB,KAAK,EAAE,GAAG;oBACV,QAAQ,EAAE,KAAK;oBACf,YAAY,EAAE,EAAE;oBAChB,UAAU,EAAE,iDAAK,CAAC,QAAQ,CAAC,eAAe;oBAC1C,QAAQ,EAAE,oBAAoB;iBAC/B,CAAC;gBACF,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;YACxD,CAAC;QACH,CAAC;IACH,CAAC;IACD,wBAAwB;IACxB,2CAAgB,GAAhB,UAAiB,IAAK;QAAtB,iBAcC;QAbC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,iBAAO;YACjE,IAAM,IAAI,GAAQ,OAAO,CAAC;YAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,UAAU,CAAC,CAAC,CAAC;gBAChC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,YAAY,CAAC,CAAC,CAAC;oBACpC,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACtC,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,eAAe,CAAC,CAAC,CAAC;oBAC9C,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC3C,CAAC;gBACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,gCAAgC,CAAC,CAAC,CAAC;oBAC7D,KAAI,CAAC,cAAc,EAAE,CAAC;gBACxB,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,qCAAU,GAAV,UAAW,UAAU,EAAE,QAAQ;QAA/B,iBASC;QARC,IAAI,QAAQ,GAAG,mBAAmB,CAAC;QACnC,IAAI,gBAAgB,GAAG,OAAO,CAAC;QAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC9D,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,aAAa,IAAI,UAAU,IAAI,CAAC,CAAC,aAAa,IAAI,SAAS,EAA7D,CAA6D,CAAC,CAAC;YACnI,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;gBACtC,gBAAgB,GAAG,UAAU,CAAC,GAAG,CAAC,UAAC,GAAQ,IAAK,UAAG,CAAC,WAAW,EAAf,CAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC/E,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAE,aAAa,EAAE,gBAAgB,EAAE,IAAI,CAAC,CAAC;IAC9I,CAAC;IACD,sCAAW,GAAX,UAAY,UAAU,EAAE,QAAQ;QAAhC,iBASC;QARC,IAAI,gBAAgB,GAAG,OAAO,CAAC;QAC/B,IAAI,QAAQ,GAAG,gBAAgB,CAAC;QAChC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC9D,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,aAAa,IAAI,UAAU,IAAI,CAAC,CAAC,aAAa,IAAI,SAAS,EAA7D,CAA6D,CAAC,CAAC;YACnI,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;gBACtC,gBAAgB,GAAG,UAAU,CAAC,GAAG,CAAC,UAAC,GAAQ,IAAK,UAAG,CAAC,WAAW,EAAf,CAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC/E,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,EAAE,eAAe,EAAE,QAAQ,EAAE,QAAQ,EAAE,aAAa,EAAE,gBAAgB,EAAE,IAAI,CAAC,CAAC;IACjJ,CAAC;IACD,yCAAc,GAAd;QAAA,iBAkFC;QAjFC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YACrB,IAAM,KAAG,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,aAAG;gBACnE,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC7B,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;oBAChD,KAAI,CAAC,OAAO,CAAC,SAAS,GAAG,mCAAM,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,qDAAqD;oBACxI,IAAI,cAAc,GAAG,mCAAM,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBAC9E,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW;oBACvC,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC9B,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC;oBACjC,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wBAC5H,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;wBACjE,KAAI,CAAC,cAAc,EAAE,CAAC;oBACxB,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,mBAAmB,CAAC;4BACpD,KAAI,CAAC,UAAU,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;wBAC9C,IAAI,CAAC,CAAC;4BACJ,KAAI,CAAC,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC;4BAC1C,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;gCACnD,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gCACjF,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;oCACrB,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;gCAC/C,CAAC;4BACH,CAAC;wBACH,CAAC;oBACH,CAAC;oBACD,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,SAAS,CAAC,CAAC,CAAC;wBACnC,KAAI,CAAC,QAAQ,EAAE;oBACjB,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBAED,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAM,KAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,aAAG;gBAClF,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC7B,KAAI,CAAC,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;oBAChD,KAAI,CAAC,OAAO,CAAC,SAAS,GAAG,mCAAM,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,qDAAqD;oBACxI,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW;oBACvC,IAAI,cAAc,GAAG,mCAAM,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBAC9E,KAAI,CAAC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;oBAC9B,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC;oBACjC,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;2BAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wBAC5H,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;wBACjE,KAAI,CAAC,cAAc,EAAE,CAAC;oBACxB,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,mBAAmB,CAAC;4BACpD,KAAI,CAAC,UAAU,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;wBAC9C,IAAI,CAAC,CAAC;4BACJ,KAAI,CAAC,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC;4BAC1C,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;gCACnD,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gCACjF,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;oCACrB,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;gCAC/C,CAAC;4BACH,CAAC;wBACH,CAAC;oBACH,CAAC;oBACD,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,SAAS,CAAC,CAAC,CAAC;wBACnC,KAAI,CAAC,QAAQ,EAAE;oBACjB,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IACD,sCAAW,GAAX,UAAY,UAAU;QAAtB,iBA0BC;QAzBC,UAAU,CAAC;YACT,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,EAAE,EAAE,CAAC,CAAC;QACP,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;YACvC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YACnB,UAAU,EAAE,UAAU;SACvB,CAAC,CAAC,SAAS,CAAC,YAAE;YACb,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC;gBACzC,IAAI,cAAc,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;gBAClF,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;oBACnD,UAAU,GAAG,0DAAc,CAAC,iBAAiB,CAAC,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;oBACjF,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;wBACrB,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;oBAC/C,CAAC;gBACH,CAAC;YACH,CAAC;YACD,IAAI;gBACF,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACxC,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,2CAAgB,GAAhB,UAAiB,UAAU;QAA3B,iBA4BC;QA3BC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;YACnD,UAAU,CAAC;gBACT,mDAAO,CAAC,WAAW,EAAE,CAAC;YACxB,CAAC,EAAE,EAAE,CAAC,CAAC;YACP,IAAM,KAAG,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;gBACvC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;gBACnB,YAAY,EAAE;oBACZ,OAAO,EAAE;wBACP,OAAO,EAAE,UAAU;wBACnB,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY;qBACrD;oBACD,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,QAAQ;oBACpC,eAAe,EAAE,IAAI,CAAC,YAAY,CAAC,eAAe;iBACnD;aACF,CAAC,CAAC,SAAS,CAAC,YAAE;gBACb,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC5B,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;oBACjE,KAAI,CAAC,cAAc,EAAE,CAAC;gBACxB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG;YACN,CAAC,EAAE;gBACD,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAG,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IACD,aAAa;IACb,uCAAY,GAAZ;QACE,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IACD,aAAa;IACb,iCAAM,GAAN;QAAA,iBA4BC;QA3BC,IAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5C,IAAI,CAAC,OAAO,GAAG,IAAI,kFAAS,CAAC,CAAC,CAAC,CAAC;QAChC,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,GAAG,CAAC,aAAa,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,GAAG,CAAC,aAAa,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,GAAG,CAAC,YAAY,CAAC;QAC7C,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC;QAC3C,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACjC,UAAU,CAAC;YACT,KAAI,CAAC,aAAa,GAAG,IAAI,kEAAU,CAAC;gBAClC,GAAG,EAAE,IAAI;gBACT,IAAI,EAAE,KAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE;aACxC,CAAC,CAAC;YACH,KAAI,CAAC,UAAU,GAAG,IAAI,kEAAU,CAAC;gBAC/B,KAAK,EAAE,KAAI,CAAC,aAAa;aAC1B,CAAC,CAAC;QACL,CAAC,EAAE,CAAC,CAAC,CAAC;QACN,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;QAC5B,IAAI,CAAC,WAAW,CAAC,cAAc,GAAG,KAAK,CAAC;QACxC,IAAI,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC;QACrC,IAAI,CAAC,WAAW,CAAC,qBAAqB,EAAE,CAAC;QACzC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,UAAU,CAAC;YACT,KAAI,CAAC,WAAW,CAAC,yBAAyB,CAAC,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,cAAI,IAAI,WAAI,CAAC,KAAK,IAAI,KAAI,CAAC,OAAO,CAAC,WAAW,EAAtC,CAAsC,CAAC,CAAC;QAC5H,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC;IACD,6CAAkB,GAAlB,UAAmB,CAAC;QAClB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,KAAK;IAC/B,CAAC;IACD,8BAAG,GAAH;QACE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IAC3B,CAAC;IACD,gCAAK,GAAL;QAAA,iBAMC;QALC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,UAAU,CAAC;YACT,KAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,qCAAU,GAAV;QACE,IAAI,CAAC,kBAAkB,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC;IACrD,CAAC;IACD,6CAAkB,GAAlB,UAAmB,CAAC;QAApB,iBAoBC;QAnBC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,GAAG,CAAC,CAAC,KAAK,CAAC;QAC3D,IAAI,IAAI,GAAG;YACT,MAAM,EAAE;gBACN,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;aACrD;SACF,CAAC;QACF,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,UAAC,QAAa;YACzF,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBACjC,KAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,UAAC,GAAG;oBACzC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;wBAC/B,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBAChD,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;gBAC/C,CAAC,CAAC,CAAC;YACL,CAAC;YAAC,IAAI,CAAC,CAAC;YACR,CAAC;QACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;QACf,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC;YACnB,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;IACnC,CAAC;IACD,mBAAmB;IACnB,sCAAW,GAAX;QACE,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC1B,IAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;QACxD,IAAI,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,MAAM,CAAC;QAC7C,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IACvC,CAAC;IACD,uBAAuB;IACvB,0CAAe,GAAf;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,qBAAqB,GAAG,CAAC,CAAC,CAAC,CAAC;YAC3C,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC;QACzD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,gBAAgB,CAAC;QAC1D,CAAC;IACH,CAAC;IACD,wCAAa,GAAb;QACE,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,cAAc;IAC9C,CAAC;IAt+CgC;QAAhC,+DAAS,CAAC,0FAAoB,CAAC;kCAAc,0FAAoB;yDAAC;IAClC;QAAhC,+DAAS,CAAC,0FAAoB,CAAC;kCAAc,0FAAoB;yDAAC;IACnC;QAA/B,+DAAS,CAAC,yGAAmB,CAAC;kCAAa,yGAAmB;wDAAC;IAHrD,gBAAgB;QAL5B,+DAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB;;;SAG5B,CAAC;yCAyPiB,8DAAc;YACb,sDAAM;YACA,kEAAc;YACf,sFAAW;YACT,yDAAa;YACf,uDAAW;YACjB,+DAAiB;YACd,oEAAgB;YACR,0EAAgB;YAClB,+EAAc;YACd,uEAAc;YACb,yEAAe;YACvB,8DAAiB;YACd,+DAAU;YACF,wFAAkB;YACjB,0FAAgB;YACrB,+EAAc;OAxQ7B,gBAAgB,CAw+C5B;IAAD,uBAAC;CAAA;AAx+C4B;;;;;;;;;;;;AC3C7B,2IAA2I,iGAAiG,YAAY,sBAAsB,sCAAsC,yCAAyC,wjBAAwjB,4CAA4C,iHAAiH,4CAA4C,yeAAye,g+BAAg+B,0CAA0C,2BAA2B,uCAAuC,iLAAiL,8CAA8C,2BAA2B,6BAA6B,gMAAgM,gDAAgD,gBAAgB,iCAAiC,8FAA8F,sBAAsB,qPAAqP,kCAAkC,0BAA0B,gDAAgD,8MAA8M,2CAA2C,gBAAgB,mCAAmC,mPAAmP,6CAA6C,gBAAgB,mCAAmC,2OAA2O,uDAAuD,gBAAgB,8BAA8B,iKAAiK,6CAA6C,2BAA2B,mCAAmC,8TAA8T,kCAAkC,gEAAgE,uCAAuC,yJAAyJ,iCAAiC,yEAAyE,sCAAsC,sRAAsR,oCAAoC,iCAAiC,+CAA+C,qWAAqW,yCAAyC,sBAAsB,oCAAoC,gNAAgN,iCAAiC,yEAAyE,0CAA0C,sNAAsN,6BAA6B,6EAA6E,iCAAiC,oIAAoI,kCAAkC,yEAAyE,iCAAiC,yQAAyQ,oCAAoC,yEAAyE,yCAAyC,wLAAwL,mCAAmC,yEAAyE,yCAAyC,iMAAiM,mBAAmB,4CAA4C,oMAAoM,KAAK,yCAAyC,oOAAoO,mBAAmB,8CAA8C,kSAAkS,KAAK,0CAA0C,mOAAmO,mBAAmB,8CAA8C,+MAA+M,mBAAmB,+CAA+C,ivCAAivC,KAAK,yDAAyD,+OAA+O,mBAAmB,mDAAmD,mOAAmO,mEAAmE,yWAAyW,4BAA4B,2IAA2I,KAAK,kCAAkC,gGAAgG,0CAA0C,+FAA+F,uCAAuC,gFAAgF,qCAAqC,0E;;;;;;;;;;;ACAjmZ,gCAAgC,cAAc,eAAe,iBAAiB,gBAAgB,mBAAmB,+BAA+B,iBAAiB,yBAAyB,qBAAqB,sCAAsC,iBAAiB,oEAAoE,kBAAkB,gBAAgB,yIAAyI,iBAAiB,iBAAiB,cAAc,2BAA2B,iBAAiB,wBAAwB,oBAAoB,wBAAwB,6BAA6B,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA/lB;AAC1B;AAGe;AACb;AACF;AACE;AACd;AACU;AACV;AAC0E;AAClC;AAC9B;AACa;AACP;AACnB;AACb;AAEoC;AAOjE;IAuBE,8BACU,KAAqB,EACrB,MAAc,EACd,WAAwB,EACxB,YAA4B,EAC5B,eAAgC,EAChC,WAAwB,EACzB,SAA2B,EAC1B,cAA8B;QARxC,iBA6BC;QA5BS,UAAK,GAAL,KAAK,CAAgB;QACrB,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACxB,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,oBAAe,GAAf,eAAe,CAAiB;QAChC,gBAAW,GAAX,WAAW,CAAa;QACzB,cAAS,GAAT,SAAS,CAAkB;QAC1B,mBAAc,GAAd,cAAc,CAAgB;QA5BxC,WAAM,GAAQ,EAAE,CAAC;QAGjB,wBAAmB,GAAG,IAAI,CAAC;QAC3B,WAAM,GAAG,EAAE,CAAC;QACZ,kBAAa,GAAQ,IAAI,CAAC;QAC1B,sBAAiB,GAAQ,IAAI,CAAC;QAC9B,cAAS,GAAG,KAAK;QAEjB,YAAO,GAAc,IAAI,kFAAS,CAAC,CAAC,CAAC,CAAC;QACtC,qBAAgB,GAAQ,CAAC,CAAC;QAC1B,mBAAc,GAAG,KAAK,CAAC;QACvB,uBAAkB,GAAQ,wDAAO,CAAC,kBAAkB,CAAC;QAOrD,YAAO,GAAG,CAAC,CAAC;QA+BZ,wBAAmB,GAAG;YACpB,iBAAiB,EAAE,IAAI;YACvB,eAAe,EAAE,IAAI;YACrB,oBAAoB,EAAE,UAAU,IAAI;gBAAd,iBAmBrB;gBAlBC,EAAE;gBACF,EAAE;gBACF,IAAM,OAAO,GAAQ,EAAE,CAAC;gBACxB,OAAO,CAAC,IAAI,GAAG,2DAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC1D,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,EAAvB,CAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChF,EAAE,CAAC,CAAC,UAAU,CAAC;oBACb,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,GAAG,0DAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3D,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;gBACzB,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gBACxC,UAAU,CAAC;oBACT,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,WAAW,EAAE,QAAQ,EAAE;wBACzD,UAAU,EAAE,KAAI,CAAC,MAAM,CAAC,UAAU;wBAClC,WAAW,EAAE,MAAM;wBACnB,SAAS,EAAE,MAAM;qBAClB,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;gBAEH,MAAM,CAAC,OAAO,CAAC;YACjB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;SACb,CAAC;QAqpBF,mBAAc,GAAG,UAAC,CAAC;YACjB,IAAM,SAAS,GAAG;gBAChB,EAAE,IAAI,EAAE,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,KAAK,EAAE,gBAAgB,EAAE;gBACnF,EAAE,IAAI,EAAE,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;gBAClF,EAAE,IAAI,EAAE,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,KAAK,EAAE,gBAAgB,EAAE;gBAC9E,EAAE,IAAI,EAAE,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,uBAAuB,EAAE,KAAK,EAAE,gBAAgB,EAAE;aAChG;YACD,KAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;QACrD,CAAC;QAxsBC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAClD,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,CAAC;QAE9C,IAAI,CAAC,MAAM,GAAG,CAAC;gBACb,EAAE,EAAE,GAAG;gBACP,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;gBACvD,KAAK,EAAE;oBACL;wBACE,EAAE,EAAE,iBAAiB;wBACrB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,mBAAmB;wBACzD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,QAAQ;qBACrC;oBACD;wBACE,EAAE,EAAE,qBAAqB;wBACzB,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW;wBACjD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK;qBAClC;iBACF;aACF,CAAC,CAAC;IACL,CAAC;IAyBD,8CAAe,GAAf;IACA,CAAC;IAED,uCAAQ,GAAR;QAAA,iBA2DC;QA1DC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC7C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,UAAC,IAAS;YAClD,IAAI,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC7C,KAAI,CAAC,MAAM,CAAC,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACvF,KAAI,CAAC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YAC7E,IAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAI,MAAM,GAAG,KAAK,CAAC;YACnB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;gBACvB,MAAM,GAAG,IAAI,CAAC;YAChB,KAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;YAChC,KAAI,CAAC,MAAM,CAAC,YAAY,GAAG;gBACzB,KAAK,EAAE,IAAI,oEAAW,CAAC;oBACrB,GAAG,EAAE,MAAM;oBACX,QAAQ,EAAE,KAAK;oBACf,IAAI,EAAE,UAAC,WAAW;wBAChB,MAAM,CAAC,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;oBAC9B,CAAC;oBACD,KAAK,EAAE,UAAU,GAAG;wBAClB,IAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,CAAC,QAAQ,EAAE,EAAzB,CAAyB,CAAC,CAAC;wBAClE,MAAM,CAAC,KAAK,CAAC;oBACf,CAAC;iBACF,CAAC;gBACF,QAAQ,EAAE,IAAI;gBACd,IAAI,EAAE,MAAM;aACb,CAAC;YACF,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,cAAI;gBAC/B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YAC5C,CAAC,CAAC,CAAC;YACH,KAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBACxC,UAAU,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;oBAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;wBACxC,IAAM,IAAI,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,EAAzB,CAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC9E,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BACV,EAAE,CAAC,CAAC,2DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;gCACzD,IAAI,CAAC,SAAS,GAAG,2DAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;4BACnE,IAAI,UAAU,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,EAAzB,CAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;4BAClF,EAAE,CAAC,CAAC,UAAU,CAAC;gCACb,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,GAAG,0DAAM,CAAC,iBAAiB,EAAE,CAAC;4BAC/D,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;wBAC9E,CAAC;wBACD,IAAI,CAAC,CAAC;4BACJ,EAAE,CAAC,CAAC,2DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;gCAC3D,IAAI,cAAc,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,EAAzB,CAAyB,CAAC,CAAC,CAAC,CAAC,CAAC;gCACtF,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;oCAClB,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;4BAChF,CAAC;wBACH,CAAC;oBACH,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;YACH,IAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC;YAC7B,EAAE,CAAC,CAAC,UAAU,KAAK,kDAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC3C,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACvB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACxB,CAAC;QACH,CAAC,CAAC;QACF,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IACD,0CAAW,GAAX;QAAA,iBAQC;QAPC,UAAU,CAAC;YACT,mGAAoB,CAAC,gBAAgB,CAAC,KAAI,CAAC,UAAU,EAAE,KAAI,CAAC,aAAa,EAAE,KAAI,CAAC,iBAAiB,EAAE,KAAI,CAAC,SAAS,EAAE,CAAC,KAAI,CAAC,iBAAiB,CAAC,UAAU,EAAE,KAAI,CAAC,iBAAiB,CAAC,gBAAgB,EAAE,KAAI,CAAC,MAAM,EAAE,KAAI,CAAC,kBAAkB,EAAE,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YACrQ,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC;YAChE,KAAI,CAAC,iBAAiB,CAAC,UAAU,GAAG,KAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC;YAC5E,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,iBAAiB,CAAC,CAAC;YACvC,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QACnC,CAAC,EAAE,CAAC,CAAC,CAAC;IACR,CAAC;IACD,wCAAS,GAAT,UAAU,IAAI;QACZ,IAAI,eAAe,GAAG,EAAE;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,CAAC,CAAC,CAAC,CAAC;YAC3B,eAAe,CAAC,IAAI,CAAC;gBACnB,KAAK,EAAE,GAAG;gBACV,QAAQ,EAAE,IAAI,CAAC,yBAAyB;gBACxC,YAAY,EAAE,IAAI,CAAC,WAAW;gBAC9B,kBAAkB,EAAE,IAAI,CAAC,iBAAiB;aAC3C,CAAC;QACJ,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,eAAe,CAAC,IAAI,CAAC;gBACnB,KAAK,EAAE,GAAG;gBACV,QAAQ,EAAE,IAAI,CAAC,yBAAyB;gBACxC,YAAY,EAAE,IAAI,CAAC,WAAW;gBAC9B,kBAAkB,EAAE,IAAI,CAAC,iBAAiB;aAC3C,CAAC;QACJ,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACtB,eAAe,CAAC,IAAI,CAAC;gBACnB,KAAK,EAAE,IAAI;gBACX,QAAQ,EAAE,IAAI,CAAC,0BAA0B;gBACzC,YAAY,EAAE,IAAI,CAAC,YAAY;gBAC/B,kBAAkB,EAAE,IAAI,CAAC,kBAAkB;aAC5C,CAAC;QACJ,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,eAAe,CAAC,IAAI,CAAC;gBACnB,KAAK,EAAE,GAAG;gBACV,QAAQ,EAAE,IAAI,CAAC,yBAAyB;gBACxC,YAAY,EAAE,IAAI,CAAC,WAAW;gBAC9B,kBAAkB,EAAE,IAAI,CAAC,iBAAiB;aAC3C,CAAC;QACJ,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,eAAe,CAAC,IAAI,CAAC;gBACnB,KAAK,EAAE,GAAG;gBACV,QAAQ,EAAE,IAAI,CAAC,yBAAyB;gBACxC,YAAY,EAAE,IAAI,CAAC,WAAW;gBAC9B,kBAAkB,EAAE,IAAI,CAAC,iBAAiB;aAC3C,CAAC;QACJ,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC1B,eAAe,CAAC,IAAI,CAAC;gBACnB,KAAK,EAAE,MAAM;gBACb,QAAQ,EAAE,IAAI,CAAC,8BAA8B;gBAC7C,YAAY,EAAE,IAAI,CAAC,gBAAgB;gBACnC,kBAAkB,EAAE,IAAI,CAAC,iBAAiB;aAC3C,CAAC;QACJ,CAAC;QACD,IAAI,CAAC,iBAAiB,CAAC,eAAe,GAAG,eAAe,CAAC;IAC3D,CAAC;IACD,4CAAa,GAAb,UAAc,CAAC;QACb,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC9B,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC;QAClC,CAAC;IACH,CAAC;IACD,6CAAc,GAAd,UAAe,CAAC;QACd,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,MAAM,CAAC,CAAC,CAAC;YACxB,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,cAAc,CAAC,CAAC,CAAC;gBACzC,EAAE,CAAC,CAAC,2DAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;oBACtH,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,UAAU,GAAG,+DAA+D,CAAC;oBACjG,CAAC,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,oBAAoB,CAAC;gBACxE,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IACD,4CAAa,GAAb,UAAc,CAAC;QACb,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,CAAC;YACzB,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,UAAU,CAAC;YAC3C,IAAM,IAAI,GAAG,CAAC,CAAC,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;YACrD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACjB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACT,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBACrC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;4BAC3C,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC;oBACtD,CAAC;oBACD,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;gBAC1C,CAAC;YACH,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;gBACjB,IAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBAClC,GAAG,CAAC,KAAK,CAAC,UAAU,GAAG,iEAAiE,CAAC;gBACzF,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YAC3B,CAAC;QACH,CAAC;IACH,CAAC;IACD,gDAAiB,GAAjB,UAAkB,CAAC;QACjB,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC;YAC/B,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,KAAK,cAAc,CAAC,CAAC,CAAC;gBACnC,CAAC,CAAC,aAAa,CAAC,QAAQ,GAAG,UAAU,GAAG;oBACtC,IAAM,aAAa,GAAG,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC;oBAC3C,aAAa,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;oBACnC,aAAa,CAAC,MAAM,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;gBACxC,CAAC,CAAC;YACJ,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,KAAK,cAAc,CAAC,CAAC,CAAC;gBACnC,CAAC,CAAC,UAAU,GAAG,YAAY,CAAC;YAC9B,CAAC;QACH,CAAC;IACH,CAAC;IACD,+CAAgB,GAAhB,UAAiB,CAAC;QAChB,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,KAAK,yBAAyB,IAAI,CAAC,CAAC,SAAS,KAAK,UAAU,IAAI,CAAC,CAAC,SAAS,KAAK,iBAAiB,IAAI,CAAC,CAAC,SAAS,KAAK,UAAU,IAAI,CAAC,CAAC,SAAS,KAAK,OAAO,IAAI,CAAC,CAAC,SAAS,KAAK,QAAQ,IAAI,CAAC,CAAC,SAAS,KAAK,YAAY,IAAI,CAAC,CAAC,SAAS,KAAK,kBAAkB,CAAC,IAAI,CAAC,CAAC,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC;YAC5S,CAAC,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,GAAG,UAAC,GAAG;gBACrD,CAAC,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;YAC/B,CAAC,CAAC;YAEF,CAAC,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,gBAAgB,CAAC,QAAQ,EAAE;gBAClE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC;YAC1C,CAAC,EAAE,KAAK,CAAC,CAAC;QACZ,CAAC;IACH,CAAC;IACD,qDAAsB,GAAtB,UAAuB,CAAC;IAExB,CAAC;IACD,wCAAS,GAAT,UAAU,IAAI;QAAd,iBAYC;QAXC,UAAU,CAAC;YACT,IAAM,KAAK,GAAG,OAAO,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACtD,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBAClC,UAAU,CAAC;oBACT,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBACnC,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;oBACjC,KAAI,CAAC,WAAW,EAAE,CAAC;gBAErB,CAAC,EAAE,GAAG,CAAC,CAAC;YACV,CAAC;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAED,yCAAU,GAAV,UAAW,GAAG;QACZ,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IACD,4CAAa,GAAb,UAAc,CAAC;QAAf,iBAkBC;QAjBC,IAAM,YAAY,GAAG;YACnB,MAAM,EAAE,CAAC;YACT,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,cAAc;SAC5D,CAAC;QACF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,oIAAsB,EAAE;YAC/D,KAAK,EAAE,UAAU,EAAE,YAAY,gBAAE,QAAQ,EAAE,QAAQ;YACnD,QAAQ,EAAE,KAAK;SAChB,CAAC,CAAC;QACH,IAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;YAClD,IAAM,IAAI,GAAG,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,CAAC;YACrD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;gBAC7C,KAAI,CAAC,WAAW,EAAE,CAAC;YACrB,CAAC;YACD,QAAQ,CAAC,WAAW,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,qCAAM,GAAN,UAAO,aAAc;QACnB,EAAE,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,QAAQ,GAAG,aAAa,GAAG,CAAC,CAAC;YACjC,IAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;YACxE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACpD,IAAI,OAAK,GAAG,CAAC,CAAC;gBACd,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,OAAO,CAAC,cAAI;oBACpC,IAAI,CAAC,KAAK,GAAG,EAAE,OAAK,CAAC;oBACrB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC;gBAC/B,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,KAAG,EAAE,KAAK,WAAE,WAAS,CAAC;YAC1B,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBACxC,KAAG,GAAG,UAAU,CAAC,MAAM,CAAC;gBACxB,WAAS,GAAG,UAAU,CAAC,KAAG,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC;YACxC,CAAC,CAAC,CAAC;YAEH,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,CAAC;gBAEtC,EAAE,CAAC,CAAC,KAAG,IAAI,CAAC,CAAC,CAAC,CAAC;oBACb,KAAK,GAAG,EAAE,WAAS,CAAC;gBACtB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAK,GAAG,CAAC,CAAC;gBACZ,CAAC;gBACD,IAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;gBAClE,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAClC,CAAC;QACH,CAAC;QACD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IACnC,CAAC;IACD,aAAa;IACb,iDAAkB,GAAlB,UAAmB,MAAM,EAAE,GAAG;QAC5B,IAAM,IAAI,GAAG,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC;QAChC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IACnC,CAAC;IACD,0CAAW,GAAX,UAAY,MAAM,EAAE,CAAC;QACnB,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACxB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;IACpC,CAAC;IACD,gDAAiB,GAAjB;QAAA,iBA8DC;QA7DC,UAAU,CAAC;YACT,KAAI,CAAC,aAAa,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,GAAG,EAAE,KAAK;gBAC1C,IAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrC,EAAE,CAAC,CAAC,KAAK,CAAC,YAAY,KAAK,KAAK,CAAC,CAAC,CAAC;oBACjC,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;wBACrC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;4BACf,KAAK,YAAY;gCACf,2BAA2B;gCAC3B,KAAK,CAAC;4BACR,KAAK,cAAc;gCACjB,KAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;gCAC7B,KAAK,CAAC;4BACR,KAAK,WAAW;gCACd,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;gCAC1B,KAAK,CAAC;4BACR,KAAK,cAAc;gCACjB,gCAAgC;gCAChC,KAAK,CAAC;4BACR,KAAK,UAAU,CAAC;4BAChB,KAAK,OAAO,CAAC;4BACb,KAAK,WAAW,CAAC;4BACjB,KAAK,QAAQ,CAAC;4BACd,KAAK,YAAY,CAAC;4BAClB,KAAK,kBAAkB,CAAC;4BACxB,KAAK,iBAAiB,CAAC;4BACvB,KAAK,UAAU,CAAC;4BAChB,KAAK,yBAAyB,CAAC;4BAC/B,KAAK,WAAW,CAAC;4BACjB,KAAK,cAAc,CAAC;4BACpB,KAAK,mBAAmB;gCACtB,KAAI,CAAC,WAAW,EAAE,CAAC;gCACnB,KAAK,CAAC;4BACR,KAAK,iBAAiB;gCACpB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,IAAI,GAAG,CAAC,eAAe,CAAC;oCACzD,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,eAAe,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;gCAC1D,IAAI;oCACF,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,eAAe,CAAC;gCAClC,KAAI,CAAC,WAAW,EAAE,CAAC;gCACnB,KAAK,CAAC;4BACR,KAAK,KAAK;gCACR,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC,CAAC;oCAClD,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,IAAI,GAAG,CAAC,eAAe,CAAC;wCACzD,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,eAAe,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;oCAC1D,IAAI;wCACF,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,eAAe,CAAC;gCACpC,CAAC;gCACD,KAAI,CAAC,WAAW,EAAE,CAAC;gCACnB,KAAK,CAAC;4BACR;gCACE,KAAK,CAAC;wBAEV,CAAC;oBACH,CAAC,EAAE,UAAC,KAAK;wBACP,KAAK,CAAC,KAAK,CAAC,CAAC;oBACf,CAAC,CAAC,CAAC;gBACL,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;oBAC/B,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBACpB,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,iDAAkB,GAAlB,UAAmB,GAAG;QAAtB,iBA4CC;QA3CC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAI;YAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC;gBACnC,KAAI,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,YAAE;oBACnD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;wBAC3B,IAAI,OAAO,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC;wBAC9B,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;4BACZ,GAAG,CAAC,YAAY,GAAG,OAAO,CAAC,IAAI,CAAC;4BAChC,GAAG,CAAC,SAAS,GAAG,KAAI,CAAC,aAAa,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;4BACtD,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC;4BACpB,EAAE,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gCAClB,GAAG,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;4BAChE,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC;4BACjB,CAAC;4BACD,uDAAuD;4BACvD,qFAAqF;4BACrF,gEAAgE;4BAChE,+DAA+D;4BAC/D,SAAS;4BACT,uCAAuC;4BACvC,IAAI;4BACJ,OAAO;4BACP,GAAG,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC;4BACtE,GAAG,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BAC3D,EAAE,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gCAClB,GAAG,CAAC,UAAU,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;4BACzG,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC;4BACxB,CAAC;4BACD,GAAG,CAAC,gBAAgB,GAAG,GAAG,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,UAAU,IAAI,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BAClF,IAAI,IAAI,GAAG,KAAI,CAAC,aAAa,CAAC;4BAC9B,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;4BACvC,KAAI,CAAC,WAAW,EAAE,CAAC;4BACnB,MAAM,CAAC,IAAI,CAAC;wBACd,CAAC;oBACH,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,oDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oBACtC,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC,CAAC;IAEL,CAAC;IACD,8CAAe,GAAf,UAAgB,GAAG;QACjB,IAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,GAAG,CAAC,SAAS,EAAxB,CAAwB,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7E,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;YAC1B,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;QACzC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,GAAG,CAAC,SAAS,GAAG,EAAE,CAAC;YACnB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IACD,4CAAa,GAAb,UAAc,QAAQ;QACpB,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;QACrC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACtC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC/B,MAAM,CAAC,QAAQ,CAAC;YAClB,CAAC;QACH,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,8CAAe,GAAf,UAAgB,CAAC;QACf,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,iBAAiB,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,qBAAqB,CAAC,CAAC,CAAC;YACnD,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC3B,CAAC;IACH,CAAC;IAED,kBAAkB;IAClB,2CAAY,GAAZ;QACE,oDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,MAAM,GAAG,EAAE,CAAC;QAEhB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAClC,YAAY;YACZ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,YAAY,CAAC,CAAC,CAAC;gBAChD,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAC5B,CAAC;YACD,aAAa;YACb,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,gCAAgC,CAAC,CAAC,CAAC;gBACpE,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAC9B,CAAC;YACD,gBAAgB;YAChB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBACvD,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;YACrC,CAAC;QACH,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACnB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACnB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC5B,CAAC;QAED,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC;YACrC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,aAAa;YACnD,cAAc,EAAE,IAAI,CAAC,iBAAiB,CAAC,cAAc;YACrD,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,aAAa;YACnD,UAAU,EAAE,IAAI,CAAC,iBAAiB,CAAC,UAAU;YAC7C,iBAAiB,EAAE,EAAE;YACrB,OAAO,EAAE,MAAM;SAChB,CAAC,CAAC,SAAS,CAAC,YAAE;YACb,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,IAAM,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC;gBAC7B,0DAAM,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAChE,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,oDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;QACN,CAAC,EAAE;YACD,oDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IAGL,CAAC;IAED,gDAAiB,GAAjB;QACE,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,KAAK,EAAE,CAAC;IAClD,CAAC;IAGD,iDAAkB,GAAlB,UAAmB,GAAG;QAAtB,iBAmDC;QAlDC,IAAM,MAAM,GAA+B,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACxD,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;QAC/C,CAAC;QACD,IAAM,MAAM,GAAe,IAAI,UAAU,EAAE,CAAC;QAC5C,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3C,MAAM,CAAC,MAAM,GAAG,UAAC,CAAM;YACrB,mBAAmB;YACnB,IAAM,IAAI,GAAW,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;YACrC,IAAM,EAAE,GAAkB,0CAAS,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;YAE9D,sBAAsB;YACtB,IAAM,MAAM,GAAW,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACxC,IAAM,EAAE,GAAmB,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAE7C,eAAe;YACf,IAAM,IAAI,GAAQ,CAAC,2CAAU,CAAC,aAAa,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;YAC7E,IAAM,OAAO,GAAQ,CAAC,2CAAU,CAAC,aAAa,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC/E,IAAM,UAAU,GAAQ,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;YAGhE,UAAU,CAAC,KAAK,GAAG,EAAE,CAAC;YACtB,IAAI,QAAQ,GAAQ,EAAE,CAAC;YACvB,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,EAAH,CAAG,CAAC,CAAC;gBACrC,IAAI,MAAM,GAAG,WAAW,CAAC,OAAO,CAAC,YAAY,CAAC;gBAC9C,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjB,oDAAO,CAAC,MAAM,CAAC,8EAA8E,EAAE,OAAO,CAAC,CAAC;oBACxG,MAAM,CAAC,KAAK,CAAC;gBACf,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBACf,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;oBACzB,CAAC;oBACD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBACrC,IAAI,IAAI,GAAQ,EAAE;wBAClB,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gCAChC,IAAM,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;gCAC3B,IAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gCAC3B,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC;4BACvB,CAAC;wBACH,CAAC;wBACD,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACtB,CAAC;gBACH,CAAC;YACH,CAAC;YACD,KAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;YAC9B,KAAI,CAAC,iBAAiB,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC7C,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACxB,CAAC,CAAC;IACJ,CAAC;IAGD,4CAAa,GAAb;QACE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,EAAE,SAAS,CAAC,CAAC;QACrE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC5B,CAAC;IAED,uCAAQ,GAAR;QACE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC;QACtE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC5B,CAAC;IAED,kCAAG,GAAH;QACE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC5B,CAAC;IAED,uCAAQ,GAAR,UAAS,QAAQ,EAAE,IAAI,EAAE,MAAM;QAA/B,iBAmGC;QAlGC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,IAAM,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC3C,EAAE,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;gBAC9D,IAAI,CAAC,iBAAiB,CAAC,aAAa,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;YACjE,CAAC;YACD,IAAI;YACJ,IAAM,cAAc,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;gBAChE,IAAI,CAAC,iBAAiB,CAAC,cAAc,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;YACnE,CAAC;YACD,IAAI;YACJ,IAAM,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACxC,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;gBACxD,IAAI,CAAC,iBAAiB,CAAC,UAAU,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;YAC3D,CAAC;YACD,IAAI;YACJ,IAAM,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC3C,EAAE,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;gBAC9D,IAAI,CAAC,iBAAiB,CAAC,aAAa,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;YACjE,CAAC;YACD,IAAI;YACJ,IAAM,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrC,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;gBAClD,IAAI,CAAC,iBAAiB,CAAC,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;YACrD,CAAC;QACH,CAAC;QAED,EAAE,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBACxC,UAAU,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;oBAC7B,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;gBACpC,CAAC,CAAC;YACJ,CAAC,CAAC;QACJ,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,UAAU;gBACxC,UAAU,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;oBAC7B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;wBAC9F,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;oBACpC,CAAC;gBACH,CAAC,CAAC;YACJ,CAAC,CAAC;QACJ,CAAC;QAED,QAAQ,CAAC,OAAO,CAAC,iBAAO;YACtB,EAAE,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;gBACzB,IAAI,MAAI,GAAG,IAAI,MAAM,EAAE,CAAC;gBACxB,MAAI,CAAC,IAAI,CAAC,GAAG,0DAAM,CAAC,MAAM,EAAE,CAAC;gBAC7B,MAAI,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACzE,MAAI,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;gBACxE,MAAI,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;gBACxE,MAAI,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,0DAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC/E,MAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,IAAI,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC;gBAClE,MAAI,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,0DAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACrF,MAAI,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,0DAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACzE,MAAI,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,KAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC3F,MAAI,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC/D,MAAI,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,0DAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAEtE,EAAE,CAAC,CAAC,MAAI,CAAC,YAAY,CAAC,KAAK,IAAI,IAAI,MAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC;oBACzD,MAAI,CAAC,kBAAkB,CAAC,GAAG,MAAI,CAAC,YAAY,CAAC,GAAG,MAAI,CAAC,QAAQ,CAAC,CAAC;gBACjE,IAAI,CACF,EAAE,CAAC,CAAC,MAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC;oBAC1B,MAAI,CAAC,kBAAkB,CAAC,GAAG,MAAI,CAAC,QAAQ,CAAC,CAAC;gBAC5C,IAAI,CACF,EAAE,CAAC,CAAC,MAAI,CAAC,YAAY,CAAC,KAAK,IAAI,CAAC;oBAC9B,MAAI,CAAC,kBAAkB,CAAC,GAAG,MAAI,CAAC,YAAY,CAAC,CAAC;gBAChD,IAAI;oBACF,MAAI,CAAC,kBAAkB,CAAC,GAAG,IAAI,CAAC;gBAGtC,MAAI,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,GAAG,IAAI,OAAO,CAAC,UAAU,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;gBACnH,MAAI,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,YAAY,IAAI,CAAC,OAAO,CAAC,YAAY,IAAI,GAAG,IAAI,OAAO,CAAC,YAAY,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;gBAC3H,MAAI,CAAC,qBAAqB,CAAC,GAAG,OAAO,CAAC,mBAAmB,IAAI,CAAC,OAAO,CAAC,mBAAmB,IAAI,GAAG,IAAI,OAAO,CAAC,mBAAmB,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;gBAGvJ,IAAM,IAAI,GAAG,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,MAAI,CAAC,cAAc,CAAC,EAA/B,CAA+B,CAAC,CAAC,CAAC,CAAC,CAAC;gBAClF,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,MAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;oBACzC,IAAM,QAAQ,GAAG;wBACf,IAAI,EAAE,MAAI,CAAC,cAAc,CAAC;wBAC1B,IAAI,EAAE,MAAI,CAAC,cAAc,CAAC;wBAC1B,KAAK,EAAE,MAAI,CAAC,cAAc,CAAC,GAAG,IAAI,GAAG,MAAI,CAAC,cAAc,CAAC;qBAC1D,CAAC;oBACF,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACtC,CAAC;gBAED,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,MAAI,CAAC,CAAC;YAClC,CAAC;QACH,CAAC,CAAC;QACF,UAAU,CAAC;YACT,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,WAAW,EAAE,QAAQ,EAAE;gBACzD,UAAU,EAAE,KAAI,CAAC,MAAM,CAAC,UAAU;gBAClC,WAAW,EAAE,MAAM;gBACnB,SAAS,EAAE,MAAM;aAClB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QACjC,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,oDAAO,CAAC,WAAW,EAAE,CAAC;IACxB,CAAC;IAGD,oDAAqB,GAArB,UAAsB,QAAQ;QAC5B,EAAE,CAAC,CAAC,2DAAc,CAAC,iBAAiB,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACtD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC,CAAC;gBAChE,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE;YAC7B,yEAAyE;YACzE,IAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,QAAQ,EAAnB,CAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;YACxE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;YACnB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,MAAI,GAAG,2DAAc,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;gBACrD,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,MAAI,EAAf,CAAe,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxE,EAAE,CAAC,CAAC,UAAU,CAAC;oBACb,MAAI,GAAG,MAAI,GAAG,0DAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3C,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,MAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;gBAC5D,MAAM,CAAC,MAAI,CAAC;YACd,CAAC;YACD,WAAW;YACX,iCAAiC;YACjC,IAAI;QACN,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IACD,0CAAW,GAAX,UAAY,CAAC;QACX,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACZ,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,IAAI,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACtH,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC;YACvG,CAAC;QACH,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,GAAG,IAAI,CAAC;QACjD,CAAC;QACD,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IA9tB+B;QAA/B,+DAAS,CAAC,sEAAmB,CAAC;kCAAW,sEAAmB;0DAAC;IAerD;QAAR,2DAAK,EAAE;;4DAAiB;IAChB;QAAR,2DAAK,EAAE;;mEAAwB;IACvB;QAAR,2DAAK,EAAE;;+DAAoB;IACnB;QAAR,2DAAK,EAAE;;2DAAgB;IACf;QAAR,2DAAK,EAAE;;oEAAyB;IACxB;QAAR,2DAAK,EAAE;;0DAAe;IArBZ,oBAAoB;QALhC,+DAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;;;SAG9B,CAAC;yCAyBiB,8DAAc;YACb,sDAAM;YACD,qFAAW;YACV,4DAAc;YACX,wEAAe;YACnB,0DAAW;YACd,oEAAgB;YACV,+EAAc;OA/B7B,oBAAoB,CA0uBhC;IAAD,2BAAC;CAAA;AA1uBgC;;;;;;;;;;;;AC1BjC,0FAA0F,kDAAkD,gJAAgJ,ueAAue,6CAA6C,gBAAgB,kCAAkC,yIAAyI,4CAA4C,gJAAgJ,6CAA6C,sMAAsM,2CAA2C,yBAAyB,oCAAoC,sBAAsB,qBAAqB,6NAA6N,6CAA6C,yBAAyB,kCAAkC,qLAAqL,4CAA4C,2JAA2J,4CAA4C,wJAAwJ,qCAAqC,6NAA6N,iCAAiC,0FAA0F,6CAA6C,8rBAA8rB,2UAA2U,8BAA8B,YAAY,6BAA6B,8GAA8G,sCAAsC,YAAY,4BAA4B,sMAAsM,8BAA8B,gOAAgO,2LAA2L,uBAAuB,UAAU,mD;;;;;;;;;;;ACAxwJ,wCAAwC,eAAe,UAAU,gBAAgB,4BAA4B,wBAAwB,eAAe,WAAW,YAAY,qBAAqB,eAAe,WAAW,YAAY,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACApL;AAEoB;AACrC;AAEoF;AACpE;AACQ;AACT;AACwB;AACzB;AAG6B;AACF;AAM1E;IA+BE,mCACS,UAAsB,EACrB,UAAsB,EACtB,aAA4B,EAC5B,WAAwB,EACxB,MAAc,EACd,OAA0B,EAC1B,WAAwB,EACxB,kBAAoC,EACpC,YAA4B,EAC5B,kBAAsC;QAVhD,iBAaC;QAZQ,eAAU,GAAV,UAAU,CAAY;QACrB,eAAU,GAAV,UAAU,CAAY;QACtB,kBAAa,GAAb,aAAa,CAAe;QAC5B,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,YAAO,GAAP,OAAO,CAAmB;QAC1B,gBAAW,GAAX,WAAW,CAAa;QACxB,uBAAkB,GAAlB,kBAAkB,CAAkB;QACpC,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,uBAAkB,GAAlB,kBAAkB,CAAoB;QAnChD,iBAAY,GAAG,CAAC,CAAC;QACjB,eAAU,GAAG,CAAC,CAAC;QAEf,WAAM,GAAY,KAAK,CAAC;QACxB,YAAO,GAAY,KAAK,CAAC;QAEzB,kBAAa,GAAW,CAAC,CAAC;QAC1B,gBAAW,GAAY,KAAK,CAAC;QAE7B,cAAS,GAAG,KAAK,CAAC;QAIlB,mBAAc,GAAY,KAAK,CAAC;QAChC,mBAAc,GAAQ,EAAE,CAAC;QACzB,WAAM,GAAY,KAAK,CAAC;QAKxB,WAAM,GAAG,UAAC,KAAK;YACb,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;YACtC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,GAAG,OAAO,GAAG,GAAG,CAAC;QAC9D,CAAC;QAcC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;IACpD,CAAC;IAED,4CAAQ,GAAR;QACE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC7C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QACrD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,WAAW,CAAC;gBACxC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACvB,CAAC;QACD,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED,mDAAe,GAAf,UAAgB,CAAC;QACf,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IACzB,CAAC;IAED,kDAAc,GAAd,UAAe,CAAC;QACd,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,GAAG,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK,CAAC,CAAC,CAAC;YAC1D,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QACjD,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YACnC,CAAC;YACD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACzB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;QAClB,CAAC;IACH,CAAC;IAED,oDAAgB,GAAhB;QAAA,iBAyBC;QAxBC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,CAAC,SAAS,CAAC,iBAAO;YACvE,IAAI,IAAI,GAAQ,OAAO,CAAC;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,UAAU,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,GAAG,KAAI,CAAC,YAAY,CAAC;oBAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,eAAe,CAAC,CAAC,CAAC;wBACtC,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBAC3C,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,gCAAgC,CAAC,CAAC,CAAC;wBAC9D,KAAI,CAAC,YAAY,EAAE,CAAC;oBACtB,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,EAAE,uBAAuB,CAAC,CAAC;gBAC1E,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,OAAO,CAAC,KAAK,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC;gBACrD,CAAC;gBACD,IAAI;oBACF,KAAK,CAAC,KAAK,EAAE,CAAC;gBAChB,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACpB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBACvB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBAC1B,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,oDAAgB,GAAhB,UAAiB,UAAU;QAA3B,iBAsBC;QArBC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,GAAG,UAAU,CAAC;YAC/C,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,YAAE;gBAC1E,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,cAAI;wBAC3B,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;oBAC/B,CAAC,CAAC,CAAC;oBACH,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,SAAS,CAAC,0BAA0B,EAAE,SAAS,CAAC,CAAC;oBAChF,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACrB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;gBACb,mDAAO,CAAC,WAAW,EAAE,CAAC;gBACtB,KAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YACnC,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,wBAAwB,EAAE,OAAO,CAAC,CAAC;QAC9E,CAAC;IACH,CAAC;IAED,0CAAM,GAAN;QAAA,iBAiBC;QAhBC,mDAAO,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,wBAAwB,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE;YACnG,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;mBAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;gBAC5H,KAAI,CAAC,YAAY,EAAE,CAAC;YACtB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,gBAAgB,GAAG,OAAO,CAAC;gBAC/B,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,IAAI,KAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAAC;oBAC9D,IAAI,UAAU,GAAG,KAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,aAAa,IAAI,UAAU,IAAI,CAAC,CAAC,aAAa,IAAI,SAAS,EAA7D,CAA6D,CAAC,CAAC;oBACnI,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;wBACtC,gBAAgB,GAAG,UAAU,CAAC,GAAG,CAAC,UAAC,GAAQ,IAAK,UAAG,CAAC,WAAW,EAAf,CAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC/E,CAAC;gBACD,IAAI,WAAW,GAAG,mCAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;gBACnE,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,sCAAsC,EAAE,gCAAgC,EAAE,eAAe,EAAE,WAAW,EAAE,EAAE,EAAE,gBAAgB,EAAE,IAAI,CAAC,CAAC;YAC7L,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,gDAAY,GAAZ;QAAA,iBA4BC;QA3BC,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,cAAI,IAAI,WAAI,CAAC,EAAE,EAAP,CAAO,CAAC,CAAC;QAChD,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,YAAE;YACvD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,wBAAwB;uBAC9E,CAAC,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;oBAC5H,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,cAAI;wBAC3B,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;oBAC/B,CAAC,CAAC,CAAC;oBACH,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,SAAS,CAAC,0BAA0B,EAAE,SAAS,CAAC,CAAC;oBAChF,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACrB,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC;oBACtB,IAAI,cAAc,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;oBAC7E,KAAI,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC;gBAC3D,CAAC;YACH,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EACC,aAAG,IAAM,CAAC,EACV;YACE,GAAG,CAAC,WAAW,EAAE,CAAC;YAClB,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,8CAAU,GAAV,UAAW,UAAU,EAAE,QAAQ;QAA/B,iBASC;QARC,IAAI,gBAAgB,GAAG,OAAO,CAAC;QAC/B,IAAI,QAAQ,GAAG,gBAAgB,CAAC;QAChC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC9D,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,aAAa,IAAI,UAAU,IAAI,CAAC,CAAC,aAAa,IAAI,SAAS,EAA7D,CAA6D,CAAC,CAAC;YACnI,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;gBACtC,gBAAgB,GAAG,UAAU,CAAC,GAAG,CAAC,UAAC,GAAQ,IAAK,UAAG,CAAC,WAAW,EAAf,CAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC/E,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,UAAU,EAAE,eAAe,EAAE,QAAQ,EAAE,QAAQ,EAAE,aAAa,EAAE,gBAAgB,EAAE,IAAI,CAAC,CAAC;IACjJ,CAAC;IAED,wCAAI,GAAJ;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,GAAG,SAAS,CAAC;QACtD,CAAC;QACD,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;QACvB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAClB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;gBACd,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,2BAA2B,CAAC,EAAE,EAAE,WAAW,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;YACpF,IAAI;gBACF,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,2BAA2B,CAAC,CAAC,CAAC;QACxD,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;gBACd,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,4BAA4B,CAAC,EAAE,EAAE,WAAW,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;YACrF,IAAI;gBACF,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC;QACzD,CAAC;IACH,CAAC;IAED,qDAAiB,GAAjB,UAAkB,IAAI;QACpB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,IAAI,oBAAoB,GAAG,IAAI,CAAC;YAChC,IAAM,GAAG,GAAG,EAAE,CAAC;YACf,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAClB,EAAE,CAAC,CAAC,CAAC,0DAAc,CAAC,mBAAmB,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;gBAChE,oBAAoB,GAAG,KAAK,CAAC;YAC7B,EAAE,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;gBACzB,IAAM,YAAY,GAAG;oBACnB,KAAK,EAAE,GAAG;oBACV,QAAQ,EAAE,KAAK;oBACf,YAAY,EAAE,EAAE;oBAChB,UAAU,EAAE,iDAAK,CAAC,QAAQ,CAAC,oBAAoB;iBAChD,CAAC;gBACF,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;YACxD,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC,CAAC;oBACrD,IAAI,MAAI,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;oBACjD,MAAI,CAAC,SAAS,CAAC,GAAG,iDAAK,CAAC,aAAa,CAAC,MAAM,CAAC;oBAC7C,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,MAAI,CAAC,CAAC;gBACvC,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,IAAM,YAAY,GAAG;wBACnB,KAAK,EAAE,GAAG;wBACV,QAAQ,EAAE,KAAK;wBACf,YAAY,EAAE,EAAE;wBAChB,UAAU,EAAE,iDAAK,CAAC,QAAQ,CAAC,eAAe;wBAC1C,QAAQ,EAAE,oBAAoB;qBAC/B,CAAC;oBACF,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;gBACxD,CAAC;YACH,CAAC;QACL,CAAC;IACH,CAAC;IA9OU,yBAAyB;QALrC,+DAAS,CAAC;YACT,QAAQ,EAAE,yBAAyB;;;SAGpC,CAAC;yCAiCqB,mFAAU;YACT,8DAAU;YACP,yDAAa;YACf,uDAAW;YAChB,sDAAM;YACL,6DAAiB;YACb,qFAAW;YACJ,yFAAgB;YACtB,4DAAc;YACR,wFAAkB;OAzCrC,yBAAyB,CA+OrC;IAAD,gCAAC;CAAA;AA/OqC;;;;;;;;;;;;ACpBtC,wGAAwG,2CAA2C,+JAA+J,4VAA4V,6CAA6C,gEAAgE,eAAe,wLAAwL,2CAA2C,yCAAyC,eAAe,6IAA6I,6CAA6C,sBAAsB,eAAe,kFAAkF,8CAA8C,yCAAyC,eAAe,8EAA8E,4CAA4C,yCAAyC,eAAe,uKAAuK,8CAA8C,yCAAyC,eAAe,kUAAkU,uCAAuC,yCAAyC,eAAe,wHAAwH,eAAe,iGAAiG,cAAc,sBAAsB,eAAe,ySAAyS,wCAAwC,+YAA+Y,4CAA4C,0HAA0H,qCAAqC,+PAA+P,gCAAgC,wGAAwG,uCAAuC,4GAA4G,kBAAkB,oFAAoF,iBAAiB,iHAAiH,uCAAuC,YAAY,6BAA6B,uG;;;;;;;;;;;ACApzI,mDAAmD,kBAAkB,+CAA+C,UAAU,iBAAiB,mBAAmB,gBAAgB,qBAAqB,0BAA0B,oBAAoB,gBAAgB,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAnN;AAEjB;AACqC;AACjB;AAEsB;AAC1B;AAEY;AACQ;AACG;AAOxE;IAOE,+BACU,WAAwB,EACzB,UAAsB,EACrB,UAAsB,EACtB,WAAwB,EACxB,YAA4B,EAC7B,eAA2B,EAC1B,gBAAkC;QANlC,gBAAW,GAAX,WAAW,CAAa;QACzB,eAAU,GAAV,UAAU,CAAY;QACrB,eAAU,GAAV,UAAU,CAAY;QACtB,gBAAW,GAAX,WAAW,CAAa;QACxB,iBAAY,GAAZ,YAAY,CAAgB;QAC7B,oBAAe,GAAf,eAAe,CAAY;QAC1B,qBAAgB,GAAhB,gBAAgB,CAAkB;QAZ5C,YAAO,GAAQ,EAAE,CAAC;QAehB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;IAEpD,CAAC;IAED,wCAAQ,GAAR;QAAA,iBAmCC;QAlCC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3B,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAM,OAAO,CAAC,aAAa,WAAM,OAAO,CAAC,WAAa,CAAC;QAC5E,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,mCAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QACxE,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;QACnD,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;QACrD,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;QAC7C,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;QACjD,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;QACnD,IAAI,CAAC,OAAO,CAAC,mBAAmB,GAAG,OAAO,CAAC,wBAAwB,CAAC;QACpE,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;QAC/C,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,WAAW,CAAC;QACjC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,kBAAQ;YAC5E,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBACjC,IAAI,eAAe,GAAG,EAAE,CAAC;gBACzB,IAAM,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;gBACxC,EAAE,CAAC,CAAC,QAAQ,CAAC;oBACX,eAAe,GAAG,QAAQ,CAAC,KAAK,CAAC;gBACnC,EAAE,CAAC,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC,CAAC;oBACf,EAAE,CAAC,CAAC,eAAe,IAAI,EAAE,CAAC,CAAC,CAAC;wBAC1B,IAAI,QAAQ,GAAG,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBAC1C,QAAQ,CAAC,OAAO,CAAC,cAAI;4BACnB,EAAE,CAAC,CAAC,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gCAC/B,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC;wBACzC,CAAC,CAAC,CAAC;oBACL,CAAC;gBACH,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,KAAI,CAAC,KAAK,GAAG,eAAe,CAAC;gBAC/B,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,gDAAgB,GAAhB;QAAA,iBAeC;QAdC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,YAAE;YACzE,IAAM,MAAM,GAAG;gBACb,CAAC,EAAE,IAAI;aACR,CAAC;YACF,KAAI,CAAC,eAAe,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC;YAC5C,EAAE,CAAC,CAAC,KAAI,CAAC,eAAe,IAAI,KAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC5D,KAAI,CAAC,eAAe,CAAC,OAAO,CAAC,cAAI;oBAC/B,IAAI,CAAC,OAAO,GAAG,0DAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;gBACpF,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;YACb,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,wCAAQ,GAAR;QAAA,iBAYC;QAXC,IAAM,YAAY,GAAG;YACnB,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YAC3B,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;SACtC,CAAC;QACF,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,gFAAiB,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,YAAY,gBAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;QAC3I,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC;YACjC,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,IAAI,cAAc,CAAC,CAAC,CAAC;gBAC9D,KAAI,CAAC,gBAAgB,EAAE,CAAC;YAC1B,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,iDAAiB,GAAjB,UAAkB,CAAC;QACjB,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,KAAK,SAAS,IAAI,CAAC,CAAC,UAAU,IAAI,SAAS,CAAC,CAAC,CAAC;YAC3D,CAAC,CAAC,UAAU,GAAG,YAAY,CAAC;QAC9B,CAAC;IACH,CAAC;IA3FU,qBAAqB;QALjC,+DAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;;;SAG9B,CAAC;yCASuB,uDAAW;YACb,mFAAU;YACT,8DAAU;YACT,qFAAW;YACV,kEAAc;YACZ,mFAAU;YACR,0EAAgB;OAdjC,qBAAqB,CA6FjC;IAAD,4BAAC;CAAA;AA7FiC;;;;;;;;;;;;AClBlC,4IAA4I,iCAAiC,yKAAyK,sMAAsM,cAAc,0EAA0E,gCAAgC,gIAAgI,mCAAmC,gHAAgH,0CAA0C,2BAA2B,eAAe,KAAK,iCAAiC,+BAA+B,eAAe,MAAM,sCAAsC,+DAA+D,4CAA4C,eAAe,KAAK,mCAAmC,mBAAmB,uHAAuH,iCAAiC,YAAY,6BAA6B,kIAAkI,sCAAsC,YAAY,4BAA4B,oG;;;;;;;;;;;ACAjsD,mB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAkD;AAEoB;AAE9B;AACmB;AAEE;AACW;AAOxE;IASE,2BACS,UAAsB,EACrB,WAAwB,EACxB,WAAwB,EACxB,gBAAkC;QAHnC,eAAU,GAAV,UAAU,CAAY;QACrB,gBAAW,GAAX,WAAW,CAAa;QACxB,gBAAW,GAAX,WAAW,CAAa;QACxB,qBAAgB,GAAhB,gBAAgB,CAAkB;QAV5C,YAAO,GAAQ,EAAE,CAAC;QAGlB,YAAO,GAAG,qDAAO,CAAC;QAShB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;IAEpD,CAAC;IAED,oCAAQ,GAAR;QACE,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;IAClC,CAAC;IAED,oCAAQ,GAAR,UAAS,CAAC;QAAV,iBA2BC;QA1BC,IAAI,IAAI,GAAG,CAAC;gBACV,EAAE,EAAE,IAAI,CAAC,UAAU;gBACnB,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK;aAC1B,CAAC,CAAC;QACH,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;YACpD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,IAAI,WAAW,GAAG;oBAChB,EAAE,EAAE,KAAI,CAAC,WAAW;oBACpB,KAAK,EAAE,KAAI,CAAC,OAAO,CAAC,KAAK;iBAC1B,CAAC;gBACF,KAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,aAAG;oBACpE,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;oBAE9B,CAAC;gBACH,CAAC,CAAC,CAAC;gBACH,mDAAO,CAAC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,EAAE,SAAS,CAAC,CAAC;gBACpE,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,eAAe,GAAG,cAAc,CAAC;gBACzD,KAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;YACb,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAlDU,iBAAiB;QAL7B,+DAAS,CAAC;YACT,QAAQ,EAAE,eAAe;;;SAG1B,CAAC;yCAWqB,mFAAU;YACR,qFAAW;YACX,uDAAW;YACN,0EAAgB;OAbjC,iBAAiB,CAoD7B;IAAD,wBAAC;CAAA;AApD6B;;;;;;;;;;;;ACf9B,0FAA0F,UAAU,qEAAqE,mCAAmC,+EAA+E,uGAAuG,qBAAqB,kEAAkE,uBAAuB,oHAAoH,iBAAiB,yMAAyM,0FAA0F,uQAAuQ,aAAa,gCAAgC,SAAS,gLAAgL,sFAAsF,gFAAgF,iBAAiB,KAAK,QAAQ,qGAAqG,2DAA2D,iBAAiB,UAAU,cAAc,qGAAqG,0DAA0D,iBAAiB,KAAK,eAAe,8LAA8L,8BAA8B,gOAAgO,2LAA2L,uBAAuB,UAAU,mD;;;;;;;;;;;ACA9mF,gCAAgC,aAAa,8BAA8B,mBAAmB,YAAY,aAAa,cAAc,YAAY,WAAW,iBAAiB,qBAAqB,wBAAwB,YAAY,0BAA0B,aAAa,uBAAuB,mBAAmB,sBAAsB,WAAW,eAAe,kBAAkB,iBAAiB,kBAAkB,sCAAsC,SAAS,UAAU,aAAa,mBAAmB,yCAAyC,2BAA2B,GAAG,UAAU,GAAG,UAAU,IAAI,WAAW,IAAI,UAAU,IAAI,WAAW,IAAI,WAAW,SAAS,aAAa,mBAAmB,iBAAiB,gBAAgB,kBAAkB,eAAe,gBAAgB,sBAAsB,yBAAyB,gBAAgB,SAAS,aAAa,2BAA2B,eAAe,WAAW,YAAY,2BAA2B,QAAQ,SAAS,0BAA0B,kBAAkB,iBAAiB,kBAAkB,WAAW,YAAY,SAAS,QAAQ,wCAAwC,gCAAgC,kBAAkB,sBAAsB,4CAA4C,gBAAgB,aAAa,2CAA2C,iBAAiB,UAAU,mBAAmB,gBAAgB,wBAAwB,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA10C;AACoB;AAErB;AACR;AACc;AACoF;AAE1G;AAEe;AACwB;AAOxE;IA2CE,kCACS,OAAmB,EAClB,UAAsB,EACtB,MAAc,EACf,SAA2B,EAC1B,WAAwB,EACxB,aAA4B,EAC5B,OAA0B,EAC1B,WAAwB;QARlC,iBAaC;QAZQ,YAAO,GAAP,OAAO,CAAY;QAClB,eAAU,GAAV,UAAU,CAAY;QACtB,WAAM,GAAN,MAAM,CAAQ;QACf,cAAS,GAAT,SAAS,CAAkB;QAC1B,gBAAW,GAAX,WAAW,CAAa;QACxB,kBAAa,GAAb,aAAa,CAAe;QAC5B,YAAO,GAAP,OAAO,CAAmB;QAC1B,gBAAW,GAAX,WAAW,CAAa;QAhDlC,QAAG,GAAW,MAAM,CAAC;QACrB,YAAO,GAAY,KAAK,CAAC;QAWzB,YAAO,GAAY,KAAK,CAAC;QACzB,aAAQ,GAAG,EAAE,CAAC;QACd,cAAS,GAAG,KAAK,CAAC;QAGlB,iBAAY,GAAG,CAAC,CAAC;QACjB,eAAU,GAAG,CAAC,CAAC;QACf,WAAM,GAAY,KAAK,CAAC;QACxB,YAAO,GAAY,KAAK,CAAC;QACzB,kBAAa,GAAW,CAAC,CAAC;QAC1B,gBAAW,GAAY,KAAK,CAAC;QAE7B,mBAAc,GAAY,KAAK,CAAC;QAEhC,aAAQ,GAAG,KAAK,CAAC;QAKjB,MAAC,GAAW,CAAC,CAAC;QAKd,WAAM,GAAG,UAAC,KAAK;YACb,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;YACtC,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,GAAG,OAAO,GAAG,GAAG,CAAC;QAC9D,CAAC;QAWC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAChD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAClD,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAChC,CAAC;IA1BD,uCAAI,GAAJ,UAAK,GAAG;QACN,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;IAC/B,CAAC;IAyBD,2CAAQ,GAAR;QACE,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC7C,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,WAAW,GAAG,GAAG,CAAC;QACxC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACxB,KAAK,WAAW;gBACd,IAAI,CAAC,QAAQ,GAAG,6BAA6B,CAAC;gBAC9C,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACtB,KAAK,CAAC;YACR,KAAK,cAAc;gBACjB,IAAI,CAAC,QAAQ,GAAG,6BAA6B,CAAC;gBAC9C,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,QAAQ,GAAE,IAAI;gBACnB,KAAK,CAAC;YACR,KAAK,aAAa;gBAChB,IAAI,CAAC,QAAQ,GAAG,qBAAqB,CAAC;gBACtC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,KAAK,CAAC;YACR,KAAK,eAAe;gBAClB,IAAI,CAAC,QAAQ,GAAG,+BAA+B,CAAC;gBAChD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,KAAK,CAAC;QACV,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;IACrC,CAAC;IACD,gDAAa,GAAb,UAAc,IAAI;QAChB,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;IACnB,CAAC;IAED,0CAAO,GAAP,UAAQ,IAAY,EAAE,IAAqB,EAAE,KAAyB;QAAhD,oCAAqB;QAAE,yCAAyB;QACpE,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACxB,KAAK,WAAW;gBACd,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;gBAC3B,KAAK,CAAC;YACR,KAAK,cAAc;gBACjB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;gBAC3B,KAAK,CAAC;YACR,KAAK,aAAa;gBAChB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;gBAC5B,KAAK,CAAC;YACR,KAAK,eAAe;gBAClB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;gBAC9B,KAAK,CAAC;QACV,CAAC;IACH,CAAC;IACD,kDAAe,GAAf,UAAgB,IAAI;QAApB,iBAiDC;QAhDC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;QACd,IAAI,UAAe,CAAC;QACpB,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,GAAG,CAAC,CAAa,UAAU,EAAV,SAAI,CAAC,KAAK,EAAV,cAAU,EAAV,IAAU;YAAtB,IAAI,IAAI;YACX,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;gBAClB,UAAU,GAAG,IAAI,CAAC;gBAClB,KAAK,CAAC;YACR,CAAC;YACD,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC;SACnB;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACpB,IAAI,WAAW,GAAG,EAAE,CAAC;QACrB,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC7B,IAAI,IAAI,GAAG;YACT,KAAK,EAAE,WAAW;SACnB;QACD,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;YAChE,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,uBAAuB;gBACvB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC,CAAC;oBAC/D,KAAI,CAAC,cAAc,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC;oBACrD,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;oBAC1C,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;oBACnD,KAAI,CAAC,MAAM,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;oBACxE,KAAI,CAAC,QAAQ,GAAG,8BAA8B,GAAG,KAAI,CAAC,SAAS,CAAC;oBAChE,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;oBACvD,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC;oBAC1C,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,2BAA2B;oBAC3B,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;oBACnD,IAAI,YAAY,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;oBAChD,IAAI,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;oBAC1C,IAAI,OAAO,GAAG,MAAM,CAAC;oBACrB,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;wBACnC,OAAO,GAAG,MAAM,CAAC;oBACnB,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,SAAS,EAAE,OAAO,EAAE,oBAAoB,EAAE,KAAI,CAAC,YAAY,EAAE,YAAY,EAAE,KAAI,CAAC,cAAc,CAAC,CAAC;gBAC9J,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACpC,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACtB,CAAC;QACH,CAAC,EAAE,aAAG;YACJ,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,EAAE;YACD,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,mDAAgB,GAAhB,UAAiB,IAAI;QAArB,iBA2CC;QA1CC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;QACd,IAAI,EAAO,CAAC;QACZ,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,GAAG,CAAC,CAAa,UAAU,EAAV,SAAI,CAAC,KAAK,EAAV,cAAU,EAAV,IAAU;YAAtB,IAAI,IAAI;YACX,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;gBAClB,EAAE,GAAG,IAAI,CAAC;gBACV,KAAK,CAAC;YACR,CAAC;YACD,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC;SACnB;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACpB,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACf,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,YAAE;YACjD,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,uBAAuB;gBACvB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC,CAAC;oBAC/D,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;oBAC1C,KAAI,CAAC,MAAM,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;oBACxE,KAAI,CAAC,QAAQ,GAAG,8BAA8B,GAAG,KAAI,CAAC,SAAS,CAAC;oBAChE,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;oBACvD,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC;oBAC1C,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,2BAA2B;oBAC3B,IAAI,YAAY,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;oBAChD,IAAI,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;oBAC1C,IAAI,OAAO,GAAG,MAAM,CAAC;oBACrB,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;wBACnC,OAAO,GAAG,MAAM,CAAC;oBACnB,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,SAAS,EAAE,OAAO,EAAE,oBAAoB,EAAE,KAAI,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;gBACzI,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACpB,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC;QACH,CAAC,EAAE,aAAG;YACJ,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,EAAE;YACD,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,qDAAkB,GAAlB,UAAmB,IAAI;QAAvB,iBA2CC;QA1CC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;QACd,IAAI,EAAO,CAAC;QACZ,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,GAAG,CAAC,CAAa,UAAU,EAAV,SAAI,CAAC,KAAK,EAAV,cAAU,EAAV,IAAU;YAAtB,IAAI,IAAI;YACX,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;gBAClB,EAAE,GAAG,IAAI,CAAC;gBACV,KAAK,CAAC;YACR,CAAC;YACD,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC;SACnB;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACpB,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACf,IAAI,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,wBAAwB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,SAAS,CAAC,YAAE;YAC1E,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,uBAAuB;gBACvB,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC,CAAC;oBAC/D,KAAI,CAAC,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;oBAC1C,KAAI,CAAC,MAAM,GAAG,mCAAM,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;oBACxE,KAAI,CAAC,QAAQ,GAAG,8BAA8B,GAAG,KAAI,CAAC,SAAS,CAAC;oBAChE,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;oBACvD,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC;oBAC1C,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,2BAA2B;oBAC3B,IAAI,YAAY,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;oBAChD,IAAI,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;oBAC1C,IAAI,OAAO,GAAG,MAAM,CAAC;oBACrB,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC;wBACnC,OAAO,GAAG,MAAM,CAAC;oBACnB,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,EAAE,SAAS,EAAE,OAAO,EAAE,oBAAoB,EAAE,KAAI,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;gBACzI,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACpC,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACtB,CAAC;QACH,CAAC,EAAE,aAAG;YACJ,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC,EAAE;YACD,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,uCAAI,GAAJ;QACE,uDAAuD;QACvD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;IACrB,CAAC;IACD,wCAAK,GAAL;QACE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,GAAG,QAAQ,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IACD,wBAAwB;IACxB,mDAAgB,GAAhB;QAAA,iBAYC;QAXC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,iBAAO;YACjE,IAAM,IAAI,GAAQ,OAAO,CAAC;YAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,iBAAiB,CAAC,CAAC,CAAC;gBACvC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC;oBAC3B,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBAC1G,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC;oBAChC,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;oBACpB,mDAAO,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;gBAC5C,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACD,8CAAW,GAAX;QACE,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;IACjC,CAAC;IACD,8CAAW,GAAX,UAAY,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE,YAAY;QACvD,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC;QACzB,IAAI,CAAC,MAAM,GAAG,mCAAM,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QACxD,IAAI,CAAC,QAAQ,GAAG,8BAA8B,GAAG,IAAI,CAAC,SAAS,CAAC;QAChE,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;QACvD,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC1C,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IACD,4CAAS,GAAT;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK;QAC1B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;QAC9D,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IACD,iDAAc,GAAd;QAAA,iBAoBC;QAnBC,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAC9D,IAAI,UAAU,GAAG,IAAI,CAAC;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,aAAa,CAAC;YACnC,UAAU,GAAG,KAAK;QACpB,IAAI,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC,SAAS,CAAC,YAAE;YAC/D,IAAI,SAAS,GAAG,KAAK,CAAC;YACtB,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,KAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,kDAAM,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBACnE,SAAS,GAAG,IAAI,CAAC;YACnB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC7B,CAAC;YACD,KAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;QACzC,CAAC,EAAE,aAAG,IAAM,CAAC,EAAE;YACb,GAAG,CAAC,WAAW,EAAE,CAAC;YAClB,mDAAO,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,yDAAsB,GAAtB,UAAuB,SAAS;QAAhC,iBAkBC;QAjBC,IAAI,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;QAC9C,IAAI,CAAC,aAAa,IAAI,eAAe,CAAC;QACtC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,SAAS,CAAC;gBACpC,mDAAO,CAAC,MAAM,CAAC,wBAAwB,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;YAC5D,IAAI,CAAC,CAAC;gBACJ,gBAAgB;YAClB,CAAC;YACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,UAAU,CAAC;gBACT,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACzB,CAAC,EAAE,GAAG,CAAC,CAAC;QACV,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC;YACnD,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;IACH,CAAC;IACD,2CAAQ,GAAR,UAAS,CAAC,EAAE,IAAI,EAAE,IAAI;QACpB,IAAI,OAAO,GAAG,IAAI,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;QACjB,IAAI,GAAG,GAAG,OAAO,GAAG,IAAI,CAAC;QACzB,IAAI,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;QACjC,OAAO,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IACD,kDAAe,GAAf,UAAgB,CAAC;QACf,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IACzB,CAAC;IAED,iDAAc,GAAd,UAAe,CAAC;QACd,IAAI,CAAC,GAAG,IAAI,CAAC;QACb,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,GAAG,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK,CAAC,CAAC,CAAC;YAC1D,CAAC,GAAG,OAAO,CAAC,sEAAsE,CAAC,CAAC;QACtF,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YACnC,CAAC;YACD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACzB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;QAClB,CAAC;IACH,CAAC;IA5VU,wBAAwB;QALpC,+DAAS,CAAC;YACT,QAAQ,EAAE,kBAAkB;;;SAG7B,CAAC;yCA6CkB,mFAAU;YACN,8DAAU;YACd,sDAAM;YACJ,oEAAgB;YACb,uDAAW;YACT,yDAAa;YACnB,6DAAiB;YACb,qFAAW;OAnDvB,wBAAwB,CA6VpC;IAAD,+BAAC;CAAA;AA7VoC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBM;AACoD;AAExC;AACF;AACR;AACqB;AAClC;AAEhC;IACE,yBACU,WAAwB,EACxB,MAAc,EACd,YAA0B,EAC1B,WAAwB;QAHxB,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,iBAAY,GAAZ,YAAY,CAAc;QAC1B,gBAAW,GAAX,WAAW,CAAa;IAC9B,CAAC;IAEL,iCAAO,GAAP,UAAQ,KAA6B,EAAE,KAA0B;QAAjE,iBAuHC;QAtHC,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,MAAM,GAAG,KAAK,CAAC;QACnB,IAAI,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QACpD,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;YAChC,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,IAAI,WAAW,CAAC;gBACnC,MAAM,GAAG,IAAI,CAAC;QAClB,CAAC;QACD,IAAI,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;QACjC,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,IAAI,MAAW,CAAC;QAChB;;WAEG;QACH,IAAI,GAAG,GAAG;YACR;gBACE,MAAM,EAAE,oBAAoB;gBAC5B,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,cAAc;gBACtB,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,yBAAyB;gBACjC,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,gBAAgB;gBACxB,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,cAAc;gBACtB,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,eAAe;gBACvB,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,qBAAqB;gBAC7B,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,aAAa;gBACrB,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,wBAAwB;gBAChC,OAAO,EAAE,CAAC;aACX;SACF,CAAC;QACF,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACxC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACtB,MAAM,CAAC,OAAO,CAAC,iBAAO;gBACpB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACzB,CAAC,CAAC,CAAC;QACL,CAAC;QACD,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC;QACzB,IAAI,UAAe,CAAC;QACpB,iBAAiB;QACjB,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,UAAU,CAAC,CAAC;QACjE,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1B,UAAU,CAAC,OAAO,CAAC,iBAAO;gBACxB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACzB,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,YAAY,GAAG,qDAAQ,CAAC,QAAQ,CAAC,CAAC;QACtC,MAAM,CAAC,YAAY,CAAC,IAAI,CACtB,2DAAI,CAAC,CAAC,CAAC,EACP,0DAAG,CAAC,YAAE;YACJ,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,IAAI,MAAM,GAAG,iDAAK,CAAC,SAAS,CAAC,OAAO,CAAC;YACrC,IAAI,MAAM,GAAG,KAAK,CAAC;YACnB,GAAG,CAAC,CAAC,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;gBAC/C,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,IAAI,iDAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;oBAChD,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oBAC3C,EAAE,CAAC,CAAC,UAAU,IAAI,QAAQ,CAAC;wBACzB,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,2BAA2B,CAAC,CAAC,CAAC;oBACtD,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,IAAI,QAAQ,CAAC;wBAC9B,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC;oBACvD,MAAM,GAAG,iDAAK,CAAC,SAAS,CAAC,KAAK,CAAC;oBAC/B,KAAK,CAAC;gBACR,CAAC;YACH,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,IAAI,iDAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;gBACtC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACtB,IAAI,OAAK,GAAG,EAAE,CAAC;oBACf,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,CAAC;wBACpB,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;4BACtB,OAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;wBACtB,CAAC;oBACH,CAAC,CAAC,CAAC;oBACH,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,OAAK,CAAC,CAAC;gBACrC,CAAC;gBACD,iBAAiB;gBACjB,EAAE,CAAC,CAAC,UAAU,IAAI,QAAQ,IAAI,UAAU,IAAI,iDAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;oBACpE,IAAI,SAAS,GAAG,kDAAM,CAAC,8BAA8B,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC/E,MAAM,CAAC;wBACL,EAAE,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ;wBAC1B,SAAS;wBACT,MAAM;wBACN,EAAE,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW;qBACzC,CAAC;gBACJ,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,IAAI,SAAS,GAAG,kDAAM,CAAC,8BAA8B,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC/E,MAAM,CAAC;wBACL,EAAE,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ;wBAC1B,SAAS;wBACT,MAAM;qBACP,CAAC;gBACJ,CAAC;YACH,CAAC;YACD,IAAI;gBACF,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;IA/HU,eAAe;QAD3B,gEAAU,EAAE;yCAGY,yDAAW;YAChB,sDAAM;YACA,kEAAY;YACb,uDAAW;OALvB,eAAe,CAgI3B;IAAD,sBAAC;CAAA;AAhI2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTe;AACoD;AAEpD;AACU;AACa;AAClC;AACa;AAG7C;IACE,6BACU,WAAwB,EACxB,MAAc,EACd,YAA0B,EAC1B,WAAwB;QAHxB,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,iBAAY,GAAZ,YAAY,CAAc;QAC1B,gBAAW,GAAX,WAAW,CAAa;IAC9B,CAAC;IAEL,qCAAO,GAAP,UAAQ,KAA6B,EAAE,KAA0B;QAAjE,iBA8HC;QA7HC,IAAI,UAAU,GAAG,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACjD,IAAI,UAAU,GAAG,KAAK,CAAC;QACvB,EAAE,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,aAAa,CAAC,CAAC,CAAC;YAClD,UAAU,GAAG,IAAI,CAAC;QACpB,CAAC;QACD,mDAAO,CAAC,WAAW,EAAE,CAAC;QACtB,IAAI,MAAM,GAAG,KAAK,CAAC;QACnB,IAAI,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QACpD,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;YAChC,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,IAAI,WAAW,CAAC;gBACnC,MAAM,GAAG,IAAI,CAAC;QAClB,CAAC;QACD,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,UAAU,CAAC;YAC/B,MAAM,GAAG,KAAK,CAAC;QACjB,IAAI,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;QACjC,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,IAAI,MAAW,CAAC;QAChB;;WAEG;QACH,IAAI,GAAG,GAAG;YACR;gBACE,MAAM,EAAE,oBAAoB;gBAC5B,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,cAAc;gBACtB,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,yBAAyB;gBACjC,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,gBAAgB;gBACxB,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,cAAc;gBACtB,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,eAAe;gBACvB,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,qBAAqB;gBAC7B,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,aAAa;gBACrB,OAAO,EAAE,CAAC;aACX;YACD;gBACE,MAAM,EAAE,wBAAwB;gBAChC,OAAO,EAAE,CAAC;aACX;SACF,CAAC;QACF,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACxC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACtB,MAAM,CAAC,OAAO,CAAC,iBAAO;gBACpB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACzB,CAAC,CAAC,CAAC;QACL,CAAC;QACD,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC;QACzB,IAAI,UAAe,CAAC;QACpB,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,uBAAuB,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;QAC9E,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1B,UAAU,CAAC,OAAO,CAAC,iBAAO;gBACxB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACzB,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,YAAY,GAAG,qDAAQ,CAAC,QAAQ,CAAC,CAAC;QACtC,MAAM,CAAC,YAAY,CAAC,IAAI,CACtB,2DAAI,CAAC,CAAC,CAAC,EACP,0DAAG,CAAC,YAAE;YACJ,mDAAO,CAAC,WAAW,EAAE,CAAC;YACtB,IAAI,MAAM,GAAG,IAAI,CAAC;YAClB,IAAI,MAAM,GAAG,iDAAK,CAAC,SAAS,CAAC,OAAO,CAAC;YACrC,GAAG,CAAC,CAAC,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;gBAC/C,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,IAAI,iDAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;oBAChD,mDAAO,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oBAC3C,EAAE,CAAC,CAAC,UAAU,IAAI,QAAQ,CAAC;wBACzB,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,2BAA2B,CAAC,CAAC,CAAC;oBACtD,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,IAAI,QAAQ,CAAC;wBAC9B,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC;oBACvD,MAAM,GAAG,iDAAK,CAAC,SAAS,CAAC,KAAK,CAAC;oBAC/B,KAAK,CAAC;gBACR,CAAC;YACH,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,IAAI,iDAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;gBACtC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACtB,IAAI,OAAK,GAAG,EAAE,CAAC;oBACf,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,CAAC;wBACpB,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;4BACtB,OAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;wBACtB,CAAC;oBACH,CAAC,CAAC,CAAC;oBACH,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,OAAK,CAAC,CAAC;gBACrC,CAAC;gBACD,EAAE,CAAC,CAAC,UAAU,IAAI,QAAQ,IAAI,UAAU,IAAI,iDAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;oBACpE,IAAI,SAAS,GAAG,kDAAM,CAAC,8BAA8B,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC/E,MAAM,CAAC;wBACL,EAAE,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ;wBAC1B,EAAE,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI;wBACjC,MAAM;wBACN,SAAS;wBACT,EAAE,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW;qBACzC,CAAC;gBACJ,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,IAAI,SAAS,GAAG,kDAAM,CAAC,8BAA8B,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC/E,MAAM,CAAC;wBACL,EAAE,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ;wBAC1B,EAAE,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI;wBACjC,MAAM;wBACN,SAAS;qBACV,CAAC;gBACJ,CAAC;YACH,CAAC;YACD,IAAI;gBACF,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;IAtIU,mBAAmB;QAD/B,gEAAU,EAAE;yCAGY,yDAAW;YAChB,sDAAM;YACA,kEAAY;YACb,uDAAW;OALvB,mBAAmB,CAuI/B;IAAD,0BAAC;CAAA;AAvI+B","file":"bill-invoice-bill-invoice-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { InvoiceComponent } from './components/invoice/invoice.component';\r\nimport { InvoiceResolver } from './shared/invoice.resolver';\r\nimport { ShowInvoiceResolver } from './shared/show-invoice.resolver';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: IndexComponent\r\n  },\r\n  {\r\n    path: 'create',\r\n    component: InvoiceComponent,\r\n    resolve: {init: InvoiceResolver},\r\n    data: {brec: 'create_invoice'}\r\n  },\r\n  {\r\n    path: ':invoiceId',\r\n    component: InvoiceComponent,\r\n    resolve: {init: ShowInvoiceResolver},\r\n    data: {brec: 'invoice_details'}\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class BillInvoiceRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n\r\nimport { SharedModule } from '@shared/shared.module';\r\nimport { devextremeModule } from '@core/library';\r\nimport { vTranslateModule } from '@core/module/v-translate.module';\r\nimport { DxLookupModule, DxPopoverModule, DxTooltipModule } from 'devextreme-angular';\r\nimport { TagInputModule } from 'ngx-chips';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport { SendDataForTaxComponent } from '@shared/components';\r\nimport { NotifyReduceTaxComponent, ViewInvoiceMultipageComponent } from '@shared/components';\r\nimport { BillInvoiceRoutingModule } from './bill-invoice-routing.module';\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { FormInvoiceComponent } from './components/form-invoice/form-invoice.component';\r\nimport { ProductGripComponent } from './components/product-grip/product-grip.component';\r\nimport { InvoiceComponent } from './components/invoice/invoice.component';\r\nimport { InvoiceResolver } from './shared/invoice.resolver';\r\nimport { ShowInvoiceResolver } from './shared/show-invoice.resolver';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { SendListEmailComponent, VatSharedModule } from '@shared/index';\r\nimport { SendInvoicesComponent } from './components/send-invoices/send-invoices.component';\r\nimport { SendMailComponent } from './components/send-mail/send-mail.component';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { ImportInvoicesDtComponent } from './components/import-invoices-dt/import-invoices-dt.component';\r\nimport { ViewInvoiceBillComponent } from './components/view-invoice/view-invoice.component';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { SendInvoiceToTaxComponent } from './components/send-invoice-to-tax/send-invoice-to-tax.component';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    BillInvoiceRoutingModule,\r\n    devextremeModule,\r\n    vTranslateModule,\r\n    DxLookupModule,\r\n    TagInputModule,\r\n    DxTooltipModule,\r\n    DxPopoverModule,\r\n    NgxPaginationModule,\r\n    NgxSpinnerModule,\r\n    VatSharedModule\r\n  ],\r\n  declarations: [\r\n    IndexComponent,\r\n    InvoiceComponent,\r\n    FormInvoiceComponent,\r\n    ProductGripComponent,\r\n    SendInvoicesComponent, \r\n    ImportInvoicesDtComponent,\r\n    ViewInvoiceBillComponent,\r\n    SendInvoiceToTaxComponent,\r\n    SendMailComponent],\r\n  entryComponents: [\r\n    ViewInvoiceMultipageComponent,\r\n    SendListEmailComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    ImportInvoicesDtComponent,\r\n    ViewInvoiceBillComponent,\r\n    SendDataForTaxComponent,\r\n    NotifyReduceTaxComponent,\r\n    SendInvoiceToTaxComponent,\r\n    PreviewInvoiceComponent\r\n    ],\r\n  providers: [\r\n    InvoiceResolver,\r\n    ShowInvoiceResolver,\r\n    ListsService,\r\n    CustomersService,\r\n    VatService,\r\n    TemplateService,\r\n    MyBsModalService,\r\n    ViewInvoiceService\r\n  ]\r\n})\r\nexport class BillInvoiceModule { }\r\n","module.exports = \"<div class=\\\"row invoice-form\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- mẫu hóa đơn -->\\r\\n        <dxi-item dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- ngày hóa đơn số hóa đơn -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item [cssClass]=\\\"'max_left'\\\" dataField=\\\"bill_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n            [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss' , onValueChanged: changeDateTime}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_date }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item [cssClass]=\\\"'max_right'\\\" dataField=\\\"bill_number\\\" [template]=\\\"'notifydate'\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" [cssClass]=\\\"showFormMTT\\\">\\r\\n        <!-- Thông tin đơn vị -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- mã số thuế -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='vat_mtt layout_input group-input-button'>\\r\\n            <dxi-item name=\\\"search-mst\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.tax_code }}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-autocomplete valueExpr=\\\"tax_code\\\"\\r\\n                  placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\" [dataSource]=\\\"tax_codes\\\"\\r\\n                  [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"taxCodeChoose($event)\\\"\\r\\n                  [(value)]=\\\"frmData.buyer_tax_code\\\" (onFocusOut)=\\\"updateTaxcodeInfo($event)\\\"\\r\\n                  (onValueChanged)=\\\"changeTaxCode($event)\\\">\\r\\n                  <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                    <span>{{item.tax_code}}: {{ item.name }}</span>\\r\\n                  </div>\\r\\n                </dx-autocomplete>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <!--            <dxi-item itemType=\\\"button\\\" [buttonOptions]=\\\"mst_btn_options\\\" cssClass='btn-small'>-->\\r\\n            <!--            </dxi-item>-->\\r\\n            <dxi-item cssClass='btn-small'>\\r\\n              <button (click)=\\\"searchTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n                <i class=\\\"{{_translate.ICONS.search}}\\\" style=\\\"font-size: 22px;\\\"></i>\\r\\n              </button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Mã kh -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='vat_mtt layout_input group-input-button'>\\r\\n            <dxi-item name=\\\"search-mkh\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_code }}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-autocomplete valueExpr=\\\"code\\\" [(value)]=\\\"frmData.customer_code\\\"\\r\\n                  placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\"\\r\\n                  [dataSource]=\\\"customer_codes\\\" [readOnly]=\\\"readOnlyCacTruongConLai\\\"\\r\\n                  (onItemClick)=\\\"customerCodeChoose($event)\\\" (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n                  <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                    <span>{{item.code}}: {{ item.name }}</span>\\r\\n                  </div>\\r\\n                </dx-autocomplete>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <dxi-item cssClass='btn-small'>\\r\\n              <button (click)=\\\"editTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n                <i class=\\\"dx-icon fa fa-plus-circle icon-size\\\"></i>\\r\\n              </button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Tên đơn vị -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"customer_name\\\" [editorOptions]=\\\"{ isRequired: false,onValueChanged: customerChanged}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_name }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Họ tên người mua -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"buyer_name\\\" [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.buyer_name }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Địa chỉ người mua -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"buyer_address\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.buyer_address }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Hình thức thanh toán và email -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item cssClass=\\\"vat_mtt layout_input\\\" dataField=\\\"payment_method_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_method }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item [label]=\\\"{text: 'Email'}\\\">\\r\\n            <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n              <div\\r\\n                class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n                <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                  <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                  </app-tag-input-email>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Số đtdd và số CCCD -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"buyer_mobile\\\" [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.phone }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.phone }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item cssClass=\\\"vat_mtt layout_input\\\" dataField=\\\"id_card\\\">\\r\\n            <dxo-label text=\\\"Số CCCD\\\"></dxo-label>\\r\\n            <!-- <dxi-validation-rule *ngIf=\\\"frmData.customer_object_code != 'DOANH_NGHIEP'\\\" type=\\\"required\\\" message=\\\"{{ _translate.CONTROLL.LABEL.buyer_name }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule> -->\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n\\r\\n        <!-- Tên ngân hàng -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item cssClass=\\\"vat_mtt layout_input\\\" dataField=\\\"bank_account\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.bank_name }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Trường mở rộng -->\\r\\n        <dxi-item>\\r\\n          <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\" [formData]=\\\"frmData\\\" [customerTempt]=\\\"customerTempt\\\"\\r\\n            [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'bill_options'\\\"></app-form-extend>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n\\r\\n      <div *dxTemplate=\\\"let d of 'notifydate'\\\">\\r\\n        <div style=\\\"display: flex; align-items: center;\\\">\\r\\n          <dx-text-box [disabled]=\\\"true\\\" [(value)]=\\\"frmData.bill_number\\\"\\r\\n            class=\\\"invoice-number-create-invoice\\\"></dx-text-box>\\r\\n          <dx-button hint=\\\"{{_translate.CONTROLL.LABEL.advanced}}\\\" id=\\\"advBtn\\\" (click)=\\\"onAdvancedClick()\\\"\\r\\n            [(icon)]=\\\"_translate.ICONS.advanced\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{_translate.CONFIRM.update_customer}}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{_translate.CONTROLL.LABEL.update}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \"::ng-deep .vat_mtt.invoice-number-create-invoice input{color:red;font-weight:bold}.icon-size{font-size:21px;padding:2px 0}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code:focus{outline:none}::ng-deep .vat_mtt.invoice-note input{color:#0070C0;font-weight:bold}::ng-deep .show-form-mtt{display:none !important}::ng-deep .layout_input_left span.dx-field-item-label-content{width:144px !important}::ng-deep .vat.layout_input span.dx-field-item-label-content{min-width:unset !important}#advBtn{width:26px;height:26px;margin-left:5px}:host ::ng-deep .invoice-number-create-invoice{color:red;font-weight:bold;padding-top:3px}\\n\"","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { ActivatedRoute, } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport DataSource from 'devextreme/data/data_source';\r\n// import { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { AuthService, Helper, Library, VStringService } from '@core/index';\r\nimport { pattern } from '@config/index';\r\nimport { AddCustomerComponent } from '@shared/index';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport * as _ from 'lodash'\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'bill-form-invoice',\r\n  templateUrl: './form-invoice.component.html',\r\n  styleUrls: ['./form-invoice.component.scss']\r\n})\r\nexport class FormInvoiceComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  _translate: any;\r\n  routeSub: Subscription;\r\n  select: any = [];\r\n  emails: any = [];\r\n  tax_codes: any = [];\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(FormExtendComponent) formExtend\r\n  // isShow = false;\r\n  showFormMTT = \"show-form-mtt\"\r\n  customerCurent: any = {};\r\n  readOnlyCacTruongConLai: boolean;\r\n  pattern = pattern;\r\n  customer_codes: any = [];\r\n  showPopup = false;\r\n  dataTaxCode: any;\r\n  role_branch: boolean;\r\n  bsModalRef: BsModalRef;\r\n  arrEmail: any = []\r\n  customForms = [];\r\n  customerTempt = {};\r\n  formItems = [];\r\n  configs: any = {};\r\n  listRoleBranchOrigin: Array<any>;\r\n  @Input() frmData: any;\r\n  @Input() ttDaXuatHoaDon: boolean = false;\r\n  @Input() bill_products: any;\r\n  @Input() dataSource: any;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  @Input() formatter: any;\r\n  constructor(\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private route: ActivatedRoute,\r\n    private vatService: VatService,\r\n    private customersService: CustomersService,\r\n    private listService: ListsService,\r\n    private modalService: BsModalService,\r\n    private billService: BillService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n  ngAfterViewInit() {\r\n    let template = null;\r\n    template = this.select.templatesTT78.find(item => item.value == this.frmData.template_id);\r\n    const payment_method_code = this.frmData.payment_method_code;\r\n    this.onChangeTem(template);\r\n    if (this.frmData.id || this.billService.isCopy)\r\n      this.frmData.payment_method_code = payment_method_code;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      this.configs = this.authService.getConfigs();\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      const temptTT78 = data.init[1];\r\n      if (data.init[2] == true) {\r\n        this.select.templatesTT78 = data.init[3]\r\n      } else {\r\n        this.select.templatesTT78 = temptTT78;\r\n      }\r\n    })\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n  }\r\n  ngOnDestroy() {\r\n\r\n  }\r\n\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.changePayment_method_code(item);\r\n        this.formDuLieuMoRong(item);\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.bill_series = item.bill_series;\r\n        this.frmData.template_code = item.template_code;\r\n        let templateSelect = {};\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            templateSelect[key] = value;\r\n          }\r\n        }\r\n        this.onTemplateTypeChange.emit(item);\r\n      }\r\n    });\r\n  }\r\n\r\n  changePayment_method_code(template) {\r\n    if (template && template.fields) {\r\n      const payment_method = template.fields.find(item => item.code == '3a9f145a-549a-01ea-e507-cc7b0ab28a69');\r\n      if (payment_method && payment_method.is_show == true) {\r\n        if (!this.frmData.payment_method_code)\r\n          this.frmData.payment_method_code = 'TMCK'\r\n      } else {\r\n        this.frmData.payment_method_code = ''\r\n      }\r\n    }\r\n  }\r\n\r\n  changeDateTime() {\r\n\r\n  }\r\n  onAdvancedClick() {\r\n    // this.isShow = !this.isShow;\r\n    this.showFormMTT = this.showFormMTT ? '' : 'show-form-mtt'\r\n  }\r\n  customer_object_codeChange() {\r\n\r\n  }\r\n  customerChanged = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.name) !== VStringService._getValueToString(this.frmData.customer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_person_name) !== VStringService._getValueToString(this.frmData.buyer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_mobile) !== VStringService._getValueToString(this.frmData.buyer_mobile)\r\n              || VStringService._getValueToString(this.customerCurent.business_address) !== VStringService._getValueToString(this.frmData.buyer_address)\r\n              || VStringService._getValueToString(this.customerCurent.email) !== VStringService._getValueToString(this.frmData.buyer_email)\r\n              || VStringService._getValueToString(this.customerCurent.bank_name) !== VStringService._getValueToString(this.frmData.bank_name)\r\n              || VStringService._getValueToString(this.customerCurent.bank_account_number) !== VStringService._getValueToString(this.frmData.bank_account_number)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n    this.customerChanged(null);\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n  public removeReadonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n      // item.instance.resetValues();\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n  taxCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.bank_account_number = customer.bank_account_number ? customer.bank_account_number : '';\r\n    this.frmData.bank_name = customer.bank_name ? customer.bank_name : '';\r\n    ////\r\n    this.onFieldDataChanged();\r\n  }\r\n  changeTaxCode(e) {\r\n    this.frmData.buyer_tax_code = e.value\r\n  }\r\n  updateTaxcodeInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.tax_code) !== VStringService._getValueToString(this.frmData.buyer_tax_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n  searchTaxCode() {\r\n    Library.showloading();\r\n    if (!this.frmData.buyer_tax_code) {\r\n      Library.notify(\"Vui lòng nhập mã số thuế!\", \"error\")\r\n    } else {\r\n      this.vatService.getInfoCompany(this.frmData.buyer_tax_code).subscribe(res => {\r\n        if (res.status == \"success\") {\r\n          this.dataTaxCode = res.data.customer;\r\n          this.frmData.customer_name = this.dataTaxCode.name;\r\n          this.frmData.buyer_address = this.dataTaxCode.business_address;\r\n        }\r\n      })\r\n    }\r\n    setTimeout(() => {\r\n      Library.hideloading();\r\n    }, 1000);\r\n  }\r\n  customerCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.bank_account_number = customer.bank_account_number ? customer.bank_account_number : '';\r\n    this.frmData.bank_name = customer.bank_name ? customer.bank_name : '';\r\n    this.onFieldDataChanged();\r\n  }\r\n  updateCustomerInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n  async editTaxCode() {\r\n    this.listRoleBranchOrigin = [];\r\n    if (this.role_branch) {\r\n      const roleUser = await this.listService.getDataUserLocalStorege();\r\n      if (roleUser) {\r\n        this.listRoleBranchOrigin = await this.handleListRoleBranch(roleUser);\r\n      } else {\r\n        this.listRoleBranchOrigin = await this.listService.handleListRoleBranchUser();\r\n      }\r\n      if (Array.isArray(this.listRoleBranchOrigin) && this.listRoleBranchOrigin.length) {\r\n        if (this.listRoleBranchOrigin.length === 2) {\r\n          this.listRoleBranchOrigin = this.listRoleBranchOrigin.filter(value => {\r\n            if (value.code !== 'TAT_CA') {\r\n              value.checked = true;\r\n              return value;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n    const initialState = {\r\n      isVisibleGhiVaThemMoi: false,\r\n      role_branch: this.role_branch,\r\n      roleBranchStatus: this.listRoleBranchOrigin\r\n    };\r\n    this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n      class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const submodal = this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveData) {\r\n        const customer = this.bsModalRef.content.successSaveData;\r\n        this.frmData.customer_name = customer.name;\r\n        this.frmData.buyer_tax_code = customer.tax_code;\r\n        this.frmData.buyer_name = customer.contact_person_name;\r\n        this.frmData.buyer_address = customer.business_address;\r\n        this.frmData.customer_code = customer.code;\r\n        this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n        if (customer.email) {\r\n          this.frmData.buyer_email = customer.email;\r\n          this.emails = [];\r\n          const stringDataEmailGet = customer.email.split(';');\r\n          for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n            this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n          }\r\n        } else {\r\n          this.frmData.buyer_email = customer.email;\r\n          this.emails = [];\r\n        }\r\n        if (customer.bank_account_number) {\r\n          this.frmData.bank_account_number = customer.bank_account_number;\r\n        }\r\n        if (customer.bank_name) {\r\n          this.frmData.bank_name = customer.bank_name;\r\n        }\r\n      }\r\n      submodal.unsubscribe();\r\n    });\r\n  }\r\n  onFieldDataChanged() {\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n  async handleListRoleBranch(roleUser) {\r\n    let arrList: any;\r\n    arrList = await this.listService.handleGetDMtoCustomer(roleUser);\r\n    if (Array.isArray(arrList) && arrList.length) {\r\n      return this.listService.handleCheckAll(arrList);\r\n    }\r\n    return null;\r\n  }\r\n  capNhatDmKhachHang() {\r\n    this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.buyer_tax_code);\r\n    this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n    this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n    this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.buyer_name);\r\n    this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.buyer_mobile);\r\n    this.customerCurent.business_address = VStringService._getValueToString(this.frmData.buyer_address);\r\n    this.customerCurent.email = VStringService._getValueToString(this.frmData.buyer_email);\r\n    this.customerCurent.bank_name = VStringService._getValueToString(this.frmData.bank_name);\r\n    this.customerCurent.bank_account_number = VStringService._getValueToString(this.frmData.bank_account_number);\r\n    const data = { customer: this.customerCurent };\r\n    this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n      if (response.status === 'success') {\r\n        this.showPopup = false;\r\n      } else {\r\n        Library.notify(response.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n    });\r\n  }\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n  paymentMethodChange = (e) => {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.payment_method_name = _obj.name;\r\n    }\r\n  };\r\n\r\n  // reset trường mở rộng\r\n  public resetTMR() {\r\n    this.formExtend.resetForm();\r\n    this.formExtend.resetOptions();\r\n  }\r\n\r\n\r\n  formDuLieuMoRong(item) {\r\n    let _dulieumorong = _.cloneDeep(item.fields).filter(x => x.type === '4');\r\n    Helper.resetObject(this.formItems)\r\n    this.customForms = [];\r\n    this.customerTempt = {};\r\n    const bill_options = this.frmData.bill_options;\r\n\r\n    if (bill_options.length > 0) {\r\n      _dulieumorong = _dulieumorong.map((dl) => {\r\n        let option = bill_options.find(x => x.code == dl.code)\r\n        if (option) {\r\n          dl.value = option.value;\r\n        }\r\n        return dl;\r\n      });\r\n    }\r\n\r\n    this.frmData.bill_options = _dulieumorong;\r\n    if (_dulieumorong.length > 0) {\r\n      this.formExtend.createForm(this.customForms, _dulieumorong)\r\n    }\r\n    _dulieumorong.forEach(value => {\r\n      this.customerTempt[value.code] = value.value;\r\n    });\r\n  }\r\n  disableTemplateInput() {\r\n    if (this.frmData.bill_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"import-invoices\\\">\\r\\n  <form class=\\\"form-import-invoices\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">{{ _translate.MENU.import_invoice_from_excel}}</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"dong()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\" style=\\\"padding-bottom: 0px;\\\">\\r\\n      <div class=\\\"row inport-selector\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.invoice_form}}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [items]=\\\"templatesTT78\\\" displayExpr=\\\"name\\\" [(value)]=\\\"template_id\\\" valueExpr=\\\"value\\\"\\r\\n                  [disabled]=\\\"disabledInvoiceReleases\\\" (onValueChanged)=\\\"onInvoiceTemplate($event)\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div *ngIf=\\\"!isTamThoiAnNut\\\" class=\\\"field field-first\\\" style=\\\"width: 27%;\\\">\\r\\n              <div class=\\\"label\\\" style=\\\"width: 135px;\\\">{{ _translate.CONTROLL.LABEL.export_form }}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [(value)]=\\\"htXuat\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\"\\r\\n                  [disabled]=\\\"!configs.system_parameter.allow_keep_invoice_number\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.file_name }}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-text-box [readOnly]=\\\"true\\\" style=\\\"width: 92.5%!important; border-style: solid!important;\\\"\\r\\n                  [value]=\\\"fileName\\\"></dx-text-box>\\r\\n              </div>\\r\\n              <div class=\\\"btn-select-file\\\" style=\\\"margin-left: 30px;margin-top: 13px;\\\">\\r\\n                <a href=\\\"javascript:void(0)\\\" (click)=\\\"napDuLieuTuBangKe()\\\" class=\\\"support-link\\\">\\r\\n                  <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx, .xls\\\" (change)=\\\"onFileChanged($event)\\\"\\r\\n                    multiple=\\\"false\\\" style=\\\"display: none;\\\" />\\r\\n                  <span>{{ _translate.CONTROLL.LABEL.select_file }}</span>\\r\\n                </a>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"note-template-import\\\">\\r\\n        <p><span style=\\\"font-weight: 600; color: red; padding-right: 5px;\\\">{{ _translate.CONTROLL.LABEL.note1 }}</span>\\r\\n          {{ _translate.CONTROLL.LABEL.import_list_invoice_from_file_excel }}</p>\\r\\n        <p style=\\\"margin-left: 48px;\\\">{{ _translate.CONTROLL.LABEL.correct_format_download_template }} <a\\r\\n            href=\\\"javascript:void(0)\\\" style=\\\"font-weight: 600\\\" (click)=\\\"getFileTemp()\\\">{{\\r\\n            _translate.CONTROLL.LABEL.click_here }}</a></p>\\r\\n      </div>\\r\\n      <div class=\\\"read-file\\\">\\r\\n        <dx-button (click)=\\\"chonDocFile()\\\" text=\\\"{{ _translate.CONTROLL.LABEL.read_file_excel }}\\\" type=\\\"default\\\"\\r\\n          [disabled]=\\\"isDisReadFile\\\"></dx-button>\\r\\n        <dx-button *ngIf=\\\"!isTamThoiAnNut\\\" (click)=\\\"configColumn()\\\" text=\\\"{{ _translate.CONTROLL.LABEL.config }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n      <!-- phần table hiển thị -->\\r\\n      <div class=\\\"row invoice-table\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <dx-data-grid id=\\\"gridImportInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n            [wordWrapEnabled]=\\\"true\\\" [columnAutoWidth]=\\\"false\\\" [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\"\\r\\n            [columnResizingMode]=\\\"true\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n            (onEditorPreparing)=\\\"onEditorPreparing($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\"\\r\\n            (onCellPrepared)=\\\"onCellPrepared($event)\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n            (onRowUpdated)=\\\"onRowUpdated($event)\\\" (onRowRemoving)=\\\"onRowRemoving($event)\\\"\\r\\n            (onKeyDown)=\\\"onGripKeyDown($event)\\\">\\r\\n            <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n            <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\" [allowDeleting]=\\\"true\\\" [useIcons]=\\\"true\\\">\\r\\n            </dxo-editing>\\r\\n            <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n            <dxo-column-fixing [enabled]=\\\"true\\\"></dxo-column-fixing>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('number_of_vouchers').is_visible\\\" dataField=\\\"number_of_vouchers\\\" [width]=\\\"130\\\"\\r\\n              caption=\\\"{{infoColumn('number_of_vouchers').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n              fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('bill_date').is_visible\\\" dataField=\\\"bill_date\\\"\\r\\n              caption=\\\"{{infoColumn('bill_date').column_name}}\\\" [width]=\\\"140\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\"\\r\\n              dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('customer_code').is_visible\\\" dataField=\\\"customer_code\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('customer_code').column_name}}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n              fixedPosition=\\\"left\\\"></dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_tax_code').is_visible\\\" dataField=\\\"buyer_tax_code\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('buyer_tax_code').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n              fixedPosition=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"taxCodePattern\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.tax_code }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('customer_name').is_visible\\\" dataField=\\\"customer_name\\\" [width]=\\\"180\\\"\\r\\n              caption=\\\"{{infoColumn('customer_name').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n              fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_name').is_visible\\\" dataField=\\\"buyer_name\\\" [width]=\\\"120\\\"\\r\\n              caption=\\\"{{infoColumn('buyer_name').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n           \\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_address').is_visible\\\" dataField=\\\"buyer_address\\\" [width]=\\\"200\\\"\\r\\n              caption=\\\"{{infoColumn('buyer_address').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_mobile').is_visible\\\" dataField=\\\"buyer_mobile\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('buyer_mobile').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"phonePattern\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.phone_number }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n\\r\\n            <!-- Căn cước công dân -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('id_card').is_visible\\\" dataField=\\\"id_card\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('id_card').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Hình thức bán hàng -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('sell_form').is_visible\\\" dataField=\\\"sell_form\\\" [width]=\\\"200\\\"\\r\\n              caption=\\\"{{infoColumn('sell_form').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Email nhận hóa đơn -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_email').is_visible\\\" dataField=\\\"buyer_email\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('buyer_email').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"emailPattern\\\"\\r\\n                message=\\\"Email {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('payment_method_code').is_visible\\\" dataField=\\\"payment_method_code\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('payment_method_code').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.payment_method_names\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Tỷ giá trên hóa đơn -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('currency_rate').is_visible\\\" dataField=\\\"currency_rate\\\"\\r\\n              caption=\\\"{{infoColumn('currency_rate').column_name}}\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.ty_gia }\\\" [format]=\\\"formatter.ty_gia\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\"></dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('bank_account').is_visible\\\" dataField=\\\"bank_account\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('bank_account').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Mã hàng hóa -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('product_code').is_visible\\\" dataField=\\\"product_code\\\"\\r\\n              [editorOptions]=\\\"{showClearButton: true}\\\" caption=\\\"{{infoColumn('product_code').column_name}}\\\"\\r\\n              alignment=\\\"center\\\" [width]=\\\"100\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.products\\\" displayExpr=\\\"code\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('product_name').is_visible\\\" dataField=\\\"product_name\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('product_name').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Diễn giải -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('is_explain').is_visible\\\" dataField=\\\"is_explain\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('is_explain').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Khuyến mại -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('is_promotion').is_visible\\\" dataField=\\\"is_promotion\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('is_promotion').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Chiết khấu thương mại -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('commercial_discount').is_visible\\\" dataField=\\\"commercial_discount\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('commercial_discount').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Đơn vị tính -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('unit_name').is_visible\\\" dataField=\\\"unit_code\\\"\\r\\n              [editorOptions]=\\\"lookupColumnOptions\\\" caption=\\\"{{infoColumn('unit_name').column_name}}\\\" [width]=\\\"100\\\"\\r\\n              alignment=\\\"center\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Số lượng -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('quantity').is_visible\\\" dataField=\\\"quantity\\\"\\r\\n              caption=\\\"{{infoColumn('quantity').column_name}}\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"center\\\"></dxi-column>\\r\\n            <!-- Đơn giá -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('price').is_visible\\\" dataField=\\\"price\\\"\\r\\n              caption=\\\"{{infoColumn('price').column_name}}\\\" [width]=\\\"90\\\" [editorOptions]=\\\"{ format: formatter.don_gia }\\\"\\r\\n              [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n          \\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('discount').is_visible\\\" dataField=\\\"discount\\\"\\r\\n              caption=\\\"{{infoColumn('discount').column_name}}\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.ty_le_chiet_khau }\\\" [format]=\\\"formatter.ty_le_chiet_khau\\\"\\r\\n              dataType=\\\"number\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount_discount').is_visible\\\" dataField=\\\"amount_discount\\\"\\r\\n              caption=\\\"{{infoColumn('amount_discount').column_name}}\\\" [width]=\\\"109\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tien_chiet_khau }\\\" [format]=\\\"formatter.tien_chiet_khau\\\"\\r\\n              dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n              <!-- Thành tiền -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount').is_visible\\\" dataField=\\\"amount\\\"\\r\\n              caption=\\\"{{infoColumn('amount').column_name}}\\\" [width]=\\\"109\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('vat').is_visible\\\" dataField=\\\"vat\\\" [editorOptions]=\\\"{showClearButton: true}\\\"\\r\\n              caption=\\\"{{infoColumn('vat').column_name}}\\\" [width]=\\\"90\\\" alignment=\\\"center\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Tiền thuế -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount_vat').is_visible\\\" dataField=\\\"amount_vat\\\"\\r\\n              caption=\\\"{{infoColumn('amount_vat').column_name}}\\\" [width]=\\\"120\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tien_thue }\\\" [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount_after_vat').is_visible\\\" dataField=\\\"amount_after_vat\\\"\\r\\n              caption=\\\"{{infoColumn('amount_after_vat').column_name}}\\\" [width]=\\\"130\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n              <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n            </div>\\r\\n            <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n            <dxo-paging [enabled]=\\\"true\\\"></dxo-paging>\\r\\n          </dx-data-grid>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-md-7\\\">\\r\\n          <div class=\\\"note-footer\\\">\\r\\n            <p style=\\\"margin-left: 0;\\\"><span style=\\\"font-weight: 500; color: red;\\\">{{ _translate.GRID.GENERAL.note\\r\\n                }}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.can_edit_delete_on_grid }}</p>\\r\\n            <p><span class=\\\"mau-vang\\\"> </span>{{ _translate.CONTROLL.LABEL.yellow_number_of_voucher }}</p>\\r\\n            <p><span class=\\\"mau-do\\\"> </span>{{ _translate.CONTROLL.LABEL.red_incorrect_format }}</p>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"col-md-5\\\">\\r\\n          <div class=\\\"note-footer\\\" style=\\\"text-align: right; margin-right: 50px;\\\">\\r\\n            <p style=\\\"padding: 8px;\\\"></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_valid_documents }} <span\\r\\n                style=\\\"color: seagreen; font-weight: 600\\\">{{totalInvoiceInvalid}}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_voucher_wrong_format }} <span\\r\\n                style=\\\"color: red; font-weight: 600\\\">{{totalErrorInvoice}}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_voucher_duplicate }} <span\\r\\n                style=\\\"color: yellow; font-weight: 600\\\">{{totalDuplicateInvoice}}</span></p>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\"\\r\\n          text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice }}\\\" (click)=\\\"preview()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <!-- <dx-button *ngIf=\\\"!isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\"\\r\\n          text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice }}\\\" (click)=\\\"xemHoaDon()\\\" type=\\\"default\\\"></dx-button> -->\\r\\n      </div>\\r\\n      <div class=\\\"col-md-8 btn-right\\\">\\r\\n        <dx-button text=\\\"{{ _translate.CONTROLL.BUTTON.come_back}}\\\" type=\\\"default\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\"\\r\\n          (click)=\\\"dong()\\\">\\r\\n        </dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"Ghi tạm\\\" icon=\\\"assets\\\\img\\\\icons\\\\GhiTam.png\\\" (click)=\\\"submit('LUU')\\\"\\r\\n          type=\\\"default\\\"></dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit && isAccessExportInv\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\"\\r\\n          icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"submit('XUAT')\\\" type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.processing }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopupImport\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"500\\\" [height]=\\\"160\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"popupCachNapDuLieu\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p>{{ _translate.CONTROLL.LABEL.please_choose_load_data }} </p>\\r\\n    <div class=\\\"text-center\\\" style=\\\"margin-top: 25px\\\">\\r\\n      <dx-button (click)=\\\"thayThe($event)\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all}}\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"themTiep($event)\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</dx-popup>\"","module.exports = \".import-invoices .dx-texteditor{border-radius:0;display:inline-block;margin-right:8px;height:28px;max-height:32px}.import-invoices .select-file .field>div{display:inline-block;vertical-align:middle}.import-invoices .select-file{width:100%;display:inline-block;margin:0}.import-invoices .select-file .field .label{width:90px;margin-right:10px;text-align:right;margin-top:7px}.import-invoices .select-file .field .value{width:35% !important;margin-top:10px}.import-invoices .select-file .field.field-first{display:inline-block}.import-invoices .select-file .field.field-first .value{width:calc(100% - 150px) !important}::ng-deep .import-invoices .select-file .field .dx-texteditor{width:100% !important}.support-link{top:-2px;position:relative;padding:5px 25px 7px 25px;background-color:#337ab7;border-color:#2d6da3;color:#fff;text-decoration:none}.support-link.mgr-15{margin-right:15px}.support-link img{margin-right:10px;margin-top:-2px}#auto-input{margin-right:75px}.note-template-import{margin-top:10px;margin-left:52px;display:inline-block;width:39%}.read-file{display:inline-block;margin-left:6px;position:relative;top:-10px}.note-footer{margin-top:10px}.note-footer p{margin-left:20px;margin-bottom:5px}.mau-vang{padding-right:15px;margin-right:10px;background-color:yellow}.mau-do{padding-right:15px;margin-right:10px;background-color:red}::ng-deep #gridImportInvoice{height:400px}::ng-deep .btn-right{padding-right:0}::ng-deep .btn-right .dx-button{float:right}::ng-deep .btn-right .dx-button:last-child{margin-right:8px !important}::ng-deep #gridImportInvoice .dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit{width:40px;min-width:20px !important}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-validator.dx-datagrid-invalid .dx-highlight-outline::after{border:2px solid #d9534f}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-cell-modified .dx-highlight-outline::after{border-color:#fff}::ng-deep .form-import-invoices .inport-selector .dx-texteditor-input{padding-bottom:15px}::ng-deep .notify-modal{max-width:22%}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild, Input } from '@angular/core';\r\n\r\nimport { SocketService, AuthService, Library, sEnum, Helper, VChanggeMoneyService, VStringService, VPreviewInvService } from '@core/index';\r\n\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { ConfigColumnImportExcelComponent, NotifySuccessComponent } from '@shared/index';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String, StringBuilder } from 'typescript-string-operations';\r\nimport * as XLSX from 'xlsx';\r\nimport { pattern } from '@config/index';\r\nimport * as moment from 'moment';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { SignatureOffComponent } from '@shared/index';\r\ndeclare var $: any;\r\nimport { Location } from '@angular/common';\r\nimport { collapseTextChangeRangesAcrossMultipleVersions } from 'typescript';\r\nimport { isNull } from 'util';\r\nimport * as _ from 'lodash';\r\nimport { ViewInvoiceBillComponent } from '../view-invoice/view-invoice.component';\r\nimport { BillModel } from '@modules/bill-invoice/shared/bill.model';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { Router } from '@angular/router';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-import-invoices-dt',\r\n  templateUrl: './import-invoices-dt.component.html',\r\n  styleUrls: ['./import-invoices-dt.component.scss']\r\n})\r\nexport class ImportInvoicesDtComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n\r\n  invoice_releases: any;\r\n  templatesTT78: any;\r\n  infoDangKy: any;\r\n  isHdGTGT: any;\r\n  fileName = \"\";\r\n  dataExcelFile: any;\r\n  target: DataTransfer;\r\n  isDisReadFile = true;\r\n  select: any = {};\r\n  isAccessExportInv: boolean = false;\r\n  configs: any;\r\n  formatter: any = {};\r\n  frmData = new BillModel(1);\r\n  fieldDisable = [\"number_of_vouchers\", \"bill_date\", \"customer_code\", \"currency_code\", \"currency_rate\", \"buyer_tax_code\", \"customer_name\", \"buyer_name\", \"buyer_address\", \"buyer_mobile\", \"buyer_email\", \"payment_method_code\", \"bank_account\", \"id_card\"];\r\n  invoice_release_id: any;\r\n  template_id: any;\r\n  invoice_date = \"\";\r\n  invoice_number = \"\";\r\n  isAllowEditInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuat = \"XuatVaKy\";\r\n  bsModalRef: BsModalRef;\r\n  listColumn: any = [];\r\n  htXuatOptions = [];\r\n  ioSignature: Subscription;\r\n  tempKiFile = 0;\r\n  ttDaXuatHoaDon: boolean = false; //Trạng thái đã xuất hóa đơn hay chưa\r\n  invoicesArr: any;\r\n  invoice: any;\r\n  totalInvoice = 0;\r\n  totalErrorInvoice = 0;\r\n  totalDuplicateInvoice = 0;\r\n  countInvoice = 1;\r\n  valueProgress: number = 0;\r\n  showPopupImport = false;\r\n  stopImport = false;\r\n  subXuatHoaDon: any;\r\n  subLuuChoXuat: any;\r\n  errorImport = false;\r\n  hoaDonImportChoXuat: any;\r\n  invoicesHaveNumberOfVouchers: any;\r\n  taxCodePattern = pattern.tax_code;\r\n  emailPattern = pattern.email;\r\n  phonePattern = pattern.phone;\r\n  datetimePattern = pattern.datetime;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  isVisibleBtnSubmit = true;\r\n  approveRequired = false;\r\n  dataFormGird = [];\r\n  disabledInvoiceReleases: boolean = false;\r\n  bsModalSignRef: BsModalRef;\r\n  invoicesId = [];\r\n  columns: any = [];\r\n  billoptions: any = [];\r\n  is_multi_vat: any;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  popupCachNapDuLieu = false;\r\n  isThemTiep = true;\r\n  _translate: any;\r\n  currentUser: any;\r\n  nodeSign: any;\r\n  totalInvoiceInvalid: any;\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  isTT78: boolean = false;\r\n  template_code: any;\r\n  bill_series: any;\r\n  isToKhaiThue = false;\r\n  isPassNQ43: boolean = false;\r\n  passport_expiration_date: any;\r\n  passport_date: any;\r\n  isTamThoiAnNut: boolean = true;\r\n  search: any;\r\n  selectedItem: any;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    public bsModalImportRef: BsModalRef,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private modalImportService: MyBsModalService,\r\n    public bsModalViewModel: BsModalRef,\r\n    private _location: Location,\r\n    private billService: BillService,\r\n    private productsService: ProductsService,\r\n    private router: Router,\r\n    private invoiceService: InvoiceService\r\n\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    //get  cấu hình\r\n    this.connectWebsocket();\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'keyData',\r\n      data: []\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.configs = this.authService.getConfigs();\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    this.listColumn = Helper.listColumnImportBillExcel(this._translate);\r\n    if (this.infoDangKy) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n        this.isTT78 = true;\r\n      }\r\n    }\r\n    this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate);\r\n    this.bill_series = this.templatesTT78.length > 0 ? this.templatesTT78[0].bill_series : null;\r\n    this.template_code = this.templatesTT78.length > 0 ? this.templatesTT78[0].template_code : null;\r\n    this.template_id = this.templatesTT78.length > 0 ? this.templatesTT78[0].value : null;\r\n    this.is_multi_vat = this.templatesTT78.length > 0 ? this.templatesTT78[0].is_multi_vat : null;\r\n\r\n    if (this.hoaDonImportChoXuat) {\r\n      this.invoice_date = this.hoaDonImportChoXuat[0].bill_date ? moment(this.hoaDonImportChoXuat[0].bill_date).format('YYYY-MM-DD HH:mm:ss') : \"\";\r\n      this.template_id = this.hoaDonImportChoXuat[0].template_id;\r\n      this.templatesTT78.forEach(item => {\r\n        if(item.value === this.template_id) {\r\n          this.onInvoiceTemplate(item, false);\r\n        }\r\n      });\r\n      this.htXuat = this.hoaDonImportChoXuat[0].status;\r\n\r\n      if (this.htXuat == sEnum.statusInv.GhiTam)\r\n        this.htXuat = 'XuatVaKy';\r\n      let template = this.templatesTT78.filter(p => p.value == this.template_id);\r\n      if (template.length > 0) {\r\n        this.is_multi_vat = template[0].is_multi_vat;\r\n      }\r\n      if (this.hoaDonImportChoXuat[0].status == \"GIU_SO\") {\r\n        this.disabledInvoiceReleases = true;\r\n      }\r\n      if (this.hoaDonImportChoXuat[0].status == \"GHI_TAM\") {\r\n        const isExistKyLoi = this.hoaDonImportChoXuat.some(item => parseInt(item.bill_number) > 0);\r\n        if (isExistKyLoi)\r\n          this.disabledInvoiceReleases = true;\r\n      }\r\n      this.layDuLieuTuHoaDonChoXuat();\r\n    }\r\n    else\r\n    {\r\n      this.loadRow(10);\r\n    }\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    let listpermissions = this.currentUser.user.permissions.split(',');\r\n    let _obj = listpermissions.filter(p => p == \"phe_duyet\");\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else\r\n      this.isAccessExportInv = false;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        if (item.product_name && item.unit_name) {\r\n          const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n          if (!obj1) {\r\n            if (VStringService._getValueToString(item.unit_code) == \"\")\r\n              item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n            let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n            if (oDuplicate)\r\n              item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n            this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n          }\r\n          else {\r\n            if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n              let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (!oDuplicate)\r\n                this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n    this.createUpdateEvent();\r\n  }\r\n  ngAfterViewInit() {\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.push(item);\r\n      });\r\n    }\r\n    if(this.hoaDonImportChoXuat && this.hoaDonImportChoXuat.length != 0) {\r\n      this.setFormGird();\r\n    }else {\r\n      this.onInvoiceTemplate(this.templatesTT78[0], true);\r\n    }\r\n  }\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.sendInvoice(data.Data.Content);\r\n          } else if (data.Data.Name === 'thongdiep.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content);\r\n          }\r\n          else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.invoice.issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat();\r\n          } else {\r\n            this.invoice.invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoice.invoice_files.length) {\r\n              this.xuLiApiKhiXuat();\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.errorImport = true;\r\n        this.showPopupImport = false;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  layDuLieuTuHoaDonChoXuat() {\r\n    this.hoaDonImportChoXuat.forEach(invoice => {\r\n      invoice.bill_products = invoice.bill_products.sort((itemA, itemB) => {\r\n        return itemA.order - itemB.order;\r\n      });\r\n\r\n      let number_of_vouchers = invoice.number_of_vouchers ? invoice.number_of_vouchers : Helper.genNumberOfVoucher(this.hoaDonImportChoXuat);\r\n      const bill_options = this.layBillOption(invoice);\r\n      if(invoice.bill_products && invoice.bill_products.length > 0) {\r\n        for (let i = 0; i < invoice.bill_products.length; i++) {\r\n          let product = invoice.bill_products[i];\r\n          this.layDuLieuDong(product, invoice, i, number_of_vouchers, bill_options);\r\n        }\r\n      }else{\r\n        this.layDuLieuDong({}, invoice, 0, number_of_vouchers, bill_options);\r\n      }\r\n    });\r\n    this.checkStatusData();\r\n  }\r\n\r\n  layDuLieuDong(product, invoice, i, number_of_vouchers, bill_options) {\r\n    let rowInvoice = new Object;\r\n    this.template_id = invoice.template_id;\r\n    this.template_code = invoice.template_code;\r\n    this.bill_series = invoice.bill_series;\r\n    if (i == 0) {\r\n      this.invoicesId.push(invoice.id)\r\n      rowInvoice[\"statusData\"] = \"INVALID\";\r\n      rowInvoice[\"id\"] = invoice.id;\r\n      rowInvoice[\"number_of_vouchers\"] = number_of_vouchers;\r\n      rowInvoice[\"customer_code\"] = invoice.customer_code;\r\n      rowInvoice[\"currency_code\"] = invoice.currency_code;\r\n      rowInvoice[\"buyer_tax_code\"] = invoice.buyer_tax_code;\r\n      rowInvoice[\"customer_name\"] = invoice.customer_name;\r\n      rowInvoice[\"status\"] = invoice.status;\r\n      rowInvoice[\"buyer_name\"] = invoice.buyer_name;\r\n      rowInvoice[\"buyer_address\"] = invoice.buyer_address;\r\n      rowInvoice[\"consult_number\"] = invoice.consult_number;\r\n      rowInvoice[\"buyer_mobile\"] = invoice.buyer_mobile;\r\n      rowInvoice[\"currency_rate\"] = invoice.currency_rate;\r\n      ///// HĐ xe\r\n      rowInvoice[\"buyer_email\"] = invoice.buyer_email;\r\n      rowInvoice[\"payment_method_name\"] = invoice.payment_method_name;\r\n      rowInvoice[\"payment_method_code\"] = invoice.payment_method_code;\r\n      rowInvoice[\"bank_account\"] = invoice.bank_account;\r\n      rowInvoice[\"note\"] = invoice.note;\r\n      rowInvoice[\"bill_number\"] = invoice.bill_number;\r\n      rowInvoice[\"bill_date\"] = invoice.bill_date;\r\n      rowInvoice[\"bill_options\"] = bill_options.refBillArr;\r\n      rowInvoice = _.merge(rowInvoice, bill_options.refBill);\r\n    } else {\r\n      rowInvoice[\"number_of_vouchers\"] = \"\";\r\n      rowInvoice[\"customer_code\"] = \"\";\r\n      rowInvoice[\"currency_code\"] = \"\";\r\n      rowInvoice[\"currency_rate\"] = null;\r\n      rowInvoice[\"buyer_tax_code\"] = \"\";\r\n      rowInvoice[\"customer_name\"] = \"\";\r\n      rowInvoice[\"buyer_name\"] = \"\";\r\n      rowInvoice[\"buyer_address\"] = \"\";\r\n      rowInvoice[\"buyer_mobile\"] = \"\";\r\n      rowInvoice[\"buyer_email\"] = \"\";\r\n      rowInvoice[\"payment_method_name\"] = \"\";\r\n      rowInvoice[\"payment_method_code\"] = \"\";\r\n      rowInvoice[\"bank_account\"] = \"\";\r\n      rowInvoice[\"note\"] = \"\";\r\n      rowInvoice[\"dataType\"] = \"HANG_HOA\";\r\n      rowInvoice[\"productNumberOfVouchers\"] = number_of_vouchers;\r\n      rowInvoice = _.merge(rowInvoice, _.mapValues(bill_options.refBill, () => \"\"));\r\n    }\r\n    rowInvoice[\"commercial_discount\"] = product.commercial_discount ? product.commercial_discount : false;\r\n    rowInvoice[\"is_explain\"] = product.is_explain ? product.is_explain : false;/* Diễn giải */\r\n    rowInvoice[\"is_promotion\"] = product.is_promotion ? product.is_promotion : false;/* Khuyến mại */\r\n    rowInvoice[\"product_code\"] = product.product_code ? product.product_code : null;\r\n    rowInvoice[\"product_name\"] = product.product_name ? product.product_name : null;\r\n    rowInvoice[\"unit_code\"] = product.unit_code ? product.unit_code : null;\r\n    rowInvoice[\"unit_name\"] = product.unit_name ? product.unit_name : null;\r\n    rowInvoice[\"quantity\"] = product.quantity ? product.quantity : null;\r\n    rowInvoice[\"discount\"] = product.discount ? product.discount : null;\r\n    rowInvoice[\"amount_discount\"] = product.amount_discount ? product.amount_discount : null;\r\n    rowInvoice[\"price\"] = product.price ? product.price : null;\r\n    rowInvoice[\"amount\"] = product.amount ? product.amount : null;\r\n    rowInvoice[\"vat\"] = product.vat ? product.vat : null;\r\n    rowInvoice[\"amount_vat\"] = product.amount_vat ? product.amount_vat : null;\r\n    rowInvoice[\"amount_after_vat\"] = product.amount_after_vat ? product.amount_after_vat : null;\r\n    rowInvoice[\"order\"] = product.order ? product.order : null;\r\n    rowInvoice[\"view_order\"] = product.view_order ? product.view_order : null;\r\n\r\n    this.invoice_products.insert(rowInvoice);\r\n  }\r\n\r\n  layBillOption(bill) {\r\n    let refBill = {};\r\n    let refBillArr = [];\r\n    const arrOptions = bill.bill_options ? bill.bill_options : [];\r\n\r\n    this.billoptions.forEach(item => {\r\n      let temp = {...item}\r\n      const option = arrOptions.find(o => o.code == temp.code);\r\n      refBill[item.code] = '';\r\n      if(option){\r\n        temp.value = option.value;\r\n        refBill[item.code] = option.value\r\n      }\r\n      refBillArr.push(temp);\r\n    })\r\n    return {\r\n      refBill,\r\n      refBillArr\r\n    }\r\n  }\r\n  loadRow(countRow) {\r\n    let tempRow = this.frmData.tempImportRow(countRow);\r\n    tempRow.forEach(element => {\r\n      this.invoice_products.insert(element);\r\n    });\r\n  }\r\n\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById(\"file-bang-ke\").click();\r\n    this.isThemTiep = false;\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n  }\r\n\r\n  log(val) { console.log(val); }\r\n\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"BK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.invoice_products.load().then((dataSource) => {\r\n          dataSource[rowIndex][\"file_attach\"] = fileAttachData;\r\n          dataSource[rowIndex][\"file_attach_name\"] = file.name;\r\n        });\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n\r\n  customizeText(e) {\r\n    if (!e.value) {\r\n      e.value = 0;\r\n    }\r\n    let formatter = new Intl.NumberFormat('ja-JP');\r\n    let totalMoney = formatter.format(parseFloat(e.value));\r\n    return totalMoney;\r\n  }\r\n\r\n  onFileChanged(evt) {\r\n    this.target = <DataTransfer>(evt.target);\r\n    this.fileName = this.target.files[0].name;\r\n    // this.fileSize = target.files[0].size/1024;\r\n    if (this.target.files.length !== 1) {\r\n      Library.notify('Không thể chọn nhiều file', 'error');\r\n      throw new Error('Không thể chọn nhiều file');\r\n    };\r\n    this.isDisReadFile = false;\r\n  }\r\n\r\n  addRow() {\r\n    let len, order;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      if (dataSource.length >= 1) {\r\n        len = dataSource.length;\r\n        order = dataSource[len - 1].order + 1;\r\n      } else {\r\n        order = 1;\r\n      }\r\n    });\r\n    let data = this.frmData.addImportRow(order, order);\r\n    this.invoice_products.insert(data);\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  getFileTemp() {\r\n    Library.showloading();\r\n    let data = {\r\n      invoice: {\r\n        invoice_type: sEnum.exportType.hoadon,\r\n        columns: [],\r\n        template_id: this.template_id\r\n      }\r\n    }\r\n    this.billService.getFileTemmpImportInvoices(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất file Excel thành công\", 'success');\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    })\r\n  }\r\n\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return 'Hoàn thành: ' + percent + '%';\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình nạp dữ liệu sẽ dừng lại nếu bạn đóng cửa sổ này\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      if (this.subLuuChoXuat) {\r\n        this.subLuuChoXuat.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n      this.totalInvoice = 0;\r\n      this.isVisibleBtnSubmit = false;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  getDataFromGird() {\r\n    this.invoice_products.load().then((dataSource) => {\r\n      if (dataSource.length > 0) {\r\n        dataSource.forEach(row => {\r\n          if (row.number_of_vouchers || row.productNumberOfVouchers) {\r\n            this.dataFormGird.push(row);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  chonDocFile() {\r\n    this.popupCachNapDuLieu = true;\r\n  }\r\n\r\n  thayThe(e) {\r\n    this.isThemTiep = false;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  themTiep(e) {\r\n    this.isThemTiep = true;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  readFile() {\r\n    this.isDisReadFile = true;\r\n    Library.showloading();\r\n    const reader: FileReader = new FileReader();\r\n\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      let data = <any>(XLSX.utils.sheet_to_json(ws, { header: \"A\", range: 0 }));\r\n\r\n      let fileBangKe: any = document.getElementById(\"file-bang-ke\");\r\n      fileBangKe.value = \"\";\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"number_of_vouchers\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n        this.dataExcelFile = _arrData;\r\n        this.fillData(this.dataExcelFile);\r\n      }\r\n    };\r\n    reader.readAsBinaryString(this.target.files[0]);\r\n  }\r\n\r\n  fillData(fileData) {\r\n    this.getDataFromGird();\r\n    let count = 2;\r\n    let view_order = 0;\r\n    let data = [];\r\n    let numberOfVouchers = [];\r\n    let isValid = true;\r\n    let _index = 0;\r\n    if (!this.isThemTiep) {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.invoice_products.remove(item.keyData);\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n      let invoice = new Object;\r\n      if (element.number_of_vouchers) {\r\n        invoice[\"statusData\"] = \"INVALID\"\r\n        let bill_date = Helper.processDate(element.bill_date);\r\n        if (bill_date == \"ERROR\") {\r\n          Library.notify(\"Ngày hóa đơn không đúng định dạng\", \"error\");\r\n          isValid = false;\r\n          return;\r\n        }\r\n        else\r\n          if (bill_date != \"\")\r\n            invoice[\"bill_date\"] = bill_date;\r\n        invoice[\"customer_code\"] = element.customer_code ? element.customer_code : \"\";\r\n        invoice[\"currency_code\"] = element.currency_code ? element.currency_code : \"VND\";\r\n        invoice[\"currency_rate\"] = element.currency_rate ? element.currency_rate : null;\r\n        invoice[\"buyer_tax_code\"] = element.buyer_tax_code ? element.buyer_tax_code : \"\";\r\n        invoice[\"customer_name\"] = element.customer_name ? element.customer_name : \"\";\r\n        invoice[\"buyer_name\"] = element.buyer_name ? element.buyer_name : \"\";\r\n        invoice[\"buyer_address\"] = element.buyer_address ? element.buyer_address : \"\";\r\n        invoice[\"buyer_mobile\"] = element.buyer_mobile ? element.buyer_mobile : \"\";\r\n        invoice[\"id_card\"] = element.id_card ? element.id_card : \"\";\r\n        invoice[\"buyer_email\"] = element.buyer_email ? element.buyer_email : \"\";\r\n        invoice[\"payment_method_code\"] = element.payment_method_name ? this.getPaymentMethodCodeByName(element.payment_method_name) : \"\";\r\n        invoice[\"payment_method_name\"] = element.payment_method_name ? element.payment_method_name : \"\";\r\n        invoice[\"bank_account\"] = element.bank_account ? element.bank_account : \"\";\r\n        invoice[\"note\"] = element.note ? element.note : \"\";\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        invoice[\"is_explain\"] = element.is_explain && (element.is_explain == \"X\" || element.is_explain == \"x\") ? true : false;/* Diễn giải */\r\n        invoice[\"is_promotion\"] = element.is_promotion && (element.is_promotion == \"X\" || element.is_promotion == \"x\") ? true : false;/* Khuyến mại */\r\n        invoice[\"commercial_discount\"] = element.commercial_discount && (element.commercial_discount == \"X\" || element.commercial_discount == \"x\") ? true : false;\r\n        /* Các trường mở rộng */\r\n        let optionClone = _.cloneDeep(this.billoptions);\r\n        optionClone.forEach(invOption => {\r\n          for (var key in element) {\r\n            if (invOption.code === key) {\r\n              if (invOption.data_type === 'ngay') {\r\n                let date = Helper.processDate(element[key]);\r\n                if (date == \"ERROR\") {\r\n                  Library.notify(invOption.name + \" không đúng định dạng\", \"error\");\r\n                  isValid = false;\r\n                  return;\r\n                }\r\n                else\r\n                  if (date != \"\")\r\n                    invOption.value = date;\r\n              }\r\n              else if (invOption.data_type === 'soluong') {\r\n                invOption.value = element[key] ? Helper.toNumber(element[key]) : null;\r\n              }\r\n              else\r\n                invOption.value = element[key];\r\n            }\r\n          }\r\n        });\r\n        invoice[\"bill_options\"] = optionClone;\r\n        /* Các trường mở rộng */\r\n        if (invoice[\"bill_options\"] && invoice[\"bill_options\"].length > 0) {\r\n          invoice[\"bill_options\"].forEach(invOption => {\r\n            invoice[invOption.code] = invOption.value;\r\n          });\r\n        }\r\n\r\n\r\n\r\n        if (invoice[\"product_code\"] != \"\") {\r\n          let _obj = this.select.products.filter(p => p.code == invoice[\"product_code\"])[0];\r\n          if (!_obj) {\r\n            let _objPush = {\r\n              code: invoice[\"product_code\"],\r\n              name: invoice[\"product_name\"],\r\n              mhvth: invoice[\"product_code\"] + \": \" + invoice[\"product_name\"],\r\n            }\r\n            this.select.products.push(_objPush);\r\n          }\r\n        }\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        invoice[\"discount\"] = element.discount ? Helper.toNumber(element.discount) : null;\r\n        invoice[\"amount_discount\"] = element.amount_discount ? Helper.toNumber(element.amount_discount) : null;\r\n        invoice[\"amount\"] = element.amount && element.amount.trim() != \"-\" ? Helper.toNumber(element.amount) : null;\r\n        if (this.isHdGTGT) {\r\n          invoice[\"vat\"] = element.vat ? this.checkVat(element.vat) : null;\r\n          invoice[\"vat_name\"] = element.vat_name ? element.vat_name : null;\r\n          invoice[\"amount_vat\"] = element.amount_vat && element.amount_vat.trim() != \"-\" ? Helper.toNumber(element.amount_vat) : null;\r\n        }\r\n        else {\r\n          invoice[\"vat\"] = null;\r\n          invoice[\"vat_name\"] = null;\r\n          invoice[\"amount_vat\"] = null;\r\n        }\r\n        invoice[\"amount_after_vat\"] = element.amount_after_vat && element.amount_after_vat.trim() != \"-\" ? Helper.toNumber(element.amount_after_vat) : null;\r\n        invoice[\"note\"] = element.note ? element.note : \"\";\r\n        if (_index == 0) {\r\n          if (element.quantity) {\r\n            let arr = element.quantity.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.so_luong = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.so_luong = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n          /* Cấu hình thập phân */\r\n          if (element.discount) {\r\n            let arr = element.discount.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.ty_le_chiet_khau = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.ty_le_chiet_khau = VChanggeMoneyService.formatDecimalColumn(0);\r\n\r\n          }\r\n          if (element.price) {\r\n            let arr = element.price.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.don_gia = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.don_gia = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.product_exchange_rate || element.currency_rate) {\r\n            let arr = [];\r\n            if (element.product_exchange_rate)\r\n              arr = element.product_exchange_rate.split('.');\r\n            else\r\n              arr = element.currency_rate.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.ty_gia = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.ty_gia = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.amount_discount) {\r\n            let arr = element.amount_discount.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.tien_chiet_khau = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.tien_chiet_khau = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.amount) {\r\n            let arr = element.amount.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.thanh_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.thanh_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n          if (element.amount_vat) {\r\n            let arr = element.amount_vat.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.tien_thue = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.tien_thue = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n          if (element.amount_after_vat) {\r\n            let arr = element.amount_after_vat.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n        }\r\n        _index++;\r\n        if (this.checkNumberOfVouchers(element.number_of_vouchers) != -1) {\r\n          let stt = 0;\r\n          this.invoice_products.load().then((dataSource) => {\r\n            let hanghoa = dataSource.filter(p => (p.number_of_vouchers == element.number_of_vouchers || p.productNumberOfVouchers == element.number_of_vouchers) && !p.is_promotion && !p.is_explain)[0];\r\n            if (hanghoa)\r\n              stt = Math.max.apply(Math, dataSource.filter(p => (p.number_of_vouchers == element.number_of_vouchers || p.productNumberOfVouchers == element.number_of_vouchers) && !p.is_promotion && !p.is_explain).map(function (o) { return o.order; }))\r\n            ++stt;\r\n          });\r\n          invoice[\"dataType\"] = \"HANG_HOA\";\r\n          invoice[\"number_of_vouchers\"] = \"\";\r\n          invoice[\"invoice_date\"] = \"\";\r\n          invoice[\"customer_code\"] = \"\";\r\n          invoice[\"currency_code\"] = \"\";\r\n          invoice[\"currency_rate\"] = null;\r\n          invoice[\"buyer_tax_code\"] = \"\";\r\n          invoice[\"customer_name\"] = \"\";\r\n          invoice[\"buyer_name\"] = \"\";\r\n          invoice[\"buyer_address\"] = \"\";\r\n          invoice[\"buyer_mobile\"] = \"\";\r\n          invoice[\"id_card\"] = \"\";\r\n          invoice[\"buyer_email\"] = \"\";\r\n          invoice[\"payment_method_code\"] = \"\";\r\n          invoice[\"payment_method_name\"] = \"\";\r\n          invoice[\"bank_account\"] = \"\";\r\n          invoice[\"productNumberOfVouchers\"] = element.number_of_vouchers;\r\n          invoice[\"order\"] = stt;\r\n          if (invoice[\"is_promotion\"] || invoice[\"is_explain\"]) {\r\n            invoice[\"view_order\"] = \"\";\r\n          } else\r\n            invoice[\"view_order\"] = stt;\r\n        } else {\r\n          invoice[\"number_of_vouchers_backup\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          numberOfVouchers.push(invoice[\"number_of_vouchers\"]);\r\n          invoice[\"order\"] = 1;\r\n          invoice[\"view_order\"] = 1;\r\n          invoice[\"environmental_fee\"] = element.environmental_fee && element.environmental_fee.trim() != \"-\" ? Helper.toNumber(element.environmental_fee) : null;\r\n\r\n          if (invoice[\"is_promotion\"] || invoice[\"is_explain\"])\r\n            invoice[\"view_order\"] = \"\";\r\n        }\r\n        this.invoice_products.insert(invoice);\r\n      }\r\n    });\r\n    if (isValid) {\r\n      let dataTempt = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        let datagroup = dataSource.filter(p => p.number_of_vouchers);\r\n        if (datagroup && datagroup.length > 0) {\r\n          datagroup.forEach(e => {\r\n            let listItem = dataSource.filter(w => w.productNumberOfVouchers == e.number_of_vouchers);\r\n            dataTempt.push(e);\r\n            if (listItem && listItem.length > 0) {\r\n              listItem.forEach(inv => {\r\n                dataTempt.push(inv);\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n      this.invoicesHaveNumberOfVouchers = [];\r\n      if (this.configs.system_parameter.the_same_number_of_voucher) {\r\n        this.vatService.getInvoicesHaveNumberOfVouchers(numberOfVouchers).subscribe((res: any) => {\r\n          if (res.status == \"success\") {\r\n            this.invoicesHaveNumberOfVouchers = res.data.invoices;\r\n            this.checkDuplicateNumberOfVouchers(dataTempt);\r\n            this.checkStatusData();\r\n            this.dataGrid.instance.refresh();\r\n          }\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        this.checkDuplicateNumberOfVouchers(dataTempt);\r\n        this.checkStatusData();\r\n        this.dataGrid.instance.refresh();\r\n      }\r\n    }\r\n    this.createUpdateEvent();\r\n    Library.hideloading();\r\n\r\n  }\r\n\r\n  checkVat(vat) {\r\n    if (vat == \"Không chịu thuế\" || vat == \"không chịu thuế\") {\r\n      return -1;\r\n    }\r\n    else if (vat == \"Không kê khai, tính nộp thuế GTGT\" || vat == \"không kê khai, tính nộp thuế GTGT\")\r\n      return -2;\r\n    else if (vat == \"Trường hợp khác\" || vat == \"trường hợp khác\")\r\n      return -3;\r\n    else if (vat == \"10% x 70%\")\r\n      return 7;\r\n    else if (vat == \"5% x 70%\")\r\n      return 3.5;\r\n    else {\r\n      return parseInt(vat);\r\n    }\r\n  }\r\n  checkDuplicateNumberOfVouchers(data) {\r\n    if (this.isThemTiep) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        let foundOnGird = this.dataFormGird.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n        if (foundOnGird.length > 0 && data[i].number_of_vouchers && data[i].statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n          data[i].statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n        }\r\n      }\r\n      this.invoice_products = new ArrayStore({\r\n        key: 'keyData',\r\n        data: data\r\n      });\r\n      this.dataSource = new DataSource({\r\n        store: this.invoice_products\r\n      });\r\n    } else {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n      }\r\n      this.invoice_products = new ArrayStore({\r\n        key: 'keyData',\r\n        data: data\r\n      });\r\n      this.dataSource = new DataSource({\r\n        store: this.invoice_products\r\n      });\r\n    }\r\n    this.dataFormGird = [];\r\n  }\r\n\r\n  checkNumberOfVouchers(numberOfVouchers) {\r\n    let foundNumberOfVouchers;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      foundNumberOfVouchers = dataSource.findIndex((item) => {\r\n        return item.number_of_vouchers == numberOfVouchers;\r\n      });\r\n    });\r\n    return foundNumberOfVouchers;\r\n  }\r\n\r\n  checkStatusData() {\r\n    this.invoice_products.load().then((dataSource) => {\r\n      let invalid = dataSource.filter((item) => {\r\n        return item.number_of_vouchers && item.statusData == \"INVALID\";\r\n      });\r\n      let errorDuplicateDatabase = dataSource.filter((item) => {\r\n        return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_DATABASE\";\r\n      });\r\n      let errorDuplicateOngird = dataSource.filter((item) => {\r\n        return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_ONGIRD\";\r\n      });\r\n      let errorData = dataSource.filter((item) => {\r\n        return item.statusData == \"DATA_ERROR\";\r\n      });\r\n      this.totalInvoiceInvalid = invalid.length;\r\n      this.totalDuplicateInvoice = errorDuplicateDatabase.length;\r\n      this.totalErrorInvoice = errorDuplicateOngird.length + errorData.length;\r\n    });\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number == 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row) {\r\n      if (e.row.rowType === \"data\") {\r\n        e.items = [{\r\n          text: \"Thêm khách hàng\",\r\n          onItemClick: () => {\r\n            this.addRow();\r\n          }\r\n        },\r\n        {\r\n          text: \"Thêm hàng hóa\",\r\n          onItemClick: () => {\r\n            if (e.row.data.number_of_vouchers || e.row.data.productNumberOfVouchers) {\r\n              let temp = e.row.data.number_of_vouchers ? e.row.data.number_of_vouchers : e.row.data.productNumberOfVouchers;\r\n              this.invoice_products.load().then((dataSource) => {\r\n                let products = dataSource.filter((item) => {\r\n                  return item.number_of_vouchers == temp || item.productNumberOfVouchers == temp;\r\n                });\r\n                let data = this.frmData.addImportRow(products.length + 1, products.length + 1);\r\n                data.dataType = \"HANG_HOA\";\r\n                if (e.row.data.number_of_vouchers) {\r\n                  data[\"productNumberOfVouchers\"] = e.row.data.number_of_vouchers;\r\n                  dataSource.splice(e.rowIndex + products.length, 0, data);\r\n                } else {\r\n                  data[\"productNumberOfVouchers\"] = e.row.data.productNumberOfVouchers;\r\n                  let index = dataSource.map(function (e) { return e.number_of_vouchers; }).indexOf(e.row.data.number_of_vouchers);\r\n                  dataSource.splice(index + products.length - 1, 0, data);\r\n                }\r\n                this.invoice_products.clear();\r\n                dataSource.forEach(row => {\r\n                  this.invoice_products.insert(row);\r\n                })\r\n              });\r\n              this.dataGrid.instance.refresh();\r\n            } else {\r\n              Library.notify(\"Bạn chưa nhập số phiếu / chứng từ\", \"error\");\r\n            }\r\n          }\r\n        }];\r\n      }\r\n    }\r\n  }\r\n  onInvoiceReleases(e) {\r\n    let selectedItem = e.component.option(\"selectedItem\");\r\n    this.template_id = selectedItem.template_id;\r\n    this.invoice_release_id = e.value;\r\n    this.is_multi_vat = selectedItem.is_multi_vat;\r\n    //Load lại danh sách cấu hình các trường\r\n    if (this.configs.config_column_import_inv_excel && this.configs.config_column_import_inv_excel.length > 0) {\r\n      this.listColumn = Helper.listColumnImportExcel(this._translate);\r\n      this.listColumn.forEach(item => {\r\n        let _obj = this.configs.config_column_import_inv_excel.filter(p => p.column_code == item.column_code)[0];\r\n        if (_obj) {\r\n          item.is_visible = _obj.is_visible;\r\n        }\r\n      });\r\n    } else {\r\n      this.listColumn = Helper.listColumnImportExcel(this._translate);\r\n    }\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.forEach((column, index) => {\r\n          if (column[\"dataField\"] == item.dataField)\r\n            this.dataGrid.columns.splice(index, 1);\r\n        });\r\n      });\r\n    }\r\n\r\n    this.columns = [];\r\n    this.billoptions = [];\r\n\r\n    if (selectedItem.fields && selectedItem.fields.length > 0) {\r\n      const _dulieumorong = selectedItem.fields.filter(x => x.type === '4');\r\n      if (_dulieumorong.length > 0) {\r\n        _dulieumorong.forEach(item => {\r\n          if (item.is_show) {\r\n            let oField = {\r\n              column_code: item.code,\r\n              column_name: item.name,\r\n              is_visible: true\r\n            }\r\n            this.listColumn.push(oField);\r\n            let column =\r\n            {\r\n              caption: item.name,\r\n              dataField: item.code,\r\n              width: 150\r\n            };\r\n            this.columns.push(column);\r\n            let billoption =\r\n            {\r\n              code: item.code,\r\n              name: item.name,\r\n              value: '',\r\n              data_type: item.data_type\r\n            }\r\n            this.billoptions.push(billoption);\r\n          }\r\n        });\r\n        if (this.columns.length > 0) {\r\n          this.columns.forEach(item => {\r\n            this.dataGrid.columns.push(item);\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onInvoiceTemplate(e, setForm=true) {\r\n    if(e.component) {\r\n      this.selectedItem = e.component.option(\"selectedItem\");\r\n    } else {\r\n      this.selectedItem = e;\r\n    }\r\n    this.template_id = e.value;\r\n    this.template_code = this.selectedItem.template_code;\r\n    this.bill_series = this.selectedItem.bill_series;\r\n    this.is_multi_vat = this.selectedItem.is_multi_vat;\r\n    this.billoptions = this.selectedItem.fields\r\n      .filter(field => field.type == \"4\")\r\n      .map(({ code, name, value, data_type }) => ({ code, name, value, data_type }));\r\n    this.fieldDisable = _.compact(_.uniq(this.fieldDisable.concat(_.map(this.billoptions, 'code'))));\r\n    if(setForm) {\r\n      this.setFormGird();\r\n    }\r\n  }\r\n\r\n  //set lại các cột trong gird\r\n  setFormGird() {\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.forEach((column, index) => {\r\n          if (column[\"dataField\"] == item.dataField)\r\n            this.dataGrid.columns.splice(index, 1);\r\n        });\r\n      });\r\n    }\r\n\r\n    this.columns = [];\r\n    if (this.selectedItem.fields && this.selectedItem.fields.length > 0) {\r\n      const _dulieumorong = this.selectedItem.fields.filter(x => x.type === '4');\r\n      if (_dulieumorong.length > 0) {\r\n        _dulieumorong.forEach(item => {\r\n          if (item.is_show) {\r\n            let oField = {\r\n              column_code: item.code,\r\n              column_name: item.name,\r\n              is_visible: true\r\n            }\r\n            this.listColumn.push(oField);\r\n            if (item.data_type === 'chu') {\r\n              let column =\r\n              {\r\n                caption: item.name,\r\n                dataField: item.code,\r\n                width: 150,\r\n              };\r\n              this.columns.push(column);\r\n            }\r\n            if (item.data_type === 'soluong') {\r\n              let column =\r\n              {\r\n                caption: item.name,\r\n                dataField: item.code,\r\n                width: 150,\r\n                dataType: \"number\",\r\n                editorOptions: {\r\n                  format: '#,###'\r\n                },\r\n                format: '#,###'\r\n              };\r\n              this.columns.push(column);\r\n            }\r\n            if (item.data_type === 'ngay') {\r\n              let column =\r\n              {\r\n                caption: item.name,\r\n                dataField: item.code,\r\n                width: 150,\r\n                dataType: 'date',\r\n                format: \"dd/MM/yyyy\",\r\n                dateSerializationFormat: \"yyyy-MM-dd\"\r\n              };\r\n              this.columns.push(column);\r\n            }\r\n          }\r\n        });\r\n        if (this.columns.length > 0) {\r\n          this.columns.forEach(item => {\r\n            this.dataGrid.columns.push(item);\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  onContentReady(e) {\r\n    e.component.columnOption(\"command:edit\", {\r\n      visibleIndex: -1\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.row.data) {\r\n        if (e.row.data.dataType && e.row.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.dataField)) {\r\n          e.editorOptions.disabled = true;\r\n        }\r\n      }\r\n      e.editorOptions.onValueChanged = (args) => {\r\n        switch (e.dataField) {\r\n          case \"number_of_vouchers\":\r\n            this.onNumberOfVouchers(e, args.value);\r\n            break;\r\n          // case \"product_code\":\r\n          //   this.productCodeChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"quantity\":\r\n          // case \"discount\":\r\n          // case \"amount_discount\":\r\n          // case \"price\":\r\n          // case \"amount_vat\":\r\n          // case \"amount_after_vat\":\r\n          //   this.priceChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"vat\":\r\n          //   this.vatChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"unit_code\":\r\n          //   this.unitChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"amount\":\r\n          //   this.amountChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          default:\r\n            break;\r\n        }\r\n        this.checkStatusData();\r\n        e.setValue(args.value);\r\n      };\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.data.dataType && e.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.column.dataField)) {\r\n        e.cellElement.style.background = \"#F1F1F1\";\r\n      }\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_ONGIRD\" && e.column.dataField == \"number_of_vouchers\") {\r\n        e.cellElement.style.background = \"#FF0000\";\r\n      }\r\n      if (e.data.number_of_vouchers) {\r\n        switch (e.column.dataField) {\r\n          case \"product_name\":\r\n            this.setStatusDataOnCellPrepared(e, \"Tên hàng hóa không được để trống\");\r\n            break;\r\n          case \"amount\":\r\n            this.setStatusDataOnCellPrepared(e, \"Thành tiền không được để trống\");\r\n            break;\r\n          case \"amount_after_vat\":\r\n            this.setStatusDataOnCellPrepared(e, \"Tổng tiền không được để trống\");\r\n            break;\r\n          case \"product_code\":\r\n            this.setStatusDataOnCellPrepared(e, this._translate.VALIDATION.required_productCode);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      } else if (e.data.number_of_vouchers == \"\" && e.data.dataType == \"KHACH_HANG\" && e.data.product_name && e.column.dataField == \"number_of_vouchers\") {\r\n        this.setStatusDataOnCellPrepared(e, \"Số phiếu, chứng từ không được để trống\");\r\n      }\r\n    }\r\n  }\r\n\r\n  setStatusDataOnCellPrepared(e, message) {\r\n    if (((e.column.dataField == \"amount\" || e.column.dataField == \"amount_after_vat\") && e.value == null && !e.data.is_explain) || ((e.column.dataField != \"amount\" && e.column.dataField != \"amount_after_vat\" && e.column.dataField != \"product_code\") && (e.value == null || e.value == \"\")) || (e.column.dataField == \"product_code\" && VStringService._getValueToString(e.value) != \"\" && !this.productCodePattern.test(e.value))) {\r\n      e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n      e.cellElement.title = message;\r\n      if (e.data.statusData != \"ERROR_DUPLICATE_DATABASE\" && e.data.statusData != \"ERROR_DUPLICATE_ONGIRD\") e.data.statusData = \"DATA_ERROR\";\r\n    }\r\n    else {\r\n      if (VStringService._getValueToString(e.data.product_code) != \"\" && !this.productCodePattern.test(e.data.product_code))\r\n        e.data.statusData == \"DATA_ERROR\";\r\n      else\r\n        if (e.data.product_name == null || e.data.product_name == \"\")\r\n          e.data.statusData == \"DATA_ERROR\";\r\n        else\r\n          if (e.data.amount == null)\r\n            e.data.statusData == \"DATA_ERROR\";\r\n          else\r\n            if (e.data.amount_after_vat == null)\r\n              e.data.statusData == \"DATA_ERROR\";\r\n            else if (e.data.number_of_vouchers == \"\" && e.data.dataType == \"KHACH_HANG\" && e.data.product_name && e.column.dataField == \"number_of_vouchers\")\r\n              e.data.statusData == \"DATA_ERROR\";\r\n            else\r\n              e.data.statusData = \"INVALID\"\r\n    }\r\n  }\r\n  onRowRemoving(e) {\r\n    const number_of_vouchers = e.data.number_of_vouchers\r\n    if (number_of_vouchers) {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach(row => {\r\n          if (row.productNumberOfVouchers == number_of_vouchers || row.number_of_vouchers == number_of_vouchers) {\r\n            this.invoice_products.remove(row.keyData);\r\n          }\r\n        });\r\n      })\r\n    }\r\n    else {\r\n      this.invoice_products.remove(e.key);\r\n    }\r\n    this.checkStatusData();\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code == \"Delete\") {\r\n      // console.log(e.event.srcElement);\r\n      e.event.srcElement.value = null;\r\n      // e.event.srcElement.parentNode.parentNode.querySelector('input').value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.data) {\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_DATABASE\" && e.data.number_of_vouchers) {\r\n        e.rowElement.style.background = \"#FFFF00\";\r\n      } else {\r\n        e.rowElement.style.background = \"\";\r\n      }\r\n    }\r\n    this.checkStatusData();\r\n  }\r\n\r\n  onRowUpdated(e) {\r\n    //  this.onNumberOfVouchers(e);\r\n    // let column = Object.keys(e.data)[0];\r\n    // switch (column) {\r\n    //   case \"number_of_vouchers\":\r\n    //     this.onNumberOfVouchers(e);\r\n    //     break;\r\n    //   case \"product_code\":\r\n    //     this.productCodeChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"quantity\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"discount\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount_discount\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"price\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"vat\":\r\n    //     this.vatChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"unit_code\":\r\n    //     this.unitChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount\":\r\n    //     this.amountChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount_vat\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount_after_vat\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   default:\r\n    //     break;\r\n    // }\r\n    // this.checkStatusData();\r\n  }\r\n\r\n\r\n\r\n  onNumberOfVouchers(e, value) {\r\n    let numberOfVouchers = value;\r\n    if (e.row.key.number_of_vouchers_backup) {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        for (let i = 0; i < dataSource.length; i++) {\r\n          const row = dataSource[i];\r\n          if (row.productNumberOfVouchers && row.productNumberOfVouchers == e.row.key.number_of_vouchers_backup) {\r\n            dataSource[i].productNumberOfVouchers = numberOfVouchers;\r\n          }\r\n        }\r\n      });\r\n      e.row.key.number_of_vouchers_backup = numberOfVouchers;\r\n    }\r\n\r\n    if (numberOfVouchers != \"\") {\r\n      //// Tạm đóng 14/07/2020\r\n      if (this.configs.system_parameter.the_same_number_of_voucher) {\r\n        this.vatService.getInvoicesHaveNumberOfVouchers([numberOfVouchers]).subscribe((res: any) => {\r\n          let dupInvoices = res.data.invoices;\r\n          if (dupInvoices.length > 0) {\r\n            e.row.key.statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n            // this.totalDuplicateInvoice++;\r\n            // if (this.totalInvoice > 0) this.totalInvoice--\r\n          } else {\r\n            if (e.row.key.statusData = \"ERROR_DUPLICATE_DATABASE\") {\r\n              e.row.key.statusData = \"INVALID\";\r\n              // if (this.totalDuplicateInvoice > 0) this.totalDuplicateInvoice--;\r\n            }\r\n            // this.totalInvoice++;\r\n          }\r\n          this.invoice_products.load().then((dataSource) => {\r\n            let foundOnGird = dataSource.filter((item) => {\r\n              return item.number_of_vouchers == numberOfVouchers;\r\n            });\r\n            if (foundOnGird.length > 1 && e.row.key.statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n              e.row.key.statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n            }\r\n          });\r\n          this.dataGrid.instance.refresh();\r\n          this.checkStatusData();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  //Thay đổi cột mã hàng\r\n  productCodeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code === row.product_code) {\r\n        let sub = this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              row.product_name = product.name;\r\n              row.unit_code = this.checkUnitCode(product.unit_code);\r\n              this.invoice_products.update(row.id, row);\r\n              this.unitChange(row);\r\n              return true;\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        },\r\n          err => { },\r\n          () => {\r\n            sub.unsubscribe();\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n  priceChange(e, value) {\r\n    let quantity = e.row.key.quantity || 1;\r\n    let price = value || 0;\r\n    if (price != null) {\r\n      e.row.key.amount = price * quantity;\r\n      e.row.key.amount_discount = (e.row.key.discount > 0) ? this.caculatorAmountDiscount(e.row.key.price, e.row.key.discount) : e.row.key.amount_discount;\r\n      if (e.row.key.amount_discount > 0)\r\n        e.row.key.amount -= e.key.amount_discount;\r\n      if (this.isHdGTGT)\r\n        e.row.key.amount_vat = (e.row.key.vat >= 0) ? this.caculatorAmountVat(e.row.key.amount, e.row.key.vat) : null;\r\n      e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n    }\r\n  }\r\n\r\n  vatChange(e, value) {\r\n    if (this.isHdGTGT)\r\n      e.row.key.amount_vat = (value >= 0) ? this.caculatorAmountVat(e.row.key.amount, value) : null;\r\n    e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n  }\r\n  unitChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n  paymentMethodChange(row) {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === row.payment_method_code)[0];\r\n    if (_obj) {\r\n      row.payment_method_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.payment_method_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n  amountChange(e, value) {\r\n    if (!e.row.key.quantity && !e.row.key.price) {\r\n      e.row.key.amount_after_vat = value;\r\n    } else {\r\n      let quantity = e.row.key.quantity || 1;\r\n      let price = e.row.key.price || 0;\r\n      if (price != null) {\r\n        e.row.key.amount = e.row.key.price * quantity;\r\n        e.row.key.amount_discount = (e.row.key.discount > 0) ? this.caculatorAmountDiscount(e.row.key.price, e.row.key.discount) : e.row.key.amount_discount;\r\n        if (e.row.key.amount_discount > 0)\r\n          e.row.key.amount -= e.row.key.amount_discount;\r\n        if (this.isHdGTGT)\r\n          e.row.key.amount_vat = (e.row.key.vat >= 0) ? this.caculatorAmountVat(e.row.key.amount, e.row.key.vat) : null;\r\n        e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  checkValidNumberOfVouchers() {\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach(row => {\r\n        if (row.number_of_vouchers == \"\") {\r\n          Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n        } else {\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    let items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code == unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  checkProvisionsOnAccounts(name) {\r\n    let found = this.select.select_provisions_on_accounts.find(function (element) {\r\n      return element.name === name;;\r\n    });\r\n    let code = \"\";\r\n\r\n    if (found) {\r\n      code = found.code;\r\n    } else {\r\n      Library.notify(\"Định khoản chưa có trong danh mục\", \"error\");\r\n    }\r\n\r\n    return code;\r\n  }\r\n\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    let temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  caculatorAmountDiscount(price, discount) {\r\n    let temp = price * discount / 100;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) != \"\") {\r\n      if (!this.select.unit_codes)\r\n        this.select.unit_codes = [];\r\n      let _obj = this.select.unit_codes.filter(p => p.name == unitName)[0];\r\n      if (_obj) {\r\n        return _obj.code;\r\n      } else {\r\n        let code = VStringService._convertToViKdau(unitName);\r\n        let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n        if (oDuplicate)\r\n          code = code + Helper.addtionalUnitCode();\r\n        this.select.unit_codes.push({ code: code, name: unitName });\r\n        return code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getPaymentMethodCodeByName(payment_method_name) {\r\n    let items = this.select.payment_method_names;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].name == payment_method_name) {\r\n        return items[i].code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  kyThongDiep(xmlInvoice, signDate) {\r\n    let ListSerialNumber = \"DSCKS\";\r\n    let nodeSign = \"//TDiep/CKSNNT\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'thongdiep.xml', nodeSign, signDate, 'MessageData', ListSerialNumber, true);\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    let nodeSign = \"//HDon/DSCKS/NBan\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    let status;\r\n    if (!this.invoice.id) {\r\n      status = 'THEM_MOI';\r\n    }\r\n    else {\r\n      if (!this.invoice.bill_number)\r\n        status = 'GHI_TAM';\r\n      else {\r\n        if (this.invoice.status == \"GIU_SO\")\r\n          status = 'GIU_SO';\r\n        else if (this.invoice.status == \"GHI_TAM\")\r\n          status = 'GHI_TAM';\r\n      }\r\n    }\r\n    // if (!this.invoice.id && !this.invoice.bill_number) status = 'THEM_MOI';\r\n    // if (this.invoice.id && !this.invoice.bill_number) status = 'GHI_TAM';\r\n    // if (this.invoice.id && this.invoice.bill_number) status = 'GIU_SO';\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    let bill_invoice = Object.assign({}, this.invoice);\r\n    delete bill_invoice.info_message;\r\n    if (status == 'THEM_MOI') {\r\n      let sub = this.billService.addNew(bill_invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.bill_number = rs.data.bill_number;\r\n          this.invoice.bill_date = moment(rs.data.bill_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let bill_sign_date = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.invoice.id = rs.data.id;\r\n          this.invoicesId.push(rs.data.id);\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            this.xuatTiepHoaDon('XUAT');\r\n          } else {\r\n            if (this.configs.system_parameter.is_seller_sign_bill)\r\n              this.xuLyKiFile(xmlInvoice, bill_sign_date);\r\n            else {\r\n              this.invoice[\"info_message\"] = rs.data.info_message;\r\n              if (this.invoice[\"info_message\"] && this.invoice[\"info_message\"].message) {\r\n                xmlInvoice = VStringService._getValueToString(this.invoice[\"info_message\"].message.message);\r\n                if (xmlInvoice != \"\") {\r\n                  this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status == 'GHI_TAM') {\r\n      let sub = this.billService.edit(bill_invoice.id, bill_invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.bill_number = rs.data.bill_number;\r\n          this.frmData.bill_date = moment(rs.data.bill_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let bill_sign_date = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            this.xuatTiepHoaDon('XUAT');\r\n          }\r\n          else {\r\n            if (this.configs.system_parameter.is_seller_sign_bill)\r\n              this.xuLyKiFile(xmlInvoice, bill_sign_date);\r\n            else {\r\n              this.invoice[\"info_message\"] = rs.data.info_message;\r\n              if (this.invoice[\"info_message\"] && this.invoice[\"info_message\"].message) {\r\n                xmlInvoice = VStringService._getValueToString(this.invoice[\"info_message\"].message.message);\r\n                if (xmlInvoice != \"\") {\r\n                  this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  sendInvoice(xml_string) {\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    let xmlInvoice = \"\";\r\n    const sub = this.billService.sendInvoice({\r\n      id: this.invoice.id,\r\n      xml_string: xml_string,\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.invoice[\"info_message\"] = rs.data.info_message;\r\n        let bill_sign_date = moment(rs.data.bill_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (this.invoice[\"info_message\"] && this.invoice[\"info_message\"].message) {\r\n          xmlInvoice = VStringService._getValueToString(this.invoice[\"info_message\"].message.message);\r\n          if (xmlInvoice != \"\") {\r\n            this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n          }\r\n        }\r\n      }\r\n      else\r\n        Library.notify(rs.message, 'error');\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    this.subXuatHoaDon = this.billService.sendMessage({\r\n      id: this.invoice.id,\r\n      info_message: {\r\n        message: {\r\n          message: xml_string,\r\n          message_code: this.invoice[\"info_message\"].message.message_code\r\n        },\r\n        tcntCode: this.invoice[\"info_message\"].tcntCode,\r\n        messageCodeType: this.invoice[\"info_message\"].messageCodeType\r\n      }\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.xuatTiepHoaDon('XUAT');\r\n      } else {\r\n        this.showPopupImport = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      this.connectWebsocket();\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n      this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n    }\r\n    this.tempKiFile = 0;\r\n  }\r\n\r\n  xuatChoKy() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (!this.isTT78) {\r\n      this.subLuuChoXuat = this.vatService.xuatChoKy(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.xuatChoKy();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            this.bsModalImportRef.content.successSaveItem = \"success\";\r\n            this.funcNavigate();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.subLuuChoXuat = this.vatService.xuatChoKyTT78(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.xuatChoKy();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            this.bsModalImportRef.content.successSaveItem = \"success\";\r\n            this.funcNavigate();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  luuChoXuat() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.invoice.id) {\r\n      this.subLuuChoXuat = this.billService.edit(this.invoice.id, this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.luuChoXuat();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            this.bsModalImportRef.content.successSaveItem = \"success\";\r\n            this.funcNavigate();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    } else {\r\n      this.subLuuChoXuat = this.billService.addNew(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.luuChoXuat();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            this.bsModalImportRef.content.successSaveItem = \"success\";\r\n            this.funcNavigate();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatFile() {\r\n    let invoices = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach(element => {\r\n        if (element.number_of_vouchers) {\r\n          let invoice = {};\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n          invoice[\"customer_code\"] = element.customer_code; //mã đơn vị (mã khách hàng)\r\n          invoice[\"currency_code\"] = element.currency_code;\r\n          invoice[\"customer_object_code\"] = element.customer_object_code ? \"CA_NHAN\" : \"DOANH_NGHIEP\"; //Mã loại hóa đơn\r\n          invoice[\"buyer_tax_code\"] = element.buyer_tax_code; //Mã số thuế\r\n          invoice[\"customer_name\"] = element.customer_name; //Tên đơn vị (Tên khách hàng)\r\n          invoice[\"buyer_name\"] = element.buyer_name; //Tên người mua\r\n          invoice[\"student_name\"] = element.student_name;\r\n          invoice[\"class_name\"] = element.class_name;\r\n          invoice[\"buyer_mobile\"] = element.buyer_mobile; //Điện thoại liên hệ\r\n          ///// HĐ xe\r\n          invoice[\"contract_number\"] = element.contract_number;\r\n          invoice[\"currency_rate\"] = element.currency_rate;\r\n          invoice[\"vsb_number\"] = element.vsb_number;\r\n          invoice[\"license_number\"] = element.license_number;\r\n          invoice[\"sell_form\"] = element.sell_form;\r\n          invoice[\"model\"] = element.model;\r\n          invoice[\"color\"] = element.color;\r\n          invoice[\"invoice_engine_number\"] = element.invoice_engine_number;\r\n          invoice[\"invoice_chassis_number\"] = element.invoice_chassis_number;\r\n          invoice[\"manufacture_year\"] = element.manufacture_year;\r\n          invoice[\"place_of_delivery\"] = element.place_of_delivery;\r\n          invoice[\"shiping_point\"] = element.shiping_point;\r\n          invoice[\"payment_expire\"] = element.payment_expire;\r\n          invoice[\"wip_number\"] = element.wip_number;\r\n          invoice[\"in_out_date\"] = element.in_out_date;\r\n          invoice[\"invoice_internal_number\"] = element.invoice_internal_number;\r\n          invoice[\"license_plate\"] = element.license_plate;\r\n          invoice[\"kilometer_number\"] = element.kilometer_number;\r\n          /////\r\n          invoice[\"buyer_email\"] = element.buyer_email; //Email\r\n          invoice[\"buyer_address\"] = element.buyer_address; //Địa chỉ\r\n          invoice[\"the_order\"] = element.the_order; //Địa chỉ\r\n          invoice[\"consult_number\"] = element.consult_number; //Địa chỉ\r\n          invoice[\"ship_receiving_address\"] = element.ship_receiving_address; //Địa chỉ\r\n          invoice[\"ship_receiving_name\"] = element.ship_receiving_name; //Địa chỉ\r\n          invoice[\"payment_method_code\"] = element.payment_method_code; //Hình thức thanh toán\r\n          invoice[\"bank_account_number\"] = element.bank_account_number; //Số tài khoản\r\n          invoice[\"bank_name\"] = element.bank_name; //thuộc ngân hàng\r\n          invoice[\"note\"] = element.note; //ghi chú\r\n          /* Hóa đơn Pepsi */\r\n          invoice[\"total_large_unit\"] = element.total_large_unit;\r\n          invoice[\"total_small_unit\"] = element.total_small_unit;\r\n          invoice[\"billing_source\"] = element.billing_source;\r\n          invoice[\"template_code\"] = element.template_code;\r\n          invoice[\"bill_series\"] = element.bill_series;\r\n          invoice[\"invoice_amount\"] = element.invoice_amount;\r\n          invoice[\"environmental_fee\"] = element.environmental_fee;\r\n          invoice[\"total_amount_vat\"] = element.total_amount_vat;\r\n          invoice[\"total_payment\"] = element.total_payment;\r\n          invoice[\"username\"] = element.username;\r\n\r\n          let product = {\r\n            product_name: element.product_name,\r\n            provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n            unit_name: element.unit_name,\r\n            quantity: element.quantity,\r\n            other_tax: element.other_tax,\r\n            other_charge: element.other_charge,\r\n            price: element.price,\r\n            product_exchange_rate: element.product_exchange_rate,\r\n            price_after_vat: element.price_after_vat,\r\n            amount: element.amount,\r\n            vat_name: element.vat_name,\r\n            amount_vat: element.amount_vat,\r\n            amount_after_vat: element.amount_after_vat,\r\n            discount: element.discount,\r\n            amount_discount: element.amount_discount,\r\n            amount_without_discount: element.amount_without_discount,\r\n            engine_number: element.engine_number,\r\n            price_after_discount: element.price_after_discount,\r\n            chassis_number: element.chassis_number,\r\n            color_material: element.color_material,\r\n            contract_order: element.contract_order,\r\n            view_order: element.view_order,\r\n            management_code: element.management_code,\r\n          }\r\n          invoice[\"invoice_products\"] = [];\r\n          invoice[\"invoice_products\"].push(product);\r\n          invoices.push(invoice);\r\n        }\r\n\r\n        if (element.productNumberOfVouchers) {\r\n          // console.log(element)\r\n          let invoiceProduct = {\r\n            product_name: element.product_name,\r\n            provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n            unit_name: element.unit_name,\r\n            quantity: element.quantity,\r\n            other_tax: element.other_tax,\r\n            other_charge: element.other_charge,\r\n            price: element.price,\r\n            product_exchange_rate: element.product_exchange_rate,\r\n            price_after_vat: element.price_after_vat,\r\n            amount: element.amount,\r\n            vat_name: element.vat,\r\n            amount_vat: element.amount_vat,\r\n            amount_after_vat: element.amount_after_vat,\r\n            discount: element.discount,\r\n            amount_discount: element.amount_discount,\r\n            amount_without_discount: element.amount_without_discount,\r\n            engine_number: element.engine_number,\r\n            price_after_discount: element.price_after_discount,\r\n            chassis_number: element.chassis_number,\r\n            color_material: element.color_material,\r\n            contract_order: element.contract_order,\r\n            view_order: element.view_order,\r\n            management_code: element.management_code,\r\n          }\r\n          for (let i = 0; i < invoices.length; i++) {\r\n            if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n              invoices[i].invoice_products.push(invoiceProduct);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    let data = {\r\n      \"invoices\": invoices\r\n    }\r\n    Library.showloading();\r\n    this.vatService.exportToExcel(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất dữ liệu ra excel thành công\", \"success\");\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  convertGirdToInvoices(type, typeSubmit?) {\r\n    let invoices = [];\r\n    let invalid = true;\r\n    let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n    let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n    let decimal_quantity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n    let decimal_tygia = VChanggeMoneyService.getFormatterToNumber(this.formatter.ty_gia);\r\n    let decimal_amount_discount = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_chiet_khau);\r\n    this.invoice_products.load().then((dataSource) => {\r\n      let isCheckData = dataSource.every(item => VStringService._getValueToString(item.number_of_vouchers) == \"\");\r\n      if (isCheckData) {\r\n        Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n        invalid = false;\r\n        return;\r\n      }\r\n      dataSource.forEach((element, index) => {\r\n        if (element.number_of_vouchers == \"\" && element.dataType == \"KHACH_HANG\" && element.product_name && type == \"submit\") {\r\n          Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n          invalid = false;\r\n          return;\r\n        }\r\n        //có số phiếu/chứng từ\r\n        if (element.number_of_vouchers) {\r\n          if (type == \"submit\") {\r\n            if (element.product_name == \"\") { Library.notify(\"Tên hàng hóa không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (element.amount_after_vat == null && !element.is_explain) { Library.notify(\"Tổng tiền không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (element.amount == null && !element.is_explain) { Library.notify(\"Thành tiền không được để trống\", \"error\"); invalid = false; return false; }\r\n          }\r\n          let invoice = new BillModel(1);\r\n          if (element.id) {\r\n            invoice.id = element.id;\r\n            invoice.status = element.status;\r\n          }\r\n          invoice.bill_number = element.bill_number;\r\n          invoice.template_id = this.template_id;\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n          invoice.bill_date = element.bill_date ? moment(element.bill_date).format('YYYY-MM-DD HH:mm:ss') : moment().format('YYYY-MM-DD HH:mm:ss'); // Ngày hóa đơn\r\n          invoice.buyer_tax_code = element.buyer_tax_code; //Mã số thuế\r\n          invoice.buyer_name = element.buyer_name; //Tên người mua\r\n          invoice.customer_name = element.customer_name //Tên đơn vị (Tên khách hàng)\r\n          invoice.customer_code = element.customer_code; //mã đơn vị (mã khách hàng)\r\n          invoice.currency_code = element.currency_code;\r\n          invoice.currency_rate = this.roundNumber(element.currency_rate, decimal_tygia);\r\n          invoice.buyer_address = element.buyer_address; //Địa chỉ\r\n          invoice.id_card = element.id_card; // Số CCCD\r\n          invoice.bank_account = element.bank_account; // Tài khoản ngân hàng\r\n          invoice.buyer_mobile = element.buyer_mobile; //Điện thoại liên hệ\r\n          invoice.template_code = this.template_code;\r\n          invoice.bill_series = this.bill_series;\r\n          /////\r\n          invoice.buyer_email = element.buyer_email; //Email\r\n          invoice.payment_method_code = element.payment_method_code; //Hình thức thanh toán\r\n          invoice.payment_method_name = element.payment_method_name; //Hình thức thanh toán\r\n          if (!invoice.payment_method_name) {\r\n            let _obj = this.select.payment_method_names.filter(p => p.code == element.payment_method_code)[0];\r\n            if (_obj) {\r\n              invoice.payment_method_name = _obj.name;\r\n            }\r\n          }\r\n          invoice.note = element.note; //ghi chú\r\n          invoice.bill_products[0].product_code = element.product_code;\r\n          invoice.bill_products[0].product_name = element.product_name;\r\n          invoice.bill_products[0].unit_code = element.unit_code;\r\n          invoice.bill_products[0].unit_name = element.unit_name;\r\n          invoice.bill_products[0].quantity = element.quantity;\r\n          invoice.bill_products[0].discount = element.discount;\r\n          invoice.bill_products[0].amount_discount = element.amount_discount;\r\n          invoice.bill_products[0].price = element.price;\r\n          invoice.bill_products[0].amount = element.amount;\r\n          invoice.bill_products[0].vat = element.vat;\r\n          invoice.bill_products[0].amount_vat = element.amount_vat;\r\n          invoice.bill_products[0].amount_after_vat = element.amount_after_vat;\r\n          invoice.bill_products[0].order = element.order;\r\n          invoice.bill_products[0].view_order = element.view_order;\r\n          invoice.bill_products[0].commercial_discount = element.commercial_discount;\r\n          invoice.bill_products[0].is_promotion = element.is_promotion;\r\n          invoice.bill_products[0].is_explain = element.is_explain;\r\n          let decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n          invoice.decimal_places_json = decimal_places_json;\r\n          if (element.id) {\r\n            invoice.id = invoice.id;\r\n          }\r\n          /* Các trường mở rộng */\r\n          if (this.billoptions && this.billoptions.length > 0) {\r\n            let optionClone = _.cloneDeep(this.billoptions);\r\n            optionClone.forEach(billOption => {\r\n              for (var key in element) {\r\n                if (billOption.code === key) {\r\n                  if (billOption.data_type == 'ngay' && element[key])\r\n                    billOption.value = moment(element[key]).format('YYYY-MM-DD HH:mm:ss');\r\n                  else\r\n                    billOption.value = element[key];\r\n                }\r\n              }\r\n            });\r\n            invoice.bill_options = [];\r\n            optionClone.forEach(val => invoice.bill_options.push(Object.assign({}, val)));\r\n          }\r\n          invoices.push(invoice);\r\n        }\r\n\r\n        if (element.productNumberOfVouchers) {\r\n          let invoiceProduct = {\r\n            product_code: element.product_code,\r\n            product_name: element.product_name,\r\n            unit_code: element.unit_code,\r\n            unit_name: element.unit_name,\r\n            quantity: element.quantity,\r\n            price: element.price,\r\n            vat: element.vat,\r\n            commercial_discount: element.commercial_discount,\r\n            is_promotion: element.is_promotion,/* Diễn giải */\r\n            is_explain: element.is_explain,/* Khuyến mại */\r\n            amount_discount: element.amount_discount,\r\n            discount: element.discount,\r\n            order: element.order,\r\n            view_order: element.view_order,\r\n            amount: element.amount,\r\n            amount_vat: element.amount_vat,\r\n            amount_after_vat: element.amount_after_vat,\r\n          }\r\n          for (let i = 0; i < invoices.length; i++) {\r\n            if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n              invoices[i].bill_products.push(invoiceProduct);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n\r\n    for (let i = 0; i < invoices.length; i++) {\r\n      let\r\n        amount = null, total_amount_vat = null, amount_after_vat = null, amount_after_vatx = null, amount_after_vat0 = null, amount_after_vat5 = null, amount_after_vat8 = null, amount_after_vat10 = null, total_amount_product_vat0 = null, amount_vat5 = null, amount_vat8 = null, amount_vat10 = null, amount_vat0 = null,\r\n        total_amount_product_vat5 = null, total_amount_product_vat8 = null, total_amount_product_vat10 = null, total_amount_product_vatx = null, amount_after_vat_other = null, amount_after_vat_kkknt = null, total_amount_product_vat_kkknt, total_amount_product_vat_other, amount_vat_other, other_charge = null, other_tax = null, amount_discount = null;\r\n      invoices[i].bill_products.forEach((product, index) => {\r\n        if (VStringService._getValueToString(product.product_name) != \"\" && !product.is_promotion && !product.is_explain && !product.commercial_discount && invalid) {\r\n        }\r\n        else if (product.is_promotion || product.is_explain || product.commercial_discount) {\r\n          if ((product.product_name == null || product.product_name == '') && invalid) {\r\n            Library.notify(\"Tên hàng hóa\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            invalid = false;\r\n            return false;\r\n          }\r\n        }\r\n        if (VStringService._getValueToString(product.product_name) != \"\" && !product.is_explain) {\r\n          if (this.isHdGTGT) {\r\n            if (product.vat == null && invalid) {\r\n              Library.notify(\"Thuế suất\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              invalid = false;\r\n              return false;\r\n            }\r\n            if (product.vat != \"-1\" && product.vat != \"-2\" && product.amount_vat == null && invalid) {\r\n              Library.notify(\"Tiền thuế\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              invalid = false;\r\n              return false;\r\n            }\r\n          }\r\n          if (product.amount == null && invalid) {\r\n            Library.notify(\"Thành tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            invalid = false;\r\n            return false;\r\n          }\r\n        }\r\n        if (!product.is_promotion && !product.is_explain) {\r\n          if (product.commercial_discount || product.is_refund_ticket) {\r\n            if (product.amount !== null) amount -= product.amount;\r\n            if (product.amount_vat !== null) total_amount_vat -= product.amount_vat;\r\n            if (product.amount_after_vat !== null) amount_after_vat -= product.amount_after_vat;\r\n            if (product.other_tax !== null) other_tax -= product.other_tax;\r\n            if (product.other_charge !== null) other_charge -= product.other_charge;\r\n            if (product.vat == -1 && product.amount_after_vat !== null) amount_after_vatx -= product.amount_after_vat;\r\n            if (product.vat == 0 && product.amount_after_vat !== null) amount_after_vat0 -= product.amount_after_vat;\r\n            if (product.vat == 5 && product.amount_after_vat !== null) amount_after_vat5 -= product.amount_after_vat;\r\n            if (product.vat == 8 && product.amount_after_vat !== null) amount_after_vat8 -= product.amount_after_vat;\r\n            if (product.vat == 10 && product.amount_after_vat !== null) amount_after_vat10 -= product.amount_after_vat;\r\n            if (product.vat == -2 && product.amount_after_vat !== null) amount_after_vat_kkknt -= product.amount_after_vat;\r\n            if ((product.vat == -3 || product.vat == 7 || product.vat == 3.5) && product.amount_after_vat !== null) amount_after_vat_other -= product.amount_after_vat;\r\n\r\n            if (product.vat == 0 && product.amount_vat !== null) amount_vat0 -= product.amount_vat;\r\n            if (product.vat == 5 && product.amount_vat !== null) amount_vat5 -= product.amount_vat;\r\n            if (product.vat == 8 && product.amount_vat !== null) amount_vat8 -= product.amount_vat;\r\n            if (product.vat == 10 && product.amount_vat !== null) amount_vat10 -= product.amount_vat;\r\n            if ((product.vat == -3 || product.vat == 7 || product.vat == 3.5) && product.amount_vat !== null) amount_vat_other -= product.amount_vat;\r\n\r\n            if (product.vat == -1) total_amount_product_vatx -= product.amount;\r\n            if (product.vat == 0) total_amount_product_vat0 -= product.amount;\r\n            if (product.vat == 5) total_amount_product_vat5 -= product.amount;\r\n            if (product.vat == 8) total_amount_product_vat8 -= product.amount;\r\n            if (product.vat == 10) total_amount_product_vat10 -= product.amount;\r\n            if (product.vat == -2) total_amount_product_vat_kkknt -= product.amount;\r\n            if (product.vat == -3 || product.vat == 7 || product.vat == 3.5) total_amount_product_vat_other -= product.amount;\r\n          }\r\n          else {\r\n            if (product.amount !== null) amount += product.amount;\r\n            if (product.amount_vat !== null) total_amount_vat += product.amount_vat;\r\n            if (product.amount_after_vat !== null) amount_after_vat += product.amount_after_vat;\r\n            if (product.other_tax !== null) other_tax += product.other_tax;\r\n            if (product.other_charge !== null) other_charge += product.other_charge;\r\n            if (product.vat == -1 && product.amount_after_vat !== null) amount_after_vatx += product.amount_after_vat;\r\n            if (product.vat == 0 && product.amount_after_vat !== null) amount_after_vat0 += product.amount_after_vat;\r\n            if (product.vat == 5 && product.amount_after_vat !== null) amount_after_vat5 += product.amount_after_vat;\r\n            if (product.vat == 8 && product.amount_after_vat !== null) amount_after_vat8 += product.amount_after_vat;\r\n            if (product.vat == 10 && product.amount_after_vat !== null) amount_after_vat10 += product.amount_after_vat;\r\n            if (product.vat == -2 && product.amount_after_vat !== null) amount_after_vat_kkknt += product.amount_after_vat;\r\n            if ((product.vat == -3 || product.vat == 7 || product.vat == 3.5) && product.amount_after_vat !== null) amount_after_vat_other += product.amount_after_vat;\r\n\r\n            if (product.vat == 0 && product.amount_vat !== null) amount_vat0 += product.amount_vat;\r\n            if (product.vat == 5 && product.amount_vat !== null) amount_vat5 += product.amount_vat;\r\n            if (product.vat == 8 && product.amount_vat !== null) amount_vat8 += product.amount_vat;\r\n            if (product.vat == 10 && product.amount_vat !== null) amount_vat10 += product.amount_vat;\r\n            if ((product.vat == -3 || product.vat == 7 || product.vat == 3.5) && product.amount_vat !== null) amount_vat_other += product.amount_vat;\r\n\r\n            if (product.vat == -1) total_amount_product_vatx += product.amount;\r\n            if (product.vat == 0) total_amount_product_vat0 += product.amount;\r\n            if (product.vat == 5) total_amount_product_vat5 += product.amount;\r\n            if (product.vat == 8) total_amount_product_vat8 += product.amount;\r\n            if (product.vat == 10) total_amount_product_vat10 += product.amount;\r\n            if (product.vat == -2) total_amount_product_vat_kkknt += product.amount;\r\n            if (product.vat == -3 || product.vat == 7 || product.vat == 3.5) total_amount_product_vat_other += product.amount;\r\n          }\r\n          //Tính tổng tiền chiết khấu\r\n          if (product.commercial_discount)\r\n            amount_discount += product.amount;\r\n          else if (product.amount_discount != null)\r\n            amount_discount += product.amount_discount;\r\n\r\n          if (!this.is_multi_vat && index > 0 && invoices[i].bill_products[index].vat != invoices[i].bill_products[index - 1].vat && invalid) {\r\n            let _obj = invoices[i].bill_products.filter(p => !p.is_promotion && !p.is_explain && p.vat != null)[0];\r\n            let temp = _obj ? _obj.vat : null;\r\n            if (!this.is_multi_vat) {\r\n              let check_same_vat = true;\r\n              invoices[i].bill_products.forEach(item => {\r\n                if (item.vat != null) {\r\n                  if (item.vat !== temp && item.product_name && !item.is_promotion && !item.is_explain) {\r\n                    check_same_vat = false;\r\n                  }\r\n                }\r\n              });\r\n              if (!check_same_vat) {\r\n                Library.notify('Mẫu hóa đơn đăng ký 1 loại thuế suất. Vui lòng kiểm tra lại thuế suất của hàng hóa', 'error');\r\n                invalid = false;\r\n                return;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n      invoices[i].amount = this.roundNumber(amount, decimal_amount);\r\n      // invoices[i].total_amount_vat = this.roundNumber(total_amount_vat, decimal_amount_vat);\r\n      invoices[i].amount_vat = this.roundNumber(total_amount_vat, decimal_amount_vat);\r\n      invoices[i].amount_after_vat = this.roundNumber(amount_after_vat, decimal_amount_after_vat);\r\n      invoices[i].amount_after_vatx = amount_after_vatx != null ? this.roundNumber(amount_after_vatx, decimal_amount_after_vat) : null;\r\n      invoices[i].amount_after_vat0 = amount_after_vat0 != null ? this.roundNumber(amount_after_vat0, decimal_amount_after_vat) : null;\r\n      invoices[i].amount_after_vat5 = amount_after_vat5 != null ? this.roundNumber(amount_after_vat5, decimal_amount_after_vat) : null;\r\n      invoices[i].amount_after_vat8 = amount_after_vat8 != null ? this.roundNumber(amount_after_vat8, decimal_amount_after_vat) : null;\r\n      invoices[i].amount_after_vat10 = amount_after_vat10 != null ? this.roundNumber(amount_after_vat10, decimal_amount_after_vat) : null;\r\n      invoices[i].amount_after_vat_kkknt = amount_after_vat_kkknt != null ? this.roundNumber(amount_after_vat_kkknt, decimal_amount_after_vat) : null;\r\n      invoices[i].amount_after_vat_other = amount_after_vat_other != null ? this.roundNumber(amount_after_vat_other, decimal_amount_after_vat) : null;\r\n      invoices[i].other_tax = other_tax != null ? this.roundNumber(other_tax, decimal_amount_after_vat) : null;\r\n      invoices[i].other_charge = other_charge != null ? this.roundNumber(other_charge, decimal_amount_after_vat) : null;\r\n      invoices[i].amount_discount = amount_discount != null ? this.roundNumber(amount_discount, decimal_amount_discount) : null;\r\n      if (this.isHdGTGT) {\r\n        invoices[i].amount_vat0 = amount_vat0 != null ? this.roundNumber(amount_vat0, decimal_amount_vat) : null;\r\n        invoices[i].amount_vat5 = amount_vat5 != null ? this.roundNumber(amount_vat5, decimal_amount_vat) : null;\r\n        invoices[i].amount_vat8 = amount_vat8 != null ? this.roundNumber(amount_vat8, decimal_amount_vat) : null;\r\n        invoices[i].amount_vat10 = amount_vat10 != null ? this.roundNumber(amount_vat10, decimal_amount_vat) : null;\r\n        invoices[i].amount_vat_other = amount_vat_other != null ? this.roundNumber(amount_vat_other, decimal_amount_vat) : null;\r\n      }\r\n      invoices[i].total_amount_product_vatx = total_amount_product_vatx != null ? this.roundNumber(total_amount_product_vatx, decimal_amount) : null;\r\n      invoices[i].total_amount_product_vat0 = total_amount_product_vat0 != null ? this.roundNumber(total_amount_product_vat0, decimal_amount) : null;\r\n      invoices[i].total_amount_product_vat5 = total_amount_product_vat5 != null ? this.roundNumber(total_amount_product_vat5, decimal_amount) : null;\r\n      invoices[i].total_amount_product_vat8 = total_amount_product_vat8 != null ? this.roundNumber(total_amount_product_vat8, decimal_amount) : null;\r\n      invoices[i].total_amount_product_vat10 = total_amount_product_vat10 != null ? this.roundNumber(total_amount_product_vat10, decimal_amount) : null;\r\n      invoices[i].total_amount_product_vat_kkknt = total_amount_product_vat_kkknt != null ? this.roundNumber(total_amount_product_vat_kkknt, decimal_amount) : null;\r\n      invoices[i].total_amount_product_vat_other = total_amount_product_vat_other != null ? this.roundNumber(total_amount_product_vat_other, decimal_amount) : null;\r\n      invoices[i].cash = invoices[i].cash ? this.roundNumber(invoices[i].cash, decimal_amount_after_vat) : this.roundNumber(invoices[i].amount_after_vat, decimal_amount_after_vat);\r\n      invoices[i].returns = this.roundNumber((invoices[i].cash - invoices[i].amount_after_vat), decimal_amount_after_vat);\r\n      invoices[i].total_payment = this.roundNumber(invoices[i].amount_after_vat, decimal_amount_after_vat);\r\n      invoices[i].currency_code = invoices[i].currency_code ? invoices[i].currency_code : 'VND';\r\n      invoices[i].currency_rate = invoices[i].currency_rate ? invoices[i].currency_rate : 1;\r\n      const tien_chu = Helper.tienBangChu(Math.abs(invoices[i].total_payment), decimal_amount_after_vat, invoices[i].currency_code, this.configs.system_parameter.display_read_money_english);\r\n      invoices[i].total_payment_word = this.invoiceService.docTienAm(invoices[i].total_payment, tien_chu, this.configs, invoices[i].currency_code);\r\n      if (invoices[i].total_payment > 20000000 && (invoices[i].payment_method_code == 'TM') && type == \"submit\" && invalid) {\r\n        Library.notify('Vui lòng chọn HTTT chuyển khoản cho hóa đơn có giá trị lớn hơn 20 triệu đồng', 'error');\r\n        let countRowBefore = 0;\r\n        for (let j = 0; j < i; j++) {\r\n          countRowBefore += invoices[j].bill_products.length;\r\n        }\r\n        this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(countRowBefore, 'payment_method_code'));\r\n        invalid = false;\r\n        return;\r\n      }\r\n      InvoicesService.deleteProperties(new BillModel(1), invoices[i], true);\r\n      // Valid tỷ giá\r\n      let invoice_products = invoices[i].bill_products.filter(item => item.product_exchange_rate);\r\n      if (invoices[i].currency_code && invoices[i].currency_code != \"VND\") {\r\n        if (invoice_products && invoice_products.length > 0) {\r\n          if (invoice_products.length !== invoices[i].bill_products.length) {\r\n            Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n            return false;\r\n          }\r\n        }\r\n        else {\r\n          if (!invoices[i].currency_rate) {\r\n            Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.totalInvoice = invoices.length;\r\n    this.invoicesArr = invoices;\r\n    this.invoicesArr = this.invoicesArr.sort((itemA, itemB) => {\r\n      return new Date(itemA.invoice_date).getTime() - new Date(itemB.invoice_date).getTime();\r\n    });\r\n    return invalid;\r\n  }\r\n  date_sort_desc(date1, date2) {\r\n    // This is a comparison function that will result in dates being sorted in\r\n    // DESCENDING order.\r\n    if (date1 > date2) return -1;\r\n    if (date1 < date2) return 1;\r\n    return 0;\r\n  };\r\n  /* Xem trước hóa đơn */\r\n  preview() {\r\n    let convert = this.convertGirdToInvoices(\"preview\");\r\n    if (convert) {\r\n      if (this.configs.system_parameter.display_template_from_server) {\r\n        const initialState = {\r\n          items: this.invoicesArr,\r\n          isXuatHD: false,\r\n          typeAction: 'NAP_EXCEL_HD'\r\n        };\r\n        this.bsModalViewModel = this.modalImportService.show\r\n          (\r\n            ViewInvoiceBillComponent,\r\n            {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-xl view-invoice',\r\n              initialState\r\n            }\r\n          );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          subModal.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        this.checkCKS(\"XEM_TRUOC\");\r\n      }\r\n    }\r\n  }\r\n\r\n  previewBeforeSubmit() {\r\n    this.convertGirdToInvoices(\"preview\");\r\n    if (this.configs.system_parameter.display_template_from_server) {\r\n      let hinhthucxuat = \"\";\r\n      if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n        hinhthucxuat = \"và ký\";\r\n      } else {\r\n        hinhthucxuat = \"chờ ký\";\r\n      }\r\n      const initialState = {\r\n        items: this.invoicesArr,\r\n        isXuatHD: true,\r\n        hinhthucxuat: hinhthucxuat,\r\n        typeAction: 'NAP_EXCEL_HD'\r\n      };\r\n\r\n      this.bsModalViewModel = this.modalImportService.show\r\n        (\r\n          ViewInvoiceBillComponent,\r\n          {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-xl view-invoice',\r\n            initialState\r\n          }\r\n        );\r\n      const subModal = this.modalImportService.onHide.subscribe(() => {\r\n        if (this.bsModalViewModel.content.successSaveItem == \"DONG_Y\") {\r\n          this.confirmCheckPreview = true;\r\n          this.submit('XUAT');\r\n        }\r\n        subModal.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      this.checkCKS(\"XUAT_HOA_DON\");\r\n    }\r\n\r\n\r\n    // this.windowPreviewBeforeSubmit = window.open(\"\", \"\", `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n    // this.windowPreviewBeforeSubmit.document.body.innerHTML = \"Đang tải dữ liệu!\";\r\n    // this.windowPreviewBeforeSubmit.blur();\r\n\r\n    // let timer = setInterval(() => {\r\n    //   if (this.windowPreviewBeforeSubmit.closed) {\r\n    //     clearInterval(timer);\r\n    //     let isCheck = Helper.getCookie('CK_CFM_I');\r\n    //     this.windowPreviewBeforeSubmit = undefined;\r\n    //     if (isCheck == \"CHECKED\") {\r\n    //       document.cookie = \"CK_CFM_I=; path=/\";\r\n    //       this.confirmCheckPreview = true;\r\n    //       this.submit('XUAT');\r\n    //     }\r\n    //   }\r\n    // }, 500);\r\n    // let htx = \"\";\r\n    // if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n    //   htx = \"và ký\";\r\n    // } else {\r\n    //   htx = \"chờ ký\";\r\n    // }\r\n    // let sub = this.vatService.previewInvoiceImport(data).subscribe(rs => {\r\n    //   if (rs.status == 'success') {\r\n    //     let pdf_file = rs.data.invoice.pdf_file;\r\n    //     let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n    //     this.windowPreviewBeforeSubmit.document.write(`\r\n    //     <style type=\"text/css\" scoped>\r\n    //         .nhap-nhay {\r\n    //           background: red;\r\n    //           padding: 0.5px 9px;\r\n    //           margin-right: 5px;\r\n    //           border-radius: 57%;\r\n    //           -webkit-animation: flicker 1s infinite;\r\n    //         }\r\n    //         .ht-xuat{\r\n    //           display: inline-block;\r\n    //           margin-right: 50px;\r\n    //           padding: 15px;\r\n    //           float: right;\r\n    //           background: #e48e08;\r\n    //         }\r\n    //         @-webkit-keyframes flicker\r\n    //         {\r\n    //         0% {opacity:0;}\r\n    //         9% {opacity:0;}\r\n    //         10% {opacity:.5;}\r\n    //         13% {opacity:0;}\r\n    //         20% {opacity:.5;}\r\n    //         25% {opacity:1;}\r\n    //         }\r\n    //         .example {\r\n    //           padding: 20px;\r\n    //         }\r\n\r\n    //         input[type=button] {\r\n    //           padding: 5px 10px;\r\n    //           margin: 10px 5px;\r\n    //           border-radius: 5px;\r\n    //           cursor: pointer;\r\n    //           background: #ddd;\r\n    //           border: 1px solid #ccc;\r\n    //         }\r\n    //         input[type=button]:hover {\r\n    //           background: #ccc;\r\n    //         }\r\n\r\n    //         .confirm {\r\n    //           display: none;\r\n    //         }\r\n    //         .confirm > div:first-of-type {\r\n    //           position: fixed;\r\n    //           width: 100%;\r\n    //           height: 100%;\r\n    //           background: rgba(0, 0, 0, 0.5);\r\n    //           top: 0px;\r\n    //           left: 0px;\r\n    //         }\r\n    //         .confirm > div:last-of-type {\r\n    //           padding: 10px 20px;\r\n    //           background: white;\r\n    //           position: absolute;\r\n    //           width: auto;\r\n    //           height: auto;\r\n    //           left: 50%;\r\n    //           top: 50%;\r\n    //           transform: translate(-50%, -50%);\r\n    //           border-radius: 5px;\r\n    //           border: 1px solid #333;\r\n    //         }\r\n    //         .confirm > div:last-of-type div:first-of-type {\r\n    //           min-width: 150px;\r\n    //           padding: 10px;\r\n    //         }\r\n    //         .confirm > div:last-of-type div:last-of-type {\r\n    //           text-align: right;\r\n    //         }\r\n    //     </style>\r\n    //     <div style=\"margin-left: 50px;\">\r\n    //       <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n    //       <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý:\r\n    //       </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n    //     </div>\r\n\r\n    //     <div>\r\n    //       <iframe style=\"margin-left: 170px;\" width=\"70%\" height=\"95%\" src=\"${objectUrl}\"></iframe>\r\n    //       <div class=\"ht-xuat\">\r\n    //         <p style=\"color: #fff;font-size: 17px;text-align: center;margin-bottom: 0;\">Ngày hóa đơn</p>\r\n    //         <p style=\"color: #fff;font-size: 17px;text-align: center;margin-bottom: 10px;margin-top: 5px;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n    //         <h3 style=\"color: #fff; text-align: center; text-transform: uppercase;margin-top: 5px;\">Xuất ${htx}</h3>\r\n    //       </div>\r\n    //     </div>\r\n\r\n    //     <div style=\"text-align: center; margin: 20px 0 50px; font-size: 22px; font-weight: 600;\">\r\n    //       <a href=\"javascript:void(0)\" style=\"text-decoration: none;\" onclick=\"setConfirmInvoice()\">Đồng ý </a>|\r\n    //       <a href=\"javascript:void(0)\" style=\"text-decoration: none;\" onclick=\"closeWin()\">Đóng</a>\r\n    //     </div>\r\n\r\n    //     <div class=\"confirm\">\r\n    //         <div></div>\r\n    //         <div>\r\n    //           <div id=\"confirmMessage\">Confirm text</div>\r\n    //           <div>\r\n    //             <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n    //             <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n    //           </div>\r\n    //         </div>\r\n    //     </div>\r\n\r\n    //     <script type=\"text/javascript\">\r\n    //     const ui = {\r\n    //       confirm: async (message) => createConfirm(message)\r\n    //     }\r\n\r\n    //     const createConfirm = (message) => {\r\n    //       return new Promise((complete, failed)=>{\r\n    //         $('#confirmMessage').text(message)\r\n\r\n    //         $('#confirmYes').off('click');\r\n    //         $('#confirmNo').off('click');\r\n\r\n    //         $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n    //         $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n\r\n    //         $('.confirm').show();\r\n    //       });\r\n    //     }\r\n\r\n    //     const setConfirmInvoice = async () => {\r\n    //       const confirm = await ui.confirm(\"Bạn có chắc chắn muốn xuất hóa đơn ${htx} không?\");\r\n    //       if(confirm){\r\n    //         document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n    //         window.close();\r\n    //       } else{\r\n    //       }\r\n    //     }\r\n\r\n    //       function closeWin(){\r\n    //         window.close();\r\n    //       }\r\n    //     </script>\r\n    //     <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n    //     `);\r\n    //     this.windowPreviewBeforeSubmit.focus();\r\n    //   } else {\r\n    //     this.windowPreviewBeforeSubmit.close();\r\n    //     Library.notify(rs.message, 'error');\r\n    //   }\r\n    // }, err => { }, () => {\r\n    //   Library.hideloading();\r\n    //   sub.unsubscribe();\r\n    // });\r\n  }\r\n\r\n\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      let newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      let oDuplicate = this.select.unit_codes.filter(p => p.code === newItem.code)[0];\r\n      if (oDuplicate)\r\n        newItem.code = newItem.code + Helper.addtionalUnitCode();\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption(\"unit_code\", \"lookup\", {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: \"name\",\r\n          valueExpr: \"code\"\r\n        });\r\n      });\r\n      return newItem;\r\n    }.bind(this)\r\n  }\r\n  getDataPreview() {\r\n    let formatter;\r\n    let invoicesPreview = [];\r\n    this.convertGirdToInvoices(\"preview\");\r\n\r\n\r\n    let displayInt = this.configs.system_parameter.display_int ? this.configs.system_parameter.display_int : false;\r\n    formatter = this.configs.system_parameter.decpoint_is_dot ? { decimal: \".\", thousands: \",\", display_int: displayInt } : { decimal: \",\", thousands: \".\", display_int: displayInt };\r\n\r\n    this.invoicesArr.forEach(data => {\r\n      let decimal_quatity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n      let decimal_price = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia);\r\n      let decimal_price_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia_sau_thue);\r\n      let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n      let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n      let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n      let decimal_ty_gia = VChanggeMoneyService.getFormatterToNumber(this.formatter.ty_gia);\r\n      let amount_without_discount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien_chua_ck);\r\n\r\n      let total_amount_product_with_vatx = null, total_amount_product_with_vat0 = null, total_amount_product_with_vat5 = null, total_amount_product_with_vat8 = null, total_amount_product_with_vat10 = null, amount_vat0 = null, total_amount_product_vat_kkknt = null, total_amount_product_vat_other = null;\r\n\r\n      data.invoice_products.forEach(item => {\r\n        if (!item.is_promotion && !item.is_explain) {\r\n          if (item.commercial_discount) {\r\n            if (item.vat == -1) total_amount_product_with_vatx -= item.amount_after_vat;\r\n            if (item.vat == 0) total_amount_product_with_vat0 -= item.amount_after_vat;\r\n            if (item.vat == 0) amount_vat0 -= item.amount_vat;\r\n            if (item.vat == 5) total_amount_product_with_vat5 -= item.amount_after_vat;\r\n            if (item.vat == 8) total_amount_product_with_vat8 -= item.amount_after_vat;\r\n            if (item.vat == 10) total_amount_product_with_vat10 -= item.amount_after_vat;\r\n            if (item.vat == -2) total_amount_product_vat_kkknt -= item.amount_after_vat;\r\n            if (item.vat == -3 || item.vat == 7 || item.vat == 3.5) total_amount_product_vat_other -= item.amount_after_vat;\r\n          } else {\r\n            if (item.vat == -1) total_amount_product_with_vatx += item.amount_after_vat;\r\n            if (item.vat == 0) total_amount_product_with_vat0 += item.amount_after_vat;\r\n            if (item.vat == 0) amount_vat0 += item.amount_vat;\r\n            if (item.vat == 5) total_amount_product_with_vat5 += item.amount_after_vat;\r\n            if (item.vat == 8) total_amount_product_with_vat8 += item.amount_after_vat;\r\n            if (item.vat == 10) total_amount_product_with_vat10 += item.amount_after_vat;\r\n            if (item.vat == -2) total_amount_product_vat_kkknt += item.amount_after_vat;\r\n            if (item.vat == -3 || item.vat == 7 || item.vat == 3.5) total_amount_product_vat_other += item.amount_after_vat;\r\n          }\r\n        }\r\n\r\n        item['unit_name'] = \"\";\r\n        this.select.unit_codes.forEach(unit => {\r\n          item.discount = \"\";\r\n          item.total_discount = \"\";\r\n          if (unit.code == item.unit_code) {\r\n            item['unit_name'] = unit.name;\r\n          }\r\n        });\r\n\r\n        item.amount = Helper.formatMoney(item.amount, decimal_amount, formatter);\r\n        item.price = Helper.formatMoney(item.price, decimal_price, formatter);\r\n        item.product_exchange_rate = Helper.formatMoney(item.product_exchange_rate, decimal_ty_gia, formatter);\r\n        item.price_after_vat = Helper.formatMoney(item.price_after_vat, decimal_price_after_vat, formatter);\r\n        item.quantity = Helper.formatMoney(item.quantity, decimal_quatity, formatter);\r\n        item.other_tax = Helper.formatMoney(item.other_tax, decimal_amount, formatter);\r\n        item.other_charge = Helper.formatMoney(item.other_charge, decimal_amount, formatter);\r\n        item.discount = Helper.formatMoney(item.discount, decimal_quatity, formatter);\r\n        item.amount_discount = Helper.formatMoney(item.amount_discount, decimal_quatity, formatter);\r\n        item.amount_without_discount = Helper.formatMoney(item.amount_without_discount, amount_without_discount, formatter);\r\n\r\n      });\r\n      let _obj = this.select.payment_method_names.filter(p => p.code == data.payment_method_code)[0];\r\n      if (_obj) {\r\n        data.payment_method_name = _obj.name;\r\n      }\r\n      data.total_amount_product_vat_kkknt = Helper.formatMoney(total_amount_product_vat_kkknt, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_vat_other = Helper.formatMoney(total_amount_product_vat_other, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat8 = Helper.formatMoney(total_amount_product_with_vat8, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n\r\n      data.amount_after_vat_kkknt = Helper.formatMoney(total_amount_product_vat_kkknt, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat_other = Helper.formatMoney(total_amount_product_vat_other, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat8 = Helper.formatMoney(total_amount_product_with_vat8, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n\r\n\r\n      data.amount_after_vat_kkknt = Helper.formatMoney(data.amount_after_vat_kkknt, decimal_amount, formatter);\r\n      data.amount_after_vat_other = Helper.formatMoney(data.amount_after_vat_other, decimal_amount, formatter);\r\n      data.total_amount_product_vatx = Helper.formatMoney(data.total_amount_product_vatx, decimal_amount, formatter);\r\n      data.total_amount_product_vat0 = Helper.formatMoney(data.total_amount_product_vat0, decimal_amount, formatter);\r\n      data.total_amount_product_vat5 = Helper.formatMoney(data.total_amount_product_vat5, decimal_amount, formatter);\r\n      data.total_amount_product_vat8 = Helper.formatMoney(data.total_amount_product_vat8, decimal_amount, formatter);\r\n      data.total_amount_product_vat10 = Helper.formatMoney(data.total_amount_product_vat10, decimal_amount, formatter);\r\n\r\n      data.amount_vat0 = amount_vat0;\r\n      data.amount_vat_other = Helper.formatMoney(data.amount_vat_other, decimal_amount_vat, formatter);\r\n      data.amount_vat5 = Helper.formatMoney(data.amount_vat5, decimal_amount_vat, formatter);\r\n      data.amount_vat8 = Helper.formatMoney(data.amount_vat8, decimal_amount_vat, formatter);\r\n      data.amount_vat10 = Helper.formatMoney(data.amount_vat10, decimal_amount_vat, formatter);\r\n\r\n      data.amount = Helper.formatMoney(data.amount, decimal_amount, formatter);\r\n      data.total_amount_vat = Helper.formatMoney(data.total_amount_vat, decimal_amount_vat, formatter);\r\n      data.total_payment = Helper.formatMoney(data.total_payment, decimal_amount_after_vat, formatter);\r\n\r\n      invoicesPreview.push(data);\r\n    });\r\n\r\n    return invoicesPreview;\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    win.blur();\r\n    Library.showloading();\r\n\r\n    let sub = this.vatService.inChuyenDoiInvoiceImport(this.invoicesId, false).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n        win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n        //   win.document.write(`\r\n        //   <a id=\"idA\" title=\"Download File\" style=\"font-family: \\'Verdana\\';color: #333;font-weight: 600;float:right; margin-bottom: 5px;\r\n        //     margin-right: 20px;\" download=\"hoadon.pdf\" href=\"data:application/pdf;base64,${pdf_file}\">Tải File</a>\r\n        //   <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n\r\n        // `);\r\n        //   win.resizeTo(screen.availWidth, screen.availHeight);\r\n        //   win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xemHoaDon() {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    win.blur();\r\n    Library.showloading();\r\n    let sub = this.billService.view(this.invoicesId).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n        win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n        // win.document.write(`<iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}\"></iframe>`)\r\n        // win.resizeTo(screen.availWidth, screen.availHeight);\r\n        // win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  submit(type) {\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.checkStatusData()\r\n    if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n      Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n      return;\r\n    }\r\n    if (this.totalDuplicateInvoice > 0) {\r\n      Library.notify(\"Số phiếu, chứng từ bị trùng\", \"error\");\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      let convert = this.convertGirdToInvoices(\"submit\", type);\r\n      if (convert) {\r\n        if (type == \"XUAT\") {\r\n          if (this.confirmCheckPreview) {\r\n            this.showPopupImport = true;\r\n            this.xuatHoaDon();\r\n            this.confirmCheckPreview = false;\r\n            // });\r\n          } else {\r\n            this.previewBeforeSubmit();\r\n          }\r\n        } else if (type == \"LUU\") {\r\n          this.showPopupImport = true;\r\n          this.luuChoXuat();\r\n        }\r\n      }\r\n    }, 300);\r\n  }\r\n  /* */\r\n  configColumn() {\r\n    const initialState = {\r\n      listColumn: this.listColumn,\r\n      listColumnClone: this.listColumn,\r\n      configs: this.configs,\r\n      exportType: sEnum.exportType.hoadon\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigColumnImportExcelComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    let subModal = this.modalService.onHide.subscribe(() => {\r\n      let data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.listColumn = data.listColumn;\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  infoColumn(columnName) {\r\n    if (this.listColumn && this.listColumn.length > 0) {\r\n      let _obj = this.listColumn.filter(p => p.column_code == columnName)[0];\r\n      if (_obj) {\r\n        if ((_obj.column_code == \"vat\" || _obj.column_code == \"amount_vat\") && !this.isHdGTGT) {\r\n          _obj.is_visible = false;\r\n        }\r\n        return _obj;\r\n      } else return { column_code: \"\", column_name: \"\", is_visible: false };\r\n    }\r\n  }\r\n\r\n  checkCKS(typeView) {\r\n    this.connectWebsocket();\r\n    if (this.socketService.checkNull()) {\r\n      this.socketService.connect();\r\n    }\r\n    setTimeout(() => {\r\n      const res = this.socketService.getStatusCertificate();\r\n      if (res && res.status === 'error' && res.code == 10) {\r\n        const initialState = {\r\n          typeNotify: \"XEM_MAU\",\r\n        };\r\n        this.bsModalRef = this.modalService.show(SignatureOffComponent, {\r\n          class: 'modal-lg', backdrop: 'static',\r\n          keyboard: false,\r\n          initialState\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n\r\n        });\r\n      }\r\n      else {\r\n        if (typeView == \"XEM_TRUOC\") {\r\n          const initialState = {\r\n            items: this.invoicesArr,\r\n            isXuatHD: false,\r\n            typeAction: 'NAP_EXCEL_HD'\r\n          };\r\n          this.bsModalViewModel = this.modalImportService.show\r\n            (\r\n              ViewInvoiceBillComponent,\r\n              {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'modal-xl view-invoice',\r\n                initialState\r\n              }\r\n            );\r\n          const subModal = this.modalImportService.onHide.subscribe(() => {\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n        else if (typeView == \"XUAT_HOA_DON\") {\r\n          let hinhthucxuat = \"\";\r\n          if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n            hinhthucxuat = \"và ký\";\r\n          } else {\r\n            hinhthucxuat = \"chờ ký\";\r\n          }\r\n          const initialState = {\r\n            items: this.invoicesArr,\r\n            isXuatHD: true,\r\n            hinhthucxuat: hinhthucxuat,\r\n            typeAction: 'NAP_EXCEL_HD'\r\n          };\r\n\r\n          this.bsModalViewModel = this.modalImportService.show\r\n            (\r\n              ViewInvoiceBillComponent,\r\n              {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'modal-xl view-invoice',\r\n                initialState\r\n              }\r\n            );\r\n          const subModal = this.modalImportService.onHide.subscribe(() => {\r\n            if (this.bsModalViewModel.content.successSaveItem == \"DONG_Y\") {\r\n              this.connectWebsocket();\r\n              this.confirmCheckPreview = true;\r\n              this.submit('XUAT');\r\n            }\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  dong() {\r\n    this.bsModalImportRef.hide();\r\n    this.funcNavigate();\r\n  }\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        this.invoice_products.byKey(key).then((row) => {\r\n          switch (column) {\r\n            case 'unit_code':\r\n              this.unitChange(row);\r\n              break;\r\n            case 'payment_method_code':\r\n              this.paymentMethodChange(row);\r\n              break;\r\n            case 'product_code':\r\n              this.productCodeChange(row);\r\n              break;\r\n            default:\r\n              break;\r\n            // }\r\n          }\r\n        }, (error) => {\r\n        });\r\n      });\r\n    }, 100);\r\n  }\r\n  xuatTiepHoaDon(type) {\r\n    if (type == \"XUAT\") {\r\n      let percentComplete = 100 / this.totalInvoice;\r\n      this.ttDaXuatHoaDon = true;\r\n      this.valueProgress += percentComplete;\r\n      if (this.countInvoice < this.totalInvoice) {\r\n        this.countInvoice++;\r\n        this.xuatHoaDon();\r\n      } else if (this.countInvoice == this.totalInvoice) {\r\n        this.valueProgress = 100;\r\n        Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n        this.isVisibleBtnSubmit = false;\r\n        this.showPopupImport = false;\r\n        this.bsModalImportRef.hide();\r\n        this.bsModalImportRef.content.successSaveItem = \"success\";\r\n        this.funcNavigate();\r\n      }\r\n    }\r\n  }\r\n  funcNavigate() {\r\n    let linkUrl = '/system/bills-invoice-vat';\r\n    if (!this.isHdGTGT)\r\n      linkUrl = '/system/bills-invoice-sale';\r\n    if (this.search)\r\n      this.router.navigate([linkUrl], { queryParams: this.search });\r\n    else\r\n      this.router.navigate([linkUrl]);\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"row search-section\\\">\\r\\n  <div class=\\\"col-md-8\\\" style=\\\"padding-right: 0px\\\">\\r\\n    <app-search-bill-advanced (searchContentChange)=\\\"getSearch($event)\\\" [loaiHoaDon]=\\\"loaiHoaDon\\\">\\r\\n    </app-search-bill-advanced>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-4\\\" style=\\\"max-height: 70px\\\">\\r\\n    <div class=\\\"list-header row\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-right button-panel\\\">\\r\\n          <dx-button (click)=\\\"lapHoaDon()\\\" [(icon)]=\\\"_translate.ICONS.plus\\\"\\r\\n            text=\\\"{{ 'CONTROLL.BUTTON.create_invoice' | translate }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button id=\\\"product3\\\" (click)=\\\"inhoadon()\\\" [(icon)]=\\\"_translate.ICONS.print\\\" text=\\\"In PTT\\\" type=\\\"default\\\">\\r\\n          </dx-button>\\r\\n          <dx-menu *ngIf=\\\"test\\\" [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\"\\r\\n            submenuDirection=\\\"auto\\\" (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainerVat\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n  [showRowLines]=\\\"true\\\" [showBorders]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n  [columnAutoWidth]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n  (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n  <!-- <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling> -->\\r\\n  <dxo-selection selectAllMode=\\\"{{pageSelect}}\\\" mode=\\\"multiple\\\">\\r\\n  </dxo-selection>\\r\\n  <!-- <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"vat\\\"></dxo-state-storing> -->\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"multiple\\\"></dxo-sorting>\\r\\n  <dxo-selection mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <dxo-filter-row [visible]=\\\"true\\\" showAllText='{{_translate.CONTROLL.COMBO.all}}'></dxo-filter-row>\\r\\n  <!-- Số hóa đơn -->\\r\\n  <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"bill_number\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n    alignment=\\\"center\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"1\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Mã số đơn hàng -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_the_order\\\" dataField=\\\"the_order\\\"\\r\\n    caption=\\\"{{ 'CONTROLL.LABEL.the_order_no_code' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_phieu}}\\\"\\r\\n    alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Số phiếu -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_recepts_no\\\" dataField=\\\"receipts_no\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.receipts_no' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_phieu}}\\\"\\r\\n    alignment=\\\"left\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Mẫu số, ký hiệu -->\\r\\n  <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Ngày hóa đơn -->\\r\\n  <dxi-column dataField=\\\"bill_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n    format=\\\"dd/MM/yyyy\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"0\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Mã số thuế -->\\r\\n  <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tên khách hàng -->\\r\\n  <dxi-column [filterOperations]=\\\"['contains']\\\" [calculateFilterExpression]=\\\"calculateFilterExpression\\\"\\r\\n    cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\" alignment=\\\"left\\\"\\r\\n    minWidth=\\\"200\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Số đơn vận -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_transport_number_from_product\\\" dataField=\\\"transport_number\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE_DETAILS.transport_number' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.transport_number}}\\\" alignment=\\\"left\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Thành tiền -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_recepts_no\\\" dataField=\\\"amount_string\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE_DETAILS.amount' | translate }}\\\" alignment=\\\"right\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.thanh_tien}}\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tiền thuế -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_recepts_no\\\" dataField=\\\"total_amount_vat_string\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE_DETAILS.amount_vat' | translate }}\\\" alignment=\\\"right\\\"\\r\\n    headerCellTemplate=\\\"titleHeaderTemplate\\\" minWidth=\\\"{{_translate.GRID_WIDTH.thanh_tien}}\\\">.\\r\\n  </dxi-column>\\r\\n  <!-- Tổng tiền -->\\r\\n  <dxi-column dataField=\\\"total_payment_string\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" alignment=\\\"right\\\"\\r\\n    headerCellTemplate=\\\"titleHeaderTemplate\\\" minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Trạng thái thanh toán -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.check_payment_status\\\" cellTemplate=\\\"viewPaymentStatus\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.payment_status' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\"\\r\\n    alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Trạng thái gửi CQT -->\\r\\n  <dxi-column *ngIf=\\\"isTT78\\\" cellTemplate=\\\"statusSendTax\\\" caption=\\\"Trạng thái gửi CQT\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\" alignment=\\\"center\\\" dataField=\\\"status\\\">\\r\\n    <dxo-lookup [dataSource]=\\\"trangThaiGuiCQTStatus\\\" valueExpr=\\\"code\\\" [displayExpr]=\\\"displayFunction\\\"\\r\\n      width=\\\"120\\\"></dxo-lookup>\\r\\n  </dxi-column>\\r\\n  <!-- Email, trạng thái hóa đơn -->\\r\\n  <dxi-column cellTemplate=\\\"actionEmail\\\" caption=\\\"{{ 'GRID.INVOICE.send_email_status' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Chức năng -->\\r\\n  <dxi-column cellTemplate=\\\"actionIcon\\\" minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong}}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p>{{ d.data.template_code }}</p>\\r\\n    <p>{{ d.data.bill_series }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n    <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.bill_number }}<span\\r\\n      *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n    <p>{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'actionEmail'\\\">\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status !='GIU_SO'\\\" class=\\\"chua-gui-khach-hang gach-chan\\\"\\r\\n      (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.un_sent' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'GUI_LOI'\\\" style=\\\"color: red;\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.send_mail_error' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status =='GIU_SO'\\\" class=\\\"cho-ky\\\"\\r\\n      (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_sign' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_GUI'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_it' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_NHAN'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.received' | translate }}</a>\\r\\n    <p *ngIf=\\\"!d.data.send_email_status\\\" href=\\\"javascript:void(0)\\\">{{ trangthaihoadon(d.data) }} <a\\r\\n        *ngIf=\\\"trangthaihoadon(d.data) == 'Lỗi ký HD' || trangthaihoadon(d.data) == 'Signed error'\\\" class=\\\"gach-chan\\\"\\r\\n        (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">({{ 'GRID.INVOICE.re_sign' | translate }})</a></p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    <a *ngIf=\\\"d.data.status == 'DA_XUAT'\\\" href=\\\"javascript:void(0)\\\">Đã xuất</a>\\r\\n    <a *ngIf=\\\"d.data.status == 'KHONG_DU_DK_CAP_MA'\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">Không đủ\\r\\n      ĐK cấp mã</a>\\r\\n    <a *ngIf=\\\"d.data.status == 'CHUA_GUI_CQT'\\\" href=\\\"javascript:void(0)\\\">Chưa gửi CQT</a>\\r\\n    <a *ngIf=\\\"d.data.status == 'DA_GUI_CQT'\\\" href=\\\"javascript:void(0)\\\">Đã gửi CQT</a>\\r\\n    <a *ngIf=\\\"d.data.status == 'DA_TIEP_NHAN'\\\" href=\\\"javascript:void(0)\\\">CQT đã tiếp nhận</a>\\r\\n    <a *ngIf=\\\"d.data.status == 'KHONG_HOP_LE'\\\" href=\\\"javascript:void(0)\\\" style=\\\"color: red;\\\"\\r\\n      (click)=\\\"LydoKTiepNhan(d.data)\\\">CQT kiểm tra không hợp lệ </a>\\r\\n  </div>\\r\\n  <!-- Trạng thái thanh toán -->\\r\\n  <div *dxTemplate=\\\"let d of 'viewPaymentStatus'\\\">\\r\\n    <a href=\\\"javascript:void(0)\\\">{{ trangthaithanhtoan(d.data) }}</a>\\r\\n  </div>\\r\\n  <!--  -->\\r\\n  <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.view_invoice}}\\\" class=\\\"xemIcon actionIcon\\\" (click)=\\\"view(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.edit}}\\\" class=\\\"suaIcon actionIcon\\\" (click)=\\\"edit(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.delete}}\\\" class=\\\"xoaIcon actionIcon\\\" (click)=\\\"delete(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <div class=\\\"dropdown\\\">\\r\\n      <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" class=\\\"morongIcon actionIcon\\\" (click)=\\\"myFunction(d.data.id)\\\"\\r\\n        href=\\\"javascript:void(0)\\\"></a>\\r\\n      <div [id]=\\\"d.data.id\\\" class=\\\"dropdown-content\\\"\\r\\n        [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n        <a (click)=\\\"copy(d.data)\\\" href=\\\"javascript:void(0)\\\">{{'CONTROLL.BUTTON.copy' | translate}}\\r\\n          <i [class]=\\\"_translate.ICONS.copy\\\"></i></a>\\r\\n        <a (click)=\\\"inhoadon(d.data)\\\" href=\\\"javascript:void(0)\\\">In phiếu tính tiền\\r\\n          <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n        <a (click)=\\\"inChuyenDoi(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.print_conversion' | translate }}\\r\\n          <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n    <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{info.column.caption}} </p>\\r\\n  </div>\\r\\n  <dxo-summary>\\r\\n    <dxi-total-item summaryType=\\\"custom\\\" cssClass=\\\"dxi-total-payment-total_payment_string\\\" [customizeText]=\\\"customizeText\\\" showInColumn=\\\"total_payment_string\\\">\\r\\n    </dxi-total-item>\\r\\n  </dxo-summary>\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"configs.system_parameter.number_row_per_page\\\"></dxo-paging>\\r\\n  <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 35, 50, 100]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n    [showInfo]=\\\"true\\\" infoText=\\\"{{ _translate.DXO_PAGER.page}}\\\">>\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n\\r\\n<iframe id=\\\"preview-iframe-print\\\" width=\\\"0%\\\" height=\\\"0%\\\" style=\\\"margin-left: 9px;height:0px\\\"></iframe>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"200\\\" [showTitle]=\\\"true\\\" title=\\\"IN PHIẾU TÍNH TIỀN\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopupIn\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div class=\\\"dx-field\\\">\\r\\n      <div class=\\\"dx-field-label\\\">Chọn mẫu: </div>\\r\\n      <div class=\\\"dx-field-value\\\">\\r\\n        <dx-select-box displayExpr=\\\"name\\\" valueExpr=\\\"id\\\" [items]=\\\"listTemplate\\\" [value]=\\\"listTemplate[0].id\\\"\\r\\n          (onValueChanged)=\\\"onPrintTempChanged($event)\\\">\\r\\n        </dx-select-box>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"dx-field\\\">\\r\\n      Số lượng phiếu tính tiền : {{numberPrint}}\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"Quay lại\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"print()\\\" text=\\\"In phiếu tính tiền\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n<app-download-pdf></app-download-pdf>\"","module.exports = \".chua-gui-khach-hang{color:red}.cho-ky{color:#008b8b}.gach-chan{text-decoration:underline}.search-section{padding-bottom:15px}.button-panel{margin-top:30px}.mainmenubtn{background-color:red;color:white;border:none;cursor:pointer;padding:20px;margin-top:20px}.last-drodown{bottom:30px}.small-grid{position:fixed  !important;right:39px !important}::ng-deep #gridContainerVat .dx-cell-focus-disabled{overflow:visible !important}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}::ng-deep .view-bill{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { Helper, VChanggeMoneyService, VPreviewInvService, VStringService } from '@core/index';\r\nimport { Library } from '@core/library';\r\nimport { AuthService, SocketService } from '@core/services';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { DxDataGridComponent, DxMenuComponent } from 'devextreme-angular';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { Subscription } from 'rxjs';\r\nimport * as moment from 'moment';\r\nimport * as _ from 'lodash';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { SendDataForTaxComponent, SendListEmailComponent, ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { SendInvoicesComponent } from '../send-invoices/send-invoices.component';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport QRCode from 'qrcode';\r\nimport { ImportInvoicesDtComponent } from '../import-invoices-dt/import-invoices-dt.component';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { SendInvoiceToTaxComponent } from '../send-invoice-to-tax/send-invoice-to-tax.component';\r\nimport { DownloadPdfComponent } from '@shared/components/download-pdf/download-pdf.component';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\ndeclare var $: any;\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  @ViewChild(DxMenuComponent) dxMenu: DxMenuComponent;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @ViewChild('expandMenu') expandMenu;\r\n  @ViewChild(DownloadPdfComponent) downloadPdf: DownloadPdfComponent;\r\n\r\n  dataSource: any;\r\n  selectedRows: Array<any> = [];\r\n  selectedItems: Array<any> = [];\r\n  bsModalRef: BsModalRef;\r\n  bsModalImportRef: BsModalRef;\r\n  bsModalSignRef: BsModalRef;\r\n  listDM: any;\r\n  pageSize: any;\r\n  loaiHoaDon: string;\r\n  test = true;\r\n  isAccessExportInv = true;\r\n  invoice_releases = [];\r\n  templatesTT78 = [];\r\n  infoDangKy: any = {};\r\n  paramSearch: any;\r\n  _language: string;\r\n  _translate: any;\r\n  checkSubmit: any;\r\n  extras = [];\r\n  numberPrint: number = 0;\r\n  data_extras_invoice_buy = [];\r\n  extend = [];\r\n  trangThaiGuiCQTStatus = [\r\n\r\n  ];\r\n  private wasInside = false;\r\n  select: any = {};\r\n  configs: any = {};\r\n  disEditMulti = true;\r\n  hoaDonImportChoXuat: any;\r\n  footerSum = {\r\n    summary: '',\r\n    summary_deduction: '',\r\n  };\r\n  objPXK = {};\r\n  clickCurent = '';\r\n  dataInfor: any;\r\n  isSearchUI: boolean;\r\n  isListHeader: boolean;\r\n  dataAddInvoiceBuy = [];\r\n  curentUser: any = {};\r\n  taxCodeThueHCM = [\"0102519041-555\"];\r\n  pageSelect: any;\r\n  isTT78: boolean = false;\r\n  isExistFormRelease: boolean = false;\r\n  currentUser: any;\r\n  isEFY: boolean = false;\r\n  ioSignature: Subscription;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n  invoices = [];\r\n  formatter: any;\r\n  isExportFailed: boolean = false;\r\n  province_name: any;\r\n  listTemplate: any = [];\r\n  reportHeight: any;\r\n  showPopupIn = false;\r\n  arrHtml: any;\r\n  iframe: any\r\n  qrcode: any;\r\n  isPrint = false;\r\n  template_id: any;\r\n  trRow: any;\r\n  dataPrint: any;\r\n  arrColumns = [\r\n    {\r\n      name: 'columnSTT',\r\n      value: 'valueSTT',\r\n      class: 'center',\r\n      height: \"25px\",\r\n      title: \"Số thứ tự\",\r\n      content: \"1\"\r\n    },\r\n    {\r\n      name: 'name-1a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueMaHangHoa',\r\n      class: 'name-1a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Mã hàng\",\r\n      content: \"MH001\"\r\n    },\r\n    {\r\n      name: 'columnTenHangHoa',\r\n      value: 'valueTenHangHoa',\r\n      class: 'columnTenHangHoa',\r\n      height: \"25px\",\r\n      title: \"Tên hàng hóa\",\r\n      content: \"Hóa đơn điện tử\"\r\n    },\r\n    {\r\n      name: 'columnSoMay',\r\n      value: 'valueSoMay',\r\n      class: 'columnSoMay',\r\n      height: \"25px\",\r\n      title: \"Số máy\",\r\n      content: \"Q12P\"\r\n    },\r\n    {\r\n      name: 'columnSoKhung',\r\n      value: 'valueSoKhung',\r\n      class: 'columnSoKhung',\r\n      height: \"25px\",\r\n      title: \"Số khung\",\r\n      content: \"K123K\"\r\n    },\r\n    {\r\n      name: 'name-2a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueSolo',\r\n      class: 'name-2a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Số lô\",\r\n      content: \"SL001\"\r\n    },\r\n    {\r\n      name: 'name-3a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueHanDung',\r\n      class: 'name-3a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Hạn dùng\",\r\n      content: \"60 ngày\"\r\n    },\r\n    {\r\n      name: 'name-4a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueNuocSx',\r\n      class: 'name-4a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Nước sản xuất\",\r\n      content: \"Việt Nam\"\r\n    },\r\n    {\r\n      name: 'columnDonViTinh',\r\n      value: 'valueDonViTinh',\r\n      class: 'center',\r\n      height: \"25px\",\r\n      title: \"Đơn vị tính\",\r\n      content: \"Chiếc\"\r\n    },\r\n    {\r\n      name: 'columnSoLuong',\r\n      value: 'valueSoLuong',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Số lượng\",\r\n      content: \"1\"\r\n    },\r\n    {\r\n      name: 'columnDonGia',\r\n      value: 'valueDonGia',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Đơn giá\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnTienCK',\r\n      value: 'valueTienCK',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Tiền chiết khấu\",\r\n      content: \"\"\r\n    },\r\n    {\r\n      name: 'columnThanhTienChuaCK',\r\n      value: 'valueThanhTienChuaCK',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Thành tiền chưa chiết khấu\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnThanhTien',\r\n      value: 'valueThanhTien',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Thành tiền\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnThueSuatGTGT',\r\n      value: 'valueThueSuatGTGT',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thuế suất GTGT\",\r\n      content: \"0\"\r\n    },\r\n    {\r\n      name: 'columnTienThueGTGT',\r\n      value: 'valueTienThueGTGT',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Tiền thuế GTGT\",\r\n      content: \"0\"\r\n    },\r\n    {\r\n      name: 'columnThanhTienSauThue',\r\n      value: 'valueThanhTienSauThue',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Thành tiền sau thuế\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnMaSo',\r\n      value: 'valueMaSo',\r\n      class: 'columnMaSo',\r\n      height: \"25px\",\r\n      title: \"Mã số\",\r\n      content: \"MS001\"\r\n    },\r\n    {\r\n      name: 'columnThucXuat',\r\n      value: 'valueThucXuat',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thực xuất\",\r\n      content: \"10\"\r\n    },\r\n    {\r\n      name: 'columnThucNhap',\r\n      value: 'valueThucNhap',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thực nhập\",\r\n      content: \"10\"\r\n    },\r\n    {\r\n      name: 'columnThueKhac',\r\n      value: 'valueThueKhac',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thuế khác\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnPhiKhac',\r\n      value: 'valuePhiKhac',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Phí khác\",\r\n      content: \"1.000.000\"\r\n    },\r\n  ];\r\n  objStatusBtn = {}\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    private authService: AuthService,\r\n    private billService: BillService,\r\n    private modalService: BsModalService,\r\n    private modalImportService: BsModalService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    public translate: TranslateService,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService,\r\n    private templateService: TemplateService,\r\n    private invoiceService: InvoiceService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    this.curentUser = this.authService.getCurrentUser();\r\n    translate.use(this._language);\r\n    this.objPXK = {\r\n      id: 'IN_PXK',\r\n      name: this._translate.CONTROLL.BUTTON.delivery_bill_print,\r\n      icon: this._translate.ICONS.print\r\n    }\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.extend,\r\n      items: [\r\n        {\r\n          id: 'NAP_HD_TU_EXCEL_DT',\r\n          name: this._translate.THONG_TIN.nap_hd_mtt_tu_excel,\r\n          icon: this._translate.ICONS.excel\r\n        },\r\n        {\r\n          id: 'SUA',\r\n          name: this._translate.CONTROLL.BUTTON.edit,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n        {\r\n          id: 'XOA',\r\n          name: this._translate.CONTROLL.BUTTON.delete,\r\n          icon: this._translate.ICONS.delete\r\n        },\r\n        {\r\n          id: 'XEM',\r\n          name: this._translate.CONTROLL.BUTTON.view_invoice,\r\n          icon: this._translate.ICONS.view\r\n        },\r\n        {\r\n          id: 'GUI_BEN_MUA',\r\n          name: this._translate.CONTROLL.LABEL.send_invoice,\r\n          icon: this._translate.ICONS.send_email\r\n        },\r\n        {\r\n          id: 'GUI_HD_CQT',\r\n          name: this._translate.THONG_TIN.gui_hoa_don_den_cqt,\r\n          icon: this._translate.ICONS.send_email\r\n        },\r\n        {\r\n          id: 'IN_CHUYEN_DOI',\r\n          name: this._translate.CONTROLL.BUTTON.print_conversion,\r\n          icon: this._translate.ICONS.print\r\n        },\r\n        {\r\n          id: 'TAI_HD_PDF',\r\n          name: this._translate.CONTROLL.BUTTON.tai_hd_pdf,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: \"TAI_HD_XML\",\r\n          name: this._translate.CONTROLL.BUTTON.tai_hd_xml,\r\n          icon: this._translate.ICONS.xml\r\n        },\r\n\r\n      ]\r\n    }];\r\n    this.data_extras_invoice_buy = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.LABEL.export_data,\r\n      items: [\r\n        {\r\n          id: 'LIST_INVOICE_BUY',\r\n          name: this._translate.CONTROLL.LABEL.list_invoice_buy,\r\n          icon: this._translate.ICONS.excel\r\n        },\r\n        {\r\n          id: 'DETAILS_OF_EACH_GOODS_AND_SERVICE',\r\n          name: this._translate.CONTROLL.LABEL.details_of_each_goods_and_service,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n      ]\r\n    }];\r\n    this.dataAddInvoiceBuy = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.add,\r\n      items: [\r\n        {\r\n          id: 'ADD_ONE_INVOICE',\r\n          name: this._translate.CONTROLL.LABEL.add_one_invoice,\r\n          icon: this._translate.ICONS.add_new\r\n        },\r\n        {\r\n          id: 'ADD_MULTIPLE_INVOICE',\r\n          name: this._translate.CONTROLL.LABEL.add_multiple_invoice,\r\n          icon: this._translate.ICONS.add_new\r\n        },\r\n      ]\r\n    }];\r\n    this.extend = [{\r\n      id: '1',\r\n      name: '',\r\n      items: [\r\n        {\r\n          id: 'INCHUYENDOI',\r\n          name: this._translate.CONTROLL.BUTTON.print_conversion,\r\n          icon: 'assets/img/icons/In.png'\r\n        },\r\n      ]\r\n    }];\r\n  }\r\n  ngOnInit() {\r\n    this.handleUI(this.route.snapshot.data.type);\r\n    this.configs = this.authService.getConfigs();\r\n    this.billService.isCopy = false;\r\n    this.billService.getTemp(this.route.snapshot.data.type).subscribe(res => {\r\n      if (res.data.templates.length) {\r\n        this.template_id = res.data.templates[0].id;\r\n        this.listTemplate = res.data.templates.map((temp) => {\r\n          return {\r\n            ...temp,\r\n            name: temp.template_code + temp.invoice_series\r\n          }\r\n        })\r\n      }\r\n    })\r\n    if (this.curentUser.account.tax_code == \"0102519041\")\r\n      this.isEFY = true;\r\n    if (this.configs.system_parameter.select_invoice_current_page)\r\n      this.pageSelect = \"page\";\r\n    else\r\n      this.pageSelect = \"allPages\";\r\n    this.connectWebsocket();\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (this.currentUser && this.currentUser.account && this.currentUser.account.van_account_info) {\r\n      this.province_name = this.currentUser.account.van_account_info.city_name;\r\n    }\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    const listpermissions = this.currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n    this.trangThaiGuiCQTStatus = VSelectBoxService._trangThaiGuiCQT(this._translate);\r\n    if (this.currentUser.is_convert_TT78) {\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      if (this.infoDangKy && this.infoDangKy.id) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n          this.isTT78 = true;\r\n          let infoFormRelease = this.authService.getInfoFormRelease();\r\n          if (infoFormRelease && infoFormRelease.invoice_releases && infoFormRelease.invoice_releases.length > 0) {\r\n            let invoicesReleases = infoFormRelease.invoice_releases.filter(p => (parseInt(p.amount) - parseInt(p.used_amount)) > 0);\r\n            if (invoicesReleases && invoicesReleases.length > 0)\r\n              this.isExistFormRelease = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // if (localStorage.getItem('new_member')) {\r\n      //   Library.notify(this._translate.NOTIFY.you_must_create_a_release_notice_before_invoicing, 'warning');\r\n      // }\r\n    }\r\n  }\r\n\r\n  handleUI(value) {\r\n    this.loaiHoaDon = value;\r\n  }\r\n  /* Xử lý sự kiện click phần mở rộng của từng hóa đơn*/\r\n  myFunction(id) {\r\n    if (this.clickCurent !== '' && this.clickCurent !== id) {\r\n      let valueCurrent = document.getElementById(this.clickCurent);\r\n      if (!valueCurrent)\r\n        document.getElementById(id).classList.toggle('show');\r\n      else {\r\n        document.getElementById(this.clickCurent).classList.remove('show');\r\n        document.getElementById(id).classList.toggle('show');\r\n      }\r\n    }\r\n    else\r\n      document.getElementById(id).classList.toggle('show');\r\n    this.clickCurent = id;\r\n\r\n  }\r\n  loadList(params?) {\r\n    this.dataSource = {};\r\n    const ref = {};\r\n    if (params) {\r\n      const _lst = this.billService.getAll(this.loaiHoaDon, params);\r\n      this.dataSource.store = _lst;\r\n      this.footerSum = {\r\n        summary: _lst.summary,\r\n        summary_deduction: _lst.summary_deduction,\r\n      };\r\n    } else {\r\n      this.dataSource.store = this.billService.getAll(this.loaiHoaDon, params);\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.bill_number) {\r\n            if (e.data.send_department_status == \"DA_GUI_CQT\")\r\n              e.rowElement.style.color = '#008B8B';\r\n            else if (e.data.send_department_status == \"DA_CAP\")\r\n              e.rowElement.style.color = 'black';\r\n            else if (e.data.send_department_status == \"DA_TIEP_NHAN\")\r\n              e.rowElement.style.color = 'black';\r\n            else\r\n              e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type === '2' || e.data.adjustment_type === '7' || e.data.adjustment_type === '6') {\r\n        const eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadList(e);\r\n  }\r\n\r\n  checkDisableButton() {\r\n    if (this.selectedItems.length) {\r\n      if (this.selectedItems[0].status === 'DA_XUAT') {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.bill_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // Chọn đối tượng trong màn hình danh sách\r\n  selectionChanged(data: any) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    this.disEditMulti = true;\r\n    this.selectedItems = data.selectedRowsData;\r\n  }\r\n\r\n  async lapHoaDon() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.maytinhtien);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.loaiHoaDon === '01GTKT')\r\n    // this.router.navigate(['system/vat-invoice/create'], { queryParams: { code: this.loaiHoaDon } });\r\n    {\r\n      this.router.navigate(['system/bills-invoice-vat/create']);\r\n    } else {\r\n      this.router.navigate(['system/bills-invoice-sale/create']);\r\n    }\r\n  }\r\n\r\n  async copy(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.maytinhtien);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    const row = data ? data : this.selectedItems[0];\r\n    let sub = this.billService.show(row.id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        if (rs.data.bill) {\r\n          rs.data.bill.id = null;\r\n          rs.data.bill.adjustment_type = '1';\r\n          rs.data.bill.adjustment_object = null;\r\n          rs.data.bill.adjustment_form = null;\r\n          rs.data.bill.bill_number = null;\r\n          rs.data.bill.bill_date = null;\r\n          rs.data.bill.status = null;\r\n          rs.data.bill.updated_at = null;\r\n          rs.data.bill.bill_order = null;\r\n          rs.data.bill.status_order = null;\r\n          rs.data.bill.doc_relate_date = null;\r\n          rs.data.bill.doc_relate_symbol = null;\r\n          rs.data.bill.note_view_on_bill = null;\r\n          rs.data.bill.send_department_status = null;\r\n          rs.data.bill.extend_json_bill = null;\r\n          rs.data.bill.is_outside_process = false;\r\n          rs.data.bill.other_id = null;\r\n          rs.data.bill.verify_code = null;\r\n          rs.data.bill.auto_value = false;\r\n          rs.data.bill.destroy_reason = null;\r\n          rs.data.bill.destroy_date = null;\r\n          rs.data.bill.origin_id = null;\r\n          if (rs.data.bill.bill_options && rs.data.bill.bill_options.length > 0) {\r\n            rs.data.bill.bill_options.forEach(item => {\r\n              delete item['id'];\r\n              delete item['bill_id'];\r\n            });\r\n          }\r\n          this.billService.data = rs.data.bill;\r\n          this.billService.isCopy = true;\r\n        }\r\n        if (this.loaiHoaDon === '01GTKT') {\r\n          this.router.navigate(['system/bills-invoice-vat/create']);\r\n        } else {\r\n          this.router.navigate(['system/bills-invoice-sale/create']);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  async edit(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.maytinhtien);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    let rowData = null;\r\n    if (data) {\r\n      if (VStringService._getValueToString(data.status) == sEnum.statusInv.DaXuat)\r\n        Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n      else {\r\n        if (VStringService._getValueToString(data.status) == sEnum.statusInv.GhiTam && VStringService._getValueToString(data.send_department_status) == 'KHONG_DU_DK_CAP_MA')\r\n          Library.notify(\"Không sửa được hóa đơn không đủ điều kiện cấp mã\", 'error');\r\n        else\r\n          rowData = data;\r\n      }\r\n    }\r\n    else {\r\n      if (this.selectedItems.length > 0) {\r\n        if (this.selectedItems.length == 1)\r\n          rowData = this.selectedItems[0];\r\n        else {\r\n          /* Không cho sửa hóa đơn đã xuất */\r\n          let oInvoice = this.selectedItems.filter(p => p.send_department_status)[0];\r\n          let _hdDaXuat = this.selectedItems.filter(p => p.status != sEnum.statusInv.GhiTam)[0];\r\n          if (_hdDaXuat || oInvoice) {\r\n            Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n            return;\r\n          }\r\n          /* Hóa đơn sửa phải cùng mẫu */\r\n          const isCheckAllEquals = this.selectedItems.every(item => item.template_id == this.selectedItems[0].template_id);\r\n          if (!isCheckAllEquals) {\r\n            Library.notify(this._translate.THONG_TIN.chon_hoa_don_cung_mau, 'error');\r\n            return;\r\n          }\r\n          /* Hóa đơn sửa phải là hóa đơn gốc */\r\n          const isExistOther = this.selectedItems.find(item => item.adjustment_type != 1);\r\n          if (isExistOther) {\r\n            Library.notify(this._translate.THONG_TIN.cho_phep_sua_hoa_don_goc, 'error');\r\n            return;\r\n          }\r\n          /* Hóa đơn sửa phải cùng trạng thái (ghi tạm hoặc giữ số) */\r\n          let arrStatusInv = [\"GIU_SO\", \"GHI_TAM\"];\r\n          let arrStatusItem = this.selectedItems.map((obj: any) => obj.status);\r\n          let result = arrStatusInv.every(val => arrStatusItem.includes(val));\r\n          if (result) {\r\n            Library.notify(this._translate.NOTIFY.same_status_invoice, 'error');\r\n            return;\r\n          }\r\n\r\n          this.openImportForm(rowData);\r\n        }\r\n      }\r\n    }\r\n    if (rowData) {\r\n      if (rowData.adjustment_type === '5') {\r\n        this.router.navigate([`/system/handle-bills/edit-adjust/${rowData.id}`]);\r\n      } else if (rowData.adjustment_type === '3') {\r\n        this.router.navigate([`/system/handle-bills/edit-replace/${rowData.id}`]);\r\n      }\r\n      else {\r\n        if (this.loaiHoaDon === '01GTKT') {\r\n          this.router.navigate([`system/bills-invoice-vat/${VStringService._getValueToString(rowData.id)}`]);\r\n        } else {\r\n          this.router.navigate([`system/bills-invoice-sale/${VStringService._getValueToString(rowData.id)}`]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async openImportForm(data) {\r\n    Library.showloading();\r\n    let _lst = [];\r\n    if (data) {\r\n      _lst.push(data.id);\r\n    } else {\r\n      _lst = this.selectedRows;\r\n    }\r\n    const subRoute = this.billService.getEditImportInvoice(_lst, '', this.loaiHoaDon).subscribe((res: any) => {\r\n      // Hàng hóa dịch vụ\r\n      setTimeout(() => {\r\n        this.select.products = res[0].data.products;\r\n        this.hoaDonImportChoXuat = res[1].data.bills.sort((itemA, itemB) => {\r\n          return moment(itemA.created_at, 'YYYY-MM-DD HH:mm:ss').valueOf() - moment(itemB.created_at, 'YYYY-MM-DD HH:mm:ss').valueOf();\r\n        });\r\n        this.select.unit_codes = res[2].data.DM_DON_VI_TINH;\r\n        this.select.select_provisions_on_accounts = res[2].data.DM_DINH_KHOAN;\r\n        this.select.payment_method_names = res[2].data.DM_HINH_THUC_THANH_TOAN;\r\n        this.select.vats = res[2].data.DM_TY_LE_VAT;\r\n        this.templatesTT78 = Helper.convertTemplatesToBillResolver(res[3]);\r\n        this.hoaDonImportChoXuat.forEach(invoice => {\r\n          invoice.bill_products.forEach(row => {\r\n            if (row.product_code) {\r\n              const _obj = this.select.products.filter(p => p.code === row.product_code)[0];\r\n              if (!_obj) {\r\n                const _objPush = {\r\n                  code: row.product_code,\r\n                  name: row.product_name,\r\n                  mhvth: row.product_code + ': ' + row.product_name,\r\n                };\r\n                this.select.products.push(_objPush);\r\n              }\r\n            }\r\n          });\r\n        });\r\n        let search = InvoicesService.getSearchParams(this.route);\r\n        const initialState = {\r\n          isHdGTGT: this.loaiHoaDon === '01GTKT' ? true : false,\r\n          select: this.select,\r\n          hoaDonImportChoXuat: this.hoaDonImportChoXuat,\r\n          templatesTT78: this.templatesTT78,\r\n          infoDangKy: this.infoDangKy,\r\n          search: search\r\n        };\r\n        this.bsModalImportRef = this.modalImportService.show\r\n          (\r\n            ImportInvoicesDtComponent,\r\n            {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-lg full-width',\r\n              initialState\r\n            }\r\n          );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          if (this.bsModalImportRef.content.successSaveItem) {\r\n            this.selectedItems = [];\r\n            this.selectedRows = [];\r\n          }\r\n          this.loadList(this.paramSearch);\r\n          subModal.unsubscribe();\r\n        });\r\n      }, 10);\r\n      Library.hideloading();\r\n    }, (err) => {\r\n    }, () => {\r\n      subRoute.unsubscribe();\r\n    });\r\n  }\r\n\r\n  async editNotSelect(row) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.maytinhtien);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (row.status != 'GHI_TAM') {\r\n      Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n    } else {\r\n      if (row.adjustment_type === '5') {\r\n        this.router.navigate([`/system/handle-bills/edit-adjust/${row.id}`]);\r\n      } else if (row.adjustment_type === '3') {\r\n        this.router.navigate([`/system/handle-bills/edit-replace/${row.id}`]);\r\n      } else {\r\n        if (this.loaiHoaDon === '01GTKT') {\r\n          this.router.navigate([`system/bills-invoice-vat/${VStringService._getValueToString(row.id)}`]);\r\n        } else {\r\n          this.router.navigate([`system/bills-invoice-sale/${VStringService._getValueToString(row.id)}`]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  viewDetailInvoice(data) {\r\n    if (data.adjustment_type === '5') {\r\n      this.router.navigate([`/system/handle-bills/edit-adjust/${data.id}`]);\r\n    } else if (data.adjustment_type === '3') {\r\n      this.router.navigate([`/system/handle-bills/edit-replace/${data.id}`]);\r\n    }\r\n    else {\r\n      if (this.loaiHoaDon === '01GTKT') {\r\n        this.router.navigate([`system/bills-invoice-vat/${VStringService._getValueToString(data.id)}`]);\r\n      } else {\r\n        this.router.navigate([`system/bills-invoice-sale/${VStringService._getValueToString(data.id)}`]);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  async delete(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.maytinhtien);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.selectedItems.length || data) {\r\n      const status = '';\r\n      let ids = '';\r\n      if (data) {\r\n        ids = data.id;\r\n      } else {\r\n        ids = this.selectedRows.join(',');\r\n      }\r\n      const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          Library.showloading();\r\n          this.billService.delete(ids).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n              this.loadList(this.paramSearch);\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => {\r\n          }, () => {\r\n            Library.hideloading();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  giuSo() {\r\n\r\n  }\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n\r\n\r\n  guibenmua(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'DA_XUAT') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      if (this.selectedItems.filter(p => p.bill_number).length === 0) {\r\n        check = false;\r\n      }\r\n    }\r\n\r\n    if (check && (this.selectedItems.length || data)) {\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedItems.filter(p => p.bill_number).map(p => p.id);\r\n      }\r\n      this.billService.layCacHoaDonKySoHangLoat(ids, this.loaiHoaDon).subscribe((rs: any) => {\r\n        if (rs[0].status === 'success') {\r\n          const initialState = {\r\n            isBill: true,\r\n            invoiceList: rs[0].data.bills,\r\n            configs: rs[1].data.configs,\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SendListEmailComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_invoice_selected, 'error');\r\n    }\r\n  }\r\n\r\n  viewAttachFile(data) {\r\n\r\n  }\r\n\r\n  sendInvoice(id) {\r\n    Library.showloading();\r\n    let sub = this.billService.showToSendInvoice(id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.bill,\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  customizeText = (url) => {\r\n    this.invoiceService.handleTotalGrid(url.value, this.objStatusBtn, this.dataGrid);\r\n    return '';\r\n  }\r\n\r\n  kyHangLoat(data?) {\r\n\r\n  }\r\n\r\n  async napHDTuExcelDt() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.maytinhtien);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    Library.showloading();\r\n    let subImport = this.billService.getImportInvoice(this.loaiHoaDon).subscribe((res: any) => {\r\n      this.templatesTT78 = Helper.convertTemplatesToBillResolver(res[2]);\r\n      this.select.products = res[0].data.products;\r\n      this.select.unit_codes = res[1].data.DM_DON_VI_TINH;\r\n      this.select.select_provisions_on_accounts = res[1].data.DM_DINH_KHOAN;\r\n      this.select.payment_method_names = res[1].data.DM_HINH_THUC_THANH_TOAN;\r\n      this.select.vats = res[1].data.DM_TY_LE_VAT;\r\n      let search = InvoicesService.getSearchParams(this.route);\r\n\r\n      const initialState = {\r\n        isHdGTGT: this.loaiHoaDon === '01GTKT' ? true : false,\r\n        select: this.select,\r\n        isAccessExportInv: this.isAccessExportInv,\r\n        templatesTT78: this.templatesTT78,\r\n        infoDangKy: this.infoDangKy,\r\n        search: search\r\n      };\r\n      this.bsModalImportRef = this.modalImportService.show(\r\n        ImportInvoicesDtComponent,\r\n        {\r\n          backdrop: 'static',\r\n          keyboard: false,\r\n          class: 'modal-lg full-width',\r\n          initialState\r\n        }\r\n      );\r\n      const subModal = this.modalImportService.onHide.subscribe(() => {\r\n        if (this.bsModalImportRef.content.successSaveItem) {\r\n          this.selectedItems = [];\r\n          this.selectedRows = [];\r\n        }\r\n        this.loadList(this.paramSearch);\r\n        subModal.unsubscribe();\r\n      });\r\n      Library.hideloading();\r\n    },\r\n      err => { },\r\n      () => { subImport.unsubscribe() }\r\n    );\r\n  }\r\n  inPXK(data) {\r\n\r\n  }\r\n  /* In biên bản trả hàng */\r\n  inBBTraHang(data) {\r\n\r\n  }\r\n  taiHDPdf() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => (p.status == 'DA_TIEP_NHAN' || p.status == sEnum.statusInv.DaXuat || p.status == 'DA_GUI_CQT'));\r\n      if (_lst.length > 0) {\r\n        let ids = _lst.map(e => e.id);\r\n        this.downloadPdf.downloadPdf(ids, 'bills', 'bill', false);\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n  inBBGiaoNhan() {\r\n\r\n  }\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'NAP_HD_TU_EXCEL_DT') {\r\n      this.napHDTuExcelDt();\r\n    } else if (e.itemData.id === 'GIU_SO') {\r\n      this.giuSo();\r\n    } else if (e.itemData.id === 'KY_SO') {\r\n      this.kyHangLoat(null);\r\n    } else if (e.itemData.id === 'SUA') {\r\n      this.edit(null);\r\n    } else if (e.itemData.id === 'XOA') {\r\n      this.delete(null);\r\n    } else if (e.itemData.id === 'XEM') {\r\n      this.view(null);\r\n    } else if (e.itemData.id === 'IN_CHUYEN_DOI') {\r\n      this.inChuyenDoi(null);\r\n    } else if (e.itemData.id === 'GUI_BEN_MUA') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'LIST_INVOICE_BUY') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'DETAILS_OF_EACH_GOODS_AND_SERVICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'ADD_ONE_INVOICE') {\r\n      this.router.navigate(['/system/invoice-buy/create']);\r\n    } else if (e.itemData.id === 'ADD_MULTIPLE_INVOICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'IN_PXK') {\r\n      this.inPXK(null);\r\n    } else if (e.itemData.id == \"TAI_HD_XML\") {\r\n      this.taiHDXml();\r\n    } else if (e.itemData.id == \"TAI_HD_PDF\") {\r\n      this.taiHDPdf();\r\n    } else if (e.itemData.id == \"IN_BB_GIAO_NHAN\") {\r\n      this.inBBGiaoNhan();\r\n    } else if (e.itemData.id === 'GUI_HD_CQT') {\r\n      this.guihoadoncqt();\r\n    }\r\n  }\r\n  LydoKTiepNhan(data) {\r\n    let lstErr = JSON.parse(data.error_content);\r\n    const initialState = {\r\n      lstErr: lstErr,\r\n      notifyType: \"THONG_BAO_LOI_CQT\"\r\n    };\r\n    this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n      backdrop: 'static',\r\n      keyboard: true,\r\n      class: 'modal-lg modal-margin-width',\r\n      initialState\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  /* Kết nối đến socket  */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_viewInvoice') {\r\n        if (data.Status == \"success\") {\r\n\r\n        }\r\n        else if (data.Status == \"error\") {\r\n          const popUp = window.open('about:blank', 'name', 'width=200, height=100');\r\n          if (popUp == null || typeof (popUp) == 'undefined') {\r\n          }\r\n          else\r\n            popUp.close();\r\n          Library.notify(data.Description, 'error');\r\n          this.spinner.hide();\r\n        }\r\n      }\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n  }\r\n  /* Trạng thái thanh toán */\r\n  trangthaithanhtoan(data) {\r\n    if (Number.parseInt(data.bill_number) > 0) {\r\n      if (data.payment_status)\r\n        return \"Đã thanh toán\";\r\n      else\r\n        return \"Chưa thanh toán\";\r\n    }\r\n    else\r\n      return \"\";\r\n  }\r\n\r\n  onContentReady(e) {\r\n    if (e) {\r\n      const dataSource = this.dataGrid.instance.getDataSource();\r\n      this.pageSize = dataSource ? dataSource.items().length : 0;\r\n    }\r\n  }\r\n  taiHDXml() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.bill_number);\r\n      if (_lst.length > 0) {\r\n        let ids = [];\r\n        ids = _lst.map(e => e.id);\r\n        Library.showloading();\r\n        let sub = this.billService.xuatHDXml(ids).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n          } else {\r\n            Library.notify(rs.message, \"error\");\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n  view(data) {\r\n    let is_default_tempplate = true;\r\n    if (this.selectedItems.length > 0 || data) {\r\n      const _lst = this.selectedItems;\r\n      if (_lst.length > 0 || data) {\r\n        if (this.selectedItems.length === 1) {\r\n          this.dataInfor = this.selectedItems[0];\r\n        } else {\r\n          this.dataInfor = data;\r\n        }\r\n        let ids = [];\r\n        if (data) {\r\n          ids.push(data.id);\r\n          if (!VStringService._attemptConvertBool(data.is_default_template))\r\n            is_default_tempplate = false;\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n          let arrDefault = _lst.filter(p => VStringService._attemptConvertBool(p.is_default_template));\r\n          let arrNotDefault = _lst.filter(p => !VStringService._attemptConvertBool(p.is_default_template));\r\n          if (arrDefault.length > 0 && arrNotDefault.length > 0) {\r\n            Library.notify(\"Bạn không thể xem hóa đơn từ phần mềm iHoadon và phần mềm bán hàng cùng lúc\", 'error');\r\n            return;\r\n          }\r\n          else if (arrNotDefault.length > 0)\r\n            is_default_tempplate = false;\r\n        }\r\n        if (is_default_tempplate) {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_hoa_don_mtt_html\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n        else {\r\n          if (this.configs.system_parameter.view_multi_invoice) {\r\n            let data = this.billService.taodulieuXemMau(ids);\r\n            data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n            this.vPreviewInvService.xemMau(data);\r\n          }\r\n          else {\r\n            const initialState = {\r\n              items: ids,\r\n              isXuatHD: false,\r\n              hinhthucxuat: '',\r\n              typeAction: sEnum.typeCode.xem_hoa_don_mtt,\r\n              cssClass: 'modal-xl view-bill'\r\n            };\r\n            this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n          }\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  async inhoadon(data?) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.listTemplate.length > 0) {\r\n      if (this.selectedItems.length > 0 || this.dataPrint || data) {\r\n        if (this.selectedItems.length > 0) {\r\n          this.numberPrint = this.selectedItems.length\r\n          const ghiTam = this.selectedItems.filter(item => !item.bill_number)\r\n          if (ghiTam.length === 0) {\r\n            if (this.listTemplate.length > 1) {\r\n              if (this.isPrint) {\r\n                this.templateService.show(this.template_id).toPromise().then(rs => {\r\n                  if (rs.status == \"success\") {\r\n                    Library.showloading();\r\n                    this.selectedItems.forEach(item => {\r\n                      this.createFormTypeBase64(rs.data.template, item);\r\n                      let html = Base64.encode(this.arrHtml);\r\n                      this.socketService.inFileHtml(() => this.connectWebsocket(), html)\r\n                    })\r\n                    setTimeout(() => {\r\n                      Library.hideloading();\r\n                      this.dataGrid.instance.clearSelection();\r\n                    }, 1000);\r\n                  } else {\r\n                    return null;\r\n                  }\r\n                });\r\n              } else {\r\n                this.showPopupIn = true;\r\n              }\r\n            } else {\r\n              this.templateService.show(this.listTemplate[0].id).toPromise().then(rs => {\r\n                if (rs.status == \"success\") {\r\n                  Library.showloading();\r\n                  this.selectedItems.forEach(item => {\r\n                    this.createFormTypeBase64(rs.data.template, item);\r\n                    let html = Base64.encode(this.arrHtml);\r\n                    this.socketService.inFileHtml(() => this.connectWebsocket(), html)\r\n                  })\r\n                  setTimeout(() => {\r\n                    Library.hideloading();\r\n                    this.dataGrid.instance.clearSelection();\r\n                  }, 1000);\r\n                } else {\r\n                  return null;\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            Library.notify('Vui lòng chọn hóa đơn đã xuất', 'error')\r\n          }\r\n        } else {\r\n          this.numberPrint = 1\r\n          if (data) {\r\n            if (data.bill_number) {\r\n              if (this.listTemplate.length > 1) {\r\n                if (this.isPrint) {\r\n                  this.templateService.show(this.template_id).toPromise().then(rs => {\r\n                    if (rs.status == \"success\") {\r\n                      Library.showloading();\r\n                      this.createFormTypeBase64(rs.data.template, data);\r\n                      let html = Base64.encode(this.arrHtml);\r\n                      this.socketService.inFileHtml(() => this.connectWebsocket(), html)\r\n                      setTimeout(() => {\r\n                        Library.hideloading();\r\n                        this.dataGrid.instance.clearSelection();\r\n                        this.isPrint = false;\r\n                      }, 1000);\r\n                    } else {\r\n                      return null;\r\n                    }\r\n                  });\r\n                } else {\r\n                  this.showPopupIn = true;\r\n                  this.dataPrint = data;\r\n                }\r\n              } else {\r\n                this.templateService.show(this.listTemplate[0].id).toPromise().then(rs => {\r\n                  if (rs.status == \"success\") {\r\n                    Library.showloading();\r\n                    this.createFormTypeBase64(rs.data.template, data);\r\n                    let html = Base64.encode(this.arrHtml);\r\n                    this.socketService.inFileHtml(() => this.connectWebsocket(), html)\r\n                    setTimeout(() => {\r\n                      Library.hideloading();\r\n                      this.dataGrid.instance.clearSelection();\r\n                    }, 1000);\r\n                  } else {\r\n                    return null;\r\n                  }\r\n                });\r\n              }\r\n            } else {\r\n              Library.notify('Vui lòng chọn hóa đơn đã xuất', 'error')\r\n            }\r\n          } else {\r\n            if (this.isPrint) {\r\n              this.templateService.show(this.template_id).toPromise().then(rs => {\r\n                if (rs.status == \"success\") {\r\n                  Library.showloading();\r\n                  this.createFormTypeBase64(rs.data.template, this.dataPrint);\r\n                  let html = Base64.encode(this.arrHtml);\r\n                  this.socketService.inFileHtml(() => this.connectWebsocket(), html)\r\n                  setTimeout(() => {\r\n                    Library.hideloading();\r\n                    this.dataGrid.instance.clearSelection();\r\n                    this.dataPrint = null;\r\n                  }, 1000);\r\n                } else {\r\n                  return null;\r\n                }\r\n              });\r\n            } else {\r\n              this.showPopupIn = true;\r\n              this.dataPrint = data;\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        Library.notify('Chưa chọn bản ghi nào', 'error')\r\n      }\r\n    } else {\r\n      Library.notify('Chưa có mẫu phiếu tính tiền', 'error')\r\n    }\r\n  }\r\n  huy() {\r\n    this.showPopupIn = false;\r\n  }\r\n  createFormTypeBase64(template, item) {\r\n    let raw_file_Decode = Base64.decode(template.raw_file);\r\n    let raw_file_Parse = JSON.parse(raw_file_Decode);\r\n    let htmlBefore = raw_file_Parse.html + \"</html>\";\r\n    let watermark_image_default = raw_file_Parse.watermark_image_default;\r\n    let watermark_image = raw_file_Parse.watermark_image;\r\n    let countRow = template.number_of_row;\r\n    let arrayHtml = \"\";\r\n    let heightRow = \"\";\r\n    switch (template.paper_size) {\r\n      case sEnum.paperSizes.A4Doc:\r\n        heightRow = \"25px;\";\r\n        break;\r\n      case sEnum.paperSizes.A4Ngang:\r\n        heightRow = \"25px;\";\r\n        break;\r\n      case sEnum.paperSizes.A5Ngang:\r\n        heightRow = \"18px;\";\r\n        this.reportHeight = \"500px\";\r\n        break;\r\n      default:\r\n        heightRow = \"25px;\";\r\n        break;\r\n    }\r\n    let _index = 0;\r\n    this.iframe = document.getElementById('preview-iframe-print');\r\n    this.iframe.contentDocument.open(\"text/html\", \"replace\");\r\n    this.iframe.contentDocument.write(htmlBefore);\r\n    this.iframe.contentDocument.close();\r\n    this.generateQRCode(item.bill_number, item.verify_code);\r\n    _index++;\r\n    //////// Thêm ảnh khung\r\n    $(\"#preview-iframe-print\").contents().find(\".bg-template-default\").css('background-image', 'url(data:image/' + \"jpg\" + ';base64,' + watermark_image_default + ')').css('display', 'block');\r\n    // qrcode\r\n    $(\"#preview-iframe-print\").contents().find(\".qrcode\").css('background-image', 'url(' + \"\" + '' + this.qrcode + ')').css('display', 'block');\r\n    //////// Thêm ảnh  nền\r\n    $(\"#preview-iframe-print\").contents().find(\".bg-template-parent\").css('display', 'block');\r\n    $(\"#preview-iframe-print\").contents().find(\".bg-template-parent\").find(\".bg-template\").css('background-image', 'url(data:image/' + \"jpg\" + ';base64,' + watermark_image + ')').css('display', 'block');\r\n    //////// Footer\r\n    $(\"#preview-iframe-print\").contents().find(\".report-footer\").css({ display: 'block' });\r\n    /////Fill dữ liệu vào hóa đơn\r\n    // Ngày hóa đơn\r\n    let a: any = moment();\r\n    let invDate: any;\r\n    if (item.bill_date)\r\n      invDate = moment(item.bill_date);\r\n    else\r\n      invDate = moment();\r\n    let yearInv = invDate.year();\r\n    let monthInv = invDate.month() < 12 ? invDate.month() + 1 : 1\r\n    let dayInv = invDate.date();\r\n    if ($(\"#preview-iframe-print\").contents().find(\".NgayHD\")[0])\r\n      $('#preview-iframe-print').contents().find(\".NgayHD\").html(dayInv);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".ThangHD\")[0])\r\n      $('#preview-iframe-print').contents().find(\".ThangHD\").html(monthInv);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".NamHD\")[0])\r\n      $('#preview-iframe-print').contents().find(\".NamHD\").html(yearInv);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".number-form\")[0])\r\n      $('#preview-iframe-print').contents().find(\".number-form\").html(template.template_code);\r\n    if ($(\"#preview-iframe-print\").contents().find(\".symbol\")[0])\r\n      $('#preview-iframe-print').contents().find(\".symbol\").html(template.invoice_series);\r\n    if ($('#preview-iframe-print').contents().find(\".symbol-number-form\")[0])\r\n      $('#preview-iframe-print').contents().find(\".symbol-number-form\").html(template.template_code + template.invoice_series.toUpperCase());\r\n    if ($(\"#preview-iframe-print\").contents().find(\".invoice-number\")[0] && item.bill_number)\r\n      $('#preview-iframe-print').contents().find(\".invoice-number\").html(item.bill_number);\r\n    else\r\n      $('#preview-iframe-print').contents().find(\".invoice-number\").html(\"\");\r\n    if ($(\"#preview-iframe-print\").contents().find(\".invoice-date\")[0] && item.bill_date)\r\n      $('#preview-iframe-print').contents().find(\".invoice-date\").html(moment(item.bill_date).format('DD/MM/YYYY'));\r\n    else\r\n      $('#preview-iframe-print').contents().find(\".invoice-date\").html(\"\");\r\n    /* Mã cơ quan thuế */\r\n    if (template.is_decree_new) {\r\n      if (template.is_invoice_with_code) {\r\n        $('#preview-iframe-print').contents().find(\".tax_authority_code\").css('display', 'block');\r\n        if ($(\"#preview-iframe-print\").contents().find(\".ma-co-quan-thue\")[0]) {\r\n          $('#preview-iframe-print').contents().find(\".ma-co-quan-thue\").html(item.tax_authority_code);\r\n          if (item.send_department_status == \"KHONG_DU_DK_CAP_MA\")\r\n            $('#preview-iframe-print').contents().find(\".ma-co-quan-thue\").html('Không đủ điều kiện cấp mã');\r\n        }\r\n      }\r\n      else\r\n        $('#preview-iframe-print').contents().find(\".tax_authority_code\").css('display', 'none');\r\n    }\r\n    if (this.configs.system_parameter.display_time_sign_invoice) {\r\n      let singDate = invDate.format('DD/MM/YYYY HH:mm:ss');\r\n      // if (item.invoice_sign_date)\r\n      //   singDate = moment(item.invoice_sign_date).format('DD/MM/YYYY HH:mm:ss');\r\n      if ($(\"#preview-iframe-print\").contents().find(\".seler-sign-date\")[0])\r\n        $('#preview-iframe-print').contents().find(\".seler-sign-date\").html(singDate);\r\n      // if ($(\"#preview-iframe-print\").contents().find(\".seler-sign-name\")[0])\r\n      //   $('#preview-iframe-print').contents().find(\".seler-sign-name\").html(this.currentUser.account.name);\r\n    }\r\n    else {\r\n      let singDate = invDate.format('DD/MM/YYYY');\r\n      // if (item.invoice_sign_date)\r\n      //   singDate = moment(item.invoice_sign_date).format('DD/MM/YYYY');\r\n      if ($(\"#preview-iframe-print\").contents().find(\".seler-sign-date\")[0])\r\n        $('#preview-iframe-print').contents().find(\".seler-sign-date\").html(singDate);\r\n      // if ($(\"#preview-iframe-print\").contents().find(\".seler-sign-name\")[0])\r\n      //   $('#preview-iframe-print').contents().find(\".seler-sign-name\").html(this.currentUser.account.name);\r\n    }\r\n    ///// mã số thuế bên mua\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-8d903984-576d-c322-7843-bdacf97ac100\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-8d903984-576d-c322-7843-bdacf97ac100\").html(item.buyer_tax_code);\r\n    //////// Địa chỉ bên mua\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-7c103984-576d-c322-7843-bdacf97ac189\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-7c103984-576d-c322-7843-bdacf97ac189\").html(item.buyer_address);\r\n    // tên người mua\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-9c103984-576d-c322-7843-bdacf97ac189\")[0]) {\r\n      let name = ''\r\n      if (item.customer_name) {\r\n        name = item.customer_name\r\n      } else {\r\n        name = item.buyer_name\r\n      }\r\n      $('#preview-iframe-print').contents().find(\".value-9c103984-576d-c322-7843-bdacf97ac189\").html(name);\r\n    }\r\n    //CCCD\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-86679804-89b9-42e3-b173-9059da407f64\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-86679804-89b9-42e3-b173-9059da407f64\").html(item.id_card);\r\n    /////// Hình thức thanh toán\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-3a9f145a-549a-01ea-e507-cc7b0ab28a69\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-3a9f145a-549a-01ea-e507-cc7b0ab28a69\").html(item.payment_method_view_name);\r\n    ////// Tài khoản bên mua\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-d0f2a367-8ca8-006a-eb0c-cf3261f00a1c\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-d0f2a367-8ca8-006a-eb0c-cf3261f00a1c\").html(item.bank_account_number);\r\n    /////// Ghi chú trên hóa đơn\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00a1c\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00a1c\").html(item.note);\r\n    /////// Tên đơn vị\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-8c103984-576d-c322-7843-bdacf97ac189\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-8c103984-576d-c322-7843-bdacf97ac189\").html(item.customer_name);\r\n    ////// Lớp\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-7d873098-576d-c322-7843-bdacf97ac100\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-7d873098-576d-c322-7843-bdacf97ac100\").html(item.class_name);\r\n    /// Mã tra cứu\r\n    if ($(\"#preview-iframe-print\").contents().find(\".matracuu\")[0])\r\n      $('#preview-iframe-print').contents().find(\".matracuu\").html(item.verify_code);\r\n    /* Loại tiền */\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00999\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00999\").html(item.currency_code);\r\n\r\n    $('#preview-iframe-print').contents().find('.report-container').css({ height: this.reportHeight });\r\n    $('#preview-iframe-print').contents().find('.detail').css({ display: 'block' });\r\n    ////////Fill thông tin hàng hóa\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-8l873098-576d-c322-7843-bdacf97ac100\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-8l873098-576d-c322-7843-bdacf97ac100\").html(item.bill_products[0].product_name);\r\n    let format;\r\n    let displayInt = this.formatter.display_int ? this.formatter.display_int : (this.configs.display_int ? this.configs.display_int : false);\r\n    format = this.configs.decpoint_is_dot ? { decimal: \".\", thousands: \",\", display_int: displayInt } : { decimal: \",\", thousands: \".\", display_int: displayInt };\r\n\r\n    let decimal_quatity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n    // let decimal_number_real_export = VChanggeMoneyService.getFormatterToNumber(formatter.so_luong);\r\n    // let decimal_number_real_import = VChanggeMoneyService.getFormatterToNumber(formatter.so_luong);\r\n\r\n    let decimal_price = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia);\r\n    let decimal_price_nte = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia_nte);\r\n    let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n    let decimal_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.vat);\r\n    let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n    if (_index == 1) {\r\n      this.trRow = \"\";\r\n      item.bill_products.forEach(product => {\r\n        this.trRow += '<tr class=\"detail-data font-color-data text-left\">';\r\n        this.trRow += '<td style=\"height: \"' + heightRow + '\" colspan=\"3\" align=\"left\"><span class=\"valueTenHangHoa\">' + product.product_name + '</span></td>';\r\n        this.trRow += '</tr>';\r\n        this.trRow += '<tr class=\"detail-data font-color-data text-left\">';\r\n        var ths = $(\"#preview-iframe-print\").contents().find(\"#tbDetail\").find(\"th\");\r\n        for (var j = 0; j < ths.length; j++) {\r\n          let className = ths[j].className;\r\n          switch (className) {\r\n            case \"columnSTT\":\r\n              if ($(\"#preview-iframe-print\").contents().find(\".columnSTT\")[0])\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center\"><span class=\"valueSTT\">' + product.view_order + '</span></td>';\r\n              break;\r\n\r\n            case \"name-1a783984-576d-c322-7843-bdacf97ac189\":\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center name-1a783984-576d-c322-7843-bdacf97ac189 columnMaHangHoa\"><span class=\"valueMaHangHoa\">' + product.product_code + '</span></td>';\r\n              break;\r\n\r\n            case \"columnTenHangHoa\":\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\"><span class=\"valueTenHangHoa\">' + product.product_name + '</span></td>';\r\n              break;\r\n\r\n            case \"name-2a783984-576d-c322-7843-bdacf97ac189\":\r\n              let lot = product.lot ? product.lot : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"name-2a783984-576d-c322-7843-bdacf97ac189 columnSoLo\"><span class=\"valueSolo\">' + lot + '</span> </td>';\r\n              break;\r\n\r\n            case \"name-3a783984-576d-c322-7843-bdacf97ac189\":\r\n              let expiration_date = product.expiration_date ? product.expiration_date : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"name-3a783984-576d-c322-7843-bdacf97ac189 columnHanDung\"><span class=\"valueHanDung\">' + expiration_date + '</span> </td>';\r\n              break;\r\n\r\n            case \"name-4a783984-576d-c322-7843-bdacf97ac189\":\r\n              let country_name = product.country_name ? product.country_name : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"name-4a783984-576d-c322-7843-bdacf97ac189 columnNuocSanXuat\"><span class=\"valueNuocSx\">' + country_name + '</span> </td>';\r\n              break;\r\n\r\n            // case \"columnDonViTinh\":\r\n            //   let unit_name = product.unit_name ? product.unit_name : \"\";\r\n            //   this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center\"><span class=\"valueDonViTinh\">' + unit_name + '</span></td>';\r\n            //   break;\r\n\r\n            case \"columnSoLuong\":\r\n              let danh_muc = this.authService.getDMLocal();\r\n              this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n              let quantity = product.quantity ? Helper.formatMoney(product.quantity, decimal_quatity, format) : \"\";\r\n              let unit_name = '';\r\n              if (product.unit_code) {\r\n                if (danh_muc.DM_DON_VI_TINH) {\r\n                  unit_name = this.select.unit_codes.find(item => item.code === product.unit_code).name\r\n                }\r\n                quantity += \" \" + unit_name;\r\n              }\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\"><span class=\"valueSoLuong\" style=\"word-wrap: normal; width:100%\">' + quantity + '</span></td>';\r\n              break;\r\n\r\n            case \"columnDonGia\":\r\n              let price = product.price ? Helper.formatMoney(product.price, decimal_price, format) : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueDonGia\">' + price + '</span></td>';\r\n              break;\r\n\r\n            case \"columnThueSuatGTGT\":\r\n              let vat = product.vat ? product.vat : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number-center\"><span class=\"valueThueSuatGTGT\">' + vat + '</span></td>';\r\n              break;\r\n\r\n            case \"columnTienThueGTGT\":\r\n              let amount_vat = product.amount_vat ? product.amount_vat : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueTienThueGTGT\">' + amount_vat + '</span></td>';\r\n              break;\r\n\r\n            case \"columnTienCK\":\r\n              let amount_discount = product.amount_discount ? product.amount_discount : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueTienCK\">' + amount_discount + '</span></td>';\r\n              break;\r\n\r\n            case \"columnThanhTien\":\r\n              let amount = product.amount ? Helper.formatMoney(product.amount, decimal_amount, format) : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueThanhTien\">' + amount + '</span></td>';\r\n              break;\r\n\r\n            case \"columnThanhTienSauThue\":\r\n              let amount_after_vat = product.amount_after_vat ? product.amount_after_vat : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueThanhTienSauThue\">' + amount_after_vat + '</span></td>';\r\n              break;\r\n\r\n            case \"columnThucXuat\":\r\n              let number_real_export = product.number_real_export ? product.number_real_export : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number-center\"><span class=\"valueThucXuat\">' + number_real_export + '</span></td>';\r\n              break;\r\n\r\n            case \"columnThucNhap\":\r\n              let number_real_import = product.number_real_import ? product.number_real_import : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number-center\"><span class=\"valueThucNhap\">' + number_real_import + '</span></td>';\r\n              break;\r\n\r\n            case \"columnThanhTienChuaCK\":\r\n              let amount_without_discount = product.amount_without_discount ? product.amount_without_discount : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueThanhTienChuaCK\">' + amount_without_discount + '</span></td>';\r\n              break;\r\n\r\n            case \"columnSoMay\":\r\n              let engine_number = product.engine_number ? product.engine_number : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center\"><span class=\"valueSoMay\">' + engine_number + '</span></td>';\r\n              break;\r\n\r\n            case \"columnSoKhung\":\r\n              let chassis_number = product.chassis_number ? product.chassis_number : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center\"><span class=\"valueSoKhung\">' + chassis_number + '</span></td>';\r\n              break;\r\n\r\n            case \"columnThueKhac\":\r\n              let other_tax = product.other_tax ? product.other_tax : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueThueKhac\">' + other_tax + '</span></td>';\r\n              break;\r\n\r\n            case \"columnPhiKhac\":\r\n              let other_charge = product.other_charge ? product.other_charge : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valuePhiKhac\">' + other_charge + '</span></td>';\r\n              break;\r\n          }\r\n        }\r\n        this.trRow += '</tr>';\r\n      });\r\n      if (item.bill_products.length < countRow) {\r\n        let count = countRow - item.bill_products.length;\r\n        this.createRowData(count, template);\r\n      }\r\n    }\r\n    $(\"#preview-iframe-print\").contents().find(\".tbody-content-detail\").append($(this.trRow));\r\n\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_HH_DV_GTGT_KHONG_THUE\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_HH_DV_GTGT_KHONG_THUE\").html(item.total_amount_product_vatx);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_HH_DV_GTGT0\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_HH_DV_GTGT0\").html(item.total_amount_product_vat0);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_HH_DV_GTGT5\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_HH_DV_GTGT5\").html(item.total_amount_product_vat5);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_HH_DV_GTGT10\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_HH_DV_GTGT10\").html(item.total_amount_product_vat10);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TONG_TIEN_HH_DV_GTGT\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TONG_TIEN_HH_DV_GTGT\").html(item.amount);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_THUE_GTGT\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_THUE_GTGT\").html(template.symbol_no_vat);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_THUE_GTGT0\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_THUE_GTGT0\").html(item.amount_vat0);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_THUE_GTGT5\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_THUE_GTGT5\").html(item.amount_vat5);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_THUE_GTGT10\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_THUE_GTGT10\").html(item.amount_vat10);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TONG_TIEN_THUE_GTGT\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TONG_TIEN_THUE_GTGT\").html(item.total_amount_vat);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_THANH_TOAN_KHONG_THUE\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_THANH_TOAN_KHONG_THUE\").html(item.amount_after_vatx);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_THANH_TOAN_GTGT0\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_THANH_TOAN_GTGT0\").html(item.amount_after_vat0);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_THANH_TOAN_GTGT5\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_THANH_TOAN_GTGT5\").html(item.amount_after_vat5);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TIEN_THANH_TOAN_GTGT10\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TIEN_THANH_TOAN_GTGT10\").html(item.amount_after_vat10);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".TONG_TIEN_THANH_TOAN\")[0])\r\n      $('#preview-iframe-print').contents().find(\".TONG_TIEN_THANH_TOAN\").html(item.amount_after_vat);\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".total-amount-product-without-vat\")[0])\r\n      $('#preview-iframe-print').contents().find(\".total-amount-product-without-vat\").html(Helper.formatMoney(item.amount, decimal_amount, format));\r\n\r\n    if (item.bill_products[0].vat && item.bill_products[0].vat != -1) {\r\n      if ($(\"#preview-iframe-print\").contents().find(\".vat-percentage\")[0])\r\n        $('#preview-iframe-print').contents().find(\".vat-percentage\").html(item.bill_products[0].vat + \" %\");\r\n    }\r\n    else\r\n      if ($(\"#preview-iframe-print\").contents().find(\".vat-percentage\")[0])\r\n        $('#preview-iframe-print').contents().find(\".vat-percentage\").html();\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".total-amount-vat\")[0])\r\n      $('#preview-iframe-print').contents().find(\".total-amount-vat\").html(Helper.formatMoney(item.amount_vat, decimal_amount_vat, format));\r\n    if ($(\"#preview-iframe-print\").contents().find(\".total-amount-product-without-vat\")[0])\r\n      $('#preview-iframe-print').contents().find(\".total-amount-product-without-vat\").html(Helper.formatMoney(item.amount, decimal_amount_vat, format));\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".total-payment\")[0])\r\n      $('#preview-iframe-print').contents().find(\".total-payment\").html(Helper.formatMoney(item.total_payment, decimal_amount_after_vat, format));\r\n\r\n    if ($(\"#preview-iframe-print\").contents().find(\".value-1h883984-576d-c322-7843-bdacf97ac189\")[0])\r\n      $('#preview-iframe-print').contents().find(\".value-1h883984-576d-c322-7843-bdacf97ac189\").html(item.total_payment_word);\r\n    if ($(\"#preview-iframe-print\").contents().find(\".tien-khach-tra\")[0])\r\n      $('#preview-iframe-print').contents().find(\".tien-khach-tra\").html(Helper.formatMoney(item.cash, decimal_amount_vat, format));\r\n    if ($(\"#preview-iframe-print\").contents().find(\".tien-tra-lai-khach\")[0])\r\n      $('#preview-iframe-print').contents().find(\".tien-tra-lai-khach\").html(Helper.formatMoney(item.returns, decimal_amount_vat, format));\r\n    if ($(\"#preview-iframe-print\").contents().find(\".total-payment-word\")[0])\r\n      $('#preview-iframe-print').contents().find(\".total-payment-word\").html(item.total_amount_vat);\r\n\r\n\r\n    ///The End\r\n    let htmlAfter = `<html xmlns:inv=\"http://laphoadon.gdt.gov.vn/2014/09/invoicexml/v1\" xmlns:user=\"http://mycompany.com/mynamespace\"\r\n          xmlns:sign=\"http://www.w3.org/2000/09/xmldsig#\">`+ this.iframe.contentDocument.documentElement.innerHTML + \"</html></br></br></br>\";\r\n    arrayHtml += htmlAfter;\r\n    this.arrHtml = arrayHtml;\r\n  }\r\n  createRowData(countRow, template) {\r\n    for (let i = 0; i < countRow; i++) {\r\n      this.trRow += '<tr class=\"detail-data font-color-data text-left\">';\r\n      var ths = $(\"#preview-iframe-print\").contents().find(\"#tbDetail\").find(\"th\");\r\n      for (var j = 0; j < ths.length; j++) {\r\n        let className = ths[j].className;\r\n        let column = this.arrColumns.filter(p => p.name == className)[0];\r\n        if (column) {\r\n          let valueColumn = column.value;\r\n          let height = column.height;\r\n          if (template.paper_size == sEnum.paperSizes.A5Ngang)\r\n            height = \"18px\";\r\n          if (i > 0)\r\n            valueColumn = '';\r\n          if ($(\"#preview-iframe-print\").contents().find(\".\" + column.name)[0])\r\n            this.trRow += '<td style=\"height: ' + height + ';\"' + ' class=\"' + column.class + '\"><span class=\"' + valueColumn + '\"></span></td>';\r\n        }\r\n      }\r\n      this.trRow += '</tr>';\r\n    }\r\n  }\r\n  generateQRCode(shd, mtc) {\r\n    const qrcodeData = 'https://ihoadon.vn/kiem-tra/?shd=' + shd + '&mtc=' + mtc + '&lang=vn'; // Chuỗi dữ liệu để tạo QR code\r\n    const qrcodeOptions = {\r\n      width: 120,\r\n      height: 120\r\n    }; // Kích thước của QR code\r\n    QRCode.toDataURL(qrcodeData, qrcodeOptions, (err, url) => {\r\n      if (err) throw err;\r\n      this.qrcode = url;\r\n    });\r\n  }\r\n  onPrintTempChanged(e) {\r\n    this.template_id = e.value\r\n  }\r\n  print() {\r\n    this.isPrint = true;\r\n    this.showPopupIn = false;\r\n    setTimeout(() => {\r\n      this.inhoadon();\r\n    }, 200);\r\n  }\r\n\r\n  calculateFilterExpression(filterValue, selectedFilterOperation) {\r\n    selectedFilterOperation = \"contains\";\r\n    return [[\"customer_name_temp\", selectedFilterOperation || '=', filterValue], 'or', [\"buyer_name_temp\", selectedFilterOperation || '=', filterValue]];\r\n  }\r\n\r\n  displayFunction = (item) => {\r\n    if (!item) {\r\n      return 'Tất cả';\r\n    }\r\n    return item.name;\r\n  }\r\n  guihoadoncqt() {\r\n    if (this.selectedItems.length > 0) {\r\n      let isCheckStatusInvoice = this.selectedItems.every(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (!isCheckStatusInvoice) {\r\n        Library.notify(this._translate.THONG_TIN.chon_hoa_don_da_xuat_va_chua_gui_thue, 'error');\r\n        return;\r\n      }\r\n      let invoiceList = _.cloneDeep(this.selectedItems)\r\n      let search = InvoicesService.getSearchParams(this.route);\r\n      const initialState = {\r\n        invoiceList: invoiceList,\r\n        isHdGTGT: this.loaiHoaDon === '01GTKT' ? true : false,\r\n        search: search\r\n      };\r\n      this.bsModalSignRef = this.modalService.show(SendInvoiceToTaxComponent, {\r\n        backdrop: 'static',\r\n        keyboard: false,\r\n        class: 'modal-lg full-modal',\r\n        initialState\r\n      });\r\n      const subModal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalSignRef.content.successSaveItem) {\r\n          this.selectedItems = [];\r\n          this.selectedRows = [];\r\n          this.loadList(this.paramSearch);\r\n          subModal.unsubscribe();\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      Library.notify(this._translate.THONG_TIN.chon_hoa_don_da_xuat_va_chua_gui_thue, 'error');\r\n    }\r\n  }\r\n\r\n  inChuyenDoi(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.selectedItems.length || data) {\r\n      // -> trạng thái CQT đã tiếp nhận\r\n      const _lst = this.selectedItems.filter(p => p.status == 'DA_TIEP_NHAN');\r\n      if (_lst.length > 0 || data) {\r\n        let ids = [];\r\n        if (data) {\r\n          if (data.status === 'DA_TIEP_NHAN') {\r\n            ids.push(data.id);\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_print_convert, 'error');\r\n            return;\r\n          }\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          const data = this.billService.taodulieuInMau(ids, false);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          // Xem nhiều trang \r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.in_chuyen_doi_hd_mtt\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <iframe id=\\\"preview-iframe-bill-e\\\" width=\\\"0%\\\" height=\\\"0%\\\" style=\\\"margin-left: 9px;height:0px\\\"></iframe>\\r\\n    <!-- Thông tin trên hóa đơn -->\\r\\n    <bill-form-invoice [ttDaXuatHoaDon]=\\\"ttDaXuatHoaDon\\\" [dataSource]=\\\"dataSource\\\" [bill_products]=\\\"bill_products\\\"\\r\\n      [frmData]=\\\"frmData\\\" [formatter]=\\\"formatter\\\" (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\">\\r\\n    </bill-form-invoice>\\r\\n    <!-- Hàng hóa trên hóa đơn -->\\r\\n    <bill-product-grip [bill_products]=\\\"bill_products\\\" #child [dataSource]=\\\"dataSource\\\" [formDataInInvoice]=\\\"frmData\\\"\\r\\n      [formatter]=\\\"formatter\\\" [_objTemplateSelect]=\\\"_objTemplateSelect\\\" [isHdGTGT]=\\\"isHdGTGT\\\">\\r\\n    </bill-product-grip>\\r\\n    <div class=\\\"table-footer\\\">\\r\\n      <!-- Tổng tiền -->\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <div class=\\\"vat amount-table-footer\\\">\\r\\n          <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [value]=\\\"frmData.amount_after_vat\\\" step=\\\"0\\\"\\r\\n            [format]=\\\"formatter.tong_tien\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Tiền thuế -->\\r\\n      <div class=\\\"table-footer-2\\\" *ngIf=\\\"isHdGTGT\\\">\\r\\n        <div class=\\\"vat amount-vat-table-footer\\\">\\r\\n          <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [value]=\\\"frmData.amount_vat\\\" step=\\\"0\\\"\\r\\n            [format]=\\\"formatter.tien_thue\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Thành tiền -->\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <div class=\\\"vat amount-after-vat-table-footer\\\">\\r\\n          <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [value]=\\\"frmData.amount\\\" step=\\\"0\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n            [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" style=\\\"margin-top : 20px\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <!-- Giảm trừ nghị quyết 43 -->\\r\\n        <!-- Tỷ lệ % doanh thu -->\\r\\n        <div class=\\\"col-md-12\\\" style=\\\"margin-top:5px\\\">\\r\\n          <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n            <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Tỷ lệ % trên doanh thu </p>\\r\\n\\r\\n            <div class=\\\"toggle normal\\\" style=\\\"display: flex; align-items: center; margin-top: -6px;\\\">\\r\\n              <img id=\\\"link14\\\" style=\\\"cursor: pointer;padding-left: 2px;padding-right: 7px\\\"\\r\\n                src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" (click)=\\\"guideSales()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n            </div>\\r\\n            <dx-popover target=\\\"#link14\\\" position=\\\"top\\\" [width]=\\\"350\\\" [(visible)]=\\\"isDisplayGuideSale\\\">\\r\\n              <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n                <p>- 1% : Phân phối, cung cấp hàng hóa dịch vụ</p>\\r\\n                <p>- 5% : Dịch vụ xây dựng không bao thầu nguyên vật liệu</p>\\r\\n                <p>- 3% : Sản xuất, vận tải, dịch vụ có gắn với hàng hóa, xây dựng có bao thầu nguyên vật liệu</p>\\r\\n                <p>- 2% : Hoạt động kinh doanh khác</p>\\r\\n              </div>\\r\\n            </dx-popover>\\r\\n\\r\\n            <dx-number-box [width]=\\\"50\\\" [(value)]=\\\"frmData.sales_percentage\\\"\\r\\n              (onValueChanged)=\\\"onChangeSalePercen($event)\\\"></dx-number-box>\\r\\n            <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> %</p>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Đã giảm 20% -->\\r\\n        <div class=\\\"col-md-12\\\" style=\\\"margin-top:5px\\\">\\r\\n          <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n            <p style=\\\"margin-right: 5px;margin-top: 5px;width: 100px\\\">Đã giảm </p>\\r\\n            <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.money_resolution_43\\\"\\r\\n              [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n            <p style=\\\"margin-left: 5px\\\"> {{ _translate.THONG_TIN.tinh_thue_nq101}}</p>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n        <!-- Thành tiền -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount\\\" tabIndex=\\\"-1\\\"\\r\\n              [format]=\\\"formatter.thanh_tien\\\" [disabled]=\\\"!frmData.auto_value\\\" step=\\\"0\\\"\\r\\n              (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Tổng tiền thuế -->\\r\\n        <div class=\\\"dx-field\\\" *ngIf=\\\"isHdGTGT\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount_vat\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n              [disabled]=\\\"!frmData.auto_value\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Cộng chiết khấu -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_amount_discount}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount_discount\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n              [format]=\\\"formatter.tien_chiet_khau\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <!-- Tổng tiền sau thuế -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount_after_vat\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\" [disabled]=\\\"!frmData.auto_value\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n              (onKeyDown)=\\\"keyDown($event)\\\" (onValueChanged)=\\\"totalPaymentChange($event)\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Tiền mặt -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">Tiền mặt</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.cash\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n              tabIndex=\\\"-1\\\" step=\\\"0\\\" (onValueChanged)=\\\"cashChange($event)\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Trả lại khách -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">Trả lại khách</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.returns\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n              tabIndex=\\\"-1\\\" step=\\\"0\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" style=\\\"margin-top : 15px\\\">\\r\\n      <div class=\\\"col-md-4\\\"></div>\\r\\n      <div class=\\\"col-md-8\\\">\\r\\n        <!-- Số tiền bằng chữ -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\" style=\\\"width: 27%;\\\">{{ _translate.CONTROLL.LABEL.total_payment_in_word}}</div>\\r\\n          <div class=\\\"dx-field-value\\\" style=\\\"width: 73%;\\\">\\r\\n            <dx-text-box [(value)]=\\\"frmData.total_payment_word\\\" [disabled]=\\\"!frmData.auto_value\\\"\\r\\n              [readOnly]=\\\"ttDaXuatHoaDon\\\"></dx-text-box>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <!-- Xem trước hóa đơn -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice}}\\\" type=\\\"default\\\" (click)=\\\"preview()\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- In chuyển đổi -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"inChuyenDoi()\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.print\\\" [text]=\\\"inChuyenDoiText()\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <!-- Xuất hóa đơn -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" appScrollToInvalid\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\" [(icon)]=\\\"this._translate.ICONS.export_inv\\\"\\r\\n            type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\" (click)=\\\"eSubmit('XUAT')\\\">\\r\\n          </dx-button>\\r\\n          <!-- Xuất và in -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" appScrollToInvalid text=\\\"Xuất và in PTT\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.export_inv\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\" (click)=\\\"eSubmit('XUAT_IN')\\\">\\r\\n          </dx-button>\\r\\n          <!-- Ghi tạm -->\\r\\n          <dx-button disableDoubleClick appScrollToInvalid text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\"\\r\\n            *ngIf=\\\"!ttDaXuatHoaDon\\\" [(icon)]=\\\"this._translate.ICONS.save\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\" [disabled]=\\\"isDisable\\\" (click)=\\\"eSubmit('GHI_TAM')\\\">\\r\\n          </dx-button>\\r\\n          <!-- Tạo mới -->\\r\\n          <dx-button text=\\\"{{ _translate.CONTROLL.BUTTON.create_new}}\\\" [(icon)]=\\\"this._translate.ICONS.add_new\\\"\\r\\n            type=\\\"default\\\" (click)=\\\"handleAddNew()\\\"></dx-button>\\r\\n          <!-- Đóng -->\\r\\n          <dx-button type=\\\"default\\\" appBackButton [(icon)]=\\\"this._translate.ICONS.come_back\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</form>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"200\\\" [showTitle]=\\\"true\\\" title=\\\"IN PHIẾU TÍNH TIỀN\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopupIn\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div class=\\\"dx-field thue-suat-may-bay\\\">\\r\\n      <div class=\\\"dx-field-label\\\">Chọn mẫu: </div>\\r\\n      <div class=\\\"dx-field-value\\\">\\r\\n        <dx-select-box displayExpr=\\\"name\\\" valueExpr=\\\"id\\\" [items]=\\\"listTempPrint\\\" [value]=\\\"listTempPrint[0].id\\\"\\r\\n          (onValueChanged)=\\\"onPrintTempChanged($event)\\\">\\r\\n        </dx-select-box>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"dx-field\\\">\\r\\n      Số lượng phiếu tính tiền : 1\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"Quay lại\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"print()\\\" text=\\\"In phiếu tính tiền\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".invoice-container{padding-top:0px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}.vat.total-payment-in-word .dx-field-label{width:12%}.vat.total-payment-in-word .dx-field-value{width:88% !important}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:30px}::ng-deep .nd92Notify .modal-content{width:80%}::ng-deep .mauhoadon .modal-content{width:67%}::ng-deep .mauhoadon43 .modal-content{width:72%}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { Base64 } from 'js-base64';\r\nimport { AuthService, Helper, Library, sEnum, SocketService, VChanggeMoneyService, VPreviewInvService, VStringService } from '@core/index';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport * as _ from 'lodash';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { Observable } from 'rxjs';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { pattern } from '@config/index';\r\nimport { NotifyReduceTaxComponent } from '@shared/index';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { FormInvoiceComponent } from '../form-invoice/form-invoice.component';\r\nimport { ProductGripComponent } from '../product-grip/product-grip.component';\r\nimport { BillModel } from '@modules/bill-invoice/shared/bill.model';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport QRCode from 'qrcode';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { isBuffer } from 'util';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { NumberUtilsService } from '@core/library/public/number-utils.service';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-create-bill',\r\n  templateUrl: './invoice.component.html',\r\n  styleUrls: ['./invoice.component.scss']\r\n})\r\nexport class InvoiceComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild(FormInvoiceComponent) formInvoice: FormInvoiceComponent;\r\n  @ViewChild(ProductGripComponent) productGrip: ProductGripComponent;\r\n  @ViewChild(FormExtendComponent) formExtend: FormExtendComponent;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  frmData: BillModel = new BillModel(1);\r\n  frmTraLai = {\r\n    reason: ''\r\n  };\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  is_multi_vat: any;\r\n  total_payment: any;\r\n  listDM: any;\r\n  showTraLai = false;\r\n  showKyDuyet = false;\r\n  isHdGTGT = false;\r\n  isAccessExportInv = false;\r\n  showPopup = false;\r\n  bsModalRef: BsModalRef;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n  select: any = {};\r\n  isDisable = false;\r\n  _objTemplateSelect: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  extentionGrid: any = {};\r\n  configs: any;\r\n  _translate: any;\r\n  fileData: Array<any> = [];\r\n  tempKiFile = 0;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  timeeeeeeeeeee: any;\r\n  _isValid = false;\r\n  trRow: any;\r\n  isTuChoi = false;\r\n  isPrint = false;\r\n  valueChange: string;\r\n  invoicereleaseTempt: any = {};\r\n  invoiceTemplateTT78: any;\r\n  nodeSign: any;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  pkInvoiceCurrent: any;\r\n  pkInvoiceSelectWaitSign: any;\r\n  isShowButtonWaiteSign: boolean = true;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  isPassNQ43: boolean = false;\r\n  isDisplayGuideSale: boolean = false;\r\n  bill_products: ArrayStore;\r\n  keyError: any = [];\r\n  arrHtml: any;\r\n  template: any;\r\n  iframe: any;\r\n  qrcode: any;\r\n  template_id: any;\r\n  listTemplate: any;\r\n  verify_code: any;\r\n  templatePrinId: any;\r\n  reportHeight: string = \"1026px\";\r\n  listTempPrint: any;\r\n  hinhThucXuat: any;\r\n  loaiHoaDon: any;\r\n  arrColumns = [\r\n    {\r\n      name: 'columnSTT',\r\n      value: 'valueSTT',\r\n      class: 'center',\r\n      height: \"25px\",\r\n      title: \"Số thứ tự\",\r\n      content: \"1\"\r\n    },\r\n    {\r\n      name: 'name-1a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueMaHangHoa',\r\n      class: 'name-1a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Mã hàng\",\r\n      content: \"MH001\"\r\n    },\r\n    {\r\n      name: 'columnTenHangHoa',\r\n      value: 'valueTenHangHoa',\r\n      class: 'columnTenHangHoa',\r\n      height: \"25px\",\r\n      title: \"Tên hàng hóa\",\r\n      content: \"Hóa đơn điện tử\"\r\n    },\r\n    {\r\n      name: 'columnSoMay',\r\n      value: 'valueSoMay',\r\n      class: 'columnSoMay',\r\n      height: \"25px\",\r\n      title: \"Số máy\",\r\n      content: \"Q12P\"\r\n    },\r\n    {\r\n      name: 'columnSoKhung',\r\n      value: 'valueSoKhung',\r\n      class: 'columnSoKhung',\r\n      height: \"25px\",\r\n      title: \"Số khung\",\r\n      content: \"K123K\"\r\n    },\r\n    {\r\n      name: 'name-2a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueSolo',\r\n      class: 'name-2a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Số lô\",\r\n      content: \"SL001\"\r\n    },\r\n    {\r\n      name: 'name-3a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueHanDung',\r\n      class: 'name-3a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Hạn dùng\",\r\n      content: \"60 ngày\"\r\n    },\r\n    {\r\n      name: 'name-4a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueNuocSx',\r\n      class: 'name-4a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Nước sản xuất\",\r\n      content: \"Việt Nam\"\r\n    },\r\n    {\r\n      name: 'columnDonViTinh',\r\n      value: 'valueDonViTinh',\r\n      class: 'center',\r\n      height: \"25px\",\r\n      title: \"Đơn vị tính\",\r\n      content: \"Chiếc\"\r\n    },\r\n    {\r\n      name: 'columnSoLuong',\r\n      value: 'valueSoLuong',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Số lượng\",\r\n      content: \"1\"\r\n    },\r\n    {\r\n      name: 'columnDonGia',\r\n      value: 'valueDonGia',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Đơn giá\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnTienCK',\r\n      value: 'valueTienCK',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Tiền chiết khấu\",\r\n      content: \"\"\r\n    },\r\n    {\r\n      name: 'columnThanhTienChuaCK',\r\n      value: 'valueThanhTienChuaCK',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Thành tiền chưa chiết khấu\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnThanhTien',\r\n      value: 'valueThanhTien',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Thành tiền\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnThueSuatGTGT',\r\n      value: 'valueThueSuatGTGT',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thuế suất GTGT\",\r\n      content: \"0\"\r\n    },\r\n    {\r\n      name: 'columnTienThueGTGT',\r\n      value: 'valueTienThueGTGT',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Tiền thuế GTGT\",\r\n      content: \"0\"\r\n    },\r\n    {\r\n      name: 'columnThanhTienSauThue',\r\n      value: 'valueThanhTienSauThue',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Thành tiền sau thuế\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnMaSo',\r\n      value: 'valueMaSo',\r\n      class: 'columnMaSo',\r\n      height: \"25px\",\r\n      title: \"Mã số\",\r\n      content: \"MS001\"\r\n    },\r\n    {\r\n      name: 'columnThucXuat',\r\n      value: 'valueThucXuat',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thực xuất\",\r\n      content: \"10\"\r\n    },\r\n    {\r\n      name: 'columnThucNhap',\r\n      value: 'valueThucNhap',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thực nhập\",\r\n      content: \"10\"\r\n    },\r\n    {\r\n      name: 'columnThueKhac',\r\n      value: 'valueThueKhac',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thuế khác\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnPhiKhac',\r\n      value: 'valuePhiKhac',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Phí khác\",\r\n      content: \"1.000.000\"\r\n    },\r\n  ];\r\n  showPopupIn = false;\r\n  private isExportInvoice: boolean;\r\n  info_message: any;\r\n  is_default_template: boolean = false;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private billService: BillService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n    private confirmService: ConfirmService,\r\n    private configsService: ConfigsService,\r\n    private templateService: TemplateService,\r\n    private spinner: NgxSpinnerService,\r\n    private vatService: VatService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n  ngAfterViewInit() {\r\n    if (VStringService._getValueToString(this.frmData.status) != \"\" && this.frmData.status != sEnum.statusInv.GhiTam) {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n    let dateFromNQ43 = moment(\"01/07/2023\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n    let invoiceDateNQ43 = moment(new Date()).format('YYYY-MM-DD');\r\n    if (this.isPassNQ43)\r\n      invoiceDateNQ43 = moment(\"01/07/2023\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n    /* Nghị quyết số 43/2022/QH15 */\r\n    if (!this.isHdGTGT && invoiceDateNQ43 >= dateFromNQ43) {\r\n      if (this.configs.system_parameter.is_tb_nq43_mtt === undefined) {\r\n        const initialState = {\r\n          typeNotify: \"DOI_TUONG_GIAM_THUE_NQ43\",\r\n        };\r\n        this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n          backdrop: 'static',\r\n          keyboard: false,\r\n          class: 'nd92Notify modal-lg',\r\n          initialState\r\n        });\r\n\r\n        const subModal = this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem == \"DONG_Y\") {\r\n            this.configs.system_parameter.is_tb_nq43_mtt = true;\r\n          }\r\n          else {\r\n            this.configs.system_parameter.is_tb_nq43_mtt = false;\r\n          }\r\n          let data = {\r\n            config: {\r\n              value: JSON.stringify(this.configs.system_parameter)\r\n            }\r\n          };\r\n          this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n            if (response.status == \"success\") {\r\n              this.configsService.getAll().subscribe((res) => {\r\n                if (res.data && res.data.configs)\r\n                  this.authService.setConfigs(res.data.configs);\r\n              });\r\n              if (this.configs.system_parameter.is_tb_nq43_mtt) {\r\n                const initialState = {\r\n                  typeNotify: \"DOI_TUONG_GIAM_THUE_NQ43\",\r\n                };\r\n                this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                  backdrop: 'static',\r\n                  keyboard: false,\r\n                  class: 'nd92Notify modal-lg',\r\n                  initialState\r\n                });\r\n                const subModal = this.modalService.onHide.subscribe(() => {\r\n                  if (this.bsModalRef.content.successSaveItem == \"DONG_Y\")\r\n                    this.frmData.is_resolution_43 = true;\r\n                  else\r\n                    this.frmData.is_resolution_43 = false;\r\n                  subModal.unsubscribe();\r\n                });\r\n              }\r\n            } else {\r\n            }\r\n          }, err => { }, () => {\r\n          });\r\n          subModal.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        if (this.configs.system_parameter.is_tb_nq43_mtt && !this.frmData.id) {\r\n          const initialState = {\r\n            typeNotify: \"DOI_TUONG_GIAM_THUE_NQ43\",\r\n          };\r\n          this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'nd92Notify modal-lg',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalRef.content.successSaveItem == \"DONG_Y\")\r\n              this.frmData.is_resolution_43 = true;\r\n            else\r\n              this.frmData.is_resolution_43 = false;\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n    }\r\n    if(this.frmData.amount_after_vat) {\r\n      const currency_code = this.frmData.currency_code;\r\n      let tien_chu = Helper.tienBangChu(Math.abs(this.frmData.amount_after_vat), this.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);//Helper.money(e.value, currency_code);\r\n      this.frmData.total_payment_word = this.invoiceService.docTienAm(this.frmData.amount_after_vat, tien_chu, this.configs, currency_code);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    // kết nối websocket\r\n    this.loaiHoaDon = this.route.snapshot.data.type\r\n    this.connectWebsocket();\r\n    this.billService.getTemp(this.route.snapshot.data.type).subscribe(res => {\r\n      this.listTempPrint = res.data.templates.map((temp) => {\r\n        return {\r\n          ...temp,\r\n          name: temp.template_code + temp.invoice_series\r\n        }\r\n      });\r\n      if (res.data.templates && res.data.templates.length > 0) {\r\n        this.templatePrinId = res.data.templates[0].id;\r\n        this.getTemplate(res.data.templates[0].id);\r\n      }\r\n    })\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.configs = this.authService.getConfigs();\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      // this.frmData.decimal_places_json = JSON.stringify(this.configs.display_currency);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n\r\n\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      let loaiHoaDon = data.type;\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n        this.isTT78 = true;\r\n      }\r\n      if (loaiHoaDon === sEnum.loaihoadon.GTKT01) {\r\n        this.isHdGTGT = true;\r\n      } else {\r\n        this.isHdGTGT = false;\r\n      }\r\n      let temptTT78 = [];\r\n      if (data.init[2] == true) {\r\n        isEdit = true;\r\n        temptTT78 = data.init[3];\r\n        invoice = data.init[1];\r\n      }\r\n      else {\r\n        temptTT78 = data.init[1];\r\n      }\r\n      if (temptTT78 && temptTT78.length > 0) {\r\n        this.select.templatesTT78 = temptTT78;\r\n      }\r\n      if (isEdit || this.billService.isCopy) {\r\n        if (this.billService.isCopy) {\r\n          this.khoiTaoKhiSua(this.billService.data);\r\n        } else {\r\n          this.khoiTaoKhiSua(invoice);\r\n        }\r\n      } else {\r\n        if (data.init[1][0]) {\r\n          this.template_id = data.init[1][0].value;\r\n          this.listTemplate = data.init[1]\r\n          this.invoicereleaseTempt = data.init[1][0].value;\r\n        }\r\n        this.khoiTaoKhiThemMoi();\r\n      }\r\n    })\r\n  }\r\n  getTemplate(data) {\r\n    this.templateService.show(data).toPromise().then(rs => {\r\n      if (rs.status == \"success\") {\r\n        this.template = rs.data.template;\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n\r\n  }\r\n  // shd: số hđ\r\n  // mtc: mã tra cứu\r\n  generateQRCode(shd, mtc) {\r\n    const qrcodeData = 'https://ihoadon.vn/kiem-tra/?shd=' + shd + '&mtc=' + mtc + '&lang=vn'; // Chuỗi dữ liệu để tạo QR code\r\n    const qrcodeOptions = {\r\n      width: 100,\r\n      height: 100\r\n    }; // Kích thước của QR code\r\n    QRCode.toDataURL(qrcodeData, qrcodeOptions, (err, url) => {\r\n      if (err) throw err;\r\n      this.qrcode = url;\r\n    });\r\n  }\r\n  khoiTaoKhiThemMoi() {\r\n    // Khởi tạo thông tin hàng hóa\r\n    // this.frmData.template_id = this.template_id;\r\n    // this.frmData.bill_series = this.listTemplate.filter(item => item.value = this.template_id)[0].bill_series;\r\n    // this.frmData.template_code = this.listTemplate.filter(item => item.value = this.template_id)[0].template_code;\r\n    this.bill_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.bill_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.bill_products\r\n    });\r\n    if (this.select.templatesTT78.length) {\r\n      this.frmData.template_id = this.select.templatesTT78[0].value;\r\n      this.frmData.bill_series = this.select.templatesTT78[0].bill_series;\r\n      this.frmData.template_code = this.select.templatesTT78[0].template_code;\r\n      for (const key in this.select.templatesTT78[0]) {\r\n        if (this.select.templatesTT78[0].hasOwnProperty(key)) {\r\n          this._objTemplateSelect[key] = this.select.templatesTT78[0][key];\r\n        }\r\n      }\r\n      this.is_multi_vat = this.select.templatesTT78[0].is_multi_vat;\r\n      this.invoiceTemplateTT78 = this.select.templatesTT78[0];\r\n    }\r\n  }\r\n  khoiTaoKhiSua(data) {\r\n    // Khởi tạo thông tin hàng hóa\r\n    this.is_default_template = VStringService._attemptConvertBool(data.is_default_template);\r\n    const _lst = this.frmData.setInvoice_products_data(data.bill_products);\r\n    this.invoicereleaseTempt = data.template_id;\r\n    if (_lst) {\r\n      _lst.forEach(item => {\r\n        if (item.product_name && item.unit_name) {\r\n          const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n          if (!obj1) {\r\n            if (VStringService._getValueToString(item.unit_code) == \"\")\r\n              item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n            let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n            if (oDuplicate)\r\n              item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n          }\r\n          else\r\n            if (!item.unit_code || (item.unit_code && item.unit_code != obj1.code))\r\n              item.unit_code = obj1.code;\r\n        }\r\n      });\r\n    }\r\n    this.bill_products = new ArrayStore({\r\n      key: 'id',\r\n      data: _lst\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.bill_products\r\n    });\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n    this.pkInvoiceSelectWaitSign = this.frmData.id;\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (item.value === this.frmData.template_id) {\r\n        this.invoiceTemplateTT78 = item;\r\n      }\r\n    });\r\n    this.select.templatesTT78.some(item => {\r\n      if (item.value === this.frmData.template_id) {\r\n        this.is_multi_vat = item.is_multi_vat;\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            this._objTemplateSelect[key] = item[key];\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n    });\r\n  }\r\n  eSubmit(type) {\r\n    this.hinhThucXuat = type\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (type == 'XUAT' || type == 'XUAT_IN') {\r\n        this._isValid = this._validForm();\r\n        if (!this._isValid) {\r\n          return;\r\n        }\r\n      }\r\n      if (this.windowPreviewBeforeSubmit) {\r\n        this.windowPreviewBeforeSubmit.focus();\r\n        return;\r\n      }\r\n      if (type === 'XUAT' || type == 'XUAT_IN') {\r\n        if (this.isTT78) {\r\n          if (this.confirmCheckPreview) {\r\n            this.xuatHoaDon(type);\r\n            this.confirmCheckPreview = false;\r\n          } else {\r\n            this.previewBeforeExport(type);\r\n          }\r\n        }\r\n        else {\r\n          Library.notify(\"Tờ khai đăng ký chưa được chấp nhận\", 'error');\r\n        }\r\n      } else {\r\n        this.ghiTam();\r\n      }\r\n    }, 300)\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = this._translate.THONG_TIN.xuat_hoa_don;\r\n    let du_lieu = this.billService.taodulieuXemTruocMau(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn: this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  _validForm() {\r\n    let _isValid = true;\r\n    const _lst = this.frmData.bill_products;\r\n    if (!this.frmData.amount_after_vat && this.frmData.amount_after_vat !== 0) {\r\n      Library.notify(\"Tổng tiền hóa đơn không được để trống\", 'error');\r\n      return false;\r\n    }\r\n    if (!this.vatService.checkVatMauHoaDon(_lst, this.is_multi_vat)) {\r\n      return false;\r\n    }\r\n    /* Hóa đơn bán hàng NQ43 */\r\n    if (this.frmData.is_resolution_43) {\r\n      if (!this.frmData.sales_percentage) {\r\n        Library.notify(\"Tỷ lệ % trên doanh thu không được để trống\", 'error');\r\n        return false;\r\n      }\r\n      else if (this.frmData.sales_percentage != 1 && this.frmData.sales_percentage != 2\r\n        && this.frmData.sales_percentage != 3 && this.frmData.sales_percentage != 5) {\r\n        Library.notify(\"Tỷ lệ % trên doanh thu chỉ bao gồm các giá trị: 1, 2, 3, 5\", 'error');\r\n        return false;\r\n      }\r\n    }\r\n    this.bill_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion && !item.is_promotion_new && !item.commercial_discount && _isValid) {\r\n        }\r\n        else if (item.is_promotion || item.is_promotion_new || item.commercial_discount) {\r\n          if ((item.product_name == null || item.product_name == '') && _isValid) {\r\n            Library.notify(\"Tên hàng hóa\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'product_name'));\r\n            _isValid = false;\r\n            return false;\r\n          }\r\n        }\r\n        if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_explain) {\r\n          if (this.isHdGTGT) {\r\n            if (item.vat == null && _isValid) {\r\n              Library.notify(\"Thuế suất\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'vat'));\r\n              _isValid = false;\r\n              return false;\r\n            }\r\n            if (item.vat != \"-1\" && item.vat != \"-2\" && item.amount_vat == null && _isValid) {\r\n              Library.notify(\"Tiền thuế\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount_vat'));\r\n              _isValid = false;\r\n              return false;\r\n            }\r\n          }\r\n          if (item.amount == null && _isValid) {\r\n            Library.notify(\"Thành tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount'));\r\n            _isValid = false;\r\n            return false;\r\n          }\r\n        }\r\n      });\r\n    });\r\n    if (_lst.length === 0) {\r\n      Library.notify(this._translate.NOTIFY.no_product, 'error', 5000);\r\n      this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n      return false;\r\n    }\r\n    return _isValid;\r\n  }\r\n  xuatHoaDon(type) {\r\n    this.info_message = null;\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n      this.socketService.kiSo(() => this.connectWebsocket(type), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n    }\r\n  }\r\n  ghiTam() {\r\n    if (!this.frmData.id) {\r\n      this.billService.addNew(this.frmData, false).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.id = res.data.id;\r\n          Library.notify('Ghi tạm hóa đơn thành công', 'success')\r\n        } else {\r\n          Library.notify(res.message, 'error')\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.billService.edit(this.frmData.id, this.frmData, false).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.id = res.data.id;\r\n          Library.notify('Ghi tạm hóa đơn thành công', 'success')\r\n        } else {\r\n          Library.notify(res.message, 'error')\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n  createFormTypeBase64(isPreview) {\r\n    let raw_file_Decode = Base64.decode(this.template.raw_file);\r\n    let raw_file_Parse = JSON.parse(raw_file_Decode);\r\n    let htmlBefore = raw_file_Parse.html + \"</html>\";\r\n    let watermark_image_default = raw_file_Parse.watermark_image_default;\r\n    let watermark_image = raw_file_Parse.watermark_image;\r\n    let countRow = this.template.number_of_row;\r\n    let arrayHtml = \"\";\r\n    let heightRow = \"\";\r\n    switch (this.template.paper_size) {\r\n      case sEnum.paperSizes.A4Doc:\r\n        heightRow = \"25px;\";\r\n        break;\r\n      case sEnum.paperSizes.A4Ngang:\r\n        heightRow = \"25px;\";\r\n        break;\r\n      case sEnum.paperSizes.A5Ngang:\r\n        heightRow = \"18px;\";\r\n        this.reportHeight = \"500px\";\r\n        break;\r\n      default:\r\n        heightRow = \"25px;\";\r\n        break;\r\n    }\r\n    let _index = 0;\r\n    this.iframe = document.getElementById('preview-iframe-bill-e');\r\n    this.iframe.contentDocument.open(\"text/html\", \"replace\");\r\n    this.iframe.contentDocument.write(htmlBefore);\r\n    this.iframe.contentDocument.close();\r\n    this.generateQRCode(this.frmData.bill_number, this.verify_code);\r\n    _index++;\r\n    //////// Thêm ảnh khung\r\n    $(\"#preview-iframe-bill-e\").contents().find(\".bg-template-default\").css('background-image', 'url(data:image/' + \"jpg\" + ';base64,' + watermark_image_default + ')').css('display', 'block');\r\n    $(\"#preview-iframe-bill-e\").contents().find(\".qrcode\").css('background-image', 'url(' + \"\" + '' + this.qrcode + ')').css('display', 'block');\r\n    //////// Thêm ảnh  nền\r\n    $(\"#preview-iframe-bill-e\").contents().find(\".bg-template-parent\").css('display', 'block');\r\n    $(\"#preview-iframe-bill-e\").contents().find(\".bg-template-parent\").find(\".bg-template\").css('background-image', 'url(data:image/' + \"jpg\" + ';base64,' + watermark_image + ')').css('display', 'block');\r\n    //////// Footer\r\n    $(\"#preview-iframe-bill-e\").contents().find(\".report-footer\").css({ display: 'block' });\r\n    /////Fill dữ liệu vào hóa đơn\r\n    // Ngày hóa đơn\r\n    let a: any = moment();\r\n    let invDate: any;\r\n    if (this.frmData.bill_date)\r\n      invDate = moment(this.frmData.bill_date);\r\n    else\r\n      invDate = moment();\r\n    let yearInv = invDate.year();\r\n    let monthInv = invDate.month() < 12 ? invDate.month() + 1 : 1\r\n    let dayInv = invDate.date();\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".NgayHD\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".NgayHD\").html(dayInv);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".ThangHD\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".ThangHD\").html(monthInv);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".NamHD\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".NamHD\").html(yearInv);\r\n    /// Ẩn thông tin chữ ký số\r\n    if (isPreview) {\r\n      if ($(\"#preview-iframe-bill-e\").contents().find(\".efy-esign-none\")[0])\r\n        $('#preview-iframe-bill-e').contents().find(\".efy-esign-none\").css('display', 'none');\r\n\r\n      if ($(\"#preview-iframe-bill-e\").contents().find(\".lblSignValid\")[0])\r\n        $('#preview-iframe-bill-e').contents().find(\".lblSignValid\").css('display', 'none');\r\n\r\n      if ($(\"#preview-iframe-bill-e\").contents().find(\".lblKyBoi\")[0])\r\n        $('#preview-iframe-bill-e').contents().find(\".lblKyBoi\").css('display', 'none');\r\n\r\n      if ($(\"#preview-iframe-bill-e\").contents().find(\".lblKyNgay\")[0])\r\n        $('#preview-iframe-bill-e').contents().find(\".lblKyNgay\").css('display', 'none');\r\n\r\n      if ($(\"#preview-iframe-bill-e\").contents().find(\".seler-sign-date\")[0])\r\n        $('#preview-iframe-bill-e').contents().find(\".seler-sign-date\").css('display', 'none');\r\n\r\n      if ($(\"#preview-iframe-bill-e\").contents().find(\".seler-sign-name\")[0])\r\n        $('#preview-iframe-bill-e').contents().find(\".seler-sign-name\").css('display', 'none');\r\n    }\r\n    else {\r\n      if (this.configs.system_parameter.display_time_sign_invoice) {\r\n        let singDate = invDate.format('DD/MM/YYYY HH:mm:ss');\r\n        // if (item.invoice_sign_date)\r\n        //   singDate = moment(item.invoice_sign_date).format('DD/MM/YYYY HH:mm:ss');\r\n        if ($(\"#preview-iframe-bill-e\").contents().find(\".seler-sign-date\")[0])\r\n          $('#preview-iframe-bill-e').contents().find(\".seler-sign-date\").html(singDate);\r\n        // if ($(\"#preview-iframe-bill-e\").contents().find(\".seler-sign-name\")[0])\r\n        //   $('#preview-iframe-bill-e').contents().find(\".seler-sign-name\").html(this.currentUser.account.name);\r\n      }\r\n      else {\r\n        let singDate = invDate.format('DD/MM/YYYY');\r\n        // if (item.invoice_sign_date)\r\n        //   singDate = moment(item.invoice_sign_date).format('DD/MM/YYYY');\r\n        if ($(\"#preview-iframe-bill-e\").contents().find(\".seler-sign-date\")[0])\r\n          $('#preview-iframe-bill-e').contents().find(\".seler-sign-date\").html(singDate);\r\n        // if ($(\"#preview-iframe-bill-e\").contents().find(\".seler-sign-name\")[0])\r\n        //   $('#preview-iframe-bill-e').contents().find(\".seler-sign-name\").html(this.currentUser.account.name);\r\n      }\r\n    }\r\n    ////////Thông tin mẫu số, ký hiệu ,số hóa đơn\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".number-form\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".number-form\").html(this.template.template_code);\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".symbol\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".symbol\").html(this.template.invoice_series);\r\n    if ($('#preview-iframe-bill-e').contents().find(\".symbol-number-form\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".symbol-number-form\").html(this.template.template_code + this.template.invoice_series.toUpperCase());\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".invoice-number\")[0] && this.frmData.bill_number)\r\n      $('#preview-iframe-bill-e').contents().find(\".invoice-number\").html(this.frmData.bill_number);\r\n    else\r\n      $('#preview-iframe-bill-e').contents().find(\".invoice-number\").html(\"\");\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".invoice-date\")[0] && this.frmData.bill_date)\r\n      $('#preview-iframe-bill-e').contents().find(\".invoice-date\").html(moment(this.frmData.bill_date).format('DD/MM/YYYY'));\r\n    else\r\n      $('#preview-iframe-bill-e').contents().find(\".invoice-date\").html(\"\");\r\n    /* Mã cơ quan thuế */\r\n    if (this.template.is_decree_new) {\r\n      if (this.template.is_invoice_with_code) {\r\n        $('#preview-iframe-bill-e').contents().find(\".tax_authority_code\").css('display', 'block');\r\n      }\r\n      else\r\n        $('#preview-iframe-bill-e').contents().find(\".tax_authority_code\").css('display', 'none');\r\n    }\r\n    /////////Tên học sinh\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-9c103984-576d-c322-7843-bdacf97bd888\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-9c103984-576d-c322-7843-bdacf97bd888\").html(this.frmData.buyer_tax_code);\r\n    ///// mã số thuế bên mua\r\n    ///cccd\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-86679804-89b9-42e3-b173-9059da407f64\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-86679804-89b9-42e3-b173-9059da407f64\").html(this.frmData.id_card);\r\n    // tên người mua\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-9c103984-576d-c322-7843-bdacf97ac189\")[0]) {\r\n      let name = ''\r\n      if (this.frmData.customer_name) {\r\n        name = this.frmData.customer_name\r\n      } else {\r\n        name = this.frmData.buyer_name\r\n      }\r\n      $('#preview-iframe-bill-e').contents().find(\".value-9c103984-576d-c322-7843-bdacf97ac189\").html(name);\r\n    }\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-8d903984-576d-c322-7843-bdacf97ac100\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-8d903984-576d-c322-7843-bdacf97ac100\").html(this.frmData.buyer_tax_code);\r\n    //////// Địa chỉ bên mua\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-7c103984-576d-c322-7843-bdacf97ac189\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-7c103984-576d-c322-7843-bdacf97ac189\").html(this.frmData.buyer_address);\r\n    /////// Hình thức thanh toán\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-3a9f145a-549a-01ea-e507-cc7b0ab28a69\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-3a9f145a-549a-01ea-e507-cc7b0ab28a69\").html(this.frmData.buyer_tax_code);\r\n    ////// Tài khoản bên mua\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-d0f2a367-8ca8-006a-eb0c-cf3261f00a1c\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-d0f2a367-8ca8-006a-eb0c-cf3261f00a1c\").html(this.frmData.buyer_tax_code);\r\n    /////// Ghi chú trên hóa đơn\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00a1c\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00a1c\").html(this.frmData.note);\r\n    /////// Tên đơn vị \r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-8c103984-576d-c322-7843-bdacf97ac189\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-8c103984-576d-c322-7843-bdacf97ac189\").html(this.frmData.buyer_tax_code);\r\n    ////// Lớp\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-7d873098-576d-c322-7843-bdacf97ac100\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-7d873098-576d-c322-7843-bdacf97ac100\").html(this.frmData.buyer_tax_code);\r\n    /// Mã tra cứu\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".matracuu\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".matracuu\").html(this.frmData.buyer_tax_code);\r\n    /* Loại tiền */\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00999\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00999\").html(this.frmData.currency_code);\r\n\r\n    $('#preview-iframe-bill-e').contents().find('.detail').css({ display: 'block' });\r\n    ////////Fill thông tin hàng hóa\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-8l873098-576d-c322-7843-bdacf97ac100\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-8l873098-576d-c322-7843-bdacf97ac100\").html(this.frmData.bill_products[0].product_name);\r\n    let format;\r\n    let displayInt = this.formatter.display_int ? this.formatter.display_int : (this.configs.display_int ? this.configs.display_int : false);\r\n    format = this.configs.decpoint_is_dot ? { decimal: \".\", thousands: \",\", display_int: displayInt } : { decimal: \",\", thousands: \".\", display_int: displayInt };\r\n\r\n    let decimal_quatity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n    // let decimal_number_real_export = VChanggeMoneyService.getFormatterToNumber(formatter.so_luong);\r\n    // let decimal_number_real_import = VChanggeMoneyService.getFormatterToNumber(formatter.so_luong);\r\n\r\n    let decimal_price = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia);\r\n    let decimal_price_nte = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia_nte);\r\n    let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n    let decimal_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.vat);\r\n    let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n    if (_index == 1) {\r\n\r\n      this.trRow = \"\";\r\n      this.frmData.bill_products.forEach(product => {\r\n        this.trRow += '<tr class=\"detail-data font-color-data text-left\">';\r\n        this.trRow += '<td style=\"height: \"' + heightRow + '\" colspan=\"3\" align=\"left\"><span class=\"valueTenHangHoa\">' + product.product_name + '</span></td>';\r\n        this.trRow += '</tr>';\r\n        this.trRow += '<tr class=\"detail-data font-color-data text-left\">';\r\n        var ths = $(\"#preview-iframe-bill-e\").contents().find(\"#tbDetail\").find(\"th\");\r\n        for (var j = 0; j < ths.length; j++) {\r\n          let className = ths[j].className;\r\n          switch (className) {\r\n            case \"columnSTT\":\r\n              if ($(\"#preview-iframe-bill-e\").contents().find(\".columnSTT\")[0])\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center\"><span class=\"valueSTT\">' + product.order + '</span></td>';\r\n              break;\r\n\r\n            case \"name-1a783984-576d-c322-7843-bdacf97ac189\":\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center name-1a783984-576d-c322-7843-bdacf97ac189 columnMaHangHoa\"><span class=\"valueMaHangHoa\">' + product.product_code + '</span></td>';\r\n              break;\r\n\r\n            case \"columnTenHangHoa\":\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\"><span class=\"valueTenHangHoa\">' + product.product_name + '</span></td>';\r\n              break;\r\n            case \"columnSoLuong\":\r\n              let quantity = product.quantity ? Helper.formatMoney(product.quantity, decimal_quatity, format) : \"\";\r\n              if (product.unit_code) {\r\n                let unit_name = this.select.unit_codes.find(item => item.code === product.unit_code).name\r\n                quantity += \" \" + unit_name;\r\n              }\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number-center\"><span class=\"valueSoLuong\" style=\"word-wrap: normal; width:100%\">' + quantity + '</span></td>';\r\n              break;\r\n\r\n            case \"columnDonGia\":\r\n              let price = product.price ? Helper.formatMoney(product.price, decimal_price, format) : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueDonGia\">' + price + '</span></td>';\r\n              break;\r\n\r\n            case \"columnThueSuatGTGT\":\r\n              let vat = product.vat ? product.vat : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number-center\"><span class=\"valueThueSuatGTGT\">' + vat + '</span></td>';\r\n              break;\r\n\r\n            case \"columnTienThueGTGT\":\r\n              let amount_vat = product.amount_vat ? product.amount_vat : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueTienThueGTGT\">' + amount_vat + '</span></td>';\r\n              break;\r\n\r\n\r\n\r\n            case \"columnThanhTien\":\r\n              let amount = product.amount ? Helper.formatMoney(product.amount, decimal_amount, format) : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueThanhTien\">' + amount + '</span></td>';\r\n              break;\r\n\r\n            case \"columnThanhTienSauThue\":\r\n              let amount_after_vat = product.amount_after_vat ? product.amount_after_vat : \"\";\r\n              this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueThanhTienSauThue\">' + amount_after_vat + '</span></td>';\r\n              break;\r\n\r\n          }\r\n        }\r\n        this.trRow += '</tr>';\r\n      });\r\n    }\r\n    $(\"#preview-iframe-bill-e\").contents().find(\".tbody-content-detail\").append($(this.trRow));\r\n\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_HH_DV_GTGT_KHONG_THUE\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_HH_DV_GTGT_KHONG_THUE\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_HH_DV_GTGT0\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_HH_DV_GTGT0\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_HH_DV_GTGT5\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_HH_DV_GTGT5\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_HH_DV_GTGT10\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_HH_DV_GTGT10\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TONG_TIEN_HH_DV_GTGT\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TONG_TIEN_HH_DV_GTGT\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_THUE_GTGT\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_THUE_GTGT\").html(this.template.symbol_no_vat);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_THUE_GTGT0\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_THUE_GTGT0\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_THUE_GTGT5\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_THUE_GTGT5\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_THUE_GTGT10\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_THUE_GTGT10\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TONG_TIEN_THUE_GTGT\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TONG_TIEN_THUE_GTGT\").html(this.frmData.total_amount_vat);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_THANH_TOAN_KHONG_THUE\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_THANH_TOAN_KHONG_THUE\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_THANH_TOAN_GTGT0\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_THANH_TOAN_GTGT0\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_THANH_TOAN_GTGT5\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_THANH_TOAN_GTGT5\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TIEN_THANH_TOAN_GTGT10\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TIEN_THANH_TOAN_GTGT10\").html(this.frmData.amount);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".TONG_TIEN_THANH_TOAN\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".TONG_TIEN_THANH_TOAN\").html(this.frmData.amount_after_vat);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".total-amount-product-without-vat\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".total-amount-product-without-vat\").html(Helper.formatMoney(this.frmData.amount, decimal_amount, format));\r\n\r\n    if (this.frmData.bill_products[0].vat && this.frmData.bill_products[0].vat != -1) {\r\n      if ($(\"#preview-iframe-bill-e\").contents().find(\".vat-percentage\")[0])\r\n        $('#preview-iframe-bill-e').contents().find(\".vat-percentage\").html(this.frmData.bill_products[0].vat + \" %\");\r\n    }\r\n    else\r\n      if ($(\"#preview-iframe-bill-e\").contents().find(\".vat-percentage\")[0])\r\n        $('#preview-iframe-bill-e').contents().find(\".vat-percentage\").html(this.template.symbol_no_vat);\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".total-amount-vat\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".total-amount-vat\").html(Helper.formatMoney(this.frmData.amount_vat, decimal_amount_vat, format));\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".total-payment\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".total-payment\").html(Helper.formatMoney(this.frmData.total_payment, decimal_amount_after_vat, format));\r\n\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".value-1h883984-576d-c322-7843-bdacf97ac189\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".value-1h883984-576d-c322-7843-bdacf97ac189\").html(this.frmData.total_payment_word);\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".tien-khach-tra\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".tien-khach-tra\").html(Helper.formatMoney(this.frmData.cash, decimal_amount_vat, format));\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".tien-tra-lai-khach\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".tien-tra-lai-khach\").html(Helper.formatMoney(this.frmData.returns, decimal_amount_vat, format));\r\n    if ($(\"#preview-iframe-bill-e\").contents().find(\".total-payment-word\")[0])\r\n      $('#preview-iframe-bill-e').contents().find(\".total-payment-word\").html(this.frmData.total_amount_vat);\r\n\r\n    ///The End\r\n\r\n    let htmlAfter = `<html xmlns:inv=\"http://laphoadon.gdt.gov.vn/2014/09/invoicexml/v1\" xmlns:user=\"http://mycompany.com/mynamespace\"\r\n          xmlns:sign=\"http://www.w3.org/2000/09/xmldsig#\">`+ this.iframe.contentDocument.documentElement.innerHTML + \"</html></br></br></br>\";\r\n    arrayHtml += htmlAfter;\r\n\r\n    this.arrHtml = arrayHtml;\r\n  }\r\n  createRowData(countRow) {\r\n    for (let i = 0; i < countRow; i++) {\r\n      this.trRow += '<tr class=\"detail-data font-color-data text-left\">';\r\n      var ths = $(\"#preview-iframe-bill-e\").contents().find(\"#tbDetail\").find(\"th\");\r\n      for (var j = 0; j < ths.length; j++) {\r\n        let className = ths[j].className;\r\n        let column = this.arrColumns.filter(p => p.name == className)[0];\r\n        if (column) {\r\n          let valueColumn = column.value;\r\n          let height = column.height;\r\n          if (this.template.paper_size == sEnum.paperSizes.A5Ngang)\r\n            height = \"18px\";\r\n          if (i > 0)\r\n            valueColumn = '';\r\n          if ($(\"#preview-iframe-bill-e\").contents().find(\".\" + column.name)[0])\r\n            this.trRow += '<td style=\"height: ' + height + ';\"' + ' class=\"' + column.class + '\"><span class=\"' + valueColumn + '\"></span></td>';\r\n        }\r\n      }\r\n      this.trRow += '</tr>';\r\n    }\r\n  }\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm()) {\r\n        return;\r\n      }\r\n      let data = this.billService.taodulieuXemTruocMau(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n  async inhoadon() {\r\n    if (this.listTempPrint.length > 0) {\r\n      if (this.listTempPrint.length > 1) {\r\n        if (this.isPrint) {\r\n          this.getTemplate(this.templatePrinId)\r\n          if (this.template && this.template.number_of_row > 0) {\r\n            await this.handleFormData();\r\n            if (!this._validForm()) {\r\n              return;\r\n            }\r\n            Library.showloading();\r\n            this.createFormTypeBase64(true);\r\n            let html = Base64.encode(this.arrHtml);\r\n            this.socketService.inFileHtml(() => this.connectWebsocket(), html)\r\n            setTimeout(() => {\r\n              this.isPrint = false;\r\n              Library.hideloading();\r\n            }, 300);\r\n          }\r\n        } else {\r\n          this.showPopupIn = true;\r\n        }\r\n      } else {\r\n        if (this.template && this.template.number_of_row > 0) {\r\n          await this.handleFormData();\r\n          if (!this._validForm()) {\r\n            return;\r\n          }\r\n          Library.showloading();\r\n          this.createFormTypeBase64(true);\r\n          let html = Base64.encode(this.arrHtml);\r\n          this.socketService.inFileHtml(() => this.connectWebsocket(), html)\r\n          setTimeout(() => {\r\n            Library.hideloading();\r\n          }, 300);\r\n        }\r\n      }\r\n    } else {\r\n      Library.notify('Chưa có mẫu phiếu tính tiền', 'error')\r\n    }\r\n  }\r\n\r\n  handleFormData() {\r\n    if (this.frmData.bill_options) {\r\n      this.frmData.bill_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    this.frmData.total_payment = this.frmData.amount_after_vat;\r\n    this.frmData.currency_code = 'VND';\r\n    this.frmData.currency_rate = 1;\r\n    // this.frmData.buyer_address = null;\r\n    if (!this.frmData.auto_value) {\r\n      delete this.frmData.tax_information;\r\n    }\r\n    if (this.loaiHoaDon == '02GTTT') {\r\n      delete this.frmData.tax_information;\r\n    }\r\n    this.deleteProperties();\r\n    this.tempKiFile = 0;\r\n    const bill_products = [];\r\n    this.bill_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        delete item.error;\r\n        delete item.price_after_vat;\r\n        delete item.number_real_import;\r\n        delete item.number_real_export;\r\n        delete item.amount_without_discount;\r\n        delete item.price_after_discount\r\n        if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n          if (VStringService._getValueToString(this.pkInvoiceCurrent) != \"\")\r\n            item.id = Helper.makeid();\r\n          bill_products.push(item);\r\n        }\r\n      });\r\n      this.frmData.bill_products = bill_products;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n    });\r\n  }\r\n  onNumberChange() {\r\n    VChanggeMoneyService._calTotalMoney(this.frmData, this.formatter, !this.frmData.auto_value);\r\n  }\r\n  totalPaymentChange = (e) => {\r\n    this.onNumberChange();\r\n    this.frmData.cash = this.frmData.amount_after_vat\r\n    if (this.frmData.auto_value) {\r\n      this.frmData.amount_after_vat = this.frmData.total_payment;\r\n      this.frmData.returns = this.frmData.cash - this.frmData.amount_after_vat;\r\n    }\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    let tien_chu = Helper.tienBangChu(Math.abs(e.value), this.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);//Helper.money(e.value, currency_code);\r\n    this.frmData.total_payment_word = this.invoiceService.docTienAm(e.value, tien_chu, this.configs, currency_code);\r\n  };\r\n  getFormatterToNumber(formatter) {\r\n    const s1 = formatter.replace('0,###', '');\r\n    if (s1 === '') {\r\n      return 0;\r\n    } else {\r\n      const s2 = s1.replace('.', '');\r\n      return s2.split('').length;\r\n    }\r\n  }\r\n  keyDown(e: any) {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n  cashChange(e) {\r\n    if (e.value) {\r\n      this.frmData.returns = this.frmData.cash - this.frmData.amount_after_vat;\r\n    }\r\n  }\r\n  deleteProperties() {\r\n    const frmDataBill: BillModel = new BillModel(1);\r\n    const keyOfBill = Object.keys(frmDataBill);\r\n    const keyOfFrm = Object.keys(this.frmData);\r\n    const formData = this.frmData;\r\n    for (let i = 0; i <= keyOfFrm.length; i++) {\r\n      let error = keyOfBill.includes(keyOfFrm[i]);\r\n      if (!error) {\r\n        delete this.frmData[keyOfFrm[i]]\r\n      }\r\n    }\r\n    delete this.frmData.total_amount_vat;\r\n  }\r\n  onTemplateTypeChange(e) {\r\n    this._objTemplateSelect = e;\r\n    if (!this._objTemplateSelect[\"is_discount\"]) {\r\n      this.bill_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          item.discount = null;\r\n          item.amount_discount = null;\r\n        });\r\n      });\r\n      this.productGrip._tinhGiaTri();\r\n    }\r\n    this.is_multi_vat = e.is_multi_vat;\r\n  }\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    if (this.is_default_template) {\r\n      const initialState = {\r\n        items: ids,\r\n        isXuatHD: false,\r\n        hinhthucxuat: '',\r\n        typeAction: sEnum.typeCode.xem_hoa_don_mtt_html\r\n      };\r\n      this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n    }\r\n    else {\r\n      if (this.configs.system_parameter.view_multi_invoice) {\r\n        let data = this.billService.taodulieuXemMau(ids);\r\n        data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n        this.vPreviewInvService.xemMau(data);\r\n      }\r\n      else {\r\n        const initialState = {\r\n          items: ids,\r\n          isXuatHD: false,\r\n          hinhthucxuat: '',\r\n          typeAction: sEnum.typeCode.xem_hoa_don_mtt,\r\n          cssClass: 'modal-xl view-bill'\r\n        };\r\n        this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n      }\r\n    }\r\n  }\r\n  /* Kết nối đến socket */\r\n  connectWebsocket(type?) {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.sendInvoice(data.Data.Content);\r\n        } else if (data.Data.Name === 'thongdiep.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        }\r\n        else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.xuLiApiKhiXuat();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    let nodeSign = \"//HDon/DSCKS/NBan\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n  }\r\n  kyThongDiep(xmlInvoice, signDate) {\r\n    let ListSerialNumber = \"DSCKS\";\r\n    let nodeSign = \"//TDiep/CKSNNT\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'thongdiep.xml', nodeSign, signDate, 'MessageData', ListSerialNumber, true);\r\n  }\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let xmlInvoice = \"\";\r\n    if (!this.frmData.id) {\r\n      const sub = this.billService.addNew(this.frmData, true).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.bill_number = res.data.bill_number;\r\n          this.frmData.bill_date = moment(res.data.bill_date).format('YYYY-MM-DD HH:mm:ss'); // moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n          let bill_sign_date = moment(res.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.verify_code = res.data.verify_code\r\n          this.frmData.id = res.data.id;\r\n          xmlInvoice = res.data.xml_string;\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n            this.disablleScreen();\r\n          }\r\n          else {\r\n            if (this.configs.system_parameter.is_seller_sign_bill)\r\n              this.xuLyKiFile(xmlInvoice, bill_sign_date);\r\n            else {\r\n              this.info_message = res.data.info_message;\r\n              if (this.info_message && this.info_message.message) {\r\n                xmlInvoice = VStringService._getValueToString(this.info_message.message.message);\r\n                if (xmlInvoice != \"\") {\r\n                  this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (this.hinhThucXuat == 'XUAT_IN') {\r\n            this.inhoadon()\r\n          }\r\n        } else {\r\n          Library.notify(res.message, 'error')\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      const sub = this.billService.edit(this.frmData.id, this.frmData, true).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.bill_number = res.data.bill_number;\r\n          this.frmData.bill_date = moment(res.data.bill_date).format('YYYY-MM-DD HH:mm:ss'); // moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n          this.verify_code = res.data.verify_code\r\n          let bill_sign_date = moment(res.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.frmData.id = res.data.id;\r\n          xmlInvoice = res.data.xml_string;\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n            this.disablleScreen();\r\n          }\r\n          else {\r\n            if (this.configs.system_parameter.is_seller_sign_bill)\r\n              this.xuLyKiFile(xmlInvoice, bill_sign_date);\r\n            else {\r\n              this.info_message = res.data.info_message;\r\n              if (this.info_message && this.info_message.message) {\r\n                xmlInvoice = VStringService._getValueToString(this.info_message.message.message);\r\n                if (xmlInvoice != \"\") {\r\n                  this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (this.hinhThucXuat == 'XUAT_IN') {\r\n            this.inhoadon()\r\n          }\r\n        } else {\r\n          Library.notify(res.message, 'error')\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  sendInvoice(xml_string) {\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    let xmlInvoice = \"\";\r\n    const sub = this.billService.sendInvoice({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.info_message = rs.data.info_message;\r\n        let bill_sign_date = moment(rs.data.bill_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (this.info_message && this.info_message.message) {\r\n          xmlInvoice = VStringService._getValueToString(this.info_message.message.message);\r\n          if (xmlInvoice != \"\") {\r\n            this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n          }\r\n        }\r\n      }\r\n      else\r\n        Library.notify(rs.message, 'error');\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  goiApiXuatHoaDon(xml_string) {\r\n    if (this.info_message && this.info_message.message) {\r\n      setTimeout(function () {\r\n        Library.showloading();\r\n      }, 20);\r\n      const sub = this.billService.sendMessage({\r\n        id: this.frmData.id,\r\n        info_message: {\r\n          message: {\r\n            message: xml_string,\r\n            message_code: this.info_message.message.message_code\r\n          },\r\n          tcntCode: this.info_message.tcntCode,\r\n          messageCodeType: this.info_message.messageCodeType\r\n        }\r\n      }).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n          this.disablleScreen();\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  /* Tạo mới */\r\n  handleAddNew() {\r\n    this.addNew();\r\n  }\r\n  /* Tạo mới */\r\n  addNew() {\r\n    const inv = Object.assign({}, this.frmData);\r\n    this.frmData = new BillModel(1);\r\n    this.frmData.bill_date = null;\r\n    this.frmData.template_id = inv.template_id;\r\n    this.frmData.currency_code = inv.currency_code;\r\n    this.frmData.template_code = inv.template_code;\r\n    this.frmData.bill_options = inv.bill_options;\r\n    this.frmData.bill_series = inv.bill_series;\r\n    this.confirmCheckPreview = false;\r\n    setTimeout(() => {\r\n      this.bill_products = new ArrayStore({\r\n        key: 'id',\r\n        data: this.frmData.bill_products_data()\r\n      });\r\n      this.dataSource = new DataSource({\r\n        store: this.bill_products\r\n      });\r\n    }, 1);\r\n    this.formInvoice.resetTMR();\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n    this.productGrip.createUpdateEvent();\r\n    this.formInvoice.removeReadonlyAllForm();\r\n    this.formInvoice.emails = [];\r\n    this.ttDaXuatHoaDon = false;\r\n    setTimeout(() => {\r\n      this.formInvoice.changePayment_method_code(this.select.templatesTT78.find(item => item.value == this.frmData.template_id))\r\n    }, 10);\r\n  }\r\n  onPrintTempChanged(e) {\r\n    this.templatePrinId = e.value\r\n  }\r\n  huy() {\r\n    this.showPopupIn = false;\r\n  }\r\n  print() {\r\n    this.isPrint = true;\r\n    this.showPopupIn = false;\r\n    setTimeout(() => {\r\n      this.inhoadon();\r\n    }, 200);\r\n  }\r\n  guideSales() {\r\n    this.isDisplayGuideSale = !this.isDisplayGuideSale;\r\n  }\r\n  onChangeSalePercen(e) {\r\n    this.configs.system_parameter.value_rate_percent = e.value;\r\n    let data = {\r\n      config: {\r\n        value: JSON.stringify(this.configs.system_parameter)\r\n      }\r\n    };\r\n    this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n      if (response.status == \"success\") {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n          this.configs = this.authService.getConfigs();\r\n        });\r\n      } else {\r\n      }\r\n    }, err => { }, () => {\r\n    });\r\n    if (this.productGrip)\r\n      this.productGrip._tinhGiaTri();\r\n  }\r\n  /* In chuyển đổi */\r\n  inChuyenDoi() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    const data = this.billService.taodulieuInChuyenDoi(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n  /* Xem/In chuyển đổi */\r\n  inChuyenDoiText() {\r\n    if (this.frmData.time_print_conversion > 0) {\r\n      return this._translate.CONTROLL.BUTTON.view_conversion;\r\n    } else {\r\n      return this._translate.CONTROLL.BUTTON.print_conversion;\r\n    }\r\n  }\r\n  ttInChuyenDoi() {\r\n    return this.frmData.status == 'DA_TIEP_NHAN'\r\n  }\r\n}","module.exports = \"<!--phần table hiển thị-->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\" style=\\\"padding: 15px 20px;\\\">\\r\\n    <!-- Thêm dòng -->\\r\\n    <div class=\\\"pull-left\\\">\\r\\n      <div style=\\\"float: left;width:  30%; padding-top: 4px\\\">{{ _translate.CONTROLL.BUTTON.add_row }}</div>\\r\\n      <div style=\\\"float: left; width: 30%\\\">\\r\\n        <dx-number-box #numberBox [max]=\\\"100\\\" [min]=\\\"1\\\" [showSpinButtons]=\\\"true\\\" [(value)]=\\\"rowData\\\"></dx-number-box>\\r\\n      </div>\\r\\n      <div>\\r\\n        <dx-button style=\\\"height: 27px\\\" icon=\\\"fa fa-plus-circle\\\" type=\\\"default\\\" text=\\\"\\\" (onClick)=\\\"addRow()\\\">\\r\\n        </dx-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <!-- Hóa đơn bán hàng NQ 43 -->\\r\\n      <dx-check-box *ngIf=\\\"!isHdGTGT\\\" style=\\\"margin-right: 20px\\\" [(value)]=\\\"formDataInInvoice.is_resolution_43\\\"\\r\\n        text=\\\"{{ _translate.THONG_TIN.giam_thue_theo_nq43 }}\\\" (onValueChanged)=\\\"_changeNQ43($event)\\\"></dx-check-box>\\r\\n      <dx-check-box class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\"\\r\\n        [(value)]=\\\"formDataInInvoice.auto_value\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <dx-menu [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\"\\r\\n        (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n      </dx-menu>\\r\\n      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n      style=\\\"display: none;\\\" />\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onCellPrepared)=\\\"onCellPrepared($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"!ttDaXuatHoaDon\\\"></dxo-editing>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxo-scrolling mode=\\\"virtual\\\">\\r\\n      </dxo-scrolling>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"order\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column cssClass=\\\"overlay-content123\\\" dataField=\\\"product_code\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_code }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n        alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [editorOptions]=\\\"{showClearButton: true}\\\">\\r\\n        <dxo-lookup *ngIf=\\\"reloadSelectProduct\\\" [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"product_name\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\" alignment=\\\"left\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Khuyến mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.promotional_goods_on_the_invoice\\\" cellTemplate=\\\"khuyen_mai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.promotion }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Chiết khấu thương mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.commercial_discount\\\" cellTemplate=\\\"cktm\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.commercial_discount }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Đơn vị tính -->\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\" dataType=\\\"number\\\" alignment=\\\"center\\\"  [editorOptions]=\\\"{ format: formatter.so_luong,step: '0' }\\\"\\r\\n        [format]=\\\"formatter.so_luong\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\" [editorOptions]=\\\"{ format: formatter.don_gia,step: '0' }\\\"\\r\\n        [format]=\\\"formatter.don_gia\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Chiết khấu -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"_objTemplateSelect && _objTemplateSelect.is_discount\\\"\\r\\n        dataField=\\\"discount\\\" headerCellTemplate=\\\"discountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.chiet_khau }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.ty_le_chiet_khau,step: '0' }\\\" [format]=\\\"formatter.ty_le_chiet_khau\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Tiền chiết khấu -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"_objTemplateSelect && _objTemplateSelect.is_discount\\\"\\r\\n        dataField=\\\"amount_discount\\\" headerCellTemplate=\\\"amount_discountHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\" [editorOptions]=\\\"{ format: formatter.tien_chiet_khau }\\\"\\r\\n        [format]=\\\"formatter.tien_chiet_khau\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\"></dxi-column>\\r\\n\\r\\n      <!--      <dxi-column *ngIf=\\\"isHdGTGT\\\" dataField=\\\"vat\\\" headerCellTemplate=\\\"vatHeader\\\"-->\\r\\n      <!--                  minWidth=\\\"{{ _translate.GRID_WIDTH.vat }}\\\" alignment=\\\"center\\\"-->\\r\\n      <!--                  [editorOptions]=\\\"{showClearButton: true ,step: '0'}\\\">-->\\r\\n      <!--      </dxi-column>-->\\r\\n\\r\\n      <dxi-column dataField=\\\"vat\\\" headerCellTemplate=\\\"vatHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\"\\r\\n        alignment=\\\"center\\\" *ngIf=\\\"isHdGTGT\\\" [editorOptions]=\\\"{showClearButton: true ,step: '0'}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount_vat\\\" headerCellTemplate=\\\"amountVatHeader\\\" *ngIf=\\\"isHdGTGT\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tien_thue, step: '0' }\\\" [format]=\\\"formatter.tien_thue\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tong_tien, step: '0' }\\\" [format]=\\\"formatter.tong_tien\\\">\\r\\n      </dxi-column>\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.quantity }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.total_money }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_explain\\\" [disabled]=\\\"d.data.is_promotion\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'khuyen_mai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_explain\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n    \\r\\n      <div *dxTemplate=\\\"let d of 'is_transport_number'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_transport_number\\\"></dx-check-box>\\r\\n      </div>\\r\\n\\r\\n      <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\" (onValueChanged)=\\\"changeCKTM(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ty_le_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amount_discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'product_code'\\\">\\r\\n        <dxi-item editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.productsView, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n      </div>\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div>\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.import_type }}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"thayTheToanBo()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all }}\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"themTiep()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:20px;margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:8px}.support-invoice .support-link img,.support-invoice .support-link i{margin-right:15px;margin-top:-2px}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .styleItemToList{color:dodgerblue}.button-dropdown-extend{display:inline-flex}.pull-right .auto-input{margin-right:75px !important}\\n\"","import { AfterViewInit, Component, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { Subscription } from 'rxjs';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { AuthService } from '@core/services';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Helper } from '@core/helper/Helper';\r\nimport { ConfigDecimalComponent } from '@shared/modules/vat-shared/components/config-decimal/config-decimal.component';\r\nimport { VChanggeMoneyService } from '@core/library/invoice/v-changge-money.service';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport { BillModel } from '@modules/bill-invoice/shared/bill.model';\r\nimport { Library, sEnum, VStringService } from '@core/index';\r\nimport { pattern } from '@config/pattern';\r\nimport * as XLSX from 'xlsx';\r\nimport { element } from 'protractor';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n\r\n@Component({\r\n  selector: 'bill-product-grip',\r\n  templateUrl: './product-grip.component.html',\r\n  styleUrls: ['./product-grip.component.scss']\r\n})\r\nexport class ProductGripComponent implements OnInit, AfterViewInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  _translate: any;\r\n  select: any = {};\r\n  bsModalRef: BsModalRef;\r\n  configs: any;\r\n  reloadSelectProduct = true;\r\n  extras = [];\r\n  dataExcelFile: any = null;\r\n  dataExcelFileInfo: any = null;\r\n  showPopup = false\r\n  routeSub: Subscription;\r\n  frmData: BillModel = new BillModel(1);\r\n  amount_after_vat: any = 0;\r\n  ttDaXuatHoaDon = false;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  @Input() dataSource: any;\r\n  @Input() formDataInInvoice: any;\r\n  @Input() bill_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() isHdGTGT: any;\r\n  rowData = 1;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private billService: BillService,\r\n    private modalService: BsModalService,\r\n    private productsService: ProductsService,\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      let oDuplicate = this.select.unit_codes.filter(p => p.code === newItem.code)[0];\r\n      if (oDuplicate)\r\n        newItem.code = newItem.code + Helper.addtionalUnitCode();\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      const products = data.init[0];\r\n      let isEdit = false;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      this.select.products = products;\r\n      this.select.productsView = {\r\n        store: new CustomStore({\r\n          key: 'code',\r\n          loadMode: 'raw',\r\n          load: (loadOptions) => {\r\n            return this.select.products;\r\n          },\r\n          byKey: function (key) {\r\n            const _data = data.init[0].filter(p => p.code === key.toString());\r\n            return _data;\r\n          }\r\n        }),\r\n        paginate: true,\r\n        sort: 'name'\r\n      };\r\n      this.select.products.forEach(item => {\r\n        item.mhvth = item.code + ': ' + item.name;\r\n      });\r\n      this.bill_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (item.product_name && item.unit_name) {\r\n            const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n            if (!obj1) {\r\n              if (VStringService._getValueToString(item.unit_code) == \"\")\r\n                item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n              let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (oDuplicate)\r\n                item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n              this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n            }\r\n            else {\r\n              if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n                let oExistUnitCode = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n                if (!oExistUnitCode)\r\n                  this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n      const loaiHoaDon = data.type;\r\n      if (loaiHoaDon === sEnum.loaihoadon.GTKT01) {\r\n        this.isHdGTGT = true;\r\n      } else {\r\n        this.isHdGTGT = false;\r\n      }\r\n    })\r\n    this.createUpdateEvent();\r\n  }\r\n  _tinhGiaTri() {\r\n    setTimeout(() => {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.bill_products, this.formDataInInvoice, this.formatter, !this.formDataInInvoice.auto_value, this.formDataInInvoice.auto_value_price, this.select, this._objTemplateSelect, this.configs.system_parameter);\r\n      this.amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n      this.formDataInInvoice.amount_vat = this.formDataInInvoice.total_amount_vat;\r\n      this.handleVat(this.formDataInInvoice);\r\n      this.dataGrid.instance.refresh();\r\n    }, 0);\r\n  }\r\n  handleVat(data) {\r\n    let tax_information = []\r\n    if (data.amount_vat0 === 0) {\r\n      tax_information.push({\r\n        \"vat\": \"0\",\r\n        \"amount\": data.total_amount_product_vat0,\r\n        \"amount_vat\": data.amount_vat0,\r\n        \"amount_after_vat\": data.amount_after_vat0\r\n      })\r\n    }\r\n    if (data.amount_vat5) {\r\n      tax_information.push({\r\n        \"vat\": \"5\",\r\n        \"amount\": data.total_amount_product_vat5,\r\n        \"amount_vat\": data.amount_vat5,\r\n        \"amount_after_vat\": data.amount_after_vat5\r\n      })\r\n    }\r\n    if (data.amount_vat10) {\r\n      tax_information.push({\r\n        \"vat\": \"10\",\r\n        \"amount\": data.total_amount_product_vat10,\r\n        \"amount_vat\": data.amount_vat10,\r\n        \"amount_after_vat\": data.amount_after_vat10\r\n      })\r\n    }\r\n    if (data.amount_vat8) {\r\n      tax_information.push({\r\n        \"vat\": \"8\",\r\n        \"amount\": data.total_amount_product_vat8,\r\n        \"amount_vat\": data.amount_vat8,\r\n        \"amount_after_vat\": data.amount_after_vat8\r\n      })\r\n    }\r\n    if (data.amount_vatx) {\r\n      tax_information.push({\r\n        \"vat\": \"x\",\r\n        \"amount\": data.total_amount_product_vatx,\r\n        \"amount_vat\": data.amount_vatx,\r\n        \"amount_after_vat\": data.amount_after_vatx\r\n      })\r\n    }\r\n    if (data.amount_vat_other) {\r\n      tax_information.push({\r\n        \"vat\": \"KHAC\",\r\n        \"amount\": data.total_amount_product_vat_other,\r\n        \"amount_vat\": data.amount_vat_other,\r\n        \"amount_after_vat\": data.amount_after_vat0\r\n      })\r\n    }\r\n    this.formDataInInvoice.tax_information = tax_information;\r\n  }\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.column.dataField == \"product_code\") {\r\n        if (VStringService._getValueToString(e.data.product_code) != \"\" && !this.productCodePattern.test(e.data.product_code)) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.VALIDATION.required_productCode;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n      const eles = e.rowElement.getElementsByTagName('td');\r\n      if (!e.isEditing) {\r\n        if (eles) {\r\n          for (let i = 0; i < eles.length; i++) {\r\n            if (eles[i].className.includes('dinh-khoan'))\r\n              eles[i].innerHTML = e.data.provisions_on_accounts;\r\n          }\r\n          eles[2].innerHTML = e.data.product_code;\r\n        }\r\n      }\r\n      if (e.data.error) {\r\n        const ele = eles[eles.length - 1];\r\n        ele.style.background = 'red url(\\'assets/img/icons/fa-remove.png\\') no-repeat 2% center';\r\n        ele.title = e.data.error;\r\n      }\r\n    }\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'product_code') {\r\n        e.editorOptions.onOpened = function (arg) {\r\n          const popupInstance = arg.component._popup;\r\n          popupInstance.option('width', 400);\r\n          popupInstance.option('minWidth', 400);\r\n        };\r\n      }\r\n      if (e.dataField === 'product_name') {\r\n        e.editorName = 'dxTextArea';\r\n      }\r\n    }\r\n  }\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount' || e.dataField === 'amount_vat' || e.dataField === 'amount_after_vat') && e.parentType === 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n  onContextMenuPreparing(e) {\r\n\r\n  }\r\n  deleteRow(item) {\r\n    setTimeout(() => {\r\n      const check = confirm(this._translate.CONFIRM.delete);\r\n      if (check && !this.ttDaXuatHoaDon) {\r\n        setTimeout(() => {\r\n          this.bill_products.remove(item.id);\r\n          this.dataGrid.instance.refresh();\r\n          this._tinhGiaTri();\r\n\r\n        }, 100);\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  changeCKTM(row) {\r\n    this._tinhGiaTri();\r\n  }\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte,\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  addRow(rowIndexFocus?) {\r\n    if (rowIndexFocus >= 0) {\r\n      let rowIndex = rowIndexFocus + 1;\r\n      const data = this.frmData.add_invoice_products_data(rowIndex, rowIndex);\r\n      if (data) {\r\n        this.bill_products._array.splice(rowIndex, 0, data);\r\n        let order = 0;\r\n        this.bill_products._array.forEach(item => {\r\n          item.order = ++order;\r\n          item.view_order = item.order;\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      let len, order, orderLast;\r\n      this.bill_products.load().then((dataSource) => {\r\n        len = dataSource.length;\r\n        orderLast = dataSource[len - 1].order;\r\n      });\r\n\r\n      for (let i = 0; i < this.rowData; i++) {\r\n\r\n        if (len >= 1) {\r\n          order = ++orderLast;\r\n        } else {\r\n          order = 1;\r\n        }\r\n        const data = this.frmData.add_invoice_products_data(order, order);\r\n        this.bill_products.insert(data);\r\n      }\r\n    }\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n  // tính tiền \r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n  roundNumber(number, n): number {\r\n    let p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n  createUpdateEvent() {\r\n    setTimeout(() => {\r\n      this.bill_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        if (value.product_code !== 'add') {\r\n          this.bill_products.byKey(key).then((row) => {\r\n            switch (column) {\r\n              case 'view_order':\r\n                // this.view_orderChange();\r\n                break;\r\n              case 'product_code':\r\n                this.product_codeChange(row);\r\n                break;\r\n              case 'unit_code':\r\n                this.unit_codeChange(row);\r\n                break;\r\n              case 'country_code':\r\n                // this.country_codeChange(row);\r\n                break;\r\n              case 'quantity':\r\n              case 'price':\r\n              case 'price_nte':\r\n              case 'amount':\r\n              case 'amount_vat':\r\n              case 'amount_after_vat':\r\n              case 'amount_discount':\r\n              case 'discount':\r\n              case 'amount_without_discount':\r\n              case 'other_tax':\r\n              case 'other_charge':\r\n              case 'discount_on_price':\r\n                this._tinhGiaTri();\r\n                break;\r\n              case 'price_after_vat':\r\n                if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                  row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                else\r\n                  row.price = row.price_after_vat;\r\n                this._tinhGiaTri();\r\n                break;\r\n              case 'vat':\r\n                if (this.configs.system_parameter.price_after_vat) {\r\n                  if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                    row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                  else\r\n                    row.price = row.price_after_vat;\r\n                }\r\n                this._tinhGiaTri();\r\n                break;\r\n              default:\r\n                break;\r\n              // }\r\n            }\r\n          }, (error) => {\r\n            alert(error);\r\n          });\r\n        } else {\r\n          this.bill_products.remove(key);\r\n          this.addRow(null);\r\n        }\r\n      });\r\n    }, 100);\r\n  }\r\n  product_codeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code === row.product_code) {\r\n        this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              row.product_name = product.name;\r\n              row.unit_code = this.checkUnitCode(product.unit_code);\r\n              row.quantity = null;\r\n              if (this.isHdGTGT) {\r\n                row.vat = product.vat != null ? product.vat.toString() : null;\r\n              } else {\r\n                row.vat = null;\r\n              }\r\n              // if (this.configs.system_parameter.price_after_vat) {\r\n              //   row.price_after_vat = product.price ? parseFloat(product.price) : product.price;\r\n              //   if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n              //     row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n              //   else\r\n              //     row.price = row.price_after_vat;\r\n              // }\r\n              // else\r\n              row.price = product.price ? parseFloat(product.price) : product.price;\r\n              row.amount = product.price ? parseFloat(product.price) : 0;\r\n              if (this.isHdGTGT) {\r\n                row.amount_vat = (row.vat >= 0 || row.vat == -3) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n              } else {\r\n                row.amount_vat = null;\r\n              }\r\n              row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n              let test = this.bill_products;\r\n              this.bill_products.update(row.id, row);\r\n              this._tinhGiaTri();\r\n              return true;\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n  }\r\n  unit_codeChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.bill_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.bill_products.update(row.id, row);\r\n    }\r\n  }\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'LAY_MAU_BANG_KE') {\r\n      this.layMauBangKe();\r\n    } else if (e.itemData.id === 'NAP_DU_LIEU_BANG_KE') {\r\n      this.napDuLieuTuBangKe();\r\n    }\r\n  }\r\n\r\n  // Lấy mẫu bảng kê\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    let fields = [];\r\n\r\n    if (this.configs.system_parameter) {\r\n      // diễn giải\r\n      if (!this.configs.system_parameter.is_promotion) {\r\n        fields.push('is_explain');\r\n      }\r\n      // Khuyễn mại\r\n      if (!this.configs.system_parameter.promotional_goods_on_the_invoice) {\r\n        fields.push('is_promotion');\r\n      }\r\n      // ct khuyến mại\r\n      if (!this.configs.system_parameter.commercial_discount) {\r\n        fields.push('commercial_discount');\r\n      }\r\n    }\r\n\r\n    if (!this.isHdGTGT) {\r\n      fields.push('vat');\r\n      fields.push('amount_vat');\r\n    }\r\n\r\n    this.billService.layFileMauMayTinhTien({\r\n      customer_name: this.formDataInInvoice.customer_name,\r\n      buyer_tax_code: this.formDataInInvoice.buyer_tax_code,\r\n      buyer_address: this.formDataInInvoice.buyer_address,\r\n      buyer_name: this.formDataInInvoice.buyer_name,\r\n      invoice_type_name: '',\r\n      hiddens: fields\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n\r\n\r\n  }\r\n\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById('file-bang-ke').click();\r\n  }\r\n\r\n\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) {\r\n      throw new Error('Không thể chọn nhiều file');\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n    reader.readAsBinaryString(target.files[0]);\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      const data = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 10 }));\r\n      const account = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 0 }));\r\n      const fileBangKe: any = document.getElementById('file-bang-ke');\r\n\r\n\r\n      fileBangKe.value = '';\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"view_order\")\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n      }\r\n      this.dataExcelFile = _arrData;\r\n      this.dataExcelFileInfo = account.slice(0, 5);\r\n      this.showPopup = true;\r\n    };\r\n  }\r\n\r\n\r\n  thayTheToanBo() {\r\n    this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'thaythe');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  themTiep() {\r\n    this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  fillData(fileData, info, status) {\r\n    if (info.length === 5) {\r\n      const customer_name = info[0].A.split(':');\r\n      if (customer_name.length > 1 && customer_name[1].trim() != '') {\r\n        this.formDataInInvoice.customer_name = customer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_tax_code = info[1].A.split(':');\r\n      if (buyer_tax_code.length > 1 && buyer_tax_code[1].trim() != '') {\r\n        this.formDataInInvoice.buyer_tax_code = buyer_tax_code[1].trim();\r\n      }\r\n      ////\r\n      const buyer_name = info[2].A.split(':');\r\n      if (buyer_name.length > 1 && buyer_name[1].trim() != '') {\r\n        this.formDataInInvoice.buyer_name = buyer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_address = info[3].A.split(':');\r\n      if (buyer_address.length > 1 && buyer_address[1].trim() != '') {\r\n        this.formDataInInvoice.buyer_address = buyer_address[1].trim();\r\n      }\r\n      ////\r\n      const id_card = info[4].A.split(':');\r\n      if (id_card.length > 1 && id_card[1].trim() != '') {\r\n        this.formDataInInvoice.id_card = id_card[1].trim();\r\n      }\r\n    }\r\n\r\n    if (status === 'thaythe') {\r\n      this.bill_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.bill_products.remove(item.id)\r\n        })\r\n      })\r\n    } else {\r\n      this.bill_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount) {\r\n            this.bill_products.remove(item.id)\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    fileData.forEach(element => {\r\n      if (element.product_name) {\r\n        let bill = new Object();\r\n        bill['id'] = Helper.makeid();\r\n        bill['order'] = element.view_order ? parseInt(element.view_order) : null;\r\n        bill['product_code'] = element.product_code ? element.product_code : \"\";\r\n        bill['product_name'] = element.product_name ? element.product_name : \"\";\r\n        bill['quantity'] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        bill['vat'] = (element.vat && this.isHdGTGT) ? element.vat : null;\r\n        bill[\"amount_vat\"] = element.amount_vat ? Helper.toNumber(element.amount_vat) : null;\r\n        bill['amount'] = element.amount ? Helper.toNumber(element.amount) : null;\r\n        bill[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        bill[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        bill[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n\r\n        if (bill[\"amount_vat\"] !== null && bill[\"amount\"] !== null)\r\n          bill[\"amount_after_vat\"] = bill[\"amount_vat\"] + bill[\"amount\"];\r\n        else\r\n          if (bill[\"amount\"] !== null)\r\n            bill[\"amount_after_vat\"] = bill[\"amount\"];\r\n          else\r\n            if (bill[\"amount_vat\"] !== null)\r\n              bill[\"amount_after_vat\"] = bill[\"amount_vat\"];\r\n            else\r\n              bill[\"amount_after_vat\"] = null;\r\n\r\n\r\n        bill[\"is_explain\"] = element.is_explain && (element.is_explain == \"X\" || element.is_explain == \"x\") ? true : false;\r\n        bill[\"is_promotion\"] = element.is_promotion && (element.is_promotion == \"X\" || element.is_promotion == \"x\") ? true : false;\r\n        bill[\"commercial_discount\"] = element.commercial_discount && (element.commercial_discount == \"X\" || element.commercial_discount == \"x\") ? true : false;\r\n\r\n\r\n        const _obj = this.select.products.filter(p => p.code === bill[\"product_code\"])[0];\r\n        if (!_obj && bill[\"product_code\"] !== '') {\r\n          const _objPush = {\r\n            code: bill[\"product_code\"],\r\n            name: bill[\"product_name\"],\r\n            mhvth: bill[\"product_code\"] + ': ' + bill[\"product_name\"],\r\n          };\r\n          this.select.products.push(_objPush);\r\n        }\r\n\r\n        this.bill_products.insert(bill);\r\n      }\r\n    })\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataGrid.instance.refresh();\r\n    this._tinhGiaTri();\r\n    Library.hideloading();\r\n  }\r\n\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (!this.select.unit_codes || this.select.unit_codes.length == 0)\r\n        this.select.unit_codes = []\r\n      // if (this.select.unit_codes && Array.isArray(this.select.unit_codes)) {\r\n      const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n      if (_obj) {\r\n        return _obj.code;\r\n      } else {\r\n        let code = VStringService._convertToViKdau(unitName);\r\n        let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n        if (oDuplicate)\r\n          code = code + Helper.addtionalUnitCode();\r\n        this.select.unit_codes.push({ code: code, name: unitName });\r\n        return code;\r\n      }\r\n      // } else {\r\n      //   this.select.unit_codes = [];\r\n      // }\r\n    }\r\n    return null;\r\n  }\r\n  _changeNQ43(e) {\r\n    if (e.value) {\r\n      if (this.formDataInInvoice.sales_percentage == null && parseInt(this.configs.system_parameter.value_rate_percent) > 0) {\r\n        this.formDataInInvoice.sales_percentage = parseInt(this.configs.system_parameter.value_rate_percent);\r\n      }\r\n    }\r\n    else {\r\n      this.formDataInInvoice.sales_percentage = null;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  onContentReady = (e) => {\r\n    const arrFooter = [\r\n      { name: this._translate.GRID.INVOICE_DETAILS.total_money, class: 'table-footer-1' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_vat, class: 'table-footer-2' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount, class: 'table-footer-3' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_without_discount, class: 'table-footer-4' },\r\n    ]\r\n    this.invoiceService.formatSumColumnGrid(arrFooter);\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{ _translate.THONG_TIN.danh_sach_hoa_don_gui_cqt }}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"dong()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid id=\\\"gridContainer\\\" [dataSource]=\\\"invoiceList\\\" [showRowLines]=\\\"true\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n    [columnMinWidth]=\\\"50\\\" [columnResizingMode]=\\\"true\\\" [columnAutoWidth]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\">\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <!-- Số hóa đơn -->\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"bill_number\\\"\\r\\n      caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n      alignment=\\\"center\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Mẫu số -->\\r\\n    <dxi-column dataField=\\\"template_code\\\" caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}\\\" [width]=\\\"110\\\"\\r\\n      alignment=\\\"center\\\"></dxi-column>\\r\\n    <!-- Ký hiệu -->\\r\\n    <dxi-column dataField=\\\"bill_series\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n      [width]=\\\"90\\\" alignment=\\\"center\\\" [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column>\\r\\n    <!-- Ngày hóa đơn -->\\r\\n    <dxi-column dataField=\\\"bill_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\"\\r\\n      minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n      format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Mã số thuế -->\\r\\n    <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n      minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Tên khách hàng -->\\r\\n    <dxi-column [filterOperations]=\\\"['contains']\\\"\\r\\n      cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\" alignment=\\\"left\\\"\\r\\n      minWidth=\\\"200\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Tổng tiền -->\\r\\n    <dxi-column dataField=\\\"total_payment\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" dataType=\\\"number\\\"\\r\\n      format=\\\"0,###.##\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n\\r\\n    <dxi-column cellTemplate=\\\"statusSendTax\\\" caption=\\\"{{ 'GRID.GENERAL.status' | translate }}\\\" [width]=\\\"130\\\"\\r\\n      alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.bill_number\\r\\n        }}</a>\\r\\n    </div>\\r\\n\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p>{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    <a *ngIf=\\\"d.data.status == 'DA_XUAT'\\\" href=\\\"javascript:void(0)\\\">Đã xuất</a>\\r\\n    <a *ngIf=\\\"d.data.status == 'KHONG_DU_DK_CAP_MA'\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">Không đủ\\r\\n      ĐK cấp mã</a>\\r\\n    <a *ngIf=\\\"d.data.status == 'CHUA_GUI_CQT'\\\" href=\\\"javascript:void(0)\\\">Chưa gửi CQT</a>\\r\\n    <a *ngIf=\\\"d.data.status == 'DA_GUI_CQT'\\\" href=\\\"javascript:void(0)\\\">Đã gửi CQT</a>\\r\\n    <a *ngIf=\\\"d.data.status == 'DA_TIEP_NHAN'\\\" href=\\\"javascript:void(0)\\\">CQT đã tiếp nhận</a>\\r\\n    <a *ngIf=\\\"d.data.status == 'KHONG_HOP_LE'\\\" href=\\\"javascript:void(0)\\\" style=\\\"color: red;\\\"\\r\\n      (click)=\\\"LydoKTiepNhan(d.data)\\\">CQT kiểm tra không hợp lệ </a>\\r\\n  </div>\\r\\n\\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button text=\\\"{{_translate.THONG_TIN.gui_cqt}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" *ngIf=\\\"!daXong\\\"\\r\\n    type=\\\"default\\\" (click)=\\\"guiCQT()\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\"\\r\\n    (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".custom-control-label{margin-top:4px;color:red;font-weight:800;font-family:Times New Roman}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}::ng-deep .view-bill{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as moment from 'moment';\r\n\r\nimport { Helper, Library, SocketService, AuthService, VStringService, VPreviewInvService, sEnum } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { BsModalService } from 'ngx-bootstrap';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/components';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n@Component({\r\n  selector: 'app-send-invoice-to-tax',\r\n  templateUrl: './send-invoice-to-tax.component.html',\r\n  styleUrls: ['./send-invoice-to-tax.component.scss']\r\n})\r\nexport class SendInvoiceToTaxComponent implements OnInit {\r\n\r\n  invoices: any;\r\n  configs: any;\r\n  invoiceList: any;\r\n  ioSignature: any;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  _translate: any;\r\n  nodeSign: any;\r\n  isExportFailed: boolean = false;\r\n  reportCountERR: any = \"\";\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  isHdGTGT: any;\r\n  search: any;\r\n  dulieu: any;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private spinner: NgxSpinnerService,\r\n    private billService: BillService,\r\n    private modalImportService: MyBsModalService,\r\n    private modalService: BsModalService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    if (this.infoDangKy) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n        this.isTT78 = true;\r\n    }\r\n    this.connectWebsocket();\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          let i = this.invoiceIndex;\r\n          if (data.Data.Name == 'thongdiep.xml') {\r\n            this.guiThongDiepDaKy(data.Data.Content);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.taoThongDiep();\r\n          }\r\n        }\r\n      } else {\r\n        const popUp = window.open('about:blank', 'name', 'width=200, height=100');\r\n        if (popUp == null || typeof (popUp) == 'undefined') {\r\n        }\r\n        else\r\n          popUp.close();\r\n        this.spinner.hide();\r\n        if (data.Description == \"\") {\r\n          this.showPopup = false;\r\n          this.errorImport = true;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  guiThongDiepDaKy(xml_string) {\r\n    if (this.dulieu != null) {\r\n      this.dulieu[\"message\"][\"message\"] = xml_string;\r\n      Library.showloading();\r\n      this.subXuatHoaDon = this.billService.guiThongDiep(this.dulieu).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoiceList.forEach(item => {\r\n            item.status = rs.data.status;\r\n          });\r\n          Library.notify(this._translate.THONG_TIN.gui_hoa_don_cqt_thanh_cong, 'success');\r\n          this.daXong = true;\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        this.subXuatHoaDon.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      Library.notify(this._translate.THONG_TIN.khong_co_du_lieu_gui_cqt, \"error\");\r\n    }\r\n  }\r\n\r\n  guiCQT() {\r\n    Library.confirmVA(this._translate.THONG_TIN.cau_hoi_xac_nhan_gui_cqt, this._translate.NOTIFY.notify, () => {\r\n      this.dulieu = null;\r\n      if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n        || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n        this.taoThongDiep();\r\n      } else {\r\n        let ListSerialNumber = \"DSCKS\";\r\n        if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n          let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n          if (signatures && signatures.length > 0)\r\n            ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n        }\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n      }\r\n    });\r\n  }\r\n  taoThongDiep() {\r\n    let ids = this.invoiceList.map(item => item.id);\r\n    Library.showloading();\r\n    let sub = this.billService.layThongDiep(ids).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n          || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n          this.invoiceList.forEach(item => {\r\n            item.status = rs.data.status;\r\n          });\r\n          Library.notify(this._translate.THONG_TIN.gui_hoa_don_cqt_thanh_cong, 'success');\r\n          this.daXong = true;\r\n        }\r\n        else {\r\n          this.dulieu = rs.data;\r\n          let bill_sign_date = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.xuLyKiFile(rs.data.message.message, bill_sign_date);\r\n        }\r\n      }\r\n      else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    },\r\n      err => { },\r\n      () => {\r\n        sub.unsubscribe();\r\n        Library.hideloading();\r\n      });\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    let ListSerialNumber = \"DSCKS\";\r\n    let nodeSign = \"//TDiep/CKSNNT\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'thongdiep.xml', nodeSign, signDate, 'MessageData', ListSerialNumber, true);\r\n  }\r\n\r\n  dong() {\r\n    if (this.daXong) {\r\n      this.bsModalRef.content.successSaveItem = \"success\";\r\n    }\r\n    this.bsModalRef.hide();\r\n    if (this.isHdGTGT) {\r\n      if (this.search)\r\n        this.router.navigate([`/system/bills-invoice-vat`], { queryParams: this.search });\r\n      else\r\n        this.router.navigate([`/system/bills-invoice-vat`]);\r\n    }\r\n    else {\r\n      if (this.search)\r\n        this.router.navigate([`/system/bills-invoice-sale`], { queryParams: this.search });\r\n      else\r\n        this.router.navigate([`/system/bills-invoice-sale`]);\r\n    }\r\n  }\r\n\r\n  viewDetailInvoice(data) {\r\n    if (data) {\r\n      let is_default_tempplate = true;\r\n      const ids = [];\r\n      ids.push(data.id);\r\n      if (!VStringService._attemptConvertBool(data.is_default_template))\r\n        is_default_tempplate = false;\r\n        if (is_default_tempplate) {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_hoa_don_mtt_html\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n        else {\r\n          if (this.configs.system_parameter.view_multi_invoice) {\r\n            let data = this.billService.taodulieuXemMau(ids);\r\n            data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n            this.vPreviewInvService.xemMau(data);\r\n          }\r\n          else {\r\n            const initialState = {\r\n              items: ids,\r\n              isXuatHD: false,\r\n              hinhthucxuat: '',\r\n              typeAction: sEnum.typeCode.xem_hoa_don_mtt,\r\n              cssClass: 'modal-xl view-bill'\r\n            };\r\n            this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n          }\r\n        }\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n  <div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.LABEL.process_invoice}}</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <div class=\\\"container-fluid\\\">\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-lg-7\\\">\\r\\n          <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item [label]=\\\"{text: _translate.GRID.INVOICE.template_code }\\\" dataField=\\\"template\\\"\\r\\n                [editorOptions]=\\\"{readOnly: true}\\\">\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n              <dxi-item dataField=\\\"bill_date\\\" [label]=\\\"{text: _translate.GRID.INVOICE.invoice_date}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item cssClass=\\\"invoice-number-create-invoice\\\" dataField=\\\"bill_number\\\"\\r\\n                [label]=\\\"{text: _translate.GRID.INVOICE.invoice_number}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"buyer_tax_code\\\" [label]=\\\"{text: _translate.GRID.INVOICE.buyer_tax_code }\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"buyer_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.buyer_name }\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item dataField=\\\"buyer_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.customer_name}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n          </dx-form>\\r\\n        </div>\\r\\n        <div class=\\\"col-lg-5\\\">\\r\\n          <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item dataField=\\\"buyer_mobile\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.phone }\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"buyer_mobile\\\" [label]=\\\"'Căn cước công đân'\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n              </dxi-item>\\r\\n              <dxi-item dataField=\\\"buyer_email\\\" [label]=\\\"{text: 'Email'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n          </dx-form>\\r\\n        </div>\\r\\n        <div class=\\\"col-lg-12 link-send-invoice\\\">\\r\\n          <div class=\\\"pull-right\\\">\\r\\n            <a *ngIf=\\\"invoice.bill_number\\\" (click)=\\\"sendMail()\\\"\\r\\n              href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.LABEL.send_invoice}}</a>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <dx-data-grid id=\\\"invoiceHistoryGrid\\\" [dataSource]=\\\"invoice_process\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      [showBorders]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" [showRowLines]=\\\"true\\\">\\r\\n      <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n      <dxi-column cellTemplate=\\\"stt\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.view_order}}\\\" width=\\\"80\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"process_time\\\" caption=\\\"{{_translate.CONTROLL.LABEL.date_made}}\\\" width=\\\"180\\\"\\r\\n        dataType=\\\"datetime\\\" format=\\\"dd/MM/yyyy HH:mm:ss\\\" dateSerializationFormat=\\\"yyyy-MM-dd HH:mm:ss\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"content\\\" cellTemplate=\\\"content\\\" caption=\\\"{{_translate.CONTROLL.LABEL.task}}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"user_name\\\" caption=\\\"{{_translate.CONTROLL.LABEL.person_made}}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <div *dxTemplate=\\\"let d of 'stt'\\\">\\r\\n        <p>{{ d.rowIndex + 1 }}</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'content'\\\">\\r\\n        {{ d.data.content}}\\r\\n      </div>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back }}\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\"\\r\\n      (click)=\\\"bsModalRef.hide()\\\">\\r\\n    </dx-button>\\r\\n  </div>\\r\\n</form>\"","module.exports = \"::ng-deep .form-input-visibility{visibility:hidden}::ng-deep .invoice-number-create-invoice input{color:red;font-weight:bold}.link-send-invoice{margin-top:10px}.link-send-invoice a{text-decoration:underline}#invoiceHistoryGrid{margin-top:15px}\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nimport { Helper, AuthService, Library, VStringService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { SendMailComponent } from '../send-mail/send-mail.component';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\n\r\n@Component({\r\n  selector: 'app-send-invoices',\r\n  templateUrl: './send-invoices.component.html',\r\n  styleUrls: ['./send-invoices.component.scss']\r\n})\r\nexport class SendInvoicesComponent implements OnInit {\r\n\r\n  frmData: any = {};\r\n  invoice: any\r\n  invoice_process: any;\r\n  _translate: any;\r\n  email: any;\r\n  constructor(\r\n    private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private billService: BillService,\r\n    private modalService: BsModalService,\r\n    public bsModalSendMail: BsModalRef,\r\n    private customersService: CustomersService,\r\n\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadTableContent();\r\n    let invoice = this.invoice;\r\n    this.frmData.template = `${invoice.template_code} - ${invoice.bill_series}`;\r\n    this.frmData.bill_date = moment(invoice.bill_date).format('DD/MM/YYYY');\r\n    this.frmData.bill_number = invoice.bill_number;\r\n    this.frmData.customer_code = invoice.customer_code;\r\n    this.frmData.buyer_tax_code = invoice.buyer_tax_code;\r\n    this.frmData.buyer_name = invoice.buyer_name;\r\n    this.frmData.buyer_mobile = invoice.buyer_mobile;\r\n    this.frmData.buyer_email = invoice.buyer_email;\r\n    this.frmData.currency_code = invoice.currency_code;\r\n    this.frmData.payment_method_name = invoice.payment_method_view_name;\r\n    this.frmData.customer_id = invoice.customer_id;\r\n    this.email = invoice.buyer_email;\r\n    this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n      if (response.status == \"success\") {\r\n        let emailInCategory = \"\";\r\n        const customer = response.data.customer;\r\n        if (customer)\r\n          emailInCategory = customer.email;\r\n        if (this.email) {\r\n          if (emailInCategory != \"\") {\r\n            let arrEmail = emailInCategory.split(';');\r\n            arrEmail.forEach(item => {\r\n              if (this.email.indexOf(item) < 0)\r\n                this.email = this.email + \";\" + item;\r\n            });\r\n          }\r\n        }\r\n        else {\r\n          this.email = emailInCategory;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  loadTableContent() {\r\n    this.invoice_process = {};\r\n    let sub = this.billService.getInvoiceProccess(this.invoice.id).subscribe(rs => {\r\n      const mapObj = {\r\n        T: \"; \",\r\n      };\r\n      this.invoice_process = rs.data.bill_process;\r\n      if (this.invoice_process && this.invoice_process.length > 0) {\r\n        this.invoice_process.forEach(item => {\r\n          item.content = VStringService._getValueToString(item.content).replace(/;/g, \"; \");\r\n        });\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  sendMail() {\r\n    const initialState = {\r\n      invoice_id: this.invoice.id,\r\n      email: this.email,\r\n      customer_id: this.frmData.customer_id\r\n    };\r\n    this.bsModalSendMail = this.modalService.show(SendMailComponent, { class: 'modal-md', initialState, backdrop: 'static', keyboard: false });\r\n    this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == 'success_mail') {\r\n        this.loadTableContent();\r\n      }\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.dataField === 'content' && e.parentType == \"dataRow\") {\r\n      e.editorName = 'dxTextArea';\r\n    }\r\n  }\r\n\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.BUTTON.send}} EMAIL</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\">\\r\\n      <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n        <dxi-item dataField=\\\"email\\\" [label]=\\\"{text: 'Email'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Email {{_translate.VALIDATION.required}}\\\"></dxi-validation-rule>\\r\\n          <!-- <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.email\\\" message=\\\"Email {{_translate.VALIDATION.not_pattern}}\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n      </dx-form>\\r\\n      <div style=\\\"margin-top: 10px;\\\">\\r\\n          <a style=\\\"color: silver;text-decoration: underline;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.note1}}: </a><a style=\\\"color: silver;font-size: 90%;\\\"> {{_translate.CONTROLL.LABEL.note_email}}</a>\\r\\n        </div>\\r\\n        <div style=\\\"margin-top: 5px;\\\">\\r\\n            <a style=\\\"color: silver;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.example}}: admin@efy.com.vn;sale@efy.com.vn</a>\\r\\n          </div>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n      </dx-button>\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      </dx-button>\\r\\n    </div>\\r\\n  </form>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\n\r\nimport { pattern } from '@config/index';\r\nimport { Helper, Library, AuthService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\n\r\n@Component({\r\n  selector: 'app-send-mail',\r\n  templateUrl: './send-mail.component.html',\r\n  styleUrls: ['./send-mail.component.scss']\r\n})\r\nexport class SendMailComponent implements OnInit {\r\n\r\n  invoice_id: any;\r\n  frmData: any = {};\r\n  email: string;\r\n  customer_id: string;\r\n  pattern = pattern;\r\n  _translate: any;\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private billService: BillService,\r\n    private authService: AuthService,\r\n    private customersService: CustomersService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.frmData.email = this.email;\r\n  }\r\n\r\n  onSubmit(e) {\r\n    let data = [{\r\n      id: this.invoice_id,\r\n      email: this.frmData.email\r\n    }];\r\n    Library.showloading();\r\n    let sub = this.billService.sendMail(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let updateEmail = {\r\n          id: this.customer_id,\r\n          email: this.frmData.email\r\n        };\r\n        this.customersService.uploadEmailtoCustomer(updateEmail).subscribe(rsl => {\r\n          if (rsl.status == 'success') {\r\n\r\n          }\r\n        });\r\n        Library.notify(this._translate.NOTIFY.send_mail_success, 'success');\r\n        this.bsModalRef.content.successSaveItem = \"success_mail\";\r\n        this.bsModalRef.hide();\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{lblTitle}}</h4>\\r\\n  <div>\\r\\n    <div *ngFor=\\\"let item of items | paginate: { itemsPerPage: 1, currentPage: p }; let i = index\\\">\\r\\n    </div>\\r\\n    <pagination-controls style=\\\"width: 50%;\\\" (pageChange)=\\\"getPage($event)\\\"></pagination-controls>\\r\\n  </div>\\r\\n  <div style=\\\"display: flex; align-items: center;\\\">\\r\\n    <dx-button *ngIf=\\\"isXuatHD\\\" text=\\\"Đồng ý\\\" icon=\\\"{{_translate.ICONS.save}}\\\" type=\\\"default\\\" (click)=\\\"dongy()\\\">\\r\\n    </dx-button>\\r\\n    <i class=\\\"fa fa-times\\\" style=\\\"font-size:25px; cursor: pointer;\\\" (click)=\\\"dong()\\\"></i>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <div class=\\\"body-content\\\">\\r\\n    <div *ngIf=\\\"isXuatHD\\\" class=\\\"canh-bao\\\">\\r\\n      <p style=\\\"font-weight: 600;\\\">\\r\\n        <span class=\\\"nhap-nhay\\\"></span>\\r\\n        <span style=\\\"font-size: 17px;\\\">Lưu ý: </span>\\r\\n        Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên\\r\\n        hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.\\r\\n      </p>\\r\\n    </div>\\r\\n    <div style=\\\"display: flex; width: 100%;\\\">\\r\\n      <iframe height=\\\"{{heightT}}\\\" id=\\\"preview-iframe\\\"></iframe>\\r\\n      <div *ngIf=\\\"isXuatHD\\\" class=\\\"thong-tin-hoa-don\\\">\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\" font-weight: 600;\\\" *ngIf=\\\"!isHoaDon\\\">Ngày chứng từ : </p>\\r\\n          <p style=\\\" font-weight: 600;\\\" *ngIf=\\\"isHoaDon\\\">Ngày hóa đơn : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">{{ngayHD}}</p>\\r\\n        </div>\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\"font-weight: 600;\\\">Trạng thái : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">Xuất {{hinhthucxuat}}</p>\\r\\n        </div>\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\"font-weight: 600;\\\">Tổng tiền : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">{{total_payment}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".modal-header{display:flex;justify-content:space-between;align-items:center}.pagination{display:flex}.pagination a{color:black;float:left;padding:8px 16px;text-decoration:none}::ng-deep .body-content{height:100%}.modal-body .body-content{display:flex;justify-content:center;align-items:center;flex-direction:column}.nhap-nhay{background:red;padding:0.5px 9px;margin-right:5px;border-radius:57%;-webkit-animation:flicker 1s infinite}.ht-xuat{width:25%;padding:15px;background:#ffffff;box-shadow:rgba(0,0,0,0.35) 0px 5px 15px}@-webkit-keyframes flicker{0%{opacity:0}9%{opacity:0}10%{opacity:.5}13%{opacity:0}20%{opacity:.5}25%{opacity:1}}.example{padding:20px}input[type=button]{padding:5px 10px;margin:10px 5px;border-radius:5px;cursor:pointer;background:#ddd;border:1px solid #ccc}input[type=button]:hover{background:#ccc}.confirm{display:none}.confirm>div:first-of-type{position:fixed;width:100%;height:100%;background:rgba(0,0,0,0.5);top:0px;left:0px}.confirm>div:last-of-type{padding:10px 20px;background:white;position:absolute;width:auto;height:auto;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border-radius:5px;border:1px solid #333}.confirm>div:last-of-type div:first-of-type{min-width:150px;padding:10px}.confirm>div:last-of-type div:last-of-type{text-align:right}.canh-bao{margin-bottom:10px}#preview-iframe{width:calc(100% - 20px)}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { VStringService, SocketService, AuthService, sEnum, Library, Helper, VChanggeMoneyService, VPreviewInvService } from '@core/index';\r\ndeclare var $: any;\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\n\r\n@Component({\r\n  selector: 'app-view-invoice',\r\n  templateUrl: './view-invoice.component.html',\r\n  styleUrls: ['./view-invoice.component.scss']\r\n})\r\nexport class ViewInvoiceBillComponent implements OnInit {\r\n  bsModalSignRef: BsModalRef;\r\n  items: any;\r\n  key: string = 'name';\r\n  reverse: boolean = false;\r\n  objectUrl: any;\r\n  mainTest: any;\r\n  _language: string;\r\n  _translate: any;\r\n  isXuatHD: any;\r\n  ngayHD: any;\r\n  hinhthucxuat: any;\r\n  configs: any;\r\n  ioSignature: Subscription;\r\n  lblTitle: any;\r\n  isTaiHD: boolean = false;\r\n  invoices = [];\r\n  showPopup = false;\r\n  total_payment: any;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  isExportFailed: boolean = false;\r\n  toltal_payment: any;\r\n  isHoaDon = false;\r\n  sort(key) {\r\n    this.key = key;\r\n    this.reverse = !this.reverse;\r\n  }\r\n  p: number = 1;\r\n  widthT: any;\r\n  heightT: any;\r\n  typeAction: any;// XEM_HOA_DON;IN_CHUYEN_DOI;NAP_EXCEL\r\n  ids: any;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    public bsModal: BsModalRef,\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    public translate: TranslateService,\r\n    private authService: AuthService,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService,\r\n    private billService: BillService,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.connectWebsocket();\r\n    this.configs = this.authService.getConfigs();\r\n    this.heightT = screen.availHeight - 195;\r\n    switch (this.typeAction) {\r\n      case \"NAP_EXCEL\":\r\n        this.lblTitle = \"BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ\";\r\n        this.isTaiHD = false;\r\n        this.isHoaDon = false;\r\n        break;\r\n      case \"NAP_EXCEL_HD\":\r\n        this.lblTitle = \"BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ\";\r\n        this.isTaiHD = false;\r\n        this.isHoaDon= true\r\n        break;\r\n      case \"XEM_HOA_DON\":\r\n        this.lblTitle = \"XEM HÓA ĐƠN ĐIỆN TỬ\";\r\n        this.isTaiHD = true;\r\n        break;\r\n      case \"IN_CHUYEN_DOI\":\r\n        this.lblTitle = \"IN CHUYỂN ĐỔI HÓA ĐƠN ĐIỆN TỬ\";\r\n        this.isTaiHD = true;\r\n        break;\r\n    }\r\n    this.getPage(1, 'desc', 'created');\r\n  }\r\n  viewTransport(item) {\r\n    let id = item.id;\r\n  }\r\n\r\n  getPage(page: number, sort: string = 'desc', order: string = 'created') {\r\n    switch (this.typeAction) {\r\n      case \"NAP_EXCEL\":\r\n        this.action_napexcel(page);\r\n        break;\r\n      case \"NAP_EXCEL_HD\":\r\n        this.action_napexcel(page);\r\n        break;\r\n      case \"XEM_HOA_DON\":\r\n        this.action_xemhoadon(page);\r\n        break;\r\n      case \"IN_CHUYEN_DOI\":\r\n        this.action_inchuyendoi(page);\r\n        break;\r\n    }\r\n  }\r\n  action_napexcel(page) {\r\n    this.p = page;\r\n    let oTransport: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        oTransport = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let invoicesArr = [];\r\n    invoicesArr.push(oTransport);\r\n    let data = {\r\n      bills: invoicesArr\r\n    }\r\n    let sub = this.billService.previewInvoiceImport(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.toltal_payment = rs.data.invoice.toltal_payment;\r\n          this.objectUrl = rs.data.invoice.pdf_file;\r\n          this.total_payment = rs.data.invoice.total_payment;\r\n          this.ngayHD = moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          this.total_payment = rs.data.invoice.total_payment;\r\n          let invoice_date = rs.data.invoice.invoice_date;\r\n          let json_data = rs.data.invoice.json_data;\r\n          let appCode = \"REPX\";\r\n          if (rs.data.invoice.is_html_template)\r\n            appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, invoice_date, this.toltal_payment);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n        this.spinner.hide();\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  action_xemhoadon(page) {\r\n    this.p = page;\r\n    let id: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        id = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let arrId = [];\r\n    arrId.push(id);\r\n    let sub = this.billService.view(arrId).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.objectUrl = rs.data.invoice.pdf_file;\r\n          this.ngayHD = moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          let invoice_date = rs.data.invoice.invoice_date;\r\n          let json_data = rs.data.invoice.json_data;\r\n          let appCode = \"REPX\";\r\n          if (rs.data.invoice.is_html_template)\r\n            appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, invoice_date);\r\n        }\r\n      } else {\r\n        this.spinner.hide();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  action_inchuyendoi(page) {\r\n    this.p = page;\r\n    let id: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        id = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let arrId = [];\r\n    arrId.push(id);\r\n    let sub = this.vatService.inChuyenDoiInvoiceImport(arrId, true).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.objectUrl = rs.data.invoice.pdf_file;\r\n          this.ngayHD = moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          let invoice_date = rs.data.invoice.invoice_date;\r\n          let json_data = rs.data.invoice.json_data;\r\n          let appCode = \"REPX\";\r\n          if (rs.data.invoice.is_html_template)\r\n            appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, invoice_date);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n        this.spinner.hide();\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  dong() {\r\n    // this.router.navigate(['/system/transport-invoice']);\r\n    this.bsModal.hide()\r\n  }\r\n  dongy() {\r\n    this.bsModal.content.successSaveItem = 'DONG_Y';\r\n    this.bsModal.hide();\r\n  }\r\n  /* Kết nối đến socket */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_viewInvoice') {\r\n        if (data.Status == \"success\")\r\n          this.viewInvoice(data.Data.Content, data.Data.typeView, data.Data.hinhthucxuat, data.Data.invoice_date);\r\n        else if (data.Status == \"error\") {\r\n          this.spinner.hide();\r\n          Library.notify(data.Description, 'error');\r\n        }\r\n      }\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n  }\r\n  viewInvoice(content, typeView, hinhthucxuat, invoice_date) {\r\n    this.objectUrl = content;\r\n    this.ngayHD = moment(invoice_date).format('DD/MM/YYYY');\r\n    this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n    let iframe = document.getElementById('preview-iframe');\r\n    iframe.setAttribute(\"src\", this.mainTest);\r\n    this.spinner.hide();\r\n  }\r\n  taihoadon() {\r\n    this.invoices = this.items\r\n    this.showPopup = true;\r\n    this.totalInvoice = Math.floor(this.invoices.length / 10) + 1;\r\n    this.invoiceIndex = 0;\r\n    this.tempKiFile = 0;\r\n    this.xulyTaiFilePdf();\r\n  }\r\n  xulyTaiFilePdf() {\r\n    let ids = this.iterator(this.invoices, 10, this.invoiceIndex);\r\n    let is_convert = true;\r\n    if (this.typeAction == \"XEM_HOA_DON\")\r\n      is_convert = false\r\n    let sub = this.vatService.xuatHDPdf(ids, is_convert).subscribe(rs => {\r\n      let isSuccess = false;\r\n      this.ganXong = true;\r\n      this.tempKiFile = 0;\r\n      if (rs.status == 'success') {\r\n        Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n        isSuccess = true;\r\n      } else {\r\n        this.isExportFailed = true;\r\n      }\r\n      this.continuteExportInvoice(isSuccess);\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  continuteExportInvoice(isSuccess) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.valueProgress += percentComplete;\r\n    if (this.invoiceIndex == this.totalInvoice - 1) {\r\n      if (!this.isExportFailed && isSuccess)\r\n        Library.notify(\"Tải hóa đơn thành công\", 'success', 5000);\r\n      else {\r\n        // Danh sách lỗi\r\n      }\r\n      this.daXong = true;\r\n      setTimeout(() => {\r\n        this.showPopup = false;\r\n      }, 300);\r\n    }\r\n    else if (this.invoiceIndex < this.totalInvoice - 1) {\r\n      this.invoiceIndex++;\r\n      this.xulyTaiFilePdf();\r\n    }\r\n  }\r\n  iterator(a, take, skip) {\r\n    let current = skip * 10;\r\n    let l = a.length;\r\n    let end = current + take;\r\n    let part = a.slice(current, end);\r\n    current = end < l ? end : 0;\r\n    return part;\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình tải hóa đơn sẽ dừng lại nếu bạn đóng cửa sổ này?\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map, catchError } from 'rxjs/operators';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { BillService } from './bill.service';\r\nimport { Library, Helper, sEnum, AuthService } from '@core/index';\r\nimport { forkJoin } from 'rxjs';\r\n@Injectable()\r\nexport class InvoiceResolver implements Resolve<any[]> {\r\n  constructor(\r\n    private billService: BillService,\r\n    private router: Router,\r\n    private listsService: ListsService,\r\n    private authService: AuthService,\r\n  ) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    Library.showloading();\r\n    let isTT78 = false;\r\n    let infoDangKy = this.authService.getInfoRegister();\r\n    if (infoDangKy && infoDangKy.id) {\r\n      if (infoDangKy.status == \"CHAP_NHAN\")\r\n        isTT78 = true;\r\n    }\r\n    let loaiHoaDon = route.data.type;\r\n    let _countDm = 0;\r\n    let dataJoin = [];\r\n    let dataDM: any;\r\n    /**\r\n     * Thiếu bên học sinh sinh viên, rà soát lại các hàm liên quan\r\n     */\r\n    let arr = [\r\n      {\r\n        \"code\": \"DM_NHOM_KHACH_HANG\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_LOAI_TIEN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_HINH_THUC_THANH_TOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DON_VI_TINH\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TY_LE_VAT\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DINH_KHOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_NOI_XUAT_HOA_DON\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_QUOC_GIA\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TAI_KHOAN_NGAN_HANG\",\r\n        \"order\": 0\r\n      },\r\n    ];\r\n    dataDM = this.listsService.getDMBy(arr);\r\n    if (dataDM.length > 0) {\r\n      dataDM.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    _countDm = dataDM.length;\r\n    let dataRecord: any;\r\n    /* Thông tư 78 */\r\n    dataRecord = this.billService.getInvoiceResolverTT78(loaiHoaDon);\r\n    if (dataRecord.length > 0) {\r\n      dataRecord.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    let dataForkJoin = forkJoin(dataJoin);\r\n    return dataForkJoin.pipe(\r\n      take(1),\r\n      map(rs => {\r\n        Library.hideloading();\r\n        let status = sEnum.statusApi.success;\r\n        let isEdit = false;\r\n        for (let index = 0; index < rs.length; index++) {\r\n          if (rs[index].status != sEnum.statusApi.success) {\r\n            Library.notify(rs[index].message, \"error\");\r\n            if (loaiHoaDon == \"01GTKT\")\r\n              this.router.navigate(['/system/bills-invoice-vat']);\r\n            else if (loaiHoaDon == \"02GTTT\")\r\n              this.router.navigate(['/system/bills-invoice-sale']);\r\n            status = sEnum.statusApi.error;\r\n            break;\r\n          }\r\n        }\r\n        if (status == sEnum.statusApi.success) {\r\n          if (dataDM.length > 0) {\r\n            let _data = [];\r\n            rs.forEach((element, i) => {\r\n              if (i < dataDM.length) {\r\n                _data.push(element);\r\n              }\r\n            });\r\n            this.authService.setDMLocal(_data);\r\n          }\r\n          /* Thông tư 78 */\r\n          if (loaiHoaDon == \"03XKNB\" || loaiHoaDon == sEnum.loaihoadon.HGDL04) {\r\n            let templates = Helper.convertTemplatesToBillResolver(rs[dataJoin.length - 1]);\r\n            return [\r\n              rs[_countDm].data.products,\r\n              templates,\r\n              isEdit,\r\n              rs[dataJoin.length - 2].data.wavehourses,\r\n            ];\r\n          }\r\n          else {\r\n            let templates = Helper.convertTemplatesToBillResolver(rs[dataJoin.length - 1]);\r\n            return [\r\n              rs[_countDm].data.products,\r\n              templates,\r\n              isEdit,\r\n            ];\r\n          }\r\n        }\r\n        else\r\n          return null;\r\n      })\r\n    );\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map } from 'rxjs/operators';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { Library, Helper, sEnum, AuthService } from '@core/index';\r\nimport { forkJoin } from 'rxjs';\r\nimport { BillService } from './bill.service';\r\n\r\n@Injectable()\r\nexport class ShowInvoiceResolver implements Resolve<any[]> {\r\n  constructor(\r\n    private billService: BillService,\r\n    private router: Router,\r\n    private listsService: ListsService,\r\n    private authService: AuthService,\r\n  ) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    let invoice_id = route.paramMap.get('invoiceId');\r\n    let isViewTT32 = false;\r\n    if (route.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    Library.showloading();\r\n    let isTT78 = false;\r\n    let infoDangKy = this.authService.getInfoRegister();\r\n    if (infoDangKy && infoDangKy.id) {\r\n      if (infoDangKy.status == \"CHAP_NHAN\")\r\n        isTT78 = true;\r\n    }\r\n    if (isTT78 == true && isViewTT32)\r\n      isTT78 = false;\r\n    let loaiHoaDon = route.data.type;\r\n    let _countDm = 0;\r\n    let dataJoin = [];\r\n    let dataDM: any;\r\n    /**\r\n     * Thiếu bên học sinh sinh viên, rà soát lại các hàm liên quan\r\n     */\r\n    let arr = [\r\n      {\r\n        \"code\": \"DM_NHOM_KHACH_HANG\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_LOAI_TIEN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_HINH_THUC_THANH_TOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DON_VI_TINH\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TY_LE_VAT\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DINH_KHOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_NOI_XUAT_HOA_DON\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_QUOC_GIA\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TAI_KHOAN_NGAN_HANG\",\r\n        \"order\": 0\r\n      },\r\n    ];\r\n    dataDM = this.listsService.getDMBy(arr);\r\n    if (dataDM.length > 0) {\r\n      dataDM.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    _countDm = dataDM.length;\r\n    let dataRecord: any;\r\n    dataRecord = this.billService.showInvoiceResolverTT78(invoice_id, loaiHoaDon);\r\n    if (dataRecord.length > 0) {\r\n      dataRecord.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    let dataForkJoin = forkJoin(dataJoin);\r\n    return dataForkJoin.pipe(\r\n      take(1),\r\n      map(rs => {\r\n        Library.hideloading();\r\n        let isEdit = true;\r\n        let status = sEnum.statusApi.success;\r\n        for (let index = 0; index < rs.length; index++) {\r\n          if (rs[index].status != sEnum.statusApi.success) {\r\n            Library.notify(rs[index].message, \"error\");\r\n            if (loaiHoaDon == \"01GTKT\")\r\n              this.router.navigate(['/system/bills-invoice-vat']);\r\n            else if (loaiHoaDon == \"02GTTT\")\r\n              this.router.navigate(['/system/bills-invoice-sale']);\r\n            status = sEnum.statusApi.error;\r\n            break;\r\n          }\r\n        }\r\n        if (status == sEnum.statusApi.success) {\r\n          if (dataDM.length > 0) {\r\n            let _data = [];\r\n            rs.forEach((element, i) => {\r\n              if (i < dataDM.length) {\r\n                _data.push(element);\r\n              }\r\n            });\r\n            this.authService.setDMLocal(_data);\r\n          }\r\n          if (loaiHoaDon == \"03XKNB\" || loaiHoaDon == sEnum.loaihoadon.HGDL04) {\r\n            let templates = Helper.convertTemplatesToBillResolver(rs[dataJoin.length - 1]);\r\n            return [\r\n              rs[_countDm].data.products,\r\n              rs[dataJoin.length - 3].data.bill,\r\n              isEdit,\r\n              templates,\r\n              rs[dataJoin.length - 2].data.wavehourses,\r\n            ];\r\n          }\r\n          else {\r\n            let templates = Helper.convertTemplatesToBillResolver(rs[dataJoin.length - 1]);\r\n            return [\r\n              rs[_countDm].data.products,\r\n              rs[dataJoin.length - 2].data.bill,\r\n              isEdit,\r\n              templates,\r\n            ];\r\n          }\r\n        }\r\n        else\r\n          return null;\r\n      })\r\n    );\r\n  }\r\n}"],"sourceRoot":""}