{"version":3,"sources":["webpack:///./src/app/modules/handle-bills/components/adjust/adjust-bill/adjust-bill.component.html","webpack:///./src/app/modules/handle-bills/components/adjust/adjust-bill/adjust-bill.component.scss","webpack:///./src/app/modules/handle-bills/components/adjust/adjust-bill/adjust-bill.component.ts","webpack:///./src/app/modules/handle-bills/components/adjust/adjust-form-bill/adjust-form-bill.component.html","webpack:///./src/app/modules/handle-bills/components/adjust/adjust-form-bill/adjust-form-bill.component.scss","webpack:///./src/app/modules/handle-bills/components/adjust/adjust-form-bill/adjust-form-bill.component.ts","webpack:///./src/app/modules/handle-bills/components/adjust/adjust-product-grip/adjust-product-grip.component.html","webpack:///./src/app/modules/handle-bills/components/adjust/adjust-product-grip/adjust-product-grip.component.scss","webpack:///./src/app/modules/handle-bills/components/adjust/adjust-product-grip/adjust-product-grip.component.ts","webpack:///./src/app/modules/handle-bills/components/bills-cancel/bills-cancel.component.html","webpack:///./src/app/modules/handle-bills/components/bills-cancel/bills-cancel.component.scss","webpack:///./src/app/modules/handle-bills/components/bills-cancel/bills-cancel.component.ts","webpack:///./src/app/modules/handle-bills/components/index/index.component.html","webpack:///./src/app/modules/handle-bills/components/index/index.component.scss","webpack:///./src/app/modules/handle-bills/components/index/index.component.ts","webpack:///./src/app/modules/handle-bills/components/replace/replace-bill/replace-bill.component.html","webpack:///./src/app/modules/handle-bills/components/replace/replace-bill/replace-bill.component.scss","webpack:///./src/app/modules/handle-bills/components/replace/replace-bill/replace-bill.component.ts","webpack:///./src/app/modules/handle-bills/components/replace/replace-form-bill/replace-form-bill.component.html","webpack:///./src/app/modules/handle-bills/components/replace/replace-form-bill/replace-form-bill.component.scss","webpack:///./src/app/modules/handle-bills/components/replace/replace-form-bill/replace-form-bill.component.ts","webpack:///./src/app/modules/handle-bills/components/replace/replace-product-grip/replace-product-grip.component.html","webpack:///./src/app/modules/handle-bills/components/replace/replace-product-grip/replace-product-grip.component.scss","webpack:///./src/app/modules/handle-bills/components/replace/replace-product-grip/replace-product-grip.component.ts","webpack:///./src/app/modules/handle-bills/components/report-tax-bill-error/report-tax-bill-error.component.html","webpack:///./src/app/modules/handle-bills/components/report-tax-bill-error/report-tax-bill-error.component.scss","webpack:///./src/app/modules/handle-bills/components/report-tax-bill-error/report-tax-bill-error.component.ts","webpack:///./src/app/modules/handle-bills/handle-bills-routing.module.ts","webpack:///./src/app/modules/handle-bills/handle-bills.module.ts","webpack:///./src/app/modules/handle-bills/shared/adjust-bill.resolver.ts","webpack:///./src/app/modules/handle-bills/shared/replace-bill.resolver.ts"],"names":[],"mappings":"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","file":"handle-bills-handle-bills-module.js","sourcesContent":["module.exports = \"<form>\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <!-- phần form thông tin -->\\r\\n    <app-adjust-form-bill (adjustmentObjectChange)=\\\"adjustmentObjectChange($event)\\\" [frmData]=\\\"frmData\\\" [oldForm]=\\\"oldForm\\\" \\r\\n      [bill_products]=\\\"bill_products\\\" [formatter]=\\\"formatter\\\"\\r\\n      [listTemplate]=\\\"select.templatesTT78\\\" [isHdGTGT]=\\\"isHdGTGT\\\"\\r\\n      [_oTemplateTT78]=\\\"_oTemplateTT78\\\" [infoDangKy]=\\\"infoDangKy\\\" [ttDaXuatHoaDon]=\\\"ttDaXuatHoaDon\\\"\\r\\n      (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\" (onRefreshForm) = \\\"onRefreshForm()\\\">\\r\\n    </app-adjust-form-bill>\\r\\n\\r\\n    <!-- table product -->\\r\\n    <app-adjust-product-grip [dataSource]=\\\"dataSource\\\" \\r\\n     [bill_products]=\\\"bill_products\\\"\\r\\n     [listTemplate]=\\\"select.templatesTT78\\\" [isHdGTGT]=\\\"isHdGTGT\\\"\\r\\n      [formatter]=\\\"formatter\\\" [oldForm]=\\\"oldForm\\\" [frmData]=\\\"frmData\\\"\\r\\n      [invoiceTemplateSelect] = \\\"invoiceTemplateSelect\\\"\\r\\n      [_oTemplateTT78]=\\\"_oTemplateTT78\\\">\\r\\n    </app-adjust-product-grip>\\r\\n\\r\\n    <div class=\\\"table-footer\\\">\\r\\n      <!-- Tổng tiền -->\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <div class=\\\"vat amount-table-footer\\\">\\r\\n          <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [value]=\\\"frmData.amount_after_vat\\\" step=\\\"0\\\"\\r\\n            [format]=\\\"formatter.tong_tien\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Tiền thuế -->\\r\\n      <div class=\\\"table-footer-2\\\" *ngIf=\\\"isHdGTGT\\\">\\r\\n        <div class=\\\"vat amount-vat-table-footer\\\">\\r\\n          <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [value]=\\\"frmData.amount_vat\\\" step=\\\"0\\\"\\r\\n            [format]=\\\"formatter.tien_thue\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Thành tiền -->\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <div class=\\\"vat amount-after-vat-table-footer\\\">\\r\\n          <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [value]=\\\"frmData.amount\\\" step=\\\"0\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n            [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" style=\\\"margin-top : 20px\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n      <!-- Giảm trừ nghị quyết 43 -->\\r\\n      <!-- Tỷ lệ % doanh thu -->\\r\\n      <div class=\\\"col-md-12\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Tỷ lệ % trên doanh thu </p>\\r\\n\\r\\n          <div class=\\\"toggle normal\\\" style=\\\"display: flex; align-items: center; margin-top: -6px;\\\">\\r\\n            <img id=\\\"link14\\\" style=\\\"cursor: pointer;padding-left: 2px;padding-right: 7px\\\"\\r\\n              src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" (click)=\\\"guideSales()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n          </div>\\r\\n          <dx-popover target=\\\"#link14\\\" position=\\\"top\\\" [width]=\\\"350\\\" [(visible)]=\\\"isDisplayGuideSale\\\">\\r\\n            <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n              <p>- 1% : Phân phối, cung cấp hàng hóa dịch vụ</p>\\r\\n              <p>- 5% : Dịch vụ xây dựng không bao thầu nguyên vật liệu</p>\\r\\n              <p>- 3% : Sản xuất, vận tải, dịch vụ có gắn với hàng hóa, xây dựng có bao thầu nguyên vật liệu</p>\\r\\n              <p>- 2% : Hoạt động kinh doanh khác</p>\\r\\n            </div>\\r\\n          </dx-popover>\\r\\n\\r\\n          <dx-number-box [width]=\\\"50\\\" [(value)]=\\\"frmData.sales_percentage\\\"\\r\\n            (onValueChanged)=\\\"onChangeSalePercen($event)\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> %</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Đã giảm 20% -->\\r\\n      <div class=\\\"col-md-12\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px;width: 100px\\\">Đã giảm </p>\\r\\n          <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.money_resolution_43\\\"\\r\\n            [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px\\\"> {{ _translate.THONG_TIN.tinh_thue_nq101}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n        <!-- Cộng tiền hàng -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount\\\" tabIndex=\\\"-1\\\"\\r\\n              [format]=\\\"formatter.thanh_tien\\\" [disabled]=\\\"!frmData.auto_value\\\" step=\\\"0\\\"\\r\\n              (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Tiền thuế -->\\r\\n        <div class=\\\"dx-field\\\" *ngIf=\\\"isHdGTGT\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount_vat\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n              [disabled]=\\\"!frmData.auto_value\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Cộng chiết khấu -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_amount_discount}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount_discount\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n              [format]=\\\"formatter.tien_chiet_khau\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <!-- Tổng tiền thanh toán -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount_after_vat\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\" [disabled]=\\\"!frmData.auto_value\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n              (onValueChanged)=\\\"totalPaymentChange($event)\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Tiền mặt -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">Tiền mặt</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.cash\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n              tabIndex=\\\"-1\\\" step=\\\"0\\\" (onValueChanged)=\\\"cashChange($event)\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Trả lại khách -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">Trả lại khách</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.returns\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n              tabIndex=\\\"-1\\\" step=\\\"0\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" style=\\\"margin-top : 15px\\\">\\r\\n      <div class=\\\"col-md-4\\\"></div>\\r\\n      <div class=\\\"col-md-8\\\">\\r\\n        <!-- Số tiền bằng chữ -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\" style=\\\"width: 27%;\\\">{{ _translate.CONTROLL.LABEL.total_payment_in_word}}</div>\\r\\n          <div class=\\\"dx-field-value\\\" style=\\\"width: 73%;\\\">\\r\\n            <dx-text-box [(value)]=\\\"frmData.total_payment_word\\\" [disabled]=\\\"!frmData.auto_value\\\"\\r\\n              [readOnly]=\\\"ttDaXuatHoaDon\\\"></dx-text-box>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <!-- Xem trước hóa đơn -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice}}\\\" type=\\\"default\\\" (click)=\\\"preview()\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <!-- Xuất hóa đơn -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" appScrollToInvalid text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.export_inv\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\" (click)=\\\"eSubmit('XUAT')\\\">\\r\\n          </dx-button>\\r\\n         \\r\\n          <!-- Ghi tạm -->\\r\\n          <dx-button disableDoubleClick appScrollToInvalid text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" *ngIf=\\\"!ttDaXuatHoaDon\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.save\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"\\r\\n            (click)=\\\"eSubmit('GHI_TAM')\\\">\\r\\n          </dx-button>\\r\\n          \\r\\n          <!-- Đóng -->\\r\\n          <dx-button type=\\\"default\\\" appBackButton [(icon)]=\\\"this._translate.ICONS.come_back\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n</form>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}.vat.total-payment-in-word .dx-field-label{width:12%}.vat.total-payment-in-word .dx-field-value{width:88% !important}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:30px}::ng-deep .nd92Notify .modal-content{width:80%}::ng-deep .mauhoadon .modal-content{width:67%}::ng-deep .mauhoadon43 .modal-content{width:72%}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { pattern } from '@config/pattern';\r\nimport { Helper, Library, VChanggeMoneyService, VPreviewInvService, VStringService, sEnum } from '@core/index';\r\nimport { AuthService, SocketService } from '@core/services';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport * as moment from 'moment';\r\nimport * as _ from 'lodash';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { Subscription, Observable } from 'rxjs';\r\nimport { BillModel } from '@modules/bill-invoice/shared/bill.model';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { HandlebillService } from '@modules/handle-bills/shared/handlebill.service';\r\nimport { NotifyReduceTaxComponent } from '@shared/index';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { AdjustProductGripComponent } from '../adjust-product-grip/adjust-product-grip.component';\r\nimport { AdjustFormBillComponent } from '../adjust-form-bill/adjust-form-bill.component';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\n\r\n@Component({\r\n  selector: 'app-adjust-bill',\r\n  templateUrl: './adjust-bill.component.html',\r\n  styleUrls: ['./adjust-bill.component.scss']\r\n})\r\nexport class AdjustBillComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  @ViewChild(AdjustProductGripComponent) productGrip: AdjustProductGripComponent;\r\n  @ViewChild(AdjustFormBillComponent) formInvoice: AdjustFormBillComponent;\r\n\r\n  verify_code: any;\r\n  info_message: any;\r\n  bsModalRef: BsModalRef;\r\n  bsModalHdckRef: BsModalRef;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  isShowKyLenhDieuDong: boolean;\r\n  isShowHuyLenhDD: boolean = false;\r\n  isCheckLenhDieuDong = false;\r\n  jsonProductFirst: any\r\n  frmData: BillModel = new BillModel(5);\r\n  oldForm: any;\r\n  total_payment: any;\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  is_multi_vat: any;\r\n  bill_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n  select: any = {};\r\n  bill_products_old: any = [];\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  isHdGTGT: boolean = true;\r\n  configs: any;\r\n  _translate: any;\r\n  isAccessExportInv = false; //có quyền phê duyệt?\r\n  valueChange: string;\r\n  nodeSign: any;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  _oTemplateTT78: any = {};\r\n  infoDangKy: any;\r\n  isDisplayGuideSale: boolean = false;\r\n  bills: any = []; //có thể dùng khi gửi mail sai sót(test lại sau)\r\n  isExportInvoice: boolean; //trạng thái xuất hoá đơn. đã xuất hay chưa ?\r\n  invoiceTemplateSelect: any = {};\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private billService: BillService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private confirmService: ConfirmService,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService,\r\n    private modalService: BsModalService,\r\n    private handleBillService: HandlebillService,\r\n    private configsService: ConfigsService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n  ngOnDestroy(): void {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  //đc gọi khi thoát khỏi màn này và chuyển tới màn khác\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.ghiTam().then((value1) => {\r\n                    observer.next(value1);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    }\r\n    return true;\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    // kết nối websocket\r\n    this.connectWebsocket();\r\n    let currentUser = this.authService.getCurrentUser();\r\n    let listpermissions = currentUser.user.permissions.split(',');\r\n    this.configs = this.authService.getConfigs();\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    this.formatter.display_int = this.configs.system_parameter.display_int;\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data danh mục for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.templatesTT78 = data.init[0];\r\n      // if (temptTT78 && temptTT78.length > 0) {\r\n      //   this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n      //   if (data.init[2] && Number.parseInt(data.init[2].invoice_number) > 0) {\r\n      //     if (data.init[2].is_invoice_with_code != this.infoDangKy.is_invoice_with_code && data.init[2].xml_type != '1') {\r\n      //       this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == data.init[2].is_invoice_with_code);\r\n      //     }\r\n      //   }\r\n      // }\r\n      this.select.templatesTT78 = this.select.templatesTT78.filter(p => (p.status == \"HOAT_DONG\" && p.template_code == data.init[2].template_code));\r\n      if (data.status === 'thaythemoi') {\r\n        this.khoiTaoKhiThemMoi(data.init[2]);\r\n        this.oldForm = data.init[2];\r\n        this.frmData.destroy_reason = \"\";\r\n      } else {\r\n        this.khoiTaoKhiSua(data.init[2]);\r\n        this.oldForm = data.init[2].origin;\r\n      }\r\n      // sx sp\r\n      this.oldForm.bill_products = _.sortBy(this.oldForm.bill_products, item => parseInt(item.order));\r\n      if(this.oldForm.origin) {\r\n        this.oldForm.origin.bill_products = _.sortBy(this.oldForm.origin.bill_products, item => parseInt(item.order));\r\n      }\r\n      if (this.oldForm.template_code == '1') {\r\n        this.isHdGTGT = true;\r\n      } else {\r\n        this.isHdGTGT = false;\r\n      }\r\n      // sx giảm dần \r\n      this.select.templatesTT78.sort((a, b) => {\r\n        const dateA: any = new Date(a.created_at);\r\n        const dateB: any = new Date(b.created_at);\r\n        return dateB - dateA;\r\n      });\r\n      if (this.select.templatesTT78.length > 0) {\r\n        this._oTemplateTT78 = _.cloneDeep(this.select.templatesTT78[0]);\r\n      }\r\n      this.select.templatesTT78.some(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.is_multi_vat = item.is_multi_vat;\r\n          this.invoiceTemplateSelect = item;\r\n          this._oTemplateTT78 = _.cloneDeep(item);\r\n          return true;\r\n        }\r\n      });\r\n     // this.frmData.template_id = this._oTemplateTT78.value;\r\n      this.frmData.is_resolution_43 = false;\r\n    });\r\n    let obj2 = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (obj2.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    const inv_products = this.frmData.setInvoice_products_data(data.bill_products);\r\n    // khởi tạo lưới từ dữ liệu sửa\r\n    this.bill_products = new ArrayStore({\r\n      key: 'id',\r\n      data: inv_products\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.bill_products\r\n    });\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    this.frmData.adjustment_type = 5;\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n    // co cho sua luoi hang hoa ko\r\n    let temp = this.frmData.adjustment_form + '_' + this.frmData.adjustment_object;\r\n    this.productGrip.gripAllowEdit = true;\r\n    if (temp === 'TANG_HH_DV' || temp === 'GIAM_HH_DV') {\r\n      this.setContentProductNameV2('', 'select');\r\n    }\r\n  }\r\n\r\n  khoiTaoKhiThemMoi(data) {\r\n    // khởi tạo mới lưới\r\n    const inv_products = this.frmData.bill_products_data();\r\n    // inv_products.forEach(item => {\r\n    //   item.vat = item.vat != null ? item.vat.toString() : null;\r\n    // });\r\n    this.bill_products = new ArrayStore({\r\n      key: 'id',\r\n      data: inv_products\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.bill_products\r\n    });\r\n    this.bill_products_old = data.bill_products;\r\n\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormDieuChinh(data);\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (VStringService._getValueToString(this.frmData.status) != \"\" && this.frmData.status != sEnum.statusInv.GhiTam) {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  setDataSessionStorage(value) {\r\n    this.valueChange = JSON.stringify(value);\r\n  }\r\n\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  sendInvoice(xml_string) {\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    let xmlInvoice = \"\";\r\n    const sub = this.billService.sendInvoice({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.info_message = rs.data.info_message;\r\n        let bill_sign_date = moment(rs.data.bill_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (this.info_message && this.info_message.message) {\r\n          xmlInvoice = VStringService._getValueToString(this.info_message.message.message);\r\n          if (xmlInvoice != \"\") {\r\n            this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n          }\r\n        }\r\n      }\r\n      else\r\n        Library.notify(rs.message, 'error');\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          if (this.ttDaXuatHoaDon)\r\n            this.sendData_TBSaiSot(data.Data.Content);\r\n          else\r\n            this.sendInvoice(data.Data.Content);\r\n        } else if (data.Data.Name === 'thongdiep.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        }\r\n        else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          if (this.ttDaXuatHoaDon)\r\n            this.getXml_TBSaiSot();\r\n          else {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  eSubmit(type) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    this.total_payment = \"\";\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      delete this.frmData[\"note_view_on_bill\"];\r\n      if (type !== 'GHI_TAM') {\r\n        if (!this._validForm()) {\r\n          return;\r\n        }\r\n        if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n          Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        if (!this.checkProductCode()) {\r\n          return;\r\n        }\r\n      }\r\n      if (this.frmData.bill_options) {\r\n        this.frmData.bill_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n          delete item['id'];\r\n          delete item['invoice_id'];\r\n        });\r\n      }\r\n\r\n      if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n        Library.notify('Vui lòng chọn HTTT chuyển khoản cho hóa đơn có giá trị lớn hơn 20 triệu đồng', 'error');\r\n        return false;\r\n      }\r\n      if (!this.isAccessExportInv && type === 'XUAT') {\r\n        Library.notify(this._translate.NOTIFY.you_not_permissions, 'error');\r\n        return false;\r\n      }\r\n      if (type === 'XUAT') {\r\n        this.processXuatHoaDon(type)\r\n      } else {\r\n        this.processGhiTam();\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  processXuatHoaDon(type) {\r\n    let _index = 0;\r\n    let _isValid = true;\r\n    let _lstInv = [];\r\n    this.bill_products.load().then((dataSource) => {\r\n      _lstInv = dataSource.filter(p => p.product_name);\r\n    });\r\n\r\n    for (let i = 0; i < _lstInv.length; i++) {\r\n      if (_lstInv[i].amount > 0 && !_lstInv[i].vat && !_lstInv[i].is_refund_ticket) {\r\n        _index = i;\r\n        _isValid = false;\r\n        break;\r\n      }\r\n    }\r\n    if (!this.isHdGTGT)\r\n      _isValid = true;\r\n    if (!this.billService.checkVatMauHoaDon(_lstInv, this.is_multi_vat)) {\r\n      return false;\r\n    }\r\n\r\n    if (!_isValid) {\r\n      const result = Library.notify('VAT không hợp lệ', 'error');\r\n    } else {\r\n      if (this.confirmCheckPreview) {\r\n        this.xuatHoaDon();\r\n        this.confirmCheckPreview = false;\r\n      } else {\r\n        this.previewBeforeExport(type);\r\n        // if (this.configs.system_parameter.display_template_from_server)\r\n        //   this.previewBeforeSubmit(type);\r\n        // else\r\n        //   this.previewBeforeSubmitFromClient(type);\r\n      }\r\n    }\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = this._translate.THONG_TIN.xuat_hoa_don;\r\n    let du_lieu = this.billService.taodulieuXemTruocMau(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn : this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  xuatHoaDon() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n      this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n    }\r\n  }\r\n  /* Xử lý ghi tạm hóa đơn */\r\n  processGhiTam() {\r\n    this.ghiTam();\r\n  }\r\n\r\n  async ghiTam() {\r\n    this.productGrip._tinhGiaTri();\r\n    if (!this.frmData.id) {\r\n      await this.billService.addNew(this.frmData, false).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.id = res.data.id;\r\n          // this.isDisable = true;\r\n          Library.notify('Ghi tạm hóa đơn thành công', 'success')\r\n          return true;\r\n        } else {\r\n          Library.notify(res.message, 'error')\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      await this.billService.edit(this.frmData.id, this.frmData, false).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.id = res.data.id;\r\n          Library.notify('Ghi tạm hóa đơn thành công', 'success');\r\n          return true;\r\n        } else {\r\n          Library.notify(res.message, 'error')\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n    return true\r\n  }\r\n\r\n  /* Kiểm tra Mã hàng phải nhập không dấu, không chứa ký tự đặc biệt và tối đa 50 ký tự */\r\n  checkProductCode() {\r\n    let isValid = true;\r\n    const _lst = this.frmData.bill_products.filter(p => p.product_name);\r\n    if (_lst.length > 0) {\r\n      for (let i = 0; i < _lst.length; i++) {\r\n        if (VStringService._getValueToString(_lst[i].product_code) != \"\" && !this.productCodePattern.test(_lst[i].product_code)) {\r\n          Library.notify(this._translate.VALIDATION.required_productCode, 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return isValid;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    this.productGrip._tinhGiaTri();\r\n    Library.showloading();\r\n    let xmlInvoice = \"\";\r\n    if (!this.frmData.id) {\r\n      const sub = this.billService.addNew(this.frmData, true).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.bill_number = res.data.bill_number;\r\n          this.frmData.bill_date = moment(res.data.bill_date).format('YYYY-MM-DD HH:mm:ss'); // moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n          let bill_sign_date = moment(res.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.verify_code = res.data.verify_code\r\n          this.frmData.id = res.data.id;\r\n          xmlInvoice = res.data.xml_string;\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n            this.disablleScreen();\r\n          }\r\n          else {\r\n            // Người bán ký\r\n            if (this.configs.system_parameter.is_seller_sign_bill)\r\n              this.xuLyKiFile(xmlInvoice, bill_sign_date);\r\n            else {\r\n              this.info_message = res.data.info_message;\r\n              if (this.info_message && this.info_message.message) {\r\n                xmlInvoice = VStringService._getValueToString(this.info_message.message.message);\r\n                if (xmlInvoice != \"\") {\r\n                  this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          this.confirmCheckPreview = false;\r\n          Library.notify(res.message, 'error')\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      const sub = this.billService.edit(this.frmData.id, this.frmData, true).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.bill_number = res.data.bill_number;\r\n          this.frmData.bill_date = moment(res.data.bill_date).format('YYYY-MM-DD HH:mm:ss'); // moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n          this.verify_code = res.data.verify_code\r\n          let bill_sign_date = moment(res.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.frmData.id = res.data.id;\r\n          xmlInvoice = res.data.xml_string;\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n            this.disablleScreen();\r\n          }\r\n          else {\r\n            if (this.configs.system_parameter.is_seller_sign_bill)\r\n              this.xuLyKiFile(xmlInvoice, bill_sign_date);\r\n            else {\r\n              this.info_message = res.data.info_message;\r\n              if (this.info_message && this.info_message.message) {\r\n                xmlInvoice = VStringService._getValueToString(this.info_message.message.message);\r\n                if (xmlInvoice != \"\") {\r\n                  this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          this.confirmCheckPreview = false;\r\n          Library.notify(res.message, 'error')\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  kyThongDiep(xmlInvoice, signDate) {\r\n    let ListSerialNumber = \"DSCKS\";\r\n    let nodeSign = \"//TDiep/CKSNNT\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'thongdiep.xml', nodeSign, signDate, 'MessageData', ListSerialNumber, true);\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    let nodeSign = \"//HDon/DSCKS/NBan\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n\r\n  }\r\n\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    if (this.info_message && this.info_message.message) {\r\n      setTimeout(function () {\r\n        Library.showloading();\r\n      }, 20);\r\n      const sub = this.billService.sendMessage({\r\n        id: this.frmData.id,\r\n        info_message: {\r\n          message: {\r\n            message: xml_string,\r\n            message_code: this.info_message.message.message_code\r\n          },\r\n          tcntCode: this.info_message.tcntCode,\r\n          messageCodeType: this.info_message.messageCodeType\r\n        }\r\n      }).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.disablleScreen();\r\n          // cấu hình tự động gửi thông báo sai sót\r\n          if (this.configs.system_parameter.enable_send_wrong_process) {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n              Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n            else\r\n              this.startProcess_TBSaiSot();\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  startProcess_TBSaiSot() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.getXml_TBSaiSot();\r\n    } else {\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let ListSerialNumber = \"DSCKS\";\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n      }\r\n      else\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n\r\n    }\r\n  }\r\n\r\n  getXml_TBSaiSot() {\r\n    let bills = [];\r\n    let object = new Object;\r\n    object[\"tax_authority_code\"] = this.oldForm.tax_authority_code; //Mã CQT cấp\r\n    object[\"template_code\"] = this.oldForm.template_code;\r\n    object[\"bill_series\"] = this.oldForm.bill_series;\r\n    object[\"bill_date\"] = this.oldForm.bill_date;\r\n    object[\"bill_number\"] = this.oldForm.bill_number;\r\n    object[\"reason\"] = this.frmData.destroy_reason;\r\n    object[\"notification_nature\"] = \"2\"; //Tính chất thông báo là thay thế\r\n    object[\"type_apply_bill\"] = 1; // Loại áp dụng HĐ (1: tt78)\r\n    object[\"bill_id\"] = this.oldForm.id;\r\n\r\n    bills.push(object);\r\n    let data = {\r\n      notification_type: 1,\r\n      bills: bills\r\n    };\r\n    let xmlInvoice = \"\";\r\n    let sub = this.handleBillService.getXmlInvoiceWrong(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        xmlInvoice = rs.data.xml_file;\r\n        this.bills = rs.data.bills;\r\n        let sign_date = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (xmlInvoice != \"\") {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            this.sendData_TBSaiSot(xmlInvoice);\r\n          else\r\n            this.signXml_TBSaiSot(xmlInvoice, sign_date);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  signXml_TBSaiSot(xmlInvoice, signDate) {\r\n    let nodeSign = \"//TBao/DSCKS/NNT\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, signDate, 'NotificationData', ListSerialNumber, true);\r\n  }\r\n\r\n\r\n  sendData_TBSaiSot(xml_string) {\r\n    let subXuatHoaDon = this.handleBillService.sendXmlInvoiceWrong({\r\n      xml_file: xml_string,\r\n      bills: this.bills\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { },\r\n      () => {\r\n        subXuatHoaDon.unsubscribe();\r\n      });\r\n  }\r\n\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  onNumberChange() {\r\n    VChanggeMoneyService._calTotalMoney(this.frmData, this.formatter, !this.frmData.auto_value);\r\n  }\r\n\r\n  // sự kiện form\r\n  totalPaymentChange = (e) => {\r\n    this.onNumberChange();\r\n    this.frmData.cash = this.frmData.amount_after_vat\r\n    if (this.frmData.auto_value) {\r\n      this.frmData.amount_after_vat = this.frmData.total_payment;\r\n      this.frmData.returns = this.frmData.cash - this.frmData.amount_after_vat;\r\n    }\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    this.doctienbangchu(e.value, currency_code);\r\n  };\r\n\r\n  cashChange(e) {\r\n    if (e.value) {\r\n      this.frmData.returns = this.frmData.cash - this.frmData.amount_after_vat;\r\n    }\r\n  }\r\n\r\n  onChangeSalePercen(e) {\r\n    this.configs.system_parameter.value_rate_percent = e.value;\r\n    let data = {\r\n      config: {\r\n        value: JSON.stringify(this.configs.system_parameter)\r\n      }\r\n    };\r\n    this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n      if (response.status == \"success\") {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n          this.configs = this.authService.getConfigs();\r\n        });\r\n      } else {\r\n      }\r\n    }, err => { }, () => {\r\n    });\r\n    if (this.productGrip)\r\n      this.productGrip._tinhGiaTri();\r\n  }\r\n\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm()) {\r\n        return;\r\n      }\r\n      let data = this.billService.taodulieuXemTruocMau(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n\r\n  handleFormData() {\r\n    if (this.frmData.bill_options) {\r\n      this.frmData.bill_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    this.frmData.adjustment_type = 5;\r\n    this.frmData.origin_id = this.oldForm.id;\r\n    this.frmData.total_payment = this.frmData.amount_after_vat;\r\n    this.frmData.currency_code = 'VND';\r\n    this.frmData.currency_rate = 1;\r\n    // this.frmData.buyer_address = null;\r\n    if (!this.frmData.auto_value) {\r\n      delete this.frmData.tax_information;\r\n    }\r\n    if (!this.isHdGTGT) {\r\n      delete this.frmData.tax_information;\r\n    }   \r\n    if (!this.frmData.tax_information)\r\n      delete this.frmData.tax_information; \r\n    if(this.frmData.tax_information) {\r\n      this.frmData.tax_information.forEach(item => {\r\n          delete item.bill_id\r\n          delete item.id\r\n      })\r\n    }\r\n    this.deleteProperties();\r\n    const bill_products = [];\r\n    this.bill_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        delete item.error;\r\n        delete item.price_after_vat;\r\n        delete item.number_real_import;\r\n        delete item.number_real_export;\r\n        delete item.amount_without_discount;\r\n        delete item.price_after_discount;\r\n        if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n          // if (VStringService._getValueToString(this.pkInvoiceCurrent) != \"\")\r\n          if ((this.frmData.adjustment_form === 'TANG' && this.frmData.adjustment_object === 'HH_DV') || (this.frmData.adjustment_form == 'GIAM' && this.frmData.adjustment_object === 'HH_DV'))\r\n            item.row_content = this.rowContentInInvoiceProduct(item, this.frmData.adjustment_form);\r\n          else\r\n            item.row_content = item.product_name;\r\n          item.id = Helper.makeid();\r\n          bill_products.push(item);\r\n        }\r\n      });\r\n      this.frmData.bill_products = bill_products;\r\n      this.frmData[\"note_view_on_bill\"] = `Hoá đơn này điều chỉnh cho hoá đơn` + \" \" + `số ${this.oldForm.bill_number}, mẫu số ${this.oldForm.template_code}, ký hiệu ${this.oldForm.bill_series} ngày ${moment(this.oldForm.bill_date).format('DD/MM/YYYY')}`;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n    });\r\n\r\n    this.frmData.amount = this.frmData.amount ? this.frmData.amount : 0;\r\n    this.frmData.amount_discount = this.frmData.amount_discount ? this.frmData.amount_discount : 0;\r\n    this.frmData.cash = this.frmData.cash ? this.frmData.cash : 0;\r\n    this.frmData.returns = this.frmData.returns ? this.frmData.returns : 0;\r\n    this.frmData.total_payment = this.frmData.total_payment ? this.frmData.total_payment : 0;\r\n    this.frmData.amount_after_vat = this.frmData.amount_after_vat ? this.frmData.amount_after_vat : 0;\r\n  }\r\n  rowContentInInvoiceProduct(row, status) {\r\n    // hđ bán hàng\r\n    let status_view = (status === 'TANG') ? 'tăng' : 'giảm';\r\n    let str, temp, quantity, price;\r\n    let bill_products = [];\r\n    if(this.oldForm.origin) {\r\n      bill_products = this.oldForm.origin.bill_products;\r\n    }else{\r\n      bill_products = this.oldForm.bill_products;\r\n    }\r\n    if (this.oldForm.template_code == '2') {\r\n      bill_products.some(item => {\r\n        if (item.product_name === row.product_name) {\r\n          temp = item;\r\n          return true;\r\n        }\r\n      });\r\n\r\n      if (temp.quantity !== row.quantity) {\r\n        quantity = true;\r\n      }\r\n      if (temp.price !== row.price) {\r\n        price = true;\r\n      }\r\n\r\n      if (quantity === true || price === true) {\r\n        str = `Điều chỉnh ${status_view} ${quantity ? 'Số lượng, ' : ''}${price ? 'Đơn giá, ' : ''}thành tiền của mặt hàng`;\r\n      } else {\r\n        str = `Điều chỉnh ${status_view} Số lượng, Đơn giá, thành tiền của mặt hàng`;\r\n      }\r\n      return str + ` ${row.product_name}`;\r\n    }\r\n    // hđ gtgt \r\n    else if (this.oldForm.template_code == '1') {\r\n      let vat;\r\n      bill_products.some(item => {\r\n        if (item.product_name === row.product_name) {\r\n          temp = item;\r\n          return true;\r\n        }\r\n      });\r\n\r\n      if (temp.quantity !== row.quantity) {\r\n        quantity = true;\r\n      }\r\n      if (temp.price !== row.price) {\r\n        price = true;\r\n      }\r\n      if (temp.vat !== row.vat) {\r\n        vat = true;\r\n      }\r\n\r\n      let vat_view = ((temp.vat === -1 || temp.vat === 0 || !temp.vat) && vat !== true) ? '' : ', tiền thuế';\r\n\r\n      if (vat) {\r\n        str = `Điều chỉnh ${status_view} thuế suất và tiền thuế GTGT của mặt hàng`;\r\n      } else if (quantity === true || price === true) {\r\n        str = `Điều chỉnh ${status_view} ${quantity ? 'Số lượng, ' : ''}${price ? 'Đơn giá, ' : ''}thành tiền${vat_view} của mặt hàng`;\r\n      } else {\r\n        str = `Điều chỉnh ${status_view} Số lượng, Đơn giá, thành tiền, thuế suất${vat_view} của mặt hàng`;\r\n      }\r\n      return str + ` ${row.product_name}`;\r\n    }\r\n  }\r\n  guideSales() {\r\n    this.isDisplayGuideSale = !this.isDisplayGuideSale;\r\n  }\r\n  onTemplateTypeChange(e) {\r\n   this.invoiceTemplateSelect = e;\r\n   if (!this.invoiceTemplateSelect[\"is_discount\"]) {\r\n      this.bill_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          item.discount = null;\r\n          item.amount_discount = null;\r\n        });\r\n      });\r\n      this.productGrip._tinhGiaTri();\r\n    }\r\n    this.is_multi_vat = e.is_multi_vat;\r\n  }\r\n  _validForm() {\r\n    let _isValid = true;\r\n    const _lst = this.frmData.bill_products;\r\n    if (!this.frmData.destroy_reason) {\r\n      Library.notify(\"Lý do không được để trống\", 'error');\r\n      return false;\r\n    }\r\n    if (!this.billService.checkVatMauHoaDon(_lst, this.is_multi_vat)) {\r\n      return false;\r\n    }\r\n    return _isValid;\r\n  }\r\n\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    if (this.configs.system_parameter.view_multi_invoice) {\r\n      let data = this.billService.taodulieuXemMau(ids);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }\r\n    else {\r\n      const initialState = {\r\n        items: ids,\r\n        isXuatHD: false,\r\n        hinhthucxuat: '',\r\n        typeAction: sEnum.typeCode.xem_hoa_don_mtt,\r\n        cssClass: 'modal-xl view-bill'\r\n      };\r\n      this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n    }\r\n  }\r\n\r\n  deleteProperties() {\r\n    const frmDataBill: BillModel = new BillModel(5);\r\n    const keyOfBill = Object.keys(frmDataBill);\r\n    const keyOfFrm = Object.keys(this.frmData);\r\n    // const formData = this.frmData;\r\n    for (let i = 0; i <= keyOfFrm.length; i++) {\r\n      let error = keyOfBill.includes(keyOfFrm[i]);\r\n      if (!error) {\r\n        delete this.frmData[keyOfFrm[i]]\r\n      }\r\n    }\r\n    delete this.frmData.total_amount_vat;\r\n\r\n  }\r\n\r\n  onRefreshForm() {\r\n    this.bill_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.bill_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.bill_products\r\n    });\r\n    this.productGrip.createUpdateEvent();\r\n    this.frmData.total_payment = null;\r\n    this.frmData.amount_after_vat = null;\r\n    this.refreshTien();\r\n  }\r\n\r\n  refreshTien() {\r\n    this.frmData.amount = null;\r\n    this.frmData.amount_vat = null;\r\n    this.frmData.amount_after_vat = null;\r\n    this.frmData.amount_discount = null;\r\n    this.frmData.cash = null;\r\n    this.frmData.returns = null;\r\n    this.frmData.total_payment = null;\r\n    this.frmData.total_payment_word = \"\";\r\n    this.frmData.total_amount_vat = null;\r\n  }\r\n  setContentProductNameV2(value, type) {\r\n    setTimeout(() => {\r\n      if (type === 'text') {\r\n        this.productGrip.changeColumnProductNameToText();\r\n      } else if (type === 'select') {\r\n        this.productGrip.changeColumnProductNameToSelect();\r\n      }\r\n    }, 0);\r\n  }\r\n\r\n  setContentProductName(value, type) {\r\n    setTimeout(() => {\r\n      if (this.productGrip.dataSource.items()[0]) {\r\n        if (!this.configs.system_parameter.is_add_product_code) {\r\n          this.productGrip.dataSource.items()[0].product_name = value;\r\n        }\r\n      }\r\n      if (type === 'text') {\r\n        this.productGrip.changeColumnProductNameToText();\r\n      } else if (type === 'select') {\r\n        this.productGrip.changeColumnProductNameToSelect();\r\n      }\r\n    }, 0);\r\n  }\r\n\r\n  adjustmentObjectChange(v) {\r\n    this.doctienbangchu(this.frmData.total_payment, this.frmData.currency_code);\r\n    let _noiDungDC = '';\r\n    let isDC = false;\r\n    switch (v) {\r\n      case 'TANG_HH_DV':\r\n        this.setContentProductNameV2('', 'select');\r\n        this.productGrip.gripAllowEdit = true;\r\n        this.productGrip.ShowAndHidePhuongThucDC(false, 'TANG_HH_DV');\r\n        break;\r\n      case 'TANG_KHAC_TANG':\r\n        this.setContentProductName('', 'text');\r\n        this.productGrip.gripAllowEdit = true;\r\n        this.productGrip.ShowAndHidePhuongThucDC(false);\r\n        break;\r\n      case 'GIAM_HH_DV':\r\n        this.setContentProductNameV2('', 'select');\r\n        this.productGrip.gripAllowEdit = true;\r\n        this.productGrip.ShowAndHidePhuongThucDC(false, 'GIAM_HH_DV');\r\n        break;\r\n      case 'GIAM_KHAC_GIAM':\r\n        this.setContentProductName('', 'text');\r\n        this.productGrip.gripAllowEdit = true;\r\n        this.productGrip.ShowAndHidePhuongThucDC(false);\r\n        break;\r\n      case 'THONG_TIN_MST':\r\n        isDC = true;\r\n        if (this.frmData.buyer_tax_code && this.oldForm.buyer_tax_code !== this.frmData.buyer_tax_code) {\r\n          _noiDungDC = `Điều chỉnh mã số thuế Công ty/đơn vị mua hàng từ ${this.oldForm.buyer_tax_code} thành ${this.frmData.buyer_tax_code}`;\r\n        }\r\n        break;\r\n      case 'THONG_TIN_KH_DC':\r\n        isDC = true;\r\n        if (this.frmData.customer_name && this.oldForm.customer_name !== this.frmData.customer_name) {\r\n          _noiDungDC = `Điều chỉnh tên đơn vị mua hàng từ ${this.oldForm.customer_name} thành ${this.frmData.customer_name}`;\r\n        }\r\n        if (this.frmData.buyer_name && this.oldForm.buyer_name !== this.frmData.buyer_name) {\r\n          if (_noiDungDC) {\r\n            _noiDungDC += '\\n';\r\n          }\r\n          _noiDungDC += `Điều chỉnh tên người mua từ ${this.oldForm.buyer_name} thành ${this.frmData.buyer_name}`;\r\n        }\r\n        if (this.frmData.buyer_address && this.oldForm.buyer_address !== this.frmData.buyer_address) {\r\n          if (_noiDungDC) {\r\n            _noiDungDC += '\\n';\r\n          }\r\n          _noiDungDC += `Điều chỉnh địa chỉ của đơn vị mua hàng từ ${this.oldForm.buyer_address} thành ${this.frmData.buyer_address}`;\r\n        }\r\n        break;\r\n      case 'THONG_TIN_TIEN_CHU':\r\n        isDC = true;\r\n        if (this.frmData.total_payment_word && this.oldForm.total_payment_word !== this.frmData.total_payment_word) {\r\n          let invoice_date = moment(this.oldForm.invoice_date).format('DD/MM/YYYY');\r\n          _noiDungDC = `Điều chỉnh dòng số tiền bằng chữ của hóa đơn số ${this.oldForm.invoice_number}, ký hiệu ${this.oldForm.invoice_series} ngày ${invoice_date} từ: ${this.oldForm.total_payment_word} thành ${this.frmData.total_payment_word}`;\r\n        }\r\n        break;\r\n      case 'KHAC_KHAC':\r\n        setTimeout(() => {\r\n          this.productGrip.changeColumnProductNameToText();\r\n        }, 0);\r\n        this.productGrip.ShowAndHidePhuongThucDC(false);\r\n        this.productGrip.gripAllowEdit = true;\r\n        break;\r\n      case 'TANG_GIAM':\r\n        this.setContentProductName('', 'text');\r\n        this.productGrip.ShowAndHidePhuongThucDC(false);\r\n        this.productGrip.gripAllowEdit = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (isDC) {\r\n      this.setContentProductName(_noiDungDC, 'text');\r\n      this.productGrip.gripAllowEdit = false;\r\n      this.productGrip.ShowAndHidePhuongThucDC(false);\r\n    }\r\n  }\r\n\r\n  doctienbangchu(total_payment, currency_code) {\r\n    if (VStringService._getValueToString(this.frmData[\"adjustment_object\"]) == \"TANG_GIAM\") {\r\n      let number_money = Math.abs(total_payment);\r\n      let c_money = Helper.tienBangChu(number_money, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n      this.frmData.total_payment_word = c_money;\r\n      if (total_payment < 0) {\r\n        this.frmData.total_payment_word = \"Giảm \" + c_money;\r\n        if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n          this.frmData.total_payment_word = this.frmData.total_payment_word.replace(\"(\", \"(Adjusted to reduce by \")\r\n        }\r\n      }\r\n      else if (total_payment > 0) {\r\n        this.frmData.total_payment_word = \"Tăng \" + c_money;\r\n        if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n          this.frmData.total_payment_word = this.frmData.total_payment_word.replace(\"(\", \"(Adjusted to increase by \")\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      this.frmData.total_payment_word = Helper.tienBangChu(total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n\r\n      if (VStringService._getValueToString(this.frmData.total_payment_word) != \"\" && this.frmData.total_payment_word != \"Không đồng chẵn.\") {\r\n        if (this.frmData[\"adjustment_form\"] === 'TANG') {\r\n          this.frmData.total_payment_word = \"Tăng \" + this.frmData.total_payment_word;\r\n          if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n            this.frmData.total_payment_word = this.frmData.total_payment_word.replace(\"(\", \"(Adjusted to increase by \")\r\n          }\r\n        }\r\n        if (this.frmData[\"adjustment_form\"] == 'GIAM') {\r\n          this.frmData.total_payment_word = \"Giảm \" + this.frmData.total_payment_word;\r\n          if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n            this.frmData.total_payment_word = this.frmData.total_payment_word.replace(\"(\", \"(Adjusted to reduce by \")\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"row invoice-form\\\">\\r\\n\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <!-- mẫu hóa đơn -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- Hình thức điều chỉnh/loại điều chỉnh -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"adjustment_form\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.adjustment_form}\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.adjustment_forms, onItemClick: adjustmentFormChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.adjustment_form}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"adjustment_object\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.adjustment_object}\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.adjustment_objects, onItemClick: adjustmentObjectChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.adjustment_object}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- mã số thuế -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='vat layout_input group-input-button'>\\r\\n          <dxi-item name=\\\"search-mst\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.tax_code }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-autocomplete valueExpr=\\\"tax_code\\\"\\r\\n                placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\" [dataSource]=\\\"tax_codes\\\"\\r\\n                [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"taxCodeChoose($event)\\\"\\r\\n                [(value)]=\\\"frmData.buyer_tax_code\\\" (onFocusOut)=\\\"updateTaxcodeInfo($event)\\\"\\r\\n                (onValueChanged)=\\\"changeTaxCode($event)\\\" [disabled]=\\\"disableForm.tax_code\\\">\\r\\n                <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                  <span>{{item.tax_code}}: {{ item.name }}</span>\\r\\n                </div>\\r\\n              </dx-autocomplete>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item cssClass='btn-small' [disabled]=\\\"disableForm.tax_code\\\">\\r\\n            <button (click)=\\\"searchTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n              <i class=\\\"{{_translate.ICONS.search}}\\\" style=\\\"font-size: 22px;\\\"></i>\\r\\n            </button>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Mã kh -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='vat layout_input group-input-button dcWidth'>\\r\\n          <dxi-item name=\\\"search-mkh\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_code }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-autocomplete valueExpr=\\\"code\\\" [(value)]=\\\"frmData.customer_code\\\"\\r\\n                placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\" [dataSource]=\\\"customer_codes\\\"\\r\\n                [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"customerCodeChoose($event)\\\"\\r\\n                (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n                <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                  <span>{{item.code}}: {{ item.name }}</span>\\r\\n                </div>\\r\\n              </dx-autocomplete>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"mst_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- Hình thức thanh toán và số hóa đơn gốc -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"payment_method_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{disabled:  disableForm.rest,items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_method }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button hdGoc dcWidth'>\\r\\n          <dxi-item name=\\\"origin-invoice-number\\\">\\r\\n            <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number_original}}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-text-box [(value)]=\\\"oldForm.bill_number\\\" disabled=\\\"true\\\"></dx-text-box>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"origin_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- Tên ngân hàng -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item cssClass=\\\"vat layout_input\\\" dataField=\\\"bank_account\\\" [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.bank_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- lý do điều chỉnh -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" cssClass='group-input-button'>\\r\\n        <dxi-item dataField=\\\"destroy_reason\\\">\\r\\n          <dxo-label text=\\\"Lý do điều chỉnh\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Lý do điều chỉnh {{_translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n    </dx-form>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <!-- ngày hóa đơn số hóa đơn -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"bill_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n          [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_date }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"bill_number\\\" [template]=\\\"'notifydate'\\\" [cssClass]=\\\"'max_right'\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- Họ tên người mua -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"buyer_name\\\"\\r\\n          [editorOptions]=\\\"{disabled:  disableForm.rest,onValueChanged: customerChanged}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.buyer_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- Địa chỉ người mua -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"buyer_address\\\" [editorOptions]=\\\"{disabled:  disableForm.rest,onValueChanged: customerChanged}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.buyer_address }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- Email -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: 'Email'}\\\">\\r\\n          <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n            <div\\r\\n              class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n              <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                </app-tag-input-email>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- Tên đơn vị -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"customer_name\\\"\\r\\n          [editorOptions]=\\\"{ disabled: disableForm.rest,isRequired: false,onValueChanged: customerChanged}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- Số đtdd và số CCCD -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"buyer_mobile\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest,onValueChanged: customerChanged}\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.phone }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.phone }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item [editorOptions]=\\\"{disabled: disableForm.rest}\\\" cssClass=\\\"vat layout_input max_right\\\" dataField=\\\"id_card\\\">\\r\\n          <dxo-label text=\\\"Số CCCD\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <!-- các trường mở rộng -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\"  [formData]=\\\"frmData\\\"  [customerTempt]=\\\"customerTempt\\\" [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'bill_options'\\\"></app-form-extend>\\r\\n      </dxi-item>\\r\\n\\r\\n      <div *dxTemplate=\\\"let d of 'notifydate'\\\">\\r\\n        <div>\\r\\n          <dx-text-box [disabled]=\\\"true\\\" [(value)]=\\\"frmData.bill_number\\\"\\r\\n            class=\\\"invoice-number-create-invoice\\\"></dx-text-box>\\r\\n        </div>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{_translate.CONFIRM.update_customer}}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{_translate.CONTROLL.LABEL.update}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \"::ng-deep .vat.invoice-number-create-invoice input{color:red;font-weight:bold}.icon-size{font-size:21px;padding:2px 0}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code:focus{outline:none}::ng-deep .vat.invoice-note input{color:#0070C0;font-weight:bold}::ng-deep .layout_input_left span.dx-field-item-label-content{width:144px !important}#advBtn{width:26px;height:26px;margin-left:5px}:host ::ng-deep .invoice-number-create-invoice{color:red;font-weight:bold;padding-top:3px}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align.event_layout_input .dx-field-item-label .dx-field-item-label-content{width:119px !important;min-width:unset !important}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align.event_layout_input .dx-field-item-label .dx-field-item-label-content span{text-wrap:wrap}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align.odd_layout_input .dx-field-item-label .dx-field-item-label-content{width:74px !important;min-width:unset !important}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align.odd_layout_input .dx-field-item-label .dx-field-item-label-content span{text-wrap:wrap}::ng-deep .dcWidth span.dx-field-item-label-content{width:106px !important}::ng-deep .hdGoc .dx-texteditor-input{color:red !important;font-weight:bold}\\n\"","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { pattern } from '@config/pattern';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { VSelectBoxService, VStringService, VChanggeMoneyService, Helper } from '@core/index';\r\nimport { Library } from '@core/library';\r\nimport { AuthService } from '@core/services';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { ChooseHdckComponent } from '@modules/handle-invoice/components/choose-hdck/choose-hdck.component';\r\nimport { AddCustomerComponent } from '@shared/components';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport * as moment from 'moment';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { Subscription } from 'rxjs';\r\nimport * as _ from 'lodash';\r\n\r\n@Component({\r\n  selector: 'app-adjust-form-bill',\r\n  templateUrl: './adjust-form-bill.component.html',\r\n  styleUrls: ['./adjust-form-bill.component.scss']\r\n})\r\nexport class AdjustFormBillComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  routeSub: Subscription;\r\n  @ViewChild(FormExtendComponent) formExtend: FormExtendComponent;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @Input() frmData: any;\r\n  @Input() oldForm: any;\r\n  @Input() bill_products: any;\r\n  @Input() formatter: any;\r\n  @Input() infoDangKy: any;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() listTemplate: any;\r\n  @Input() isHdGTGT: boolean;\r\n  @Input() ttDaXuatHoaDon:boolean = false;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('adjustmentObjectChange') adjustmentObject = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  @Output('onRefreshForm') onRefreshForm = new EventEmitter<any>();\r\n  template_temp: any;\r\n  isShow = false;\r\n  bsModalRef: BsModalRef;\r\n  select: any = {};\r\n  disableForm = {\r\n    tax_code: true,\r\n    rest: true\r\n  };\r\n  pattern = pattern;\r\n  tax_codes: any = []; //mã số thuế\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  configs: any = {};\r\n  _translate: any;\r\n  emails: any = [];\r\n  private arrEmail: any = [];\r\n  formItems:any = [];\r\n  customForms = []; \r\n  customerTempt = {};\r\n  showPopup: boolean = false;\r\n  customerCurent: any = {};\r\n  tax_code_search: any;\r\n  origin_btn_options = {\r\n    text: '', icon: 'assets/img/icons/Xem.png', type: 'default',\r\n    onClick: () => {\r\n      if(this.oldForm.id) {\r\n        // gtgt mtt\r\n        if(this.oldForm.template_code == '1') {\r\n          window.open(`/system/bills-invoice-vat/${this.oldForm.id}`, '_blank');\r\n        }else if(this.oldForm.template_code == '2') {\r\n          window.open(`/system/bills-invoice-sale/${this.oldForm.id}`, '_blank');\r\n        }\r\n      }\r\n\r\n    }\r\n  };\r\n  mst_btn_options = {\r\n    text: '', icon: 'assets/img/icons/Them.png', type: 'default',\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n        \r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private billService: BillService,\r\n    private authService: AuthService,\r\n    private customersService: CustomersService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.currency_codes = data.init[1].DM_LOAI_TIEN;\r\n      this.select.customer_types = data.init[1].DM_NHOM_KHACH_HANG;\r\n      this.select.export_places = data.init[1].DM_NOI_XUAT_HOA_DON;\r\n      this.select.list_bank_account_seller = data.init[1].DM_TAI_KHOAN_NGAN_HANG;\r\n      this.select.adjustment_forms = VSelectBoxService._adjustmentFormsMtt(this._translate);\r\n      this.select.list_bank_account_seller.forEach(item => {\r\n        item.name_display = item.code + ': ' + item.name;\r\n      });\r\n\r\n      this.select.templatesTT78 = this.listTemplate;\r\n      \r\n    });\r\n\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.billService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.billService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n    this.select.adjustment_objects = [];\r\n    if (this.frmData.adjustment_form) {\r\n      this.adjustmentFormChange({ value: this.frmData.adjustment_form, isInit: true });\r\n    }\r\n    if (this.frmData.adjustment_object && this.frmData.adjustment_form) {\r\n        this.setPropertyOfForm(this.frmData.adjustment_form, this.frmData.adjustment_object, true);\r\n    }\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n  }\r\n\r\n  setPropertyOfForm(adjustment_form, adjustment_object, isInit) {\r\n    if (adjustment_form === 'TANG' && adjustment_object === 'HH_DV') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('TANG_HH_DV');\r\n    } else if (adjustment_form === 'TANG' && adjustment_object === 'KHAC_TANG') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('TANG_KHAC_TANG');\r\n    } else if (adjustment_form === 'GIAM' && adjustment_object === 'HH_DV') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('GIAM_HH_DV');\r\n    } else if (adjustment_form === 'GIAM' && adjustment_object === 'KHAC_GIAM') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('GIAM_KHAC_GIAM');\r\n    } else if (adjustment_form === 'TANG_GIAM' && adjustment_object === 'TANG_GIAM') {\r\n      this.disableForm = { tax_code: false, rest: false };\r\n      this.adjustmentObject.emit('TANG_GIAM');\r\n    }\r\n    if (adjustment_object !== 'TANG_GIAM' && !isInit) {\r\n      this.frmData.buyer_tax_code = this.oldForm.buyer_tax_code;\r\n      this.frmData.customer_name = this.oldForm.customer_name;\r\n      this.frmData.buyer_address = this.oldForm.buyer_address;\r\n      this.frmData.buyer_name = this.oldForm.buyer_name;\r\n      this.frmData.buyer_mobile = this.oldForm.buyer_mobile;\r\n    }\r\n  }\r\n\r\n  adjustmentFormChange = (e) => {\r\n    this.disableForm = { tax_code: true, rest: true };\r\n    let value = e.value;\r\n    if (!e.isInit) {\r\n      this.onRefreshForm.emit();\r\n      value = e.itemData.code;\r\n    }\r\n    switch (value) {\r\n      case 'TANG':\r\n        if (!e.isInit)\r\n          this.frmData.adjustment_object = '';\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Hàng hóa dịch vụ',\r\n            code: 'HH_DV'\r\n          },\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC_TANG'\r\n          },\r\n        ];\r\n        if (this.frmData.total_payment_word) {\r\n          this.frmData.total_payment_word = this.frmData.total_payment_word.replace(\"Giảm \", \"Tăng \");\r\n          if (this.frmData.total_payment_word.includes('Tăng') == false)\r\n            this.frmData.total_payment_word = \"Tăng \" + this.frmData.total_payment_word;\r\n\r\n        }\r\n        break;\r\n      case 'GIAM':\r\n        if (!e.isInit)\r\n          this.frmData.adjustment_object = '';\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Hàng hóa dịch vụ',\r\n            code: 'HH_DV'\r\n          },\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC_GIAM'\r\n          },\r\n        ];\r\n        if (this.frmData.total_payment_word)\r\n          this.frmData.total_payment_word = this.frmData.total_payment_word.replace(\"Tăng \", \"Giảm \");\r\n       \r\n          if (this.frmData.total_payment_word && this.frmData.total_payment_word.includes('Giảm') == false)\r\n            this.frmData.total_payment_word = \"Giảm \" + this.frmData.total_payment_word;\r\n        \r\n        break;\r\n      case 'TANG_GIAM':\r\n       \r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Điều chỉnh tăng giảm đồng thời và Khác',\r\n            code: 'TANG_GIAM'\r\n          },\r\n        ];\r\n        \r\n        this.frmData.adjustment_object = 'TANG_GIAM';\r\n        if (this.frmData.total_payment_word) {\r\n          this.frmData.total_payment_word = this.frmData.total_payment_word.replace(\"Tăng \", \"\");\r\n          this.frmData.total_payment_word = this.frmData.total_payment_word.replace(\"Giảm \", \"\");\r\n        }\r\n        this.disableForm = { tax_code: false, rest: false };\r\n        this.setPropertyOfForm(this.frmData.adjustment_form, this.frmData.adjustment_object, e.isInit);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    \r\n  };\r\n\r\n  adjustmentObjectChange = (e) => {\r\n    this.onRefreshForm.emit();\r\n    this.setPropertyOfForm(this.frmData.adjustment_form, e.itemData.code, false);\r\n  }\r\n\r\n  onAdvancedClick() {\r\n    this.isShow = !this.isShow;\r\n  }\r\n\r\n  \r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (const key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.invoice_options = _dulieumorong;\r\n    });\r\n  }\r\n\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n  \r\n\r\n  // gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  taxCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n   \r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerChanged = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.name) !== VStringService._getValueToString(this.frmData.customer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_person_name) !== VStringService._getValueToString(this.frmData.buyer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_mobile) !== VStringService._getValueToString(this.frmData.buyer_mobile)\r\n              || VStringService._getValueToString(this.customerCurent.business_address) !== VStringService._getValueToString(this.frmData.buyer_address)\r\n              || VStringService._getValueToString(this.customerCurent.email) !== VStringService._getValueToString(this.frmData.buyer_email)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n\r\n      });\r\n\r\n    }\r\n  };\r\n\r\n\r\n\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.formDuLieuMoRong(item);\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.bill_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateTypeChange.emit(item);\r\n      }\r\n    });\r\n  }\r\n\r\n  ///////////////\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n\r\n  paymentMethodChange = (e) => {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.payment_method_view_name = _obj.name;\r\n    }\r\n  }\r\n\r\n\r\n  capNhatDmKhachHang() {\r\n    this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.buyer_tax_code);\r\n    this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n    this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n    this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.buyer_name);\r\n    this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.buyer_mobile);\r\n    this.customerCurent.business_address = VStringService._getValueToString(this.frmData.buyer_address);\r\n    this.customerCurent.email = VStringService._getValueToString(this.frmData.buyer_email);\r\n    const data = { customer: this.customerCurent };\r\n    this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n      if (response.status === 'success') {\r\n        this.showPopup = false;\r\n      } else {\r\n        Library.notify(response.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n    });\r\n\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n  updateCustomerInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  updateTaxcodeInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.tax_code) !== VStringService._getValueToString(this.frmData.buyer_tax_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n \r\n  changeTaxCode(e) {\r\n    this.tax_code_search = e.value\r\n  }\r\n  searchTaxCode() {\r\n    Library.showloading();\r\n    this.tax_code_search = this.frmData.buyer_tax_code;\r\n    if (!this.tax_code_search) {\r\n      Library.notify(\"Vui lòng nhập mã số thuế!\", \"error\")\r\n    } else {\r\n      this.billService.getInfoCompany(this.tax_code_search).subscribe(res => {\r\n        if (res.status == \"success\") {\r\n          // this.dataTaxCode = res.data.customer;\r\n          this.frmData.customer_name = res.data.customer.name;\r\n          this.frmData.buyer_address = res.data.customer.business_address;\r\n        }\r\n      })\r\n    }\r\n    this.onFieldDataChanged();\r\n    setTimeout(() => {\r\n      Library.hideloading();\r\n    }, 1000);\r\n  }\r\n\r\n  disableTemplateInput() {\r\n    if (this.frmData.bill_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  formDuLieuMoRong(item) {\r\n    let _dulieumorong = _.cloneDeep(item.fields).filter(x => x.type === '4');\r\n    Helper.resetObject(this.formItems)\r\n    this.customForms = [];\r\n    this.customerTempt = {};\r\n    const bill_options = this.frmData.bill_options;\r\n\r\n    if (bill_options.length > 0) {\r\n      _dulieumorong = _dulieumorong.map((dl) => {\r\n        let option = bill_options.find(x => x.code == dl.code)\r\n        if (option) {\r\n          dl.value = option.value;\r\n        }\r\n        return dl;\r\n      });\r\n    }\r\n\r\n    this.frmData.bill_options = _dulieumorong;\r\n    if (_dulieumorong.length > 0) {\r\n      this.formExtend.createForm(this.customForms, _dulieumorong)\r\n    }\r\n    _dulieumorong.forEach(value => {\r\n      this.customerTempt[value.code] = value.value;\r\n    });\r\n  }\r\n  ngAfterViewInit() {\r\n    let template = null;   \r\n    template = this.select.templatesTT78.find(item => item.value == this.frmData.template_id);\r\n    this.onChangeTem(template);\r\n  }\r\n\r\n}\r\n","module.exports = \"<!--phần table hiển thị-->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\" style=\\\"padding: 15px 20px;\\\">\\r\\n    <!-- Thêm dòng -->\\r\\n    <div class=\\\"pull-left\\\">\\r\\n      <div style=\\\"float: left;width:  30%; padding-top: 4px\\\">{{ _translate.CONTROLL.BUTTON.add_row }}</div>\\r\\n      <div style=\\\"float: left; width: 30%\\\">\\r\\n        <dx-number-box #numberBox [max]=\\\"100\\\" [min]=\\\"1\\\" [showSpinButtons]=\\\"true\\\" [(value)]=\\\"rowData\\\"></dx-number-box>\\r\\n      </div>\\r\\n      <div>\\r\\n        <dx-button style=\\\"height: 27px\\\" icon=\\\"fa fa-plus-circle\\\" type=\\\"default\\\" text=\\\"\\\" (onClick)=\\\"addRow()\\\">\\r\\n        </dx-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <!-- Hóa đơn bán hàng NQ 43 -->\\r\\n      <dx-check-box *ngIf=\\\"!isHdGTGT\\\" style=\\\"margin-right: 20px\\\" [(value)]=\\\"frmData.is_resolution_43\\\"\\r\\n        text=\\\"{{ _translate.THONG_TIN.giam_thue_theo_nq43 }}\\\" (onValueChanged)=\\\"_changeNQ43($event)\\\"></dx-check-box>\\r\\n      <dx-check-box class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\"\\r\\n        [(value)]=\\\"frmData.auto_value\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n        <dx-button text=\\\"Lấy hàng hóa HĐ gốc\\\" type=\\\"default\\\" (click)=\\\"thayTheToanBo()\\\" [disabled]=\\\"!isHangHoaDichVu\\\">\\r\\n        </dx-button>\\r\\n      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n      style=\\\"display: none;\\\" />\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"gripAllowEdit\\\"></dxo-editing>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxo-scrolling mode=\\\"virtual\\\">\\r\\n      </dxo-scrolling>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"order\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- mã hàng hóa -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_add_product_code\\\" dataField=\\\"product_code\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_code }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n        alignment=\\\"center\\\" [editorOptions]=\\\"{showClearButton: true}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"product_code\\\" *ngIf=\\\"!isAll\\\">\\r\\n        </dxo-lookup>\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsViewFull\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\" *ngIf=\\\"isAll\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Tên hàng hoá -->\\r\\n      <dxi-column *ngIf=\\\"( !configs.system_parameter.is_add_product_code && isTextProductName )\\\"\\r\\n        [editorOptions]=\\\"{showClearButton: true}\\\" dataField=\\\"product_name\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\" alignment=\\\"left\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"product_name\\\" valueExpr=\\\"product_name\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"(!isTextProductName) || (configs.system_parameter.is_add_product_code  && isTextProductName)\\\"\\r\\n        dataField=\\\"product_name\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Khuyến mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.promotional_goods_on_the_invoice\\\" cellTemplate=\\\"khuyen_mai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.promotion }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Chiết khấu thương mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.commercial_discount\\\" cellTemplate=\\\"cktm\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.commercial_discount }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Đơn vị tính -->\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\" dataType=\\\"number\\\" alignment=\\\"center\\\" \\r\\n         [editorOptions]=\\\"{ format: formatter.so_luong,step: '0' }\\\"\\r\\n         [format]=\\\"formatter.so_luong\\\"\\r\\n         ></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\" [editorOptions]=\\\"{ format: formatter.don_gia,step: '0' }\\\"\\r\\n        [format]=\\\"formatter.don_gia\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"invoiceTemplateSelect && invoiceTemplateSelect.is_discount\\\"\\r\\n        dataField=\\\"discount\\\" headerCellTemplate=\\\"discountHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.chiet_khau }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.chiet_khau }}\\\" [editorOptions]=\\\"{ format: formatter.ty_le_chiet_khau }\\\"\\r\\n        [format]=\\\"formatter.ty_le_chiet_khau\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"invoiceTemplateSelect && invoiceTemplateSelect.is_discount\\\"\\r\\n        dataField=\\\"amount_discount\\\" headerCellTemplate=\\\"amount_discountHeader\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tien_chiet_khau }\\\" [format]=\\\"formatter.tien_chiet_khau\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"vat\\\" headerCellTemplate=\\\"vatHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\"\\r\\n        alignment=\\\"center\\\" *ngIf=\\\"isHdGTGT\\\" [editorOptions]=\\\"{showClearButton: true ,step: '0'}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount_vat\\\" headerCellTemplate=\\\"amountVatHeader\\\" *ngIf=\\\"isHdGTGT\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tien_thue, step: '0' }\\\" [format]=\\\"formatter.tien_thue\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tong_tien, step: '0' }\\\" [format]=\\\"formatter.tong_tien\\\">\\r\\n      </dxi-column>\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.quantity }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.total_money }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_explain\\\" [disabled]=\\\"d.data.is_promotion\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'khuyen_mai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_explain\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n    \\r\\n      <div *dxTemplate=\\\"let d of 'is_transport_number'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_transport_number\\\"></dx-check-box>\\r\\n      </div>\\r\\n\\r\\n      <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\" (onValueChanged)=\\\"changeCKTM(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ty_le_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amount_discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.amount_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      \\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:20px;margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:8px}.support-invoice .support-link img,.support-invoice .support-link i{margin-right:15px;margin-top:-2px}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .styleItemToList{color:dodgerblue}.button-dropdown-extend{display:inline-flex}.pull-right .auto-input{margin-right:75px !important}\\n\"","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { pattern } from '@config/pattern';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { Helper, VStringService, VChanggeMoneyService } from '@core/index';\r\nimport { Library } from '@core/library';\r\nimport { AuthService } from '@core/services';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { ConfigDecimalComponent } from '@shared/index';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { Subscription } from 'rxjs';\r\nimport * as XLSX from 'xlsx';\r\n\r\n@Component({\r\n  selector: 'app-adjust-product-grip',\r\n  templateUrl: './adjust-product-grip.component.html',\r\n  styleUrls: ['./adjust-product-grip.component.scss']\r\n})\r\nexport class AdjustProductGripComponent implements OnInit, OnDestroy {\r\n\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n\r\n  routeSub: Subscription;\r\n\r\n  contextMenu = [{ text: 'Thêm' }, { text: 'Xóa' }];\r\n  @Input() dataSource: any;\r\n  @Input() bill_products: any;\r\n  @Input() formatter: any;\r\n  @Input() oldForm: any;\r\n  select: any = {};\r\n  @Input() frmData: any;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() listTemplate: any;\r\n  @Input() isHdGTGT: boolean;\r\n  @Input() invoiceTemplateSelect: any;\r\n  amount_after_vat: any = 0;\r\n  bsModalRef: BsModalRef;\r\n  // showPopup = false; // Popup\r\n  dataExcelFile: any = null;\r\n  ttDaXuatHoaDon = false;\r\n  gripAllowEdit = false;\r\n  configs: any;\r\n  isAll = false;\r\n  isTextProductName = false;\r\n  isHangHoaDichVu = false;\r\n  dataExcelFileInfo: any = null;\r\n  _translate: any;\r\n  isPhuongThucDC = false;\r\n  extras = [];\r\n  rowData = 1;\r\n  isPXKDaiLy = false\r\n  isPXKNB = false\r\n  productsFull: any = [];\r\n  loaiHoaDon: any //ko dùng\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  @Output('gripChange') gripChange = new EventEmitter<Array<any>>();\r\n  @Output('autoChange') autoChange = new EventEmitter<any>();\r\n\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private billService: BillService,\r\n    private productsService: ProductsService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.countrys = data.init[1].DM_QUOC_GIA;\r\n\r\n      this.oldForm = data.init[2];\r\n      // Hàng hóa dịch vụ\r\n      this.select.products = [];\r\n      this.productsFull = data.init[3];\r\n      this.productsFull.forEach(item => {\r\n        if (item.code) {\r\n          item.mhvth = item.code + ': ' + item.name;\r\n        } else {\r\n          item.mhvth = \"(Chưa có mã hàng) \" + ': ' + item.name;\r\n        }\r\n      })\r\n      if (this.oldForm.origin) {\r\n        this.oldForm.origin.bill_products.forEach(item => {\r\n          this.select.products.push(item);\r\n        });\r\n      } else {\r\n        this.oldForm.bill_products.forEach(item => {\r\n          this.select.products.push(item);\r\n        });\r\n      }\r\n      this.select.products.forEach(item => {\r\n        if (item.product_code) {\r\n          item.mhvth = item.product_code + ': ' + item.product_name;\r\n        } else {\r\n          item.mhvth = \"(Chưa có mã hàng) \" + ': ' + item.product_name;\r\n        }\r\n      });\r\n      this.select.productsViewFull = {\r\n        store: new CustomStore({\r\n          key: 'code',\r\n          loadMode: 'raw',\r\n          load: (loadOptions) => {\r\n            return this.productsFull;\r\n          },\r\n          byKey: function (key) {\r\n            const _data = data.init[0].filter(p => p.code === key.toString());\r\n            return _data;\r\n          }\r\n        }),\r\n        paginate: true,\r\n        sort: 'name'\r\n      };\r\n      if (this.configs.system_parameter.is_add_product_code) {\r\n        this.isTextProductName = false;\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'product_code',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              const _data = data.init[0].filter(p => p.code === key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'product_name'\r\n        };\r\n      } else {\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'product_name',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              // console.log(encodeURIComponent(key) + \" abc\");\r\n              return [];\r\n              // let _data = data.init[2].filter(p => p.code == key.toString());\r\n              // return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'product_name'\r\n        };\r\n\r\n      }\r\n\r\n      if (data.init[2]) {\r\n        if (data.init[2].bill_products) {\r\n          data.init[2].bill_products.forEach(item => {\r\n            if (item.product_name && item.unit_code) {\r\n              const obj1 = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (!obj1) {\r\n                this.select.unit_codes.push({\r\n                  id: Helper.makeid(),\r\n                  code: item.unit_code,\r\n                  name: item.unit_name ? item.unit_name : item.unit_code\r\n                });\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n    this.createUpdateEvent();\r\n  }\r\n\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    const product = this.bill_products;\r\n    setTimeout(() => {\r\n      this.bill_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        this.bill_products.byKey(key).then((row) => {\r\n          switch (column) {\r\n            case 'view_order':\r\n              this.view_orderChange();\r\n              break;\r\n            case 'product_name':\r\n              this.product_nameChange(row);\r\n              break;\r\n            case 'product_code':\r\n              if (this.isAll) {\r\n                this.product_codeChangeFull(row);\r\n              } else {\r\n                this.product_codeChange(row);\r\n              }\r\n              break;\r\n            case 'unit_code':\r\n              this.unit_codeChange(row);\r\n              break;\r\n            case 'country_code':\r\n              this.country_codeChange(row);\r\n              break;\r\n            case 'quantity':\r\n            case 'number_real_export':\r\n            case 'price':\r\n            case 'price_nte':\r\n            case 'amount':\r\n            case 'amount_vat':\r\n            case 'amount_after_vat':\r\n            case 'amount_discount':\r\n            case 'discount':\r\n            case 'amount_without_discount':\r\n            case 'other_tax':\r\n            case 'other_charge':\r\n              this._tinhGiaTri();\r\n              break;\r\n            case 'price_after_vat':\r\n              if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n              else\r\n                row.price = row.price_after_vat;\r\n              this._tinhGiaTri();\r\n              break;\r\n            case 'vat':\r\n              if (this.configs.system_parameter.price_after_vat) {\r\n                if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                  row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                else\r\n                  row.price = row.price_after_vat;\r\n              }\r\n              this._tinhGiaTri();\r\n              break;\r\n            default:\r\n              break;\r\n            // }\r\n          }\r\n        }, (error) => {\r\n          alert(error);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  product_nameChange(row) {\r\n    setTimeout(() => {\r\n      this.select.products.some(item => {\r\n        if (item.product_name == row.product_name) {\r\n          // row.product_name = item.name;\r\n          row.unit_code = item.unit_code ? this.checkUnitCode(item.unit_code) : this.getUnitCodeByUnitName(item.unit_name);\r\n          row.unit_name = item.unit_name;\r\n          row.quantity = item.quantity ? parseFloat(item.quantity) : item.quantity;\r\n          // row.price_after_vat = item.price_after_vat ? parseFloat(item.price_after_vat) : item.price_after_vat;\r\n          row.price = item.price ? parseFloat(item.price) : item.price;\r\n          // row.price_nte = item.price_nte ? parseFloat(item.price_nte) : item.price_nte;\r\n          row.amount = item.price ? parseFloat(item.price) : null;\r\n          // row.discount_on_price = item.discount_on_price;\r\n          // row.price_after_discount = item.price_after_discount;\r\n          row.amount_discount = item.amount_discount;\r\n          // row.chassis_number = item.chassis_number;\r\n          // row.color_material = item.color_material;\r\n          // row.product_date = item.product_date;\r\n          // row.product_exchange_rate = item.product_exchange_rate;\r\n          // row.other_tax = item.other_tax;\r\n          // row.other_charge = item.other_charge;\r\n          // row.items_number = item.items_number;\r\n          // row.number_real_export = item.number_real_export ? parseFloat(item.number_real_export) : null;\r\n          // row.number_real_import = item.number_real_import ? parseFloat(item.number_real_import) : null;\r\n          // row.mpq = item.mpq;\r\n          // row.complete_order_date = item.complete_order_date;\r\n          // row.contract_order = item.contract_order;\r\n          // row.management_code = item.management_code;\r\n          row.is_promotion = item.is_promotion;\r\n          row.commercial_discount = item.commercial_discount;\r\n          row.is_explain = item.is_explain;\r\n          // row.lot = item.lot;\r\n          // row.expiration_date = item.expiration_date;\r\n          // row.country_code = item.country_code;\r\n          if (this.isHdGTGT) {\r\n            row.vat = item.vat != null ? item.vat.toString() : null;\r\n            row.amount_vat = null;\r\n            row.amount_after_vat = null;\r\n            if (row.amount != null && row.vat != null) {\r\n              row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n              row.amount_after_vat = row.amount + row.amount_vat;\r\n            }\r\n          } else {\r\n            row.amount_after_vat = row.amount;\r\n          }\r\n          this.bill_products.update(row.order, row);\r\n          return true;\r\n        }\r\n      });\r\n      this._tinhGiaTri();\r\n    }, 200);\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType == 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.dataField === 'product_name' && e.parentType === 'dataRow' && e.editorName !== 'dxSelectBox') {\r\n      e.editorName = 'dxTextArea';\r\n    }\r\n    if (e.dataField !== 'product_name' && e.dataField !== 'adjustment_form' && e.dataField !== 'unit_code') {\r\n      if (e.row.data.adjustment_form == 'THONG_TIN')\r\n        e.editorOptions.disabled = true;\r\n    }\r\n\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount' || e.dataField === 'amount_vat' || e.dataField === 'amount_after_vat') && e.parentType === 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row && e.row.rowType === 'data') {\r\n      e.items = [{\r\n        text: 'Thêm hàng',\r\n        onItemClick: () => {\r\n          this.addRow(e.row.rowIndex);\r\n        }\r\n      },\r\n      {\r\n        text: 'Xóa hàng',\r\n        onItemClick: () => {\r\n          this.deleteRow(e.row.data);\r\n        }\r\n      }];\r\n    }\r\n  }\r\n  /* Thêm dòng hàng hóa */\r\n  addRow(rowIndexFocus?) {\r\n    if (rowIndexFocus >= 0) {\r\n      let rowIndex = rowIndexFocus + 1;\r\n      const data = this.frmData.add_bill_products_data(rowIndex, rowIndex);\r\n      if (data) {\r\n        this.bill_products._array.splice(rowIndex, 0, data);\r\n        let order = 0;\r\n        this.bill_products._array.forEach(item => {\r\n          item.order = ++order;\r\n          item.view_order = item.order;\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      let len, order, orderLast;\r\n      this.bill_products.load().then((dataSource) => {\r\n        len = dataSource.length;\r\n        orderLast = dataSource[len - 1].order;\r\n      });\r\n      for (let i = 0; i < this.rowData; i++) {\r\n\r\n        if (len >= 1) {\r\n          order = ++orderLast;\r\n        } else {\r\n          order = 1;\r\n        }\r\n        const data = this.frmData.add_invoice_products_data(order, order);\r\n        this.bill_products.insert(data);\r\n      }\r\n    }\r\n    this.dataSource.reload();\r\n  }\r\n\r\n  view_orderChange() {\r\n\r\n    let _index = 0;\r\n    this.dataSource.items().forEach(item => {\r\n      if (item.view_order && VStringService._getValueToString(this._oTemplateTT78.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n        item.view_order = ++_index;\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  // Thay đổi cột mã hàng\r\n  product_codeChangeFull(row) {\r\n    this.productsFull.some(item => {\r\n      if (item.code === row.product_code) {\r\n        this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              row.product_name = product.name;\r\n              row.unit_code = product.unit_code ? this.checkUnitCode(product.unit_code) : this.getUnitCodeByUnitName(product.unit_name);\r\n              row.quantity = null;\r\n              if (this.isHdGTGT)\r\n                row.vat = product.vat != null ? product.vat.toString() : null;\r\n              if (this.configs.system_parameter.price_after_vat) {\r\n                row.price_after_vat = product.price ? parseFloat(product.price) : product.price;\r\n                if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                  row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                else\r\n                  row.price = row.price_after_vat;\r\n              }\r\n              else\r\n                row.price = product.price ? parseFloat(product.price) : product.price;\r\n              row.amount = product.price ? parseFloat(product.price) : 0;\r\n              if (this.isHdGTGT) {\r\n                row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n                row.amount_after_vat = row.amount + row.amount_vat;\r\n              } else {\r\n                row.amount_after_vat = row.amount;\r\n              }\r\n              row.is_promotion = item.is_promotion;\r\n              row.commercial_discount = item.commercial_discount;\r\n              row.is_explain = item.is_explain;\r\n              this.bill_products.update(row.order, row);\r\n              this._tinhGiaTri();\r\n              return true;\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  product_codeChange(row) {\r\n    setTimeout(() => {\r\n      this.select.products.some(item => {\r\n        if (item.product_code == row.product_code) {\r\n          row.product_name = item.product_name;\r\n          row.unit_code = item.unit_code ? this.checkUnitCode(item.unit_code) : this.getUnitCodeByUnitName(item.unit_name);\r\n          row.unit_name = item.unit_name;\r\n          row.quantity = item.quantity ? parseFloat(item.quantity) : item.quantity;\r\n          // row.price_after_vat = item.price_after_vat ? parseFloat(item.price_after_vat) : item.price_after_vat;\r\n          row.price = item.price ? parseFloat(item.price) : item.price;\r\n          // row.number_real_export = item.number_real_export ? parseFloat(item.number_real_export) : null;\r\n          // row.number_real_import = item.number_real_import ? parseFloat(item.number_real_import) : null;\r\n          // row.price_nte = item.price_nte ? parseFloat(item.price_nte) : item.price_nte;\r\n          if (item.quantity == null || item.quantity == 0 || item.price === 0) {\r\n            row.amount = item.amount ? parseFloat(item.amount) : 0;\r\n          } else {\r\n            row.amount = item.price ? parseFloat(item.price) : 0;\r\n          }\r\n          // row.engine_number = item.engine_number;\r\n          // row.discount_on_price = item.discount_on_price;\r\n          // row.price_after_discount = item.price_after_discount;\r\n          row.amount_discount = item.amount_discount;\r\n          // row.chassis_number = item.chassis_number;\r\n          // row.color_material = item.color_material;\r\n          // row.product_date = item.product_date;\r\n          // row.product_exchange_rate = item.product_exchange_rate;\r\n          // row.other_tax = item.other_tax;\r\n          // row.other_charge = item.other_charge;\r\n          // row.items_number = item.items_number;\r\n          // row.mpq = item.mpq;\r\n          // row.complete_order_date = item.complete_order_date;\r\n          // row.contract_order = item.contract_order;\r\n          // row.management_code = item.management_code;\r\n          row.is_promotion = item.is_promotion;\r\n          row.commercial_discount = item.commercial_discount;\r\n          row.is_explain = item.is_explain;\r\n          // row.lot = item.lot;\r\n          // row.expiration_date = item.expiration_date;\r\n          // row.country_code = item.country_code;\r\n          if (this.isHdGTGT) {\r\n            row.vat = item.vat != null ? item.vat.toString() : null;\r\n            row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n            row.amount_after_vat = row.amount + row.amount_vat;\r\n          } else {\r\n            row.amount_after_vat = row.amount;\r\n          }\r\n          this.bill_products.update(row.order, row);\r\n          return true;\r\n        }\r\n      });\r\n      this._tinhGiaTri();\r\n    });\r\n  }\r\n\r\n  unit_codeChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.bill_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.bill_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  country_codeChange(row) {\r\n    const _obj = this.select.countrys.filter(p => p.code === row.country_code)[0];\r\n    if (_obj) {\r\n      row.country_name = _obj.name;\r\n      this.bill_products.update(row.id, row);\r\n    } else {\r\n      row.country_name = '';\r\n      this.bill_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  _tinhGiaTri() {\r\n    setTimeout(() => {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.bill_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._oTemplateTT78, this.configs.system_parameter);\r\n      this.amount_after_vat = this.frmData.amount_after_vat;\r\n      this.frmData.amount_vat = this.frmData.total_amount_vat;\r\n      this.handleVat(this.frmData);\r\n      this.dataGrid.instance.refresh();\r\n    });\r\n\r\n  }\r\n\r\n  handleVat(data) {\r\n    let tax_information = []\r\n    if (data.amount_vat0 === 0) {\r\n      tax_information.push({\r\n        \"vat\": \"0\",\r\n        \"amount\": data.total_amount_product_vat0,\r\n        \"amount_vat\": data.amount_vat0,\r\n        \"amount_after_vat\": data.amount_after_vat0\r\n      })\r\n    }\r\n    if (data.amount_vat5) {\r\n      tax_information.push({\r\n        \"vat\": \"5\",\r\n        \"amount\": data.total_amount_product_vat5,\r\n        \"amount_vat\": data.amount_vat5,\r\n        \"amount_after_vat\": data.amount_after_vat5\r\n      })\r\n    }\r\n    if (data.amount_vat10) {\r\n      tax_information.push({\r\n        \"vat\": \"10\",\r\n        \"amount\": data.total_amount_product_vat10,\r\n        \"amount_vat\": data.amount_vat10,\r\n        \"amount_after_vat\": data.amount_after_vat10\r\n      })\r\n    }\r\n    if (data.amount_vat8) {\r\n      tax_information.push({\r\n        \"vat\": \"8\",\r\n        \"amount\": data.total_amount_product_vat8,\r\n        \"amount_vat\": data.amount_vat8,\r\n        \"amount_after_vat\": data.amount_after_vat8\r\n      })\r\n    }\r\n    if (data.amount_vatx) {\r\n      tax_information.push({\r\n        \"vat\": \"x\",\r\n        \"amount\": data.total_amount_product_vatx,\r\n        \"amount_vat\": data.amount_vatx,\r\n        \"amount_after_vat\": data.amount_after_vatx\r\n      })\r\n    }\r\n    if (data.amount_vat_other) {\r\n      tax_information.push({\r\n        \"vat\": \"KHAC\",\r\n        \"amount\": data.total_amount_product_vat_other,\r\n        \"amount_vat\": data.amount_vat_other,\r\n        \"amount_after_vat\": data.amount_after_vat0\r\n      })\r\n    }\r\n    this.frmData.tax_information = tax_information;\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    const p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n    });\r\n  }\r\n\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    // setTimeout(() => {\r\n    const check = confirm('Bạn có đồng ý xóa không?');\r\n    if (check && !this.ttDaXuatHoaDon) {\r\n      setTimeout(() => {\r\n        this.bill_products.remove(item.id);\r\n\r\n        // this.dataSource.store().remove(item.id);\r\n        this.dataSource.reload();\r\n        this._tinhGiaTri();\r\n\r\n      });\r\n    }\r\n    // }, 200);\r\n  }\r\n\r\n  updateSomeTotalInputNotCheckCktm() {\r\n    setTimeout(() => {\r\n      this.gripChange.emit([this.dataSource, this.bill_products, this.formatter]);\r\n    }, 200);\r\n  }\r\n\r\n  // Lấy mẫu bảng kê\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    let fields = [];\r\n\r\n    if (this.configs.system_parameter) {\r\n      // diễn giải\r\n      if (!this.configs.system_parameter.is_promotion) {\r\n        fields.push('is_explain');\r\n      }\r\n      // Khuyễn mại\r\n      if (!this.configs.system_parameter.promotional_goods_on_the_invoice) {\r\n        fields.push('is_promotion');\r\n      }\r\n      // ct khuyến mại\r\n      if (!this.configs.system_parameter.commercial_discount) {\r\n        fields.push('commercial_discount');\r\n      }\r\n    }\r\n\r\n    if (!this.isHdGTGT) {\r\n      fields.push('vat');\r\n      fields.push('amount_vat');\r\n    }\r\n\r\n    this.billService.layFileMauMayTinhTien({\r\n      customer_name: this.frmData.customer_name,\r\n      buyer_tax_code: this.frmData.buyer_tax_code,\r\n      buyer_address: this.frmData.buyer_address,\r\n      buyer_name: this.frmData.buyer_name,\r\n      invoice_type_name: '',\r\n      hiddens: fields\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) {\r\n      throw new Error('Không thể chọn nhiều file');\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      const data = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 9 }));\r\n      const account = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 0 }));\r\n      const fileBangKe: any = document.getElementById('file-bang-ke');\r\n      fileBangKe.value = '';\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"view_order\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n      }\r\n      this.dataExcelFile = _arrData;\r\n      this.dataExcelFileInfo = account.slice(0, 4);\r\n    };\r\n    reader.readAsBinaryString(target.files[0]);\r\n  }\r\n\r\n  thayTheToanBo() {\r\n    if (this.oldForm.origin) {\r\n      this.fillData(this.oldForm.origin.bill_products);\r\n    } else {\r\n      this.fillData(this.oldForm.bill_products);\r\n    }\r\n  }\r\n\r\n  fillData(fileData) {\r\n    setTimeout(() => {\r\n      this.bill_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.bill_products.remove(item.id)\r\n        })\r\n      })\r\n      fileData.forEach(element => {\r\n        if (element.product_name) {\r\n          let bill = new Object();\r\n          bill['id'] = Helper.makeid();\r\n          bill['order'] = element.view_order ? parseInt(element.view_order) : null;\r\n          bill['product_code'] = element.product_code ? element.product_code : \"\";\r\n          bill['product_name'] = element.product_name ? element.product_name : \"\";\r\n          bill['quantity'] = element.quantity;\r\n          bill['vat'] = element.vat;\r\n          bill[\"amount_vat\"] = element.amount_vat;\r\n          bill['amount'] = element.amount;\r\n          bill[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n          bill[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n          bill[\"price\"] = element.price;\r\n          bill[\"discount\"] = element.discount ? element.discount : null;\r\n          bill[\"amount_discount\"] = element.amount_discount ? element.amount_discount : null;\r\n\r\n          if (bill[\"amount_vat\"] !== null && bill[\"amount\"] !== null)\r\n            bill[\"amount_after_vat\"] = bill[\"amount_vat\"] + bill[\"amount\"];\r\n          else\r\n            if (bill[\"amount\"] !== null)\r\n              bill[\"amount_after_vat\"] = bill[\"amount\"];\r\n            else\r\n              if (bill[\"amount_vat\"] !== null)\r\n                bill[\"amount_after_vat\"] = bill[\"amount_vat\"];\r\n              else\r\n                bill[\"amount_after_vat\"] = null;\r\n\r\n\r\n          bill[\"is_explain\"] = element.is_explain;\r\n          bill[\"is_promotion\"] = element.is_promotion;\r\n          bill[\"commercial_discount\"] = element.commercial_discount;\r\n\r\n          this.bill_products.insert(bill);\r\n        }\r\n      })\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n      this.dataGrid.instance.refresh();\r\n      this._tinhGiaTri();\r\n      Library.hideloading();\r\n    },1)\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (this.select.unit_codes && this.select.unit_codes.length > 0) {\r\n        const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n        if (_obj) {\r\n          return _obj.code;\r\n        } else {\r\n          let code = VStringService._convertToViKdau(unitName);\r\n          let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n          if (oDuplicate)\r\n            code = code + Helper.addtionalUnitCode();\r\n          this.select.unit_codes.push({ code: code, name: unitName });\r\n          return code;\r\n        }\r\n      } else {\r\n        this.select.unit_codes = [];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  changeCKTM(row) {\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n\r\n\r\n  onClickGuidReduce() {\r\n    this.router.navigate([]).then(result => { window.open('https://ihoadon.vn/hddt/danh-muc-hang-hoa-dich-vu-duoc-giam-thue-gtgt-theo-nghi-quyet-so-406-nq-ubtvqh15.html', '_blank'); });\r\n  }\r\n  _changeND92(e) {\r\n    if (e.value)\r\n      this.frmData.is_resolution_43 = !e.value;\r\n    this._tinhGiaTri();\r\n  }\r\n  _changeNQ43(e) {\r\n    if (e.value) {\r\n      this.frmData.is_exemption_decree = !e.value;\r\n      if (this.frmData.sales_percentage == null && parseInt(this.configs.system_parameter.value_rate_percent) > 0) {\r\n        this.frmData.sales_percentage = parseInt(this.configs.system_parameter.value_rate_percent);\r\n      }\r\n    }\r\n    else {\r\n      this.frmData.sales_percentage = null;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n  cktmChange(row) {\r\n    this._tinhGiaTri();\r\n\r\n  }\r\n\r\n  onFieldDataChanged() {\r\n    // this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  ShowAndHidePhuongThucDC(value, phuongThucDieuChinh?) {\r\n    if (phuongThucDieuChinh == 'GIAM_HH_DV' || phuongThucDieuChinh == 'TANG_HH_DV') {\r\n      this.isHangHoaDichVu = true\r\n    } else {\r\n      this.isHangHoaDichVu = false;\r\n    }\r\n    this.isPhuongThucDC = value;\r\n    this.isAll = value\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.refresh();\r\n    }, 100);\r\n  }\r\n\r\n  changeColumnProductNameToText() {\r\n    if (this.isPXKDaiLy || this.isPXKNB) {\r\n      this.isAll = true\r\n    } else {\r\n      if (this.configs.system_parameter.is_add_product_code) {\r\n        this.isAll = true\r\n      } else {\r\n        this.isTextProductName = false;\r\n      }\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.refresh();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  changeColumnProductNameToSelect() {\r\n    this.isAll = false\r\n    this.isTextProductName = true;\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.refresh();\r\n    }, 100);\r\n  }\r\n  onContentReady = (e) => {\r\n    const arrFooter = [\r\n      { name: this._translate.GRID.INVOICE_DETAILS.total_money, class: 'table-footer-1' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_vat, class: 'table-footer-2' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount, class: 'table-footer-3' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_without_discount, class: 'table-footer-4' },\r\n    ]\r\n    this.invoiceService.formatSumColumnGrid(arrFooter);\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.LABEL.cancel_invoice}}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid\\r\\n    id=\\\"invoiceHistoryGrid\\\"\\r\\n    [dataSource]=\\\"dataSource\\\"\\r\\n    [showBorders]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\"\\r\\n    (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n    (onCellPrepared)=\\\"onCellPrepared($event)\\\"\\r\\n    [showRowLines]=\\\"true\\\">\\r\\n    <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n    <!-- Số hóa đơn -->\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"bill_number\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n              alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Mẫu số, ký hiệu -->\\r\\n    <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Ngày hóa đơn -->\\r\\n    <dxi-column dataField=\\\"bill_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n              format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Mã số thuế -->\\r\\n     <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Tên khách hàng -->\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\"\\r\\n              alignment=\\\"left\\\" minWidth=\\\"200\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Địa chỉ bên mua -->\\r\\n    <!-- <dxi-column dataField=\\\"buyer_address\\\" caption=\\\"{{_translate.CONTROLL.LABEL.address}}\\\" minWidth=\\\"200\\\" \\r\\n                [allowEditing]=\\\"false\\\" alignment=\\\"left\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column> -->\\r\\n    <!-- Tổng tiền -->\\r\\n    <dxi-column dataField=\\\"total_payment\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" alignment=\\\"right\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\" [allowEditing]=\\\"false\\\" dataType=\\\"number\\\" format=\\\"0,###.##\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Số văn bản -->\\r\\n    <!-- <dxi-column dataField=\\\"doc_relate_symbol\\\" [allowEditing]=\\\"!isView\\\"\\r\\n                caption=\\\"{{_translate.CONTROLL.LABEL.doc_relate_symbol}}\\\" minWidth=\\\"150\\\" alignment=\\\"left\\\">\\r\\n    </dxi-column> -->\\r\\n    <!-- Ngày văn bản -->\\r\\n    <!-- <dxi-column dataField=\\\"doc_relate_date\\\" [allowEditing]=\\\"!isView\\\" \\r\\n                caption=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}}\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"left\\\" minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\">\\r\\n    </dxi-column> -->\\r\\n    <!-- Ngày hủy -->\\r\\n    <dxi-column dataField=\\\"destroy_date\\\"\\r\\n                caption=\\\"{{ 'GRID.INVOICE.date_cancel' | translate }}\\\" [editorOptions]=\\\"{ placeholder: 'dd/MM/yyyy',useMaskBehavior:true }\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Lý do hủy -->\\r\\n    <dxi-column dataField=\\\"destroy_reason\\\"\\r\\n                caption=\\\"{{_translate.CONTROLL.LABEL.destroy_reason}}\\\" alignment=\\\"left\\\" minWidth=\\\"150\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Email -->\\r\\n    <!-- <dxi-column dataField=\\\"buyer_email\\\" [allowEditing]=\\\"!isView\\\" \\r\\n                caption=\\\"Email\\\" alignment=\\\"left\\\" minWidth=\\\"150\\\">\\r\\n    </dxi-column> -->\\r\\n    <!-- <dxi-column cellTemplate=\\\"DinhKemFile\\\" caption=\\\"{{_translate.CONTROLL.LABEL.attach_file}}\\\" [width]=\\\"150\\\" alignment=\\\"left\\\"></dxi-column> -->\\r\\n    <!-- <dxi-column *ngIf=\\\"!isView\\\" cellTemplate=\\\"downloadBB\\\" caption=\\\"{{_translate.CONTROLL.LABEL.doc_relate}}\\\" [width]=\\\"90\\\" alignment=\\\"center\\\"></dxi-column> -->\\r\\n\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template_code }}</p>\\r\\n      <p>{{ d.data.bill_series }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\"  href=\\\"javascript:void(0)\\\">{{ d.data.bill_number }}<span\\r\\n        *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.buyer_name }}</p>\\r\\n      <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.buyer_name || _translate.GRID.INVOICE.invoice_wait_for_sign }}</p>\\r\\n    </div>\\r\\n      <div *dxTemplate=\\\"let data of 'DinhKemFile'\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"dinhKemFile($event)\\\">\\r\\n            <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"data.rowIndex\\\" accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n             <p *ngIf=\\\"!isView || data.data.adjustment_type == '7'\\\">Chọn file</p>\\r\\n            <p *ngIf=\\\"data.data.invoice_files&&data.data.invoice_files.length\\\" (click)=\\\"downloadFile(data.data.invoice_files[0])\\\">{{data.data.invoice_files[0].file_name}}</p>\\r\\n          </a>\\r\\n        </div>\\r\\n      <!-- <div *dxTemplate=\\\"let d of 'downloadBB'\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"xuatMauBienBan(d.data)\\\"><img src=\\\"assets\\\\img\\\\icons\\\\TaiMauBangKe.png\\\"></a>\\r\\n        </div> -->\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button disableDoubleClick *ngIf=\\\"!isView\\\" text=\\\"{{_translate.CONTROLL.BUTTON.save }}\\\" (click)=\\\"xoaBo()\\\" icon=\\\"{{_translate.ICONS.save }}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back }}\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \"\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { pattern } from '@config/pattern';\r\nimport { AuthService, SocketService } from '@core/services';\r\nimport { HandlebillService } from '@modules/handle-bills/shared/handlebill.service';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { BsModalRef } from 'ngx-bootstrap';\r\nimport * as moment from 'moment';\r\nimport { Library } from '@core/library';\r\nimport { Helper } from '@core/index';\r\n\r\n@Component({\r\n  selector: 'app-bills-cancel',\r\n  templateUrl: './bills-cancel.component.html',\r\n  styleUrls: ['./bills-cancel.component.scss']\r\n})\r\nexport class BillsCancelComponent implements OnInit {\r\n\r\n  data: any;\r\n  isView: any;\r\n  configs: any;\r\n  bills: any;\r\n  invoicesStore: ArrayStore;\r\n  dataSource: DataSource;\r\n  ioSignature: any;\r\n  _language: string;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  _translate: any;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  nodeSign: any;\r\n  countReport: any;\r\n  emailPattern: any = pattern.email;\r\n  infoDangKy: any;\r\n  isTT78: boolean = false;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private socketService: SocketService,\r\n    private handlebillService: HandlebillService,\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n  ngOnInit() {\r\n    this.invoicesStore = new ArrayStore({\r\n      key: 'id',\r\n      data: this.data\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoicesStore\r\n    });\r\n    if (this.infoDangKy && this.infoDangKy.id) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n        this.isTT78 = true;\r\n    }\r\n    // this.invoicesStore.load().then((dataSource) => {\r\n    //   dataSource.forEach((item, index) => {\r\n    //     item.doc_relate_symbol = this.createDocRelateNumber();\r\n    //   });\r\n    // });\r\n    this.connectWebsocket();\r\n  }\r\n  createDocRelateNumber() {\r\n    let number_report = \"\";\r\n    if (this.countReport < 10)\r\n      number_report = '0' + this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    else\r\n      number_report = this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    this.countReport++;\r\n    return number_report;\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          let i = this.invoiceIndex;\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(this.bills[i]);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.bills[i].issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat(this.bills[i]);\r\n          } else {\r\n            this.bills[i].invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.bills[i].invoice_files.length) {\r\n              this.xuLiApiKhiXuat(this.bills[i]);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  _validGrid() {\r\n    let invalid = true;\r\n    this.invoicesStore.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        item.doc_relate_date = item.doc_relate_date ? moment(item.doc_relate_date).format('YYYY-MM-DD') : item.doc_relate_date;\r\n        item.destroy_date = item.destroy_date ? moment(item.destroy_date).format('YYYY-MM-DD') : item.destroy_date;\r\n        if (!item.destroy_date && invalid) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.cancel_date + \" \" + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n          invalid = false;\r\n          return false;\r\n        } else {\r\n          let currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n          if (moment(item.destroy_date) > moment(currentDate) && invalid) {\r\n            Library.notify(this._translate.NOTIFY.date_cancel_invoice_not_greater_date_current, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          let bill_date = moment(item.bill_date).format('YYYY-MM-DD');\r\n          if (moment(item.destroy_date) < moment(bill_date) && invalid) {\r\n            Library.notify(this._translate.NOTIFY.date_cancel_invoice_greater_or_equal_date_invoice, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n        }\r\n        if (!item.destroy_reason && invalid) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.reason_cancels + \" \" + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_reason'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n        if (item.buyer_email && !this.emailPattern.test(item.buyer_email) && invalid) {\r\n          Library.notify('Email ' + this._translate.VALIDATION.not_pattern, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'buyer_email'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n      });\r\n    });\r\n    return invalid;\r\n  }\r\n\r\n  xoaBo() {\r\n    // if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n    //   Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n    //   return;\r\n    // }\r\n    setTimeout(() => {\r\n      if (this._validGrid()) {\r\n        Library.confirmVA(this._translate.CONFIRM.acction_function, this._translate.NOTIFY.notify, () => {\r\n          this.showPopup = true;\r\n          this.invoicesStore.load().then((dataSource) => {\r\n            if (dataSource.length > 0) {\r\n              this.bills = dataSource.filter(p => p.adjustment_type != '7');\r\n              this.totalInvoice = this.bills.length;\r\n              this.invoiceIndex = 0;\r\n              this.tempKiFile = 0;\r\n              this.xuatHoaDon();\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    let i = this.invoiceIndex;\r\n    this.xuLiApiKhiXuat(this.bills[i]);\r\n\r\n  }\r\n  xuLiApiKhiXuat(bill) {\r\n    this.goiApiXuatHoaDon(bill);\r\n  }\r\n  goiApiXuatHoaDon(bill) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    let subXuatHoaDon = this.handlebillService.cancelInvoice({\r\n      bill: {\r\n        id: bill.id,\r\n        destroy_reason: bill.destroy_reason,\r\n        destroy_date: bill.destroy_date,\r\n      }\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.valueProgress += percentComplete;\r\n        this.tempKiFile = 0;\r\n        bill.adjustment_type = '7';\r\n        if (this.invoiceIndex < this.totalInvoice - 1) {\r\n          this.invoiceIndex++;\r\n          this.xuatHoaDon();\r\n        } else if (this.invoiceIndex == this.totalInvoice - 1) {\r\n          Library.notify(this._translate.NOTIFY.cancel_invoice_done, 'success');\r\n          this.isView = true;\r\n          setTimeout(() => {\r\n            this.showPopup = false;\r\n          }, 300);\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      // Library.hideloading();\r\n      subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n  }\r\n  choseFile(evt) {\r\n    //evt.srcElement.firstChild.click();\r\n    document.getElementById(\"file-input\").click();\r\n  }\r\n  fileChanged(e) {\r\n    setTimeout(() => {\r\n      //let rowIndex = e.target.dataset.rowindex;\r\n      let fileAttachData: Array<any> = [];\r\n      let fileReader = new FileReader();\r\n      let file = e.target.files[0];\r\n      let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n      // console.log(file)\r\n      if (pattFile.test(file.name)) {\r\n        fileReader.readAsDataURL(file);\r\n        fileReader.onload = (e) => {\r\n          let base64result = fileReader.result.toString().split(',')[1];\r\n          fileAttachData.unshift({\r\n            type: \"DK\",\r\n            file_name: file.name,\r\n            file_content: base64result,\r\n          });\r\n          // if (document.getElementById('list-file')) {\r\n          //   document.getElementById('list-file').scrollTop = 0;\r\n          // }\r\n          let _lstAttach: any = [];\r\n          _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n          if (_lstAttach == null) {\r\n            _lstAttach = [];\r\n          } else {\r\n            _lstAttach.push(fileAttachData[0]);\r\n          }\r\n          this.dataSource[0][\"invoice_files\"] = _lstAttach;\r\n          // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n          //this.dataSource.reload();\r\n        }\r\n      } else {\r\n        Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n      }\r\n    }, 200);\r\n  }\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let test = fileReader.result;\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"DK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.invoicesStore.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (index == rowIndex)\r\n              item.invoice_files = fileAttachData;\r\n          });\r\n        });\r\n        // this.dataSource[rowIndex][\"invoice_files\"] = fileAttachData;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_content\"] = base64result;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n  removeFile(i) {\r\n    let _lstAttach: any = [];\r\n    _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n    _lstAttach.splice(i, 1);\r\n  }\r\n  downloadFile(data) {\r\n    var re = /(?:\\.([^.]+))?$/;\r\n    var fileType = re.exec(data.file_name)[1];\r\n    Helper.dowloadFile(data.file_name, fileType, data.file_content);\r\n  }\r\n\r\n  \r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n  dong() {\r\n    this.bsModalRef.hide();\r\n    this.router.navigate(['/system/handle-bills/']);\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'destroy_date' || e.dataField === 'destroy_reason') {\r\n        if (this.isView || e.row.data.adjustment_type == \"7\")\r\n          e.editorOptions.disabled = true;\r\n      }\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      /* Bôi đỏ các trường bắt buộc */\r\n      if (e.column.dataField == \"destroy_date\") {\r\n        if (!e.data.destroy_date) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.CONTROLL.LABEL.cancel_date + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n        else {\r\n          let currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n          let bill_date = moment(e.data.bill_date).format('YYYY-MM-DD');\r\n          let destroy_date = moment(e.data.destroy_date).format('YYYY-MM-DD');\r\n          if (moment(destroy_date) > moment(currentDate)) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = this._translate.NOTIFY.date_cancel_invoice_not_greater_date_current;\r\n          }\r\n          if (moment(destroy_date) < moment(bill_date)) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = this._translate.NOTIFY.date_cancel_invoice_greater_or_equal_date_invoice;\r\n          }\r\n        }\r\n      }\r\n      if (e.column.dataField == \"destroy_reason\") {\r\n        if (!e.data.destroy_reason) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.CONTROLL.LABEL.reason_cancels + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n      }\r\n      if (e.column.dataField == \"buyer_email\") {\r\n        if (e.data.buyer_email && !this.emailPattern.test(e.data.buyer_email)) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = 'Email ' + this._translate.VALIDATION.not_pattern;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"row search-section\\\">\\r\\n  <div class=\\\"col-md-7\\\">\\r\\n    <app-search-bill-advanced (searchContentChange)=\\\"getSearch($event)\\\" [isFormHandInvoice]=\\\"isFormHandInvoice\\\">\\r\\n    </app-search-bill-advanced>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-5 list-header\\\" style=\\\"max-height: 70px;\\\">\\r\\n    <div class=\\\"pull-right button-panel\\\">\\r\\n      <dx-button (click)=\\\"BaoCaoCQT()\\\" icon=\\\"assets\\\\img\\\\icons\\\\DieuChinh.png\\\" text=\\\"Báo CQT HĐ sai\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"dieuChinh()\\\" icon=\\\"assets\\\\img\\\\icons\\\\DieuChinh.png\\\"\\r\\n        text=\\\"{{ 'CONTROLL.BUTTON.adjusted' | translate }}\\\" [disabled]=\\\"selectedRows.length == 0\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"thayThe()\\\" icon=\\\"assets\\\\img\\\\icons\\\\ThayThe.png\\\"\\r\\n        text=\\\"{{ 'CONTROLL.BUTTON.replaced' | translate }}\\\" type=\\\"default\\\" [disabled]=\\\"selectedRows.length == 0\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"delete()\\\" [(icon)]=\\\"_translate.ICONS.delete\\\" text=\\\"Hủy HĐ\\\" type=\\\"default\\\"\\r\\n        [disabled]=\\\"selectedRows.length == 0\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainerInvoice\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n  [showRowLines]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\"\\r\\n  [showBorders]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\">\\r\\n  <!-- <dxo-selection selectAllMode=\\\"page\\\" mode=\\\"multiple\\\"> -->\\r\\n  <!-- </dxo-selection> -->\\r\\n  <dxo-selection selectAllMode=\\\"{{pageSelect}}\\\" mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <!-- <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"handleinvoice\\\"></dxo-state-storing> -->\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"single\\\"></dxo-sorting>\\r\\n  <!-- <dxo-selection mode=\\\"multiple\\\"></dxo-selection> -->\\r\\n  <dxo-filter-row [visible]=\\\"true\\\" showAllText='{{_translate.CONTROLL.COMBO.all}}'></dxo-filter-row>\\r\\n  <!-- Số hoá đơn -->\\r\\n  <dxi-column dataField=\\\"bill_number\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\"\\r\\n    [width]=\\\"_translate.GRID_WIDTH.so_hoa_don\\\" alignment=\\\"center\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"1\\\"\\r\\n    headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n\\r\\n  <!-- Mẫu số/ký hiệu -->\\r\\n  <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n    [width]=\\\"_translate.GRID_WIDTH.mau_so_ky_hieu\\\" alignment=\\\"center\\\" [calculateFilterExpression]=\\\"calculateFilterExpressionMS\\\">\\r\\n    <dxo-lookup [dataSource]=\\\"dsMauSoKyHieu\\\" valueExpr=\\\"code\\\" [displayExpr]=\\\"displayFunction\\\"></dxo-lookup>\\r\\n  </dxi-column>\\r\\n  <!-- Ngày hoá đơn -->\\r\\n  <dxi-column dataField=\\\"bill_date\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\" [width]=\\\"_translate.GRID_WIDTH.ngay_hoa_don\\\" dataType=\\\"date\\\"\\r\\n    format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"\\r\\n    sortOrder=\\\"desc\\\" [sortIndex]=\\\"0\\\"></dxi-column>\\r\\n\\r\\n  <!-- Mã số thuế -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_recepts_no\\\" dataField=\\\"receipts_no\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.receipts_no' | translate }}\\\" [filterOperations]=\\\"['=']\\\" width=\\\"{{_translate.GRID_WIDTH.so_phieu}}\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n    [width]=\\\"_translate.GRID_WIDTH.ma_so_thue\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <!-- Tên khách hàng -->\\r\\n  <dxi-column [filterOperations]=\\\"['contains']\\\" [calculateFilterExpression]=\\\"calculateFilterExpression\\\" cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <!-- Tổng tiền -->\\r\\n  <dxi-column dataField=\\\"total_payment_string\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" alignment=\\\"right\\\"\\r\\n    [width]=\\\"_translate.GRID_WIDTH.tong_tien\\\" [format]=\\\"formatter.tong_tien\\\"></dxi-column>\\r\\n\\r\\n  <!-- Tình trạng xử lý -->\\r\\n  <dxi-column dataField=\\\"adjustment_type\\\" cellTemplate=\\\"statusInvoice\\\" caption=\\\"{{ 'CONTROLL.LABEL.processing_status' | translate }}\\\"\\r\\n    [width]=\\\"_translate.GRID_WIDTH.trang_thai_gui_mail\\\" alignment=\\\"center\\\">\\r\\n    <dxo-lookup [dataSource]=\\\"dsTinhTrangXuLy\\\" valueExpr=\\\"code\\\" displayExpr=\\\"name\\\"></dxo-lookup>\\r\\n  </dxi-column>\\r\\n\\r\\n  <!-- TT gửi HĐ sai sót -->\\r\\n  <dxi-column dataField=\\\"bill_wrongs\\\" cellTemplate=\\\"statusSendTax\\\" caption=\\\"TT gửi HĐ sai sót\\\" [width]=\\\"106\\\" alignment=\\\"center\\\">\\r\\n    <!-- <dxo-lookup [dataSource]=\\\"listWrongStatus\\\" valueExpr=\\\"code\\\" displayExpr=\\\"name\\\"></dxo-lookup> -->\\r\\n  </dxi-column>\\r\\n\\r\\n  <dxi-column caption=\\\"Tác vụ\\\" cellTemplate=\\\"actionIcon\\\" minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong_5}}\\\"\\r\\n    width=\\\"{{_translate.GRID_WIDTH.hanh_dong_5}}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    <div *ngIf=\\\"d.data.bill_wrongs.length > 0\\\">\\r\\n      <a *ngIf=\\\"d.data.bill_wrongs[0].status == 'DA_GUI_CQT' || d.data.bill_wrongs[0].status == 'DA_GUI'\\\" href=\\\"javascript:void(0)\\\"\\r\\n        (click)=\\\"ThongDiepGuiNhan(d.data)\\\">Đã gửi\\r\\n        CQT</a>\\r\\n      <a *ngIf=\\\"d.data.bill_wrongs[0].status == 'KHONG_TIEP_NHAN'\\\" href=\\\"javascript:void(0)\\\"\\r\\n        (click)=\\\"ThongDiepGuiNhan(d.data)\\\">CQT không\\r\\n        tiếp nhận</a>\\r\\n        <a *ngIf=\\\"d.data.bill_wrongs[0].status == 'TIEP_NHAN'\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"ThongDiepGuiNhan(d.data)\\\">CQT\\r\\n          tiếp nhận</a>\\r\\n      <a *ngIf=\\\"d.data.bill_wrongs[0].status == 'KHONG_CHAP_NHAN'\\\" href=\\\"javascript:void(0)\\\"\\r\\n        (click)=\\\"ThongDiepGuiNhan(d.data)\\\">CQT không chấp nhận</a>\\r\\n      <a *ngIf=\\\"d.data.bill_wrongs[0].status == 'CHAP_NHAN'\\\" href=\\\"javascript:void(0)\\\"\\r\\n        (click)=\\\"ThongDiepGuiNhan(d.data)\\\">CQT\\r\\n        chấp nhận</a>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'statusInvoice'\\\">\\r\\n    <ng-container [ngSwitch]=\\\"d.data.adjustment_type\\\">\\r\\n      <p *ngSwitchCase=\\\"1\\\">{{ 'GRID.GENERAL.original_invoice' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"2\\\">{{ 'GRID.GENERAL.invoice_replaced' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"3\\\">{{ 'GRID.GENERAL.invoice_replacement' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"4\\\">{{ 'GRID.GENERAL.invoice_adjusted' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"5\\\">{{ 'GRID.GENERAL.adjustment_invoice' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"7\\\">{{ 'GRID.GENERAL.invoice_removed' | translate }}</p>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n    <p>{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p>{{ d.data.template_code }}</p>\\r\\n    <p>{{ d.data.bill_series }}</p>\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n    <a *ngIf=\\\"d.data.status =='GHI_TAM'\\\" style=\\\"float: right;\\\" title=\\\"{{_translate.CONTROLL.BUTTON.delete}}\\\"\\r\\n      class=\\\"xoaIcon actionIcon\\\" (click)=\\\"deleteItem(d.data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a *ngIf=\\\"d.data.status =='GHI_TAM'\\\" style=\\\"float: right;\\\" title=\\\"{{_translate.CONTROLL.BUTTON.edit}}\\\"\\r\\n      class=\\\"suaIcon actionIcon\\\" (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.view_invoice}}\\\" class=\\\"xemIcon actionIcon\\\" (click)=\\\"view(d.data)\\\"\\r\\n    href=\\\"javascript:void(0)\\\">\\r\\n  </a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n    <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{info.column.caption}} </p>\\r\\n  </div>\\r\\n\\r\\n  <dxo-summary>\\r\\n    <dxi-total-item summaryType=\\\"custom\\\" cssClass=\\\"dxi-total-payment-total_payment_string\\\" [customizeText]=\\\"customizeText\\\" showInColumn=\\\"total_payment_string\\\">\\r\\n    </dxi-total-item>\\r\\n  </dxo-summary>\\r\\n\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"configs.system_parameter.number_row_per_page\\\"></dxo-paging>\\r\\n  <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 35, 50, 100]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n    [showInfo]=\\\"true\\\">\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n\"","module.exports = \"::ng-deep .view-bill{max-width:100%;margin:0px;height:100%}::ng-deep .truyen-nhan{max-width:80% !important;margin:auto}.pull-right{float:right;display:flex;flex-wrap:wrap;row-gap:5px}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { VChanggeMoneyService, VStringService, Helper, VPreviewInvService, sEnum } from '@core/index';\r\nimport { Library } from '@core/library';\r\nimport { AuthService, SocketService } from '@core/services';\r\nimport { HandlebillService } from '@modules/handle-bills/shared/handlebill.service';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { SendDataForTaxComponent, ViewInvoiceMultipageComponent } from '@shared/components';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { BillsCancelComponent } from '../bills-cancel/bills-cancel.component';\r\nimport { ReportTaxBillErrorComponent } from '../report-tax-bill-error/report-tax-bill-error.component';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\n\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  dataSource: any;\r\n  selectedRows: Array<any> = [];\r\n  pageSelect: any;\r\n  _translate: any;\r\n  _language: any;\r\n  bsModalSignRef: BsModalRef;\r\n  configs: any;\r\n  isTT78: any;\r\n  valueProgress: any\r\n  showPopup = false;\r\n  bsModalRef: BsModalRef;\r\n  paramSearch: any;\r\n  format: any;\r\n  infoDangKy: any;\r\n  selectedItems: Array<any> = [];\r\n  isFormHandInvoice: any;\r\n  dataInfor: any;\r\n  formatter: any;\r\n  objStatusBtn = {};\r\n  checkSubmit: any;\r\n  ioSignature: Subscription;\r\n  isDisableAdjust: false;\r\n  isDisableReplace: false;\r\n  currentUser: any;\r\n  dsTinhTrangXuLy = [];\r\n  dsMauSoKyHieu = [];\r\n  listWrongStatus = [];\r\n  constructor(\r\n    private authService: AuthService,\r\n    private modalService: BsModalService,\r\n    private router: Router,\r\n    private templateService: TemplateService,\r\n    public translate: TranslateService,\r\n    private handlebillService: HandlebillService,\r\n    private billService: BillService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.layDsMauSoKyHieu();\r\n    this.dsTinhTrangXuLy = VSelectBoxService._adjustmentTypes(this._translate);\r\n    this.listWrongStatus = VSelectBoxService._listWrongStatus(this._translate);\r\n    if (this.configs.system_parameter.select_invoice_current_page)\r\n      this.pageSelect = \"page\";\r\n    else\r\n      this.pageSelect = \"allPages\";\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    this.configs = this.authService.getConfigs();\r\n    if (this.currentUser.is_convert_TT78) {\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n    }\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n  }\r\n\r\n  deleteItem(data) {\r\n    let ids = data.id;\r\n    const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n    result.then((dialogResult) => {\r\n      if (dialogResult) {\r\n        Library.showloading();\r\n        this.billService.delete(ids).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n            this.loadList(this.paramSearch);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  editNotSelect(row) {\r\n    if (row.status != 'GHI_TAM') {\r\n      Library.notify('Bạn không thể sửa hóa đơn đã xuất', 'error');\r\n    } else {\r\n      if (row.adjustment_type === '5') {\r\n        this.router.navigate([`/system/handle-bills/edit-adjust/${row.id}`]);\r\n      } else if (row.adjustment_type === '3') {\r\n        this.router.navigate([`/system/handle-bills/edit-replace/${row.id}`]);\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType == 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.bill_number) {\r\n            if (e.data.send_department_status == \"DA_GUI_CQT\")\r\n              e.rowElement.style.color = '#008B8B';\r\n            else if (e.data.send_department_status == \"DA_CAP\")\r\n              e.rowElement.style.color = 'black';\r\n            else if (e.data.send_department_status == \"DA_TIEP_NHAN\")\r\n              e.rowElement.style.color = 'black';\r\n            else\r\n              e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type === '2' || e.data.adjustment_type === '7' || e.data.adjustment_type === '6') {\r\n        let eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  loadList(params?) {\r\n    this.dataSource = {};\r\n    this.dataSource.store = this.handlebillService.getAll(params);\r\n  }\r\n\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadList(e);\r\n  }\r\n\r\n  displayFunction = (item) => {\r\n    if (!item) {\r\n      return 'Tất cả';\r\n    }\r\n    return item.name;\r\n  }\r\n\r\n\r\n  layDsMauSoKyHieu() {\r\n    let template = this.templateService.getAll1().subscribe(\r\n      (rs) => {\r\n        if (rs.status == 'success') {\r\n          this.dsMauSoKyHieu = rs.data.templates.filter((item) => (item.template_type == sEnum.templatetype.HoaDonKhoiTaoTumayTinhTien || item.template_type == sEnum.templatetype.HoaDonMayTinhTien));\r\n          this.dsMauSoKyHieu = this.dsMauSoKyHieu.map(item => {\r\n            let { template_code, invoice_series } = item;\r\n            return {\r\n              code: `${template_code}-${invoice_series}`,\r\n              name: `${template_code}${invoice_series}`\r\n            }\r\n          })\r\n\r\n        }\r\n        else {\r\n          Library.notify(rs.message, 'error')\r\n        }\r\n      },\r\n      (err) => { },\r\n      () => {\r\n        template.unsubscribe();\r\n      }\r\n    )\r\n  }\r\n\r\n  // Huỷ hoá đơn\r\n  delete() {\r\n    let ids = [];\r\n    let lstInvoice = this.selectedItems.filter(p => p.adjustment_type == '1');\r\n    lstInvoice = lstInvoice.sort((invA, invB) => {\r\n      return <any>new Date(invB.bill_date) - <any>new Date(invA.bill_date) || invB.bill_number.localeCompare(invA.bill_number);\r\n    });\r\n    ids = lstInvoice.map(e => e.id);\r\n    Library.showloading();\r\n    let isView = false;\r\n    if (ids.length > 0) {\r\n      const sub = this.handlebillService.showHDXoaBo(ids, isView).subscribe(rs => {\r\n        let lstInvoice = rs[0].data.bills.filter(p => p.adjustment_type == '7');\r\n        if (lstInvoice && lstInvoice.length > 0)\r\n          isView = true;\r\n        let lstInv = [];\r\n        ids.forEach(id => {\r\n          let inv = rs[0].data.bills.filter(p => p.id == id)[0];\r\n          lstInv.push(inv);\r\n        });\r\n        const initialState = {\r\n          isView: isView,\r\n          data: lstInv,\r\n          configs: this.configs,\r\n          infoDangKy: this.infoDangKy\r\n\r\n        };\r\n        this.bsModalRef = this.modalService.show(BillsCancelComponent, {\r\n          class: 'modal-lg full-width', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          this.selectedRows = [];\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      Library.hideloading();\r\n      Library.notify('Không thể hủy hóa đơn này', 'error');\r\n    }\r\n  }\r\n\r\n\r\n  view(data) {\r\n    if (this.selectedItems.length > 0 || data) {\r\n      const _lst = this.selectedItems;\r\n      let is_default_tempplate = true;\r\n      if (_lst.length > 0 || data) {\r\n        if (this.selectedItems.length === 1) {\r\n          this.dataInfor = this.selectedItems[0];\r\n        } else {\r\n          this.dataInfor = data;\r\n        }\r\n        let ids = [];\r\n        if (data) {\r\n          ids.push(data.id);\r\n          if (!VStringService._attemptConvertBool(data.is_default_template))\r\n            is_default_tempplate = false;\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (is_default_tempplate) {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_hoa_don_mtt_html\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n        else {\r\n          if (this.configs.system_parameter.view_multi_invoice) {\r\n            let data = this.billService.taodulieuXemMau(ids);\r\n            data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n            this.vPreviewInvService.xemMau(data);\r\n          }\r\n          else {\r\n            const initialState = {\r\n              items: ids,\r\n              isXuatHD: false,\r\n              hinhthucxuat: '',\r\n              typeAction: sEnum.typeCode.xem_hoa_don_mtt,\r\n              cssClass: 'modal-xl view-bill'\r\n            };\r\n            this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n          }\r\n        }\r\n\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  selectionChanged(data) {\r\n    this.selectedItems = data.selectedRowsData;\r\n  }\r\n\r\n  onImportShowing(e) {\r\n\r\n  }\r\n  onImportHiding() {\r\n\r\n  }\r\n\r\n  BaoCaoCQT() {\r\n    Library.showloading();\r\n    let sub = this.templateService.getAll1().subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let listTemplate = rs.data.templates;\r\n        let lstInvoice = this.selectedItems;\r\n        lstInvoice = lstInvoice.sort((invA, invB) => {\r\n          return <any>new Date(invB.bill_date) - <any>new Date(invA.bill_date) || invB.bill_number.localeCompare(invA.bill_number);\r\n        });\r\n        const initialState = {\r\n          data: lstInvoice,\r\n          configs: this.configs,\r\n          listTemplate: listTemplate,\r\n          infoDangKy: this.infoDangKy\r\n        };\r\n        this.bsModalRef = this.modalService.show(ReportTaxBillErrorComponent, {\r\n          class: 'modal-lg full-width', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          this.selectedRows = [];\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ThongDiepGuiNhan(data) {\r\n    Library.showloading();\r\n    let lstErr = data.bill_wrongs;\r\n    const initialState = {\r\n      lstErr: lstErr,\r\n      notifyType: \"THONG_DIEP_TRUYEN_NHAN_MTT\",\r\n      send_wrong_status: data.send_wrong_status,\r\n    };\r\n    this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n      backdrop: 'static',\r\n      keyboard: true,\r\n      class: 'modal-lg truyen-nhan',\r\n      initialState\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      subModal.unsubscribe();\r\n    });\r\n    Library.hideloading();\r\n  }\r\n\r\n  customizeText = (url) => {\r\n    this.invoiceService.handleTotalGrid(url.value, this.objStatusBtn, this.dataGrid);\r\n    return '';\r\n  }\r\n\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n  ngOnDestroy() {\r\n  }\r\n\r\n  thayThe() {\r\n    if (this.selectedItems) {\r\n      if (this.selectedItems.length == 1) {\r\n        const row = this.selectedItems[0];\r\n\r\n        //hd từ phần mềm\r\n        if (row.status == sEnum.trangthaiCQT.DA_TIEP_NHAN && row.adjustment_type && (row.adjustment_type == 1 || row.adjustment_type == 3)) {\r\n          this.router.navigate(['/system/handle-bills/replace/' + row.id])\r\n        } else {\r\n          Library.notify('Không thể lập hóa đơn thay thế cho hóa đơn này', 'error');\r\n        }\r\n\r\n      }\r\n      else {\r\n        Library.notify('Vui lòng chỉ chọn 1 hoá đơn.', 'error')\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  dieuChinh() {\r\n    if (this.selectedItems) {\r\n      if (this.selectedItems.length == 1) {\r\n        const row = this.selectedItems[0];\r\n        //hd từ phần mềm\r\n        if (row.adjustment_type && (row.adjustment_type == 1 || row.adjustment_type == 4)) {\r\n          this.router.navigate(['/system/handle-bills/adjust/' + row.id])\r\n        } else {\r\n          Library.notify('Không thể lập hóa đơn điều chỉnh cho hóa đơn này', 'error');\r\n        }\r\n      }\r\n      else {\r\n        Library.notify('Vui lòng chỉ chọn 1 hoá đơn.', 'error')\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n\r\n  calculateFilterExpression(filterValue, selectedFilterOperation) {\r\n    selectedFilterOperation = \"contains\";\r\n    return [[\"customer_name_temp\", selectedFilterOperation || '=', filterValue], 'or', [\"buyer_name_temp\", selectedFilterOperation || '=', filterValue]];\r\n  }\r\n  calculateFilterExpressionMS(filterValue, selectedFilterOperation) {\r\n    selectedFilterOperation = \"contains\";\r\n    let bill_series = filterValue;\r\n    let template_code = filterValue;\r\n    if (filterValue) {\r\n      let arrStr = filterValue.split('-');\r\n      template_code = arrStr[0].trim();\r\n      bill_series = filterValue.substring(filterValue.indexOf(template_code) + 2).trim();\r\n    }\r\n    return [[\"bill_series\", selectedFilterOperation || '=', bill_series], 'and', [\"template_code\", selectedFilterOperation || '=', template_code]];\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <!-- phần form thông tin -->\\r\\n    <app-replace-form-bill [frmData]=\\\"frmData\\\" [oldForm]=\\\"oldForm\\\" \\r\\n      [bill_products]=\\\"bill_products\\\" [formatter]=\\\"formatter\\\"\\r\\n      [listTemplate]=\\\"select.templatesTT78\\\" [isHdGTGT]=\\\"isHdGTGT\\\"\\r\\n      [_oTemplateTT78]=\\\"_oTemplateTT78\\\" [infoDangKy]=\\\"infoDangKy\\\"\\r\\n      [ttDaXuatHoaDon]=\\\"ttDaXuatHoaDon\\\"\\r\\n      (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\" >\\r\\n    </app-replace-form-bill>\\r\\n\\r\\n    <!-- table product -->\\r\\n    <app-replace-product-grip [dataSource]=\\\"dataSource\\\" \\r\\n     [bill_products]=\\\"bill_products\\\"\\r\\n     [listTemplate]=\\\"select.templatesTT78\\\" [isHdGTGT]=\\\"isHdGTGT\\\"\\r\\n      [formatter]=\\\"formatter\\\" [oldForm]=\\\"oldForm\\\" [frmData]=\\\"frmData\\\"\\r\\n      [_objTemplateSelect] = \\\"_objTemplateSelect\\\"\\r\\n      [_oTemplateTT78]=\\\"_oTemplateTT78\\\">\\r\\n    </app-replace-product-grip>\\r\\n\\r\\n    <div class=\\\"table-footer\\\">\\r\\n      <!-- Tổng tiền -->\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <div class=\\\"vat amount-table-footer\\\">\\r\\n          <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [value]=\\\"frmData.amount_after_vat\\\" step=\\\"0\\\"\\r\\n            [format]=\\\"formatter.tong_tien\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Tiền thuế -->\\r\\n      <div class=\\\"table-footer-2\\\" *ngIf=\\\"isHdGTGT\\\">\\r\\n        <div class=\\\"vat amount-vat-table-footer\\\">\\r\\n          <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [value]=\\\"frmData.amount_vat\\\" step=\\\"0\\\"\\r\\n            [format]=\\\"formatter.tien_thue\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Thành tiền -->\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <div class=\\\"vat amount-after-vat-table-footer\\\">\\r\\n          <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [value]=\\\"frmData.amount\\\" step=\\\"0\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n            [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" style=\\\"margin-top : 20px\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n      <!-- Giảm trừ nghị quyết 43 -->\\r\\n      <!-- Tỷ lệ % doanh thu -->\\r\\n      <div class=\\\"col-md-12\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Tỷ lệ % trên doanh thu </p>\\r\\n\\r\\n          <div class=\\\"toggle normal\\\" style=\\\"display: flex; align-items: center; margin-top: -6px;\\\">\\r\\n            <img id=\\\"link14\\\" style=\\\"cursor: pointer;padding-left: 2px;padding-right: 7px\\\"\\r\\n              src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" (click)=\\\"guideSales()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n          </div>\\r\\n          <dx-popover target=\\\"#link14\\\" position=\\\"top\\\" [width]=\\\"350\\\" [(visible)]=\\\"isDisplayGuideSale\\\">\\r\\n            <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n              <p>- 1% : Phân phối, cung cấp hàng hóa dịch vụ</p>\\r\\n              <p>- 5% : Dịch vụ xây dựng không bao thầu nguyên vật liệu</p>\\r\\n              <p>- 3% : Sản xuất, vận tải, dịch vụ có gắn với hàng hóa, xây dựng có bao thầu nguyên vật liệu</p>\\r\\n              <p>- 2% : Hoạt động kinh doanh khác</p>\\r\\n            </div>\\r\\n          </dx-popover>\\r\\n\\r\\n          <dx-number-box [width]=\\\"50\\\" [(value)]=\\\"frmData.sales_percentage\\\"\\r\\n            (onValueChanged)=\\\"onChangeSalePercen($event)\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> %</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Đã giảm 20% -->\\r\\n      <div class=\\\"col-md-12\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px;width: 100px\\\">Đã giảm </p>\\r\\n          <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.money_resolution_43\\\"\\r\\n            [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px\\\"> {{ _translate.THONG_TIN.tinh_thue_nq101}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n        <!-- Thành tiền -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount\\\" tabIndex=\\\"-1\\\"\\r\\n              [format]=\\\"formatter.thanh_tien\\\" [disabled]=\\\"!frmData.auto_value\\\" step=\\\"0\\\"\\r\\n              (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Tổng tiền thuế -->\\r\\n        <div class=\\\"dx-field\\\" *ngIf=\\\"isHdGTGT\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount_vat\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n              [disabled]=\\\"!frmData.auto_value\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Cộng chiết khấu -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_amount_discount}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount_discount\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n              [format]=\\\"formatter.tien_chiet_khau\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <!-- Tổng tiền sau thuế -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.amount_after_vat\\\"\\r\\n              [format]=\\\"formatter.tong_tien\\\" [disabled]=\\\"!frmData.auto_value\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n              (onKeyDown)=\\\"keyDown($event)\\\" (onValueChanged)=\\\"totalPaymentChange($event)\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Tiền mặt -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">Tiền mặt</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.cash\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n              tabIndex=\\\"-1\\\" step=\\\"0\\\" (onValueChanged)=\\\"cashChange($event)\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Trả lại khách -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\">Trả lại khách</div>\\r\\n          <div class=\\\"dx-field-value\\\">\\r\\n            <dx-number-box [readOnly]=\\\"ttDaXuatHoaDon\\\" [(value)]=\\\"frmData.returns\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n              tabIndex=\\\"-1\\\" step=\\\"0\\\">\\r\\n            </dx-number-box>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" style=\\\"margin-top : 15px\\\">\\r\\n      <div class=\\\"col-md-4\\\"></div>\\r\\n      <div class=\\\"col-md-8\\\">\\r\\n        <!-- Số tiền bằng chữ -->\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\" style=\\\"width: 27%;\\\">{{ _translate.CONTROLL.LABEL.total_payment_in_word}}</div>\\r\\n          <div class=\\\"dx-field-value\\\" style=\\\"width: 73%;\\\">\\r\\n            <dx-text-box [(value)]=\\\"frmData.total_payment_word\\\" [disabled]=\\\"!frmData.auto_value\\\"\\r\\n              [readOnly]=\\\"ttDaXuatHoaDon\\\"></dx-text-box>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <!-- Xem trước hóa đơn -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice}}\\\" type=\\\"default\\\" (click)=\\\"preview()\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <!-- Xuất hóa đơn -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" appScrollToInvalid text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.export_inv\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\" (click)=\\\"eSubmit('XUAT')\\\">\\r\\n          </dx-button>\\r\\n         \\r\\n          <!-- Ghi tạm -->\\r\\n          <dx-button disableDoubleClick appScrollToInvalid text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" *ngIf=\\\"!ttDaXuatHoaDon\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.save\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"\\r\\n            (click)=\\\"eSubmit('GHI_TAM')\\\">\\r\\n          </dx-button>\\r\\n          \\r\\n          <!-- Đóng -->\\r\\n          <dx-button type=\\\"default\\\" appBackButton [(icon)]=\\\"this._translate.ICONS.come_back\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n</form>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}.vat.total-payment-in-word .dx-field-label{width:12%}.vat.total-payment-in-word .dx-field-value{width:88% !important}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:30px}::ng-deep .nd92Notify .modal-content{width:80%}::ng-deep .mauhoadon .modal-content{width:67%}::ng-deep .mauhoadon43 .modal-content{width:72%}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { pattern } from '@config/pattern';\r\nimport { Helper, Library, VChanggeMoneyService, VPreviewInvService, VStringService, sEnum } from '@core/index';\r\nimport { AuthService, SocketService } from '@core/services';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport * as moment from 'moment';\r\nimport * as _ from 'lodash';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { Subscription, Observable } from 'rxjs';\r\nimport { ReplaceProductGripComponent } from '../replace-product-grip/replace-product-grip.component';\r\nimport { ReplaceFormBillComponent } from '../replace-form-bill/replace-form-bill.component';\r\nimport { BillModel } from '@modules/bill-invoice/shared/bill.model';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { HandlebillService } from '@modules/handle-bills/shared/handlebill.service';\r\nimport { NotifyReduceTaxComponent } from '@shared/index';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-replace-bill',\r\n  templateUrl: './replace-bill.component.html',\r\n  styleUrls: ['./replace-bill.component.scss']\r\n})\r\nexport class ReplaceBillComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n\r\n  @ViewChild(ReplaceProductGripComponent) productGrip: ReplaceProductGripComponent;\r\n  @ViewChild(ReplaceFormBillComponent) formInvoice: ReplaceFormBillComponent;\r\n\r\n  verify_code: any;\r\n  info_message: any;\r\n  bsModalRef: BsModalRef;\r\n  bsModalHdckRef: BsModalRef;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  isShowKyLenhDieuDong: boolean;\r\n  isShowHuyLenhDD: boolean = false;\r\n  isCheckLenhDieuDong = false;\r\n  jsonProductFirst: any\r\n  frmData: BillModel = new BillModel(3);\r\n  oldForm: any;\r\n  total_payment: any;\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  is_multi_vat: any;\r\n  bill_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n  select: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  isHdGTGT: boolean = true;\r\n  configs: any;\r\n  _translate: any;\r\n  isAccessExportInv = false; //có quyền phê duyệt?\r\n  valueChange: string;\r\n  nodeSign: any;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  _oTemplateTT78: any = {};\r\n  infoDangKy: any;\r\n  isDisplayGuideSale: boolean = false;\r\n  bills: any = []; //có thể dùng khi gửi mail sai sót(test lại sau)\r\n  isExportInvoice: boolean; //trạng thái xuất hoá đơn. đã xuất hay chưa ?\r\n  _objTemplateSelect: any;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private billService: BillService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private confirmService: ConfirmService,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService,\r\n    private modalService: BsModalService,\r\n    private handleBillService: HandlebillService,\r\n    private configsService: ConfigsService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n  ngOnDestroy(): void {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  //đc gọi khi thoát khỏi màn này và chuyển tới màn khác\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.ghiTam().then((value1) => {\r\n                    observer.next(value1);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    }\r\n    return true;\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    // kết nối websocket\r\n    this.connectWebsocket();\r\n    let currentUser = this.authService.getCurrentUser();\r\n    let listpermissions = currentUser.user.permissions.split(',');\r\n\r\n    this.configs = this.authService.getConfigs();\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    this.formatter.display_int = this.configs.system_parameter.display_int;\r\n\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data danh mục for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.templatesTT78 = data.init[0];\r\n      this.select.templatesTT78 = this.select.templatesTT78.filter(p => (p.status == \"HOAT_DONG\" && p.template_code == data.init[4].template_code));\r\n      if (data.status === 'thaythemoi') {\r\n        this.khoiTaoKhiThemMoi(data.init[4]);\r\n        this.oldForm = data.init[4];\r\n        this.frmData.destroy_reason = \"\";\r\n      } else {\r\n        this.khoiTaoKhiSua(data.init[4]);\r\n        this.oldForm = data.init[4].origin;\r\n      }\r\n      // this.oldForm = data.init[4];\r\n\r\n      if (this.oldForm.template_code == 1) {\r\n        this.isHdGTGT = true;\r\n      } else {\r\n        this.isHdGTGT = false;\r\n      }\r\n\r\n      // sx giảm dần \r\n      this.select.templatesTT78.sort((a, b) => {\r\n        const dateA: any = new Date(a.created_at);\r\n        const dateB: any = new Date(b.created_at);\r\n        return dateB - dateA;\r\n      });\r\n      this._oTemplateTT78 = this.select.templatesTT78[0];\r\n      this.select.templatesTT78.some(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this._objTemplateSelect = item;\r\n          this.is_multi_vat = item.is_multi_vat;\r\n          this._oTemplateTT78 = _.cloneDeep(item)\r\n          return true;\r\n        }\r\n      });\r\n      this.frmData.template_id = this._oTemplateTT78.value;\r\n    });\r\n    let obj2 = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (obj2.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    const inv_products = this.frmData.setInvoice_products_data(data.bill_products);\r\n    inv_products.forEach(item => {\r\n      item.vat = item.vat != null ? item.vat.toString() : null;\r\n    });\r\n    // khởi tạo lưới từ dữ liệu sửa\r\n    this.bill_products = new ArrayStore({\r\n      key: 'id',\r\n      data: inv_products\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.bill_products\r\n    });\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    this.frmData.adjustment_type = 3;\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n  }\r\n\r\n  khoiTaoKhiThemMoi(data) {\r\n    // khởi tạo mới lưới\r\n    const inv_products = this.frmData.setInvoice_products_data(data.bill_products);\r\n    inv_products.forEach(item => {\r\n      item.vat = item.vat != null ? item.vat.toString() : null;\r\n    });\r\n    this.bill_products = new ArrayStore({\r\n      key: 'id',\r\n      data: inv_products\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.bill_products\r\n    });\r\n\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormThayThe(data);\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (VStringService._getValueToString(this.frmData.status) != \"\" && this.frmData.status != sEnum.statusInv.GhiTam) {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  setDataSessionStorage(value) {\r\n    this.valueChange = JSON.stringify(value);\r\n  }\r\n\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  sendInvoice(xml_string) {\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    let xmlInvoice = \"\";\r\n    const sub = this.billService.sendInvoice({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.info_message = rs.data.info_message;\r\n        let bill_sign_date = moment(rs.data.bill_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (this.info_message && this.info_message.message) {\r\n          xmlInvoice = VStringService._getValueToString(this.info_message.message.message);\r\n          if (xmlInvoice != \"\") {\r\n            this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n          }\r\n        }\r\n      }\r\n      else\r\n        Library.notify(rs.message, 'error');\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          if (this.ttDaXuatHoaDon)\r\n            this.sendData_TBSaiSot(data.Data.Content);\r\n          else\r\n            this.sendInvoice(data.Data.Content);\r\n        } else if (data.Data.Name === 'thongdiep.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        }\r\n        else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          if (this.ttDaXuatHoaDon)\r\n            this.getXml_TBSaiSot();\r\n          else {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  eSubmit(type) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    this.total_payment = \"\";\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      delete this.frmData[\"note_view_on_bill\"];\r\n      if (type !== 'GHI_TAM') {\r\n        if (!this._validForm()) {\r\n          return;\r\n        }\r\n        if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n          Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        if (!this.checkProductCode()) {\r\n          return;\r\n        }\r\n      }\r\n      if (this.frmData.bill_options) {\r\n        this.frmData.bill_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n          delete item['id'];\r\n          delete item['invoice_id'];\r\n        });\r\n      }\r\n\r\n      if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n        Library.notify('Vui lòng chọn HTTT chuyển khoản cho hóa đơn có giá trị lớn hơn 20 triệu đồng', 'error');\r\n        return false;\r\n      }\r\n      if (!this.isAccessExportInv && type === 'XUAT') {\r\n        Library.notify(this._translate.NOTIFY.you_not_permissions, 'error');\r\n        return false;\r\n      }\r\n      if (type === 'XUAT') {\r\n        this.processXuatHoaDon(type)\r\n      } else {\r\n        this.processGhiTam();\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  processXuatHoaDon(type) {\r\n    let _index = 0;\r\n    let _isValid = true;\r\n    let _lstInv = [];\r\n    this.bill_products.load().then((dataSource) => {\r\n      _lstInv = dataSource.filter(p => p.product_name);\r\n    });\r\n    for (let i = 0; i < _lstInv.length; i++) {\r\n      if (_lstInv[i].amount > 0 && !_lstInv[i].vat && !_lstInv[i].is_refund_ticket) {\r\n        _index = i;\r\n        _isValid = false;\r\n        break;\r\n      }\r\n    }\r\n    if (!this.isHdGTGT)\r\n      _isValid = true;\r\n    if (!this.billService.checkVatMauHoaDon(_lstInv, this.is_multi_vat)) {\r\n      return false;\r\n    }\r\n    if (!_isValid) {\r\n      const result = Library.notify('VAT không hợp lệ', 'error');\r\n    } else {\r\n      if (this.confirmCheckPreview) {\r\n        this.xuatHoaDon();\r\n        this.confirmCheckPreview = false;\r\n      } else {\r\n        this.previewBeforeExport(type);\r\n      }\r\n    }\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = this._translate.THONG_TIN.xuat_hoa_don;\r\n    let du_lieu = this.billService.taodulieuXemTruocMau(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn : this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  xuatHoaDon() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n      this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n    }\r\n  }\r\n  /* Xử lý ghi tạm hóa đơn */\r\n  processGhiTam() {\r\n    this.ghiTam();\r\n  }\r\n  async ghiTam() {\r\n    if (!this.frmData.id) {\r\n      await this.billService.addNew(this.frmData, false).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.id = res.data.id;\r\n          // this.isDisable = true;\r\n          Library.notify('Ghi tạm hóa đơn thành công', 'success')\r\n          return true;\r\n        } else {\r\n          Library.notify(res.message, 'error')\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      await this.billService.edit(this.frmData.id, this.frmData, false).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.id = res.data.id;\r\n          Library.notify('Ghi tạm hóa đơn thành công', 'success');\r\n          return true;\r\n        } else {\r\n          Library.notify(res.message, 'error')\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n    return true\r\n  }\r\n\r\n  /* Kiểm tra Mã hàng phải nhập không dấu, không chứa ký tự đặc biệt và tối đa 50 ký tự */\r\n  checkProductCode() {\r\n    let isValid = true;\r\n    const _lst = this.frmData.bill_products.filter(p => p.product_name);\r\n    if (_lst.length > 0) {\r\n      for (let i = 0; i < _lst.length; i++) {\r\n        if (VStringService._getValueToString(_lst[i].product_code) != \"\" && !this.productCodePattern.test(_lst[i].product_code)) {\r\n          Library.notify(this._translate.VALIDATION.required_productCode, 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return isValid;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let xmlInvoice = \"\";\r\n    if (!this.frmData.id) {\r\n      const sub = this.billService.addNew(this.frmData, true).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.bill_number = res.data.bill_number;\r\n          this.frmData.bill_date = moment(res.data.bill_date).format('YYYY-MM-DD HH:mm:ss'); // moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n          let bill_sign_date = moment(res.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.verify_code = res.data.verify_code\r\n          this.frmData.id = res.data.id;\r\n          xmlInvoice = res.data.xml_string;\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n            this.disablleScreen();\r\n          }\r\n          else {\r\n            // Người bán ký\r\n            if (this.configs.system_parameter.is_seller_sign_bill)\r\n              this.xuLyKiFile(xmlInvoice, bill_sign_date);\r\n            else {\r\n              this.info_message = res.data.info_message;\r\n              if (this.info_message && this.info_message.message) {\r\n                xmlInvoice = VStringService._getValueToString(this.info_message.message.message);\r\n                if (xmlInvoice != \"\") {\r\n                  this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          this.confirmCheckPreview = false;\r\n          Library.notify(res.message, 'error')\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      const sub = this.billService.edit(this.frmData.id, this.frmData, true).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          this.frmData.bill_number = res.data.bill_number;\r\n          this.frmData.bill_date = moment(res.data.bill_date).format('YYYY-MM-DD HH:mm:ss'); // moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n          this.verify_code = res.data.verify_code\r\n          let bill_sign_date = moment(res.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.frmData.id = res.data.id;\r\n          xmlInvoice = res.data.xml_string;\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n            Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n            this.disablleScreen();\r\n          }\r\n          else {\r\n            if (this.configs.system_parameter.is_seller_sign_bill)\r\n              this.xuLyKiFile(xmlInvoice, bill_sign_date);\r\n            else {\r\n              this.info_message = res.data.info_message;\r\n              if (this.info_message && this.info_message.message) {\r\n                xmlInvoice = VStringService._getValueToString(this.info_message.message.message);\r\n                if (xmlInvoice != \"\") {\r\n                  this.kyThongDiep(xmlInvoice, bill_sign_date);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          this.confirmCheckPreview = false;\r\n          Library.notify(res.message, 'error')\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  kyThongDiep(xmlInvoice, signDate) {\r\n    let ListSerialNumber = \"DSCKS\";\r\n    let nodeSign = \"//TDiep/CKSNNT\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'thongdiep.xml', nodeSign, signDate, 'MessageData', ListSerialNumber, true);\r\n  }\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    let nodeSign = \"//HDon/DSCKS/NBan\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n  }\r\n  goiApiXuatHoaDon(xml_string) {\r\n    if (this.info_message && this.info_message.message) {\r\n      setTimeout(function () {\r\n        Library.showloading();\r\n      }, 20);\r\n      const sub = this.billService.sendMessage({\r\n        id: this.frmData.id,\r\n        info_message: {\r\n          message: {\r\n            message: xml_string,\r\n            message_code: this.info_message.message.message_code\r\n          },\r\n          tcntCode: this.info_message.tcntCode,\r\n          messageCodeType: this.info_message.messageCodeType\r\n        }\r\n      }).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          // cấu hình tự động gửi thông báo sai sót\r\n          this.disablleScreen();\r\n          if (this.configs.system_parameter.enable_send_wrong_process) {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n              Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n            else\r\n              this.startProcess_TBSaiSot();\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  startProcess_TBSaiSot() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.getXml_TBSaiSot();\r\n    } else {\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let ListSerialNumber = \"DSCKS\";\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n      }\r\n      else\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n    }\r\n  }\r\n  getXml_TBSaiSot() {\r\n    let bills = [];\r\n    let object = new Object;\r\n    object[\"tax_authority_code\"] = this.oldForm.tax_authority_code; //Mã CQT cấp\r\n    object[\"template_code\"] = this.oldForm.template_code;\r\n    object[\"bill_series\"] = this.oldForm.bill_series;\r\n    object[\"bill_date\"] = this.oldForm.bill_date;\r\n    object[\"bill_number\"] = this.oldForm.bill_number;\r\n    object[\"reason\"] = this.frmData.destroy_reason;\r\n    object[\"notification_nature\"] = \"3\"; //Tính chất thông báo là thay thế\r\n    object[\"type_apply_bill\"] = 1; // Loại áp dụng HĐ (1: tt78)\r\n    object[\"bill_id\"] = this.oldForm.id;\r\n\r\n    bills.push(object);\r\n    let data = {\r\n      notification_type: 1,\r\n      bills: bills\r\n    };\r\n    let xmlInvoice = \"\";\r\n    let sub = this.handleBillService.getXmlInvoiceWrong(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        xmlInvoice = rs.data.xml_file;\r\n        this.bills = rs.data.bills;\r\n        let sign_date = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (xmlInvoice != \"\") {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            this.sendData_TBSaiSot(xmlInvoice);\r\n          else\r\n            this.signXml_TBSaiSot(xmlInvoice, sign_date);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  signXml_TBSaiSot(xmlInvoice, signDate) {\r\n    let nodeSign = \"//TBao/DSCKS/NNT\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, signDate, 'NotificationData', ListSerialNumber, true);\r\n  }\r\n  sendData_TBSaiSot(xml_string) {\r\n    let subXuatHoaDon = this.handleBillService.sendXmlInvoiceWrong({\r\n      xml_file: xml_string,\r\n      bills: this.bills\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { },\r\n      () => {\r\n        subXuatHoaDon.unsubscribe();\r\n      });\r\n  }\r\n\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  onNumberChange() {\r\n    VChanggeMoneyService._calTotalMoney(this.frmData, this.formatter, !this.frmData.auto_value);\r\n  }\r\n\r\n  // sự kiện form\r\n  totalPaymentChange = (e) => {\r\n    this.onNumberChange();\r\n    this.frmData.cash = this.frmData.amount_after_vat\r\n    if (this.frmData.auto_value) {\r\n      this.frmData.amount_after_vat = this.frmData.total_payment;\r\n      this.frmData.returns = this.frmData.cash - this.frmData.amount_after_vat;\r\n    }\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    const tien_chu = Helper.tienBangChu(Math.abs(e.value), VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n    this.frmData.total_payment_word = this.invoiceService.docTienAm(e.value, tien_chu, this.configs, this.frmData.currency_code);\r\n  };\r\n\r\n  cashChange(e) {\r\n    if (e.value) {\r\n      this.frmData.returns = this.frmData.cash - this.frmData.amount_after_vat;\r\n    }\r\n  }\r\n\r\n  onChangeSalePercen(e) {\r\n    this.configs.system_parameter.value_rate_percent = e.value;\r\n    let data = {\r\n      config: {\r\n        value: JSON.stringify(this.configs.system_parameter)\r\n      }\r\n    };\r\n    this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n      if (response.status == \"success\") {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n          this.configs = this.authService.getConfigs();\r\n        });\r\n      } else {\r\n      }\r\n    }, err => { }, () => {\r\n    });\r\n    if (this.productGrip)\r\n      this.productGrip._tinhGiaTri();\r\n  }\r\n\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm()) {\r\n        return;\r\n      }\r\n      let data = this.billService.taodulieuXemTruocMau(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n\r\n  handleFormData() {\r\n    if (this.frmData.bill_options) {\r\n      this.frmData.bill_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    this.frmData.adjustment_type = 3;\r\n    this.frmData.origin_id = this.oldForm.id;\r\n    this.frmData.total_payment = this.frmData.amount_after_vat;\r\n    this.frmData.currency_code = 'VND';\r\n    this.frmData.currency_rate = 1;\r\n    // this.frmData.buyer_address = null;\r\n    if (!this.frmData.auto_value) {\r\n      delete this.frmData.tax_information;\r\n    }\r\n    if (!this.isHdGTGT) {\r\n      delete this.frmData.tax_information;\r\n    }\r\n    if (!this.frmData.tax_information)\r\n      delete this.frmData.tax_information;\r\n    if (this.frmData.tax_information) {\r\n      this.frmData.tax_information.forEach(item => {\r\n        delete item.bill_id\r\n        delete item.id\r\n      })\r\n    }\r\n    this.deleteProperties();\r\n    const bill_products = [];\r\n    this.bill_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        delete item.error;\r\n        delete item.price_after_vat;\r\n        delete item.number_real_import;\r\n        delete item.number_real_export;\r\n        delete item.amount_without_discount;\r\n        delete item.price_after_discount\r\n        if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n          // if (VStringService._getValueToString(this.pkInvoiceCurrent) != \"\")\r\n          item.id = Helper.makeid();\r\n          bill_products.push(item);\r\n        }\r\n      });\r\n      this.frmData.bill_products = bill_products;\r\n      this.frmData[\"note_view_on_bill\"] = `Hoá đơn này thay thế cho hoá đơn` + \" \" + `số ${this.oldForm.bill_number}, mẫu số ${this.oldForm.template_code}, ký hiệu ${this.oldForm.bill_series} ngày ${moment(this.oldForm.bill_date).format('DD/MM/YYYY')}`;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n    });\r\n  }\r\n\r\n  guideSales() {\r\n    this.isDisplayGuideSale = !this.isDisplayGuideSale;\r\n  }\r\n\r\n  onTemplateTypeChange(e) {\r\n    this._objTemplateSelect = e;\r\n    if (!this._objTemplateSelect[\"is_discount\"]) {\r\n      this.bill_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          item.discount = null;\r\n          item.amount_discount = null;\r\n        });\r\n      });\r\n      this.productGrip._tinhGiaTri();\r\n    }\r\n    this.is_multi_vat = e.is_multi_vat;\r\n  }\r\n\r\n  _validForm() {\r\n    let _isValid = true;\r\n    const _lst = this.frmData.bill_products;\r\n    if (!this.frmData.amount_after_vat && this.frmData.amount_after_vat !== 0) {\r\n      Library.notify(\"Tổng tiền hóa đơn không được để trống\", 'error');\r\n      return false;\r\n    }\r\n    if (!this.frmData.destroy_reason) {\r\n      Library.notify(\"Lý do không được để trống\", 'error');\r\n      return false;\r\n    }\r\n    if (!this.billService.checkVatMauHoaDon(_lst, this.is_multi_vat)) {\r\n      return false;\r\n    }\r\n    /* Hóa đơn bán hàng NQ43 */\r\n    if (this.frmData.is_resolution_43) {\r\n      if (!this.frmData.sales_percentage) {\r\n        Library.notify(\"Tỷ lệ % trên doanh thu không được để trống\", 'error');\r\n        return false;\r\n      }\r\n      else if (this.frmData.sales_percentage != 1 && this.frmData.sales_percentage != 2\r\n        && this.frmData.sales_percentage != 3 && this.frmData.sales_percentage != 5) {\r\n        Library.notify(\"Tỷ lệ % trên doanh thu chỉ bao gồm các giá trị: 1, 2, 3, 5\", 'error');\r\n        return false;\r\n      }\r\n    }\r\n    this.bill_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion && !item.is_promotion_new && !item.commercial_discount && _isValid) {\r\n        }\r\n        else if (item.is_promotion || item.is_promotion_new || item.commercial_discount) {\r\n          if ((item.product_name == null || item.product_name == '') && _isValid) {\r\n            Library.notify(\"Tên hàng hóa\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'product_name'));\r\n            _isValid = false;\r\n            return false;\r\n          }\r\n        }\r\n        if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_explain) {\r\n          if (this.isHdGTGT) {\r\n            if (item.vat == null && _isValid) {\r\n              Library.notify(\"Thuế suất\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'vat'));\r\n              _isValid = false;\r\n              return false;\r\n            }\r\n            if (item.vat != \"-1\" && item.vat != \"-2\" && item.amount_vat == null && _isValid) {\r\n              Library.notify(\"Tiền thuế\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount_vat'));\r\n              _isValid = false;\r\n              return false;\r\n            }\r\n          }\r\n          if (item.amount == null && _isValid) {\r\n            Library.notify(\"Thành tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount'));\r\n            _isValid = false;\r\n            return false;\r\n          }\r\n        }\r\n      });\r\n    });\r\n    if (_lst.length === 0) {\r\n      Library.notify(this._translate.NOTIFY.no_product, 'error', 5000);\r\n      this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n      return false;\r\n    }\r\n    return _isValid;\r\n  }\r\n\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    if (this.configs.system_parameter.view_multi_invoice) {\r\n      let data = this.billService.taodulieuXemMau(ids);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }\r\n    else {\r\n      const initialState = {\r\n        items: ids,\r\n        isXuatHD: false,\r\n        hinhthucxuat: '',\r\n        typeAction: sEnum.typeCode.xem_hoa_don_mtt,\r\n        cssClass: 'modal-xl view-bill'\r\n      };\r\n      this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n    }\r\n  }\r\n\r\n  deleteProperties() {\r\n    const frmDataBill: BillModel = new BillModel(3);\r\n    const keyOfBill = Object.keys(frmDataBill);\r\n    const keyOfFrm = Object.keys(this.frmData);\r\n    // const formData = this.frmData;\r\n    for (let i = 0; i <= keyOfFrm.length; i++) {\r\n      let error = keyOfBill.includes(keyOfFrm[i]);\r\n      if (!error) {\r\n        delete this.frmData[keyOfFrm[i]]\r\n      }\r\n    }\r\n    delete this.frmData.total_amount_vat;\r\n  }\r\n  keyDown(e: any) {\r\n    // setTimeout(() => {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n    // }, 100);\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"row invoice-form\\\">\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- mẫu hóa đơn -->\\r\\n        <dxi-item dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- ngày hóa đơn số hóa đơn -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"bill_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n          [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_date }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" cssClass='vat layout_input group-input-button' >\\r\\n          <dxi-item dataField=\\\"bill_number\\\" [template]=\\\"'notifydate'\\\" [cssClass]=\\\"'max_right'\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hình thức thanh toán và số hóa đơn gốc -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" cssClass='group-input-button'>\\r\\n          <dxi-item dataField=\\\"payment_method_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_method }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='vat layout_input group-input-button'>\\r\\n          <dxi-item name=\\\"origin-invoice-number\\\" [cssClass]=\\\"'max_right'\\\">\\r\\n            <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number_original}}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-text-box [(value)]=\\\"oldForm.bill_number\\\" disabled=\\\"true\\\"></dx-text-box>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"origin_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- lý do thay thế -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" cssClass='group-input-button'>\\r\\n        <dxi-item dataField=\\\"destroy_reason\\\">\\r\\n          <dxo-label text=\\\"Lý do thay thế\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Lý do thay thế {{_translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Tên ngân hàng -->\\r\\n        <dxi-item dataField=\\\"bank_account\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.bank_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Email -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: 'Email'}\\\">\\r\\n          <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n            <div\\r\\n              class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n              <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                </app-tag-input-email>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <div *dxTemplate=\\\"let d of 'notifydate'\\\">\\r\\n        <dx-text-box [disabled]=\\\"true\\\" [(value)]=\\\"frmData.bill_number\\\"\\r\\n          class=\\\"invoice-number-create-invoice\\\"></dx-text-box>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- mã số thuế -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"search-mst\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.tax_code }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-autocomplete valueExpr=\\\"tax_code\\\"\\r\\n                placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\" [dataSource]=\\\"tax_codes\\\"\\r\\n                [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"taxCodeChoose($event)\\\"\\r\\n                [(value)]=\\\"frmData.buyer_tax_code\\\" (onFocusOut)=\\\"updateTaxcodeInfo($event)\\\"\\r\\n                (onValueChanged)=\\\"changeTaxCode($event)\\\">\\r\\n                <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                  <span>{{item.tax_code}}: {{ item.name }}</span>\\r\\n                </div>\\r\\n              </dx-autocomplete>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item cssClass='btn-small'>\\r\\n            <button (click)=\\\"searchTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n              <i class=\\\"{{_translate.ICONS.search}}\\\" style=\\\"font-size: 22px;\\\"></i>\\r\\n            </button>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Mã kh -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"search-mkh\\\" [cssClass]=\\\"'max_right'\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_code }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-autocomplete valueExpr=\\\"code\\\" [(value)]=\\\"frmData.customer_code\\\"\\r\\n                placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\" [dataSource]=\\\"customer_codes\\\"\\r\\n                [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"customerCodeChoose($event)\\\"\\r\\n                (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n                <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                  <span>{{item.code}}: {{ item.name }}</span>\\r\\n                </div>\\r\\n              </dx-autocomplete>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"mst_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Tên đơn vị -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"customer_name\\\" [editorOptions]=\\\"{ isRequired: false,onValueChanged: customerChanged}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Địa chỉ người mua -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"buyer_address\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.buyer_address }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Họ tên người mua -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"buyer_name\\\" [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.buyer_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Số đtdd và số CCCD -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"buyer_mobile\\\" [editorOptions]=\\\"{onValueChanged: customerChanged}\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.phone }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.phone }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item  dataField=\\\"id_card\\\" [cssClass]=\\\"'max_right'\\\">\\r\\n          <dxo-label text=\\\"Số CCCD\\\"></dxo-label>\\r\\n          <!-- <dxi-validation-rule *ngIf=\\\"frmData.customer_object_code != 'DOANH_NGHIEP'\\\" type=\\\"required\\\" message=\\\"{{ _translate.CONTROLL.LABEL.buyer_name }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- các trường mở rộng -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\"  [formData]=\\\"frmData\\\"  [customerTempt]=\\\"customerTempt\\\" [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'bill_options'\\\"></app-form-extend>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{_translate.CONFIRM.update_customer}}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{_translate.CONTROLL.LABEL.update}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \"::ng-deep .vat.invoice-number-create-invoice input{color:red;font-weight:bold}.icon-size{font-size:21px;padding:2px 0}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code:focus{outline:none}::ng-deep .vat.invoice-note input{color:#0070C0;font-weight:bold}::ng-deep .vat.layout_input span.dx-field-item-label-content{width:144px !important}::ng-deep .layout_input_left span.dx-field-item-label-content{width:144px !important}#advBtn{width:26px;height:26px;margin-left:5px}:host ::ng-deep .invoice-number-create-invoice{color:red;font-weight:bold;padding-top:3px}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align.event_layout_input .dx-field-item-label .dx-field-item-label-content{width:135px !important;min-width:unset !important}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align.event_layout_input .dx-field-item-label .dx-field-item-label-content span{text-wrap:wrap}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align.odd_layout_input .dx-field-item-label .dx-field-item-label-content{width:74px !important;min-width:unset !important}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align.odd_layout_input .dx-field-item-label .dx-field-item-label-content span{text-wrap:wrap}::ng-deep .hdGoc .dx-texteditor-input{color:red !important;font-weight:bold}\\n\"","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { pattern } from '@config/pattern';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { VSelectBoxService, VStringService, VChanggeMoneyService, Helper } from '@core/index';\r\nimport { Library } from '@core/library';\r\nimport { AuthService } from '@core/services';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { ChooseHdckComponent } from '@modules/handle-invoice/components/choose-hdck/choose-hdck.component';\r\nimport { AddCustomerComponent } from '@shared/components';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport * as moment from 'moment';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { Subscription } from 'rxjs';\r\nimport * as _ from 'lodash';\r\n\r\n@Component({\r\n  selector: 'app-replace-form-bill',\r\n  templateUrl: './replace-form-bill.component.html',\r\n  styleUrls: ['./replace-form-bill.component.scss']\r\n})\r\nexport class ReplaceFormBillComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  routeSub: Subscription;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @ViewChild(FormExtendComponent) formExtend: FormExtendComponent;\r\n  @Input() ttDaXuatHoaDon:boolean = false;\r\n  @Input() frmData: any;\r\n  @Input() oldForm: any;\r\n  @Input() bill_products: any;\r\n  @Input() formatter: any;\r\n  @Input() infoDangKy: any;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() listTemplate: any;\r\n  @Input() isHdGTGT: boolean;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('adjustmentObjectChange') adjustmentObject = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  isShow = false;\r\n  bsModalRef: BsModalRef;\r\n  select: any = {};\r\n  pattern = pattern;\r\n  tax_codes: any = []; //mã số thuế\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  configs: any = {};\r\n  _translate: any;\r\n  emails: any = [];\r\n  private arrEmail: any = [];\r\n  formItems = [];\r\n  customForms = [];\r\n  customerTempt = {};\r\n  showPopup: boolean = false;\r\n  customerCurent: any = {};\r\n  tax_code_search: any;\r\n  origin_btn_options = {\r\n    text: '', icon: 'assets/img/icons/Xem.png', type: 'default',\r\n    onClick: () => {\r\n      let ts = this.oldForm;\r\n      if (this.oldForm.id) {\r\n        if (this.oldForm.adjustment_type == 2 || this.oldForm.adjustment_type == 4) {\r\n          if (VStringService._getValueToString(this.oldForm.origin_id) != \"\") {\r\n            if (this.oldForm.adjustment_type == 4) {\r\n              window.open(`/system/handle-bills/edit-adjust/${this.oldForm.id}`, '_blank');\r\n            } else if (this.oldForm.adjustment_type == 2) {\r\n              window.open(`/system/handle-bills/edit-replace/${this.oldForm.id}`, '_blank');\r\n            }\r\n          }\r\n          else {\r\n            if (this.oldForm.template_code == '1') {\r\n              window.open(`/system/bills-invoice-vat/${this.oldForm.id}`, '_blank');\r\n            } else if (this.oldForm.template_code == '2') {\r\n              window.open(`/system/bills-invoice-sale/${this.oldForm.id}`, '_blank');\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          if (this.oldForm.template_code == '1') {\r\n            window.open(`/system/bills-invoice-vat/${this.oldForm.id}`, '_blank');\r\n          } else if (this.oldForm.template_code == '2') {\r\n            window.open(`/system/bills-invoice-sale/${this.oldForm.id}`, '_blank');\r\n          }\r\n        }\r\n        // gtgt mtt\r\n        // if (this.oldForm.adjustment_type === '5') {\r\n        //   window.open(`/system/handle-bills/edit-adjust/${this.oldForm.id}`, '_blank');\r\n        // } else if (this.oldForm.adjustment_type === '3') {\r\n        //   window.open(`/system/handle-bills/edit-replace/${this.oldForm.id}`, '_blank');\r\n        // } else {\r\n        //   if (this.oldForm.template_code == '1') {\r\n        //     window.open(`/system/bills-invoice-vat/${this.oldForm.id}`, '_blank');\r\n        //   } else if (this.oldForm.template_code == '2') {\r\n        //     window.open(`/system/bills-invoice-sale/${this.oldForm.id}`, '_blank');\r\n        //   }\r\n        // }\r\n      }\r\n\r\n    }\r\n  };\r\n  mst_btn_options = {\r\n    text: '', icon: 'assets/img/icons/Them.png', type: 'default',\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private billService: BillService,\r\n    private authService: AuthService,\r\n    private customersService: CustomersService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.currency_codes = data.init[1].DM_LOAI_TIEN;\r\n      this.select.customer_types = data.init[1].DM_NHOM_KHACH_HANG;\r\n      this.select.export_places = data.init[1].DM_NOI_XUAT_HOA_DON;\r\n      this.select.list_bank_account_seller = data.init[1].DM_TAI_KHOAN_NGAN_HANG;\r\n      this.select.list_bank_account_seller.forEach(item => {\r\n        item.name_display = item.code + ': ' + item.name;\r\n      });\r\n\r\n      this.select.templatesTT78 = this.listTemplate;\r\n\r\n    });\r\n\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.billService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.billService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n\r\n\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n\r\n\r\n  }\r\n\r\n  onAdvancedClick() {\r\n    this.isShow = !this.isShow;\r\n  }\r\n\r\n\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (const key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.invoice_options = _dulieumorong;\r\n    });\r\n  }\r\n\r\n\r\n\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n\r\n\r\n  // gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  taxCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerChanged = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.name) !== VStringService._getValueToString(this.frmData.customer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_person_name) !== VStringService._getValueToString(this.frmData.buyer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_mobile) !== VStringService._getValueToString(this.frmData.buyer_mobile)\r\n              || VStringService._getValueToString(this.customerCurent.business_address) !== VStringService._getValueToString(this.frmData.buyer_address)\r\n              || VStringService._getValueToString(this.customerCurent.email) !== VStringService._getValueToString(this.frmData.buyer_email)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n\r\n      });\r\n\r\n    }\r\n  };\r\n\r\n\r\n\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.formDuLieuMoRong(item);\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.bill_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateTypeChange.emit(item);\r\n      }\r\n    });\r\n  }\r\n\r\n  ///////////////\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n\r\n  paymentMethodChange = (e) => {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.payment_method_view_name = _obj.name;\r\n    }\r\n  }\r\n\r\n\r\n  capNhatDmKhachHang() {\r\n    this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.buyer_tax_code);\r\n    this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n    this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n    this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.buyer_name);\r\n    this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.buyer_mobile);\r\n    this.customerCurent.business_address = VStringService._getValueToString(this.frmData.buyer_address);\r\n    this.customerCurent.email = VStringService._getValueToString(this.frmData.buyer_email);\r\n    const data = { customer: this.customerCurent };\r\n    this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n      if (response.status === 'success') {\r\n        this.showPopup = false;\r\n      } else {\r\n        Library.notify(response.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n    });\r\n\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n  updateCustomerInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  updateTaxcodeInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.tax_code) !== VStringService._getValueToString(this.frmData.buyer_tax_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  changeTaxCode(e) {\r\n    this.tax_code_search = e.value\r\n  }\r\n  searchTaxCode() {\r\n    Library.showloading();\r\n    this.tax_code_search = this.frmData.buyer_tax_code;\r\n    if (!this.tax_code_search) {\r\n      Library.notify(\"Vui lòng nhập mã số thuế!\", \"error\")\r\n    } else {\r\n      this.billService.getInfoCompany(this.tax_code_search).subscribe(res => {\r\n        if (res.status == \"success\") {\r\n          // this.dataTaxCode = res.data.customer;\r\n          this.frmData.customer_name = res.data.customer.name;\r\n          this.frmData.buyer_address = res.data.customer.business_address;\r\n        }\r\n      })\r\n    }\r\n    this.onFieldDataChanged();\r\n    setTimeout(() => {\r\n      Library.hideloading();\r\n    }, 1000);\r\n  }\r\n\r\n  formDuLieuMoRong(item) {\r\n    let _dulieumorong = _.cloneDeep(item.fields).filter(x => x.type === '4');\r\n    Helper.resetObject(this.formItems)\r\n    this.customForms = [];\r\n    this.customerTempt = {};\r\n    const bill_options = this.frmData.bill_options;\r\n\r\n    if (bill_options.length > 0) {\r\n      _dulieumorong = _dulieumorong.map((dl) => {\r\n        let option = bill_options.find(x => x.code == dl.code)\r\n        if (option) {\r\n          dl.value = option.value;\r\n        }\r\n        return dl;\r\n      });\r\n    }\r\n\r\n    this.frmData.bill_options = _dulieumorong;\r\n    if (_dulieumorong.length > 0) {\r\n      this.formExtend.createForm(this.customForms, _dulieumorong)\r\n    }\r\n    _dulieumorong.forEach(value => {\r\n      this.customerTempt[value.code] = value.value;\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    let template = null;\r\n    template = this.select.templatesTT78.find(item => item.value == this.frmData.template_id);\r\n    this.onChangeTem(template);\r\n  }\r\n  disableTemplateInput() {\r\n    if (this.frmData.bill_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","module.exports = \"<!--phần table hiển thị-->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\" style=\\\"padding: 15px 20px;\\\">\\r\\n    <!-- Thêm dòng -->\\r\\n    <div class=\\\"pull-left\\\">\\r\\n      <div style=\\\"float: left;width:  30%; padding-top: 4px\\\">{{ _translate.CONTROLL.BUTTON.add_row }}</div>\\r\\n      <div style=\\\"float: left; width: 30%\\\">\\r\\n        <dx-number-box #numberBox [max]=\\\"100\\\" [min]=\\\"1\\\" [showSpinButtons]=\\\"true\\\" [(value)]=\\\"rowData\\\"></dx-number-box>\\r\\n      </div>\\r\\n      <div>\\r\\n        <dx-button style=\\\"height: 27px\\\" icon=\\\"fa fa-plus-circle\\\" type=\\\"default\\\" text=\\\"\\\" (onClick)=\\\"addRow()\\\">\\r\\n        </dx-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <!-- Hóa đơn bán hàng NQ 43 -->\\r\\n      <dx-check-box *ngIf=\\\"!isHdGTGT\\\" style=\\\"margin-right: 20px\\\" [(value)]=\\\"frmData.is_resolution_43\\\"\\r\\n        text=\\\"{{ _translate.THONG_TIN.giam_thue_theo_nq43 }}\\\" (onValueChanged)=\\\"_changeNQ43($event)\\\"></dx-check-box>\\r\\n      <dx-check-box class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\"\\r\\n        [(value)]=\\\"frmData.auto_value\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <dx-menu [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\"\\r\\n        (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n      </dx-menu>\\r\\n      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n      style=\\\"display: none;\\\" />\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onCellPrepared)=\\\"onCellPrepared($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"!ttDaXuatHoaDon\\\"></dxo-editing>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxo-scrolling mode=\\\"virtual\\\">\\r\\n      </dxo-scrolling>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"order\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column cssClass=\\\"overlay-content123\\\" dataField=\\\"product_code\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_code }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n        alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [editorOptions]=\\\"{showClearButton: true}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.products\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"product_name\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\" alignment=\\\"left\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Khuyến mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.promotional_goods_on_the_invoice\\\" cellTemplate=\\\"khuyen_mai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.promotion }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Chiết khấu thương mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.commercial_discount\\\" cellTemplate=\\\"cktm\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.commercial_discount }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Đơn vị tính -->\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\" dataType=\\\"number\\\" alignment=\\\"center\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.so_luong,step: '0' }\\\"\\r\\n        [format]=\\\"formatter.so_luong\\\"\\r\\n        ></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\" [editorOptions]=\\\"{ format: formatter.don_gia,step: '0' }\\\"\\r\\n        [format]=\\\"formatter.don_gia\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"_objTemplateSelect && _objTemplateSelect.is_discount\\\"\\r\\n        dataField=\\\"discount\\\" headerCellTemplate=\\\"discountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.chiet_khau }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.ty_le_chiet_khau  }\\\" [format]=\\\"formatter.ty_le_chiet_khau \\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"_objTemplateSelect && _objTemplateSelect.is_discount\\\"\\r\\n        dataField=\\\"amount_discount\\\" headerCellTemplate=\\\"amount_discountHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\" [editorOptions]=\\\"{ format: formatter.tien_chiet_khau }\\\"\\r\\n        [format]=\\\"formatter.tien_chiet_khau\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"vat\\\" headerCellTemplate=\\\"vatHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\"\\r\\n        alignment=\\\"center\\\" *ngIf=\\\"isHdGTGT\\\" [editorOptions]=\\\"{showClearButton: true ,step: '0'}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount_vat\\\" headerCellTemplate=\\\"amountVatHeader\\\" *ngIf=\\\"isHdGTGT\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tien_thue, step: '0' }\\\" [format]=\\\"formatter.tien_thue\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tong_tien, step: '0' }\\\" [format]=\\\"formatter.tong_tien\\\">\\r\\n      </dxi-column>\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.quantity }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.total_money }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_explain\\\" [disabled]=\\\"d.data.is_promotion\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'khuyen_mai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_explain\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n    \\r\\n      <div *dxTemplate=\\\"let d of 'is_transport_number'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_transport_number\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ty_le_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amount_discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.amount_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\" (onValueChanged)=\\\"changeCKTM(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      \\r\\n      \\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div>\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.import_type }}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"thayTheToanBo()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all }}\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"themTiep()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:20px;margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:8px}.support-invoice .support-link img,.support-invoice .support-link i{margin-right:15px;margin-top:-2px}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .styleItemToList{color:dodgerblue}.button-dropdown-extend{display:inline-flex}.pull-right .auto-input{margin-right:75px !important}\\n\"","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { pattern } from '@config/pattern';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { Helper, VStringService, VChanggeMoneyService } from '@core/index';\r\nimport { Library } from '@core/library';\r\nimport { AuthService } from '@core/services';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { ConfigDecimalComponent } from '@shared/index';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { Subscription } from 'rxjs';\r\nimport * as XLSX from 'xlsx';\r\n\r\n@Component({\r\n  selector: 'app-replace-product-grip',\r\n  templateUrl: './replace-product-grip.component.html',\r\n  styleUrls: ['./replace-product-grip.component.scss']\r\n})\r\nexport class ReplaceProductGripComponent implements OnInit, OnDestroy {\r\n\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n\r\n  routeSub: Subscription;\r\n\r\n  contextMenu = [{ text: 'Thêm' }, { text: 'Xóa' }];\r\n  @Input() dataSource: any;\r\n  @Input() bill_products: any;\r\n  @Input() formatter: any;\r\n  @Input() oldForm: any; \r\n  select: any = {};\r\n  @Input() frmData: any; \r\n  @Input() _oTemplateTT78: any;\r\n  @Input() listTemplate: any;\r\n  @Input() isHdGTGT: boolean;\r\n  @Input() _objTemplateSelect : any;\r\n  amount_after_vat: any = 0;\r\n  bsModalRef: BsModalRef;\r\n  showPopup = false; // Popup\r\n  dataExcelFile: any = null;\r\n  ttDaXuatHoaDon = false;\r\n  gripAllowEdit = false;\r\n  configs: any;\r\n  dataExcelFileInfo: any = null;\r\n  _translate: any;\r\n  extras = [];\r\n  rowData = 1;\r\n  isPXKDaiLy = false\r\n  isPXKNB = false\r\n  loaiHoaDon: any //ko dùng\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  @Output('gripChange') gripChange = new EventEmitter<Array<any>>();\r\n  @Output('autoChange') autoChange = new EventEmitter<any>();\r\n\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private billService: BillService,\r\n    private productsService: ProductsService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.countrys = data.init[1].DM_QUOC_GIA;\r\n      // Hàng hóa dịch vụ\r\n      this.select.products = data.init[2];\r\n\r\n      this.select.products.forEach(item => {\r\n        item.mhvth = item.code + ': ' + item.name;\r\n        item.vat = item.vat != null ? item.vat.toString() : null;\r\n      });\r\n      this.select.productsView = {\r\n        store: new CustomStore({\r\n          key: 'code',\r\n          loadMode: 'raw',\r\n          load: (loadOptions) => {\r\n            return this.select.products;\r\n          },\r\n          byKey: function (key) {\r\n            const _data = data.init[2].filter(p => p.code === key.toString());\r\n            return _data;\r\n          }\r\n        }),\r\n        paginate: true,\r\n        sort: 'name'\r\n      };\r\n      if (data.init[4]) {\r\n        if (data.init[4].bill_products) {\r\n          data.init[4].bill_products.forEach(item => {\r\n            if (item.product_name && item.unit_code) {\r\n              const obj1 = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (!obj1) {\r\n                this.select.unit_codes.push({\r\n                  id: Helper.makeid(),\r\n                  code: item.unit_code,\r\n                  name: item.unit_name ? item.unit_name : item.unit_code\r\n                });\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n    });\r\n    \r\n    // Event\r\n    this.createUpdateEvent();\r\n  }\r\n\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    const product = this.bill_products;\r\n    setTimeout(() => {\r\n      this.bill_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        this.bill_products.byKey(key).then((row) => {\r\n          switch (column) {\r\n            case 'view_order':\r\n              this.view_orderChange();\r\n              break;\r\n            case 'product_code':\r\n              this.product_codeChange(row);\r\n              break;\r\n            case 'unit_code':\r\n              this.unit_codeChange(row);\r\n              break;\r\n            case 'country_code':\r\n              this.country_codeChange(row);\r\n              break;\r\n            case 'quantity':\r\n            case 'number_real_export':\r\n            case 'price':\r\n            case 'price_nte':\r\n            case 'amount':\r\n            case 'amount_vat':\r\n            case 'amount_after_vat':\r\n            case 'amount_discount':\r\n            case 'discount':\r\n            case 'amount_without_discount':\r\n            case 'other_tax':\r\n            case 'other_charge':\r\n              this._tinhGiaTri();\r\n              break;\r\n            case 'price_after_vat':\r\n              if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n              else\r\n                row.price = row.price_after_vat;\r\n              this._tinhGiaTri();\r\n              break;\r\n            case 'vat':\r\n              if (this.configs.system_parameter.price_after_vat) {\r\n                if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                  row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                else\r\n                  row.price = row.price_after_vat;\r\n              }\r\n              this._tinhGiaTri();\r\n              break;\r\n            default:\r\n              break;\r\n            // }\r\n          }\r\n        }, (error) => {\r\n          alert(error);\r\n        });\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n      const eles = e.rowElement.getElementsByTagName('td');\r\n      if (!e.isEditing) {\r\n        eles[2].innerHTML = e.data.product_code;\r\n      }\r\n      if (e.data.error) {\r\n        const ele = eles[eles.length - 1];\r\n        ele.style.background = 'red url(\\'assets/img/icons/fa-remove.png\\') no-repeat 2% center';\r\n        ele.title = e.data.error;\r\n      }\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.column.dataField == \"product_code\") {\r\n        if (VStringService._getValueToString(e.data.product_code) != \"\" && !this.productCodePattern.test(e.data.product_code)) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.VALIDATION.required_productCode;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'product_code') {\r\n        e.editorOptions.onOpened = function (arg) {\r\n          const popupInstance = arg.component._popup;\r\n          popupInstance.option('width', 400);\r\n          popupInstance.option('minWidth', 400);\r\n          // popupInstance.off(\"optionChanged\", this.optionChangedHandler);\r\n          // popupInstance.on(\"optionChanged\", this.optionChangedHandler);\r\n        };\r\n      }\r\n      if (e.dataField === 'product_name') {\r\n        e.editorName = 'dxTextArea';\r\n      }\r\n      // e.editorOptions.onFocusOut = (args) => {\r\n      //   if (e.dataField === 'unit_code') {\r\n      //     if (this.select.unit_codes) {\r\n      //       const _obj = this.select.unit_codes.filter(p => p.code === e.row.data.unit_code)[0];\r\n      //       if (_obj) {\r\n      //         e.row.data.unit_name = _obj.name;\r\n      //       } else {\r\n      //         e.row.data.unit_name = 'fdsfsd';\r\n      //       }\r\n      //     }\r\n      //   }\r\n      //   if (e.dataField === 'country_code') {\r\n      //     const _obj = this.select.countrys.filter(p => p.code === e.row.data.country_code)[0];\r\n      //     if (_obj) {\r\n      //       e.row.data.country_name = _obj.name;\r\n      //     } else {\r\n      //       e.row.data.country_name = '';\r\n      //     }\r\n      //   }\r\n      //   this.bill_products.update(e.row.data.id, e.row.data);\r\n      // };\r\n    }\r\n\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount' || e.dataField === 'amount_vat' || e.dataField === 'amount_after_vat') && e.parentType === 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row && e.row.rowType === 'data') {\r\n      e.items = [{\r\n        text: 'Thêm hàng',\r\n        onItemClick: () => {\r\n          this.addRow(e.row.rowIndex);\r\n        }\r\n      },\r\n      {\r\n        text: 'Xóa hàng',\r\n        onItemClick: () => {\r\n          this.deleteRow(e.row.data);\r\n        }\r\n      }];\r\n    }\r\n  }\r\n  /* Thêm dòng hàng hóa */\r\n  addRow(rowIndexFocus?) {\r\n    if (rowIndexFocus >= 0) {\r\n      let rowIndex = rowIndexFocus + 1;\r\n      const data = this.frmData.add_bill_products_data(rowIndex, rowIndex);\r\n      if (data) {\r\n        this.bill_products._array.splice(rowIndex, 0, data);\r\n        let order = 0;\r\n        this.bill_products._array.forEach(item => {\r\n          item.order = ++order;\r\n          item.view_order = item.order;\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      let len, order, orderLast;\r\n      this.bill_products.load().then((dataSource) => {\r\n        len = dataSource.length;\r\n        orderLast = dataSource[len - 1].order;\r\n      });\r\n      for (let i = 0; i < this.rowData; i++) {\r\n\r\n        if (len >= 1) {\r\n          order = ++orderLast;\r\n        } else {\r\n          order = 1;\r\n        }\r\n        const data = this.frmData.add_invoice_products_data(order, order);\r\n        this.bill_products.insert(data);\r\n      }\r\n    }\r\n    this.dataSource.reload();\r\n  }\r\n\r\n  view_orderChange() {\r\n\r\n    let _index = 0;\r\n    this.dataSource.items().forEach(item => {\r\n      if (item.view_order && VStringService._getValueToString(this._oTemplateTT78.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n        item.view_order = ++_index;\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  // Thay đổi cột mã hàng\r\n  product_codeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code === row.product_code) {\r\n        this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              row.product_name = product.name;\r\n              row.unit_code = this.checkUnitCode(product.unit_code);\r\n              row.quantity = null;\r\n              if (this.isHdGTGT)\r\n                row.vat = product.vat != null ? product.vat.toString() : null;\r\n              if (this.configs.system_parameter.price_after_vat) {\r\n                row.price_after_vat = product.price ? parseFloat(product.price) : product.price;\r\n                if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                  row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                else\r\n                  row.price = row.price_after_vat;\r\n              }\r\n              else\r\n                row.price = product.price ? parseFloat(product.price) : product.price;\r\n              row.amount = product.price ? parseFloat(product.price) : 0;\r\n              if (this.isHdGTGT) {\r\n                row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n                row.amount_after_vat = row.amount + row.amount_vat;\r\n              } else {\r\n                row.amount_after_vat = row.amount;\r\n              }\r\n              this.bill_products.update(row.order, row);\r\n              this._tinhGiaTri();\r\n              return true;\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  unit_codeChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.bill_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.bill_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  country_codeChange(row) {\r\n    const _obj = this.select.countrys.filter(p => p.code === row.country_code)[0];\r\n    if (_obj) {\r\n      row.country_name = _obj.name;\r\n      this.bill_products.update(row.id, row);\r\n    } else {\r\n      row.country_name = '';\r\n      this.bill_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  _tinhGiaTri() {\r\n    setTimeout(() => {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.bill_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._oTemplateTT78, this.configs.system_parameter);\r\n      this.amount_after_vat = this.frmData.amount_after_vat;\r\n      this.frmData.amount_vat = this.frmData.total_amount_vat;\r\n      this.handleVat(this.frmData);\r\n      this.dataGrid.instance.refresh();\r\n    }, 0);\r\n  }\r\n  handleVat(data) {\r\n    let tax_information = []\r\n    if (data.amount_vat0 === 0) {\r\n      tax_information.push({\r\n        \"vat\": \"0\",\r\n        \"amount\": data.total_amount_product_vat0,\r\n        \"amount_vat\": data.amount_vat0,\r\n        \"amount_after_vat\": data.amount_after_vat0\r\n      })\r\n    }\r\n    if (data.amount_vat5) {\r\n      tax_information.push({\r\n        \"vat\": \"5\",\r\n        \"amount\": data.total_amount_product_vat5,\r\n        \"amount_vat\": data.amount_vat5,\r\n        \"amount_after_vat\": data.amount_after_vat5\r\n      })\r\n    }\r\n    if (data.amount_vat10) {\r\n      tax_information.push({\r\n        \"vat\": \"10\",\r\n        \"amount\": data.total_amount_product_vat10,\r\n        \"amount_vat\": data.amount_vat10,\r\n        \"amount_after_vat\": data.amount_after_vat10\r\n      })\r\n    }\r\n    if (data.amount_vat8) {\r\n      tax_information.push({\r\n        \"vat\": \"8\",\r\n        \"amount\": data.total_amount_product_vat8,\r\n        \"amount_vat\": data.amount_vat8,\r\n        \"amount_after_vat\": data.amount_after_vat8\r\n      })\r\n    }\r\n    if (data.amount_vatx) {\r\n      tax_information.push({\r\n        \"vat\": \"x\",\r\n        \"amount\": data.total_amount_product_vatx,\r\n        \"amount_vat\": data.amount_vatx,\r\n        \"amount_after_vat\": data.amount_after_vatx\r\n      })\r\n    }\r\n    if (data.amount_vat_other) {\r\n      tax_information.push({\r\n        \"vat\": \"KHAC\",\r\n        \"amount\": data.total_amount_product_vat_other,\r\n        \"amount_vat\": data.amount_vat_other,\r\n        \"amount_after_vat\": data.amount_after_vat0\r\n      })\r\n    }\r\n    this.frmData.tax_information = tax_information;\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    const p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n    });\r\n  }\r\n\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    // setTimeout(() => {\r\n    const check = confirm('Bạn có đồng ý xóa không?');\r\n    if (check && !this.ttDaXuatHoaDon) {\r\n      setTimeout(() => {\r\n        this.bill_products.remove(item.id);\r\n\r\n        // this.dataSource.store().remove(item.id);\r\n        this.dataSource.reload();\r\n        this._tinhGiaTri();\r\n\r\n      }, 100);\r\n    }\r\n    // }, 200);\r\n  }\r\n\r\n  updateSomeTotalInputNotCheckCktm() {\r\n    setTimeout(() => {\r\n      this.gripChange.emit([this.dataSource, this.bill_products, this.formatter]);\r\n    }, 200);\r\n  }\r\n\r\n  // Lấy mẫu bảng kê\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    let fields = [];\r\n\r\n    if (this.configs.system_parameter) {\r\n      // diễn giải\r\n      if (!this.configs.system_parameter.is_promotion) {\r\n        fields.push('is_explain');\r\n      }\r\n      // Khuyễn mại\r\n      if (!this.configs.system_parameter.promotional_goods_on_the_invoice) {\r\n        fields.push('is_promotion');\r\n      }\r\n      // ct khuyến mại\r\n      if (!this.configs.system_parameter.commercial_discount) {\r\n        fields.push('commercial_discount');\r\n      }\r\n    }\r\n\r\n    if (!this.isHdGTGT) {\r\n      fields.push('vat');\r\n      fields.push('amount_vat');\r\n    }\r\n\r\n    this.billService.layFileMauMayTinhTien({\r\n      customer_name: this.frmData.customer_name,\r\n      buyer_tax_code: this.frmData.buyer_tax_code,\r\n      buyer_address: this.frmData.buyer_address,\r\n      buyer_name: this.frmData.buyer_name,\r\n      invoice_type_name: '',\r\n      hiddens: fields\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  // Nạp dữ liệu bảng kê\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById('file-bang-ke').click();\r\n  }\r\n\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) {\r\n      throw new Error('Không thể chọn nhiều file');\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      const data = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 9 }));\r\n      const account = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 0 }));\r\n      const fileBangKe: any = document.getElementById('file-bang-ke');\r\n      fileBangKe.value = '';\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"view_order\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n      }\r\n      this.dataExcelFile = _arrData;\r\n      this.dataExcelFileInfo = account.slice(0, 4);\r\n      this.showPopup = true;\r\n    };\r\n    reader.readAsBinaryString(target.files[0]);\r\n  }\r\n\r\n  thayTheToanBo() {\r\n    this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'thaythe');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  themTiep() {\r\n    this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  fillData(fileData, info, status) {\r\n    if (info.length === 5) {      \r\n      const customer_name = info[0].A.split(':');\r\n      if (customer_name.length > 1 && customer_name[1].trim() != '') {\r\n        this.frmData.customer_name = customer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_tax_code = info[1].A.split(':');\r\n      if (buyer_tax_code.length > 1 && buyer_tax_code[1].trim() != '') {\r\n        this.frmData.buyer_tax_code = buyer_tax_code[1].trim();\r\n      }\r\n      ////\r\n      const buyer_name = info[2].A.split(':');\r\n      if (buyer_name.length > 1 && buyer_name[1].trim() != '') {\r\n        this.frmData.buyer_name = buyer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_address = info[3].A.split(':');\r\n      if (buyer_address.length > 1 && buyer_address[1].trim() != '') {\r\n        this.frmData.buyer_address = buyer_address[1].trim();\r\n      }\r\n      ////\r\n      const id_card = info[4].A.split(':');\r\n      if (id_card.length > 1 && id_card[1].trim() != '') {\r\n        this.frmData.id_card = id_card[1].trim();\r\n      }\r\n    }\r\n    \r\n    if(status === 'thaythe') {\r\n      this.bill_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.bill_products.remove(item.id)\r\n        })\r\n      })\r\n    } else {\r\n      this.bill_products.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if(!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount) {\r\n              this.bill_products.remove(item.id)\r\n            }\r\n          })\r\n      })\r\n    }\r\n\r\n    fileData.forEach(element => {\r\n      if(element.product_name) {\r\n        let bill = new Object();\r\n        bill['id'] = Helper.makeid();\r\n        bill['order'] = element.view_order ? parseInt(element.view_order) : null;\r\n        bill['product_code'] = element.product_code ? element.product_code : \"\";\r\n        bill['product_name'] = element.product_name ? element.product_name : \"\";\r\n        bill['quantity'] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        bill['vat'] = element.vat ? element.vat : null;\r\n        bill[\"amount_vat\"] = element.amount_vat ? Helper.toNumber(element.amount_vat) : null;\r\n        bill['amount'] = element.amount ? Helper.toNumber(element.amount) : null;\r\n        bill[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        bill[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        bill[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        \r\n        if (bill[\"amount_vat\"] !== null && bill[\"amount\"] !== null)\r\n        bill[\"amount_after_vat\"] = bill[\"amount_vat\"] + bill[\"amount\"];\r\n        else\r\n          if (bill[\"amount\"] !== null)\r\n          bill[\"amount_after_vat\"] = bill[\"amount\"];\r\n          else\r\n            if (bill[\"amount_vat\"] !== null)\r\n            bill[\"amount_after_vat\"] = bill[\"amount_vat\"];\r\n            else\r\n            bill[\"amount_after_vat\"] = null;\r\n        \r\n\r\n        bill[\"is_explain\"] = element.is_explain && (element.is_explain == \"X\" || element.is_explain == \"x\") ? true : false;\r\n        bill[\"is_promotion\"] = element.is_promotion && (element.is_promotion == \"X\" || element.is_promotion == \"x\") ? true : false;\r\n        bill[\"commercial_discount\"] = element.commercial_discount && (element.commercial_discount == \"X\" || element.commercial_discount == \"x\") ? true : false;\r\n        \r\n\r\n        const _obj = this.select.products.filter(p => p.code === bill[\"product_code\"])[0];\r\n        if (!_obj && bill[\"product_code\"] !== '') {\r\n          const _objPush = {\r\n            code: bill[\"product_code\"],\r\n            name: bill[\"product_name\"],\r\n            mhvth: bill[\"product_code\"] + ': ' + bill[\"product_name\"],\r\n          };\r\n          this.select.products.push(_objPush);\r\n        }\r\n\r\n        this.bill_products.insert(bill);\r\n      }\r\n    })\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataGrid.instance.refresh();\r\n    this._tinhGiaTri();\r\n    Library.hideloading();\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (this.select.unit_codes && this.select.unit_codes.length > 0) {\r\n        const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n        if (_obj) {\r\n          return _obj.code;\r\n        } else {\r\n          let code = VStringService._convertToViKdau(unitName);\r\n          let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n          if (oDuplicate)\r\n            code = code + Helper.addtionalUnitCode();\r\n          this.select.unit_codes.push({ code: code, name: unitName });\r\n          return code;\r\n        }\r\n      } else {\r\n        this.select.unit_codes = [];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n\r\n  changeCKTM(row) {\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'LAY_MAU_BANG_KE') {\r\n      this.layMauBangKe();\r\n    } else if (e.itemData.id === 'NAP_DU_LIEU_BANG_KE') {\r\n      this.napDuLieuTuBangKe();\r\n    }\r\n  }\r\n  onClickGuidReduce() {\r\n    this.router.navigate([]).then(result => { window.open('https://ihoadon.vn/hddt/danh-muc-hang-hoa-dich-vu-duoc-giam-thue-gtgt-theo-nghi-quyet-so-406-nq-ubtvqh15.html', '_blank'); });\r\n  }\r\n  _changeND92(e) {\r\n    if (e.value)\r\n      this.frmData.is_resolution_43 = !e.value;\r\n    this._tinhGiaTri();\r\n  }\r\n  _changeNQ43(e) {\r\n    if (e.value) {\r\n      this.frmData.is_exemption_decree = !e.value;\r\n      if (this.frmData.sales_percentage == null && parseInt(this.configs.system_parameter.value_rate_percent) > 0) {\r\n        this.frmData.sales_percentage = parseInt(this.configs.system_parameter.value_rate_percent);\r\n      }\r\n    }\r\n    else {\r\n      this.frmData.sales_percentage = null;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  onFieldDataChanged() {\r\n    // this.formEvent.emit(this.frmData);\r\n  }\r\n  onContentReady = (e) => {\r\n    const arrFooter = [\r\n      { name: this._translate.GRID.INVOICE_DETAILS.total_money, class: 'table-footer-1' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_vat, class: 'table-footer-2' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount, class: 'table-footer-3' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_without_discount, class: 'table-footer-4' },\r\n    ]\r\n    this.invoiceService.formatSumColumnGrid(arrFooter);\r\n  }\r\n\r\n}\r\n","module.exports = \"\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <div class=\\\"row search-section\\\">\\r\\n    <div class=\\\"col-md-8\\\" style=\\\"padding-right: 0px\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">THÔNG BÁO HÓA ĐƠN SAI SÓT VỚI CƠ QUAN THUẾ</h4>\\r\\n    </div>\\r\\n    <div class=\\\"col-md-4\\\" style=\\\"max-height: 70px\\\">\\r\\n      <div class=\\\"list-header row\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <div class=\\\"pull-right button-panel\\\">\\r\\n            <dx-button (click)=\\\"addRow()\\\" icon=\\\"fa fa-plus-circle\\\"\\r\\n                       text=\\\"Thêm dòng\\\" type=\\\"default\\\"></dx-button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <dx-data-grid\\r\\n    id=\\\"invoiceHistoryGrid\\\"\\r\\n    [dataSource]=\\\"dataSource\\\"\\r\\n    [showBorders]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\"\\r\\n    (onCellPrepared)=\\\"onCellPrepared($event)\\\"\\r\\n    [showRowLines]=\\\"true\\\">\\r\\n    <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n    <!-- Xóa -->\\r\\n    <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\"\\r\\n    [width]=\\\"45\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n    </dxi-column>\\r\\n    <!-- STT -->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" dataField=\\\"order\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\"\\r\\n    [width]=\\\"53\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <!-- Loại áp dụng HĐ ĐT -->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" caption=\\\"Loại áp dụng HĐ ĐT\\\" dataField=\\\"type_apply_invoice\\\"\\r\\n              alignment=\\\"left\\\" minWidth=\\\"200\\\">\\r\\n      <dxo-lookup [dataSource]=\\\"typeInvoices\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n    </dxi-column>\\r\\n    <!-- Mẫu số-->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" dataField=\\\"template_code\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}\\\"\\r\\n              [width]=\\\"113\\\" alignment=\\\"center\\\" >\\r\\n    </dxi-column>\\r\\n    <!-- Ký hiệu -->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" dataField=\\\"bill_series\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n              [width]=\\\"113\\\" alignment=\\\"center\\\" >\\r\\n    </dxi-column>\\r\\n    <!-- Số hóa đơn -->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"bill_number\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n              alignment=\\\"center\\\" >\\r\\n    </dxi-column>\\r\\n    <!-- Ngày hóa đơn -->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" dataField=\\\"bill_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n              format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" >\\r\\n    </dxi-column>\\r\\n    <!-- Mã CQT cấp -->\\r\\n     <dxi-column [allowEditing]=\\\"false\\\" dataField=\\\"tax_authority_code\\\" caption=\\\"Mã CQT cấp\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" >\\r\\n    </dxi-column>\\r\\n    <!-- Tính chất thông báo -->\\r\\n    <dxi-column [allowEditing]=\\\"true\\\" dataField=\\\"notification_nature\\\" caption=\\\"Tính chất thông báo\\\"\\r\\n                 alignment=\\\"center\\\"\\r\\n                [editorOptions]=\\\"{showClearButton: true ,step: '0'}\\\">\\r\\n    <dxo-lookup [dataSource]=\\\"tinhchatTB\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n    </dxi-column>\\r\\n    <!-- Lý do -->\\r\\n    <dxi-column [allowEditing]=\\\"true\\\" dataField=\\\"reason\\\"\\r\\n                caption=\\\"Lý do\\\" alignment=\\\"left\\\" minWidth=\\\"150\\\">\\r\\n    </dxi-column>\\r\\n    <dxi-column [visible]=\\\"false\\\" dataField=\\\"is_invoice_with_code\\\" caption=\\\"Mã CQT cấp\\\"\\r\\n                minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" >\\r\\n   </dxi-column>\\r\\n    <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n      <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\"></dx-check-box>\\r\\n    </div>\\r\\n    <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n      <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template_code }}</p>\\r\\n      <p>{{ d.data.bill_series }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.bill_number }}<span\\r\\n        *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n    </div>\\r\\n      <div *dxTemplate=\\\"let data of 'DinhKemFile'\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"dinhKemFile($event)\\\">\\r\\n            <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"data.rowIndex\\\" accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n             <p *ngIf=\\\"!isView || data.data.adjustment_type == '7'\\\">Chọn file</p>\\r\\n            <p *ngIf=\\\"data.data.invoice_files&&data.data.invoice_files.length\\\" (click)=\\\"downloadFile(data.data.invoice_files[0])\\\">{{data.data.invoice_files[0].file_name}}</p>\\r\\n          </a>\\r\\n        </div>\\r\\n      <!-- <div *dxTemplate=\\\"let d of 'downloadBB'\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"xuatMauBienBan(d.data)\\\"><img src=\\\"assets\\\\img\\\\icons\\\\TaiMauBangKe.png\\\"></a>\\r\\n        </div> -->\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" style=\\\"margin-right: 162px;\\\">\\r\\n    <dxi-item itemType=\\\"group\\\" [colCount]=\\\"3\\\">\\r\\n      <dxi-item dataField=\\\"notification_type\\\" editorType=\\\"dxCheckBox\\\" [template]=\\\"'unitRisk'\\\">\\r\\n        <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n      </dxi-item>\\r\\n      <dxi-item dataField=\\\"notification_number\\\" [editorOptions]=\\\"{readOnly: isReadOnly }\\\">\\r\\n        <dxo-label text=\\\"Số TB của CQT\\\"></dxo-label>\\r\\n      </dxi-item>\\r\\n      <dxi-item dataField=\\\"notification_date\\\" [template]=\\\"'notifydate'\\\">\\r\\n        <dxo-label text=\\\"Ngày TB của CQT\\\"></dxo-label>\\r\\n      </dxi-item>\\r\\n    </dxi-item>\\r\\n    <div *dxTemplate = \\\"let d of 'notifydate'\\\">\\r\\n      <dx-date-box [(value)]=\\\"frmData.notification_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\" [displayFormat]=\\\"'dd/MM/yyyy'\\\" [(readOnly)] = \\\"isReadOnly\\\">\\r\\n      </dx-date-box>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'unitRisk'\\\">\\r\\n      <dx-check-box [(value)]=\\\"frmData.notification_type\\\" text=\\\"HĐ CQT yêu cầu rà soát\\\" (onValueChanged)=\\\"changedUnitRisk($event)\\\"></dx-check-box>\\r\\n      <div class=\\\"toggle normal\\\" style=\\\"display: flex; align-items: center;margin-top: -17px;margin-left: 180px;\\\">\\r\\n        <img id=\\\"link3\\\" style=\\\"padding-bottom: 6px;cursor: pointer\\\" src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" (click)=\\\"onClickUnitType()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n      </div>\\r\\n      <dx-popover\\r\\n      target=\\\"#link3\\\"\\r\\n              position=\\\"top\\\"\\r\\n              [width]=\\\"327\\\"\\r\\n              [(visible)]=\\\"isDisplayUnitRisk\\\">\\r\\n              <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n                  <p>Chọn vào đây với các hóa đơn mà Cơ quan Thuế gửi thông báo yêu cầu đơn vị rà soát và giải trình</p>\\r\\n                  <p>Yêu cầu nhập số thông báo và ngày thông báo của CQT</p>\\r\\n              </div>\\r\\n          </dx-popover>\\r\\n    </div>\\r\\n  </dx-form>\\r\\n  <dx-button text=\\\"Gửi thông báo cho CQT \\\" (click)=\\\"GuiThongBao()\\\" icon=\\\"{{_translate.ICONS.save }}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"Đóng\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\"","module.exports = \"::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}::ng-deep .view-bill{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { pattern } from '@config/pattern';\r\nimport { AuthService, Helper, Library, SocketService, VSelectBoxService, VStringService, sEnum } from '@core/index';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { HandlebillService } from '@modules/handle-bills/shared/handlebill.service';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap';\r\n\r\n@Component({\r\n  selector: 'app-report-tax-bill-error',\r\n  templateUrl: './report-tax-bill-error.component.html',\r\n  styleUrls: ['./report-tax-bill-error.component.scss']\r\n})\r\nexport class ReportTaxBillErrorComponent implements OnInit {\r\n\r\n  data: any;\r\n  isView: any;\r\n  configs: any;\r\n  bills: any;\r\n  invoicesStore: ArrayStore;\r\n  dataSource: DataSource;\r\n  ioSignature: any;\r\n  _language: string;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  _translate: any;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  nodeSign: any;\r\n  countReport: any;\r\n  emailPattern: any = pattern.email;\r\n  invoiceData: any;\r\n  typeInvoices: any;\r\n  isDisplayUnitRisk: boolean = false;\r\n  maskTemplateCode: string = \"XX/XX/XXXX\";\r\n  rulesTemplateCode = { 'X': /[0-9]/ };\r\n  listTemplate: any;\r\n  isReadOnly: boolean = true;\r\n  infoDangKy: any;\r\n  //{ 'h': /^([0]?[0-9]|[12][0-9]|[3][01])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})/ };\r\n  tinhchatTB = [\r\n    {\r\n      name: \"Hủy\",\r\n      code: \"1\"\r\n    },\r\n    {\r\n      name: \"Điều chỉnh\",\r\n      code: \"2\"\r\n    },\r\n    {\r\n      name: \"Thay thế\",\r\n      code: \"3\"\r\n    },\r\n    {\r\n      name: \"Giải trình\",\r\n      code: \"4\"\r\n    }\r\n  ]\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  frmData = {\r\n    notification_number: \"\",\r\n    notification_type: false,\r\n    notification_date: \"\",\r\n    bills: []\r\n  }\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private socketService: SocketService,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n    private authService: AuthService,\r\n    private handlebillService: HandlebillService,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private billService: BillService,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n  ngOnInit() {\r\n    this.typeInvoices = VSelectBoxService.typeEInvoice(this._translate);\r\n    this.invoicesStore = new ArrayStore({\r\n      key: 'id',\r\n      data: []\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoicesStore\r\n    });\r\n    this.convertData();\r\n    this.connectWebsocket();\r\n  }\r\n  convertData() {\r\n    if (this.data && this.data.length > 0) {\r\n      let order = 0;\r\n      this.data.forEach(invoice => {\r\n        let rowInvoice = new Object;\r\n        rowInvoice[\"id\"] = invoice.id;\r\n        /* Loại áp dụng hóa đơn điện tử \r\n            - HĐ theo TT78 (Vào XML thẻ LADHDDT giá trị là 1) \r\n            - HĐ có mã xác thực theo NĐ 51/2010/NĐ-CP (Vào XML thẻ LADHDDT giá trị là 2)\r\n            - HĐĐT theo TT32 hoặc HĐ giấy theo TT39 (Vào XML thẻ LADHDDT giá trị là 3)\r\n            - HĐ đặt in theo NĐ 123/2020/NĐ-CP (Vào XML thẻ LADHDDT giá trị là 4)\r\n       */\r\n        rowInvoice[\"type_apply_invoice\"] = 1;\r\n        rowInvoice[\"template_code\"] = invoice.template_code;\r\n        rowInvoice[\"bill_series\"] = invoice.bill_series;\r\n        rowInvoice[\"bill_number\"] = invoice.bill_number;\r\n        rowInvoice[\"bill_date\"] = invoice.bill_date;\r\n        rowInvoice[\"tax_authority_code\"] = invoice.tax_authority_code;\r\n        rowInvoice[\"adjustment_type\"] = invoice.adjustment_type;\r\n        rowInvoice[\"is_invoice_with_code\"] = invoice.is_invoice_with_code;\r\n        rowInvoice[\"notification_nature\"] = \"\";\r\n        rowInvoice[\"reason\"] = \"\";\r\n        rowInvoice[\"bill_id\"] = invoice.id;\r\n        rowInvoice[\"order\"] = ++order;\r\n        rowInvoice[\"row_edit\"] = false;\r\n        rowInvoice[\"is_default_template\"] = invoice.is_default_template;\r\n        this.invoicesStore.insert(rowInvoice);\r\n      });\r\n    }\r\n    else {\r\n      this.addRow();\r\n    }\r\n  }\r\n  /* Thêm dòng hàng hóa */\r\n  addRow() {\r\n    let len, order;\r\n    this.invoicesStore.load().then((dataSource) => {\r\n      if (dataSource.length >= 1) {\r\n        len = dataSource.length;\r\n        order = dataSource[len - 1].order + 1;\r\n      } else {\r\n        order = 1;\r\n      }\r\n    });\r\n    let data = this.add_invoice(order);\r\n    this.invoicesStore.insert(data);\r\n    if (this.dataGrid && this.dataGrid.instance)\r\n      this.dataGrid.instance.refresh();\r\n  }\r\n  add_invoice(order) {\r\n    return {\r\n      id: Helper.makeid(),\r\n      order: order,\r\n      template_code: \"\",\r\n      bill_series: \"\",\r\n      bill_number: \"\",\r\n      type_apply_bill: null,\r\n      bill_date: \"\",\r\n      tax_authority_code: \"\",\r\n      notification_nature: \"\",\r\n      adjustment_type: \"\",\r\n      reason: \"\",\r\n      is_invoice_with_code: null,\r\n      row_edit: true,\r\n      bill_id: null,\r\n      is_default_template: false\r\n    }\r\n  }\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    setTimeout(() => {\r\n      const check = confirm(this._translate.CONFIRM.delete);\r\n      if (check) {\r\n        setTimeout(() => {\r\n          this.invoicesStore.remove(item.id);\r\n          if (this.dataGrid && this.dataGrid.instance)\r\n            this.dataGrid.instance.refresh();\r\n        }, 100);\r\n      }\r\n    }, 200);\r\n  }\r\n  createDocRelateNumber() {\r\n    let number_report = \"\";\r\n    if (this.countReport < 10)\r\n      number_report = '0' + this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    else\r\n      number_report = this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    this.countReport++;\r\n    return number_report;\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        }\r\n        else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.xuLiApiKhiXuat();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  _validGrid() {\r\n    let invalid = true;\r\n    this.invoicesStore.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        if (!item.notification_nature && invalid) {\r\n          Library.notify(\"Tính chất thông báo\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'notification_nature'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n        else {\r\n          if (!item.row_edit) {\r\n            // Gốc và bị điều chỉnh\r\n            if (item.adjustment_type == \"1\" || item.adjustment_type == \"4\") {\r\n              if (item.notification_nature != \"2\" && item.notification_nature != \"4\") {\r\n                Library.notify(\"Chỉ được chọn tính chất thông báo là Giải trình và Điều chỉnh\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'notification_nature'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n            // Bị thay thế\r\n            if (item.adjustment_type == \"2\") {\r\n              if (item.notification_nature != \"3\" && item.notification_nature != \"4\") {\r\n                Library.notify(\"Chỉ được chọn tính chất thông báo là Giải trình và Thay thế\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'notification_nature'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n            // thay thế/điều chỉnh\r\n            if (item.adjustment_type == \"3\" || item.adjustment_type == \"5\") {\r\n              if (item.notification_nature != \"4\") {\r\n                Library.notify(\"Chỉ được chọn tính chất thông báo là Giải trình\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'notification_nature'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n            // xoá bỏ\r\n            if (item.adjustment_type == \"7\") {\r\n              if (item.notification_nature != \"4\" && item.notification_nature != \"1\") {\r\n                Library.notify(\"Chỉ được chọn tính chất thông báo là Giải trình và Huỷ\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'notification_nature'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n            \r\n          }\r\n        }\r\n        if (!item.reason && invalid) {\r\n          Library.notify('Lý do ' + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'reason'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n        if (item.row_edit && invalid) {\r\n          if (!item.type_apply_invoice && invalid) {\r\n            Library.notify(\"Loại áp dụng HĐ ĐT\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'type_apply_invoice'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          if (!item.template_code && invalid) {\r\n            Library.notify(\"Mẫu số\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'template_code'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          else {\r\n            if (invalid) {\r\n              let validTemplateCode = false;\r\n              /* Thông tư 78 */\r\n              if (item.type_apply_invoice == 1) {\r\n                if (item.template_code != \"1\" && item.template_code != \"2\" && item.template_code != \"3\" && item.template_code != \"4\"\r\n                  && item.template_code != \"5\" && item.template_code != \"6\") {\r\n                  validTemplateCode = true;\r\n                }\r\n              }\r\n              else if (item.type_apply_invoice == 4) {\r\n                if (item.template_code.length == 11) {\r\n                  let char1 = item.template_code.substring(0, 6);\r\n                  let char2 = item.template_code.substring(7, 6);\r\n                  let char3 = item.template_code.substring(8, 7);\r\n                  let char4 = item.template_code.substring(8);\r\n                  if (char1 != \"01GTKT\" && char1 != \"02GTTT\" && char1 != \"03XKNB\" && char1 != \"04HGDL\" && char1 != \"07KPTQ\") {\r\n                    validTemplateCode = true;\r\n                  }\r\n                  else {\r\n                    if (isNaN(+Number(char2)))\r\n                      validTemplateCode = true;\r\n                    else {\r\n                      if (item.type_apply_invoice == 4 && Number(char2) == 0)\r\n                        validTemplateCode = true;\r\n                    }\r\n                  }\r\n                  if (char3.length != 1 || char3 != \"/\")\r\n                    validTemplateCode = true;\r\n                  if (char4.length != 3 || isNaN(+Number(char4)))\r\n                    validTemplateCode = true;\r\n                }\r\n                else\r\n                  validTemplateCode = true;\r\n              }\r\n              if (validTemplateCode) {\r\n                Library.notify(\"Mẫu số\" + \" \" + \"không đúng định dạng\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'template_code'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          if (!item.bill_series && invalid) {\r\n            Library.notify(\"Ký hiệu\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'bill_series'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          else {\r\n            if (invalid) {\r\n              let validInvoiceSeries = false;\r\n              /* Thông tư 78 */\r\n              if (item.type_apply_invoice == 1) {\r\n                if (item.bill_series.length == 6) {\r\n                  let char1 = item.bill_series.substring(1, 0);\r\n                  let char2 = item.bill_series.substring(3, 1);\r\n                  let char3 = item.bill_series.substring(4, 3);\r\n                  let char4 = item.bill_series.substring(5, 4);\r\n                  let char5 = item.bill_series.substring(6, 5);\r\n                  if (char1 != \"C\" && char1 != \"K\")\r\n                    validInvoiceSeries = true;\r\n                  if (char2.length != 2 || isNaN(+Number(char2)))\r\n                    validInvoiceSeries = true;\r\n                  if (char3 != \"T\" && char3 != \"D\" && char3 != \"L\" && char3 != \"M\"\r\n                    && char3 != \"N\" && char3 != \"B\" && char3 != \"G\" && char3 != \"H\")\r\n                    validInvoiceSeries = true;\r\n                  if (!isNaN(+Number(char4)) || !isNaN(+Number(char5)))\r\n                    validInvoiceSeries = true;\r\n                }\r\n                else {\r\n                  validInvoiceSeries = true;\r\n                }\r\n\r\n              }\r\n              // else if (item.type_apply_invoice == 3) {\r\n              //   if (item.bill_series.length == 6) {\r\n              //     let char1 = item.bill_series.substring(1, 0);\r\n              //     let char2 = item.bill_series.substring(2, 1);\r\n              //     let char3 = item.bill_series.substring(3, 2);\r\n              //     let char4 = item.bill_series.substring(5, 3);\r\n              //     let char5 = item.bill_series.substring(6, 5);\r\n              //     if (!isNaN(+Number(char1)) || !isNaN(+Number(char2)))\r\n              //       validInvoiceSeries = true;\r\n              //     if (char3.length != 1 || char3 != \"/\")\r\n              //       validInvoiceSeries = true;\r\n              //     if (char4.length != 2 || isNaN(+Number(char4)))\r\n              //       validInvoiceSeries = true;\r\n              //     if (char5 != \"P\" && char5 != \"T\" && char5 != \"E\")\r\n              //       validInvoiceSeries = true;\r\n              //   }\r\n              //   else\r\n              //     validInvoiceSeries = true;\r\n              // }\r\n              else if (item.type_apply_invoice == 4) {\r\n                if (item.bill_series.length == 8) {\r\n\r\n                  let char1 = item.bill_series.substring(3, 2);\r\n                  let char2 = item.bill_series.substring(4, 3);\r\n                  let char3 = item.bill_series.substring(5, 4);\r\n                  let char4 = item.bill_series.substring(7, 5);\r\n                  let char5 = item.bill_series.substring(8, 7);\r\n\r\n                  let char6 = item.bill_series.substring(2, 0);\r\n\r\n                  if (!isNaN(+Number(char1)) || !isNaN(+Number(char2)))\r\n                    validInvoiceSeries = true;\r\n                  if (char3.length != 1 || char3 != \"/\")\r\n                    validInvoiceSeries = true;\r\n                  if (char4.length != 2 || isNaN(+Number(char4)))\r\n                    validInvoiceSeries = true;\r\n                  if (char5 != \"P\")\r\n                    validInvoiceSeries = true;\r\n                  if (isNaN(+Number(char6))) {\r\n                    validInvoiceSeries = true;\r\n                  }\r\n                  else {\r\n                    if (Number(char6) == 0 || Number(char6) > 65)\r\n                      validInvoiceSeries = true;\r\n                  }\r\n                }\r\n                else\r\n                  validInvoiceSeries = true;\r\n              }\r\n              if (validInvoiceSeries) {\r\n                Library.notify(\"Ký hiệu\" + \" \" + \"không đúng định dạng\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'bill_series'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          if (!item.bill_number && invalid) {\r\n            Library.notify(\"Số hóa đơn\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'bill_number'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          if (!item.bill_date && invalid) {\r\n            Library.notify(\"Ngày hóa đơn\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'bill_date'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          /* Bắt mẫu số ký hiệu vs p/m */\r\n          if (VStringService._getValueToString(item.template_code) != \"\" && VStringService._getValueToString(item.bill_series) != \"\") {\r\n            let obj = this.listTemplate.filter(p => p.template_code == item.template_code && p.bill_series == item.bill_series)[0];\r\n            if (obj) {\r\n              Library.notify(\"Mẫu số - ký hiệu đang có hóa đơn xuất ở hệ thống iHOADON. Vui lòng chọn hóa đơn ở phần mềm để gửi thông báo.\", 'error');\r\n              this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'bill_date'));\r\n              invalid = false;\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n    if (this.frmData.notification_type) {\r\n      if (VStringService._getValueToString(this.frmData.notification_number) == \"\") {\r\n        Library.notify(\"Số TB của CQT không được để trống\", 'error');\r\n        invalid = false;\r\n        return false;\r\n      }\r\n      if (!this.frmData.notification_date) {\r\n        Library.notify(\"Ngày TB của CQT không được để trống\", 'error');\r\n        invalid = false;\r\n        return false;\r\n      }\r\n    }\r\n    return invalid;\r\n  }\r\n\r\n  xoaBo() {\r\n    // if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n    //   Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n    //   return;\r\n    // }\r\n    setTimeout(() => {\r\n      if (this._validGrid()) {\r\n        Library.confirmVA(this._translate.CONFIRM.acction_function, this._translate.NOTIFY.notify, () => {\r\n          this.showPopup = true;\r\n          this.invoicesStore.load().then((dataSource) => {\r\n            if (dataSource.length > 0) {\r\n              this.bills = dataSource.filter(p => p.adjustment_type != '7');\r\n              this.totalInvoice = this.bills.length;\r\n              this.invoiceIndex = 0;\r\n              this.tempKiFile = 0;\r\n              this.xuatHoaDon();\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      this.connectWebsocket();\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let ListSerialNumber = \"DSCKS\";\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n      }\r\n      else\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n\r\n    }\r\n  }\r\n  xuLiApiKhiXuat() {\r\n    let notification_type: any;\r\n    if (this.frmData.notification_type)\r\n      notification_type = 2;\r\n    else\r\n      notification_type = 1;\r\n    let data = {\r\n      notification_number: this.frmData.notification_number,\r\n      notification_type: notification_type,\r\n      notification_date: this.frmData.notification_date,\r\n      bills: this.bills\r\n    };\r\n    let xmlInvoice = \"\";\r\n    let sub = this.handlebillService.getXmlInvoiceWrong(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        xmlInvoice = rs.data.xml_file;\r\n        this.frmData.bills = rs.data.bills;\r\n        let sign_date = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (xmlInvoice != \"\") {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            this.goiApiXuatHoaDon(xmlInvoice);\r\n          else\r\n            this.xuLyKiFile(xmlInvoice, sign_date);\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        //this.onImportHiding();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, invoiceDate) {\r\n    let nodeSign = \"//TBao/DSCKS/NNT\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, invoiceDate, 'NotificationData', ListSerialNumber, true);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    this.subXuatHoaDon = this.handlebillService.sendXmlInvoiceWrong({\r\n      xml_file: xml_string,\r\n      bills: this.frmData.bills\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        Library.notify(\"Gửi thông báo hóa đơn sai sót thành công\", 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n    // document.getElementById(\"file-dinh-kem\").click();\r\n    // console.log(e)\r\n\r\n  }\r\n  choseFile(evt) {\r\n    //evt.srcElement.firstChild.click();\r\n    document.getElementById(\"file-input\").click();\r\n  }\r\n  fileChanged(e) {\r\n    setTimeout(() => {\r\n      //let rowIndex = e.target.dataset.rowindex;\r\n      let fileAttachData: Array<any> = [];\r\n      let fileReader = new FileReader();\r\n      let file = e.target.files[0];\r\n      let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n      // console.log(file)\r\n      if (pattFile.test(file.name)) {\r\n        fileReader.readAsDataURL(file);\r\n        fileReader.onload = (e) => {\r\n          let base64result = fileReader.result.toString().split(',')[1];\r\n          fileAttachData.unshift({\r\n            type: \"DK\",\r\n            file_name: file.name,\r\n            file_content: base64result,\r\n          });\r\n          // if (document.getElementById('list-file')) {\r\n          //   document.getElementById('list-file').scrollTop = 0;\r\n          // }\r\n          let _lstAttach: any = [];\r\n          _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n          if (_lstAttach == null) {\r\n            _lstAttach = [];\r\n          } else {\r\n            _lstAttach.push(fileAttachData[0]);\r\n          }\r\n          this.dataSource[0][\"invoice_files\"] = _lstAttach;\r\n          // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n          //this.dataSource.reload();\r\n        }\r\n      } else {\r\n        Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n      }\r\n    }, 200);\r\n  }\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let test = fileReader.result;\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"DK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.invoicesStore.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (index == rowIndex)\r\n              item.invoice_files = fileAttachData;\r\n          });\r\n        });\r\n        // this.dataSource[rowIndex][\"invoice_files\"] = fileAttachData;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_content\"] = base64result;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n  removeFile(i) {\r\n    let _lstAttach: any = [];\r\n    _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n    _lstAttach.splice(i, 1);\r\n  }\r\n  downloadFile(data) {\r\n    var re = /(?:\\.([^.]+))?$/;\r\n    var fileType = re.exec(data.file_name)[1];\r\n    Helper.dowloadFile(data.file_name, fileType, data.file_content);\r\n  }\r\n\r\n  xuatMauBienBan(data) {\r\n    if (this._validGrid()) {\r\n      Library.showloading();\r\n      let inv = Object.assign({}, data);\r\n      inv.adjustment_type = \"1\";\r\n      inv.auto_value_price = inv.auto_value_price == null ? false : inv.auto_value_price;\r\n      inv.invoice_files = [];\r\n      inv.doc_relate_date = moment(data.doc_relate_date).format('YYYY-MM-DD');\r\n      this.handlebillService.xuatMauBienBan(inv).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let file = rs.data.invoice;\r\n          Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n  viewDetailInvoice(data) {\r\n    if (data) {\r\n      const ids = [];\r\n      let is_default_tempplate = true;\r\n      if (data) {\r\n        ids.push(data.bill_id);\r\n        if (!VStringService._attemptConvertBool(data.is_default_template))\r\n            is_default_tempplate = false;\r\n      }\r\n      if (is_default_tempplate) {\r\n        const initialState = {\r\n          items: ids,\r\n          isXuatHD: false,\r\n          hinhthucxuat: '',\r\n          typeAction: sEnum.typeCode.xem_hoa_don_mtt_html\r\n        };\r\n        this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n      }\r\n      else {\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          let data = this.billService.taodulieuXemMau(ids);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_hoa_don_mtt,\r\n            cssClass: 'modal-xl view-bill'\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n  dong() {\r\n    this.bsModalRef.hide();\r\n    this.router.navigate(['/system/handle-bills/']);\r\n  }\r\n  // onEditorPreparing(e) {\r\n  //   if (e.parentType === 'dataRow') {\r\n  //     if (e.dataField != 'notification_nature' && e.dataField != 'reason') {\r\n  //       if (!e.row.data.row_edit)\r\n  //         e.editorOptions.disabled = true;\r\n  //       else\r\n  //         e.editorOptions.disabled = false;\r\n  //     }\r\n  //   }\r\n  // }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      /* Bôi đỏ các trường bắt buộc */\r\n      if (e.column.dataField == \"notification_nature\") {\r\n        if (!e.data.notification_nature) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = \"Tính chất thông báo\" + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n        else {\r\n          if (!e.data.row_edit) {\r\n\r\n            // Gốc và bị điều chỉnh\r\n            if (e.data.adjustment_type == \"1\" || e.data.adjustment_type == \"4\") {\r\n              if (e.data.notification_nature != \"2\" && e.data.notification_nature != \"4\") {\r\n                e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n                e.cellElement.title = \"Chỉ được chọn tính chất thông báo là Giải trình và Điều chỉnh\";\r\n              }\r\n            }\r\n            // Bị thay thế\r\n            if (e.data.adjustment_type == \"2\") {\r\n              if (e.data.notification_nature != \"3\" && e.data.notification_nature != \"4\") {\r\n                e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n                e.cellElement.title = \"Chỉ được chọn tính chất thông báo là Giải trình và Thay thế\";\r\n              }\r\n            }\r\n            // thay thế/điều chỉnh\r\n            if (e.data.adjustment_type == \"3\" || e.data.adjustment_type == \"5\") {\r\n              if (e.data.notification_nature != \"4\") {\r\n                e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n                e.cellElement.title = \"Chỉ được chọn tính chất thông báo là Giải trình\";\r\n              }\r\n            }\r\n\r\n            // xoá bỏ\r\n            if (e.data.adjustment_type == \"7\") {\r\n              if (e.data.notification_nature != \"1\" && e.data.notification_nature != \"4\") {\r\n                e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n                e.cellElement.title = \"Chỉ được chọn tính chất thông báo là Giải trình và Huỷ\";\r\n              }\r\n            }\r\n            \r\n          }\r\n        }\r\n      }\r\n      if (e.column.dataField == \"reason\") {\r\n        if (!e.data.reason) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = \"Lý do\" + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n      }\r\n      /* Valid nhập tay */\r\n      if (e.data.row_edit) {\r\n        if (e.column.dataField == \"type_apply_invoice\") {\r\n          if (!e.data.type_apply_invoice) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = \"Loại áp dụng HĐ ĐT\" + \" \" + this._translate.VALIDATION.required;\r\n          }\r\n        }\r\n        if (e.column.dataField == \"template_code\") {\r\n          if (!e.data.template_code) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = \"Mẫu số\" + \" \" + this._translate.VALIDATION.required;\r\n          }\r\n          else {\r\n            let validTemplateCode = false;\r\n            if (e.data.type_apply_invoice == 1) {\r\n              if (e.data.template_code != \"1\" && e.data.template_code != \"2\" && e.data.template_code != \"3\" && e.data.template_code != \"4\"\r\n                && e.data.template_code != \"5\" && e.data.template_code != \"6\") {\r\n                validTemplateCode = true;\r\n              }\r\n            }\r\n            else if (e.data.type_apply_invoice == 4) {\r\n              if (e.data.template_code.length == 11) {\r\n                let char1 = e.data.template_code.substring(0, 6);\r\n                let char2 = e.data.template_code.substring(7, 6);\r\n                let char3 = e.data.template_code.substring(8, 7);\r\n                let char4 = e.data.template_code.substring(8);\r\n                if (char1 != \"01GTKT\" && char1 != \"02GTTT\" && char1 != \"03XKNB\" && char1 != \"04HGDL\" && char1 != \"07KPTQ\") {\r\n                  validTemplateCode = true;\r\n                }\r\n                else {\r\n                  if (isNaN(+Number(char2)))\r\n                    validTemplateCode = true;\r\n                  else {\r\n                    if (e.data.type_apply_invoice == 4 && Number(char2) == 0)\r\n                      validTemplateCode = true;\r\n                  }\r\n                }\r\n                if (char3.length != 1 || char3 != \"/\")\r\n                  validTemplateCode = true;\r\n                if (char4.length != 3 || isNaN(+Number(char4)))\r\n                  validTemplateCode = true;\r\n              }\r\n              else\r\n                validTemplateCode = true;\r\n            }\r\n            if (validTemplateCode) {\r\n              e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n              e.cellElement.title = \"Mẫu số\" + \" \" + \"không đúng định dạng\";\r\n            }\r\n          }\r\n        }\r\n        if (e.column.dataField == \"bill_series\") {\r\n          if (!e.data.bill_series) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = \"Ký hiệu\" + \" \" + this._translate.VALIDATION.required;\r\n          }\r\n          else {\r\n            let validInvoiceSeries = false;\r\n            /* Thông tư 78 */\r\n            if (e.data.type_apply_invoice == 1) {\r\n              if (e.data.bill_series.length == 6) {\r\n                let char1 = e.data.bill_series.substring(1, 0);\r\n                let char2 = e.data.bill_series.substring(3, 1);\r\n                let char3 = e.data.bill_series.substring(4, 3);\r\n                let char4 = e.data.bill_series.substring(5, 4);\r\n                let char5 = e.data.bill_series.substring(6, 5);\r\n                if (char1 != \"C\" && char1 != \"K\")\r\n                  validInvoiceSeries = true;\r\n                if (char2.length != 2 || isNaN(+Number(char2)))\r\n                  validInvoiceSeries = true;\r\n                if (char3 != \"T\" && char3 != \"D\" && char3 != \"L\" && char3 != \"M\"\r\n                  && char3 != \"N\" && char3 != \"B\" && char3 != \"G\" && char3 != \"H\")\r\n                  validInvoiceSeries = true;\r\n                if (!isNaN(+Number(char4)) || !isNaN(+Number(char5)))\r\n                  validInvoiceSeries = true;\r\n              }\r\n              else {\r\n                validInvoiceSeries = true;\r\n              }\r\n            }\r\n            // else if (e.data.type_apply_invoice == 3) {\r\n            //   if (e.data.bill_series.length == 6) {\r\n            //     let char1 = e.data.bill_series.substring(1, 0);\r\n            //     let char2 = e.data.bill_series.substring(2, 1);\r\n            //     let char3 = e.data.bill_series.substring(3, 2);\r\n            //     let char4 = e.data.bill_series.substring(5, 3);\r\n            //     let char5 = e.data.bill_series.substring(6, 5);\r\n            //     if (!isNaN(+Number(char1)) || !isNaN(+Number(char2)))\r\n            //       validInvoiceSeries = true;\r\n            //     if (char3.length != 1 || char3 != \"/\")\r\n            //       validInvoiceSeries = true;\r\n            //     if (char4.length != 2 || isNaN(+Number(char4)))\r\n            //       validInvoiceSeries = true;\r\n            //     if (char5 != \"P\" && char5 != \"T\" && char5 != \"E\")\r\n            //       validInvoiceSeries = true;\r\n            //   }\r\n            //   else\r\n            //     validInvoiceSeries = true;\r\n            // }\r\n            else if (e.data.type_apply_invoice == 4) {\r\n              if (e.data.bill_series.length == 8) {\r\n\r\n                let char1 = e.data.bill_series.substring(3, 2);\r\n                let char2 = e.data.bill_series.substring(4, 3);\r\n                let char3 = e.data.bill_series.substring(5, 4);\r\n                let char4 = e.data.bill_series.substring(7, 5);\r\n                let char5 = e.data.bill_series.substring(8, 7);\r\n\r\n                let char6 = e.data.bill_series.substring(2, 0);\r\n\r\n                if (!isNaN(+Number(char1)) || !isNaN(+Number(char2)))\r\n                  validInvoiceSeries = true;\r\n                if (char3.length != 1 || char3 != \"/\")\r\n                  validInvoiceSeries = true;\r\n                if (char4.length != 2 || isNaN(+Number(char4)))\r\n                  validInvoiceSeries = true;\r\n                if (char5 != \"P\")\r\n                  validInvoiceSeries = true;\r\n                if (isNaN(+Number(char6))) {\r\n                  validInvoiceSeries = true;\r\n                }\r\n                else {\r\n                  if (Number(char6) == 0 || Number(char6) > 65)\r\n                    validInvoiceSeries = true;\r\n                }\r\n              }\r\n              else\r\n                validInvoiceSeries = true;\r\n            }\r\n            if (validInvoiceSeries) {\r\n              e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n              e.cellElement.title = \"Ký hiệu\" + \" \" + \"không đúng định dạng\";\r\n            }\r\n          }\r\n        }\r\n        if (e.column.dataField == \"bill_number\") {\r\n          if (!e.data.bill_number) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = \"Số hóa đơn\" + \" \" + this._translate.VALIDATION.required;\r\n          }\r\n        }\r\n        if (e.column.dataField == \"bill_date\") {\r\n          if (!e.data.bill_date) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = \"Ngày hóa đơn\" + \" \" + this._translate.VALIDATION.required;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  GuiThongBao() {\r\n    setTimeout(() => {\r\n      if (this._validGrid()) {\r\n        this.invoicesStore.load().then((dataSource) => {\r\n          if (dataSource.length > 0) {\r\n            this.bills = [];\r\n            dataSource.forEach(item => {\r\n              let object = new Object;\r\n              object[\"tax_authority_code\"] = item.tax_authority_code;\r\n              object[\"template_code\"] = item.template_code;\r\n              object[\"bill_series\"] = item.bill_series;\r\n              object[\"bill_date\"] = item.bill_date;\r\n              object[\"bill_number\"] = item.bill_number;\r\n              object[\"reason\"] = item.reason;\r\n              object[\"notification_nature\"] = item.notification_nature;\r\n              object[\"type_apply_bill\"] = item.type_apply_invoice;\r\n              object[\"bill_id\"] = item.id;\r\n              this.bills.push(object);\r\n            });\r\n            this.xuatHoaDon();\r\n          }\r\n        });\r\n      }\r\n    }, 300);\r\n  }\r\n  onClickUnitType() {\r\n    this.isDisplayUnitRisk = !this.isDisplayUnitRisk;\r\n  }\r\n  changedUnitRisk(data) {\r\n    this.isReadOnly = !data.value;\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { ReplaceBillResolver } from './shared/replace-bill.resolver';\r\nimport { ReplaceBillComponent } from './components/replace/replace-bill/replace-bill.component';\r\nimport { AdjustBillComponent } from './components/adjust/adjust-bill/adjust-bill.component';\r\nimport { AdjustBillResolver } from './shared/adjust-bill.resolver';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: IndexComponent\r\n  },\r\n  {\r\n    path: 'replace/:billId',\r\n    component: ReplaceBillComponent,\r\n    resolve: { init: ReplaceBillResolver },\r\n    data: {\r\n      // type: '01GTKT',\r\n      brec: 'create_invoice_instead',\r\n      status: 'thaythemoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-replace/:billId',\r\n    component: ReplaceBillComponent,\r\n    resolve: { init: ReplaceBillResolver },\r\n    data: {\r\n      status: 'chinhsua',\r\n      brec: 'create_invoice_instead',\r\n    }\r\n  },\r\n  {\r\n    path: 'adjust/:billId',\r\n    component: AdjustBillComponent,\r\n    resolve: { init: AdjustBillResolver },\r\n    data: {\r\n      brec: 'create_invoice_adjustment',\r\n      status: 'thaythemoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-adjust/:billId',\r\n    component: AdjustBillComponent,\r\n    resolve: { init: AdjustBillResolver },\r\n    data: {\r\n      brec: 'create_invoice_adjustment',\r\n      status: 'chinhsua'\r\n    }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HandleBillsRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { HandleBillsRoutingModule } from './handle-bills-routing.module';\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { BillsCancelComponent } from './components/bills-cancel/bills-cancel.component';\r\nimport { ReportTaxBillErrorComponent } from './components/report-tax-bill-error/report-tax-bill-error.component';\r\nimport { SharedModule } from '@shared/shared.module';\r\nimport { devextremeModule } from '@core/library';\r\nimport { vTranslateModule } from '@core/module/v-translate.module';\r\nimport { TagInputModule } from 'ngx-chips';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport { DxLookupModule, DxPopoverModule, DxTooltipModule } from 'devextreme-angular';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/components';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { ReplaceBillComponent } from './components/replace/replace-bill/replace-bill.component';\r\nimport { ReplaceBillResolver } from './shared/replace-bill.resolver';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\nimport { ReplaceFormBillComponent } from './components/replace/replace-form-bill/replace-form-bill.component';\r\nimport { ReplaceProductGripComponent } from './components/replace/replace-product-grip/replace-product-grip.component';\r\nimport { AdjustBillComponent } from './components/adjust/adjust-bill/adjust-bill.component';\r\nimport { AdjustFormBillComponent } from './components/adjust/adjust-form-bill/adjust-form-bill.component';\r\nimport { AdjustProductGripComponent } from './components/adjust/adjust-product-grip/adjust-product-grip.component';\r\nimport { AdjustBillResolver } from './shared/adjust-bill.resolver';\r\nimport { VatSharedModule } from '@shared/index';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    HandleBillsRoutingModule,\r\n    SharedModule,\r\n    devextremeModule,\r\n    vTranslateModule,\r\n    DxLookupModule,\r\n    TagInputModule,\r\n    DxTooltipModule,\r\n    DxPopoverModule,\r\n    NgxPaginationModule,\r\n    NgxSpinnerModule,\r\n    VatSharedModule\r\n  ],\r\n  entryComponents: [\r\n    ReportTaxBillErrorComponent,\r\n    BillsCancelComponent,\r\n    ViewInvoiceMultipageComponent,\r\n    PreviewInvoiceComponent\r\n  ],\r\n  declarations: [\r\n    IndexComponent, \r\n    BillsCancelComponent, \r\n    ReportTaxBillErrorComponent, \r\n    ReplaceBillComponent,\r\n    ReplaceFormBillComponent, \r\n    ReplaceProductGripComponent, \r\n    AdjustBillComponent, \r\n    AdjustFormBillComponent, \r\n    AdjustProductGripComponent],\r\n  providers: [\r\n    VatService,\r\n    BillService,\r\n    ReplaceBillResolver,\r\n    AdjustBillResolver,\r\n    ViewInvoiceService,\r\n    MyBsModalService\r\n  ]\r\n})\r\nexport class HandleBillsModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map } from 'rxjs/operators';\r\n\r\nimport { Library, Helper } from '@core/index';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\n\r\n@Injectable()\r\nexport class AdjustBillResolver implements Resolve<any[]> {\r\n    constructor(\r\n        private billService: BillService,\r\n        private router: Router,\r\n    ) { }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n        Library.showloading();\r\n        let billId = route.paramMap.get('billId');\r\n        let loaiHoaDon = route.data.type;\r\n        return this.billService.showBillAdjustResolver(billId, loaiHoaDon, '').pipe(\r\n            take(1),\r\n            map(rs => {\r\n                Library.hideloading();\r\n                /**\r\n                 * rs[0]: danh mục\r\n                 * rs[1]: bill\r\n                 * rs[2]: template\r\n                 * rs[3]: products\r\n                 */\r\n                if (rs[0].status == \"success\" && rs[1].status == \"success\" && rs[2].status == \"success\" && rs[3].status == \"success\") {\r\n                    let templates = Helper.convertTemplatesToInvoiceResolver(rs[2]);\r\n                    return [\r\n                        templates,\r\n                        rs[0].data,\r\n                        rs[1].data.bill,\r\n                        rs[3].data.products,\r\n                    ];\r\n                   \r\n                } else { // error\r\n                    if (loaiHoaDon == \"01GTKT\")\r\n                        this.router.navigate(['/system/bill-invoice']);\r\n                    else\r\n                        this.router.navigate(['/system/bill-sale-invoice']);\r\n\r\n                    return null;\r\n                }\r\n            })\r\n        );\r\n\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map } from 'rxjs/operators';\r\n\r\nimport { Library, Helper, } from '@core/index';\r\nimport { BillService } from '@modules/bill-invoice/shared/bill.service';\r\n\r\n@Injectable()\r\nexport class ReplaceBillResolver implements Resolve<any[]> {\r\n  constructor(\r\n    private billService: BillService,\r\n    // private router: Router,\r\n    // private authService: AuthService,\r\n  ) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    Library.showloading();\r\n    let billId = route.paramMap.get('billId');\r\n\r\n    return this.billService.showBillReplaceResolverTT78(billId).pipe(\r\n      take(1),\r\n      map(rs => {\r\n        Library.hideloading();\r\n        if (rs[0].status == \"success\" && rs[1].status == \"success\" && rs[2].status == \"success\" && rs[3].status == \"success\") {\r\n          let templates = Helper.convertTemplatesToInvoiceResolver(rs[0]);\r\n          return [\r\n            templates,\r\n            rs[1].data,\r\n            rs[2].data.products,\r\n            rs[3].data.configs,\r\n            rs[4].data.bill,\r\n          ];\r\n\r\n        } else {\r\n          // chưa xử lý\r\n          // if (loaiHoaDon == \"01GTKT\")\r\n          //   this.router.navigate(['/system/vat-invoice']);\r\n          // else\r\n          //   this.router.navigate(['/system/sale-invoice']);\r\n\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n\r\n  }\r\n}\r\n"],"sourceRoot":""}