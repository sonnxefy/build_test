{"version":3,"sources":["webpack:///./src/app/modules/ticket/components/history-invoice/history-invoice.component.html","webpack:///./src/app/modules/ticket/components/history-invoice/history-invoice.component.scss","webpack:///./src/app/modules/ticket/components/history-invoice/history-invoice.component.ts","webpack:///./src/app/modules/ticket/components/index/index.component.html","webpack:///./src/app/modules/ticket/components/index/index.component.scss","webpack:///./src/app/modules/ticket/components/index/index.component.ts","webpack:///./src/app/modules/ticket/components/invoice/invoice.component.html","webpack:///./src/app/modules/ticket/components/invoice/invoice.component.scss","webpack:///./src/app/modules/ticket/components/invoice/invoice.component.ts","webpack:///./src/app/modules/ticket/components/product-grip/product-grip.component.html","webpack:///./src/app/modules/ticket/components/product-grip/product-grip.component.scss","webpack:///./src/app/modules/ticket/components/product-grip/product-grip.component.ts","webpack:///./src/app/modules/ticket/components/sendEmail/many-receive/many-receive.component.html","webpack:///./src/app/modules/ticket/components/sendEmail/many-receive/many-receive.component.scss","webpack:///./src/app/modules/ticket/components/sendEmail/many-receive/many-receive.component.ts","webpack:///./src/app/modules/ticket/components/sendEmail/one-receive/one-receive.component.html","webpack:///./src/app/modules/ticket/components/sendEmail/one-receive/one-receive.component.scss","webpack:///./src/app/modules/ticket/components/sendEmail/one-receive/one-receive.component.ts","webpack:///./src/app/modules/ticket/components/sendEmail/send-email-ticket/send-email-ticket.component.html","webpack:///./src/app/modules/ticket/components/sendEmail/send-email-ticket/send-email-ticket.component.scss","webpack:///./src/app/modules/ticket/components/sendEmail/send-email-ticket/send-email-ticket.component.ts","webpack:///./src/app/modules/ticket/components/sendEmail/send-email/send-email.component.html","webpack:///./src/app/modules/ticket/components/sendEmail/send-email/send-email.component.scss","webpack:///./src/app/modules/ticket/components/sendEmail/send-email/send-email.component.ts","webpack:///./src/app/modules/ticket/shared/ticket.resolver.ts","webpack:///./src/app/modules/ticket/shared/ticket.service.ts","webpack:///./src/app/modules/ticket/ticket-routing.module.ts","webpack:///./src/app/modules/ticket/ticket.module.ts","webpack:///./src/app/modules/vat/deactivate/vat-deactivate.guard.ts"],"names":[],"mappings":"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","file":"ticket-ticket-module.js","sourcesContent":["module.exports = \"<form>\\r\\n    <div class=\\\"modal-header\\\">\\r\\n        <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.LABEL.process_ticket}}</h4>\\r\\n        <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n            <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n        </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\">\\r\\n        <div class=\\\"container-fluid\\\" style=\\\"margin-bottom: 20px;\\\">\\r\\n            <div class=\\\"row\\\">\\r\\n                <div class=\\\"col-lg-7\\\">\\r\\n                    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n                        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n                            <!-- mẫu vé -->\\r\\n                            <dxi-item [label]=\\\"{text: _translate.GRID.INVOICE.template_ticket }\\\" dataField=\\\"template\\\"\\r\\n                                [editorOptions]=\\\"{readOnly: true}\\\">\\r\\n                            </dxi-item>\\r\\n                            <!-- Số vé -->\\r\\n                            <dxi-item cssClass=\\\"invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\"\\r\\n                                [label]=\\\"{text: _translate.GRID.INVOICE.ticket_number}\\\"\\r\\n                                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                        </dxi-item>\\r\\n                        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n                            <!-- Ngày xuất vé -->\\r\\n                            <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: _translate.GRID.INVOICE.ticket_date}\\\"\\r\\n                                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                            <!-- Mã số thuế -->\\r\\n                            <dxi-item dataField=\\\"buyer_tax_code\\\"\\r\\n                                [label]=\\\"{text: _translate.GRID.INVOICE.buyer_tax_code }\\\"\\r\\n                                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                        </dxi-item>\\r\\n                        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                            <!-- Tên khách hàng -->\\r\\n                            <dxi-item dataField=\\\"buyer_name\\\" [label]=\\\"{text: _translate.GRID.INVOICE.customer_name}\\\"\\r\\n                                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                        </dxi-item>\\r\\n                    </dx-form>\\r\\n                </div>\\r\\n                <div class=\\\"col-lg-5\\\">\\r\\n                    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n                        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                            <dxi-item dataField=\\\"payment_method_name\\\"\\r\\n                                [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_method}\\\"\\r\\n                                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                        </dxi-item>\\r\\n                        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                            <dxi-item dataField=\\\"buyer_email\\\" [label]=\\\"{text: 'Email'}\\\"\\r\\n                                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                        </dxi-item>\\r\\n                    </dx-form>\\r\\n                </div>\\r\\n\\r\\n            </div>\\r\\n            <div class=\\\"row\\\">\\r\\n                <div class=\\\"col-lg-12 link-send-invoice\\\">\\r\\n                    <div class=\\\"pull-right\\\">\\r\\n                        <a *ngIf=\\\"invoice.status == 'DA_XUAT'\\\" (click)=\\\"sendMail()\\\"\\r\\n                            href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.LABEL.send_ticket}}</a>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <dx-data-grid id=\\\"invoiceHistoryGrid\\\" [dataSource]=\\\"invoice_process\\\"\\r\\n            (onEditorPreparing)=\\\"onEditorPreparing($event)\\\" [showBorders]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n            [showRowLines]=\\\"true\\\">\\r\\n            <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n            <dxi-column cellTemplate=\\\"stt\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.view_order}}\\\" width=\\\"80\\\"\\r\\n                alignment=\\\"center\\\"></dxi-column>\\r\\n            <dxi-column dataField=\\\"process_time\\\" caption=\\\"{{_translate.CONTROLL.LABEL.date_made}}\\\" width=\\\"180\\\"\\r\\n                dataType=\\\"datetime\\\" format=\\\"dd/MM/yyyy HH:mm:ss\\\" dateSerializationFormat=\\\"yyyy-MM-dd HH:mm:ss\\\"\\r\\n                alignment=\\\"center\\\"></dxi-column>\\r\\n            <dxi-column dataField=\\\"content\\\" cellTemplate=\\\"content\\\" caption=\\\"{{_translate.CONTROLL.LABEL.task}}\\\"\\r\\n                alignment=\\\"left\\\"></dxi-column>\\r\\n            <dxi-column dataField=\\\"user_name\\\" caption=\\\"{{_translate.CONTROLL.LABEL.person_made}}\\\"\\r\\n                alignment=\\\"left\\\"></dxi-column>\\r\\n            <div *dxTemplate=\\\"let d of 'stt'\\\">\\r\\n                <p>{{ d.rowIndex + 1 }}</p>\\r\\n            </div>\\r\\n            <div *dxTemplate=\\\"let d of 'content'\\\">\\r\\n                {{ d.data.content}}\\r\\n            </div>\\r\\n        </dx-data-grid>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n        <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back }}\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\"\\r\\n            type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n        </dx-button>\\r\\n    </div>\\r\\n</form>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\nimport { AuthService, VStringService } from '@core/index';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport * as moment from 'moment';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { SendEmailTicketComponent } from '../sendEmail/send-email-ticket/send-email-ticket.component';\r\nimport { SendEmailComponent } from '../sendEmail/send-email/send-email.component';\r\n\r\n@Component({\r\n  selector: 'app-history-invoice',\r\n  templateUrl: './history-invoice.component.html',\r\n  styleUrls: ['./history-invoice.component.scss']\r\n})\r\nexport class HistoryInvoiceComponent implements OnInit {\r\n\r\n  frmData: any = {};\r\n  invoice: any\r\n  invoice_process: any;\r\n  _translate: any;\r\n  email: any;\r\n  constructor(\r\n    private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    public bsModalSendMail: BsModalRef,\r\n    private customersService: CustomersService,\r\n\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadTableContent();\r\n    let invoice = this.invoice;\r\n    let template_code = invoice.template_code? invoice.template_code : invoice.template.template_code;\r\n    let invoice_series = invoice.invoice_series? invoice.invoice_series : invoice.template.invoice_series;\r\n    this.frmData.template = `${template_code} - ${invoice_series}`;\r\n    this.frmData.invoice_date = moment(invoice.invoice_date).format('DD/MM/YYYY');\r\n    this.frmData.invoice_number = invoice.invoice_number;\r\n    this.frmData.customer_code = invoice.customer_code;\r\n    this.frmData.buyer_tax_code = invoice.buyer_tax_code;\r\n    this.frmData.buyer_name = invoice.buyer_name;\r\n    this.frmData.buyer_mobile = invoice.buyer_mobile;\r\n    this.frmData.buyer_email = invoice.buyer_email;\r\n    this.frmData.currency_code = invoice.currency_code;\r\n    this.frmData.payment_method_name = invoice.payment_method_view_name;\r\n    this.frmData.customer_id = invoice.customer_id;\r\n    this.email = invoice.buyer_email;\r\n    this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n      if (response.status == \"success\") {\r\n        let emailInCategory = \"\";\r\n        const customer = response.data.customer;\r\n        if (customer)\r\n          emailInCategory = customer.email;\r\n        if (this.email) {\r\n          if (emailInCategory != \"\") {\r\n            let arrEmail = emailInCategory.split(';');\r\n            arrEmail.forEach(item => {\r\n              if (this.email.indexOf(item) < 0)\r\n                this.email = this.email + \";\" + item;\r\n            });\r\n          }\r\n        }\r\n        else {\r\n          this.email = emailInCategory;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  loadTableContent() {\r\n    this.invoice_process = {};\r\n    let sub = this.vatService.getInvoiceProccess(this.invoice.id).subscribe(rs => {\r\n      const mapObj = {\r\n        T: \"; \",\r\n      };\r\n      this.invoice_process = rs.data.invoice_process;\r\n      if (this.invoice_process && this.invoice_process.length > 0) {\r\n        this.invoice_process.forEach(item => {\r\n          item.content = VStringService._getValueToString(item.content).replace(/;/g, \"; \");\r\n        });\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  sendMail() {\r\n    const initialState = {\r\n      invoice_id: this.invoice.id,\r\n      email: this.email,\r\n      customer_id: this.frmData.customer_id\r\n    };\r\n    this.bsModalSendMail = this.modalService.show(SendEmailComponent, { class: 'modal-md', initialState, backdrop: 'static', keyboard: false });\r\n    this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == 'success_mail') {\r\n        this.loadTableContent();\r\n      }\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.dataField === 'content' && e.parentType == \"dataRow\") {\r\n      e.editorName = 'dxTextArea';\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"row search-section\\\">\\r\\n  <div class=\\\"col-md-8\\\" style=\\\"padding-right: 0px\\\">\\r\\n    <app-search-ticket-advanced [listUser]=\\\"listUser\\\" (searchContentChange)=\\\"getSearch($event)\\\">\\r\\n    </app-search-ticket-advanced>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-4\\\" style=\\\"max-height: 70px\\\">\\r\\n    <div class=\\\"list-header row\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-right button-panel\\\" style=\\\"display: flex\\\">\\r\\n          <dx-button (click)=\\\"lapHoaDon()\\\" [(icon)]=\\\"_translate.ICONS.plus\\\" text=\\\"Lập vé\\\" type=\\\"default\\\"></dx-button>\\r\\n\\r\\n          <dx-button id=\\\"product3\\\" (click)=\\\"inhoadon()\\\" [(icon)]=\\\"_translate.ICONS.print\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.LABEL.print_ticket }}\\\" type=\\\"default\\\">\\r\\n          </dx-button>\\r\\n\\r\\n          <dx-menu [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\"\\r\\n            (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass=\\\"button-dropdown-extend\\\">\\r\\n          </dx-menu>\\r\\n          <i [ngClass]=\\\"_translate.ICONS.setting\\\" (click)=\\\"settingColumn()\\\" class=\\\"icons-setting\\\" aria-hidden=\\\"true\\\"\\r\\n            ngbTooltip=\\\"This is a tooltip\\\"></i>\\r\\n          <dx-tooltip target=\\\".icons-setting\\\" showEvent=\\\"dxhoverstart\\\" hideEvent=\\\"dxhoverend\\\">\\r\\n            <span *dxTemplate=\\\"let data of 'content'\\\">\\r\\n              <span>Cấu hình ẩn hiển cột thông tin</span>\\r\\n            </span>\\r\\n          </dx-tooltip>\\r\\n          <!-- <img [src]=\\\"_translate.ICONS.setting\\\" (click)=\\\"settingColumn()\\\" class=\\\"icons-setting\\\" alt=\\\"\\\"\\r\\n                        srcset=\\\"\\\"> -->\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainerVat\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n  [showRowLines]=\\\"true\\\" [showBorders]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n  [columnAutoWidth]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [width]=\\\"'100%'\\\" [wordWrapEnabled]=\\\"true\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\">\\r\\n  <!-- <dxo-selection selectAllMode=\\\"{{pageSelect}}\\\" mode=\\\"multiple\\\">\\r\\n    </dxo-selection> -->\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"multiple\\\"></dxo-sorting>\\r\\n  <dxo-selection mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <dxo-filter-row [visible]=\\\"true\\\" showAllText=\\\"{{ _translate.CONTROLL.COMBO.all }}\\\"></dxo-filter-row>\\r\\n\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"multiple\\\"></dxo-sorting>\\r\\n  <dxo-selection mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row>\\r\\n\\r\\n  <!-- Số vé -->\\r\\n  <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\" *ngIf=\\\"showColumn('ticket_number')\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.ticket_number' | translate }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.so_hoa_don }}\\\"\\r\\n    alignment=\\\"center\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"1\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <!-- Mẫu vé -->\\r\\n  <dxi-column cellTemplate=\\\"templateCode\\\" dataField=\\\"template_code_temp\\\" [filterOperations]=\\\"['contains']\\\"\\r\\n    [allowSorting]=\\\"false\\\" [calculateFilterExpression]=\\\"calculateFilterTemplate\\\" *ngIf=\\\"showColumn('template_ticket')\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.template_ticket' | translate }}, {{\\r\\n      'GRID.INVOICE.invoice_series' | translate\\r\\n    }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.mau_so_ky_hieu }}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <!-- Ngày xuất vé -->\\r\\n  <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"{{ 'CONTROLL.LABEL.ticket_date' | translate }}\\\"\\r\\n    *ngIf=\\\"showColumn('ticket_date')\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ngay_hoa_don }}\\\"\\r\\n    [editorOptions]=\\\"{ useMaskBehavior: true }\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"0\\\"\\r\\n    dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <!-- Mã số thuế -->\\r\\n  <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n    *ngIf=\\\"showColumn('buyer_tax_code')\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_so_thue }}\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <!-- Tên khách hàng -->\\r\\n  <dxi-column cellTemplate=\\\"customerName\\\" [filterOperations]=\\\"['contains']\\\"\\r\\n    [calculateFilterExpression]=\\\"calculateFilterExpression\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\"\\r\\n    alignment=\\\"left\\\" *ngIf=\\\"showColumn('customer_name')\\\" minWidth=\\\"200\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <!-- Tên hàng hoá dịch vụ -->\\r\\n  <!-- <dxi-column cellTemplate=\\\"productName\\\" caption=\\\"{{ 'MENU.name_of_goods_and_service' | translate }}\\\" alignment=\\\"left\\\"\\r\\n        minWidth=\\\"200\\\" *ngIf=\\\"showColumn('name_of_goods_and_service')\\\">\\r\\n    </dxi-column> -->\\r\\n\\r\\n  <!-- Thành tiền -->\\r\\n  <dxi-column dataField=\\\"amount_string\\\" caption=\\\"{{ 'GRID.INVOICE_DETAILS.amount' | translate }}\\\" alignment=\\\"right\\\"\\r\\n    minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\" *ngIf=\\\"showColumn('amount')\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tiền thuế -->\\r\\n  <dxi-column dataField=\\\"total_amount_vat_string\\\" caption=\\\"{{ 'GRID.INVOICE_DETAILS.amount_vat' | translate }}\\\"\\r\\n    alignment=\\\"right\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\" *ngIf=\\\"showColumn('amount_vat')\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tổng tiền -->\\r\\n  <dxi-column dataField=\\\"total_payment_string\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\"\\r\\n    alignment=\\\"right\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tong_tien }}\\\"\\r\\n    *ngIf=\\\"showColumn('total_payment')\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Trạng thái gửi CQT -->\\r\\n  <dxi-column cellTemplate=\\\"statusSendTax\\\" dataField=\\\"send_department_status\\\" caption=\\\"Trạng thái gửi CQT\\\"\\r\\n    minWidth=\\\"{{ _translate.GRID_WIDTH.trang_thai_gui_mail }}\\\" *ngIf=\\\"showColumn('status_send_cqt')\\\" alignment=\\\"center\\\">\\r\\n    <dxo-lookup [dataSource]=\\\"trangThaiGuiCQTStatus\\\" valueExpr=\\\"code\\\" [displayExpr]=\\\"displayFunction\\\"></dxo-lookup>\\r\\n  </dxi-column>\\r\\n  <!-- Tình trạng xử lý -->\\r\\n  <dxi-column dataField=\\\"adjustment_type\\\" cellTemplate=\\\"statusInvoice\\\"\\r\\n    caption=\\\"{{ 'CONTROLL.LABEL.processing_status' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\" alignment=\\\"center\\\" *ngIf=\\\"showColumn('status_process')\\\"\\r\\n    [allowFiltering]=\\\"false\\\">\\r\\n    <!-- <dxo-lookup [dataSource]=\\\"dsTinhTrangXuLy\\\" valueExpr=\\\"code\\\" displayExpr=\\\"name\\\"></dxo-lookup> -->\\r\\n  </dxi-column>\\r\\n  <!-- Người xuất vé -->\\r\\n  <dxi-column [calculateDisplayValue]=\\\"calculateDisplayName\\\" [allowFiltering]=\\\"false\\\"\\r\\n    caption=\\\"{{ 'CONTROLL.LABEL.userTicket' | translate }}\\\" alignment=\\\"left\\\" minWidth=\\\"100\\\"\\r\\n    *ngIf=\\\"showColumn('userTicket')\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Email, trạng thái hóa đơn -->\\r\\n  <dxi-column cellTemplate=\\\"actionEmail\\\" caption=\\\"{{ 'GRID.INVOICE.send_email_status' | translate }}\\\"\\r\\n    minWidth=\\\"{{ _translate.GRID_WIDTH.trang_thai_gui_mail }}\\\" alignment=\\\"center\\\"\\r\\n    *ngIf=\\\"showColumn('send_email_status')\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Chức năng -->\\r\\n  <dxi-column cellTemplate=\\\"actionIcon\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.hanh_dong }}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n\\r\\n  <!-- template -->\\r\\n  <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n    <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number\\r\\n      }}<span *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p>{{ d.data.template_code }}</p>\\r\\n    <p>{{ d.data.invoice_series }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'productName'\\\">\\r\\n    <p>{{ getProductName(d.data) }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n    <p *ngIf=\\\"d.data.status != 'GIU_SO'\\\">\\r\\n      {{ d.data.customer_name || d.data.buyer_name }}\\r\\n    </p>\\r\\n    <p *ngIf=\\\"d.data.status == 'GIU_SO'\\\">\\r\\n      {{\\r\\n      d.data.customer_name ||\\r\\n      d.data.buyer_name ||\\r\\n      _translate.GRID.INVOICE.invoice_wait_for_sign\\r\\n      }}\\r\\n    </p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    <a *ngIf=\\\"\\r\\n        d.data.send_department_status == 'DA_GUI_CQT' &&\\r\\n        d.data.is_invoice_with_code &&\\r\\n        d.data.xml_type == '3'\\r\\n      \\\" href=\\\"javascript:void(0)\\\">Đã gửi để cấp mã</a>\\r\\n    <a *ngIf=\\\"\\r\\n        d.data.send_department_status == 'DA_CAP' &&\\r\\n        d.data.is_invoice_with_code &&\\r\\n        d.data.xml_type == '3'\\r\\n      \\\" href=\\\"javascript:void(0)\\\">Đã cấp mã</a>\\r\\n    <a *ngIf=\\\"\\r\\n        d.data.send_department_status == 'KHONG_DU_DK_CAP_MA' &&\\r\\n        d.data.is_invoice_with_code &&\\r\\n        d.data.xml_type == '3'\\r\\n      \\\" href=\\\"javascript:void(0)\\\" style=\\\"color: red\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">Không đủ ĐK cấp mã</a>\\r\\n\\r\\n    <a *ngIf=\\\"\\r\\n        d.data.send_department_status == 'CHUA_GUI_CQT' &&\\r\\n        !d.data.is_invoice_with_code &&\\r\\n        d.data.xml_type == '3'\\r\\n      \\\" href=\\\"javascript:void(0)\\\">Chưa gửi CQT</a>\\r\\n    <a *ngIf=\\\"\\r\\n        d.data.send_department_status == 'DA_GUI_CQT' &&\\r\\n        !d.data.is_invoice_with_code &&\\r\\n        d.data.xml_type == '3'\\r\\n      \\\" href=\\\"javascript:void(0)\\\">Đã gửi CQT</a>\\r\\n    <a *ngIf=\\\"\\r\\n        d.data.send_department_status == 'DA_TIEP_NHAN' &&\\r\\n        !d.data.is_invoice_with_code &&\\r\\n        d.data.xml_type == '3'\\r\\n      \\\" href=\\\"javascript:void(0)\\\">CQT đã tiếp nhận</a>\\r\\n    <a *ngIf=\\\"\\r\\n        d.data.send_department_status == 'KHONG_HOP_LE' &&\\r\\n        !d.data.is_invoice_with_code &&\\r\\n        d.data.xml_type == '3'\\r\\n      \\\" href=\\\"javascript:void(0)\\\" style=\\\"color: red\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">CQT kiểm tra không hợp lệ\\r\\n    </a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'actionEmail'\\\">\\r\\n    <a *ngIf=\\\"\\r\\n        d.data.send_email_status == 'CHUA_GUI' && d.data.status != 'GIU_SO'\\r\\n      \\\" class=\\\"chua-gui-khach-hang gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{\\r\\n      \\\"GRID.INVOICE.un_sent\\\" | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'GUI_LOI'\\\" style=\\\"color: red\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ \\\"GRID.INVOICE.send_mail_error\\\" | translate }}</a>\\r\\n    <a *ngIf=\\\"\\r\\n        d.data.send_email_status == 'CHUA_GUI' && d.data.status == 'GIU_SO'\\r\\n      \\\" class=\\\"cho-ky\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ \\\"GRID.INVOICE.wait_for_sign\\\" |\\r\\n      translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_GUI'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ \\\"GRID.INVOICE.wait_for_it\\\" | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_NHAN'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ \\\"GRID.INVOICE.received\\\" | translate }}</a>\\r\\n    <p *ngIf=\\\"!d.data.send_email_status\\\" href=\\\"javascript:void(0)\\\">\\r\\n      {{ trangthaihoadon(d.data) }}\\r\\n      <a *ngIf=\\\"\\r\\n          trangthaihoadon(d.data) == 'Lỗi ký HD' ||\\r\\n          trangthaihoadon(d.data) == 'Signed error'\\r\\n        \\\" class=\\\"gach-chan\\\" (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">({{ \\\"GRID.INVOICE.re_sign\\\" |\\r\\n        translate }})</a>\\r\\n    </p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n    <a title=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice }}\\\" class=\\\"xemIcon actionIcon\\\" (click)=\\\"view(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a title=\\\"{{ _translate.CONTROLL.BUTTON.edit }}\\\" class=\\\"suaIcon actionIcon\\\" (click)=\\\"edit(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <a title=\\\"{{ _translate.CONTROLL.BUTTON.delete }}\\\" class=\\\"xoaIcon actionIcon\\\" (click)=\\\"delete(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <div class=\\\"dropdown\\\">\\r\\n      <a title=\\\"{{ _translate.CONTROLL.BUTTON.extend }}\\\" class=\\\"morongIcon actionIcon\\\" (click)=\\\"myFunction(d.data.id)\\\"\\r\\n        href=\\\"javascript:void(0)\\\"></a>\\r\\n      <div [id]=\\\"d.data.id\\\" class=\\\"dropdown-content\\\" [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n        <a (click)=\\\"inChuyenDoi(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ \\\"CONTROLL.BUTTON.print_conversion\\\" | translate }}\\r\\n          <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n        <a (click)=\\\"copy(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ \\\"CONTROLL.BUTTON.copy\\\" | translate }}\\r\\n          <i [class]=\\\"_translate.ICONS.copy\\\"></i></a>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusInvoice'\\\">\\r\\n    <ng-container [ngSwitch]=\\\"d.data.adjustment_type\\\">\\r\\n      <p *ngSwitchCase=\\\"1\\\">{{ \\\"GRID.GENERAL.original_invoice\\\" | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"2\\\">{{ \\\"GRID.GENERAL.invoice_replaced\\\" | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"3\\\">\\r\\n        {{ \\\"GRID.GENERAL.invoice_replacement\\\" | translate }}\\r\\n      </p>\\r\\n      <p *ngSwitchCase=\\\"4\\\">{{ \\\"GRID.GENERAL.invoice_adjusted\\\" | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"5\\\">\\r\\n        {{ \\\"GRID.GENERAL.adjustment_invoice\\\" | translate }}\\r\\n      </p>\\r\\n      <p *ngSwitchCase=\\\"7\\\">{{ \\\"GRID.GENERAL.invoice_removed\\\" | translate }}</p>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n    <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{ info.column.caption }}</p>\\r\\n  </div>\\r\\n\\r\\n  <dxo-summary>\\r\\n    <dxi-total-item summaryType=\\\"custom\\\" cssClass=\\\"dxi-total-payment-total_payment_string\\\" [customizeText]=\\\"customizeText\\\" showInColumn=\\\"total_payment_string\\\">\\r\\n    </dxi-total-item>\\r\\n  </dxo-summary>\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"configs.system_parameter.number_row_per_page\\\"></dxo-paging>\\r\\n  <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 35, 50, 100]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n    [showInfo]=\\\"true\\\" infoText=\\\"{{ _translate.DXO_PAGER.page }}\\\">>\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n\\r\\n<app-download-pdf></app-download-pdf>\"","module.exports = \".search-section{margin-bottom:15px}.icons-setting{font-size:30px;color:#337ab7;margin-left:8px}.icons-setting:hover{cursor:pointer}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}.chua-gui-khach-hang{color:red}.cho-ky{color:#008b8b}.gach-chan{text-decoration:underline}.search-section{padding-bottom:15px}.button-panel{margin-top:30px}.mainmenubtn{background-color:red;color:white;border:none;cursor:pointer;padding:20px;margin-top:20px}.last-drodown{bottom:30px}.small-grid{position:fixed !important;right:39px !important}::ng-deep #gridContainerVat .dx-cell-focus-disabled{overflow:visible !important}.dropdown{position:relative}.dropdown .dropdown-content{position:absolute;z-index:100}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { Helper, VPreviewInvService, VSelectBoxService, VStringService } from '@core/index';\r\nimport { Library } from '@core/library';\r\nimport { AuthService, SocketService } from '@core/services';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { SendDataForTaxComponent, ViewInvoiceMultipageComponent } from '@shared/components';\r\nimport { DownloadPdfComponent } from '@shared/components/download-pdf/download-pdf.component';\r\nimport { SettingColumnComponent } from '@shared/components/setting-column/setting-column.component';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { Subscription } from 'rxjs';\r\nimport { HistoryInvoiceComponent } from '../history-invoice/history-invoice.component';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { TicketService } from '@modules/ticket/shared/ticket.service';\r\nimport { PreviewTicketComponent } from '@shared/components/preview-ticket/preview-ticket.component';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { SendEmailTicketComponent } from '../sendEmail/send-email-ticket/send-email-ticket.component';\r\nimport * as _ from  'lodash';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\n\r\n\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @ViewChild(DownloadPdfComponent) downloadPdf: DownloadPdfComponent;\r\n  _language: string;\r\n  _translate: any;\r\n  selectedRows: Array<any> = [];\r\n  dataSource: any;\r\n  extras = [];\r\n  configs: any = {};\r\n  trangThaiGuiCQTStatus = [];\r\n  footerSum: any = {};\r\n  paramSearch: any;\r\n  selectedItems: Array<any> = [];\r\n  clickCurent = '';\r\n  ioSignature: Subscription;\r\n  checkSubmit: any;\r\n  dataInfor: any;\r\n  infoDangKy: any;\r\n  bsModalRef: BsModalRef;\r\n  arrColumn = [];\r\n  listUser = [];\r\n  dsTinhTrangXuLy = [];\r\n  objStatusBtn = {}\r\n\r\n\r\n  constructor(\r\n    public translate: TranslateService,\r\n    private authService: AuthService,\r\n    private vatService: VatService,\r\n    private spinner: NgxSpinnerService,\r\n    private socketService: SocketService,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private configsService: ConfigsService,\r\n    private route: ActivatedRoute,\r\n    private ticketService: TicketService,\r\n    private templateService: TemplateService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    this._language = this.authService.getLanguage();\r\n    translate.use(this._language);\r\n\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.extend,\r\n      items: [\r\n        // {\r\n        //   id: 'SUA',\r\n        //   name: this._translate.CONTROLL.BUTTON.edit,\r\n        //   icon: this._translate.ICONS.edit\r\n        // },\r\n        {\r\n          id: 'XOA',\r\n          name: this._translate.CONTROLL.BUTTON.delete,\r\n          icon: this._translate.ICONS.delete\r\n        },\r\n        {\r\n          id: 'GUI_EMAIL',\r\n          name: this._translate.CONTROLL.LABEL.send_email,\r\n          icon: this._translate.ICONS.send_email\r\n        },\r\n        // {\r\n        //   id: 'TAI_HD_PDF',\r\n        //   name: this._translate.CONTROLL.BUTTON.tai_ve_pdf,\r\n        //   icon: this._translate.ICONS.download\r\n        // },\r\n        {\r\n          id: \"TAI_HD_XML\",\r\n          name: this._translate.CONTROLL.BUTTON.tai_ve_xml,\r\n          icon: this._translate.ICONS.xml\r\n        },\r\n        // {\r\n        //   id: 'INCHUYENDOI',\r\n        //   name: this._translate.CONTROLL.BUTTON.print_conversion,\r\n        //   icon: this._translate.ICONS.print\r\n        // },\r\n\r\n      ]\r\n    }];\r\n    this.loadList();\r\n  }\r\n\r\n\r\n  settingColumn() {\r\n    const initialState = {\r\n      // isVisibleGhiVaThemMoi: false\r\n      arrColumn: this.arrColumn\r\n    };\r\n    this.bsModalRef = this.modalService.show(SettingColumnComponent, {\r\n      class: 'modal-lg full-modal',\r\n      initialState,\r\n      backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n\r\n    const submodal = this.modalService.onHide.subscribe(() => {\r\n      this.configsService.getAll().subscribe((res) => {\r\n        let configs = res.data.configs;\r\n        const con = configs.find(item => item.name == 'config_column_ticket_invoice')\r\n        if (con && con.id) {\r\n          let data = {\r\n            config: {\r\n              value: JSON.stringify(this.arrColumn)\r\n            }\r\n          }\r\n          this.configsService.update(con.id, data).subscribe((response: any) => {\r\n            if (response.status == \"success\") {\r\n              this.configsService.getAll().subscribe((res) => {\r\n                if (res.data && res.data.configs)\r\n                  this.authService.setConfigs(res.data.configs);\r\n                this.configs = this.authService.getConfigs();\r\n              });\r\n            } else {\r\n            }\r\n          }, err => { }, () => {\r\n          });\r\n        }\r\n\r\n      })\r\n      submodal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  showColumn(code) {\r\n    let item = this.arrColumn.find(i => i.code === code);\r\n    if (item)\r\n      return item.show\r\n    return false\r\n  }\r\n\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'SUA') {\r\n      this.edit(null);\r\n    } else if (e.itemData.id === 'XOA') {\r\n      this.delete(null);\r\n    } else if (e.itemData.id === 'GUI_EMAIL') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id == \"TAI_HD_PDF\") {\r\n      this.taiHDPdf();\r\n    } else if (e.itemData.id == \"TAI_HD_XML\") {\r\n      this.taiHDXml();\r\n    } else if (e.itemData.id === 'INCHUYENDOI') {\r\n      this.inChuyenDoi(null);\r\n    }\r\n  }\r\n\r\n  /* Kết nối đến socket  */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_viewInvoice') {\r\n        if (data.Status == \"success\")\r\n          this.viewInvoice(data.Data.Content, data.Data.typeView, data.Data.hinhthucxuat, data.Data.invoice_date);\r\n        else if (data.Status == \"error\") {\r\n          const popUp = window.open('about:blank', 'name', 'width=200, height=100');\r\n          if (popUp == null || typeof (popUp) == 'undefined') {\r\n          }\r\n          else\r\n            popUp.close();\r\n          Library.notify(data.Description, 'error');\r\n          this.spinner.hide();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  guibenmua(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'DA_XUAT') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      if (this.selectedItems.filter(p => p.status === 'DA_XUAT').length === 0) {\r\n        check = false;\r\n      }\r\n    }\r\n\r\n    if (check && (this.selectedItems.length || data)) {\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedItems.filter(p => p.status === 'DA_XUAT').map(p => p.id);\r\n      }\r\n      this.vatService.layCacHoaDonKySoHangLoat(ids, '').subscribe((rs: any) => {\r\n        if (rs[0].status === 'success') {\r\n          const initialState = {\r\n            invoiceList: rs[0].data.invoices,\r\n            configs: rs[1].data.configs\r\n          };\r\n          let modalSendEmail: any = this.modalService.show(SendEmailTicketComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            // if (modalSendEmail.content.successSaveItem) {\r\n            this.selectedItems = [];\r\n            this.selectedRows = [];\r\n            this.loadList(this.paramSearch);\r\n            subModal.unsubscribe();\r\n            // }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_invoice_selected, 'error');\r\n    }\r\n  }\r\n\r\n  /* Tải file xml vé*/\r\n  taiHDXml() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = [];\r\n        ids = _lst.map(e => e.id);\r\n        Library.showloading();\r\n        let sub = this.vatService.xuatHDXml(ids).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n          } else {\r\n            Library.notify(rs.message, \"error\");\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n\r\n  // Tải file vé pdf\r\n  taiHDPdf() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = _lst.map(e => e.id);\r\n        this.downloadPdf.downloadPdf(ids, 'invoices', 'invoice', false);\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n\r\n  loadList(params?) {\r\n    let params_temp = params ? params : ''\r\n    this.dataSource = {};\r\n    const _lst = this.vatService.getAllTicket(params_temp);\r\n    this.dataSource.store = _lst;\r\n  }\r\n\r\n  customizeText = (url) => {\r\n    this.invoiceService.handleTotalGrid(url.value, this.objStatusBtn, this.dataGrid);    \r\n    return '';\r\n  }\r\n\r\n  getProductName(data) {\r\n    if (data.invoice_products && data.invoice_products.length > 0) {\r\n      return data.invoice_products[0].product_name;\r\n    }\r\n    return '';\r\n  }\r\n\r\n  calculateFilterTemplate(filterValue, selectedFilterOperation) {\r\n    selectedFilterOperation = \"contains\";\r\n    return [[\"template_code\", selectedFilterOperation || '=', filterValue], 'or', [\"invoice_series\", selectedFilterOperation || '=', filterValue]];\r\n  }\r\n\r\n\r\n  viewInvoice(content, typeView, hinhthucxuat, invoice_date) {\r\n    if (typeView == \"XEM_TRUOC_KHI_XUAT\") {\r\n      const pdf_file = content;\r\n      const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n      this.checkSubmit = window.open(objectUrl, 'name', `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n      this.checkSubmit.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      this.checkSubmit.blur();\r\n\r\n      const timer = setInterval(() => {\r\n        if (this.checkSubmit.closed) {\r\n          clearInterval(timer);\r\n          const isCheck = Helper.getCookie('AK_SS_I');\r\n          this.checkSubmit = undefined;\r\n          if (isCheck === 'CHECKED') {\r\n            this.setUrlNavigate();\r\n            document.cookie = 'AK_SS_I=; path=/';\r\n            const status = 'HUY';\r\n            this.router.navigate(['/system/handle-report/', this.dataInfor.id, status]);\r\n          } else if (isCheck === 'CHECKED2') {\r\n            this.setUrlNavigate();\r\n            document.cookie = 'AK_SS_I=; path=/';\r\n            const status = 'THAY_THE';\r\n            this.router.navigate(['/system/handle-report/', this.dataInfor.id, status]);\r\n          } else if (isCheck === 'CHECKED3') {\r\n            this.setUrlNavigate();\r\n            document.cookie = 'AK_SS_I=; path=/';\r\n            const status = 'DIEU_CHINH';\r\n            this.router.navigate(['/system/handle-report/', this.dataInfor.id, status]);\r\n          } else if (isCheck === 'CHECKED4') {\r\n            this.setUrlNavigate();\r\n            window.open('http://help.ihoadon.vn/huongdanv3/xulyhoadon/cactruonghop/1/', '_blank');\r\n            document.cookie = 'AK_SS_I=; path=/';\r\n          }\r\n        }\r\n      }, 500);\r\n\r\n      const myPara = '<div class=\"design-button\">' +\r\n        '<div style=\"width: 50%; display: inline-block; float: left\">' +\r\n        '<div class=\"dropdown\">' +\r\n        '<button type=\"button\" class=\"dropbtn button-content-style\">' +\r\n        '<a href=\"javascript:void(0)\" class=\"text-button\">Xử lý hóa đơn</a>' +\r\n        '</button>' +\r\n        '<div class=\"dropdown-content\" style=\"left:0;\">' +\r\n        '<a href=\"javascript:void(0)\" onclick=\"setConfirmInvoice()\">Hủy bỏ hóa đơn</a>' +\r\n        '<a href=\"javascript:void(0)\" onclick=\"setConfirmInvoice2()\">Thay thế hóa đơn</a>' +\r\n        '<a href=\"javascript:void(0)\" onclick=\"setConfirmInvoice3()\">Điều chỉnh hóa đơn</a>' +\r\n        '<a href=\"javascript:void(0)\" onclick=\"setConfirmInvoice4()\">Hướng dẫn xử lý</a>' +\r\n        '</div>' +\r\n        '</div>' +\r\n        '</div>' +\r\n        '<div style=\"width: 50%; display: inline-block; float:rigth;\">' +\r\n        '<div style=\"float: right\">' +\r\n        '</div>' +\r\n        '</div>' +\r\n        '</div>';\r\n      const myPara1 = '<div class=\"design-button\">' +\r\n        '<div style=\"width: 50%; display: inline-block; float: left\">' +\r\n        '<div class=\"dropdown\">' +\r\n        '<button type=\"button\" class=\"dropbtn button-content-style\">' +\r\n        '<a href=\"javascript:void(0)\" class=\"text-button\">Xử lý hóa đơn</a>' +\r\n        '</button>' +\r\n        '<div class=\"dropdown-content\" style=\"left:0;\">' +\r\n        '<a href=\"javascript:void(0)\" onclick=\"setConfirmInvoice2()\">Thay thế hóa đơn</a>' +\r\n        '<a href=\"javascript:void(0)\" onclick=\"setConfirmInvoice3()\">Ðiều chỉnh hóa đơn</a>' +\r\n        '<a href=\"javascript:void(0)\" onclick=\"setConfirmInvoice4()\">Hướng dẫn xử lý</a>' +\r\n        '</div>' +\r\n        '</div>' +\r\n        '</div>' +\r\n        '<div style=\"width: 50%; display: inline-block; float:right;\">' +\r\n        '<div style=\"float: right\">' +\r\n        '</div>' +\r\n        '</div>' +\r\n        '</div>';\r\n      this.checkSubmit.document.write(`\r\n              <style type=\"text/css\" >\r\n                    .text-button{\r\n                        color: #fff;\r\n                        text-decoration: none;\r\n                    }\r\n                   .design-button{\r\n                        position: fixed;\r\n                        bottom: 0;\r\n                        left: 0;\r\n                        right: 0;\r\n                        padding: 9px 25px;\r\n                        background: white;\r\n                   }\r\n                   .button-content-style{\r\n                      background-color: #337ab7;\r\n                      color: #fff;\r\n                      border: 1px solid #2d6da3;\r\n                      margin: 0 10px;\r\n                      padding: 5px 10px 5px;\r\n                   }\r\n                   .dropdown {\r\n                    position: relative;\r\n                    display: inline-block;\r\n                   }\r\n                   .dropdown-content {\r\n                      display: none;\r\n                      position: absolute;\r\n                      bottom: 28px;\r\n                      background-color: #f9f9f9;\r\n                      min-width: 160px;\r\n                      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\r\n                      z-index: 1;\r\n                    }\r\n                   .dropdown-content a {\r\n                      color: black;\r\n                      padding: 12px 16px;\r\n                      text-decoration: none;\r\n                      display: block;\r\n                   }\r\n                   .dropdown-content a:hover {background-color: #b5acac;}\r\n                   .dropdown:hover .dropdown-content {\r\n                      display: block;\r\n                    }\r\n                    .dropdown:hover .dropbtn {\r\n                      background-color: #2d6da3;\r\n                    }\r\n              </style>\r\n           <div>\r\n                <iframe width=\"100%\" height=\"94%\" style=\"padding-bottom: 29px\" src=\"${objectUrl}\"></iframe>\r\n           </div>\r\n            <script type=\"text/javascript\">\r\n              function setConfirmInvoice() {\r\n                document.cookie = \"AK_SS_I=CHECKED; path=/\";\r\n                window.close();\r\n              }\r\n              function setConfirmInvoice2() {\r\n                document.cookie = \"AK_SS_I=CHECKED2; path=/\";\r\n                window.close();\r\n              }\r\n              function setConfirmInvoice3() {\r\n                document.cookie = \"AK_SS_I=CHECKED3; path=/\";\r\n                window.close();\r\n              }\r\n              function setConfirmInvoice4() {\r\n                document.cookie = \"AK_SS_I=CHECKED4; path=/\";\r\n                window.close();\r\n              }\r\n              function closeWin(){\r\n                window.close();\r\n              }\r\n            </script>\r\n        `);\r\n\r\n      this.checkSubmit.resizeTo(screen.availWidth, screen.availHeight);\r\n      this.checkSubmit.focus();\r\n      this.spinner.hide();\r\n    }\r\n    else if (typeView == \"XEM_TRUOC\") {\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      const pdf_file = content;\r\n      const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n      const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n      win.resizeTo(screen.availWidth, screen.availHeight);\r\n      win.focus();\r\n      this.spinner.hide();\r\n    }\r\n  }\r\n\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.route.data.subscribe((data: any) => {\r\n      this.listUser = data.init.data.users ? data.init.data.users : [];\r\n    })\r\n    this.vatService.isCopy = false;\r\n    this.configs = this.authService.getConfigs();\r\n    this.ticketService.configs = this.configs;\r\n    if (this.configs.config_column_ticket_invoice) {\r\n      this.arrColumn = this.configs.config_column_ticket_invoice;\r\n    } else {\r\n      this.arrColumn = [\r\n        {\r\n          name: this._translate.GRID.INVOICE.ticket_number,\r\n          code: 'ticket_number',\r\n          disable: true,\r\n          show: true\r\n        },\r\n        {\r\n          name: this._translate.GRID.INVOICE.template_ticket,\r\n          code: 'template_ticket',\r\n          disable: true,\r\n          show: true\r\n        },\r\n        {\r\n          name: this._translate.CONTROLL.LABEL.ticket_date,\r\n          code: 'ticket_date',\r\n          disable: true,\r\n          show: true\r\n        },\r\n        {\r\n          name: this._translate.GRID.INVOICE.buyer_tax_code,\r\n          code: 'buyer_tax_code',\r\n          disable: false,\r\n          show: false\r\n        },\r\n        {\r\n          name: this._translate.GRID.INVOICE.customer_name,\r\n          code: 'customer_name',\r\n          disable: false,\r\n          show: false\r\n        },\r\n        // {\r\n        //   name: this._translate.MENU.name_of_goods_and_service,\r\n        //   code: 'name_of_goods_and_service',\r\n        //   disable: false,\r\n        //   show: true\r\n        // },\r\n        {\r\n          name: this._translate.GRID.INVOICE_DETAILS.amount,\r\n          code: 'amount',\r\n          disable: false,\r\n          show: false\r\n        },\r\n        {\r\n          name: this._translate.GRID.INVOICE_DETAILS.amount_vat,\r\n          code: 'amount_vat',\r\n          disable: false,\r\n          show: false\r\n        },\r\n        {\r\n          name: this._translate.GRID.INVOICE.total_payment,\r\n          code: 'total_payment',\r\n          disable: false,\r\n          show: true\r\n        },\r\n        {\r\n          name: this._translate.CONTROLL.LABEL.status_send_cqt,\r\n          code: 'status_send_cqt',\r\n          disable: true,\r\n          show: true\r\n        },\r\n        {\r\n          name: this._translate.CONTROLL.LABEL.status_process,\r\n          code: 'status_process',\r\n          disable: false,\r\n          show: false\r\n        },\r\n        {\r\n          name: this._translate.CONTROLL.LABEL.userTicket,\r\n          code: 'userTicket',\r\n          disable: false,\r\n          show: false\r\n        },\r\n        {\r\n          name: this._translate.GRID.INVOICE.send_email_status,\r\n          code: 'send_email_status',\r\n          disable: true,\r\n          show: true\r\n        },\r\n      ]\r\n    }\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    this.trangThaiGuiCQTStatus = VSelectBoxService.statusTaxAuthorities(this._translate);\r\n    this.dsTinhTrangXuLy = VSelectBoxService._adjustmentTypes(this._translate);\r\n    this.connectWebsocket();\r\n  }\r\n\r\n  calculateDisplayName = (e) => {\r\n    let user = this.listUser.find(u => u.id == e.user_id)\r\n    if (user)\r\n      return user.name\r\n    return ''\r\n\r\n  }\r\n\r\n  async inhoadon() {\r\n    let data = _.cloneDeep(this.selectedItems);\r\n    if (this.checkInHoaDon()) {\r\n      this.inTungHoaDon()\r\n    }\r\n    else {\r\n      this.selectedItems = data;\r\n      Library.notify(this._translate.NOTIFY.not_print_ticket, 'error');\r\n    }\r\n  }\r\n\r\n  async inTungHoaDon() {\r\n    Library.showloading();\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    // Sửa is_multi_product nếu sau này mở rộng ra nhiều hh/1 vé\r\n    let invoiceTemplate = null;\r\n    if (this.selectedItems.length > 0) {\r\n      let invoiceTicket = this.selectedItems.pop();\r\n      let is_multi_product = false;\r\n      this.templateService.show(invoiceTicket.template_id).toPromise().then(rs => {\r\n        if (rs.status == \"success\") {\r\n          invoiceTemplate = rs.data.template;\r\n          const sub = this.vatService.view(invoiceTicket.id, true).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              if (rs.data.data.item && rs.data.data.item.length > 0) {\r\n                let invoice = rs.data.data.item[0];\r\n                const rawHtml = this.ticketService.createFormTypeBase64(invoice, invoiceTemplate, is_multi_product, { inVe: true });\r\n                let html = Base64.encode(rawHtml);\r\n                this.socketService.inFileHtml(() => this.connectWebsocket(), html);\r\n                setTimeout(() => {\r\n                  Library.hideloading();\r\n                }, 300);\r\n              }\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          },\r\n            (err) => {\r\n              Library.notify(err.message, 'error');\r\n            },\r\n            () => {\r\n              Library.hideloading();\r\n              this.inTungHoaDon();\r\n            }\r\n          )\r\n        }\r\n      }\r\n      ).catch((err) => {\r\n        this.inTungHoaDon();\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  checkInHoaDon() {\r\n    let statusCheck = false;\r\n    let data = this.selectedItems.filter(item => item.send_department_status);\r\n    if (data.length > 0) {\r\n      if (this.infoDangKy.is_invoice_with_code) {\r\n        data = data.filter(item => item.send_department_status == 'DA_CAP');\r\n        if (data.length > 0)\r\n          statusCheck = true;\r\n      }\r\n      else if (this.infoDangKy.is_invoice_no_code) {\r\n        data = data.filter(item => ['CHUA_GUI_CQT', 'DA_GUI_CQT', 'DA_TIEP_NHAN'].includes(item.send_department_status));\r\n        if (data.length > 0)\r\n          statusCheck = true;\r\n      }\r\n    }\r\n    this.selectedItems = data;\r\n    return statusCheck;\r\n  }\r\n\r\n\r\n  LydoKTiepNhan(data) {\r\n    let lstErr = JSON.parse(data.error_content_invoice);\r\n    const initialState = {\r\n      lstErr: lstErr,\r\n      notifyType: \"THONG_BAO_LOI_CQT\"\r\n    };\r\n    this.modalService.show(SendDataForTaxComponent, {\r\n      backdrop: 'static',\r\n      keyboard: true,\r\n      class: 'modal-lg modal-margin-width',\r\n      initialState\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType == 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.invoice_number) {\r\n            if (e.data.send_department_status == \"DA_GUI_CQT\")\r\n              e.rowElement.style.color = '#008B8B';\r\n            else if (e.data.send_department_status == \"DA_CAP\")\r\n              e.rowElement.style.color = 'black';\r\n            else if (e.data.send_department_status == \"DA_TIEP_NHAN\")\r\n              e.rowElement.style.color = 'black';\r\n            else\r\n              e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type === '2' || e.data.adjustment_type === '7' || e.data.adjustment_type === '6') {\r\n        let eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadList(e);\r\n  }\r\n\r\n  async lapHoaDon() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    this.router.navigate(['system/ticket-invoice/create']);\r\n  }\r\n\r\n\r\n  sendInvoice(id) {\r\n    Library.showloading();\r\n    let sub = this.vatService.showToSendInvoice(id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n        };\r\n        this.bsModalRef = this.modalService.show(HistoryInvoiceComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  view(data, inChuyenDoi = false) {\r\n    Library.showloading();\r\n    if (data.id) {\r\n      const temp = this.templateService.show(data.template_id).subscribe(rbs => {\r\n        if (rbs.status === 'success') {\r\n          let invoiceTemplate = rbs.data.template;\r\n          if (inChuyenDoi) {\r\n            const sub = this.vatService.inChuyenDoiInvoiceImport([data.id], false, { view_html: 1 }).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                this.showModalHtml(rs, invoiceTemplate, inChuyenDoi)\r\n              }\r\n            },\r\n              (err) => { },\r\n              () => {\r\n                Library.hideloading();\r\n                sub.unsubscribe();\r\n              }\r\n            )\r\n          } else {\r\n            const sub = this.vatService.view(data.id, true).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                this.showModalHtml(rs, invoiceTemplate, inChuyenDoi)\r\n              }\r\n            },\r\n              (err) => { },\r\n              () => {\r\n                Library.hideloading();\r\n                sub.unsubscribe();\r\n              }\r\n            )\r\n          }\r\n        }\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  showModalHtml(rs, invoiceTemplate, inChuyenDoi) {\r\n    if (rs.data.data.item && rs.data.data.item.length > 0) {\r\n      let invoice = rs.data.data.item[0];\r\n      // Sửa is_multi_product nếu sau này mở rộng ra nhiều hh/1 vé\r\n      let is_multi_product = false;\r\n      const rawHtml = this.ticketService.createFormTypeBase64(invoice, invoiceTemplate, is_multi_product, { inChuyenDoi });\r\n      const initialState = {\r\n        dataPreview: rawHtml + '</html>',\r\n        isPreview: true,\r\n        content_invoice: {\r\n          'invoice_date': this.ticketService.invoice_date\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(PreviewTicketComponent, {\r\n        class: 'modal-sm full-modal-ticket1',\r\n        initialState,\r\n        backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      let submodal = this.modalService.onHide.subscribe(\r\n        () => {\r\n          submodal.unsubscribe();\r\n        },\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  async copy(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    const row = data ? data : this.selectedItems[0];\r\n    let sub = this.vatService.show(row.id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        if (rs.data.invoice) {\r\n          rs.data.invoice.id = null;\r\n          rs.data.invoice.origin_id = null;\r\n          rs.data.invoice.adjustment_type = '1';\r\n          rs.data.invoice.adjustment_object = null;\r\n          rs.data.invoice.adjustment_form = null;\r\n          rs.data.invoice.refuse_reason = null;\r\n          rs.data.invoice.destroy_reason = null;\r\n          rs.data.invoice.destroy_date = null;\r\n          rs.data.invoice.invoice_number = null;\r\n          rs.data.invoice.invoice_date = null;\r\n          rs.data.invoice.approve_status = null;\r\n          rs.data.invoice.status = rs.data.invoice.status == 'DA_XUAT' ? 'GHI_TAM' : rs.data.invoice.status;\r\n          rs.data.invoice.updated_at = null;\r\n          rs.data.invoice.user_id = null;\r\n          rs.data.invoice.van_id = null;\r\n          rs.data.invoice.invoice_order = null;\r\n          rs.data.invoice.status_order = null;\r\n          rs.data.invoice.doc_relate_date = null;\r\n          rs.data.invoice.doc_relate_symbol = null;\r\n          rs.data.invoice.note_view_on_invoice = null;\r\n          rs.data.invoice.send_department_status = null;\r\n          rs.data.invoice.time_print_conversion = null;\r\n          // rs.data.invoice.extend_json_invoice = null;\r\n          rs.data.invoice.is_outside_process = false;\r\n          rs.data.invoice.other_id = null;\r\n          rs.data.invoice.verify_code = null;\r\n          if (rs.data.invoice.invoice_options && rs.data.invoice.invoice_options.length > 0) {\r\n            rs.data.invoice.invoice_options.forEach(item => {\r\n              delete item['id'];\r\n              delete item['invoice_id'];\r\n            });\r\n          }\r\n          this.vatService.data = rs.data.invoice;\r\n          this.vatService.isCopy = true;\r\n        }\r\n        this.router.navigate(['system/ticket-invoice/create']);\r\n      }\r\n    });\r\n  }\r\n\r\n  inChuyenDoi(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (data.status == 'DA_XUAT') {\r\n      this.view(data, true);\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.not_print_convert, 'error');\r\n    }\r\n  }\r\n\r\n  /* Xử lý sự kiện click phần mở rộng của từng hóa đơn*/\r\n  myFunction(id) {\r\n    if (this.clickCurent !== '' && this.clickCurent !== id) {\r\n      let valueCurrent = document.getElementById(this.clickCurent);\r\n      if (!valueCurrent)\r\n        document.getElementById(id).classList.toggle('show');\r\n      else {\r\n        document.getElementById(this.clickCurent).classList.remove('show');\r\n        document.getElementById(id).classList.toggle('show');\r\n      }\r\n    }\r\n    else\r\n      document.getElementById(id).classList.toggle('show');\r\n    this.clickCurent = id;\r\n\r\n  }\r\n\r\n  xemhoadonPDF(rs) {\r\n    //Xem hóa đơn từ server\r\n    if (this.configs.system_parameter.display_template_from_server) {\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      const pdf_file = rs.data.invoice.pdf_file;\r\n      const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n      const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n      win.resizeTo(screen.availWidth, screen.availHeight);\r\n      win.focus();\r\n      this.spinner.hide();\r\n    }\r\n    else {\r\n      /* Xem hóa đơn từ Client */\r\n      let json_data = rs.data.invoice.json_data;\r\n      let appCode = \"REPX\";\r\n      if (rs.data.invoice.is_html_template)\r\n        appCode = \"HTML\";\r\n      this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC\");\r\n    }\r\n  }\r\n\r\n  // Chọn đối tượng trong grid\r\n  selectionChanged(data: any) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    this.selectedItems = data.selectedRowsData;\r\n  }\r\n\r\n  async delete(data) {\r\n    // Kiểm tra tk kích hoạt các gói cần thiết chưa ?\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.selectedItems.length || data) {\r\n      const status = '';\r\n      let ids = '';\r\n      if (data) {\r\n        ids = data.id;\r\n      } else {\r\n        ids = this.selectedRows.join(',');\r\n      }\r\n      const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          Library.showloading();\r\n          this.vatService.delete(ids).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n              this.loadList(this.paramSearch);\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => {\r\n          }, () => {\r\n            Library.hideloading();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n  async edit(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    let rowData = null;\r\n    if (data) {\r\n      if (VStringService._getValueToString(data.status) == sEnum.statusInv.DaXuat)\r\n        Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n      else {\r\n        if (VStringService._getValueToString(data.status) == sEnum.statusInv.GhiTam && VStringService._getValueToString(data.send_department_status) == 'KHONG_DU_DK_CAP_MA')\r\n          Library.notify(\"Không sửa được hóa đơn không đủ điều kiện cấp mã\", 'error');\r\n        else\r\n          rowData = data;\r\n      }\r\n    }\r\n    else {\r\n      if (this.selectedItems.length > 0) {\r\n        if (this.selectedItems.length == 1)\r\n          rowData = this.selectedItems[0];\r\n        else {\r\n\r\n        }\r\n      }\r\n    }\r\n    if (rowData) {\r\n      this.router.navigate([`/system/ticket-invoice/${VStringService._getValueToString(rowData.id)}`]);\r\n    }\r\n  }\r\n\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.invoice_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  async editNotSelect(row) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (row.status === 'DA_XUAT') {\r\n      Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n    } else {\r\n      this.router.navigate([`/system/ticket-invoice/${row.id}`]);\r\n    }\r\n  }\r\n\r\n  displayFunction = (item) => {\r\n    if (!item) {\r\n      return 'Tất cả';\r\n    }\r\n    return item.name;\r\n  }\r\n\r\n  calculateFilterExpression(filterValue, selectedFilterOperation) {\r\n    selectedFilterOperation = \"contains\";\r\n    return [[\"customer_name_temp\", selectedFilterOperation || '=', filterValue], 'or', [\"buyer_name_temp\", selectedFilterOperation || '=', filterValue]];\r\n  }\r\n\r\n\r\n\r\n  viewDetailInvoice(row) {\r\n    this.router.navigate([`/system/ticket-invoice/${row.id}`]);\r\n  }\r\n}\r\n","module.exports = \"<h1 style=\\\"font-weight: bold; font-size: 16px; text-align: center; padding: 20px 0px;\\\">\\r\\n  {{_translate.MENU.electronic_ticket | uppercase}}</h1>\\r\\n\\r\\n<form>\\r\\n  <div class=\\\"ticket-container\\\">\\r\\n    <!-- Thông tin trên hóa đơn -->\\r\\n    <div class=\\\"row invoice-form\\\">\\r\\n      <div class=\\\"col-md-8\\\">\\r\\n        <dx-form tabIndex=\\\"formLeft\\\" [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n\\r\\n          <!-- Đơn vị tiền tệ -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" [cssClass]=\\\"cssClass.dvtt\\\">\\r\\n            <dxi-item [template]=\\\"'templateCurrency'\\\">\\r\\n              <dxo-label text=\\\"Đơn vị tiền tệ\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Mẫu vé/nhập thông tin bên mua -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n            <dxi-item dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n              [editorOptions]=\\\"{items: select.templates, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.ticket_template }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule *ngIf=\\\"!isGhiTam\\\" type=\\\"required\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.ticket_template }} {{ _translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <dxi-item dataField=\\\"buyer_exten\\\" editorType=\\\"dxCheckBox\\\" cssClass=\\\"buyer_exten max_right\\\"\\r\\n              [editorOptions]=\\\"{ text: _translate.CONTROLL.LABEL.buyer_exten, onValueChanged: onChangeBuyerInfo}\\\">\\r\\n              <dxo-label text=\\\" \\\" [showColon]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n\\r\\n          <!-- Mã số thuế, mã khách hàng -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" [cssClass]=\\\"cssClass.buyerInfo\\\">\\r\\n            <dxi-item [template]=\\\"'templateTaxCode'\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.tax_code}}\\\">\\r\\n              </dxo-label>\\r\\n            </dxi-item>\\r\\n            <dxi-item [template]=\\\"'templateCustomerCode'\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_code}}\\\">\\r\\n              </dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n\\r\\n          <!-- Tên đơn vị -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" [cssClass]=\\\"cssClass.buyerInfo\\\">\\r\\n            <dxi-item dataField=\\\"customer_name\\\" [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_name}}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n\\r\\n          <!-- Họ tên người mua/số đt -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" [cssClass]=\\\"cssClass.buyerInfo\\\">\\r\\n            <dxi-item dataField=\\\"buyer_name\\\" [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.buyer_name }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <dxi-item dataField=\\\"buyer_mobile\\\" cssClass=\\\"max_right\\\" [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.phone }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.phone }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n\\r\\n          <!-- Địa chỉ -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" [cssClass]=\\\"cssClass.buyerInfo\\\">\\r\\n            <dxi-item dataField=\\\"buyer_address\\\" [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.buyer_address }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n\\r\\n          <!-- Trường mở rộng -->\\r\\n          <dxi-item [cssClass]=\\\"cssClass.buyerInfo\\\">\\r\\n            <app-form-extend #formExtend_bm [disableForm]=\\\"ttDaXuatHoaDon\\\" [formData]=\\\"frmData\\\"\\r\\n              [customerTempt]=\\\"customerTempt_bm\\\" [formItems]=\\\"formItems_bm\\\" [is_element_child]=\\\"true\\\"\\r\\n              [typeOptions]=\\\"'invoice_options'\\\"></app-form-extend>\\r\\n          </dxi-item>\\r\\n\\r\\n          <!-- email -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item [label]=\\\"{text: 'Email'}\\\" cssClass=\\\"max_left\\\">\\r\\n              <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n                <div\\r\\n                  class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n                  <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                    <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                    </app-tag-input-email>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n\\r\\n\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" [cssClass]=\\\"cssClass.is_multi_product\\\">\\r\\n            <!-- Tên hàng hoá dịch vụ -->\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item>\\r\\n                <dxo-label text=\\\"{{ _translate.MENU.name_of_goods_and_service }}\\\"></dxo-label>\\r\\n                <div *dxTemplate=\\\"let d of 'templateProductName'\\\">\\r\\n                  <dx-autocomplete valueExpr=\\\"name\\\" placeholder=\\\"Nhập tên hàng hóa, dịch vụ...\\\"\\r\\n                    [dataSource]=\\\"productArray\\\" [(value)]=\\\"frmData.invoice_products[0].product_name\\\"\\r\\n                    (onItemClick)=\\\"onItemClick($event)\\\" (onFocusOut)=\\\"onFocusOut($event)\\\">\\r\\n                    <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                      <span>{{ item.name }}</span>\\r\\n                    </div>\\r\\n                  </dx-autocomplete>\\r\\n                </div>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n            <!-- Trường mở rộng -->\\r\\n            <dxi-item>\\r\\n              <app-form-extend #formExtend_hh [disableForm]=\\\"ttDaXuatHoaDon\\\" [formData]=\\\"frmData\\\"\\r\\n                [customerTempt]=\\\"customerTempt_hh\\\" [formItems]=\\\"formItems_hh\\\" [is_element_child]=\\\"true\\\"\\r\\n                [typeOptions]=\\\"'extension'\\\"></app-form-extend>\\r\\n            </dxi-item>\\r\\n\\r\\n            <!-- Hđ gtgt -->\\r\\n            <!-- Đơn giá/thuế suất -->\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" [cssClass]=\\\"cssClass.isHdGTGT\\\">\\r\\n              <dxi-item dataField=\\\"invoice_products[0].price\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                [editorOptions]=\\\"{onValueChanged: onChangePrice, format: '0,###', useMaskBehavior:true, showClearButton: true}\\\"\\r\\n                cssClass=\\\"format-right\\\">\\r\\n                <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.price }}\\\"></dxo-label>\\r\\n                <dxi-validation-rule *ngIf=\\\"!isGhiTam\\\" type=\\\"required\\\"\\r\\n                  message=\\\"{{ _translate.GRID.INVOICE_DETAILS.price }} {{ _translate.VALIDATION.required }}\\\">\\r\\n                </dxi-validation-rule>\\r\\n              </dxi-item>\\r\\n              <dxi-item dataField=\\\"invoice_products[0].vat\\\" editorType=\\\"dxSelectBox\\\"\\r\\n                [editorOptions]=\\\"{items: select.vats, onValueChanged: onChangeVAT, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n                <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.vat }}\\\"></dxo-label>\\r\\n                <dxi-validation-rule *ngIf=\\\"!isGhiTam\\\" type=\\\"required\\\"\\r\\n                  message=\\\"{{ _translate.GRID.INVOICE_DETAILS.vat }} {{ _translate.VALIDATION.required }}\\\">\\r\\n                </dxi-validation-rule>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n            <!-- Tiền thuế/tổng tiền -->\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" [cssClass]=\\\"cssClass.isHdGTGT\\\">\\r\\n              <dxi-item dataField=\\\"invoice_products[0].amount_vat\\\" cssClass=\\\"amount_vat format-right\\\"\\r\\n                editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: '0,###', showClearButton: true}\\\">\\r\\n                <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.amount_vat }}\\\"></dxo-label>\\r\\n                <!-- <dxi-validation-rule type=\\\"required\\\"\\r\\n                  message=\\\"{{ _translate.GRID.INVOICE_DETAILS.amount_vat }} {{ _translate.VALIDATION.required }}\\\">\\r\\n                </dxi-validation-rule> -->\\r\\n              </dxi-item>\\r\\n              <dxi-item cssClass=\\\"format-right\\\" dataField=\\\"invoice_products[0].amount_after_vat\\\"\\r\\n                editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: '#,###', onValueChanged: changeTotalPayment}\\\">\\r\\n                <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.total_money }}\\\"></dxo-label>\\r\\n                <dxi-validation-rule *ngIf=\\\"!isGhiTam\\\" type=\\\"required\\\"\\r\\n                  message=\\\"{{ _translate.GRID.INVOICE_DETAILS.total_money }} {{ _translate.VALIDATION.required }}\\\">\\r\\n                </dxi-validation-rule>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n\\r\\n            <!-- hđ bán hàng -->\\r\\n            <!-- Đơn giá -->\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" [cssClass]=\\\"cssClass.isHdBH\\\">\\r\\n              <dxi-item dataField=\\\"invoice_products[0].price\\\" cssClass=\\\"format-right\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                [editorOptions]=\\\"{format: '#,###'}\\\">\\r\\n                <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.price }}\\\"></dxo-label>\\r\\n                <dxi-validation-rule *ngIf=\\\"!isGhiTam\\\" type=\\\"required\\\"\\r\\n                  message=\\\"{{ _translate.GRID.INVOICE_DETAILS.price }} {{ _translate.VALIDATION.required }}\\\">\\r\\n                </dxi-validation-rule>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n            <!-- Hóa đơn bán hàng NQ 43 -->\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" [cssClass]=\\\"cssClass.isHdBH\\\">\\r\\n              <dxi-item [template]=\\\"'templateCheckbox43'\\\">\\r\\n                <dxo-label text=\\\" \\\" [showColon]=\\\"false\\\"></dxo-label>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n            <!-- Tỉ lệ % trên doanh thu/Số tiền giảm theo nghị quyết -->\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" [cssClass]=\\\"cssClass.nq43\\\">\\r\\n              <dxi-item [template]=\\\"'templateSalesPercentage'\\\">\\r\\n                <dxo-label\\r\\n                  text=\\\"{{ _translate.CONTROLL.LABEL.sales_percentage }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\"></dxo-label>\\r\\n              </dxi-item>\\r\\n              <dxi-item dataField=\\\"money_resolution_43\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: '#,###'}\\\"\\r\\n                cssClass=\\\"max_right format-right\\\">\\r\\n                <dxo-label text=\\\"Số tiền giảm theo NQ\\\"></dxo-label>\\r\\n                <dxi-validation-rule *ngIf=\\\"!isGhiTam\\\" type=\\\"required\\\"\\r\\n                  message=\\\"Số tiền giảm theo NQ {{ _translate.VALIDATION.required }}\\\">\\r\\n                </dxi-validation-rule>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n\\r\\n            <!-- Tổng tiền -->\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" [cssClass]=\\\"cssClass.isHdBH\\\">\\r\\n              <dxi-item dataField=\\\"invoice_products[0].amount_after_vat\\\" cssClass=\\\"format-right\\\"\\r\\n                editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: '#,###', onValueChanged: changeTotalPayment}\\\">\\r\\n                <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.total_money }}\\\"></dxo-label>\\r\\n                <dxi-validation-rule *ngIf=\\\"!isGhiTam\\\" type=\\\"required\\\"\\r\\n                  message=\\\"{{ _translate.GRID.INVOICE_DETAILS.total_money }} {{ _translate.VALIDATION.required }}\\\">\\r\\n                </dxi-validation-rule>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n\\r\\n\\r\\n            <!-- Số tiền bằng chữ -->\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item dataField=\\\"total_payment_in_word\\\">\\r\\n                <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.total_payment_in_word }}\\\"></dxo-label>\\r\\n                <dxi-validation-rule *ngIf=\\\"!isGhiTam\\\" type=\\\"required\\\"\\r\\n                  message=\\\"{{ _translate.CONTROLL.LABEL.total_payment_in_word }} {{ _translate.VALIDATION.required }}\\\">\\r\\n                </dxi-validation-rule>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n\\r\\n\\r\\n          <!-- Template -->\\r\\n          <!-- Mã số thuế -->\\r\\n          <div *dxTemplate=\\\"let d of 'templateTaxCode'\\\"\\r\\n            style=\\\"display: grid;grid-template-columns: 1fr auto;width: 100%;\\\">\\r\\n            <dx-autocomplete valueExpr=\\\"tax_code\\\" placeholder=\\\"Tìm kiếm...\\\" [dataSource]=\\\"tax_codes\\\"\\r\\n              [(value)]=\\\"frmData.buyer_tax_code\\\" (onItemClick)=\\\"taxCodeChoose($event)\\\"\\r\\n              (onFocusOut)=\\\"updateTaxcodeInfo($event)\\\">\\r\\n              <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                <span>{{item.tax_code}}: {{ item.name }}</span>\\r\\n              </div>\\r\\n            </dx-autocomplete>\\r\\n            <button (click)=\\\"searchTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n              <i class=\\\"{{_translate.ICONS.search}}\\\" style=\\\"font-size: 22px;\\\"></i>\\r\\n            </button>\\r\\n          </div>\\r\\n          <!-- Mã khách hàng -->\\r\\n          <div *dxTemplate=\\\"let d of 'templateCustomerCode'\\\"\\r\\n            style=\\\"display: grid;grid-template-columns: 1fr auto;width: 100%;\\\">\\r\\n            <dx-autocomplete valueExpr=\\\"code\\\" placeholder=\\\"Tìm kiếm...\\\" [dataSource]=\\\"customer_codes\\\"\\r\\n              [(value)]=\\\"frmData.customer_code\\\" (onItemClick)=\\\"customerCodeChoose($event)\\\"\\r\\n              (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n              <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                <span>{{item.code}}: {{ item.name }}</span>\\r\\n              </div>\\r\\n            </dx-autocomplete>\\r\\n            <button (click)=\\\"editTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n              <i class=\\\"dx-icon fa fa-plus-circle icon-size\\\"></i>\\r\\n            </button>\\r\\n          </div>\\r\\n\\r\\n          <!-- Check box NQ43 -->\\r\\n          <div *dxTemplate=\\\"let d of 'templateCheckbox43'\\\"\\r\\n            style=\\\"display: grid;grid-template-columns: 1fr auto;width: 100%;\\\">\\r\\n            <dx-check-box style=\\\"margin-right: 20px\\\" [(value)]=\\\"frmData.is_resolution_43\\\"\\r\\n              text=\\\"{{ _translate.THONG_TIN.giam_thue_theo_nq43 }}\\\"\\r\\n              (onValueChanged)=\\\"_changeNQ43($event)\\\"></dx-check-box>\\r\\n          </div>\\r\\n\\r\\n          <!-- Tỉ lệ % trên doanh thu -->\\r\\n          <div *dxTemplate=\\\"let d of 'templateSalesPercentage'\\\"\\r\\n            style=\\\"display: flex; justify-content: space-between;flex-wrap: nowrap; transform: translateX(-32px);width: calc(100% + 32px);\\\">\\r\\n            <img id=\\\"link14\\\" (click)=\\\"isDisplayGuideSale=!isDisplayGuideSale\\\"\\r\\n              style=\\\"cursor: pointer; width: 15px; height: 15px; margin-right: 17px;\\\"\\r\\n              src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n            <dx-popover target=\\\"#link14\\\" position=\\\"top\\\" [width]=\\\"350\\\" [(visible)]=\\\"isDisplayGuideSale\\\">\\r\\n              <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n                <p>- 1% : Phân phối, cung cấp hàng hóa dịch vụ</p>\\r\\n                <p>- 5% : Dịch vụ xây dựng không bao thầu nguyên vật liệu</p>\\r\\n                <p>- 3% : Sản xuất, vận tải, dịch vụ có gắn với hàng hóa, xây dựng có bao thầu nguyên vật liệu</p>\\r\\n                <p>- 2% : Hoạt động kinh doanh khác</p>\\r\\n              </div>\\r\\n            </dx-popover>\\r\\n            <dx-number-box class=\\\"ti_le_phan_tram\\\" [(value)]=\\\"frmData.sales_percentage\\\"\\r\\n              (onValueChanged)=\\\"onChangeSalePercen($event)\\\"></dx-number-box>\\r\\n            <p style=\\\"margin-left: 5px;margin-top: 5px;\\\"> %</p>\\r\\n          </div>\\r\\n\\r\\n          <!-- Đơn vị tiền tệ -->\\r\\n          <div *dxTemplate=\\\"let d of 'templateCurrency'\\\" style=\\\"width: 100%;\\\" class=\\\"dvtt\\\">\\r\\n            <dx-check-box [(value)]=\\\"is_currency\\\" (onValueChanged)=\\\"changeCurrency($event)\\\"></dx-check-box>\\r\\n            <dx-text-box *ngIf=\\\"is_currency\\\" [(value)]=\\\"currency_name\\\"\\r\\n              placeholder=\\\"{{_translate.CONTROLL.LABEL.enter_currency}}\\\">\\r\\n            </dx-text-box>\\r\\n          </div>\\r\\n\\r\\n          <!-- Hàng hóa -->\\r\\n          <div *dxTemplate=\\\"let d of 'templateProductName'\\\">\\r\\n            <dx-autocomplete valueExpr=\\\"name\\\" placeholder=\\\"Nhập tên loại phí, lệ phí...\\\" [dataSource]=\\\"feeArray\\\"\\r\\n              [(value)]=\\\"frmData.fee_name\\\" [readOnly]=\\\"readOnlyFields()\\\" (onItemClick)=\\\"feeChoose($event)\\\">\\r\\n              <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                <span>{{ item.name }}</span>\\r\\n              </div>\\r\\n            </dx-autocomplete>\\r\\n          </div>\\r\\n\\r\\n        </dx-form>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <dx-form tabIndex=\\\"formRight\\\" [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item [cssClass]=\\\"cssClass.dvtt\\\" itemType=\\\"empty\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"itemEmpty\\\"></dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <!-- ngày xuất vé -->\\r\\n            <dxi-item dataField=\\\"invoice_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n              [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate , onValueChanged: changeDateTime}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.GRID.INVOICE.ticket_date }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <!-- Số vé -->\\r\\n            <dxi-item cssClass=\\\"so-bien-lai\\\" dataField=\\\"invoice_number\\\"\\r\\n              [editorOptions]=\\\"{ readOnly: true, format:'#,###'}\\\" editorType=\\\"dxNumberBox\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.GRID.INVOICE.ticket_number }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <!-- Hình thức thanh toán -->\\r\\n            <dxi-item dataField=\\\"payment_method_name\\\" editorType=\\\"dxSelectBox\\\"\\r\\n              [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_method }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <!-- Loại tiền -->\\r\\n            <dxi-item dataField=\\\"currency_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n              [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.currency_code }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <!-- Tỷ giá -->\\r\\n            <dxi-item dataField=\\\"currency_rate\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND', format: '#,###'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.currency_rate }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <!-- Cập nhật thông tin khách hàng -->\\r\\n    <dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n      [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n      <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n        <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.update_customer }}</p>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{ _translate.CONTROLL.LABEL.update }}\\\"\\r\\n            type=\\\"default\\\"></dx-button>\\r\\n          <dx-button (click)=\\\"huy()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </dx-popup>\\r\\n\\r\\n    <div [ngClass]=\\\"{'hidden': !is_multi_product}\\\">\\r\\n      <app-product-grip></app-product-grip>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <!-- Xem trước vé -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.preview_ticket }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Xem vé -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.view_ticket }}\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <!-- Xuất vé -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" disableDoubleClick appScrollToInvalid text=\\\"{{ _translate.CONTROLL.LABEL.export_ticket }}\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.export_inv\\\" (click)=\\\"eSubmit('XUAT',true)\\\" type=\\\"default\\\"\\r\\n            validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n          </dx-button>\\r\\n          <!-- Xuất và in -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" appScrollToInvalid text=\\\"{{ _translate.CONTROLL.LABEL.export_print_ticket }}\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.export_inv\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\" (click)=\\\"eSubmit('XUAT_IN')\\\">\\r\\n          </dx-button>\\r\\n          <!-- Ghi tạm -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"showButtonGhiTam()\\\" appScrollToInvalid text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.save\\\" (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\">\\r\\n          </dx-button>\\r\\n          <!-- Tạo mới -->\\r\\n          <dx-button disableDoubleClick text=\\\"{{ _translate.CONTROLL.BUTTON.create_new}}\\\" [(icon)]=\\\"this._translate.ICONS.add_new\\\"\\r\\n            type=\\\"default\\\" (click)=\\\"handleAddNew()\\\"></dx-button>\\r\\n          \\r\\n          <!-- Đóng -->\\r\\n          <dx-button appBackButton type=\\\"default\\\" [(icon)]=\\\"this._translate.ICONS.come_back\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</form>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<!-- <dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.processing }}\\\"\\r\\n          [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n          [(visible)]=\\\"showPopupImport\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</dx-popup> -->\"","module.exports = \".invoice-form{margin-bottom:30px}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code i{font-size:20px}.button-tax-code:focus{outline:none}::ng-deep dx-number-box .dx-texteditor-input{padding:7px 9px 8px}::ng-deep .hidden{display:none !important}::ng-deep .dvtt{display:flex}::ng-deep .dvtt dx-text-box{flex:1}::ng-deep .dvtt dx-text-box input{padding-top:9px}::ng-deep .dvtt dx-check-box{width:30px}:host ::ng-deep .format-right .dx-texteditor-input{text-align:right}::ng-deep .ti_le_phan_tram{flex:1}::ng-deep .ticket-container .dx-overlay-wrapper.dx-invalid-message{width:100% !important}\\n\"","import { AfterViewInit, Component, OnInit, Type, ViewChild, ViewChildren } from '@angular/core';\r\nimport { Helper, Library, VChanggeMoneyService, VSelectBoxService, VStringService, sEnum } from '@core/index';\r\nimport { AuthService, SocketService } from '@core/services';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { pattern } from '@config/pattern';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { AddCustomerComponent } from '@shared/components';\r\nimport * as moment from 'moment';\r\nimport * as _ from 'lodash';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { NotifyReduceTaxComponent } from '@shared/index';\r\nimport { PreviewTicketComponent } from '@shared/components/preview-ticket/preview-ticket.component';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { T } from '@angular/core/src/render3';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { TicketService } from '@modules/ticket/shared/ticket.service';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-invoice',\r\n  templateUrl: './invoice.component.html',\r\n  styleUrls: ['./invoice.component.scss']\r\n})\r\nexport class InvoiceComponent implements OnInit, CanComponentDeactivate, AfterViewInit {\r\n\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild('formExtend_hh') formExtend_hh: FormExtendComponent;\r\n  @ViewChild('formExtend_bm') formExtend_bm: FormExtendComponent;\r\n  _translate: any;\r\n  ioSignature: Subscription;\r\n  isAccessExportInv = false;//Quyền thực hiện xuất\r\n  ttDaXuatHoaDon = false;\r\n  productArray: any = [];\r\n  frmData: any = new InvoiceModel(1);\r\n  select: any = {};\r\n  disableInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  isTuChoi = false;\r\n  tax_codes: any = [];\r\n  customer_codes: any = [];\r\n  customerFormExtens = {\r\n    cssClass: {\r\n      soluong: 'format-right'\r\n    }\r\n  }\r\n  verify_code: any;\r\n  emails: any = [];\r\n  isExportInvoice = false;\r\n  isDisplayGuideSale = false;\r\n  template_temp: any;\r\n  // isDisable = false;\r\n  template_id = '';\r\n  readCode = false;\r\n  formatter: any;\r\n  customerCurent: any = {};\r\n  cssClass = {\r\n    nq43: '',\r\n    buyerInfo: '',\r\n    isHdGTGT: '',\r\n    isHdBH: '',\r\n    is_multi_product: '',\r\n    dvtt: 'hidden'\r\n  }\r\n  form_submit: any;\r\n  showPopup = false;\r\n  pattern = pattern;\r\n  configs: any = {};\r\n  hinhThucXuat = '';\r\n  arrEmail = [];\r\n  routeSub: Subscription;\r\n  role_branch: boolean;\r\n  bsModalRef: BsModalRef;\r\n  isHdGTGT = false;\r\n  listRoleBranchOrigin: Array<any>;\r\n  invoice_products: any = [];\r\n  infoDangKy: any;\r\n  invoiceTemplate: any;\r\n  template_view: any;\r\n  customForms_hh = [];\r\n  customerTempt_hh = {};\r\n  confirmCheckPreview = false;\r\n  formItems_hh = [];\r\n  customForms_bm = [];\r\n  customerTempt_bm = {};\r\n  valueChange: any;\r\n  currency_name = '';\r\n  currentUser: any;\r\n  formItems_bm = [];\r\n  is_currency = false;\r\n  is_multi_vat: any;\r\n  is_multi_product = false;\r\n  isGhiTam = false;\r\n  constructor(\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private spinner: NgxSpinnerService,\r\n    private customersService: CustomersService,\r\n    private route: ActivatedRoute,\r\n    private vatService: VatService,\r\n    private listService: ListsService,\r\n    private modalService: BsModalService,\r\n    private productsService: ProductsService,\r\n    private templateService: TemplateService,\r\n    private socketService: SocketService,\r\n    private configsService: ConfigsService,\r\n    private ticketService: TicketService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n  ngAfterViewInit(): void {\r\n    if (this.frmData.status === sEnum.statusInv.DaXuat || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && this.frmData.send_department_status === 'KHONG_DU_DK_CAP_MA')\r\n      || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && this.frmData.send_department_status === 'DA_GUI_CQT' && this.frmData.is_invoice_with_code)) {\r\n      this.disablleScreen();\r\n    }\r\n    let dvtt = document.querySelector('.dvtt');\r\n    let itemEmpty: any = document.querySelector('.itemEmpty');\r\n    if (dvtt && itemEmpty) {\r\n      let dvttHeight = dvtt.clientHeight;\r\n      itemEmpty.style.height = dvttHeight + 'px';\r\n    }\r\n    // this.onChangeTem(this.template_temp);\r\n  }\r\n  onChangeSalePercen() {\r\n    this.tinhGiaTri();\r\n  }\r\n\r\n  // Thay đổi checkbox nq43\r\n  _changeNQ43() {\r\n    this.frmData.sales_percentage = null;\r\n    this.frmData.money_resolution_43 = null;\r\n    this.setCssClass();\r\n  }\r\n\r\n  // Thay đổi hiển thị thông tin bên mua\r\n  onChangeBuyerInfo = (e) => {\r\n    this.frmData.buyer_tax_code = null;\r\n    this.frmData.customer_code = null;\r\n    this.frmData.customer_name = null;\r\n    this.frmData.buyer_name = null;\r\n    this.frmData.buyer_mobile = null;\r\n    this.frmData.buyer_address = null;\r\n    for (const key in this.customerTempt_bm) {\r\n      if (this.customerTempt_bm.hasOwnProperty(key)) {\r\n        this.customerTempt_bm[key] = null;\r\n      }\r\n    }\r\n    this.setCssClass();\r\n  }\r\n\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    return true;\r\n  }\r\n\r\n  changeCurrency = (e) => {\r\n    if (!this.is_currency) {\r\n      this.currency_name = null;\r\n    }\r\n  }\r\n\r\n  changeTotalPayment = (e) => {\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(e.value, 0, currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n\r\n  ngOnInit() {\r\n    this.connectWebsocket();\r\n    this.productArray = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getProductsForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    this.role_branch = this.listService.getDataConfigLocalStorage();\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // let danh_muc = this.authService.getDMLocal();\r\n      this.configs = this.authService.getConfigs();\r\n\r\n\r\n      this.currency_name = this.configs.system_parameter.ticket_currency ? this.configs.system_parameter.ticket_currency : ''\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      this.select.products = data.init[0].products;\r\n      this.select.templates = data.init[0].templates;\r\n\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.configs = this.authService.getConfigs();\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      this.frmData.display_currency = JSON.stringify(this.configs.display_currency);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      this.select.currency_codes = danh_muc.DM_LOAI_TIEN ? danh_muc.DM_LOAI_TIEN : null;\r\n\r\n      let isEdit = data.init[0].isEdit;\r\n      let invoice: any;\r\n      if (isEdit) {\r\n        invoice = data.init[0].invoices\r\n      }\r\n\r\n      if (this.select.templates.length > 0) {\r\n        if (invoice && Number.parseInt(invoice.invoice_number) > 0) {\r\n          if (invoice.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n            this.select.templates = this.select.templates.filter(p => p.is_invoice_with_code == invoice.is_invoice_with_code);\r\n          }\r\n        } else {\r\n          this.select.templates = this.select.templates.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n        }\r\n      }\r\n      if (isEdit || this.vatService.isCopy) {\r\n        if (this.vatService.isCopy) {\r\n          this.khoiTaoKhiSua(this.vatService.data)\r\n        } else {\r\n          this.khoiTaoKhiSua(invoice)\r\n        }\r\n      } else {\r\n        this.khoiTaoKhiThemMoi();\r\n      }\r\n    })\r\n\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n\r\n    const listpermissions = this.currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n  }\r\n\r\n  /* Kết nối đến socket */\r\n  connectWebsocket(type?) {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        // ký nội dung\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.sendInvoice(data.Data.Content);\r\n        }\r\n        else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.xuLiApiKhiXuat();\r\n        }\r\n      } else if (data.SvcName === 'efy_viewInvoice') {\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  handleFormData() {\r\n    this.form_submit = _.cloneDeep(this.frmData);\r\n    if (this.form_submit.extension.length > 0) {\r\n      this.form_submit.extension.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (this.form_submit.invoice_options.length > 0) {\r\n      this.form_submit.invoice_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    console.log('this.form_submit: ', this.form_submit);\r\n    \r\n    if (this.form_submit.invoice_products.length > 0) {\r\n      this.form_submit.invoice_products = this.form_submit.invoice_products.filter(item => item.product_name);\r\n      if (this.form_submit.invoice_products.length > 0) {\r\n        if (!this.is_multi_product) {\r\n          this.form_submit.invoice_products[0].extension = JSON.stringify(_.cloneDeep(this.form_submit.extension));\r\n        } else {\r\n\r\n        }\r\n      }\r\n    }\r\n    delete this.form_submit.extension;\r\n    delete this.form_submit.buyer_information;\r\n    // delete this.form_submit.total_payment;\r\n    this.form_submit.invoice_files = [];\r\n    this.form_submit.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n    if (this.is_currency) {\r\n      this.form_submit['currency_name'] = this.currency_name ? this.currency_name : \"empty\";\r\n    }\r\n  }\r\n  khoiTaoKhiSua(data) {\r\n    let template = this.select.templates.find(item => item.value === data.template_id);\r\n    template = template ? template : this.select.templates[0]\r\n    if (template.number_of_row != '100') {\r\n      this.is_multi_product = true;\r\n    }\r\n\r\n    // Khởi tạo thông tin hàng hóa\r\n    this.frmData.fillFormData(data);\r\n    this.handleEmail(data.buyer_email);\r\n    // Đơn vị tiền tệ\r\n    if (data.extend_json_invoice) {\r\n      let extension = JSON.parse(data.extend_json_invoice);\r\n      if (extension.currency_name) {\r\n        this.is_currency = true;\r\n        this.currency_name = extension.currency_name;\r\n      }\r\n      this.frmData.buyer_exten = extension.buyer_exten ? extension.buyer_exten : false;\r\n    }\r\n    // Tên hàng hoá dv/mở rộng\r\n    let invoice_products = this.frmData.setInvoice_products_data(data.invoice_products);\r\n    if (!this.is_multi_product) {\r\n      invoice_products.length = 1;\r\n      let extension = [];\r\n      this.frmData.invoice_products = invoice_products;\r\n      if (data.invoice_products.length > 0 && data.invoice_products[0].extension) {\r\n        extension = JSON.parse(data.invoice_products[0].extension);\r\n      }\r\n      this.frmData['extension'] = extension;\r\n    } else {\r\n      this.frmData['extension'] = [];\r\n    }\r\n    this.template_temp = template\r\n    if (this.select.templates.length > 0) {\r\n      this.onChangeTem(template, true);\r\n    }\r\n\r\n    if (VStringService._getValueToString(this.frmData.approve_status) == sEnum.statusApprove.TuChoi) {\r\n      this.isTuChoi = true;\r\n    }\r\n    if (data.currency_name) {\r\n      this.cssClass.dvtt = '';\r\n      if (data.currency_name == 'empty')\r\n        data.currency_name = '';\r\n      this.currency_name = data.currency_name;\r\n    } else {\r\n      if (this.configs.display_currency) {\r\n        let arrConfigCurrency = VSelectBoxService._arrConfigCurrency();\r\n        arrConfigCurrency.forEach(key => {\r\n          if (this.configs.display_currency[key])\r\n            this.cssClass.dvtt = '';\r\n        })\r\n      }\r\n      if (this.cssClass.dvtt) {\r\n        this.is_currency = false;\r\n        this.currency_name = null;\r\n      }\r\n    }\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n  }\r\n\r\n  // Xem trước vé\r\n  preview() {\r\n    Library.showloading();\r\n    this.handleFormData();\r\n\r\n    const sub = this.vatService.preview(this.form_submit, true).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        if (rs.data.data.item && rs.data.data.item.length > 0) {\r\n          let invoice = rs.data.data.item[0];\r\n          const rawHtml = this.ticketService.createFormTypeBase64(invoice, this.invoiceTemplate, this.is_multi_product, { isPreview: true });\r\n          const initialState = {\r\n            dataPreview: rawHtml + '</html>',\r\n            isPreview: true\r\n          };\r\n          this.bsModalRef = this.modalService.show(PreviewTicketComponent, {\r\n            class: 'modal-lg full-modal-ticket1',\r\n            initialState,\r\n            backdrop: 'static',\r\n            keyboard: false\r\n          });\r\n          let submodal = this.modalService.onHide.subscribe(\r\n            () => {\r\n              submodal.unsubscribe();\r\n            },\r\n          )\r\n        }\r\n\r\n      }\r\n    },\r\n      (err) => { },\r\n      () => { Library.hideloading(); }\r\n    )\r\n  }\r\n\r\n  handleAddNew() {\r\n    this.addNew();\r\n  }\r\n\r\n  addNew() {\r\n    this.isGhiTam = true;\r\n    const inv = Object.assign({}, this.frmData);\r\n    this.frmData = new InvoiceModel(1);\r\n    this.frmData.invoice_date = null;\r\n    this.frmData.template_id = inv.template_id;\r\n    this.frmData.invoice_release_id = inv.invoice_release_id;\r\n    this.frmData.payment_method_name = inv.payment_method_name;\r\n    this.frmData.payment_method_view_name = inv.payment_method_view_name;\r\n    this.frmData.currency_code = inv.currency_code;\r\n    this.frmData.template_code = inv.template_code;\r\n    this.frmData.invoice_series = inv.invoice_series;\r\n    this.frmData.invoice_options = inv.invoice_options;\r\n    if(this.frmData.invoice_options){\r\n      this.frmData.invoice_options.forEach(option => {\r\n        option.value = null;\r\n      })\r\n    }\r\n    this.frmData.buyer_exten = inv.buyer_exten;\r\n    this.frmData.is_resolution_43 = inv.is_resolution_43;\r\n    if (!this.is_multi_product) {\r\n      this.frmData.invoice_products[0].vat = null;\r\n      this.frmData.invoice_products[0].extension = null;\r\n    }\r\n    this.emails = [];\r\n    this.formExtend_hh.resetOptions();\r\n    if (!this.is_multi_product) {\r\n      this.formExtend_hh.resetForm();\r\n      this.formExtend_bm.resetForm();\r\n    } else { }\r\n\r\n    this.unDisableScreen();\r\n    let template = this.select.templates.find(item => item.value === this.frmData.template_id)\r\n    this.onChangeTem(template);\r\n\r\n  }\r\n\r\n  // Thay đổi tổng tiền\r\n  totalPaymentChange = (e) => {\r\n    this.onNumberChange();\r\n    if (this.frmData.auto_value)\r\n      this.frmData.amount_after_vat = this.frmData.total_payment;\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(e.value, VChanggeMoneyService.getFormatterToNumber(this.formatter.total_payment), currency_code, this.configs.system_parameter.display_read_money_english);\r\n  }\r\n\r\n\r\n  /* Tính tiền */\r\n  onNumberChange() {\r\n    VChanggeMoneyService._calTotalMoney(this.frmData, this.formatter, !this.frmData.auto_value);\r\n  }\r\n\r\n  khoiTaoKhiThemMoi() {\r\n    if (this.configs.system_parameter.is_ticket_currency)\r\n      this.is_currency = this.configs.system_parameter.is_ticket_currency\r\n    if (this.select.templates.length > 0 && this.select.templates[0].number_of_row != '100') {\r\n      this.is_multi_product = true;\r\n    }\r\n    this.invoice_products = this.frmData.invoice_products_data();\r\n    this.select.payment_method_names.some(item => {\r\n      if (item.is_default) {\r\n        this.frmData.payment_method_name = item.code;\r\n        let _obj = this.select.payment_method_names.filter(p => p.code === item.code)[0];\r\n        if (_obj) {\r\n          this.frmData.payment_method_view_name = _obj.name;\r\n        }\r\n      }\r\n    });\r\n    if (VStringService._getValueToString(this.frmData.payment_method_name) === '') {\r\n      this.frmData.payment_method_name = 'TMCK';\r\n      this.frmData.payment_method_view_name = 'TM/CK';\r\n    }\r\n\r\n    this.frmData.currency_code = 'VND';\r\n    this.frmData[\"buyer_exten\"] = false;\r\n    this.frmData.is_resolution_43 = false;\r\n    if (!this.is_multi_product) {\r\n      this.invoice_products.length = 1;\r\n      this.frmData.extension = this.frmData.invoice_products[0].extension;\r\n      this.frmData.invoice_products[0].vat = null;\r\n    } else {\r\n      this.frmData.extension = [];\r\n    }\r\n    // set value default\r\n    if (this.select.templates.length > 0) {\r\n      this.template_temp = this.select.templates[0];\r\n      this.frmData.template_id = this.template_temp.value;\r\n      this.onChangeTem(this.select.templates[0]);\r\n    } else {\r\n      this.cssClass.nq43 = 'hidden';\r\n      this.cssClass.buyerInfo = 'hidden';\r\n      this.cssClass.isHdGTGT = 'hidden';\r\n      this.cssClass.isHdBH = 'hidden';\r\n      this.cssClass.is_multi_product = 'hidden';\r\n    }\r\n\r\n    if (this.configs.display_currency) {\r\n      let arrConfigCurrency = VSelectBoxService._arrConfigCurrency();\r\n      arrConfigCurrency.forEach(key => {\r\n        if (this.configs.display_currency[key])\r\n          this.cssClass.dvtt = '';\r\n      })\r\n    }\r\n    if (this.cssClass.dvtt) {\r\n      this.is_currency = false;\r\n      this.currency_name = null;\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  formDuLieuMoRong(item) {\r\n    this.customForms_hh = [];\r\n    this.customerTempt_hh = {};\r\n    this.customForms_bm = [];\r\n    this.customerTempt_bm = {};\r\n    Helper.resetObject(this.formItems_hh);\r\n    Helper.resetObject(this.formItems_bm);\r\n    if (item.fields && item.fields.length > 0) {\r\n      let _dulieumorong_bm = _.cloneDeep(item.fields).filter(x => x.type === '4');\r\n      const invoice_options = this.frmData.invoice_options;\r\n      if (invoice_options && invoice_options.length > 0) {\r\n        _dulieumorong_bm = _dulieumorong_bm.map((dl) => {\r\n          let option = invoice_options.find(x => x.code == dl.code)\r\n          if (option) {\r\n            dl.value = option.value;\r\n          }\r\n          return dl;\r\n        });\r\n      }\r\n\r\n\r\n      this.frmData.invoice_options = _dulieumorong_bm;\r\n      if (_dulieumorong_bm.length > 0) {\r\n        this.formExtend_bm.createForm(this.customForms_bm, _dulieumorong_bm, this.customerFormExtens)\r\n      }\r\n\r\n      _dulieumorong_bm.forEach(value => {\r\n        this.customerTempt_bm[value.code] = value.value;\r\n      });\r\n\r\n      if (!this.is_multi_product) {\r\n        let _dulieumorong_hh = _.cloneDeep(item.fields).filter(x => x.type === '9');\r\n        const extension = this.frmData.extension;\r\n        if (extension && extension.length > 0) {\r\n          _dulieumorong_hh = _dulieumorong_hh.map((dl) => {\r\n            let option = extension.find(x => x.code == dl.code)\r\n            if (option) {\r\n              dl.value = option.value;\r\n            }\r\n            return dl;\r\n          });\r\n        }\r\n        this.frmData.extension = _dulieumorong_hh;\r\n        if (_dulieumorong_hh.length > 0) {\r\n          this.formExtend_hh.createForm(this.customForms_hh, _dulieumorong_hh, this.customerFormExtens)\r\n        }\r\n        _dulieumorong_hh.forEach(value => {\r\n          this.customerTempt_hh[value.code] = value.value;\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      this.frmData.invoice_options = [];\r\n      this.frmData.extension = [];\r\n    }\r\n  }\r\n\r\n  onFocusOut = (e) => {\r\n    if (!this.is_multi_product && this.frmData.invoice_products[0].product_name) {\r\n      this.tinhGiaTri()\r\n    }\r\n  }\r\n\r\n  onItemClick = (e) => {\r\n    let product = e.itemData;\r\n    if (!this.is_multi_product) {\r\n      let product_temp = this.frmData.invoice_products[0];\r\n      if (product) {\r\n        if (product) {\r\n          product_temp.order = 1;\r\n          product_temp.view_order = 1;\r\n          product_temp.price = product.price ? parseFloat(product.price) : null;\r\n          product_temp.product_name = product.name;\r\n          product_temp.product_code = product.code;\r\n          product_temp.unit_code = this.checkUnitCode(product.unit_code);\r\n          product_temp.quantity = 1;\r\n          if (this.isHdGTGT) {\r\n            product_temp.vat = product.vat != null ? product.vat.toString() : null;\r\n          } else {\r\n            product_temp.vat = null;\r\n          }\r\n          product_temp.amount = product.price ? parseFloat(product.price) : 0;\r\n          if (this.isHdGTGT) {\r\n            product_temp.amount_vat = (product_temp.vat >= 0 || product_temp.vat == -3) ? this.caculatorAmountVat(product_temp.amount, product_temp.vat) : null;\r\n          } else {\r\n            product_temp.amount_vat = null;\r\n          }\r\n          product_temp.amount_after_vat = product_temp.amount + (product_temp.amount_vat != null ? product_temp.amount_vat : 0);\r\n          this.tinhGiaTri();\r\n        }\r\n      } else {\r\n        this.changeProduct(null);\r\n      }\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n  changeProduct = (event: any) => {\r\n    let product_temp = this.frmData.invoice_products[0];\r\n    product_temp.order = 1;\r\n    product_temp.view_order = 1;\r\n    product_temp.price = null;\r\n    // product_temp.product_name = null;\r\n    product_temp.product_code = null;\r\n    product_temp.quantity = 1;\r\n    product_temp.vat = null;\r\n    product_temp.amount = null;\r\n    product_temp.amount_vat = null;\r\n    product_temp.amount_after_vat = null;\r\n    // this.productArray.load().then((dataSource) => {\r\n    //   if (!dataSource || (dataSource && dataSource.length == 0)) {\r\n    //   }\r\n    // })\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n  roundNumber(number, n): number {\r\n    let p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  onChangeVAT = (e) => {\r\n    this.tinhGiaTri();\r\n  }\r\n  onChangePrice = (e) => {\r\n    this.tinhGiaTri();\r\n  }\r\n  tinhGiaTri() {\r\n    VChanggeMoneyService.tinhGiaTriKhac(this.frmData, this.formatter);\r\n  }\r\n\r\n  setCssClass() {\r\n    this.cssClass.nq43 = (!this.isHdGTGT && this.frmData.is_resolution_43) ? '' : 'hidden';\r\n    this.cssClass.buyerInfo = this.frmData.buyer_exten ? '' : 'hidden';\r\n  }\r\n\r\n\r\n\r\n\r\n  // Thay đổi template\r\n  onChangeTem = (e, isEdit?) => {\r\n    this.select.templates.forEach(item => {\r\n      if (e.value === item.value) {\r\n        if (item.number_of_row != '100') {\r\n          this.is_multi_product = true;\r\n          this.cssClass.is_multi_product = 'hidden';\r\n        } else {\r\n          this.is_multi_product = false;\r\n          this.cssClass.is_multi_product = '';\r\n        }\r\n        this.formDuLieuMoRong(item);\r\n        // this.frmData.template_id = item.value;\r\n        this.frmData.invoice_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.is_multi_vat = item.is_multi_vat;\r\n        this.invoiceTemplate = _.cloneDeep(item);\r\n        if (item.invoice_type === sEnum.loaihoadon.GTKT01) {\r\n          this.frmData.is_resolution_43 = false;\r\n          this.isHdGTGT = true;\r\n          this.cssClass.isHdGTGT = '';\r\n          this.cssClass.isHdBH = 'hidden';\r\n        } else {\r\n          this.isHdGTGT = false;\r\n          this.cssClass.isHdGTGT = 'hidden';\r\n          this.cssClass.isHdBH = '';\r\n          this.frmData.invoice_products[0].vat = null;\r\n          this.frmData.invoice_products[0].amount = null;\r\n          this.frmData.invoice_products[0].amount_vat = null;\r\n        }\r\n        this.tinhGiaTri();\r\n      }\r\n    });\r\n    setTimeout(() => {\r\n      this.setCssClass();\r\n    }, 1)\r\n  }\r\n\r\n  // Xem lại vé\r\n  view() {\r\n    Library.showloading();\r\n    this.handleFormData();\r\n    if (this.frmData.id) {\r\n      const sub = this.vatService.view(this.frmData.id, true).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          if (rs.data.data.item && rs.data.data.item.length > 0) {\r\n            let invoice = rs.data.data.item[0];\r\n            const rawHtml = this.ticketService.createFormTypeBase64(invoice, this.invoiceTemplate, this.is_multi_product);\r\n            const initialState = {\r\n              dataPreview: rawHtml + '</html>',\r\n              isPreview: true\r\n            };\r\n            this.bsModalRef = this.modalService.show(PreviewTicketComponent, {\r\n              class: 'modal-lg full-modal-ticket1',\r\n              initialState,\r\n              backdrop: 'static',\r\n              keyboard: false\r\n            });\r\n            let submodal = this.modalService.onHide.subscribe(\r\n              () => {\r\n                submodal.unsubscribe();\r\n              },\r\n            )\r\n          }\r\n        }\r\n      },\r\n        (err) => { },\r\n        () => { Library.hideloading(); }\r\n      )\r\n    }\r\n  }\r\n\r\n  customerChanged = (e) => {\r\n    if (this.frmData.customer_id && this.frmData.buyer_exten) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.name) !== VStringService._getValueToString(this.frmData.customer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_person_name) !== VStringService._getValueToString(this.frmData.buyer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_mobile) !== VStringService._getValueToString(this.frmData.buyer_mobile)\r\n              || VStringService._getValueToString(this.customerCurent.business_address) !== VStringService._getValueToString(this.frmData.buyer_address)\r\n              || VStringService._getValueToString(this.customerCurent.email) !== VStringService._getValueToString(this.frmData.buyer_email)\r\n            ) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  /* Xuất hóa đơn */\r\n  eSubmit(type) {\r\n    this.isGhiTam = false;\r\n    this.checkTemplate();\r\n    this.hinhThucXuat = type\r\n    setTimeout(() => {\r\n      if (type == 'XUAT' || type == 'XUAT_IN') {\r\n        if (!this._validForm() && !this.form.instance.validate().isValid) {\r\n          return;\r\n        }\r\n      }\r\n      this.handleFormData();\r\n      if (type === 'XUAT' || type == 'XUAT_IN') {\r\n        if (this.confirmCheckPreview) {\r\n          this.xuatHoaDon(type);\r\n          this.confirmCheckPreview = false;\r\n        } else {\r\n          this.previewBeforeSubmit(type);\r\n        }\r\n      } else {\r\n        this.isGhiTam = true;\r\n        this.processGhiTam(type);\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  _validForm() {\r\n    if (!this.frmData.template_id) {\r\n      InvoicesService.focusField(this.listDxForm, 'formLeft', 'template_id');\r\n      Library.notify(this._translate.CONTROLL.LABEL.ticket_template + \" \" + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    if (!this.frmData.invoice_products[0].product_name) {\r\n      // InvoicesService.focusField(this.listDxForm, 'formLeft', 'invoice_products[0].product_code');\r\n      Library.notify(this._translate.MENU.name_of_goods_and_service + \" \" + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    if (!this.frmData.invoice_products[0].amount_after_vat) {\r\n      // InvoicesService.focusField(this.listDxForm, 'formLeft', 'invoice_products[0].amount_after_vat');\r\n      Library.notify(this._translate.GRID.INVOICE_DETAILS.total_money + \" \" + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    if (!this.frmData.currency_code) {\r\n      InvoicesService.focusField(this.listDxForm, 'formRight', 'currency_code');\r\n      Library.notify(this._translate.CONTROLL.LABEL.currency_code + \" \" + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    } else {\r\n      if (this.frmData.currency_code !== 'VND' && !this.frmData.currency_rate) {\r\n        InvoicesService.focusField(this.listDxForm, 'formRight', 'currency_rate');\r\n        Library.notify(this._translate.CONTROLL.LABEL.currency_rate + \" \" + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n    }\r\n    if (!this.frmData.invoice_products[0].price) {\r\n      // InvoicesService.focusField(this.listDxForm, 'formLeft', 'invoice_products[0].price');\r\n      Library.notify(this._translate.GRID.INVOICE_DETAILS.price + \" \" + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    if (this.isHdGTGT) {\r\n      if (!this.frmData.invoice_products[0].amount_vat\r\n        && this.frmData.invoice_products[0].vat\r\n        && ![\"0\", \"-1\", \"-2\"].includes(this.frmData.invoice_products[0].vat)\r\n\r\n      ) {\r\n        // InvoicesService.focusField(this.listDxForm, 'formLeft', 'invoice_products[0].amount_vat');\r\n        Library.notify(this._translate.GRID.INVOICE_DETAILS.amount_vat + \" \" + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (!this.frmData.invoice_products[0].vat) {\r\n        // InvoicesService.focusField(this.listDxForm, 'formLeft', 'invoice_products[0].vat');\r\n        Library.notify(this._translate.GRID.INVOICE_DETAILS.vat + \" \" + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n    } else {\r\n      if (this.frmData.is_resolution_43) {\r\n        if (!this.frmData.sales_percentage) {\r\n          // InvoicesService.focusField(this.listDxForm, 'formLeft', 'sales_percentage');\r\n          Library.notify(this._translate.CONTROLL.LABEL.sales_percentage + \" \" + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        if (!this.frmData.money_resolution_43) {\r\n          InvoicesService.focusField(this.listDxForm, 'formLeft', 'money_resolution_43');\r\n          Library.notify('Số tiền giảm theo NQ' + \" \" + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        } else {\r\n          if (![1, 2, 3, 5].includes(this.frmData.sales_percentage)) {\r\n            // InvoicesService.focusField(this.listDxForm, 'formLeft', 'sales_percentage');\r\n            Library.notify(\"Tỷ lệ % trên doanh thu chỉ bao gồm các giá trị: 1, 2, 3, 5\", 'error');\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (!this.frmData.total_payment_in_word) {\r\n      // InvoicesService.focusField(this.listDxForm, 'formLeft', 'invoice_products[0].price');\r\n      Library.notify(this._translate.CONTROLL.LABEL.total_payment_in_word + \" \" + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  previewBeforeSubmit(type) {\r\n    Library.showloading();\r\n    this.handleFormData();\r\n    const sub = this.vatService.preview(this.form_submit, true).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        if (rs.data.data.item && rs.data.data.item.length > 0) {\r\n          let invoice = rs.data.data.item[0];\r\n          const rawHtml = this.ticketService.createFormTypeBase64(invoice, this.invoiceTemplate, this.is_multi_product, { isPreview: true });\r\n          const initialState = {\r\n            dataPreview: rawHtml + '</html>',\r\n            isPreview: false,\r\n            content_invoice: {\r\n              question_again: this._translate.THONG_TIN.hoi_truoc_khi_xuat_ve,\r\n              'invoice_date': this.ticketService.invoice_date\r\n            }\r\n          };\r\n          this.bsModalRef = this.modalService.show(PreviewTicketComponent, {\r\n            class: 'modal-lg full-modal-ticket2',\r\n            initialState,\r\n            backdrop: 'static',\r\n            keyboard: false\r\n          });\r\n          let submodal = this.modalService.onHide.subscribe(\r\n            () => {\r\n              if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n                this.confirmCheckPreview = true;\r\n                Library.showloading();\r\n                if (type === sEnum.statusInv.TrinhKy) {\r\n                  this.eSubmit(sEnum.statusInv.TrinhKy);\r\n                } else {\r\n                  this.eSubmit(type);\r\n                }\r\n              }\r\n              submodal.unsubscribe();\r\n            }\r\n          )\r\n        }\r\n      }\r\n    },\r\n      (err) => { },\r\n      () => { Library.hideloading(); }\r\n    )\r\n  }\r\n\r\n\r\n  xuatHoaDon(type) {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)\r\n      || (!this.configs.system_parameter.otherInvoice_sign && !this.checkTemplate())) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n      this.socketService.kiSo((type) => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n    }\r\n    // }\r\n  }\r\n\r\n  // Check có mã\r\n  checkTemplate() {\r\n    return this.frmData.invoice_series.startsWith(\"C\")\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let xmlInvoice = \"\";\r\n    if (!this.form_submit.id) {\r\n      const sub = this.vatService.ghiTamTT78(this.form_submit, true).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.frmData.id = rs.data.id;\r\n          this.verify_code = rs.data.verify_code;\r\n          this.setDataSessionStorage(this.frmData);\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)\r\n            || (!this.configs.system_parameter.otherInvoice_sign && !this.checkTemplate())\r\n          ) {\r\n            this.sendInvoice(xmlInvoice)\r\n          } else {\r\n            this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n          }\r\n          if (this.hinhThucXuat == 'XUAT_IN') {\r\n            this.inhoadon();\r\n\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      const sub = this.vatService.editTT78(this.frmData.id, this.form_submit, true).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)\r\n            || (!this.configs.system_parameter.otherInvoice_sign && !this.checkTemplate())\r\n          ) {\r\n            this.sendInvoice(xmlInvoice)\r\n          } else {\r\n            this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n          }\r\n          if (this.hinhThucXuat == 'XUAT_IN') {\r\n            this.inhoadon()\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  async inhoadon() {\r\n    Library.showloading();\r\n    const sub = this.vatService.view(this.frmData.id, true).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        if (rs.data.data.item && rs.data.data.item.length > 0) {\r\n          let invoice = rs.data.data.item[0];\r\n          const rawHtml = this.ticketService.createFormTypeBase64(invoice, this.invoiceTemplate, this.is_multi_product, { inVe: true });\r\n          let html = Base64.encode(rawHtml);\r\n          this.socketService.inFileHtml(() => this.connectWebsocket(), html);\r\n          setTimeout(() => {\r\n            Library.hideloading();\r\n          }, 300);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    },\r\n      (err) => {\r\n        Library.notify(err.message, 'error');\r\n      },\r\n      () => { Library.hideloading(); }\r\n    )\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    let nodeSign = \"//HDon/DSCKS/NBan\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n  }\r\n\r\n  /* Disbale Form và bảng hàng hóa */\r\n  disablleScreen() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  // \r\n  unDisableScreen() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n    });\r\n    this.ttDaXuatHoaDon = false;\r\n  }\r\n\r\n  currencyRateChange = (e) => {\r\n  }\r\n\r\n  sendInvoice(xml_string) {\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    const sub = this.vatService.xuatHoaDon({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.setCurrencyTicket();\r\n        this.disablleScreen();\r\n        Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n        this.isExportInvoice = true;\r\n      }\r\n      else\r\n        Library.notify(rs.message, 'error');\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  setCurrencyTicket() {\r\n    // if (this.configs.system_parameter.ticket_currency != this.currency_name) {\r\n    this.configs.system_parameter[\"ticket_currency\"] = this.currency_name;\r\n    this.configs.system_parameter[\"is_ticket_currency\"] = this.is_currency;\r\n    const id = this.configs.id.system_parameter;\r\n    const data = {\r\n      config: {\r\n        value: JSON.stringify(this.configs.system_parameter),\r\n        is_no_add_log: true\r\n      }\r\n    };\r\n    this.vatService.updateConfig(id, data).subscribe(res => {\r\n      if (res.status == 'success') {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n          this.configs = this.authService.getConfigs();\r\n        });\r\n      }\r\n    });\r\n    // }\r\n  }\r\n\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.invoice_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n  /* Xử lý ghi tạm hóa đơn */\r\n  processGhiTam(type) {\r\n    if (!this.isAccessExportInv) {\r\n      if (type === sEnum.statusInv.TrinhKy) {\r\n        this.form_submit.approve_status = sEnum.statusApprove.ChoDuyet;\r\n        this.form_submit.refuse_reason = '';\r\n      } else {\r\n        if (this.form_submit.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.form_submit.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    this.ghiTam(this.form_submit);\r\n  }\r\n\r\n  /* Ghi tạm */\r\n  ghiTam(data) {\r\n    if (this.frmData.id) {\r\n      Library.showloading();\r\n      const sub = this.vatService.editTT78(this.form_submit.id, data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n          }\r\n          this.setCurrencyTicket();\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n            const initialState = {\r\n              typeNotify: \"MAU_HOA_DON\",\r\n            };\r\n            this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'mauhoadon modal-lg',\r\n              initialState\r\n            });\r\n          }\r\n          else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n            const initialState = {\r\n              typeNotify: \"MAU_HOA_DON_NQ43\",\r\n            };\r\n            this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'mauhoadon43 modal-lg',\r\n              initialState\r\n            });\r\n          }\r\n          else\r\n            Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n\r\n    } else {\r\n      Library.showloading();\r\n      const sub = this.vatService.ghiTamTT78(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          // if (rs.data.status == sEnum.statusInv.ChoKy)\r\n          //   this.isShowButtonWaiteSign = false;\r\n          this.setCurrencyTicket();\r\n          this.frmData.id = rs.data.id;\r\n          // this.pkInvoiceSelectWaitSign = this.frmData.id;\r\n          Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n            const initialState = {\r\n              typeNotify: \"MAU_HOA_DON\",\r\n            };\r\n            this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'mauhoadon modal-lg',\r\n              initialState\r\n            });\r\n          }\r\n          else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n            const initialState = {\r\n              typeNotify: \"MAU_HOA_DON_NQ43\",\r\n            };\r\n            this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'mauhoadon43 modal-lg',\r\n              initialState\r\n            });\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  setDataSessionStorage(data) {\r\n    this.valueChange = JSON.stringify(data);\r\n  }\r\n\r\n  showButtonGhiTam() {\r\n    return !this.ttDaXuatHoaDon;\r\n  }\r\n\r\n\r\n  disableTemplateInput = () => {\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  // chọn mã số thuế\r\n  taxCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    this.handleEmail(customer.email)\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.bank_account_number = customer.bank_account_number ? customer.bank_account_number : '';\r\n    this.frmData.bank_name = customer.bank_name ? customer.bank_name : '';\r\n  }\r\n\r\n  handleEmail(email) {\r\n    if (email) {\r\n      this.frmData.buyer_email = email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = email;\r\n      this.emails = [];\r\n    }\r\n  }\r\n\r\n\r\n  // focus ra ngoài mst\r\n  updateTaxcodeInfo = (e) => {\r\n    if (this.frmData.customer_id && this.frmData.buyer_exten) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.tax_code) !== VStringService._getValueToString(this.frmData.buyer_tax_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n\r\n  capNhatDmKhachHang() {\r\n    if (this.frmData.buyer_exten) {\r\n      this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.buyer_tax_code);\r\n      this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n      this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n      this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.buyer_name);\r\n      this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.buyer_mobile);\r\n      this.customerCurent.business_address = VStringService._getValueToString(this.frmData.buyer_address);\r\n      this.customerCurent.email = VStringService._getValueToString(this.frmData.buyer_email);\r\n      const data = { customer: this.customerCurent };\r\n      Library.showloading();\r\n      this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n        if (response.status === 'success') {\r\n          this.showPopup = false;\r\n        } else {\r\n          Library.notify(response.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  // focus ra ngoài mã kh \r\n  updateCustomerInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  // Chọn mã khách hàng\r\n  customerCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.bank_account_number = customer.bank_account_number ? customer.bank_account_number : '';\r\n    this.frmData.bank_name = customer.bank_name ? customer.bank_name : '';\r\n  }\r\n\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n  }\r\n\r\n  // Tìm kiếm mã số thuế\r\n  searchTaxCode = () => {\r\n    Library.showloading();\r\n    if (!this.frmData.buyer_tax_code) {\r\n      Library.notify(\"Vui lòng nhập mã số thuế!\", \"error\")\r\n    } else {\r\n      this.vatService.getInfoCompany(this.frmData.buyer_tax_code).subscribe(res => {\r\n        if (res.status == \"success\") {\r\n          this.taxCodeChoose({ itemData: res.data.customer })\r\n        }\r\n      })\r\n    }\r\n    setTimeout(() => {\r\n      Library.hideloading();\r\n    }, 1000);\r\n  }\r\n\r\n  // Cập nhật thông tin khách hàng\r\n  async editTaxCode() {\r\n    this.listRoleBranchOrigin = [];\r\n    if (this.role_branch) {\r\n      const roleUser = await this.listService.getDataUserLocalStorege();\r\n      if (roleUser) {\r\n        this.listRoleBranchOrigin = await this.handleListRoleBranch(roleUser);\r\n      } else {\r\n        this.listRoleBranchOrigin = await this.listService.handleListRoleBranchUser();\r\n      }\r\n      if (Array.isArray(this.listRoleBranchOrigin) && this.listRoleBranchOrigin.length > 0) {\r\n        if (this.listRoleBranchOrigin.length === 2) {\r\n          this.listRoleBranchOrigin = this.listRoleBranchOrigin.filter(value => {\r\n            if (value.code !== 'TAT_CA') {\r\n              value.checked = true;\r\n              return value;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n    const initialState = {\r\n      isVisibleGhiVaThemMoi: false,\r\n      role_branch: this.role_branch,\r\n      roleBranchStatus: this.listRoleBranchOrigin\r\n    };\r\n    this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n      class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const submodal = this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveData) {\r\n        const customer = this.bsModalRef.content.successSaveData;\r\n        this.frmData.customer_name = customer.name;\r\n        this.frmData.buyer_tax_code = customer.tax_code;\r\n        this.frmData.buyer_name = customer.contact_person_name;\r\n        this.frmData.buyer_address = customer.business_address;\r\n        this.frmData.customer_code = customer.code;\r\n        this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n        if (customer.email) {\r\n          this.frmData.buyer_email = customer.email;\r\n          this.emails = [];\r\n          const stringDataEmailGet = customer.email.split(';');\r\n          for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n            this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n          }\r\n        } else {\r\n          this.frmData.buyer_email = customer.email;\r\n          this.emails = [];\r\n        }\r\n        if (customer.bank_account_number) {\r\n          this.frmData.bank_account_number = customer.bank_account_number;\r\n        }\r\n        if (customer.bank_name) {\r\n          this.frmData.bank_name = customer.bank_name;\r\n        }\r\n      }\r\n      // submodal.unsubscribe();\r\n    });\r\n  }\r\n  async handleListRoleBranch(roleUser) {\r\n    let arrList: any;\r\n    arrList = await this.listService.handleGetDMtoCustomer(roleUser);\r\n    if (Array.isArray(arrList) && arrList.length) {\r\n      return this.listService.handleCheckAll(arrList);\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  // Thay đổi ngày biên lai\r\n  changeDateTime = (e) => {\r\n    if (e.value) {\r\n      let year = \"\";\r\n      if (VStringService._getValueToString(e.value) != \"\")\r\n        year = VStringService._getValueToString(e.value).substring(4, 2);\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n      }\r\n      let templates = _.cloneDeep(this.select.templates);\r\n      this.select.templates.length = 0;\r\n      if (templates && templates.length > 0) {\r\n        templates.forEach(item => {\r\n          if (VStringService._getValueToString(item.name) != \"\")\r\n            item.name = item.name.replace(item.name.substring(4, 2), year);\r\n          this.select.templates.push(item);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Thay đổi hình thức thanh toán\r\n  paymentMethodChange = (e) => {\r\n    // const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    // if (_obj) {\r\n    //   this.frmData.payment_method_name = _obj.name;\r\n    // }\r\n\r\n  };\r\n\r\n  // Thay đổi loại tiền\r\n  currencyCodeChange = (e) => {\r\n    if (this.frmData.currency_code === 'VND') {\r\n      this.frmData.currency_rate = null;\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(this.frmData.total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.total_payment), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-product-grip',\r\n  templateUrl: './product-grip.component.html',\r\n  styleUrls: ['./product-grip.component.scss']\r\n})\r\nexport class ProductGripComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","module.exports = \"<dx-data-grid id=\\\"gridContainer\\\" [dataSource]=\\\"invoiceList\\\" [showRowLines]=\\\"true\\\"\\r\\n  [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\" [columnResizingMode]=\\\"true\\\" [columnAutoWidth]=\\\"true\\\"\\r\\n  [wordWrapEnabled]=\\\"true\\\">\\r\\n  <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxi-column cellTemplate=\\\"invoiceNumber\\\" [allowEditing]=\\\"false\\\" dataField=\\\"invoice_number\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.ticket_number' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  <dxi-column dataField=\\\"template_code\\\" [allowEditing]=\\\"false\\\" caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}\\\"\\r\\n    [width]=\\\"110\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column cellTemplate=\\\"invoiceSeries\\\" dataField=\\\"template.invoice_series\\\" [allowEditing]=\\\"false\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\" [width]=\\\"90\\\" alignment=\\\"center\\\" [allowSorting]=\\\"false\\\"\\r\\n    [allowFiltering]=\\\"false\\\"></dxi-column>\\r\\n  <dxi-column dataField=\\\"invoice_date\\\" [allowEditing]=\\\"false\\\" caption=\\\"{{ 'GRID.INVOICE.ticket_date' | translate }}\\\"\\r\\n    [width]=\\\"110\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column dataField=\\\"buyer_tax_code\\\" [allowEditing]=\\\"false\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\" [width]=\\\"120\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column cellTemplate=\\\"customerName\\\" [allowEditing]=\\\"false\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column dataField=\\\"buyer_email\\\" [allowEditing]=\\\"true\\\" caption=\\\"Email\\\" [width]=\\\"190\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p>{{ d.data.template.template_code }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'invoiceSeries'\\\">\\r\\n    <p>{{ d.data.bill_series || d.data.invoice_series || d.data.template.invoice_series }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n    <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n    <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name || 'Hóa đơn chờ ký' }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n    <a class=\\\"gach-chan\\\" (click)=\\\"view(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number\\r\\n      }}<span *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n  </div>\\r\\n  <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n  <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n</dx-data-grid>\\r\\n\\r\\n<div class=\\\"wrappe-note\\\">\\r\\n  <div style=\\\"margin-left: 18px;\\\">\\r\\n    <a style=\\\"color: silver;text-decoration: underline;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.note1}}: </a><a\\r\\n      style=\\\"color: silver;font-size: 90%;\\\"> Nhập danh sách email. Mỗi email cách nhau bởi dấu ;</a>\\r\\n  </div>\\r\\n  <div style=\\\"margin-top: 5px;margin-left: 18px;\\\">\\r\\n    <a style=\\\"color: silver;font-size: 90%;\\\">Ví dụ: admin@efy.com.vn;sale@efy.com.vn</a>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"footer-btn\\\">\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\"\\r\\n    (click)=\\\"dongy()\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\"\\r\\n    (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\"","module.exports = \".wrappe-note{margin-top:20px;margin-bottom:20px}.footer-btn{display:flex;justify-content:flex-end}\\n\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Library } from '@core/library';\r\nimport { AuthService } from '@core/services';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { TicketService } from '@modules/ticket/shared/ticket.service';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { PreviewTicketComponent } from '@shared/components/preview-ticket/preview-ticket.component';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\n\r\n@Component({\r\n  selector: 'app-many-receive',\r\n  templateUrl: './many-receive.component.html',\r\n  styleUrls: ['./many-receive.component.scss']\r\n})\r\nexport class ManyReceiveComponent implements OnInit {\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private customersService: CustomersService,\r\n    private vatService: VatService,\r\n    private ticketService: TicketService,\r\n    private modalService: BsModalService,\r\n    private templateService: TemplateService,\r\n  ) { }\r\n\r\n  @Input() invoiceList: any[];\r\n  _translate: any\r\n  invoice_list: ArrayStore;\r\n  arrInvoiceList: string;\r\n  ngOnInit() {\r\n    this.invoice_list = new ArrayStore({\r\n      key: 'id',\r\n      data: this.invoiceList\r\n    });\r\n    this._translate = this.authService.getTranslate();\r\n    this.arrInvoiceList = JSON.stringify(this.invoiceList);\r\n  }\r\n\r\n  view(data) {\r\n    Library.showloading();\r\n    let is_multi_product = false;\r\n    if (data.id && data.template_id) {\r\n      const temp = this.templateService.show(data.template_id).subscribe(rbs => {\r\n        if (rbs.status === 'success') {\r\n          let invoiceTemplate = rbs.data.template;\r\n          const sub = this.vatService.view(data.id, true).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              if (rs.data.data.item && rs.data.data.item.length > 0) {\r\n                let invoice = rs.data.data.item[0];\r\n                const rawHtml = this.ticketService.createFormTypeBase64(invoice, invoiceTemplate, is_multi_product);\r\n                const initialState = {\r\n                  dataPreview: rawHtml + '</html>',\r\n                  isPreview: true\r\n                };\r\n                this.modalService.show(PreviewTicketComponent, {\r\n                  class: 'modal-lg full-modal-ticket1',\r\n                  initialState,\r\n                  backdrop: 'static',\r\n                  keyboard: false\r\n                });\r\n              }\r\n            }\r\n          },\r\n            (err) => { Library.notify(err.message, 'error'); },\r\n            () => { Library.hideloading(); }\r\n          )\r\n        }\r\n      },\r\n        (err) => {\r\n          Library.notify(err.message, 'error');\r\n        },\r\n        () => { temp.unsubscribe() }\r\n      )\r\n    }\r\n  }\r\n  dong() {\r\n    this.bsModalRef.content.successSaveItem = 'success';\r\n    this.bsModalRef.hide();\r\n  }\r\n\r\n  _validForm() {\r\n    let invoices = this.invoiceList.filter(item => item.buyer_email);\r\n    return invoices.length == this.invoiceList.length;\r\n  }\r\n\r\n\r\n  async dongy() {\r\n    const data: any = [];\r\n    if(!this._validForm()){\r\n      Library.notify(\"Email\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    this.invoiceList.forEach(item => {\r\n      data.push({ id: item.id, email: item.buyer_email });\r\n    });\r\n    Library.showloading();\r\n    await this.vatService.sendMail(data).toPromise()\r\n      .then(\r\n        rs => {\r\n          if (rs.status === 'success') {\r\n            Library.notify(this._translate.CONTROLL.LABEL.send_access_email, 'success');\r\n            this.bsModalRef.content.successSaveItem = 'success_mail';\r\n            this.bsModalRef.hide();\r\n            Library.hideloading();\r\n            return true;\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n            Library.hideloading();\r\n            return false;\r\n          }\r\n        },\r\n        reason => {\r\n          Library.hideloading();\r\n          Library.notify(reason, 'error');\r\n          return false;\r\n        }\r\n      );\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"wrapper-form-data\\\">\\r\\n  <dx-form tabIndex=\\\"thongTinHoaDon\\\" [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n    <dxi-item  itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n      <dxi-item editorType=\\\"dxTextBox\\\" dataField=\\\"username\\\">\\r\\n        <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.name_receiver }}\\\"></dxo-label>\\r\\n        <dxi-validation-rule type=\\\"required\\\" message=\\\"{{ _translate.CONTROLL.LABEL.name_receiver }} {{ _translate.VALIDATION.required }}\\\">\\r\\n      </dxi-validation-rule>\\r\\n      </dxi-item>\\r\\n      <dxi-item editorType=\\\"dxTextBox\\\" dataField=\\\"email\\\">\\r\\n        <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.email }}\\\"></dxo-label>\\r\\n        <dxi-validation-rule type=\\\"required\\\" message=\\\"{{ _translate.CONTROLL.LABEL.email }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n      </dxi-item>\\r\\n    </dxi-item>\\r\\n  </dx-form>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"wrappe-note\\\">\\r\\n  <div style=\\\"margin-left: 18px;\\\">\\r\\n    <a style=\\\"color: silver;text-decoration: underline;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.note1}}: </a><a\\r\\n      style=\\\"color: silver;font-size: 90%;\\\"> Nhập danh sách email. Mỗi email cách nhau bởi dấu ;</a>\\r\\n  </div>\\r\\n  <div style=\\\"margin-top: 5px;margin-left: 18px;\\\">\\r\\n    <a style=\\\"color: silver;font-size: 90%;\\\">Ví dụ: admin@efy.com.vn;sale@efy.com.vn</a>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"footer-btn\\\">\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\"\\r\\n    (click)=\\\"dongy()\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\"\\r\\n    (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\"","module.exports = \".wrappe-note{margin-top:20px;margin-bottom:20px}.footer-btn{display:flex;justify-content:flex-end}.wrapper-form-data{width:70%;margin:auto}\\n\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { AuthService } from '@core/services';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport { BsModalRef } from 'ngx-bootstrap';\r\nimport * as _ from 'lodash';\r\nimport { Library } from '@core/library';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\n@Component({\r\n  selector: 'app-one-receive',\r\n  templateUrl: './one-receive.component.html',\r\n  styleUrls: ['./one-receive.component.scss']\r\n})\r\nexport class OneReceiveComponent implements OnInit {\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n  ) { }\r\n\r\n  frmData: any = {};\r\n  @Input() invoiceList: any[];\r\n  _translate: any\r\n  invoice_list: ArrayStore\r\n  ngOnInit() {\r\n    this.invoice_list = new ArrayStore({\r\n      key: 'id',\r\n      data: this.invoiceList\r\n    });\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  onEditingStart(e) {\r\n    // e.component.saveEditData();\r\n  }\r\n  selectionChanged(data: any) {\r\n\r\n  }\r\n  onEditorPrepared(e) { }\r\n  onEditorPreparing(e) { }\r\n  view(data) { }\r\n  dong() {\r\n    this.bsModalRef.content.successSaveItem = 'success';\r\n    this.bsModalRef.hide();\r\n  }\r\n  dongy() {\r\n    if (this.invoiceList.length > 0) {\r\n      const ids = _.map(this.invoiceList, 'id');\r\n      if (!this._validForm())\r\n        return false;\r\n      Library.showloading();\r\n      let data = {\r\n        ids: ids,\r\n        email: this.frmData.email,\r\n        buyer_name: this.frmData.username\r\n      }\r\n      let sub = this.vatService.sendEmailOneReceive(data).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          Library.notify(this._translate.CONTROLL.LABEL.send_access_email, 'success');\r\n            this.bsModalRef.content.successSaveItem = 'success_mail';\r\n            this.bsModalRef.hide();\r\n            Library.hideloading();\r\n        }\r\n      },\r\n        (err) => {\r\n          Library.notify(err.message, 'error')\r\n        },\r\n        () => {\r\n          sub.unsubscribe();\r\n          Library.hideloading();\r\n        }\r\n      )\r\n    }\r\n  }\r\n  _validForm() {\r\n    if (!this.frmData.username) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.name_receiver + \" \" + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    if (!this.frmData.email) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.email + \" \" + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.LABEL.email_received_ticket}}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <div class=\\\"container-fluid\\\" style=\\\"margin-bottom: 20px;\\\">\\r\\n\\r\\n    <div id=\\\"config-tabs-ticket\\\">\\r\\n      <dx-tabs [dataSource]=\\\"tabs\\\" [selectedIndex]=\\\"selectedIndex\\\" (onItemClick)=\\\"selectTab($event)\\\">\\r\\n      </dx-tabs>\\r\\n    </div>\\r\\n    <div [ngClass]=\\\"cssClass.tabMany\\\" class=\\\"wrapper-form\\\">\\r\\n      <app-many-receive [invoiceList]=\\\"invoiceList\\\"></app-many-receive>\\r\\n    </div>\\r\\n    <div [ngClass]=\\\"cssClass.tabOne\\\" class=\\\"wrapper-form\\\">\\r\\n      <app-one-receive [invoiceList]=\\\"invoiceList\\\"></app-one-receive>\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <!-- <dx-tab-panel #tabPanel [selectedIndex]=\\\"0\\\" [loop]=\\\"true\\\" [animationEnabled]=\\\"true\\\"\\r\\n      [swipeEnabled]=\\\"true\\\">\\r\\n      <dxi-item title=\\\"{{_translate.CONTROLL.LABEL.many_receive}}\\\">\\r\\n        <div *dxTemplate class=\\\"wrapper-form\\\">\\r\\n        </div>\\r\\n      </dxi-item>\\r\\n      <dxi-item title=\\\"{{_translate.CONTROLL.LABEL.one_receive}}\\\">\\r\\n        <div *dxTemplate>\\r\\n          <div *dxTemplate class=\\\"wrapper-form\\\">\\r\\n          </div>\\r\\n        </div>\\r\\n      </dxi-item>\\r\\n    </dx-tab-panel> -->\\r\\n  </div>\\r\\n</div>\"","module.exports = \".wrapper-form{padding:40px;padding-bottom:0px}.hidden{display:none}#config-tabs-ticket{width:100%;border-bottom:1px solid #ddd}#config-tabs-ticket .dx-tabs{width:40%;border-bottom:0}::ng-deep #config-tabs-ticket .dx-tab{padding:4px}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { AuthService } from '@core/services';\r\nimport { BsModalRef } from 'ngx-bootstrap';\r\n\r\n@Component({\r\n  selector: 'app-send-email-ticket',\r\n  templateUrl: './send-email-ticket.component.html',\r\n  styleUrls: ['./send-email-ticket.component.scss']\r\n})\r\nexport class SendEmailTicketComponent implements OnInit {\r\n\r\n  _translate: any;\r\n  companies: any;\r\n  invoiceList: any;\r\n  tabs = [];\r\n  selectedIndex = 0;\r\n  currencyCode = 'GUI_NHIEU_NGUOI';\r\n  cssClass = {\r\n    tabMany: '',\r\n    tabOne: 'hidden'\r\n  }\r\n  \r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private authService: AuthService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    this.tabs = [\r\n      {\r\n        id: 0,\r\n        code: \"GUI_NHIEU_NGUOI\",\r\n        text: this._translate.CONTROLL.LABEL.many_receive,\r\n      },\r\n      {\r\n        id: 0,\r\n        code: \"GUI_MOT_NGUOI\",\r\n        text: this._translate.CONTROLL.LABEL.one_receive,\r\n      },\r\n    ]\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.companies = [\r\n      { title: this._translate.CONTROLL.LABEL.many_receive },\r\n      { title: this._translate.CONTROLL.LABEL.one_receive },\r\n    ];\r\n    // this.invoiceList = []\r\n  }\r\n  randomTest() {\r\n    return Math.random()*100;\r\n  }\r\n  selectTab(e) {\r\n    const tab = e.itemData.code;\r\n    if(tab == 'GUI_NHIEU_NGUOI') {\r\n      this.cssClass.tabMany = '';\r\n      this.cssClass.tabOne = 'hidden';\r\n    }else{\r\n      this.cssClass.tabMany = 'hidden';\r\n      this.cssClass.tabOne = '';\r\n    }\r\n\r\n  }\r\n\r\n  \r\n\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n  <div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.BUTTON.send}} EMAIL</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n      <dxi-item dataField=\\\"email\\\" [label]=\\\"{text: 'Email'}\\\">\\r\\n        <dxi-validation-rule type=\\\"required\\\" message=\\\"Email {{_translate.VALIDATION.required}}\\\"></dxi-validation-rule>\\r\\n        <!-- <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.email\\\" message=\\\"Email {{_translate.VALIDATION.not_pattern}}\\\"></dxi-validation-rule> -->\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n    <div style=\\\"margin-top: 10px;\\\">\\r\\n        <a style=\\\"color: silver;text-decoration: underline;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.note1}}: </a><a style=\\\"color: silver;font-size: 90%;\\\"> {{_translate.CONTROLL.LABEL.note_email}}</a>\\r\\n      </div>\\r\\n      <div style=\\\"margin-top: 5px;\\\">\\r\\n          <a style=\\\"color: silver;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.example}}: admin@efy.com.vn;sale@efy.com.vn</a>\\r\\n        </div>\\r\\n  </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n    </dx-button>\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    </dx-button>\\r\\n  </div>\\r\\n</form>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\nimport { pattern } from '@config/pattern';\r\nimport { Library } from '@core/library';\r\nimport { AuthService } from '@core/services';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap';\r\n\r\n@Component({\r\n  selector: 'app-send-email',\r\n  templateUrl: './send-email.component.html',\r\n  styleUrls: ['./send-email.component.scss']\r\n})\r\nexport class SendEmailComponent implements OnInit {\r\n\r\n  invoice_id: any;\r\n  frmData: any = {};\r\n  email: string;\r\n  customer_id: string;\r\n  pattern = pattern;\r\n  _translate: any;\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private authService: AuthService,\r\n    private customersService: CustomersService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.frmData.email = this.email;\r\n  }\r\n\r\n  onSubmit(e) {\r\n    let data = [{\r\n      id: this.invoice_id,\r\n      email: this.frmData.email\r\n    }];\r\n    Library.showloading();\r\n    let sub = this.vatService.sendMail(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let updateEmail = {\r\n          id: this.customer_id,\r\n          email: this.frmData.email\r\n        };\r\n        this.customersService.uploadEmailtoCustomer(updateEmail).subscribe(rsl => {\r\n          if (rsl.status == 'success') {\r\n\r\n          }\r\n        });\r\n        Library.notify(this._translate.NOTIFY.send_mail_success, 'success');\r\n        this.bsModalRef.content.successSaveItem = \"success_mail\";\r\n        this.bsModalRef.hide();\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map, catchError } from 'rxjs/operators';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { Library, Helper, sEnum, AuthService } from '@core/index';\r\nimport { forkJoin } from 'rxjs';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { UsersService } from '@modules/users/shared';\r\n@Injectable()\r\nexport class TicketResolver implements Resolve<any[]> {\r\n    constructor(\r\n        private vatService: VatService,\r\n        private listsService: ListsService,\r\n        private router: Router,\r\n        private authService: AuthService,\r\n    ) { }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n        Library.showloading();\r\n        let _countDm = 0;\r\n        let dataJoin = [];\r\n        let dataDM: any;\r\n        let invoice_id = route.paramMap.get('invoiceId');\r\n        let arr = [\r\n            {\r\n                \"code\": \"DM_NHOM_KHACH_HANG\",\r\n                \"order\": 0\r\n            },\r\n            {\r\n                \"code\": \"DM_LOAI_TIEN\",\r\n                \"order\": 0\r\n            },\r\n            {\r\n                \"code\": \"DM_HINH_THUC_THANH_TOAN\",\r\n                \"order\": 0\r\n            },\r\n            {\r\n                \"code\": \"DM_DON_VI_TINH\",\r\n                \"order\": 0\r\n            },\r\n            {\r\n                \"code\": \"DM_TY_LE_VAT\",\r\n                \"order\": 0\r\n            },\r\n            {\r\n                \"code\": \"DM_DINH_KHOAN\",\r\n                \"order\": 0\r\n            },\r\n            {\r\n                \"code\": \"DM_NOI_XUAT_HOA_DON\",\r\n                \"order\": 0\r\n            },\r\n            {\r\n                \"code\": \"DM_QUOC_GIA\",\r\n                \"order\": 0\r\n            },\r\n            {\r\n                \"code\": \"DM_TAI_KHOAN_NGAN_HANG\",\r\n                \"order\": 0\r\n            },\r\n        ];\r\n        dataDM = this.listsService.getDMBy(arr);\r\n        if (dataDM.length > 0) {\r\n            dataDM.forEach(element => {\r\n                dataJoin.push(element);\r\n            });\r\n        }\r\n        _countDm = dataDM.length;\r\n        let isEdit = false;\r\n        if (invoice_id)\r\n            isEdit = true;\r\n        let dataRecord = this.vatService.getTicketResolver(invoice_id);\r\n        if (dataRecord.length > 0) {\r\n            dataRecord.forEach(element => {\r\n                dataJoin.push(element);\r\n            });\r\n        }\r\n        let dataForkJoin = forkJoin(dataJoin);\r\n\r\n        return dataForkJoin.pipe(\r\n            take(1),\r\n            map(rs => {\r\n                Library.hideloading();\r\n                let status = sEnum.statusApi.success;\r\n                for (let index = 0; index < rs.length; index++) {\r\n                    if (rs[index].status != sEnum.statusApi.success) {\r\n                        Library.notify(rs[index].message, \"error\");\r\n                        this.router.navigate(['/system/ticket-invoice']);\r\n                        status = sEnum.statusApi.error;\r\n                        break;\r\n                    }\r\n                }\r\n                if (status == sEnum.statusApi.success) {\r\n                    if (dataDM.length > 0) {\r\n                        let _data = [];\r\n                        rs.forEach((element, i) => {\r\n                            if (i < dataDM.length) {\r\n                                _data.push(element);\r\n                            }\r\n                        });\r\n                        this.authService.setDMLocal(_data);\r\n                    }\r\n                    let templates;\r\n                    if (isEdit) {\r\n                        templates = Helper.convertTemplatesToInvoiceResolver(rs[dataJoin.length - 2]);\r\n                        return [\r\n                            {\r\n                                products: rs[_countDm].data.products,\r\n                                templates: templates,\r\n                                isEdit: isEdit,\r\n                                invoices: rs[dataJoin.length - 1].data.invoice\r\n                            }\r\n\r\n                        ];\r\n                    }\r\n                    else {\r\n                        templates = Helper.convertTemplatesToInvoiceResolver(rs[dataJoin.length - 1]);\r\n                        return [\r\n                            {\r\n                                products: rs[_countDm].data.products,\r\n                                templates: templates,\r\n                                isEdit: isEdit,\r\n                            }\r\n                        ];\r\n                    }\r\n                }\r\n                else\r\n                    return null;\r\n            })\r\n        );\r\n    }\r\n}\r\n@Injectable()\r\nexport class TicketResolverIndex implements Resolve<any[]> {\r\n    constructor(\r\n        private vatService: VatService,\r\n        private usersService: UsersService,\r\n    ) { }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n        return this.usersService.getAllUser('?fields[]=id&fields[]=name&')\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport * as QRCode from 'qrcode';\r\nimport * as moment from 'moment';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AuthService } from '@core/services';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TicketService {\r\n  invoice_date = '';\r\n  _translate: any;\r\n  _language: string;\r\n  configs: any = {};\r\n\r\n  constructor(\r\n    public translate: TranslateService,\r\n    private authService: AuthService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    this._language = this.authService.getLanguage();\r\n    translate.use(this._language);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param invoice \r\n   * @param invoiceTemplate \r\n   * @param is_multi_product: Vé là loại 1 sp hay nhiều sp\r\n   * @param options Các tuỳ chọn: \r\n   *    - inVe: in vé ra máy in nhiệt\r\n   *    - inChuyenDoi: In chuyển đổi\r\n   *    - isPreview: Màn xem trước?\r\n   * @returns \r\n   */\r\n  createFormTypeBase64(invoice, invoiceTemplate, is_multi_product, options: any = {}) {\r\n    let rawHtml = JSON.parse(Base64.decode(invoiceTemplate.raw_file));\r\n    rawHtml = rawHtml.html + '</html>';\r\n    this.invoice_date = ''\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(rawHtml, 'text/html');\r\n    // test ảnh\r\n    // const divBackground:any = doc.querySelector('.logo-template-right');\r\n    // if(divBackground) {\r\n    //   let url_image:string = divBackground.style.backgroundImage;\r\n    //   url_image = url_image.slice(4, -1).replace(/[\"']/g, '');\r\n    //   let img:any = doc.createElement('img');\r\n    //   img.src = url_image;\r\n    //   img.style.width = '100%';\r\n    //   divBackground.style.background = \"none\";\r\n    //   divBackground.appendChild(img);\r\n    // }\r\n\r\n    const is_not_display_hhmmss = invoice.invoice.is_not_display_hhmmss;\r\n    //Thêm viền cho vé\r\n    const container: any = doc.querySelector('.container');\r\n    if (container) {\r\n      if (!options || (options && !options.inVe)) {\r\n        container.style.borderRadius = '5px';\r\n        container.style.border = '2px solid rgb(0, 149, 249)';\r\n        container.style.padding = '20px';\r\n        container.style.boxShadow = 'rgba(0, 0, 0, 0.2) 0px 0px 10px';\r\n        container.style.margin = 'auto';\r\n      } else if (options && options.inVe) {\r\n        // set đường viền cho vùng ký\r\n        const efyEsignNone: any = doc.querySelector('.efy-esign-none');\r\n        if (efyEsignNone) {\r\n          efyEsignNone.style.borderWidth = '2px';\r\n        }\r\n      }\r\n    }\r\n\r\n    //invoice-number\r\n    const invoice_number: any = doc.querySelector('.invoice-number');\r\n    if (invoice_number) {\r\n      invoice_number.textContent = invoice.invoice.invoice_number ? invoice.invoice.invoice_number : \"\";\r\n    }\r\n    const invoice_sign_date: any = doc.querySelector('.efy-sign-date');\r\n    const seler_sign_name: any = doc.querySelector('.seler-sign-name');\r\n    const kySoBenBan: any = doc.querySelector('.ky-so-ben-ban');\r\n    const KylblKySoBenBan: any = doc.querySelector('.da-duoc-ky-so-ben-ban');\r\n    if (options && options.isPreview) {\r\n      kySoBenBan.style.display = \"none\";\r\n      if (KylblKySoBenBan)\r\n        KylblKySoBenBan.style.display = \"none\";\r\n    } else {\r\n      // Bên bán ký ?\r\n      if (KylblKySoBenBan && !invoice.invoice.is_view_signature) {\r\n        KylblKySoBenBan.style.display = \"none\";\r\n        kySoBenBan.style.display = \"none\";\r\n\r\n      } else {\r\n        // Ngày ký/ký bởi\r\n        if (invoice_sign_date && invoice.invoice.invoice_sign_date) {\r\n          if (is_not_display_hhmmss) {\r\n            invoice_sign_date.textContent = moment(invoice.invoice.invoice_sign_date).format(\"DD/MM/YYYY\");\r\n          } else {\r\n            invoice_sign_date.textContent = moment(invoice.invoice.invoice_sign_date).format(\"DD/MM/YYYY HH:mm:ss\");\r\n          }\r\n        }\r\n        if (seler_sign_name) {\r\n          seler_sign_name.textContent = invoice.seler.sign_name ? invoice.seler.sign_name : invoice.seler.name;\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    // mã cqt\r\n    const maCoQuanThue: any = doc.querySelector('.ma-co-quan-thue');\r\n    if (maCoQuanThue) {\r\n      maCoQuanThue.textContent = invoice.invoice.tax_authority_code;\r\n    }\r\n    // thue-mien-giam-nq43\r\n    if (invoice.invoice.is_resolution_43) {\r\n      const mienGiam43: any = doc.querySelector('.thue-mien-giam-nq43');\r\n      if (mienGiam43) {\r\n        mienGiam43.textContent = \"Đã giảm \" + invoice.invoice.money_resolution_43 + this._translate.THONG_TIN.tinh_thue_nq101;\r\n        const parentThueMienGiam: any = doc.querySelector('.parent-thue-mien-giam-nq43');\r\n        if (parentThueMienGiam) {\r\n          parentThueMienGiam.style.display = 'block';\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    if (invoice.invoice.invoice_date) {\r\n      this.invoice_date = moment(invoice.invoice.invoice_date).format(\"DD/MM/YYYY\");\r\n    }\r\n    let buyer_email = \"\";\r\n    if (invoice.customer.email)\r\n      buyer_email = invoice.customer.email.replace(/;/g, '; ');\r\n\r\n    // Giá tiền\r\n    let total_payment: any = doc.querySelector('.total-payment')\r\n    if (total_payment) {\r\n      total_payment.textContent = invoice.invoice.total_payment\r\n    }\r\n    let arrMap = {\r\n      // 'gia_tien': {\r\n      //   id: 'f0f2a367-8ca8-006a-eb0c-cf3261f00999',\r\n      //   value: invoice.invoice.total_payment\r\n      // },\r\n      'nguoi_xuat': {\r\n        id: 'a188b9ae-40c4-11ee-be56-0242ac120002',\r\n        value: invoice.invoice.user_name_export\r\n      },\r\n      'ho_ten_nguoi_mua': {\r\n        id: '9c103984-576d-c322-7843-bdacf97ac189',\r\n        value: invoice.customer.contact\r\n      },\r\n      'ten_don_vi': {\r\n        id: '8c103984-576d-c322-7843-bdacf97ac189',\r\n        value: invoice.customer.name\r\n      },\r\n      'mst': {\r\n        id: '8d903984-576d-c322-7843-bdacf97ac100',\r\n        value: invoice.customer.tax_number\r\n      },\r\n      'dia_chi': {\r\n        id: '7c103984-576d-c322-7843-bdacf97ac189',\r\n        value: invoice.customer.address\r\n      },\r\n      'email': {\r\n        id: '8e31d4c8-40c2-11ee-be56-0242ac120002',\r\n        value: buyer_email\r\n      },\r\n      'sdt': {\r\n        id: '11111121-549a-01ea-e507-cc7b0ab28a69',\r\n        value: invoice.customer.tel\r\n      },\r\n    }\r\n\r\n    // in chuyển đổi\r\n    if (options && options.inChuyenDoi) {\r\n      let e: any = doc.querySelector('.childparent-ngay_chuyen_doi')\r\n      if (e)\r\n        e.style.display = 'block';\r\n      e = doc.querySelector('.childparent-nguoi_chuyen_doi')\r\n      if (e)\r\n        e.style.display = 'block';\r\n      let textInChuyenDoi: any = doc.querySelector('.childparent-ban-the-hien-ve-the')\r\n      if (textInChuyenDoi) {\r\n        textInChuyenDoi.style.display = 'unset'\r\n      }\r\n      const nguoiChuyenDoi: any = doc.querySelector('.nguoi_chuyen_doi');\r\n      if (nguoiChuyenDoi) {\r\n        if (this.configs && !this.configs.system_parameter.dont_display_conversion_name) {\r\n          nguoiChuyenDoi.textContent = invoice.invoice.name_print_convert;\r\n          console.log(123);\r\n        } else {\r\n          if (e)\r\n            e.style.display = 'none';\r\n        }\r\n      }\r\n\r\n      const ngayChuyenDoi = doc.querySelector('.ngay_chuyen_doi');\r\n      if (ngayChuyenDoi && invoice.invoice.date_print_convert) {\r\n        ngayChuyenDoi.textContent = moment(invoice.invoice.date_print_convert).format(\"DD/MM/YYYY HH:mm\");\r\n      }\r\n    }\r\n\r\n\r\n    for (const field in arrMap) {\r\n      const { id, value } = arrMap[field]\r\n      let xElements = doc.querySelector(`.value-${id}`);\r\n      if (xElements) {\r\n        xElements.textContent = value\r\n      }\r\n    }\r\n\r\n    const dateString = invoice.invoice.invoice_date;\r\n    if (dateString) {\r\n      const dateObject = new Date(dateString);\r\n      const year = dateObject.getFullYear();\r\n      const month = dateObject.getMonth() + 1;\r\n      const day = dateObject.getDate();\r\n      let xElements = doc.querySelector('.NgayHD');\r\n      xElements.textContent = `${day}`;\r\n      xElements = doc.querySelector('.ThangHD');\r\n      xElements.textContent = `${month}`;\r\n      xElements = doc.querySelector('.NamHD');\r\n      xElements.textContent = `${year}`;\r\n    }\r\n\r\n    // Trường mở rộng bên mua\r\n    if (invoice.invoice.invoice_options.length > 0) {\r\n      const inv_options = invoice.invoice.invoice_options;\r\n      inv_options.forEach(option => {\r\n        let xElements = doc.querySelector(`.value-${option.code}`);\r\n        if (xElements) {\r\n          let value = '';\r\n          if (option.data_type == 'ngay' && option.value) {\r\n            value = moment(option.value).format(\"DD/MM/YYYY\");\r\n          } else {\r\n            value = option.value;\r\n          }\r\n          xElements.textContent = value;\r\n        }\r\n      })\r\n    }\r\n\r\n    // Trường mở rộng hàng hoá\r\n    if (!is_multi_product) {\r\n\r\n      if (invoice.order.length > 0) {\r\n        if (invoice.order[0].extension && invoice.order[0].extension.length > 0) {\r\n          const pro_options = invoice.order[0].extension;\r\n          pro_options.forEach(option => {\r\n            let xElements = doc.querySelector(`.value-${option.code}`);\r\n            if (xElements) {\r\n              let value = '';\r\n              if (option.data_type == 'ngay' && option.value) {\r\n                value = moment(option.value).format(\"DD/MM/YYYY\");\r\n              } else {\r\n                value = option.value;\r\n              }\r\n              xElements.textContent = value;\r\n            }\r\n          })\r\n        }\r\n        // Tên hàng hoá\r\n        let xElements = doc.querySelector(`.value-8l873098-576d-c322-7843-bdacf97ac100`);\r\n        if (xElements) {\r\n          xElements.textContent = invoice.order[0].item_name;\r\n        }\r\n      }\r\n    }\r\n    let qrcodeElement: any = doc.querySelector('.qrcode');\r\n    if (invoice.invoice.qr_code) {\r\n      let qrcode = this.generateQRCode(invoice.invoice.qr_code)\r\n      if (qrcodeElement && qrcode) {\r\n        qrcodeElement.style.backgroundImage = 'url(' + qrcode + ')';\r\n        // qrcodeElement.style.backgroundRepeat = 'no-repeat';\r\n      }\r\n    }\r\n\r\n    // mã tra cứu\r\n    const matracuu: any = doc.querySelector('.matracuu');\r\n    if (matracuu && invoice.invoice.invoice_code && invoice.invoice.invoice_number) {\r\n      const link = doc.createElement('a');\r\n      link.href = `https://ihoadon.vn/kiem-tra/?shd=${invoice.invoice.invoice_number}&mtc=${invoice.invoice.invoice_code}`;\r\n      link.textContent = invoice.invoice.invoice_code;\r\n      link.target = \"_blank\";\r\n      link.style.textDecoration = \"none\";\r\n      matracuu.textContent = '';\r\n      matracuu.appendChild(link);\r\n    }\r\n\r\n    // Nếu chưa đc sinh số\r\n    if (!invoice.invoice.invoice_number) {\r\n      if (kySoBenBan)\r\n        kySoBenBan.style.display = \"none\";\r\n      if (KylblKySoBenBan)\r\n        KylblKySoBenBan.style.display = \"none\";\r\n      if (matracuu)\r\n        matracuu.style.display = \"none\";\r\n      // const maqrcode: any = doc.querySelector('.ma-qr-code')\r\n      // if (maqrcode)\r\n      //   maqrcode.style.display = \"none\";\r\n    }\r\n\r\n    return doc.documentElement.outerHTML;\r\n  }\r\n  generateQRCode(qr) {\r\n    let qrcode: any = null;\r\n    const qrcodeOptions = {\r\n      width: 140,\r\n      height: 140\r\n    }; // Kích thước của QR code\r\n    QRCode.toDataURL(qr, qrcodeOptions, (err, url) => {\r\n      if (err) throw err;\r\n      qrcode = url;\r\n    });\r\n    return qrcode;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { InvoiceComponent } from './components/invoice/invoice.component';\r\nimport { VatDeactivateGuard } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { TicketResolver, TicketResolverIndex } from './shared/ticket.resolver';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: IndexComponent,\r\n    resolve: { init: TicketResolverIndex },\r\n  },\r\n  {\r\n    path: 'create',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: TicketResolver },\r\n    data: { brec: 'create_ticket' }\r\n  },\r\n  {\r\n    path: ':invoiceId',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: {init: TicketResolver},\r\n    data: {brec: 'invoice_details'}\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class TicketRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TicketRoutingModule } from './ticket-routing.module';\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { InvoiceComponent } from './components/invoice/invoice.component';\r\nimport { ProductGripComponent } from './components/product-grip/product-grip.component';\r\nimport { devextremeModule } from '@core/library';\r\nimport { vTranslateModule } from '@core/module/v-translate.module';\r\nimport { VatSharedModule, SomeModule, ViewInvoiceMultipageComponent, SignatureOffComponent, SendDataForTaxComponent } from '@shared/index';\r\nimport { SharedModule } from '@shared/shared.module';\r\nimport { DxLookupModule, DxTooltipModule, DxPopoverModule } from 'devextreme-angular';\r\nimport { TagInputModule } from 'ngx-chips';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport { SearchTicketAdvancedComponent } from '@shared/components/search-ticket-advanced/search-ticket-advanced.component';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { SettingColumnComponent } from '@shared/components/setting-column/setting-column.component';\r\nimport { TicketResolver, TicketResolverIndex } from './shared/ticket.resolver';\r\nimport { PreviewTicketComponent } from '@shared/components/preview-ticket/preview-ticket.component';\r\nimport { HistoryInvoiceComponent } from './components/history-invoice/history-invoice.component';\r\nimport { ManyReceiveComponent } from './components/sendEmail/many-receive/many-receive.component';\r\nimport { OneReceiveComponent } from './components/sendEmail/one-receive/one-receive.component';\r\nimport { SendEmailTicketComponent } from './components/sendEmail/send-email-ticket/send-email-ticket.component';\r\nimport { SendEmailComponent } from './components/sendEmail/send-email/send-email.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    VatSharedModule,\r\n    SomeModule,\r\n    devextremeModule,\r\n    vTranslateModule,\r\n    DxLookupModule,\r\n    TagInputModule,\r\n    DxTooltipModule,\r\n    DxPopoverModule,\r\n    NgxPaginationModule,\r\n    NgxSpinnerModule,\r\n    TicketRoutingModule,\r\n  ],\r\n  exports: [\r\n    \r\n  ],\r\n  entryComponents: [\r\n    SearchTicketAdvancedComponent,\r\n    ViewInvoiceMultipageComponent,\r\n    SignatureOffComponent,\r\n    SettingColumnComponent,\r\n    PreviewTicketComponent,\r\n    HistoryInvoiceComponent,\r\n    SendDataForTaxComponent,\r\n    SendEmailTicketComponent,\r\n    SendEmailComponent,\r\n  ],\r\n  declarations: [\r\n    IndexComponent,\r\n    InvoiceComponent,\r\n    ProductGripComponent,\r\n    HistoryInvoiceComponent, \r\n    ManyReceiveComponent, \r\n    OneReceiveComponent, \r\n    SendEmailTicketComponent,\r\n    SendEmailComponent\r\n  ],\r\n  providers: [\r\n    VatService,\r\n    TicketResolver,\r\n    TicketResolverIndex\r\n  ]\r\n})\r\nexport class TicketModule { }\r\n","import {Injectable} from '@angular/core';\r\nimport {CanDeactivate} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\n\r\nexport interface CanComponentDeactivate {\r\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VatDeactivateGuard implements CanDeactivate<CanComponentDeactivate> {\r\n\r\n  canDeactivate(component: CanComponentDeactivate) {\r\n    return component.canDeactivate && component.canDeactivate();\r\n  }\r\n}\r\n"],"sourceRoot":""}