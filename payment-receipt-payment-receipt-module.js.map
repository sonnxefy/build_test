{"version":3,"sources":["webpack:///./src/app/core/library/invoice/my-bsmodel.service.ts","webpack:///./src/app/modules/payment-receipt/components/choose-hdck/choose-hdck.component.html","webpack:///./src/app/modules/payment-receipt/components/choose-hdck/choose-hdck.component.scss","webpack:///./src/app/modules/payment-receipt/components/choose-hdck/choose-hdck.component.ts","webpack:///./src/app/modules/payment-receipt/components/form-invoice/form-invoice.component.html","webpack:///./src/app/modules/payment-receipt/components/form-invoice/form-invoice.component.scss","webpack:///./src/app/modules/payment-receipt/components/form-invoice/form-invoice.component.ts","webpack:///./src/app/modules/payment-receipt/components/import-invoices-dt/import-invoices-dt.component.html","webpack:///./src/app/modules/payment-receipt/components/import-invoices-dt/import-invoices-dt.component.scss","webpack:///./src/app/modules/payment-receipt/components/import-invoices-dt/import-invoices-dt.component.ts","webpack:///./src/app/modules/payment-receipt/components/import-invoices/import-invoices.component.html","webpack:///./src/app/modules/payment-receipt/components/import-invoices/import-invoices.component.scss","webpack:///./src/app/modules/payment-receipt/components/import-invoices/import-invoices.component.ts","webpack:///./src/app/modules/payment-receipt/components/index/index.component.html","webpack:///./src/app/modules/payment-receipt/components/index/index.component.scss","webpack:///./src/app/modules/payment-receipt/components/index/index.component.ts","webpack:///./src/app/modules/payment-receipt/components/invoice/invoice.component.html","webpack:///./src/app/modules/payment-receipt/components/invoice/invoice.component.scss","webpack:///./src/app/modules/payment-receipt/components/invoice/invoice.component.ts","webpack:///./src/app/modules/payment-receipt/components/keep-number/keep-number.component.html","webpack:///./src/app/modules/payment-receipt/components/keep-number/keep-number.component.scss","webpack:///./src/app/modules/payment-receipt/components/keep-number/keep-number.component.ts","webpack:///./src/app/modules/payment-receipt/components/product-grip/product-grip.component.html","webpack:///./src/app/modules/payment-receipt/components/product-grip/product-grip.component.scss","webpack:///./src/app/modules/payment-receipt/components/product-grip/product-grip.component.ts","webpack:///./src/app/modules/payment-receipt/components/send-invoices/send-invoices.component.html","webpack:///./src/app/modules/payment-receipt/components/send-invoices/send-invoices.component.scss","webpack:///./src/app/modules/payment-receipt/components/send-invoices/send-invoices.component.ts","webpack:///./src/app/modules/payment-receipt/components/send-mail/send-mail.component.html","webpack:///./src/app/modules/payment-receipt/components/send-mail/send-mail.component.scss","webpack:///./src/app/modules/payment-receipt/components/send-mail/send-mail.component.ts","webpack:///./src/app/modules/payment-receipt/components/sign-many/sign-many.component.html","webpack:///./src/app/modules/payment-receipt/components/sign-many/sign-many.component.scss","webpack:///./src/app/modules/payment-receipt/components/sign-many/sign-many.component.ts","webpack:///./src/app/modules/payment-receipt/components/view-invoice/view-invoice.component.html","webpack:///./src/app/modules/payment-receipt/components/view-invoice/view-invoice.component.scss","webpack:///./src/app/modules/payment-receipt/components/view-invoice/view-invoice.component.ts","webpack:///./src/app/modules/payment-receipt/payment-receipt.module.ts","webpack:///./src/app/modules/payment-receipt/payment-receipt.routing.ts","webpack:///./src/app/modules/payment-receipt/shared/index.ts","webpack:///./src/app/modules/payment-receipt/shared/payment-receipt.model.ts","webpack:///./src/app/modules/payment-receipt/shared/payment-receipt.resolver.ts","webpack:///./src/app/modules/payment-receipt/shared/show-payment-receipt.resolver.ts","webpack:///./src/app/modules/vat/deactivate/vat-deactivate.guard.ts"],"names":[],"mappings":"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","file":"payment-receipt-payment-receipt-module.js","sourcesContent":["import { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nexport class MyBsModalService extends BsModalService {\r\n    \r\n}","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">DANH SÁCH HÓA ĐƠN CHỜ KÝ</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid \\r\\n    id=\\\"gridContainer\\\"\\r\\n    [dataSource]=\\\"invoiceList\\\"\\r\\n    [showRowLines]=\\\"true\\\"\\r\\n    [allowColumnResizing]=\\\"true\\\"\\r\\n    [(selectedRowKeys)]=\\\"selectedRows\\\"\\r\\n    [columnMinWidth]=\\\"50\\\"\\r\\n    [columnResizingMode]=\\\"true\\\"\\r\\n    [columnAutoWidth]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\">\\r\\n\\r\\n    <dxo-selection selectAllMode=\\\"page\\\" mode=\\\"single\\\"></dxo-selection>\\r\\n\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <dxi-column dataField=\\\"invoice_number\\\" caption=\\\"Số hóa đơn\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"Ngày HĐ\\\" [width]=\\\"110\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"Mã số thuế\\\" [width]=\\\"140\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"Tên đơn vị\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p>{{ d.data.customer_name || d.data.buyer_name || 'Hóa đơn chờ ký' }}</p>\\r\\n    </div>\\r\\n    \\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <!-- <dxo-paging [enabled]=\\\"false\\\"></dxo-paging> -->\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button text=\\\"Chọn\\\" icon=\\\"assets\\\\img\\\\icons\\\\Ghi.png\\\" type=\\\"default\\\" (click)=\\\"choose()\\\" [disabled]=\\\"!(selectedRows.length == 1)\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"Quay lại\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n  </dx-button>\\r\\n</div>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { Library} from '@core/index';\r\n\r\n@Component({\r\n  selector: 'app-choose-hdck',\r\n  templateUrl: './choose-hdck.component.html',\r\n  styleUrls: ['./choose-hdck.component.scss']\r\n})\r\nexport class ChooseHdckComponent implements OnInit {\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n  ) { }\r\n\r\n  selectedRows: Array<any> = [];\r\n\r\n  invoiceList: any;\r\n  invoiceNumberOrigin: any;\r\n  invoiceReleaseId: any;\r\n  onSave: any;\r\n\r\n  ngOnInit() {\r\n    // console.log(this.invoiceNumberOrigin);\r\n    // console.log(this.templateCode);\r\n    Library.showloading();\r\n    this.vatService.layCacHoaDonChoKy(this.invoiceNumberOrigin, this.invoiceReleaseId).subscribe((rs: any) => {\r\n      this.invoiceList = rs.data.invoices;\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  choose() {\r\n    this.onSave(this.selectedRows[0]);\r\n    this.bsModalRef.hide();\r\n  }\r\n\r\n}","module.exports = \"<div class=\\\"row invoice-form\\\">\\r\\n  <div class=\\\"col-md-8\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- mẫu biên lai -->\\r\\n        <dxi-item dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\" visibleIndex=\\\"1\\\"\\r\\n          [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.receipt_template }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.receipt_template }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Mã số thuế, mã khách hàng -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" [visible]=\\\"isShowHideFields('tax_code_and_customer_code')\\\"\\r\\n          visibleIndex=\\\"2\\\">\\r\\n          <dxi-item [template]=\\\"'templateTaxCode'\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.tax_code}}\\\">\\r\\n            </dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item [template]=\\\"'templateCustomerCode'\\\" [cssClass]=\\\"'max_right'\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_code}}\\\">\\r\\n            </dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Tên đơn vị nộp tiền -->\\r\\n        <dxi-item visibleIndex=\\\"3\\\" [visible]=\\\"isShowHideFields('customer_name')\\\" dataField=\\\"customer_name\\\"\\r\\n          [editorOptions]=\\\"{  disabled: disableTemplateInput()}\\\" [colSpan]=\\\"2\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.name_of_payer }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item visibleIndex=\\\"4\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\"\\r\\n          [visible]=\\\"isShowHideFields('payer_name_and_payer_phone')\\\">\\r\\n          <!-- Họ tên người nộp tiền -->\\r\\n          <dxi-item dataField=\\\"payer_name\\\" [cssClass]=\\\"'max_left'\\\" [editorOptions]=\\\"{  disabled: disableTemplateInput()}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payers_name }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- số điện thoại -->\\r\\n          <dxi-item dataField=\\\"payer_phone\\\" [cssClass]=\\\"'max_right'\\\" [editorOptions]=\\\"{  disabled: disableTemplateInput()}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.phone }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Địa chỉ -->\\r\\n        <dxi-item visibleIndex=\\\"5\\\" dataField=\\\"payer_address\\\" [visible]=\\\"isShowHideFields('payer_address')\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- email -->\\r\\n        <dxi-item visibleIndex=\\\"6\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item [label]=\\\"{text: 'Email'}\\\">\\r\\n            <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n              <div\\r\\n                class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n                <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                  <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                  </app-tag-input-email>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Loại phí, lệ phí -->\\r\\n        <dxi-item visibleIndex=\\\"7\\\" [template]=\\\"'templateFeeName'\\\" [visible]=\\\"isShowHideFields('fee_name')\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.fee_type }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.fee_type }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Số tiền -->\\r\\n        <dxi-item [cssClass]=\\\"'so-tien'\\\" editorType=\\\"dxNumberBox\\\" dataField=\\\"total_payment\\\"\\r\\n          [editorOptions]=\\\"{readOnly: readOnlyFields(),disabled: disableTemplateInput(), format:'#,###', onValueChanged: changeTotalPayment}\\\"\\r\\n          [visible]=\\\"isShowHideFields('total_payment')\\\" visibleIndex=\\\"8\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.amount_of_money  }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.amount_of_money }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Số tiền bằng chữ -->\\r\\n        <dxi-item dataField=\\\"total_payment_in_word\\\" [editorOptions]=\\\"{ disabled: disableTemplateInput()}\\\"\\r\\n          [visible]=\\\"isShowHideFields('total_payment_in_word')\\\" visibleIndex=\\\"9\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.total_payment_in_word }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.total_payment_in_word }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Số lượng biên lai và tổng tiền -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" [visible]=\\\"isShowHideFields('quantity_and_total')\\\" visibleIndex=\\\"10\\\">\\r\\n          <dxi-item [template]=\\\"'templateSoLuongBienLai'\\\" [editorOptions]=\\\"{disabled: disableTemplateInput()}\\\">\\r\\n            <dxo-label text=\\\"Số lượng biên lai\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ 'Số lượng biên lai' }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item [template]=\\\"'templateTongTien'\\\" cssClass='tong-tien-S' style=\\\"padding-top: 5px;\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.total_money }}\\\">\\r\\n            </dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <div *dxTemplate=\\\"let d of 'templateSoLuongBienLai'\\\" class=\\\"so-luong\\\">\\r\\n        <dx-number-box [value]=\\\"quantity\\\" (onValueChanged)=\\\"onChangeSoLuongBienLai($event)\\\" format='#,###'>\\r\\n        </dx-number-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'templateTongTien'\\\" class=\\\"tong-tien\\\">\\r\\n        <div style=\\\"font-weight: bold;color: red; padding-left: 6px;\\\">{{tong_tien_bien_lai | number }}</div>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'templateFeeName'\\\">\\r\\n        <dx-autocomplete valueExpr=\\\"name\\\" placeholder=\\\"Nhập tên loại phí, lệ phí...\\\" [dataSource]=\\\"feeArray\\\"\\r\\n          [(value)]=\\\"frmData.fee_name\\\" [readOnly]=\\\"readOnlyFields()\\\" (onItemClick)=\\\"feeChoose($event)\\\">\\r\\n          <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n            <span>{{ item.name }}</span>\\r\\n          </div>\\r\\n        </dx-autocomplete>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'templateTaxCode'\\\" style=\\\"display: grid;grid-template-columns: 1fr auto;width: 100%;\\\">\\r\\n        <dx-autocomplete valueExpr=\\\"tax_code\\\" placeholder=\\\"Tìm kiếm...\\\" [dataSource]=\\\"tax_codes\\\"\\r\\n          [(value)]=\\\"frmData.payer_tax_code\\\" [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"taxCodeChoose($event)\\\"\\r\\n          (onFocusOut)=\\\"updateTaxcodeInfo($event)\\\" (onValueChanged)=\\\"changeTaxCode($event)\\\">\\r\\n          <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n            <span>{{item.tax_code}}: {{ item.name }}</span>\\r\\n          </div>\\r\\n        </dx-autocomplete>\\r\\n        <button (click)=\\\"searchTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n          <i class=\\\"{{_translate.ICONS.search}}\\\" style=\\\"font-size: 22px;\\\"></i>\\r\\n        </button>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'templateCustomerCode'\\\"\\r\\n        style=\\\"display: grid;grid-template-columns: 1fr auto;width: 100%;\\\">\\r\\n        <dx-autocomplete valueExpr=\\\"code\\\" placeholder=\\\"Tìm kiếm...\\\" [dataSource]=\\\"customer_codes\\\"\\r\\n          [(value)]=\\\"frmData.customer_code\\\" [readOnly]=\\\"readOnlyCacTruongConLai\\\"\\r\\n          (onItemClick)=\\\"customerCodeChoose($event)\\\" (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n          <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n            <span>{{item.code}}: {{ item.name }}</span>\\r\\n          </div>\\r\\n        </dx-autocomplete>\\r\\n        <button (click)=\\\"editTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n          <i class=\\\"dx-icon fa fa-plus-circle icon-size\\\"></i>\\r\\n        </button>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n    <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\" [formData]=\\\"frmData\\\" [customerTempt]=\\\"customerTempt\\\"\\r\\n      [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'receipt_options'\\\"></app-form-extend>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-4\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- ngày biên lai -->\\r\\n        <dxi-item dataField=\\\"receipt_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n          [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate , onValueChanged: changeDateTime}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE.receipt_date }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Số biên lai -->\\r\\n        <dxi-item cssClass=\\\"so-bien-lai\\\" dataField=\\\"receipt_number\\\" [editorOptions]=\\\"{ readOnly: true, format:'#,###'}\\\"\\r\\n          editorType=\\\"dxNumberBox\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE.receipt_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Hình thức thanh toán -->\\r\\n        <dxi-item dataField=\\\"payment_method_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_method }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Loại tiền -->\\r\\n        <dxi-item dataField=\\\"currency_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.currency_code }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Tỷ giá -->\\r\\n        <dxi-item dataField=\\\"currency_rate\\\" editorType=\\\"dxNumberBox\\\"\\r\\n          [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: '#,###'}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.currency_rate }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <!-- <div class=\\\"col-md-12\\\" style=\\\"margin-top:7px;margin-bottom:7px\\\">\\r\\n    <dx-form *ngIf=\\\"!isTT78\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <ng-container *ngIf=\\\"configs.system_parameter.allow_keep_invoice_number && isShowButtonWaiteSign\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item name=\\\"btn-chossen-hdck\\\">\\r\\n              <dx-button id=\\\"btn-chossen-hdck\\\" (click)=\\\"showModalHdck()\\\" icon=\\\"assets\\\\img\\\\icons\\\\GiuSo.png\\\"\\r\\n                text=\\\"{{_translate.CONTROLL.BUTTON.select_inv_wait_sign}}\\\" type=\\\"default\\\"></dx-button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </ng-container>\\r\\n\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div> -->\\r\\n</div>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{_translate.CONFIRM.update_customer}}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{_translate.CONTROLL.LABEL.update}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \"::ng-deep .vat.invoice-number-create-invoice input{color:red;font-weight:bold}.request-card-hidden{display:none}.icon-size{font-size:21px;padding:2px 0}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code:focus{outline:none}::ng-deep .vat.invoice-note input{color:#0070C0;font-weight:bold}::ng-deep .vat.layout_input span.dx-field-item-label-content{width:141px !important}::ng-deep .layout_input_left span.dx-field-item-label-content{width:144px !important}::ng-deep .custom-tempt .dx-texteditor-container .dx-texteditor-input-container .dx-texteditor-input{padding:0px 9px}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align .dx-field-item-label .dx-field-item-label-content{min-width:171px !important}#advBtn{margin-top:0;width:5%}:host ::ng-deep .so-luong .dx-texteditor-input{padding:0px 9px 0px;text-align:right}:host ::ng-deep .so-tien .dx-texteditor-input{text-align:right}:host ::ng-deep .tong-tien .dx-box-item-content{padding-top:5px}:host ::ng-deep .so-bien-lai .dx-texteditor-input{font-weight:bold;color:red}.form-container{display:-ms-grid;display:grid;-ms-grid-columns:(1fr)[2];grid-template-columns:repeat(2, 1fr);grid-auto-rows:minmax(50px, auto);align-items:start;gap:20px}.tong-tien-S{padding-top:5px}\\n\"","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { ActivatedRoute, } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { pattern } from '@config/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { AddCustomerComponent } from '@shared/index';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { ChooseHdckComponent } from '../choose-hdck/choose-hdck.component';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport * as _ from 'lodash'\r\n\r\n@Component({\r\n  selector: 'vat-form-invoice',\r\n  templateUrl: './form-invoice.component.html',\r\n  styleUrls: ['./form-invoice.component.scss']\r\n})\r\nexport class FormInvoiceComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  routeSub: Subscription;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @ViewChild(FormExtendComponent) formExtend: FormExtendComponent\r\n  @Input() ttDaXuatHoaDon: boolean = false;\r\n  @Input() frmData: any;\r\n  @Input() type: any;\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() extentionGrid: any;\r\n  @Input() isShowButtonWaiteSign: boolean;\r\n  @Input() isTT78: boolean;\r\n  @Input() pkInvoiceSelectWaitSign: any;\r\n  @Input() infoDangKy: any;\r\n  @Input() inSanMotPhi: boolean = false;\r\n  @Input() inSanNhieuPhi: boolean = false;\r\n  @Input() inSan: boolean = false;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('onInvoiceCurrent') onInvoiceCurrent = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  @Output('onTemplateTT78TypeChange') onTemplateTT78TypeChange = new EventEmitter<any>();\r\n  @Output('changeGridProduct') changeGridProduct = new EventEmitter<any>();\r\n  @Output('changeSLBienLai') changeSLBienLai = new EventEmitter<any>();\r\n\r\n  originInvoiceNumber: any;\r\n  bsModalRef: BsModalRef;\r\n  bsModalHdckRef: BsModalRef;\r\n  select: any = {};\r\n  pattern = pattern;\r\n  tax_codes: any = [];\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  showTraLai = false;\r\n  disableInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuatOptions = [];\r\n  showPopup = false;\r\n  itemTest = [\r\n    { name: \"Mẫu không in sẵn mệnh giá 1 loại phí\", value: 1 },\r\n    { name: \"Mẫu không in sẵn mệnh giá nhiều loại phí\", value: 2 },\r\n    { name: \"Mẫu in sẵn mệnh giá\", value: 3 },\r\n  ]\r\n  mang_khong_in_san_mot_phi = [];\r\n  mang_khong_in_san_nhieu_phi = [];\r\n  mang_in_san_mot_phi = [];\r\n  mang_in_san_nhieu_phi = [];\r\n  customerCurent: any = {};\r\n  emails: any = [];\r\n  configs: any = {};\r\n  private arrEmail: any = [];\r\n  listRoleBranchOrigin: Array<any>;\r\n  role_branch: boolean;\r\n  isShowBanGiaoXe: boolean;\r\n  isShowBaoDuongXe: boolean;\r\n  // thay đổi disable của 3 input customer_name, buyer_name, buyer_address\r\n  tod: any = {};\r\n  _translate: any;\r\n  formItems = [];\r\n  tax_code_search: any;\r\n  customForms = [];\r\n  customerTempt = {};\r\n  dataTaxCode: any;\r\n  httpOptions = {\r\n    headers: new HttpHeaders({\r\n      'Authorization': `Bearer ${JSON.parse(localStorage.getItem('access_token')).value}`,\r\n      'TaxCode': JSON.parse(localStorage['currentUser']).account.tax_code,\r\n      'Content-Type': 'application/json',\r\n    })\r\n  };\r\n  feeArray: any = [];\r\n  quantity: number = null;\r\n  tong_tien_bien_lai: any;\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n    private http: HttpClient,\r\n    private listService: ListsService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadDataDefault();\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      this.configs = this.authService.getConfigs();\r\n      // put data DM for select\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.currency_codes = danh_muc.DM_LOAI_TIEN ? danh_muc.DM_LOAI_TIEN.data : null;\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        if (!this.frmData.id) {\r\n          temptTT78 = data.init[1];\r\n        }\r\n        else {\r\n          temptTT78 = data.init[3];\r\n        }\r\n        this.select.templatesTT78 = temptTT78;\r\n        if (this.frmData.id)\r\n          this.changeTemplateInvoice(this.frmData.receipt_date);\r\n      }\r\n    });\r\n    this.select.customer_object_codes = VSelectBoxService._customerObject(this._translate);\r\n    this.select.adjustment_forms = VSelectBoxService._adjustmentForms(this._translate);\r\n    this.select.adjustment_objects = VSelectBoxService._adjustmentObjects(this._translate);\r\n\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    this.feeArray = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getProductsForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n    this.getTemplate(this.frmData.template_id, false, null);\r\n    if (this.frmData.payer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.payer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n  }\r\n\r\n  createForm() {\r\n    this.form.instance.beginUpdate();\r\n    this.form.instance.itemOption('business_addressa', { label: { text: 'Đia chỉaaa' }, editorOptions: { placeholder: 'Nhập địa chỉ' } });\r\n    this.form.instance.endUpdate();\r\n  }\r\n\r\n  async editTaxCode() {\r\n    const initialState = {\r\n      isVisibleGhiVaThemMoi: false,\r\n      role_branch: this.role_branch,\r\n      roleBranchStatus: this.listRoleBranchOrigin\r\n    };\r\n    this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n      class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const submodal = this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveData) {\r\n        const customer = this.bsModalRef.content.successSaveData;\r\n        this.frmData.customer_name = customer.name;\r\n        this.frmData.payer_tax_code = customer.tax_code;\r\n        this.frmData.payer_name = customer.contact_person_name;\r\n        this.frmData.payer_address = customer.business_address;\r\n        this.frmData.customer_code = customer.code;\r\n        this.frmData.payer_phone = customer.contact_mobile;\r\n\r\n        if (customer.email) {\r\n          this.frmData.payer_email = customer.email;\r\n          this.emails = [];\r\n          const stringDataEmailGet = customer.email.split(';');\r\n          for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n            this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n          }\r\n        } else {\r\n          this.frmData.payer_email = customer.email;\r\n          this.emails = [];\r\n        }\r\n      }\r\n      submodal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ////// Tạo form mở rộng\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n\r\n  updateCustomerInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  updateTaxcodeInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.tax_code) !== VStringService._getValueToString(this.frmData.payer_tax_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (let key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.receipt_options = _dulieumorong;\r\n    });\r\n  }\r\n\r\n  async handleListRoleBranch(roleUser) {\r\n    let arrList: any;\r\n    arrList = await this.listService.handleGetDMtoCustomer(roleUser);\r\n    if (Array.isArray(arrList) && arrList.length) {\r\n      return this.listService.handleCheckAll(arrList);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  disableTemplateInput() {\r\n    if (this.frmData.invoice_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n  public removeReadonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n      // item.instance.resetValues();\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n  setDisabledByCustomer_object_code(value) {\r\n    this.tod.customer_name = false;\r\n    this.tod.buyer_name = false;\r\n    this.tod.buyer_address = false;\r\n    switch (value) {\r\n      case 'DOANH_NGHIEP':\r\n        break;\r\n      case 'CA_NHAN':\r\n        this.frmData.customer_name = '';\r\n        this.tod.customer_name = true;\r\n        break;\r\n      case 'KHACH_LE':\r\n        this.frmData.customer_name = '';\r\n        this.frmData.buyer_address = '';\r\n        this.tod.customer_name = true;\r\n        this.tod.buyer_address = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  getHtXuatValue() {\r\n    return this.frmData.status;\r\n  }\r\n\r\n  getFrmData() {\r\n    return this.frmData;\r\n  }\r\n\r\n  // sự kiện\r\n  taxCodeKeyUp = (e) => {\r\n    const str = this.frmData.buyer_tax_code;\r\n    const len = str.length;\r\n    if (len >= 3) {\r\n      this.vatService.searchMST(str).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          const arr = [];\r\n          rs.data.customers.forEach(item => {\r\n            arr.push(item);\r\n          });\r\n          this.tax_codes = arr;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  taxCodeChoose(e) {\r\n    this.changeInfoUnit(e, true);\r\n  }\r\n\r\n  changeInfoUnit(e, isMST) {\r\n    const customer = e.itemData;\r\n    this.frmData.customer_name = customer.name;\r\n    this.frmData.payer_name = customer.contact_person_name;\r\n    this.frmData.payer_address = customer.business_address;\r\n    if (isMST)\r\n      this.frmData.customer_code = customer.code;\r\n    else\r\n      this.frmData.payer_tax_code = customer.tax_code;\r\n    this.frmData.payer_phone = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.payer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.payer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    ////\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerCodeChoose(e) {\r\n    this.changeInfoUnit(e, false);\r\n  }\r\n\r\n  customerChanged = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.name) !== VStringService._getValueToString(this.frmData.customer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_person_name) !== VStringService._getValueToString(this.frmData.payer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_mobile) !== VStringService._getValueToString(this.frmData.payer_phone)\r\n              || VStringService._getValueToString(this.customerCurent.business_address) !== VStringService._getValueToString(this.frmData.payer_address)\r\n              || VStringService._getValueToString(this.customerCurent.email) !== VStringService._getValueToString(this.frmData.payer_email)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n  customer_object_codeChange = (e) => {\r\n    this.setDisabledByCustomer_object_code(e.value);\r\n  };\r\n\r\n  onChangeTem = (e) => {\r\n    this.getTemplate(e.value, true, e.previousValue);\r\n  };\r\n\r\n  currencyCodeChange = (e) => {\r\n    if (this.frmData.currency_code === 'VND') {\r\n      this.frmData.currency_rate = null;\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(this.frmData.total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n  currencyRateChange = (e) => {\r\n  };\r\n\r\n  exportPlaceChange = (e) => {\r\n    const _obj = this.select.export_places.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.export_address = _obj.dia_chi;\r\n      this.frmData.export_place_name = _obj.name;\r\n    }\r\n  };\r\n  bankAccountSellerChange = (e) => {\r\n    const _obj = this.select.list_bank_account_seller.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.seller_bank_account_name = _obj.name;\r\n      // this.frmData.export_place_name = _obj.name;\r\n    } else {\r\n      this.frmData.seller_bank_account_name = '';\r\n    }\r\n  };\r\n\r\n  paymentMethodChange = (e) => {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.payment_method_name = _obj.name;\r\n    }\r\n  };\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  capNhatDmKhachHang() {\r\n    this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.payer_tax_code);\r\n    this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n    this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n    this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.payer_name);\r\n    this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.payer_phone);\r\n    this.customerCurent.business_address = VStringService._getValueToString(this.frmData.payer_address);\r\n    this.customerCurent.email = VStringService._getValueToString(this.frmData.payer_email);\r\n    const data = { customer: this.customerCurent };\r\n    this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n      if (response.status === 'success') {\r\n        this.showPopup = false;\r\n      } else {\r\n        Library.notify(response.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n    });\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.payer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.payer_email = null;\r\n    }\r\n    this.customerChanged(null);\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n  /* Chọn hóa đơn chờ ký */\r\n  showModalHdck() {\r\n    let release = this.select.invoice_releases.filter(p => p.template_id == this.frmData.template_id)[0];\r\n    if (release) {\r\n      let invoiceReleaseId = release.value;\r\n      const initialState = {\r\n        invoiceNumberOrigin: \"0\",\r\n        invoiceReleaseId: invoiceReleaseId,\r\n        onSave: (data) => {\r\n          if (VStringService._getValueToString(this.pkInvoiceSelectWaitSign) != \"\") {\r\n            this.onInvoiceCurrent.emit(this.pkInvoiceSelectWaitSign);\r\n            this.frmData.status = sEnum.statusInv.ChoKy;\r\n          }\r\n          this.frmData.id = data.id;\r\n          this.frmData.invoice_date = data.invoice_date;\r\n          this.frmData.invoice_number = data.invoice_number;\r\n        }\r\n      };\r\n      this.bsModalHdckRef = this.modalService.show(ChooseHdckComponent, {\r\n        backdrop: 'static',\r\n        keyboard: false,\r\n        class: 'modal-lg full-modal',\r\n        initialState\r\n      });\r\n    }\r\n  }\r\n\r\n  changeDateTime = (e) => {\r\n    this.changeTemplateInvoice(e.value);\r\n  }\r\n\r\n  changeTaxCode(e) {\r\n    this.frmData.payer_tax_code = e.value\r\n  }\r\n  searchTaxCode() {\r\n    Library.showloading();\r\n    if (!this.frmData.payer_tax_code) {\r\n      Library.notify(\"Vui lòng nhập mã số thuế!\", \"error\")\r\n    } else {\r\n      this.vatService.getInfoCompany(this.frmData.payer_tax_code).subscribe(res => {\r\n        if (res.status == \"success\") {\r\n          this.dataTaxCode = res.data.customer;\r\n          this.frmData.customer_name = this.dataTaxCode.name;\r\n          this.frmData.payer_address = this.dataTaxCode.business_address;\r\n        }\r\n      })\r\n    }\r\n    setTimeout(() => {\r\n      Library.hideloading();\r\n    }, 1000);\r\n  }\r\n  rePaintForm(data) {\r\n    // Nếu là mẫu html\r\n    if (data.fields) {\r\n      Helper.resetObject(this.formItems)\r\n      this.customForms = [];\r\n      this.customerTempt = {};\r\n      const _arrayGrid = data.fields.filter(x => x.type === '5');\r\n      if (_arrayGrid && _arrayGrid.length > 0) {\r\n        this.extentionGrid.ma_hang = false;\r\n        this.extentionGrid.so_lo = false;\r\n        this.extentionGrid.han_dung = false;\r\n        this.extentionGrid.nuoc_san_xuat = false;\r\n        this.extentionGrid.don_hang_hop_dong = false;\r\n        this.extentionGrid.ma_quan_ly = false;\r\n        for (let i = 0; i < _arrayGrid.length; i++) {\r\n          const column = _arrayGrid[i]['name'];\r\n          const value = _arrayGrid[i]['is_show'];\r\n          const _ma = VStringService._convertToViKdau(column);\r\n          this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n        }\r\n      }\r\n      let _dulieumorong = _.cloneDeep(data.fields).filter(x => x.type === '4');\r\n      \r\n      const receipt_options = this.frmData.receipt_options;\r\n      if (receipt_options.length > 0) {\r\n          _dulieumorong = _dulieumorong.map((dl) => {\r\n          let option = receipt_options.find(x => x.code == dl.code)\r\n          if (option) {\r\n            dl.value = option.value;\r\n          }\r\n          return dl;\r\n        });\r\n      }\r\n      this.frmData.receipt_options = _dulieumorong;\r\n      if (_dulieumorong.length > 0) {\r\n        this.formExtend.createForm(this.customForms, _dulieumorong)\r\n      }\r\n      _dulieumorong.forEach(value => {\r\n        this.customerTempt[value.code] = value.value;\r\n      });\r\n    } else {\r\n      this.formItems = [];\r\n      this.customerTempt = {};\r\n      this.extentionGrid.ma_hang = false;\r\n    }\r\n  }\r\n  isShowHideFields(fieldName) {\r\n    if (this._oTemplateTT78.template_type == sEnum.templatetype.BienLaiKhongInSanMenhGia) {\r\n      if (!VStringService._attemptConvertBool(this._oTemplateTT78.is_multiple_fee))\r\n        return this.mang_khong_in_san_mot_phi.includes(fieldName);\r\n      else\r\n        return this.mang_khong_in_san_nhieu_phi.includes(fieldName);\r\n    }\r\n    if (this._oTemplateTT78.template_type == sEnum.templatetype.BienLaiInSanMenhGia) {\r\n      if (!VStringService._attemptConvertBool(this._oTemplateTT78.is_multiple_fee))\r\n        return this.mang_in_san_mot_phi.includes(fieldName);\r\n      else\r\n        return this.mang_in_san_nhieu_phi.includes(fieldName);\r\n    }\r\n    return false;\r\n  }\r\n  loadDataDefault() {\r\n    this.mang_khong_in_san_mot_phi = ['tax_code_and_customer_code', 'customer_name', 'payer_name_and_payer_phone', 'payer_address', 'email', 'fee_name', 'total_payment', 'total_payment_in_word'];\r\n    this.mang_khong_in_san_nhieu_phi = ['tax_code_and_customer_code', 'customer_name', 'payer_name_and_payer_phone', 'payer_address', 'email'];\r\n    this.mang_in_san_mot_phi = ['email', 'fee_name', 'quantity_and_total', 'total_payment', 'total_payment_in_word'];\r\n    this.mang_in_san_nhieu_phi = [];\r\n    this.quantity = 1;\r\n    this.changeSLBienLai.emit(1);\r\n  }\r\n  getTemplate(value, ischangeTemplate, previousValue) {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (item.value === value) {\r\n        Library.showloading();\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.receipt_series = item.receipt_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.frmData.template_type = item.template_type;\r\n        this.frmData.receipt_type = parseInt(item.is_multiple_fee);\r\n        this.onTemplateTT78TypeChange.emit(item);\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        this.updateData(item, ischangeTemplate, previousValue);\r\n        this.rePaintForm(item);\r\n        setTimeout(() => {\r\n          this.form.instance.repaint();\r\n        }, 0);\r\n        setTimeout(() => {\r\n          Library.hideloading();\r\n        }, 200);\r\n      }\r\n    });\r\n  }\r\n  /* Tính tiền */\r\n  onNumberChange() {\r\n\r\n  }\r\n  readOnlyFields() {\r\n    if (this.frmData.receipt_number)\r\n      return true;\r\n    else {\r\n      if (this._oTemplateTT78.template_type == sEnum.templatetype.BienLaiInSanMenhGia)\r\n        return true;\r\n      return false;\r\n    }\r\n  }\r\n  updateData(data, ischangeTemplate, previousValue) {\r\n    if (ischangeTemplate) {\r\n      let oPreviousTemp = this.select.templatesTT78.filter(p => p.value == previousValue)[0];\r\n      if (oPreviousTemp) {\r\n        if (oPreviousTemp.template_type == data.template_type) {\r\n          if (oPreviousTemp.is_multiple_fee == data.is_multiple_fee) {\r\n          }\r\n          else {\r\n            this.resetData(false);\r\n          }\r\n        }\r\n        else {\r\n          this.resetData(true);\r\n        }\r\n      }\r\n      else {\r\n        this.resetData(true);\r\n      }\r\n      if (this._oTemplateTT78.template_type == sEnum.templatetype.BienLaiInSanMenhGia) {\r\n        this.frmData.fee_name = data.fee_name;\r\n        this.frmData.total_payment = data.fee_money;\r\n        this.frmData.total_payment_in_word = Helper.tienBangChu(this.frmData.total_payment, 0, this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n      }\r\n    }\r\n    this.tinhtongtien();\r\n  }\r\n  resetData(isResetAll) {\r\n    this.frmData.fee_name = null;\r\n    this.frmData.total_payment = null;\r\n    this.frmData.total_payment_in_word = null;\r\n    this.changeGridProduct.emit();\r\n    this.frmData.receipt_options = [];\r\n    if (isResetAll) {\r\n      this.frmData.payer_tax_code = null;\r\n      this.frmData.payer_name = null;\r\n      this.frmData.payer_address = null;\r\n      this.frmData.payer_email = null;\r\n      this.frmData.payer_phone = null;\r\n      this.frmData.customer_code = null;\r\n      this.frmData.customer_name = null;\r\n      this.frmData.price = null;\r\n      this.frmData.quantity = null;\r\n      this.frmData.fee_code = null;\r\n      this.frmData.payer_tax_code = null;\r\n      this.frmData.customer_id = null;\r\n    }\r\n  }\r\n  feeChoose(e) {\r\n    const oFee = e.itemData;\r\n    this.frmData.fee_name = oFee.name;\r\n    this.frmData.total_payment = oFee.price;\r\n  }\r\n  changeTotalPayment = (e) => {\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(e.value, 0, currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n  tinhtongtien() {\r\n    if (this.frmData.total_payment != null && this.quantity != null)\r\n      this.tong_tien_bien_lai = this.frmData.total_payment * this.quantity;\r\n    else\r\n      this.tong_tien_bien_lai = null;\r\n  }\r\n  onChangeSoLuongBienLai(e) {\r\n    this.quantity = e.value;\r\n    this.tinhtongtien();\r\n    this.changeSLBienLai.emit(e.value);\r\n  }\r\n  changeTemplateInvoice(strDate) {\r\n    let year = \"\";\r\n    if (VStringService._getValueToString(strDate) != \"\")\r\n      year = VStringService._getValueToString(strDate).substring(4, 2);\r\n    else {\r\n      let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n      year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n    }\r\n    let templates = this.select.templatesTT78;\r\n    this.select.templatesTT78 = [];\r\n    if (templates && templates.length > 0) {\r\n      templates.forEach(item => {\r\n        if (VStringService._getValueToString(item.name) != \"\")\r\n          item.name = item.name.replace(item.name.substring(16, 18), year);\r\n        if (item.value === this.frmData.template_id) {\r\n          this.onTemplateTT78TypeChange.emit(item);\r\n        }\r\n        this.select.templatesTT78.push(item);\r\n      });\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"import-invoices\\\">\\r\\n  <form class=\\\"form-import-invoices\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">{{ 'Import thông tin biên lai từ excel' }}</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalImportRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\" style=\\\"padding-bottom: 0px;\\\">\\r\\n      <div class=\\\"row inport-selector\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">{{ 'Mẫu biên lai' }}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [items]=\\\"templatesTT78\\\" displayExpr=\\\"name\\\" [(value)]=\\\"template_id\\\"\\r\\n                               valueExpr=\\\"value\\\" [disabled]=\\\"disabledInvoiceReleases\\\"\\r\\n                               (onValueChanged)=\\\"onInvoiceTemplate($event)\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.file_name }}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-text-box [readOnly]=\\\"true\\\" style=\\\"width: 92.5%!important; border-style: solid!important;\\\"\\r\\n                             [value]=\\\"fileName\\\"></dx-text-box>\\r\\n              </div>\\r\\n              <div class=\\\"btn-select-file\\\" style=\\\"margin-left: 30px;margin-top: 13px;\\\">\\r\\n                <a href=\\\"javascript:void(0)\\\" (click)=\\\"napDuLieuTuBangKe()\\\" class=\\\"support-link\\\">\\r\\n                  <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx, .xls\\\" (change)=\\\"onFileChanged($event)\\\"\\r\\n                         multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n                  <span>{{ _translate.CONTROLL.LABEL.select_file }}</span>\\r\\n                </a>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        \\r\\n      </div>\\r\\n      <div class=\\\"note-template-import\\\">\\r\\n        <p><span style=\\\"font-weight: 600; color: red; padding-right: 5px;\\\">{{ _translate.CONTROLL.LABEL.note1 }}</span> {{ 'Chức năng này Import danh sách biên lai từ file Excel. File này cần' }}</p>\\r\\n        <p style=\\\"margin-left: 48px;\\\">{{ _translate.CONTROLL.LABEL.correct_format_download_template }} <a\\r\\n          href=\\\"javascript:void(0)\\\" style=\\\"font-weight: 600\\\" (click)=\\\"getFileTemp()\\\">{{ _translate.CONTROLL.LABEL.click_here }}</a></p>\\r\\n      </div>\\r\\n      <div class=\\\"read-file\\\">\\r\\n        <dx-button (click)=\\\"chonDocFile()\\\" text=\\\"{{ _translate.CONTROLL.LABEL.read_file_excel }}\\\" type=\\\"default\\\" [disabled]=\\\"isDisReadFile\\\"></dx-button>\\r\\n      </div>\\r\\n      <!-- phần table hiển thị -->\\r\\n      <div class=\\\"row invoice-table\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <dx-data-grid id=\\\"gridImportInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n                        [wordWrapEnabled]=\\\"true\\\" [columnAutoWidth]=\\\"false\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n                        [columnMinWidth]=\\\"50\\\"\\r\\n                        [columnResizingMode]=\\\"true\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n                        (onEditorPreparing)=\\\"onEditorPreparing($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\"\\r\\n                        (onCellPrepared)=\\\"onCellPrepared($event)\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n                        (onRowUpdated)=\\\"onRowUpdated($event)\\\" (onRowRemoving)=\\\"onRowRemoving($event)\\\"\\r\\n                        (onKeyDown)=\\\"onGripKeyDown($event)\\\">\\r\\n            <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n            <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\" [allowDeleting]=\\\"true\\\" [useIcons]=\\\"true\\\">\\r\\n            </dxo-editing>\\r\\n            <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n            <dxo-column-fixing [enabled]=\\\"true\\\"></dxo-column-fixing>\\r\\n            <!-- Số chứng từ -->\\r\\n            <dxi-column dataField=\\\"number_of_vouchers\\\" [width]=\\\"130\\\"\\r\\n                        caption=\\\"{{'Số chứng từ'}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n                        fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Ngày biên lai -->\\r\\n            <dxi-column dataField=\\\"receipt_date\\\"\\r\\n                        caption=\\\"{{'Ngày biên lai'}}\\\" [width]=\\\"140\\\" dataType=\\\"date\\\"\\r\\n                        format=\\\"dd/MM/yyyy\\\"\\r\\n                        dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n                        fixedPosition=\\\"left\\\">\\r\\n                      </dxi-column>\\r\\n            <!-- Mã số thuế -->\\r\\n            <dxi-column  dataField=\\\"payer_tax_code\\\" [width]=\\\"100\\\"\\r\\n                      caption=\\\"{{'Mã số thuế'}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n                      fixedPosition=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"taxCodePattern\\\" message=\\\"{{ _translate.CONTROLL.LABEL.tax_code }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n            <!-- Tên đơn vị nộp tiền -->\\r\\n            <dxi-column  dataField=\\\"customer_name\\\" [width]=\\\"180\\\"\\r\\n                        caption=\\\"{{'Tên đơn vị nộp tiền'}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n                        fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Họ tên người nộp tiền -->\\r\\n            <dxi-column  dataField=\\\"payer_name\\\" [width]=\\\"120\\\"\\r\\n                        caption=\\\"{{'Họ tên người nộp tiền'}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n                        fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Địa chỉ -->\\r\\n            <dxi-column  dataField=\\\"payer_address\\\" [width]=\\\"200\\\"\\r\\n                        caption=\\\"{{'Địa chỉ'}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Email -->\\r\\n            <dxi-column dataField=\\\"payer_email\\\" [width]=\\\"150\\\"\\r\\n                        caption=\\\"{{'Email'}}\\\" alignment=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"emailPattern\\\" message=\\\"Email {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n            <!-- Điện thoại -->\\r\\n            <dxi-column  dataField=\\\"payer_phone\\\" [width]=\\\"100\\\"\\r\\n                        caption=\\\"{{'Điện thoại'}}\\\" alignment=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"phonePattern\\\" message=\\\"{{ _translate.CONTROLL.LABEL.phone_number }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n            <!-- Hình thức thanh toán -->\\r\\n            <dxi-column dataField=\\\"payment_method_code\\\"\\r\\n                        [width]=\\\"100\\\" caption=\\\"{{'Hình thức thanh toán'}}\\\" alignment=\\\"left\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.payment_method_names\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n             <!-- Loại tiền -->\\r\\n             <dxi-column  dataField=\\\"currency_code\\\" [width]=\\\"77\\\"\\r\\n             caption=\\\"{{'Loại tiền'}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tỷ giá trên hóa đơn -->\\r\\n            <dxi-column dataField=\\\"currency_rate\\\"\\r\\n               caption=\\\"{{'Tỷ giá'}}\\\" [width]=\\\"100\\\"\\r\\n               [editorOptions]=\\\"{ format: formatter.ty_gia }\\\" [format]=\\\"formatter.ty_gia\\\" dataType=\\\"number\\\"\\r\\n               alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Mã loại phí, lệ phí -->\\r\\n            <dxi-column  dataField=\\\"fee_code\\\"\\r\\n                        [editorOptions]=\\\"{showClearButton: true}\\\" caption=\\\"{{'Mã loại phí, lệ phí'}}\\\"\\r\\n                        alignment=\\\"center\\\" [width]=\\\"100\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.products\\\" displayExpr=\\\"code\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Tên loại phí, lệ phí -->\\r\\n            <dxi-column  dataField=\\\"fee_name\\\" [width]=\\\"150\\\"\\r\\n                        caption=\\\"{{'Tên loại phí, lệ phí'}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Đơn vị tính -->\\r\\n            <dxi-column  dataField=\\\"unit_code\\\"\\r\\n                        [editorOptions]=\\\"lookupColumnOptions\\\" caption=\\\"{{'Đơn vị tính'}}\\\"\\r\\n                        [width]=\\\"100\\\"\\r\\n                        alignment=\\\"center\\\">\\r\\n                        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Số lượng -->\\r\\n            <dxi-column dataField=\\\"quantity\\\"\\r\\n                        caption=\\\"{{'Số lượng'}}\\\" [width]=\\\"100\\\"\\r\\n                        [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n                        alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Đơn giá -->\\r\\n            <dxi-column dataField=\\\"price\\\"\\r\\n                        caption=\\\"{{'Đơn giá'}}\\\" [width]=\\\"90\\\"\\r\\n                        [editorOptions]=\\\"{ format: formatter.don_gia }\\\"\\r\\n                        [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Thành tiền -->\\r\\n            <dxi-column  dataField=\\\"amount\\\"\\r\\n                        caption=\\\"{{'Thành tiền'}}\\\" [width]=\\\"109\\\"\\r\\n                        [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                        dataType=\\\"number\\\"\\r\\n                        alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n             <!-- Thành tiền -->\\r\\n            <dxi-column  dataField=\\\"amount_after_vat\\\"\\r\\n                        caption=\\\"{{'Tổng tiền'}}\\\" [width]=\\\"109\\\"\\r\\n                        [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                        dataType=\\\"number\\\"\\r\\n                        alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n              <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" ><i\\r\\n                class=\\\"fa fa-times\\\"></i></a>\\r\\n            </div>\\r\\n            <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n            <dxo-paging [enabled]=\\\"true\\\"></dxo-paging>\\r\\n          </dx-data-grid>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-md-7\\\">\\r\\n          <div class=\\\"note-footer\\\">\\r\\n            <p style=\\\"margin-left: 0;\\\"><span style=\\\"font-weight: 500; color: red;\\\">{{ _translate.GRID.GENERAL.note }}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.can_edit_delete_on_grid }}</p>\\r\\n            <p><span class=\\\"mau-vang\\\"> </span>{{ 'Số biên lai bị trùng với dữ liệu biên lai đã xuất' }}</p>\\r\\n            <p><span class=\\\"mau-do\\\"> </span>{{ _translate.CONTROLL.LABEL.red_incorrect_format }}</p>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"col-md-5\\\">\\r\\n          <div class=\\\"note-footer\\\" style=\\\"text-align: right; margin-right: 50px;\\\">\\r\\n            <p style=\\\"padding: 8px;\\\"></p>\\r\\n            <p>{{ 'Số biên lai hợp lệ' }} <span style=\\\"color: seagreen; font-weight: 600\\\">{{totalInvoiceInvalid}}</span></p>\\r\\n            <p>{{'Số biên lai bị sai định dạng thông tin' }} <span\\r\\n              style=\\\"color: red; font-weight: 600\\\">{{totalErrorInvoice}}</span></p>\\r\\n            <p>{{ 'Số biên lai bị trùng' }} <span style=\\\"color: yellow; font-weight: 600\\\">{{totalDuplicateInvoice}}</span></p>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"{{ 'Xem trước biên lai' }}\\\"\\r\\n                   (click)=\\\"preview()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isXuatThanhCong\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"{{ 'Xem biên lai' }}\\\" (click)=\\\"xemHoaDon()\\\"\\r\\n                   type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-8 btn-right\\\">\\r\\n        <dx-button text=\\\"{{ _translate.CONTROLL.BUTTON.come_back}}\\\" type=\\\"default\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" (click)=\\\"dong()\\\">\\r\\n        </dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"Ghi tạm\\\" icon=\\\"assets\\\\img\\\\icons\\\\GhiTam.png\\\" (click)=\\\"submit('LUU')\\\"\\r\\n          type=\\\"default\\\"></dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit && isAccessExportInv\\\" text=\\\"{{ 'Xuất biên lai'}}\\\"\\r\\n                   icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"submit('XUAT')\\\" type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.processing }}\\\"\\r\\n          [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n          [(visible)]=\\\"showPopupImport\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"500\\\" [height]=\\\"160\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\" [dragEnabled]=\\\"false\\\"\\r\\n          [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"popupCachNapDuLieu\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p>{{ _translate.CONTROLL.LABEL.please_choose_load_data }} </p>\\r\\n    <div class=\\\"text-center\\\" style=\\\"margin-top: 25px\\\">\\r\\n      <dx-button (click)=\\\"thayThe($event)\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"themTiep($event)\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</dx-popup>\\r\\n\"","module.exports = \".import-invoices .dx-texteditor{border-radius:0;display:inline-block;margin-right:8px;height:28px;max-height:32px}.import-invoices .select-file .field>div{display:inline-block;vertical-align:middle}.import-invoices .select-file{width:100%;display:inline-block;margin:0}.import-invoices .select-file .field .label{width:90px;margin-right:10px;text-align:right;margin-top:7px}.import-invoices .select-file .field .value{width:35% !important;margin-top:10px}.import-invoices .select-file .field.field-first{display:inline-block}.import-invoices .select-file .field.field-first .value{width:calc(100% - 150px) !important}::ng-deep .import-invoices .select-file .field .dx-texteditor{width:100% !important}.support-link{top:-2px;position:relative;padding:5px 25px 7px 25px;background-color:#337ab7;border-color:#2d6da3;color:#fff;text-decoration:none}.support-link.mgr-15{margin-right:15px}.support-link img{margin-right:10px;margin-top:-2px}#auto-input{margin-right:75px}.note-template-import{margin-top:10px;margin-left:52px;display:inline-block;width:39%}.read-file{display:inline-block;margin-left:6px;position:relative;top:-10px}.note-footer{margin-top:10px}.note-footer p{margin-left:20px;margin-bottom:5px}.mau-vang{padding-right:15px;margin-right:10px;background-color:yellow}.mau-do{padding-right:15px;margin-right:10px;background-color:red}::ng-deep #gridImportInvoice{height:400px}::ng-deep .btn-right{padding-right:0}::ng-deep .btn-right .dx-button{float:right}::ng-deep .btn-right .dx-button:last-child{margin-right:8px !important}::ng-deep #gridImportInvoice .dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit{width:40px;min-width:20px !important}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-validator.dx-datagrid-invalid .dx-highlight-outline::after{border:2px solid #d9534f}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-cell-modified .dx-highlight-outline::after{border-color:#fff}::ng-deep .form-import-invoices .inport-selector .dx-texteditor-input{padding-bottom:15px}::ng-deep .notify-modal{max-width:22%}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild, Input } from '@angular/core';\r\n\r\nimport { SocketService, AuthService, Library, sEnum, Helper, VChanggeMoneyService, VStringService, VPreviewInvService } from '@core/index';\r\n\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { ConfigColumnImportExcelComponent, NotifySuccessComponent } from '@shared/index';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String, StringBuilder } from 'typescript-string-operations';\r\nimport * as XLSX from 'xlsx';\r\nimport { pattern } from '@config/index';\r\nimport * as moment from 'moment';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { ViewInvoiceComponent } from '../view-invoice/view-invoice.component';\r\nimport { SignatureOffComponent } from '@shared/index';\r\ndeclare var $: any;\r\nimport { Location } from '@angular/common';\r\nimport { PaymentReceiptService } from '@modules/payment-receipt/shared/payment-receipt.service';\r\nimport { PaymentReceiptModel } from '@modules/payment-receipt/shared';\r\nimport * as _ from 'lodash';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-import-invoices-dt',\r\n  templateUrl: './import-invoices-dt.component.html',\r\n  styleUrls: ['./import-invoices-dt.component.scss']\r\n})\r\nexport class ImportInvoicesDtComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n\r\n  invoice_releases: any;\r\n  templatesTT78: any;\r\n  infoDangKy: any;\r\n  isHdGTGT: any;\r\n  fileName = \"\";\r\n  dataExcelFile: any;\r\n  target: DataTransfer;\r\n  isDisReadFile = true;\r\n  select: any = {};\r\n  isAccessExportInv: boolean = false;\r\n  configs: any;\r\n  formatter: any = {};\r\n  frmData = new PaymentReceiptModel(1);\r\n  fieldDisable = [\"number_of_vouchers\", \"receipt_date\", \"currency_code\", \"currency_rate\", \"payer_tax_code\", \"customer_name\", \"payer_name\", \"payer_address\", \"payer_email\", \"payer_phone\", \"payment_method_code\"];\r\n  invoice_release_id: any;\r\n  template_id: any;\r\n  receipt_date = \"\";\r\n  invoice_number = \"\";\r\n  isAllowEditInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuat = \"XuatVaKy\";\r\n  bsModalRef: BsModalRef;\r\n  listColumn: any = [];\r\n  htXuatOptions = [];\r\n  ioSignature: Subscription;\r\n  tempKiFile = 0;\r\n  ttDaXuatHoaDon: boolean = false; //Trạng thái đã xuất hóa đơn hay chưa\r\n  invoicesArr: any;\r\n  invoice: any;\r\n  totalInvoice = 0;\r\n  totalErrorInvoice = 0;\r\n  totalDuplicateInvoice = 0;\r\n  countInvoice = 1;\r\n  valueProgress: number = 0;\r\n  showPopupImport = false;\r\n  stopImport = false;\r\n  subXuatHoaDon: any;\r\n  subLuuChoXuat: any;\r\n  errorImport = false;\r\n  hoaDonImportChoXuat: any;\r\n  invoicesHaveNumberOfVouchers: any;\r\n  isBĐS: boolean = false; //Bất động sản\r\n  isPepsi: boolean = false; //pepsi\r\n  taxCodePattern = pattern.tax_code;\r\n  emailPattern = pattern.email;\r\n  phonePattern = pattern.phone;\r\n  datetimePattern = pattern.datetime;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  isVisibleBtnSubmit = true;\r\n  approveRequired = false;\r\n  dataFormGird = [];\r\n  disabledInvoiceReleases: boolean = false;\r\n  bsModalSignRef: BsModalRef;\r\n  invoicesId = [];\r\n  columns: any = [];\r\n  invoiceOptions: any = [];\r\n  is_multi_vat: any;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  popupCachNapDuLieu = false;\r\n  isThemTiep = true;\r\n  _translate: any;\r\n  currentUser: any;\r\n  nodeSign: any;\r\n  totalInvoiceInvalid: any;\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  isTT78: boolean = false;\r\n  template_code: any;\r\n  template_type: any;\r\n  receipt_series: any;\r\n  isPassNQ43: boolean = false;\r\n  oTemplate: any;\r\n  isXuatThanhCong: boolean = false;\r\n  receipt_sign_date: any;\r\n  search: any;\r\n  constructor(\r\n    public bsModalImportRef: BsModalRef,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private modalImportService: BsModalService,\r\n    public bsModalViewModel: BsModalRef,\r\n    private _location: Location,\r\n    private router: Router,\r\n    private paymentRService: PaymentReceiptService\r\n\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n  ngOnInit() {\r\n    //get  cấu hình\r\n    this.connectWebsocket();\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'keyData',\r\n      data: []\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.configs = this.authService.getConfigs();\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    if (this.templatesTT78 && this.templatesTT78.length > 0) {\r\n      this.templatesTT78 = this.templatesTT78.filter(p => p.template_type != sEnum.templatetype.BienLaiInSanMenhGia);\r\n      this.receipt_series = this.templatesTT78[0].receipt_series;\r\n      this.template_code = this.templatesTT78[0].template_code;\r\n      this.template_type = this.templatesTT78[0].template_type;\r\n      this.template_id = this.templatesTT78[0].value;\r\n      this.oTemplate = this.templatesTT78[0];\r\n    }\r\n    if (this.hoaDonImportChoXuat) {\r\n      this.receipt_date = this.hoaDonImportChoXuat[0].receipt_date ? moment(this.hoaDonImportChoXuat[0].receipt_date).format('YYYY-MM-DD HH:mm:ss') : \"\";\r\n      this.template_id = this.hoaDonImportChoXuat[0].template_id;\r\n      if (this.templatesTT78 && this.templatesTT78.length > 0) {\r\n        this.layDuLieuTuHoaDonChoXuat();\r\n      }\r\n    }\r\n    else\r\n      this.loadRow(10);\r\n    if (VStringService._getValueToString(this.template_id) != \"\" && this.templatesTT78 && this.templatesTT78.length > 0) {\r\n      let oFormRelease = this.templatesTT78.filter(p => p.value == this.template_id)[0];\r\n      if (oFormRelease) {\r\n        if (oFormRelease.fields && oFormRelease.fields.length > 0) {\r\n          const _dulieumorong = oFormRelease.fields.filter(x => x.type === '4');\r\n          if (_dulieumorong.length > 0) {\r\n            _dulieumorong.forEach(item => {\r\n              if (item.is_show) {\r\n                let oField = {\r\n                  column_code: item.code,\r\n                  column_name: item.name,\r\n                  is_visible: true\r\n                }\r\n                this.listColumn.push(oField);\r\n                if (item.data_type === 'chu') {\r\n                  let column =\r\n                  {\r\n                    caption: item.name,\r\n                    dataField: item.code,\r\n                    width: 150,\r\n                  };\r\n                  this.columns.push(column);\r\n                }\r\n                if (item.data_type === 'soluong') {\r\n                  let column =\r\n                  {\r\n                    caption: item.name,\r\n                    dataField: item.code,\r\n                    width: 150,\r\n                    dataType: \"number\",\r\n                    editorOptions: {\r\n                      format: '#,###'\r\n                    },\r\n                    format: '#,###'\r\n                  };\r\n                  this.columns.push(column);\r\n                }\r\n                if (item.data_type === 'ngay') {\r\n                  let column =\r\n                  {\r\n                    caption: item.name,\r\n                    dataField: item.code,\r\n                    width: 150,\r\n                    dataType: 'date',\r\n                    format: \"dd/MM/yyyy\",\r\n                    dateSerializationFormat: \"yyyy-MM-dd\"\r\n                  };\r\n                  this.columns.push(column);\r\n                }\r\n\r\n                let invoiceOption =\r\n                {\r\n                  code: item.code,\r\n                  name: item.name,\r\n                  value: '',\r\n                  data_type: item.data_type\r\n                }\r\n                this.invoiceOptions.push(invoiceOption);\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    let listpermissions = this.currentUser.user.permissions.split(',');\r\n    let _obj = listpermissions.filter(p => p == \"phe_duyet_bien_lai\");\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else\r\n      this.isAccessExportInv = false;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        if (item.product_name && item.unit_name) {\r\n          const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n          if (!obj1) {\r\n            if (VStringService._getValueToString(item.unit_code) == \"\")\r\n              item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n            let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n            if (oDuplicate)\r\n              item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n            this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n          }\r\n          else {\r\n            if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n              let oExistUnitCode = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (!oExistUnitCode)\r\n                this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n    this.createUpdateEvent();\r\n  }\r\n  ngAfterViewInit() {\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.push(item);\r\n      });\r\n    }\r\n  }\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.invoice.issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat();\r\n          } else {\r\n            this.invoice.invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoice.invoice_files.length) {\r\n              this.xuLiApiKhiXuat();\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.errorImport = true;\r\n        this.showPopupImport = false;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  layDuLieuTuHoaDonChoXuat() {\r\n    this.hoaDonImportChoXuat.forEach(invoice => {\r\n      // console.log(element)\r\n      for (let i = 0; i < invoice.receipt_fees.length; i++) {\r\n        let rowInvoice = new Object;\r\n        invoice.receipt_fees = invoice.receipt_fees.sort((itemA, itemB) => {\r\n          return itemA.order - itemB.order;\r\n        });\r\n        let product = invoice.receipt_fees[i];\r\n        this.template_id = invoice.template_id;\r\n        this.template_code = invoice.template_code;\r\n        this.template_type = invoice.template_type;\r\n        this.receipt_series = invoice.receipt_series;\r\n        if (i == 0) {\r\n          this.invoicesId.push(invoice.id)\r\n          rowInvoice[\"statusData\"] = \"INVALID\";\r\n          rowInvoice[\"id\"] = invoice.id;\r\n          rowInvoice[\"number_of_vouchers\"] = invoice.number_of_vouchers;\r\n          rowInvoice[\"customer_code\"] = invoice.customer_code;\r\n          rowInvoice[\"currency_code\"] = invoice.currency_code;\r\n          rowInvoice[\"payer_tax_code\"] = invoice.payer_tax_code;\r\n          rowInvoice[\"customer_name\"] = invoice.customer_name;\r\n          rowInvoice[\"payer_name\"] = invoice.payer_name;\r\n          rowInvoice[\"payer_address\"] = invoice.payer_address;\r\n          rowInvoice[\"payer_phone\"] = invoice.payer_phone;\r\n          rowInvoice[\"currency_rate\"] = invoice.currency_rate;\r\n          rowInvoice[\"payer_email\"] = invoice.payer_email;\r\n          rowInvoice[\"payment_method_code\"] = invoice.payment_method_code;\r\n          rowInvoice[\"payment_method_name\"] = invoice.payment_method_name;\r\n          rowInvoice[\"receipt_number\"] = invoice.invoice_number;\r\n          rowInvoice[\"receipt_date\"] = invoice.receipt_date;\r\n\r\n          /* Các trường mở rộng */\r\n          rowInvoice[\"receipt_options\"] = invoice.receipt_options;\r\n          if (rowInvoice[\"receipt_options\"] && rowInvoice[\"receipt_options\"].length > 0) {\r\n            rowInvoice[\"receipt_options\"].forEach(invOption => {\r\n              rowInvoice[invOption.code] = invOption.value;\r\n            });\r\n          }\r\n        } else {\r\n          rowInvoice[\"number_of_vouchers\"] = \"\";\r\n          rowInvoice[\"customer_code\"] = \"\";\r\n          rowInvoice[\"currency_code\"] = \"\";\r\n          rowInvoice[\"currency_rate\"] = null;\r\n          rowInvoice[\"payer_tax_code\"] = \"\";\r\n          rowInvoice[\"customer_name\"] = \"\";\r\n          rowInvoice[\"payer_name\"] = \"\";\r\n          rowInvoice[\"payer_address\"] = \"\";\r\n          rowInvoice[\"payer_phone\"] = \"\";\r\n          /////\r\n          rowInvoice[\"payer_email\"] = \"\";\r\n          rowInvoice[\"payment_method_code\"] = \"\";\r\n          rowInvoice[\"payment_method_name\"] = \"\";\r\n          /* Các trường mở rộng */\r\n          rowInvoice[\"receipt_options\"] = invoice.receipt_options;\r\n          if (rowInvoice[\"receipt_options\"] && rowInvoice[\"receipt_options\"].length > 0) {\r\n            rowInvoice[\"receipt_options\"].forEach(invOption => {\r\n              rowInvoice[invOption.code] = \"\";\r\n            });\r\n          }\r\n          rowInvoice[\"dataType\"] = \"HANG_HOA\";\r\n          rowInvoice[\"productNumberOfVouchers\"] = invoice.number_of_vouchers\r\n        }\r\n        rowInvoice[\"fee_code\"] = product.fee_code;\r\n        rowInvoice[\"fee_name\"] = product.fee_name;\r\n        rowInvoice[\"unit_code\"] = product.unit_code;\r\n        rowInvoice[\"unit_name\"] = product.unit_name;\r\n        rowInvoice[\"quantity\"] = product.quantity;\r\n        rowInvoice[\"price\"] = product.price;\r\n        rowInvoice[\"amount\"] = product.amount;\r\n        rowInvoice[\"vat\"] = product.vat;\r\n        rowInvoice[\"amount_after_vat\"] = product.amount_after_vat;\r\n        rowInvoice[\"order\"] = product.order;\r\n        rowInvoice[\"view_order\"] = product.view_order;\r\n        this.invoice_products.insert(rowInvoice);\r\n      }\r\n    });\r\n    this.checkStatusData();\r\n  }\r\n  cktmChange() {\r\n\r\n  }\r\n  loadRow(countRow) {\r\n    let tempRow = this.frmData.tempImportRow(countRow, this.isPepsi);\r\n    tempRow.forEach(element => {\r\n      this.invoice_products.insert(element);\r\n    });\r\n  }\r\n\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById(\"file-bang-ke\").click();\r\n    this.isThemTiep = false;\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n  }\r\n\r\n  log(val) { console.log(val); }\r\n\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"BK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.invoice_products.load().then((dataSource) => {\r\n          dataSource[rowIndex][\"file_attach\"] = fileAttachData;\r\n          dataSource[rowIndex][\"file_attach_name\"] = file.name;\r\n        });\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n\r\n  customizeText(e) {\r\n    if (!e.value) {\r\n      e.value = 0;\r\n    }\r\n    let formatter = new Intl.NumberFormat('ja-JP');\r\n    let totalMoney = formatter.format(parseFloat(e.value));\r\n    return totalMoney;\r\n  }\r\n\r\n  onFileChanged(evt) {\r\n    this.target = <DataTransfer>(evt.target);\r\n    this.fileName = this.target.files[0].name;\r\n    // this.fileSize = target.files[0].size/1024;\r\n    if (this.target.files.length !== 1) {\r\n      Library.notify('Không thể chọn nhiều file', 'error');\r\n      throw new Error('Không thể chọn nhiều file');\r\n    };\r\n    this.isDisReadFile = false;\r\n  }\r\n\r\n  addRow() {\r\n    let len, order;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      if (dataSource.length >= 1) {\r\n        len = dataSource.length;\r\n        order = dataSource[len - 1].order + 1;\r\n      } else {\r\n        order = 1;\r\n      }\r\n    });\r\n    if (this.isPepsi)\r\n      order = null;\r\n    let data = this.frmData.addImportRow(order, order);\r\n    this.invoice_products.insert(data);\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  getFileTemp() {\r\n    Library.showloading();\r\n    let data =\r\n    {\r\n      template_id: this.template_id\r\n    }\r\n    this.paymentRService.getFileTemmpImportReceipts(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất file Excel thành công\", 'success');\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    })\r\n  }\r\n\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return 'Hoàn thành: ' + percent + '%';\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình nạp dữ liệu sẽ dừng lại nếu bạn đóng cửa sổ này\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      if (this.subLuuChoXuat) {\r\n        this.subLuuChoXuat.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n      this.totalInvoice = 0;\r\n      this.isVisibleBtnSubmit = false;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  getDataFromGird() {\r\n    this.invoice_products.load().then((dataSource) => {\r\n      if (dataSource.length > 0) {\r\n        dataSource.forEach(row => {\r\n          if (row.number_of_vouchers || row.productNumberOfVouchers) {\r\n            this.dataFormGird.push(row);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  chonDocFile() {\r\n    this.popupCachNapDuLieu = true;\r\n  }\r\n\r\n  thayThe(e) {\r\n    this.isThemTiep = false;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  themTiep(e) {\r\n    this.isThemTiep = true;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  readFile() {\r\n    this.isDisReadFile = true;\r\n    Library.showloading();\r\n    const reader: FileReader = new FileReader();\r\n\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      let data = <any>(XLSX.utils.sheet_to_json(ws, { header: \"A\", range: 0 }));\r\n\r\n      let fileBangKe: any = document.getElementById(\"file-bang-ke\");\r\n      fileBangKe.value = \"\";\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"number_of_vouchers\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n        this.dataExcelFile = _arrData;\r\n        this.fillData(this.dataExcelFile);\r\n      }\r\n    };\r\n    reader.readAsBinaryString(this.target.files[0]);\r\n  }\r\n\r\n  fillData(fileData) {\r\n    this.getDataFromGird();\r\n    let numberOfVouchers = [];\r\n    let isValid = true;\r\n    let _index = 0;\r\n    if (!this.isThemTiep) {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.invoice_products.remove(item.keyData);\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n      let invoice = new Object;\r\n      if (element.number_of_vouchers) {\r\n        invoice[\"statusData\"] = \"INVALID\"\r\n        let invoiceDate = Helper.processDate(element.receipt_date);\r\n        if (invoiceDate == \"ERROR\") {\r\n          Library.notify(\"Ngày biên lai không đúng định dạng\", \"error\");\r\n          isValid = false;\r\n          return;\r\n        }\r\n        else\r\n          if (invoiceDate != \"\")\r\n            invoice[\"receipt_date\"] = invoiceDate;\r\n        invoice[\"payer_tax_code\"] = element.payer_tax_code ? element.payer_tax_code : \"\";\r\n        invoice[\"currency_code\"] = element.currency_code ? element.currency_code : \"VND\";\r\n        invoice[\"currency_rate\"] = element.currency_rate ? element.currency_rate : null;\r\n\r\n        invoice[\"customer_name\"] = element.customer_name ? element.customer_name : \"\";\r\n        invoice[\"payer_name\"] = element.payer_name ? element.payer_name : \"\";\r\n\r\n        invoice[\"payer_address\"] = element.payer_address ? element.payer_address : \"\";\r\n        invoice[\"payer_email\"] = element.payer_email ? element.payer_email : \"\";\r\n        invoice[\"payer_phone\"] = element.payer_phone ? element.payer_phone : \"\";\r\n        invoice[\"payment_method_code\"] = element.payment_method_name ? this.getPaymentMethodCodeByName(element.payment_method_name) : \"\";\r\n        invoice[\"payment_method_name\"] = element.payment_method_name ? element.payment_method_name : \"\";\r\n        invoice[\"fee_code\"] = element.fee_code ? element.fee_code : \"\";\r\n        invoice[\"fee_name\"] = element.fee_name ? element.fee_name : \"\";\r\n        if (invoice[\"fee_code\"] != \"\") {\r\n          let _obj = this.select.products.filter(p => p.code == invoice[\"fee_code\"])[0];\r\n          if (!_obj) {\r\n            let _objPush = {\r\n              code: invoice[\"fee_code\"],\r\n              name: invoice[\"fee_name\"],\r\n              mhvth: invoice[\"fee_code\"] + \": \" + invoice[\"fee_name\"],\r\n            }\r\n            this.select.products.push(_objPush);\r\n          }\r\n        }\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        invoice[\"amount\"] = element.amount ? Helper.toNumber(element.amount) : null;\r\n        invoice[\"amount_after_vat\"] = element.amount_after_vat ? Helper.toNumber(element.amount_after_vat) : null;\r\n        /* Các trường mở rộng */\r\n        let optionClone = _.cloneDeep(this.invoiceOptions);\r\n        optionClone.forEach(invOption => {\r\n          for (var key in element) {\r\n            if (invOption.code === key) {\r\n              if (invOption.data_type === 'ngay') {\r\n                let date = Helper.processDate(element[key]);\r\n                if (date == \"ERROR\") {\r\n                  Library.notify(invOption.name + \" không đúng định dạng\", \"error\");\r\n                  isValid = false;\r\n                  return;\r\n                }\r\n                else\r\n                  if (date != \"\")\r\n                    invOption.value = date;\r\n              }\r\n              else\r\n                invOption.value = element[key];\r\n            }\r\n          }\r\n        });\r\n        invoice[\"receipt_options\"] = optionClone;\r\n        /* Các trường mở rộng */\r\n        if (invoice[\"receipt_options\"] && invoice[\"receipt_options\"].length > 0) {\r\n          invoice[\"receipt_options\"].forEach(invOption => {\r\n            invoice[invOption.code] = invOption.value;\r\n          });\r\n        }\r\n        /////////////////////////////////////////////////////////////// HĐ xe\r\n        if (_index == 0) {\r\n          if (element.quantity) {\r\n            let arr = element.quantity.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.so_luong = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.so_luong = VChanggeMoneyService.formatDecimalColumn(0);\r\n\r\n          }\r\n          if (element.price) {\r\n            let arr = element.price.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.don_gia = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.don_gia = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.currency_rate) {\r\n            let arr = [];\r\n            arr = element.currency_rate.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.ty_gia = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.ty_gia = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.amount) {\r\n            let arr = element.amount.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.thanh_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.thanh_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.amount_after_vat) {\r\n            let arr = element.amount_after_vat.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n        }\r\n        _index++;\r\n        if (this.checkNumberOfVouchers(element.number_of_vouchers) != -1) {\r\n          let stt = 0;\r\n          this.invoice_products.load().then((dataSource) => {\r\n            let hanghoa = dataSource.filter(p => p.number_of_vouchers == element.number_of_vouchers || p.productNumberOfVouchers == element.number_of_vouchers)[0];\r\n            if (hanghoa)\r\n              stt = Math.max.apply(Math, dataSource.filter(p => p.number_of_vouchers == element.number_of_vouchers || p.productNumberOfVouchers == element.number_of_vouchers).map(function (o) { return o.order; }))\r\n            ++stt;\r\n          });\r\n          invoice[\"dataType\"] = \"HANG_HOA\";\r\n          invoice[\"number_of_vouchers\"] = \"\";\r\n          invoice[\"receipt_date\"] = \"\";\r\n          invoice[\"customer_code\"] = \"\";\r\n          invoice[\"currency_code\"] = \"\";\r\n          invoice[\"currency_rate\"] = null;\r\n          invoice[\"payer_tax_code\"] = \"\";\r\n          invoice[\"customer_name\"] = \"\";\r\n          invoice[\"payer_name\"] = \"\";\r\n          invoice[\"payer_address\"] = \"\";\r\n\r\n          invoice[\"payer_phone\"] = \"\";\r\n\r\n          invoice[\"payer_email\"] = \"\";\r\n          invoice[\"payment_method_name\"] = \"\";\r\n          invoice[\"payment_method_code\"] = \"\";\r\n          invoice[\"productNumberOfVouchers\"] = element.number_of_vouchers;\r\n          invoice[\"order\"] = stt;\r\n          /* Các trường mở rộng */\r\n          if (invoice[\"receipt_options\"] && invoice[\"receipt_options\"].length > 0) {\r\n            invoice[\"receipt_options\"].forEach(invOption => {\r\n              invoice[invOption.code] = \"\";\r\n            });\r\n          }\r\n          invoice[\"view_order\"] = stt;\r\n        } else {\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          numberOfVouchers.push(invoice[\"number_of_vouchers\"]);\r\n          invoice[\"order\"] = 1;\r\n          invoice[\"view_order\"] = 1;\r\n        }\r\n        this.invoice_products.insert(invoice);\r\n      }\r\n    });\r\n    if (!VStringService._attemptConvertBool(this.oTemplate.is_multiple_fee)) {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        let hanghoa = dataSource.filter(p => VStringService._getValueToString(p.productNumberOfVouchers) != \"\")[0];\r\n        if (hanghoa) {\r\n          Library.notify(\"Chỉ nhập 1 phí với mẫu biên lai 1 loại phí\", \"error\");\r\n          isValid = false;\r\n          return;\r\n        }\r\n      });\r\n    }\r\n    if (isValid) {\r\n      let dataTempt = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        let datagroup = dataSource.filter(p => p.number_of_vouchers);\r\n        if (datagroup && datagroup.length > 0) {\r\n          datagroup.forEach(e => {\r\n            let listItem = dataSource.filter(w => w.productNumberOfVouchers == e.number_of_vouchers);\r\n            dataTempt.push(e);\r\n            if (listItem && listItem.length > 0) {\r\n              listItem.forEach(inv => {\r\n                dataTempt.push(inv);\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n      this.invoicesHaveNumberOfVouchers = [];\r\n      if (this.configs.system_parameter.the_same_number_of_voucher) {\r\n        this.vatService.getInvoicesHaveNumberOfVouchers(numberOfVouchers).subscribe((res: any) => {\r\n          if (res.status == \"success\") {\r\n            this.invoicesHaveNumberOfVouchers = res.data.invoices;\r\n            this.checkDuplicateNumberOfVouchers(dataTempt);\r\n            this.checkStatusData();\r\n            this.dataGrid.instance.refresh();\r\n          }\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        this.checkDuplicateNumberOfVouchers(dataTempt);\r\n        this.checkStatusData();\r\n        this.dataGrid.instance.refresh();\r\n      }\r\n    }\r\n    this.createUpdateEvent();\r\n    Library.hideloading();\r\n\r\n  }\r\n\r\n  checkDuplicateNumberOfVouchers(data) {\r\n    if (this.isThemTiep) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        let foundOnGird = this.dataFormGird.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n        if (foundOnGird.length > 0 && data[i].number_of_vouchers && data[i].statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n          data[i].statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n        }\r\n      }\r\n      this.invoice_products = new ArrayStore({\r\n        key: 'keyData',\r\n        data: data\r\n      });\r\n      this.dataSource = new DataSource({\r\n        store: this.invoice_products\r\n      });\r\n    } else {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n      }\r\n      this.invoice_products = new ArrayStore({\r\n        key: 'keyData',\r\n        data: data\r\n      });\r\n      this.dataSource = new DataSource({\r\n        store: this.invoice_products\r\n      });\r\n    }\r\n    this.dataFormGird = [];\r\n  }\r\n\r\n  checkNumberOfVouchers(numberOfVouchers) {\r\n    let foundNumberOfVouchers;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      foundNumberOfVouchers = dataSource.findIndex((item) => {\r\n        return item.number_of_vouchers == numberOfVouchers;\r\n      });\r\n    });\r\n    return foundNumberOfVouchers;\r\n  }\r\n\r\n  checkStatusData() {\r\n    this.invoice_products.load().then((dataSource) => {\r\n      let invalid = dataSource.filter((item) => {\r\n        return item.number_of_vouchers && item.statusData == \"INVALID\";\r\n      });\r\n      let errorDuplicateDatabase = dataSource.filter((item) => {\r\n        return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_DATABASE\";\r\n      });\r\n      let errorDuplicateOngird = dataSource.filter((item) => {\r\n        return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_ONGIRD\";\r\n      });\r\n      let errorData = dataSource.filter((item) => {\r\n        return item.statusData == \"DATA_ERROR\";\r\n      });\r\n      this.totalInvoiceInvalid = invalid.length;\r\n      this.totalDuplicateInvoice = errorDuplicateDatabase.length;\r\n      this.totalErrorInvoice = errorDuplicateOngird.length + errorData.length;\r\n    });\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number == 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row) {\r\n      if (e.row.rowType === \"data\") {\r\n        e.items = [{\r\n          text: \"Thêm khách hàng\",\r\n          onItemClick: () => {\r\n            this.addRow();\r\n          }\r\n        },\r\n        {\r\n          text: \"Thêm hàng hóa\",\r\n          onItemClick: () => {\r\n            if (e.row.data.number_of_vouchers || e.row.data.productNumberOfVouchers) {\r\n              let temp = e.row.data.number_of_vouchers ? e.row.data.number_of_vouchers : e.row.data.productNumberOfVouchers;\r\n              this.invoice_products.load().then((dataSource) => {\r\n                let products = dataSource.filter((item) => {\r\n                  return item.number_of_vouchers == temp || item.productNumberOfVouchers == temp;\r\n                });\r\n                let data = this.frmData.addImportRow(products.length + 1, products.length + 1);\r\n                data.dataType = \"HANG_HOA\";\r\n                if (e.row.data.number_of_vouchers) {\r\n                  data[\"productNumberOfVouchers\"] = e.row.data.number_of_vouchers;\r\n                  dataSource.splice(e.rowIndex + products.length, 0, data);\r\n                } else {\r\n                  data[\"productNumberOfVouchers\"] = e.row.data.productNumberOfVouchers;\r\n                  let index = dataSource.map(function (e) { return e.number_of_vouchers; }).indexOf(e.row.data.number_of_vouchers);\r\n                  dataSource.splice(index + products.length - 1, 0, data);\r\n                }\r\n              });\r\n              this.dataGrid.instance.refresh();\r\n            } else {\r\n              Library.notify(\"Bạn chưa nhập số phiếu / chứng từ\", \"error\");\r\n            }\r\n          }\r\n        }];\r\n      }\r\n    }\r\n  }\r\n\r\n  onInvoiceTemplate(e) {\r\n    let selectedItem = e.component.option(\"selectedItem\");\r\n    this.template_id = e.value;\r\n    this.template_code = selectedItem.template_code;\r\n    this.template_type = selectedItem.template_type;\r\n    this.receipt_series = selectedItem.receipt_series;\r\n    this.oTemplate = selectedItem;\r\n    this.listColumn = [];\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.forEach((column, index) => {\r\n          if (column[\"dataField\"] == item.dataField)\r\n            this.dataGrid.columns.splice(index, 1);\r\n        });\r\n      });\r\n    }\r\n\r\n    this.columns = [];\r\n    this.invoiceOptions = [];\r\n\r\n    if (selectedItem.fields && selectedItem.fields.length > 0) {\r\n      const _dulieumorong = selectedItem.fields.filter(x => x.type === '4');\r\n      if (_dulieumorong.length > 0) {\r\n        _dulieumorong.forEach(item => {\r\n          if (item.is_show) {\r\n            let oField = {\r\n              column_code: item.code,\r\n              column_name: item.name,\r\n              is_visible: true\r\n            }\r\n            this.listColumn.push(oField);\r\n            if (item.data_type === 'chu') {\r\n              let column =\r\n              {\r\n                caption: item.name,\r\n                dataField: item.code,\r\n                width: 150,\r\n              };\r\n              this.columns.push(column);\r\n            }\r\n            if (item.data_type === 'soluong') {\r\n              let column =\r\n              {\r\n                caption: item.name,\r\n                dataField: item.code,\r\n                width: 150,\r\n                dataType: \"number\",\r\n                editorOptions: {\r\n                  format: '#,###'\r\n                },\r\n                format: '#,###'\r\n              };\r\n              this.columns.push(column);\r\n            }\r\n            if (item.data_type === 'ngay') {\r\n              let column =\r\n              {\r\n                caption: item.name,\r\n                dataField: item.code,\r\n                width: 150,\r\n                dataType: 'date',\r\n                format: \"dd/MM/yyyy\",\r\n                dateSerializationFormat: \"yyyy-MM-dd\"\r\n              };\r\n              this.columns.push(column);\r\n            }\r\n\r\n            let invoiceOption =\r\n            {\r\n              code: item.code,\r\n              name: item.name,\r\n              value: '',\r\n              data_type: item.data_type\r\n            }\r\n            this.invoiceOptions.push(invoiceOption);\r\n          }\r\n        });\r\n        if (this.columns.length > 0) {\r\n          this.columns.forEach(item => {\r\n            this.dataGrid.columns.push(item);\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  onContentReady(e) {\r\n    e.component.columnOption(\"command:edit\", {\r\n      visibleIndex: -1\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.row.data) {\r\n        if (e.row.data.dataType && e.row.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.dataField)) {\r\n          e.editorOptions.disabled = true;\r\n        }\r\n      }\r\n      e.editorOptions.onValueChanged = (args) => {\r\n        switch (e.dataField) {\r\n          case \"number_of_vouchers\":\r\n            this.onNumberOfVouchers(e, args.value);\r\n            break;\r\n          // case \"product_code\":\r\n          //   this.productCodeChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"quantity\":\r\n          // case \"discount\":\r\n          // case \"amount_discount\":\r\n          // case \"price\":\r\n          // case \"amount_vat\":\r\n          // case \"amount_after_vat\":\r\n          //   this.priceChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"vat\":\r\n          //   this.vatChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"unit_code\":\r\n          //   this.unitChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"amount\":\r\n          //   this.amountChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          default:\r\n            break;\r\n        }\r\n        this.checkStatusData();\r\n        e.setValue(args.value);\r\n      };\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.data.dataType && e.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.column.dataField)) {\r\n        e.cellElement.style.background = \"#F1F1F1\";\r\n      }\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_ONGIRD\" && e.column.dataField == \"number_of_vouchers\") {\r\n        e.cellElement.style.background = \"#FF0000\";\r\n      }\r\n      if (e.data.number_of_vouchers) {\r\n        switch (e.column.dataField) {\r\n          case \"buyer_address\":\r\n            if (e.data.customer_object_code == false) this.setStatusDataOnCellPrepared(e, \"Địa chỉ không được để trống\");\r\n            break;\r\n          case \"payment_method_name\":\r\n            this.setStatusDataOnCellPrepared(e, \"Hình thức thanh toán không được để trống\");\r\n            break;\r\n          case \"template_code\":\r\n            this.setStatusDataOnCellPrepared(e, \"Mẫu số hóa đơn không được để trống\");\r\n            break;\r\n          case \"invoice_series\":\r\n            this.setStatusDataOnCellPrepared(e, \"Ký hiệu hóa đơn không được để trống\");\r\n            break;\r\n          case \"product_name\":\r\n            this.setStatusDataOnCellPrepared(e, \"Tên hàng hóa không được để trống\");\r\n            break;\r\n          case \"amount\":\r\n            this.setStatusDataOnCellPrepared(e, \"Thành tiền không được để trống\");\r\n            break;\r\n          case \"amount_after_vat\":\r\n            this.setStatusDataOnCellPrepared(e, \"Tổng tiền không được để trống\");\r\n            break;\r\n          case \"customer_name\":\r\n            if (e.data.customer_object_code == false) this.setStatusDataOnCellPrepared(e, \"Tên đơn vị tổ chức không được để trống\");\r\n            break;\r\n          case \"buyer_name\":\r\n            if (e.data.customer_object_code == true) this.setStatusDataOnCellPrepared(e, \"Tên khách hàng không được để trống\");\r\n            break;\r\n          case \"product_code\":\r\n            this.setStatusDataOnCellPrepared(e, this._translate.VALIDATION.required_productCode);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      } else if (e.data.number_of_vouchers == \"\" && e.data.dataType == \"KHACH_HANG\" && e.data.product_name && e.column.dataField == \"number_of_vouchers\") {\r\n        this.setStatusDataOnCellPrepared(e, \"Số phiếu, chứng từ không được để trống\");\r\n      }\r\n    }\r\n  }\r\n\r\n  setStatusDataOnCellPrepared(e, message) {\r\n    if (((e.column.dataField == \"amount\" || e.column.dataField == \"amount_after_vat\") && e.value == null && !e.data.is_promotion) || ((e.column.dataField != \"amount\" && e.column.dataField != \"amount_after_vat\" && e.column.dataField != \"product_code\") && (e.value == null || e.value == \"\")) || (e.column.dataField == \"product_code\" && VStringService._getValueToString(e.value) != \"\" && !this.productCodePattern.test(e.value))) {\r\n      e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n      e.cellElement.title = message;\r\n      if (e.data.statusData != \"ERROR_DUPLICATE_DATABASE\" && e.data.statusData != \"ERROR_DUPLICATE_ONGIRD\") e.data.statusData = \"DATA_ERROR\";\r\n    }\r\n    else {\r\n      if (e.data.customer_object_code == false && (e.data.buyer_address == null || e.data.buyer_address == \"\" || e.data.customer_name == null || e.data.customer_name == \"\"))\r\n        e.data.statusData == \"DATA_ERROR\";\r\n      else\r\n        if (VStringService._getValueToString(e.data.product_code) != \"\" && !this.productCodePattern.test(e.data.product_code))\r\n          e.data.statusData == \"DATA_ERROR\";\r\n        else\r\n          if (e.data.customer_object_code == true && (e.data.buyer_name == null || e.data.buyer_name == \"\"))\r\n            e.data.statusData == \"DATA_ERROR\";\r\n          else\r\n            if (e.data.payment_method_name == null || e.data.payment_method_name == \"\")\r\n              e.data.statusData == \"DATA_ERROR\";\r\n            else\r\n              if (e.data.product_name == null || e.data.product_name == \"\")\r\n                e.data.statusData == \"DATA_ERROR\";\r\n              else\r\n                if (e.data.amount == null)\r\n                  e.data.statusData == \"DATA_ERROR\";\r\n                else if (e.key.statusData != \"ERROR_DUPLICATE_DATABASE\")\r\n                  e.data.statusData = \"INVALID\"\r\n                else\r\n                  if (e.data.amount_after_vat == null)\r\n                    e.data.statusData == \"DATA_ERROR\";\r\n                  else if (e.data.number_of_vouchers == \"\" && e.data.dataType == \"KHACH_HANG\" && e.data.product_name && e.column.dataField == \"number_of_vouchers\")\r\n                    e.data.statusData == \"DATA_ERROR\";\r\n                  else\r\n                    e.data.statusData = \"INVALID\"\r\n    }\r\n  }\r\n  onRowRemoving(e) {\r\n    const number_of_vouchers = e.data.number_of_vouchers\r\n    if (number_of_vouchers) {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach(row => {\r\n          if (row.productNumberOfVouchers == number_of_vouchers || row.number_of_vouchers == number_of_vouchers) {\r\n            this.invoice_products.remove(row.keyData);\r\n          }\r\n        });\r\n      })\r\n    }\r\n    else {\r\n      this.invoice_products.remove(e.key);\r\n    }\r\n    this.checkStatusData();\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code == \"Delete\") {\r\n      // console.log(e.event.srcElement);\r\n      e.event.srcElement.value = null;\r\n      // e.event.srcElement.parentNode.parentNode.querySelector('input').value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.data) {\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_DATABASE\" && e.data.number_of_vouchers) {\r\n        e.rowElement.style.background = \"#FFFF00\";\r\n      } else {\r\n        e.rowElement.style.background = \"\";\r\n      }\r\n    }\r\n    this.checkStatusData();\r\n  }\r\n\r\n  onRowUpdated(e) {\r\n    //  this.onNumberOfVouchers(e);\r\n    // let column = Object.keys(e.data)[0];\r\n    // switch (column) {\r\n    //   case \"number_of_vouchers\":\r\n    //     this.onNumberOfVouchers(e);\r\n    //     break;\r\n    //   case \"product_code\":\r\n    //     this.productCodeChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"quantity\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"discount\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount_discount\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"price\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"vat\":\r\n    //     this.vatChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"unit_code\":\r\n    //     this.unitChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount\":\r\n    //     this.amountChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount_vat\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount_after_vat\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   default:\r\n    //     break;\r\n    // }\r\n    // this.checkStatusData();\r\n  }\r\n\r\n\r\n\r\n  onNumberOfVouchers(e, value) {\r\n    let numberOfVouchers = value;\r\n    if (e.row.key.number_of_vouchers_backup) {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        for (let i = 0; i < dataSource.length; i++) {\r\n          const row = dataSource[i];\r\n          if (row.productNumberOfVouchers && row.productNumberOfVouchers == e.row.key.number_of_vouchers_backup) {\r\n            dataSource[i].productNumberOfVouchers = numberOfVouchers;\r\n          }\r\n        }\r\n      });\r\n      e.row.key.number_of_vouchers_backup = numberOfVouchers;\r\n    }\r\n\r\n    if (numberOfVouchers != \"\") {\r\n      //// Tạm đóng 14/07/2020\r\n      if (this.configs.system_parameter.the_same_number_of_voucher) {\r\n        this.vatService.getInvoicesHaveNumberOfVouchers([numberOfVouchers]).subscribe((res: any) => {\r\n          let dupInvoices = res.data.invoices;\r\n          if (dupInvoices.length > 0) {\r\n            e.row.key.statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n            // this.totalDuplicateInvoice++;\r\n            // if (this.totalInvoice > 0) this.totalInvoice--\r\n          } else {\r\n            if (e.row.key.statusData = \"ERROR_DUPLICATE_DATABASE\") {\r\n              e.row.key.statusData = \"INVALID\";\r\n              // if (this.totalDuplicateInvoice > 0) this.totalDuplicateInvoice--;\r\n            }\r\n            // this.totalInvoice++;\r\n          }\r\n          this.invoice_products.load().then((dataSource) => {\r\n            let foundOnGird = dataSource.filter((item) => {\r\n              return item.number_of_vouchers == numberOfVouchers;\r\n            });\r\n            if (foundOnGird.length > 1 && e.row.key.statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n              e.row.key.statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n            }\r\n          });\r\n          this.dataGrid.instance.refresh();\r\n          this.checkStatusData();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  //Thay đổi cột mã hàng\r\n  productCodeChange(e, value) {\r\n    this.select.products.some(item => {\r\n      if (item.code == value) {\r\n        e.row.key.product_name = item.name;\r\n        e.row.key.unit_code = this.checkUnitCode(item.unit_code);\r\n        e.row.key.quantity = null;\r\n        e.row.key.engine_number = null;\r\n        e.row.key.price_after_discount = null;\r\n        e.row.key.chassis_number = null;\r\n        e.row.key.contract_order = null;\r\n        e.row.key.product_exchange_rate = null;\r\n        e.row.key.price = item.price ? parseFloat(item.price) : item.price;\r\n        e.row.key.amount = item.price ? parseFloat(item.price) : 0;\r\n        e.row.key.discount = item.discount ? parseFloat(item.discount) : null;\r\n        e.row.key.amount_discount = (e.row.key.discount > 0) ? this.caculatorAmountDiscount(e.row.key.price, e.row.key.discount) : null;\r\n        if (e.row.key.amount_discount > 0)\r\n          e.row.key.amount -= e.row.key.amount_discount;\r\n        if (this.isHdGTGT) {\r\n          e.row.key.vat = item.vat ? parseFloat(item.vat) : null;\r\n          e.row.key.amount_vat = (e.row.row.key.vat >= 0) ? this.caculatorAmountVat(e.row.key.amount, e.row.key.vat) : null;\r\n        }\r\n        e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n      }\r\n    });\r\n  }\r\n\r\n  priceChange(e, value) {\r\n    let quantity = e.row.key.quantity || 1;\r\n    let price = value || 0;\r\n    if (price != null) {\r\n      e.row.key.amount = price * quantity;\r\n      e.row.key.amount_discount = (e.row.key.discount > 0) ? this.caculatorAmountDiscount(e.row.key.price, e.row.key.discount) : e.row.key.amount_discount;\r\n      if (e.row.key.amount_discount > 0)\r\n        e.row.key.amount -= e.key.amount_discount;\r\n      if (this.isHdGTGT)\r\n        e.row.key.amount_vat = (e.row.key.vat >= 0) ? this.caculatorAmountVat(e.row.key.amount, e.row.key.vat) : null;\r\n      e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n    }\r\n  }\r\n\r\n  vatChange(e, value) {\r\n    if (this.isHdGTGT)\r\n      e.row.key.amount_vat = (value >= 0) ? this.caculatorAmountVat(e.row.key.amount, value) : null;\r\n    e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n  }\r\n  unitChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n  amountChange(e, value) {\r\n    if (!e.row.key.quantity && !e.row.key.price) {\r\n      e.row.key.amount_after_vat = value;\r\n    } else {\r\n      let quantity = e.row.key.quantity || 1;\r\n      let price = e.row.key.price || 0;\r\n      if (price != null) {\r\n        e.row.key.amount = e.row.key.price * quantity;\r\n        e.row.key.amount_discount = (e.row.key.discount > 0) ? this.caculatorAmountDiscount(e.row.key.price, e.row.key.discount) : e.row.key.amount_discount;\r\n        if (e.row.key.amount_discount > 0)\r\n          e.row.key.amount -= e.row.key.amount_discount;\r\n        if (this.isHdGTGT)\r\n          e.row.key.amount_vat = (e.row.key.vat >= 0) ? this.caculatorAmountVat(e.row.key.amount, e.row.key.vat) : null;\r\n        e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  checkValidNumberOfVouchers() {\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach(row => {\r\n        if (row.number_of_vouchers == \"\") {\r\n          Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n        } else {\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    let items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code == unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  checkProvisionsOnAccounts(name) {\r\n    let found = this.select.select_provisions_on_accounts.find(function (element) {\r\n      return element.name === name;;\r\n    });\r\n    let code = \"\";\r\n\r\n    if (found) {\r\n      code = found.code;\r\n    } else {\r\n      Library.notify(\"Định khoản chưa có trong danh mục\", \"error\");\r\n    }\r\n\r\n    return code;\r\n  }\r\n\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    let temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  caculatorAmountDiscount(price, discount) {\r\n    let temp = price * discount / 100;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) != \"\") {\r\n      if (!this.select.unit_codes)\r\n        this.select.unit_codes = [];\r\n      let _obj = this.select.unit_codes.filter(p => p.name == unitName)[0];\r\n      if (_obj) {\r\n        return _obj.code;\r\n      } else {\r\n        let code = VStringService._convertToViKdau(unitName);\r\n        let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n        if (oDuplicate)\r\n          code = code + Helper.addtionalUnitCode();\r\n        this.select.unit_codes.push({ code: code, name: unitName });\r\n        return code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getPaymentMethodCodeByName(payment_method_name) {\r\n    let items = this.select.payment_method_names;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].name == payment_method_name) {\r\n        return items[i].code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    let status;\r\n    if (!this.invoice.id && !this.invoice.receipt_number) status = 'THEM_MOI';\r\n    if (this.invoice.id && !this.invoice.receipt_number) status = 'GHI_TAM';\r\n    if (this.invoice.id && this.invoice.receipt_number) status = 'GIU_SO';\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    this.receipt_sign_date = null;\r\n    if (status == 'THEM_MOI') {\r\n      let sub = this.paymentRService.ghiTam(this.invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.receipt_number = rs.data.receipt_number;\r\n          this.invoice.receipt_date = moment(rs.data.receipt_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let receipt_sign_date = moment(rs.data.receipt_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.receipt_sign_date = receipt_sign_date;\r\n          this.invoice.id = rs.data.id;\r\n          this.invoicesId.push(rs.data.id);\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, receipt_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status == 'GHI_TAM') {\r\n      let sub = this.paymentRService.edit(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.receipt_number = rs.data.receipt_number;\r\n          this.frmData.receipt_date = moment(rs.data.receipt_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let receipt_sign_date = moment(rs.data.receipt_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.receipt_sign_date = receipt_sign_date;\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, receipt_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n\r\n    } else if (status == 'GIU_SO') {\r\n      let sub = this.paymentRService.edit(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.frmData.receipt_date = moment(rs.data.receipt_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let receipt_sign_date = moment(rs.data.receipt_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.receipt_sign_date = receipt_sign_date;\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, receipt_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    this.socketService.kyBienLai(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n  goiApiXuatHoaDon(xml_string) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.subXuatHoaDon = this.paymentRService.xuatBienLai({\r\n      id: this.invoice.id,\r\n      xml_string: xml_string,\r\n      receipt_sign_date: this.receipt_sign_date\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        // this.formInvoice.readonlyAllForm();\r\n        this.ttDaXuatHoaDon = true;\r\n        this.valueProgress += percentComplete;\r\n        if (this.countInvoice < this.totalInvoice) {\r\n          this.countInvoice++;\r\n          this.xuatHoaDon();\r\n        } else if (this.countInvoice == this.totalInvoice) {\r\n          this.isXuatThanhCong = true;\r\n          this.valueProgress = 100;\r\n          Library.notify('Xuất biên lai thành công', 'success');\r\n          this.isVisibleBtnSubmit = false;\r\n          this.showPopupImport = false;\r\n          this.bsModalImportRef.hide();\r\n          //this._location.back();\r\n          if (this.search)\r\n            this.router.navigate([`/system/payment-receipt`], { queryParams: this.search });\r\n          else\r\n            this.router.navigate([`/system/payment-receipt`]);\r\n        }\r\n      } else {\r\n        this.showPopupImport = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  xuatHoaDon() {\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      this.connectWebsocket();\r\n      this.socketService.kyBienLai(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n    }\r\n    this.tempKiFile = 0;\r\n  }\r\n\r\n  xuatChoKy() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (!this.isTT78) {\r\n      this.subLuuChoXuat = this.vatService.xuatChoKy(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.xuatChoKy();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            //this._location.back();\r\n            if (this.search)\r\n              this.router.navigate([`/system/payment-receipt`], { queryParams: this.search });\r\n            else\r\n              this.router.navigate([`/system/payment-receipt`]);\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.subLuuChoXuat = this.vatService.xuatChoKyTT78(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.xuatChoKy();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            //this._location.back();\r\n            if (this.search)\r\n              this.router.navigate([`/system/payment-receipt`], { queryParams: this.search });\r\n            else\r\n              this.router.navigate([`/system/payment-receipt`]);\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  luuChoXuat() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.invoice.id) {\r\n      this.subLuuChoXuat = this.paymentRService.edit(this.invoice.id, this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.luuChoXuat();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            //this._location.back();\r\n            if (this.search)\r\n              this.router.navigate([`/system/payment-receipt`], { queryParams: this.search });\r\n            else\r\n              this.router.navigate([`/system/payment-receipt`]);\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    } else {\r\n      this.subLuuChoXuat = this.paymentRService.ghiTam(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.luuChoXuat();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            //this._location.back();\r\n            if (this.search)\r\n              this.router.navigate([`/system/payment-receipt`], { queryParams: this.search });\r\n            else\r\n              this.router.navigate([`/system/payment-receipt`]);\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatFile() {\r\n    let invoices = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach(element => {\r\n        if (element.number_of_vouchers) {\r\n          let invoice = {};\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n          invoice[\"customer_code\"] = element.customer_code; //mã đơn vị (mã khách hàng)\r\n          invoice[\"currency_code\"] = element.currency_code;\r\n          invoice[\"customer_object_code\"] = element.customer_object_code ? \"CA_NHAN\" : \"DOANH_NGHIEP\"; //Mã loại hóa đơn\r\n          invoice[\"buyer_tax_code\"] = element.buyer_tax_code; //Mã số thuế\r\n          invoice[\"customer_name\"] = element.customer_name; //Tên đơn vị (Tên khách hàng)\r\n          invoice[\"buyer_name\"] = element.buyer_name; //Tên người mua\r\n          invoice[\"student_name\"] = element.student_name;\r\n          invoice[\"class_name\"] = element.class_name;\r\n          invoice[\"buyer_mobile\"] = element.buyer_mobile; //Điện thoại liên hệ\r\n          ///// HĐ xe\r\n          invoice[\"contract_number\"] = element.contract_number;\r\n          invoice[\"currency_rate\"] = element.currency_rate;\r\n          invoice[\"vsb_number\"] = element.vsb_number;\r\n          invoice[\"license_number\"] = element.license_number;\r\n          invoice[\"sell_form\"] = element.sell_form;\r\n          invoice[\"model\"] = element.model;\r\n          invoice[\"color\"] = element.color;\r\n          invoice[\"invoice_engine_number\"] = element.invoice_engine_number;\r\n          invoice[\"invoice_chassis_number\"] = element.invoice_chassis_number;\r\n          invoice[\"manufacture_year\"] = element.manufacture_year;\r\n          invoice[\"place_of_delivery\"] = element.place_of_delivery;\r\n          invoice[\"shiping_point\"] = element.shiping_point;\r\n          invoice[\"payment_expire\"] = element.payment_expire;\r\n          invoice[\"wip_number\"] = element.wip_number;\r\n          invoice[\"in_out_date\"] = element.in_out_date;\r\n          invoice[\"invoice_internal_number\"] = element.invoice_internal_number;\r\n          invoice[\"license_plate\"] = element.license_plate;\r\n          invoice[\"kilometer_number\"] = element.kilometer_number;\r\n          /////\r\n          invoice[\"buyer_email\"] = element.buyer_email; //Email\r\n          invoice[\"buyer_address\"] = element.buyer_address; //Địa chỉ\r\n          invoice[\"the_order\"] = element.the_order; //Địa chỉ\r\n          invoice[\"consult_number\"] = element.consult_number; //Địa chỉ\r\n          invoice[\"ship_receiving_address\"] = element.ship_receiving_address; //Địa chỉ\r\n          invoice[\"ship_receiving_name\"] = element.ship_receiving_name; //Địa chỉ\r\n          invoice[\"payment_method_name\"] = element.payment_method_view_name; //Hình thức thanh toán\r\n          invoice[\"bank_account_number\"] = element.bank_account_number; //Số tài khoản\r\n          invoice[\"bank_name\"] = element.bank_name; //thuộc ngân hàng\r\n          invoice[\"note\"] = element.note; //ghi chú\r\n          /* Hóa đơn Pepsi */\r\n          invoice[\"total_large_unit\"] = element.total_large_unit;\r\n          invoice[\"total_small_unit\"] = element.total_small_unit;\r\n          invoice[\"billing_source\"] = element.billing_source;\r\n          invoice[\"template_code\"] = element.template_code;\r\n          invoice[\"invoice_series\"] = element.invoice_series;\r\n          invoice[\"invoice_amount\"] = element.invoice_amount;\r\n          invoice[\"environmental_fee\"] = element.environmental_fee;\r\n          invoice[\"total_amount_vat\"] = element.total_amount_vat;\r\n          invoice[\"total_payment\"] = element.total_payment;\r\n          invoice[\"username\"] = element.username;\r\n\r\n          let product = {\r\n            product_name: element.product_name,\r\n            provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n            unit_name: element.unit_name,\r\n            quantity: element.quantity,\r\n            other_tax: element.other_tax,\r\n            other_charge: element.other_charge,\r\n            price: element.price,\r\n            product_exchange_rate: element.product_exchange_rate,\r\n            price_after_vat: element.price_after_vat,\r\n            amount: element.amount,\r\n            vat_name: element.vat_name,\r\n            amount_vat: element.amount_vat,\r\n            amount_after_vat: element.amount_after_vat,\r\n            discount: element.discount,\r\n            amount_discount: element.amount_discount,\r\n            amount_without_discount: element.amount_without_discount,\r\n            engine_number: element.engine_number,\r\n            price_after_discount: element.price_after_discount,\r\n            chassis_number: element.chassis_number,\r\n            color_material: element.color_material,\r\n            contract_order: element.contract_order,\r\n            view_order: element.view_order,\r\n            management_code: element.management_code,\r\n          }\r\n          invoice[\"invoice_products\"] = [];\r\n          invoice[\"invoice_products\"].push(product);\r\n          invoices.push(invoice);\r\n        }\r\n\r\n        if (element.productNumberOfVouchers) {\r\n          // console.log(element)\r\n          let invoiceProduct = {\r\n            product_name: element.product_name,\r\n            provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n            unit_name: element.unit_name,\r\n            quantity: element.quantity,\r\n            other_tax: element.other_tax,\r\n            other_charge: element.other_charge,\r\n            price: element.price,\r\n            product_exchange_rate: element.product_exchange_rate,\r\n            price_after_vat: element.price_after_vat,\r\n            amount: element.amount,\r\n            vat_name: element.vat,\r\n            amount_vat: element.amount_vat,\r\n            amount_after_vat: element.amount_after_vat,\r\n            discount: element.discount,\r\n            amount_discount: element.amount_discount,\r\n            amount_without_discount: element.amount_without_discount,\r\n            engine_number: element.engine_number,\r\n            price_after_discount: element.price_after_discount,\r\n            chassis_number: element.chassis_number,\r\n            color_material: element.color_material,\r\n            contract_order: element.contract_order,\r\n            view_order: element.view_order,\r\n            management_code: element.management_code,\r\n          }\r\n          for (let i = 0; i < invoices.length; i++) {\r\n            if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n              invoices[i].invoice_products.push(invoiceProduct);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    let data = {\r\n      \"invoices\": invoices\r\n    }\r\n    Library.showloading();\r\n    this.vatService.exportToExcel(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất dữ liệu ra excel thành công\", \"success\");\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  convertGirdToInvoices(type) {\r\n    let invoices = [];\r\n    let invalid = true;\r\n    let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n    let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n    let decimal_quantity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n    let decimal_tygia = VChanggeMoneyService.getFormatterToNumber(this.formatter.ty_gia);\r\n    let decimal_amount_discount = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_chiet_khau);\r\n    let ts = this.oTemplate;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      if (!VStringService._attemptConvertBool(this.oTemplate.is_multiple_fee)) {\r\n        let hanghoa = dataSource.filter(p => VStringService._getValueToString(p.productNumberOfVouchers) != \"\")[0];\r\n        if (hanghoa) {\r\n          Library.notify(\"Chỉ nhập 1 phí với mẫu biên lai 1 loại phí\", \"error\");\r\n          invalid = false;\r\n          return false;\r\n        }\r\n      }\r\n      dataSource.forEach((element, index) => {\r\n        if (element.number_of_vouchers == \"\" && element.dataType == \"KHACH_HANG\" && element.product_name && type == \"submit\") {\r\n          Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n          invalid = false;\r\n          return;\r\n        }\r\n        if (element.number_of_vouchers) {\r\n          if (type == \"submit\") {\r\n            if (element.fee_name == \"\") { Library.notify(\"Tên loại phí,lệ phí không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (element.amount_after_vat == null && !element.is_promotion) { Library.notify(\"Tổng tiền không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (element.amount == null && !element.is_promotion) { Library.notify(\"Thành tiền không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (VStringService._getValueToString(element.fee_code) != \"\" && !this.productCodePattern.test(element.fee_code)) {\r\n              Library.notify(this._translate.VALIDATION.required_productCode, \"error\");\r\n              invalid = false;\r\n              return false;\r\n            }\r\n          }\r\n          let invoice = new PaymentReceiptModel(1);\r\n          if (element.id) {\r\n            invoice.id = element.id;\r\n          }\r\n          /* Các trường mở rộng */\r\n          if (this.invoiceOptions && this.invoiceOptions.length > 0) {\r\n            let optionClone = _.cloneDeep(this.invoiceOptions);\r\n            // optionClone.forEach(invOption => {\r\n            //   for (var key in element) {\r\n            //     if (invOption.code === key) {\r\n            //       invOption.value = element[key];\r\n            //     }\r\n            //   }\r\n            // });\r\n            optionClone.forEach(invOption => {\r\n              for (var key in element) {\r\n                if (invOption.code === key) {\r\n                  if (invOption.data_type === 'ngay') {\r\n                    let date = Helper.processDate(element[key]);\r\n                    if (date == \"ERROR\") {\r\n                      Library.notify(invOption.name + \" không đúng định dạng\", \"error\");\r\n                      invalid = false;\r\n                      return;\r\n                    }\r\n                    else\r\n                      if (date != \"\")\r\n                        invOption.value = date;\r\n                  }\r\n                  else if (invOption.data_type === 'soluong') {\r\n                    invOption.value = element[key] ? Helper.toNumber(element[key]) : null;\r\n                  }\r\n                  else\r\n                    invOption.value = element[key];\r\n                }\r\n              }\r\n            });\r\n            invoice.receipt_options = [];\r\n            optionClone.forEach(val => invoice.receipt_options.push(Object.assign({}, val)));\r\n          }\r\n          invoice.receipt_number = element.receipt_number;\r\n          invoice.template_id = this.template_id;\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n          invoice.receipt_date = element.receipt_date ? moment(element.receipt_date).format('YYYY-MM-DD HH:mm:ss') : moment().format('YYYY-MM-DD HH:mm:ss'); // Ngày hóa đơn\r\n          invoice.payer_tax_code = element.payer_tax_code; //Mã số thuế\r\n          invoice.payer_name = element.payer_name; //Tên người mua\r\n          invoice.customer_name = element.customer_name //Tên đơn vị (Tên khách hàng)\r\n          invoice.customer_code = element.customer_code; //mã đơn vị (mã khách hàng)\r\n          invoice.currency_code = element.currency_code;\r\n          invoice.payer_phone = element.payer_phone;\r\n          invoice.currency_rate = this.roundNumber(element.currency_rate, decimal_tygia);\r\n          invoice.payer_address = element.payer_address; //Địa chỉ\r\n          invoice.payer_email = element.payer_email; //Điện thoại liên hệ\r\n          invoice.template_code = this.template_code;\r\n          invoice.template_type = this.template_type;\r\n          invoice.receipt_series = this.receipt_series;\r\n          invoice.payment_method_code = element.payment_method_code; //Hình thức thanh toán\r\n          invoice.payment_method_name = element.payment_method_name; //Hình thức thanh toán\r\n          if (!invoice.payment_method_name) {\r\n            let _obj = this.select.payment_method_names.filter(p => p.code == element.payment_method_code)[0];\r\n            if (_obj) {\r\n              invoice.payment_method_name = _obj.name;\r\n            }\r\n          }\r\n          invoice.receipt_fees[0].fee_code = element.fee_code;\r\n          invoice.receipt_fees[0].fee_name = element.fee_name;\r\n          invoice.receipt_fees[0].unit_code = element.unit_code;\r\n          invoice.receipt_fees[0].unit_name = element.unit_name;\r\n          invoice.receipt_fees[0].quantity = element.quantity;\r\n          invoice.receipt_fees[0].price = element.price;\r\n          invoice.receipt_fees[0].amount = element.amount;\r\n          invoice.receipt_fees[0].amount_after_vat = element.amount_after_vat;\r\n          invoice.receipt_fees[0].order = element.order;\r\n          invoice.receipt_fees[0].view_order = element.view_order;\r\n          invoice.display_currency = JSON.stringify(this.configs.display_currency);\r\n          let decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n          invoice.decimal_places_json = decimal_places_json;\r\n          invoices.push(invoice);\r\n        }\r\n        if (element.productNumberOfVouchers) {\r\n          // console.log(element)\r\n          let invoiceProduct = {\r\n            fee_code: element.fee_code,\r\n            fee_name: element.fee_name,\r\n            unit_code: element.unit_code,\r\n            unit_name: element.unit_name,\r\n            quantity: element.quantity,\r\n            price: element.price,\r\n            order: element.order,\r\n            amount: element.amount,\r\n            amount_after_vat: element.amount_after_vat,\r\n            view_order: element.view_order,\r\n          }\r\n          for (let i = 0; i < invoices.length; i++) {\r\n            if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n              invoices[i].receipt_fees.push(invoiceProduct);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    for (let i = 0; i < invoices.length; i++) {\r\n      let amount_after_vat = null;\r\n      invoices[i].receipt_fees.forEach((product, index) => {\r\n        if (product.amount_after_vat == null && invalid) {\r\n          Library.notify(\"Tổng tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n          invalid = false;\r\n          return false;\r\n        }\r\n        if (!VStringService._attemptConvertBool(this.oTemplate.is_multiple_fee)) {\r\n          if (product.quantity != null && parseFloat(product.quantity) > 1 && invalid) {\r\n            Library.notify(\"Mẫu 1 loại phí: Số lượng Loại phí không được lớn hơn 1\", 'error');\r\n            invalid = false;\r\n            return false;\r\n          }\r\n        }\r\n        if (product.amount_after_vat !== null) amount_after_vat += product.amount_after_vat;\r\n      });\r\n      if (!VStringService._attemptConvertBool(this.oTemplate.is_multiple_fee)) {\r\n        invoices[i].fee_name = invoices[i].receipt_fees[0].fee_name;\r\n      }\r\n      invoices[i].total_payment = this.roundNumber(amount_after_vat, decimal_amount_after_vat);\r\n      invoices[i].receipt_type = parseInt(this.oTemplate.is_multiple_fee);\r\n      invoices[i].total_payment_in_word = Helper.tienBangChu(invoices[i].total_payment, decimal_amount_after_vat, invoices[i].currency_code, this.configs.system_parameter.display_read_money_english);\r\n    }\r\n    this.totalInvoice = invoices.length;\r\n    this.invoicesArr = invoices;\r\n    this.invoicesArr = this.invoicesArr.sort((itemA, itemB) => {\r\n      return new Date(itemA.receipt_date).getTime() - new Date(itemB.receipt_date).getTime();\r\n    });\r\n    return invalid;\r\n  }\r\n  date_sort_desc(date1, date2) {\r\n    // This is a comparison function that will result in dates being sorted in\r\n    // DESCENDING order.\r\n    if (date1 > date2) return -1;\r\n    if (date1 < date2) return 1;\r\n    return 0;\r\n  };\r\n  /* Xem trước hóa đơn */\r\n  preview() {\r\n    let convert = this.convertGirdToInvoices(\"preview\");\r\n    if (convert) {\r\n      if (this.configs.system_parameter.display_template_from_server) {\r\n        const initialState = {\r\n          items: this.invoicesArr,\r\n          isXuatHD: false,\r\n          typeAction: 'NAP_EXCEL'\r\n        };\r\n        this.bsModalViewModel = this.modalImportService.show\r\n          (\r\n            ViewInvoiceComponent,\r\n            {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-xl view-invoice',\r\n              initialState\r\n            }\r\n          );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          subModal.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        this.checkCKS(\"XEM_TRUOC\");\r\n      }\r\n    }\r\n  }\r\n\r\n  previewBeforeSubmit() {\r\n    this.convertGirdToInvoices(\"preview\");\r\n    if (this.configs.system_parameter.display_template_from_server) {\r\n      let hinhthucxuat = \"\";\r\n      if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n        hinhthucxuat = \"và ký\";\r\n      } else {\r\n        hinhthucxuat = \"chờ ký\";\r\n      }\r\n      const initialState = {\r\n        items: this.invoicesArr,\r\n        isXuatHD: true,\r\n        hinhthucxuat: hinhthucxuat,\r\n        typeAction: 'NAP_EXCEL'\r\n      };\r\n\r\n      this.bsModalViewModel = this.modalImportService.show\r\n        (\r\n          ViewInvoiceComponent,\r\n          {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-xl view-invoice',\r\n            initialState\r\n          }\r\n        );\r\n      const subModal = this.modalImportService.onHide.subscribe(() => {\r\n        if (this.bsModalViewModel.content.successSaveItem == \"DONG_Y\") {\r\n          this.confirmCheckPreview = true;\r\n          this.submit('XUAT');\r\n        }\r\n        subModal.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      this.checkCKS(\"XUAT_HOA_DON\");\r\n    }\r\n\r\n\r\n    // this.windowPreviewBeforeSubmit = window.open(\"\", \"\", `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n    // this.windowPreviewBeforeSubmit.document.body.innerHTML = \"Đang tải dữ liệu!\";\r\n    // this.windowPreviewBeforeSubmit.blur();\r\n\r\n    // let timer = setInterval(() => {\r\n    //   if (this.windowPreviewBeforeSubmit.closed) {\r\n    //     clearInterval(timer);\r\n    //     let isCheck = Helper.getCookie('CK_CFM_I');\r\n    //     this.windowPreviewBeforeSubmit = undefined;\r\n    //     if (isCheck == \"CHECKED\") {\r\n    //       document.cookie = \"CK_CFM_I=; path=/\";\r\n    //       this.confirmCheckPreview = true;\r\n    //       this.submit('XUAT');\r\n    //     }\r\n    //   }\r\n    // }, 500);\r\n    // let htx = \"\";\r\n    // if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n    //   htx = \"và ký\";\r\n    // } else {\r\n    //   htx = \"chờ ký\";\r\n    // }\r\n    // let sub = this.vatService.previewInvoiceImport(data).subscribe(rs => {\r\n    //   if (rs.status == 'success') {\r\n    //     let pdf_file = rs.data.invoice.pdf_file;\r\n    //     let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n    //     this.windowPreviewBeforeSubmit.document.write(`\r\n    //     <style type=\"text/css\" scoped>\r\n    //         .nhap-nhay { \r\n    //           background: red;\r\n    //           padding: 0.5px 9px;\r\n    //           margin-right: 5px;\r\n    //           border-radius: 57%;\r\n    //           -webkit-animation: flicker 1s infinite;\r\n    //         } \r\n    //         .ht-xuat{\r\n    //           display: inline-block;\r\n    //           margin-right: 50px;\r\n    //           padding: 15px;\r\n    //           float: right;\r\n    //           background: #e48e08;\r\n    //         }\r\n    //         @-webkit-keyframes flicker\r\n    //         {\r\n    //         0% {opacity:0;}\r\n    //         9% {opacity:0;}\r\n    //         10% {opacity:.5;}\r\n    //         13% {opacity:0;}\r\n    //         20% {opacity:.5;}\r\n    //         25% {opacity:1;}\r\n    //         }\r\n    //         .example {\r\n    //           padding: 20px;\r\n    //         }\r\n\r\n    //         input[type=button] {\r\n    //           padding: 5px 10px;\r\n    //           margin: 10px 5px;\r\n    //           border-radius: 5px;\r\n    //           cursor: pointer;\r\n    //           background: #ddd;\r\n    //           border: 1px solid #ccc;\r\n    //         }\r\n    //         input[type=button]:hover {\r\n    //           background: #ccc;\r\n    //         }\r\n\r\n    //         .confirm {\r\n    //           display: none;\r\n    //         }\r\n    //         .confirm > div:first-of-type {\r\n    //           position: fixed;\r\n    //           width: 100%;\r\n    //           height: 100%;\r\n    //           background: rgba(0, 0, 0, 0.5);\r\n    //           top: 0px;\r\n    //           left: 0px;\r\n    //         }\r\n    //         .confirm > div:last-of-type {\r\n    //           padding: 10px 20px;\r\n    //           background: white;\r\n    //           position: absolute;\r\n    //           width: auto;\r\n    //           height: auto;\r\n    //           left: 50%;\r\n    //           top: 50%;\r\n    //           transform: translate(-50%, -50%);\r\n    //           border-radius: 5px;\r\n    //           border: 1px solid #333;\r\n    //         }\r\n    //         .confirm > div:last-of-type div:first-of-type {\r\n    //           min-width: 150px;\r\n    //           padding: 10px;\r\n    //         }\r\n    //         .confirm > div:last-of-type div:last-of-type {\r\n    //           text-align: right;\r\n    //         }\r\n    //     </style>\r\n    //     <div style=\"margin-left: 50px;\">\r\n    //       <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n    //       <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n    //       </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n    //     </div>\r\n\r\n    //     <div>\r\n    //       <iframe style=\"margin-left: 170px;\" width=\"70%\" height=\"95%\" src=\"${objectUrl}\"></iframe>\r\n    //       <div class=\"ht-xuat\">\r\n    //         <p style=\"color: #fff;font-size: 17px;text-align: center;margin-bottom: 0;\">Ngày hóa đơn</p>\r\n    //         <p style=\"color: #fff;font-size: 17px;text-align: center;margin-bottom: 10px;margin-top: 5px;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n    //         <h3 style=\"color: #fff; text-align: center; text-transform: uppercase;margin-top: 5px;\">Xuất ${htx}</h3>\r\n    //       </div>\r\n    //     </div>\r\n\r\n    //     <div style=\"text-align: center; margin: 20px 0 50px; font-size: 22px; font-weight: 600;\">\r\n    //       <a href=\"javascript:void(0)\" style=\"text-decoration: none;\" onclick=\"setConfirmInvoice()\">Đồng ý </a>|\r\n    //       <a href=\"javascript:void(0)\" style=\"text-decoration: none;\" onclick=\"closeWin()\">Đóng</a>\r\n    //     </div>\r\n\r\n    //     <div class=\"confirm\">\r\n    //         <div></div>\r\n    //         <div>\r\n    //           <div id=\"confirmMessage\">Confirm text</div>\r\n    //           <div>\r\n    //             <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n    //             <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n    //           </div>\r\n    //         </div>\r\n    //     </div>\r\n\r\n    //     <script type=\"text/javascript\">\r\n    //     const ui = {\r\n    //       confirm: async (message) => createConfirm(message)\r\n    //     }\r\n\r\n    //     const createConfirm = (message) => {\r\n    //       return new Promise((complete, failed)=>{\r\n    //         $('#confirmMessage').text(message)\r\n\r\n    //         $('#confirmYes').off('click');\r\n    //         $('#confirmNo').off('click');\r\n\r\n    //         $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n    //         $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n\r\n    //         $('.confirm').show();\r\n    //       });\r\n    //     }\r\n\r\n    //     const setConfirmInvoice = async () => {\r\n    //       const confirm = await ui.confirm(\"Bạn có chắc chắn muốn xuất hóa đơn ${htx} không?\");\r\n    //       if(confirm){\r\n    //         document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n    //         window.close();\r\n    //       } else{\r\n    //       }\r\n    //     } \r\n\r\n    //       function closeWin(){\r\n    //         window.close();\r\n    //       }\r\n    //     </script>\r\n    //     <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n    //     `);\r\n    //     this.windowPreviewBeforeSubmit.focus();\r\n    //   } else {\r\n    //     this.windowPreviewBeforeSubmit.close();\r\n    //     Library.notify(rs.message, 'error');\r\n    //   }\r\n    // }, err => { }, () => {\r\n    //   Library.hideloading();\r\n    //   sub.unsubscribe();\r\n    // });\r\n  }\r\n\r\n\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      let newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      let oDuplicate = this.select.unit_codes.filter(p => p.code === newItem.code)[0];\r\n      if (oDuplicate)\r\n        newItem.code = newItem.code + Helper.addtionalUnitCode();\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption(\"unit_code\", \"lookup\", {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: \"name\",\r\n          valueExpr: \"code\"\r\n        });\r\n      });\r\n      return newItem;\r\n    }.bind(this)\r\n  }\r\n  getDataPreview() {\r\n    let formatter;\r\n    let invoicesPreview = [];\r\n    this.convertGirdToInvoices(\"preview\");\r\n\r\n\r\n    let displayInt = this.configs.system_parameter.display_int ? this.configs.system_parameter.display_int : false;\r\n    formatter = this.configs.system_parameter.decpoint_is_dot ? { decimal: \".\", thousands: \",\", display_int: displayInt } : { decimal: \",\", thousands: \".\", display_int: displayInt };\r\n\r\n    this.invoicesArr.forEach(data => {\r\n      let decimal_quatity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n      let decimal_price = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia);\r\n      let decimal_price_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia_sau_thue);\r\n      let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n      let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n      let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n      let decimal_ty_gia = VChanggeMoneyService.getFormatterToNumber(this.formatter.ty_gia);\r\n      let amount_without_discount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien_chua_ck);\r\n\r\n      let total_amount_product_with_vatx = null, total_amount_product_with_vat0 = null, total_amount_product_with_vat5 = null, total_amount_product_with_vat8 = null, total_amount_product_with_vat10 = null, amount_vat0 = null, total_amount_product_vat_kkknt = null, total_amount_product_vat_other = null;\r\n\r\n      data.invoice_products.forEach(item => {\r\n        if (!item.is_promotion && !item.is_promotion_new) {\r\n          if (item.commercial_discount) {\r\n            if (item.vat == -1) total_amount_product_with_vatx -= item.amount_after_vat;\r\n            if (item.vat == 0) total_amount_product_with_vat0 -= item.amount_after_vat;\r\n            if (item.vat == 0) amount_vat0 -= item.amount_vat;\r\n            if (item.vat == 5) total_amount_product_with_vat5 -= item.amount_after_vat;\r\n            if (item.vat == 8) total_amount_product_with_vat8 -= item.amount_after_vat;\r\n            if (item.vat == 10) total_amount_product_with_vat10 -= item.amount_after_vat;\r\n            if (item.vat == -2) total_amount_product_vat_kkknt -= item.amount_after_vat;\r\n            if (item.vat == -3 || item.vat == 7 || item.vat == 3.5) total_amount_product_vat_other -= item.amount_after_vat;\r\n          } else {\r\n            if (item.vat == -1) total_amount_product_with_vatx += item.amount_after_vat;\r\n            if (item.vat == 0) total_amount_product_with_vat0 += item.amount_after_vat;\r\n            if (item.vat == 0) amount_vat0 += item.amount_vat;\r\n            if (item.vat == 5) total_amount_product_with_vat5 += item.amount_after_vat;\r\n            if (item.vat == 8) total_amount_product_with_vat8 += item.amount_after_vat;\r\n            if (item.vat == 10) total_amount_product_with_vat10 += item.amount_after_vat;\r\n            if (item.vat == -2) total_amount_product_vat_kkknt += item.amount_after_vat;\r\n            if (item.vat == -3 || item.vat == 7 || item.vat == 3.5) total_amount_product_vat_other += item.amount_after_vat;\r\n          }\r\n        }\r\n\r\n        item['unit_name'] = \"\";\r\n        this.select.unit_codes.forEach(unit => {\r\n          item.discount = \"\";\r\n          item.total_discount = \"\";\r\n          if (unit.code == item.unit_code) {\r\n            item['unit_name'] = unit.name;\r\n          }\r\n        });\r\n\r\n        item.amount = Helper.formatMoney(item.amount, decimal_amount, formatter);\r\n        item.price = Helper.formatMoney(item.price, decimal_price, formatter);\r\n        item.product_exchange_rate = Helper.formatMoney(item.product_exchange_rate, decimal_ty_gia, formatter);\r\n        item.price_after_vat = Helper.formatMoney(item.price_after_vat, decimal_price_after_vat, formatter);\r\n        item.quantity = Helper.formatMoney(item.quantity, decimal_quatity, formatter);\r\n        item.other_tax = Helper.formatMoney(item.other_tax, decimal_amount, formatter);\r\n        item.other_charge = Helper.formatMoney(item.other_charge, decimal_amount, formatter);\r\n        item.discount = Helper.formatMoney(item.discount, decimal_quatity, formatter);\r\n        item.amount_discount = Helper.formatMoney(item.amount_discount, decimal_quatity, formatter);\r\n        item.amount_without_discount = Helper.formatMoney(item.amount_without_discount, amount_without_discount, formatter);\r\n\r\n      });\r\n      let _obj = this.select.payment_method_names.filter(p => p.code == data.payment_method_name)[0];\r\n      if (_obj) {\r\n        data.payment_method_view_name = _obj.name;\r\n      }\r\n      data.total_amount_product_vat_kkknt = Helper.formatMoney(total_amount_product_vat_kkknt, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_vat_other = Helper.formatMoney(total_amount_product_vat_other, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat8 = Helper.formatMoney(total_amount_product_with_vat8, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n\r\n      data.amount_after_vat_kkknt = Helper.formatMoney(total_amount_product_vat_kkknt, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat_other = Helper.formatMoney(total_amount_product_vat_other, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat8 = Helper.formatMoney(total_amount_product_with_vat8, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n\r\n\r\n      data.amount_after_vat_kkknt = Helper.formatMoney(data.amount_after_vat_kkknt, decimal_amount, formatter);\r\n      data.amount_after_vat_other = Helper.formatMoney(data.amount_after_vat_other, decimal_amount, formatter);\r\n      data.total_amount_product_vatx = Helper.formatMoney(data.total_amount_product_vatx, decimal_amount, formatter);\r\n      data.total_amount_product_vat0 = Helper.formatMoney(data.total_amount_product_vat0, decimal_amount, formatter);\r\n      data.total_amount_product_vat5 = Helper.formatMoney(data.total_amount_product_vat5, decimal_amount, formatter);\r\n      data.total_amount_product_vat8 = Helper.formatMoney(data.total_amount_product_vat8, decimal_amount, formatter);\r\n      data.total_amount_product_vat10 = Helper.formatMoney(data.total_amount_product_vat10, decimal_amount, formatter);\r\n\r\n      data.amount_vat0 = amount_vat0;\r\n      data.amount_vat_other = Helper.formatMoney(data.amount_vat_other, decimal_amount_vat, formatter);\r\n      data.amount_vat5 = Helper.formatMoney(data.amount_vat5, decimal_amount_vat, formatter);\r\n      data.amount_vat8 = Helper.formatMoney(data.amount_vat8, decimal_amount_vat, formatter);\r\n      data.amount_vat10 = Helper.formatMoney(data.amount_vat10, decimal_amount_vat, formatter);\r\n\r\n      data.amount = Helper.formatMoney(data.amount, decimal_amount, formatter);\r\n      data.total_amount_vat = Helper.formatMoney(data.total_amount_vat, decimal_amount_vat, formatter);\r\n      data.total_payment = Helper.formatMoney(data.total_payment, decimal_amount_after_vat, formatter);\r\n\r\n      invoicesPreview.push(data);\r\n    });\r\n\r\n    return invoicesPreview;\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    win.blur();\r\n    Library.showloading();\r\n\r\n    let sub = this.vatService.inChuyenDoiInvoiceImport(this.invoicesId, false).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n        win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n        //   win.document.write(`\r\n        //   <a id=\"idA\" title=\"Download File\" style=\"font-family: \\'Verdana\\';color: #333;font-weight: 600;float:right; margin-bottom: 5px;\r\n        //     margin-right: 20px;\" download=\"hoadon.pdf\" href=\"data:application/pdf;base64,${pdf_file}\">Tải File</a>\r\n        //   <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n\r\n        // `);\r\n        //   win.resizeTo(screen.availWidth, screen.availHeight);\r\n        //   win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xemHoaDon() {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    win.blur();\r\n    Library.showloading();\r\n    let sub = this.vatService.xemHoaDonInvoiceImport(this.invoicesId).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n        win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n        // win.document.write(`<iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}\"></iframe>`)\r\n        // win.resizeTo(screen.availWidth, screen.availHeight);\r\n        // win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  submit(type) {\r\n    this.isXuatThanhCong = false;\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.checkStatusData()\r\n    if (this.totalDuplicateInvoice > 0) {\r\n      Library.notify(\"Số phiếu, chứng từ bị trùng\", \"error\");\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      let convert = this.convertGirdToInvoices(\"submit\");\r\n      if (convert) {\r\n        if (type == \"XUAT\") {\r\n          if (this.confirmCheckPreview) {\r\n            this.showPopupImport = true;\r\n            if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n              this.xuatHoaDon();\r\n            } else {\r\n              this.xuatChoKy();\r\n            }\r\n            this.confirmCheckPreview = false;\r\n            // });\r\n          } else {\r\n            this.previewBeforeSubmit();\r\n          }\r\n        } else if (type == \"LUU\") {\r\n          this.showPopupImport = true;\r\n          this.luuChoXuat();\r\n        }\r\n      }\r\n    }, 300);\r\n  }\r\n  /* */\r\n  configColumn() {\r\n    const initialState = {\r\n      listColumn: this.listColumn,\r\n      listColumnClone: this.listColumn,\r\n      configs: this.configs,\r\n      exportType: sEnum.exportType.hoadon\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigColumnImportExcelComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    let subModal = this.modalService.onHide.subscribe(() => {\r\n      let data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.listColumn = data.listColumn;\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  infoColumn(columnName) {\r\n    if (this.listColumn && this.listColumn.length > 0) {\r\n      let _obj = this.listColumn.filter(p => p.column_code == columnName)[0];\r\n      if (_obj) {\r\n        if ((_obj.column_code == \"vat\" || _obj.column_code == \"amount_vat\") && !this.isHdGTGT) {\r\n          _obj.is_visible = false;\r\n        }\r\n        return _obj;\r\n      } else return { column_code: \"\", column_name: \"\", is_visible: false };\r\n    }\r\n  }\r\n\r\n  checkCKS(typeView) {\r\n    this.connectWebsocket();\r\n    if (this.socketService.checkNull()) {\r\n      this.socketService.connect();\r\n    }\r\n    setTimeout(() => {\r\n      const res = this.socketService.getStatusCertificate();\r\n      if (res && res.status === 'error' && res.code == 10) {\r\n        const initialState = {\r\n          typeNotify: \"XEM_MAU\",\r\n        };\r\n        this.bsModalRef = this.modalService.show(SignatureOffComponent, {\r\n          class: 'modal-lg', backdrop: 'static',\r\n          keyboard: false,\r\n          initialState\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n\r\n        });\r\n      }\r\n      else {\r\n        if (typeView == \"XEM_TRUOC\") {\r\n          const initialState = {\r\n            items: this.invoicesArr,\r\n            isXuatHD: false,\r\n            typeAction: 'NAP_EXCEL'\r\n          };\r\n          this.bsModalViewModel = this.modalImportService.show\r\n            (\r\n              ViewInvoiceComponent,\r\n              {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'modal-xl view-invoice',\r\n                initialState\r\n              }\r\n            );\r\n          const subModal = this.modalImportService.onHide.subscribe(() => {\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n        else if (typeView == \"XUAT_HOA_DON\") {\r\n          let hinhthucxuat = \"\";\r\n          if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n            hinhthucxuat = \"và ký\";\r\n          } else {\r\n            hinhthucxuat = \"chờ ký\";\r\n          }\r\n          const initialState = {\r\n            items: this.invoicesArr,\r\n            isXuatHD: true,\r\n            hinhthucxuat: hinhthucxuat,\r\n            typeAction: 'NAP_EXCEL'\r\n          };\r\n\r\n          this.bsModalViewModel = this.modalImportService.show\r\n            (\r\n              ViewInvoiceComponent,\r\n              {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'modal-xl view-invoice',\r\n                initialState\r\n              }\r\n            );\r\n          const subModal = this.modalImportService.onHide.subscribe(() => {\r\n            if (this.bsModalViewModel.content.successSaveItem == \"DONG_Y\") {\r\n              this.connectWebsocket();\r\n              this.confirmCheckPreview = true;\r\n              this.submit('XUAT');\r\n            }\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  dong() {\r\n    this.bsModalImportRef.hide();\r\n    //this._location.back();\r\n    if (this.search)\r\n      this.router.navigate([`/system/payment-receipt`], { queryParams: this.search });\r\n    else\r\n      this.router.navigate([`/system/payment-receipt`]);\r\n  }\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        this.invoice_products.byKey(key).then((row) => {\r\n          switch (column) {\r\n            case 'unit_code':\r\n              this.unitChange(row);\r\n              break;\r\n            default:\r\n              break;\r\n            // }\r\n          }\r\n        }, (error) => {\r\n        });\r\n      });\r\n    }, 100);\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"import-invoices\\\"> \\r\\n  <form class=\\\"form-import-invoices\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">IMPORT THÔNG TIN HÓA ĐƠN TỪ EXCEL</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalImportRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\" style=\\\"padding-bottom: 0px;\\\">\\r\\n      <div class=\\\"row inport-selector\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">Mẫu hóa đơn</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box \\r\\n                  [items]=\\\"invoice_releases\\\" \\r\\n                  displayExpr=\\\"name\\\" \\r\\n                  [(value)]=\\\"invoice_release_id\\\"\\r\\n                  valueExpr=\\\"value\\\" \\r\\n                  [disabled]=\\\"disabledInvoiceReleases\\\"\\r\\n                  (onValueChanged)=\\\"onInvoiceReleases($event)\\\"\\r\\n                  >\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"field field-first\\\" style=\\\"width: 27%;\\\">\\r\\n              <div class=\\\"label\\\" style=\\\"width: 135px;\\\">Hình thức xuất</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box \\r\\n                  [(value)]=\\\"htXuat\\\"\\r\\n                  displayExpr=\\\"name\\\"\\r\\n                  valueExpr=\\\"code\\\"\\r\\n                  [items]=\\\"htXuatOptions\\\"\\r\\n                  >\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"field field-first\\\" *ngIf=\\\"!isAllowEditInvoiceDate\\\" style=\\\"width: 27%;\\\">\\r\\n              <div class=\\\"label\\\" style=\\\"width: 135px;\\\">Ngày xuất hóa đơn</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-date-box \\r\\n                  [(value)]=\\\"invoice_date\\\"\\r\\n                  displayFormat=\\\"dd/MM/yyyy\\\"\\r\\n                  [useMaskBehavior]=\\\"true\\\"\\r\\n                  dateSerializationFormat=\\\"yyyy-MM-dd HH:mm:ss\\\"\\r\\n                  >\\r\\n                </dx-date-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\">Tên file</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-text-box [readOnly]=\\\"true\\\" [value]=\\\"fileName\\\"></dx-text-box>\\r\\n              </div>\\r\\n              <div class=\\\"btn-select-file\\\" style=\\\"margin-left: 10px;\\\">\\r\\n                  <a href=\\\"javascript:void(0)\\\" (click)=\\\"napDuLieuTuBangKe()\\\" class=\\\"support-link\\\">\\r\\n                      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx, .xls\\\" (change)=\\\"onFileChanged($event)\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n                      <span>Chọn file</span>\\r\\n                    </a>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- <div class=\\\"col-md-5\\\">\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field\\\" *ngIf=\\\"!isAllowEditInvoiceDate\\\">\\r\\n              <div class=\\\"label\\\" style=\\\"width: 135px;\\\">Ngày xuất hóa đơn</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-date-box \\r\\n                  [(value)]=\\\"invoice_date\\\"\\r\\n                  displayFormat=\\\"dd/MM/yyyy\\\"\\r\\n                  dateSerializationFormat=\\\"yyyy-MM-dd\\\"\\r\\n                  >\\r\\n                </dx-date-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div> -->\\r\\n      </div>\\r\\n      <div class=\\\"note-template-import\\\">\\r\\n        <p><span style=\\\"font-weight: 600; color: red; padding-right: 5px;\\\">Lưu ý</span> Chức năng này Import danh sách hóa đơn từ file Excel. File này cần</p>\\r\\n        <p style=\\\"margin-left: 48px;\\\">đúng định dạng (Template). Bạn có thể tải Template mẫu Excel <a href=\\\"javascript:void(0)\\\" style=\\\"font-weight: 600\\\" (click)=\\\"getFileTemp()\\\">Tại đây</a></p>\\r\\n      </div>\\r\\n      <div class=\\\"read-file\\\">\\r\\n      <dx-button (click)=\\\"chonDocFile()\\\" text=\\\"Đọc file Excel\\\" type=\\\"default\\\" [disabled]=\\\"isDisReadFile\\\"></dx-button>\\r\\n      </div>\\r\\n      <!-- phần table hiển thị -->\\r\\n      <div class=\\\"row invoice-table\\\">\\r\\n          <div class=\\\"col-md-12\\\">\\r\\n            <dx-data-grid \\r\\n              id=\\\"gridImportInvoice\\\"\\r\\n              [dataSource]=\\\"dataSource\\\"\\r\\n              [showBorders]=\\\"true\\\"\\r\\n              [showRowLines]=\\\"true\\\"\\r\\n              [wordWrapEnabled]=\\\"true\\\"\\r\\n              [columnAutoWidth]=\\\"false\\\"\\r\\n              [allowColumnResizing]=\\\"true\\\"\\r\\n              [columnMinWidth]=\\\"50\\\"\\r\\n              [columnResizingMode]=\\\"true\\\"\\r\\n              (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n              (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n              (onContentReady)=\\\"onContentReady($event)\\\"\\r\\n              (onCellPrepared)=\\\"onCellPrepared($event)\\\"\\r\\n              (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n              (onRowUpdated)=\\\"onRowUpdated($event)\\\"\\r\\n              (onRowRemoving)=\\\"onRowRemoving($event)\\\"\\r\\n              (onKeyDown)=\\\"onGripKeyDown($event)\\\">\\r\\n              <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n              <dxo-editing \\r\\n                mode=\\\"cell\\\" \\r\\n                [allowUpdating]=\\\"true\\\"\\r\\n                [allowDeleting]=\\\"true\\\"\\r\\n                [useIcons]=\\\"true\\\">\\r\\n              </dxo-editing>\\r\\n              <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n              <dxo-column-fixing [enabled]=\\\"true\\\"></dxo-column-fixing>\\r\\n\\r\\n              <dxi-column dataField=\\\"number_of_vouchers\\\" [width]=\\\"130\\\" caption=\\\"Số phiếu/Chứng từ\\\" alignment=\\\"left\\\" \\r\\n                [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n                <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"customer_object_code\\\" [width]=\\\"70\\\" caption=\\\"Cá nhân\\\" alignment=\\\"center\\\" \\r\\n              [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"customer_code\\\" [width]=\\\"100\\\" caption=\\\"Mã khách hàng\\\" alignment=\\\"center\\\" \\r\\n              [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n              \\r\\n              <dxi-column dataField=\\\"buyer_tax_code\\\" [width]=\\\"100\\\" caption=\\\"MST/MNS\\\" alignment=\\\"left\\\" \\r\\n              [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n              <dxi-validation-rule \\r\\n                type=\\\"pattern\\\"\\r\\n                [pattern]=\\\"taxCodePattern\\\" message=\\\"Mã số thuế không đúng định dạng\\\"\\r\\n              ></dxi-validation-rule></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"customer_name\\\" [width]=\\\"180\\\" caption=\\\"Tên đơn vị, tổ chức\\\" alignment=\\\"left\\\" \\r\\n                [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"buyer_name\\\" [width]=\\\"120\\\" caption=\\\"Người mua hàng\\\" alignment=\\\"left\\\" \\r\\n              [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"buyer_address\\\" [width]=\\\"200\\\" caption=\\\"Địa chỉ\\\" alignment=\\\"left\\\">\\r\\n                  <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"buyer_mobile\\\" [width]=\\\"100\\\" caption=\\\"Điện thoại\\\" alignment=\\\"left\\\">\\r\\n                <dxi-validation-rule \\r\\n                type=\\\"pattern\\\"\\r\\n                [pattern]=\\\"phonePattern\\\" message=\\\"Mã số thuế không đúng định dạng\\\"\\r\\n              ></dxi-validation-rule>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"buyer_email\\\" [width]=\\\"150\\\" caption=\\\"Email nhận hóa đơn\\\" alignment=\\\"left\\\">\\r\\n              <dxi-validation-rule \\r\\n                type=\\\"pattern\\\"\\r\\n                [pattern]=\\\"emailPattern\\\" message=\\\"Mã số thuế không đúng định dạng\\\"></dxi-validation-rule>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"payment_method_name\\\" [width]=\\\"100\\\" caption=\\\"HTTT\\\" alignment=\\\"left\\\">\\r\\n                <dxo-lookup [dataSource]=\\\"select.payment_method_names\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n                <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n              </dxi-column>\\r\\n              \\r\\n              <dxi-column dataField=\\\"bank_account_number\\\" [width]=\\\"100\\\" caption=\\\"Số tài khoản\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"bank_name\\\" [width]=\\\"150\\\" caption=\\\"Tên ngân hàng\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"product_code\\\" caption=\\\"Mã hàng\\\" alignment=\\\"center\\\" [width]=\\\"100\\\">\\r\\n                <dxo-lookup [dataSource]=\\\"select.products\\\" displayExpr=\\\"code\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"product_name\\\" [width]=\\\"150\\\" caption=\\\"Tên hàng hóa, dịch vụ\\\" alignment=\\\"left\\\">\\r\\n                  <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"provisions_on_accounts\\\" [width]=\\\"150\\\" caption=\\\"Định khoản\\\" alignment=\\\"left\\\">\\r\\n                <dxo-lookup [dataSource]=\\\"select.select_provisions_on_accounts\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"unit_code\\\" caption=\\\"Đơn vị tính\\\" [width]=\\\"100\\\" alignment=\\\"center\\\">\\r\\n                <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"quantity\\\" caption=\\\"Số lượng\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.so_luong }\\\" \\r\\n              [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"price\\\" caption=\\\"Đơn giá\\\" [width]=\\\"90\\\" [editorOptions]=\\\"{ format: formatter.don_gia }\\\" \\r\\n              [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"amount\\\" caption=\\\"Thành tiền\\\" [width]=\\\"109\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" \\r\\n              [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"vat\\\" caption=\\\"VAT\\\" [width]=\\\"90\\\" alignment=\\\"center\\\">\\r\\n                <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"amount_vat\\\" caption=\\\"Tiền VAT\\\" [width]=\\\"120\\\" [editorOptions]=\\\"{ format: formatter.tien_thue }\\\" \\r\\n              [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"amount_after_vat\\\" caption=\\\"Tổng tiền\\\" [width]=\\\"130\\\" \\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" \\r\\n              [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n              <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n              </dxi-column>\\r\\n              <dxi-column dataField=\\\"note\\\" [width]=\\\"100\\\" caption=\\\"Ghi chú\\\" alignment=\\\"left\\\">\\r\\n              </dxi-column>\\r\\n              <dxi-column cellTemplate=\\\"DinhKemFile\\\" caption=\\\"Đính kèm file\\\" [width]=\\\"250\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n              \\r\\n              <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n                <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n              </div>\\r\\n\\r\\n              <div *dxTemplate=\\\"let data of 'DinhKemFile'\\\">\\r\\n                <a href=\\\"javascript:void(0)\\\" (click)=\\\"dinhKemFile($event)\\\" *ngIf=\\\"data.data.number_of_vouchers != ''\\\">\\r\\n                  <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"data.rowIndex\\\" accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n                  <!-- <span><i class=\\\"fa fa-file\\\"></i></span> --> \\r\\n                  Chọn file\\r\\n                  <p>{{data.data.file_attach_name}}</p>\\r\\n                </a>\\r\\n              </div>\\r\\n              <!-- <dxo-summary >\\r\\n                <dxi-total-item\\r\\n                    summaryType=\\\"custom\\\" \\r\\n                    [customizeText]=\\\"customizeText\\\"\\r\\n                    showInColumn=\\\"amount\\\">\\r\\n                </dxi-total-item>\\r\\n              </dxo-summary> -->\\r\\n              <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n              <dxo-summary>\\r\\n                <dxi-total-item\\r\\n                    name=\\\"totalAmount\\\"\\r\\n                    column=\\\"amount\\\"\\r\\n                    summaryType=\\\"sum\\\"\\r\\n                    [customizeText]=\\\"customizeText\\\">\\r\\n                </dxi-total-item>\\r\\n                <dxi-total-item\\r\\n                    name=\\\"totalAmountVat\\\"\\r\\n                    column=\\\"amount_vat\\\"\\r\\n                    summaryType=\\\"sum\\\"\\r\\n                    [customizeText]=\\\"customizeText\\\">\\r\\n                </dxi-total-item>\\r\\n                <dxi-total-item\\r\\n                    name=\\\"totalAmountAfterVat\\\"\\r\\n                    column=\\\"amount_after_vat\\\"\\r\\n                    summaryType=\\\"sum\\\"\\r\\n                    [customizeText]=\\\"customizeText\\\">\\r\\n                </dxi-total-item>\\r\\n              </dxo-summary>\\r\\n            </dx-data-grid>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-md-7\\\">\\r\\n              <div class=\\\"note-footer\\\">\\r\\n                  <p style=\\\"margin-left: 0;\\\"><span style=\\\"font-weight: 500; color: red;\\\">Ghi chú</span></p>\\r\\n                  <p>Có thể sửa xóa trực tiếp trên lưới. Click chuột phải để thêm dòng nhập liệu</p>\\r\\n                  <p><span class=\\\"mau-vang\\\"> </span>Màu vàng: Số chứng từ bị trùng với dữ liệu hóa đơn đã xuất</p>\\r\\n                  <p><span class=\\\"mau-do\\\"> </span>Màu đỏ: Thông tin sai định dạng</p>\\r\\n              </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-5\\\">\\r\\n              <div class=\\\"note-footer\\\" style=\\\"text-align: right; margin-right: 50px;\\\">\\r\\n                  <p style=\\\"padding: 8px;\\\"></p>\\r\\n                  <p>Số chứng từ hợp lệ: <span style=\\\"color: seagreen; font-weight: 600\\\">{{totalInvoice}}</span></p>\\r\\n                  <p>Số chứng từ bị sai định dạng thông tin: <span style=\\\"color: red; font-weight: 600\\\">{{totalErrorInvoice}}</span></p>\\r\\n                  <p>Số chứng từ bị trùng: <span style=\\\"color: yellow; font-weight: 600\\\">{{totalDuplicateInvoice}}</span></p>\\r\\n              </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        \\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"Xem trước hóa đơn\\\" (click)=\\\"preview()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button *ngIf=\\\"!isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"Xem hóa đơn\\\" (click)=\\\"xemHoaDon()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button *ngIf=\\\"!isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\In.png\\\" text=\\\"In chuyển đổi\\\" (click)=\\\"inChuyenDoi()\\\" type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-8 btn-right\\\">\\r\\n        <dx-button text=\\\"Quay lại\\\" type=\\\"default\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" (click)=\\\"bsModalImportRef.hide()\\\"></dx-button>\\r\\n        <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"Xuất dữ liệu trên lưới ra Excel\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"xuatFile()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"Ghi tạm\\\" icon=\\\"assets\\\\img\\\\icons\\\\GhiTam.png\\\" (click)=\\\"submit('LUU')\\\" type=\\\"default\\\"></dx-button>\\r\\n        <!-- <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\"  text=\\\"Xuất chờ ký\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"submit('CHO_KY')\\\" type=\\\"default\\\" ></dx-button> -->\\r\\n        <dx-button *ngIf=\\\"isVisibleBtnSubmit && isAccessExportInv\\\"  text=\\\"Xuất hóa đơn\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"submit('XUAT')\\\" type=\\\"default\\\" ></dx-button>\\r\\n      </div>\\r\\n        \\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"Quá trình đang xử lý\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopupImport\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<dx-popup \\r\\n  class=\\\"popup\\\" \\r\\n  [width]=\\\"500\\\" \\r\\n  [height]=\\\"160\\\" \\r\\n  [showTitle]=\\\"true\\\" \\r\\n  title=\\\"Thông báo\\\" \\r\\n  [dragEnabled]=\\\"false\\\" \\r\\n  [closeOnOutsideClick]=\\\"true\\\"\\r\\n  [(visible)]=\\\"popupCachNapDuLieu\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p>Bạn vui lòng chọn cách nạp dữ liệu: </p>\\r\\n    <div class=\\\"text-center\\\" style=\\\"margin-top: 25px\\\">\\r\\n      <dx-button (click)=\\\"thayThe($event)\\\" text=\\\"Thay thế toàn bộ\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"themTiep($event)\\\" text=\\\"Thêm tiếp\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n  \\r\\n</dx-popup>\"","module.exports = \".import-invoices .dx-texteditor{border-radius:0;display:inline-block;margin-right:8px;height:28px;max-height:32px}.import-invoices .select-file .field>div{display:inline-block;vertical-align:middle}.import-invoices .select-file{width:100%;display:inline-block;margin:0}.import-invoices .select-file .field .label{width:90px;margin-right:10px;text-align:right}.import-invoices .select-file .field .value{width:35% !important}.import-invoices .select-file .field.field-first{display:inline-block}.import-invoices .select-file .field.field-first .value{width:calc(100% - 150px) !important}::ng-deep .import-invoices .select-file .field .dx-texteditor{width:100% !important}.support-link{top:-2px;position:relative;padding:5px 25px 7px 25px;background-color:#337ab7;border-color:#2d6da3;color:#fff;text-decoration:none}.support-link.mgr-15{margin-right:15px}.support-link img{margin-right:10px;margin-top:-2px}#auto-input{margin-right:75px}.note-template-import{margin-top:10px;margin-left:52px;display:inline-block;width:39%}.read-file{display:inline-block;margin-left:6px;position:relative;top:-10px}.note-footer{margin-top:10px}.note-footer p{margin-left:20px;margin-bottom:5px}.mau-vang{padding-right:15px;margin-right:10px;background-color:yellow}.mau-do{padding-right:15px;margin-right:10px;background-color:red}::ng-deep #gridImportInvoice{height:400px}::ng-deep .btn-right{padding-right:0}::ng-deep .btn-right .dx-button{float:right}::ng-deep .btn-right .dx-button:last-child{margin-right:8px !important}::ng-deep #gridImportInvoice .dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit{width:40px;min-width:20px !important}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-validator.dx-datagrid-invalid .dx-highlight-outline::after{border:2px solid #d9534f}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-cell-modified .dx-highlight-outline::after{border-color:#fff}::ng-deep .form-import-invoices .inport-selector .dx-texteditor-input{padding-bottom:15px}\\n\"","import { Component, OnInit, ViewChild, Input } from '@angular/core';\r\n\r\nimport { SocketService, sEnum, AuthService, Library, Helper, VChanggeMoneyService } from '@core/index';\r\n\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as XLSX from 'xlsx';\r\nimport { pattern } from '@config/index';\r\nimport * as moment from 'moment';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-import-invoices',\r\n  templateUrl: './import-invoices.component.html',\r\n  styleUrls: ['./import-invoices.component.scss']\r\n})\r\nexport class ImportInvoicesComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n\r\n  dataSource: any = [];\r\n  invoice_releases: any;\r\n  fileName = \"\";\r\n  dataExcelFile: any;\r\n  target: DataTransfer;\r\n  isDisReadFile = true;\r\n  select: any = {};\r\n  isAccessExportInv: boolean = false;\r\n  configs: any;\r\n  formatter: any = {};\r\n  frmData = new InvoiceModel(1);\r\n  fieldDisable = [\"number_of_vouchers\", \"customer_code\", \"customer_object_code\", \"buyer_tax_code\", \"customer_name\", \"buyer_name\", \"buyer_address\", \"buyer_mobile\", \"buyer_email\", \"payment_method_name\", \"bank_account_number\", \"bank_name\"];\r\n  invoice_release_id: any;\r\n  template_id: any;\r\n  invoice_date = \"\";\r\n  isAllowEditInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuat = \"XuatVaKy\";\r\n  htXuatOptions = [\r\n    {\r\n      name: \"Xuất và ký\",\r\n      code: \"XuatVaKy\"\r\n    },\r\n    {\r\n      name: \"Xuất chờ ký\",\r\n      code: \"XuatChoKy\"\r\n    }\r\n  ];\r\n\r\n  ioSignature: Subscription;\r\n  tempKiFile = 0;\r\n  coKiSoTapChung = false;\r\n  ttDaXuatHoaDon: boolean = false; //Trạng thái đã xuất hóa đơn hay chưa\r\n  invoicesArr: any;\r\n\r\n  invoice: any;\r\n  totalInvoice = 0;\r\n  totalErrorInvoice = 0;\r\n  totalDuplicateInvoice = 0;\r\n  countInvoice = 1;\r\n\r\n  valueProgress: number = 0;\r\n  showPopupImport = false;\r\n  stopImport = false;\r\n  subXuatHoaDon: any;\r\n  subLuuChoXuat: any;\r\n  errorImport = false;\r\n  hoaDonImportChoXuat: any;\r\n  invoicesHaveNumberOfVouchers: any;\r\n\r\n  taxCodePattern = pattern.tax_code;\r\n  emailPattern = pattern.email;\r\n  phonePattern = pattern.phone;\r\n\r\n  isVisibleBtnSubmit = true;\r\n  approveRequired = false;\r\n  dataFormGird = [];\r\n  disabledInvoiceReleases: boolean = false;\r\n\r\n  invoicesId = [];\r\n\r\n  is_multi_vat: any;\r\n\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n\r\n  popupCachNapDuLieu = false;\r\n  cachNapDuLieu = true;\r\n  configdisplayCurrency: any;\r\n  listColumn: any = [];\r\n  _translate: any;\r\n  constructor(\r\n    public bsModalImportRef: BsModalRef,\r\n    private modalImportService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    //get cấu hình\r\n    this.connectWebsocket();\r\n    this.loadRow(10);\r\n    this.configs.forEach(item => {\r\n      if (item.name == \"decimal_places_json\") {\r\n        this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(item.value));\r\n      }\r\n      if (item.name == \"integrate_parameter\") {\r\n        let config = JSON.parse(item.value);\r\n        this.coKiSoTapChung = config.concentrate_signature.is_concentrate_signature;\r\n      }\r\n      if (item.name == \"display_currency\") {\r\n        this.configdisplayCurrency = item.value;\r\n      }\r\n    });\r\n    let configColumnImport = this.configs.filter(p => p.name == \"config_column_import_inv_excel\")[0];\r\n    if (configColumnImport && configColumnImport.value) {\r\n      this.listColumn = JSON.parse(configColumnImport.value);\r\n    } else {\r\n      this.listColumn = Helper.listColumnImportExcel(this._translate);\r\n    }\r\n    if (this.invoice_releases.length) {\r\n      // this.invoice_release_id = this.invoice_releases[0].value; \r\n      this.template_id = this.invoice_releases[0].template_id;\r\n      this.is_multi_vat = this.invoice_releases[0].is_multi_vat;\r\n    }\r\n\r\n    if (this.hoaDonImportChoXuat) {\r\n      this.invoice_date = this.hoaDonImportChoXuat[0].invoice_date ? moment(this.hoaDonImportChoXuat[0].invoice_date).format('YYYY-MM-DD HH:mm:ss') : \"\";\r\n      this.invoice_release_id = this.hoaDonImportChoXuat[0].invoice_release_id;\r\n      if (this.hoaDonImportChoXuat[0].status == \"GIU_SO\") {\r\n        this.disabledInvoiceReleases = true;\r\n      }\r\n      this.layDuLieuTuHoaDonChoXuat();\r\n    }\r\n    let currentUser = this.authService.getCurrentUser();\r\n\r\n    let listpermissions = currentUser.user.permissions.split(',');\r\n    let _obj = listpermissions.filter(p => p == \"phe_duyet\");\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else\r\n      this.isAccessExportInv = false;\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          // Helper.dowloadFile('test.xml', 'xml', data.Data.Content);\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.xuLiApiKhiXuat();\r\n          } else {\r\n            this.invoice.invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoice.invoice_files.length) {\r\n              this.xuLiApiKhiXuat();\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.errorImport = true;\r\n        this.showPopupImport = false;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  layDuLieuTuHoaDonChoXuat() {\r\n    let data = [];\r\n    let ids = \"\";\r\n    this.hoaDonImportChoXuat.forEach(invoice => {\r\n      // console.log(element)\r\n      for (let i = 0; i < invoice.invoice_products.length; i++) {\r\n        let rowInvoice = new Object;\r\n        invoice.invoice_products = invoice.invoice_products.sort((itemA, itemB) => {\r\n          return itemA.order - itemB.order;\r\n        });\r\n        let product = invoice.invoice_products[i];\r\n        this.invoice_release_id = invoice.invoice_release_id;\r\n        if (i == 0) {\r\n          this.invoicesId.push(invoice.id)\r\n          rowInvoice[\"statusData\"] = \"INVALID\";\r\n          rowInvoice[\"id\"] = invoice.id;\r\n          rowInvoice[\"number_of_vouchers\"] = invoice.number_of_vouchers;\r\n          rowInvoice[\"customer_code\"] = invoice.customer_code;\r\n          rowInvoice[\"customer_object_code\"] = invoice.customer_object_code == \"CA_NHAN\" ? true : false;\r\n          rowInvoice[\"buyer_tax_code\"] = invoice.buyer_tax_code;\r\n          rowInvoice[\"customer_name\"] = invoice.customer_name;\r\n          rowInvoice[\"buyer_name\"] = invoice.buyer_name;\r\n          rowInvoice[\"buyer_address\"] = invoice.buyer_address;\r\n          rowInvoice[\"buyer_mobile\"] = invoice.buyer_mobile;\r\n          rowInvoice[\"buyer_email\"] = invoice.buyer_email;\r\n          rowInvoice[\"payment_method_name\"] = invoice.payment_method_name;\r\n          rowInvoice[\"payment_method_view_name\"] = invoice.payment_method_view_name;\r\n\r\n          rowInvoice[\"bank_account_number\"] = invoice.bank_account_number;\r\n          rowInvoice[\"bank_name\"] = invoice.bank_name;\r\n        } else {\r\n          rowInvoice[\"number_of_vouchers\"] = \"\";\r\n          rowInvoice[\"customer_code\"] = \"\";\r\n          rowInvoice[\"customer_object_code\"] = false;\r\n          rowInvoice[\"buyer_tax_code\"] = \"\";\r\n          rowInvoice[\"customer_name\"] = \"\";\r\n          rowInvoice[\"buyer_name\"] = \"\";\r\n          rowInvoice[\"buyer_address\"] = \"\";\r\n          rowInvoice[\"buyer_mobile\"] = \"\";\r\n          rowInvoice[\"buyer_email\"] = \"\";\r\n          rowInvoice[\"payment_method_name\"] = \"\";\r\n          rowInvoice[\"payment_method_view_name\"] = \"\";\r\n\r\n          rowInvoice[\"bank_account_number\"] = \"\";\r\n          rowInvoice[\"bank_name\"] = \"\";\r\n          rowInvoice[\"dataType\"] = \"HANG_HOA\";\r\n          rowInvoice[\"productNumberOfVouchers\"] = invoice.number_of_vouchers\r\n        }\r\n        rowInvoice[\"product_code\"] = product.product_code;\r\n        rowInvoice[\"product_name\"] = product.product_name;\r\n        // if (invoice[\"product_code\"] != \"\") {\r\n        //   let _obj = this.select.products.filter(p => p.code == invoice[\"product_code\"])[0];\r\n        //   if (!_obj) {\r\n        //     let _objPush = {\r\n        //       code: invoice[\"product_code\"],\r\n        //       name: invoice[\"product_name\"],\r\n        //       mhvth: invoice[\"product_code\"] + \": \" + invoice[\"product_name\"],\r\n        //     }\r\n        //     this.select.products.push(_objPush);\r\n        //   }\r\n\r\n        // }\r\n        rowInvoice[\"provisions_on_accounts\"] = product.provisions_on_accounts;\r\n        rowInvoice[\"unit_code\"] = product.unit_code;\r\n        rowInvoice[\"unit_name\"] = product.unit_name;\r\n        rowInvoice[\"quantity\"] = product.quantity;\r\n        rowInvoice[\"price\"] = product.price;\r\n        rowInvoice[\"amount\"] = product.amount;\r\n        rowInvoice[\"vat\"] = product.vat;\r\n        rowInvoice[\"amount_vat\"] = product.amount_vat;\r\n        rowInvoice[\"amount_after_vat\"] = product.amount_after_vat;\r\n        rowInvoice[\"order\"] = product.order;\r\n        rowInvoice[\"view_order\"] = product.view_order;\r\n        data.push(rowInvoice);\r\n      }\r\n\r\n    });\r\n\r\n    this.dataSource = data;\r\n    this.checkStatusData();\r\n    // if(data.length < 10){\r\n    //   this.loadRow(10-data.length);\r\n    // }\r\n  }\r\n\r\n  loadRow(countRow) {\r\n    let isPepsi = false;\r\n    let tempRow = this.frmData.tempImportRow(countRow,isPepsi);\r\n    tempRow.forEach(element => {\r\n      this.dataSource.push(element);\r\n    });\r\n  }\r\n\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById(\"file-bang-ke\").click();\r\n    this.cachNapDuLieu = false;\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n    // document.getElementById(\"file-dinh-kem\").click();\r\n    // console.log(e)\r\n\r\n  }\r\n\r\n  log(val) { console.log(val); }\r\n\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"BK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.dataSource[rowIndex][\"file_attach\"] = fileAttachData;\r\n        this.dataSource[rowIndex][\"file_attach_name\"] = file.name;\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n\r\n  customizeText(e) {\r\n    if (!e.value) {\r\n      e.value = 0;\r\n    }\r\n    let formatter = new Intl.NumberFormat('ja-JP');\r\n    let totalMoney = formatter.format(parseFloat(e.value));\r\n    return totalMoney;\r\n  }\r\n\r\n  onFileChanged(evt) {\r\n    this.target = <DataTransfer>(evt.target);\r\n    this.fileName = this.target.files[0].name;\r\n    // this.fileSize = target.files[0].size/1024;\r\n    if (this.target.files.length !== 1) {\r\n      Library.notify('Không thể chọn nhiều file', 'error');\r\n      throw new Error('Không thể chọn nhiều file');\r\n    };\r\n    this.isDisReadFile = false;\r\n  }\r\n\r\n  addRow() {\r\n    let len, order;\r\n    if (this.dataSource.length >= 1) {\r\n      len = this.dataSource.length;\r\n      order = this.dataSource[len - 1].order + 1;\r\n    } else {\r\n      order = 1;\r\n    }\r\n\r\n    let data = this.frmData.addImportRow(order, order);\r\n    // console.log(data)\r\n    this.dataSource.push(data);\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  getFileTemp() {\r\n    Library.showloading();\r\n    let arrColumn = this.listColumn.filter(p => p.is_visible == true);\r\n    let columnsName = arrColumn.map(e => e.column_code);\r\n    let data = {\r\n      invoice: {\r\n        columns: columnsName\r\n      }\r\n    }\r\n    this.vatService.getFileTemmpImportInvoices(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất file Excel thành công\", 'success');\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    })\r\n  }\r\n\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return 'Hoàn thành: ' + percent + '%';\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình nạp dữ liệu sẽ dừng lại nếu bạn đóng cửa xổ này\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      if (this.subLuuChoXuat) {\r\n        this.subLuuChoXuat.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  getDataFromGird() {\r\n    if (this.dataSource.length > 0) {\r\n      this.dataSource.forEach(row => {\r\n        if (row.number_of_vouchers || row.productNumberOfVouchers) {\r\n          this.dataFormGird.push(row);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  chonDocFile() {\r\n    this.popupCachNapDuLieu = true;\r\n  }\r\n\r\n  thayThe(e) {\r\n    this.cachNapDuLieu = false;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  themTiep(e) {\r\n    this.cachNapDuLieu = true;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  readFile() {\r\n    this.isDisReadFile = true;\r\n    Library.showloading();\r\n    const reader: FileReader = new FileReader();\r\n\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      let data = <any>(XLSX.utils.sheet_to_json(ws, { header: \"A\", range: 5 }));\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        if (data[0].A != \"number_of_vouchers\") {\r\n          Library.notify(\"File mẫu không đúng định dạng\", \"error\");\r\n          return false;\r\n        } else {\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n      }\r\n      let fileBangKe: any = document.getElementById(\"file-bang-ke\");\r\n      fileBangKe.value = \"\";\r\n      this.dataExcelFile = _arrData;\r\n      this.fillData(this.dataExcelFile);\r\n      //  this.countAll = data.length;\r\n      //  this.showPopupImport = true;\r\n    };\r\n    reader.readAsBinaryString(this.target.files[0]);\r\n  }\r\n\r\n  fillData(fileData) {\r\n    this.getDataFromGird();\r\n    let data = [];\r\n    let count = 2;\r\n    let numberOfVouchers = [];\r\n    fileData.forEach(element => {\r\n      let invoice = new Object;\r\n      if (element.number_of_vouchers) {\r\n        invoice[\"statusData\"] = \"INVALID\"\r\n        invoice[\"customer_code\"] = element.customer_code ? element.customer_code : \"\";\r\n        invoice[\"customer_object_code\"] = element.customer_object_code && (element.customer_object_code == \"amount_after_vat\" || element.customer_object_code == \"x\") ? true : false;\r\n        invoice[\"buyer_tax_code\"] = element.buyer_tax_code ? element.buyer_tax_code : \"\";\r\n        invoice[\"customer_name\"] = element.customer_name ? element.customer_name : \"\";\r\n        invoice[\"buyer_name\"] = element.buyer_name ? element.buyer_name : \"\";\r\n        invoice[\"buyer_address\"] = element.buyer_address ? element.buyer_address : \"\";\r\n        invoice[\"buyer_mobile\"] = element.buyer_mobile ? element.buyer_mobile : \"\";\r\n        invoice[\"buyer_email\"] = element.buyer_email ? element.buyer_email : \"\";\r\n        invoice[\"payment_method_name\"] = element.payment_method_name ? this.getPaymentMethodCodeByName(element.payment_method_name) : \"\";\r\n        invoice[\"payment_method_view_name\"] = element.payment_method_name ? element.payment_method_name : \"\";\r\n        invoice[\"bank_account_number\"] = element.bank_account_number ? element.bank_account_number : \"\";\r\n        invoice[\"bank_name\"] = element.bank_name ? element.bank_name : \"\";\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        if (invoice[\"product_code\"] != \"\") {\r\n          let _obj = this.select.products.filter(p => p.code == invoice[\"product_code\"])[0];\r\n          if (!_obj) {\r\n            let _objPush = {\r\n              code: invoice[\"product_code\"],\r\n              name: invoice[\"product_name\"],\r\n              mhvth: invoice[\"product_code\"] + \": \" + invoice[\"product_name\"],\r\n            }\r\n            this.select.products.push(_objPush);\r\n          }\r\n\r\n        }\r\n        invoice[\"provisions_on_accounts\"] = element.provisions_on_accounts ? this.checkProvisionsOnAccounts(element.provisions_on_accounts) : \"\";\r\n        invoice[\"provisions_on_accounts_name\"] = element.provisions_on_accounts ? element.provisions_on_accounts : \"\";\r\n\r\n        invoice[\"unit_code\"] = element.unit_code ? this.getUnitCodeByUnitName(element.unit_code) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_code ? element.unit_code : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        invoice[\"amount\"] = element.amount && element.amount.trim() != \"-\" ? Helper.toNumber(element.amount) : null;\r\n        invoice[\"vat\"] = element.vat ? this.checkVat(element.vat) : \"\";\r\n        invoice[\"vat_name\"] = element.vat ? element.vat : \"\";\r\n        invoice[\"amount_vat\"] = element.amount_vat && element.amount_vat.trim() != \"-\" ? Helper.toNumber(element.amount_vat) : null;\r\n        invoice[\"amount_after_vat\"] = element.amount_after_vat && element.amount_after_vat.trim() != \"-\" ? Helper.toNumber(element.amount_after_vat) : null;\r\n        invoice[\"note\"] = element.note ? element.note : \"\";\r\n\r\n        if (this.checkNumberOfVouchers(element.number_of_vouchers, data) != -1) {\r\n          invoice[\"dataType\"] = \"HANG_HOA\";\r\n          invoice[\"number_of_vouchers\"] = \"\";\r\n          invoice[\"productNumberOfVouchers\"] = element.number_of_vouchers;\r\n          invoice[\"order\"] = count;\r\n          invoice[\"view_order\"] = count;\r\n          count++;\r\n        } else {\r\n          invoice[\"number_of_vouchers_backup\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          numberOfVouchers.push(invoice[\"number_of_vouchers\"]);\r\n          invoice[\"order\"] = 1;\r\n          invoice[\"view_order\"] = 1;\r\n          count = 2;\r\n        }\r\n        data.push(invoice);\r\n      }\r\n    });\r\n    this.vatService.getInvoicesHaveNumberOfVouchers(numberOfVouchers).subscribe((res: any) => {\r\n      if (res.status == \"success\") {\r\n        this.invoicesHaveNumberOfVouchers = res.data.invoices;\r\n        this.checkDuplicateNumberOfVouchers(data);\r\n        this.checkStatusData();\r\n        // if(data.length < 10){\r\n        //   this.loadRow(10-data.length);\r\n        // }\r\n        this.dataGrid.instance.refresh();\r\n      }\r\n      Library.hideloading();\r\n    });\r\n\r\n  }\r\n  checkVat(vat) {\r\n    if (vat == \"Không chịu thuế\" || vat == \"không chịu thuế\") {\r\n      return -1;\r\n    } else {\r\n      return parseInt(vat);\r\n    }\r\n  }\r\n  checkDuplicateNumberOfVouchers(data) {\r\n    if (this.cachNapDuLieu) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        let foundOnGird = this.dataFormGird.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n        if (foundOnGird.length > 0 && data[i].number_of_vouchers && data[i].statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n          data[i].statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n        }\r\n      }\r\n      this.dataSource = this.dataFormGird.concat(data);\r\n    } else {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n      }\r\n      this.dataSource = data;\r\n    }\r\n    this.dataFormGird = [];\r\n  }\r\n\r\n  checkNumberOfVouchers(numberOfVouchers, invoiceSArr) {\r\n    const foundNumberOfVouchers = invoiceSArr.findIndex((item) => {\r\n      return item.number_of_vouchers == numberOfVouchers;\r\n    });\r\n    return foundNumberOfVouchers;\r\n  }\r\n\r\n  checkStatusData() {\r\n    let invalid = this.dataSource.filter((item) => {\r\n      return item.number_of_vouchers && item.statusData == \"INVALID\";\r\n    });\r\n    let errorDuplicateDatabase = this.dataSource.filter((item) => {\r\n      return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_DATABASE\";\r\n    });\r\n    let errorDuplicateOngird = this.dataSource.filter((item) => {\r\n      return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_ONGIRD\";\r\n    });\r\n\r\n    let errorData = this.dataSource.filter((item) => {\r\n      return item.statusData == \"DATA_ERROR\";\r\n    });\r\n    this.totalInvoice = invalid.length;\r\n    this.totalDuplicateInvoice = errorDuplicateDatabase.length;\r\n    this.totalErrorInvoice = errorDuplicateOngird.length + errorData.length;\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number == 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row.rowType === \"data\") {\r\n      e.items = [{\r\n        text: \"Thêm khách hàng\",\r\n        onItemClick: () => {\r\n          this.addRow();\r\n        }\r\n      },\r\n      {\r\n        text: \"Thêm hàng hóa\",\r\n        onItemClick: () => {\r\n          if (e.row.data.number_of_vouchers || e.row.data.productNumberOfVouchers) {\r\n            let temp = e.row.data.number_of_vouchers ? e.row.data.number_of_vouchers : e.row.data.productNumberOfVouchers;\r\n            let products = this.dataSource.filter((item) => {\r\n              return item.number_of_vouchers == temp || item.productNumberOfVouchers == temp;\r\n            });\r\n            let data = this.frmData.addImportRow(products.length + 1, products.length + 1);\r\n            data.dataType = \"HANG_HOA\";\r\n            if (e.row.data.number_of_vouchers) {\r\n              data[\"productNumberOfVouchers\"] = e.row.data.number_of_vouchers;\r\n              this.dataSource.splice(e.rowIndex + products.length, 0, data);\r\n            } else {\r\n              data[\"productNumberOfVouchers\"] = e.row.data.productNumberOfVouchers;\r\n              let index = this.dataSource.map(function (e) { return e.number_of_vouchers; }).indexOf(e.row.data.number_of_vouchers);\r\n              this.dataSource.splice(index + products.length - 1, 0, data);\r\n            }\r\n\r\n            this.dataGrid.instance.refresh();\r\n          } else {\r\n            Library.notify(\"Bạn chưa nhập số phiếu / chứng từ\", \"error\");\r\n          }\r\n        }\r\n      }];\r\n    }\r\n  }\r\n  onInvoiceReleases(e) {\r\n    let selectedItem = e.component.option(\"selectedItem\");\r\n    this.template_id = selectedItem.template_id;\r\n    this.invoice_release_id = e.value;\r\n    this.is_multi_vat = selectedItem.is_multi_vat;\r\n\r\n  }\r\n  onContentReady(e) {\r\n    e.component.columnOption(\"command:edit\", {\r\n      visibleIndex: -1\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.row.data) {\r\n      if (e.row.data.dataType && e.row.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.dataField)) {\r\n        e.editorOptions.disabled = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.data.dataType && e.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.column.dataField)) {\r\n        e.cellElement.style.background = \"#F1F1F1\";\r\n      }\r\n\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_ONGIRD\" && e.column.dataField == \"number_of_vouchers\") {\r\n        e.cellElement.style.background = \"#FF0000\";\r\n      }\r\n\r\n      if (e.data.number_of_vouchers) {\r\n        switch (e.column.dataField) {\r\n          case \"buyer_address\":\r\n            this.setStatusDataOnCellPrepared(e, \"Địa chỉ không được để trống\");\r\n            break;\r\n          case \"payment_method_name\":\r\n            this.setStatusDataOnCellPrepared(e, \"Hình thức thanh toán không được để trống\");\r\n            break;\r\n          case \"product_name\":\r\n            this.setStatusDataOnCellPrepared(e, \"Tên hàng hóa không được để trống\");\r\n            break;\r\n          case \"amount\":\r\n            this.setStatusDataOnCellPrepared(e, \"Thành tiền không được để trống\");\r\n            break;\r\n          case \"amount_after_vat\":\r\n            this.setStatusDataOnCellPrepared(e, \"Tổng tiền không được để trống\");\r\n            break;\r\n          case \"customer_name\":\r\n            if (e.data.customer_object_code == false) this.setStatusDataOnCellPrepared(e, \"Tên đơn vị tổ chức không được để trống\");\r\n            break;\r\n          case \"buyer_name\":\r\n            if (e.data.customer_object_code == true) this.setStatusDataOnCellPrepared(e, \"Tên khách hàng không được để trống\");\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      } else if (e.data.number_of_vouchers == \"\" && e.data.dataType == \"KHACH_HANG\" && e.data.product_name && e.column.dataField == \"number_of_vouchers\") {\r\n        this.setStatusDataOnCellPrepared(e, \"Số phiếu, chứng từ không được để trống\");\r\n      }\r\n    }\r\n  }\r\n\r\n  setStatusDataOnCellPrepared(e, message) {\r\n    if (!e.value) {\r\n      e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n      e.cellElement.title = message;\r\n      if (e.data.statusData != \"ERROR_DUPLICATE_DATABASE\" && e.data.statusData != \"ERROR_DUPLICATE_ONGIRD\") e.data.statusData = \"DATA_ERROR\";\r\n    }\r\n    else if (e.value && e.data.statusData == \"DATA_ERROR\") {\r\n      e.data.statusData = \"INVALID\"\r\n    }\r\n  }\r\n  onRowRemoving(e) {\r\n    const number_of_vouchers = e.data.number_of_vouchers\r\n    let indexRemove = [];\r\n    this.dataSource.forEach(row => {\r\n      if (row.productNumberOfVouchers == number_of_vouchers) {\r\n        indexRemove.push(this.dataSource.indexOf(row));\r\n        // if(row.statusData){\r\n        //   if(row.statusData == \"ERROR_DUPLICATE_DATABASE\") this.totalDuplicateInvoice--;\r\n        //   if(row.statusData == \"ERROR_DUPLICATE_ONGIRD\") this.totalErrorInvoice--;\r\n        // }\r\n      }\r\n    });\r\n    for (let i = indexRemove.length - 1; i >= 0; i--) {\r\n      this.dataSource.splice(indexRemove[i], 1);\r\n    }\r\n    this.checkStatusData();\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code == \"Delete\") {\r\n      // console.log(e.event.srcElement);\r\n      e.event.srcElement.value = null;\r\n      // e.event.srcElement.parentNode.parentNode.querySelector('input').value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.data) {\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_DATABASE\" && e.data.number_of_vouchers) {\r\n        e.rowElement.style.background = \"#FFFF00\";\r\n      } else {\r\n        e.rowElement.style.background = \"\";\r\n      }\r\n    }\r\n    this.checkStatusData();\r\n  }\r\n\r\n  onRowUpdated(e) {\r\n    let column = Object.keys(e.data)[0];\r\n    switch (column) {\r\n      case \"number_of_vouchers\":\r\n        this.onNumberOfVouchers(e);\r\n        break;\r\n      case \"product_code\":\r\n        this.productCodeChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"quantity\":\r\n        this.priceChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"price\":\r\n        this.priceChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"vat\":\r\n        this.vatChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"amount\":\r\n        this.amountChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"amount_vat\":\r\n        this.priceChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"amount_after_vat\":\r\n        this.priceChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.checkStatusData();\r\n    // this.dataGrid.instance.saveEditData();\r\n  }\r\n\r\n\r\n\r\n  onNumberOfVouchers(e) {\r\n    let numberOfVouchers = e.data.number_of_vouchers;\r\n    if (e.key.number_of_vouchers_backup) {\r\n      for (let i = 0; i < this.dataSource.length; i++) {\r\n        const row = this.dataSource[i];\r\n        if (row.productNumberOfVouchers && row.productNumberOfVouchers == e.key.number_of_vouchers_backup) {\r\n          this.dataSource[i].productNumberOfVouchers = numberOfVouchers;\r\n        }\r\n      }\r\n      e.key.number_of_vouchers_backup = numberOfVouchers;\r\n    }\r\n\r\n    if (numberOfVouchers != \"\") {\r\n      this.vatService.getInvoicesHaveNumberOfVouchers([numberOfVouchers]).subscribe((res: any) => {\r\n        let dupInvoices = res.data.invoices;\r\n        if (dupInvoices.length > 0) {\r\n          e.key.statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n          // this.totalDuplicateInvoice++;\r\n          // if (this.totalInvoice > 0) this.totalInvoice--\r\n        } else {\r\n          if (e.key.statusData = \"ERROR_DUPLICATE_DATABASE\") {\r\n            e.key.statusData = \"INVALID\";\r\n            // if (this.totalDuplicateInvoice > 0) this.totalDuplicateInvoice--;\r\n          }\r\n          // this.totalInvoice++;\r\n        }\r\n\r\n        let foundOnGird = this.dataSource.filter((item) => {\r\n          return item.number_of_vouchers == numberOfVouchers;\r\n        });\r\n        if (foundOnGird.length > 1 && e.key.statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n          e.key.statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n        }\r\n        this.dataGrid.instance.refresh();\r\n      });\r\n    }\r\n  }\r\n\r\n  //Thay đổi cột mã hàng\r\n  productCodeChange(e) {\r\n    this.select.products.some(item => {\r\n      if (item.code == e.data.product_code) {\r\n        e.key.product_name = item.name;\r\n        e.key.unit_code = this.checkUnitCode(item.unit_code);\r\n        e.key.quantity = null;\r\n        e.key.price = item.price ? parseFloat(item.price) : item.price;\r\n        e.key.amount = item.price ? parseFloat(item.price) : 0;\r\n        e.key.vat = item.vat ? parseFloat(item.vat) : null;\r\n        e.key.amount_vat = (e.key.vat >= 0) ? this.caculatorAmountVat(e.key.amount, e.key.vat) : null;\r\n        e.key.amount_after_vat = e.key.amount + e.key.amount_vat;\r\n      }\r\n    });\r\n  }\r\n\r\n  priceChange(e) {\r\n    let quantity = e.key.quantity || 1;\r\n    let price = e.key.price || 0;\r\n    if (price != null) {\r\n      e.key.amount = e.key.price * quantity;\r\n      e.key.amount_vat = (e.key.vat >= 0) ? this.caculatorAmountVat(e.key.amount, e.key.vat) : null;\r\n      e.key.amount_after_vat = e.key.amount + e.key.amount_vat;\r\n    }\r\n  }\r\n\r\n  vatChange(e) {\r\n    e.key.amount_vat = (e.key.vat >= 0) ? this.caculatorAmountVat(e.key.amount, e.key.vat) : null;\r\n    e.key.amount_after_vat = e.key.amount + e.key.amount_vat;\r\n  }\r\n\r\n  amountChange(e) {\r\n    if (!e.key.quantity && !e.key.price) {\r\n      e.key.amount_after_vat = e.key.amount;\r\n    } else {\r\n      let quantity = e.key.quantity || 1;\r\n      let price = e.key.price || 0;\r\n      if (price != null) {\r\n        e.key.amount = e.key.price * quantity;\r\n        e.key.amount_vat = (e.key.vat >= 0) ? this.caculatorAmountVat(e.key.amount, e.key.vat) : null;\r\n        e.key.amount_after_vat = e.key.amount + e.key.amount_vat;\r\n      }\r\n    }\r\n  }\r\n\r\n  checkValidNumberOfVouchers() {\r\n    this.dataSource.forEach(row => {\r\n      if (row.number_of_vouchers == \"\") {\r\n        Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n      } else {\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    let items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code == unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  checkProvisionsOnAccounts(name) {\r\n    let found = this.select.select_provisions_on_accounts.find(function (element) {\r\n      return element.name === name;;\r\n    });\r\n    let code = \"\";\r\n\r\n    if (found) {\r\n      code = found.code;\r\n    } else {\r\n      Library.notify(\"Định khoản chưa có trong danh mục\", \"error\");\r\n    }\r\n\r\n    return code;\r\n  }\r\n  getFormatterToNumber(formatter) {\r\n    let s1 = formatter.replace(\"0,###\", \"\");\r\n    if (s1 == \"\") {\r\n      return 0;\r\n    } else {\r\n      let s2 = s1.replace(\".\", \"\");\r\n      return s2.split(\"\").length;\r\n    }\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    let temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    let items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].name == unitName) {\r\n        return items[i].code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getPaymentMethodCodeByName(payment_method_name) {\r\n    let items = this.select.payment_method_names;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].name == payment_method_name) {\r\n        return items[i].code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    let status;\r\n    if (!this.invoice.id && !this.invoice.invoice_number) status = 'THEM_MOI';\r\n    if (this.invoice.id && !this.invoice.invoice_number) status = 'GHI_TAM';\r\n    if (this.invoice.id && this.invoice.invoice_number) status = 'GIU_SO';\r\n    if (status == 'THEM_MOI') {\r\n      let sub = this.vatService.ghiTam(this.invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.invoice_number = rs.data.invoice_number;\r\n          this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.invoice.id = rs.data.id;\r\n          this.invoicesId.push(rs.data.id);\r\n          //demo kí số vào file\r\n          if (this.coKiSoTapChung) {\r\n            this.goiApiXuatHoaDon(Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          } else {\r\n            this.socketService.kiSo(() => this.connectWebsocket(), Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status == 'GHI_TAM') {\r\n      let sub = this.vatService.edit(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n          //demo kí số vào file\r\n          if (this.coKiSoTapChung) {\r\n            this.goiApiXuatHoaDon(Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          } else {\r\n            this.socketService.kiSo(() => this.connectWebsocket(), Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status == 'GIU_SO') {\r\n      let sub = this.vatService.edit(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n          //demo kí số vào file\r\n          if (this.coKiSoTapChung) {\r\n            this.goiApiXuatHoaDon(Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          } else {\r\n            this.socketService.kiSo(() => this.connectWebsocket(), Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.subXuatHoaDon = this.vatService.xuatHoaDon({\r\n      id: this.invoice.id,\r\n      xml_string: xml_string\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        // this.formInvoice.readonlyAllForm();\r\n        this.ttDaXuatHoaDon = true;\r\n        this.valueProgress += percentComplete;\r\n        if (this.countInvoice < this.totalInvoice) {\r\n          this.countInvoice++;\r\n          this.xuatHoaDon();\r\n        } else if (this.countInvoice == this.totalInvoice) {\r\n          Library.notify('Xuất hóa đơn thành công', 'success');\r\n          this.isVisibleBtnSubmit = false;\r\n          this.showPopupImport = false;\r\n        }\r\n      } else {\r\n        this.showPopupImport = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  xuatHoaDon() {\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n\r\n    if (this.coKiSoTapChung) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      if (this.invoice && this.invoice.invoice_files.length) {\r\n        this.invoice.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.invoice_date);\r\n        });\r\n      } else {\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXA+PC90ZW1wPg==', 'ten_filek_the_trung-dc-nhi.xml', '//temp');\r\n      }\r\n    }\r\n    this.tempKiFile = 0;\r\n  }\r\n\r\n  xuatChoKy() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    this.subLuuChoXuat = this.vatService.xuatChoKy(this.invoice).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.invoice.id = rs.data.id;\r\n        this.valueProgress += percentComplete;\r\n        if (this.countInvoice < this.totalInvoice) {\r\n          this.countInvoice++;\r\n          this.xuatChoKy();\r\n        } else if (this.countInvoice == this.totalInvoice) {\r\n          Library.notify('Xuât chờ ký hóa đơn thành công', 'success');\r\n          this.showPopupImport = false;\r\n          this.bsModalImportRef.hide();\r\n        }\r\n      } else {\r\n        this.showPopupImport = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  luuChoXuat() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.invoice.id) {\r\n      this.subLuuChoXuat = this.vatService.edit(this.invoice.id, this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.luuChoXuat();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify('Cập nhật hóa đơn lưu chờ xuất hóa đơn thành công', 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    } else {\r\n      this.subLuuChoXuat = this.vatService.ghiTam(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.luuChoXuat();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify('Lưu chờ xuất hóa đơn thành công', 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatFile() {\r\n    let invoices = [];\r\n    this.dataSource.forEach(element => {\r\n      if (element.number_of_vouchers) {\r\n        let invoice = {};\r\n        invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n        invoice[\"customer_code\"] = element.customer_code; //mã đơn vị (mã khách hàng)\r\n        invoice[\"customer_object_code\"] = element.customer_object_code ? \"CA_NHAN\" : \"DOANH_NGHIEP\"; //Mã loại hóa đơn\r\n        invoice[\"buyer_tax_code\"] = element.buyer_tax_code; //Mã số thuế\r\n        invoice[\"customer_name\"] = element.customer_name; //Tên đơn vị (Tên khách hàng)\r\n        invoice[\"buyer_name\"] = element.buyer_name; //Tên người mua\r\n        invoice[\"buyer_mobile\"] = element.buyer_mobile; //Điện thoại liên hệ\r\n        invoice[\"buyer_email\"] = element.buyer_email; //Email\r\n        invoice[\"buyer_address\"] = element.buyer_address; //Địa chỉ\r\n        invoice[\"payment_method_name\"] = element.payment_method_view_name; //Hình thức thanh toán\r\n        invoice[\"bank_account_number\"] = element.bank_account_number; //Số tài khoản\r\n        invoice[\"bank_name\"] = element.bank_name; //thuộc ngân hàng\r\n        let product = {\r\n          product_name: element.product_name,\r\n          provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n          unit_name: element.unit_name,\r\n          quantity: element.quantity,\r\n          price: element.price,\r\n          amount: element.amount,\r\n          vat_name: element.vat_name,\r\n          amount_vat: element.amount_vat,\r\n          amount_after_vat: element.amount_after_vat,\r\n          discount: \"\",\r\n          amount_discount: null\r\n        }\r\n        invoice[\"invoice_products\"] = [];\r\n        invoice[\"invoice_products\"].push(product);\r\n        invoices.push(invoice);\r\n      }\r\n\r\n      if (element.productNumberOfVouchers) {\r\n        // console.log(element)\r\n        let invoiceProduct = {\r\n          product_name: element.product_name,\r\n          provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n          unit_name: element.unit_name,\r\n          quantity: element.quantity,\r\n          price: element.price,\r\n          amount: element.amount,\r\n          vat_name: element.vat,\r\n          amount_vat: element.amount_vat,\r\n          amount_after_vat: element.amount_after_vat,\r\n          discount: \"\",\r\n          amount_discount: null\r\n        }\r\n        for (let i = 0; i < invoices.length; i++) {\r\n          if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n            invoices[i].invoice_products.push(invoiceProduct);\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    let data = {\r\n      \"invoices\": invoices\r\n    }\r\n    Library.showloading();\r\n    this.vatService.exportToExcel(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất dữ liệu ra excel thành công\", \"success\");\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  convertGirdToInvoices(type) {\r\n    let invoices = [];\r\n    let invalid = true;\r\n    this.dataSource.forEach((element, index) => {\r\n      if (element.number_of_vouchers == \"\" && element.dataType == \"KHACH_HANG\" && element.product_name && type == \"submit\") {\r\n        Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n        invalid = false;\r\n        return;\r\n      }\r\n      if (element.number_of_vouchers) {\r\n        if (type == \"submit\") {\r\n          if (element.customer_name == \"\" && element.customer_object_code == false) { Library.notify(\"Tên đơn vị, tổ chức không được để trống\", \"error\"); invalid = false; return false; }\r\n          if (element.buyer_name == \"\" && element.customer_object_code == true) { Library.notify(\"Tên khách hàng không được để trống\", \"error\"); invalid = false; return false; }\r\n          if (element.buyer_address == \"\") { Library.notify(\"Địa chỉ không được để trống\", \"error\"); invalid = false; return false; }\r\n          if (element.payment_method_name == \"\") { Library.notify(\"Hình thức thanh toán không được để trống\", \"error\"); invalid = false; return false; }\r\n          if (element.product_name == \"\") { Library.notify(\"Tên hàng hóa không được để trống\", \"error\"); invalid = false; return false; }\r\n          if (element.amount_after_vat == \"\") { Library.notify(\"Tổng tiền không được để trống\", \"error\"); invalid = false; return false; }\r\n        }\r\n        let invoice = new InvoiceModel(1);\r\n        if (element.id) {\r\n          invoice.id = element.id;\r\n        }\r\n        invoice.invoice_release_id = this.invoice_release_id;\r\n        invoice.template_id = this.template_id;\r\n        invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n        invoice.customer_object_code = element.customer_object_code ? \"CA_NHAN\" : \"DOANH_NGHIEP\"; //Mã loại hóa đơn\r\n        invoice.buyer_tax_code = element.buyer_tax_code; //Mã số thuế\r\n        invoice.buyer_name = element.buyer_name; //Tên người mua\r\n        invoice.customer_name = element.customer_name //Tên đơn vị (Tên khách hàng)\r\n        invoice.customer_code = element.customer_code; //mã đơn vị (mã khách hàng)\r\n        invoice.buyer_address = element.buyer_address; //Địa chỉ\r\n        invoice.buyer_mobile = element.buyer_mobile; //Điện thoại liên hệ\r\n        invoice.buyer_email = element.buyer_email; //Email\r\n        invoice.payment_method_name = element.payment_method_name; //Hình thức thanh toán\r\n        invoice.payment_method_view_name = element.payment_method_view_name; //Hình thức thanh toán\r\n        invoice.bank_account_number = element.bank_account_number; //Số tài khoản\r\n        invoice.bank_name = element.bank_name; //thuộc ngân hàng\r\n        invoice.invoice_products[0].product_code = element.product_code;\r\n        invoice.invoice_products[0].product_name = element.product_name;\r\n        invoice.invoice_products[0].unit_code = element.unit_code;\r\n        invoice.invoice_products[0].unit_name = element.unit_name;\r\n        invoice.invoice_products[0].quantity = element.quantity;\r\n        invoice.invoice_products[0].price = element.price;\r\n        invoice.invoice_products[0].amount = element.amount;\r\n        invoice.invoice_products[0].vat = element.vat;\r\n        invoice.invoice_products[0].amount_vat = element.amount_vat;\r\n        invoice.invoice_products[0].amount_after_vat = element.amount_after_vat;\r\n        invoice.invoice_products[0].order = element.order;\r\n        invoice.invoice_products[0].view_order = element.view_order;\r\n        invoice.invoice_products[0].provisions_on_accounts = element.provisions_on_accounts;\r\n        invoice.invoice_products[0][\"row_content\"] = element.product_name\r\n\r\n        invoice.currency_code = 'VND';\r\n        invoice.display_currency = this.configdisplayCurrency;\r\n        let decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n        invoice.decimal_places_json = decimal_places_json;\r\n        if (element.file_attach) {\r\n          invoice.invoice_files = element.file_attach;\r\n        } else {\r\n          invoice.invoice_files = [];\r\n        }\r\n        invoices.push(invoice);\r\n      }\r\n\r\n      if (element.productNumberOfVouchers) {\r\n        // console.log(element)\r\n        let invoiceProduct = {\r\n          product_code: element.product_code,\r\n          product_name: element.product_name,\r\n          provisions_on_accounts: element.provisions_on_accounts,\r\n          unit_code: element.unit_code,\r\n          unit_name: element.unit_name,\r\n          quantity: element.quantity,\r\n          price: element.price,\r\n          vat: element.vat,\r\n          discount: element.discount,\r\n          order: element.order,\r\n          amount: element.amount,\r\n          amount_vat: element.amount_vat,\r\n          amount_after_vat: element.amount_after_vat,\r\n          view_order: element.view_order,\r\n          row_content: element.product_name\r\n        }\r\n        for (let i = 0; i < invoices.length; i++) {\r\n          if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n            invoices[i].invoice_products.push(invoiceProduct);\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    let decimal_amount_after_vat = this.getFormatterToNumber(this.formatter.tong_tien);\r\n    let decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n\r\n    for (let i = 0; i < invoices.length; i++) {\r\n      let\r\n        amount = null, total_amount_vat = null, amount_after_vat = null, total_amount_product_vat0 = null, amount_vat5 = null, amount_vat10 = null,\r\n        total_amount_product_vat5 = null, total_amount_product_vat10 = null, total_amount_product_vatx = null;\r\n\r\n      invoices[i].invoice_products.forEach((product, index) => {\r\n        if (product.amount !== null) amount += product.amount;\r\n        if (product.amount_vat !== null) total_amount_vat += product.amount_vat;\r\n        if (product.amount_after_vat !== null) amount_after_vat += product.amount_after_vat;\r\n        if (product.vat == 5) amount_vat5 += product.amount_vat;\r\n        if (product.vat == 10) amount_vat10 += product.amount_vat;\r\n        if (product.vat == -1) total_amount_product_vatx += product.amount;\r\n        if (product.vat == 0) total_amount_product_vat0 += product.amount;\r\n        if (product.vat == 5) total_amount_product_vat5 += product.amount;\r\n        if (product.vat == 10) total_amount_product_vat10 += product.amount;\r\n\r\n        if (!this.is_multi_vat && index > 0 && invoices[i].invoice_products[index].vat != invoices[i].invoice_products[index - 1].vat) {\r\n          // console.log(invoices[i].invoice_products[index].vat + \"---\" + invoices[i].invoice_products[index-1].vat)\r\n          Library.notify('Mẫu hóa đơn đăng ký 1 loại thuế suất. Vui lòng kiểm tra lại thuế suất của hàng hóa', 'error');\r\n          invalid = false;\r\n          return;\r\n        }\r\n\r\n      });\r\n\r\n      invoices[i].invoice_date = this.invoice_date;\r\n\r\n      invoices[i].amount = this.roundNumber(amount, decimal_amount);\r\n      invoices[i].total_amount_vat = this.roundNumber(total_amount_vat, decimal_amount_vat);\r\n      invoices[i].amount_after_vat = this.roundNumber(amount_after_vat, decimal_amount_after_vat);\r\n      invoices[i].amount_vat5 = this.roundNumber(amount_vat5, decimal_amount_vat);\r\n      invoices[i].amount_vat10 = this.roundNumber(amount_vat10, decimal_amount_vat);\r\n      invoices[i].total_amount_product_vatx = this.roundNumber(total_amount_product_vatx, decimal_amount);\r\n      invoices[i].total_amount_product_vat0 = this.roundNumber(total_amount_product_vat0, decimal_amount);\r\n      invoices[i].total_amount_product_vat5 = this.roundNumber(total_amount_product_vat5, decimal_amount);\r\n      invoices[i].total_amount_product_vat10 = this.roundNumber(total_amount_product_vat10, decimal_amount);\r\n      invoices[i].total_payment = this.roundNumber(invoices[i].amount_after_vat, decimal_amount_after_vat);\r\n      invoices[i].total_payment_in_word = Helper.tienBangChu(invoices[i].total_payment, decimal_amount_after_vat, invoices[i].currency_code, this.configs.system_parameter.display_read_money_english);\r\n      if (invoices[i].total_payment > 20000000 && (invoices[i].payment_method_name == 'TM') && type == \"submit\") {\r\n        Library.notify('Vui lòng chọn HTTT chuyển khoản cho hóa đơn có giá trị lớn hơn 20 triệu đồng', 'error');\r\n        console.log(invoices);\r\n        let countRowBefore = 0;\r\n        for (let j = 0; j < i; j++) {\r\n          countRowBefore += invoices[j].invoice_products.length;\r\n        }\r\n        this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(countRowBefore, 'payment_method_name'));\r\n        invalid = false;\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.totalInvoice = invoices.length;\r\n    this.invoicesArr = invoices;\r\n    return invalid;\r\n  }\r\n\r\n  preview() {\r\n    let dataPreview = {\r\n      \"template\": { \"id\": this.template_id },\r\n      \"invoices\": this.getDataPreview()\r\n    }\r\n\r\n    Library.showloading();\r\n    let win = window.open(\"\", \"\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = \"Đang tải dữ liệu!\";\r\n    win.blur();\r\n    let sub = this.vatService.previewInvoiceImport(dataPreview).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        // const initialState = {\r\n        //   pdf_file: pdf_file\r\n        // };\r\n        // this.modalService.show(PreviewInvoiceComponent, {class: 'modal-lg full-modal', initialState});\r\n        win.document.write(`\r\n        <a id=\"idA\" title=\"Download File\" style=\"font-family: \\'Verdana\\';color: #333;font-weight: 600;float:right; margin-bottom: 5px;\r\n          margin-right: 20px;\" download=\"hoadon.pdf\" href=\"data:application/pdf;base64,${pdf_file}\">Tải File</a>\r\n        <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n        \r\n      `);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  previewBeforeSubmit() {\r\n\r\n    let dataPreview = {\r\n      \"template\": { \"id\": this.template_id },\r\n      \"invoices\": this.getDataPreview()\r\n    }\r\n    Library.showloading();\r\n    this.windowPreviewBeforeSubmit = window.open(\"\", \"\", `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n    this.windowPreviewBeforeSubmit.document.body.innerHTML = \"Đang tải dữ liệu!\";\r\n    this.windowPreviewBeforeSubmit.blur();\r\n\r\n    let timer = setInterval(() => {\r\n      if (this.windowPreviewBeforeSubmit.closed) {\r\n        clearInterval(timer);\r\n        let isCheck = Helper.getCookie('CK_CFM_I');\r\n        this.windowPreviewBeforeSubmit = undefined;\r\n        if (isCheck == \"CHECKED\") {\r\n          document.cookie = \"CK_CFM_I=; path=/\";\r\n          this.confirmCheckPreview = true;\r\n          this.submit('XUAT');\r\n        }\r\n      }\r\n    }, 500);\r\n    let data = this.getDataPreview();\r\n    let htx = \"\";\r\n    if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n      htx = \"và ký\";\r\n    } else {\r\n      htx = \"chờ ký\";\r\n    }\r\n    let sub = this.vatService.previewInvoiceImport(dataPreview).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        this.windowPreviewBeforeSubmit.document.write(`\r\n        <style type=\"text/css\" scoped>\r\n            .nhap-nhay { \r\n              background: red;\r\n              padding: 0.5px 9px;\r\n              margin-right: 5px;\r\n              border-radius: 57%;\r\n              -webkit-animation: flicker 1s infinite;\r\n            } \r\n            .ht-xuat{\r\n              display: inline-block;\r\n              margin-right: 50px;\r\n              padding: 15px;\r\n              float: right;\r\n              background: #e48e08;\r\n            }\r\n            @-webkit-keyframes flicker\r\n            {\r\n            0% {opacity:0;}\r\n            9% {opacity:0;}\r\n            10% {opacity:.5;}\r\n            13% {opacity:0;}\r\n            20% {opacity:.5;}\r\n            25% {opacity:1;}\r\n            }\r\n            .example {\r\n              padding: 20px;\r\n            }\r\n            \r\n            input[type=button] {\r\n              padding: 5px 10px;\r\n              margin: 10px 5px;\r\n              border-radius: 5px;\r\n              cursor: pointer;\r\n              background: #ddd;\r\n              border: 1px solid #ccc;\r\n            }\r\n            input[type=button]:hover {\r\n              background: #ccc;\r\n            }\r\n\r\n            .confirm {\r\n              display: none;\r\n            }\r\n            .confirm > div:first-of-type {\r\n              position: fixed;\r\n              width: 100%;\r\n              height: 100%;\r\n              background: rgba(0, 0, 0, 0.5);\r\n              top: 0px;\r\n              left: 0px;\r\n            }\r\n            .confirm > div:last-of-type {\r\n              padding: 10px 20px;\r\n              background: white;\r\n              position: absolute;\r\n              width: auto;\r\n              height: auto;\r\n              left: 50%;\r\n              top: 50%;\r\n              transform: translate(-50%, -50%);\r\n              border-radius: 5px;\r\n              border: 1px solid #333;\r\n            }\r\n            .confirm > div:last-of-type div:first-of-type {\r\n              min-width: 150px;\r\n              padding: 10px;\r\n            }\r\n            .confirm > div:last-of-type div:last-of-type {\r\n              text-align: right;\r\n            }\r\n        </style>\r\n        <div style=\"margin-left: 50px;\">\r\n          <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n          <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n          </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n        </div>\r\n\r\n        <div>\r\n          <iframe style=\"margin-left: 170px;\" width=\"70%\" height=\"95%\" src=\"data:application/pdf;base64,${pdf_file}\"></iframe>\r\n          <div class=\"ht-xuat\">\r\n            <p style=\"color: #fff;font-size: 17px;text-align: center;margin-bottom: 0;\">Ngày hóa đơn</p>\r\n            <p style=\"color: #fff;font-size: 17px;text-align: center;margin-bottom: 10px;margin-top: 5px;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n            <h3 style=\"color: #fff; text-align: center; text-transform: uppercase;margin-top: 5px;\">Xuất ${htx}</h3>\r\n          </div>\r\n        </div>\r\n\r\n        <div style=\"text-align: center; margin: 20px 0 50px; font-size: 22px; font-weight: 600;\">\r\n          <a href=\"javascript:void(0)\" style=\"text-decoration: none;\" onclick=\"setConfirmInvoice()\">Đồng ý </a>|\r\n          <a href=\"javascript:void(0)\" style=\"text-decoration: none;\" onclick=\"closeWin()\">Đóng</a>\r\n        </div>\r\n\r\n        <div class=\"confirm\">\r\n            <div></div>\r\n            <div>\r\n              <div id=\"confirmMessage\">Confirm text</div>\r\n              <div>\r\n                <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n                <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n              </div>\r\n            </div>\r\n        </div>\r\n\r\n        <script type=\"text/javascript\">\r\n        const ui = {\r\n          confirm: async (message) => createConfirm(message)\r\n        }\r\n        \r\n        const createConfirm = (message) => {\r\n          return new Promise((complete, failed)=>{\r\n            $('#confirmMessage').text(message)\r\n        \r\n            $('#confirmYes').off('click');\r\n            $('#confirmNo').off('click');\r\n            \r\n            $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n            $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n            \r\n            $('.confirm').show();\r\n          });\r\n        }\r\n                             \r\n        const setConfirmInvoice = async () => {\r\n          const confirm = await ui.confirm(\"Bạn có chắc chắn muốn xuất hóa đơn ${htx} không?\");\r\n          if(confirm){\r\n            document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n            window.close();\r\n          } else{\r\n          }\r\n        } \r\n\r\n          function closeWin(){\r\n            window.close();\r\n          }\r\n        </script>\r\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n        `);\r\n        this.windowPreviewBeforeSubmit.focus();\r\n      } else {\r\n        this.windowPreviewBeforeSubmit.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n\r\n\r\n  getDataPreview() {\r\n    let formatter;\r\n    let invoicesPreview = [];\r\n    this.convertGirdToInvoices(\"preview\");\r\n\r\n    this.configs.forEach(item => {\r\n      if (item.name == sEnum.configSys.system_parameter) {\r\n        let _obj = JSON.parse(item.value);\r\n        let displayInt = _obj.display_int ? _obj.display_int : false;\r\n        formatter = _obj.decpoint_is_dot ? { decimal: \".\", thousands: \",\", display_int: displayInt } : { decimal: \",\", thousands: \".\", display_int: displayInt };\r\n      }\r\n\r\n    });\r\n\r\n    this.invoicesArr.forEach(data => {\r\n      let decimal_quatity = this.getFormatterToNumber(this.formatter.so_luong);\r\n      let decimal_price = this.getFormatterToNumber(this.formatter.don_gia);\r\n      let decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n      let decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n      let decimal_amount_after_vat = this.getFormatterToNumber(this.formatter.tong_tien);\r\n      let total_amount_product_with_vatx = null, total_amount_product_with_vat0 = null, total_amount_product_with_vat5 = null, total_amount_product_with_vat10 = null, amount_vat0 = null;\r\n\r\n      data.invoice_products.forEach(item => {\r\n        if (item.commercial_discount) {\r\n          if (item.vat == -1) total_amount_product_with_vatx -= item.amount_after_vat;\r\n          if (item.vat == 0) total_amount_product_with_vat0 -= item.amount_after_vat;\r\n          if (item.vat == 0) amount_vat0 -= item.amount_vat;\r\n          if (item.vat == 5) total_amount_product_with_vat5 -= item.amount_after_vat;\r\n          if (item.vat == 10) total_amount_product_with_vat10 -= item.amount_after_vat;\r\n        } else {\r\n          if (item.vat == -1) total_amount_product_with_vatx += item.amount_after_vat;\r\n          if (item.vat == 0) total_amount_product_with_vat0 += item.amount_after_vat;\r\n          if (item.vat == 0) amount_vat0 += item.amount_vat;\r\n          if (item.vat == 5) total_amount_product_with_vat5 += item.amount_after_vat;\r\n          if (item.vat == 10) total_amount_product_with_vat10 += item.amount_after_vat;\r\n        }\r\n        item['unit_name'] = \"\";\r\n        this.select.unit_codes.forEach(unit => {\r\n          item.discount = \"\";\r\n          item.total_discount = \"\";\r\n          if (unit.code == item.unit_code) {\r\n            item['unit_name'] = unit.name;\r\n          }\r\n        });\r\n\r\n        item.amount = Helper.formatMoney(item.amount, decimal_amount, formatter);\r\n        item.price = Helper.formatMoney(item.price, decimal_price, formatter);\r\n        item.quantity = Helper.formatMoney(item.quantity, decimal_quatity, formatter);\r\n      });\r\n      let _obj = this.select.payment_method_names.filter(p => p.code == data.payment_method_name)[0];\r\n      if (_obj) {\r\n        data.payment_method_view_name = _obj.name;\r\n      }\r\n      data.total_amount_product_with_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n      data.amount_vat0 = amount_vat0;\r\n\r\n      data.total_amount_product_vatx = Helper.formatMoney(data.total_amount_product_vatx, decimal_amount, formatter);\r\n      data.total_amount_product_vat0 = Helper.formatMoney(data.total_amount_product_vat0, decimal_amount, formatter);\r\n      data.total_amount_product_vat5 = Helper.formatMoney(data.total_amount_product_vat5, decimal_amount, formatter);\r\n      data.total_amount_product_vat10 = Helper.formatMoney(data.total_amount_product_vat10, decimal_amount, formatter);\r\n      data.amount_vat5 = Helper.formatMoney(data.amount_vat5, decimal_amount_vat, formatter);\r\n      data.amount_vat10 = Helper.formatMoney(data.amount_vat10, decimal_amount_vat, formatter);\r\n      data.amount = Helper.formatMoney(data.amount, decimal_amount, formatter);\r\n      data.total_amount_vat = Helper.formatMoney(data.total_amount_vat, decimal_amount_vat, formatter);\r\n      data.total_payment = Helper.formatMoney(data.total_payment, decimal_amount_after_vat, formatter);\r\n\r\n      invoicesPreview.push(data);\r\n    });\r\n\r\n    return invoicesPreview;\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    Library.showloading();\r\n    let win = window.open(\"\", \"\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = \"Đang tải dữ liệu!\";\r\n    win.blur();\r\n    let sub = this.vatService.inChuyenDoiInvoiceImport(this.invoicesId,false).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        win.document.write(`\r\n        <a id=\"idA\" title=\"Download File\" style=\"font-family: \\'Verdana\\';color: #333;font-weight: 600;float:right; margin-bottom: 5px;\r\n          margin-right: 20px;\" download=\"hoadon.pdf\" href=\"data:application/pdf;base64,${pdf_file}\">Tải File</a>\r\n        <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n        \r\n      `);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xemHoaDon() {\r\n    Library.showloading();\r\n    let win = window.open(\"\", \"\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = \"Đang tải dữ liệu!\";\r\n    win.blur();\r\n    let sub = this.vatService.xemHoaDonInvoiceImport(this.invoicesId).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        win.document.write(`<iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}\"></iframe>`)\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  submit(type) {\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.checkStatusData()\r\n    if (this.totalDuplicateInvoice > 0) {\r\n      Library.notify(\"Số phiếu, chứng từ bị trùng\", \"error\");\r\n      return;\r\n    }\r\n    let convert = this.convertGirdToInvoices(\"submit\");\r\n    if (convert) {\r\n      let dayExport = this.invoice_date ? moment(this.invoice_date).format('DD/MM/YYYY') : moment(new Date()).format('DD/MM/YYYY');\r\n      if (type == \"XUAT\") {\r\n        if (this.confirmCheckPreview) {\r\n          // Library.confirmVA(`Tất cả hóa đơn đã nhập sẽ được xuất hóa đơn vào ngày <strong>${dayExport}</strong>. Bạn có chắc chắn không?`, \"Thông báo\", () => {\r\n          this.showPopupImport = true;\r\n          if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.xuatHoaDon();\r\n          } else if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.xuatChoKy();\r\n          }\r\n          this.confirmCheckPreview = false;\r\n          // });\r\n        } else {\r\n          this.previewBeforeSubmit();\r\n        }\r\n      } else if (type == \"LUU\") {\r\n        this.showPopupImport = true;\r\n        this.luuChoXuat();\r\n      }\r\n\r\n      // else if (type == \"CHO_KY\") {\r\n      //   Library.confirmVA(`Tất cả hóa đơn đã nhập sẽ được xuất hóa đơn vào ngày <strong>${dayExport}</strong>. Bạn có chắc chắn không?`, \"Thông báo\", () => {\r\n      //     this.showPopupImport = true;\r\n      //   });\r\n      // }\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","module.exports = \"<div class=\\\"row search-section1\\\" style=\\\"margin-bottom: 10px\\\">\\r\\n  <div class=\\\"col-md-8\\\" style=\\\"padding-right: 0px\\\">\\r\\n    <app-receipt-search (searchContentChange)=\\\"getSearch($event)\\\">\\r\\n    </app-receipt-search>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-4\\\" style=\\\"max-height: 70px\\\">\\r\\n    <div class=\\\"list-header row\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-right button-panel\\\">\\r\\n          <dx-button (click)=\\\"lapHoaDon()\\\" [(icon)]=\\\"_translate.ICONS.plus\\\"\\r\\n            text=\\\"{{ 'CONTROLL.BUTTON.create_repceipts' | translate }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-menu [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\"\\r\\n            (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainerVat\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n  [showRowLines]=\\\"true\\\" [showBorders]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n  [columnAutoWidth]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n  (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n  <!-- <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling> -->\\r\\n  <dxo-selection selectAllMode=\\\"{{pageSelect}}\\\" mode=\\\"multiple\\\">\\r\\n  </dxo-selection>\\r\\n  <!-- <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"vat\\\"></dxo-state-storing> -->\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"multiple\\\"></dxo-sorting>\\r\\n  <dxo-selection mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row>\\r\\n  <!-- Số biên lai -->\\r\\n  <dxi-column cellTemplate=\\\"receiptNumber\\\" dataField=\\\"receipt_number\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.receipt_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n    alignment=\\\"center\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"1\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Mẫu số, ký hiệu -->\\r\\n  <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Ngày biên lai -->\\r\\n  <dxi-column dataField=\\\"receipt_date\\\" caption=\\\"{{ 'GRID.INVOICE.receipt_date' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n    format=\\\"dd/MM/yyyy\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"0\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Mã số thuế -->\\r\\n  <dxi-column dataField=\\\"payer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tên người nộp tiền -->\\r\\n  <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.payer_name' | translate }}\\\" alignment=\\\"left\\\"\\r\\n    minWidth=\\\"200\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tổng tiền -->\\r\\n  <dxi-column dataField=\\\"total_payment_string\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\"\\r\\n    alignment=\\\"right\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\" minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Email, trạng thái hóa đơn -->\\r\\n  <dxi-column cellTemplate=\\\"actionEmail\\\" caption=\\\"{{ 'GRID.INVOICE.send_email_status' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Chức năng -->\\r\\n  <dxi-column cellTemplate=\\\"actionIcon\\\" minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong}}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p>{{ d.data.template_code }}</p>\\r\\n    <p>{{ d.data.receipt_series }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'receiptNumber'\\\">\\r\\n    <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.receipt_number }}</a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n    <p>{{ d.data.customer_name || d.data.payer_name }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'actionEmail'\\\">\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status !='GIU_SO'\\\" class=\\\"chua-gui-khach-hang gach-chan\\\"\\r\\n      (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.un_sent' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'GUI_LOI'\\\" style=\\\"color: red;\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.send_mail_error' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status =='GIU_SO'\\\" class=\\\"cho-ky\\\"\\r\\n      (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_sign' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_GUI'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_it' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_NHAN'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.received' | translate }}</a>\\r\\n    <p *ngIf=\\\"!d.data.send_email_status\\\" href=\\\"javascript:void(0)\\\">{{ trangthaihoadon(d.data) }} <a\\r\\n        *ngIf=\\\"trangthaihoadon(d.data) == 'Lỗi ký HD' || trangthaihoadon(d.data) == 'Signed error'\\\" class=\\\"gach-chan\\\"\\r\\n        (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">({{ 'GRID.INVOICE.re_sign' | translate }})</a></p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_GUI_CQT' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Đã gửi để cấp mã</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_CAP' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Đã cấp mã</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'KHONG_DU_DK_CAP_MA' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\" style=\\\"color: red;\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">Không đủ ĐK cấp mã</a>\\r\\n\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'CHUA_GUI_CQT' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Chưa gửi CQT</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_GUI_CQT' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Đã gửi CQT</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_TIEP_NHAN' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">CQT đã tiếp nhận</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'KHONG_HOP_LE' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\" style=\\\"color: red;\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">CQT kiểm tra không hợp lệ </a>\\r\\n  </div>\\r\\n  <!-- Trạng thái thanh toán -->\\r\\n  <div *dxTemplate=\\\"let d of 'viewPaymentStatus'\\\">\\r\\n    <a href=\\\"javascript:void(0)\\\">{{ trangthaithanhtoan(d.data) }}</a>\\r\\n  </div>\\r\\n  <!--  -->\\r\\n  <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.view_invoice}}\\\" class=\\\"xemIcon actionIcon\\\" (click)=\\\"view(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.edit}}\\\" class=\\\"suaIcon actionIcon\\\" (click)=\\\"edit(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.delete}}\\\" class=\\\"xoaIcon actionIcon\\\" (click)=\\\"delete(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <div class=\\\"dropdown\\\">\\r\\n      <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" class=\\\"morongIcon actionIcon\\\" (click)=\\\"myFunction(d.data.id)\\\"\\r\\n        href=\\\"javascript:void(0)\\\"></a>\\r\\n      <div [id]=\\\"d.data.id\\\" class=\\\"dropdown-content\\\"\\r\\n        [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n        <a (click)=\\\"copy(d.data)\\\" href=\\\"javascript:void(0)\\\">{{'CONTROLL.BUTTON.copy' | translate}}\\r\\n          <i [class]=\\\"_translate.ICONS.copy\\\"></i></a>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n    <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{info.column.caption}} </p>\\r\\n  </div>\\r\\n  <dxo-summary>\\r\\n    <dxi-total-item summaryType=\\\"custom\\\" cssClass=\\\"dxi-total-payment-total_payment_string\\\" [customizeText]=\\\"customizeText\\\" showInColumn=\\\"total_payment_string\\\">\\r\\n    </dxi-total-item>\\r\\n  </dxo-summary>\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"configs.system_parameter.number_row_per_page\\\"></dxo-paging>\\r\\n  <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 35, 50, 100]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n    [showInfo]=\\\"true\\\" infoText=\\\"{{ _translate.DXO_PAGER.page}}\\\">>\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n\\r\\n<app-download-pdf></app-download-pdf>\\r\\n\"","module.exports = \".chua-gui-khach-hang{color:red}.cho-ky{color:#008b8b}.gach-chan{text-decoration:underline}.search-section{padding-bottom:15px}.button-panel{margin-top:30px}.mainmenubtn{background-color:red;color:white;border:none;cursor:pointer;padding:20px;margin-top:20px}.last-drodown{bottom:30px}.small-grid{position:fixed  !important;right:39px !important}::ng-deep #gridContainerVat .dx-cell-focus-disabled{overflow:visible !important}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { DxDataGridComponent, DxMenuComponent } from 'devextreme-angular';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { AuthService, Helper, Library, VPreviewInvService, sEnum, VStringService, SocketService } from '@core/index';\r\nimport { KeepNumberComponent } from '../keep-number/keep-number.component';\r\nimport { SendInvoicesComponent } from '../send-invoices/send-invoices.component';\r\nimport { ImportInvoicesDtComponent } from '../import-invoices-dt/import-invoices-dt.component';\r\nimport { SignManyComponent } from '../sign-many/sign-many.component';\r\nimport { ViewAttachFileComponent } from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport { SendListEmailComponent, SendDataForTaxComponent } from '@shared/index';\r\nimport * as moment from 'moment';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { skip, take } from \"rxjs/operators\";\r\nimport { interval, of } from \"rxjs\";\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { PaymentReceiptService } from '@modules/payment-receipt/shared/payment-receipt.service';\r\nimport { DownloadPdfComponent } from '@shared/components/download-pdf/download-pdf.component';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  @ViewChild(DxMenuComponent) dxMenu: DxMenuComponent;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @ViewChild('expandMenu') expandMenu;\r\n  @ViewChild(DownloadPdfComponent) downloadPdf: DownloadPdfComponent;\r\n  dataSource: any;\r\n  selectedRows: Array<any> = [];\r\n  selectedItems: Array<any> = [];\r\n  bsModalRef: BsModalRef;\r\n  bsModalImportRef: BsModalRef;\r\n  bsModalSignRef: BsModalRef;\r\n  listDM: any;\r\n  pageSize: any;\r\n  loaiHoaDon: string;\r\n  test = true;\r\n  isAccessExportInv = true;\r\n  invoice_releases = [];\r\n  templatesTT78 = [];\r\n  infoDangKy: any = {};\r\n  paramSearch: any;\r\n  _language: string;\r\n  _translate: any;\r\n  checkSubmit: any;\r\n  extras = [];\r\n  data_extras_invoice_buy = [];\r\n  extend = [];\r\n  private wasInside = false;\r\n  select: any = {};\r\n  configs: any = {};\r\n  disEditMulti = true;\r\n  hoaDonImportChoXuat: any;\r\n  footerSum = {\r\n    summary: '',\r\n    summary_deduction: '',\r\n  };\r\n  objPXK = {};\r\n  clickCurent = '';\r\n  dataInfor: any;\r\n  isSearchUI: boolean;\r\n  isListHeader: boolean;\r\n  dataAddInvoiceBuy = [];\r\n  curentUser: any = {};\r\n  taxCodeThueHCM = [\"0102519041-555\"];\r\n  pageSelect: any;\r\n  isTT78: boolean = false;\r\n  isExistFormRelease: boolean = false;\r\n  currentUser: any;\r\n  isEFY: boolean = false;\r\n  ioSignature: Subscription;\r\n\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n  invoices = [];\r\n  isExportFailed: boolean = false;\r\n  province_name: any;\r\n  objStatusBtn = {};\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    private modalImportService: BsModalService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    public translate: TranslateService,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService,\r\n    private paymentRService: PaymentReceiptService,\r\n    private vPreviewInvService : ViewInvoiceService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    this.curentUser = this.authService.getCurrentUser();\r\n    translate.use(this._language);\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.extend,\r\n      items: [\r\n        // {\r\n        //   id: \"NAP_HD_TU_EXCEL\",\r\n        //   name: this._translate.CONTROLL.BUTTON.import_invoice_from_excel,\r\n        //   icon: this._translate.ICONS.excel\r\n        // },\r\n        {\r\n          id: 'NAP_HD_TU_EXCEL_DT',\r\n          name: 'Nạp biên lai từ Excel',\r\n          icon: this._translate.ICONS.excel\r\n        },\r\n        {\r\n          id: 'SUA',\r\n          name: this._translate.CONTROLL.BUTTON.edit,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n        {\r\n          id: 'XOA',\r\n          name: this._translate.CONTROLL.BUTTON.delete,\r\n          icon: this._translate.ICONS.delete\r\n        },\r\n        {\r\n          id: 'XEM',\r\n          name: 'Xem biên lai',\r\n          icon: this._translate.ICONS.view\r\n        },\r\n        {\r\n          id: 'GUI_BEN_MUA',\r\n          name: 'Gửi biên lai',\r\n          icon: this._translate.ICONS.send_email\r\n        },\r\n        {\r\n          id: 'TAI_HD_PDF',\r\n          name: \"Tải biên lai PDF\",\r\n          icon: this._translate.ICONS.download\r\n        },\r\n      ]\r\n    }];\r\n    this.data_extras_invoice_buy = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.LABEL.export_data,\r\n      items: [\r\n        {\r\n          id: 'LIST_INVOICE_BUY',\r\n          name: this._translate.CONTROLL.LABEL.list_invoice_buy,\r\n          icon: this._translate.ICONS.excel\r\n        },\r\n        {\r\n          id: 'DETAILS_OF_EACH_GOODS_AND_SERVICE',\r\n          name: this._translate.CONTROLL.LABEL.details_of_each_goods_and_service,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n      ]\r\n    }];\r\n    this.dataAddInvoiceBuy = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.add,\r\n      items: [\r\n        {\r\n          id: 'ADD_ONE_INVOICE',\r\n          name: this._translate.CONTROLL.LABEL.add_one_invoice,\r\n          icon: this._translate.ICONS.add_new\r\n        },\r\n        {\r\n          id: 'ADD_MULTIPLE_INVOICE',\r\n          name: this._translate.CONTROLL.LABEL.add_multiple_invoice,\r\n          icon: this._translate.ICONS.add_new\r\n        },\r\n      ]\r\n    }];\r\n    this.extend = [{\r\n      id: '1',\r\n      name: '',\r\n      items: [\r\n        {\r\n          id: 'INCHUYENDOI',\r\n          name: this._translate.CONTROLL.BUTTON.print_conversion,\r\n          icon: 'assets/img/icons/In.png'\r\n        },\r\n      ]\r\n    }];\r\n  }\r\n  ngOnInit() {\r\n    this.handleUI(this.route.snapshot.data.type);\r\n    this.configs = this.authService.getConfigs();\r\n    if (!this.taxCodeThueHCM.includes(this.curentUser.account.tax_code)) {\r\n      this.extras[0].items.push({ id: \"TAI_HD_XML\", name: 'Tải BL định dạng gốc', icon: this._translate.ICONS.xml });\r\n    }\r\n    if (this.configs.system_parameter.allow_to_print_delivery_each_invoice)\r\n      this.extras[0].items.push({ id: \"IN_BB_GIAO_NHAN\", name: this._translate.CONTROLL.BUTTON.print_delivery_minutes, icon: this._translate.ICONS.xml });\r\n    if (this.curentUser.account.tax_code == \"0102519041\")\r\n      this.isEFY = true;\r\n    if (this.configs.system_parameter.select_invoice_current_page)\r\n      this.pageSelect = \"page\";\r\n    else\r\n      this.pageSelect = \"allPages\";\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (this.currentUser && this.currentUser.account && this.currentUser.account.van_account_info) {\r\n      this.province_name = this.currentUser.account.van_account_info.city_name;\r\n    }\r\n    this.vatService.isCopy = false;\r\n    this.vatService.data = null;\r\n    const listpermissions = this.currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n    if (this.currentUser.is_convert_TT78) {\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      if (this.infoDangKy && this.infoDangKy.id) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n          this.isTT78 = true;\r\n          let infoFormRelease = this.authService.getInfoFormRelease();\r\n          if (infoFormRelease && infoFormRelease.invoice_releases && infoFormRelease.invoice_releases.length > 0) {\r\n            let invoicesReleases = infoFormRelease.invoice_releases.filter(p => (parseInt(p.amount) - parseInt(p.used_amount)) > 0);\r\n            if (invoicesReleases && invoicesReleases.length > 0)\r\n              this.isExistFormRelease = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // if (localStorage.getItem('new_member')) {\r\n      //   Library.notify(this._translate.NOTIFY.you_must_create_a_release_notice_before_invoicing, 'warning');\r\n      // }\r\n    }\r\n  }\r\n\r\n  handleUI(value) {\r\n    if (value === '03GTKT') {\r\n      this.isSearchUI = false;\r\n      this.isListHeader = false;\r\n    } else {\r\n      this.isSearchUI = true;\r\n      this.isListHeader = true;\r\n    }\r\n    this.loaiHoaDon = value;\r\n  }\r\n  /* Xử lý sự kiện click phần mở rộng của từng hóa đơn*/\r\n  myFunction(id) {\r\n    if (this.clickCurent !== '' && this.clickCurent !== id) {\r\n      let valueCurrent = document.getElementById(this.clickCurent);\r\n      if (!valueCurrent)\r\n        document.getElementById(id).classList.toggle('show');\r\n      else {\r\n        document.getElementById(this.clickCurent).classList.remove('show');\r\n        document.getElementById(id).classList.toggle('show');\r\n      }\r\n    }\r\n    else\r\n      document.getElementById(id).classList.toggle('show');\r\n    this.clickCurent = id;\r\n\r\n  }\r\n\r\n  loadList(params?) {\r\n    this.dataSource = {};\r\n    const ref = {};\r\n    if (params) {\r\n      const _lst = this.paymentRService.getAll(this.loaiHoaDon, params);\r\n      this.dataSource.store = _lst;\r\n      this.footerSum = {\r\n        summary: _lst.summary,\r\n        summary_deduction: _lst.summary_deduction,\r\n      };\r\n    } else {\r\n      this.dataSource.store = this.paymentRService.getAll(this.loaiHoaDon);\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.receipt_number) {\r\n            e.rowElement.style.color = 'black';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type === '2' || e.data.adjustment_type === '7' || e.data.adjustment_type === '6') {\r\n        const eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadList(e);\r\n  }\r\n\r\n  checkDisableButton() {\r\n    if (this.selectedItems.length) {\r\n      if (this.selectedItems[0].status === 'DA_XUAT') {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.invoice_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // Chọn đối tượng trong màn hình danh sách\r\n  selectionChanged(data: any) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    this.disEditMulti = true;\r\n    this.selectedItems = data.selectedRowsData;\r\n    // if (this.selectedItems.length > 0) {\r\n    //   const checks = this.selectedItems.filter((item) => {\r\n    //     return item.number_of_vouchers;\r\n    //   });\r\n    //   const checkDaXuat = this.selectedItems.filter((item) => {\r\n    //     return item.status === 'DA_XUAT';\r\n    //   });\r\n    //   if (checks.length === this.selectedItems.length && checkDaXuat.length === 0) {\r\n    //     this.disEditMulti = false;\r\n    //   }\r\n    //}\r\n  }\r\n\r\n  async lapHoaDon() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.bienlai);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    this.router.navigate(['system/payment-receipt/create']);\r\n  }\r\n\r\n  async copy(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.bienlai);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    const row = data ? data : this.selectedItems[0];\r\n    let sub = this.paymentRService.show(row.id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        if (rs.data.receipt) {\r\n          rs.data.receipt.id = null;\r\n          //rs.data.receipt.origin_id = null;\r\n          rs.data.receipt.adjustment_type = '1';\r\n          rs.data.receipt.destroy_reason = null;\r\n          rs.data.receipt.destroy_date = null;\r\n          rs.data.receipt.receipt_number = null;\r\n          rs.data.receipt.receipt_date = null;\r\n          rs.data.receipt.status = rs.data.receipt.status == 'DA_XUAT' ? 'GHI_TAM' : rs.data.receipt.status;\r\n          rs.data.receipt.updated_at = null;\r\n          rs.data.receipt.user_id = null;\r\n          rs.data.receipt.van_id = null;\r\n          rs.data.receipt.status_order = null;\r\n          rs.data.receipt.extend_json_invoice = null;\r\n          rs.data.receipt.other_id = null;\r\n          rs.data.receipt.verify_code = null;\r\n          if (rs.data.receipt.receipt_options && rs.data.receipt.receipt_options.length > 0) {\r\n            rs.data.receipt.receipt_options.forEach(item => {\r\n              delete item['id'];\r\n              delete item['receipt_id'];\r\n            });\r\n          }\r\n          this.vatService.data = rs.data.receipt;\r\n          this.vatService.isCopy = true;\r\n        }\r\n        this.router.navigate(['system/payment-receipt/create']);\r\n      }\r\n    });\r\n  }\r\n\r\n  async edit(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.bienlai);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    let rowData = null;\r\n    if (data) {\r\n      if (VStringService._getValueToString(data.status) == sEnum.statusInv.DaXuat)\r\n        Library.notify(this._translate.THONG_TIN.khong_sua_duoc_bien_lai_da_xuat, 'error');\r\n      else {\r\n        rowData = data;\r\n      }\r\n    }\r\n    else {\r\n      if (this.selectedItems.length > 0) {\r\n        if (this.selectedItems.length == 1)\r\n          rowData = this.selectedItems[0];\r\n        else {\r\n          let _hdDaXuat = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat)[0];\r\n          if (_hdDaXuat)\r\n            Library.notify(this._translate.THONG_TIN.khong_sua_duoc_bien_lai_da_xuat, 'error');\r\n          else {\r\n            let _hdLapTrucTiep = this.selectedItems.filter(p => VStringService._getValueToString(p.number_of_vouchers) == '')[0];\r\n            if (_hdLapTrucTiep)\r\n              Library.notify(this._translate.NOTIFY.same_receipt_invoice, 'error');\r\n            else {\r\n              let invDefault = this.selectedItems[0];\r\n              let invCompare = this.selectedItems.filter(p => p.template_id != invDefault.template_id)[0];\r\n              if (invCompare)\r\n                Library.notify(this._translate.NOTIFY.same_release_invoice, 'error');\r\n              else {\r\n                let arrStatusInv = [\"GIU_SO\", \"GHI_TAM\"];\r\n                let arrStatusItem = this.selectedItems.map((obj: any) => obj.status);\r\n                let result = arrStatusInv.every(val => arrStatusItem.includes(val));\r\n                /* Kiểm tra hóa đơn được sửa phải cùng trạng thái (ghi tạm hoặc giữ số) */\r\n                if (result)\r\n                  Library.notify(this._translate.NOTIFY.same_status_invoice, 'error');\r\n                else\r\n                  this.openImportForm(rowData);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (rowData) {\r\n      this.router.navigate([`/system/payment-receipt/${VStringService._getValueToString(rowData.id)}`]);\r\n    }\r\n  }\r\n\r\n  openImportForm(data) {\r\n    Library.showloading();\r\n    let _lst = [];\r\n    if (data) {\r\n      _lst.push(data.id);\r\n    } else {\r\n      _lst = this.selectedRows;\r\n    }\r\n    const subRoute = this.paymentRService.getEditImportReceipt(_lst, '', this.loaiHoaDon).subscribe((res: any) => {\r\n      setTimeout(() => {\r\n        this.select.products = res[0].data.products;\r\n        this.hoaDonImportChoXuat = res[1].data.receipts.sort((itemA, itemB) => {\r\n          return moment(itemA.created_at, 'YYYY-MM-DD HH:mm:ss').valueOf() - moment(itemB.created_at, 'YYYY-MM-DD HH:mm:ss').valueOf();\r\n        });\r\n        this.select.unit_codes = res[2].data.DM_DON_VI_TINH;\r\n        this.select.payment_method_names = res[2].data.DM_HINH_THUC_THANH_TOAN;\r\n        this.select.vats = res[2].data.DM_TY_LE_VAT;\r\n        this.templatesTT78 = Helper.convertTemplatesToReceiptResolver(res[3]);\r\n        this.hoaDonImportChoXuat.forEach(invoice => {\r\n          invoice.receipt_fees.forEach(row => {\r\n            if (row.fee_code) {\r\n              const _obj = this.select.products.filter(p => p.code === row.fee_code)[0];\r\n              if (!_obj) {\r\n                const _objPush = {\r\n                  code: row.fee_code,\r\n                  name: row.fee_name,\r\n                  mhvth: row.fee_code + ': ' + row.fee_name,\r\n                };\r\n                this.select.products.push(_objPush);\r\n              }\r\n            }\r\n          });\r\n        });\r\n        let search = new Object;\r\n        this.route.queryParams.subscribe(queryParams => {\r\n          for (let key in queryParams) {\r\n            if (queryParams.hasOwnProperty(key))\r\n              search[key] = queryParams[key];\r\n          }\r\n        });\r\n        search[\"idTempt\"] = Helper.makeid();\r\n        const initialState = {\r\n          select: this.select,\r\n          hoaDonImportChoXuat: this.hoaDonImportChoXuat,\r\n          templatesTT78: this.templatesTT78,\r\n          infoDangKy: this.infoDangKy,\r\n          search: search\r\n        };\r\n        this.bsModalImportRef = this.modalImportService.show\r\n          (\r\n            ImportInvoicesDtComponent,\r\n            {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-lg full-width',\r\n              initialState\r\n            }\r\n          );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          this.loadList(this.paramSearch);\r\n          subModal.unsubscribe();\r\n        });\r\n      }, 10);\r\n      Library.hideloading();\r\n    }, (err) => {\r\n    }, () => {\r\n      subRoute.unsubscribe();\r\n    });\r\n  }\r\n\r\n  async editNotSelect(row) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.bienlai);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (row.status === 'DA_XUAT') {\r\n      Library.notify(this._translate.THONG_TIN.khong_sua_duoc_bien_lai_da_xuat, 'error');\r\n    } else {\r\n      this.router.navigate([`/system/payment-receipt/${VStringService._getValueToString(row.id)}`]);\r\n    }\r\n  }\r\n\r\n  async viewDetailInvoice(row) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.bienlai);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    this.router.navigate([`/system/payment-receipt/${VStringService._getValueToString(row.id)}`]);\r\n  }\r\n\r\n  async delete(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.bienlai);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.selectedItems.length || data) {\r\n      const status = '';\r\n      let ids = '';\r\n      if (data) {\r\n        ids = data.id;\r\n      } else {\r\n        ids = this.selectedRows.join(',');\r\n      }\r\n      const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          Library.showloading();\r\n          this.paymentRService.delete(ids).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n              this.loadList(this.paramSearch);\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => {\r\n          }, () => {\r\n            Library.hideloading();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  giuSo() {\r\n    Library.showloading();\r\n    const sub = this.vatService.getTemplate().subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const initialState = {\r\n          invoice_releases: rs.data.invoice_releases\r\n        };\r\n        this.bsModalRef = this.modalService.show(KeepNumberComponent, {\r\n          class: 'modal-lg', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n  view(data) {\r\n    if (this.selectedItems.length > 0 || data) {\r\n      const _lst = this.selectedItems.filter(p => p.status === 'DA_XUAT');\r\n      if (_lst.length > 0 || data) {\r\n        if (this.selectedItems.length === 1) {\r\n          this.dataInfor = this.selectedItems[0];\r\n        } else {\r\n          this.dataInfor = data;\r\n        }\r\n        let ids = [];\r\n        if (data) {\r\n          ids.push(data.id);\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          let data = this.paymentRService.taodulieuXemMau(ids);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_bien_lai\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  guibenmua(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'DA_XUAT') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      if (this.selectedItems.filter(p => p.status === 'DA_XUAT').length === 0) {\r\n        check = false;\r\n      }\r\n    }\r\n\r\n    if (check && (this.selectedItems.length || data)) {\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedItems.filter(p => p.status === 'DA_XUAT').map(p => p.id);\r\n      }\r\n      this.paymentRService.layDanhSachBienLai(ids, this.loaiHoaDon).subscribe((rs: any) => {\r\n        if (rs[0].status === 'success') {\r\n          const initialState = {\r\n            invoiceList: rs[0].data.receipts,\r\n            configs: rs[1].data.configs,\r\n            isBienLaiDienTu: true\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SendListEmailComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_invoice_selected, 'error');\r\n    }\r\n  }\r\n\r\n  viewAttachFile(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (data) {\r\n      Library.showloading();\r\n      this.vatService.showAttachFile(data.id).subscribe((rs: any) => {\r\n        if (rs.status === 'success') {\r\n          if (rs.data && rs.data.invoice && rs.data.invoice.invoice_files.length > 0) {\r\n            const initialState = {\r\n              fileData: rs.data.invoice.invoice_files,\r\n              view_attach_file: true,\r\n            };\r\n            this.bsModalSignRef = this.modalService.show(ViewAttachFileComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-lg',\r\n              initialState\r\n            });\r\n\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_file_attach, 'error');\r\n          }\r\n\r\n          // let subModal = this.modalService.onHide.subscribe(() => {\r\n          //   if (this.bsModalSignRef.content.successSaveItem) {\r\n          //     this.selectedItems = [];\r\n          //     this.selectedRows = [];\r\n          //     //this.loadList(this.paramSearch);\r\n          //     subModal.unsubscribe();\r\n          //   }\r\n          // });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n\r\n  sendInvoice(id) {\r\n    Library.showloading();\r\n    let sub = this.paymentRService.showToSendReceipt(id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        const initialState = {\r\n          receipt: rs.data.receipt,\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  customizeText = (url) => {\r\n    this.invoiceService.handleTotalGrid(url.value, this.objStatusBtn, this.dataGrid);\r\n    return '';\r\n  }\r\n\r\n  kyHangLoat(data?) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n      Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n      return;\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'GIU_SO') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      this.selectedItems.forEach(item => {\r\n        if (item.status !== 'GIU_SO') {\r\n          check = false;\r\n        }\r\n      });\r\n    }\r\n    if (check && (this.selectedItems.length || data)) {\r\n      // if (this.selectedItems.length > 50 && !data) {\r\n      //   Library.notify(this._translate.NOTIFY.only_up_to_25_invoices_can_be_selected_for_sign, 'error');\r\n      //   return false;\r\n      // }\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedRows;\r\n      }\r\n      this.vatService.getInvoicesWaitSign(ids, this.loaiHoaDon).subscribe((rs: any) => {\r\n        if (rs[0].status === 'success') {\r\n          const initialState = {\r\n            invoiceList: rs[0].data.invoices,\r\n            configs: rs[1].data.configs,\r\n            isHdGTGT: this.loaiHoaDon === '01GTKT' ? true : false,\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SignManyComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_invoice_waite_sign_selected, 'error');\r\n    }\r\n  }\r\n\r\n  async napHDTuExcelDt() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.bienlai);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    Library.showloading();\r\n    this.paymentRService.getImportReceipt(this.loaiHoaDon).subscribe((res: any) => {\r\n      // Hàng hóa dịch vụ\r\n      this.templatesTT78 = Helper.convertTemplatesToReceiptResolver(res[2]);\r\n      this.select.products = res[0].data.products;\r\n      this.select.unit_codes = res[1].data.DM_DON_VI_TINH;\r\n      this.select.payment_method_names = res[1].data.DM_HINH_THUC_THANH_TOAN;\r\n      this.select.vats = res[1].data.DM_TY_LE_VAT;\r\n      let search = new Object;\r\n      this.route.queryParams.subscribe(queryParams => {\r\n        for (let key in queryParams) {\r\n          if (queryParams.hasOwnProperty(key))\r\n            search[key] = queryParams[key];\r\n        }\r\n      });\r\n      search[\"idTempt\"] = Helper.makeid();\r\n      const initialState = {\r\n        select: this.select,\r\n        isAccessExportInv: this.isAccessExportInv,\r\n        templatesTT78: this.templatesTT78,\r\n        infoDangKy: this.infoDangKy,\r\n        search: search\r\n      };\r\n      this.bsModalImportRef = this.modalImportService.show(\r\n        ImportInvoicesDtComponent,\r\n        {\r\n          backdrop: 'static',\r\n          keyboard: false,\r\n          class: 'modal-lg full-width',\r\n          initialState\r\n        }\r\n      );\r\n      const subModal = this.modalImportService.onHide.subscribe(() => {\r\n        this.loadList(this.paramSearch);\r\n        subModal.unsubscribe();\r\n      });\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  /* Tải file xml hóa đơn*/\r\n  taiHDXml() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = [];\r\n        ids = _lst.map(e => e.id);\r\n        Library.showloading();\r\n        let sub = this.paymentRService.xuatHDXml(ids).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n            this.selectedItems = [];\r\n            this.selectedRows = [];\r\n          } else {\r\n            Library.notify(rs.message, \"error\");\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n  /* In biên bản trả hàng */\r\n  inBBTraHang(data) {\r\n    if (data) {\r\n      if (data.status != sEnum.statusInv.DaXuat) {\r\n        Library.notify(this._translate.NOTIFY.not_print_delivery_record, 'error');\r\n        return;\r\n      }\r\n      Library.showloading();\r\n      let sub = this.vatService.xuatBBTraHang(data.id).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          const file = res.data.invoice;\r\n          Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        } else {\r\n          Library.notify(res.message, 'error');\r\n        }\r\n        Library.hideloading();\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n        Library.hideloading();\r\n      });\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.not_print_delivery_record, 'error');\r\n      return;\r\n    }\r\n  }\r\n  taiHDPdf() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = _lst.map(e => e.id);\r\n        this.downloadPdf.downloadPdf(ids, 'receipts', 'receipt', false);\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'NAP_HD_TU_EXCEL_DT') {\r\n      this.napHDTuExcelDt();\r\n    } else if (e.itemData.id === 'GIU_SO') {\r\n      this.giuSo();\r\n    } else if (e.itemData.id === 'KY_SO') {\r\n      this.kyHangLoat(null);\r\n    } else if (e.itemData.id === 'SUA') {\r\n      this.edit(null);\r\n    } else if (e.itemData.id === 'XOA') {\r\n      this.delete(null);\r\n    } else if (e.itemData.id === 'XEM') {\r\n      this.view(null);\r\n    } else if (e.itemData.id === 'GUI_BEN_MUA') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'LIST_INVOICE_BUY') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'DETAILS_OF_EACH_GOODS_AND_SERVICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'ADD_ONE_INVOICE') {\r\n      this.router.navigate(['/system/invoice-buy/create']);\r\n    } else if (e.itemData.id === 'ADD_MULTIPLE_INVOICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id == \"TAI_HD_XML\") {\r\n      this.taiHDXml();\r\n    } else if (e.itemData.id == \"TAI_HD_PDF\") {\r\n      this.taiHDPdf();\r\n    }\r\n  }\r\n  LydoKTiepNhan(data) {\r\n    let lstErr = JSON.parse(data.error_content_invoice);\r\n    const initialState = {\r\n      lstErr: lstErr,\r\n      notifyType: \"THONG_BAO_LOI_CQT\"\r\n    };\r\n    this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n      backdrop: 'static',\r\n      keyboard: true,\r\n      class: 'modal-lg modal-margin-width',\r\n      initialState\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n  }\r\n  /* Trạng thái thanh toán */\r\n  trangthaithanhtoan(data) {\r\n    if (Number.parseInt(data.invoice_number) > 0) {\r\n      if (data.payment_status)\r\n        return \"Đã thanh toán\";\r\n      else\r\n        return \"Chưa thanh toán\";\r\n    }\r\n    else\r\n      return \"\";\r\n  }\r\n  iterator(a, take, skip) {\r\n    let current = skip * 10;\r\n    let l = a.length;\r\n    let end = current + take;\r\n    let part = a.slice(current, end);\r\n    current = end < l ? end : 0;\r\n    return part;\r\n  }\r\n\r\n  onContentReady(e) {\r\n    if (e) {\r\n      const dataSource = this.dataGrid.instance.getDataSource();\r\n      this.pageSize = dataSource ? dataSource.items().length : 0;\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<h1 style=\\\"font-weight: bold; font-size: 16px; text-align: center; padding: 20px 0px;\\\">\\r\\n  {{_translate.MENU.receipts_of_fees_and_charges | uppercase}}</h1>\\r\\n  \\r\\n<form>  \\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <!-- Thông tin trên hóa đơn -->\\r\\n    <vat-form-invoice [ttDaXuatHoaDon]=\\\"ttDaXuatHoaDon\\\" [dataSource]=\\\"dataSource\\\" [invoice_products]=\\\"invoice_products\\\" [formatter]=\\\"formatter\\\"\\r\\n      [frmData]=\\\"frmData\\\" [_objTemplateSelect]=\\\"_objTemplateSelect\\\" [_oTemplateTT78]=\\\"_oTemplateTT78\\\"\\r\\n      [extentionGrid]=\\\"extentionGrid\\\" (onInvoiceCurrent)=\\\"onInvoiceCurrent($event)\\\"\\r\\n      (onFormChange)=\\\"getDataInChildForm($event)\\\"\\r\\n      [isShowButtonWaiteSign]=\\\"isShowButtonWaiteSign\\\" [isTT78]=\\\"isTT78\\\" [infoDangKy]=\\\"infoDangKy\\\"\\r\\n      [pkInvoiceSelectWaitSign]=\\\"pkInvoiceSelectWaitSign\\\" (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\"\\r\\n      (onTemplateTT78TypeChange)=\\\"onTemplateTT78TypeChange($event)\\\" (changeGridProduct) = \\\"changeGridProduct()\\\" (changeSLBienLai) = \\\"changeSLBienLai($event)\\\"></vat-form-invoice>\\r\\n    <!-- Hàng hóa trên hóa đơn -->\\r\\n    <vat-product-grip #child [dataSource]=\\\"dataSource\\\" [invoice_products]=\\\"invoice_products\\\" *ngIf=\\\"isMauNhieuPhi\\\"\\r\\n      [formDataInInvoice]=\\\"frmData\\\" [isTT78]=\\\"isTT78\\\" [formatter]=\\\"formatter\\\" [isHdGTGT]=\\\"isHdGTGT\\\"\\r\\n      [_objTemplateSelect]=\\\"_objTemplateSelect\\\" [_oTemplateTT78]=\\\"_oTemplateTT78\\\" [extentionGrid]=\\\"extentionGrid\\\"\\r\\n      (importExcel)=\\\"fillDataToForm($event)\\\">\\r\\n    </vat-product-grip>\\r\\n\\r\\n    <dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n      [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n      <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n        <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.update_customer }}</p>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <dx-button text=\\\"{{ _translate.CONTROLL.LABEL.update }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </dx-popup>\\r\\n    <!-- vùng chọn file -->\\r\\n    <div class=\\\"row after-table\\\" *ngIf=\\\"isMauNhieuPhi\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-8\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-4\\\" style=\\\"margin-top: 10px\\\">\\r\\n        <div class=\\\"vat money-pull-right\\\">\\r\\n          <!-- Tổng tiền sau thuế -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_payment\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                (onValueChanged)=\\\"totalPaymentChange($event)\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"vat total-payment-in-word\\\">\\r\\n          <!-- Số tiền bằng chữ -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_payment_in_word}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-text-box [(value)]=\\\"frmData.total_payment_in_word\\\"></dx-text-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <!-- Xem trước biên lai -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"Xem trước biên lai\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Xem biên lai -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"Xem biên lai\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <!-- Xuất biên lai -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet\\\" appScrollToInvalid\\r\\n            text=\\\"Xuất biên lai\\\" [(icon)]=\\\"this._translate.ICONS.export_inv\\\"\\r\\n            (click)=\\\"eSubmit('XUAT',true)\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n          </dx-button>\\r\\n          <!-- Ghi tạm -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"showButtonGhiTam()\\\" appScrollToInvalid\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" [(icon)]=\\\"this._translate.ICONS.save\\\"\\r\\n            (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"\\r\\n            [disabled]=\\\"isDisable\\\">\\r\\n          </dx-button>\\r\\n          <!-- Tạo mới -->\\r\\n          <!-- <dx-button *ngIf=\\\"!showTraLai && !showKyDuyet\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.create_new}}\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.add_new\\\" (click)=\\\"handleAddNew()\\\" type=\\\"default\\\"></dx-button> -->\\r\\n          <!-- Đóng -->\\r\\n          <dx-button *ngIf=\\\"!showTraLai\\\" appBackButton type=\\\"default\\\" [(icon)]=\\\"this._translate.ICONS.come_back\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</form>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.processing }}\\\"\\r\\n          [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n          [(visible)]=\\\"showPopupImport\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}.vat.total-payment-in-word .dx-field-label{width:12%}.vat.total-payment-in-word .dx-field-value{width:88% !important}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:25px}.pr-0.dx-selectbox .dx-texteditor-input:-moz-read-only{padding-bottom:17px}.pr-0.dx-selectbox .dx-texteditor-input:read-only{padding-bottom:17px}::ng-deep .nd92Notify .modal-content{width:80%}::ng-deep .mauhoadon .modal-content{width:67%}::ng-deep .mauhoadon43 .modal-content{width:72%}::ng-deep .thue-suat-may-bay .dx-selectbox .dx-texteditor-input{padding-bottom:13px}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { Base64 } from 'js-base64';\r\nimport { AuthService, Helper, Library, sEnum, SocketService, VChanggeMoneyService, VPreviewInvService, VStringService } from '@core/index';\r\nimport { ProductGripComponent } from '../product-grip/product-grip.component';\r\nimport { FormInvoiceComponent } from '../form-invoice/form-invoice.component';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { SendInvoicesComponent } from '../send-invoices/send-invoices.component';\r\nimport * as _ from 'lodash';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { Observable } from 'rxjs';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { pattern } from '@config/index';\r\nimport { NotifyReduceTaxComponent, SignatureOffComponent, ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { PaymentReceiptModel } from '@modules/payment-receipt/shared';\r\nimport { PaymentReceiptService } from '@modules/payment-receipt/shared/payment-receipt.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-create-invoice',\r\n  templateUrl: './invoice.component.html',\r\n  styleUrls: ['./invoice.component.scss']\r\n})\r\nexport class InvoiceComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  @ViewChild(ProductGripComponent) productGrip: ProductGripComponent;\r\n  @ViewChild(FormInvoiceComponent) formInvoice: FormInvoiceComponent;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  frmData: PaymentReceiptModel = new PaymentReceiptModel(1);\r\n  frmTraLai = {\r\n    reason: ''\r\n  };\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  is_multi_vat: any;\r\n  total_payment: any;\r\n  listDM: any;\r\n  showTraLai = false;\r\n  showKyDuyet = false;\r\n  isHdGTGT = false;\r\n  isAccessExportInv = false;\r\n  showPopup = false;\r\n  bsModalRef: BsModalRef;\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n  select: any = {};\r\n  isDisable = false;\r\n  _objTemplateSelect: any = {};\r\n  _oTemplateTT78: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  extentionGrid: any = {};\r\n  configs: any;\r\n  _translate: any;\r\n  fileData: Array<any> = [];\r\n  tempKiFile = 0;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  timeeeeeeeeeee: any;\r\n  _isValid = false;\r\n  isTuChoi = false;\r\n  valueChange: string;\r\n  invoicereleaseTempt: any;\r\n  invoiceTemplateTT78: any;\r\n  nodeSign: any;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  pkInvoiceCurrent: any;\r\n  pkInvoiceSelectWaitSign: any;\r\n  isShowButtonWaiteSign: boolean = true;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  isPassNQ43: boolean = false;\r\n  isDisplayGuideSale: boolean = false;\r\n  isMauNhieuPhi: boolean = false;\r\n  isMauInSan: boolean = false;\r\n  so_luong_bien_lai: number = 1;\r\n  private isExportInvoice: boolean;\r\n  taxCode: any = '';\r\n  currentUser: any;\r\n  receipt_sign_date: any;\r\n  receiptArray: any = [];\r\n  showPopupImport = false;\r\n  valueProgress: number = 0;\r\n  errorImport = false;\r\n  subXuatHoaDon: any;\r\n  totalInvoice = 0;\r\n  countInvoice = 1;\r\n  countReceiptGhiTam = 1;\r\n  totalRecepitGhiTam = 0;\r\n  isXuatHangLoat: boolean = false;\r\n  isGhiTamHangLoat: boolean = false;\r\n  percentComplete: number = 0;\r\n  idArray = [];\r\n  checkSubmit: any;\r\n  dataInfor: any;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n    private confirmService: ConfirmService,\r\n    private configsService: ConfigsService,\r\n    private spinner: NgxSpinnerService,\r\n    private paymentRService: PaymentReceiptService,\r\n    private modalImportService: BsModalService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status === sEnum.statusInv.DaXuat || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && VStringService._getValueToString(this.frmData.receipt_number) != \"\" && Number(this.frmData.receipt_number) > 0)) {\r\n      this.disablleScreen();\r\n      if (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && VStringService._getValueToString(this.frmData.receipt_number) != \"\" && Number(this.frmData.receipt_number) > 0)\r\n        this.ttDaXuatHoaDon = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  /* Disbale Form và bảng hàng hóa */\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    if (this.productGrip)\r\n      this.productGrip.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    if (!this.isXuatHangLoat)\r\n      Library.showloading();\r\n    let status;\r\n    if (!this.frmData.id && !this.frmData.receipt_number) {\r\n      status = sEnum.processInv.ThemMoi;\r\n    }\r\n    if (this.frmData.id && !this.frmData.receipt_number) {\r\n      status = sEnum.statusInv.GhiTam;\r\n    }\r\n    if (this.frmData.id && this.frmData.receipt_number) {\r\n      status = sEnum.statusInv.ChoKy;\r\n    }\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    this.receipt_sign_date = null;\r\n    if (status === sEnum.processInv.ThemMoi) {\r\n      const sub = this.paymentRService.ghiTam(this.frmData, true).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.receipt_number = rs.data.receipt_number;\r\n          this.frmData.receipt_date = moment(rs.data.receipt_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let receipt_sign_date = moment(rs.data.receipt_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.receipt_sign_date = receipt_sign_date;\r\n          this.frmData.id = rs.data.id;\r\n          this.idArray.push(rs.data.id);\r\n          this.setDataSessionStorage(this.frmData);\r\n          // demo kí số vào file\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          //  Lấy xml từ serer\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, receipt_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        if (!this.isXuatHangLoat)\r\n          Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status === sEnum.statusInv.GhiTam) {\r\n      const sub = this.paymentRService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.receipt_number = rs.data.receipt_number;\r\n          this.frmData.receipt_date = moment(rs.data.receipt_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let receipt_sign_date = moment(rs.data.receipt_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.receipt_sign_date = receipt_sign_date;\r\n          this.idArray.push(this.frmData.id);\r\n          // demo kí số vào file\r\n          //  Lấy xml từ server\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, receipt_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status === sEnum.statusInv.ChoKy) {\r\n      const sub = this.paymentRService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.receipt_date = moment(rs.data.receipt_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let receipt_sign_date = moment(rs.data.receipt_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.receipt_sign_date = receipt_sign_date;\r\n          // demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          this.idArray.push(this.frmData.id);\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, receipt_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        if (!this.isXuatHangLoat)\r\n          Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    this.socketService.kyBienLai(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    if (this.isXuatHangLoat) {\r\n      this.percentComplete = 100 / this.totalInvoice;\r\n    }\r\n    else {\r\n      setTimeout(function () {\r\n        Library.showloading();\r\n      }, 20);\r\n    }\r\n    const sub = this.paymentRService.xuatBienLai({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n      receipt_sign_date: this.receipt_sign_date\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.disablleScreen();\r\n        this.isExportInvoice = true;\r\n        if (this.isXuatHangLoat) {\r\n          this.valueProgress += this.percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.xuatHoaDon();\r\n          }\r\n          else if (this.countInvoice == this.totalInvoice) {\r\n            this.isXuatHangLoat = false;\r\n            this.showPopupImport = false;\r\n            Library.notify('Xuất biên lai thành công', 'success');\r\n          }\r\n        }\r\n        else {\r\n          Library.notify('Xuất biên lai thành công', 'success');\r\n          this.setDataSessionStorage(this.frmData);\r\n        }\r\n\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      if (!this.isXuatHangLoat)\r\n        Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    // kết nối websocket\r\n    this.connectWebsocket();\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (this.currentUser.account) {\r\n      this.taxCode = this.currentUser.account.tax_code;\r\n    }\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // get cấu hình\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.configs = this.authService.getConfigs();\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      this.frmData.display_currency = JSON.stringify(this.configs.display_currency);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      this.isTT78 = true;\r\n      // if (this.infoDangKy) {\r\n      //   if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n      //     this.isTT78 = true;\r\n      // }\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      let temptTT78 = [];\r\n      if (isEdit) {\r\n        temptTT78 = data.init[3];\r\n        invoice = data.init[1];\r\n      }\r\n      else {\r\n        temptTT78 = data.init[1];\r\n      }\r\n      this.select.templatesTT78 = temptTT78\r\n      if (isEdit || this.vatService.isCopy) {\r\n        if (this.vatService.isCopy) {\r\n          this.khoiTaoKhiSua(this.vatService.data);\r\n        } else {\r\n          this.khoiTaoKhiSua(invoice);\r\n        }\r\n      } else {\r\n        this.khoiTaoKhiThemMoi();\r\n      }\r\n    });\r\n    const currentUser = this.authService.getCurrentUser();\r\n    if (currentUser && currentUser.account && (currentUser.account.tax_code == \"0102519041-999\" || currentUser.account.tax_code == \"8888888803\" || currentUser.account.tax_code == \"9999999671\"))\r\n      this.isPassNQ43 = true;\r\n    const listpermissions = currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  setDataSessionStorage(data) {\r\n    this.valueChange = JSON.stringify(data);\r\n  }\r\n\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    console.log(\"dataBefore\", dataBefore)\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    console.log(\"dataAfter\", dataAfter)\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  /* Kết nối đến socket */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.frmData.issuer_name = data.Data.IssuerName;\r\n          this.xuLiApiKhiXuat();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  khoiTaoKhiThemMoi() {\r\n    // Khởi tạo thông tin hàng hóa\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    if (this.select.templatesTT78.length) {\r\n      this.frmData.template_id = this.select.templatesTT78[0].value;\r\n      this.frmData.receipt_series = this.select.templatesTT78[0].receipt_series;\r\n      this.frmData.template_code = this.select.templatesTT78[0].template_code;\r\n      this.frmData.template_type = this.select.templatesTT78[0].template_type;\r\n      for (const key in this.select.templatesTT78[0]) {\r\n        if (this.select.templatesTT78[0].hasOwnProperty(key)) {\r\n          this._oTemplateTT78[key] = this.select.templatesTT78[0][key];\r\n        }\r\n      }\r\n      this.invoiceTemplateTT78 = this.select.templatesTT78[0];\r\n      if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.BienLaiInSanMenhGia) {\r\n        this.frmData.fee_name = this.select.templatesTT78[0].fee_name;\r\n        this.frmData.total_payment = this.select.templatesTT78[0].fee_money;\r\n        this.frmData.total_payment_in_word = Helper.tienBangChu(this.frmData.total_payment, 0, this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n        this.isMauInSan = true;\r\n      }\r\n      else\r\n        this.isMauInSan = false;\r\n      if (parseInt(this.invoiceTemplateTT78.numberRow) != 100)\r\n        this.isMauNhieuPhi = true;\r\n      else\r\n        this.isMauNhieuPhi = false;\r\n    }\r\n\r\n    this.frmData.currency_code = 'VND';\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    // Khởi tạo thông tin hàng hóa\r\n    const _lst = this.frmData.setInvoice_products_data(data.receipt_fees);\r\n    if (_lst) {\r\n      _lst.forEach(item => {\r\n        if (item.fee_name && item.unit_name) {\r\n          const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n          if (!obj1) {\r\n            if (VStringService._getValueToString(item.unit_code) == \"\")\r\n              item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n            let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n            if (oDuplicate)\r\n              item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n          }\r\n          else\r\n            if (!item.unit_code || (item.unit_code && item.unit_code != obj1.code))\r\n              item.unit_code = obj1.code;\r\n        }\r\n      });\r\n    }\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: _lst\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    // lấy file\r\n    if (this.vatService.isCopy) {\r\n      let _oTempt = this.select.templatesTT78.filter(p => p.value === this.frmData.template_id)[0];\r\n      if (_oTempt) {\r\n        this.frmData.template_id = _oTempt.value;\r\n        this.frmData.receipt_series = _oTempt.receipt_series;\r\n        this.frmData.template_code = _oTempt.template_code;\r\n        this.frmData.template_type = _oTempt.template_type;\r\n      }\r\n      else {\r\n        this.frmData.template_id = null;\r\n        this.frmData.receipt_series = null;\r\n        this.frmData.template_code = null;\r\n        this.frmData.template_type = null;\r\n      }\r\n    } else {\r\n      this.fileData = data.invoice_files;\r\n    }\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (item.value === this.frmData.template_id) {\r\n        this.invoiceTemplateTT78 = item;\r\n      }\r\n    });\r\n    this.select.templatesTT78.some(item => {\r\n      if (item.value === this.frmData.template_id) {\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            this._oTemplateTT78[key] = item[key];\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n    });\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n    this.pkInvoiceSelectWaitSign = this.frmData.id;\r\n  }\r\n  /*  */\r\n  onTemplateTypeChange(e) {\r\n    this.invoicereleaseTempt = e;\r\n  }\r\n  onTemplateTT78TypeChange(e) {\r\n    this.invoiceTemplateTT78 = e;\r\n    if (parseInt(this.invoiceTemplateTT78.numberRow) != 100)\r\n      this.isMauNhieuPhi = true;\r\n    else\r\n      this.isMauNhieuPhi = false;\r\n    if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.BienLaiInSanMenhGia)\r\n      this.isMauInSan = true;\r\n    else\r\n      this.isMauInSan = false;\r\n  }\r\n  changeGridProduct() {\r\n    //\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n  }\r\n  /*  */\r\n  onInvoiceCurrent(e) {\r\n    this.pkInvoiceCurrent = e;\r\n  }\r\n  /*  */\r\n  fillDataToForm(e) {\r\n    this.frmData.customer_name = e[0];\r\n  }\r\n  /*  */\r\n  getDataInChildForm(e) {\r\n    this.frmData = e;\r\n    this.frmTraLai.reason = e.lido;\r\n  }\r\n  /* Tính tiền */\r\n  onNumberChange() {\r\n\r\n  }\r\n  changeEnvironmentalFee() {\r\n\r\n  }\r\n  /* Lấy data khi chọn file đính kèm bảng kê */\r\n  getFileData(fileData) {\r\n    this.fileData = fileData;\r\n  }\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      const p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  getFormatterToNumber(formatter) {\r\n    const s1 = formatter.replace('0,###', '');\r\n    if (s1 === '') {\r\n      return 0;\r\n    } else {\r\n      const s2 = s1.replace('.', '');\r\n      return s2.split('').length;\r\n    }\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number === 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n  /* Xem/In chuyển đổi */\r\n  inChuyenDoiText() {\r\n\r\n  }\r\n  /* Tổng tiền thanh toán */\r\n  totalPaymentChange = (e) => {\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(e.value, this.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n  onNumberTicketChange() {\r\n  }\r\n  /* Xem trước hóa đơn */\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n\r\n      let data = this.paymentRService.taodulieuXemTruocMau(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n\r\n  view() {\r\n    if (this.isMauInSan && this.so_luong_bien_lai > 1) {\r\n      if (this.configs.system_parameter.view_multi_invoice) {\r\n        let data = this.paymentRService.taodulieuXemMau(this.idArray);\r\n        data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n        this.vPreviewInvService.xemMau(data);\r\n      }\r\n      else {\r\n        const initialState = {\r\n          items: this.idArray,\r\n          isXuatHD: false,\r\n          hinhthucxuat: '',\r\n          typeAction: sEnum.typeCode.xem_bien_lai\r\n        };\r\n        this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n      }\r\n    }\r\n    else {\r\n      let ids = [];\r\n      ids.push(this.frmData.id);\r\n      let data = this.paymentRService.taodulieuXemMau(ids);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }\r\n  }\r\n  /* Ghi tạm */\r\n  ghiTam() {\r\n    if (this.isGhiTamHangLoat) {\r\n      this.frmData = this.receiptArray[this.countReceiptGhiTam - 1];\r\n      this.percentComplete = 100 / this.totalRecepitGhiTam;\r\n    }\r\n    this.isDisable = true\r\n    if (!this.isGhiTamHangLoat)\r\n      Library.showloading();\r\n    if (this.frmData.id) {\r\n      const sub = this.paymentRService.edit(this.frmData.id, this.frmData).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          if (this.isGhiTamHangLoat) {\r\n            this.valueProgress += this.percentComplete;\r\n            if (this.countReceiptGhiTam < this.totalRecepitGhiTam) {\r\n              this.countReceiptGhiTam++;\r\n              this.ghiTam();\r\n            }\r\n            else if (this.countReceiptGhiTam == this.totalRecepitGhiTam) {\r\n              this.isGhiTamHangLoat = false;\r\n              this.showPopupImport = false;\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.setDataSessionStorage(this.frmData);\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        if (!this.isGhiTamHangLoat)\r\n          Library.hideloading();\r\n        this.isDisable = false;\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      const sub = this.paymentRService.ghiTam(this.frmData).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          if (this.isGhiTamHangLoat) {\r\n            this.valueProgress += this.percentComplete;\r\n            if (this.countReceiptGhiTam < this.totalRecepitGhiTam) {\r\n              this.countReceiptGhiTam++;\r\n              this.ghiTam();\r\n            }\r\n            else if (this.countReceiptGhiTam == this.totalRecepitGhiTam) {\r\n              this.isGhiTamHangLoat = false;\r\n              this.showPopupImport = false;\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.setDataSessionStorage(this.frmData);\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n          this.isDisable = false;\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        if (!this.isGhiTamHangLoat)\r\n          Library.hideloading();\r\n        this.isDisable = false;\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    if (this.isXuatHangLoat)\r\n      this.frmData = this.receiptArray[this.countInvoice - 1];\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      this.socketService.kyBienLai(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n    }\r\n  }\r\n\r\n  taoDSBienLai(isXuatHoaDon) {\r\n    this.receiptArray = [];\r\n    this.idArray = [];\r\n    this.receiptArray.push(this.frmData);\r\n    for (let i = 1; i < this.so_luong_bien_lai; i++) {\r\n      let frmDataClone = Object.assign({}, this.frmData);\r\n      frmDataClone.id = null;\r\n      if (frmDataClone.receipt_fees && frmDataClone.receipt_fees.length > 0) {\r\n        frmDataClone.receipt_fees.forEach(item => {\r\n          item.id = Helper.makeid();\r\n        });\r\n      }\r\n      this.receiptArray.push(frmDataClone);\r\n    }\r\n    this.showPopupImport = true;\r\n    this.countInvoice = 1;\r\n    this.countReceiptGhiTam = 1;\r\n    if (isXuatHoaDon) {\r\n      this.totalInvoice = this.receiptArray.length;\r\n      this.xuatHoaDon();\r\n    }\r\n    else {\r\n      this.totalRecepitGhiTam = this.receiptArray.length;\r\n      this.ghiTam();\r\n    }\r\n  }\r\n  /* Xuất chờ ký */\r\n  xuatChoKy(data) {\r\n\r\n  }\r\n  dongtralai() {\r\n    const link = document.createElement('a');\r\n    link.setAttribute('target', '_self');\r\n    link.setAttribute('href', '/system/invoice-sync/');\r\n    document.body.appendChild(link);\r\n    link.click();\r\n  }\r\n  /* Trả lại */\r\n  traLai() {\r\n    if (this.frmTraLai.reason === undefined || this.frmTraLai.reason === '') {\r\n      Library.notify(this._translate.CONTROLL.LABEL.reason_return + ' ' + this._translate.VALIDATION.required, 'error');\r\n    } else {\r\n      Library.showloading();\r\n      const sub = this.vatService.traLaiHoaDon({\r\n        id: this.frmData.id,\r\n        reason: this.frmTraLai.reason\r\n      }).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          Library.notify(this._translate.NOTIFY.return_success, 'success');\r\n          const link = document.createElement('a');\r\n          link.setAttribute('target', '_self');\r\n          link.setAttribute('href', '/system/invoice-sync/');\r\n          document.body.appendChild(link);\r\n          link.click();\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  /* Validate */\r\n  _validForm(isOnlyCheckAm) {\r\n    let _isValid = true;\r\n    if (isOnlyCheckAm) {\r\n      if (this.checkProductCode())\r\n        return true;\r\n      else\r\n        return false;\r\n    }\r\n    if (this.frmData.currency_code && this.frmData.currency_code != \"VND\" && this.frmData.currency_rate === null) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    if (!this.frmData.total_payment && this.frmData.total_payment !== 0) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.amount_after_vat + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    if (this.isMauInSan && this.so_luong_bien_lai <= 0) {\r\n      Library.notify('Số lượng biên lai phải lớn hơn 0', 'error');\r\n      return false;\r\n    }\r\n    if (this.isMauNhieuPhi) {\r\n      const _lst = this.frmData.receipt_fees.filter(p => p.fee_name);\r\n      if (_lst.length === 0) {\r\n        Library.notify('Chưa nhập thông tin loại phí, lệ phí', 'error');\r\n        if (this.productGrip && this.productGrip.dataGrid)\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'fee_code'));\r\n        return false;\r\n      }\r\n      else {\r\n        if (!this.checkProductCode())\r\n          return false;\r\n\r\n        const _lstValidThanhTien = this.frmData.receipt_fees.filter(p => !p.amount && p.amount !== 0);\r\n        if (_lstValidThanhTien.length == this.frmData.receipt_fees.length) {\r\n          Library.notify(this._translate.GRID.INVOICE_DETAILS.amount + ' ' + this._translate.VALIDATION.required, 'error', 5000);\r\n          if (this.productGrip && this.productGrip.dataGrid)\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount'));\r\n          return false;\r\n        }\r\n        // const _lstValidTongTien = this.frmData.receipt_fees.filter(p => !p.amount_after_vat && p.amount_after_vat !== 0);\r\n        // if (_lstValidTongTien.length == this.frmData.receipt_fees.length) {\r\n        //   Library.notify(this._translate.CONTROLL.LABEL.total_money_goods + ' ' + this._translate.VALIDATION.required, 'error', 5000);\r\n        //   if (this.productGrip && this.productGrip.dataGrid)\r\n        //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount_after_vat'));\r\n        //   return false;\r\n        // }\r\n\r\n        this.invoice_products.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            // if (VStringService._getValueToString(item.fee_name) == \"\" && _isValid) {\r\n            //   Library.notify(\"Tên loại phí, lệ phí\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            //   if (this.productGrip && this.productGrip.dataGrid)\r\n            //     this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'fee_name'));\r\n            //   _isValid = false;\r\n            //   return false;\r\n            // }\r\n            if (VStringService._getValueToString(item.fee_name) != \"\") {\r\n              if (item.amount == null && _isValid) {\r\n                Library.notify(\"Thành tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                if (this.productGrip && this.productGrip.dataGrid)\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount'));\r\n                _isValid = false;\r\n                return false;\r\n              }\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }\r\n    return _isValid;\r\n  }\r\n  /* Kiểm tra Mã hàng phải nhập không dấu, không chứa ký tự đặc biệt và tối đa 50 ký tự */\r\n  checkProductCode() {\r\n    let isValid = true;\r\n\r\n    return isValid;\r\n  }\r\n  /* Xuất hóa đơn */\r\n  eSubmit(type) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.total_payment = \"\";\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (type !== sEnum.statusInv.GhiTam) {\r\n        this._isValid = this._validForm(false);\r\n        if (!this._isValid) {\r\n          return;\r\n        }\r\n      }\r\n      if (this.frmData.receipt_options) {\r\n        this.frmData.receipt_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n        });\r\n      }\r\n      if (type === 'XUAT') {\r\n        this.processXuatHoaDon(type)\r\n      } else {\r\n        this.processGhiTam()\r\n      }\r\n    }, 300);\r\n  }\r\n  /* Xử lý xuất hóa đơn */\r\n  processXuatHoaDon(type) {\r\n    let _index = 0;\r\n    let _lstInv = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      _lstInv = dataSource.filter(p => p.product_name);\r\n    });\r\n    if (this.confirmCheckPreview) {\r\n      if (this.isMauInSan && this.so_luong_bien_lai > 1) {\r\n        this.isXuatHangLoat = true;\r\n        this.taoDSBienLai(true);\r\n      }\r\n      else {\r\n        this.isXuatHangLoat = false;\r\n        this.xuatHoaDon();\r\n      }\r\n      this.confirmCheckPreview = false;\r\n    } else {\r\n      this.previewBeforeExport(type);\r\n    }\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let du_lieu = this.paymentRService.taodulieuXemTruocMau(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_bien_lai.toUpperCase(),\r\n      note_warn: this._translate.THONG_TIN.luu_y_truoc_khi_xuat_bien_lai,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_bien_lai,\r\n      text_tong_tien: this._translate.THONG_TIN.so_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_bien_lai_khong\r\n    }\r\n    if (this.isMauInSan) {\r\n      content_invoice[\"so_luong_bien_lai\"] = this.so_luong_bien_lai < 10 ? \"0\" + this.so_luong_bien_lai : this.so_luong_bien_lai;\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  /* Xử lý ghi tạm hóa đơn */\r\n  processGhiTam() {\r\n    let isTamDongGhiTamHangLoat = true;\r\n    if (!isTamDongGhiTamHangLoat) {//if (this.isMauInSan && this.so_luong_bien_lai > 1) {\r\n      this.isGhiTamHangLoat = true;\r\n      this.taoDSBienLai(false);\r\n    }\r\n    else {\r\n      this.isGhiTamHangLoat = false;\r\n      this.ghiTam();\r\n    }\r\n  }\r\n\r\n  async subData(type, data) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return false;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    await this.handleFormDataSub();\r\n    if (this.frmData.receipt_options) {\r\n      this.frmData.receipt_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n      Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error');\r\n      return false;\r\n    }\r\n\r\n    if (data.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.edit(data.id, data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.editTT78(data.id, data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.ghiTam(data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.ghiTamTT78(data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  /* Tạo mới */\r\n  handleAddNew() {\r\n    if (this.isExportInvoice) {\r\n      this.addNew();\r\n    } else {\r\n      if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n        this.confirmService.confirm()\r\n          .subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData(sEnum.statusInv.GhiTam, this.frmData).then(res => {\r\n                    if (res) {\r\n                      this.addNew();\r\n                    } else {\r\n                      return;\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  this.addNew();\r\n                  break;\r\n                case 'cancel':\r\n                  this.addNew();\r\n                  break;\r\n                default:\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n      } else {\r\n        this.addNew();\r\n      }\r\n    }\r\n  }\r\n  /* Tạo mới */\r\n  addNew() {\r\n    const inv = Object.assign({}, this.frmData);\r\n    this.frmData = new PaymentReceiptModel(1);\r\n    this.frmData.receipt_date = null;\r\n    this.frmData.template_id = inv.template_id;\r\n    this.frmData.payment_method_name = inv.payment_method_name;\r\n    this.frmData.payment_method_code = inv.payment_method_code;\r\n    this.frmData.currency_code = inv.currency_code;\r\n    this.frmData.template_code = inv.template_code;\r\n    this.frmData.template_type = inv.template_type;\r\n    this.frmData.receipt_series = inv.receipt_series;\r\n    this.frmData.receipt_type = inv.receipt_type;\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n    this.productGrip.createUpdateEvent();\r\n    this.formInvoice.removeReadonlyAllForm();\r\n    this.formInvoice.emails = [];\r\n    this.ttDaXuatHoaDon = false;\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  handleFormData() {\r\n    const invoice_products = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        delete item.error;\r\n        if (item.fee_code || item.fee_name) {\r\n          invoice_products.push(item);\r\n        }\r\n      });\r\n      this.frmData.receipt_fees = invoice_products;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n    });\r\n  }\r\n  handleFormDataSub() {\r\n    const wait = (delay, ...args) => new Promise(resolve => setTimeout(resolve, delay, ...args));\r\n    return wait(200).then(() => {\r\n      this.tempKiFile = 0;\r\n      const invoice_products = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          delete item.error;\r\n          if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n            item.row_content = item.product_name;\r\n            invoice_products.push(item);\r\n            if (item.is_transport_number) {\r\n            }\r\n          }\r\n        });\r\n\r\n        this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n      });\r\n      return true;\r\n    });\r\n  }\r\n\r\n  dong() {\r\n    if (this.isHdGTGT) {\r\n      this.router.navigate(['/system/vat-invoice']);\r\n    } else {\r\n      this.router.navigate(['/system/sale-invoice']);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  xemlydotuchoi() {\r\n    Library.showloading();\r\n    const sub = this.vatService.showToSendInvoice(this.frmData.id).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n          listDM: this.listDM\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  onVatChange() {\r\n\r\n  }\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    return true;\r\n  }\r\n\r\n  keyDown(e: any) {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n  kiemtraToolKy() {\r\n    return true;\r\n  }\r\n  guideSales() {\r\n    this.isDisplayGuideSale = !this.isDisplayGuideSale;\r\n  }\r\n  onChangeSalePercen(e) {\r\n    this.configs.system_parameter.value_rate_percent = e.value;\r\n    let data = {\r\n      config: {\r\n        value: JSON.stringify(this.configs.system_parameter)\r\n      }\r\n    };\r\n    this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n      if (response.status == \"success\") {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n          this.configs = this.authService.getConfigs();\r\n        });\r\n      } else {\r\n      }\r\n    }, err => { }, () => {\r\n    });\r\n    this.onNumberTicketChange();\r\n  }\r\n  changeSLBienLai(value) {\r\n    this.so_luong_bien_lai = value;\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n  onImportHiding(e) {\r\n    // let r = true;\r\n    // if (this.valueProgress < 100 && this.errorImport == false) {\r\n    //   r = confirm(\"Cảnh báo: Quá trình xuất biên lai sẽ dừng lại nếu bạn đóng cửa sổ này\");\r\n    // }\r\n    // if (r) {\r\n    //   if (this.subXuatHoaDon) {\r\n    //     this.subXuatHoaDon.unsubscribe();\r\n    //   }\r\n    //   this.valueProgress = 0;\r\n    //   this.totalInvoice = 0;\r\n    // } else {\r\n    //   e.cancel = true;\r\n    // }\r\n  }\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return 'Hoàn thành: ' + percent + '%';\r\n  }\r\n  showButtonGhiTam() {\r\n    if (!this.ttDaXuatHoaDon && !this.isMauInSan)\r\n      return true;\r\n    return false;\r\n  }\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n  <div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title pull-left\\\">HÓA ĐƠN CHỜ KÝ</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <dx-form id=\\\"cancelForm\\\" [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: 'Mẫu hóa đơn'}\\\" dataField=\\\"invoice_release_id\\\" editorType=\\\"dxSelectBox\\\" [editorOptions]=\\\"{items: invoice_releases, displayExpr: 'name', valueExpr: 'value', onValueChanged: invoiceReleaseChange}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Mẫu hóa đơn không được để trống\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"invoice_type_name\\\" [label]=\\\"{text: 'Loại hóa đơn'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: 'Ngày hóa đơn'}\\\" editorType=\\\"dxDateBox\\\" [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd'}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"number_of_invoice\\\" [label]=\\\"{text: 'Số lượng hóa đơn'}\\\" editorType=\\\"dxNumberBox\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Số lượng hóa đơn không được để trống\\\"></dxi-validation-rule>\\r\\n          <dxi-validation-rule type=\\\"range\\\" [max]=\\\"soTon\\\" message=\\\"Số hóa đơn vượt quá số hóa đơn đã đăng ký\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item name=\\\"text-support\\\">\\r\\n          <div *dxTemplate>\\r\\n            <p *ngIf=\\\"soTon\\\" style=\\\"margin-top: 3px;\\\">(Tổng số hóa đơn còn lại: {{ soTon }})</p>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <dx-button text=\\\"Ghi\\\" icon=\\\"fa fa-floppy-o\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n    </dx-button>\\r\\n    <dx-button text=\\\"Quay lại\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    </dx-button>\\r\\n  </div>\\r\\n</form>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport * as moment from 'moment';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { Helper, Library } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\n@Component({\r\n  selector: 'app-keep-number',\r\n  templateUrl: './keep-number.component.html',\r\n  styleUrls: ['./keep-number.component.scss']\r\n})\r\nexport class KeepNumberComponent implements OnInit {\r\n\r\n  invoice_releases: any;\r\n  frmData: any = {};\r\n  soTon: number = 0;\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    let invoice_releases = [];\r\n    this.frmData.invoice_date = moment(new Date()).format(\"YYYY-MM-DD\");;\r\n    this.invoice_releases.forEach(item => {\r\n      let soTon = parseInt(item.amount) - parseInt(item.used_amount);\r\n      invoice_releases.push({\r\n        name: `${item.template.template_code} - ${item.template.invoice_series} (${Helper.formatNumberInvoice(item.begin_number)} - ${Helper.formatNumberInvoice(item.end_number)}) - Số tồn: ${soTon}`,\r\n        value: item.id,\r\n        template_id: item.template_id,\r\n        invoice_type_name: item.invoice_type_name,\r\n        soTon: soTon\r\n      });\r\n    });\r\n    this.invoice_releases = invoice_releases;\r\n  }\r\n\r\n  invoiceReleaseChange = (e) => {\r\n    console.log(e.value);\r\n    this.invoice_releases.some(item => {\r\n      if (item.value == e.value) {\r\n        this.frmData.invoice_type_name = item.invoice_type_name;\r\n        this.frmData.template_id = item.template_id;\r\n        this.soTon = item.soTon;\r\n        return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  onSubmit(e) {\r\n    let data = { ...this.frmData };\r\n    delete data.invoice_type_name;\r\n\r\n    Library.showloading();\r\n    let sub = this.vatService.giuSo(data).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        Library.notify('Thành công', 'success');\r\n        this.bsModalRef.content.successSaveItem = \"success\";\r\n        this.bsModalRef.hide();\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {}, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n}\r\n","module.exports = \"<!-- Phần không tự tính giá trị, nhập mẫu bảng kê -->\\r\\n<div class=\\\"row support-invoice\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <!-- Thêm dòng -->\\r\\n    <div class=\\\"pull-left\\\">\\r\\n      <div style=\\\"float: left;width:  30%; padding-top: 4px\\\">{{ _translate.CONTROLL.BUTTON.add_row }}</div>\\r\\n      <div style=\\\"float: left; width: 30%\\\">\\r\\n        <dx-number-box #numberBox [max]=\\\"100\\\" [min]=\\\"1\\\" [showSpinButtons]=\\\"true\\\" [(value)]=\\\"rowData\\\"></dx-number-box>\\r\\n      </div>\\r\\n      <div>\\r\\n        <dx-button style=\\\"height: 27px\\\" icon=\\\"fa fa-plus-circle\\\" type=\\\"default\\\" text=\\\"\\\" (onClick)=\\\"addRow()\\\">\\r\\n        </dx-button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.import_type }}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"thayTheToanBo()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all }}\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"themTiep()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<!-- phần table hiển thị -->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onCellPrepared)=\\\"onCellPrepared($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"!ttDaXuatHoaDon\\\"></dxo-editing>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxo-scrolling mode=\\\"virtual\\\">\\r\\n        <!-- or \\\"virtual\\\" | \\\"infinite\\\" -->\\r\\n      </dxo-scrolling>\\r\\n      <!-- Xóa -->\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- STT -->\\r\\n      <dxi-column dataField=\\\"view_order\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Mã loại phí lệ phí -->\\r\\n      <dxi-column cssClass=\\\"overlay-content123\\\" dataField=\\\"fee_code\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.fee_type_code }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n                  alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [editorOptions]=\\\"{showClearButton: true}\\\">\\r\\n        <dxo-lookup *ngIf=\\\"reloadSelectProduct\\\"\\r\\n                    [dataSource]=\\\"select.productsView\\\"\\r\\n                    displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Tên loại lệ phí -->\\r\\n      <dxi-column minWidth=\\\"{{ _translate.GRID_WIDTH.don_hang_hop_dong }}\\\" dataField=\\\"fee_name\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.fee_type_name }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Đơn vị tính -->\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\"\\r\\n                  alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Số lượng -->\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.so_luong,step: '0' }\\\" [format]=\\\"formatter.so_luong\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Đơn giá -->\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.don_gia,step: '0' }\\\" [format]=\\\"formatter.don_gia\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Thành tiền -->\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.thanh_tien ,step: '0'}\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.quantity }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n          src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <dxo-paging [enabled]=\\\"true\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:20px;margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:8px}.support-invoice .support-link img,.support-invoice .support-link i{margin-right:15px;margin-top:-2px}.support-invoice .auto-input{margin-right:20px !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .styleItemToList{color:dodgerblue}.button-dropdown-extend{display:inline-flex}::ng-deep .vat-invoices .dx-texteditor-buttons-container{display:-ms-inline-grid;display:inline-grid}::ng-deep #gridInvoice{height:208px}::ng-deep .popGuid .dx-widget{display:inline-block}\\n\"","import { AfterViewInit, Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport * as XLSX from 'xlsx';\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { AddComponent, ConfigDecimalComponent } from '@shared/index';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { pattern } from '@config/index';\r\nimport { PaymentReceiptModel } from '@modules/payment-receipt/shared';\r\n\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'vat-product-grip',\r\n  templateUrl: './product-grip.component.html',\r\n  styleUrls: ['./product-grip.component.scss']\r\n})\r\nexport class ProductGripComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  // @ViewChildren(DxFormComponent) listDxForm: any;\r\n\r\n  routeSub: Subscription;\r\n\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() isHdGTGT: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() extentionGrid: any;\r\n  @Input() isTT78: boolean;\r\n  // @Input() not_auto: any; //Không tự tính giá trị\r\n  @Input() formDataInInvoice: any; // Không tự tính giá trị\r\n  select: any = {};\r\n  _translate: any;\r\n  listDVT: any;\r\n  frmData: PaymentReceiptModel = new PaymentReceiptModel(1);\r\n  bsModalRef: BsModalRef;\r\n  showPopup = false; // Popup \r\n  dataExcelFile: any = null;\r\n  dataExcelFileInfo: any = null;\r\n  ttDaXuatHoaDon = false;\r\n  _disDiengiai = false;\r\n  _disKhuyenMai = false;\r\n  configs: any;\r\n  amount_after_vat: any = 0;\r\n  reloadSelectProduct = true;\r\n  selectBoxData: any;\r\n  extras = [];\r\n  rowData = 1;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  isDisplayReduceGuid: boolean = false;\r\n  productViews = [];\r\n  isShowND92: boolean = false;\r\n  ruleError = {\r\n    '': 'này',\r\n    '-1': 'Không chịu thuế',\r\n    '0': '0%',\r\n    '5': '5%',\r\n    '10': '10%'\r\n  };\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private productsService: ProductsService,\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      this.select.countrys = danh_muc.DM_QUOC_GIA ? danh_muc.DM_QUOC_GIA.data : null;\r\n      ///\r\n      if (this.select.select_provisions_on_accounts && this.select.select_provisions_on_accounts.length > 0) {\r\n        this.select.select_provisions_on_accounts.forEach(item => {\r\n          item.mdk = item.code + ': ' + item.name;\r\n        });\r\n      }\r\n      ///\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      if (this.isTT78) {\r\n        this.select.products = data.init[0];\r\n        if (isEdit)\r\n          invoice = data.init[1];\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'code',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              const _data = data.init[0].filter(p => p.code === key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'name'\r\n        };\r\n      }\r\n      else {\r\n        this.select.products = data.init[1];\r\n        if (isEdit)\r\n          invoice = data.init[3];\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'code',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              const _data = data.init[1].filter(p => p.code === key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'name'\r\n        };\r\n      }\r\n      this.select.products.forEach(item => {\r\n        item.mhvth = item.code + ': ' + item.name;\r\n      });\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (item.fee_name && item.unit_name) {\r\n            const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n            if (!obj1) {\r\n              if (VStringService._getValueToString(item.unit_code) == \"\")\r\n                item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n              let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (oDuplicate)\r\n                item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n              this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n            }\r\n            else {\r\n              if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n                let oExistUnitCode = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n                if (!oExistUnitCode)\r\n                  this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n    });\r\n\r\n    // Event\r\n    this.createUpdateEvent();\r\n  }\r\n\r\n  // Thêm giá trị mới vào đơn vị tính\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      let oDuplicate = this.select.unit_codes.filter(p => p.code === newItem.code)[0];\r\n      if (oDuplicate)\r\n        newItem.code = newItem.code + Helper.addtionalUnitCode();\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        if (value.fee_code !== 'add') {\r\n          this.invoice_products.byKey(key).then((row) => {\r\n            switch (column) {\r\n              case 'view_order':\r\n                this.view_orderChange();\r\n                break;\r\n              case 'fee_code':\r\n                this.fee_codeChange(row);\r\n                break;\r\n              case 'unit_code':\r\n                this.unit_codeChange(row);\r\n                break;\r\n              case 'quantity':\r\n              case 'price':\r\n              case 'amount':\r\n                this._tinhGiaTri();\r\n                break;\r\n              default:\r\n                break;\r\n              // }\r\n            }\r\n          }, (error) => {\r\n            alert(error);\r\n          });\r\n        } else {\r\n          this.invoice_products.remove(key);\r\n          this.addRow(null);\r\n        }\r\n      });\r\n    }, 100);\r\n  }\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n      const eles = e.rowElement.getElementsByTagName('td');\r\n      if (!e.isEditing) {\r\n        if (eles) {\r\n          for (let i = 0; i < eles.length; i++) {\r\n            if (eles[i].className.includes('dinh-khoan'))\r\n              eles[i].innerHTML = e.data.provisions_on_accounts;\r\n          }\r\n          eles[2].innerHTML = e.data.fee_code;\r\n        }\r\n      }\r\n      if (e.data.error) {\r\n        const ele = eles[eles.length - 1];\r\n        ele.style.background = 'red url(\\'assets/img/icons/fa-remove.png\\') no-repeat 2% center';\r\n        ele.title = e.data.error;\r\n      }\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'fee_code') {\r\n        e.editorOptions.onOpened = function (arg) {\r\n          const popupInstance = arg.component._popup;\r\n          popupInstance.option('width', 400);\r\n          popupInstance.option('minWidth', 400);\r\n        };\r\n      }\r\n      if (e.dataField === 'fee_name') {\r\n        e.editorName = 'dxTextArea';\r\n        //  e.editorOptions.autoResizeEnabled = true;\r\n      }\r\n      //   e.editorOptions.onValueChanged = (args) => {\r\n      //     if (e.dataField === 'unit_code') {\r\n      //       const _obj = this.select.unit_codes.filter(p => p.code === e.row.data.unit_code)[0];\r\n      //       if (_obj) {\r\n      //         e.row.data.unit_name = _obj.name;\r\n      //       } else {\r\n      //         e.row.data.unit_name = '';\r\n      //       }\r\n      //     }\r\n      //     if (e.dataField === 'country_code') {\r\n      //       const _obj = this.select.countrys.filter(p => p.code === e.row.data.country_code)[0];\r\n      //       if (_obj) {\r\n      //         e.row.data.country_name = _obj.name;\r\n      //       } else {\r\n      //         e.row.data.country_name = '';\r\n      //       }\r\n      //     }\r\n      //     e.setValue(args.value);\r\n      //  //   this.invoice_products.update(e.row.data.id, e.row.data);\r\n      //   };\r\n      // this.invoice_products.update(e.row.data.id, e.row.data);\r\n    }\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount') && e.parentType === 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row && e.row.rowType === 'data') {\r\n      e.items = [\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.add_goods,\r\n          onItemClick: () => {\r\n            this.addProduct(e.row.data);\r\n          }\r\n        },\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.add_row,\r\n          onItemClick: () => {\r\n            this.addRow(e.row.rowIndex);\r\n          }\r\n        },\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.delete_row,\r\n          onItemClick: () => {\r\n            this.deleteRow(e.row.data);\r\n          }\r\n        },\r\n      ];\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.column.dataField == \"fee_code\") {\r\n        if (VStringService._getValueToString(e.data.fee_code) != \"\" && !this.productCodePattern.test(e.data.fee_code)) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.VALIDATION.required_productCode;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  addProduct(row) {\r\n    Library.showloading();\r\n    this.productsService.getAllListbyListtypeByCode('DM_NHOM_HANG_HOA,DM_DON_VI_TINH,DM_TY_LE_VAT').subscribe((response) => {\r\n      const initialState = {\r\n        totalCount: 0,\r\n        groupProducts: response.data['DM_NHOM_HANG_HOA'],\r\n        unitCalculations: this.select.unit_codes,//response.data['DM_DON_VI_TINH'],\r\n        vats: response.data['DM_TY_LE_VAT'],\r\n        groupProductListTypeId: response.data['ids']['DM_NHOM_HANG_HOA'],\r\n        unitCalculationListTypeId: response.data['ids']['DM_DON_VI_TINH'],\r\n        vatListTypeId: response.data['ids']['DM_TY_LE_VAT'],\r\n        wavehourses: [],\r\n        formatter: this.formatter,\r\n        onSaveProduct: (data, unitCodes) => {\r\n          this.select.unit_codes = unitCodes;\r\n          data.mhvth = data.code + ': ' + data.name;\r\n          this.select.products.push(data);\r\n          this.reloadSelectProduct = false;\r\n          setTimeout(() => {\r\n            this.reloadSelectProduct = true;\r\n          }, 50);\r\n\r\n          row.fee_code = data.code;\r\n          row.fee_name = data.name;\r\n          row.unit_code = this.checkUnitCode(data.unit_code);\r\n          row.quantity = null;\r\n          row.price = data.price ? parseFloat(data.price) : data.price;\r\n          row.amount = data.price ? parseFloat(data.price) : 0;\r\n          this.unit_codeChange(row);\r\n          this.invoice_products.update(row.id, row);\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  /* Thêm dòng hàng hóa */\r\n  addRow(rowIndexFocus?) {\r\n    if (rowIndexFocus >= 0) {\r\n      let rowIndex = rowIndexFocus + 1;\r\n      const data = this.frmData.add_receipt_fee_data(rowIndex, rowIndex);\r\n      if (data) {\r\n        this.invoice_products._array.splice(rowIndex, 0, data);\r\n        let order = 0;\r\n        this.invoice_products._array.forEach(item => {\r\n          item.order = ++order;\r\n          item.view_order = item.order;\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      let len, order, orderLast;\r\n      this.invoice_products.load().then((dataSource) => {\r\n        len = dataSource.length;\r\n        orderLast = dataSource[len - 1].order;\r\n      });\r\n\r\n      for (let i = 0; i < this.rowData; i++) {\r\n\r\n        if (len >= 1) {\r\n          order = ++orderLast;\r\n        } else {\r\n          order = 1;\r\n        }\r\n        const data = this.frmData.add_receipt_fee_data(order, order);\r\n        this.invoice_products.insert(data);\r\n      }\r\n    }\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  view_orderChange() {\r\n    let _index = 0;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        item.view_order = ++_index;\r\n      });\r\n    });\r\n  }\r\n\r\n  // Thay đổi cột mã hàng\r\n  fee_codeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code === row.fee_code) {\r\n        this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              row.fee_name = product.name;\r\n              row.unit_code = this.checkUnitCode(product.unit_code);\r\n              row.quantity = null;\r\n              row.price = product.price ? parseFloat(product.price) : product.price;\r\n              row.amount = product.price ? parseFloat(product.price) : 0;\r\n              this.invoice_products.update(row.id, row);\r\n              this._tinhGiaTri();\r\n              return true;\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  unit_codeChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  country_codeChange(row) {\r\n    const _obj = this.select.countrys.filter(p => p.code === row.country_code)[0];\r\n    if (_obj) {\r\n      row.country_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.country_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _tinhGiaTri() {\r\n    setTimeout(() => {\r\n      VChanggeMoneyService._tinhtienBienLai(this.invoice_products, this.formDataInInvoice, this.formatter, this.select, this._oTemplateTT78);\r\n    }, 100);\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    let p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte,\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        // this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    setTimeout(() => {\r\n      const check = confirm(this._translate.CONFIRM.delete);\r\n      if (check && !this.ttDaXuatHoaDon) {\r\n        setTimeout(() => {\r\n          this.invoice_products.remove(item.id);\r\n          this.dataGrid.instance.refresh();\r\n          this._tinhGiaTri();\r\n\r\n        }, 100);\r\n      }\r\n    }, 200);\r\n  }\r\n  // Lấy mẫu bảng kê\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    let ts = this._objTemplateSelect;\r\n    let fields = [];\r\n    if (!this.isTT78) {\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayTongHop\r\n        && VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung\r\n        && VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayHoanVe) {\r\n        fields.push(\"other_tax\");\r\n        fields.push(\"other_charge\");\r\n      }\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonKinhDoanhXe) {\r\n        fields.push(\"engine_number\");\r\n        fields.push(\"chassis_number\");\r\n      }\r\n    }\r\n    else {\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayTongHop\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayHoanVe) {\r\n        fields.push(\"other_tax\");\r\n        fields.push(\"other_charge\");\r\n      }\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonKinhDoanhXe) {\r\n        fields.push(\"engine_number\");\r\n        fields.push(\"chassis_number\");\r\n      }\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonNhaHangKhachSan\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung) {\r\n        fields.push(\"is_money_service\");\r\n      }\r\n      if (!this.configs.system_parameter.incurred_refund_ticket)\r\n        fields.push(\"is_refund_ticket\");\r\n      if (!this.configs.system_parameter.view_expiration_date)\r\n        fields.push(\"expiration_date\");\r\n      if (!this.configs.system_parameter.view_lot)\r\n        fields.push(\"lot\");\r\n      if (!this.configs.system_parameter.promotional_goods_on_the_invoice)\r\n        fields.push(\"is_promotion_new\");\r\n      if (!this.configs.system_parameter.is_promotion)\r\n        fields.push(\"is_promotion\");\r\n    }\r\n    if (!this.configs.system_parameter.product_exchange_rate)\r\n      fields.push(\"product_exchange_rate\");\r\n    if (!this.configs.system_parameter.product_date)\r\n      fields.push(\"product_date\");\r\n    // if (this.configs && this.configs.system_parameter && this.configs.system_parameter.display_contract_order)\r\n    //   fields.push(\"contract_order\");\r\n\r\n    if (!this.extentionGrid || (this.extentionGrid && !this.extentionGrid.ma_quan_ly)) {\r\n      fields.push(\"management_code\");\r\n    }\r\n    this.vatService.layFileMau({\r\n      customer_name: this.formDataInInvoice.customer_name,\r\n      buyer_tax_code: this.formDataInInvoice.buyer_tax_code,\r\n      buyer_address: this.formDataInInvoice.buyer_address,\r\n      buyer_name: this.formDataInInvoice.buyer_name,\r\n      invoice_type_name: \"\",\r\n      hiddens: fields\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  // Nạp dữ liệu bảng kê\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById('file-bang-ke').click();\r\n  }\r\n\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) {\r\n      throw new Error('Không thể chọn nhiều file');\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      const data = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 9 }));\r\n      const account = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 0 }));\r\n      const fileBangKe: any = document.getElementById('file-bang-ke');\r\n      fileBangKe.value = '';\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"view_order\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n      }\r\n      this.dataExcelFile = _arrData;\r\n      this.dataExcelFileInfo = account.slice(0, 4);\r\n      this.showPopup = true;\r\n    };\r\n    reader.readAsBinaryString(target.files[0]);\r\n  }\r\n\r\n  thayTheToanBo() {\r\n    this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'thaythe');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  themTiep() {\r\n    this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  fillData(fileData, info, status) {\r\n    if (info.length === 4) {\r\n      const customer_name = info[0].A.split(':');\r\n      if (customer_name.length > 1 && customer_name[1].trim() != '') {\r\n        this.formDataInInvoice.customer_name = customer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_tax_code = info[1].A.split(':');\r\n      if (buyer_tax_code.length > 1 && buyer_tax_code[1].trim() != '') {\r\n        this.formDataInInvoice.payer_tax_code = buyer_tax_code[1].trim();\r\n      }\r\n      ////\r\n      const buyer_name = info[2].A.split(':');\r\n      if (buyer_name.length > 1 && buyer_name[1].trim() != '') {\r\n        this.formDataInInvoice.payer_name = buyer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_address = info[3].A.split(':');\r\n      if (buyer_address.length > 1 && buyer_address[1].trim() != '') {\r\n        this.formDataInInvoice.payer_address = buyer_address[1].trim();\r\n      }\r\n    }\r\n    if (status === 'thaythe') {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.invoice_products.remove(item.id);\r\n        });\r\n      });\r\n    } else {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (!item.fee_code && !item.fee_name && !item.quantity && !item.price && !item.amount) {\r\n            this.invoice_products.remove(item.id);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n      if (element.fee_name) {\r\n        let invoice = new Object;\r\n        invoice[\"id\"] = Helper.makeid();\r\n        invoice[\"view_order\"] = element.view_order ? parseInt(element.view_order) : null;\r\n        invoice[\"fee_code\"] = element.fee_code ? element.fee_code : \"\";\r\n        invoice[\"fee_name\"] = element.fee_name ? element.fee_name : \"\";\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        invoice[\"amount\"] = element.amount ? Helper.toNumber(element.amount) : null;\r\n        const _obj = this.select.products.filter(p => p.code === invoice[\"fee_code\"])[0];\r\n        if (!_obj && invoice[\"fee_code\"] !== '') {\r\n          const _objPush = {\r\n            code: invoice[\"fee_code\"],\r\n            name: invoice[\"fee_name\"],\r\n            mhvth: invoice[\"fee_code\"] + ': ' + invoice[\"fee_name\"],\r\n          };\r\n          this.select.products.push(_objPush);\r\n        }\r\n        this.invoice_products.insert(invoice);\r\n      }\r\n    });\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataGrid.instance.refresh();\r\n    this._tinhGiaTri();\r\n    Library.hideloading();\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (this.select.unit_codes && this.select.unit_codes.length > 0) {\r\n        const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n        if (_obj) {\r\n          return _obj.code;\r\n        } else {\r\n          let code = VStringService._convertToViKdau(unitName);\r\n          let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n          if (oDuplicate)\r\n            code = code + Helper.addtionalUnitCode();\r\n          this.select.unit_codes.push({ code: code, name: unitName });\r\n          return code;\r\n        }\r\n      } else {\r\n        this.select.unit_codes = [];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  calculateSummary(options) {\r\n    let amount_after_vat;\r\n    // Calculating \"CustomSummary1\"\r\n    if (options.name === 'amount_after_vat' && options.summaryProcess) {\r\n      if (options.summaryProcess === 'start') {\r\n        // Initializing \"totalValue\" here\r\n        if (this.formDataInInvoice !== undefined) {\r\n          options.totalValue = this.formDataInInvoice.amount_after_vat;\r\n          amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n        }\r\n      }\r\n      if (options.summaryProcess === 'calculate') {\r\n        if (this.formDataInInvoice !== undefined) {\r\n          options.totalValue = this.formDataInInvoice.amount_after_vat;\r\n          amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n        }\r\n        // Modifying \"totalValue\" here\r\n      }\r\n      if (options.summaryProcess === 'finalize') {\r\n\r\n        options.totalValue = amount_after_vat;\r\n        // Assigning the final value to \"totalValue\" here\r\n      }\r\n    }\r\n    // Calculating \"CustomSummary2\"\r\n    if (options.name === 'CustomSummary2') {\r\n      // ...\r\n      // Same \"if\" statements here\r\n    }\r\n  }\r\n\r\n  changePhiDV(row) {\r\n    this.view_orderChange();\r\n    if (row.is_money_service) {\r\n      row.commercial_discount = false;\r\n    }\r\n    if (row.is_money_service && VStringService._getValueToString(row.fee_name) == '') {\r\n      row.fee_name = 'Phí dịch vụ';\r\n      this.invoice_products.update(row.id, row);\r\n    } else if (!row.is_money_service && VStringService._getValueToString(row.fee_name) === 'Phí dịch vụ') {\r\n      row.fee_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  changeCKTM(row) {\r\n    if (row.commercial_discount) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n  changePhiHoanVe(row) {\r\n    if (row.is_refund_ticket) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'LAY_MAU_BANG_KE') {\r\n      this.layMauBangKe();\r\n    } else if (e.itemData.id === 'NAP_DU_LIEU_BANG_KE') {\r\n      this.napDuLieuTuBangKe();\r\n    }\r\n  }\r\n  onClickGuidReduce() {\r\n    this.router.navigate([]).then(result => { window.open('https://ihoadon.vn/hddt/danh-muc-hang-hoa-dich-vu-duoc-giam-thue-gtgt-theo-nghi-quyet-so-406-nq-ubtvqh15.html', '_blank'); });\r\n  }\r\n  onClickGuidNQ43() {\r\n    this.router.navigate([]).then(result => { window.open('https://ihoadon.vn/hddt/danh-muc-hang-hoa-dich-vu-duoc-giam-thue-gtgt-theo-nghi-quyet-so-406-nq-ubtvqh15.html', '_blank'); });\r\n  }\r\n\r\n  _changeNQ43(e) {\r\n    if (e.value) {\r\n      if (this.formDataInInvoice.sales_percentage == null && parseInt(this.configs.system_parameter.value_rate_percent) > 0) {\r\n        this.formDataInInvoice.sales_percentage = parseInt(this.configs.system_parameter.value_rate_percent);\r\n      }\r\n    }\r\n    else {\r\n      this.formDataInInvoice.sales_percentage = null;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">Theo dõi nhận - gửi biên lai điện tử</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\">\\r\\n      <div class=\\\"container-fluid\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-lg-7\\\">\\r\\n            <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item [label]=\\\"{text: 'Mẫu biên lai' }\\\" dataField=\\\"template\\\"  [editorOptions]=\\\"{readOnly: true}\\\">\\r\\n                </dxi-item>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n                <dxi-item dataField=\\\"receipt_date\\\" [label]=\\\"{text: 'Ngày biên lai'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item cssClass=\\\"invoice-number-create-invoice\\\" dataField=\\\"receipt_number\\\" [label]=\\\"{text: 'Số biên lai'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <!-- <dxi-item dataField=\\\"customer_code\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.customer_code}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"payer_tax_code\\\" [label]=\\\"{text: _translate.GRID.INVOICE.buyer_tax_code }\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"payer_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.buyer_name }\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"payer_phone\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.phone }\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item> -->\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item dataField=\\\"customer_name\\\" [label]=\\\"{text: 'Tên người nộp tiền'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n            </dx-form>\\r\\n          </div>\\r\\n          <div class=\\\"col-lg-5\\\">\\r\\n            <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item dataField=\\\"payment_method_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_method}\\\"  [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item editorType=\\\"dxNumberBox\\\"  dataField=\\\"total_payment\\\" [editorOptions]=\\\"{format:'#,###', disabled: true}\\\"  [label]=\\\"{text: 'Tổng tiền'}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"payer_email\\\" [label]=\\\"{text: 'Email'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n              <!-- <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n                  <dxi-item dataField=\\\"currency_code\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_code}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"currency_rate\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_rate}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                 \\r\\n               \\r\\n              </dxi-item> -->\\r\\n            </dx-form>\\r\\n          </div>\\r\\n          <div class=\\\"col-lg-12 link-send-invoice\\\">\\r\\n            <div class=\\\"pull-right\\\">\\r\\n              <a *ngIf=\\\"receipt.status == 'DA_XUAT'\\\" (click)=\\\"sendMail()\\\" href=\\\"javascript:void(0)\\\">{{'Gửi biên lai'}}</a>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <dx-data-grid\\r\\n        id=\\\"invoiceHistoryGrid\\\"\\r\\n        [dataSource]=\\\"invoice_process\\\"\\r\\n        (onEditorPreparing) = \\\"onEditorPreparing($event)\\\"\\r\\n        [showBorders]=\\\"true\\\"\\r\\n        [wordWrapEnabled]=\\\"true\\\"\\r\\n        [showRowLines]=\\\"true\\\">\\r\\n        <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n        <dxi-column cellTemplate=\\\"stt\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.view_order}}\\\" width=\\\"80\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n        <dxi-column dataField=\\\"process_time\\\" caption=\\\"{{_translate.CONTROLL.LABEL.date_made}}\\\" width=\\\"180\\\" dataType=\\\"datetime\\\" format=\\\"dd/MM/yyyy HH:mm:ss\\\" dateSerializationFormat=\\\"yyyy-MM-dd HH:mm:ss\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n        <dxi-column dataField=\\\"content\\\" cellTemplate=\\\"content\\\" caption=\\\"{{_translate.CONTROLL.LABEL.task}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n        <dxi-column dataField=\\\"user_name\\\" caption=\\\"{{_translate.CONTROLL.LABEL.person_made}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n        <div *dxTemplate=\\\"let d of 'stt'\\\">\\r\\n          <p>{{ d.rowIndex + 1 }}</p>\\r\\n        </div>\\r\\n        <div *dxTemplate=\\\"let d of 'content'\\\">\\r\\n              {{ d.data.content}}\\r\\n          </div>\\r\\n      </dx-data-grid>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back }}\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      </dx-button>\\r\\n    </div>\\r\\n  </form>\\r\\n\"","module.exports = \"::ng-deep .form-input-visibility{visibility:hidden}::ng-deep .invoice-number-create-invoice input{color:red;font-weight:bold}.link-send-invoice{margin-top:10px}.link-send-invoice a{text-decoration:underline}#invoiceHistoryGrid{margin-top:15px}\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nimport { Helper, AuthService, Library, VStringService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { SendMailComponent } from '../send-mail/send-mail.component';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { PaymentReceiptService } from '@modules/payment-receipt/shared/payment-receipt.service';\r\n\r\n@Component({\r\n  selector: 'app-send-invoices',\r\n  templateUrl: './send-invoices.component.html',\r\n  styleUrls: ['./send-invoices.component.scss']\r\n})\r\nexport class SendInvoicesComponent implements OnInit {\r\n\r\n  frmData: any = {};\r\n  receipt: any\r\n  invoice_process: any;\r\n  _translate: any;\r\n  email: any;\r\n  constructor(\r\n    private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    public bsModalSendMail: BsModalRef,\r\n    private customersService: CustomersService,\r\n    private paymentRService: PaymentReceiptService\r\n\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadTableContent();\r\n    let receipt = this.receipt;\r\n\r\n    this.frmData.template = `${receipt.template_code} / ${receipt.receipt_series}`;\r\n    this.frmData.receipt_date = moment(receipt.receipt_date).format('DD/MM/YYYY');\r\n    this.frmData.receipt_number = receipt.receipt_number;\r\n    this.frmData.customer_code = receipt.customer_code;\r\n    this.frmData.customer_name = receipt.customer_name;\r\n    this.frmData.payer_tax_code = receipt.payer_tax_code;\r\n    this.frmData.payer_name = receipt.payer_name;\r\n    this.frmData.buyer_mobile = receipt.buyer_mobile;\r\n    this.frmData.payer_phone = receipt.payer_phone;\r\n    this.frmData.currency_code = receipt.currency_code;\r\n    this.frmData.payment_method_name = receipt.payment_method_name;\r\n    this.frmData.customer_id = receipt.customer_id;\r\n    this.frmData.total_payment = receipt.total_payment;\r\n    this.email = receipt.payer_email;\r\n    this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n      if (response.status == \"success\") {\r\n        let emailInCategory = \"\";\r\n        const customer = response.data.customer;\r\n        if (customer)\r\n          emailInCategory = customer.email;\r\n        if (this.email) {\r\n          if (emailInCategory != \"\") {\r\n            let arrEmail = emailInCategory.split(';');\r\n            arrEmail.forEach(item => {\r\n              if (this.email.indexOf(item) < 0)\r\n                this.email = this.email + \";\" + item;\r\n            });\r\n          }\r\n        }\r\n        else {\r\n          this.email = emailInCategory;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  loadTableContent() {\r\n    this.invoice_process = {};\r\n    let sub = this.paymentRService.getReceiptProccess(this.receipt.id).subscribe(rs => {\r\n      const mapObj = {\r\n        T: \"; \",\r\n      };\r\n      this.invoice_process = rs.data.receipt_process;\r\n      if (this.invoice_process && this.invoice_process.length > 0) {\r\n        this.invoice_process.forEach(item => {\r\n          item.content = VStringService._getValueToString(item.content).replace(/;/g, \"; \");\r\n        });\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  sendMail() {\r\n    const initialState = {\r\n      receipt_id: this.receipt.id,\r\n      email: this.email,\r\n      customer_id: this.frmData.customer_id\r\n    };\r\n    this.bsModalSendMail = this.modalService.show(SendMailComponent, { class: 'modal-md', initialState, backdrop: 'static', keyboard: false });\r\n    this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == 'success_mail') {\r\n        this.loadTableContent();\r\n      }\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.dataField === 'content' && e.parentType == \"dataRow\") {\r\n      e.editorName = 'dxTextArea';\r\n    }\r\n  }\r\n\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.BUTTON.send}} EMAIL</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\">\\r\\n      <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n        <dxi-item dataField=\\\"email\\\" [label]=\\\"{text: 'Email'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Email {{_translate.VALIDATION.required}}\\\"></dxi-validation-rule>\\r\\n          <!-- <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.email\\\" message=\\\"Email {{_translate.VALIDATION.not_pattern}}\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n      </dx-form>\\r\\n      <div style=\\\"margin-top: 10px;\\\">\\r\\n          <a style=\\\"color: silver;text-decoration: underline;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.note1}}: </a><a style=\\\"color: silver;font-size: 90%;\\\"> {{_translate.CONTROLL.LABEL.note_email}}</a>\\r\\n        </div>\\r\\n        <div style=\\\"margin-top: 5px;\\\">\\r\\n            <a style=\\\"color: silver;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.example}}: admin@efy.com.vn;sale@efy.com.vn</a>\\r\\n          </div>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n      </dx-button>\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      </dx-button>\\r\\n    </div>\\r\\n  </form>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\n\r\nimport { pattern } from '@config/index';\r\nimport { Helper, Library, AuthService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { PaymentReceiptService } from '@modules/payment-receipt/shared/payment-receipt.service';\r\n\r\n@Component({\r\n  selector: 'app-send-mail',\r\n  templateUrl: './send-mail.component.html',\r\n  styleUrls: ['./send-mail.component.scss']\r\n})\r\nexport class SendMailComponent implements OnInit {\r\n\r\n  receipt_id: any;\r\n  frmData: any = {};\r\n  email: string;\r\n  customer_id: string;\r\n  pattern = pattern;\r\n  _translate: any;\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private authService: AuthService,\r\n    private customersService: CustomersService,\r\n    private paymentRService: PaymentReceiptService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.frmData.email = this.email;\r\n  }\r\n\r\n  onSubmit(e) {\r\n    let data = [{\r\n      id: this.receipt_id,\r\n      email: this.frmData.email\r\n    }];\r\n    Library.showloading();\r\n    let sub = this.paymentRService.sendMail(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let updateEmail = {\r\n          id: this.customer_id,\r\n          email: this.frmData.email\r\n        };\r\n        this.customersService.uploadEmailtoCustomer(updateEmail).subscribe(rsl => {\r\n          if (rsl.status == 'success') {\r\n\r\n          }\r\n        });\r\n        Library.notify(this._translate.NOTIFY.send_mail_success, 'success');\r\n        this.bsModalRef.content.successSaveItem = \"success_mail\";\r\n        this.bsModalRef.hide();\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{ 'MENU.list_invoice_waiting_for_signing' | translate }}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid \\r\\n    id=\\\"gridContainer\\\"\\r\\n    [dataSource]=\\\"invoiceList\\\"\\r\\n    [showRowLines]=\\\"true\\\"\\r\\n    [allowColumnResizing]=\\\"true\\\"\\r\\n    [columnMinWidth]=\\\"50\\\"\\r\\n    [columnResizingMode]=\\\"true\\\"\\r\\n    [columnAutoWidth]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\">\\r\\n\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template_code\\\" caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template.invoice_series\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\" [width]=\\\"90\\\" alignment=\\\"center\\\" [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\" [width]=\\\"110\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\" [width]=\\\"140\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"total_payment\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" dataType=\\\"number\\\" format=\\\"0,###.##\\\"  alignment=\\\"right\\\" ></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"statusName\\\" caption=\\\"{{ 'GRID.GENERAL.status' | translate }}\\\" [width]=\\\"130\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n        *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template.template_code }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n      <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name || 'Hóa đơn chờ ký' }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'statusName'\\\">\\r\\n      <p style=\\\"color:green;\\\" *ngIf=\\\"d.data.status =='DA_XUAT'\\\">Đã ký</p>\\r\\n      <p style=\\\"color: red;\\\" *ngIf=\\\"d.data.status !='DA_XUAT' && d.data.status !='GIU_SO'\\\">{{ d.data.status }}</p>\\r\\n    </div>\\r\\n    \\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <div style=\\\"width: 89%\\\">\\r\\n    <label class=\\\"custom-control-label\\\"\\r\\n           for=\\\"customRadio212\\\">{{reportCountERR}}</label>\\r\\n  </div>\\r\\n\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.sign}}\\\" icon=\\\"{{_translate.ICONS.pencil}}\\\" *ngIf=\\\"!daXong\\\" type=\\\"default\\\" (click)=\\\"kyHangLoat()\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\"","module.exports = \".custom-control-label{margin-top:4px;color:red;font-weight:800;font-family:Times New Roman}\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as moment from 'moment';\r\n\r\nimport { Helper, Library, SocketService, AuthService, VStringService, VPreviewInvService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\n@Component({\r\n  selector: 'app-sign-many',\r\n  templateUrl: './sign-many.component.html',\r\n  styleUrls: ['./sign-many.component.scss']\r\n})\r\nexport class SignManyComponent implements OnInit {\r\n\r\n  invoices: any;\r\n  configs: any;\r\n  invoiceList: any;\r\n  ioSignature: any;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  _translate: any;\r\n  nodeSign: any;\r\n  isExportFailed: boolean = false;\r\n  reportCountERR: any = \"\";\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  isHdGTGT: any;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private spinner: NgxSpinnerService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    if (this.infoDangKy) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n        this.isTT78 = true;\r\n    }\r\n    this.convertData();\r\n    this.connectWebsocket();\r\n  }\r\n\r\n  convertData() {\r\n    this.invoiceList.forEach(item => {\r\n      item.invoice_date = moment(item.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n      delete item.updated_at;\r\n      delete item.decpoint_is_dot;\r\n      delete item.money_decimal_format;\r\n      item.invoice_products = item.invoice_products.sort((itemA, itemB) => {\r\n        return itemA.order - itemB.order;\r\n      });\r\n    });\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          let i = this.invoiceIndex;\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content, this.invoices[i]);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.invoices[i].issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat(this.invoices[i]);\r\n          } else {\r\n            this.invoices[i].invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoices[i].invoice_files.length) {\r\n              this.xuLiApiKhiXuat(this.invoices[i]);\r\n            }\r\n          }\r\n        } else if (data.SvcName === 'efy_viewInvoice') {\r\n          this.viewInvoice(data.Data.Content, data.Data.typeView, data.Data.hinhthucxuat, data.Data.invoice_date);\r\n        }\r\n      } else {\r\n        const popUp = window.open('about:blank', 'name', 'width=200, height=100');\r\n        if (popUp == null || typeof (popUp) == 'undefined') {\r\n        }\r\n        else\r\n          popUp.close();\r\n        this.spinner.hide();\r\n        if (data.Description == \"\") {\r\n          this.showPopup = false;\r\n          this.errorImport = true;\r\n        }\r\n        else {\r\n          this.invoiceList[this.invoiceIndex].status = data.Description;\r\n          this.isExportFailed = true;\r\n          this.continuteExportInvoice(false);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  continuteExportInvoice(isSuccess) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.valueProgress += percentComplete;\r\n    if (this.invoiceIndex == this.totalInvoice - 1) {\r\n      if (!this.isExportFailed && isSuccess)\r\n        Library.notify(this._translate.NOTIFY.sign_success, 'success', 5000);\r\n      else {\r\n        let lstInvoiceERR = this.invoiceList.filter(p => p.status != \"DA_XUAT\" && p.status != \"GIU_SO\");\r\n        this.reportCountERR = \"Có \" + lstInvoiceERR.length + \" hóa đơn ký lỗi. Đề nghị kiểm tra lại!\";\r\n        Library.notify(\"Có \" + lstInvoiceERR.length + \" hóa đơn ký lỗi\", 'success', 5000);\r\n      }\r\n      this.daXong = true;\r\n      setTimeout(() => {\r\n        this.showPopup = false;\r\n      }, 300);\r\n    }\r\n    else if (this.invoiceIndex < this.totalInvoice - 1) {\r\n      this.invoiceIndex++;\r\n      this.xuatHoaDon();\r\n    }\r\n  }\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  xuLiApiKhiXuat(invoice) {\r\n    let tempTemplate = invoice.template;\r\n    delete invoice.template;\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (!this.isTT78) {\r\n      let sub = this.vatService.edit(invoice.id, invoice, true).subscribe(rs => {\r\n        invoice.template = tempTemplate;\r\n        if (rs.status == 'success') {\r\n          invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, invoice.invoice_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.invoiceList[this.invoiceIndex].status = rs.message;\r\n          this.isExportFailed = true;\r\n          this.continuteExportInvoice(false);\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      let sub = this.vatService.editTT78(invoice.id, invoice, true).subscribe(rs => {\r\n        invoice.template = tempTemplate;\r\n        if (rs.status == 'success') {\r\n          invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.invoiceList[this.invoiceIndex].status = rs.message;\r\n          this.isExportFailed = true;\r\n          this.continuteExportInvoice(false);\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string, invoice) {\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    this.subXuatHoaDon = this.vatService.xuatHoaDon({\r\n      id: invoice.id,\r\n      xml_string: xml_string,\r\n      invoice_files: invoice.invoice_files\r\n    }).subscribe(rs => {\r\n      let isSuccess = false;\r\n      this.ganXong = true;\r\n      this.tempKiFile = 0;\r\n      if (rs.status == 'success') {\r\n        this.invoiceList[this.invoiceIndex].status = 'DA_XUAT';\r\n        isSuccess = true;\r\n      } else {\r\n        this.invoiceList[this.invoiceIndex].status = rs.message;\r\n        this.isExportFailed = true;\r\n      }\r\n      this.continuteExportInvoice(isSuccess);\r\n    }, err => { }, () => {\r\n      // Library.hideloading();\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    let i = this.invoiceIndex;\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat(this.invoices[i]);\r\n    } else {\r\n      if (this.invoices[i].invoice_files.length) {\r\n        this.invoices[i].invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.invoices[i].invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n      }\r\n    }\r\n  }\r\n\r\n  kyHangLoat() {\r\n    Library.confirmVA(this._translate.CONFIRM.sign_inv, this._translate.NOTIFY.notify, () => {\r\n      this.showPopup = true;\r\n      this.invoices = JSON.parse(JSON.stringify(this.invoiceList.filter(item => item.status != 'DA_XUAT')));\r\n      this.totalInvoice = this.invoices.length;\r\n      this.invoiceIndex = 0;\r\n      this.tempKiFile = 0;\r\n      this.xuatHoaDon();\r\n    });\r\n  }\r\n\r\n  dong() {\r\n    if (this.ganXong) {\r\n      this.bsModalRef.content.successSaveItem = \"success\";\r\n    }\r\n    this.bsModalRef.hide();\r\n    if (this.isHdGTGT)\r\n      this.router.navigate(['/system/vat-invoice/']);\r\n    else\r\n      this.router.navigate(['/system/sale-invoice']);\r\n  }\r\n\r\n  viewDetailInvoice(data) {\r\n    if (data) {\r\n      const ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      }\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      const win = window.open('about:blank', 'name', 'width=200, height=100');\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      this.spinner.show();\r\n      const sub = this.vatService.xemHoaDonInvoiceImport(ids).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.xemhoadonPDF(rs);\r\n        } else {\r\n          win.close();\r\n          this.spinner.hide();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n        this.spinner.hide();\r\n      }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  viewInvoice(content, typeView, hinhthucxuat, invoice_date) {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    const pdf_file = content;\r\n    const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n    const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n    win.document.write(`\r\n      <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n    `);\r\n    win.resizeTo(screen.availWidth, screen.availHeight);\r\n    win.focus();\r\n    this.spinner.hide();\r\n  }\r\n  xemhoadonPDF(rs) {\r\n    //Xem hóa đơn từ server\r\n    if (this.configs.system_parameter.display_template_from_server) {\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      const pdf_file = rs.data.invoice.pdf_file;\r\n      const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n      const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n      win.document.write(`\r\n      <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n    `);\r\n      win.resizeTo(screen.availWidth, screen.availHeight);\r\n      win.focus();\r\n      this.spinner.hide();\r\n    }\r\n    else {\r\n      /* Xem hóa đơn từ Client */\r\n      let json_data = rs.data.invoice.json_data;\r\n      let appCode = \"REPX\";\r\n      if (rs.data.invoice.is_html_template)\r\n        appCode = \"HTML\";\r\n      this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC\");\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{lblTitle}}</h4>\\r\\n  <div>\\r\\n    <div *ngFor=\\\"let item of items | paginate: { itemsPerPage: 1, currentPage: p }; let i = index\\\">\\r\\n    </div>\\r\\n    <pagination-controls style=\\\"width: 50%;\\\" (pageChange)=\\\"getPage($event)\\\"></pagination-controls>\\r\\n  </div>\\r\\n  <div style=\\\"display: flex; align-items: center;\\\">\\r\\n    <dx-button *ngIf=\\\"isXuatHD\\\" text=\\\"Đồng ý\\\" icon=\\\"{{_translate.ICONS.save}}\\\" type=\\\"default\\\" (click)=\\\"dongy()\\\">\\r\\n    </dx-button>\\r\\n    <i class=\\\"fa fa-times\\\" style=\\\"font-size:25px; cursor: pointer;\\\" (click)=\\\"dong()\\\"></i>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <div class=\\\"body-content\\\">\\r\\n    <div *ngIf=\\\"isXuatHD\\\" class=\\\"canh-bao\\\">\\r\\n      <p style=\\\"font-weight: 600;\\\">\\r\\n        <span class=\\\"nhap-nhay\\\"></span>\\r\\n        <span style=\\\"font-size: 17px;\\\">Lưu ý: </span>\\r\\n        Đề nghị đơn vị kiểm tra thật kỹ các nội dung biên lai đã nhập trước khi xuất như: Ngày biên lai, Tên\\r\\n        loại phí, lệ phí, Tổng tiền,…để tránh xuất sai.\\r\\n      </p>\\r\\n    </div>\\r\\n    <div style=\\\"display: flex; width: 100%;\\\">\\r\\n      <iframe height=\\\"{{heightT}}\\\" id=\\\"preview-iframe\\\"></iframe>\\r\\n      <div *ngIf=\\\"isXuatHD\\\" class=\\\"thong-tin-hoa-don\\\">\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\" font-weight: 600;\\\">Ngày biên lai : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">{{ngayHD}}</p>\\r\\n        </div>\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\"font-weight: 600;\\\">Tổng tiền : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">{{total_payment}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".modal-header{display:flex;justify-content:space-between;align-items:center}.pagination{display:flex}.pagination a{color:black;float:left;padding:8px 16px;text-decoration:none}::ng-deep .body-content{height:100%}.modal-body .body-content{display:flex;justify-content:center;align-items:center;flex-direction:column}.nhap-nhay{background:red;padding:0.5px 9px;margin-right:5px;border-radius:57%;-webkit-animation:flicker 1s infinite}.ht-xuat{width:25%;padding:15px;background:#ffffff;box-shadow:rgba(0,0,0,0.35) 0px 5px 15px}@-webkit-keyframes flicker{0%{opacity:0}9%{opacity:0}10%{opacity:.5}13%{opacity:0}20%{opacity:.5}25%{opacity:1}}.example{padding:20px}input[type=button]{padding:5px 10px;margin:10px 5px;border-radius:5px;cursor:pointer;background:#ddd;border:1px solid #ccc}input[type=button]:hover{background:#ccc}.confirm{display:none}.confirm>div:first-of-type{position:fixed;width:100%;height:100%;background:rgba(0,0,0,0.5);top:0px;left:0px}.confirm>div:last-of-type{padding:10px 20px;background:white;position:absolute;width:auto;height:auto;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border-radius:5px;border:1px solid #333}.confirm>div:last-of-type div:first-of-type{min-width:150px;padding:10px}.confirm>div:last-of-type div:last-of-type{text-align:right}.canh-bao{margin-bottom:10px}#preview-iframe{width:calc(100% - 20px)}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { VStringService, SocketService, AuthService, sEnum, Library, Helper, VChanggeMoneyService, VPreviewInvService } from '@core/index';\r\ndeclare var $: any;\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { PaymentReceiptModel } from '@modules/payment-receipt/shared';\r\nimport { PaymentReceiptService } from '@modules/payment-receipt/shared/payment-receipt.service';\r\n\r\n@Component({\r\n  selector: 'app-view-invoice',\r\n  templateUrl: './view-invoice.component.html',\r\n  styleUrls: ['./view-invoice.component.scss']\r\n})\r\nexport class ViewInvoiceComponent implements OnInit {\r\n  bsModalSignRef: BsModalRef;\r\n  items: any;\r\n  key: string = 'name';\r\n  reverse: boolean = false;\r\n  objectUrl: any;\r\n  mainTest: any;\r\n  _language: string;\r\n  _translate: any;\r\n  isXuatHD: any;\r\n  ngayHD: any;\r\n  hinhthucxuat: any;\r\n  configs: any;\r\n  ioSignature: Subscription;\r\n  lblTitle: any;\r\n  isTaiHD: boolean = false;\r\n  invoices = [];\r\n  showPopup = false;\r\n  total_payment : any;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  isExportFailed: boolean = false;\r\n  toltal_payment:any;\r\n  sort(key) {\r\n    this.key = key;\r\n    this.reverse = !this.reverse;\r\n  }\r\n  p: number = 1;\r\n  widthT: any;\r\n  heightT: any;\r\n  typeAction: any;// XEM_HOA_DON;IN_CHUYEN_DOI;NAP_EXCEL\r\n  ids: any;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    public bsModal: BsModalRef,\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    public translate: TranslateService,\r\n    private authService: AuthService,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService,\r\n    private paymentRService: PaymentReceiptService\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.connectWebsocket();\r\n    this.configs = this.authService.getConfigs();\r\n    this.heightT = screen.availHeight -195;\r\n    switch (this.typeAction) {\r\n      case \"NAP_EXCEL\":\r\n        this.lblTitle = \"BẢN DỰ THẢO BIÊN LAI ĐIỆN TỬ\";\r\n        this.isTaiHD = false;\r\n        break;\r\n      case \"XEM_HOA_DON\":\r\n        this.lblTitle = \"XEM BIÊN LAI ĐIỆN TỬ\";\r\n        this.isTaiHD = true;\r\n        break;\r\n      case \"IN_CHUYEN_DOI\":\r\n        this.lblTitle = \"IN CHUYỂN ĐỔI BIÊN LAI ĐIỆN TỬ\";\r\n        this.isTaiHD = true;\r\n        break;\r\n    }\r\n    this.getPage(1, 'desc', 'created');\r\n  }\r\n  viewTransport(item) {\r\n    let id = item.id;\r\n  }\r\n\r\n  getPage(page: number, sort: string = 'desc', order: string = 'created') {\r\n    switch (this.typeAction) {\r\n      case \"NAP_EXCEL\":\r\n        this.action_napexcel(page);\r\n        break;\r\n      case \"XEM_HOA_DON\":\r\n        this.action_xemhoadon(page);\r\n        break;\r\n      case \"IN_CHUYEN_DOI\":\r\n        this.action_inchuyendoi(page);\r\n        break;\r\n    }\r\n  }\r\n  action_napexcel(page) {\r\n    this.p = page;\r\n    let oTransport: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        oTransport = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let invoicesArr = [];\r\n    invoicesArr.push(oTransport);\r\n    let sub = this.paymentRService.previewImport(invoicesArr).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.toltal_payment = rs.data.invoice.toltal_payment;\r\n          this.objectUrl = rs.data.invoice.pdf_file;\r\n          this.total_payment = rs.data.invoice.total_payment;\r\n          this.ngayHD = moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          this.total_payment = rs.data.invoice.total_payment;\r\n          let invoice_date = rs.data.invoice.invoice_date;\r\n          let json_data = rs.data.invoice.json_data;\r\n          let appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, invoice_date, this.toltal_payment);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n        this.spinner.hide();\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  action_xemhoadon(page) {\r\n    this.p = page;\r\n    let id: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        id = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let arrId = [];\r\n    arrId.push(id);\r\n    let sub = this.paymentRService.viewImport(arrId).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.objectUrl = rs.data.invoice.pdf_file;\r\n          this.ngayHD = moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          let invoice_date = rs.data.invoice.invoice_date;\r\n          let json_data = rs.data.invoice.json_data;\r\n          let appCode = \"REPX\";\r\n          if (rs.data.invoice.is_html_template)\r\n            appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, invoice_date);\r\n        }\r\n      } else {\r\n        this.spinner.hide();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  action_inchuyendoi(page) {\r\n    this.p = page;\r\n    let id: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        id = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let arrId = [];\r\n    arrId.push(id);\r\n    let sub = this.vatService.inChuyenDoiInvoiceImport(arrId,true).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.objectUrl = rs.data.invoice.pdf_file;\r\n          this.ngayHD = moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          let invoice_date = rs.data.invoice.invoice_date;\r\n          let json_data = rs.data.invoice.json_data;\r\n          let appCode = \"REPX\";\r\n          if (rs.data.invoice.is_html_template)\r\n            appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, invoice_date);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n        this.spinner.hide();\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  dong() {\r\n    // this.router.navigate(['/system/transport-invoice']);\r\n    this.bsModal.hide()\r\n  }\r\n  dongy() {\r\n    this.bsModal.content.successSaveItem = 'DONG_Y';\r\n    this.bsModal.hide();\r\n  }\r\n  /* Kết nối đến socket */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_viewInvoice') {\r\n        if (data.Status == \"success\")\r\n          this.viewInvoice(data.Data.Content, data.Data.typeView, data.Data.hinhthucxuat, data.Data.invoice_date);\r\n        else if (data.Status == \"error\") {\r\n          this.spinner.hide();\r\n          Library.notify(data.Description, 'error');\r\n        }\r\n      }\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n  }\r\n  viewInvoice(content, typeView, hinhthucxuat, invoice_date) {\r\n    this.objectUrl = content;\r\n    this.ngayHD = moment(invoice_date).format('DD/MM/YYYY');\r\n    this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n    let iframe = document.getElementById('preview-iframe');\r\n    iframe.setAttribute(\"src\", this.mainTest);\r\n    this.spinner.hide();\r\n  }\r\n  taihoadon() {\r\n    this.invoices = this.items\r\n    this.showPopup = true;\r\n    this.totalInvoice = Math.floor(this.invoices.length / 10) + 1;\r\n    this.invoiceIndex = 0;\r\n    this.tempKiFile = 0;\r\n    this.xulyTaiFilePdf();\r\n  }\r\n  xulyTaiFilePdf() {\r\n    let ids = this.iterator(this.invoices, 10, this.invoiceIndex);\r\n    let is_convert = true;\r\n    if (this.typeAction == \"XEM_HOA_DON\")\r\n      is_convert = false\r\n    let sub = this.vatService.xuatHDPdf(ids, is_convert).subscribe(rs => {\r\n      let isSuccess = false;\r\n      this.ganXong = true;\r\n      this.tempKiFile = 0;\r\n      if (rs.status == 'success') {\r\n        Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n        isSuccess = true;\r\n      } else {\r\n        this.isExportFailed = true;\r\n      }\r\n      this.continuteExportInvoice(isSuccess);\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  continuteExportInvoice(isSuccess) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.valueProgress += percentComplete;\r\n    if (this.invoiceIndex == this.totalInvoice - 1) {\r\n      if (!this.isExportFailed && isSuccess)\r\n        Library.notify(\"Tải hóa đơn thành công\", 'success', 5000);\r\n      else {\r\n        // Danh sách lỗi\r\n      }\r\n      this.daXong = true;\r\n      setTimeout(() => {\r\n        this.showPopup = false;\r\n      }, 300);\r\n    }\r\n    else if (this.invoiceIndex < this.totalInvoice - 1) {\r\n      this.invoiceIndex++;\r\n      this.xulyTaiFilePdf();\r\n    }\r\n  }\r\n  iterator(a, take, skip) {\r\n    let current = skip * 10;\r\n    let l = a.length;\r\n    let end = current + take;\r\n    let part = a.slice(current, end);\r\n    current = end < l ? end : 0;\r\n    return part;\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình tải hóa đơn sẽ dừng lại nếu bạn đóng cửa sổ này?\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\n// library\r\nimport {devextremeModule} from '@core/index';\r\n// general\r\nimport {SharedModule, VatSharedModule, SomeModule,NotifySuccessComponent} from '@shared/index';\r\nimport {IndexComponent} from './components/index/index.component';\r\nimport {InvoiceComponent} from './components/invoice/invoice.component';\r\nimport {KeepNumberComponent} from './components/keep-number/keep-number.component';\r\nimport {SendInvoicesComponent} from './components/send-invoices/send-invoices.component';\r\nimport {SendMailComponent} from './components/send-mail/send-mail.component';\r\nimport {ProductGripComponent} from './components/product-grip/product-grip.component';\r\nimport {FormInvoiceComponent} from './components/form-invoice/form-invoice.component';\r\nimport {ImportInvoicesComponent} from './components/import-invoices/import-invoices.component';\r\nimport {SignManyComponent} from './components/sign-many/sign-many.component';\r\nimport {vTranslateModule} from '@core/module/v-translate.module';\r\nimport {ViewAttachFileComponent} from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport {ImportInvoicesDtComponent} from './components/import-invoices-dt/import-invoices-dt.component';\r\nimport {TagInputModule} from 'ngx-chips';\r\nimport {DxLookupModule,DxTooltipModule,DxPopoverModule  } from 'devextreme-angular';\r\nimport { ChooseHdckComponent } from './components/choose-hdck/choose-hdck.component';\r\nimport { NotifyReduceTaxComponent, SendListEmailComponent, SendDataForTaxComponent } from '@shared/index';\r\nimport { ViewInvoiceComponent } from './components/view-invoice/view-invoice.component';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { routing } from './payment-receipt.routing';\r\nimport { PaymentReceiptService } from './shared/payment-receipt.service';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { PaymentReceiptResolver, ShowPaymentReceiptResolver } from './shared';\r\nimport { ReceiptSearchComponent } from '@shared/components/receipt-search-advanced/search-advanced.component';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    routing,\r\n    SharedModule,\r\n    VatSharedModule,\r\n    SomeModule,\r\n    devextremeModule,\r\n    vTranslateModule,\r\n    DxLookupModule,\r\n    TagInputModule,\r\n    DxTooltipModule,\r\n    DxPopoverModule,\r\n    NgxPaginationModule,\r\n    NgxSpinnerModule\r\n  ],\r\n  exports: [\r\n    IndexComponent,\r\n    InvoiceComponent,\r\n    KeepNumberComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    ProductGripComponent,\r\n    FormInvoiceComponent,\r\n    ImportInvoicesComponent,\r\n    SignManyComponent,\r\n  ],\r\n  declarations: [\r\n    IndexComponent,\r\n    InvoiceComponent,\r\n    KeepNumberComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    ProductGripComponent,\r\n    FormInvoiceComponent,\r\n    ImportInvoicesComponent,\r\n    SignManyComponent,\r\n    ImportInvoicesDtComponent,\r\n    ChooseHdckComponent,\r\n    ViewInvoiceComponent,\r\n  ],\r\n  entryComponents: [\r\n    KeepNumberComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    ImportInvoicesComponent,\r\n    ImportInvoicesDtComponent,\r\n    SignManyComponent,\r\n    ViewAttachFileComponent,\r\n    NotifySuccessComponent,\r\n    ChooseHdckComponent,\r\n    NotifyReduceTaxComponent,\r\n    SendDataForTaxComponent,\r\n    SendListEmailComponent,\r\n    ViewInvoiceComponent,\r\n    ViewInvoiceMultipageComponent,\r\n    ViewInvoiceMultipageComponent,\r\n    SignatureOffComponent,\r\n    ReceiptSearchComponent,\r\n    PreviewInvoiceComponent\r\n  ],\r\n  providers: [\r\n    PaymentReceiptService,\r\n    VatService,\r\n    PaymentReceiptResolver,\r\n    ShowPaymentReceiptResolver,\r\n    ViewInvoiceService,\r\n    MyBsModalService\r\n  ]\r\n})\r\nexport class PaymentReceiptModule {\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {Routes, RouterModule} from '@angular/router';\r\n\r\nimport {IndexComponent} from './components/index/index.component';\r\nimport {InvoiceComponent} from './components/invoice/invoice.component';\r\n\r\n// import { CreateInvoiceGuard } from '@shared/index';\r\nimport {PaymentReceiptResolver, ShowPaymentReceiptResolver} from './shared';\r\nimport {VatDeactivateGuard} from '@modules/vat/deactivate/vat-deactivate.guard';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: IndexComponent\r\n  },\r\n  {\r\n    path: 'create',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: {init: PaymentReceiptResolver},\r\n    data: {brec: 'lap_bien_lai'}\r\n  },\r\n  {\r\n    path: ':receiptId',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: {init: ShowPaymentReceiptResolver},\r\n    data: {brec: 'chi_tiet_bien_lai'}\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class routing {\r\n}\r\n","\r\nexport * from './payment-receipt.model';\r\nexport * from './payment-receipt.resolver';\r\nexport * from './show-payment-receipt.resolver';","import * as moment from \"moment\";\r\n// import { Guid } from \"guid-typescript\";\r\nimport { Helper } from \"@core/helper/Helper\";\r\nimport { VStringService } from \"@core/index\";\r\n\r\nexport class PaymentReceiptModel {\r\n  constructor(adjustment_type) {\r\n    this.adjustment_type = adjustment_type;\r\n  }\r\n\r\n  id: string = \"\";\r\n  template_id: string = \"\"; //id mẫu biên lai\r\n  template_code: string = \"\"; /* Mẫu số biên lai */\r\n  template_type: string = \"\";\r\n  status: string = \"\";\r\n  receipt_date: string = \"\";\r\n  receipt_type: number = null;\r\n  receipt_series: string = \"\"; /* Ký hiệu hóa đơn */\r\n  receipt_number: number = null;\r\n  payment_method_name: string = \"\";\r\n  payment_method_code: string = \"\";\r\n  fee_name: string = \"\";\r\n  total_payment: number = null;\r\n  total_payment_in_word: string = \"\";\r\n  payer_name: string = \"\"; //tên người thanh toán\r\n  payer_address: string = \"\"; //địa chỉ người thanh toán\r\n  payer_email: string = \"\";// email người thanh toán\r\n  payer_phone: string = \"\"; // số điện thoái người thanh toán\r\n  customer_code: string = \"\"; // mã khách hàng\r\n  customer_name: string = \"\"; // tên khách hàng\r\n  currency_code: string = \"\"; // mã loại tiền\r\n  currency_rate: number = null; // tỷ giá\r\n  destroy_date: string = null; // ngày hủy biên lai\r\n  destroy_reason: string = null; // lý do hủy biên lai\r\n  display_currency = null;\r\n  price: number = null;\r\n  quantity: number = null;\r\n  fee_code: string = null;\r\n  decimal_places_json = null;\r\n  issuer_name: string = null; // Tên nhà cung cấp chữ ký số\r\n  adjustment_type: number; // loại điều chỉnh\r\n  payer_tax_code: string = null;\r\n  verify_code: string = null;\r\n  number_of_vouchers: string = null;\r\n  customer_id: string = null;\r\n\r\n  receipt_fees = [\r\n    {\r\n      id: Helper.makeid(),\r\n      fee_name: \"\",\r\n      fee_code: \"\",\r\n      unit_code: \"\",\r\n      unit_name: \"\",\r\n      quantity: null,\r\n      price: null,\r\n      amount: null,\r\n      order: null,\r\n      view_order: null,\r\n      amount_after_vat: null\r\n    },\r\n  ];\r\n\r\n  receipt_options = [];\r\n  fillFormData(data) {\r\n    this.id = data.id;\r\n    this.template_id = data.template_id;\r\n    this.template_code = data.template_code;\r\n    this.status = data.status;\r\n    this.receipt_date = data.receipt_date;\r\n    this.receipt_type = data.receipt_type;\r\n    this.receipt_series = data.receipt_series;\r\n    this.receipt_number = data.receipt_number;\r\n    this.payment_method_name = data.payment_method_name;\r\n    this.payment_method_code = data.payment_method_code;\r\n    this.fee_name = data.fee_name;\r\n    this.total_payment = data.total_payment;\r\n    this.total_payment_in_word = data.total_payment_in_word;\r\n    this.payer_name = data.payer_name;\r\n    this.payer_address = data.payer_address;\r\n    this.payer_email = data.payer_email;\r\n    this.payer_phone = data.payer_phone;\r\n    this.customer_code = data.customer_code;\r\n    this.customer_name = data.customer_name;\r\n    this.currency_code = data.currency_code;\r\n    this.currency_rate = data.currency_rate;\r\n    this.destroy_date = data.destroy_date;\r\n    this.destroy_reason = data.destroy_reason;\r\n    this.price = data.price;\r\n    this.quantity = data.quantity;\r\n    this.fee_code = data.fee_code;\r\n    this.decimal_places_json = data.decimal_places_json;\r\n    this.issuer_name = data.issuer_name;\r\n    this.adjustment_type = data.adjustment_type;\r\n    this.payer_tax_code = data.payer_tax_code;\r\n    this.verify_code = data.verify_code;\r\n    this.number_of_vouchers = data.number_of_vouchers;\r\n    this.customer_id = data.customer_id;\r\n    this.receipt_options = data.receipt_options;\r\n  }\r\n\r\n  fillFormDieuChinh(data) {\r\n    this.currency_code = data.currency_code || \"VND\";\r\n    this.currency_rate = data.currency_rate || null;\r\n    this.customer_name = data.customer_name;\r\n  }\r\n\r\n  fillFormThayThe(data) {\r\n    this.currency_code = data.currency_code || \"VND\";\r\n    this.currency_rate = data.currency_rate || null;\r\n    this.customer_name = data.customer_name;\r\n  }\r\n\r\n  invoice_products_data() {\r\n    let arr = [];\r\n    for (let i = 0; i < 5; i++) {\r\n      arr.push({\r\n        id: Helper.makeid(),\r\n        order: i + 1,\r\n        view_order: i + 1,\r\n        fee_code: \"\",\r\n        fee_name: \"\",\r\n        unit_code: \"\",\r\n        unit_name: \"\",\r\n        quantity: null,\r\n        price: null,\r\n        amount: null,\r\n        amount_after_vat: null\r\n      });\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  setInvoice_products_data(data) {\r\n    let arr = [];\r\n    data.forEach((item) => {\r\n      arr.push({\r\n        id: Helper.makeid(),\r\n        order: item.order, //index\r\n        view_order: item.view_order,\r\n        fee_code: item.fee_code,\r\n        fee_name: item.fee_name,\r\n        unit_code: item.unit_code !== null ? item.unit_code : null,\r\n        unit_name: item.unit_name,\r\n        quantity: item.quantity !== null ? parseFloat(item.quantity) : null,\r\n        price: item.price !== null ? parseFloat(item.price) : null,\r\n        amount: item.amount !== null ? parseFloat(item.amount) : null,\r\n        amount_after_vat: item.amount_after_vat !== null ? parseFloat(item.amount_after_vat) : null,\r\n      });\r\n    });\r\n\r\n    arr = arr.sort((itemA, itemB) => {\r\n      return itemA.order - itemB.order;\r\n    });\r\n\r\n    let index = arr.length ? parseInt(arr.slice(-1)[0][\"order\"]) : 0;\r\n\r\n    for (let i = 0; i < 5; i++) {\r\n      arr.push({\r\n        id: Helper.makeid(),\r\n        order: index + 1,\r\n        view_order: index + 1,\r\n        fee_code: \"\",\r\n        fee_name: \"\",\r\n        unit_code: \"\",\r\n        unit_name: \"\",\r\n        quantity: null,\r\n        price: null,\r\n        amount: null,\r\n        amount_after_vat: null\r\n      });\r\n      index++;\r\n    }\r\n\r\n    return arr;\r\n  }\r\n\r\n  add_receipt_fee_data(view_order, order) {\r\n    return {\r\n      id: Helper.makeid(),\r\n      order: order,\r\n      fee_code: \"\",\r\n      fee_name: \"\",\r\n      unit_code: \"\",\r\n      unit_name: \"\",\r\n      quantity: null,\r\n      price: null,\r\n      amount: null,\r\n      view_order: view_order,\r\n      amount_after_vat: null\r\n    };\r\n  }\r\n\r\n  tempImportRow(countRow, isPepsi = false) {\r\n    let arr = [];\r\n    for (let i = 0; i < countRow; i++) {\r\n      arr.push({\r\n        number_of_vouchers: \"\", // số phiếu chứng từ\r\n        adjustment_form: \"\" /* Phương thức điều chỉnh */,\r\n        payer_tax_code: \"\", //Mã số thuế\r\n        total_payment: null,\r\n        template_code: \"\",\r\n        receipt_series: \"\",\r\n        payer_name: \"\", //Tên người mua\r\n        customer_name: \"\", //Tên đơn vị (Tên khách hàng)\r\n        payer_address: \"\", //Địa chỉ\r\n        payer_phone: \"\", //Điện thoại liên hệ\r\n        payer_email: \"\", //Email\r\n        payment_method_code: \"\", //Hình thức thanh toán\r\n        fee_code: \"\",\r\n        fee_name: \"\",\r\n        unit_code: \"\",\r\n        number_code: \"\",\r\n        unit_name: \"\",\r\n        quantity: null,\r\n        price: null,\r\n        amount: null,\r\n        amount_after_vat: null,\r\n        id: null,\r\n        order: i + 1,\r\n        view_order: i + 1,\r\n        dataType: \"KHACH_HANG\",\r\n        statusData: \"INVALID\",\r\n        creat_from: \"model\",\r\n        receipt_options: null,\r\n      });\r\n    }\r\n    return arr;\r\n  }\r\n  addImportRow(order, view_order) {\r\n    let arr = {\r\n      number_of_vouchers: \"\", // số phiếu chứng từ\r\n        adjustment_form: \"\" /* Phương thức điều chỉnh */,\r\n        payer_tax_code: \"\", //Mã số thuế\r\n        total_payment: null,\r\n        template_code: \"\",\r\n        receipt_series: \"\",\r\n        payer_name: \"\", //Tên người mua\r\n        customer_name: \"\", //Tên đơn vị (Tên khách hàng)\r\n        payer_address: \"\", //Địa chỉ\r\n        payer_phone: \"\", //Điện thoại liên hệ\r\n        payer_email: \"\", //Email\r\n        payment_method_code: \"\", //Hình thức thanh toán\r\n        fee_code: \"\",\r\n        fee_name: \"\",\r\n        unit_code: \"\",\r\n        number_code: \"\",\r\n        unit_name: \"\",\r\n        quantity: null,\r\n        price: null,\r\n        amount: null,\r\n        amount_after_vat: null,\r\n        id: null,\r\n        order: order,\r\n        view_order: view_order,\r\n        dataType: \"KHACH_HANG\",\r\n        statusData: \"INVALID\",\r\n        creat_from: \"model\",\r\n        receipt_options: null,\r\n    };\r\n    return arr;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map, catchError } from 'rxjs/operators';\r\nimport { ListsService } from '@modules/lists/shared';\r\n\r\nimport { Library, Helper, sEnum, AuthService } from '@core/index';\r\nimport { forkJoin } from 'rxjs';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { PaymentReceiptService } from './payment-receipt.service';\r\n@Injectable()\r\nexport class PaymentReceiptResolver implements Resolve<any[]> {\r\n  constructor(\r\n    private router: Router,\r\n    private listsService: ListsService,\r\n    private authService: AuthService,\r\n    private paymentRService: PaymentReceiptService\r\n  ) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    Library.showloading();\r\n    let loaiHoaDon = route.data.type;\r\n    let _countDm = 0;\r\n    let dataJoin = [];\r\n    let dataDM: any;\r\n    /**\r\n     * Thiếu bên học sinh sinh viên, rà soát lại các hàm liên quan\r\n     */\r\n    let arr = [\r\n      {\r\n        \"code\": \"DM_LOAI_TIEN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_HINH_THUC_THANH_TOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DON_VI_TINH\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TY_LE_VAT\",\r\n        \"order\": 0\r\n      },\r\n    ];\r\n    dataDM = this.listsService.getDMBy(arr);\r\n    if (dataDM.length > 0) {\r\n      dataDM.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    _countDm = dataDM.length;\r\n    let dataRecord = this.paymentRService.getPaymentReceiptResolver(loaiHoaDon);\r\n    if (dataRecord.length > 0) {\r\n      dataRecord.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    let dataForkJoin = forkJoin(dataJoin);\r\n    return dataForkJoin.pipe(\r\n      take(1),\r\n      map(rs => {\r\n        Library.hideloading();\r\n        let status = sEnum.statusApi.success;\r\n        let isEdit = false;\r\n        for (let index = 0; index < rs.length; index++) {\r\n          if (rs[index].status != sEnum.statusApi.success) {\r\n            Library.notify(rs[index].message, \"error\");\r\n            this.router.navigate(['/system/payment-receipt']);\r\n            status = sEnum.statusApi.error;\r\n            break;\r\n          }\r\n        }\r\n        if (status == sEnum.statusApi.success) {\r\n          if (dataDM.length > 0) {\r\n            let _data = [];\r\n            rs.forEach((element, i) => {\r\n              if (i < dataDM.length) {\r\n                _data.push(element);\r\n              }\r\n            });\r\n            this.authService.setDMLocal(_data);\r\n          }\r\n          let templates = Helper.convertTemplatesToReceiptResolver(rs[dataJoin.length - 1]);\r\n          return [\r\n            rs[_countDm].data.products,\r\n            templates,\r\n            isEdit,\r\n          ];\r\n        }\r\n        else\r\n          return null;\r\n      })\r\n    );\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map } from 'rxjs/operators';\r\nimport { ListsService } from '@modules/lists/shared';\r\n\r\nimport { Library, Helper, sEnum, AuthService } from '@core/index';\r\nimport { forkJoin } from 'rxjs';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { PaymentReceiptService } from './payment-receipt.service';\r\n\r\n@Injectable()\r\nexport class ShowPaymentReceiptResolver implements Resolve<any[]> {\r\n  constructor(\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    private listsService: ListsService,\r\n    private authService: AuthService,\r\n    private paymentRService: PaymentReceiptService\r\n  ) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    let invoice_id = route.paramMap.get('receiptId');\r\n    Library.showloading();\r\n    let loaiHoaDon = route.data.type;\r\n    let _countDm = 0;\r\n    let dataJoin = [];\r\n    let dataDM: any;\r\n    /**\r\n     * Thiếu bên học sinh sinh viên, rà soát lại các hàm liên quan\r\n     */\r\n    let arr = [\r\n      {\r\n        \"code\": \"DM_LOAI_TIEN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_HINH_THUC_THANH_TOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DON_VI_TINH\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TY_LE_VAT\",\r\n        \"order\": 0\r\n      },\r\n    ];\r\n    dataDM = this.listsService.getDMBy(arr);\r\n    if (dataDM.length > 0) {\r\n      dataDM.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    _countDm = dataDM.length;\r\n    let dataRecord: any;\r\n    dataRecord = this.paymentRService.showPaymentReceiptResolver(invoice_id, loaiHoaDon);\r\n    if (dataRecord.length > 0) {\r\n      dataRecord.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    let dataForkJoin = forkJoin(dataJoin);\r\n    return dataForkJoin.pipe(\r\n      take(1),\r\n      map(rs => {\r\n        Library.hideloading();\r\n        let isEdit = true;\r\n        let status = sEnum.statusApi.success;\r\n        for (let index = 0; index < rs.length; index++) {\r\n          if (rs[index].status != sEnum.statusApi.success) {\r\n            Library.notify(rs[index].message, \"error\");\r\n            this.router.navigate(['/system/payment-receipt']);\r\n            status = sEnum.statusApi.error;\r\n            break;\r\n          }\r\n        }\r\n        if (status == sEnum.statusApi.success) {\r\n          if (dataDM.length > 0) {\r\n            let _data = [];\r\n            rs.forEach((element, i) => {\r\n              if (i < dataDM.length) {\r\n                _data.push(element);\r\n              }\r\n            });\r\n            this.authService.setDMLocal(_data);\r\n          }\r\n          let templates = Helper.convertTemplatesToReceiptResolver(rs[dataJoin.length - 1]);\r\n          return [\r\n            rs[_countDm].data.products,\r\n            rs[dataJoin.length - 2].data.receipt,\r\n            isEdit,\r\n            templates,\r\n          ];\r\n        }\r\n        else\r\n          return null;\r\n      })\r\n    );\r\n  }\r\n}","import {Injectable} from '@angular/core';\r\nimport {CanDeactivate} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\n\r\nexport interface CanComponentDeactivate {\r\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VatDeactivateGuard implements CanDeactivate<CanComponentDeactivate> {\r\n\r\n  canDeactivate(component: CanComponentDeactivate) {\r\n    return component.canDeactivate && component.canDeactivate();\r\n  }\r\n}\r\n"],"sourceRoot":""}