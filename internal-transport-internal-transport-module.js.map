{"version":3,"sources":["webpack:///./node_modules/devextreme/data/odata/mixins.js","webpack:///./node_modules/devextreme/data/odata/query_adapter.js","webpack:///./node_modules/devextreme/data/odata/store.js","webpack:///./node_modules/devextreme/data/odata/utils.js","webpack:///./node_modules/devextreme/data/proxy_url_formatter.js","webpack:///./src/app/core/library/invoice/my-bsmodel.service.ts","webpack:///./src/app/modules/internal-transport/components/form-invoice/form-invoice.component.html","webpack:///./src/app/modules/internal-transport/components/form-invoice/form-invoice.component.scss","webpack:///./src/app/modules/internal-transport/components/form-invoice/form-invoice.component.ts","webpack:///./src/app/modules/internal-transport/components/import-invoices-from-excel/import-invoices-from-excel.component.html","webpack:///./src/app/modules/internal-transport/components/import-invoices-from-excel/import-invoices-from-excel.component.scss","webpack:///./src/app/modules/internal-transport/components/import-invoices-from-excel/import-invoices-from-excel.component.ts","webpack:///./src/app/modules/internal-transport/components/index/index.component.html","webpack:///./src/app/modules/internal-transport/components/index/index.component.scss","webpack:///./src/app/modules/internal-transport/components/index/index.component.ts","webpack:///./src/app/modules/internal-transport/components/invoice/invoice.component.html","webpack:///./src/app/modules/internal-transport/components/invoice/invoice.component.scss","webpack:///./src/app/modules/internal-transport/components/invoice/invoice.component.ts","webpack:///./src/app/modules/internal-transport/components/product-grip/product-grip.component.html","webpack:///./src/app/modules/internal-transport/components/product-grip/product-grip.component.scss","webpack:///./src/app/modules/internal-transport/components/product-grip/product-grip.component.ts","webpack:///./src/app/modules/internal-transport/components/send-invoices/send-invoices.component.html","webpack:///./src/app/modules/internal-transport/components/send-invoices/send-invoices.component.scss","webpack:///./src/app/modules/internal-transport/components/send-invoices/send-invoices.component.ts","webpack:///./src/app/modules/internal-transport/components/send-list-email/send-list-email.component.html","webpack:///./src/app/modules/internal-transport/components/send-list-email/send-list-email.component.scss","webpack:///./src/app/modules/internal-transport/components/send-list-email/send-list-email.component.ts","webpack:///./src/app/modules/internal-transport/components/send-mail/send-mail.component.html","webpack:///./src/app/modules/internal-transport/components/send-mail/send-mail.component.scss","webpack:///./src/app/modules/internal-transport/components/send-mail/send-mail.component.ts","webpack:///./src/app/modules/internal-transport/components/send-report-delivery/send-report-delivery.component.html","webpack:///./src/app/modules/internal-transport/components/send-report-delivery/send-report-delivery.component.scss","webpack:///./src/app/modules/internal-transport/components/send-report-delivery/send-report-delivery.component.ts","webpack:///./src/app/modules/internal-transport/components/sign-many/sign-many.component.html","webpack:///./src/app/modules/internal-transport/components/sign-many/sign-many.component.scss","webpack:///./src/app/modules/internal-transport/components/sign-many/sign-many.component.ts","webpack:///./src/app/modules/internal-transport/components/view-delivery/view-delivery.component.html","webpack:///./src/app/modules/internal-transport/components/view-delivery/view-delivery.component.scss","webpack:///./src/app/modules/internal-transport/components/view-delivery/view-delivery.component.ts","webpack:///./src/app/modules/internal-transport/components/view-invoice/view-invoice.component.html","webpack:///./src/app/modules/internal-transport/components/view-invoice/view-invoice.component.scss","webpack:///./src/app/modules/internal-transport/components/view-invoice/view-invoice.component.ts","webpack:///./src/app/modules/internal-transport/internal-transport.module.ts","webpack:///./src/app/modules/internal-transport/internal-transport.routing.ts","webpack:///./src/app/modules/vat/deactivate/vat-deactivate.guard.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACb,kBAAkB,mBAAO,CAAC,+EAAyB;AACnD,oBAAoB,mBAAO,CAAC,mFAA2B;AACvD,iBAAiB,mBAAO,CAAC,8DAAS;AAClC,mBAAO,CAAC,8EAAiB;AACzB;AACA;AACA,gCAAgC,EAAE,EAAE,EAAE,yCAAyC;AAC/E,oCAAoC,EAAE,EAAE,EAAE;AAC1C,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACb,gBAAgB,mBAAO,CAAC,2EAAuB;AAC/C,oBAAoB,mBAAO,CAAC,mFAA2B;AACvD,aAAa,mBAAO,CAAC,mEAAmB;AACxC,aAAa,mBAAO,CAAC,+EAAyB;AAC9C,oBAAoB,mBAAO,CAAC,2EAAmB;AAC/C,iBAAiB,mBAAO,CAAC,8DAAS;AAClC;AACA,aAAa,mBAAO,CAAC,2DAAW;AAChC,gBAAgB,mBAAO,CAAC,yDAAU;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,KAAK;AACL,gCAAgC;AAChC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACb,gBAAgB,mBAAO,CAAC,2EAAuB;AAC/C,aAAa,mBAAO,CAAC,mEAAmB;AACxC,iBAAiB,mBAAO,CAAC,8DAAS;AAClC,wBAAwB,mBAAO,CAAC,qFAAwB;AACxD,aAAa,mBAAO,CAAC,2DAAW;AAChC,YAAY,mBAAO,CAAC,yDAAU;AAC9B,YAAY,mBAAO,CAAC,2EAAmB;AACvC,aAAa,mBAAO,CAAC,gEAAU;AAC/B,oBAAoB,mBAAO,CAAC,mFAA2B;AACvD;AACA;AACA,mBAAO,CAAC,8EAAiB;AACzB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;;;;;;;;;;;;ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mBAAO,CAAC,iEAAkB;AACtC,aAAa,mBAAO,CAAC,+EAAyB;AAC9C,gBAAgB,mBAAO,CAAC,2EAAuB;AAC/C,oBAAoB,mBAAO,CAAC,mFAA2B;AACvD,WAAW,mBAAO,CAAC,mFAA2B;AAC9C,WAAW,mBAAO,CAAC,2EAAuB;AAC1C,YAAY,mBAAO,CAAC,+DAAiB;AACrC;AACA;AACA,WAAW,mBAAO,CAAC,+EAAyB;AAC5C,eAAe,mBAAO,CAAC,mFAA2B;AAClD,aAAa,mBAAO,CAAC,2DAAW;AAChC,gBAAgB,mBAAO,CAAC,yDAAU;AAClC,uBAAuB,IAAI,cAAc,EAAE,eAAe,EAAE,eAAe,EAAE,eAAe,EAAE,eAAe,GAAG,GAAG,IAAI;AACvH;AACA,8BAA8B,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,gBAAgB,EAAE,GAAG,EAAE,QAAQ,EAAE;AAC/F,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,EAAE,MAAM,EAAE,MAAM,EAAE;AACtC,oBAAoB,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,IAAI;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,mBAAmB;AACnB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"internal-transport-internal-transport-module.js","sourcesContent":["/**\r\n * DevExtreme (data/odata/mixins.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar stringUtils = require(\"../../core/utils/string\");\r\nvar iteratorUtils = require(\"../../core/utils/iterator\");\r\nvar odataUtils = require(\"./utils\");\r\nrequire(\"./query_adapter\");\r\nvar DEFAULT_PROTOCOL_VERSION = 2;\r\nvar formatFunctionInvocationUrl = function(baseUrl, args) {\r\n    return stringUtils.format(\"{0}({1})\", baseUrl, iteratorUtils.map(args || {}, function(value, key) {\r\n        return stringUtils.format(\"{0}={1}\", key, value)\r\n    }).join(\",\"))\r\n};\r\nvar escapeServiceOperationParams = function(params, version) {\r\n    if (!params) {\r\n        return params\r\n    }\r\n    var result = {};\r\n    iteratorUtils.each(params, function(k, v) {\r\n        result[k] = odataUtils.serializeValue(v, version)\r\n    });\r\n    return result\r\n};\r\nvar SharedMethods = {\r\n    _extractServiceOptions: function(options) {\r\n        options = options || {};\r\n        this._url = String(options.url).replace(/\\/+$/, \"\");\r\n        this._beforeSend = options.beforeSend;\r\n        this._jsonp = options.jsonp;\r\n        this._version = options.version || DEFAULT_PROTOCOL_VERSION;\r\n        this._withCredentials = options.withCredentials;\r\n        this._deserializeDates = options.deserializeDates;\r\n        this._filterToLower = options.filterToLower\r\n    },\r\n    _sendRequest: function(url, method, params, payload) {\r\n        return odataUtils.sendRequest(this.version(), {\r\n            url: url,\r\n            method: method,\r\n            params: params || {},\r\n            payload: payload\r\n        }, {\r\n            beforeSend: this._beforeSend,\r\n            jsonp: this._jsonp,\r\n            withCredentials: this._withCredentials,\r\n            deserializeDates: this._deserializeDates\r\n        })\r\n    },\r\n    version: function() {\r\n        return this._version\r\n    }\r\n};\r\nexports.SharedMethods = SharedMethods;\r\nexports.escapeServiceOperationParams = escapeServiceOperationParams;\r\nexports.formatFunctionInvocationUrl = formatFunctionInvocationUrl;\r\n","/**\r\n * DevExtreme (data/odata/query_adapter.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar iteratorUtils = require(\"../../core/utils/iterator\");\r\nvar config = require(\"../../core/config\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar queryAdapters = require(\"../query_adapters\");\r\nvar odataUtils = require(\"./utils\");\r\nvar serializePropName = odataUtils.serializePropName;\r\nvar errors = require(\"../errors\").errors;\r\nvar dataUtils = require(\"../utils\");\r\nvar isFunction = typeUtils.isFunction;\r\nvar DEFAULT_PROTOCOL_VERSION = 2;\r\nvar STRING_FUNCTIONS = [\"contains\", \"notcontains\", \"startswith\", \"endswith\"];\r\nvar compileCriteria = function() {\r\n    var protocolVersion;\r\n    var forceLowerCase;\r\n    var fieldTypes;\r\n    var createBinaryOperationFormatter = function(op) {\r\n        return function(prop, val) {\r\n            return prop + \" \" + op + \" \" + val\r\n        }\r\n    };\r\n    var createStringFuncFormatter = function(op, reverse) {\r\n        return function(prop, val) {\r\n            var bag = [op, \"(\"];\r\n            if (forceLowerCase) {\r\n                prop = prop.indexOf(\"tolower(\") === -1 ? \"tolower(\" + prop + \")\" : prop;\r\n                val = val.toLowerCase()\r\n            }\r\n            if (reverse) {\r\n                bag.push(val, \",\", prop)\r\n            } else {\r\n                bag.push(prop, \",\", val)\r\n            }\r\n            bag.push(\")\");\r\n            return bag.join(\"\")\r\n        }\r\n    };\r\n    var isStringFunction = function(name) {\r\n        return STRING_FUNCTIONS.some(function(funcName) {\r\n            return funcName === name\r\n        })\r\n    };\r\n    var formatters = {\r\n        \"=\": createBinaryOperationFormatter(\"eq\"),\r\n        \"<>\": createBinaryOperationFormatter(\"ne\"),\r\n        \">\": createBinaryOperationFormatter(\"gt\"),\r\n        \">=\": createBinaryOperationFormatter(\"ge\"),\r\n        \"<\": createBinaryOperationFormatter(\"lt\"),\r\n        \"<=\": createBinaryOperationFormatter(\"le\"),\r\n        startswith: createStringFuncFormatter(\"startswith\"),\r\n        endswith: createStringFuncFormatter(\"endswith\")\r\n    };\r\n    var formattersV2 = extend({}, formatters, {\r\n        contains: createStringFuncFormatter(\"substringof\", true),\r\n        notcontains: createStringFuncFormatter(\"not substringof\", true)\r\n    });\r\n    var formattersV4 = extend({}, formatters, {\r\n        contains: createStringFuncFormatter(\"contains\"),\r\n        notcontains: createStringFuncFormatter(\"not contains\")\r\n    });\r\n    var compileBinary = function(criteria) {\r\n        criteria = dataUtils.normalizeBinaryCriterion(criteria);\r\n        var op = criteria[1];\r\n        var fieldName = criteria[0];\r\n        var fieldType = fieldTypes && fieldTypes[fieldName];\r\n        if (fieldType && isStringFunction(op) && \"String\" !== fieldType) {\r\n            throw new errors.Error(\"E4024\", op, fieldName, fieldType)\r\n        }\r\n        var formatters = 4 === protocolVersion ? formattersV4 : formattersV2;\r\n        var formatter = formatters[op.toLowerCase()];\r\n        if (!formatter) {\r\n            throw errors.Error(\"E4003\", op)\r\n        }\r\n        var value = criteria[2];\r\n        if (fieldTypes && fieldTypes[fieldName]) {\r\n            value = odataUtils.convertPrimitiveValue(fieldTypes[fieldName], value)\r\n        }\r\n        return formatter(serializePropName(fieldName), odataUtils.serializeValue(value, protocolVersion))\r\n    };\r\n    var compileUnary = function(criteria) {\r\n        var op = criteria[0];\r\n        var crit = compileCore(criteria[1]);\r\n        if (\"!\" === op) {\r\n            return \"not (\" + crit + \")\"\r\n        }\r\n        throw errors.Error(\"E4003\", op)\r\n    };\r\n    var compileGroup = function(criteria) {\r\n        var bag = [];\r\n        var groupOperator;\r\n        var nextGroupOperator;\r\n        iteratorUtils.each(criteria, function(index, criterion) {\r\n            if (Array.isArray(criterion)) {\r\n                if (bag.length > 1 && groupOperator !== nextGroupOperator) {\r\n                    throw new errors.Error(\"E4019\")\r\n                }\r\n                bag.push(\"(\" + compileCore(criterion) + \")\");\r\n                groupOperator = nextGroupOperator;\r\n                nextGroupOperator = \"and\"\r\n            } else {\r\n                nextGroupOperator = dataUtils.isConjunctiveOperator(this) ? \"and\" : \"or\"\r\n            }\r\n        });\r\n        return bag.join(\" \" + groupOperator + \" \")\r\n    };\r\n    var compileCore = function(criteria) {\r\n        if (Array.isArray(criteria[0])) {\r\n            return compileGroup(criteria)\r\n        }\r\n        if (dataUtils.isUnaryOperation(criteria)) {\r\n            return compileUnary(criteria)\r\n        }\r\n        return compileBinary(criteria)\r\n    };\r\n    return function(criteria, version, types, filterToLower) {\r\n        fieldTypes = types;\r\n        forceLowerCase = typeUtils.isDefined(filterToLower) ? filterToLower : config().oDataFilterToLower;\r\n        protocolVersion = version;\r\n        return compileCore(criteria)\r\n    }\r\n}();\r\nvar createODataQueryAdapter = function(queryOptions) {\r\n    var _sorting = [];\r\n    var _criteria = [];\r\n    var _expand = queryOptions.expand;\r\n    var _select;\r\n    var _skip;\r\n    var _take;\r\n    var _countQuery;\r\n    var _oDataVersion = queryOptions.version || DEFAULT_PROTOCOL_VERSION;\r\n    var hasSlice = function() {\r\n        return _skip || void 0 !== _take\r\n    };\r\n    var hasFunction = function hasFunction(criterion) {\r\n        for (var i = 0; i < criterion.length; i++) {\r\n            if (isFunction(criterion[i])) {\r\n                return true\r\n            }\r\n            if (Array.isArray(criterion[i]) && hasFunction(criterion[i])) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    };\r\n    var requestData = function() {\r\n        var result = {};\r\n        if (!_countQuery) {\r\n            if (_sorting.length) {\r\n                result.$orderby = _sorting.join(\",\")\r\n            }\r\n            if (_skip) {\r\n                result.$skip = _skip\r\n            }\r\n            if (void 0 !== _take) {\r\n                result.$top = _take\r\n            }\r\n            result.$select = odataUtils.generateSelect(_oDataVersion, _select) || void 0;\r\n            result.$expand = odataUtils.generateExpand(_oDataVersion, _expand, _select) || void 0\r\n        }\r\n        if (_criteria.length) {\r\n            var criteria = _criteria.length < 2 ? _criteria[0] : _criteria;\r\n            var fieldTypes = queryOptions && queryOptions.fieldTypes;\r\n            var filterToLower = queryOptions && queryOptions.filterToLower;\r\n            result.$filter = compileCriteria(criteria, _oDataVersion, fieldTypes, filterToLower)\r\n        }\r\n        if (_countQuery) {\r\n            result.$top = 0\r\n        }\r\n        if (queryOptions.requireTotalCount || _countQuery) {\r\n            if (4 !== _oDataVersion) {\r\n                result.$inlinecount = \"allpages\"\r\n            } else {\r\n                result.$count = \"true\"\r\n            }\r\n        }\r\n        return result\r\n    };\r\n\r\n    function tryLiftSelect(tasks) {\r\n        var selectIndex = -1;\r\n        for (var i = 0; i < tasks.length; i++) {\r\n            if (\"select\" === tasks[i].name) {\r\n                selectIndex = i;\r\n                break\r\n            }\r\n        }\r\n        if (selectIndex < 0 || !isFunction(tasks[selectIndex].args[0])) {\r\n            return\r\n        }\r\n        var nextTask = tasks[1 + selectIndex];\r\n        if (!nextTask || \"slice\" !== nextTask.name) {\r\n            return\r\n        }\r\n        tasks[1 + selectIndex] = tasks[selectIndex];\r\n        tasks[selectIndex] = nextTask\r\n    }\r\n    return {\r\n        optimize: function(tasks) {\r\n            tryLiftSelect(tasks)\r\n        },\r\n        exec: function(url) {\r\n            return odataUtils.sendRequest(_oDataVersion, {\r\n                url: url,\r\n                params: extend(requestData(), queryOptions && queryOptions.params)\r\n            }, {\r\n                beforeSend: queryOptions.beforeSend,\r\n                jsonp: queryOptions.jsonp,\r\n                withCredentials: queryOptions.withCredentials,\r\n                countOnly: _countQuery,\r\n                deserializeDates: queryOptions.deserializeDates,\r\n                fieldTypes: queryOptions.fieldTypes,\r\n                isPaged: isFinite(_take)\r\n            })\r\n        },\r\n        multiSort: function(args) {\r\n            var rules;\r\n            if (hasSlice()) {\r\n                return false\r\n            }\r\n            for (var i = 0; i < args.length; i++) {\r\n                var getter = args[i][0];\r\n                var desc = !!args[i][1];\r\n                var rule;\r\n                if (\"string\" !== typeof getter) {\r\n                    return false\r\n                }\r\n                rule = serializePropName(getter);\r\n                if (desc) {\r\n                    rule += \" desc\"\r\n                }\r\n                rules = rules || [];\r\n                rules.push(rule)\r\n            }\r\n            _sorting = rules\r\n        },\r\n        slice: function(skipCount, takeCount) {\r\n            if (hasSlice()) {\r\n                return false\r\n            }\r\n            _skip = skipCount;\r\n            _take = takeCount\r\n        },\r\n        filter: function(criterion) {\r\n            if (hasSlice()) {\r\n                return false\r\n            }\r\n            if (!Array.isArray(criterion)) {\r\n                criterion = [].slice.call(arguments)\r\n            }\r\n            if (hasFunction(criterion)) {\r\n                return false\r\n            }\r\n            if (_criteria.length) {\r\n                _criteria.push(\"and\")\r\n            }\r\n            _criteria.push(criterion)\r\n        },\r\n        select: function(expr) {\r\n            if (_select || isFunction(expr)) {\r\n                return false\r\n            }\r\n            if (!Array.isArray(expr)) {\r\n                expr = [].slice.call(arguments)\r\n            }\r\n            _select = expr\r\n        },\r\n        count: function() {\r\n            _countQuery = true\r\n        }\r\n    }\r\n};\r\nqueryAdapters.odata = createODataQueryAdapter;\r\nexports.odata = createODataQueryAdapter;\r\n","/**\r\n * DevExtreme (data/odata/store.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar config = require(\"../../core/config\");\r\nvar odataUtils = require(\"./utils\");\r\nvar proxyUrlFormatter = require(\"../proxy_url_formatter\");\r\nvar errors = require(\"../errors\").errors;\r\nvar query = require(\"../query\");\r\nvar Store = require(\"../abstract_store\");\r\nvar mixins = require(\"./mixins\");\r\nvar deferredUtils = require(\"../../core/utils/deferred\");\r\nvar when = deferredUtils.when;\r\nvar Deferred = deferredUtils.Deferred;\r\nrequire(\"./query_adapter\");\r\nvar ANONYMOUS_KEY_NAME = \"5d46402c-7899-4ea9-bd81-8b73c47c7683\";\r\n\r\nfunction expandKeyType(key, keyType) {\r\n    var result = {};\r\n    result[key] = keyType;\r\n    return result\r\n}\r\n\r\nfunction mergeFieldTypesWithKeyType(fieldTypes, keyType) {\r\n    var result = {};\r\n    for (var field in fieldTypes) {\r\n        result[field] = fieldTypes[field]\r\n    }\r\n    for (var keyName in keyType) {\r\n        if (keyName in result) {\r\n            if (result[keyName] !== keyType[keyName]) {\r\n                errors.log(\"W4001\", keyName)\r\n            }\r\n        } else {\r\n            result[keyName] = keyType[keyName]\r\n        }\r\n    }\r\n    return result\r\n}\r\nvar ODataStore = Store.inherit({\r\n    ctor: function(options) {\r\n        this.callBase(options);\r\n        this._extractServiceOptions(options);\r\n        var key = this.key();\r\n        var fieldTypes = options.fieldTypes;\r\n        var keyType = options.keyType;\r\n        if (keyType) {\r\n            var keyTypeIsString = \"string\" === typeof keyType;\r\n            if (!key) {\r\n                key = keyTypeIsString ? ANONYMOUS_KEY_NAME : Object.keys(keyType);\r\n                this._legacyAnonymousKey = key\r\n            }\r\n            if (keyTypeIsString) {\r\n                keyType = expandKeyType(key, keyType)\r\n            }\r\n            fieldTypes = mergeFieldTypesWithKeyType(fieldTypes, keyType)\r\n        }\r\n        this._fieldTypes = fieldTypes || {};\r\n        if (2 === this.version()) {\r\n            this._updateMethod = \"MERGE\"\r\n        } else {\r\n            this._updateMethod = \"PATCH\"\r\n        }\r\n    },\r\n    _customLoadOptions: function() {\r\n        return [\"expand\", \"customQueryParams\"]\r\n    },\r\n    _byKeyImpl: function(key, extraOptions) {\r\n        var params = {};\r\n        if (extraOptions) {\r\n            params.$expand = odataUtils.generateExpand(this._version, extraOptions.expand, extraOptions.select) || void 0;\r\n            params.$select = odataUtils.generateSelect(this._version, extraOptions.select) || void 0\r\n        }\r\n        return this._sendRequest(this._byKeyUrl(key), \"GET\", params)\r\n    },\r\n    createQuery: function(loadOptions) {\r\n        var url;\r\n        var queryOptions;\r\n        loadOptions = loadOptions || {};\r\n        queryOptions = {\r\n            adapter: \"odata\",\r\n            beforeSend: this._beforeSend,\r\n            errorHandler: this._errorHandler,\r\n            jsonp: this._jsonp,\r\n            version: this._version,\r\n            withCredentials: this._withCredentials,\r\n            expand: loadOptions.expand,\r\n            requireTotalCount: loadOptions.requireTotalCount,\r\n            deserializeDates: this._deserializeDates,\r\n            fieldTypes: this._fieldTypes\r\n        };\r\n        if (isDefined(loadOptions.urlOverride)) {\r\n            url = loadOptions.urlOverride\r\n        } else {\r\n            url = this._url\r\n        }\r\n        if (isDefined(this._filterToLower)) {\r\n            queryOptions.filterToLower = this._filterToLower\r\n        }\r\n        if (loadOptions.customQueryParams) {\r\n            var params = mixins.escapeServiceOperationParams(loadOptions.customQueryParams, this.version());\r\n            if (4 === this.version()) {\r\n                url = mixins.formatFunctionInvocationUrl(url, params)\r\n            } else {\r\n                queryOptions.params = params\r\n            }\r\n        }\r\n        return query(url, queryOptions)\r\n    },\r\n    _insertImpl: function(values) {\r\n        this._requireKey();\r\n        var that = this;\r\n        var d = new Deferred;\r\n        when(this._sendRequest(this._url, \"POST\", null, values)).done(function(serverResponse) {\r\n            d.resolve(config().useLegacyStoreResult ? values : serverResponse || values, that.keyOf(serverResponse))\r\n        }).fail(d.reject);\r\n        return d.promise()\r\n    },\r\n    _updateImpl: function(key, values) {\r\n        var d = new Deferred;\r\n        when(this._sendRequest(this._byKeyUrl(key), this._updateMethod, null, values)).done(function(serverResponse) {\r\n            if (config().useLegacyStoreResult) {\r\n                d.resolve(key, values)\r\n            } else {\r\n                d.resolve(serverResponse || values, key)\r\n            }\r\n        }).fail(d.reject);\r\n        return d.promise()\r\n    },\r\n    _removeImpl: function(key) {\r\n        var d = new Deferred;\r\n        when(this._sendRequest(this._byKeyUrl(key), \"DELETE\")).done(function() {\r\n            d.resolve(key)\r\n        }).fail(d.reject);\r\n        return d.promise()\r\n    },\r\n    _convertKey: function(value) {\r\n        var result = value;\r\n        var fieldTypes = this._fieldTypes;\r\n        var key = this.key() || this._legacyAnonymousKey;\r\n        if (Array.isArray(key)) {\r\n            result = {};\r\n            for (var i = 0; i < key.length; i++) {\r\n                var keyName = key[i];\r\n                result[keyName] = odataUtils.convertPrimitiveValue(fieldTypes[keyName], value[keyName])\r\n            }\r\n        } else {\r\n            if (fieldTypes[key]) {\r\n                result = odataUtils.convertPrimitiveValue(fieldTypes[key], value)\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _byKeyUrl: function(value, useOriginalHost) {\r\n        var baseUrl = useOriginalHost ? proxyUrlFormatter.formatLocalUrl(this._url) : this._url;\r\n        var convertedKey = this._convertKey(value);\r\n        return baseUrl + \"(\" + encodeURIComponent(odataUtils.serializeKey(convertedKey, this._version)) + \")\"\r\n    }\r\n}, \"odata\").include(mixins.SharedMethods);\r\nmodule.exports = ODataStore;\r\nmodule.exports.default = module.exports;\r\n","/**\r\n * DevExtreme (data/odata/utils.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nvar Class = require(\"../../core/class\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar iteratorUtils = require(\"../../core/utils/iterator\");\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar ajax = require(\"../../core/utils/ajax\");\r\nvar _Guid = require(\"../../core/guid\");\r\nvar isDefined = typeUtils.isDefined;\r\nvar isPlainObject = typeUtils.isPlainObject;\r\nvar grep = require(\"../../core/utils/common\").grep;\r\nvar Deferred = require(\"../../core/utils/deferred\").Deferred;\r\nvar errors = require(\"../errors\").errors;\r\nvar dataUtils = require(\"../utils\");\r\nvar GUID_REGEX = /^(\\{{0,1}([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}\\}{0,1})$/;\r\nvar VERBOSE_DATE_REGEX = /^\\/Date\\((-?\\d+)((\\+|-)?(\\d+)?)\\)\\/$/;\r\nvar ISO8601_DATE_REGEX = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(Z|[-+]{1}\\d{2}(:?)(\\d{2})?)?$/;\r\nvar JSON_VERBOSE_MIME_TYPE = \"application/json;odata=verbose\";\r\nvar makeArray = function(value) {\r\n    return \"string\" === typeUtils.type(value) ? value.split() : value\r\n};\r\nvar hasDot = function(x) {\r\n    return /\\./.test(x)\r\n};\r\nvar pad = function(text, length, right) {\r\n    text = String(text);\r\n    while (text.length < length) {\r\n        text = right ? text + \"0\" : \"0\" + text\r\n    }\r\n    return text\r\n};\r\n\r\nfunction formatISO8601(date, skipZeroTime, skipTimezone) {\r\n    var bag = [];\r\n    var isZeroTime = function() {\r\n        return date.getHours() + date.getMinutes() + date.getSeconds() + date.getMilliseconds() < 1\r\n    };\r\n    var padLeft2 = function(text) {\r\n        return pad(text, 2)\r\n    };\r\n    bag.push(date.getFullYear());\r\n    bag.push(\"-\");\r\n    bag.push(padLeft2(date.getMonth() + 1));\r\n    bag.push(\"-\");\r\n    bag.push(padLeft2(date.getDate()));\r\n    if (!(skipZeroTime && isZeroTime())) {\r\n        bag.push(\"T\");\r\n        bag.push(padLeft2(date.getHours()));\r\n        bag.push(\":\");\r\n        bag.push(padLeft2(date.getMinutes()));\r\n        bag.push(\":\");\r\n        bag.push(padLeft2(date.getSeconds()));\r\n        if (date.getMilliseconds()) {\r\n            bag.push(\".\");\r\n            bag.push(pad(date.getMilliseconds(), 3))\r\n        }\r\n        if (!skipTimezone) {\r\n            bag.push(\"Z\")\r\n        }\r\n    }\r\n    return bag.join(\"\")\r\n}\r\n\r\nfunction parseISO8601(isoString) {\r\n    var result = new Date(60 * new Date(0).getTimezoneOffset() * 1e3);\r\n    var chunks = isoString.replace(\"Z\", \"\").split(\"T\");\r\n    var date = /(\\d{4})-(\\d{2})-(\\d{2})/.exec(chunks[0]);\r\n    var time = /(\\d{2}):(\\d{2}):(\\d{2})\\.?(\\d{0,7})?/.exec(chunks[1]);\r\n    result.setFullYear(Number(date[1]));\r\n    result.setMonth(Number(date[2]) - 1);\r\n    result.setDate(Number(date[3]));\r\n    if (Array.isArray(time) && time.length) {\r\n        result.setHours(Number(time[1]));\r\n        result.setMinutes(Number(time[2]));\r\n        result.setSeconds(Number(time[3]));\r\n        var fractional = (time[4] || \"\").slice(0, 3);\r\n        fractional = pad(fractional, 3, true);\r\n        result.setMilliseconds(Number(fractional))\r\n    }\r\n    return result\r\n}\r\n\r\nfunction isAbsoluteUrl(url) {\r\n    return /^(?:[a-z]+:)?\\/\\//i.test(url)\r\n}\r\n\r\nfunction toAbsoluteUrl(basePath, relativePath) {\r\n    var part;\r\n    var baseParts = stripParams(basePath).split(\"/\");\r\n    var relativeParts = relativePath.split(\"/\");\r\n\r\n    function stripParams(url) {\r\n        var index = url.indexOf(\"?\");\r\n        if (index > -1) {\r\n            return url.substr(0, index)\r\n        }\r\n        return url\r\n    }\r\n    baseParts.pop();\r\n    while (relativeParts.length) {\r\n        part = relativeParts.shift();\r\n        if (\"..\" === part) {\r\n            baseParts.pop()\r\n        } else {\r\n            baseParts.push(part)\r\n        }\r\n    }\r\n    return baseParts.join(\"/\")\r\n}\r\nvar param = function(params) {\r\n    var result = [];\r\n    for (var name in params) {\r\n        result.push(name + \"=\" + params[name])\r\n    }\r\n    return result.join(\"&\")\r\n};\r\nvar ajaxOptionsForRequest = function(protocolVersion, request, options) {\r\n    request = extend({\r\n        async: true,\r\n        method: \"get\",\r\n        url: \"\",\r\n        params: {},\r\n        payload: null,\r\n        headers: {},\r\n        timeout: 3e4\r\n    }, request);\r\n    options = options || {};\r\n    var beforeSend = options.beforeSend;\r\n    if (beforeSend) {\r\n        beforeSend(request)\r\n    }\r\n    var method = (request.method || \"get\").toLowerCase();\r\n    var isGet = \"get\" === method;\r\n    var useJsonp = isGet && options.jsonp;\r\n    var params = extend({}, request.params);\r\n    var ajaxData = isGet ? params : formatPayload(request.payload);\r\n    var qs = !isGet && param(params);\r\n    var url = request.url;\r\n    var contentType = !isGet && JSON_VERBOSE_MIME_TYPE;\r\n    if (qs) {\r\n        url += (url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + qs\r\n    }\r\n    if (useJsonp) {\r\n        ajaxData.$format = \"json\"\r\n    }\r\n    return {\r\n        url: url,\r\n        data: ajaxData,\r\n        dataType: useJsonp ? \"jsonp\" : \"json\",\r\n        jsonp: useJsonp && \"$callback\",\r\n        method: method,\r\n        async: request.async,\r\n        timeout: request.timeout,\r\n        headers: request.headers,\r\n        contentType: contentType,\r\n        accepts: {\r\n            json: [JSON_VERBOSE_MIME_TYPE, \"text/plain\"].join()\r\n        },\r\n        xhrFields: {\r\n            withCredentials: options.withCredentials\r\n        }\r\n    };\r\n\r\n    function formatPayload(payload) {\r\n        return JSON.stringify(payload, function(key, value) {\r\n            if (!(this[key] instanceof Date)) {\r\n                return value\r\n            }\r\n            value = formatISO8601(this[key]);\r\n            switch (protocolVersion) {\r\n                case 2:\r\n                    return value.substr(0, value.length - 1);\r\n                case 3:\r\n                case 4:\r\n                    return value;\r\n                default:\r\n                    throw errors.Error(\"E4002\")\r\n            }\r\n        })\r\n    }\r\n};\r\nvar sendRequest = function sendRequest(protocolVersion, request, options) {\r\n    var d = new Deferred;\r\n    var ajaxOptions = ajaxOptionsForRequest(protocolVersion, request, options);\r\n    ajax.sendRequest(ajaxOptions).always(function(obj, textStatus) {\r\n        var transformOptions = {\r\n            deserializeDates: options.deserializeDates,\r\n            fieldTypes: options.fieldTypes\r\n        };\r\n        var tuple = interpretJsonFormat(obj, textStatus, transformOptions, ajaxOptions);\r\n        var error = tuple.error;\r\n        var data = tuple.data;\r\n        var nextUrl = tuple.nextUrl;\r\n        var extra;\r\n        if (error) {\r\n            if (error.message !== dataUtils.XHR_ERROR_UNLOAD) {\r\n                d.reject(error)\r\n            }\r\n        } else {\r\n            if (options.countOnly) {\r\n                if (isFinite(tuple.count)) {\r\n                    d.resolve(tuple.count)\r\n                } else {\r\n                    d.reject(new errors.Error(\"E4018\"))\r\n                }\r\n            } else {\r\n                if (nextUrl && !options.isPaged) {\r\n                    if (!isAbsoluteUrl(nextUrl)) {\r\n                        nextUrl = toAbsoluteUrl(ajaxOptions.url, nextUrl)\r\n                    }\r\n                    sendRequest(protocolVersion, {\r\n                        url: nextUrl\r\n                    }, options).fail(d.reject).done(function(nextData) {\r\n                        d.resolve(data.concat(nextData))\r\n                    })\r\n                } else {\r\n                    if (isFinite(tuple.count)) {\r\n                        extra = {\r\n                            totalCount: tuple.count\r\n                        }\r\n                    }\r\n                    d.resolve(data, extra)\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return d.promise()\r\n};\r\nvar formatDotNetError = function(errorObj) {\r\n    var message;\r\n    var currentError = errorObj;\r\n    if (\"message\" in errorObj) {\r\n        if (errorObj.message.value) {\r\n            message = errorObj.message.value\r\n        } else {\r\n            message = errorObj.message\r\n        }\r\n    }\r\n    while (currentError = currentError.innererror || currentError.internalexception) {\r\n        message = currentError.message;\r\n        if (currentError.internalexception && message.indexOf(\"inner exception\") === -1) {\r\n            break\r\n        }\r\n    }\r\n    return message\r\n};\r\nvar errorFromResponse = function(obj, textStatus, ajaxOptions) {\r\n    if (\"nocontent\" === textStatus) {\r\n        return null\r\n    }\r\n    var message = \"Unknown error\";\r\n    var response = obj;\r\n    var httpStatus = 200;\r\n    var errorData = {\r\n        requestOptions: ajaxOptions\r\n    };\r\n    if (\"success\" !== textStatus) {\r\n        httpStatus = obj.status;\r\n        message = dataUtils.errorMessageFromXhr(obj, textStatus);\r\n        try {\r\n            response = JSON.parse(obj.responseText)\r\n        } catch (x) {}\r\n    }\r\n    var errorObj = response && (response.then && response || response.error || response[\"odata.error\"] || response[\"@odata.error\"]);\r\n    if (errorObj) {\r\n        message = formatDotNetError(errorObj) || message;\r\n        errorData.errorDetails = errorObj;\r\n        if (200 === httpStatus) {\r\n            httpStatus = 500\r\n        }\r\n        var customCode = Number(errorObj.code);\r\n        if (isFinite(customCode) && customCode >= 400) {\r\n            httpStatus = customCode\r\n        }\r\n    }\r\n    if (httpStatus >= 400 || 0 === httpStatus) {\r\n        errorData.httpStatus = httpStatus;\r\n        return extend(Error(message), errorData)\r\n    }\r\n    return null\r\n};\r\nvar interpretJsonFormat = function(obj, textStatus, transformOptions, ajaxOptions) {\r\n    var error = errorFromResponse(obj, textStatus, ajaxOptions);\r\n    var value;\r\n    if (error) {\r\n        return {\r\n            error: error\r\n        }\r\n    }\r\n    if (!isPlainObject(obj)) {\r\n        return {\r\n            data: obj\r\n        }\r\n    }\r\n    if (\"d\" in obj && (Array.isArray(obj.d) || typeUtils.isObject(obj.d))) {\r\n        value = interpretVerboseJsonFormat(obj, textStatus)\r\n    } else {\r\n        value = interpretLightJsonFormat(obj, textStatus)\r\n    }\r\n    transformTypes(value, transformOptions);\r\n    return value\r\n};\r\nvar interpretVerboseJsonFormat = function(obj) {\r\n    var data = obj.d;\r\n    if (!isDefined(data)) {\r\n        return {\r\n            error: Error(\"Malformed or unsupported JSON response received\")\r\n        }\r\n    }\r\n    if (isDefined(data.results)) {\r\n        data = data.results\r\n    }\r\n    return {\r\n        data: data,\r\n        nextUrl: obj.d.__next,\r\n        count: parseInt(obj.d.__count, 10)\r\n    }\r\n};\r\nvar interpretLightJsonFormat = function(obj) {\r\n    var data = obj;\r\n    if (isDefined(data.value)) {\r\n        data = data.value\r\n    }\r\n    return {\r\n        data: data,\r\n        nextUrl: obj[\"@odata.nextLink\"],\r\n        count: parseInt(obj[\"@odata.count\"], 10)\r\n    }\r\n};\r\nvar EdmLiteral = Class.inherit({\r\n    ctor: function(value) {\r\n        this._value = value\r\n    },\r\n    valueOf: function() {\r\n        return this._value\r\n    }\r\n});\r\nvar transformTypes = function transformTypes(obj, options) {\r\n    options = options || {};\r\n    each(obj, function(key, value) {\r\n        if (null !== value && \"object\" === _typeof(value)) {\r\n            if (\"results\" in value) {\r\n                obj[key] = value.results\r\n            }\r\n            transformTypes(obj[key], options)\r\n        } else {\r\n            if (\"string\" === typeof value) {\r\n                var fieldTypes = options.fieldTypes;\r\n                var canBeGuid = !fieldTypes || \"String\" !== fieldTypes[key];\r\n                if (canBeGuid && GUID_REGEX.test(value)) {\r\n                    obj[key] = new _Guid(value)\r\n                }\r\n                if (false !== options.deserializeDates) {\r\n                    if (value.match(VERBOSE_DATE_REGEX)) {\r\n                        var date = new Date(Number(RegExp.$1) + 60 * RegExp.$2 * 1e3);\r\n                        obj[key] = new Date(date.valueOf() + 60 * date.getTimezoneOffset() * 1e3)\r\n                    } else {\r\n                        if (ISO8601_DATE_REGEX.test(value)) {\r\n                            obj[key] = new Date(parseISO8601(obj[key]).valueOf())\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n};\r\nvar serializeDate = function(date) {\r\n    return \"datetime'\" + formatISO8601(date, true, true) + \"'\"\r\n};\r\nvar serializeString = function(value) {\r\n    return \"'\" + value.replace(/'/g, \"''\") + \"'\"\r\n};\r\nvar serializePropName = function(propName) {\r\n    if (propName instanceof EdmLiteral) {\r\n        return propName.valueOf()\r\n    }\r\n    return propName.replace(/\\./g, \"/\")\r\n};\r\nvar serializeValueV4 = function serializeValueV4(value) {\r\n    if (value instanceof Date) {\r\n        return formatISO8601(value, false, false)\r\n    }\r\n    if (value instanceof _Guid) {\r\n        return value.valueOf()\r\n    }\r\n    if (Array.isArray(value)) {\r\n        return \"[\" + value.map(function(item) {\r\n            return serializeValueV4(item)\r\n        }).join(\",\") + \"]\"\r\n    }\r\n    return serializeValueV2(value)\r\n};\r\nvar serializeValueV2 = function(value) {\r\n    if (value instanceof Date) {\r\n        return serializeDate(value)\r\n    }\r\n    if (value instanceof _Guid) {\r\n        return \"guid'\" + value + \"'\"\r\n    }\r\n    if (value instanceof EdmLiteral) {\r\n        return value.valueOf()\r\n    }\r\n    if (\"string\" === typeof value) {\r\n        return serializeString(value)\r\n    }\r\n    return String(value)\r\n};\r\nvar serializeValue = function(value, protocolVersion) {\r\n    switch (protocolVersion) {\r\n        case 2:\r\n        case 3:\r\n            return serializeValueV2(value);\r\n        case 4:\r\n            return serializeValueV4(value);\r\n        default:\r\n            throw errors.Error(\"E4002\")\r\n    }\r\n};\r\nvar serializeKey = function(key, protocolVersion) {\r\n    if (isPlainObject(key)) {\r\n        var parts = [];\r\n        each(key, function(k, v) {\r\n            parts.push(serializePropName(k) + \"=\" + serializeValue(v, protocolVersion))\r\n        });\r\n        return parts.join()\r\n    }\r\n    return serializeValue(key, protocolVersion)\r\n};\r\nvar keyConverters = {\r\n    String: function(value) {\r\n        return value + \"\"\r\n    },\r\n    Int32: function(value) {\r\n        return Math.floor(value)\r\n    },\r\n    Int64: function(value) {\r\n        if (value instanceof EdmLiteral) {\r\n            return value\r\n        }\r\n        return new EdmLiteral(value + \"L\")\r\n    },\r\n    Guid: function(value) {\r\n        if (value instanceof _Guid) {\r\n            return value\r\n        }\r\n        return new _Guid(value)\r\n    },\r\n    Boolean: function(value) {\r\n        return !!value\r\n    },\r\n    Single: function(value) {\r\n        if (value instanceof EdmLiteral) {\r\n            return value\r\n        }\r\n        return new EdmLiteral(value + \"f\")\r\n    },\r\n    Decimal: function(value) {\r\n        if (value instanceof EdmLiteral) {\r\n            return value\r\n        }\r\n        return new EdmLiteral(value + \"m\")\r\n    }\r\n};\r\nvar convertPrimitiveValue = function(type, value) {\r\n    if (null === value) {\r\n        return null\r\n    }\r\n    var converter = keyConverters[type];\r\n    if (!converter) {\r\n        throw errors.Error(\"E4014\", type)\r\n    }\r\n    return converter(value)\r\n};\r\nvar generateSelect = function(oDataVersion, select) {\r\n    if (!select) {\r\n        return\r\n    }\r\n    if (oDataVersion < 4) {\r\n        return serializePropName(select.join())\r\n    }\r\n    return grep(select, hasDot, true).join()\r\n};\r\nvar generateExpand = function(oDataVersion, expand, select) {\r\n    var generatorV2 = function() {\r\n        var hash = {};\r\n        if (expand) {\r\n            iteratorUtils.each(makeArray(expand), function() {\r\n                hash[serializePropName(this)] = 1\r\n            })\r\n        }\r\n        if (select) {\r\n            iteratorUtils.each(makeArray(select), function() {\r\n                var path = this.split(\".\");\r\n                if (path.length < 2) {\r\n                    return\r\n                }\r\n                path.pop();\r\n                hash[serializePropName(path.join(\".\"))] = 1\r\n            })\r\n        }\r\n        return iteratorUtils.map(hash, function(k, v) {\r\n            return v\r\n        }).join()\r\n    };\r\n    var generatorV4 = function() {\r\n        var format = function(hash) {\r\n            var formatCore = function formatCore(hash) {\r\n                var result = \"\";\r\n                var selectValue = [];\r\n                var expandValue = [];\r\n                iteratorUtils.each(hash, function(key, value) {\r\n                    if (Array.isArray(value)) {\r\n                        [].push.apply(selectValue, value)\r\n                    }\r\n                    if (isPlainObject(value)) {\r\n                        expandValue.push(key + formatCore(value))\r\n                    }\r\n                });\r\n                if (selectValue.length || expandValue.length) {\r\n                    result += \"(\";\r\n                    if (selectValue.length) {\r\n                        result += \"$select=\" + iteratorUtils.map(selectValue, serializePropName).join()\r\n                    }\r\n                    if (expandValue.length) {\r\n                        if (selectValue.length) {\r\n                            result += \";\"\r\n                        }\r\n                        result += \"$expand=\" + iteratorUtils.map(expandValue, serializePropName).join()\r\n                    }\r\n                    result += \")\"\r\n                }\r\n                return result\r\n            };\r\n            var result = [];\r\n            iteratorUtils.each(hash, function(key, value) {\r\n                result.push(key + formatCore(value))\r\n            });\r\n            return result.join()\r\n        };\r\n        var parseTree = function(exprs, root, stepper) {\r\n            var parseCore = function parseCore(exprParts, root, stepper) {\r\n                var result = stepper(root, exprParts.shift(), exprParts);\r\n                if (false === result) {\r\n                    return\r\n                }\r\n                parseCore(exprParts, result, stepper)\r\n            };\r\n            iteratorUtils.each(exprs, function(_, x) {\r\n                parseCore(x.split(\".\"), root, stepper)\r\n            })\r\n        };\r\n        var hash = {};\r\n        if (expand || select) {\r\n            if (expand) {\r\n                parseTree(makeArray(expand), hash, function(node, key, path) {\r\n                    node[key] = node[key] || {};\r\n                    if (!path.length) {\r\n                        return false\r\n                    }\r\n                    return node[key]\r\n                })\r\n            }\r\n            if (select) {\r\n                parseTree(grep(makeArray(select), hasDot), hash, function(node, key, path) {\r\n                    if (!path.length) {\r\n                        node[key] = node[key] || [];\r\n                        node[key].push(key);\r\n                        return false\r\n                    }\r\n                    return node[key] = node[key] || {}\r\n                })\r\n            }\r\n            return format(hash)\r\n        }\r\n    };\r\n    if (oDataVersion < 4) {\r\n        return generatorV2()\r\n    }\r\n    return generatorV4()\r\n};\r\nexports.sendRequest = sendRequest;\r\nexports.serializePropName = serializePropName;\r\nexports.serializeValue = serializeValue;\r\nexports.serializeKey = serializeKey;\r\nexports.keyConverters = keyConverters;\r\nexports.convertPrimitiveValue = convertPrimitiveValue;\r\nexports.generateExpand = generateExpand;\r\nexports.generateSelect = generateSelect;\r\nexports.EdmLiteral = EdmLiteral;\r\n","/**\r\n * DevExtreme (data/proxy_url_formatter.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar each = require(\"../core/utils/iterator\").each;\r\nvar domAdapter = require(\"../core/dom_adapter\");\r\nvar window = require(\"../core/utils/window\").getWindow();\r\nvar callOnce = require(\"../core/utils/call_once\");\r\nvar DXPROXY_HOST = \"dxproxy.devexpress.com:8000\";\r\nvar urlMapping = {};\r\nvar getUrlParser = callOnce(function() {\r\n    var a = domAdapter.createElement(\"a\");\r\n    var props = [\"protocol\", \"hostname\", \"port\", \"pathname\", \"search\", \"hash\"];\r\n    var normalizePath = function(value) {\r\n        if (\"/\" !== value.charAt(0)) {\r\n            value = \"/\" + value\r\n        }\r\n        return value\r\n    };\r\n    return function(url) {\r\n        a.href = url;\r\n        var result = {};\r\n        each(props, function() {\r\n            result[this] = a[this]\r\n        });\r\n        result.pathname = normalizePath(result.pathname);\r\n        return result\r\n    }\r\n});\r\nvar parseUrl = function(url) {\r\n    var urlParser = getUrlParser();\r\n    return urlParser(url)\r\n};\r\nvar extractProxyAppId = function() {\r\n    return window.location.pathname.split(\"/\")[1]\r\n};\r\nmodule.exports = {\r\n    parseUrl: parseUrl,\r\n    isProxyUsed: function() {\r\n        return window.location.host === DXPROXY_HOST\r\n    },\r\n    formatProxyUrl: function(localUrl) {\r\n        var urlData = parseUrl(localUrl);\r\n        if (!/^(localhost$|127\\.)/i.test(urlData.hostname)) {\r\n            return localUrl\r\n        }\r\n        var proxyUrlPart = DXPROXY_HOST + \"/\" + extractProxyAppId() + \"_\" + urlData.port;\r\n        urlMapping[proxyUrlPart] = urlData.hostname + \":\" + urlData.port;\r\n        var resultUrl = \"http://\" + proxyUrlPart + urlData.pathname + urlData.search;\r\n        return resultUrl\r\n    },\r\n    formatLocalUrl: function(proxyUrl) {\r\n        if (proxyUrl.indexOf(DXPROXY_HOST) < 0) {\r\n            return proxyUrl\r\n        }\r\n        var resultUrl = proxyUrl;\r\n        for (var proxyUrlPart in urlMapping) {\r\n            if (Object.prototype.hasOwnProperty.call(urlMapping, proxyUrlPart)) {\r\n                if (proxyUrl.indexOf(proxyUrlPart) >= 0) {\r\n                    resultUrl = proxyUrl.replace(proxyUrlPart, urlMapping[proxyUrlPart]);\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        return resultUrl\r\n    }\r\n};\r\n","import { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nexport class MyBsModalService extends BsModalService {\r\n    \r\n}","module.exports = \"<div class=\\\"row invoice-form\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item *ngIf=\\\"!isTT78\\\"  dataField=\\\"invoice_release_id\\\" editorType=\\\"dxSelectBox\\\" [editorOptions]=\\\"{items: select.invoice_releases, onValueChanged: templateChange, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"{{_translate.CONTROLL.LABEL.invoice_form }} {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"isTT78\\\" dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\" [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n        <dxi-validation-rule type=\\\"required\\\" message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n      </dxi-item>\\r\\n        <!-- Hợp đồng kinh tế số, ngày -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item [cssClass]=\\\"'max_left'\\\"  dataField=\\\"delivery_order_number\\\" >\\r\\n              <dxo-label text=\\\"{{strTextHDKT}}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\" message=\\\"{{strTextHDKT}} {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item  dataField=\\\"delivery_order_date\\\" [cssClass]=\\\"'max_right'\\\" editorType=\\\"dxDateBox\\\" [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\">\\r\\n              <dxo-label text=\\\"{{strtextHDKTNgay}}\\\"></dxo-label>\\r\\n              <dxi-validation-rule *ngIf=\\\"isPXKDaiLy\\\" type=\\\"required\\\" message=\\\"{{ strtextHDKTNgay }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày hóa đơn, số hóa đơn -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item [cssClass]=\\\"'max_left'\\\" dataField=\\\"invoice_date\\\"  editorType=\\\"dxDateBox\\\" [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate , onValueChanged: changeDateTime}\\\">\\r\\n            <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_date }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item [cssClass]=\\\"'max_right'\\\" cssClass=\\\"vat invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\"   editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{ disabled: true}\\\">\\r\\n              <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Của -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"delivery_order_by\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.of }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Loại tiền, tỷ giá -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item   dataField=\\\"currency_code\\\" editorType=\\\"dxSelectBox\\\" [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.currency_code }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\" message=\\\"{{_translate.CONTROLL.LABEL.currency_code }} {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"currency_rate\\\"   editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: '0,###.##'}\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.currency_rate }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Với -->\\r\\n        <dxi-item *ngIf=\\\"isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item  name=\\\"search-mkh\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.with }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n                <dx-autocomplete\\r\\n                    valueExpr=\\\"code\\\"\\r\\n                    placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\"\\r\\n                    [dataSource]=\\\"customer_codes\\\"\\r\\n                    [(value)]=\\\"frmData.customer_name\\\"\\r\\n                    (onItemClick)=\\\"customerCodeChoose($event)\\\"\\r\\n                    (onFocusOut)=\\\"updateCustomerInfo($event)\\\"\\r\\n                    >\\r\\n                    <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                        <span>{{item.code}}: {{ item.name }}</span>\\r\\n                    </div>\\r\\n                </dx-autocomplete>\\r\\n            </div>\\r\\n            <dxi-validation-rule type=\\\"required\\\" message=\\\"{{_translate.CONTROLL.LABEL.with }} {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"add_customer\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n       \\r\\n         <!-- Email -->\\r\\n         <dxi-item *ngIf=\\\"!isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item [label]=\\\"{text: 'Email'}\\\" [ngClass]=\\\"configs.system_parameter.view_bank_account_seller? 'vat layout_input' : ''\\\">\\r\\n            <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n              <div\\r\\n                class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n                <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                  <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\"\\r\\n                  ></app-tag-input-email>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- <dxi-item *ngIf=\\\"!isPXKDaiLy\\\"  itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n         \\r\\n        </dxi-item> -->\\r\\n        \\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Hình thức xuất -->\\r\\n          <dxi-item name=\\\"ht-xuat\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.export_form }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-select-box \\r\\n                [(value)]=\\\"frmData.status\\\"\\r\\n                displayExpr=\\\"name\\\"\\r\\n                valueExpr=\\\"code\\\"\\r\\n                [items]=\\\"htXuatOptions\\\"\\r\\n                [disabled] = \\\"!configs.system_parameter.allow_keep_invoice_number\\\"\\r\\n              ></dx-select-box>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <!-- MST kho nhận -->\\r\\n          <dxi-item *ngIf=\\\"isTT78 && !isPXKDaiLy\\\" dataField=\\\"buyer_tax_code\\\">\\r\\n            <dxo-label text=\\\"MST kho nhận\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Về việc -->\\r\\n        <dxi-item *ngIf=\\\"!isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"delivery_order_content\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.delivery_order_content }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Mã số thuế -->\\r\\n        <dxi-item *ngIf=\\\"isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"buyer_tax_code\\\" >\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.tax_code }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Người vận chuyển, hợp đồng -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item   dataField=\\\"delivery_by\\\" >\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.delivery_by }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule *ngIf=\\\"isPXKDaiLy\\\" type=\\\"required\\\" message=\\\"{{_translate.CONTROLL.LABEL.delivery_by }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"transportation_contract\\\" >\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.contract_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n       <!-- Phương thức vận chuyển -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n           <dxi-item   dataField=\\\"transportation_method\\\">\\r\\n             <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.transportation_method }}\\\"></dxo-label>\\r\\n             <dxi-validation-rule type=\\\"required\\\" message=\\\"{{_translate.CONTROLL.LABEL.transportation_method }} {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n           </dxi-item>\\r\\n        </dxi-item>\\r\\n       <!-- Xuất tại kho -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"search-mst\\\"   dataField=\\\"from_warehouse\\\" editorType=\\\"dxSelectBox\\\" [editorOptions]=\\\"{items: wavehourses, onValueChanged: from_warehouseChange, displayExpr: 'name', valueExpr: 'id',searchEnabled:true}\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.from_warehouse }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\" message=\\\"{{_translate.CONTROLL.LABEL.from_warehouse }} {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"from_warehouse_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Nhập tại kho -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item   dataField=\\\"to_warehouse\\\" editorType=\\\"dxSelectBox\\\" [editorOptions]=\\\"{items: wavehourses, onValueChanged: to_warehouseChange, displayExpr: 'name', valueExpr: 'id',searchEnabled:true}\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.to_warehouse }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\" message=\\\"{{_translate.CONTROLL.LABEL.to_warehouse }} {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"to_warehouse_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n         <!-- Địa chỉ kho xuất -->\\r\\n         <dxi-item *ngIf=\\\"isTT78  && !isPXKDaiLy\\\" itemType=\\\"group\\\">\\r\\n          <dxi-item dataField=\\\"shiping_point\\\">\\r\\n            <dxo-label text=\\\"Địa chỉ kho xuất\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\" message=\\\"Địa chỉ kho xuất {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Địa chỉ kho nhập -->\\r\\n        <dxi-item *ngIf=\\\"isTT78  && !isPXKDaiLy\\\" itemType=\\\"group\\\">\\r\\n          <dxi-item  dataField=\\\"place_of_delivery\\\">\\r\\n            <dxo-label text=\\\"Địa chỉ kho nhập\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\" message=\\\"Địa chỉ kho nhập {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"isTT78\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Số bảng kê -->\\r\\n          <dxi-item [cssClass]=\\\"'max_left'\\\" dataField=\\\"list_number\\\">\\r\\n              <dxo-label text=\\\"Số bảng kê\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- Ngày bảng kê -->\\r\\n          <dxi-item [cssClass]=\\\"'max_right'\\\" dataField=\\\"list_date\\\" [template]=\\\"'notifydate'\\\">\\r\\n              <dxo-label text=\\\"Ngày bảng kê\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"configs.integrate_parameter.integrate_econtract && configs.integrate_parameter.integrate_econtract.is_delivery\\\">\\r\\n          <!-- Số điện thoại người vận chuyển -->\\r\\n           <dxi-item dataField=\\\"carrier_mobile\\\" [editorOptions]=\\\"{ readOnly: isHoaDonDaXuat }\\\">\\r\\n               <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.carrier_mobile }}\\\"></dxo-label>\\r\\n               <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\" message=\\\"{{_translate.CONTROLL.LABEL.carrier_mobile }} {{_translate.VALIDATION.not_pattern}}\\\"></dxi-validation-rule>\\r\\n           </dxi-item>\\r\\n          <!-- Email người vận chuyển -->\\r\\n           <dxi-item dataField=\\\"carrier_email\\\" [editorOptions]=\\\"{ readOnly: isHoaDonDaXuat }\\\">\\r\\n               <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.carrier_email }}\\\"></dxo-label>\\r\\n               <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.email\\\" message=\\\"{{_translate.CONTROLL.LABEL.carrier_email }} {{_translate.VALIDATION.not_pattern}}\\\"></dxi-validation-rule>\\r\\n           </dxi-item>\\r\\n         </dxi-item>\\r\\n        <!-- Ghi chú -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item cssClass=\\\"vat invoice-note\\\"  dataField=\\\"note\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.note }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Email -->\\r\\n        <dxi-item *ngIf=\\\"isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\" [editorOptions]=\\\"{ readOnly: isHoaDonDaXuat }\\\">\\r\\n          <dxi-item [label]=\\\"{text: 'Email'}\\\" [ngClass]=\\\"configs.system_parameter.view_bank_account_seller? 'vat layout_input' : ''\\\">\\r\\n            <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n              <div\\r\\n                class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n                <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                  <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\"\\r\\n                  ></app-tag-input-email>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        \\r\\n      </dxi-item>\\r\\n      <div *dxTemplate = \\\"let d of 'notifydate'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.list_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\" [displayFormat]=\\\"'dd/MM/yyyy'\\\" [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\"  [formData]=\\\"frmData\\\"  [customerTempt]=\\\"customerTempt\\\" [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'invoice_options'\\\"></app-form-extend>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \"::ng-deep .vat.invoice-number-create-invoice input{color:red;font-weight:bold}::ng-deep .vat.invoice-note input{color:#0070C0;font-weight:bold}::ng-deep .vat.layout_input span.dx-field-item-label-content{width:117px !important}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code:focus{outline:none}.name-customer{width:100% !important}.name-customer .label{width:25%}.name-customer .value{width:73.4% !important}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align .dx-field-item-label .dx-field-item-label-content{min-width:171px !important}\\n\"","import { Component, OnInit, Input, Output, EventEmitter, OnDestroy, ViewChildren, ViewChild, AfterViewInit } from '@angular/core';\r\nimport { ActivatedRoute, } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport ODataStore from 'devextreme/data/odata/store';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\n\r\nimport { Library, Helper, AuthService, VChanggeMoneyService, sEnum, VStringService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { Wavehourse } from '@modules/products/shared';\r\nimport { ProductsService } from '@modules/products/shared';\r\n\r\nimport { pattern } from '@config/index';\r\nimport { AddWavehourseComponent } from '@shared/modules/some/components/add-wavehourse/add-wavehourse.component';\r\nimport { environment } from '@environments/environment';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AddCustomerComponent } from '@shared/index';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport * as _ from 'lodash';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n@Component({\r\n  selector: 'transport-form-invoice',\r\n  templateUrl: './form-invoice.component.html',\r\n  styleUrls: ['./form-invoice.component.scss']\r\n})\r\nexport class FormInvoiceComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n\r\n  routeSub: Subscription;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @ViewChild(FormExtendComponent) formExtend: FormExtendComponent;\r\n\r\n  @Input() frmData: any;\r\n  @Input() ttDaXuatHoaDon: boolean = false\r\n  @Input() type: any;\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() wavehourses: any;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('onTemplateChange') onTemplateChange = new EventEmitter<any>();\r\n  @Output('onTemplateTT78TypeChange') onTemplateTT78TypeChange = new EventEmitter<any>();\r\n  @Input() infoDangKy: any;\r\n  @Input() isTT78: boolean;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() extentionGrid: any;\r\n  template_temp: any;\r\n  originInvoiceNumber: any;\r\n  bsModalRef: BsModalRef;\r\n  select: any = {};\r\n  pattern = pattern;\r\n  tax_codes: any = [];\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  showTraLai: boolean = false;\r\n  disableInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuatOptions = [];\r\n  wavehourse: any;\r\n  selectedWavehourse: string = '';\r\n  configs: any;\r\n  isPXKDaiLy = false;\r\n  isHoaDonDaXuat = false;\r\n  //thay đổi disable của 3 input customer_name, buyer_name, buyer_address\r\n  tod: any = {};\r\n  _translate: any;\r\n  emails: any = [];\r\n  private arrEmail: any = [];\r\n  loaiHoaDon: string;\r\n  strTextHDKT: any;\r\n  strtextHDKTNgay: any;\r\n  formItems = [];\r\n  customForms = [];\r\n  customerTempt = {};\r\n  from_warehouse_btn_options = {\r\n    text: \"\",\r\n    icon: \"assets/img/icons/Them.png\",\r\n    type: \"default\",\r\n    onClick: () => {\r\n      this.wavehourse = new Wavehourse();\r\n      this.wavehourse.order = this.wavehourses.length + 1;\r\n      const initialState = {\r\n        wavehourse: this.wavehourse,\r\n        onSave: (wavehourse) => {\r\n          this.wavehourse = wavehourse;\r\n          this.wavehourses.unshift(this.wavehourse);\r\n          this.frmData.from_warehouse = this.wavehourse.id;\r\n          this.frmData.from_warehouse_name = this.wavehourse.name;\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddWavehourseComponent, {\r\n        class: 'second child-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }\r\n  };\r\n\r\n  to_warehouse_btn_options = {\r\n    text: \"\",\r\n    icon: \"assets/img/icons/Them.png\",\r\n    type: \"default\",\r\n    onClick: () => {\r\n      this.wavehourse = new Wavehourse();\r\n      this.wavehourse.order = this.wavehourses.length + 1;\r\n      const initialState = {\r\n        wavehourse: this.wavehourse,\r\n        onSave: (wavehourse) => {\r\n          this.wavehourse = wavehourse;\r\n          this.wavehourses.unshift(this.wavehourse);\r\n          this.frmData.to_warehouse = this.wavehourse.id;\r\n          this.frmData.to_warehouse_name = this.wavehourse.name;\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddWavehourseComponent, {\r\n        class: 'second child-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }\r\n  };\r\n\r\n  add_customer = {\r\n    text: \"\",\r\n    icon: \"assets/img/icons/Them.png\",\r\n    type: \"default\",\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false,\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n          if (customer.bank_account_number) {\r\n            this.frmData.bank_account_number = customer.bank_account_number;\r\n          }\r\n          if (customer.bank_name) {\r\n            this.frmData.bank_name = customer.bank_name;\r\n          }\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private productsService: ProductsService,\r\n    public translate: TranslateService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n  ngAfterViewInit() {\r\n    let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n    this.formDuLieuMoRong(this.template_temp);\r\n    if(this.frmData.total_payment){\r\n      const tien_chu = Helper.tienBangChu(Math.abs(this.frmData.total_payment), VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n      this.frmData.total_payment_in_word = this.invoiceService.docTienAm(this.frmData.total_payment, tien_chu, this.configs, this.frmData.currency_code);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate, this.frmData.status);\r\n    let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n    this.configs = this.authService.getConfigs();\r\n    this.loaiHoaDon = this.route.snapshot.data.type;\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n    if (this.isPXKDaiLy) {\r\n      this.strTextHDKT = this._translate.CONTROLL.LABEL.deconomic_contract_number;\r\n      this.strtextHDKTNgay = \"Hợp đồng kinh tế ngày\";\r\n    }\r\n    else {\r\n      this.strTextHDKT = this._translate.CONTROLL.LABEL.delivery_order_number;\r\n      this.strtextHDKTNgay = this._translate.CONTROLL.LABEL.date;\r\n    }\r\n\r\n    if (this.route.snapshot.queryParams['status'] == 'return') {\r\n      this.showTraLai = true;\r\n      this.frmData.nguoitralai = this.authService.getCurrentUser().user.name;\r\n      this.frmData.ngaytralai = moment(new Date()).format('YYYY-MM-DD');\r\n    }\r\n\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      //put data DM for select\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.currency_codes = danh_muc.DM_LOAI_TIEN ? danh_muc.DM_LOAI_TIEN.data : null;\r\n      this.select.customer_types = danh_muc.DM_NHOM_KHACH_HANG ? danh_muc.DM_NHOM_KHACH_HANG.data : null;\r\n      this.select.export_places = danh_muc.DM_NOI_XUAT_HOA_DON ? danh_muc.DM_NOI_XUAT_HOA_DON.data : null;\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        if (!this.frmData.id) {\r\n          temptTT78 = data.init[1];\r\n        }\r\n        else {\r\n          temptTT78 = data.init[3];\r\n        }\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (Number.parseInt(this.frmData.invoice_number) > 0) {\r\n            if (this.frmData.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.frmData.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n        if (this.frmData.id)\r\n          this.changeTemplateInvoice(this.frmData.invoice_date);\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n        if (!this.frmData.id) {\r\n          this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.release_status != 'DA_HUY_SO');\r\n        }\r\n      }\r\n    });\r\n\r\n    this.select.customer_object_codes = VSelectBoxService._customerObject(this._translate);\r\n    this.select.adjustment_forms = VSelectBoxService._adjustmentForms(this._translate);\r\n    this.select.adjustment_objects = VSelectBoxService._adjustmentObjects(this._translate);\r\n\r\n    //Set disabled cho đơn vị tổ chức\r\n    this.setDisabledByCustomer_object_code(this.frmData.customer_object_code);\r\n\r\n    //tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      store: new ODataStore({\r\n        url: `${environment.API_URL}/customers`,\r\n        beforeSend: (e) => {\r\n          e.params = {\r\n            \"limit\": \"10\", \"page\": \"1\",\r\n            \"filter_groups[0][or]\": \"true\",\r\n            \"filter_groups[0][filters][0][key]\": \"tax_code\",\r\n            \"filter_groups[0][filters][0][value]\": this.frmData.buyer_tax_code,\r\n            \"filter_groups[0][filters][0][operator]\": \"ct\",\r\n            \"filter_groups[0][filters][1][key]\": \"name\",\r\n            \"filter_groups[0][filters][1][value]\": this.frmData.buyer_tax_code,\r\n            \"filter_groups[0][filters][1][operator]\": \"ct\",\r\n          };\r\n          e.headers = {\r\n            \"Authorization\": `Bearer ${JSON.parse(localStorage.getItem('access_token')).value}`,\r\n            \"TaxCode\": JSON.parse(localStorage['currentUser']).account.tax_code,\r\n            \"Content-Type\": \"application/json\",\r\n          };\r\n        }\r\n      }),\r\n      map: (dataItem) => {\r\n        return dataItem.customers\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          // Nếu là mẫu html\r\n          this.template_temp = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        this.frmData.invoice_release_id = \"\";\r\n        if (item.value === this.frmData.template_id) {\r\n          this.template_temp = item;\r\n        }\r\n      });\r\n    }\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n  }\r\n\r\n  formDuLieuMoRong(item) {\r\n    this.customForms = [];\r\n    this.customerTempt = {};\r\n    Helper.resetObject(this.formItems);\r\n    if (item.fields && item.fields.length > 0) {\r\n      const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n      if (_arrayGrid && _arrayGrid.length > 0) {\r\n        this.extentionGrid.ma_hang = false;\r\n        this.extentionGrid.so_lo = false;\r\n        this.extentionGrid.han_dung = false;\r\n        this.extentionGrid.nuoc_san_xuat = false;\r\n        this.extentionGrid.don_hang_hop_dong = false;\r\n        this.extentionGrid.ma_quan_ly = false;\r\n        for (let i = 0; i < _arrayGrid.length; i++) {\r\n          const column = _arrayGrid[i]['name'];\r\n          const value = _arrayGrid[i]['is_show'];\r\n          let _ma = VStringService._convertToViKdau(column);\r\n          this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n        }\r\n      }\r\n      let _dulieumorong = _.cloneDeep(item.fields).filter(x => x.type === '4');\r\n      const invoice_options = this.frmData.invoice_options;\r\n\r\n      if (invoice_options.length > 0) {\r\n        _dulieumorong = _dulieumorong.map((dl) => {\r\n          let option = invoice_options.find(x => x.code == dl.code)\r\n          if (option) {\r\n            dl.value = option.value;\r\n          }\r\n          return dl;\r\n        });\r\n      }\r\n\r\n      this.frmData.invoice_options = _dulieumorong;\r\n      if (_dulieumorong.length > 0) {\r\n        this.formExtend.createForm(this.customForms, _dulieumorong)\r\n        _dulieumorong.forEach(value => {\r\n          this.customerTempt[value.code] = value.value;\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      Helper.resetObject(this.formItems);\r\n      this.extentionGrid.ma_hang = false;\r\n      this.extentionGrid.so_lo = false;\r\n      this.extentionGrid.han_dung = false;\r\n      this.extentionGrid.nuoc_san_xuat = false;\r\n      this.extentionGrid.don_hang_hop_dong = false;\r\n      this.extentionGrid.ma_quan_ly = false;\r\n    }\r\n  }\r\n\r\n  createForm() {\r\n    this.form.instance.beginUpdate();\r\n    this.form.instance.itemOption(\"business_addressa\", { label: { text: \"Địa chỉ\" }, editorOptions: { placeholder: \"Nhập địa chỉ\" } });\r\n    this.form.instance.endUpdate();\r\n  }\r\n\r\n  disableTemplateInput() {\r\n    if (this.frmData.invoice_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  readonlyAllForm(trangthaiHD) {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n    if (trangthaiHD == sEnum.statusInv.DaXuat)\r\n      this.isHoaDonDaXuat = true;\r\n    else\r\n      this.isHoaDonDaXuat = false;\r\n  }\r\n  allowEditAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n   // reset trường mở rộng\r\n   public resetTMR() {\r\n    this.formExtend.resetForm();\r\n    this.formExtend.resetOptions();\r\n  }\r\n\r\n  public removeReadonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n      // item.instance.resetValues();\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n  setDisabledByCustomer_object_code(value) {\r\n    this.tod.customer_name = false;\r\n    this.tod.buyer_name = false;\r\n    this.tod.buyer_address = false;\r\n\r\n    switch (value) {\r\n      case 'DOANH_NGHIEP':\r\n        break;\r\n      case 'CA_NHAN':\r\n        this.frmData.customer_name = '';\r\n        this.tod.customer_name = true;\r\n        break;\r\n      case 'KHACH_LE':\r\n        this.frmData.customer_name = '';\r\n        this.frmData.buyer_address = '';\r\n        this.tod.customer_name = true;\r\n        this.tod.buyer_address = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  //gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  getHtXuatValue() {\r\n    return this.frmData.status;\r\n  }\r\n  getFrmData() {\r\n    return this.frmData;\r\n  }\r\n\r\n  //sự kiện\r\n  taxCodeKeyUp = (e) => {\r\n    let str = this.frmData.buyer_tax_code;\r\n    let len = str.length;\r\n    if (len >= 3) {\r\n      this.vatService.searchMST(str).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let arr = [];\r\n          rs.data.customers.forEach(item => {\r\n            arr.push(item);\r\n          });\r\n          this.tax_codes = arr;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  taxCodeChoose(e) {\r\n    let customer = e.itemData;\r\n    if (this.frmData.customer_object_code != 'CA_NHAN' && this.frmData.customer_object_code != 'KHACH_LE') this.frmData.customer_name = customer.name;\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code != 'KHACH_LE') this.frmData.buyer_address = customer.business_address;\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    this.frmData.buyer_email = customer.email;\r\n    this.frmData.customer_id = customer.id;\r\n    if (customer.bank_account_number) this.frmData.bank_account_number = customer.bank_account_number;\r\n    if (customer.bank_name) this.frmData.bank_name = customer.bank_name;\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerCodeChoose(e) {\r\n\r\n    let customer = e.itemData;\r\n    if (this.frmData.customer_object_code != 'CA_NHAN' && this.frmData.customer_object_code != 'KHACH_LE') this.frmData.customer_name = customer.name;\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code != 'KHACH_LE') this.frmData.buyer_address = customer.business_address;\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    if (customer.bank_account_number) this.frmData.bank_account_number = customer.bank_account_number;\r\n    if (customer.bank_name) this.frmData.bank_name = customer.bank_name;\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customer_object_codeChange = (e) => {\r\n    this.setDisabledByCustomer_object_code(e.value);\r\n  }\r\n\r\n  templateChange = (e) => {\r\n    this.select.invoice_releases.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.template_id = item.template_id;\r\n        this.onTemplateChange.emit(item.is_multi_vat);\r\n        // Nếu là mẫu html\r\n        this.formDuLieuMoRong(item);\r\n      }\r\n    });\r\n  }\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.invoice_release_id = \"\";\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.invoice_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateChange.emit(item.is_multi_vat);\r\n        this.onTemplateTT78TypeChange.emit(item);\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        // Nếu là mẫu html\r\n        this.formDuLieuMoRong(item);\r\n      }\r\n    });\r\n  }\r\n\r\n  from_warehouseChange = (e) => {\r\n    let _obj = this.wavehourses.filter(p => p.id == e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.from_warehouse_name = _obj.name;\r\n      this.frmData.shiping_point = _obj.address;\r\n    }\r\n\r\n  }\r\n  to_warehouseChange = (e) => {\r\n    let _obj = this.wavehourses.filter(p => p.id == e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.to_warehouse_name = _obj.name;\r\n      this.frmData.place_of_delivery = _obj.address;\r\n    }\r\n  }\r\n  currencyCodeChange = (e) => {\r\n    if (this.frmData.currency_code == 'VND') {\r\n      this.frmData.currency_rate = null;\r\n    }\r\n    const tien_chu = Helper.tienBangChu(Math.abs(this.frmData.total_payment), VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n    this.frmData.total_payment_in_word = this.invoiceService.docTienAm(this.frmData.total_payment, tien_chu, this.configs, this.frmData.currency_code);\r\n  }\r\n  currencyRateChange = (e) => {\r\n    VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, null, this.configs.system_parameter)\r\n  }\r\n\r\n  exportPlaceChange = (e) => {\r\n    let _obj = this.select.export_places.filter(p => p.code == e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.export_address = _obj.dia_chi;\r\n      this.frmData.export_place_name = _obj.name;\r\n    }\r\n  }\r\n  // paymentMethodChange = (e) => {\r\n  //   let _obj = this.select.payment_method_names.filter(p => p.code == e.value)[0];\r\n  //   if (_obj) {\r\n  //     this.frmData.payment_method_view_name = _obj.name;\r\n  //   }\r\n  // }\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n  updateCustomerInfo = (e) => {\r\n    // if (this.frmData.customer_id) {\r\n    //   this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n    //     if (response.data) {\r\n    //       this.customerCurent = response.data.customer;\r\n    //       if (this.customerCurent) {\r\n    //         if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n    //           this.showPopup = true;\r\n    //           return;\r\n    //         }\r\n    //       }\r\n    //     }\r\n    //   });\r\n    // }\r\n  };\r\n  changeDateTime = (e) => {\r\n    this.changeTemplateInvoice(e.value);\r\n  }\r\n\r\n  changeTemplateInvoice(strDate) {\r\n    if (this.isTT78) {\r\n      let year = \"\";\r\n      if (VStringService._getValueToString(strDate) != \"\")\r\n        year = VStringService._getValueToString(strDate).substring(4, 2);\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n      }\r\n      let templates = this.select.templatesTT78;\r\n      this.select.templatesTT78 = [];\r\n      if (templates && templates.length > 0) {\r\n        templates.forEach(item => {\r\n          if (VStringService._getValueToString(item.name) != \"\")\r\n            item.name = item.name.replace(item.name.substring(4, 2), year);\r\n          // for (const key in item) {\r\n          //   if (item.hasOwnProperty(key)) {\r\n          //     const value = item[key];\r\n          //     this._oTemplateTT78[key] = value;\r\n          //   }\r\n          // }\r\n          if (item.value === this.frmData.template_id) {\r\n            this.onTemplateTT78TypeChange.emit(item);\r\n            //  item.invoice_series = item.invoice_series.replace(item.invoice_series.substring(3, 1), year);\r\n            // this.frmData.invoice_series = item.invoice_series;\r\n            // this.frmData.template_code = item.template_code;\r\n          }\r\n          this.select.templatesTT78.push(item);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"import-invoices\\\">\\r\\n  <form class=\\\"form-import-invoices\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">{{ _translate.MENU.import_transport_from_excel}}</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalImportRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\" style=\\\"padding-bottom: 0px;\\\">\\r\\n      <div class=\\\"row inport-selector\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div *ngIf = \\\"!isTT78\\\" class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.invoice_form}}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [items]=\\\"invoice_releases\\\" displayExpr=\\\"name\\\" [(value)]=\\\"invoice_release_id\\\"\\r\\n                               valueExpr=\\\"value\\\" [disabled]=\\\"disabledInvoiceReleases\\\"\\r\\n                               (onValueChanged)=\\\"onInvoiceReleases($event)\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div *ngIf = \\\"isTT78\\\" class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.invoice_form}}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [items]=\\\"templatesTT78\\\" displayExpr=\\\"name\\\" [(value)]=\\\"template_id\\\"\\r\\n                               valueExpr=\\\"value\\\" [disabled]=\\\"disabledInvoiceReleases\\\"\\r\\n                               (onValueChanged)=\\\"onInvoiceTemplate($event)\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"field field-first\\\" style=\\\"width: 27%;\\\">\\r\\n              <div class=\\\"label\\\" style=\\\"width: 135px;\\\">{{ _translate.CONTROLL.LABEL.export_form }}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [(value)]=\\\"htXuat\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\" [disabled] = \\\"!configs.system_parameter.allow_keep_invoice_number\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.file_name }}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-text-box [readOnly]=\\\"true\\\" style=\\\"width: 92.5%!important; border-style: solid!important;\\\"\\r\\n                             [value]=\\\"fileName\\\"></dx-text-box>\\r\\n              </div>\\r\\n              <div class=\\\"btn-select-file\\\" style=\\\"margin-left: 10px;margin-top: 13px;\\\">\\r\\n                <a href=\\\"javascript:void(0)\\\" (click)=\\\"napDuLieuTuBangKe()\\\" class=\\\"support-link\\\">\\r\\n                  <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx, .xls\\\" (change)=\\\"onFileChanged($event)\\\"\\r\\n                         multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n                  <span>{{ _translate.CONTROLL.LABEL.select_file }}</span>\\r\\n                </a>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"note-template-import\\\">\\r\\n        <p><span style=\\\"font-weight: 600; color: red; padding-right: 5px;\\\">{{ _translate.CONTROLL.LABEL.note1 }}</span> {{ _translate.CONTROLL.LABEL.import_list_internal_transport_from_file_excel }}</p>\\r\\n        <p style=\\\"margin-left: 43px;\\\">{{ _translate.CONTROLL.LABEL.correct_format_download_template }} <a\\r\\n          href=\\\"javascript:void(0)\\\" style=\\\"font-weight: 600\\\" (click)=\\\"getFileTemp()\\\">{{ _translate.CONTROLL.LABEL.click_here }}</a></p>\\r\\n      </div>\\r\\n      <div class=\\\"read-file\\\">\\r\\n        <dx-button (click)=\\\"chonDocFile()\\\" text=\\\"{{ _translate.CONTROLL.LABEL.read_file_excel }}\\\" type=\\\"default\\\" [disabled]=\\\"isDisReadFile\\\"></dx-button>\\r\\n        <dx-button (click)=\\\"configColumn()\\\" text=\\\"{{ _translate.CONTROLL.LABEL.config }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n      <!-- phần table hiển thị -->\\r\\n      <div class=\\\"row invoice-table\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <dx-data-grid id=\\\"gridImportInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n                        [wordWrapEnabled]=\\\"true\\\" [columnAutoWidth]=\\\"false\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n                        [columnMinWidth]=\\\"50\\\"\\r\\n                        [columnResizingMode]=\\\"true\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n                        (onEditorPreparing)=\\\"onEditorPreparing($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\"\\r\\n                        (onCellPrepared)=\\\"onCellPrepared($event)\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n                        (onRowUpdated)=\\\"onRowUpdated($event)\\\" (onRowRemoving)=\\\"onRowRemoving($event)\\\"\\r\\n                        (onKeyDown)=\\\"onGripKeyDown($event)\\\">\\r\\n            <!-- <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling> -->\\r\\n            <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\" [allowDeleting]=\\\"true\\\" [useIcons]=\\\"true\\\">\\r\\n            </dxo-editing>\\r\\n            <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n            <dxo-column-fixing [enabled]=\\\"true\\\"></dxo-column-fixing>\\r\\n            <!-- Số phiếu -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('number_of_vouchers').is_visible\\\" dataField=\\\"number_of_vouchers\\\" [width]=\\\"130\\\"\\r\\n                        caption=\\\"{{infoColumn('number_of_vouchers').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n                        fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Ngày phiếu xuất kho -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('invoice_date').is_visible\\\" dataField=\\\"invoice_date\\\"\\r\\n                        caption=\\\"{{infoColumn('invoice_date').column_name}}\\\" [width]=\\\"140\\\" dataType=\\\"date\\\"\\r\\n                        format=\\\"dd/MM/yyyy\\\"\\r\\n                        dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n                        fixedPosition=\\\"left\\\">\\r\\n                      </dxi-column>\\r\\n            <!-- Căn cứ lệnh điều động số -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('delivery_order_number').is_visible\\\" dataField=\\\"delivery_order_number\\\"\\r\\n                        [width]=\\\"105\\\" caption=\\\"{{infoColumn('delivery_order_number').column_name}}\\\" alignment=\\\"center\\\"\\r\\n                        [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n            <!-- Ngày lệnh điều động-->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('delivery_order_date').is_visible\\\" dataField=\\\"delivery_order_date\\\"\\r\\n                        caption=\\\"{{infoColumn('delivery_order_date').column_name}}\\\" [width]=\\\"140\\\" dataType=\\\"date\\\"\\r\\n                        format=\\\"dd/MM/yyyy\\\"\\r\\n                        dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n                        fixedPosition=\\\"left\\\">\\r\\n                      </dxi-column>\\r\\n            <!-- Loại tiền -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('currency_code').is_visible\\\" dataField=\\\"currency_code\\\" [width]=\\\"77\\\"\\r\\n                        caption=\\\"{{infoColumn('currency_code').column_name}}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n                        fixedPosition=\\\"left\\\"></dxi-column>\\r\\n            <!-- Tỷ giá -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('currency_rate').is_visible\\\" dataField=\\\"currency_rate\\\" [width]=\\\"90\\\"\\r\\n                        caption=\\\"{{infoColumn('currency_rate').column_name}}\\\"\\r\\n                        format=\\\"0,###.##\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Của -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('delivery_order_by').is_visible\\\" dataField=\\\"delivery_order_by\\\" [width]=\\\"267\\\"\\r\\n                        caption=\\\"{{infoColumn('delivery_order_by').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Mã số thuế kho nhận -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_tax_code').is_visible\\\" dataField=\\\"buyer_tax_code\\\" [width]=\\\"150\\\"\\r\\n                        caption=\\\"MST kho nhận\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Về việc -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('delivery_order_content').is_visible\\\" dataField=\\\"delivery_order_content\\\" [width]=\\\"252\\\"\\r\\n                        caption=\\\"{{infoColumn('delivery_order_content').column_name}}\\\" alignment=\\\"left\\\" >\\r\\n            </dxi-column>\\r\\n            <!-- Email nhận hóa đơn -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_email').is_visible\\\" dataField=\\\"buyer_email\\\" [width]=\\\"222\\\"\\r\\n                        caption=\\\"{{infoColumn('buyer_email').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"emailPattern\\\" message=\\\"Email {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n            <!-- Người vận chuyển -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('delivery_by').is_visible\\\" dataField=\\\"delivery_by\\\" [width]=\\\"163\\\"\\r\\n                         caption=\\\"{{infoColumn('delivery_by').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số điện thoại người vận chuyển -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('carrier_mobile').is_visible\\\" dataField=\\\"carrier_mobile\\\" [width]=\\\"163\\\"\\r\\n                        caption=\\\"{{infoColumn('carrier_mobile').column_name}}\\\" alignment=\\\"left\\\">\\r\\n                <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"phonePattern\\\" message=\\\"{{_translate.CONTROLL.LABEL.carrier_mobile}} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n                </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n            <!-- Email người vận chuyển -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('carrier_email').is_visible\\\" dataField=\\\"carrier_email\\\" [width]=\\\"222\\\"\\r\\n                        caption=\\\"{{infoColumn('carrier_email').column_name}}\\\" alignment=\\\"left\\\">\\r\\n                <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"emailPattern\\\" message=\\\"Email {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n                </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n            <!-- Hợp đồng số -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('transportation_contract').is_visible\\\" dataField=\\\"transportation_contract\\\" [width]=\\\"112\\\"\\r\\n                         caption=\\\"{{infoColumn('transportation_contract').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Phương tiện vận chuyển -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('transportation_method').is_visible\\\" dataField=\\\"transportation_method\\\" [width]=\\\"157\\\"\\r\\n                         caption=\\\"{{infoColumn('transportation_method').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Xuất tại kho -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('from_warehouse_name').is_visible\\\" dataField=\\\"from_warehouse\\\"\\r\\n                        [editorOptions]=\\\"lookupColumnOptionsFromWarehouse\\\" caption=\\\"{{infoColumn('from_warehouse_name').column_name}}\\\"\\r\\n                        [width]=\\\"269\\\"\\r\\n                        alignment=\\\"left\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.wavehourses\\\" displayExpr=\\\"name\\\" valueExpr=\\\"id\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Địa chỉ kho xuất hàng -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('shiping_point').is_visible\\\" dataField=\\\"shiping_point\\\" [width]=\\\"296\\\"\\r\\n                        caption=\\\"{{infoColumn('shiping_point').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Nhập tại kho -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('to_warehouse_name').is_visible\\\" dataField=\\\"to_warehouse\\\"\\r\\n                        [editorOptions]=\\\"lookupColumnOptionsToWarehouse\\\" caption=\\\"{{infoColumn('to_warehouse_name').column_name}}\\\"\\r\\n                        [width]=\\\"269\\\"\\r\\n                        alignment=\\\"left\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.wavehourses\\\" displayExpr=\\\"name\\\" valueExpr=\\\"id\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Địa chỉ kho nhập hàng -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('place_of_delivery').is_visible\\\" dataField=\\\"place_of_delivery\\\" [width]=\\\"296\\\"\\r\\n                        caption=\\\"{{infoColumn('place_of_delivery').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Mã hàng hóa -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('product_code').is_visible\\\" dataField=\\\"product_code\\\"\\r\\n                        [editorOptions]=\\\"{showClearButton: true}\\\" caption=\\\"{{infoColumn('product_code').column_name}}\\\"\\r\\n                        alignment=\\\"center\\\" [width]=\\\"100\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.products\\\" displayExpr=\\\"code\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Tên hàng hóa -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('product_name').is_visible\\\" dataField=\\\"product_name\\\" [width]=\\\"150\\\"\\r\\n                        caption=\\\"{{infoColumn('product_name').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Đơn hàng hợp đồng -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('contract_order').is_visible\\\" dataField=\\\"contract_order\\\" [width]=\\\"150\\\"\\r\\n                        caption=\\\"{{infoColumn('contract_order').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Diễn giải -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('is_promotion').is_visible\\\" dataField=\\\"is_promotion\\\" [width]=\\\"100\\\"\\r\\n                        caption=\\\"{{infoColumn('is_promotion').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Đơn vị tính -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('unit_name').is_visible\\\" dataField=\\\"unit_code\\\"\\r\\n                        [editorOptions]=\\\"lookupColumnOptions\\\" caption=\\\"{{infoColumn('unit_name').column_name}}\\\"\\r\\n                        [width]=\\\"100\\\"\\r\\n                        alignment=\\\"center\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- SL thực xuất -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('number_real_export').is_visible\\\" dataField=\\\"number_real_export\\\" [width]=\\\"90\\\"\\r\\n                        caption=\\\"{{infoColumn('number_real_export').column_name}}\\\" [editorOptions]=\\\"{ format: formatter.so_luong }\\\"\\r\\n                        [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- SL thực nhập -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('number_real_import').is_visible\\\" dataField=\\\"number_real_import\\\" [width]=\\\"90\\\"\\r\\n                        caption=\\\"{{infoColumn('number_real_import').column_name}}\\\" [editorOptions]=\\\"{ format: formatter.so_luong }\\\"\\r\\n                        [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Đơn giá -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('price').is_visible\\\" dataField=\\\"price\\\"\\r\\n                        caption=\\\"{{infoColumn('price').column_name}}\\\" [width]=\\\"90\\\"\\r\\n                        [editorOptions]=\\\"{ format: formatter.don_gia }\\\"\\r\\n                        [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Thành tiền -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount').is_visible\\\" dataField=\\\"amount\\\"\\r\\n                        caption=\\\"{{infoColumn('amount').column_name}}\\\" [width]=\\\"109\\\"\\r\\n                        [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                        dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tổng tiền -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount_after_vat').is_visible\\\" dataField=\\\"amount_after_vat\\\"\\r\\n                        caption=\\\"{{infoColumn('amount_after_vat').column_name}}\\\" [width]=\\\"130\\\"\\r\\n                        [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                        dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Ghi chú -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('note').is_visible\\\" dataField=\\\"note\\\" [width]=\\\"100\\\"\\r\\n                        caption=\\\"{{infoColumn('note').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column cellTemplate=\\\"DinhKemFile\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.attach_file }}\\\" [width]=\\\"250\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Template -->\\r\\n            <!-- <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n              <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i\\r\\n                class=\\\"fa fa-times\\\"></i></a>\\r\\n            </div> -->\\r\\n            <div *dxTemplate=\\\"let data of 'DinhKemFile'\\\">\\r\\n              <a href=\\\"javascript:void(0)\\\" (click)=\\\"dinhKemFile($event)\\\" *ngIf=\\\"data.data.number_of_vouchers != ''\\\">\\r\\n                <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"data.rowIndex\\\"\\r\\n                       accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\"\\r\\n                       style=\\\"display: none;\\\"/>\\r\\n                 {{ _translate.CONTROLL.LABEL.select_file }}\\r\\n                <p>{{data.data.file_attach_name}}</p>\\r\\n              </a>\\r\\n            </div>\\r\\n            <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n            <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n          </dx-data-grid>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-md-7\\\">\\r\\n          <div class=\\\"note-footer\\\">\\r\\n            <p style=\\\"margin-left: 0;\\\"><span style=\\\"font-weight: 500; color: red;\\\">{{ _translate.GRID.GENERAL.note }}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.can_edit_delete_on_grid }}</p>\\r\\n            <p><span class=\\\"mau-vang\\\"> </span>{{ _translate.CONTROLL.LABEL.yellow_number_of_voucher }}</p>\\r\\n            <p><span class=\\\"mau-do\\\"> </span>{{ _translate.CONTROLL.LABEL.red_incorrect_format }}</p>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"col-md-5\\\">\\r\\n          <div class=\\\"note-footer\\\" style=\\\"text-align: right; margin-right: 50px;\\\">\\r\\n            <p style=\\\"padding: 8px;\\\"></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_valid_documents }} <span style=\\\"color: seagreen; font-weight: 600\\\">{{totalInvoiceInvalid}}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_voucher_wrong_format }} <span\\r\\n              style=\\\"color: red; font-weight: 600\\\">{{totalErrorInvoice}}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_voucher_duplicate }} <span style=\\\"color: yellow; font-weight: 600\\\">{{totalDuplicateInvoice}}</span></p>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice }}\\\"\\r\\n                   (click)=\\\"preview()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"!isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice }}\\\" (click)=\\\"xemHoaDon()\\\"\\r\\n                   type=\\\"default\\\"></dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"!isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\In.png\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.print_conversion }}\\\"\\r\\n                   (click)=\\\"inChuyenDoi()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <!-- <dx-button *ngIf=\\\"configs.system_parameter.digitally_sign_the_delivery\\\" (click)=\\\"inlenhdieudong()\\\" [(icon)]=\\\"this._translate.ICONS.print\\\" text=\\\"{{_translate.CONTROLL.BUTTON.print_maneuver_command }}\\\" type=\\\"default\\\"></dx-button> -->\\r\\n      </div>\\r\\n      <div class=\\\"col-md-8 btn-right\\\">\\r\\n        <dx-button  text=\\\"{{ _translate.CONTROLL.BUTTON.come_back}}\\\" type=\\\"default\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" (click)=\\\"dong()\\\">\\r\\n        </dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" icon=\\\"assets\\\\img\\\\icons\\\\GhiTam.png\\\" (click)=\\\"submit('LUU')\\\"\\r\\n          type=\\\"default\\\"></dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit && isAccessExportInv\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\"\\r\\n                   icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"submit('XUAT')\\\" type=\\\"default\\\"></dx-button>\\r\\n        <!-- <dx-button *ngIf=\\\"configs.system_parameter.digitally_sign_the_delivery\\\" (click)=\\\"kylenhdieudong()\\\" [(icon)]=\\\"this._translate.ICONS.pencil\\\" text=\\\"{{_translate.CONTROLL.BUTTON.sign_maneuver_command }}\\\" type=\\\"default\\\"></dx-button> -->\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.processing }}\\\"\\r\\n          [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n          [(visible)]=\\\"showPopupImport\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"500\\\" [height]=\\\"160\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\" [dragEnabled]=\\\"false\\\"\\r\\n          [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"popupCachNapDuLieu\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p>{{ _translate.CONTROLL.LABEL.please_choose_load_data }} </p>\\r\\n    <div class=\\\"text-center\\\" style=\\\"margin-top: 25px\\\">\\r\\n      <dx-button (click)=\\\"thayThe($event)\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"themTiep($event)\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</dx-popup>\\r\\n\"","module.exports = \".import-invoices .dx-texteditor{border-radius:0;display:inline-block;margin-right:8px;height:28px;max-height:32px}.import-invoices .select-file .field>div{display:inline-block;vertical-align:middle}.import-invoices .select-file{width:100%;display:inline-block;margin:0}.import-invoices .select-file .field .label{width:90px;margin-right:10px;text-align:right;margin-top:7px}.import-invoices .select-file .field .value{width:35% !important;margin-top:10px}.import-invoices .select-file .field.field-first{display:inline-block}.import-invoices .select-file .field.field-first .value{width:calc(100% - 150px) !important}::ng-deep .import-invoices .select-file .field .dx-texteditor{width:100% !important}.support-link{top:-2px;position:relative;padding:5px 25px 7px 25px;background-color:#337ab7;border-color:#2d6da3;color:#fff;text-decoration:none}.support-link.mgr-15{margin-right:15px}.support-link img{margin-right:10px;margin-top:-2px}#auto-input{margin-right:75px}.note-template-import{margin-top:10px;margin-left:52px;display:inline-block;width:39%}.read-file{display:inline-block;margin-left:6px;position:relative;top:-10px}.note-footer{margin-top:10px}.note-footer p{margin-left:20px;margin-bottom:5px}.mau-vang{padding-right:15px;margin-right:10px;background-color:yellow}.mau-do{padding-right:15px;margin-right:10px;background-color:red}::ng-deep #gridImportInvoice{height:400px}::ng-deep .btn-right{padding-right:0}::ng-deep .btn-right .dx-button{float:right}::ng-deep .btn-right .dx-button:last-child{margin-right:8px !important}::ng-deep #gridImportInvoice .dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit{width:40px;min-width:20px !important}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-validator.dx-datagrid-invalid .dx-highlight-outline::after{border:2px solid #d9534f}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-cell-modified .dx-highlight-outline::after{border-color:#fff}::ng-deep .form-import-invoices .inport-selector .dx-texteditor-input{padding-bottom:15px}::ng-deep .notify-modal{max-width:22%}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild, Input, AfterViewInit } from '@angular/core';\r\n\r\nimport { SocketService, AuthService, Library, sEnum, Helper, VChanggeMoneyService, VStringService, VPreviewInvService } from '@core/index';\r\n\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { ConfigColumnImportExcelComponent, NotifySuccessComponent } from '@shared/index';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String, StringBuilder } from 'typescript-string-operations';\r\nimport * as XLSX from 'xlsx';\r\nimport { pattern } from '@config/index';\r\nimport * as moment from 'moment';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { ViewInvoiceComponent } from '../view-invoice/view-invoice.component';\r\nimport { Location } from '@angular/common';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-import-invoices-from-excel',\r\n  templateUrl: './import-invoices-from-excel.component.html',\r\n  styleUrls: ['./import-invoices-from-excel.component.scss']\r\n})\r\nexport class ImportInvoicesFromExcelComponent implements OnInit, AfterViewInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n\r\n  dataSource: any = [];\r\n  invoiceOptions: any = [];\r\n  columns: any = [];\r\n  invoice_releases: any;\r\n  isHdGTGT: any;\r\n  fileName = \"\";\r\n  dataExcelFile: any;\r\n  target: DataTransfer;\r\n  isDisReadFile = true;\r\n  select: any = {};\r\n  isAccessExportInv: boolean = false;\r\n  configs: any;\r\n  formatter: any = {};\r\n  frmData = new InvoiceModel(1);\r\n  fieldDisable = [\"number_of_vouchers\", \"from_warehouse_date\", \"delivery_order_number\", \"delivery_order_date\", \"currency_code\", \"currency_rate\", \"delivery_order_by\", \"buyer_tax_code\", \"delivery_order_content\", \"invoice_date\", \"buyer_email\", \"delivery_by\", \"transportation_contract\", \"transportation_method\", \"from_warehouse\", \"shiping_point\", \"to_warehouse\", \"place_of_delivery\", \"carrier_email\", \"carrier_mobile\"];\r\n  invoice_release_id: any;\r\n  template_id: any;\r\n  invoice_date = \"\";\r\n  invoice_number = \"\";\r\n  isAllowEditInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuat = \"XuatVaKy\";\r\n  bsModalRef: BsModalRef;\r\n  listColumn: any = [];\r\n  htXuatOptions = [];\r\n  ioSignature: Subscription;\r\n  tempKiFile = 0;\r\n  ttDaXuatHoaDon: boolean = false; //Trạng thái đã xuất hóa đơn hay chưa\r\n  invoicesArr: any;\r\n  invoice: any;\r\n  totalInvoice = 0;\r\n  totalErrorInvoice = 0;\r\n  totalDuplicateInvoice = 0;\r\n  countInvoice = 1;\r\n  valueProgress: number = 0;\r\n  showPopupImport = false;\r\n  stopImport = false;\r\n  subXuatHoaDon: any;\r\n  subLuuChoXuat: any;\r\n  errorImport = false;\r\n  hoaDonImportChoXuat: any;\r\n  invoicesHaveNumberOfVouchers: any;\r\n  taxCodePattern = pattern.tax_code;\r\n  emailPattern = pattern.email;\r\n  phonePattern = pattern.phone;\r\n  datetimePattern = pattern.datetime;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  isVisibleBtnSubmit = true;\r\n  approveRequired = false;\r\n  dataFormGird = [];\r\n  disabledInvoiceReleases: boolean = false;\r\n  bsModalSignRef: BsModalRef;\r\n  invoicesId = [];\r\n  is_multi_vat: any;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  popupCachNapDuLieu = false;\r\n  cachNapDuLieu = true;\r\n  _translate: any;\r\n  currentUser: any;\r\n  nodeSign: any;\r\n  totalInvoiceInvalid: any;\r\n  templatesTT78: any;\r\n  infoDangKy: any;\r\n  fields: any;\r\n  isTT78: boolean = false;\r\n  template_code: any;\r\n  invoice_series: any;\r\n  constructor(\r\n    public bsModalImportRef: BsModalRef,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    public bsModalViewModel: BsModalRef,\r\n    private modalImportService: BsModalService,\r\n    private _location: Location\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    //get  cấu hình\r\n    this.connectWebsocket();\r\n    this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate);\r\n    //this.htXuatOptions.splice(1, 1);\r\n    this.configs = this.authService.getConfigs();\r\n    this.loadRow(10);\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    if (this.configs.config_column_import_transport_excel && this.configs.config_column_import_transport_excel.length > 0) {\r\n      this.listColumn = Helper.listColumnForPXK(this._translate);\r\n      this.listColumn.forEach(item => {\r\n        let _obj = this.configs.config_column_import_transport_excel.filter(p => p.column_code == item.column_code)[0];\r\n        if (_obj) {\r\n          item.is_visible = _obj.is_visible;\r\n        }\r\n      });\r\n    } else {\r\n      this.listColumn = Helper.listColumnForPXK(this._translate);\r\n    }\r\n    if (this.infoDangKy) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n        this.isTT78 = true;\r\n        if (this.templatesTT78 && this.templatesTT78.length > 0)\r\n          this.templatesTT78 = this.templatesTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n      }\r\n    }\r\n    if (!this.isTT78) {\r\n      if (this.invoice_releases && this.invoice_releases.length > 0) {\r\n        if (!this.hoaDonImportChoXuat)\r\n          this.invoice_release_id = this.invoice_releases[0].value;\r\n        this.template_id = this.invoice_releases[0].template_id;\r\n        this.is_multi_vat = this.invoice_releases[0].is_multi_vat;\r\n      }\r\n    }\r\n    else {\r\n      if (this.templatesTT78 && this.templatesTT78.length > 0) {\r\n        this.invoice_series = this.templatesTT78[0].invoice_series;\r\n        this.template_code = this.templatesTT78[0].template_code;\r\n        this.template_id = this.templatesTT78[0].value;\r\n        this.is_multi_vat = this.templatesTT78[0].is_multi_vat;\r\n      }\r\n    }\r\n    if (this.hoaDonImportChoXuat) {\r\n      this.invoice_date = this.hoaDonImportChoXuat[0].invoice_date ? moment(this.hoaDonImportChoXuat[0].invoice_date).format('YYYY-MM-DD HH:mm:ss') : \"\";\r\n      if (!this.isTT78)\r\n        this.invoice_release_id = this.hoaDonImportChoXuat[0].invoice_release_id;\r\n      else\r\n        this.template_id = this.hoaDonImportChoXuat[0].template_id;\r\n      this.htXuat = this.hoaDonImportChoXuat[0].status;\r\n      if (this.htXuat == sEnum.statusInv.GhiTam)\r\n        this.htXuat = 'XuatVaKy';\r\n\r\n\r\n      if (!this.isTT78) {\r\n        if (this.invoice_releases && this.invoice_releases.length > 0) {\r\n          let template = this.invoice_releases.filter(p => p.value == this.invoice_release_id);\r\n          if (template.length > 0) {\r\n            this.is_multi_vat = template[0].is_multi_vat;\r\n          }\r\n          if (this.hoaDonImportChoXuat[0].status == \"GIU_SO\") {\r\n            this.disabledInvoiceReleases = true;\r\n          }\r\n          this.layDuLieuTuHoaDonChoXuat();\r\n        }\r\n      }\r\n      else {\r\n        if (this.templatesTT78 && this.templatesTT78.length > 0) {\r\n          let template = this.templatesTT78.filter(p => p.value == this.template_id);\r\n          if (template.length > 0) {\r\n            this.is_multi_vat = template[0].is_multi_vat;\r\n          }\r\n          if (this.hoaDonImportChoXuat[0].status == \"GIU_SO\") {\r\n            this.disabledInvoiceReleases = true;\r\n          }\r\n          this.layDuLieuTuHoaDonChoXuat();\r\n        }\r\n      }\r\n    }\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    let listpermissions = this.currentUser.user.permissions.split(',');\r\n    let _obj = listpermissions.filter(p => p == \"phe_duyet\");\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else\r\n      this.isAccessExportInv = false;\r\n    if (this.templatesTT78 && this.templatesTT78[0] && this.templatesTT78[0].fields && this.templatesTT78[0].fields.length > 0) {\r\n      const _dulieumorong = this.templatesTT78[0].fields.filter(x => x.type === '4');\r\n      if (_dulieumorong.length > 0) {\r\n        _dulieumorong.forEach(item => {\r\n          let itemPlus = {\r\n            column_code: item.code,\r\n            column_name: item.name,\r\n            is_visible: true\r\n          }\r\n          this.listColumn.push(itemPlus);\r\n        })\r\n      }\r\n    }\r\n    this.dataSource.forEach((item, index) => {\r\n      if (item.product_name && item.unit_name) {\r\n        const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n        if (!obj1) {\r\n          if (VStringService._getValueToString(item.unit_code) == \"\")\r\n            item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n          let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n          if (oDuplicate)\r\n            item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n          this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n        }\r\n        else {\r\n          if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n            let oExistUnitCode = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n            if (!oExistUnitCode)\r\n              this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n  ngAfterViewInit() {\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.push(item);\r\n      });\r\n    }\r\n  }\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.xuLiApiKhiXuat();\r\n          } else {\r\n            this.invoice.invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoice.invoice_files.length) {\r\n              this.xuLiApiKhiXuat();\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.errorImport = true;\r\n        this.showPopupImport = false;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  layDuLieuTuHoaDonChoXuat() {\r\n    let data = [];\r\n    this.hoaDonImportChoXuat.forEach(invoice => {\r\n      // console.log(element)\r\n      for (let i = 0; i < invoice.invoice_products.length; i++) {\r\n        let rowInvoice = new Object;\r\n        invoice.invoice_products = invoice.invoice_products.sort((itemA, itemB) => {\r\n          return itemA.order - itemB.order;\r\n        });\r\n        let product = invoice.invoice_products[i];\r\n        this.invoice_release_id = invoice.invoice_release_id;\r\n        this.template_code = invoice.template_code;\r\n        this.invoice_series = invoice.invoice_series;\r\n        this.template_id = invoice.template_id;\r\n        if (i == 0) {\r\n          this.invoicesId.push(invoice.id)\r\n          rowInvoice[\"statusData\"] = \"INVALID\";\r\n          rowInvoice[\"id\"] = invoice.id;\r\n          rowInvoice[\"number_of_vouchers\"] = invoice.number_of_vouchers;\r\n          rowInvoice[\"place_of_delivery\"] = invoice.place_of_delivery;\r\n          rowInvoice[\"shiping_point\"] = invoice.shiping_point;\r\n          rowInvoice[\"from_warehouse_date\"] = invoice.from_warehouse_date;\r\n          rowInvoice[\"delivery_order_number\"] = invoice.delivery_order_number;\r\n          rowInvoice[\"delivery_order_date\"] = invoice.delivery_order_date;\r\n          rowInvoice[\"currency_code\"] = invoice.currency_code;\r\n          rowInvoice[\"delivery_order_by\"] = invoice.delivery_order_by;\r\n          rowInvoice[\"buyer_tax_code\"] = invoice.buyer_tax_code;\r\n          rowInvoice[\"delivery_order_content\"] = invoice.delivery_order_content;\r\n          rowInvoice[\"transportation_contract\"] = invoice.transportation_contract;\r\n          rowInvoice[\"transportation_method\"] = invoice.transportation_method;\r\n          rowInvoice[\"to_warehouse_name\"] = invoice.to_warehouse_name;\r\n          rowInvoice[\"to_warehouse\"] = invoice.to_warehouse;\r\n          this.addWareToWareHouse(invoice.to_warehouse, invoice.to_warehouse_name);\r\n          rowInvoice[\"from_warehouse_name\"] = invoice.from_warehouse_name;\r\n          rowInvoice[\"from_warehouse\"] = invoice.from_warehouse;\r\n          this.addWareToWareHouse(invoice.from_warehouse, invoice.from_warehouse_name);\r\n          rowInvoice[\"delivery_by\"] = invoice.delivery_by;\r\n          rowInvoice[\"carrier_mobile\"] = invoice.carrier_mobile;\r\n          rowInvoice[\"carrier_email\"] = invoice.carrier_email;\r\n          rowInvoice[\"currency_rate\"] = invoice.currency_rate;\r\n          rowInvoice[\"buyer_email\"] = invoice.buyer_email;\r\n          rowInvoice[\"note\"] = invoice.note;\r\n          rowInvoice[\"invoice_number\"] = invoice.invoice_number;\r\n          rowInvoice[\"invoice_date\"] = invoice.invoice_date;\r\n          rowInvoice[\"total_payment\"] = invoice.total_payment;\r\n          rowInvoice[\"dataType\"] = \"KHACH_HANG\";\r\n        } else {\r\n          rowInvoice[\"number_of_vouchers\"] = \"\";\r\n          rowInvoice[\"is_promotion\"] = false;/* Diễn giải */\r\n          rowInvoice[\"total_payment\"] = null;\r\n          rowInvoice[\"invoice_amount\"] = null;\r\n          rowInvoice[\"place_of_delivery\"] = \"\";\r\n          rowInvoice[\"shiping_point\"] = \"\";\r\n          rowInvoice[\"from_warehouse_date\"] = \"\";\r\n          rowInvoice[\"delivery_order_number\"] = \"\";\r\n          rowInvoice[\"delivery_order_date\"] = \"\";\r\n          rowInvoice[\"currency_code\"] = \"\";\r\n          rowInvoice[\"delivery_order_by\"] = \"\";\r\n          rowInvoice[\"buyer_tax_code\"] = \"\";\r\n          rowInvoice[\"delivery_order_content\"] = \"\";\r\n          rowInvoice[\"transportation_contract\"] = \"\";\r\n          rowInvoice[\"transportation_method\"] = \"\";\r\n          rowInvoice[\"to_warehouse_name\"] = \"\";\r\n          rowInvoice[\"to_warehouse\"] = \"\";\r\n          rowInvoice[\"from_warehouse_name\"] = \"\";\r\n          rowInvoice[\"from_warehouse\"] = \"\";\r\n          rowInvoice[\"delivery_by\"] = \"\";\r\n          rowInvoice[\"carrier_email\"] = \"\";\r\n          rowInvoice[\"carrier_mobile\"] = \"\";\r\n          rowInvoice[\"currency_rate\"] = null;\r\n          rowInvoice[\"buyer_email\"] = \"\";\r\n          rowInvoice[\"note\"] = \"\";\r\n          rowInvoice[\"dataType\"] = \"HANG_HOA\";\r\n          rowInvoice[\"productNumberOfVouchers\"] = invoice.number_of_vouchers;\r\n        }\r\n        rowInvoice[\"is_promotion\"] = product.is_promotion;/* Diễn giải */\r\n        rowInvoice[\"product_code\"] = product.product_code;\r\n        rowInvoice[\"product_name\"] = product.product_name;\r\n        rowInvoice[\"contract_order\"] = product.contract_order;\r\n        rowInvoice[\"unit_code\"] = product.unit_code;\r\n        rowInvoice[\"unit_name\"] = product.unit_name;\r\n        rowInvoice[\"quantity\"] = product.quantity;\r\n        rowInvoice[\"number_real_export\"] = product.number_real_export;\r\n        rowInvoice[\"number_real_import\"] = product.number_real_import;\r\n        rowInvoice[\"price\"] = product.price;\r\n        rowInvoice[\"amount\"] = product.amount;\r\n        rowInvoice[\"amount_after_vat\"] = product.amount_after_vat;\r\n        rowInvoice[\"order\"] = product.order;\r\n        rowInvoice[\"view_order\"] = product.view_order;\r\n        data.push(rowInvoice);\r\n      }\r\n    });\r\n    this.dataSource = data;\r\n    this.checkStatusData();\r\n  }\r\n  cktmChange() {\r\n\r\n  }\r\n  loadRow(countRow) {\r\n    let tempRow = this.frmData.tempImportRow(countRow, false);\r\n    tempRow.forEach(element => {\r\n      this.dataSource.push(element);\r\n    });\r\n  }\r\n\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById(\"file-bang-ke\").click();\r\n    this.cachNapDuLieu = false;\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n  }\r\n\r\n  log(val) { console.log(val); }\r\n\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"BK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.dataSource[rowIndex][\"file_attach\"] = fileAttachData;\r\n        this.dataSource[rowIndex][\"file_attach_name\"] = file.name;\r\n      }\r\n    } else {\r\n      Library.notify(\"File \" + this._translate.VALIDATION.not_pattern + \" xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n\r\n  customizeText(e) {\r\n    if (!e.value) {\r\n      e.value = 0;\r\n    }\r\n    let formatter = new Intl.NumberFormat('ja-JP');\r\n    let totalMoney = formatter.format(parseFloat(e.value));\r\n    return totalMoney;\r\n  }\r\n\r\n  onFileChanged(evt) {\r\n    this.target = <DataTransfer>(evt.target);\r\n    this.fileName = this.target.files[0].name;\r\n    // this.fileSize = target.files[0].size/1024;\r\n    if (this.target.files.length !== 1) {\r\n      Library.notify(this._translate.NOTIFY.can_not_select_multiple_file, 'error');\r\n      throw new Error(this._translate.NOTIFY.can_not_select_multiple_file);\r\n    };\r\n    this.isDisReadFile = false;\r\n  }\r\n\r\n  addRow() {\r\n    let len, order;\r\n    if (this.dataSource.length >= 1) {\r\n      len = this.dataSource.length;\r\n      order = this.dataSource[len - 1].order + 1;\r\n    } else {\r\n      order = 1;\r\n    }\r\n    let data = this.frmData.addImportRow(order, order);\r\n    // console.log(data)\r\n    this.dataSource.push(data);\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  getFileTemp() {\r\n    Library.showloading();\r\n    let arrColumn = this.listColumn.filter(p => p.is_visible == true);\r\n    let columnsName = arrColumn.map(e => e.column_code);\r\n    let data = {\r\n      invoice: {\r\n        invoice_type: sEnum.exportType.phieuxuatkho,\r\n        columns: columnsName\r\n      }\r\n    }\r\n    this.vatService.getFileTemmpImportInvoices(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(this._translate.CONTROLL.BUTTON.export_file + \" Excel \" + this._translate.CONTROLL.LABEL.success.toLowerCase(), 'success');\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    })\r\n  }\r\n\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + ': ' + percent + '%';\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.import_data);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      if (this.subLuuChoXuat) {\r\n        this.subLuuChoXuat.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  getDataFromGird() {\r\n    if (this.dataSource.length > 0) {\r\n      this.dataSource.forEach(row => {\r\n        if (row.number_of_vouchers || row.productNumberOfVouchers) {\r\n          this.dataFormGird.push(row);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  chonDocFile() {\r\n    this.popupCachNapDuLieu = true;\r\n  }\r\n\r\n  thayThe(e) {\r\n    this.cachNapDuLieu = false;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  themTiep(e) {\r\n    this.cachNapDuLieu = true;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  readFile() {\r\n    this.isDisReadFile = true;\r\n    Library.showloading();\r\n    const reader: FileReader = new FileReader();\r\n\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      let data = <any>(XLSX.utils.sheet_to_json(ws, { header: \"A\", range: 0 }));\r\n\r\n      let fileBangKe: any = document.getElementById(\"file-bang-ke\");\r\n      fileBangKe.value = \"\";\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"number_of_vouchers\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(this._translate.NOTIFY.file_tempt_not_format, \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n        this.dataExcelFile = _arrData;\r\n        this.fillData(this.dataExcelFile);\r\n      }\r\n    };\r\n    reader.readAsBinaryString(this.target.files[0]);\r\n  }\r\n  fillData(fileData) {\r\n    this.getDataFromGird();\r\n    let data = [];\r\n    // let count = 2;\r\n    // let view_order = 0;\r\n    let numberOfVouchers = [];\r\n    let isValid = true;\r\n    let _index = 0;\r\n    fileData.forEach(element => {\r\n      let invoice = new Object;\r\n      if (element.number_of_vouchers) {\r\n        invoice[\"statusData\"] = \"INVALID\";\r\n        let invoiceDate = Helper.processDate(element.invoice_date);\r\n        if (invoiceDate == \"ERROR\") {\r\n          Library.notify(this._translate.CONTROLL.LABEL.invoice_date + \" \" + this._translate.VALIDATION.not_pattern, \"error\");\r\n          isValid = false;\r\n          return;\r\n        }\r\n        else\r\n          if (invoiceDate != \"\")\r\n            invoice[\"invoice_date\"] = invoiceDate;\r\n\r\n        let fromwarehouseDate = Helper.processDate(element.from_warehouse_date);\r\n        if (fromwarehouseDate == \"ERROR\") {\r\n          Library.notify(this._translate.CONTROLL.LABEL.from_warehouse_date + \" \" + this._translate.VALIDATION.not_pattern, \"error\");\r\n          isValid = false;\r\n          return;\r\n        }\r\n        else\r\n          if (fromwarehouseDate != \"\")\r\n            invoice[\"from_warehouse_date\"] = fromwarehouseDate;\r\n\r\n        let deliveryorderDate = Helper.processDate(element.delivery_order_date);\r\n        if (deliveryorderDate == \"ERROR\") {\r\n          Library.notify(this._translate.CONTROLL.LABEL.date + \" \" + this._translate.VALIDATION.not_pattern, \"error\");\r\n          isValid = false;\r\n          return;\r\n        }\r\n        else\r\n          if (deliveryorderDate != \"\")\r\n            invoice[\"delivery_order_date\"] = deliveryorderDate;\r\n        invoice[\"place_of_delivery\"] = element.place_of_delivery ? element.place_of_delivery : \"\";\r\n        invoice[\"shiping_point\"] = element.shiping_point ? element.shiping_point : \"\";\r\n        invoice[\"delivery_order_number\"] = element.delivery_order_number ? element.delivery_order_number : \"\";\r\n        invoice[\"currency_code\"] = element.currency_code ? element.currency_code : \"VND\";\r\n        invoice[\"delivery_order_by\"] = element.delivery_order_by ? element.delivery_order_by : \"\";\r\n        invoice[\"buyer_tax_code\"] = element.buyer_tax_code ? element.buyer_tax_code : \"\";\r\n        invoice[\"delivery_order_content\"] = element.delivery_order_content ? element.delivery_order_content : \"\";\r\n        invoice[\"transportation_contract\"] = element.transportation_contract ? element.transportation_contract : \"\";\r\n        invoice[\"transportation_method\"] = element.transportation_method ? element.transportation_method : \"\";\r\n        invoice[\"to_warehouse_name\"] = element.to_warehouse_name ? element.to_warehouse_name : \"\";\r\n        invoice[\"to_warehouse\"] = element.to_warehouse_name ? this.getWarehouseByName(element.to_warehouse_name) : \"\";\r\n        invoice[\"from_warehouse_name\"] = element.from_warehouse_name ? element.from_warehouse_name : \"\";\r\n        invoice[\"from_warehouse\"] = element.from_warehouse_name ? this.getWarehouseByName(element.from_warehouse_name) : \"\";\r\n        invoice[\"delivery_by\"] = element.delivery_by ? element.delivery_by : \"\";\r\n        invoice[\"carrier_mobile\"] = element.carrier_mobile ? element.carrier_mobile : \"\";\r\n        invoice[\"carrier_email\"] = element.carrier_email ? element.carrier_email : \"\";\r\n        invoice[\"currency_rate\"] = element.currency_rate ? element.currency_rate : null;\r\n        invoice[\"buyer_email\"] = element.buyer_email ? element.buyer_email : \"\";\r\n        invoice[\"note\"] = element.note ? element.note : \"\";\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        invoice[\"contract_order\"] = element.contract_order ? element.contract_order : \"\";\r\n        if (invoice[\"product_code\"] != \"\") {\r\n          let _obj = this.select.products.filter(p => p.code == invoice[\"product_code\"])[0];\r\n          if (!_obj) {\r\n            let _objPush = {\r\n              code: invoice[\"product_code\"],\r\n              name: invoice[\"product_name\"],\r\n              mhvth: invoice[\"product_code\"] + \": \" + invoice[\"product_name\"],\r\n            }\r\n            this.select.products.push(_objPush);\r\n          }\r\n        }\r\n        invoice[\"is_promotion\"] = element.is_promotion && (element.is_promotion == \"X\" || element.is_promotion == \"x\") ? true : false;/* Diễn giải */\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"number_real_export\"] = element.number_real_export ? Helper.toNumber(element.number_real_export) : null;\r\n        invoice[\"number_real_import\"] = element.number_real_import ? Helper.toNumber(element.number_real_import) : null;\r\n        invoice[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        invoice[\"amount\"] = element.amount && element.amount.trim() != \"-\" ? Helper.toNumber(element.amount) : null;\r\n        invoice[\"amount_after_vat\"] = element.amount_after_vat && element.amount_after_vat.trim() != \"-\" ? Helper.toNumber(element.amount_after_vat) : null;\r\n        invoice[\"note\"] = element.note ? element.note : \"\";\r\n        if (_index == 0) {\r\n          if (element.number_real_export) {\r\n            let arr = element.number_real_export.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.so_luong = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.so_luong = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n          if (element.price) {\r\n            let arr = element.price.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.don_gia = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.don_gia = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.amount) {\r\n            let arr = element.amount.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.thanh_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.thanh_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n          if (element.amount_after_vat) {\r\n            let arr = element.amount_after_vat.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n        }\r\n        _index++;\r\n        if (this.checkNumberOfVouchers(element.number_of_vouchers, data) != -1) {\r\n          let stt = Math.max.apply(Math, data.filter(p => p.number_of_vouchers == element.number_of_vouchers || p.productNumberOfVouchers == element.number_of_vouchers).map(function (o) { return o.order; }))\r\n          ++stt;\r\n          invoice[\"dataType\"] = \"HANG_HOA\";\r\n          invoice[\"number_of_vouchers\"] = \"\";\r\n          invoice[\"invoice_date\"] = \"\";\r\n          ///// HĐ xe\r\n          invoice[\"place_of_delivery\"] = \"\";\r\n          invoice[\"shiping_point\"] = \"\";\r\n          invoice[\"from_warehouse_date\"] = \"\";\r\n          invoice[\"delivery_order_number\"] = \"\";\r\n          invoice[\"delivery_order_date\"] = \"\";\r\n          invoice[\"currency_code\"] = \"\";\r\n          invoice[\"delivery_order_by\"] = \"\";\r\n          invoice[\"buyer_tax_code\"] = \"\";\r\n          invoice[\"delivery_order_content\"] = \"\";\r\n          invoice[\"transportation_contract\"] = \"\";\r\n          invoice[\"transportation_method\"] = \"\";\r\n          invoice[\"to_warehouse_name\"] = \"\";\r\n          invoice[\"from_warehouse_name\"] = \"\";\r\n          invoice[\"to_warehouse\"] = \"\";\r\n          invoice[\"from_warehouse\"] = \"\";\r\n          invoice[\"delivery_by\"] = \"\";\r\n          invoice[\"carrier_email\"] = \"\";\r\n          invoice[\"carrier_mobile\"] = \"\";\r\n          /////\r\n          invoice[\"buyer_email\"] = \"\";\r\n          invoice[\"note\"] = \"\";\r\n          invoice[\"productNumberOfVouchers\"] = element.number_of_vouchers;\r\n          invoice[\"order\"] = stt;\r\n          /* Hóa đơn Pepsi */\r\n          invoice[\"currency_rate\"] = null;\r\n          invoice[\"total_payment\"] = null;\r\n          invoice[\"invoice_amount\"] = null;\r\n          if (invoice[\"is_promotion\"]) {\r\n            invoice[\"view_order\"] = \"\";\r\n          } else\r\n            invoice[\"view_order\"] = stt;\r\n        } else {\r\n          invoice[\"number_of_vouchers_backup\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          numberOfVouchers.push(invoice[\"number_of_vouchers\"]);\r\n          invoice[\"order\"] = 1;\r\n          invoice[\"view_order\"] = 1;\r\n          invoice[\"dataType\"] = \"KHACH_HANG\";\r\n          // count = 2;\r\n          // view_order = 1;\r\n        }\r\n        data.push(invoice);\r\n      }\r\n    });\r\n    if (isValid) {\r\n      let datagroup = data.filter(p => p.number_of_vouchers);\r\n      let dataTempt = [];\r\n      if (datagroup && datagroup.length > 0) {\r\n        datagroup.forEach(e => {\r\n          let listItem = data.filter(w => w.productNumberOfVouchers == e.number_of_vouchers);\r\n          dataTempt.push(e);\r\n          if (listItem && listItem.length > 0) {\r\n            listItem.forEach(inv => {\r\n              dataTempt.push(inv);\r\n            });\r\n          }\r\n        });\r\n      }\r\n      this.invoicesHaveNumberOfVouchers = [];\r\n      if (this.configs.system_parameter.the_same_number_of_voucher) {\r\n        this.vatService.getInvoicesHaveNumberOfVouchers(numberOfVouchers).subscribe((res: any) => {\r\n          if (res.status == \"success\") {\r\n            this.invoicesHaveNumberOfVouchers = res.data.invoices;\r\n            this.checkDuplicateNumberOfVouchers(dataTempt);\r\n            this.checkStatusData();\r\n            // if(data.length < 10){\r\n            //   this.loadRow(10-data.length);\r\n            // }\r\n            this.dataGrid.instance.refresh();\r\n          }\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        this.checkDuplicateNumberOfVouchers(dataTempt);\r\n        this.checkStatusData();\r\n        this.dataGrid.instance.refresh();\r\n      }\r\n    }\r\n    Library.hideloading();\r\n\r\n  }\r\n  checkDuplicateNumberOfVouchers(data) {\r\n    if (this.cachNapDuLieu) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        let foundOnGird = this.dataFormGird.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n        if (foundOnGird.length > 0 && data[i].number_of_vouchers && data[i].statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n          data[i].statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n        }\r\n      }\r\n      this.dataSource = this.dataFormGird.concat(data);\r\n    } else {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n      }\r\n      this.dataSource = data;\r\n    }\r\n    this.dataFormGird = [];\r\n  }\r\n\r\n  checkNumberOfVouchers(numberOfVouchers, invoiceSArr) {\r\n    const foundNumberOfVouchers = invoiceSArr.findIndex((item) => {\r\n      return item.number_of_vouchers == numberOfVouchers;\r\n    });\r\n    return foundNumberOfVouchers;\r\n  }\r\n\r\n  checkStatusData() {\r\n    let datas = this.dataSource;\r\n    let invalid = this.dataSource.filter((item) => {\r\n      return item.number_of_vouchers && item.statusData == \"INVALID\";\r\n    });\r\n    let errorDuplicateDatabase = this.dataSource.filter((item) => {\r\n      return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_DATABASE\";\r\n    });\r\n    let errorDuplicateOngird = this.dataSource.filter((item) => {\r\n      return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_ONGIRD\";\r\n    });\r\n\r\n    let errorData = this.dataSource.filter((item) => {\r\n      return item.statusData == \"DATA_ERROR\";\r\n    });\r\n\r\n    this.totalInvoiceInvalid = invalid.length;\r\n    this.totalDuplicateInvoice = errorDuplicateDatabase.length;\r\n    this.totalErrorInvoice = errorDuplicateOngird.length + errorData.length;\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number == 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row) {\r\n      if (e.row.rowType === \"data\") {\r\n        e.items = [{\r\n          text: this._translate.CONTROLL.BUTTON.add + \" \" + this._translate.GRID.INVOICE.customer.toLowerCase(),\r\n          onItemClick: () => {\r\n            this.addRow();\r\n          }\r\n        },\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.add_goods,\r\n          onItemClick: () => {\r\n            if (e.row.data.number_of_vouchers || e.row.data.productNumberOfVouchers) {\r\n              let temp = e.row.data.number_of_vouchers ? e.row.data.number_of_vouchers : e.row.data.productNumberOfVouchers;\r\n              let products = this.dataSource.filter((item) => {\r\n                return item.number_of_vouchers == temp || item.productNumberOfVouchers == temp;\r\n              });\r\n              let data = this.frmData.addImportRow(products.length + 1, products.length + 1);\r\n              data.dataType = \"HANG_HOA\";\r\n              if (e.row.data.number_of_vouchers) {\r\n                data[\"productNumberOfVouchers\"] = e.row.data.number_of_vouchers;\r\n                this.dataSource.splice(e.rowIndex + products.length, 0, data);\r\n              } else {\r\n                data[\"productNumberOfVouchers\"] = e.row.data.productNumberOfVouchers;\r\n                let index = this.dataSource.map(function (e) { return e.number_of_vouchers; }).indexOf(e.row.data.number_of_vouchers);\r\n                this.dataSource.splice(index + products.length - 1, 0, data);\r\n              }\r\n\r\n              this.dataGrid.instance.refresh();\r\n            } else {\r\n              Library.notify(this._translate.GRID.INVOICE_DETAILS.number_of_vouchers + \" \" + this._translate.VALIDATION.required, \"error\");\r\n            }\r\n          }\r\n        }];\r\n      }\r\n    }\r\n  }\r\n  onInvoiceReleases(e) {\r\n    let selectedItem = e.component.option(\"selectedItem\");\r\n    this.template_id = selectedItem.template_id;\r\n    this.invoice_release_id = e.value;\r\n    this.is_multi_vat = selectedItem.is_multi_vat;\r\n  }\r\n  onInvoiceTemplate(e) {\r\n    let selectedItem = e.component.option(\"selectedItem\");\r\n    this.template_id = e.value;\r\n    this.template_code = selectedItem.template_code;\r\n    this.invoice_series = selectedItem.invoice_series;\r\n    this.is_multi_vat = selectedItem.is_multi_vat;\r\n    //Load lại danh sách cấu hình các trường\r\n    if (this.configs.config_column_import_inv_excel && this.configs.config_column_import_inv_excel.length > 0) {\r\n      this.listColumn = Helper.listColumnForPXK(this._translate);\r\n      this.listColumn.forEach(item => {\r\n        let _obj = this.configs.config_column_import_inv_excel.filter(p => p.column_code == item.column_code)[0];\r\n        if (_obj) {\r\n          item.is_visible = _obj.is_visible;\r\n        }\r\n      });\r\n    } else {\r\n      this.listColumn = Helper.listColumnForPXK(this._translate);\r\n    }\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.forEach((column, index) => {\r\n          if (column[\"dataField\"] == item.dataField)\r\n            this.dataGrid.columns.splice(index, 1);\r\n        });\r\n      });\r\n    }\r\n\r\n    this.columns = [];\r\n    this.invoiceOptions = [];\r\n\r\n    if (selectedItem.fields && selectedItem.fields.length > 0) {\r\n      const _dulieumorong = selectedItem.fields.filter(x => x.type === '4');\r\n      if (_dulieumorong.length > 0) {\r\n        _dulieumorong.forEach(item => {\r\n          if (item.is_show) {\r\n            let oField = {\r\n              column_code: item.code,\r\n              column_name: item.name,\r\n              is_visible: true\r\n            }\r\n            this.listColumn.push(oField);\r\n            let column =\r\n            {\r\n              caption: item.name,\r\n              dataField: item.code,\r\n              width: 150\r\n            };\r\n            this.columns.push(column);\r\n            let invoiceOption =\r\n            {\r\n              code: item.code,\r\n              name: item.name,\r\n              value: '',\r\n              data_type: item.data_type\r\n            }\r\n            this.invoiceOptions.push(invoiceOption);\r\n          }\r\n        });\r\n        if (this.columns.length > 0) {\r\n          this.columns.forEach(item => {\r\n            this.dataGrid.columns.push(item);\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  onContentReady(e) {\r\n    e.component.columnOption(\"command:edit\", {\r\n      visibleIndex: -1\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.row.data) {\r\n        if (e.row.data.dataType && e.row.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.dataField)) {\r\n          e.editorOptions.disabled = true;\r\n        }\r\n      }\r\n      e.editorOptions.onValueChanged = (args) => {\r\n        switch (e.dataField) {\r\n          case \"number_of_vouchers\":\r\n            this.onNumberOfVouchers(e, args.value);\r\n            break;\r\n          case \"unit_code\":\r\n            this.unitChange(e, args.value);\r\n            this.dataGrid.instance.refresh();\r\n            break;\r\n          case \"from_warehouse\":\r\n            this.fromWareHouseChange(e, args.value);\r\n            this.dataGrid.instance.refresh();\r\n            break;\r\n          case \"to_warehouse\":\r\n            this.toWareHouseChange(e, args.value);\r\n            this.dataGrid.instance.refresh();\r\n            break;\r\n          // case \"product_code\":\r\n          //   this.productCodeChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"quantity\":\r\n          // case \"price\":\r\n          // case \"amount_after_vat\":\r\n          //   this.priceChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"unit_code\":\r\n          //   this.unitChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"amount\":\r\n          //   this.amountChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          default:\r\n            break;\r\n        }\r\n        this.checkStatusData();\r\n        e.setValue(args.value);\r\n      };\r\n    }\r\n  }\r\n\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.data.dataType && e.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.column.dataField)) {\r\n        e.cellElement.style.background = \"#F1F1F1\";\r\n      }\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_ONGIRD\" && e.column.dataField == \"number_of_vouchers\") {\r\n        e.cellElement.style.background = \"#FF0000\";\r\n      }\r\n      if (e.data.number_of_vouchers) {\r\n        switch (e.column.dataField) {\r\n          case \"to_warehouse\":\r\n            this.setStatusDataOnCellPrepared(e, this._translate.CONTROLL.LABEL.to_warehouse + \" \" + this._translate.VALIDATION.required);\r\n            break;\r\n          case \"from_warehouse\":\r\n            this.setStatusDataOnCellPrepared(e, this._translate.CONTROLL.LABEL.from_warehouse + \" \" + this._translate.VALIDATION.required);\r\n            break;\r\n          case \"product_name\":\r\n            this.setStatusDataOnCellPrepared(e, this._translate.GRID.INVOICE_DETAILS.product_name + \" \" + this._translate.VALIDATION.required);\r\n            break;\r\n          case \"number_real_export\":\r\n            this.setStatusDataOnCellPrepared(e, this._translate.GRID.INVOICE_DETAILS.quantity_export + \" \" + this._translate.VALIDATION.required);\r\n            break;\r\n          case \"product_code\":\r\n            this.setStatusDataOnCellPrepared(e, this._translate.VALIDATION.required_productCode);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      } else if (e.data.number_of_vouchers == \"\" && e.data.dataType == \"KHACH_HANG\" && e.data.product_name && e.column.dataField == \"number_of_vouchers\") {\r\n        this.setStatusDataOnCellPrepared(e, this._translate.GRID.INVOICE_DETAILS.number_of_vouchers + \" \" + this._translate.VALIDATION.required);\r\n      }\r\n    }\r\n  }\r\n\r\n  setStatusDataOnCellPrepared(e, message) {\r\n    if (((e.column.dataField != \"amount\" && e.column.dataField != \"amount_after_vat\" && e.column.dataField != \"product_code\") && (e.value == null || e.value == \"\")) || (e.column.dataField == \"product_code\" && VStringService._getValueToString(e.value) != \"\" && !this.productCodePattern.test(e.value))) {\r\n      e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n      e.cellElement.title = message;\r\n      if (e.data.statusData != \"ERROR_DUPLICATE_DATABASE\" && e.data.statusData != \"ERROR_DUPLICATE_ONGIRD\") e.data.statusData = \"DATA_ERROR\";\r\n    }\r\n    else {\r\n      if (VStringService._getValueToString(e.data.product_code) != \"\" && !this.productCodePattern.test(e.data.product_code))\r\n        e.data.statusData == \"DATA_ERROR\";\r\n      else\r\n        if (e.data.product_name == null || e.data.product_name == \"\")\r\n          e.data.statusData == \"DATA_ERROR\";\r\n        else\r\n          if (e.data.from_warehouse == null || e.data.from_warehouse == \"\")\r\n            e.data.statusData == \"DATA_ERROR\";\r\n          else\r\n            if (e.data.to_warehouse == null || e.data.to_warehouse == \"\")\r\n              e.data.statusData == \"DATA_ERROR\";\r\n            else if (e.key.statusData != \"ERROR_DUPLICATE_DATABASE\")\r\n              e.data.statusData = \"INVALID\"\r\n            else\r\n              if (e.data.number_real_export == null)\r\n                e.data.statusData == \"DATA_ERROR\";\r\n              else if (e.data.number_of_vouchers == \"\" && e.data.dataType == \"KHACH_HANG\" && e.data.product_name && e.column.dataField == \"number_of_vouchers\")\r\n                e.data.statusData == \"DATA_ERROR\";\r\n              else\r\n                e.data.statusData = \"INVALID\"\r\n    }\r\n  }\r\n  onRowRemoving(e) {\r\n    const number_of_vouchers = e.data.number_of_vouchers\r\n    let indexRemove = [];\r\n    this.dataSource.forEach(row => {\r\n      if (row.productNumberOfVouchers == number_of_vouchers) {\r\n        indexRemove.push(this.dataSource.indexOf(row));\r\n        // if(row.statusData){\r\n        //   if(row.statusData == \"ERROR_DUPLICATE_DATABASE\") this.totalDuplicateInvoice--;\r\n        //   if(row.statusData == \"ERROR_DUPLICATE_ONGIRD\") this.totalErrorInvoice--;\r\n        // }\r\n      }\r\n    });\r\n    for (let i = indexRemove.length - 1; i >= 0; i--) {\r\n      this.dataSource.splice(indexRemove[i], 1);\r\n    }\r\n    this.checkStatusData();\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code == \"Delete\") {\r\n      // console.log(e.event.srcElement);\r\n      e.event.srcElement.value = null;\r\n      // e.event.srcElement.parentNode.parentNode.querySelector('input').value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.data) {\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_DATABASE\" && e.data.number_of_vouchers) {\r\n        e.rowElement.style.background = \"#FFFF00\";\r\n      } else {\r\n        e.rowElement.style.background = \"\";\r\n      }\r\n    }\r\n    this.checkStatusData();\r\n  }\r\n\r\n  onRowUpdated(e) {\r\n    //  this.onNumberOfVouchers(e);\r\n    // let column = Object.keys(e.data)[0];\r\n    // switch (column) {\r\n    //   case \"number_of_vouchers\":\r\n    //     this.onNumberOfVouchers(e);\r\n    //     break;\r\n    //   case \"product_code\":\r\n    //     this.productCodeChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"quantity\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"price\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"unit_code\":\r\n    //     this.unitChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount\":\r\n    //     this.amountChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount_after_vat\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   default:\r\n    //     break;\r\n    // }\r\n    // this.checkStatusData();\r\n  }\r\n\r\n\r\n\r\n  onNumberOfVouchers(e, value) {\r\n    let numberOfVouchers = value;\r\n    if (e.row.key.number_of_vouchers_backup) {\r\n      for (let i = 0; i < this.dataSource.length; i++) {\r\n        const row = this.dataSource[i];\r\n        if (row.productNumberOfVouchers && row.productNumberOfVouchers == e.row.key.number_of_vouchers_backup) {\r\n          this.dataSource[i].productNumberOfVouchers = numberOfVouchers;\r\n        }\r\n      }\r\n      e.row.key.number_of_vouchers_backup = numberOfVouchers;\r\n    }\r\n\r\n    if (numberOfVouchers != \"\") {\r\n      //// Tạm đóng 14/07/2020\r\n      if (this.configs.system_parameter.the_same_number_of_voucher) {\r\n        this.vatService.getInvoicesHaveNumberOfVouchers([numberOfVouchers]).subscribe((res: any) => {\r\n          let dupInvoices = res.data.invoices;\r\n          if (dupInvoices.length > 0) {\r\n            e.row.key.statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n            // this.totalDuplicateInvoice++;\r\n            // if (this.totalInvoice > 0) this.totalInvoice--\r\n          } else {\r\n            if (e.row.key.statusData = \"ERROR_DUPLICATE_DATABASE\") {\r\n              e.row.key.statusData = \"INVALID\";\r\n              // if (this.totalDuplicateInvoice > 0) this.totalDuplicateInvoice--;\r\n            }\r\n            // this.totalInvoice++;\r\n          }\r\n          let foundOnGird = this.dataSource.filter((item) => {\r\n            return item.number_of_vouchers == numberOfVouchers;\r\n          });\r\n          if (foundOnGird.length > 1 && e.row.key.statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n            e.row.key.statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n          }\r\n          this.dataGrid.instance.refresh();\r\n          this.checkStatusData();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  //Thay đổi cột mã hàng\r\n  productCodeChange(e, value) {\r\n    this.select.products.some(item => {\r\n      if (item.code == value) {\r\n        e.row.key.product_name = item.name;\r\n        e.row.key.unit_code = this.checkUnitCode(item.unit_code);\r\n        e.row.key.quantity = null;\r\n        e.row.key.price = item.price ? parseFloat(item.price) : item.price;\r\n        e.row.key.amount = item.price ? parseFloat(item.price) : 0;\r\n        e.row.key.amount_after_vat = e.row.key.amount;\r\n      }\r\n    });\r\n  }\r\n\r\n  priceChange(e, value) {\r\n    let quantity = e.row.key.quantity || 1;\r\n    let price = value || 0;\r\n    if (price != null) {\r\n      e.row.key.amount = price * quantity;\r\n      e.row.key.amount_after_vat = e.row.key.amount;\r\n    }\r\n  }\r\n  unitChange(e, value) {\r\n    let _obj = this.select.unit_codes.filter(p => p.code == value)[0];\r\n    if (_obj)\r\n      e.row.key.unit_name = _obj.name;\r\n    else\r\n      e.row.key.unit_name = \"\";\r\n  }\r\n  fromWareHouseChange(e, value) {\r\n    let _obj = this.select.wavehourses.filter(p => p.id == value)[0];\r\n    if (_obj) {\r\n      e.row.key.from_warehouse_name = _obj.name;\r\n      e.row.key.shiping_point = _obj.address;\r\n    }\r\n    else {\r\n      e.row.key.from_warehouse_name = \"\";\r\n      e.row.key.shiping_point = \"\";\r\n    }\r\n  }\r\n  toWareHouseChange(e, value) {\r\n    let _obj = this.select.wavehourses.filter(p => p.id == value)[0];\r\n    if (_obj) {\r\n      e.row.key.to_warehouse_name = _obj.name;\r\n      e.row.key.place_of_delivery = _obj.address;\r\n    }\r\n    else {\r\n      e.row.key.to_warehouse_name = \"\";\r\n      e.row.key.place_of_delivery = \"\";\r\n    }\r\n  }\r\n  amountChange(e, value) {\r\n    if (!e.row.key.quantity && !e.row.key.price) {\r\n      e.row.key.amount_after_vat = value;\r\n    } else {\r\n      let quantity = e.row.key.quantity || 1;\r\n      let price = e.row.key.price || 0;\r\n      if (price != null) {\r\n        e.row.key.amount = e.row.key.price * quantity;\r\n        e.row.key.amount_after_vat = e.row.key.amount;\r\n      }\r\n    }\r\n  }\r\n\r\n  checkValidNumberOfVouchers() {\r\n    this.dataSource.forEach(row => {\r\n      if (row.number_of_vouchers == \"\") {\r\n        Library.notify(this._translate.GRID.INVOICE_DETAILS.number_of_vouchers + \" \" + this._translate.VALIDATION.required, \"error\");\r\n      } else {\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    let items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code == unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  checkProvisionsOnAccounts(name) {\r\n    let found = this.select.select_provisions_on_accounts.find(function (element) {\r\n      return element.name === name;;\r\n    });\r\n    let code = \"\";\r\n\r\n    if (found) {\r\n      code = found.code;\r\n    } else {\r\n      Library.notify(\"Định khoản chưa có trong danh mục\", \"error\");\r\n    }\r\n\r\n    return code;\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n  /* Tạo mã đơn vị tính theo tên */\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) != \"\") {\r\n      if (!this.select.unit_codes)\r\n        this.select.unit_codes = [];\r\n      let _obj = this.select.unit_codes.filter(p => p.name == unitName)[0];\r\n      if (_obj) {\r\n        return _obj.code;\r\n      } else {\r\n        let code = VStringService._convertToViKdau(unitName);\r\n        let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n        if (oDuplicate)\r\n          code = code + Helper.addtionalUnitCode();\r\n        this.select.unit_codes.push({ code: code, name: unitName });\r\n        return code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  /* Tạo mã kho theo tên */\r\n  getWarehouseByName(WarehouseName) {\r\n    if (VStringService._getValueToString(WarehouseName) != \"\") {\r\n      if (!this.select.wavehourses)\r\n        this.select.wavehourses = [];\r\n      let _obj = this.select.wavehourses.filter(p => p.name == WarehouseName)[0];\r\n      if (_obj) {\r\n        return _obj.id;\r\n      } else {\r\n        let id = Helper.makeid();//VStringService._convertToViKdau(WarehouseName);\r\n        this.select.wavehourses.push({ id: id, name: WarehouseName });\r\n        return id;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    let status;\r\n    if (!this.invoice.id && !this.invoice.invoice_number) status = 'THEM_MOI';\r\n    if (this.invoice.id && !this.invoice.invoice_number) status = 'GHI_TAM';\r\n    if (this.invoice.id && this.invoice.invoice_number) status = 'GIU_SO';\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (status == 'THEM_MOI') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTam(this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.invoice_number = rs.data.invoice_number;\r\n            this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.invoice.id = rs.data.id;\r\n            this.invoicesId.push(rs.data.id);\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, this.invoice.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamTT78(this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.invoice_number = rs.data.invoice_number;\r\n            this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.invoice.id = rs.data.id;\r\n            this.invoicesId.push(rs.data.id);\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                let ListSerialNumber = \"DSCKS\";\r\n                if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n                  let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n                  if (signatures && signatures.length > 0)\r\n                    ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n                }\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, invoice_sign_date, 'InvoiceData', ListSerialNumber, true);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else if (status == 'GHI_TAM') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.edit(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editTT78(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                let ListSerialNumber = \"DSCKS\";\r\n                if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n                  let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n                  if (signatures && signatures.length > 0)\r\n                    ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n                }\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, invoice_sign_date, 'InvoiceData', ListSerialNumber, true);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else if (status == 'GIU_SO') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.edit(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, this.frmData.invoice_date);\r\n              }\r\n            }\r\n\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editTT78(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                let ListSerialNumber = \"DSCKS\";\r\n                if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n                  let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n                  if (signatures && signatures.length > 0)\r\n                    ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n                }\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, invoice_sign_date, 'InvoiceData', ListSerialNumber, true);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.subXuatHoaDon = this.vatService.xuatHoaDon({\r\n      id: this.invoice.id,\r\n      xml_string: xml_string\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        // this.formInvoice.readonlyAllForm();\r\n        this.ttDaXuatHoaDon = true;\r\n        this.valueProgress += percentComplete;\r\n        if (this.countInvoice < this.totalInvoice) {\r\n          this.countInvoice++;\r\n          this.xuatHoaDon();\r\n        } else if (this.countInvoice == this.totalInvoice) {\r\n          this.valueProgress = 100;\r\n          Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n          this.isVisibleBtnSubmit = false;\r\n          this.showPopupImport = false;\r\n          this.bsModalImportRef.hide();\r\n          this._location.back();\r\n        }\r\n      } else {\r\n        this.showPopupImport = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  xuatHoaDon() {\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      this.connectWebsocket();\r\n      if (this.invoice && this.invoice.invoice_files.length) {\r\n        this.invoice.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.invoice_date);\r\n        });\r\n      } else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n      }\r\n    }\r\n    this.tempKiFile = 0;\r\n  }\r\n\r\n  xuatChoKy() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (!this.isTT78) {\r\n      this.subLuuChoXuat = this.vatService.xuatChoKy(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.xuatChoKy();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            this._location.back();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.subLuuChoXuat = this.vatService.xuatChoKyTT78(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.xuatChoKy();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            this._location.back();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  luuChoXuat() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.invoice.id) {\r\n      if (!this.isTT78) {\r\n        this.subLuuChoXuat = this.vatService.edit(this.invoice.id, this.invoice).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.id = rs.data.id;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.luuChoXuat();\r\n            } else if (this.countInvoice == this.totalInvoice) {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n              this.showPopupImport = false;\r\n              this.bsModalImportRef.hide();\r\n              this._location.back();\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.subLuuChoXuat = this.vatService.editTT78(this.invoice.id, this.invoice).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.id = rs.data.id;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.luuChoXuat();\r\n            } else if (this.countInvoice == this.totalInvoice) {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n              this.showPopupImport = false;\r\n              this.bsModalImportRef.hide();\r\n              this._location.back();\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      if (!this.isTT78) {\r\n        this.subLuuChoXuat = this.vatService.ghiTam(this.invoice).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.id = rs.data.id;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.luuChoXuat();\r\n            } else if (this.countInvoice == this.totalInvoice) {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n              this.showPopupImport = false;\r\n              this.bsModalImportRef.hide();\r\n              this._location.back();\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.subLuuChoXuat = this.vatService.ghiTamTT78(this.invoice).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.id = rs.data.id;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.luuChoXuat();\r\n            } else if (this.countInvoice == this.totalInvoice) {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n              this.showPopupImport = false;\r\n              this.bsModalImportRef.hide();\r\n              this._location.back();\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuatFile() {\r\n    let invoices = [];\r\n    this.dataSource.forEach(element => {\r\n      if (element.number_of_vouchers) {\r\n        let invoice = {};\r\n        invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n        ///// HĐ xe\r\n        invoice[\"place_of_delivery\"] = element.place_of_delivery;\r\n        invoice[\"shiping_point\"] = element.shiping_point;\r\n        invoice[\"from_warehouse_date\"] = element.from_warehouse_date;\r\n        invoice[\"delivery_order_number\"] = element.delivery_order_number;\r\n        invoice[\"delivery_order_date\"] = element.delivery_order_date;\r\n        invoice[\"currency_code\"] = element.currency_code;\r\n        invoice[\"delivery_order_by\"] = element.delivery_order_by;\r\n        invoice[\"buyer_tax_code\"] = element.buyer_tax_code;\r\n        invoice[\"delivery_order_content\"] = element.delivery_order_content;\r\n        invoice[\"transportation_contract\"] = element.transportation_contract;\r\n        invoice[\"transportation_method\"] = element.transportation_method;\r\n        invoice[\"to_warehouse_name\"] = element.to_warehouse_name;\r\n        invoice[\"from_warehouse_name\"] = element.from_warehouse_name;\r\n        invoice[\"delivery_by\"] = element.delivery_by;\r\n        invoice[\"carrier_mobile\"] = element.carrier_mobile;\r\n        invoice[\"carrier_email\"] = element.carrier_email;\r\n        /////\r\n        invoice[\"buyer_email\"] = element.buyer_email; //Email\r\n        invoice[\"note\"] = element.note; //ghi chú\r\n        /* Hóa đơn Pepsi */\r\n        invoice[\"currency_rate\"] = element.currency_rate;\r\n        invoice[\"invoice_amount\"] = element.invoice_amount;\r\n        invoice[\"total_payment\"] = element.total_payment;\r\n\r\n        let product = {\r\n          product_name: element.product_name,\r\n          provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n          unit_name: element.unit_name,\r\n          quantity: element.quantity,\r\n          number_real_export: element.number_real_export,\r\n          number_real_import: element.number_real_import,\r\n          price: element.price,\r\n          amount: element.amount,\r\n          amount_after_vat: element.amount_after_vat,\r\n          view_order: element.view_order,\r\n          contract_order: element.contract_order,\r\n        }\r\n        invoice[\"invoice_products\"] = [];\r\n        invoice[\"invoice_products\"].push(product);\r\n        invoices.push(invoice);\r\n      }\r\n\r\n      if (element.productNumberOfVouchers) {\r\n        // console.log(element)\r\n        let invoiceProduct = {\r\n          product_name: element.product_name,\r\n          provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n          unit_name: element.unit_name,\r\n          quantity: element.quantity,\r\n          number_real_export: element.number_real_export,\r\n          number_real_import: element.number_real_import,\r\n          price: element.price,\r\n          amount: element.amount,\r\n          amount_after_vat: element.amount_after_vat,\r\n          view_order: element.view_order,\r\n          contract_order: element.contract_order,\r\n        }\r\n        for (let i = 0; i < invoices.length; i++) {\r\n          if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n            invoices[i].invoice_products.push(invoiceProduct);\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    let data = {\r\n      \"invoices\": invoices\r\n    }\r\n    Library.showloading();\r\n    this.vatService.exportToExcel(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(this._translate.CONTROLL.LABEL.export_data + \" Excel \" + this._translate.CONTROLL.LABEL.success.toLowerCase(), \"success\");\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  convertGirdToInvoices(type) {\r\n    let invoices = [];\r\n    let invalid = true;\r\n    let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n    let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_quantity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n    this.dataSource.forEach((element, index) => {\r\n      if (element.number_of_vouchers == \"\" && element.dataType == \"KHACH_HANG\" && element.product_name && type == \"submit\") {\r\n        Library.notify(this._translate.GRID.INVOICE_DETAILS.number_of_vouchers + \" \" + this._translate.VALIDATION.required, \"error\");\r\n        invalid = false;\r\n        return;\r\n      }\r\n      if (element.number_of_vouchers) {\r\n        if (type == \"submit\") {\r\n          if (VStringService._getValueToString(element.product_name) == \"\") { Library.notify(this._translate.GRID.INVOICE_DETAILS.product_name + \" \" + this._translate.VALIDATION.required, \"error\"); invalid = false; return false; }\r\n          if (VStringService._getValueToString(element.to_warehouse) == \"\") { Library.notify(this._translate.CONTROLL.LABEL.to_warehouse + \" \" + this._translate.VALIDATION.required, \"error\"); invalid = false; return false; }\r\n          if (VStringService._getValueToString(element.from_warehouse) == \"\") { Library.notify(this._translate.CONTROLL.LABEL.from_warehouse + \" \" + this._translate.VALIDATION.required, \"error\"); invalid = false; return false; }\r\n          if (element.number_real_export == null) { Library.notify(this._translate.GRID.INVOICE_DETAILS.quantity_export + \" \" + this._translate.VALIDATION.required, \"error\"); invalid = false; return false; }\r\n          if (VStringService._getValueToString(element.product_code) != \"\" && !this.productCodePattern.test(element.product_code)) {\r\n            Library.notify(this._translate.VALIDATION.required_productCode, \"error\");\r\n            invalid = false;\r\n            return false;\r\n          }\r\n        }\r\n        let invoice = new InvoiceModel(1);\r\n        if (element.id) {\r\n          invoice.id = element.id;\r\n        }\r\n        invoice.invoice_number = element.invoice_number;\r\n        invoice.invoice_release_id = this.invoice_release_id;\r\n        invoice.template_id = this.template_id;\r\n        invoice.template_code = this.template_code;\r\n        invoice.invoice_series = this.invoice_series;\r\n        invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n        invoice.invoice_date = element.invoice_date ? moment(element.invoice_date).format('YYYY-MM-DD HH:mm:ss') : moment().format('YYYY-MM-DD HH:mm:ss'); // Ngày hóa đơn\r\n        invoice.delivery_order_date = element.delivery_order_date ? moment(element.delivery_order_date).format('YYYY-MM-DD HH:mm:ss') : null;\r\n        invoice.from_warehouse_date = element.from_warehouse_date ? moment(element.from_warehouse_date).format('YYYY-MM-DD HH:mm:ss') : null;\r\n        invoice.place_of_delivery = element.place_of_delivery;\r\n        invoice.shiping_point = element.shiping_point;\r\n        invoice.delivery_order_number = element.delivery_order_number;\r\n        invoice.currency_code = element.currency_code;\r\n        invoice.delivery_order_by = element.delivery_order_by;\r\n        invoice.buyer_tax_code = element.buyer_tax_code;\r\n        invoice.delivery_order_content = element.delivery_order_content;\r\n        invoice.transportation_contract = element.transportation_contract;\r\n        invoice.transportation_method = element.transportation_method;\r\n        invoice.to_warehouse_name = element.to_warehouse_name;\r\n        invoice.to_warehouse = element.to_warehouse;\r\n        invoice.from_warehouse_name = element.from_warehouse_name;\r\n        invoice.from_warehouse = element.from_warehouse;\r\n        invoice.delivery_by = element.delivery_by;\r\n        invoice.carrier_email = element.carrier_email;\r\n        invoice.carrier_mobile = element.carrier_mobile;\r\n        invoice.currency_rate = this.roundNumber(element.currency_rate, decimal_quantity);\r\n        invoice.buyer_email = element.buyer_email; //Email\r\n        invoice.note = element.note; //ghi chú\r\n        invoice.invoice_products[0].product_code = element.product_code;\r\n        invoice.invoice_products[0].product_name = element.product_name;\r\n        invoice.invoice_products[0].unit_code = element.unit_code;\r\n        invoice.invoice_products[0].unit_name = element.unit_name;\r\n        invoice.invoice_products[0].quantity = element.quantity;\r\n        invoice.invoice_products[0].number_real_export = element.number_real_export;\r\n        invoice.invoice_products[0].number_real_import = element.number_real_import;\r\n        invoice.invoice_products[0].price = element.price;\r\n        invoice.invoice_products[0].amount = element.amount;\r\n        invoice.invoice_products[0].amount_after_vat = element.amount_after_vat;\r\n        invoice.invoice_products[0].order = element.order;\r\n        invoice.invoice_products[0].view_order = element.view_order;\r\n        invoice.invoice_products[0].is_promotion = element.is_promotion;\r\n        invoice.invoice_products[0][\"row_content\"] = element.product_name;\r\n        invoice.invoice_products[0].contract_order = element.contract_order;\r\n        invoice.display_currency = JSON.stringify(this.configs.display_currency);\r\n\r\n        let decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n\r\n        invoice.decimal_places_json = decimal_places_json;\r\n        if (element.file_attach) {\r\n          invoice.invoice_files = element.file_attach;\r\n        } else {\r\n          invoice.invoice_files = [];\r\n        }\r\n        invoices.push(invoice);\r\n      }\r\n\r\n      if (element.productNumberOfVouchers) {\r\n        // console.log(element)\r\n        let invoiceProduct = {\r\n          product_code: element.product_code,\r\n          product_name: element.product_name,\r\n          unit_code: element.unit_code,\r\n          unit_name: element.unit_name,\r\n          quantity: element.quantity,\r\n          number_real_export: element.number_real_export,\r\n          number_real_import: element.number_real_import,\r\n          price: element.price,\r\n          is_promotion: element.is_promotion,/* Diễn giải */\r\n          order: element.order,\r\n          amount: element.amount,\r\n          amount_after_vat: element.amount_after_vat,\r\n          view_order: element.view_order,\r\n          row_content: element.product_name,\r\n          contract_order: element.contract_order,\r\n        }\r\n        for (let i = 0; i < invoices.length; i++) {\r\n          if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n            //if (invoiceProduct.product_name != \"Tổng\")\r\n            invoices[i].invoice_products.push(invoiceProduct);\r\n          }\r\n        }\r\n      }\r\n    });\r\n    for (let i = 0; i < invoices.length; i++) {\r\n      let\r\n        amount = null, amount_after_vat = null, amount_after_vatx = null, amount_after_vat0 = null, amount_after_vat5 = null, amount_after_vat8 = null, amount_after_vat10 = null, total_amount_product_vat0 = null,\r\n        total_amount_product_vat5 = null, total_amount_product_vat8 = null, total_amount_product_vat10 = null, total_amount_product_vatx = null, amount_after_vat_other = null, amount_after_vat_kkknt = null, total_amount_product_vat_kkknt = null, total_amount_product_vat_other = null, number_real_export = null, number_real_import = null;\r\n      let _objTong = invoices[i].invoice_products.filter(p => p.product_name == \"Tổng\")[0];\r\n      invoices[i].invoice_products = invoices[i].invoice_products.filter(p => p.product_name != \"Tổng\");\r\n      invoices[i].invoice_products.forEach((product, index) => {\r\n        if (!product.is_promotion) {\r\n          if (product.number_real_export != null) number_real_export += this.roundNumber(product.number_real_export, decimal_quantity);\r\n          if (product.number_real_import != null) number_real_import += this.roundNumber(product.number_real_import, decimal_quantity);\r\n          if (product.amount != null) amount += product.amount;\r\n          if (product.amount_after_vat != null) amount_after_vat += product.amount_after_vat;\r\n        }\r\n      });\r\n      invoices[i].number_real_export = number_real_export != null ? this.roundNumber(number_real_export, decimal_quantity) : null;\r\n      invoices[i].number_real_import = number_real_import != null ? this.roundNumber(number_real_import, decimal_quantity) : null;\r\n      invoices[i].amount = _objTong ? this.roundNumber(_objTong.amount, decimal_amount) : this.roundNumber(amount, decimal_amount);\r\n      invoices[i].amount_after_vat = _objTong ? this.roundNumber(_objTong.amount_after_vat, decimal_amount_after_vat) : this.roundNumber(amount_after_vat, decimal_amount_after_vat);\r\n      if (amount_after_vatx != null)\r\n        invoices[i].amount_after_vatx = this.roundNumber(amount_after_vatx, decimal_amount_after_vat);\r\n      else\r\n        invoices[i].amount_after_vatx = null;\r\n      if (amount_after_vat0 != null)\r\n        invoices[i].amount_after_vat0 = this.roundNumber(amount_after_vat0, decimal_amount_after_vat);\r\n      else\r\n        invoices[i].amount_after_vat0 = null;\r\n      if (amount_after_vat5 != null)\r\n        invoices[i].amount_after_vat5 = this.roundNumber(amount_after_vat5, decimal_amount_after_vat);\r\n      else\r\n        invoices[i].amount_after_vat5 = null;\r\n      if (amount_after_vat8 != null)\r\n        invoices[i].amount_after_vat8 = this.roundNumber(amount_after_vat8, decimal_amount_after_vat);\r\n      else\r\n        invoices[i].amount_after_vat8 = null;\r\n      if (amount_after_vat10 != null)\r\n        invoices[i].amount_after_vat10 = this.roundNumber(amount_after_vat10, decimal_amount_after_vat);\r\n      else\r\n        invoices[i].amount_after_vat10 = null;\r\n      if (amount_after_vat_kkknt != null)\r\n        invoices[i].amount_after_vat_kkknt = this.roundNumber(amount_after_vat_kkknt, decimal_amount_after_vat);\r\n      else\r\n        invoices[i].amount_after_vat_kkknt = null;\r\n      if (amount_after_vat_other != null)\r\n        invoices[i].amount_after_vat_other = this.roundNumber(amount_after_vat_other, decimal_amount_after_vat);\r\n      else\r\n        invoices[i].amount_after_vat_other = null;\r\n      if (total_amount_product_vatx != null)\r\n        invoices[i].total_amount_product_vatx = this.roundNumber(total_amount_product_vatx, decimal_amount);\r\n      else\r\n        invoices[i].total_amount_product_vatx = null;\r\n      if (total_amount_product_vat0 != null)\r\n        invoices[i].total_amount_product_vat0 = this.roundNumber(total_amount_product_vat0, decimal_amount);\r\n      else\r\n        invoices[i].total_amount_product_vat0 = null;\r\n      if (total_amount_product_vat5 != null)\r\n        invoices[i].total_amount_product_vat5 = this.roundNumber(total_amount_product_vat5, decimal_amount);\r\n      else\r\n        invoices[i].total_amount_product_vat5 = null;\r\n      if (total_amount_product_vat8 != null)\r\n        invoices[i].total_amount_product_vat8 = this.roundNumber(total_amount_product_vat8, decimal_amount);\r\n      else\r\n        invoices[i].total_amount_product_vat8 = null;\r\n      if (total_amount_product_vat10 != null)\r\n        invoices[i].total_amount_product_vat10 = this.roundNumber(total_amount_product_vat10, decimal_amount);\r\n      else\r\n        invoices[i].total_amount_product_vat10 = null;\r\n      if (total_amount_product_vat_kkknt != null)\r\n        invoices[i].total_amount_product_vat_kkknt = this.roundNumber(total_amount_product_vat_kkknt, decimal_amount);\r\n      else\r\n        invoices[i].total_amount_product_vat_kkknt = null;\r\n      if (total_amount_product_vat_other != null)\r\n        invoices[i].total_amount_product_vat_other = this.roundNumber(total_amount_product_vat_other, decimal_amount);\r\n      else\r\n        invoices[i].total_amount_product_vat_other = null;\r\n      if (invoices[i].amount_after_vat != null)\r\n        invoices[i].total_payment = this.roundNumber(invoices[i].amount_after_vat, decimal_amount_after_vat);\r\n      else\r\n        invoices[i].total_payment = null;\r\n      // Valid tỷ giá\r\n      let invoice_products = invoices[i].invoice_products.filter(item => item.product_exchange_rate);\r\n      if (invoices[i].currency_code && invoices[i].currency_code != \"VND\") {\r\n        if (invoice_products && invoice_products.length > 0) {\r\n          if (invoice_products.length !== invoices[i].invoice_products.length) {\r\n            Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n            return false;\r\n          }\r\n        }\r\n        else {\r\n          if (!invoices[i].currency_rate) {\r\n            Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      invoices[i].total_payment_in_word = Helper.tienBangChu(invoices[i].total_payment, decimal_amount_after_vat, invoices[i].currency_code, this.configs.system_parameter.display_read_money_english);\r\n    }\r\n\r\n    this.totalInvoice = invoices.length;\r\n    this.invoicesArr = invoices;\r\n    this.invoicesArr = this.invoicesArr.sort((itemA, itemB) => {\r\n      return new Date(itemA.invoice_date).getTime() - new Date(itemB.invoice_date).getTime();\r\n    });\r\n    return invalid;\r\n  }\r\n  date_sort_desc(date1, date2) {\r\n    // This is a comparison function that will result in dates being sorted in\r\n    // DESCENDING order.\r\n    if (date1 > date2) return -1;\r\n    if (date1 < date2) return 1;\r\n    return 0;\r\n  };\r\n  /* Xem trước hóa đơn */\r\n  preview() {\r\n    let convert = this.convertGirdToInvoices(\"preview\");\r\n    if (convert) {\r\n      if (this.configs.system_parameter.display_template_from_server) {\r\n        const initialState = {\r\n          items: this.invoicesArr,\r\n          isXuatHD: false\r\n        };\r\n        this.bsModalViewModel = this.modalImportService.show\r\n          (\r\n            ViewInvoiceComponent,\r\n            {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-xl view-invoice',\r\n              initialState\r\n            }\r\n          );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          subModal.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        this.checkCKS(\"XEM_TRUOC\");\r\n      }\r\n    }\r\n    // let convert = this.convertGirdToInvoices(\"preview\");\r\n    // if (convert) {\r\n    //   let data = {\r\n    //     invoices: this.invoicesArr\r\n    //   }\r\n    //   let w = 1920, h = 900;\r\n    //   w = window.screen.availWidth * 100 / 100;\r\n    //   h = window.screen.availHeight * 93 / 100;\r\n    //   let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n    //   win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    //   win.blur();\r\n    //   Library.showloading();\r\n    //   let sub = this.vatService.previewInvoiceImport(data).subscribe(rs => {\r\n    //     if (rs.status == 'success') {\r\n    //       let pdf_file = rs.data.invoice.pdf_file;\r\n    //       let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n    //       win.resizeTo(screen.availWidth, screen.availHeight);\r\n    //       win.focus();\r\n    //       win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n    //     } else {\r\n    //       win.close();\r\n    //       Library.notify(rs.message, 'error');\r\n    //     }\r\n    //   }, err => { }, () => {\r\n    //     Library.hideloading();\r\n    //     sub.unsubscribe();\r\n    //   });\r\n    // }\r\n  }\r\n\r\n  previewBeforeSubmit() {\r\n    this.convertGirdToInvoices(\"preview\");\r\n    if (this.configs.system_parameter.display_template_from_server) {\r\n      let hinhthucxuat = \"\";\r\n      if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n        hinhthucxuat = \"và ký\";\r\n      } else {\r\n        hinhthucxuat = \"chờ ký\";\r\n      }\r\n      const initialState = {\r\n        items: this.invoicesArr,\r\n        isXuatHD: true,\r\n        hinhthucxuat: hinhthucxuat\r\n      };\r\n\r\n      this.bsModalViewModel = this.modalImportService.show\r\n        (\r\n          ViewInvoiceComponent,\r\n          {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-xl view-invoice',\r\n            initialState\r\n          }\r\n        );\r\n      const subModal = this.modalImportService.onHide.subscribe(() => {\r\n        if (this.bsModalViewModel.content.successSaveItem == \"DONG_Y\") {\r\n          this.confirmCheckPreview = true;\r\n          this.submit('XUAT');\r\n        }\r\n        subModal.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      this.checkCKS(\"XUAT_HOA_DON\");\r\n    }\r\n    // this.convertGirdToInvoices(\"preview\");\r\n    // let data = {\r\n    //   invoices: this.invoicesArr\r\n    // }\r\n\r\n    // Library.showloading();\r\n    // this.windowPreviewBeforeSubmit = window.open(\"\", \"\", `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n    // this.windowPreviewBeforeSubmit.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    // this.windowPreviewBeforeSubmit.blur();\r\n\r\n    // let timer = setInterval(() => {\r\n    //   if (this.windowPreviewBeforeSubmit.closed) {\r\n    //     clearInterval(timer);\r\n    //     let isCheck = Helper.getCookie('CK_CFM_I');\r\n    //     this.windowPreviewBeforeSubmit = undefined;\r\n    //     if (isCheck == \"CHECKED\") {\r\n    //       document.cookie = \"CK_CFM_I=; path=/\";\r\n    //       this.confirmCheckPreview = true;\r\n    //       this.submit('XUAT');\r\n    //     }\r\n    //   }\r\n    // }, 500);\r\n    // let htx = \"\";\r\n    // let questionSign = \"\";\r\n    // if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n    //   htx = this._translate.CONTROLL.COMBO.export_and_sign;\r\n    //   questionSign = this._translate.CONFIRM.confirm_export_invoice_signed;\r\n    // } else {\r\n    //   htx = this._translate.CONTROLL.COMBO.export_wait_sign;\r\n    //   questionSign = this._translate.CONFIRM.confirm_export_invoice_wait_signed;\r\n    // }\r\n    // let sub = this.vatService.previewInvoiceImport(data).subscribe(rs => {\r\n    //   if (rs.status == 'success') {\r\n    //     let pdf_file = rs.data.invoice.pdf_file;\r\n    //     let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n    //     this.windowPreviewBeforeSubmit.document.write(`\r\n    //     <style type=\"text/css\" scoped>\r\n    //         .nhap-nhay { \r\n    //           background: red;\r\n    //           padding: 0.5px 9px;\r\n    //           margin-right: 5px;\r\n    //           border-radius: 57%;\r\n    //           -webkit-animation: flicker 1s infinite;\r\n    //         } \r\n    //         .ht-xuat{\r\n    //           display: inline-block;\r\n    //           margin-right: 50px;\r\n    //           padding: 15px;\r\n    //           float: right;\r\n    //           background: #e48e08;\r\n    //           position: absolute;\r\n    //         }\r\n    //         @-webkit-keyframes flicker\r\n    //         {\r\n    //         0% {opacity:0;}\r\n    //         9% {opacity:0;}\r\n    //         10% {opacity:.5;}\r\n    //         13% {opacity:0;}\r\n    //         20% {opacity:.5;}\r\n    //         25% {opacity:1;}\r\n    //         }\r\n    //         .example {\r\n    //           padding: 20px;\r\n    //         }\r\n\r\n    //         input[type=button] {\r\n    //           padding: 5px 10px;\r\n    //           margin: 10px 5px;\r\n    //           border-radius: 5px;\r\n    //           cursor: pointer;\r\n    //           background: #ddd;\r\n    //           border: 1px solid #ccc;\r\n    //         }\r\n    //         input[type=button]:hover {\r\n    //           background: #ccc;\r\n    //         }\r\n    //         .confirm {\r\n    //           display: none;\r\n    //         }\r\n    //         .confirm > div:first-of-type {\r\n    //           position: fixed;\r\n    //           width: 100%;\r\n    //           height: 100%;\r\n    //           background: rgba(0, 0, 0, 0.5);\r\n    //           top: 0px;\r\n    //           left: 0px;\r\n    //         }\r\n    //         .confirm > div:last-of-type {\r\n    //           padding: 10px 20px;\r\n    //           background: white;\r\n    //           position: absolute;\r\n    //           width: auto;\r\n    //           height: auto;\r\n    //           left: 50%;\r\n    //           top: 50%;\r\n    //           transform: translate(-50%, -50%);\r\n    //           border-radius: 5px;\r\n    //           border: 1px solid #333;\r\n    //         }\r\n    //         .confirm > div:last-of-type div:first-of-type {\r\n    //           min-width: 150px;\r\n    //           padding: 10px;\r\n    //         }\r\n    //         .confirm > div:last-of-type div:last-of-type {\r\n    //           text-align: right;\r\n    //         }\r\n    //     </style>\r\n    //     <div style=\"margin-left: 50px;\">\r\n    //       <h3 style=\"color: red; text-align: center;\">${this._translate.CONTROLL.LABEL.draft_e_invoice}</h3>\r\n    //       <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">${this._translate.CONTROLL.LABEL.note1}: \r\n    //       <span>${this._translate.CONTROLL.LABEL.suggestion_check_content_invoice}</span>\r\n    //     </div>\r\n\r\n    //     <div>\r\n    //       <iframe style=\"margin-left: 170px;\" width=\"70%\" height=\"95%\" src=\"${objectUrl}\"></iframe>\r\n    //       <div class=\"ht-xuat\">\r\n    //         <p style=\"color: #fff;font-size: 17px;text-align: center;margin-bottom: 0;\">${this._translate.CONTROLL.LABEL.invoice_date}</p>\r\n    //         <p style=\"color: #fff;font-size: 17px;text-align: center;margin-bottom: 10px;margin-top: 5px;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n    //         <h3 style=\"color: #fff; text-align: center; text-transform: uppercase;margin-top: 5px;\">${htx}</h3>\r\n    //       </div>\r\n    //     </div>\r\n\r\n    //     <div style=\"text-align: center; margin: 20px 0 50px; font-size: 22px; font-weight: 600;\">\r\n    //       <a href=\"javascript:void(0)\" style=\"text-decoration: none;\" onclick=\"setConfirmInvoice()\">${this._translate.CONTROLL.BUTTON.agree}</a>|\r\n    //       <a href=\"javascript:void(0)\" style=\"text-decoration: none;\" onclick=\"closeWin()\">${this._translate.CONTROLL.BUTTON.close}</a>\r\n    //     </div>\r\n\r\n    //     <div class=\"confirm\">\r\n    //         <div></div>\r\n    //         <div>\r\n    //           <div id=\"confirmMessage\">Confirm text</div>\r\n    //           <div>\r\n    //             <input id=\"confirmYes\" type=\"button\" value=\"${this._translate.CONTROLL.BUTTON.agree}\" />\r\n    //             <input id=\"confirmNo\" type=\"button\" value=\"${this._translate.CONTROLL.BUTTON.come_back}\" />\r\n    //           </div>\r\n    //         </div>\r\n    //     </div>\r\n\r\n    //     <script type=\"text/javascript\">\r\n    //     const ui = {\r\n    //       confirm: async (message) => createConfirm(message)\r\n    //     }\r\n\r\n    //     const createConfirm = (message) => {\r\n    //       return new Promise((complete, failed)=>{\r\n    //         $('#confirmMessage').text(message)\r\n\r\n    //         $('#confirmYes').off('click');\r\n    //         $('#confirmNo').off('click');\r\n\r\n    //         $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n    //         $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n\r\n    //         $('.confirm').show();\r\n    //       });\r\n    //     }\r\n\r\n    //     const setConfirmInvoice = async () => {\r\n    //       const confirm = await ui.confirm(\"${questionSign}\");\r\n    //       if(confirm){\r\n    //         document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n    //         window.close();\r\n    //       } else{\r\n    //       }\r\n    //     } \r\n\r\n    //       function closeWin(){\r\n    //         window.close();\r\n    //       }\r\n    //     </script>\r\n    //     <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n    //     `);\r\n    //     this.windowPreviewBeforeSubmit.focus();\r\n    //   } else {\r\n    //     this.windowPreviewBeforeSubmit.close();\r\n    //     Library.notify(rs.message, 'error');\r\n    //   }\r\n    // }, err => { }, () => {\r\n    //   Library.hideloading();\r\n    //   sub.unsubscribe();\r\n    // });\r\n  }\r\n  /* Đơn vị tính */\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      let newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      let oDuplicate = this.select.unit_codes.filter(p => p.code === newItem.code)[0];\r\n      if (oDuplicate)\r\n        newItem.code = newItem.code + Helper.addtionalUnitCode();\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption(\"unit_code\", \"lookup\", {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: \"name\",\r\n          valueExpr: \"code\"\r\n        });\r\n      });\r\n      return newItem;\r\n    }.bind(this)\r\n  }\r\n  /* Nhập tại kho */\r\n  lookupColumnOptionsToWarehouse = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      let newItem: any = {};\r\n      newItem.id = Helper.makeid();//VStringService._convertToViKdau(args.text);\r\n      newItem.name = args.text;\r\n      this.select.wavehourses.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption(\"to_warehouse\", \"lookup\", {\r\n          dataSource: this.select.wavehourses,\r\n          displayExpr: \"name\",\r\n          valueExpr: \"id\"\r\n        });\r\n      });\r\n      return newItem;\r\n    }.bind(this)\r\n  }\r\n  /* Xuất tại kho */\r\n  lookupColumnOptionsFromWarehouse = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      let newItem: any = {};\r\n      newItem.id = Helper.makeid();//VStringService._convertToViKdau(args.text);\r\n      newItem.name = args.text;\r\n      this.select.wavehourses.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption(\"from_warehouse\", \"lookup\", {\r\n          dataSource: this.select.wavehourses,\r\n          displayExpr: \"name\",\r\n          valueExpr: \"id\"\r\n        });\r\n      });\r\n      return newItem;\r\n    }.bind(this)\r\n  }\r\n  addWareToWareHouse(wareHouseCode, wareHouseName) {\r\n    if (wareHouseCode) {\r\n      const _obj = this.select.wavehourses.filter(p => p.id === wareHouseCode)[0];\r\n      if (!_obj) {\r\n        const _objPush = {\r\n          id: wareHouseCode,\r\n          name: wareHouseName,\r\n        };\r\n        this.select.wavehourses.push(_objPush);\r\n      }\r\n    }\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    win.blur();\r\n    Library.showloading();\r\n\r\n    let sub = this.vatService.inChuyenDoiInvoiceImport(this.invoicesId, false).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n        win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n        //   win.document.write(`\r\n        //   <a id=\"idA\" title=\"Download File\" style=\"font-family: \\'Verdana\\';color: #333;font-weight: 600;float:right; margin-bottom: 5px;\r\n        //     margin-right: 20px;\" download=\"hoadon.pdf\" href=\"data:application/pdf;base64,${pdf_file}\">Tải File</a>\r\n        //   <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n\r\n        // `);\r\n        //   win.resizeTo(screen.availWidth, screen.availHeight);\r\n        //   win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xemHoaDon() {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    win.blur();\r\n    Library.showloading();\r\n    let sub = this.vatService.xemHoaDonInvoiceImport(this.invoicesId).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n        win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n        // win.document.write(`<iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}\"></iframe>`)\r\n        // win.resizeTo(screen.availWidth, screen.availHeight);\r\n        // win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  submit(type) {\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.checkStatusData()\r\n    if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n      Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n      return;\r\n    }\r\n    if (this.totalDuplicateInvoice > 0) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.number_of_voucher_duplicate, \"error\");\r\n      return;\r\n    }\r\n\r\n    let convert = this.convertGirdToInvoices(\"submit\");\r\n    if (convert) {\r\n      if (type == \"XUAT\") {\r\n        if (this.confirmCheckPreview) {\r\n          // Library.confirmVA(`Tất cả hóa đơn đã nhập sẽ được xuất hóa đơn vào ngày <strong>${dayExport}</strong>. Bạn có chắc chắn không?`, \"Thông báo\", () => {\r\n          this.showPopupImport = true;\r\n          if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.xuatHoaDon();\r\n          } else {\r\n            this.xuatChoKy();\r\n          }\r\n          this.confirmCheckPreview = false;\r\n        } else {\r\n          this.previewBeforeSubmit();\r\n        }\r\n      } else if (type == \"LUU\") {\r\n        this.showPopupImport = true;\r\n        this.luuChoXuat();\r\n      }\r\n    }\r\n  }\r\n  /* */\r\n  configColumn() {\r\n    const initialState = {\r\n      listColumn: this.listColumn,\r\n      listColumnClone: this.listColumn,\r\n      configs: this.configs,\r\n      exportType: sEnum.exportType.phieuxuatkho\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigColumnImportExcelComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    let subModal = this.modalService.onHide.subscribe(() => {\r\n      let data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.listColumn = data.listColumn;\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  infoColumn(columnName) {\r\n    if (this.listColumn && this.listColumn.length > 0) {\r\n      let _obj = this.listColumn.filter(p => p.column_code == columnName)[0];\r\n      if (_obj) {\r\n        return _obj;\r\n      } else return { column_code: \"\", column_name: \"\", is_visible: false };\r\n    }\r\n  }\r\n  checkCKS(typeView) {\r\n    this.connectWebsocket();\r\n    if (this.socketService.checkNull()) {\r\n      this.socketService.connect();\r\n    }\r\n    setTimeout(() => {\r\n      const res = this.socketService.getStatusCertificate();\r\n      if (res && res.status === 'error' && res.code == 10) {\r\n        const initialState = {\r\n          typeNotify: \"XEM_MAU\",\r\n        };\r\n        this.bsModalRef = this.modalService.show(SignatureOffComponent, {\r\n          class: 'modal-lg', backdrop: 'static',\r\n          keyboard: false,\r\n          initialState\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n\r\n        });\r\n      }\r\n      else {\r\n        if (typeView == \"XEM_TRUOC\") {\r\n          const initialState = {\r\n            items: this.invoicesArr,\r\n            isXuatHD: false\r\n          };\r\n          this.bsModalViewModel = this.modalImportService.show\r\n            (\r\n              ViewInvoiceComponent,\r\n              {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'modal-xl view-invoice',\r\n                initialState\r\n              }\r\n            );\r\n          const subModal = this.modalImportService.onHide.subscribe(() => {\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n        else if (typeView == \"XUAT_HOA_DON\") {\r\n          let hinhthucxuat = \"\";\r\n          if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n            hinhthucxuat = \"và ký\";\r\n          } else {\r\n            hinhthucxuat = \"chờ ký\";\r\n          }\r\n          const initialState = {\r\n            items: this.invoicesArr,\r\n            isXuatHD: true,\r\n            hinhthucxuat: hinhthucxuat\r\n          };\r\n\r\n          this.bsModalViewModel = this.modalImportService.show\r\n            (\r\n              ViewInvoiceComponent,\r\n              {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'modal-xl view-invoice',\r\n                initialState\r\n              }\r\n            );\r\n          const subModal = this.modalImportService.onHide.subscribe(() => {\r\n            if (this.bsModalViewModel.content.successSaveItem == \"DONG_Y\") {\r\n              this.connectWebsocket();\r\n              this.confirmCheckPreview = true;\r\n              this.submit('XUAT');\r\n            }\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  dong() {\r\n    this.bsModalImportRef.hide();\r\n    this._location.back();\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"row search-section\\\">\\r\\n  <div class=\\\"col-md-7\\\">\\r\\n    <app-search-advanced (searchContentChange)=\\\"getSearch($event)\\\">\\r\\n    </app-search-advanced>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-5\\\" style=\\\"max-height: 70px;\\\">\\r\\n    <div class=\\\"list-header row\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-right button-panel\\\">\\r\\n          <dx-button (click)=\\\"lapHoaDon()\\\" icon=\\\"assets\\\\img\\\\icons\\\\LapHD.png\\\"\\r\\n            text=\\\"{{ 'CONTROLL.BUTTON.create_internal_transport' | translate }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button *ngIf=\\\"taxCodeThueHCM.includes(currentUser.account.tax_code)\\\" (click)=\\\"taiHDXml()\\\"\\r\\n            [(icon)]=\\\"_translate.ICONS.xml\\\" text=\\\"{{ 'CONTROLL.BUTTON.tai_hd_xml' | translate }}\\\" type=\\\"default\\\">\\r\\n          </dx-button>\\r\\n          <!-- <dx-button (click)=\\\"edit()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Sua.png\\\" text=\\\"{{ 'CONTROLL.BUTTON.edit' | translate }}\\\" type=\\\"default\\\" [disabled]=\\\"!(selectedRows.length == 1) && disEditMulti\\\"></dx-button> -->\\r\\n          <!-- <dx-button (click)=\\\"delete()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xoa.png\\\" text=\\\"Xóa\\\" type=\\\"default\\\" [disabled]=\\\"!selectedRows.length\\\"></dx-button> -->\\r\\n          <dx-button *ngIf=\\\"isAccessExportInv && configs.system_parameter.allow_keep_invoice_number\\\"\\r\\n            (click)=\\\"kyHangLoat()\\\" text=\\\"{{ 'CONTROLL.BUTTON.sign' | translate }}\\\" type=\\\"default\\\"\\r\\n            [disabled]=\\\"!selectedRows.length\\\"></dx-button>\\r\\n          <!-- <dx-button (click)=\\\"giuSo()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xoa.png\\\" text=\\\"Giữ số\\\" type=\\\"default\\\"></dx-button> -->\\r\\n          <dx-menu *ngIf=\\\"test\\\" [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\"\\r\\n            submenuDirection=\\\"auto\\\" (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainer\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n  [showRowLines]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\"\\r\\n  [columnResizingMode]=\\\"true\\\" [columnAutoWidth]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n  (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n  <dxo-selection selectAllMode=\\\"{{pageSelect}}\\\" mode=\\\"multiple\\\">\\r\\n  </dxo-selection>\\r\\n  <!-- <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"internaltransport\\\"></dxo-state-storing> -->\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"multiple\\\"></dxo-sorting>\\r\\n  <dxo-selection mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row>\\r\\n  <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" width=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n    alignment=\\\"center\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"1\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n  <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n    width=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\"\\r\\n    width=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" dataType=\\\"date\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\"\\r\\n    format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"0\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column *ngIf=\\\"isPXKDaiLy\\\" cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.agency_name' | translate }}\\\"\\r\\n    [width]=\\\"180\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n  <dxi-column cellTemplate=\\\"Thongtindieudong\\\" caption=\\\"{{strTextHDKT}}\\\" [width]=\\\"140\\\" alignment=\\\"left\\\"\\r\\n    headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n  <dxi-column cellTemplate=\\\"Thongtinvanchuyen\\\" caption=\\\"{{ 'GRID.PHIEU_XUAT_KHO.info_shipping' | translate }}\\\"\\r\\n    alignment=\\\"left\\\"></dxi-column>\\r\\n  <dxi-column cellTemplate=\\\"Thongtinkho\\\" caption=\\\"{{ 'CONTROLL.LABEL.warehouse' | translate }}\\\" [width]=\\\"140\\\"\\r\\n    alignment=\\\"left\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n  <!-- total_payment_string: trường này không có trong invoice, để hiển thị định dạng tổng tiền ngoài màn hình -->\\r\\n  <dxi-column dataField=\\\"total_payment_string\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\"\\r\\n    width=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\" alignment=\\\"right\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n  <!-- Trạng thái gửi CQT -->\\r\\n  <dxi-column *ngIf=\\\"isTT78\\\" cellTemplate=\\\"statusSendTax\\\" caption=\\\"Trạng thái gửi CQT\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column cellTemplate=\\\"actionEmail\\\" caption=\\\"{{ 'GRID.INVOICE.send_email_status' | translate }}\\\" width=\\\"110\\\"\\r\\n    alignment=\\\"center\\\"></dxi-column>\\r\\n  <!-- Chức năng -->\\r\\n  <dxi-column cellTemplate=\\\"actionIcon\\\" minWidth=\\\"130\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p>{{ d.data.template_code }}</p>\\r\\n    <p>{{ d.data.invoice_series }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_GUI_CQT' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Đã gửi để cấp mã</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_CAP' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Đã cấp mã</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'KHONG_DU_DK_CAP_MA' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\" style=\\\"color: red;\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">Không đủ ĐK cấp mã</a>\\r\\n\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'CHUA_GUI_CQT' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Chưa gửi CQT</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_GUI_CQT' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Đã gửi CQT</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_TIEP_NHAN' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">CQT đã tiếp nhận</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'KHONG_HOP_LE' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\" style=\\\"color: red;\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">CQT kiểm tra không hợp lệ </a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n    <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n        *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n    <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n    <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name ||\\r\\n      _translate.GRID.INVOICE.invoice_wait_for_sign }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'Thongtindieudong'\\\">\\r\\n    <p *ngIf=\\\"d.data.delivery_order_number\\\">{{ 'CONTROLL.LABEL.number' | translate }}: {{\\r\\n      d.data.delivery_order_number}},</p>\\r\\n    <p *ngIf=\\\"d.data.delivery_order_date\\\">{{ 'CONTROLL.LABEL.date' | translate }}: {{\\r\\n      convertDDMMYYY(d.data.delivery_order_date) }},</p>\\r\\n    <p *ngIf=\\\"d.data.delivery_order_by\\\">{{ 'CONTROLL.LABEL.of' | translate }}: {{ d.data.delivery_order_by}},</p>\\r\\n    <p *ngIf=\\\"d.data.delivery_order_content\\\">{{ 'CONTROLL.LABEL.delivery_order_content' | translate }}: {{\\r\\n      d.data.delivery_order_content}}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'Thongtinvanchuyen'\\\">\\r\\n    <p *ngIf=\\\"d.data.delivery_by\\\">{{ 'CONTROLL.LABEL.delivery_by' | translate }}: {{ d.data.delivery_by}},</p>\\r\\n    <p *ngIf=\\\"d.data.transportation_contract\\\">{{ 'CONTROLL.LABEL.contract_number' | translate }}: {{\\r\\n      d.data.transportation_contract}},</p>\\r\\n    <p *ngIf=\\\"d.data.transportation_method\\\">{{ 'CONTROLL.LABEL.transportation_method' | translate }}: {{\\r\\n      d.data.transportation_method}}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'Thongtinkho'\\\">\\r\\n    <p *ngIf=\\\"d.data.from_warehouse_name\\\">{{ 'CONTROLL.LABEL.from_warehouse' | translate }}: {{\\r\\n      d.data.from_warehouse_name}},</p>\\r\\n    <p *ngIf=\\\"d.data.to_warehouse_name\\\">{{ 'CONTROLL.LABEL.to_warehouse' | translate }}: {{ d.data.to_warehouse_name}}\\r\\n    </p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'actionEmail'\\\">\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status !='GIU_SO'\\\" class=\\\"chua-gui-khach-hang gach-chan\\\"\\r\\n      (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.un_sent' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status =='GIU_SO'\\\" class=\\\"cho-ky\\\"\\r\\n      (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_sign' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_GUI'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_it' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_NHAN'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.received' | translate }}</a>\\r\\n    <p *ngIf=\\\"!d.data.send_email_status\\\" href=\\\"javascript:void(0)\\\">{{ trangthaihoadon(d.data) }} <a\\r\\n        *ngIf=\\\"trangthaihoadon(d.data) == 'Lỗi ký HD' || trangthaihoadon(d.data) == 'Signed error'\\\" class=\\\"gach-chan\\\"\\r\\n        (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">({{ 'GRID.INVOICE.re_sign' | translate }})</a></p>\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n    <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{info.column.caption}} </p>\\r\\n  </div>\\r\\n\\r\\n  <!-- Chức năng -->\\r\\n  <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.view_internal_transport}}\\\" class=\\\"xemIcon actionIcon\\\" (click)=\\\"view(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.edit}}\\\" class=\\\"suaIcon actionIcon\\\" (click)=\\\"edit(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.delete}}\\\" class=\\\"xoaIcon actionIcon\\\" (click)=\\\"delete(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <div class=\\\"dropdown\\\">\\r\\n      <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" class=\\\"morongIcon actionIcon\\\" (click)=\\\"myFunction(d.data.id)\\\"\\r\\n        href=\\\"javascript:void(0)\\\"></a>\\r\\n      <div [id]=\\\"d.data.id\\\" class=\\\"dropdown-content\\\"\\r\\n        [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n        <a (click)=\\\"copy(d.data)\\\" href=\\\"javascript:void(0)\\\">{{'CONTROLL.BUTTON.copy' | translate}}\\r\\n          <i [class]=\\\"_translate.ICONS.copy\\\"></i></a>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <dxo-summary>\\r\\n    <dxi-total-item summaryType=\\\"custom\\\" cssClass=\\\"dxi-total-payment-total_payment_string\\\" [customizeText]=\\\"customizeText\\\" showInColumn=\\\"total_payment_string\\\">\\r\\n    </dxi-total-item>\\r\\n  </dxo-summary>\\r\\n\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"configs.system_parameter.number_row_per_page\\\"></dxo-paging>\\r\\n  <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 35, 50, 100]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n    [showInfo]=\\\"true\\\" infoText=\\\"{{ 'DXO_PAGER.page' | translate }}\\\">>\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n<app-download-pdf></app-download-pdf>\\r\\n\"","module.exports = \".chua-gui-khach-hang{color:red}.cho-ky{color:#008b8b}.gach-chan{text-decoration:underline}.search-section{padding-bottom:15px}.last-drodown{bottom:30px}.button-panel{margin-top:30px}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}::ng-deep #gridContainer .dx-cell-focus-disabled{overflow:visible !important}.small-grid{position:fixed  !important;right:39px !important}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { DxDataGridComponent, DxMenuComponent } from 'devextreme-angular';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { Library, Helper, AuthService, VPreviewInvService, sEnum, VStringService, SocketService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { SignManyComponent } from '../sign-many/sign-many.component';\r\nimport { SendInvoicesComponent } from '../send-invoices/send-invoices.component';\r\nimport * as moment from 'moment';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { SendListEmailComponent } from '../send-list-email/send-list-email.component';\r\nimport { ImportInvoicesFromExcelComponent } from '../import-invoices-from-excel/import-invoices-from-excel.component';\r\nimport { SendReportDeliveryComponent } from '../send-report-delivery/send-report-delivery.component';\r\nimport { ViewDeliveryComponent } from '../view-delivery/view-delivery.component';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { SendDataForTaxComponent } from '@shared/index';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { DownloadPdfComponent } from '@shared/components/download-pdf/download-pdf.component';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\nimport * as _ from 'lodash'\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  @ViewChild(DxMenuComponent) dxMenu: DxMenuComponent;\r\n  @ViewChild('expandMenu') expandMenu;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @ViewChild(DownloadPdfComponent) downloadPdf: DownloadPdfComponent;\r\n  dataSource: any;\r\n  selectedRows: Array<any> = [];\r\n  selectedItems: Array<any> = [];\r\n  bsModalRef: BsModalRef;\r\n  bsModalImportRef: BsModalRef;\r\n  bsModalSignRef: BsModalRef;\r\n  listDM: any;\r\n  loaiHoaDon: string;\r\n  test: boolean = true;\r\n  isAccessExportInv: boolean = true;\r\n  invoice_releases = [];\r\n  paramSearch: any;\r\n  _language: string;\r\n  _translate: any;\r\n  clickCurent = '';\r\n  clickCurentToggle = '';\r\n  isDisableReplace = true;\r\n  isDisableAdjust = true;\r\n  templatesTT78 = [];\r\n  objStatusBtn = {}\r\n  //dropbutton\r\n  extras = [];\r\n  //end-dropbutton\r\n\r\n  select: any = {};\r\n  configs: any;\r\n  pageSize: any;\r\n  disEditMulti = true;\r\n  isPXKDaiLy = false;\r\n  strTextHDKT: any;\r\n  hoaDonImportChoXuat: any;\r\n  currentUser: any;\r\n  pageSelect: any;\r\n  taxCodeThueHCM = [\"0102519041-555\"];\r\n  isTT78: boolean = false;\r\n  infoDangKy: any = {};\r\n  isExistFormRelease: boolean = false;\r\n  ioSignature: Subscription;\r\n  constructor(\r\n    private authService: AuthService,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    private modalImportService: BsModalService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    public translate: TranslateService,\r\n    private spinner: NgxSpinnerService,\r\n    private socketService: SocketService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n    this.extras = [{\r\n      id: \"1\",\r\n      name: this._translate.CONTROLL.BUTTON.extend,\r\n      items: [\r\n        {\r\n          id: 'NAP_HD_TU_EXCEL_DT',\r\n          name: this._translate.CONTROLL.BUTTON.import_internal_transport_from_excel,\r\n          icon: this._translate.ICONS.excel\r\n        },\r\n        {\r\n          id: 'SUA',\r\n          name: this._translate.CONTROLL.BUTTON.edit,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n        {\r\n          id: 'XOA',\r\n          name: this._translate.CONTROLL.BUTTON.delete,\r\n          icon: this._translate.ICONS.delete\r\n        },\r\n        {\r\n          id: 'XEM',\r\n          name: this._translate.CONTROLL.BUTTON.view_internal_transport,\r\n          icon: this._translate.ICONS.view\r\n        },\r\n        {\r\n          id: 'INCHUYENDOI',\r\n          name: this._translate.CONTROLL.BUTTON.print_conversion,\r\n          icon: this._translate.ICONS.print\r\n        },\r\n        {\r\n          id: 'GUI_BEN_MUA',\r\n          name: this._translate.CONTROLL.LABEL.send_internal_transport,\r\n          icon: this._translate.ICONS.send_email\r\n        },\r\n        {\r\n          id: 'TAI_HD_PDF',\r\n          name: this._translate.CONTROLL.BUTTON.tai_hd_pdf,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    if (this.configs.system_parameter.select_invoice_current_page)\r\n      this.pageSelect = \"page\";\r\n    else\r\n      this.pageSelect = \"allPages\";\r\n    this.loaiHoaDon = this.route.snapshot.data.type;\r\n    this.vatService.data = null;\r\n    this.vatService.isCopy = false;\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    let listpermissions = this.currentUser.user.permissions.split(',');\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n    if (this.isPXKDaiLy)\r\n      this.strTextHDKT = this._translate.GRID.PHIEU_XUAT_KHO.economic_contract;\r\n    else\r\n      this.strTextHDKT = this._translate.GRID.PHIEU_XUAT_KHO.info_mobility;\r\n    if (!this.taxCodeThueHCM.includes(this.currentUser.account.tax_code)) {\r\n      this.extras[0].items.push({ id: \"TAI_HD_XML\", name: this._translate.CONTROLL.BUTTON.tai_pxk_xml, icon: this._translate.ICONS.xml });\r\n    }\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.XKNB03) {\r\n      if (this.configs.system_parameter.digitally_sign_the_delivery) {\r\n        let oKyLenhDieuDong = listpermissions.filter(p => p == sEnum.permissions.NguoiTaoKy || p == sEnum.permissions.PhuTrachDonViKy);\r\n        if (oKyLenhDieuDong.length > 0)\r\n          this.extras[0].items.push({ id: \"KY_LENH_DIEU_DONG\", name: this._translate.CONTROLL.BUTTON.sign_maneuver_command, icon: this._translate.ICONS.pencil });\r\n        this.extras[0].items.push({ id: \"IN_LENH_DIEU_DONG\", name: this._translate.CONTROLL.BUTTON.print_maneuver_command, icon: this._translate.ICONS.print });\r\n      }\r\n      if (this.configs.integrate_parameter.integrate_econtract && this.configs.integrate_parameter.integrate_econtract.is_delivery) {\r\n        this.extras[0].items.push({ id: \"GUI_BB_GIAO_HANG\", name: this._translate.CONTROLL.BUTTON.send_report_delivery, icon: this._translate.ICONS.send_email });\r\n        this.extras[0].items.push({ id: \"IN_BB_GIAO_HANG\", name: this._translate.CONTROLL.BUTTON.print_report_delivery, icon: this._translate.ICONS.print });\r\n      }\r\n    }\r\n    else {\r\n      this.extras[0].items = this.extras[0].items.filter(p => p.id != \"NAP_HD_TU_EXCEL_DT\");\r\n    }\r\n    if (this.currentUser.is_convert_TT78) {\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      if (this.infoDangKy && this.infoDangKy.id) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n          this.isTT78 = true;\r\n          let infoFormRelease = this.authService.getInfoFormRelease();\r\n          if (infoFormRelease && infoFormRelease.invoice_releases && infoFormRelease.invoice_releases.length > 0) {\r\n            let invoicesReleases = infoFormRelease.invoice_releases.filter(p => (parseInt(p.amount) - parseInt(p.used_amount)) > 0);\r\n            if (invoicesReleases && invoicesReleases.length > 0)\r\n              this.isExistFormRelease = true;\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n    else {\r\n      if (localStorage.getItem('new_member')) {\r\n        Library.notify('Bạn phải tạo thông báo phát hành trước khi lập hóa đơn', 'warning');\r\n      }\r\n    }\r\n    // let exportSchedules = Helper.getExportSchedule(this._translate).schedule;\r\n    // let _objSchedules = exportSchedules.filter(p => p.code == \"THANG_NAY\")[0];\r\n    // if (_objSchedules) {\r\n    //   this.loadList();\r\n    //   // this.loadList(`&filter_groups[999][filters][0][key]=invoice_date&filter_groups[999][filters][0][value]=${moment(_objSchedules.startDate).format('YYYY-MM-DD')} 00:00:00&filter_groups[999][filters][0][operator]=gte&filter_groups[999][filters][1][key]=invoice_date&filter_groups[999][filters][1][value]=${moment(_objSchedules.endDate).format('YYYY-MM-DD')} 23:59:59&filter_groups[999][filters][1][operator]=lt`);\r\n    // }\r\n    let sub = this.vatService.getDMIndex().subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.listDM = rs.data;\r\n        //put data DM for select\r\n        this.select.unit_codes = rs.data.DM_DON_VI_TINH;\r\n        this.select.select_provisions_on_accounts = rs.data.DM_DINH_KHOAN;\r\n        this.select.payment_method_names = rs.data.DM_HINH_THUC_THANH_TOAN;\r\n        this.select.vats = rs.data.DM_TY_LE_VAT;\r\n      } else {\r\n        Library.notify('Có lỗi khi tải danh mục', 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n\r\n    let _obj = listpermissions.filter(p => p == \"phe_duyet\");\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else\r\n      this.isAccessExportInv = false;\r\n  }\r\n\r\n  loadList(params?) {\r\n    this.dataSource = {};\r\n    let _lst = [];\r\n    if (params) {\r\n      _lst = this.vatService.getAll(this.loaiHoaDon, params);\r\n    } else {\r\n      _lst = this.vatService.getAll(this.loaiHoaDon);\r\n    }\r\n    this.dataSource.store = _lst;\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType == 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.invoice_number) {\r\n            if (e.data.send_department_status == \"DA_GUI_CQT\")\r\n              e.rowElement.style.color = '#008B8B';\r\n            else if (e.data.send_department_status == \"DA_CAP\")\r\n              e.rowElement.style.color = 'black';\r\n            else if (e.data.send_department_status == \"DA_TIEP_NHAN\")\r\n              e.rowElement.style.color = 'black';\r\n            else\r\n              e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type == 2 || e.data.adjustment_type == 7) {\r\n        let eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadList(e);\r\n  }\r\n\r\n  checkDisableButton() {\r\n    if (this.selectedItems.length) {\r\n      if (this.selectedItems[0].status == 'DA_XUAT') {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.invoice_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // Chọn đối tượng trong màn hình danh sách\r\n  selectionChanged(data: any) {\r\n    this.disEditMulti = true;\r\n    this.selectedItems = data.selectedRowsData;\r\n    if (this.selectedItems.length > 0) {\r\n      let checks = this.selectedItems.filter((item) => {\r\n        return item.number_of_vouchers;\r\n      });\r\n      let checkDaXuat = this.selectedItems.filter((item) => {\r\n        return item.status == \"DA_XUAT\";\r\n      });\r\n      if (checks.length == this.selectedItems.length && checkDaXuat.length == 0) {\r\n        this.disEditMulti = false;\r\n      }\r\n      if (this.selectedItems.length == 1) {\r\n        this.isDisableAdjust = false;\r\n        this.isDisableReplace = false;\r\n      } else {\r\n        this.isDisableAdjust = true;\r\n        this.isDisableReplace = true;\r\n      }\r\n    } else {\r\n      this.isDisableAdjust = true;\r\n      this.isDisableReplace = true;\r\n    }\r\n  }\r\n\r\n  async lapHoaDon() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.XKNB03)\r\n      this.router.navigate(['system/transport-invoice/create']);\r\n    else {\r\n      if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n        this.router.navigate(['system/agent-invoice/create']);\r\n      else\r\n        this.router.navigate(['system/sale-invoice/create']);\r\n    }\r\n  }\r\n\r\n  async edit(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    let rowData = null;\r\n    if (data) {\r\n      if (VStringService._getValueToString(data.status) == sEnum.statusInv.DaXuat)\r\n        Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n      else {\r\n        rowData = data;\r\n      }\r\n    }\r\n    else {\r\n      if (this.selectedItems.length > 0) {\r\n        if (this.selectedItems.length == 1)\r\n          rowData = this.selectedItems[0];\r\n        else {\r\n          /* Không cho sửa hóa đơn đã xuất hoặc đã gửi thuế */\r\n          let _hdDaXuat = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat)[0];\r\n          let oInvoice = this.selectedItems.filter(p => p.send_department_status)[0];\r\n          if (_hdDaXuat || oInvoice) {\r\n            Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice_pxk, 'error');\r\n            return;\r\n          }\r\n          /* Hóa đơn sửa phải cùng mẫu */\r\n          const isCheckAllEquals = this.selectedItems.every(item => item.template_id == this.selectedItems[0].template_id);\r\n          if (!isCheckAllEquals) {\r\n            Library.notify(this._translate.THONG_TIN.chon_hoa_don_cung_mau_pxk, 'error');\r\n            return;\r\n          }\r\n          /* Hóa đơn sửa phải là hóa đơn gốc */\r\n          const isExistOther = this.selectedItems.find(item => item.adjustment_type != 1);\r\n          if (isExistOther) {\r\n            Library.notify(this._translate.THONG_TIN.cho_phep_sua_hoa_don_goc_pxk, 'error');\r\n            return;\r\n          }\r\n          /* Hóa đơn sửa phải cùng trạng thái (ghi tạm hoặc giữ số) */\r\n          let arrStatusInv = [\"GIU_SO\", \"GHI_TAM\"];\r\n          let arrStatusItem = this.selectedItems.map((obj: any) => obj.status);\r\n          let result = arrStatusInv.every(val => arrStatusItem.includes(val));\r\n          if (result) {\r\n            Library.notify(this._translate.NOTIFY.same_status_invoice_pxk, 'error');\r\n            return;\r\n          }\r\n          this.openImportForm(null);\r\n        }\r\n      }\r\n    }\r\n    if (rowData) {\r\n      if (this.isTT78 && rowData.xml_type != '3' && rowData.status == 'DA_XUAT' && Number.parseInt(rowData.invoice_number) > 0) {\r\n        if (VStringService._getValueToString(rowData.adjustment_type) === 5) {\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust/${VStringService._getValueToString(rowData.id)}`], { queryParams: { status: 'viewInvTT32' } });\r\n        } else if (VStringService._getValueToString(rowData.adjustment_type) === 3) {\r\n          this.router.navigate([`/system/handle-invoice/edit-replace/${VStringService._getValueToString(rowData.id)}`], { queryParams: { status: 'viewInvTT32' } });\r\n        } else {\r\n          if (this.loaiHoaDon == \"03XKNB\")\r\n            this.router.navigate([`/system/transport-invoice/${VStringService._getValueToString(rowData.id)}`], { queryParams: { status: 'viewInvTT32' } });\r\n          else {\r\n            if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n              this.router.navigate([`/system/agent-invoice/${VStringService._getValueToString(rowData.id)}`], { queryParams: { status: 'viewInvTT32' } });\r\n            else\r\n              this.router.navigate([`/system/sale-invoice/${VStringService._getValueToString(rowData.id)}`], { queryParams: { status: 'viewInvTT32' } });\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        if (VStringService._getValueToString(rowData.adjustment_type) === 5) {\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust/${VStringService._getValueToString(rowData.id)}`]);\r\n        } else if (VStringService._getValueToString(rowData.adjustment_type) === 3) {\r\n          this.router.navigate([`/system/handle-invoice/edit-replace/${VStringService._getValueToString(rowData.id)}`]);\r\n        } else {\r\n          if (this.loaiHoaDon == \"03XKNB\")\r\n            this.router.navigate([`/system/transport-invoice/${VStringService._getValueToString(rowData.id)}`]);\r\n          else {\r\n            if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n              this.router.navigate([`/system/agent-invoice/${VStringService._getValueToString(rowData.id)}`]);\r\n            else\r\n              this.router.navigate([`/system/sale-invoice/${VStringService._getValueToString(rowData.id)}`]);\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  async openImportForm(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    Library.showloading();\r\n    let _lst = [];\r\n    if (data) {\r\n      _lst.push(data.id);\r\n    } else {\r\n      _lst = this.selectedRows;\r\n    }\r\n    const subRoute = this.vatService.getEditImportInvoice(_lst, '', this.loaiHoaDon).subscribe((res: any) => {\r\n      this.invoice_releases = Helper.convertDataToImportInvoice(res[0]);\r\n      // Hàng hóa dịch vụ\r\n      setTimeout(() => {\r\n        this.select.products = res[1].data.products;\r\n        this.hoaDonImportChoXuat = res[2].data.invoices.sort((itemA, itemB) => {\r\n          return moment(itemA.created_at, 'YYYY-MM-DD HH:mm:ss').valueOf() - moment(itemB.created_at, 'YYYY-MM-DD HH:mm:ss').valueOf();\r\n        });\r\n        this.select.unit_codes = res[3].data.DM_DON_VI_TINH;\r\n        this.select.select_provisions_on_accounts = res[3].data.DM_DINH_KHOAN;\r\n        this.select.payment_method_names = res[3].data.DM_HINH_THUC_THANH_TOAN;\r\n        this.select.vats = res[3].data.DM_TY_LE_VAT;\r\n        this.select.wavehourses = res[4].data.wavehourses;\r\n        this.templatesTT78 = Helper.convertTemplatesToInvoiceResolver(res[5]);\r\n        this.hoaDonImportChoXuat.forEach(invoice => {\r\n          invoice.invoice_products.forEach(row => {\r\n            if (row.product_code) {\r\n              const _obj = this.select.products.filter(p => p.code === row.product_code)[0];\r\n              if (!_obj) {\r\n                const _objPush = {\r\n                  code: row.product_code,\r\n                  name: row.product_name,\r\n                  mhvth: row.product_code + ': ' + row.product_name,\r\n                };\r\n                this.select.products.push(_objPush);\r\n              }\r\n            }\r\n          });\r\n        });\r\n        const initialState = {\r\n          isHdGTGT: this.loaiHoaDon === '01GTKT' ? true : false,\r\n          invoice_releases: this.invoice_releases,\r\n          select: this.select,\r\n          hoaDonImportChoXuat: this.hoaDonImportChoXuat,\r\n          templatesTT78: this.templatesTT78,\r\n          infoDangKy: this.infoDangKy\r\n        };\r\n        this.bsModalImportRef = this.modalImportService.show\r\n          (\r\n            ImportInvoicesFromExcelComponent,\r\n            {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-lg full-width',\r\n              initialState\r\n            }\r\n          );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          this.loadList(this.paramSearch);\r\n          subModal.unsubscribe();\r\n        });\r\n      }, 10);\r\n      Library.hideloading();\r\n    }, (err) => {\r\n    }, () => {\r\n      subRoute.unsubscribe();\r\n    });\r\n  }\r\n\r\n  async editNotSelect(row) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (row.status == \"DA_XUAT\") {\r\n      Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n    } else {\r\n      if (row.adjustment_type == 5) {\r\n        if (this.loaiHoaDon == \"03XKNB\") {\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust-warehouse/${row.id}`]);\r\n        } else {\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust-agent/${row.id}`]);\r\n        }\r\n      } else if (row.adjustment_type == 3) {\r\n        if (this.loaiHoaDon == \"03XKNB\") {\r\n          this.router.navigate([`/system/handle-invoice/edit-replace-warehouse/${row.id}`]);\r\n        } else {\r\n          this.router.navigate([`/system/handle-invoice/edit-replace-agent/${row.id}`]);\r\n        }\r\n      } else {\r\n        if (this.loaiHoaDon == \"03XKNB\")\r\n          this.router.navigate([`/system/transport-invoice/${row.id}`]);\r\n        else {\r\n          if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n            this.router.navigate([`/system/agent-invoice/${row.id}`]);\r\n          else\r\n            this.router.navigate([`/system/sale-invoice/${row.id}`]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  viewNotSelect(row) {\r\n    if (row.status == 'DA_XUAT') {\r\n      Library.showloading();\r\n      let win = window.open(\"\", \"\", \"width=200, height=100\");\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      let sub = this.vatService.view(row.id).subscribe(rs => {\r\n        if (rs.status == \"success\") {\r\n          let pdf_file = rs.data.invoice.pdf_file;\r\n          win.document.write(`\r\n            <a id=\"idA\" title=\"Download File\" style=\"font-family: \\'Verdana\\';color: #333;font-weight: 600;float:right; margin-bottom: 5px;\r\n              margin-right: 20px;\" download=\"hoadon.pdf\" href=\"data:application/pdf;base64,${pdf_file}\">Tải File</a>\r\n            <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n          `);\r\n          win.resizeTo(screen.availWidth, screen.availHeight);\r\n          win.focus();\r\n        } else {\r\n          win.close();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.invoice_signed_error_please_sign_the_invoice_again, 'error');\r\n    }\r\n  }\r\n\r\n  viewDetailInvoice(row) {\r\n    if (this.isTT78 && row.xml_type != '3' && row.status == 'DA_XUAT' && Number.parseInt(row.invoice_number) > 0) {\r\n      if (Number.parseInt(row.adjustment_type) == 5) {\r\n        if (this.loaiHoaDon == \"03XKNB\") {\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust-warehouse/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n        } else {\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust-agent/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n        }\r\n      } else if (Number.parseInt(row.adjustment_type) == 3) {\r\n        if (this.loaiHoaDon == \"03XKNB\") {\r\n          this.router.navigate([`/system/handle-invoice/edit-replace-warehouse/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n        } else {\r\n          this.router.navigate([`/system/handle-invoice/edit-replace-agent/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n        }\r\n      } else {\r\n        if (this.loaiHoaDon == \"03XKNB\")\r\n          this.router.navigate([`/system/transport-invoice/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n        else {\r\n          if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n            this.router.navigate([`/system/agent-invoice/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n          else\r\n            this.router.navigate([`/system/sale-invoice/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (Number.parseInt(row.adjustment_type) == 5) {\r\n        if (this.loaiHoaDon == \"03XKNB\") {\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust-warehouse/${row.id}`]);\r\n        } else {\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust-agent/${row.id}`]);\r\n        }\r\n      } else if (Number.parseInt(row.adjustment_type) == 3) {\r\n        if (this.loaiHoaDon == \"03XKNB\") {\r\n          this.router.navigate([`/system/handle-invoice/edit-replace-warehouse/${row.id}`]);\r\n        } else {\r\n          this.router.navigate([`/system/handle-invoice/edit-replace-agent/${row.id}`]);\r\n        }\r\n      } else {\r\n        if (this.loaiHoaDon == \"03XKNB\")\r\n          this.router.navigate([`/system/transport-invoice/${row.id}`]);\r\n        else {\r\n          if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n            this.router.navigate([`/system/agent-invoice/${row.id}`]);\r\n          else\r\n            this.router.navigate([`/system/sale-invoice/${row.id}`]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async delete(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.selectedItems.length || data) {\r\n      let ids = '';\r\n      if (data) {\r\n        ids = data.id;\r\n      } else {\r\n        ids = this.selectedRows.join(',');\r\n      }\r\n      var result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          Library.showloading();\r\n          this.vatService.delete(ids).subscribe(rs => {\r\n            if (rs.status === \"success\") {\r\n              Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n              this.loadList(this.paramSearch);\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => { }, () => {\r\n            Library.hideloading();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  giuSo() {\r\n\r\n  }\r\n\r\n  view(data) {\r\n    if (this.selectedItems.length > 0 || data) {\r\n      let _lst = this.selectedItems.filter(p => p.status === 'DA_XUAT');\r\n      if (_lst.length > 0 || data) {\r\n        let ids = [];\r\n        if (data) {\r\n          ids.push(data.id);\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          let data = this.vatService.taodulieuXemMau(ids);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_hoa_don,\r\n            type_invocie: sEnum.typeCode.phieu_xuat_kho\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  inChuyenDoi(data) {\r\n    if (this.selectedItems.length || data) {\r\n      const _lst = this.selectedItems.filter(p => p.status == 'DA_XUAT');\r\n      if (_lst.length > 0 || data) {\r\n        let ids = [];\r\n        if (data) {\r\n          if (data.status === 'DA_XUAT') {\r\n            ids.push(data.id);\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_print_convert, 'error');\r\n            return;\r\n          }\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          const data = this.vatService.taodulieuInMau(ids, false);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.in_chuyen_doi_hd,\r\n            type_invocie: sEnum.typeCode.phieu_xuat_kho\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  sendInvoice(id) {\r\n    Library.showloading();\r\n    let sub = this.vatService.showToSendInvoice(id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n          loaihoadon: this.loaiHoaDon\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  customizeText = (url) => {\r\n    this.invoiceService.handleTotalGrid(url.value, this.objStatusBtn, this.dataGrid);\r\n    return '';\r\n  }\r\n\r\n  kyHangLoat() {\r\n    let check = true;\r\n    this.selectedItems.forEach(item => {\r\n      if (item.status !== \"GIU_SO\") {\r\n        check = false;\r\n      }\r\n    });\r\n\r\n    if (check && this.selectedItems.length) {\r\n      if (this.selectedItems.length > 25) {\r\n        Library.notify('Chỉ được chọn tối đa 25 hóa đơn để ký hàng loạt', 'error');\r\n        return false;\r\n      }\r\n      Library.showloading();\r\n      this.vatService.layCacHoaDonKySoHangLoat(this.selectedRows, this.loaiHoaDon).subscribe((rs: any) => {\r\n        if (rs[0].status == 'success') {\r\n          let initialState = {\r\n            invoiceList: rs[0].data.invoices,\r\n            configs: rs[1].data.configs\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SignManyComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          let subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify('Vui lòng chọn hóa đơn chờ ký', 'error');\r\n    }\r\n  }\r\n\r\n  async napHDTuExcelDt() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    Library.showloading();\r\n    this.vatService.getImportInvoice(this.loaiHoaDon).subscribe((res: any) => {\r\n      this.invoice_releases = Helper.convertDataToImportInvoice(res[0]);\r\n      this.templatesTT78 = Helper.convertTemplatesToInvoiceResolver(res[4]);\r\n      // Hàng hóa dịch vụ\r\n      this.select.products = res[1].data.products;\r\n      this.select.unit_codes = res[2].data.DM_DON_VI_TINH;\r\n      this.select.select_provisions_on_accounts = res[2].data.DM_DINH_KHOAN;\r\n      this.select.payment_method_names = res[2].data.DM_HINH_THUC_THANH_TOAN;\r\n      this.select.vats = res[2].data.DM_TY_LE_VAT;\r\n      this.select.wavehourses = res[3].data.wavehourses;\r\n      const initialState = {\r\n        isHdGTGT: this.loaiHoaDon === '01GTKT' ? true : false,\r\n        invoice_releases: this.invoice_releases,\r\n        select: this.select,\r\n        isAccessExportInv: this.isAccessExportInv,\r\n        templatesTT78: this.templatesTT78,\r\n        infoDangKy: this.infoDangKy\r\n      };\r\n      this.bsModalImportRef = this.modalImportService.show(\r\n        ImportInvoicesFromExcelComponent,\r\n        {\r\n          backdrop: 'static',\r\n          keyboard: false,\r\n          class: 'modal-lg full-width',\r\n          initialState\r\n        }\r\n      );\r\n      const subModal = this.modalImportService.onHide.subscribe(() => {\r\n        this.loadList(this.paramSearch);\r\n        subModal.unsubscribe();\r\n      });\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  /* Tải file hóa đơn pdf */\r\n  taiHDPdf() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = _lst.map(e => e.id);\r\n        ids = _lst.map(e => e.id);\r\n        this.downloadPdf.downloadPdf(ids, 'invoices', 'invoice', false);\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n  /* Tải file hóa đơn xml */\r\n  taiHDXml() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = [];\r\n        ids = _lst.map(e => e.id);\r\n        Library.showloading();\r\n        let sub = this.vatService.xuatHDXml(ids).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n          } else {\r\n            Library.notify(rs.message, \"error\");\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n  /* Ký lệnh điều động */\r\n  kylenhdieudong() {\r\n    const setInvoiceDate = Library.confirm(this._translate.NOTIFY.do_you_want_to_sign_transport, this._translate.NOTIFY.notify);\r\n    setInvoiceDate.then((dialog) => {\r\n      if (!dialog) {\r\n      }\r\n      else {\r\n        if (this.selectedItems.length > 0) {\r\n          let ids = [];\r\n          ids = this.selectedItems.map(e => e.id);\r\n          Library.showloading();\r\n          let sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n            if (rs.status == \"success\") {\r\n              Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => { }, () => {\r\n            Library.hideloading();\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  /* In lệnh điều động */\r\n  inlenhdieudong() {\r\n    if (this.selectedItems.length > 0) {\r\n      let ids = [];\r\n      ids = this.selectedItems.map(e => e.id);\r\n      if (ids.length == 1) {\r\n        let w = 1920, h = 900;\r\n        w = window.screen.availWidth * 100 / 100;\r\n        h = window.screen.availHeight * 93 / 100;\r\n        let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n        win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n        win.blur();\r\n        Library.showloading();\r\n        let sub = this.vatService.xemlenhdieudong(ids).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let pdf_file = rs.data[0].file_content;\r\n            let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n            win.resizeTo(screen.availWidth, screen.availHeight);\r\n            win.focus();\r\n            win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n          } else {\r\n            win.close();\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      } else {\r\n        const initialState = {\r\n          items: ids,\r\n          isXuatHD: false,\r\n          hinhthucxuat: '',\r\n          typeAction: sEnum.typeCode.in_lenh_dd,\r\n          type_invocie: sEnum.typeCode.lenh_dieu_dong\r\n        };\r\n        this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n      }\r\n    }\r\n\r\n  }\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id == \"NAP_HD_TU_EXCEL_DT\") {\r\n      this.napHDTuExcelDt();\r\n    } else if (e.itemData.id == \"GIU_SO\") {\r\n      this.giuSo();\r\n    } else if (e.itemData.id == \"KY_SO\") {\r\n      this.kyHangLoat();\r\n    } else if (e.itemData.id == 'XOA') {\r\n      this.delete(null);\r\n    } else if (e.itemData.id == 'XEM') {\r\n      this.view(null);\r\n    } else if (e.itemData.id == 'INCHUYENDOI') {\r\n      this.inChuyenDoi(null);\r\n    } else if (e.itemData.id === 'GUI_BEN_MUA') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'SUA') {\r\n      this.edit(null);\r\n    } else if (e.itemData.id == \"TAI_HD_XML\") {\r\n      this.taiHDXml();\r\n    } else if (e.itemData.id == \"TAI_HD_PDF\") {\r\n      this.taiHDPdf();\r\n    } else if (e.itemData.id == \"KY_LENH_DIEU_DONG\") {\r\n      this.kylenhdieudong();\r\n    } else if (e.itemData.id == \"IN_LENH_DIEU_DONG\") {\r\n      this.inlenhdieudong();\r\n    } else if (e.itemData.id == \"GUI_BB_GIAO_HANG\") {\r\n      this.guibbgiaohang(null);\r\n    } else if (e.itemData.id == \"IN_BB_GIAO_HANG\") {\r\n      this.inbbgiaohang();\r\n    }\r\n  }\r\n  /* Gửi BB giao hàng */\r\n  guibbgiaohang(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'DA_XUAT') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      if (this.selectedItems.filter(p => p.status === 'DA_XUAT').length === 0) {\r\n        check = false;\r\n      }\r\n    }\r\n\r\n    if (check && (this.selectedItems.length > 0 || data)) {\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedItems.filter(p => p.status === 'DA_XUAT').map(p => p.id);\r\n      }\r\n      this.vatService.layCacHoaDonKySoHangLoat(ids, this.loaiHoaDon).subscribe((rs: any) => {\r\n        if (rs[0].status === 'success') {\r\n          const initialState = {\r\n            invoiceList: rs[0].data.invoices,\r\n            configs: rs[1].data.configs,\r\n            loaiHoaDon: this.loaiHoaDon\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SendReportDeliveryComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.please_choose_delivery_exported, 'error');\r\n    }\r\n  }\r\n  /* In BB giao hàng */\r\n  inbbgiaohang() {\r\n    if (this.selectedItems.length > 0) {\r\n      const initialState = {\r\n        items: this.selectedItems,\r\n      };\r\n      this.bsModalImportRef = this.modalImportService.show\r\n        (\r\n          ViewDeliveryComponent,\r\n          {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-width full-height',\r\n            initialState\r\n          }\r\n        );\r\n      const subModal = this.modalImportService.onHide.subscribe(() => {\r\n        subModal.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  guibenmua(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'DA_XUAT') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      if (this.selectedItems.filter(p => p.status === 'DA_XUAT').length === 0) {\r\n        check = false;\r\n      }\r\n    }\r\n\r\n    if (check && (this.selectedItems.length > 0 || data)) {\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedItems.filter(p => p.status === 'DA_XUAT').map(p => p.id);\r\n      }\r\n      this.vatService.layCacHoaDonKySoHangLoat(ids, this.loaiHoaDon).subscribe((rs: any) => {\r\n        if (rs[0].status === 'success') {\r\n          const initialState = {\r\n            invoiceList: rs[0].data.invoices,\r\n            configs: rs[1].data.configs,\r\n            loaiHoaDon: this.loaiHoaDon\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SendListEmailComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify('Vui lòng chọn hóa đơn', 'error');\r\n    }\r\n  }\r\n  convertDDMMYYY(val) {\r\n    return moment(val, 'YYYY-MM-DD').format('DD/MM/YYYY');\r\n  }\r\n  ngOnDestroy() {\r\n  }\r\n  LydoKTiepNhan(data) {\r\n    let lstErr = JSON.parse(data.error_content_invoice);\r\n    const initialState = {\r\n      lstErr: lstErr,\r\n      notifyType: \"THONG_BAO_LOI_CQT\"\r\n    };\r\n    this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n      backdrop: 'static',\r\n      keyboard: true,\r\n      class: 'modal-lg modal-margin-width',\r\n      initialState\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  onContentReady(e) {\r\n    if (e) {\r\n      const dataSource: any = this.dataGrid.instance.getDataSource();\r\n      this.pageSize = dataSource ? dataSource.items().length : 0;\r\n    }\r\n  }\r\n  async copy(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    const row = data ? data : this.selectedItems[0];\r\n    let sub = this.vatService.show(row.id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        if (rs.data.invoice) {\r\n          rs.data.invoice.id = null;\r\n          rs.data.invoice.origin_id = null;\r\n          rs.data.invoice.adjustment_type = '1';\r\n          rs.data.invoice.adjustment_object = null;\r\n          rs.data.invoice.adjustment_form = null;\r\n          rs.data.invoice.refuse_reason = null;\r\n          rs.data.invoice.destroy_reason = null;\r\n          rs.data.invoice.invoice_number = null;\r\n          rs.data.invoice.invoice_date = null;\r\n          rs.data.invoice.approve_status = null;\r\n          rs.data.invoice.status = rs.data.invoice.status == 'DA_XUAT' ? 'GHI_TAM' : rs.data.invoice.status;\r\n          rs.data.invoice.updated_at = null;\r\n          rs.data.invoice.user_id = null;\r\n          rs.data.invoice.van_id = null;\r\n          rs.data.invoice.invoice_order = null;\r\n          rs.data.invoice.status_order = null;\r\n          rs.data.invoice.doc_relate_date = null;\r\n          rs.data.invoice.doc_relate_symbol = null;\r\n          rs.data.invoice.note_view_on_invoice = null;\r\n          rs.data.invoice.send_department_status = null;\r\n          rs.data.invoice.extend_json_invoice = null;\r\n          rs.data.invoice.is_outside_process = false;\r\n          rs.data.invoice.other_id = null;\r\n          rs.data.invoice.verify_code = null;\r\n          rs.data.invoice.time_print_conversion = null;\r\n          if (rs.data.invoice.invoice_options && rs.data.invoice.invoice_options.length > 0) {\r\n            rs.data.invoice.invoice_options.forEach(item => {\r\n              delete item['id'];\r\n              delete item['invoice_id'];\r\n            });\r\n          }\r\n          this.vatService.data = rs.data.invoice;\r\n          this.vatService.isCopy = true;\r\n        }\r\n        if (this.loaiHoaDon == \"03XKNB\") {\r\n          this.router.navigate(['system/transport-invoice/create']);\r\n        } else {\r\n          this.router.navigate(['system/agent-invoice/create']);\r\n        }\r\n\r\n      }\r\n    });\r\n  }\r\n  myFunction(id) {\r\n    if (this.clickCurent !== '' && this.clickCurent !== id) {\r\n      let valueCurrent = document.getElementById(this.clickCurent);\r\n      if (!valueCurrent)\r\n        document.getElementById(id).classList.toggle('show');\r\n      else {\r\n        document.getElementById(this.clickCurent).classList.remove('show');\r\n        document.getElementById(id).classList.toggle('show');\r\n      }\r\n    }\r\n    else\r\n      document.getElementById(id).classList.toggle('show');\r\n    this.clickCurent = id;\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <!-- phần form thông tin -->\\r\\n    <transport-form-invoice\\r\\n      [dataSource]=\\\"dataSource\\\" \\r\\n      [invoice_products]=\\\"invoice_products\\\" \\r\\n      [formatter]=\\\"formatter\\\"\\r\\n      [frmData]=\\\"frmData\\\"\\r\\n      [wavehourses] = \\\"wavehourses\\\"\\r\\n      [isTT78] = \\\"isTT78\\\"\\r\\n      [infoDangKy] = \\\"infoDangKy\\\"\\r\\n      (onTemplateTT78TypeChange)=\\\"onTemplateTT78TypeChange($event)\\\"\\r\\n      [_oTemplateTT78] = \\\"_oTemplateTT78\\\"\\r\\n      (onFormChange)=\\\"getDataInChildForm($event)\\\"\\r\\n      (onTemplateChange)=\\\"onTemplateChange($event)\\\"\\r\\n      [extentionGrid]=\\\"extentionGrid\\\"\\r\\n      [ttDaXuatHoaDon]=\\\"ttDaXuatHoaDon\\\"\\r\\n    ></transport-form-invoice>\\r\\n  \\r\\n    <!-- table product --> \\r\\n    <transport-product-grip\\r\\n      #child\\r\\n      [dataSource]=\\\"dataSource\\\" \\r\\n      [invoice_products]=\\\"invoice_products\\\" \\r\\n      [formDataInInvoice]=\\\"frmData\\\" \\r\\n      [formatter]=\\\"formatter\\\"\\r\\n      [isPhieuXuatKhoNB]=\\\"isPhieuXuatKhoNB\\\"\\r\\n      [isTT78] = \\\"isTT78\\\"\\r\\n      [_oTemplateTT78] = \\\"_oTemplateTT78\\\"\\r\\n      (importExcel)=\\\"fillDataToForm($event)\\\"\\r\\n      [extentionGrid]=\\\"extentionGrid\\\"\\r\\n    ></transport-product-grip>\\r\\n    \\r\\n    <div  class=\\\"table-footer\\\">\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-2\\\">\\r\\n          <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item cssClass=\\\"vat amount-after-vat-table-footer\\\" dataField=\\\"amount_after_vat\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.tong_tien, disabled: true}\\\">\\r\\n                <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n          </dx-form>\\r\\n        </div>\\r\\n        <div class=\\\"table-footer-3\\\">\\r\\n          <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item cssClass=\\\"vat number_real_import-table-footer\\\" dataField=\\\"number_real_import\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.so_luong, disabled: true}\\\">\\r\\n                <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n          </dx-form>\\r\\n        </div>\\r\\n        <div class=\\\"table-footer-4\\\">\\r\\n            <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item cssClass=\\\"vat number_real_export-table-footer\\\" dataField=\\\"number_real_export\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.so_luong, disabled: true}\\\">\\r\\n                  <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n                </dxi-item>\\r\\n              </dxi-item>\\r\\n            </dx-form>\\r\\n          </div>\\r\\n    </div>\\r\\n  \\r\\n    <!-- vùng chọn file -->\\r\\n    <div class=\\\"row after-table\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <file-upload-multiple [fileData]=\\\"fileData\\\" (fileChange)=\\\"getFileData($event)\\\"></file-upload-multiple>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <div class=\\\"vat money-pull-right\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{_translate.CONTROLL.LABEL.on_currency_amount }}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box \\r\\n                [(value)]=\\\"frmData.on_currency_amount\\\"\\r\\n                format=\\\"0,###\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                (onValueChanged)=\\\"onNumberChange()\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{_translate.CONTROLL.LABEL.amount }}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box \\r\\n                [(value)]=\\\"frmData.amount\\\"\\r\\n                [format]=\\\"formatter.thanh_tien\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                (onValueChanged)=\\\"onNumberChange()\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{_translate.CONTROLL.LABEL.amount_after_vat }}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box \\r\\n                [(value)]=\\\"frmData.total_payment\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                (onValueChanged)=\\\"totalPaymentChange($event)\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"vat total-payment-in-word\\\">\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div class=\\\"dx-field-label\\\">{{_translate.CONTROLL.LABEL.total_payment_in_word }}</div>\\r\\n              <div class=\\\"dx-field-value\\\">\\r\\n                <dx-text-box \\r\\n                  [(value)]=\\\"frmData.total_payment_in_word\\\"\\r\\n                  [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                ></dx-text-box>\\r\\n              </div>\\r\\n            </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <!-- Xem trước PXK -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"{{_translate.CONTROLL.BUTTON.preview_internal_transport }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Xem PXK -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"{{_translate.CONTROLL.BUTTON.view_internal_transport }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- In chuyển đổi PXK -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"inChuyenDoi()\\\" [(icon)]=\\\"this._translate.ICONS.print\\\"\\r\\n          [text]=\\\"inChuyenDoiText()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- In lệnh điều động -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"configs.system_parameter.digitally_sign_the_delivery && isPhieuXuatKhoNB\\\" (click)=\\\"inlenhdieudong()\\\" [(icon)]=\\\"this._translate.ICONS.print\\\" text=\\\"{{_translate.CONTROLL.BUTTON.print_maneuver_command }}\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <!-- Thủ kho xuất ký (đang chờ biến cấu hình để bắt ràng buộc nếu biến đó là true thì k hiện nút này)-->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"isPhieuXuatKhoNB && isShowThuKhoXuatKy\\\" (click)=\\\"thukhoxuatky()\\\" [(icon)]=\\\"this._translate.ICONS.pencil\\\" text=\\\"{{_translate.CONTROLL.BUTTON.warehouse_keeper_sign }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Hủy lệnh điều động -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"isShowKyLenhDieuDong && isShowHuyLenhDD && isPhieuXuatKhoNB\\\" (click)=\\\"huylenhdieudong()\\\" [(icon)]=\\\"this._translate.ICONS.delete\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel_maneuver_command }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Ký lệnh điều động -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"isShowKyLenhDieuDong && isPhieuXuatKhoNB\\\" (click)=\\\"submitlenhdieudong()\\\" [(icon)]=\\\"this._translate.ICONS.pencil\\\" text=\\\"{{_translate.CONTROLL.BUTTON.sign_maneuver_command }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Xuất phiếu xuất kho -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet && isAccessExportInv\\\" appScrollToInvalid text=\\\"{{_translate.CONTROLL.BUTTON.export_internal_transport }}\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"eSubmit('XUAT')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <!-- Ghi tạm -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet\\\" appScrollToInvalid text=\\\"{{_translate.CONTROLL.BUTTON.save_temporary }}\\\" icon=\\\"assets\\\\img\\\\icons\\\\GhiTam.png\\\" (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <!-- Tạo mới -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!showTraLai && !showKyDuyet\\\" text=\\\"{{_translate.CONTROLL.BUTTON.create_new }}\\\" icon=\\\"assets\\\\img\\\\icons\\\\LapHD.png\\\" (click)=\\\"handleAddNew()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Trả lại -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"showTraLai\\\" text=\\\"{{_translate.CONTROLL.BUTTON.return }}\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"traLai()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && showKyDuyet\\\" text=\\\"Ký duyệt\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"eSubmit('XUAT')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <!-- Quay lại -->\\r\\n          <dx-button appBackButton type=\\\"default\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" text=\\\"{{_translate.CONTROLL.BUTTON.close }}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  \\r\\n  </form>\\r\\n\\r\\n  <ngx-spinner\\r\\nbdColor=\\\"rgba(51,51,51,0.8)\\\"\\r\\nsize=\\\"medium\\\"\\r\\ncolor=\\\"#fff\\\"\\r\\ntype=\\\"timer\\\">\\r\\n<p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}::ng-deep .dx-dialog-message{line-height:25px}.vat.total-payment-in-word .dx-field-label{width:12%}.vat.total-payment-in-word .dx-field-value{width:88% !important}::ng-deep .vat.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}::ng-deep .vat.number_real_export-table-footer input,::ng-deep .vat.number_real_import-table-footer input,::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:150px;float:right}.table-footer .table-footer-2{display:inline-block;width:108px;margin-right:2px;float:right}.table-footer .table-footer-3{display:inline-block;width:100px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:98px;margin-right:2px;float:right}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild, OnDestroy, ViewChildren, AfterViewInit, ChangeDetectorRef } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport * as moment from 'moment';\r\nimport { Base64 } from 'js-base64';\r\ndeclare var $: any;\r\n\r\nimport { VStringService, SocketService, AuthService, sEnum, Library, Helper, VChanggeMoneyService, VPreviewInvService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { ProductGripComponent } from '../product-grip/product-grip.component';\r\nimport { FormInvoiceComponent } from '../form-invoice/form-invoice.component';\r\nimport { InvoiceModel } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport * as _ from 'lodash';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { Observable } from 'rxjs';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n@Component({\r\n  selector: 'app-transport-invoice',\r\n  templateUrl: './invoice.component.html',\r\n  styleUrls: ['./invoice.component.scss']\r\n})\r\nexport class InvoiceComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  @ViewChild(ProductGripComponent) productGrip: ProductGripComponent;\r\n  @ViewChild(FormInvoiceComponent) formInvoice: FormInvoiceComponent;\r\n\r\n  bsModalRef: BsModalRef;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  // buttonBehavior = {\r\n  //   xuat: false,\r\n  //   ghiTam: false\r\n  // };\r\n  frmData: InvoiceModel = new InvoiceModel(1);\r\n  frmTraLai = {\r\n    reason: \"\"\r\n  };\r\n  ttDaXuatHoaDon: boolean = false; //Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  is_multi_vat: any;\r\n  showTraLai: boolean = false;\r\n  showKyDuyet: boolean = false;\r\n  isPhieuXuatKhoNB: boolean = false;\r\n  isAccessExportInv: boolean = false;\r\n  isShowHuyLenhDD: boolean = false;\r\n  //vat-product-grip component\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n  valueChange: string;\r\n  jsonProductFirst: string;\r\n  select: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  configs: any;\r\n  _translate: any;\r\n  //danh sách data trong file\r\n  fileData: Array<any> = [];\r\n  tempKiFile = 0;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  isCheckLenhDieuDong = false;\r\n  nodeSign: any;\r\n  wavehourses: any;\r\n  isExportInvoice: boolean;\r\n  resultCompareData: boolean;\r\n  isRoleThuKhoXuatKy: boolean;\r\n  isShowThuKhoXuatKy: boolean;\r\n  isShowKyLenhDieuDong: boolean;\r\n  _oTemplateTT78: any = {};\r\n  invoiceTemplateTT78: any;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  total_payment: any;\r\n  strTextHDKT: any;\r\n  strtextHDKTNgay: any;\r\n  extentionGrid: any = {};\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private productsService: ProductsService,\r\n    private confirmService: ConfirmService,\r\n    private configsService: ConfigsService,\r\n    private spinner: NgxSpinnerService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status == sEnum.statusInv.DaXuat || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && this.frmData.send_department_status === 'KHONG_DU_DK_CAP_MA')\r\n      || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && this.frmData.send_department_status === 'DA_GUI_CQT' && this.frmData.is_invoice_with_code)) {\r\n      this.disablleScreen(sEnum.statusInv.DaXuat);\r\n      this.cdRef.detectChanges();\r\n    }\r\n    else if (this.isShowHuyLenhDD)\r\n      this.disablleScreen('');\r\n    this.getDataToCompare();\r\n  }\r\n\r\n  disablleScreen(trangthaiHD) {\r\n    this.formInvoice.readonlyAllForm(trangthaiHD);\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    if (trangthaiHD == sEnum.statusInv.DaXuat)\r\n      this.ttDaXuatHoaDon = true;\r\n  }\r\n  enableScreen() {\r\n    this.formInvoice.allowEditAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let status;\r\n    if (!this.frmData.id && !this.frmData.invoice_number) status = 'THEM_MOI';\r\n    if (this.frmData.id && !this.frmData.invoice_number) status = 'GHI_TAM';\r\n    if (this.frmData.id && this.frmData.invoice_number) status = 'GIU_SO';\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (status == 'THEM_MOI') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTam(this.frmData, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss'); //moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n            this.frmData.id = rs.data.id;\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamTT78(this.frmData, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss'); //moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else if (status == 'GHI_TAM') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          //Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          //Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else if (status == 'GIU_SO') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    let sub = this.vatService.xuatHoaDon({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n      invoice_files: this.frmData.invoice_files\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.disablleScreen(sEnum.statusInv.DaXuat);\r\n        this.fileData = this.frmData.invoice_files;\r\n        this.isExportInvoice = true;\r\n        this.frmData.status = rs.data.status;\r\n        this.frmData.warehouse_keeper_signed = rs.data.warehouse_keeper_signed;\r\n        this.getDataToCompare();\r\n        if (this.isRoleThuKhoXuatKy && !this.frmData.warehouse_keeper_signed)\r\n          this.isShowThuKhoXuatKy = true;\r\n        if (VStringService._getValueToString(this.frmData.carrier_mobile) != \"\") {\r\n          let data = [];\r\n          let inv = {\r\n            id: this.frmData.id,\r\n            carrier_email: this.frmData.carrier_email,\r\n            carrier_mobile: this.frmData.carrier_mobile\r\n          }\r\n          data.push(inv);\r\n          let subDelivery = this.vatService.sendReportDelivery(data).subscribe(result => {\r\n            if (result.status == 'success') {\r\n              Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n            } else {\r\n              Library.notify(result.message, 'error');\r\n            }\r\n          }, err => { }, () => {\r\n            subDelivery.unsubscribe();\r\n          });\r\n        }\r\n        else\r\n          Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.route.snapshot.queryParams['status'] == 'return') {\r\n      this.showTraLai = true;\r\n    }\r\n    if (this.route.snapshot.queryParams['status'] == 'sign') {\r\n      this.showKyDuyet = true;\r\n    }\r\n    let isViewTT32 = false;\r\n    if (this.route.snapshot.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    //kết nối websocket\r\n    this.connectWebsocket();\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // get cấu hình\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.configs = this.authService.getConfigs();\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      this.frmData.display_currency = JSON.stringify(this.configs.display_currency);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      // put data DM for select\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      let currentUser = this.authService.getCurrentUser();\r\n      let listpermissions = currentUser.user.permissions.split(',');\r\n      let _obj = listpermissions.filter(p => p == \"phe_duyet\");\r\n      if (_obj.length > 0) {\r\n        this.isAccessExportInv = true;\r\n      } else\r\n        this.isAccessExportInv = false;\r\n      let oThuKhoXuat = listpermissions.filter(p => p == sEnum.permissions.ThuKhoXuatKy);\r\n      if (oThuKhoXuat.length > 0)\r\n        this.isRoleThuKhoXuatKy = true;\r\n      else\r\n        this.isRoleThuKhoXuatKy = false;\r\n      let oKyLenhDieuDong = listpermissions.filter(p => p == sEnum.permissions.NguoiTaoKy || p == sEnum.permissions.PhuTrachDonViKy);\r\n      if (oKyLenhDieuDong.length > 0 && this.configs.system_parameter.digitally_sign_the_delivery)\r\n        this.isShowKyLenhDieuDong = true;\r\n      const loaiHoaDon = data.type;\r\n      if (loaiHoaDon == \"03XKNB\") {\r\n        this.isPhieuXuatKhoNB = true;\r\n        this.strTextHDKT = this._translate.CONTROLL.LABEL.delivery_order_number;\r\n        this.strtextHDKTNgay = this._translate.CONTROLL.LABEL.date;\r\n      }\r\n      else {\r\n        this.strTextHDKT = this._translate.CONTROLL.LABEL.deconomic_contract_number;\r\n        this.strtextHDKTNgay = \"Hợp đồng kinh tế ngày\";\r\n        this.isPhieuXuatKhoNB = false;\r\n      }\r\n\r\n      if (this.infoDangKy) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n          this.isTT78 = true;\r\n      }\r\n      if (this.isTT78 == true && isViewTT32)\r\n        this.isTT78 = false;\r\n      let isEdit = false;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      let invoice: any;\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        if (isEdit) {\r\n          temptTT78 = data.init[3];\r\n          this.wavehourses = data.init[4];\r\n          invoice = data.init[1];\r\n        }\r\n        else {\r\n          temptTT78 = data.init[1];\r\n          this.wavehourses = data.init[3];\r\n        }\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (invoice && Number.parseInt(invoice.invoice_number) > 0) {\r\n            if (invoice.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == invoice.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n        if (isEdit) {\r\n          this.wavehourses = data.init[4];\r\n          invoice = data.init[3];\r\n        }\r\n        else {\r\n          this.wavehourses = data.init[3];\r\n        }\r\n      }\r\n      if (isEdit || this.vatService.isCopy) {\r\n        if (this.vatService.isCopy) {\r\n          this.khoiTaoKhiSua(this.vatService.data);\r\n        } else {\r\n          this.khoiTaoKhiSua(invoice);\r\n        }\r\n\r\n      } else {\r\n        this.khoiTaoKhiThemMoi();\r\n      }\r\n    });\r\n    this.getDataToCompare();\r\n  }\r\n  getDataToCompare() {\r\n    this.handleFormData();\r\n    this.valueChange = JSON.stringify(this.frmData);\r\n    this.invoice_products.load().then((dataSource) => {\r\n      this.jsonProductFirst = JSON.stringify(dataSource);\r\n    });\r\n  }\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    /* So sánh thông tin trên form */\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    /* So sánh thông tin hàng hóa */\r\n    let invoicePBefore = JSON.parse(this.jsonProductFirst);\r\n    let invoicePAfter: any;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      invoicePAfter = JSON.parse(JSON.stringify(dataSource));\r\n    });\r\n    let invoice = _.isEqual(dataBefore, dataAfter);\r\n    let product = _.isEqual(invoicePBefore, invoicePAfter);\r\n    if (invoice && product)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.SvcName == \"efy_Sign\") {\r\n        // Helper.dowloadFile('test.xml', 'xml', data.Data.Content);\r\n        if (data.Data.Name == 'hoadon.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.xuLiApiKhiXuat();\r\n        } else {\r\n          this.frmData.invoice_files.forEach(item => {\r\n            if (item.file_name == data.Data.Name) {\r\n              item.file_content = data.Data.Content;\r\n            }\r\n          });\r\n          this.tempKiFile++;\r\n          if (this.tempKiFile == this.frmData.invoice_files.length) {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  khoiTaoKhiThemMoi() {\r\n    //khởi tạo mới lưới\r\n    this.invoice_products = new ArrayStore({\r\n      key: \"id\",\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    if (this.select.payment_method_names) {\r\n      this.select.payment_method_names.some(item => {\r\n        this.frmData.payment_method_name = item.code;\r\n        let _obj = this.select.payment_method_names.filter(p => p.code == item.code)[0];\r\n        if (_obj) {\r\n          this.frmData.payment_method_view_name = _obj.name;\r\n        }\r\n        else {\r\n          this.frmData.payment_method_name = \"TM/CK\";\r\n          this.frmData.payment_method_view_name = \"TMCK\";\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.frmData.payment_method_name = \"TM/CK\";\r\n      this.frmData.payment_method_view_name = \"TMCK\";\r\n    }\r\n\r\n\r\n    //tạo mới đối tượng file\r\n    this.fileData = [];\r\n\r\n    //set value default\r\n    if (!this.isTT78) {\r\n      if (this.select.invoice_releases.length) {\r\n        this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0);\r\n        this.frmData.invoice_release_id = this.select.invoice_releases[0].value;\r\n        this.frmData.template_id = this.select.invoice_releases[0].template_id;\r\n        this.is_multi_vat = this.select.invoice_releases[0].is_multi_vat;\r\n      }\r\n    }\r\n    else {\r\n      if (this.select.templatesTT78.length) {\r\n        this.frmData.template_id = this.select.templatesTT78[0].value;\r\n        this.frmData.invoice_series = this.select.templatesTT78[0].invoice_series;\r\n        this.frmData.template_code = this.select.templatesTT78[0].template_code;\r\n        for (const key in this.select.templatesTT78[0]) {\r\n          if (this.select.templatesTT78[0].hasOwnProperty(key)) {\r\n            this._oTemplateTT78[key] = this.select.templatesTT78[0][key];\r\n          }\r\n        }\r\n        this.is_multi_vat = this.select.templatesTT78[0].is_multi_vat;\r\n        this.invoiceTemplateTT78 = this.select.templatesTT78[0];\r\n      }\r\n    }\r\n\r\n    this.frmData.currency_code = 'VND';\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    //khởi tạo lưới từ dữ liệu sửa\r\n    let _lst = this.frmData.setInvoice_products_data(data.invoice_products);\r\n    if (_lst) {\r\n      _lst.forEach(item => {\r\n        if (item.product_name && item.unit_name) {\r\n          const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n          if (!obj1) {\r\n            if (VStringService._getValueToString(item.unit_code) == \"\")\r\n              item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n            let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n            if (oDuplicate)\r\n              item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n          }\r\n          else\r\n            if (!item.unit_code || (item.unit_code && item.unit_code != obj1.code))\r\n              item.unit_code = obj1.code;\r\n        }\r\n      });\r\n    }\r\n    this.invoice_products = new ArrayStore({\r\n      key: \"id\",\r\n      data: _lst\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    //mẫu nhiều loại thuế suất ko\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.some(item => {\r\n        if (item.value == data.invoice_release_id) {\r\n          this.is_multi_vat = item.is_multi_vat;\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.invoiceTemplateTT78 = item;\r\n          this.is_multi_vat = item.is_multi_vat;\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n    //khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n\r\n    // this.is_multi_vat = data.is_multi_vat;\r\n\r\n    //lấy file\r\n    this.fileData = [];\r\n    if (this.frmData.from_warehouse) {\r\n      const _obj = this.wavehourses.filter(p => p.id === this.frmData.from_warehouse)[0];\r\n      if (!_obj) {\r\n        const _objPush = {\r\n          id: this.frmData.from_warehouse,\r\n          name: this.frmData.from_warehouse_name,\r\n        };\r\n        this.wavehourses.push(_objPush);\r\n      }\r\n    }\r\n    if (this.frmData.to_warehouse) {\r\n      const _obj = this.wavehourses.filter(p => p.id === this.frmData.to_warehouse)[0];\r\n      if (!_obj) {\r\n        const _objPush = {\r\n          id: this.frmData.to_warehouse,\r\n          name: this.frmData.to_warehouse_name,\r\n        };\r\n        this.wavehourses.push(_objPush);\r\n      }\r\n    }\r\n    if (data.maneuver_command_files && (data.maneuver_command_files.charge_unit_sign_status || data.maneuver_command_files.director_sign_status || data.maneuver_command_files.proponent_sign_status)) {\r\n      this.isShowHuyLenhDD = true;\r\n    }\r\n    if (this.frmData.status == sEnum.statusInv.DaXuat && !this.frmData.warehouse_keeper_signed && this.isRoleThuKhoXuatKy)\r\n      this.isShowThuKhoXuatKy = true;\r\n    //cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n\r\n  }\r\n\r\n  /** Tương tác giữa các component */\r\n  onTemplateChange(e) {\r\n    this.is_multi_vat = e;\r\n  }\r\n  onTemplateTT78TypeChange(e) {\r\n    this.invoiceTemplateTT78 = e;\r\n  }\r\n  /*  */\r\n  fillDataToForm(e) {\r\n    this.frmData.customer_name = e[0];\r\n    this.frmData.buyer_tax_code = e[1];\r\n    this.frmData.buyer_address = e[2];\r\n  }\r\n  getDataInChildForm(e) {\r\n    this.frmData = e;\r\n    this.frmTraLai.reason = e.lido;\r\n  }\r\n  onNumberChange() {\r\n    VChanggeMoneyService._changeMoney(this.frmData);\r\n  }\r\n  updateSomeTotalInput(e) {\r\n\r\n  }\r\n\r\n\r\n  fillAutoInput(e) {\r\n    //this.frmData.auto_value = e;\r\n  }\r\n\r\n  //Lấy data khi chọn file đính kèm bảng kê\r\n  getFileData(fileData) {\r\n    this.fileData = fileData;\r\n  }\r\n  /** Kết thúc */\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  getFormatterToNumber(formatter) {\r\n    let s1 = formatter.replace(\"0,###\", \"\");\r\n    if (s1 == \"\") {\r\n      return 0;\r\n    } else {\r\n      let s2 = s1.replace(\".\", \"\");\r\n      return s2.split(\"\").length;\r\n    }\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number == 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  inChuyenDoiText() {\r\n    if (this.frmData.time_print_conversion > 0) {\r\n      return this._translate.CONTROLL.BUTTON.view_conversion;\r\n    } else {\r\n      return this._translate.CONTROLL.BUTTON.print_conversion;\r\n    }\r\n  }\r\n\r\n  //sự kiện form\r\n  totalPaymentChange = (e) => {\r\n    this.onNumberChange();\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte)\r\n      currency_code = \"VND\";\r\n    let tien_chu = Helper.tienBangChu(Math.abs(e.value), VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n    this.frmData.total_payment_in_word = this.invoiceService.docTienAm(e.value, tien_chu, this.configs, currency_code);\r\n  }\r\n\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(true))\r\n        return;\r\n      let data = this.vatService.taodulieuXemTruocMau(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n  //#region \"Lệnh điều động\"\r\n  /* Ký lệnh điều động */\r\n  submitlenhdieudong() {\r\n    let checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    if (!this.isCheckLenhDieuDong)\r\n      this.resultCompareData = this.checkDataFormChange(this.valueChange, this.frmData);\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(false))\r\n        return;\r\n      if (this.isCheckLenhDieuDong) {\r\n        this.kylenhdieudong();\r\n        this.isCheckLenhDieuDong = false;\r\n      } else {\r\n        this.Reviewlenhdieudong();\r\n      }\r\n    }, 300);\r\n  }\r\n  /* Thực hiện ký lệnh điều động */\r\n  kylenhdieudong() {\r\n    let tempFrmData = this.copyFrmData();\r\n    if (this.frmData.id) {\r\n      let ids = [];\r\n      ids.push(this.frmData.id);\r\n      if (!this.resultCompareData) {\r\n        Library.showloading();\r\n        if (!this.isTT78) {\r\n          let sub = this.vatService.edit(this.frmData.id, tempFrmData).subscribe(rs => {\r\n            if (rs.status == 'success') {\r\n              this.frmData.id = rs.data.id;\r\n              this.getDataToCompare();\r\n              const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n                if (rs.status === 'success') {\r\n                  Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                  this.isShowHuyLenhDD = true;\r\n                  this.disablleScreen('');\r\n                } else {\r\n                  Library.notify(rs.message, 'error');\r\n                }\r\n              });\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => { }, () => {\r\n            Library.hideloading();\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n        else {\r\n          let sub = this.vatService.editTT78(this.frmData.id, tempFrmData).subscribe(rs => {\r\n            if (rs.status == 'success') {\r\n              this.frmData.id = rs.data.id;\r\n              this.getDataToCompare();\r\n              const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n                if (rs.status === 'success') {\r\n                  Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                  this.isShowHuyLenhDD = true;\r\n                  this.disablleScreen('');\r\n                } else {\r\n                  Library.notify(rs.message, 'error');\r\n                }\r\n              });\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => { }, () => {\r\n            Library.hideloading();\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n      else {\r\n        Library.showloading();\r\n        const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n            this.isShowHuyLenhDD = true;\r\n            this.disablleScreen('');\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTam(tempFrmData).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            let ids = [];\r\n            ids.push(this.frmData.id);\r\n            const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                this.isShowHuyLenhDD = true;\r\n                this.disablleScreen('');\r\n              } else {\r\n                Library.notify(rs.message, 'error');\r\n              }\r\n            });\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamTT78(tempFrmData).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            let ids = [];\r\n            ids.push(this.frmData.id);\r\n            const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                this.isShowHuyLenhDD = true;\r\n                this.disablleScreen('');\r\n              } else {\r\n                Library.notify(rs.message, 'error');\r\n              }\r\n            });\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Copy object\r\n   */\r\n\r\n  copyFrmData() {\r\n    let frmTemp = _.cloneDeep(this.frmData);\r\n    if (frmTemp.invoice_options && frmTemp.invoice_options.length > 0) {\r\n      frmTemp.invoice_options = frmTemp.invoice_options.map((item) => {\r\n        return {\r\n          invoice_id: item.invoice_id ? item.invoice_id : null,\r\n          code: item.code ? item.code : null,\r\n          name: item.name ? item.name : null,\r\n          value: item.value ? item.value : null,\r\n          data_type: item.data_type ? item.data_type : null,\r\n        };\r\n      })\r\n    }\r\n    return frmTemp;\r\n  }\r\n\r\n  /* Xem lại lệnh điều động trước khi xuất */\r\n  Reviewlenhdieudong() {\r\n    this.handleFormData();\r\n    let trang_thai = '';\r\n    if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n      trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n    } else {\r\n      trang_thai = this._translate.THONG_TIN.xuat_cho_ky;\r\n    }\r\n    let du_lieu: any;\r\n    if (!this.frmData.id || !this.isShowHuyLenhDD) {\r\n      du_lieu = this.vatService.taodulieuXemTruocLenhDD(this.frmData);\r\n    } else {\r\n      du_lieu = this.vatService.taodulieuXemLenhDD([this.frmData.id]);\r\n    }\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.kyPhieuXuaKho;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn: this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.isCheckLenhDieuDong = true;\r\n        this.submitlenhdieudong();\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n\r\n\r\n\r\n\r\n    // this.handleFormData();\r\n    // this.windowPreviewBeforeSubmit = window.open(\"\", \"\", `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n    // this.windowPreviewBeforeSubmit.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    // this.windowPreviewBeforeSubmit.blur();\r\n    // let timer = setInterval(() => {\r\n    //   if (this.windowPreviewBeforeSubmit.closed) {\r\n    //     clearInterval(timer);\r\n    //     let isCheck = Helper.getCookie('CK_LDD');\r\n    //     this.windowPreviewBeforeSubmit = undefined;\r\n    //     if (isCheck == \"CHECKED\") {\r\n    //       document.cookie = \"CK_LDD=; path=/\";\r\n    //       this.isCheckLenhDieuDong = true;\r\n    //       this.submitlenhdieudong();\r\n    //     }\r\n    //   }\r\n    // }, 500);\r\n    // Library.showloading();\r\n    // if (!this.frmData.id || !this.isShowHuyLenhDD) {\r\n    //   let sub = this.vatService.xemtruoclenhdieudong(this.frmData).subscribe(rs => {\r\n    //     if (rs.status == 'success') {\r\n    //       let pdf_file = rs.data.file_content;\r\n    //       let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n    //       this.windowPreviewBeforeSubmit.document.write(`\r\n    //       <!DOCTYPE html>\r\n    //       <html lang=\"en\">\r\n    //       <head>\r\n    //         <meta charset=\"UTF-8\">\r\n    //         <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    //         <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    //         <title>Document</title>\r\n    //         <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\" />\r\n    //         <style type=\"text/css\" scoped>\r\n    //         .nhap-nhay {\r\n    //           background: red;\r\n    //           padding: 0.5px 9px;\r\n    //           margin-right: 5px;\r\n    //           border-radius: 57%;\r\n    //           -webkit-animation: flicker 1s infinite;\r\n    //         }\r\n    //         .ht-xuat{\r\n    //           width: 20%;\r\n    //           height: 100%;\r\n    //           background: #ffffff;\r\n    //           box-shadow: 0px 0px 8px 0px #888888;\r\n\r\n    //         }\r\n    //         .ht-xuat > .right-nav{\r\n    //           display:flex;\r\n    //           justify-content: space-between;\r\n    //           align-items: center;\r\n    //           border-bottom: 1px solid #d5d5d5;\r\n    //           padding:20px;\r\n    //         }\r\n    //         @-webkit-keyframes flicker\r\n    //         {\r\n    //         0% {opacity:0;}\r\n    //         9% {opacity:0;}\r\n    //         10% {opacity:.5;}\r\n    //         13% {opacity:0;}\r\n    //         20% {opacity:.5;}\r\n    //         25% {opacity:1;}\r\n    //         }\r\n\r\n    //         .example {\r\n    //           padding: 20px;\r\n    //         }\r\n\r\n    //         input[type=button] {\r\n    //           padding: 5px 10px;\r\n    //           margin: 10px 5px;\r\n    //           border-radius: 5px;\r\n    //           cursor: pointer;\r\n    //           background: #ddd;\r\n    //           border: 1px solid #ccc;\r\n    //         }\r\n    //         input[type=button]:hover {\r\n    //           background: #ccc;\r\n    //         }\r\n\r\n    //         .confirm {\r\n    //           display: none;\r\n    //         }\r\n    //         .confirm > div:first-of-type {\r\n    //           position: fixed;\r\n    //           width: 100%;\r\n    //           height: 100%;\r\n    //           background: rgba(0, 0, 0, 0.5);\r\n    //           top: 0px;\r\n    //           left: 0px;\r\n    //         }\r\n    //         .confirm > div:last-of-type {\r\n    //           padding: 10px 20px;\r\n    //           background: white;\r\n    //           position: absolute;\r\n    //           width: auto;\r\n    //           height: auto;\r\n    //           left: 50%;\r\n    //           top: 50%;\r\n    //           transform: translate(-50%, -50%);\r\n    //           border-radius: 5px;\r\n    //           border: 1px solid #333;\r\n    //         }\r\n    //         .confirm > div:last-of-type div:first-of-type {\r\n    //           min-width: 150px;\r\n    //           padding: 10px;\r\n    //         }\r\n    //         .confirm > div:last-of-type div:last-of-type {\r\n    //           text-align: right;\r\n    //         }\r\n    //       </style>\r\n    //       </head>\r\n    //       <body>\r\n    //       <div style=\"margin-left: 50px;\">\r\n    //       <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n    //       <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n    //       </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n    //     </div>\r\n\r\n    //     <div style=\"display: flex; height:84vh; justify-content: center;\">\r\n    //       <iframe style=\"\" width=\"70%\" height=\"100%\" src=\"${objectUrl}\"></iframe>\r\n    //       <div class=\"ht-xuat\">\r\n    //         <div class=\"right-nav\">\r\n    //          <button style =\" background:#007BFF;color:#ffffff; padding: 10px 50px; border: none ; outline:none; border-radius: 30px\"> <a href=\"javascript:void(0)\" style=\"text-decoration: none; color:#ffffff; font-weight: bold; padding-right:10px\" onclick=\"setConfirmInvoice()\">Đồng ý </a> <i class=\"fa fa-angle-right\"></i></button>\r\n    //           <a href=\"javascript:void(0)\" style=\"text-decoration: none; color: gray\" onclick=\"closeWin()\"><i class=\"fa fa-times\" style=\"font-size:25px\"></i></a>\r\n    //         </div>\r\n    //         <div style=\"display: flex; flex-direction: column; padding:10px;\">\r\n    //           <div style=\"display: flex; justify-content: space-between; align-items: center;padding: 10px; border-bottom: 1px solid #d5d5d5\">\r\n    //             <p style=\"font-weight: 600;\">Trạng thái : </p>\r\n    //             <p style=\"color: orange;font-weight: 600;\">Xuất và ký</p>\r\n    //           </div>\r\n    //         </div>\r\n    //       </div>\r\n    //     </div>\r\n    //     <div class=\"confirm\">\r\n    //         <div></div>\r\n    //         <div>\r\n    //           <div id=\"confirmMessage\">Confirm text</div>\r\n    //           <div>\r\n    //             <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n    //             <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n    //           </div>\r\n    //         </div>\r\n    //     </div>\r\n\r\n    //     <script type=\"text/javascript\">\r\n    //     const ui = {\r\n    //       confirm: async (message) => createConfirm(message)\r\n    //     }\r\n\r\n    //     const createConfirm = (message) => {\r\n    //       return new Promise((complete, failed)=>{\r\n    //         $('#confirmMessage').text(message)\r\n\r\n    //         $('#confirmYes').off('click');\r\n    //         $('#confirmNo').off('click');\r\n\r\n    //         $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n    //         $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n\r\n    //         $('.confirm').show();\r\n    //       });\r\n    //     }\r\n\r\n    //     const setConfirmInvoice = async () => {\r\n    //       const confirm = await ui.confirm(\" ${this._translate.CONFIRM.confirm_sign_delivery} \");\r\n    //       if(confirm){\r\n    //         document.cookie = \"CK_LDD=CHECKED; path=/\";\r\n    //         window.close();\r\n    //       } else{\r\n    //       }\r\n    //     } \r\n\r\n    //       function closeWin(){\r\n    //         window.close();\r\n    //       }\r\n    //     </script>\r\n    //     <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n    //       </body>\r\n    //       </html>\r\n    //     `);\r\n    //       this.windowPreviewBeforeSubmit.focus();\r\n    //     } else {\r\n    //       this.windowPreviewBeforeSubmit.close();\r\n    //       Library.notify(rs.message, 'error');\r\n    //     }\r\n    //   }, err => { }, () => {\r\n    //     Library.hideloading();\r\n    //     sub.unsubscribe();\r\n    //   });\r\n    // }\r\n    // else {\r\n    //   let ids = [];\r\n    //   ids.push(this.frmData.id)\r\n    //   let sub = this.vatService.xemlenhdieudong(ids).subscribe(rs => {\r\n    //     if (rs.status == 'success') {\r\n    //       let pdf_file = rs.data.file_content;\r\n    //       let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n    //       this.windowPreviewBeforeSubmit.document.write(`\r\n    //       <!DOCTYPE html>\r\n    //       <html lang=\"en\">\r\n    //       <head>\r\n    //         <meta charset=\"UTF-8\">\r\n    //         <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    //         <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    //         <title>Document</title>\r\n    //         <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\" />\r\n    //         <style type=\"text/css\" scoped>\r\n    //         .nhap-nhay {\r\n    //           background: red;\r\n    //           padding: 0.5px 9px;\r\n    //           margin-right: 5px;\r\n    //           border-radius: 57%;\r\n    //           -webkit-animation: flicker 1s infinite;\r\n    //         }\r\n    //         .ht-xuat{\r\n    //           width: 20%;\r\n    //           height: 100%;\r\n    //           background: #ffffff;\r\n    //           box-shadow: 0px 0px 8px 0px #888888;\r\n\r\n    //         }\r\n    //         .ht-xuat > .right-nav{\r\n    //           display:flex;\r\n    //           justify-content: space-between;\r\n    //           align-items: center;\r\n    //           border-bottom: 1px solid #d5d5d5;\r\n    //           padding:20px;\r\n    //         }\r\n    //         @-webkit-keyframes flicker\r\n    //         {\r\n    //         0% {opacity:0;}\r\n    //         9% {opacity:0;}\r\n    //         10% {opacity:.5;}\r\n    //         13% {opacity:0;}\r\n    //         20% {opacity:.5;}\r\n    //         25% {opacity:1;}\r\n    //         }\r\n\r\n    //         .example {\r\n    //           padding: 20px;\r\n    //         }\r\n\r\n    //         input[type=button] {\r\n    //           padding: 5px 10px;\r\n    //           margin: 10px 5px;\r\n    //           border-radius: 5px;\r\n    //           cursor: pointer;\r\n    //           background: #ddd;\r\n    //           border: 1px solid #ccc;\r\n    //         }\r\n    //         input[type=button]:hover {\r\n    //           background: #ccc;\r\n    //         }\r\n\r\n    //         .confirm {\r\n    //           display: none;\r\n    //         }\r\n    //         .confirm > div:first-of-type {\r\n    //           position: fixed;\r\n    //           width: 100%;\r\n    //           height: 100%;\r\n    //           background: rgba(0, 0, 0, 0.5);\r\n    //           top: 0px;\r\n    //           left: 0px;\r\n    //         }\r\n    //         .confirm > div:last-of-type {\r\n    //           padding: 10px 20px;\r\n    //           background: white;\r\n    //           position: absolute;\r\n    //           width: auto;\r\n    //           height: auto;\r\n    //           left: 50%;\r\n    //           top: 50%;\r\n    //           transform: translate(-50%, -50%);\r\n    //           border-radius: 5px;\r\n    //           border: 1px solid #333;\r\n    //         }\r\n    //         .confirm > div:last-of-type div:first-of-type {\r\n    //           min-width: 150px;\r\n    //           padding: 10px;\r\n    //         }\r\n    //         .confirm > div:last-of-type div:last-of-type {\r\n    //           text-align: right;\r\n    //         }\r\n    //       </style>\r\n    //       </head>\r\n    //       <body>\r\n    //       <div style=\"margin-left: 50px;\">\r\n    //       <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n    //       <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n    //       </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n    //     </div>\r\n\r\n    //     <div style=\"display: flex; height:84vh; justify-content: center;\">\r\n    //       <iframe style=\"\" width=\"70%\" height=\"100%\" src=\"${objectUrl}\"></iframe>\r\n    //       <div class=\"ht-xuat\">\r\n    //         <div class=\"right-nav\">\r\n    //          <button style =\" background:#007BFF;color:#ffffff; padding: 10px 50px; border: none ; outline:none; border-radius: 30px\"> <a href=\"javascript:void(0)\" style=\"text-decoration: none; color:#ffffff; font-weight: bold; padding-right:10px\" onclick=\"setConfirmInvoice()\">Đồng ý </a> <i class=\"fa fa-angle-right\"></i></button>\r\n    //           <a href=\"javascript:void(0)\" style=\"text-decoration: none; color: gray\" onclick=\"closeWin()\"><i class=\"fa fa-times\" style=\"font-size:25px\"></i></a>\r\n    //         </div>\r\n    //         <div style=\"display: flex; flex-direction: column; padding:10px;\">\r\n    //           <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n    //             <p style=\" font-weight: 600;\">Ngày hóa đơn : </p>\r\n    //             <p style=\"color: orange;font-weight: 600;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n    //           </div>\r\n    //           <div style=\"display: flex; justify-content: space-between; align-items: center;padding: 10px; border-bottom: 1px solid #d5d5d5\">\r\n    //             <p style=\"font-weight: 600;\">Trạng thái : </p>\r\n    //             <p style=\"color: orange;font-weight: 600;\">Xuất và ký</p>\r\n    //           </div>\r\n    //           <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n    //             <p style=\"font-weight: 600;\">Tổng tiền : </p>\r\n    //             <p style=\"color: orange;font-weight: 600;\">${rs.data.invoice.total_payment}</p>\r\n    //           </div>\r\n    //         </div>\r\n    //       </div>\r\n    //     </div>\r\n    //     <div class=\"confirm\">\r\n    //         <div></div>\r\n    //         <div>\r\n    //           <div id=\"confirmMessage\">Confirm text</div>\r\n    //           <div>\r\n    //             <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n    //             <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n    //           </div>\r\n    //         </div>\r\n    //     </div>\r\n\r\n    //     <script type=\"text/javascript\">\r\n    //     const ui = {\r\n    //       confirm: async (message) => createConfirm(message)\r\n    //     }\r\n\r\n    //     const createConfirm = (message) => {\r\n    //       return new Promise((complete, failed)=>{\r\n    //         $('#confirmMessage').text(message)\r\n\r\n    //         $('#confirmYes').off('click');\r\n    //         $('#confirmNo').off('click');\r\n\r\n    //         $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n    //         $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n\r\n    //         $('.confirm').show();\r\n    //       });\r\n    //     }\r\n\r\n    //     const setConfirmInvoice = async () => {\r\n    //       const confirm = await ui.confirm(\" ${this._translate.CONFIRM.confirm_sign_delivery} \");\r\n    //       if(confirm){\r\n    //         document.cookie = \"CK_LDD=CHECKED; path=/\";\r\n    //         window.close();\r\n    //       } else{\r\n    //       }\r\n    //     } \r\n\r\n    //       function closeWin(){\r\n    //         window.close();\r\n    //       }\r\n    //     </script>\r\n    //     <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n    //       </body>\r\n    //       </html>\r\n    //     `);\r\n    //       this.windowPreviewBeforeSubmit.focus();\r\n    //     } else {\r\n    //       this.windowPreviewBeforeSubmit.close();\r\n    //       Library.notify(rs.message, 'error');\r\n    //     }\r\n    //   }, err => { }, () => {\r\n    //     Library.hideloading();\r\n    //     sub.unsubscribe();\r\n    //   });\r\n    // }\r\n  }\r\n  /* In lệnh điều động */\r\n  inlenhdieudong() {\r\n    if (!this.frmData.id || !this.isShowHuyLenhDD) {\r\n      setTimeout(() => {\r\n        this.handleFormData();\r\n        if (!this._validForm(true))\r\n          return;\r\n        let w = 1920, h = 900;\r\n        w = window.screen.availWidth * 100 / 100;\r\n        h = window.screen.availHeight * 93 / 100;\r\n        let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n        win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n        win.blur();\r\n        Library.showloading();\r\n        let sub = this.vatService.xemtruoclenhdieudong(this.frmData).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            let pdf_file = rs.data.file_content;\r\n            let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n            win.resizeTo(screen.availWidth, screen.availHeight);\r\n            win.focus();\r\n            win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n          } else {\r\n            win.close();\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }, 300);\r\n    }\r\n    else {\r\n      let ids = [];\r\n      ids.push(this.frmData.id);\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      Library.showloading();\r\n      let sub = this.vatService.xemlenhdieudong(ids).subscribe(rs => {\r\n        if (rs.status == \"success\") {\r\n          let pdf_file = rs.data[0].file_content;\r\n          let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n          win.resizeTo(screen.availWidth, screen.availHeight);\r\n          win.focus();\r\n          win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n        } else {\r\n          win.close();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  /* Hủy lệnh điều động */\r\n  huylenhdieudong() {\r\n    const setInvoiceDate = Library.confirm(this._translate.NOTIFY.warning_the_dispatch_success, this._translate.NOTIFY.notify);\r\n    setInvoiceDate.then((dialog) => {\r\n      if (!dialog) {\r\n      }\r\n      else {\r\n        Library.showloading();\r\n        let ids = [];\r\n        ids.push(this.frmData.id);\r\n        let sub = this.vatService.huylenhdieudong(ids).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            Library.notify(this._translate.NOTIFY.cancel_the_dispatch_success, 'success');\r\n            this.isShowHuyLenhDD = false;\r\n            this.enableScreen();\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    let data = this.vatService.taodulieuXemMau(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    const data = this.vatService.taodulieuInChuyenDoi(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  ghiTam(data) {\r\n    if (this.frmData.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.edit(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            this.getDataToCompare();\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editTT78(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            this.getDataToCompare();\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTam(data).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            this.getDataToCompare();\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamTT78(data).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            this.getDataToCompare();\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuatChoKy(data) {\r\n    // if (this.frmData.invoice_number) {\r\n    Library.showloading();\r\n    if (!this.isTT78) {\r\n      let sub = this.vatService.xuatChoKy(data).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.getDataToCompare();\r\n          Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      let sub = this.vatService.xuatChoKyTT78(data).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.getDataToCompare();\r\n          Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatHoaDon(data) {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      if (this.frmData.invoice_files.length) {\r\n        this.frmData.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.frmData.invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n      }\r\n    }\r\n  }\r\n\r\n  traLai() {\r\n    if (this.frmTraLai.reason == undefined || this.frmTraLai.reason == \"\") {\r\n      Library.notify(this._translate.CONTROLL.LABEL.reason_return + \" \" + this._translate.VALIDATION.required, 'error');\r\n    } else {\r\n      Library.showloading();\r\n      let sub = this.vatService.traLaiHoaDon({\r\n        id: this.frmData.id,\r\n        reason: this.frmTraLai.reason\r\n      }).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.router.navigate(['/system/invoice-sync']);\r\n          Library.notify(this._translate.NOTIFY.return_success, 'success');\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  _validForm(isOnlyCheckAm) {\r\n    let _isValid = true;\r\n    // if (this.frmData.amount_vat5 < 0 || this.frmData.amount_vat10 < 0 || this.frmData.total_payment < 0) {\r\n    //   Library.notify(this._translate.NOTIFY.discount_same_vat, 'error');\r\n    //   return false;\r\n    // }\r\n    if (isOnlyCheckAm) {\r\n      return true;\r\n    }\r\n    if (this.frmData.currency_code && this.frmData.currency_code != \"VND\" && this.frmData.currency_rate === null) {\r\n      this.formInvoice.form.instance.getEditor('currency_rate').focus();\r\n      Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    // if (!this.frmData.total_payment && this.frmData.total_payment !== 0) {\r\n    //   Library.notify(\"Tổng tiền hóa đơn không được để trống\", 'error');\r\n    //   return false;\r\n    // }\r\n    // if (this.frmData.customer_object_code == \"DOANH_NGHIEP\") {\r\n    //   if (!this.frmData.customer_name) {\r\n    //     Library.notify(this._translate.CONTROLL.LABEL.customer_name + \" \" + this._translate.VALIDATION.required, 'error');\r\n    //     this.formInvoice.form.instance.getEditor(\"customer_name\").focus();\r\n    //     return false;\r\n    //   }\r\n    //   if (!this.frmData.buyer_address) {\r\n    //     Library.notify(this._translate.CONTROLL.LABEL.address + \" \" + this._translate.VALIDATION.required, 'error');\r\n    //     this.formInvoice.form.instance.getEditor(\"buyer_address\").focus();\r\n    //     return false;\r\n    //   }\r\n    // }\r\n    // if (this.frmData.customer_object_code == \"CA_NHAN\") {\r\n    //   if (!this.frmData.buyer_name) {\r\n    //     this.formInvoice.form.instance.getEditor(\"buyer_name\").focus();\r\n    //     Library.notify(this._translate.CONTROLL.LABEL.buyer_name + \" \" + this._translate.VALIDATION.required, 'error');\r\n    //     return false;\r\n    //   }\r\n    //   if (!this.frmData.buyer_address) {\r\n    //     this.formInvoice.form.instance.getEditor(\"buyer_address\").focus();\r\n    //     Library.notify(this._translate.CONTROLL.LABEL.address + \" \" + this._translate.VALIDATION.required, 'error');\r\n    //     return false;\r\n    //   }\r\n    // }\r\n    // if (this.frmData.customer_object_code == \"KHACH_LE\") {\r\n    //   if (!this.frmData.buyer_name) {\r\n    //     this.formInvoice.form.instance.getEditor(\"buyer_name\").focus();\r\n    //     Library.notify(this._translate.CONTROLL.LABEL.buyer_name + \" \" + this._translate.VALIDATION.required, 'error');\r\n    //     return false;\r\n    //   }\r\n    // }\r\n    let _lst = this.frmData.invoice_products.filter(p => p.product_name);\r\n    if (_lst.length == 0) {\r\n      Library.notify(this._translate.NOTIFY.no_product, 'error');\r\n      this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n      return false;\r\n    }\r\n    else {\r\n      // const _lstValidThanhTien = this.frmData.invoice_products.filter(p => !p.amount && p.amount !== 0);\r\n      // if (_lstValidThanhTien.length == this.frmData.invoice_products.length) {\r\n      //   Library.notify(\"Thành tiền không được để trống\", 'error', 5000);\r\n      //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount'));\r\n      //   return false;\r\n      // }\r\n      // const _lstValidTongTien = this.frmData.invoice_products.filter(p => !p.amount_after_vat && p.amount_after_vat !== 0);\r\n      // if (_lstValidTongTien.length == this.frmData.invoice_products.length) {\r\n      //   Library.notify(\"Tổng tiền hàng hóa không được để trống\", 'error', 5000);\r\n      //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount_after_vat'));\r\n      //   return false;\r\n      // }\r\n    }\r\n    if (this.isTT78) {\r\n      if (this.frmData.list_date && VStringService._getValueToString(this.frmData.list_number) == \"\") {\r\n        this.formInvoice.form.instance.getEditor('list_number').focus();\r\n        Library.notify(\"Số bảng kê\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (!this.frmData.list_date && VStringService._getValueToString(this.frmData.list_number) != \"\") {\r\n        Library.notify(\"Ngày bảng kê\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (VStringService._getValueToString(this.frmData.delivery_order_number) == \"\") {\r\n        this.formInvoice.form.instance.getEditor('delivery_order_number').focus();\r\n        Library.notify(this._translate.CONTROLL.LABEL.transportation_method + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (VStringService._getValueToString(this.frmData.from_warehouse) == \"\") {\r\n        this.formInvoice.form.instance.getEditor('from_warehouse').focus();\r\n        Library.notify(this._translate.CONTROLL.LABEL.from_warehouse + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (VStringService._getValueToString(this.frmData.to_warehouse) == \"\") {\r\n        this.formInvoice.form.instance.getEditor('to_warehouse').focus();\r\n        Library.notify(this._translate.CONTROLL.LABEL.to_warehouse + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n\r\n      if (VStringService._getValueToString(this.frmData.transportation_method) == \"\") {\r\n        this.formInvoice.form.instance.getEditor('transportation_method').focus();\r\n        Library.notify(this.strTextHDKT + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (this.isPhieuXuatKhoNB) {\r\n        if (VStringService._getValueToString(this.frmData.shiping_point) == \"\") {\r\n          this.formInvoice.form.instance.getEditor('shiping_point').focus();\r\n          Library.notify(\"Địa chỉ kho xuất\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        if (VStringService._getValueToString(this.frmData.place_of_delivery) == \"\") {\r\n          this.formInvoice.form.instance.getEditor('place_of_delivery').focus();\r\n          Library.notify(\"Địa chỉ kho nhận\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (VStringService._getValueToString(this.frmData.delivery_order_date) == \"\") {\r\n          this.formInvoice.form.instance.getEditor('delivery_order_date').focus();\r\n          Library.notify(this.strtextHDKTNgay + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        if (VStringService._getValueToString(this.frmData.delivery_by) == \"\") {\r\n          this.formInvoice.form.instance.getEditor('delivery_by').focus();\r\n          Library.notify(this._translate.CONTROLL.LABEL.delivery_by + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return _isValid;\r\n  }\r\n  keyDown(e: any) {\r\n    if (e.event.key == \"Delete\") {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  eSubmit(type) {\r\n    let checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.total_payment = \"\";\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (type != \"GHI_TAM\") {\r\n        if (!this._validForm(false)) {\r\n          return;\r\n        }\r\n      }\r\n      if (this.frmData.invoice_options) {\r\n        this.frmData.invoice_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n        });\r\n      }\r\n      if (type == \"XUAT\") {\r\n        if (this.configs.integrate_parameter.integrate_econtract && this.configs.integrate_parameter.integrate_econtract.is_delivery) {\r\n          if (VStringService._getValueToString(this.frmData.carrier_mobile) == \"\" && !this.confirmCheckPreview && this.formInvoice.getHtXuatValue() != sEnum.hinhThucXuat.XuatChoKy) {\r\n            const confirm = Library.confirm(this._translate.CONFIRM.phone_email_carrier_is_empty, this._translate.NOTIFY.notify);\r\n            confirm.then((dialog) => {\r\n              if (!dialog) {\r\n                this.formInvoice.form.instance.getEditor('carrier_mobile').focus();\r\n              }\r\n              else {\r\n                this.processXuatHoaDon(type)\r\n              }\r\n            });\r\n          }\r\n          else\r\n            this.processXuatHoaDon(type);\r\n        }\r\n        else\r\n          this.processXuatHoaDon(type);\r\n      } else {\r\n        this.ghiTam(this.frmData);\r\n      }\r\n    }, 300);\r\n  }\r\n  /* Xử lý xuất hóa đơn */\r\n  processXuatHoaDon(type) {\r\n    let _lstInv = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      _lstInv = dataSource.filter(p => p.product_name);\r\n    });\r\n    if (!this.vatService.checkVatMauHoaDon(_lstInv, this.is_multi_vat))\r\n      return false;\r\n\r\n    if (this.confirmCheckPreview) {\r\n      if (this.formInvoice.getHtXuatValue() != sEnum.hinhThucXuat.XuatChoKy) {\r\n        this.xuatHoaDon(this.frmData);\r\n      } else {\r\n        Helper.confirmXuatChoKy(() => { this.xuatChoKy(this.frmData); });\r\n      }\r\n      this.confirmCheckPreview = false;\r\n    } else {\r\n      this.previewBeforeExport(type);\r\n    }\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = '';\r\n    if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n      trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n    } else {\r\n      trang_thai = this._translate.THONG_TIN.xuat_cho_ky;\r\n    }\r\n    let du_lieu = this.vatService.taodulieuXemTruocMau(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn: this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  handleAddNew() {\r\n    if (this.isExportInvoice) {\r\n      this.addNew();\r\n    } else {\r\n      if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n        this.confirmService.confirm()\r\n          .subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM', this.frmData).then(res => {\r\n                    if (res) {\r\n                      this.addNew();\r\n                    } else {\r\n                      return;\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  this.addNew();\r\n                  break;\r\n                case 'cancel':\r\n                  this.addNew();\r\n                  break;\r\n                default:\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n      } else {\r\n        this.addNew();\r\n      }\r\n    }\r\n  }\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    this.configsService.getAll().subscribe((res) => {\r\n      if (res.data && res.data.configs) {\r\n        this.authService.setConfigs(res.data.configs);\r\n        this.configs = this.authService.getConfigs();\r\n      }\r\n    });\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM', this.frmData).then(value1 => {\r\n                    observer.next(value1);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete()\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  async subData(type, data) {\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    await this.handleFormDataSub();\r\n    if (this.frmData.invoice_options) {\r\n      this.frmData.invoice_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (data.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.edit(data.id, data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.editTT78(data.id, data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.ghiTam(data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.ghiTamTT78(data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  handleFormDataSub() {\r\n    const wait = (delay, ...args) => new Promise(resolve => setTimeout(resolve, delay, ...args));\r\n    return wait(200).then(() => {\r\n      this.tempKiFile = 0;\r\n      const invoice_products = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          delete item.error;\r\n          if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n            item.row_content = item.product_name;\r\n            invoice_products.push(item);\r\n            if (item.is_transport_number) {\r\n              this.frmData.transport_number = item.product_name;\r\n            }\r\n          }\r\n        });\r\n        this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n        this.frmData.invoice_products = invoice_products;\r\n        this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n      });\r\n      return true;\r\n    });\r\n  }\r\n\r\n  addNew() {\r\n    let inv = Object.assign({}, this.frmData);\r\n\r\n    this.frmData = new InvoiceModel(1);\r\n    this.frmData.invoice_date = null;\r\n    this.frmData.template_id = inv.template_id;\r\n    this.frmData.invoice_release_id = inv.invoice_release_id;\r\n    this.frmData.payment_method_name = inv.payment_method_name;\r\n    this.frmData.payment_method_view_name = inv.payment_method_view_name;\r\n    this.frmData.currency_code = inv.currency_code;\r\n    this.frmData.template_code = inv.template_code;\r\n    this.frmData.invoice_options = inv.invoice_options;\r\n    this.frmData.invoice_series = inv.invoice_series;\r\n    this.formInvoice.resetTMR();\r\n    this.invoice_products = new ArrayStore({\r\n      key: \"id\",\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n    this.productGrip.createUpdateEvent();\r\n    this.formInvoice.removeReadonlyAllForm();\r\n    this.formInvoice.emails = [];\r\n    this.ttDaXuatHoaDon = false;\r\n    this.getDataToCompare();\r\n  }\r\n\r\n  handleFormData() {\r\n    this.tempKiFile = 0;\r\n    let invoice_products = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        delete item.error;\r\n        if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n          item.row_content = item.product_name;\r\n          invoice_products.push(item);\r\n          if (item.is_transport_number) {\r\n            this.frmData.transport_number = item.product_name;\r\n          }\r\n        }\r\n      });\r\n    });\r\n    if (this.frmData.list_date) {\r\n      this.frmData.list_date = moment(this.frmData.list_date).format('YYYY-MM-DD');\r\n    }\r\n    this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n    this.frmData.invoice_products = invoice_products;\r\n    let decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n    this.frmData.decimal_places_json = decimal_places_json;\r\n  }\r\n  dong() {\r\n    if (this.isPhieuXuatKhoNB)\r\n      this.router.navigate(['/system/vat-invoice']);\r\n    else\r\n      this.router.navigate(['/system/sale-invoice']);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n  }\r\n  /* Thủ kho xuất ký PXK */\r\n  thukhoxuatky() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    Library.showloading();\r\n    const sub = this.vatService.thukhoxuatky(ids).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        Library.notify(this._translate.NOTIFY.sign_success, 'success');\r\n        this.isShowThuKhoXuatKy = false;\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n}\r\n","module.exports = \"<!-- Phần không tự tính giá trị, nhập mẫu bảng kê -->\\r\\n<div class=\\\"row support-invoice\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n      <div class=\\\"pull-left\\\">\\r\\n          <div style=\\\"float: left;width:  30%; padding-top: 4px\\\">{{ _translate.CONTROLL.BUTTON.add_row }}</div>\\r\\n          <div style=\\\"float: left; width: 30%\\\">\\r\\n            <dx-number-box #numberBox [max]=\\\"100\\\" [min]=\\\"1\\\" [showSpinButtons]=\\\"true\\\" [(value)]=\\\"rowData\\\"></dx-number-box>\\r\\n          </div>\\r\\n          <div>\\r\\n            <dx-button style=\\\"height: 27px\\\" icon=\\\"fa fa-plus-circle\\\" type=\\\"default\\\" text=\\\"\\\"\\r\\n                       (onClick)=\\\"addRow()\\\"></dx-button>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n            <dx-check-box class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\"\\r\\n            [(value)]=\\\"formDataInInvoice.auto_value\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n          <dx-menu\\r\\n                [dataSource]=\\\"extras\\\"\\r\\n                displayExpr=\\\"name\\\"\\r\\n                orientation=\\\"horizontal\\\"\\r\\n                submenuDirection=\\\"auto\\\"\\r\\n                (onItemClick)=\\\"itemExtrasClick($event)\\\"\\r\\n                cssClass='button-dropdown-extend'>\\r\\n              </dx-menu>\\r\\n              <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n                   style=\\\"display: none;\\\"/>\\r\\n        </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">Hãy lựa chọn hình thức nạp dữ liệu?</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"thayTheToanBo()\\\" text=\\\"Thay thế toàn bộ\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"themTiep()\\\" text=\\\"Thêm tiếp\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"Hủy\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<!-- phần table hiển thị -->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onKeyDown)=\\\"onGripKeyDown($event)\\\"\\r\\n      (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\"\\r\\n      (onEditorPreparing)=\\\"onEditorPreparing($event)\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"!ttDaXuatHoaDon\\\"></dxo-editing>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.delete }}\\\" width=\\\"40\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"view_order\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.view_order }}\\\" width=\\\"40\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n     \\r\\n      <dxi-column dataField=\\\"product_code\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.product_code }}\\\"\\r\\n          alignment=\\\"center\\\" [editorOptions]=\\\"{showClearButton: true}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\">\\r\\n        <dxo-lookup *ngIf=\\\"reloadSelectProduct\\\"\\r\\n            [dataSource]=\\\"select.productsView\\\"\\r\\n            displayExpr=\\\"mhvth\\\"\\r\\n            valueExpr=\\\"code\\\"> <!-- \\\"id\\\" contains the same values as \\\"authorId\\\" -->\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"product_name\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.product_name }}\\\"\\r\\n        alignment=\\\"left\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\"></dxi-column>\\r\\n       <!-- Đơn hàng/ Hợp đồng -->\\r\\n       <dxi-column *ngIf=\\\"(extentionGrid && extentionGrid.don_hang_hop_dong) || (configs && configs.system_parameter && configs.system_parameter.display_contract_order)\\\" dataField=\\\"contract_order\\\"\\r\\n                    minWidth=\\\"{{ _translate.GRID_WIDTH.don_hang_hop_dong }}\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.po_no_contract_no }}\\\"\\r\\n                    alignment=\\\"left\\\"></dxi-column>\\r\\n        <!-- <dxi-column dataField=\\\"number_code\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.code }}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column> -->\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n                  [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Khuyến mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.promotional_goods_on_the_invoice\\\" cellTemplate=\\\"khuyen_mai\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.promotion }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n                  [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.unit_code }}\\\" [width]=\\\"100\\\"\\r\\n        alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup  [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" onValueChanged=\\\"b($event)\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"isPXKDaiLy\\\" dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\" [width]=\\\"100\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n        <dxi-column *ngIf=\\\"!isPXKDaiLy\\\" dataField=\\\"number_real_export\\\" headerCellTemplate=\\\"quantity_exportHeader\\\" [width]=\\\"100\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"!isPXKDaiLy\\\" dataField=\\\"number_real_import\\\" headerCellTemplate=\\\"quantity_importHeader\\\" [width]=\\\"100\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.so_luong\\t }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <!-- <dxi-column *ngIf=\\\"configs.system_parameter.view_price_nte\\\" dataField=\\\"price_nte\\\" headerCellTemplate=\\\"price_nteHeader\\\"\\r\\n        [width]=\\\"110\\\" [editorOptions]=\\\"{ format: formatter.price_nte }\\\" [format]=\\\"formatter.price_nte\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column> -->\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" [width]=\\\"90\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia }\\\" [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" [width]=\\\"109\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      \\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\" [width]=\\\"150\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- config column header -->\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.quantity }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{_translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'quantity_exportHeader'\\\">\\r\\n          <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">{{_translate.GRID.INVOICE_DETAILS.quantity_export }}<img\\r\\n              src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n          </p>\\r\\n        </div>\\r\\n        <div *dxTemplate=\\\"let d of 'quantity_importHeader'\\\">\\r\\n            <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">{{_translate.GRID.INVOICE_DETAILS.quantity_import }}<img\\r\\n                src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n            </p>\\r\\n          </div>\\r\\n      <div *dxTemplate=\\\"let d of 'price_nteHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia_nte')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.price_nte }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{_translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_promotion_new\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'khuyen_mai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion_new\\\" [disabled]=\\\"d.data.is_promotion\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.amount_after_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\" (onValueChanged)=\\\"cktmChange()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'product_code'\\\">\\r\\n        <!-- <dx-autocomplete valueExpr=\\\"code\\\"\\r\\n          [dataSource]=\\\"select.products\\\" [(value)]=\\\"d.data.code\\\">\\r\\n          <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n            <span>{{item.mhvth}}</span>\\r\\n          </div>\\r\\n        </dx-autocomplete> -->\\r\\n        <dxi-item  editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.productsView, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n      </div>\\r\\n      <!-- <dxo-summary >\\r\\n        <dxi-total-item\\r\\n            summaryType=\\\"custom\\\" \\r\\n            [customizeText]=\\\"customizeText\\\"\\r\\n            showInColumn=\\\"amount\\\">\\r\\n        </dxi-total-item>\\r\\n      </dxo-summary> -->\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n      <!-- <dxo-summary [calculateCustomSummary]=\\\"calculateSummary\\\"> -->\\r\\n      <!-- <dxi-total-item\\r\\n            column=\\\"OrderNumber\\\"\\r\\n            summaryType=\\\"count\\\">\\r\\n        </dxi-total-item>\\r\\n        <dxi-total-item\\r\\n            column=\\\"OrderDate\\\"\\r\\n            summaryType=\\\"min\\\"\\r\\n            [customizeText]=\\\"customizeDate\\\">\\r\\n        </dxi-total-item> -->\\r\\n      <!-- <dxi-total-item cssClass=\\\"vat amount-table-footer\\\"\\r\\n            name=\\\"amount\\\"\\r\\n            column=\\\"amount\\\"\\r\\n            summaryType=\\\"sum\\\"\\r\\n            [valueFormat]=\\\"formatter.thanh_tien\\\">\\r\\n        </dxi-total-item> -->\\r\\n      <!-- <dxi-total-item *ngIf=\\\"isHdGTGT\\\"\\r\\n        name=\\\"amount_vat\\\"\\r\\n            column=\\\"amount_vat\\\"\\r\\n            summaryType=\\\"sum\\\"\\r\\n            [valueFormat]=\\\"formatter.amount_vat\\\">\\r\\n        </dxi-total-item> -->\\r\\n      <!-- <dxi-total-item\\r\\n        name=\\\"amount_after_vat\\\"\\r\\n            column=\\\"amount_after_vat\\\"\\r\\n            summaryType=\\\"custom\\\"\\r\\n            [valueFormat]=\\\"formatter.tong_tien\\\">\\r\\n        </dxi-total-item> -->\\r\\n      <!-- </dxo-summary> -->\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:20px;margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:8px}.support-invoice .support-link img{margin-right:15px;margin-top:-2px}.support-invoice .auto-input{margin-right:75px !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}.button-dropdown-extend{display:inline-flex}\\n\"","import { Component, OnInit, Input, ViewChild, ViewChildren, Output, EventEmitter, OnDestroy, AfterViewInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxDataGridComponent, DxFormComponent } from 'devextreme-angular';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport * as XLSX from 'xlsx';\r\ndeclare var $: any;\r\n\r\nimport { Library, Helper, sEnum, AuthService, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\nimport { ConfigDecimalComponent, AddComponent } from '@shared/index';\r\nimport { InvoiceModel } from '@modules/vat/shared';\r\nimport { ProductsService } from '@modules/products/shared';\r\n// import { Guid } from 'guid-typescript';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { environment } from '@environments/environment';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport ODataStore from 'devextreme/data/odata/store';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n//import { InvoiceComponent } from '@modules/vat/components/invoice/invoice.component';\r\n@Component({\r\n  selector: 'transport-product-grip',\r\n  templateUrl: './product-grip.component.html',\r\n  styleUrls: ['./product-grip.component.scss']\r\n})\r\nexport class ProductGripComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  //@ViewChildren(DxFormComponent) listDxForm: any;\r\n\r\n  routeSub: Subscription;\r\n\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() isPhieuXuatKhoNB: any;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() isTT78: boolean;\r\n  @Input() extentionGrid: any;\r\n  //@Input() not_auto: any; //Không tự tính giá trị\r\n  @Input() formDataInInvoice: any; //Không tự tính giá trị\r\n  select: any = {};\r\n  frmData: InvoiceModel = new InvoiceModel(1);\r\n  bsModalRef: BsModalRef;\r\n  showPopup: boolean = false; //Popup\r\n  dataExcelFile: any = null;\r\n  dataExcelFileInfo: any = null;\r\n  ttDaXuatHoaDon: boolean = false;\r\n  configs: any;\r\n  amount_after_vat: any = 0;\r\n  reloadSelectProduct: boolean = true;\r\n  selectBoxData: any;\r\n  ruleError = {\r\n    \"\": \"này\",\r\n    \"-1\": \"Không chịu thuế\",\r\n    \"0\": \"0%\",\r\n    \"5\": \"5%\",\r\n    \"10\": \"10%\"\r\n  };\r\n  _translate: any;\r\n  isPXKDaiLy = false;\r\n  loaiHoaDon: string;\r\n  extras = [];\r\n  rowData = 1;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private productsService: ProductsService,\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private invoiceService: InvoiceService,\r\n\r\n    //private invoiceComponent:InvoiceComponent,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n    // console.log(\"grip view init: \" + a);\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.formDataInInvoice.amount_vatx = null;\r\n    this.formDataInInvoice.amount_vat5 = null;\r\n    this.formDataInInvoice.amount_vat10 = null;\r\n    this.configs = this.authService.getConfigs();\r\n    this.loaiHoaDon = this.route.snapshot.data.type;\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n    // console.log(\"grip init: \" + a);\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      //put data DM for select\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      this.select.countrys = danh_muc.DM_QUOC_GIA ? danh_muc.DM_QUOC_GIA.data : null;\r\n      //Hàng hóa dịch vụ\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      if (this.isTT78) {\r\n        this.select.products = data.init[0];\r\n        if (isEdit)\r\n          invoice = data.init[1];\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: \"code\",\r\n            loadMode: \"raw\",\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              console.log(encodeURIComponent(key) + \" abc\");\r\n              //return[];\r\n              let _data = data.init[0].filter(p => p.code == key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: \"name\"\r\n        };\r\n      }\r\n      else {\r\n        this.select.products = data.init[1];\r\n        if (isEdit)\r\n          invoice = data.init[3];\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: \"code\",\r\n            loadMode: \"raw\",\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              console.log(encodeURIComponent(key) + \" abc\");\r\n              //return[];\r\n              let _data = data.init[1].filter(p => p.code == key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: \"name\"\r\n        };\r\n      }\r\n      this.select.products.forEach(item => {\r\n        item.mhvth = item.code + \": \" + item.name;\r\n      });\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (item.product_name && item.unit_name) {\r\n            const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n            if (!obj1) {\r\n              if (VStringService._getValueToString(item.unit_code) == \"\")\r\n                item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n              let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (oDuplicate)\r\n                item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n              this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n            }\r\n            else {\r\n              if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n                let oExistUnitCode = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n                if (!oExistUnitCode)\r\n                  this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n    });\r\n    //Event\r\n    this.createUpdateEvent();\r\n  }\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      let oDuplicate = this.select.unit_codes.filter(p => p.code === newItem.code)[0];\r\n      if (oDuplicate)\r\n        newItem.code = newItem.code + Helper.addtionalUnitCode();\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n  //khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        let column = Object.keys(value)[0];\r\n        if (value.product_code !== 'add') {\r\n          this.invoice_products.byKey(key).then((row) => {\r\n            // if (this.not_auto) {\r\n            //   switch (column) {\r\n            //     case 'product_code':\r\n            //       this.product_codeChange(row);\r\n            //       break;\r\n            //   }\r\n            //   this.updateSomeTotalInputNotCheckCktm();\r\n            // } else {\r\n            switch (column) {\r\n              case 'view_order':\r\n                this.view_orderChange();\r\n                break;\r\n              case 'product_code':\r\n                this.product_codeChange(row);\r\n                break;\r\n              case 'unit_code':\r\n                this.unit_codeChange(row);\r\n                break;\r\n              case 'quantity':\r\n              case 'price':\r\n              case 'price_nte':\r\n              case 'vat':\r\n              case 'amount':\r\n              case 'amount_vat':\r\n              case 'amount_after_vat':\r\n                this._tinhGiaTri();\r\n                break;\r\n              case 'number_real_import':\r\n                // this.product_numberImportChange(row);\r\n                this._tinhGiaTri();\r\n                break;\r\n              case 'number_real_export':\r\n                this.product_numberExportChange(row);\r\n                this._tinhGiaTri();\r\n                break;\r\n              default:\r\n                break;\r\n              // }\r\n            }\r\n          }, (error) => {\r\n            alert(error);\r\n          });\r\n        } else {\r\n          this.invoice_products.remove(key);\r\n          this.addRow();\r\n        }\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code == \"Delete\") {\r\n      console.log(e.event.srcElement);\r\n      e.event.srcElement.value = null;\r\n      // e.event.srcElement.parentNode.parentNode.querySelector('input').value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType == 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n      let eles = e.rowElement.getElementsByTagName('td');\r\n      if (!e.isEditing) {\r\n        eles[2].innerHTML = e.data.product_code;\r\n      }\r\n      if (e.data.error) {\r\n        let ele = eles[eles.length - 1];\r\n        ele.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n        ele.title = e.data.error;\r\n      }\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.dataField == \"product_name\" && e.parentType == \"dataRow\") {\r\n      e.editorName = \"dxTextArea\";\r\n    }\r\n    // if (e.parentType == 'dataRow') {\r\n    //   e.editorOptions.onFocusOut = function (args) {\r\n    //     if (e.dataField === 'unit_code') {\r\n    //       const _obj = this.select.unit_codes.filter(p => p.code === e.row.data.unit_code)[0];\r\n    //       if (_obj)\r\n    //         e.row.data.unit_name = _obj.name;\r\n    //       else\r\n    //         e.row.data.unit_name = '';\r\n    //     }\r\n    //     if (e.dataField === 'country_code') {\r\n    //       const _obj = this.select.countrys.filter(p => p.code === e.row.data.country_code)[0];\r\n    //       if (_obj)\r\n    //         e.row.data.country_name = _obj.name;\r\n    //       else\r\n    //         e.row.data.country_name = '';\r\n    //     }\r\n    //     this.invoice_products.update(e.row.data.id, e.row.data);\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField == \"quantity\" || e.dataField == \"price\" || e.dataField == \"amount\" || e.dataField == \"amount_vat\" || e.dataField == \"amount_after_vat\") && e.parentType == \"dataRow\") {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row.rowType === \"data\") {\r\n      e.items = [\r\n        {\r\n          text: \"Thêm hàng hóa\",\r\n          onItemClick: () => { this.addProduct(e.row.data); }\r\n        },\r\n        {\r\n          text: \"Thêm hàng\",\r\n          onItemClick: () => { this.addRow(); }\r\n        },\r\n        {\r\n          text: \"Xóa hàng\",\r\n          onItemClick: () => { this.deleteRow(e.row.data); }\r\n        },\r\n      ];\r\n    }\r\n  }\r\n\r\n  addProduct(row) {\r\n    Library.showloading();\r\n    this.productsService.getAllListbyListtypeByCode('DM_NHOM_HANG_HOA,DM_DON_VI_TINH,DM_TY_LE_VAT').subscribe((response) => {\r\n      const initialState = {\r\n        totalCount: 0,\r\n        groupProducts: response.data['DM_NHOM_HANG_HOA'],\r\n        unitCalculations: this.select.unit_codes,//response.data['DM_DON_VI_TINH'],\r\n        vats: response.data['DM_TY_LE_VAT'],\r\n        groupProductListTypeId: response.data['ids']['DM_NHOM_HANG_HOA'],\r\n        unitCalculationListTypeId: response.data['ids']['DM_DON_VI_TINH'],\r\n        vatListTypeId: response.data['ids']['DM_TY_LE_VAT'],\r\n        wavehourses: [],\r\n        formatter: this.formatter,\r\n        onSaveProduct: (data, unitCodes) => {\r\n          console.log(unitCodes);\r\n          this.select.unit_codes = unitCodes;\r\n          data.mhvth = data.code + \": \" + data.name;\r\n          this.select.products.push(data);\r\n          this.reloadSelectProduct = false;\r\n          setTimeout(() => { this.reloadSelectProduct = true }, 50);\r\n\r\n          row.product_code = data.code;\r\n          row.product_name = data.name;\r\n          row.unit_code = this.checkUnitCode(data.unit_code);\r\n          row.quantity = null;\r\n          row.price = data.price ? parseFloat(data.price) : data.price;\r\n          row.amount = data.price ? parseFloat(data.price) : 0;\r\n          row.vat = data.vat ? data.vat.toString() : null;\r\n          row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n          row.amount_after_vat = row.amount + row.amount_vat;\r\n          this.unit_codeChange(row);\r\n          this.invoice_products.update(row.id, row);\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n    })\r\n  }\r\n\r\n  addRow() {\r\n    let len, order, orderLast;\r\n    len = this.dataSource.items().length;\r\n    orderLast = this.dataSource.items()[len - 1].order;\r\n    for (let i = 0; i < this.rowData; i++) {\r\n\r\n      if (this.dataSource.items().length >= 1) {\r\n        order = ++orderLast;\r\n      } else {\r\n        order = 1;\r\n      }\r\n\r\n      const data = this.frmData.add_invoice_products_data(order, order);\r\n      this.invoice_products.insert(data);\r\n    }\r\n    this.dataSource.reload();\r\n  }\r\n  view_orderChange() {\r\n    let _index = 0;\r\n    this.dataSource.items().forEach(item => {\r\n      if (item.view_order) {\r\n        item.view_order = ++_index;\r\n      }\r\n    });\r\n  }\r\n  //Thay đổi cột mã hàng\r\n  product_codeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code == row.product_code) {\r\n        this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              row.product_name = product.name;\r\n              row.unit_code = this.checkUnitCode(product.unit_code);\r\n              row.quantity = null;\r\n              row.price = product.price ? parseFloat(product.price) : product.price;\r\n              row.amount = product.price ? parseFloat(product.price) : 0;\r\n              row.vat = null;\r\n              row.number_real_export = null;\r\n              row.number_real_import = null;\r\n              row.number_code = null;\r\n              row.amount_vat = null;\r\n              row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n              this.invoice_products.update(row.id, row);\r\n              this._tinhGiaTri();\r\n              return true;\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n  }\r\n  unit_codeChange(row) {\r\n    let _obj = this.select.unit_codes.filter(p => p.code == row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n    else {\r\n      row.unit_name = \"\";\r\n      this.invoice_products.update(row.id, row)\r\n    }\r\n  }\r\n  product_numberExportChange(row) {\r\n    this.invoice_products.update(row.id, row);\r\n  }\r\n  checkUnitCode(unitCode) {\r\n    let items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code == unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  _tinhGiaTri() {\r\n    //this.dataSource.store().reload();\r\n    setTimeout(() => {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.formDataInInvoice, this.formatter, !this.formDataInInvoice.auto_value, this.formDataInInvoice.auto_value_price, this.select, null, this.configs.system_parameter);\r\n      this.amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n    }, 100);\r\n    //this.invoice_products = this.dataSource.items();\r\n  }\r\n\r\n\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    let temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    let p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  //Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    let subModal = this.modalService.onHide.subscribe(() => {\r\n      let data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  //Xóa hàng\r\n  deleteRow(item) {\r\n    // setTimeout(() => {\r\n    let check = confirm('Bạn có đồng ý xóa không?');\r\n    if (check && !this.ttDaXuatHoaDon) {\r\n      setTimeout(() => {\r\n        this.invoice_products.remove(item.id);\r\n\r\n        // this.dataSource.store().remove(item.id);\r\n        this.dataSource.reload();\r\n        this._tinhGiaTri();\r\n\r\n      }, 100);\r\n    }\r\n    // }, 200);\r\n  }\r\n\r\n\r\n  updateSomeTotalInput() {\r\n    this._tinhGiaTri();\r\n    // let arr = [], amountk = 0, amountx = 0, amount0 = 0, amount5 = 0, amount10 = 0;\r\n    // this.dataSource.items().forEach(item => {\r\n    //   if (item.commercial_discount) {\r\n    //     if (item.vat == 5) amount5 -= item.amount_after_vat;\r\n    //     if (item.vat == 10) amount10 -= item.amount_after_vat;\r\n    //     if (item.vat == -1) amountx -= item.amount_after_vat;\r\n    //     if (item.vat == 0 && item.vat != \"\") amount0 -= item.amount_after_vat;\r\n    //     if (item.vat === \"\") amountk -= item.amount_after_vat;\r\n    //   } else {\r\n    //     if (item.vat == 5) amount5 += item.amount_after_vat;\r\n    //     if (item.vat == 10) amount10 += item.amount_after_vat;\r\n    //     if (item.vat == -1) amountx += item.amount_after_vat;\r\n    //     if (item.vat == 0 && item.vat != \"\") amount0 += item.amount_after_vat;\r\n    //     if (item.vat === \"\") amountk += item.amount_after_vat;\r\n    //   }\r\n    // });\r\n\r\n    // if (amountk < 0) {\r\n    //   arr.push('');\r\n    // }\r\n    // if (amountx < 0) {\r\n    //   arr.push('-1');\r\n    // }\r\n    // if (amount0 < 0) {\r\n    //   arr.push('0');\r\n    // }\r\n    // if (amount5 < 0) {\r\n    //   arr.push('5');\r\n    // }\r\n    // if (amount10 < 0) {\r\n    //   arr.push('10');\r\n    // }\r\n\r\n    // this.dataSource.items().forEach(item => {\r\n    //   item.vat = item.vat;\r\n    //   if (item.product_code || item.product_name || item.quantity || item.price || item.amount || item.amount_vat || item.amount_after_vat) {\r\n    //     if (item.vat != null) {\r\n    //       if (arr.includes(item.vat.toString())) {\r\n\r\n    //         item.error = `Tiền hàng sau khi trừ chiết khấu của cùng loại thuế suất ${this.ruleError[item.vat.toString()]} < 0.\\nVui lòng kiểm tra lại thông tin hóa đơn.`;\r\n    //       } else {\r\n    //         item.error = 0;\r\n    //       }\r\n    //     }\r\n    //     this.invoice_products.update(item.order, item);\r\n    //   }\r\n    // });\r\n    // setTimeout(() => {\r\n    //   this.gripChange.emit([this.dataSource, this.invoice_products, this.formatter]);\r\n    //   this.dataGrid.instance.refresh();\r\n    // }, 200);\r\n  }\r\n\r\n  //Lấy mẫu bảng kê\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    let invoiceType = \"03XKNB\";\r\n    if (this.loaiHoaDon != sEnum.loaihoadon.XKNB03)\r\n      invoiceType = sEnum.loaihoadon.HGDL04;\r\n    this.vatService.layFileMau({\r\n      customer_name: \"\",\r\n      buyer_tax_code: \"\",\r\n      buyer_address: \"\",\r\n      invoice_type_name: invoiceType\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  //Nạp dữ liệu bảng kê\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById(\"file-bang-ke\").click();\r\n  }\r\n\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) throw new Error('Không thể chọn nhiều file');\r\n    const reader: FileReader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      let data = <any>(XLSX.utils.sheet_to_json(ws, { header: \"A\", range: 5 }));\r\n      let account = <any>(XLSX.utils.sheet_to_json(ws, { header: \"A\", range: 0 }));\r\n      console.log(account.slice(0, 3));\r\n      let fileBangKe: any = document.getElementById(\"file-bang-ke\");\r\n      fileBangKe.value = \"\";\r\n      this.dataExcelFile = data;\r\n      this.dataExcelFileInfo = account.slice(0, 3);\r\n      this.showPopup = true;\r\n    };\r\n    reader.readAsBinaryString(target.files[0]);\r\n  }\r\n\r\n  thayTheToanBo() {\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.XKNB03)\r\n      this.fillDataFromFile(this.dataExcelFile, this.dataExcelFileInfo, 'thaythe');\r\n    else\r\n      this.fillDataFromFileDaiLy(this.dataExcelFile, this.dataExcelFileInfo, 'thaythe');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  themTiep() {\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.XKNB03)\r\n      this.fillDataFromFile(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    else\r\n      this.fillDataFromFileDaiLy(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  fillDataFromFileDaiLy(data, info, status) {\r\n    if (info.length === 4) {\r\n      const customer_name = info[0].A.split(':');\r\n      if (customer_name.length > 1) {\r\n        this.formDataInInvoice.customer_name = customer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_tax_code = info[1].A.split(':');\r\n      if (buyer_tax_code.length > 1) {\r\n        this.formDataInInvoice.buyer_tax_code = buyer_tax_code[1].trim();\r\n      }\r\n      ////\r\n      const buyer_name = info[2].A.split(':');\r\n      if (buyer_name.length > 1) {\r\n        this.formDataInInvoice.buyer_name = buyer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_address = info[3].A.split(':');\r\n      if (buyer_address.length > 1) {\r\n        this.formDataInInvoice.buyer_address = buyer_address[1].trim();\r\n      }\r\n    }\r\n    if (status === 'thaythe') {\r\n      this.dataSource.items().forEach(item => {\r\n        this.invoice_products.remove(item.id);\r\n      });\r\n    } else {\r\n      this.dataSource.items().forEach(item => {\r\n        if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount && !item.amount_vat && !item.amount_after_vat) {\r\n          this.invoice_products.remove(item.id);\r\n        }\r\n      });\r\n    }\r\n    let j = 10000;\r\n    data.forEach(item => {\r\n      item.B = item.B || '';\r\n      item.C = item.C || '';\r\n      item.D = item.D || '';\r\n      const temp: any = {};\r\n      if (this.formDataInInvoice.auto_value) {\r\n        temp.id = Helper.makeid();\r\n        if (item.A) {\r\n          temp.view_order = parseInt(item.A, 10);\r\n        } else {\r\n          temp.view_order = null;\r\n        }\r\n        temp.product_code = item.B;\r\n\r\n        temp.product_name = item.C;\r\n        temp.unit_code = this.getUnitCodeByUnitName(item.D);\r\n        if (item.E) {\r\n          temp.quantity = Helper.toNumber(item.E);\r\n        }\r\n        if (item.F) {\r\n          temp.price = Helper.toNumber(item.F);\r\n        }\r\n        if (item.G) {\r\n          temp.amount = Helper.toNumber(item.G);\r\n        }\r\n        if (item.G)\r\n          temp.amount_after_vat = temp.amount;\r\n        if (item.I)\r\n          temp.contract_order = item.I;\r\n      } else {\r\n        temp.id = Helper.makeid();\r\n        if (item.A) {\r\n          temp.view_order = parseInt(item.A, 10);\r\n        } else {\r\n          temp.view_order = null;\r\n        }\r\n        temp.product_code = item.B;\r\n        temp.product_name = item.C;\r\n        temp.unit_code = this.getUnitCodeByUnitName(item.D);\r\n        if (item.E) {\r\n          temp.quantity = Helper.toNumber(item.E);\r\n        }\r\n        if (item.F) {\r\n          temp.price = Helper.toNumber(item.F);\r\n        }\r\n        if (item.G) {\r\n          temp.amount = Helper.toNumber(item.G);\r\n        }\r\n        if (item.I)\r\n          temp.contract_order = item.I;\r\n      }\r\n      const _obj = this.select.products.filter(p => p.code === temp.product_code)[0];\r\n      if (!_obj && temp.product_code !== '') {\r\n        const _objPush = {\r\n          code: temp.product_code,\r\n          name: temp.product_name,\r\n          mhvth: temp.product_code + ': ' + temp.product_name,\r\n        };\r\n        this.select.products.push(_objPush);\r\n      }\r\n      temp.commercial_discount = false;\r\n      // arr.push(temp);\r\n      // this.dataSource.store().insert(temp);\r\n      this.invoice_products.insert(temp);\r\n      j++;\r\n    });\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataSource.reload();\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  fillDataFromFile(data, info, status) {\r\n    if (info.length == 3) {\r\n      let customer_name = info[0].A.split(':');\r\n      if (customer_name.length > 1)\r\n        this.formDataInInvoice.customer_name = customer_name[1].trim();\r\n      ///\r\n      ////\r\n      let buyer_tax_code = info[1].A.split(':');\r\n      if (buyer_tax_code.length > 1)\r\n        this.formDataInInvoice.buyer_tax_code = buyer_tax_code[1].trim();\r\n      ////\r\n      let buyer_address = info[2].A.split(':');\r\n      if (buyer_address.length > 1)\r\n        this.formDataInInvoice.buyer_address = buyer_address[1].trim();\r\n    }\r\n    if (status == 'thaythe') {\r\n      this.dataSource.items().forEach(item => {\r\n        // this.dataSource.store().remove(item.id);\r\n        this.invoice_products.remove(item.id);\r\n\r\n\r\n      });\r\n    } else {\r\n      this.dataSource.items().forEach(item => {\r\n        if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount && !item.amount_vat && !item.amount_after_vat) {\r\n          // this.dataSource.store().remove(item.id);\r\n          this.invoice_products.remove(item.id);\r\n\r\n        }\r\n      });\r\n    }\r\n    // console.log(data);\r\n    // let arr = [];\r\n    let j = 10000;\r\n    data.forEach(item => {\r\n      //item.A = item.A || \"0\";\r\n      item.B = item.B || \"\";\r\n      item.C = item.C || \"\";\r\n      item.D = item.D || \"\";\r\n      //item.I = item.I || \"0\";\r\n      let temp: any = {};\r\n      if (this.formDataInInvoice.auto_value) {\r\n        //temp.order = (status == 'thaythe') ? parseInt(item.A) : j;\r\n        temp.id = Helper.makeid();\r\n        if (item.A)\r\n          temp.view_order = parseInt(item.A);\r\n        else\r\n          temp.view_order = null;\r\n        temp.product_code = item.B;\r\n\r\n        temp.product_name = item.C;\r\n        temp.unit_code = this.getUnitCodeByUnitName(item.D);\r\n        if (item.E)\r\n          temp.number_real_export = Helper.toNumber(item.E);\r\n        if (item.F)\r\n          temp.number_real_import = Helper.toNumber(item.F);\r\n        if (item.G)\r\n          temp.price = Helper.toNumber(item.G);\r\n        if (item.H)\r\n          temp.amount = Helper.toNumber(item.H);\r\n        if (item.H)\r\n          temp.amount_after_vat = temp.amount;\r\n        if (item.I)\r\n          temp.contract_order = item.I;\r\n      } else {\r\n        temp.id = Helper.makeid();\r\n        //temp.order = (status == 'thaythe') ? parseInt(item.A) : j;\r\n        if (item.A)\r\n          temp.view_order = parseInt(item.A);\r\n        else\r\n          temp.view_order = null;\r\n        temp.product_code = item.B;\r\n        temp.product_name = item.C;\r\n        temp.unit_code = this.getUnitCodeByUnitName(item.D);\r\n        if (item.E)\r\n          temp.number_real_export = Helper.toNumber(item.E);\r\n        if (item.F)\r\n          temp.number_real_import = Helper.toNumber(item.F);\r\n        if (item.G)\r\n          temp.price = Helper.toNumber(item.G);\r\n        if (item.H)\r\n          temp.amount = Helper.toNumber(item.H);\r\n        if (item.I)\r\n          temp.contract_order = item.I;\r\n        //temp.amount = temp.price * temp.quantity;\r\n        // if (this.isPhieuXuatKhoNB){\r\n        //   temp.amount_vat = (temp.vat > 0) ? temp.vat * temp.amount / 100 : 0;\r\n\r\n        // }\r\n        // else\r\n        //   temp.amount_vat = null;\r\n        // temp.amount_after_vat = temp.amount_vat + temp.amount;\r\n      }\r\n      let _obj = this.select.products.filter(p => p.code == temp.product_code)[0];\r\n      if (!_obj && temp.product_code != \"\") {\r\n        let _objPush = {\r\n          code: temp.product_code,\r\n          name: temp.product_name,\r\n          mhvth: temp.product_code + \": \" + temp.product_name,\r\n        }\r\n        this.select.products.push(_objPush);\r\n      }\r\n      temp.commercial_discount = false;\r\n      // arr.push(temp);\r\n      // this.dataSource.store().insert(temp);\r\n      this.invoice_products.insert(temp);\r\n      j++;\r\n    });\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataSource.reload();\r\n    this._tinhGiaTri();\r\n  }\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (this.select.unit_codes && this.select.unit_codes.length > 0) {\r\n        const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n        if (_obj) {\r\n          return _obj.code;\r\n        } else {\r\n          let code = VStringService._convertToViKdau(unitName);\r\n          let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n          if (oDuplicate)\r\n            code = code + Helper.addtionalUnitCode();\r\n          this.select.unit_codes.push({ code: code, name: unitName });\r\n          return code;\r\n        }\r\n      } else {\r\n        this.select.unit_codes = [];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  cktmChange() {\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  // customizeText = (e) =>{\r\n  //   return this.formDataInInvoice.amount;\r\n  // }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n  taxCodeChoose(e) {\r\n    // let customer = e.itemData;\r\n    // if (this.frmData.customer_object_code != 'CA_NHAN' && this.frmData.customer_object_code != 'KHACH_LE') this.frmData.customer_name = customer.name;\r\n    // this.frmData.buyer_name = customer.contact_person_name;\r\n    // if (this.frmData.customer_object_code != 'KHACH_LE') this.frmData.buyer_address = customer.business_address;\r\n    // this.frmData.customer_code = customer.code;\r\n    // this.frmData.buyer_mobile = customer.contact_mobile;\r\n    // this.frmData.buyer_email = customer.email;\r\n    // this.frmData.customer_id = customer.id;\r\n    // if (customer.bank_account_number) this.frmData.bank_account_number = customer.bank_account_number;\r\n    // if (customer.bank_name) this.frmData.bank_name = customer.bank_name;\r\n\r\n\r\n  }\r\n\r\n  calculateSummary(options) {\r\n    let amount_after_vat;\r\n    // Calculating \"CustomSummary1\"\r\n    if (options.name == 'amount_after_vat' && options.summaryProcess) {\r\n      if (options.summaryProcess == 'start') {\r\n        // Initializing \"totalValue\" here\r\n        if (this.formDataInInvoice !== undefined) {\r\n          options.totalValue = this.formDataInInvoice.amount_after_vat;\r\n          amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n        }\r\n      }\r\n      if (options.summaryProcess == 'calculate') {\r\n        if (this.formDataInInvoice !== undefined) {\r\n          options.totalValue = this.formDataInInvoice.amount_after_vat;\r\n          amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n        }\r\n        // Modifying \"totalValue\" here\r\n      }\r\n      if (options.summaryProcess == 'finalize') {\r\n\r\n        options.totalValue = amount_after_vat;\r\n        // Assigning the final value to \"totalValue\" here\r\n      }\r\n    }\r\n\r\n    // Calculating \"CustomSummary2\"\r\n    if (options.name == 'CustomSummary2') {\r\n      // ...\r\n      // Same \"if\" statements here\r\n    }\r\n\r\n  }\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'LAY_MAU_BANG_KE') {\r\n      this.layMauBangKe();\r\n    } else if (e.itemData.id === 'NAP_DU_LIEU_BANG_KE') {\r\n      this.napDuLieuTuBangKe();\r\n    }\r\n  }\r\n  onContentReady = (e) => {\r\n    const arrFooter = [\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount, class: 'table-footer-1' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_after_vat, class: 'table-footer-2' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.quantity_import, class: 'table-footer-3' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.quantity_export, class: 'table-footer-4' },\r\n    ]\r\n    this.invoiceService.formatSumColumnGrid(arrFooter);\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n  <div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.LABEL.process_invoice_transport}}</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <div class=\\\"container-fluid\\\">\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-lg-7\\\">\\r\\n          <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item [label]=\\\"{text: _translate.GRID.INVOICE.template_code }\\\" dataField=\\\"template\\\"  [editorOptions]=\\\"{readOnly: true}\\\">\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n              <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.invoice_date_transport}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item cssClass=\\\"invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.invoice_number_transport}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"delivery_order_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.delivery_order_number}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"delivery_order_date\\\" [label]=\\\"{text: _translate.CONFIGS.day }\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item dataField=\\\"from_warehouse_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.from_warehouse}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>                \\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item dataField=\\\"to_warehouse_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.to_warehouse}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>                \\r\\n            </dxi-item>\\r\\n          </dx-form>\\r\\n        </div>\\r\\n        <div class=\\\"col-lg-5\\\">\\r\\n          <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item cssClass=\\\"form-input-visibility\\\" dataField=\\\"invoice_date\\\" [label]=\\\"{text: 'temp'}\\\"></dxi-item>\\r\\n              <!-- <dxi-item dataField=\\\"a\\\" [label]=\\\"{text: 'Số xác thực'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item> -->\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n                <dxi-item dataField=\\\"currency_code\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_code}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"currency_rate\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_rate}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item dataField=\\\"delivery_by\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.delivery_by}\\\"  [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"buyer_email\\\" [label]=\\\"{text: 'Email'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>                \\r\\n            </dxi-item>\\r\\n          </dx-form>\\r\\n        </div>\\r\\n        <div class=\\\"col-lg-12 link-send-invoice\\\">\\r\\n          <div class=\\\"pull-right\\\">\\r\\n            <a *ngIf=\\\"invoice.status == 'DA_XUAT'\\\" (click)=\\\"sendMail()\\\" href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.LABEL.send_transport}}</a>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <dx-data-grid\\r\\n      id=\\\"invoiceHistoryGrid\\\"\\r\\n      [dataSource]=\\\"invoice_process\\\"\\r\\n      (onEditorPreparing) = \\\"onEditorPreparing($event)\\\"\\r\\n      [showBorders]=\\\"true\\\"\\r\\n      [wordWrapEnabled]=\\\"true\\\"\\r\\n      [showRowLines]=\\\"true\\\">\\r\\n      <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n      <dxi-column cellTemplate=\\\"stt\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.view_order}}\\\" width=\\\"80\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"process_time\\\" caption=\\\"{{_translate.CONTROLL.LABEL.date_made}}\\\" width=\\\"180\\\" dataType=\\\"datetime\\\" format=\\\"dd/MM/yyyy HH:mm:ss\\\" dateSerializationFormat=\\\"yyyy-MM-dd HH:mm:ss\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"content\\\" cellTemplate=\\\"content\\\" caption=\\\"{{_translate.CONTROLL.LABEL.task}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"user.name\\\" caption=\\\"{{_translate.CONTROLL.LABEL.person_made}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <div *dxTemplate=\\\"let d of 'stt'\\\">\\r\\n        <p>{{ d.rowIndex + 1 }}</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'content'\\\">\\r\\n            {{ d.data.content}}\\r\\n        </div>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back }}\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    </dx-button>\\r\\n  </div>\\r\\n</form>\"","module.exports = \"::ng-deep .form-input-visibility{visibility:hidden}::ng-deep .invoice-number-create-invoice input{color:red;font-weight:bold}.link-send-invoice{margin-top:10px}.link-send-invoice a{text-decoration:underline}#invoiceHistoryGrid{margin-top:15px}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { Helper, AuthService, Library } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport * as moment from 'moment';\r\nimport { SendMailComponent } from '../send-mail/send-mail.component';\r\n@Component({\r\n  selector: 'app-send-invoices',\r\n  templateUrl: './send-invoices.component.html',\r\n  styleUrls: ['./send-invoices.component.scss']\r\n})\r\nexport class SendInvoicesComponent implements OnInit {\r\n\r\n  frmData: any = {};\r\n  invoice: any\r\n  invoice_process: any;\r\n  _translate: any;\r\n  wavehourses: any;\r\n  loaihoadon:any;\r\n  constructor(\r\n    private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    public bsModalSendMail: BsModalRef,\r\n    private productsService: ProductsService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadTableContent();\r\n    let invoice = this.invoice;\r\n\r\n    this.frmData.template = `${invoice.template_code} - ${invoice.invoice_series}`;\r\n    this.frmData.invoice_date = moment(invoice.invoice_date).format('DD/MM/YYYY');\r\n    this.frmData.invoice_number = invoice.invoice_number;\r\n    this.frmData.customer_code = invoice.customer_code;\r\n    this.frmData.buyer_tax_code = invoice.buyer_tax_code;\r\n    this.frmData.buyer_name = invoice.buyer_name;\r\n    this.frmData.buyer_mobile = invoice.buyer_mobile;\r\n    this.frmData.buyer_email = invoice.buyer_email;\r\n    this.frmData.currency_code = invoice.currency_code;\r\n    this.frmData.payment_method_name = invoice.payment_method_view_name;\r\n    this.frmData.delivery_order_number = invoice.delivery_order_number;\r\n    this.frmData.delivery_order_date = invoice.delivery_order_date;\r\n    this.frmData.delivery_by = invoice.delivery_by;\r\n    this.frmData.from_warehouse_name = invoice.from_warehouse_name;\r\n    this.frmData.to_warehouse_name = invoice.to_warehouse_name;\r\n    this.frmData.customer_name = invoice.customer_name;\r\n  }\r\n\r\n  loadTableContent() {\r\n    this.invoice_process = {};\r\n    let sub = this.vatService.getInvoiceProccess(this.invoice.id).subscribe(rs => {\r\n      this.invoice_process = rs.data.invoice_process;\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  sendMail() {\r\n    const initialState = {\r\n      invoice_id: this.invoice.id,\r\n      email: this.frmData.buyer_email,\r\n      to_warehouse_name : this.frmData.to_warehouse_name,\r\n      loaihoadon:this.loaihoadon,\r\n      customer_name: this.invoice.customer_name\r\n    };\r\n    this.bsModalSendMail = this.modalService.show(SendMailComponent, { class: 'modal-md', initialState, backdrop: 'static', keyboard: false });\r\n    this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == 'success_mail') {\r\n        this.loadTableContent();\r\n      }\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.dataField === 'content' && e.parentType == \"dataRow\") {\r\n      e.editorName = 'dxTextArea';\r\n    }\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title pull-left\\\">{{ 'MENU.list_transport_send_email' | translate }}</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <dx-data-grid id=\\\"gridContainer\\\" (onEditingStart)=\\\"onEditingStart($event)\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"invoiceList\\\"\\r\\n      [showRowLines]=\\\"true\\\" [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\" [columnResizingMode]=\\\"true\\\"\\r\\n      [columnAutoWidth]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\">\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n      <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n      <!-- <dxo-selection selectAllMode=\\\"page\\\" mode=\\\"multiple\\\"></dxo-selection>\\r\\n      <dxo-selection mode=\\\"multiple\\\"></dxo-selection> -->\\r\\n      <dxi-column cellTemplate=\\\"invoiceNumber\\\" [allowEditing]=\\\"false\\\" dataField=\\\"invoice_number\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.invoice_number_transport }}\\\"\\r\\n        [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"template_code\\\" [allowEditing]=\\\"false\\\" caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"invoice_series\\\" [allowEditing]=\\\"false\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\" [width]=\\\"90\\\"\\r\\n        alignment=\\\"center\\\" [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"invoice_date\\\" [allowEditing]=\\\"false\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.invoice_date_transport }}\\\" [width]=\\\"110\\\" dataType=\\\"date\\\"\\r\\n        format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"!isPXKDaiLy\\\" dataField=\\\"to_warehouse_name\\\" [allowEditing]=\\\"true\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.name_receiver }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"isPXKDaiLy\\\" dataField=\\\"customer_name\\\" [allowEditing]=\\\"true\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.name_receiver }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"buyer_email\\\" [allowEditing]=\\\"true\\\" caption=\\\"Email\\\" [width]=\\\"190\\\" alignment=\\\"left\\\">\\r\\n          <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Email {{_translate.VALIDATION.required}}\\\"></dxi-validation-rule> -->\\r\\n        <!-- <dxi-validation-rule type=\\\"email\\\" message=\\\"Email {{ _translate.VALIDATION.not_pattern }}\\\"></dxi-validation-rule> -->\\r\\n      </dxi-column>\\r\\n      <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n        <p>{{ d.data.template.template_code }}</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n        <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n        <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name || 'Hóa đơn chờ ký' }}</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n        <a class=\\\"gach-chan\\\" (click)=\\\"view(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n            *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n      </div>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n  <div style=\\\"margin-left: 18px;\\\">\\r\\n      <a style=\\\"color: silver;text-decoration: underline;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.note1}}: </a><a style=\\\"color: silver;font-size: 90%;\\\"> {{_translate.CONTROLL.LABEL.note_email}} </a>\\r\\n    </div>\\r\\n    <div style=\\\"margin-top: 5px;margin-left: 18px;\\\">\\r\\n        <a style=\\\"color: silver;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.example}}: admin@efy.com.vn;sale@efy.com.vn</a>\\r\\n      </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\" (click)=\\\"dongy()\\\">\\r\\n    </dx-button>\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n    </dx-button>\\r\\n  </div>\\r\\n  \"","module.exports = \"\"","import { Component, OnInit, ViewChild, HostListener } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { DxMenuComponent } from 'devextreme-angular';\r\nimport List from 'devextreme/ui/list';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { Library, Helper, AuthService, VPreviewInvService, VStringService, sEnum } from '@core/index';\r\nimport { ViewAttachFileComponent } from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport * as moment from 'moment';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n@Component({\r\n  selector: 'app-send-list-email',\r\n  templateUrl: './send-list-email.component.html',\r\n  styleUrls: ['./send-list-email.component.scss']\r\n})\r\nexport class SendListEmailComponent implements OnInit {\r\n  selectedItems: Array<any> = [];\r\n  _language: string;\r\n  _translate: any;\r\n  ganXong = false;\r\n  clickCurent = '';\r\n  disEditMulti = true;\r\n  invoiceList: any;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoices: any;\r\n  invoice_list: ArrayStore;\r\n  isPXKDaiLy = false;\r\n  loaiHoaDon:any;\r\n  configs: any;\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private customersService: CustomersService,\r\n    private vPreviewInvService : ViewInvoiceService\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n    this.convertData();\r\n    this.configs = this.authService.getConfigs();\r\n    this.invoice_list = new ArrayStore({\r\n      key: 'id',\r\n      data: this.invoiceList\r\n    });\r\n  }\r\n\r\n  convertData() {\r\n    this.invoiceList.forEach(item => {\r\n      if (!item.buyer_email) {\r\n        this.customersService.getCustomer(item.customer_id).subscribe(response => {\r\n          let customer = response.data.customer;\r\n          if (customer) {\r\n            item.buyer_email = customer.email;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n  _validGrid() {\r\n    let _isvalid = true;\r\n    this.invoiceList.forEach((element, index) => {\r\n      if (VStringService._getValueToString(element.to_warehouse_name) == \"\") {\r\n        Library.notify(this._translate.CONTROLL.LABEL.name_receiver + \" \" + this._translate.VALIDATION.required, \"error\");\r\n        _isvalid = false;\r\n        return false;\r\n      }\r\n      if (VStringService._getValueToString(element.buyer_email) == \"\") {\r\n        Library.notify(\"Email \" + this._translate.VALIDATION.required, \"error\");\r\n        _isvalid = false;\r\n        return false;\r\n      }\r\n    });\r\n    return _isvalid;\r\n  }\r\n  onEditorPreparing(e) {\r\n    var grid = e.component;\r\n    if (e.parentType === 'dataRow') {\r\n      var oldOnValueChanged = e.editorOptions.onValueChanged;\r\n      e.editorOptions.onFocusOut = (args) => {\r\n        this.invoice_list.update(e.row.data.id, e.row.data);\r\n        //  grid.cellValue(e.row.rowIndex, e.index, e.row.data.to_warehouse_name);\r\n      };\r\n    }\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if (e.dataField == 'buyer_email' && e.parentType == 'dataRow') {\r\n      //   e.row.cells[6].text = \"htkt\";\r\n      //  e.editorOptions.onValueChanged = function(args){\r\n      //    e.row.cells[6].value = args.value;\r\n      //       e.setValue(args.value);\r\n      //  }\r\n    }\r\n  }\r\n\r\n  onEditingStart(e) {\r\n    e.component.saveEditData();\r\n  }\r\n\r\n  view(data) {\r\n    if (data) {\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      }\r\n      if (this.configs.system_parameter.view_multi_invoice) {\r\n        let data = this.vatService.taodulieuXemMau(ids);\r\n        data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n        this.vPreviewInvService.xemMau(data);\r\n      }\r\n      else {\r\n        const initialState = {\r\n          items: ids,\r\n          isXuatHD: false,\r\n          hinhthucxuat: '',\r\n          typeAction: sEnum.typeCode.xem_hoa_don,\r\n          type_invocie: sEnum.typeCode.phieu_xuat_kho\r\n        };\r\n        this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  dong() {\r\n    this.bsModalRef.content.successSaveItem = 'success';\r\n    this.bsModalRef.hide();\r\n  }\r\n\r\n  dongy() {\r\n    if (this._validGrid()) {\r\n      Library.showloading();\r\n      this.invoices = this.invoiceList.filter(item => item.buyer_email);\r\n      let data: any = [];\r\n      this.invoices.forEach(item => {\r\n        let customer_name = item.to_warehouse_name;\r\n        if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n          customer_name = item.customer_name;\r\n        data.push({ id: item.id, email: item.buyer_email, customer_name: customer_name });\r\n      });\r\n      let sub = this.vatService.sendMail(data).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          Library.notify('Gửi mail thành công', 'success');\r\n          this.bsModalRef.content.successSaveItem = 'success_mail';\r\n          this.bsModalRef.hide();\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  selectionChanged(data: any) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    this.disEditMulti = true;\r\n    this.selectedItems = data.selectedRowsData;\r\n    if (this.selectedItems.length > 0) {\r\n      let checks = this.selectedItems.filter((item) => {\r\n        return item.number_of_vouchers;\r\n      });\r\n      let checkDaXuat = this.selectedItems.filter((item) => {\r\n        return item.status == 'DA_XUAT';\r\n      });\r\n      if (checks.length == this.selectedItems.length && checkDaXuat.length == 0) {\r\n        this.disEditMulti = false;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n  <div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.BUTTON.send}} EMAIL</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n        <dxi-item *ngIf=\\\"!isPXKDaiLy\\\" dataField=\\\"to_warehouse_name\\\">\\r\\n        <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.name_receiver }}\\\"></dxo-label>\\r\\n\\r\\n        <dxi-validation-rule type=\\\"required\\\"\\r\\n          message=\\\"{{ _translate.CONTROLL.LABEL.name_receiver }} {{ _translate.VALIDATION.required }}\\\">\\r\\n        </dxi-validation-rule>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isPXKDaiLy\\\" dataField=\\\"customer_name\\\">\\r\\n        <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.name_receiver }}\\\"></dxo-label>\\r\\n\\r\\n        <dxi-validation-rule type=\\\"required\\\"\\r\\n          message=\\\"{{ _translate.CONTROLL.LABEL.name_receiver }} {{ _translate.VALIDATION.required }}\\\">\\r\\n        </dxi-validation-rule>\\r\\n      </dxi-item>\\r\\n      \\r\\n      <dxi-item dataField=\\\"email\\\" [label]=\\\"{text: 'Email'}\\\">\\r\\n        <dxi-validation-rule type=\\\"required\\\" message=\\\"Email {{_translate.VALIDATION.required}}\\\"></dxi-validation-rule>\\r\\n        <!-- <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.email\\\" message=\\\"Email {{_translate.VALIDATION.not_pattern}}\\\"></dxi-validation-rule> -->\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n    <div style=\\\"margin-top: 10px;\\\">\\r\\n        <a style=\\\"color: silver;text-decoration: underline;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.note1}}: </a><a style=\\\"color: silver;font-size: 90%;\\\"> {{_translate.CONTROLL.LABEL.note_email}}</a>\\r\\n      </div>\\r\\n      <div style=\\\"margin-top: 5px;\\\">\\r\\n          <a style=\\\"color: silver;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.example}}: admin@efy.com.vn;sale@efy.com.vn</a>\\r\\n        </div>\\r\\n  </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n    </dx-button>\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    </dx-button>\\r\\n  </div>\\r\\n</form>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\n\r\nimport { pattern } from '@config/index';\r\nimport { Helper, Library,AuthService,sEnum } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\n@Component({\r\n  selector: 'app-send-mail',\r\n  templateUrl: './send-mail.component.html',\r\n  styleUrls: ['./send-mail.component.scss']\r\n})\r\nexport class SendMailComponent implements OnInit {\r\n\r\n  invoice_id: any;\r\n  frmData: any = {};\r\n  email: string;\r\n  pattern = pattern;\r\n  _translate: any;\r\n  to_warehouse_name: string;\r\n  loaihoadon:any;\r\n  isPXKDaiLy = false;\r\n  customer_name:string;\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private authService: AuthService,\r\n  ) { \r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.frmData.email = this.email;\r\n    this.frmData.to_warehouse_name = this.to_warehouse_name;\r\n    this.frmData.customer_name = this.customer_name;\r\n    if (this.loaihoadon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n  }\r\n\r\n  onSubmit(e) {\r\n    let customer_name = this.frmData.to_warehouse_name\r\n    if (this.loaihoadon == sEnum.loaihoadon.HGDL04)\r\n      customer_name = this.frmData.customer_name;\r\n    let data = [{\r\n      id: this.invoice_id,\r\n      email: this.frmData.email,\r\n      customer_name : customer_name\r\n    }];\r\n    Library.showloading();\r\n    let sub = this.vatService.sendMail(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        Library.notify(this._translate.NOTIFY.send_mail_success, 'success');\r\n        this.bsModalRef.content.successSaveItem = \"success_mail\";\r\n        this.bsModalRef.hide();\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {}, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{ 'MENU.list_transport_send_delivery' | translate }}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid \\r\\n    id=\\\"gridContainer\\\"\\r\\n    [dataSource]=\\\"invoiceList\\\"\\r\\n    [showRowLines]=\\\"true\\\"\\r\\n    [allowColumnResizing]=\\\"true\\\"\\r\\n    [columnMinWidth]=\\\"50\\\"\\r\\n    [columnResizingMode]=\\\"true\\\"\\r\\n    [columnAutoWidth]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\">\\r\\n    <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\" [allowEditing]=\\\"false\\\" caption=\\\"{{ 'CONTROLL.LABEL.invoice_number_transport' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template_code\\\" [allowEditing]=\\\"false\\\" caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template.invoice_series\\\" [allowEditing]=\\\"false\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\" [width]=\\\"90\\\" alignment=\\\"center\\\" [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" [allowEditing]=\\\"false\\\" caption=\\\"{{ 'CONTROLL.LABEL.invoice_date_transport' | translate }}\\\" [width]=\\\"110\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"delivery_by\\\" [allowEditing]=\\\"false\\\" caption=\\\"{{ 'CONTROLL.LABEL.delivery_by' | translate }}\\\" [minWidth]=\\\"140\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"carrier_email\\\" [allowEditing]=\\\"true\\\" caption=\\\"Email\\\" [width]=\\\"220\\\" alignment=\\\"left\\\">\\r\\n     \\r\\n    </dxi-column>\\r\\n    <dxi-column dataField=\\\"carrier_mobile\\\" [allowEditing]=\\\"true\\\" caption=\\\"{{ 'CONTROLL.LABEL.phone_number' | translate }}\\\" [width]=\\\"140\\\" alignment=\\\"left\\\">\\r\\n      \\r\\n    </dxi-column>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n        *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n    </div>\\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\" (click)=\\\"dongy()\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\"","module.exports = \".custom-label{margin-top:4px;color:red;font-weight:800;font-family:'Times New Roman'}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as moment from 'moment';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { Helper, Library, SocketService, AuthService, VStringService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { pattern } from '@config/index';\r\n@Component({\r\n  selector: 'app-send-report-delivery',\r\n  templateUrl: './send-report-delivery.component.html',\r\n  styleUrls: ['./send-report-delivery.component.scss']\r\n})\r\nexport class SendReportDeliveryComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  invoices: any;\r\n  configs: any;\r\n  invoiceList: any;\r\n  ioSignature: any;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  _translate: any;\r\n  nodeSign: any;\r\n  isExportFailed: boolean = false;\r\n  emailPattern = pattern.email;\r\n  phonePattern = pattern.phone;\r\n  reportCountERR: any = \"\";\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.convertData();\r\n  }\r\n\r\n  convertData() {\r\n    this.invoiceList.forEach(item => {\r\n      item.invoice_date = moment(item.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n      delete item.updated_at;\r\n      delete item.decpoint_is_dot;\r\n      delete item.money_decimal_format;\r\n      item.invoice_products = item.invoice_products.sort((itemA, itemB) => {\r\n        return itemA.order - itemB.order;\r\n      });\r\n    });\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  dongy() {\r\n    setTimeout(() => {\r\n    if (this._validGrid()) {\r\n      let data = [];\r\n      this.invoiceList.forEach(item => {\r\n        let inv = {\r\n          id: item.id,\r\n          carrier_email: item.carrier_email,\r\n          carrier_mobile: item.carrier_mobile\r\n        }\r\n        data.push(inv);\r\n      });\r\n      Library.showloading();\r\n      let sub = this.vatService.sendReportDelivery(data).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          Library.notify(this._translate.NOTIFY.send_mail_success, 'success');\r\n          this.bsModalRef.content.successSaveItem = \"success_mail\";\r\n          this.bsModalRef.hide();\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  },300);\r\n  }\r\n\r\n  dong() {\r\n    if (this.ganXong) {\r\n      this.bsModalRef.content.successSaveItem = \"success\";\r\n    }\r\n    this.bsModalRef.hide();\r\n    this.router.navigate(['/system/transport-invoice/']);\r\n  }\r\n\r\n  viewDetailInvoice(data) {\r\n    if (data) {\r\n      const ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      }\r\n      Library.showloading();\r\n      const win = window.open('', '', 'width=200, height=100');\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      const sub = this.vatService.xemHoaDonInvoiceImport(ids).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          const pdf_file = rs.data.invoice.pdf_file;\r\n          win.document.write(`\r\n            <a id=\"idA\" title=\"Download File\" style=\"font-family: \\'Verdana\\';color: #333;font-weight: 600;float:right; margin-bottom: 5px;\r\n              margin-right: 20px;\" download=\"hoadon.pdf\" href=\"data:application/pdf;base64,${pdf_file}\">Tải File</a>\r\n            <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n          `);\r\n          win.resizeTo(screen.availWidth, screen.availHeight);\r\n          win.focus();\r\n        } else {\r\n          win.close();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  _validGrid() {\r\n    let _isvalid = true;\r\n    for (let i = 0; i < this.invoiceList.length; i++) \r\n    {\r\n      if (VStringService._getValueToString(this.invoiceList[i].carrier_email) == \"\") {\r\n        // Library.notify(\"Email \" + this._translate.VALIDATION.required, \"error\");\r\n        // this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(i, 'carrier_email'));\r\n        // _isvalid = false;\r\n        // return false;\r\n      }\r\n      else if (!this.emailPattern.test(this.invoiceList[i].carrier_email)) {\r\n        Library.notify(\"Email \" + this._translate.VALIDATION.not_pattern, \"error\");\r\n        this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(i, 'carrier_email'));\r\n        _isvalid = false;\r\n        return false;\r\n      }\r\n      if (VStringService._getValueToString(this.invoiceList[i].carrier_mobile) == \"\") {\r\n        Library.notify(this._translate.CONTROLL.LABEL.phone_number + \" \" + this._translate.VALIDATION.required, \"error\");\r\n        this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(i, 'carrier_mobile'));\r\n        _isvalid = false;\r\n        return false;\r\n      }\r\n      else if (!this.phonePattern.test(this.invoiceList[i].carrier_mobile)) {\r\n        Library.notify(this._translate.CONTROLL.LABEL.phone_number + \" \" + this._translate.VALIDATION.not_pattern, \"error\");\r\n        this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(i, 'carrier_mobile'));\r\n        _isvalid = false;\r\n        return false;\r\n      }\r\n    }\r\n    return _isvalid;\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">DANH SÁCH HÓA ĐƠN CHỜ KÝ SỐ</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid \\r\\n    id=\\\"gridContainer\\\"\\r\\n    [dataSource]=\\\"invoiceList\\\"\\r\\n    [showRowLines]=\\\"true\\\"\\r\\n    [allowColumnResizing]=\\\"true\\\"\\r\\n    [columnMinWidth]=\\\"50\\\"\\r\\n    [columnResizingMode]=\\\"true\\\"\\r\\n    [columnAutoWidth]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\">\\r\\n\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <dxi-column dataField=\\\"invoice_number\\\" caption=\\\"Số hóa đơn\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template_code\\\" caption=\\\"Mẫu số\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template.invoice_series\\\" caption=\\\"Ký hiệu\\\" [width]=\\\"90\\\" alignment=\\\"center\\\" [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"Ngày HĐ\\\" [width]=\\\"110\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"Mã số thuế\\\" [width]=\\\"140\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"Tên khách hàng\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"total_payment\\\" caption=\\\"Tổng tiền (đ)\\\" dataType=\\\"number\\\" format=\\\"0,###.##\\\"  alignment=\\\"right\\\" ></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"statusName\\\" caption=\\\"Trạng thái\\\" [width]=\\\"130\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template.template_code }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n      <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name || 'Hóa đơn chờ ký' }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'statusName'\\\">\\r\\n      <p *ngIf=\\\"d.data.statusByMe =='DA_KY'\\\">Đã ký</p>\\r\\n      <p *ngIf=\\\"d.data.statusByMe !='DA_KY'\\\">{{ d.data.statusByMe }}</p>\\r\\n    </div>\\r\\n    \\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button text=\\\"Ký số\\\" *ngIf=\\\"!daXong\\\" type=\\\"default\\\" (click)=\\\"kyHangLoat()\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"Đóng\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"Quá trình đang xử lý\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as moment from 'moment';\r\n\r\nimport { Helper, Library, SocketService, AuthService, VStringService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\n@Component({\r\n  selector: 'app-sign-many',\r\n  templateUrl: './sign-many.component.html',\r\n  styleUrls: ['./sign-many.component.scss']\r\n})\r\nexport class SignManyComponent implements OnInit {\r\n\r\n  invoices: any;\r\n  configs: any;\r\n  invoiceList: any;\r\n  ioSignature: any;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n\r\n  coKiSoTapChung = false;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  nodeSign: any;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return 'Hoàn thành: ' + percent + '%';\r\n  }\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    if (this.infoDangKy) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n        this.isTT78 = true;\r\n    }\r\n    this.convertData();\r\n    this.connectWebsocket();\r\n  }\r\n\r\n  convertData() {\r\n    this.invoiceList.forEach(item => {\r\n      item.invoice_date = moment(item.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n      delete item.updated_at;\r\n      delete item.decpoint_is_dot;\r\n      delete item.money_decimal_format;\r\n      item.invoice_products = item.invoice_products.sort((itemA, itemB) => {\r\n        return itemA.order - itemB.order;\r\n      });\r\n    });\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình ký số hóa đơn sẽ dừng lại nếu bạn đóng cửa sổ này\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          let i = this.invoiceIndex;\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content, this.invoices[i]);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.xuLiApiKhiXuat(this.invoices[i]);\r\n          } else {\r\n            this.invoices[i].invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoices[i].invoice_files.length) {\r\n              this.xuLiApiKhiXuat(this.invoices[i]);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  xuLiApiKhiXuat(invoice) {\r\n    let tempTemplate = invoice.template;\r\n    delete invoice.template;\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (!this.isTT78) {\r\n      let sub = this.vatService.edit(invoice.id, invoice, true).subscribe(rs => {\r\n        invoice.template = tempTemplate;\r\n        if (rs.status == 'success') {\r\n          invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, invoice.invoice_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.invoiceList[this.invoiceIndex].statusByMe = rs.message;\r\n          this.showPopup = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      let sub = this.vatService.editTT78(invoice.id, invoice, true).subscribe(rs => {\r\n        invoice.template = tempTemplate;\r\n        if (rs.status == 'success') {\r\n          invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.invoiceList[this.invoiceIndex].statusByMe = rs.message;\r\n          this.showPopup = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string, invoice) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    this.subXuatHoaDon = this.vatService.xuatHoaDon({\r\n      id: invoice.id,\r\n      xml_string: xml_string,\r\n      invoice_files: invoice.invoice_files\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.valueProgress += percentComplete;\r\n        this.invoiceList[this.invoiceIndex].statusByMe = 'DA_KY';\r\n        this.ganXong = true;\r\n        this.tempKiFile = 0;\r\n\r\n        if (this.invoiceIndex < this.totalInvoice - 1) {\r\n          this.invoiceIndex++;\r\n          this.xuatHoaDon();\r\n        } else if (this.invoiceIndex == this.totalInvoice - 1) {\r\n          Library.notify('Ký số thành công', 'success');\r\n          this.daXong = true;\r\n          setTimeout(() => {\r\n            this.showPopup = false;\r\n          }, 300);\r\n        }\r\n      } else {\r\n        this.invoiceList[this.invoiceIndex].statusByMe = rs.message;\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      // Library.hideloading();\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    let i = this.invoiceIndex;\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat(this.invoices[i]);\r\n    } else {\r\n      if (this.invoices[i].invoice_files.length) {\r\n        this.invoices[i].invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.invoices[i].invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n      }\r\n    }\r\n  }\r\n\r\n  kyHangLoat() {\r\n    Library.confirmVA('Bạn có chắc chắn ký số các hóa đơn không?', 'Thông báo', () => {\r\n      this.showPopup = true;\r\n      this.invoices = JSON.parse(JSON.stringify(this.invoiceList.filter(item => item.statusByMe != 'DA_KY')));\r\n      console.log(this.invoices);\r\n      this.totalInvoice = this.invoices.length;\r\n      this.invoiceIndex = 0;\r\n      this.tempKiFile = 0;\r\n      this.xuatHoaDon();\r\n    });\r\n  }\r\n\r\n  dong() {\r\n    if (this.ganXong) {\r\n      this.bsModalRef.content.successSaveItem = \"success\";\r\n    }\r\n    this.bsModalRef.hide()\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{ 'MENU.list_transport_recept_delivery' | translate }}</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body body-content\\\">\\r\\n  <iframe style=\\\"margin-left: 170px;\\\" width=\\\"70%\\\" height=\\\"100%\\\" id = \\\"preview-iframe\\\"></iframe>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <div *ngFor=\\\"let item of items | paginate: { itemsPerPage: 1, currentPage: p }; let i = index\\\">\\r\\n  </div>\\r\\n  <pagination-controls style=\\\"width: 50%;\\\" (pageChange)=\\\"getPage($event)\\\"></pagination-controls>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.download_file}}\\\" icon=\\\"{{_translate.ICONS.download}}\\\" type=\\\"default\\\" (click)=\\\"dongy()\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\"","module.exports = \".pagination{display:flex}.pagination a{color:black;float:left;padding:8px 16px;text-decoration:none}::ng-deep .body-content{height:500px}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { VStringService, SocketService, AuthService, sEnum, Library, Helper, VChanggeMoneyService, VPreviewInvService } from '@core/index';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-view-delivery',\r\n  templateUrl: './view-delivery.component.html',\r\n  styleUrls: ['./view-delivery.component.scss']\r\n})\r\nexport class ViewDeliveryComponent implements OnInit {\r\n  bsModalSignRef: BsModalRef;\r\n  items: any;\r\n  key: string = 'name';\r\n  reverse: boolean = false;\r\n  objectUrl:any;\r\n  mainTest:any;\r\n  _language: string;\r\n  _translate: any;\r\n  sort(key) {\r\n    this.key = key;\r\n    this.reverse = !this.reverse;\r\n  }\r\n  p: number = 1;\r\n  constructor(\r\n    public bsModalImportRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    public translate: TranslateService,\r\n    private authService: AuthService,\r\n  ) { \r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getPage(1, 'desc', 'created');\r\n  }\r\n  viewTransport(item) {\r\n    let id = item.id;\r\n  }\r\n\r\n  getPage(page: number, sort: string = 'desc', order: string = 'created') {\r\n   \r\n    this.p = page;\r\n    let oTransport: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        oTransport = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    Library.showloading();\r\n    let sub = this.vatService.xembienbangiaohang(oTransport.id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.objectUrl = rs.data.file_content;\r\n        this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n\r\n        let iframe = document.getElementById('preview-iframe');\r\n      \r\n        iframe.setAttribute(\"src\", this.mainTest);\r\n        // this.objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n        // let ts = this.objectUrl;\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  dong() {\r\n    this.router.navigate(['/system/transport-invoice']);\r\n    this.bsModalImportRef.hide()\r\n  }\r\n  dongy()\r\n  {\r\n    let ids = [];\r\n    for (let item of this.items) {\r\n           ids.push(item.id);\r\n      }\r\n    Library.showloading();\r\n    let sub = this.vatService.taibienbangiaohang(ids).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{lblTitle}}</h4>\\r\\n  <div>\\r\\n    <div *ngFor=\\\"let item of items | paginate: { itemsPerPage: 1, currentPage: p }; let i = index\\\">\\r\\n    </div>\\r\\n    <pagination-controls style=\\\"width: 50%;\\\" (pageChange)=\\\"getPage($event)\\\"></pagination-controls>\\r\\n  </div>\\r\\n  <div style=\\\"display: flex; align-items: center;\\\">\\r\\n    <dx-button *ngIf=\\\"isXuatHD\\\" text=\\\"Đồng ý\\\" icon=\\\"{{_translate.ICONS.save}}\\\" type=\\\"default\\\" (click)=\\\"dongy()\\\">\\r\\n    </dx-button>\\r\\n    <i class=\\\"fa fa-times\\\" style=\\\"font-size:25px; cursor: pointer;\\\" (click)=\\\"dong()\\\"></i>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <div class=\\\"body-content\\\">\\r\\n    <div *ngIf=\\\"isXuatHD\\\" class=\\\"canh-bao\\\">\\r\\n      <p style=\\\"font-weight: 600;\\\">\\r\\n        <span class=\\\"nhap-nhay\\\"></span>\\r\\n        <span style=\\\"font-size: 17px;\\\">Lưu ý: </span>\\r\\n        Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên\\r\\n        hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.\\r\\n      </p>\\r\\n    </div>\\r\\n    <div style=\\\"display: flex; width: 100%;\\\">\\r\\n      <iframe height=\\\"{{heightT}}\\\" id=\\\"preview-iframe\\\"></iframe>\\r\\n      <div *ngIf=\\\"isXuatHD\\\" class=\\\"thong-tin-hoa-don\\\" >\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\" font-weight: 600;\\\">Ngày chứng từ : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">{{ngayHD}}</p>\\r\\n        </div>\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\"font-weight: 600;\\\">Trạng thái : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">Xuất {{hinhthucxuat}}</p>\\r\\n        </div>\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\"font-weight: 600;\\\">Tổng tiền : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">{{total_payment}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\"","module.exports = \".modal-header{display:flex;justify-content:space-between;align-items:center}.pagination{display:flex}.pagination a{color:black;float:left;padding:8px 16px;text-decoration:none}::ng-deep .body-content{height:100%}.modal-body .body-content{display:flex;justify-content:center;align-items:center;flex-direction:column}.nhap-nhay{background:red;padding:0.5px 9px;margin-right:5px;border-radius:57%;-webkit-animation:flicker 1s infinite}.ht-xuat{width:25%;padding:15px;background:#ffffff;box-shadow:rgba(0,0,0,0.35) 0px 5px 15px}@-webkit-keyframes flicker{0%{opacity:0}9%{opacity:0}10%{opacity:.5}13%{opacity:0}20%{opacity:.5}25%{opacity:1}}.example{padding:20px}input[type=button]{padding:5px 10px;margin:10px 5px;border-radius:5px;cursor:pointer;background:#ddd;border:1px solid #ccc}input[type=button]:hover{background:#ccc}.confirm{display:none}.confirm>div:first-of-type{position:fixed;width:100%;height:100%;background:rgba(0,0,0,0.5);top:0px;left:0px}.confirm>div:last-of-type{padding:10px 20px;background:white;position:absolute;width:auto;height:auto;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border-radius:5px;border:1px solid #333}.confirm>div:last-of-type div:first-of-type{min-width:150px;padding:10px}.confirm>div:last-of-type div:last-of-type{text-align:right}.canh-bao{margin-bottom:10px}#preview-iframe{width:calc(100% - 20px)}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { VStringService, SocketService, AuthService, sEnum, Library, Helper, VChanggeMoneyService, VPreviewInvService } from '@core/index';\r\ndeclare var $: any;\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\n@Component({\r\n  selector: 'app-view-invoice',\r\n  templateUrl: './view-invoice.component.html',\r\n  styleUrls: ['./view-invoice.component.scss']\r\n})\r\nexport class ViewInvoiceComponent implements OnInit {\r\n  bsModalSignRef: BsModalRef;\r\n  items: any;\r\n  key: string = 'name';\r\n  reverse: boolean = false;\r\n  objectUrl: any;\r\n  mainTest: any;\r\n  _language: string;\r\n  _translate: any;\r\n  isXuatHD: any;\r\n  ngayHD: any;\r\n  hinhthucxuat: any;\r\n  configs: any;\r\n  ioSignature: Subscription;\r\n  heightT:any;\r\n  total_payment:any;\r\n  lblTitle:any;\r\n  sort(key) {\r\n    this.key = key;\r\n    this.reverse = !this.reverse;\r\n  }\r\n  p: number = 1;\r\n  constructor(\r\n    public bsModal: BsModalRef,\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    public translate: TranslateService,\r\n    private authService: AuthService,\r\n    private socketService: SocketService,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.lblTitle = \"BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ\";\r\n    this.heightT = screen.availHeight -195;\r\n    this.connectWebsocket();\r\n    this.configs = this.authService.getConfigs();\r\n    this.getPage(1, 'desc', 'created');\r\n  }\r\n  viewTransport(item) {\r\n    let id = item.id;\r\n  }\r\n\r\n  getPage(page: number, sort: string = 'desc', order: string = 'created') {\r\n\r\n    this.p = page;\r\n    let oTransport: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        oTransport = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    Library.showloading();\r\n    let invoicesArr = [];\r\n    invoicesArr.push(oTransport);\r\n    let data = {\r\n      invoices: invoicesArr\r\n    }\r\n    let sub = this.vatService.previewInvoiceImport(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.total_payment = rs.data.invoice.total_payment\r\n          this.objectUrl = rs.data.invoice.pdf_file;\r\n          this.ngayHD = moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n\r\n          let iframe = document.getElementById('preview-iframe');\r\n\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          this.total_payment = rs.data.invoice.total_payment\r\n          let invoice_date = rs.data.invoice.invoice_date;\r\n          let json_data = rs.data.invoice.json_data;\r\n          let appCode = \"REPX\";\r\n          if (rs.data.invoice.is_html_template)\r\n            appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, invoice_date);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  dong() {\r\n    // this.router.navigate(['/system/transport-invoice']);\r\n    this.bsModal.hide()\r\n  }\r\n  dongy() {\r\n    this.bsModal.content.successSaveItem = 'DONG_Y';\r\n    this.bsModal.hide();\r\n  }\r\n  /* Kết nối đến socket */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_viewInvoice') {\r\n        if (data.Status == \"success\")\r\n          this.viewInvoice(data.Data.Content, data.Data.typeView, data.Data.hinhthucxuat, data.Data.invoice_date);\r\n        else if (data.Status == \"error\") {\r\n          Library.notify(data.Description, 'error');\r\n        }\r\n      }\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n  }\r\n  viewInvoice(content, typeView, hinhthucxuat, invoice_date) {\r\n    this.objectUrl = content;\r\n    this.ngayHD = moment(invoice_date).format('DD/MM/YYYY');\r\n    this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n    let iframe = document.getElementById('preview-iframe');\r\n    iframe.setAttribute(\"src\", this.mainTest);\r\n  }\r\n  \r\n}\r\n","\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n//library\r\nimport { devextremeModule } from '@core/index';\r\n\r\n//general\r\nimport { SharedModule, VatSharedModule, SomeModule, CreateInvoiceGuard } from '@shared/index';\r\nimport { VatService } from '@modules/vat/shared/vat.service'\r\nimport { InvoiceResolver } from '@modules/vat/shared/invoice.resolver'\r\nimport { ShowInvoiceResolver } from '@modules/vat/shared/show-invoice.resolver'\r\n\r\nimport { routing } from './internal-transport.routing';\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { vTranslateModule } from '@core/module/v-translate.module';\r\nimport { InvoiceComponent } from './components/invoice/invoice.component';\r\nimport { FormInvoiceComponent } from './components/form-invoice/form-invoice.component';\r\nimport { ProductGripComponent } from './components/product-grip/product-grip.component';\r\nimport { SignManyComponent } from './components/sign-many/sign-many.component';\r\nimport { SendInvoicesComponent } from './components/send-invoices/send-invoices.component';\r\nimport { SendMailComponent } from './components/send-mail/send-mail.component';\r\nimport { SendListEmailComponent } from './components/send-list-email/send-list-email.component';\r\nimport { AddCustomerComponent } from '@shared/index';\r\nimport { ImportInvoicesFromExcelComponent } from './components/import-invoices-from-excel/import-invoices-from-excel.component';\r\nimport { SendReportDeliveryComponent } from './components/send-report-delivery/send-report-delivery.component';\r\nimport { ViewDeliveryComponent } from './components/view-delivery/view-delivery.component';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { ViewInvoiceComponent } from './components/view-invoice/view-invoice.component';\r\nimport { SendDataForTaxComponent } from '@shared/index';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { DxLookupModule, DxPopoverModule, DxTooltipModule } from 'devextreme-angular';\r\nimport { TagInputModule } from 'ngx-chips';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    routing,\r\n    SharedModule,\r\n    VatSharedModule,\r\n    SomeModule,\r\n    devextremeModule,\r\n    vTranslateModule,\r\n    DxLookupModule,\r\n    TagInputModule,\r\n    DxTooltipModule,\r\n    DxPopoverModule,\r\n    NgxPaginationModule,\r\n    NgxSpinnerModule,\r\n    DxPopoverModule\r\n  ],\r\n  exports: [\r\n    IndexComponent,\r\n    // InvoiceComponent, \r\n    // ProductGripComponent, \r\n    // FormInvoiceComponent, \r\n  ],\r\n  declarations: [\r\n    IndexComponent,\r\n    InvoiceComponent,\r\n    FormInvoiceComponent,\r\n    ProductGripComponent,\r\n    SignManyComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    SendListEmailComponent,\r\n    ImportInvoicesFromExcelComponent,\r\n    SendReportDeliveryComponent,\r\n    ViewDeliveryComponent,\r\n    ViewInvoiceComponent,\r\n  ],\r\n  entryComponents: [\r\n    SignManyComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    SendListEmailComponent,\r\n    AddCustomerComponent,\r\n    ImportInvoicesFromExcelComponent,\r\n    SendReportDeliveryComponent,\r\n    ViewDeliveryComponent,\r\n    SignatureOffComponent,\r\n    ViewInvoiceComponent,\r\n    SendDataForTaxComponent,\r\n    ViewInvoiceMultipageComponent,\r\n    PreviewInvoiceComponent\r\n  ],\r\n  providers: [\r\n    VatService, \r\n    InvoiceResolver, \r\n    ShowInvoiceResolver,\r\n    ViewInvoiceService,\r\n    MyBsModalService\r\n  ]\r\n})\r\nexport class InternalTransportModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { InvoiceComponent } from './components/invoice/invoice.component';\r\nimport { VatDeactivateGuard } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { InvoiceResolver, ShowInvoiceResolver } from '@modules/vat/shared';\r\nconst routes: Routes = [\r\n  { path: '', component: IndexComponent },\r\n  { path: 'create', component: InvoiceComponent, resolve: { init: InvoiceResolver }, canDeactivate: [VatDeactivateGuard], data: { brec: 'create_delivery' } },\r\n  { path: ':invoiceId', component: InvoiceComponent, resolve: { init: ShowInvoiceResolver }, canDeactivate: [VatDeactivateGuard], data: { brec: 'detail_delivery' } },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class routing { }\r\n","import {Injectable} from '@angular/core';\r\nimport {CanDeactivate} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\n\r\nexport interface CanComponentDeactivate {\r\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VatDeactivateGuard implements CanDeactivate<CanComponentDeactivate> {\r\n\r\n  canDeactivate(component: CanComponentDeactivate) {\r\n    return component.canDeactivate && component.canDeactivate();\r\n  }\r\n}\r\n"],"sourceRoot":""}