{"version":3,"sources":["webpack:///./src/app/modules/handle-voucher/components/index/index.component.html","webpack:///./src/app/modules/handle-voucher/components/index/index.component.scss","webpack:///./src/app/modules/handle-voucher/components/index/index.component.ts","webpack:///./src/app/modules/handle-voucher/components/voucher-cancel/voucher-cancel.component.html","webpack:///./src/app/modules/handle-voucher/components/voucher-cancel/voucher-cancel.component.scss","webpack:///./src/app/modules/handle-voucher/components/voucher-cancel/voucher-cancel.component.ts","webpack:///./src/app/modules/handle-voucher/handle-voucher-routing.module.ts","webpack:///./src/app/modules/handle-voucher/handle-voucher.module.ts","webpack:///./src/app/modules/handle-voucher/shared/handle-voucher.service.ts","webpack:///./src/app/modules/handle-voucher/shared/index.ts","webpack:///./src/app/modules/vat/deactivate/vat-deactivate.guard.ts"],"names":[],"mappings":"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","file":"handle-voucher-handle-voucher-module.js","sourcesContent":["module.exports = \"<div class=\\\"row search-section\\\">\\r\\n  <div class=\\\"col-md-8\\\">\\r\\n    <app-voucher-search (searchContentChange)=\\\"getSearch($event)\\\"></app-voucher-search>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-4 list-header\\\" style=\\\"max-height: 70px;\\\">\\r\\n    <div *ngIf=\\\"isXuLyChungTu\\\" class=\\\"pull-right button-panel\\\">\\r\\n      <dx-button [(icon)]=\\\"_translate.ICONS.delete\\\" text=\\\"{{ 'CONTROLL.BUTTON.cancel_vouchers' | translate }}\\\"\\r\\n        type=\\\"default\\\" (click)=\\\"cancelVoucher()\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainerInvoice\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n  [showRowLines]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\"\\r\\n  [showBorders]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\" [noDataText] =\\\"textHienThiLuoi\\\">\\r\\n  <dxo-selection selectAllMode=\\\"{{pageSelect}}\\\" mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <!-- <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"handleinvoice\\\"></dxo-state-storing> -->\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"single\\\"></dxo-sorting>\\r\\n  <dxo-selection mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row>\\r\\n  <!-- Số chứng từ -->\\r\\n  <dxi-column cellTemplate=\\\"licenseNumber\\\" dataField=\\\"license_number\\\"\\r\\n    caption=\\\"{{ 'CONTROLL.LABEL.vehicle_license_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n    alignment=\\\"center\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"1\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n  <!-- Mẫu số, ký hiệu -->\\r\\n  <dxi-column cellTemplate=\\\"templateCode\\\" [filterOperations]=\\\"['contains']\\\" [calculateFilterExpression]=\\\"calculateFilterExpression\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  <!-- Ngày chứng từ -->\\r\\n  <dxi-column dataField=\\\"license_date\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\"\\r\\n    caption=\\\"{{ 'CONTROLL.LABEL.invoice_voucher' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\"\\r\\n    dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"\\r\\n    headerCellTemplate=\\\"titleHeaderTemplate\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"0\\\"></dxi-column>\\r\\n  <!-- Mã số thuế -->\\r\\n  <dxi-column dataField=\\\"taxpayers_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"center\\\" allowSearch=\\\"true\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Số CMND -->\\r\\n  <dxi-column dataField=\\\"id_card\\\" caption=\\\"{{ 'GRID.INVOICE.id_card' | translate }}\\\" alignment=\\\"center\\\" minWidth=\\\"80\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tên người nộp thuế -->\\r\\n  <dxi-column dataField=\\\"taxpayers_name\\\" caption=\\\"{{ 'GRID.INVOICE.taxpayer_name' | translate }}\\\" alignment=\\\"left\\\"\\r\\n    minWidth=\\\"200\\\"></dxi-column>\\r\\n  <!-- Số TNCN còn được nhận -->\\r\\n  <dxi-column dataField=\\\"amount_personal_income_still_received_format\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.amount_personal_income_still_received' | translate }}\\\" alignment=\\\"right\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tình trạng xử lý -->\\r\\n  <dxi-column cellTemplate=\\\"statusInvoice\\\" caption=\\\"{{ 'CONTROLL.LABEL.processing_status' | translate }}\\\"\\r\\n              [width]=\\\"_translate.GRID_WIDTH.trang_thai_gui_mail\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  <!-- Chức năng -->\\r\\n  <dxi-column cellTemplate=\\\"actionIcon\\\" width=\\\"{{_translate.GRID_WIDTH.hanh_dong_2}}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong_2}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <div *dxTemplate=\\\"let d of 'licenseNumber'\\\">\\r\\n    <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailVoucher(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.license_number }}</a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p style=\\\"text-decoration: underline;cursor: pointer;\\\">\\r\\n      {{ d.data.template_code }}</p>\\r\\n    <p style=\\\"text-decoration: underline;cursor: pointer;\\\">\\r\\n      {{ d.data.license_series }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    {{d.data.license_date}}\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusInvoice'\\\">\\r\\n    <ng-container [ngSwitch]=\\\"d.data.adjustment_type\\\">\\r\\n      <p *ngSwitchCase=\\\"1\\\">{{ 'GRID.GENERAL.original_voucher' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"7\\\">{{ 'GRID.GENERAL.voucher_removed' | translate }}</p>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.view_invoice}}\\\" class=\\\"xemIcon actionIcon\\\" (click)=\\\"view(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a *ngIf=\\\"d.data.status =='DA_XUAT'\\\" style=\\\"float: right;\\\" title=\\\"{{_translate.CONTROLL.BUTTON.tai_hd_xml}}\\\"\\r\\n    class=\\\"taiXmlIcon actionIcon\\\" (click)=\\\"taiHDXml(d.data)\\\"\\r\\n    href=\\\"javascript:void(0)\\\">\\r\\n </a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n    <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{info.column.caption}} </p>\\r\\n  </div>\\r\\n\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"configs.system_parameter.number_row_per_page\\\"></dxo-paging>\\r\\n  <dxo-pager\\r\\n    [showPageSizeSelector]=\\\"true\\\"\\r\\n    [allowedPageSizes]=\\\"[15, 35, 50, 100]\\\"\\r\\n    [showNavigationButtons]=\\\"true\\\"\\r\\n    [showInfo]=\\\"true\\\"\\r\\n    infoText=\\\"{{ _translate.DXO_PAGER.page}}\\\">>\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n<ngx-spinner\\r\\nbdColor=\\\"rgba(51,51,51,0.8)\\\"\\r\\nsize=\\\"medium\\\"\\r\\ncolor=\\\"#fff\\\"\\r\\ntype=\\\"timer\\\">\\r\\n<p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar\\r\\n        [min]=\\\"0\\\"\\r\\n        [max]=\\\"100\\\"\\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\"","module.exports = \".chua-gui-khach-hang{color:red}.cho-ky{color:#008b8b}.gach-chan{text-decoration:underline}.search-section{padding-bottom:15px}.button-panel{margin-top:30px}.mainmenubtn{background-color:red;color:white;border:none;cursor:pointer;padding:20px;margin-top:20px}::ng-deep #gridContainerVat .dx-cell-focus-disabled{overflow:visible !important}::ng-deep #gridContainerVat .dx-datagrid-rowsview{overflow:visible}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { HandleVoucherService } from '@modules/handle-voucher/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AuthService, Helper, Library, VPreviewInvService, sEnum, VStringService, SocketService } from '@core/index';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { SignatureOffComponent, SendListVoucherComponent, LogProcessVoucherComponent } from '@shared/index';\r\nimport {VoucherCancelComponent} from '@modules/handle-voucher/components/voucher-cancel/voucher-cancel.component';\r\nimport { VoucherService } from '@modules/vouchers/shared';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport * as _ from 'lodash';\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  selectedRows: Array<any> = [];\r\n  selectedItems: Array<any> = [];\r\n  configs: any = {};\r\n  idRow: any = undefined;\r\n  pageSelect: any;\r\n  clickCurent: any = undefined;\r\n  dataSource: any;\r\n  _translate: any;\r\n  paramSearch: any;\r\n  extras = [];\r\n  dataInfor: any;\r\n  bsModalRef: BsModalRef;\r\n  bsModalImportRef: BsModalRef;\r\n  bsModalSignRef: BsModalRef;\r\n  ioSignature: Subscription;\r\n  checkSubmit: any;\r\n\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n  invoices = [];\r\n  isExportFailed: boolean = false;\r\n  isXuLyChungTu: boolean = false;\r\n  textHienThiLuoi: any;\r\n  currentUser: any;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private handVoucherService: HandleVoucherService,\r\n    private modalService: BsModalService,\r\n    private modalImportService: BsModalService,\r\n    private socketService: SocketService,\r\n    private voucher_service: VoucherService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private spinner: NgxSpinnerService) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.extend,\r\n      items: [\r\n        // {\r\n        //   id: \"NAP_HD_TU_EXCEL\",\r\n        //   name: this._translate.CONTROLL.BUTTON.import_invoice_from_excel,\r\n        //   icon: this._translate.ICONS.excel\r\n        // },\r\n\r\n        {\r\n          id: 'SUA',\r\n          name: this._translate.CONTROLL.BUTTON.edit,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n        {\r\n          id: 'XOA',\r\n          name: this._translate.CONTROLL.BUTTON.delete,\r\n          icon: this._translate.ICONS.delete\r\n        },\r\n        {\r\n          id: 'XEM',\r\n          name: this._translate.CONTROLL.BUTTON.view_voucher,\r\n          icon: this._translate.ICONS.view\r\n        },\r\n        {\r\n          id: 'GUI_BEN_MUA',\r\n          name: this._translate.CONTROLL.LABEL.send_invoice,\r\n          icon: this._translate.ICONS.send_email\r\n        },\r\n        {\r\n          id: 'TAI_CT_PDF',\r\n          name: this._translate.CONTROLL.BUTTON.tai_ct_pdf,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: \"TAI_CT_XML\",\r\n          name: this._translate.CONTROLL.BUTTON.tai_ct_xml,\r\n          icon: this._translate.ICONS.xml\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.textHienThiLuoi = \"Không có dữ liệu\";\r\n    this.configs = this.authService.getConfigs();\r\n    if (this.configs.system_parameter.select_invoice_current_page)\r\n      this.pageSelect = \"page\";\r\n    else\r\n      this.pageSelect = \"allPages\";\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    const listpermissions = this.currentUser.user.permissions.split(',');\r\n    let quyenxulychungtu = listpermissions.filter(p => p === 'xu_ly_chung_tu_khau_tru_thue_tncn')[0];\r\n    if (quyenxulychungtu)\r\n      this.isXuLyChungTu = true;\r\n    if (!this.isXuLyChungTu) {\r\n      this.textHienThiLuoi = \"Bạn không có quyền thực hiện chức năng này\";\r\n    }\r\n  }\r\n  selectionChanged(data: any) {\r\n    this.hidenDropdownList();\r\n    this.selectedItems = data.selectedRowsData;\r\n  }\r\n  hidenDropdownList() {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.idRow) {\r\n      document.getElementById(this.idRow).classList.remove('show');\r\n    }\r\n  }\r\n  loadList(params?) {\r\n    this.dataSource = {};\r\n    if (this.isXuLyChungTu) {\r\n      if (params) {\r\n        this.dataSource.store = this.handVoucherService.getAll(params);\r\n      } else {\r\n        this.dataSource.store = this.handVoucherService.getAll();\r\n      }\r\n    }\r\n  }\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadList(e);\r\n\r\n  }\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.license_number) {\r\n            e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type === '2' || e.data.adjustment_type === '7' || e.data.adjustment_type === '6') {\r\n        const eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  view(data) {\r\n    if (this.selectedItems.length > 0 || data) {\r\n      const _lst = this.selectedItems.filter(p => p.status === 'DA_XUAT');\r\n      if (_lst.length > 0 || data) {\r\n        if (this.selectedItems.length === 1) {\r\n          this.dataInfor = this.selectedItems[0];\r\n        } else {\r\n          this.dataInfor = data;\r\n        }\r\n        let ids = [];\r\n        if (data) {\r\n          ids.push(data.id);\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          let data = this.voucher_service.taodulieuXemMau(ids);\r\n          data['configs'] = _.cloneDeep(sEnum.cauhinhxemmau.chungtu);\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_chung_tu\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  \r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n  edit(data) {\r\n    let rowData = null;\r\n    if (data) {\r\n      if (VStringService._getValueToString(data.status) == sEnum.statusInv.DaXuat)\r\n        Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_voucher, 'error');\r\n      else\r\n        rowData = data;\r\n    }\r\n    else {\r\n      if (this.selectedItems.length > 0) {\r\n        if (this.selectedItems.length == 1) {\r\n          if (VStringService._getValueToString(this.selectedItems[0].status) == sEnum.statusInv.DaXuat)\r\n            Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_voucher, 'error');\r\n          else\r\n            rowData = this.selectedItems[0];\r\n        }\r\n        else {\r\n          Library.notify(this._translate.NOTIFY.only_choose_voucher_edit, 'error');\r\n        }\r\n      }\r\n    }\r\n    if (rowData) {\r\n      this.router.navigate([`/system/voucher-tax/${VStringService._getValueToString(rowData.id)}`]);\r\n    }\r\n  }\r\n  delete(data) {\r\n    if (this.selectedItems.length || data) {\r\n      const status = '';\r\n      let ids = '';\r\n      if (data) {\r\n        ids = data.id;\r\n      } else {\r\n        ids = this.selectedRows.join(',');\r\n      }\r\n      const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          Library.showloading();\r\n          this.handVoucherService.delete(ids).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n              this.loadList(this.paramSearch);\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => {\r\n          }, () => {\r\n            Library.hideloading();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n  kyHangLoat(data) {\r\n\r\n  }\r\n  guibenmua(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'DA_XUAT') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      if (this.selectedItems.filter(p => p.status === 'DA_XUAT').length === 0) {\r\n        check = false;\r\n      }\r\n    }\r\n\r\n    if (check && (this.selectedItems.length || data)) {\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedItems.filter(p => p.status === 'DA_XUAT').map(p => p.id);\r\n      }\r\n      this.handVoucherService.layDanhSachChungTu(ids).subscribe((rs: any) => {\r\n        if (rs.status === 'success') {\r\n          const initialState = {\r\n            licenseList: rs.data.licenses,\r\n            configs: this.configs\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SendListVoucherComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_invoice_selected, 'error');\r\n    }\r\n  }\r\n  taiHDXml(data) {\r\n    if (data) {\r\n      let ids = [];\r\n      if (data.status != sEnum.statusInv.DaXuat) {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n      ids.push(data.id);\r\n      Library.showloading();\r\n      let sub = this.handVoucherService.xuatCTXml(ids).subscribe(rs => {\r\n        if (rs.status == \"success\") {\r\n          Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n        } else {\r\n          Library.notify(rs.message, \"error\");\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n        Library.hideloading();\r\n      });\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.please_choose_voucher_exported, 'error');\r\n      return;\r\n    }\r\n  }\r\n  taiHDPdf() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        this.invoices = _lst.map(e => e.id);\r\n        this.showPopup = true;\r\n        this.totalInvoice = Math.floor(this.invoices.length / 10) + 1;\r\n        this.invoiceIndex = 0;\r\n        this.tempKiFile = 0;\r\n        this.xulyTaiFilePdf();\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.please_choose_voucher_exported, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.please_choose_voucher_exported, 'error');\r\n      return;\r\n    }\r\n  }\r\n  xulyTaiFilePdf() {\r\n    let ids = this.iterator(this.invoices, 10, this.invoiceIndex);\r\n\r\n    let sub = this.handVoucherService.xuatChungTuPdf(ids).subscribe(rs => {\r\n      let isSuccess = false;\r\n      this.ganXong = true;\r\n      this.tempKiFile = 0;\r\n      if (rs.status == 'success') {\r\n        Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n        isSuccess = true;\r\n      } else {\r\n        this.isExportFailed = true;\r\n      }\r\n      this.continuteExportInvoice(isSuccess);\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  continuteExportInvoice(isSuccess) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.valueProgress += percentComplete;\r\n    if (this.invoiceIndex == this.totalInvoice - 1) {\r\n      if (!this.isExportFailed && isSuccess)\r\n        Library.notify(\"Tải chứng từ thành công\", 'success', 5000);\r\n      else {\r\n        // Danh sách lỗi\r\n      }\r\n      this.daXong = true;\r\n      setTimeout(() => {\r\n        this.showPopup = false;\r\n      }, 300);\r\n    }\r\n    else if (this.invoiceIndex < this.totalInvoice - 1) {\r\n      this.invoiceIndex++;\r\n      this.xulyTaiFilePdf();\r\n    }\r\n  }\r\n  createLicense() {\r\n    this.router.navigate(['system/voucher-tax/create']);\r\n  }\r\n  iterator(a, take, skip) {\r\n    let current = skip * 10;\r\n    let l = a.length;\r\n    let end = current + take;\r\n    let part = a.slice(current, end);\r\n    current = end < l ? end : 0;\r\n    return part;\r\n  }\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'KY_SO') {\r\n      this.kyHangLoat(null);\r\n    } else if (e.itemData.id === 'SUA') {\r\n      this.edit(null);\r\n    } else if (e.itemData.id === 'XOA') {\r\n      this.delete(null);\r\n    } else if (e.itemData.id === 'XEM') {\r\n      this.view(null);\r\n    } else if (e.itemData.id === 'GUI_BEN_MUA') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'LIST_INVOICE_BUY') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'DETAILS_OF_EACH_GOODS_AND_SERVICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'ADD_MULTIPLE_INVOICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id == \"TAI_CT_PDF\") {\r\n      this.taiHDPdf();\r\n    }\r\n  }\r\n  sendVoucher(id) {\r\n    Library.showloading();\r\n    let ids = [];\r\n    ids.push(id);\r\n    let sub = this.handVoucherService.layDanhSachChungTu(ids).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        const initialState = {\r\n          licenses: rs.data.licenses,\r\n        };\r\n        this.bsModalRef = this.modalService.show(LogProcessVoucherComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs[\"message\"], 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.license_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  editNotSelect(row) {\r\n    if (row.status === 'DA_XUAT') {\r\n      Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_voucher, 'error');\r\n    } else {\r\n      this.router.navigate([`/system/voucher-tax/${row.id}`]);\r\n    }\r\n  }\r\n  viewDetailVoucher(row) {\r\n    this.router.navigate([`/system/voucher-tax/${row.id}`]);\r\n  }\r\n  cancelVoucher() {\r\n    let lstInvoice = this.selectedItems.filter(p => p.status == 'DA_XUAT');\r\n    if (lstInvoice && lstInvoice.length > 0) {\r\n      let _lstCancel = lstInvoice.filter(p => p.adjustment_type == '7');\r\n      if (_lstCancel && _lstCancel.length > 0) {\r\n        Library.notify(this._translate.NOTIFY.choose_cancel_voucher, 'error');\r\n      }\r\n      else {\r\n        let ids = [];\r\n        lstInvoice = lstInvoice.sort((invA, invB) => {\r\n          return <any>new Date(invB.license_date) - <any>new Date(invA.license_date) || invB.license_number.localeCompare(invA.license_number);\r\n        });\r\n\r\n        ids = lstInvoice.map(e => e.id);\r\n        Library.showloading();\r\n        let isView = false;\r\n        const sub = this.handVoucherService.layDanhSachChungTu(ids).subscribe(rs => {\r\n          let lstInvoice = rs.data.licenses.filter(p => p.adjustment_type == '7');\r\n          if (lstInvoice && lstInvoice.length > 0)\r\n            isView = true;\r\n          let lstInv = [];\r\n          ids.forEach(id => {\r\n            let inv = rs.data.licenses.filter(p => p.id == id)[0];\r\n            lstInv.push(inv);\r\n          });\r\n          const initialState = {\r\n            isView: isView,\r\n            data: lstInv,\r\n            configs: this.configs,\r\n          };\r\n          this.bsModalRef = this.modalService.show(VoucherCancelComponent, {\r\n            class: 'modal-lg full-width', initialState, backdrop: 'static',\r\n            keyboard: false\r\n          });\r\n          this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalRef.content.isView) {\r\n              this.loadList(this.paramSearch);\r\n            }\r\n          });\r\n        }, err => {}, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n    else\r\n      Library.notify('Bạn không thể hủy hóa đơn này', 'error');\r\n\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình tải hóa đơn sẽ dừng lại nếu bạn đóng cửa sổ này?\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n  calculateFilterExpression(filterValue, selectedFilterOperation) {\r\n    selectedFilterOperation = \"contains\"; //Helper.multilfilterColumn;\r\n    return [[\"template_code_temp\", selectedFilterOperation || '=', filterValue], 'or', [\"license_series_temp\", selectedFilterOperation || '=', filterValue]];\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.BUTTON.cancel_vouchers}}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid\\r\\n    id=\\\"invoiceHistoryGrid\\\"\\r\\n    [dataSource]=\\\"dataSource\\\"\\r\\n    [showBorders]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\"\\r\\n    (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n    (onCellPrepared)=\\\"onCellPrepared($event)\\\"\\r\\n    [showRowLines]=\\\"true\\\">\\r\\n    <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n    <!-- Số chứng từ -->\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"license_number\\\"\\r\\n              caption=\\\"{{ 'CONTROLL.LABEL.vehicle_license_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n              alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Mẫu số, ký hiệu -->\\r\\n    <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Ngày chứng từ -->\\r\\n    <dxi-column dataField=\\\"license_date\\\" caption=\\\"{{ 'CONTROLL.LABEL.invoice_voucher' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n              format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Mã số thuế -->\\r\\n     <dxi-column dataField=\\\"taxpayers_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Tên người nộp thuế -->\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.taxpayer_name' | translate }}\\\"\\r\\n              alignment=\\\"left\\\" minWidth=\\\"200\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Tổng tiền -->\\r\\n    <dxi-column dataField=\\\"amount_personal_income_still_received\\\" caption=\\\"{{ 'GRID.INVOICE.amount_personal_income_still_received' | translate }}\\\" alignment=\\\"right\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\" [allowEditing]=\\\"false\\\" dataType=\\\"number\\\" format=\\\"0,###.##\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Ngày hủy -->\\r\\n    <dxi-column dataField=\\\"destroy_date\\\"\\r\\n                caption=\\\"{{ 'GRID.INVOICE.date_cancel' | translate }}\\\" [editorOptions]=\\\"{ placeholder: 'dd/MM/yyyy',useMaskBehavior:true }\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"left\\\" minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Lý do hủy -->\\r\\n    <dxi-column dataField=\\\"destroy_reason\\\"\\r\\n                caption=\\\"{{_translate.CONTROLL.LABEL.destroy_reason}}\\\" alignment=\\\"left\\\" minWidth=\\\"150\\\">\\r\\n    </dxi-column>\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template_code }}</p>\\r\\n      <p>{{ d.data.license_series }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.license_number }}</a>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.taxpayers_name }}</p>\\r\\n      <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.taxpayers_name || _translate.GRID.INVOICE.invoice_wait_for_sign }}</p>\\r\\n    </div>\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button disableDoubleClick *ngIf=\\\"!isView\\\" text=\\\"{{_translate.CONTROLL.BUTTON.save }}\\\" (click)=\\\"xoaBo()\\\" icon=\\\"{{_translate.ICONS.save }}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\">\\r\\n  </dx-button>\\r\\n   <!-- Đóng -->\\r\\n   <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back }}\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".gach-chan{text-decoration:underline}.img-upload-second{text-align:center}.img-upload-second i{margin-top:10px;width:40px;height:auto;cursor:pointer}.img-upload-second p{margin-top:10px}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { Base64 } from 'js-base64';\r\nimport * as moment from 'moment';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\n\r\nimport { Library, SocketService, AuthService, Helper, VStringService, sEnum } from '@core/index';\r\nimport { HandleVoucherService } from '@modules/handle-voucher/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String, StringBuilder } from 'typescript-string-operations';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { pattern } from '@config/index';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { VoucherService } from '@modules/vouchers/shared';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport * as _ from 'lodash';\r\n@Component({\r\n  selector: 'app-voucher-cancel',\r\n  templateUrl: './voucher-cancel.component.html',\r\n  styleUrls: ['./voucher-cancel.component.scss']\r\n})\r\nexport class VoucherCancelComponent implements OnInit {\r\n\r\n  data: any;\r\n  isView: any;\r\n  configs: any;\r\n  invoices: any;\r\n  invoicesStore: ArrayStore;\r\n  dataSource: DataSource;\r\n  ioSignature: any;\r\n  _language: string;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  _translate: any;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  nodeSign: any;\r\n  countReport: any;\r\n  emailPattern: any = pattern.email;\r\n  infoDangKy: any;\r\n  isTT78: boolean = false;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private socketService: SocketService,\r\n    private handleVoucherService: HandleVoucherService,\r\n    private authService: AuthService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private voucher_service: VoucherService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n  ngOnInit() {\r\n    this.invoicesStore = new ArrayStore({\r\n      key: 'id',\r\n      data: this.data\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoicesStore\r\n    });\r\n    if (this.infoDangKy && this.infoDangKy.id) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n        this.isTT78 = true;\r\n    }\r\n    // this.invoicesStore.load().then((dataSource) => {\r\n    //   dataSource.forEach((item, index) => {\r\n    //     item.doc_relate_symbol = this.createDocRelateNumber();\r\n    //   });\r\n    // });\r\n    this.connectWebsocket();\r\n  }\r\n  createDocRelateNumber() {\r\n    let number_report = \"\";\r\n    if (this.countReport < 10)\r\n      number_report = '0' + this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    else\r\n      number_report = this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    this.countReport++;\r\n    return number_report;\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          let i = this.invoiceIndex;\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content, this.invoices[i]);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.invoices[i].issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat(this.invoices[i]);\r\n          } else {\r\n            this.invoices[i].invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoices[i].invoice_files.length) {\r\n              this.xuLiApiKhiXuat(this.invoices[i]);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  _validGrid() {\r\n    let invalid = true;\r\n    this.invoicesStore.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        item.doc_relate_date = item.doc_relate_date ? moment(item.doc_relate_date).format('YYYY-MM-DD') : item.doc_relate_date;\r\n        item.destroy_date = item.destroy_date ? moment(item.destroy_date).format('YYYY-MM-DD') : item.destroy_date;\r\n        if (!item.destroy_date && invalid) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.cancel_date + \" \" + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n          invalid = false;\r\n          return false;\r\n        } else {\r\n          let currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n          if (moment(item.destroy_date) > moment(currentDate) && invalid) {\r\n            Library.notify(this._translate.NOTIFY.date_cancel_invoice_not_greater_date_current, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          let invoice_date = moment(item.license_date).format('YYYY-MM-DD');\r\n          if (moment(item.destroy_date) < moment(invoice_date) && invalid) {\r\n            Library.notify(this._translate.NOTIFY.date_cancel_invoice_greater_or_equal_date_invoice, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n        }\r\n        if (!item.destroy_reason && invalid) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.reason_cancels + \" \" + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_reason'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n        if (item.buyer_email && !this.emailPattern.test(item.buyer_email) && invalid) {\r\n          Library.notify('Email ' + this._translate.VALIDATION.not_pattern, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'buyer_email'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n      });\r\n    });\r\n    return invalid;\r\n  }\r\n\r\n  xoaBo() {\r\n    if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n      Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      if (this._validGrid()) {\r\n        Library.confirmVA(this._translate.CONFIRM.acction_function, this._translate.NOTIFY.notify, () => {\r\n          this.showPopup = true;\r\n          this.invoicesStore.load().then((dataSource) => {\r\n            if (dataSource.length > 0) {\r\n              this.invoices = dataSource.filter(p => p.adjustment_type != '7');\r\n              this.totalInvoice = this.invoices.length;\r\n              this.invoiceIndex = 0;\r\n              this.tempKiFile = 0;\r\n              this.xuatHoaDon();\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    let i = this.invoiceIndex;\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat(this.invoices[i]);\r\n    } else {\r\n      let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n      this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", '', true, \"\", true);\r\n    }\r\n  }\r\n  xuLiApiKhiXuat(invoice) {\r\n    let tempTemplate = invoice.template;\r\n    delete invoice.template;\r\n    let xmlInvoice = \"\";\r\n    let data = {\r\n      id: invoice.id,\r\n      adjustment_type: \"7\",\r\n      destroy_reason: invoice.destroy_reason,\r\n      email: invoice.buyer_email,\r\n      date: invoice.destroy_date\r\n    };\r\n    let sub = this.handleVoucherService.getXmlString(data).subscribe(rs => {\r\n      invoice.template = tempTemplate;\r\n      if (rs.status == 'success') {\r\n        xmlInvoice = rs.data.license.xml_string;\r\n        let sign_date = moment(rs.data.license.license_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        this.nodeSign = \"//CTu/DSCKS/TCTTNhap\";\r\n        if (xmlInvoice != \"\") {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n          else {\r\n            this.xuLyKiFile(xmlInvoice, sign_date);\r\n          }\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'LicenseData', \"\", true, \"\", true);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string, invoice) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    this.subXuatHoaDon = this.handleVoucherService.cancelInvoice({\r\n      license: {\r\n        id: invoice.id,\r\n        destroy_reason: invoice.destroy_reason,\r\n        destroy_date: invoice.destroy_date,\r\n        xml_string: xml_string\r\n      }\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.valueProgress += percentComplete;\r\n        this.tempKiFile = 0;\r\n        invoice.adjustment_type = '7';\r\n        if (this.invoiceIndex < this.totalInvoice - 1) {\r\n          this.invoiceIndex++;\r\n          this.xuatHoaDon();\r\n        } else if (this.invoiceIndex == this.totalInvoice - 1) {\r\n          Library.notify(this._translate.NOTIFY.cancel_invoice_done, 'success');\r\n          this.isView = true;\r\n          setTimeout(() => {\r\n            this.showPopup = false;\r\n          }, 300);\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n    // document.getElementById(\"file-dinh-kem\").click();\r\n    // console.log(e)\r\n\r\n  }\r\n  choseFile(evt) {\r\n    //evt.srcElement.firstChild.click();\r\n    document.getElementById(\"file-input\").click();\r\n  }\r\n  fileChanged(e) {\r\n    setTimeout(() => {\r\n      //let rowIndex = e.target.dataset.rowindex;\r\n      let fileAttachData: Array<any> = [];\r\n      let fileReader = new FileReader();\r\n      let file = e.target.files[0];\r\n      let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n      // console.log(file)\r\n      if (pattFile.test(file.name)) {\r\n        fileReader.readAsDataURL(file);\r\n        fileReader.onload = (e) => {\r\n          let base64result = fileReader.result.toString().split(',')[1];\r\n          fileAttachData.unshift({\r\n            type: \"DK\",\r\n            file_name: file.name,\r\n            file_content: base64result,\r\n          });\r\n          // if (document.getElementById('list-file')) {\r\n          //   document.getElementById('list-file').scrollTop = 0;\r\n          // }\r\n          let _lstAttach: any = [];\r\n          _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n          if (_lstAttach == null) {\r\n            _lstAttach = [];\r\n          } else {\r\n            _lstAttach.push(fileAttachData[0]);\r\n          }\r\n          this.dataSource[0][\"invoice_files\"] = _lstAttach;\r\n          // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n          //this.dataSource.reload();\r\n        }\r\n      } else {\r\n        Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n      }\r\n    }, 200);\r\n  }\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let test = fileReader.result;\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"DK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.invoicesStore.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (index == rowIndex)\r\n              item.invoice_files = fileAttachData;\r\n          });\r\n        });\r\n        // this.dataSource[rowIndex][\"invoice_files\"] = fileAttachData;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_content\"] = base64result;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n  removeFile(i) {\r\n    let _lstAttach: any = [];\r\n    _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n    _lstAttach.splice(i, 1);\r\n  }\r\n  downloadFile(data) {\r\n    var re = /(?:\\.([^.]+))?$/;\r\n    var fileType = re.exec(data.file_name)[1];\r\n    Helper.dowloadFile(data.file_name, fileType, data.file_content);\r\n  }\r\n\r\n  xuatMauBienBan(data) {\r\n    if (this._validGrid()) {\r\n      Library.showloading();\r\n      let inv = Object.assign({}, data);\r\n      inv.adjustment_type = \"1\";\r\n      inv.auto_value_price = inv.auto_value_price == null ? false : inv.auto_value_price;\r\n      inv.invoice_files = [];\r\n      inv.doc_relate_date = moment(data.doc_relate_date).format('YYYY-MM-DD');\r\n      this.vatService.xuatMauBienBan(inv).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let file = rs.data.invoice;\r\n          Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n  viewDetailInvoice(data) {\r\n    if (data) {\r\n      const ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      }\r\n      if (this.configs.system_parameter.view_multi_invoice) {\r\n        let data = this.voucher_service.taodulieuXemMau(ids);\r\n        data['configs'] = _.cloneDeep(sEnum.cauhinhxemmau.chungtu);\r\n        this.vPreviewInvService.xemMau(data);\r\n      }\r\n      else {\r\n        const initialState = {\r\n          items: ids,\r\n          isXuatHD: false,\r\n          hinhthucxuat: '',\r\n          typeAction: sEnum.typeCode.xem_chung_tu\r\n        };\r\n        this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n  dong() {\r\n    this.bsModalRef.hide();\r\n    this.router.navigate(['/system/handle-vouchers/']);\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'destroy_date' || e.dataField === 'destroy_reason') {\r\n        if (this.isView || e.row.data.adjustment_type == \"7\")\r\n          e.editorOptions.disabled = true;\r\n      }\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      /* Bôi đỏ các trường bắt buộc */\r\n      if (e.column.dataField == \"destroy_date\") {\r\n        if (!e.data.destroy_date) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.CONTROLL.LABEL.cancel_date + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n        else {\r\n          let currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n          let license_date = moment(e.data.license_date).format('YYYY-MM-DD');\r\n          let destroy_date = moment(e.data.destroy_date).format('YYYY-MM-DD');\r\n          if (moment(destroy_date) > moment(currentDate)) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = this._translate.NOTIFY.date_cancel_invoice_not_greater_date_current;\r\n          }\r\n          if (moment(destroy_date) < moment(license_date)) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = this._translate.NOTIFY.date_cancel_invoice_greater_or_equal_date_invoice;\r\n          }\r\n        }\r\n      }\r\n      if (e.column.dataField == \"destroy_reason\") {\r\n        if (!e.data.destroy_reason) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.CONTROLL.LABEL.reason_cancels + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n      }\r\n      if (e.column.dataField == \"buyer_email\") {\r\n        if (e.data.buyer_email && !this.emailPattern.test(e.data.buyer_email)) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = 'Email ' + this._translate.VALIDATION.not_pattern;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IndexComponent } from './components/index/index.component';\r\nconst routes: Routes = [\r\n  {path: '', component: IndexComponent},\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HandleVoucherRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { HandleVoucherRoutingModule } from './handle-voucher-routing.module';\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { VoucherCancelComponent } from './components/voucher-cancel/voucher-cancel.component';\r\n\r\nimport {devextremeModule} from '@core/index';\r\nimport { vTranslateModule } from '@core/module/v-translate.module';\r\nimport { DxFormModule, DxPopoverModule } from 'devextreme-angular';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport {SharedModule, VatSharedModule, SomeModule,NotifySuccessComponent} from '@shared/index';\r\nimport {VatDeactivateGuard} from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { SignatureOffComponent, SendListVoucherComponent, LogProcessVoucherComponent } from '@shared/index';\r\nimport {VatService} from '@modules/vat/shared';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    HandleVoucherRoutingModule,\r\n    SharedModule,\r\n    devextremeModule,\r\n    vTranslateModule,\r\n    DxPopoverModule,\r\n    NgxSpinnerModule,\r\n    VatSharedModule,\r\n    SomeModule,\r\n    ReactiveFormsModule,\r\n    DxFormModule,\r\n    NgxPaginationModule,\r\n    NgxSpinnerModule,\r\n  ],\r\n  entryComponents: [\r\n    VoucherCancelComponent,\r\n    ViewInvoiceMultipageComponent\r\n  ],\r\n  declarations: [\r\n    IndexComponent,\r\n    VoucherCancelComponent\r\n  ],\r\n  providers: [\r\n    VatDeactivateGuard,\r\n    ConfirmService,\r\n    VatService\r\n  ]\r\n})\r\nexport class HandleVoucherModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Helper, Library, VStringService } from '@core/index';\r\nimport { ApiService } from '@core/services';\r\nimport * as moment from 'moment';\r\nimport { forkJoin } from 'rxjs';\r\nimport { finalize, map } from 'rxjs/operators';\r\n// import * as _ from 'lodash';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class HandleVoucherService {\r\n  currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n  data: any;\r\n  isCopy: boolean = false;\r\n  constructor(private apiService: ApiService) { }\r\n  /*  */\r\n  getAll(params?) {\r\n    const includes = '&options[is_view_index]=1&options[type_list_name]=XU_LY_CHUNG_TU';\r\n    const filter_string = '&filter_groups[1][or]=true&filter_groups[1][filters][0][key]=originInvoiceExported&filter_groups[1][filters][0][value]=true&filter_groups[1][filters][0][operator]=eq&filter_groups[1][filters][1][key]=adjustment_type&filter_groups[1][filters][1][value]=1&filter_groups[1][filters][1][operator]=eq&filter_groups[1][filters][1][not]=true';\r\n    let filter = filter_string;\r\n    if (params) {\r\n      filter += '&' + params;\r\n    }\r\n    const fields = Helper.danh_sach_truong.chung_tu;\r\n    const sort = '&sort[0][key]=status_order&sort[0][direction]=ASC';\r\n    return this.apiService.getDataTable('/licenses', includes + fields + filter, sort);\r\n  }\r\n  /*  */\r\n  ghiTam(data, license_number: boolean = false) {\r\n    const url = license_number ? '/licenses?options[license_number]=1' : '/licenses';\r\n    return this.apiService.post(url, { license: data });\r\n  }\r\n  /*  */\r\n  xuatChungTu(data) {\r\n    return this.apiService.post('/licenses-export', { license: data });\r\n  }\r\n  /*  */\r\n  edit(id, data, license_number: boolean = false) {\r\n    const url = license_number ? `/licenses/${id}?options[license_number]=1` : `/licenses/${id}`;\r\n    return this.apiService.put(url, { license: data });\r\n  }\r\n  /*  */\r\n  xuatChoKy(data) {\r\n    if (data.id) {\r\n      return this.apiService.put(`/licenses/${data.id}?options[license_number]=1&options[sign_later]=1`, { license: data });\r\n    }\r\n    return this.apiService.post('/licenses?options[license_number]=1&options[sign_later]=1', { license: data });\r\n  }\r\n  /*  */\r\n  preview(data) {\r\n    return this.apiService.post('/licenses-preview', {\r\n      licenses: [\r\n        data\r\n      ]\r\n    });\r\n  }\r\n  /*  */\r\n  view(id) {\r\n    return this.apiService.post('/licenses-view', { license: { ids: [id] } });\r\n  }\r\n  /*  */\r\n  getInvoiceResolver(loaiHoaDon) {\r\n    let _arrOut = [];\r\n    _arrOut.push(\r\n      this.apiService.get(`/templates?filter_groups[1][filters][1][key]=invoice_type&filter_groups[1][filters][1][value]=${loaiHoaDon}&filter_groups[1][filters][1][operator]=eq&filter_groups[2][filters][2][key]=status&filter_groups[2][filters][2][value]=HOAT_DONG&filter_groups[2][filters][2][operator]=eq`),\r\n    );\r\n    return _arrOut;\r\n  }\r\n  /*  */\r\n  showVoucherResolver(id, loaiHoaDon) {\r\n    let _arrOut = [];\r\n    _arrOut.push(\r\n      this.apiService.get('/licenses/' + id + '?includes[]=license_files&includes[]=license_options')\r\n    );\r\n    _arrOut.push(\r\n      this.apiService.get(`/templates?filter_groups[1][filters][1][key]=invoice_type&filter_groups[1][filters][1][value]=${loaiHoaDon}&filter_groups[1][filters][1][operator]=eq&filter_groups[2][filters][2][key]=status&filter_groups[2][filters][2][value]=HOAT_DONG&filter_groups[2][filters][2][operator]=eq`),\r\n    );\r\n    return _arrOut;\r\n  }\r\n  /*  */\r\n  delete(id) {\r\n    return this.apiService.delete('/licenses/' + id);\r\n  }\r\n  /*  */\r\n  xemChungTuImport(ids) {\r\n    return this.apiService.post('/licenses-view', { license: { ids: ids } });\r\n  }\r\n  /*  */\r\n  xuatChungTuPdf(ids) {\r\n    return this.apiService.post('/licenses/export-file-zip-pdf', { license: ids });\r\n  }\r\n  /*  */\r\n  xuatCTXml(ids) {\r\n    return this.apiService.post('/licenses/export-file-zip-xml', { license: ids });\r\n  }\r\n  /*  */\r\n  layDanhSachChungTu(ids) {\r\n    let ids_temp = [...ids];\r\n    const includes = '&options[type_list_name]=XU_LY_CHUNG_TU';\r\n    let arr = [];\r\n    while (ids_temp.length > 0) {\r\n      let arrIds = ids_temp.splice(0, 20);\r\n      let param = '&filter_groups[0][or]=true';\r\n      arrIds.forEach((id, index) => {\r\n        param += `&sort[0][key]=license_number&sort[0][direction]=ASC&filter_groups[0][filters][${index}][key]=id&filter_groups[0][filters][${index}][value]=${id}&filter_groups[0][filters][${index}][operator]=eq`;\r\n      });\r\n      arr.push(this.apiService.get('/licenses?' + includes + param));\r\n    }\r\n    return forkJoin(arr).pipe(\r\n      map(value => {\r\n        let kq = {\r\n          status: 'error',\r\n          code: 'error',\r\n          data: {\r\n            status: '',\r\n            licenses: [],\r\n            meta: {total: 0}\r\n          }\r\n        }\r\n        value.forEach(item => {\r\n          if(item.status === 'success') {\r\n            kq.status = item.status;\r\n            kq.code = item.code;\r\n            kq.data.status = item.data.status;\r\n            kq.data.meta.total = kq.data.meta.total + item.data.meta.total;\r\n            kq.data.licenses = [...kq.data.licenses, ...item.data.licenses];\r\n          }\r\n        })\r\n        return kq;\r\n      }),\r\n      finalize(() => Library.hideloading())\r\n    )\r\n  }\r\n\r\n  sendMail(data) {\r\n    return this.apiService.post('/license-send-mail', { licenses: data });\r\n  }\r\n\r\n  getVoucherProccess(license_id) {\r\n    return this.apiService.get(`/license-process?includes[]=user&filter_groups[0][filters][0][key]=license_id&filter_groups[0][filters][0][value]=${license_id}&filter_groups[0][filters][0][operator]=eq&sort[0][key]=process_time&sort[0][direction]=DESC`);\r\n  }\r\n\r\n  getXmlString(data) {\r\n    return this.apiService.post('/licenses/get-xml', { license: data });\r\n  }\r\n\r\n  cancelInvoice(data) {\r\n    return this.apiService.post('/licenses-cancel', data);\r\n  }\r\n}","export * from './handle-voucher.service';","import {Injectable} from '@angular/core';\r\nimport {CanDeactivate} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\n\r\nexport interface CanComponentDeactivate {\r\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VatDeactivateGuard implements CanDeactivate<CanComponentDeactivate> {\r\n\r\n  canDeactivate(component: CanComponentDeactivate) {\r\n    return component.canDeactivate && component.canDeactivate();\r\n  }\r\n}\r\n"],"sourceRoot":""}