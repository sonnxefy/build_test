{"version":3,"sources":["webpack:///./node_modules/rxjs-compat/_esm5/add/observable/forkJoin.js","webpack:///./src/app/core/library/invoice/my-bsmodel.service.ts","webpack:///./src/app/modules/handle-invoice/components/adjust-multiple/adjust-multipl-form-invoice/adjust-multipl-form-invoice.component.html","webpack:///./src/app/modules/handle-invoice/components/adjust-multiple/adjust-multipl-form-invoice/adjust-multipl-form-invoice.component.scss","webpack:///./src/app/modules/handle-invoice/components/adjust-multiple/adjust-multipl-form-invoice/adjust-multipl-form-invoice.component.ts","webpack:///./src/app/modules/handle-invoice/components/adjust-multiple/adjust-multipl-invoice/adjust-multipl-invoice.component.html","webpack:///./src/app/modules/handle-invoice/components/adjust-multiple/adjust-multipl-invoice/adjust-multipl-invoice.component.scss","webpack:///./src/app/modules/handle-invoice/components/adjust-multiple/adjust-multipl-invoice/adjust-multipl-invoice.component.ts","webpack:///./src/app/modules/handle-invoice/components/adjust-multiple/adjust-multipl-product-grip/adjust-multipl-product-grip.component.html","webpack:///./src/app/modules/handle-invoice/components/adjust-multiple/adjust-multipl-product-grip/adjust-multipl-product-grip.component.scss","webpack:///./src/app/modules/handle-invoice/components/adjust-multiple/adjust-multipl-product-grip/adjust-multipl-product-grip.component.ts","webpack:///./src/app/modules/handle-invoice/components/adjust/adjust-form-invoice/adjust-form-invoice.component.html","webpack:///./src/app/modules/handle-invoice/components/adjust/adjust-form-invoice/adjust-form-invoice.component.scss","webpack:///./src/app/modules/handle-invoice/components/adjust/adjust-form-invoice/adjust-form-invoice.component.ts","webpack:///./src/app/modules/handle-invoice/components/adjust/adjust-invoice/adjust-invoice.component.html","webpack:///./src/app/modules/handle-invoice/components/adjust/adjust-invoice/adjust-invoice.component.scss","webpack:///./src/app/modules/handle-invoice/components/adjust/adjust-invoice/adjust-invoice.component.ts","webpack:///./src/app/modules/handle-invoice/components/adjust/adjust-product-grip/adjust-product-grip.component.html","webpack:///./src/app/modules/handle-invoice/components/adjust/adjust-product-grip/adjust-product-grip.component.scss","webpack:///./src/app/modules/handle-invoice/components/adjust/adjust-product-grip/adjust-product-grip.component.ts","webpack:///./src/app/modules/handle-invoice/components/choose-hdck/choose-hdck.component.html","webpack:///./src/app/modules/handle-invoice/components/choose-hdck/choose-hdck.component.scss","webpack:///./src/app/modules/handle-invoice/components/choose-hdck/choose-hdck.component.ts","webpack:///./src/app/modules/handle-invoice/components/index/index.component.html","webpack:///./src/app/modules/handle-invoice/components/index/index.component.scss","webpack:///./src/app/modules/handle-invoice/components/index/index.component.ts","webpack:///./src/app/modules/handle-invoice/components/remove/remove.component.html","webpack:///./src/app/modules/handle-invoice/components/remove/remove.component.scss","webpack:///./src/app/modules/handle-invoice/components/remove/remove.component.ts","webpack:///./src/app/modules/handle-invoice/components/replace/replace-form-invoice/replace-form-invoice.component.html","webpack:///./src/app/modules/handle-invoice/components/replace/replace-form-invoice/replace-form-invoice.component.scss","webpack:///./src/app/modules/handle-invoice/components/replace/replace-form-invoice/replace-form-invoice.component.ts","webpack:///./src/app/modules/handle-invoice/components/replace/replace-invoice/replace-invoice.component.html","webpack:///./src/app/modules/handle-invoice/components/replace/replace-invoice/replace-invoice.component.scss","webpack:///./src/app/modules/handle-invoice/components/replace/replace-invoice/replace-invoice.component.ts","webpack:///./src/app/modules/handle-invoice/components/replace/replace-product-grip/replace-product-grip.component.html","webpack:///./src/app/modules/handle-invoice/components/replace/replace-product-grip/replace-product-grip.component.scss","webpack:///./src/app/modules/handle-invoice/components/replace/replace-product-grip/replace-product-grip.component.ts","webpack:///./src/app/modules/handle-invoice/components/report-adjust-inv/report-adjust-inv.component.html","webpack:///./src/app/modules/handle-invoice/components/report-adjust-inv/report-adjust-inv.component.scss","webpack:///./src/app/modules/handle-invoice/components/report-adjust-inv/report-adjust-inv.component.ts","webpack:///./src/app/modules/handle-invoice/components/report-cancel-inv/report-cancel-inv.component.html","webpack:///./src/app/modules/handle-invoice/components/report-cancel-inv/report-cancel-inv.component.scss","webpack:///./src/app/modules/handle-invoice/components/report-cancel-inv/report-cancel-inv.component.ts","webpack:///./src/app/modules/handle-invoice/components/report-tax-invoice-error/report-tax-invoice-error.component.html","webpack:///./src/app/modules/handle-invoice/components/report-tax-invoice-error/report-tax-invoice-error.component.scss","webpack:///./src/app/modules/handle-invoice/components/report-tax-invoice-error/report-tax-invoice-error.component.ts","webpack:///./src/app/modules/handle-invoice/components/send-invoices/send-invoices.component.html","webpack:///./src/app/modules/handle-invoice/components/send-invoices/send-invoices.component.scss","webpack:///./src/app/modules/handle-invoice/components/send-invoices/send-invoices.component.ts","webpack:///./src/app/modules/handle-invoice/components/send-mail/send-mail.component.html","webpack:///./src/app/modules/handle-invoice/components/send-mail/send-mail.component.scss","webpack:///./src/app/modules/handle-invoice/components/send-mail/send-mail.component.ts","webpack:///./src/app/modules/handle-invoice/handle-invoice.module.ts","webpack:///./src/app/modules/handle-invoice/handle-invoice.routing.ts","webpack:///./src/app/modules/handle-invoice/shared/adjust-multiple-invoice.resolver.ts","webpack:///./src/app/modules/handle-invoice/shared/show-adjust-multiple-invoice.resolver.ts","webpack:///./src/app/modules/info-unit/shared/index.ts","webpack:///./src/app/modules/info-unit/shared/info-unit.resolver.ts","webpack:///./src/app/modules/info-unit/shared/info-unit.service.ts","webpack:///./src/app/modules/info-unit/shared/info-unit.ts","webpack:///./src/app/modules/vat/deactivate/vat-deactivate.guard.ts","webpack:///./src/app/shared/router/router-library.service.ts"],"names":[],"mappings":"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","file":"handle-invoice-handle-invoice-module~handle-invoice-student-handle-invoice-student-module.js","sourcesContent":["import { Observable, forkJoin as staticForkJoin } from 'rxjs';\nObservable.forkJoin = staticForkJoin;\n//# sourceMappingURL=forkJoin.js.map","import { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nexport class MyBsModalService extends BsModalService {\r\n    \r\n}","module.exports = \"<div class=\\\"row invoice-form\\\">\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Mẫu hóa đơn -->\\r\\n        <dxi-item dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Hình thức điều chỉnh, loại điều chỉnh -->\\r\\n        <dxi-item *ngIf=\\\"isAdjustInv\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"adjustment_form\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.adjustment_form}\\\"\\r\\n            editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.adjustment_forms, onValueChanged: adjustmentFormChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.adjustment_form}} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"adjustment_object\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.adjustment_object}\\\"\\r\\n            editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.adjustment_objects, onValueChanged: adjustmentObjectChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.adjustment_object}} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày hóa đơn, số hóa đơn -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"invoice_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n            [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_date }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item cssClass=\\\"vat invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\" editorType=\\\"dxNumberBox\\\"\\r\\n            [editorOptions]=\\\"{ disabled: true}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Loại tiền, tỷ giá -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"currency_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.currency_code }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"currency_rate\\\" editorType=\\\"dxNumberBox\\\"\\r\\n            [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: '0,###.##'}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.currency_rate }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Hình thức thanh toán, hình thức xuất -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"payment_method_name\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_method }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.payment_method }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item name=\\\"ht-xuat\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_form }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-select-box [(value)]=\\\"frmData.status\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\"\\r\\n                [disabled]=\\\"!configs.system_parameter.allow_keep_invoice_number\\\"></dx-select-box>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Tên ngân hàng -->\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.bank_name}\\\" dataField=\\\"bank_name\\\"\\r\\n          [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Số bảng kê, ngày bảng kê -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"list_number\\\" [editorOptions]=\\\"{disabled: tod.buyer_address}\\\">\\r\\n            <dxo-label text=\\\"Số bảng kê\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"list_date\\\" [template]=\\\"'notifydate'\\\">\\r\\n            <dxo-label text=\\\"Ngày bảng kê\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Loại hóa đơn gốc -->\\r\\n        <dxi-item [visible]=\\\"isProcessInvOriginOther\\\" dataField=\\\"invoice_origin.relate_xml_type\\\"\\r\\n          editorType=\\\"dxSelectBox\\\" cssClass=\\\"vat1 layout_input\\\"\\r\\n          [editorOptions]=\\\"{items: typeInvoices, displayExpr: 'name', valueExpr: 'code', disabled: disableTemplateInput(), readOnly: isHoaDonGoc}\\\">\\r\\n          <dxo-label text=\\\"{{oCaption.loai_hd_goc}}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ oCaption.loai_hd_goc }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Mẫu số, ký hiệu hóa đơn gốc -->\\r\\n        <dxi-item [visible]=\\\"isProcessInvOriginOther\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Mẫu số hóa đơn gốc -->\\r\\n          <dxi-item cssClass=\\\"in-hoa vat1 layout_input\\\" dataField=\\\"invoice_origin.relate_template_code\\\"\\r\\n            [editorOptions]=\\\"{disabled: disableTemplateInput(), onValueChanged: templateCodeChanged,readOnly: isHoaDonGoc}\\\">\\r\\n            <dxo-label text=\\\"{{oCaption.mau_so_hd_goc}}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ oCaption.mau_so_hd_goc }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <!-- Ký hiệu hóa đơn gốc -->\\r\\n          <dxi-item dataField=\\\"invoice_origin.relate_invoice_series\\\"\\r\\n            [editorOptions]=\\\"{disabled: disableTemplateInput(),  onValueChanged: invoiceSeriesChanged,readOnly: isHoaDonGoc}\\\">\\r\\n            <dxo-label text=\\\"{{ oCaption.ky_hieu_hd_goc}}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ oCaption.ky_hieu_hd_goc }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Số hóa đơn, ngày hóa đơn gốc -->\\r\\n        <dxi-item [visible]=\\\"isProcessInvOriginOther\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Số hóa đơn gốc -->\\r\\n          <dxi-item cssClass=\\\"vat1 invoice-number-create-invoice layout_input\\\"\\r\\n            dataField=\\\"invoice_origin.relate_invoice_number\\\"\\r\\n            [editorOptions]=\\\"{ disabled: disableTemplateInput(),readOnly: isHoaDonGoc}\\\">\\r\\n            <dxo-label text=\\\"{{ oCaption.so_hd_goc }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ oCaption.so_hd_goc }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <!-- Ngày hóa đơn gốc -->\\r\\n          <dxi-item dataField=\\\"invoice_origin.relate_invoice_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n            [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableTemplateInput(),readOnly: isHoaDonGoc}\\\">\\r\\n            <dxo-label text=\\\"{{ oCaption.ngay_hd_goc }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ oCaption.ngay_hd_goc }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Lý do -->\\r\\n        <dxi-item dataField=\\\"destroy_reason\\\">\\r\\n          <dxo-label text=\\\"Lý do\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"note\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.note }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <div *dxTemplate=\\\"let d of 'notifydate'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.list_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\" [displayFormat]=\\\"'dd/MM/yyyy'\\\"\\r\\n          [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Xuất hóa đơn cho, nhóm khách hàng -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item cssClass=\\\"vat layout_input\\\" dataField=\\\"customer_object_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.customer_object_codes, displayExpr: 'name', valueExpr: 'code', onValueChanged: customer_object_codeChange}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_invoice_for }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"customer_type\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.customer_types, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_group }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Mã số thuế, mã khách hàng -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Mã số thuế -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='vat layout_input group-input-button'>\\r\\n            <dxi-item name=\\\"search-mst\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.tax_code }}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-autocomplete valueExpr=\\\"tax_code\\\"\\r\\n                  placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\" [dataSource]=\\\"tax_codes\\\"\\r\\n                  [(value)]=\\\"frmData.buyer_tax_code\\\" [readOnly]=\\\"readOnlyCacTruongConLai\\\"\\r\\n                  (onItemClick)=\\\"taxCodeChoose($event)\\\" (onFocusOut)=\\\"updateTaxcodeInfo($event)\\\"\\r\\n                  (onValueChanged)=\\\"changeTaxCode($event)\\\">\\r\\n                  <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                    <span>{{item.tax_code}}: {{ item.name }}</span>\\r\\n                  </div>\\r\\n                </dx-autocomplete>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <dxi-item cssClass='btn-small'>\\r\\n              <button (click)=\\\" searchTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n                <i class=\\\"{{_translate.ICONS.search}}\\\" style=\\\"font-size: 22px;\\\"></i>\\r\\n              </button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Mã khách hàng -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='vat layout_input group-input-button'>\\r\\n            <dxi-item name=\\\"search-mkh\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_code }}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-autocomplete valueExpr=\\\"code\\\"\\r\\n                  placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\"\\r\\n                  [dataSource]=\\\"customer_codes\\\" [(value)]=\\\"frmData.customer_code\\\" [readOnly]=\\\"readOnlyCacTruongConLai\\\"\\r\\n                  (onItemClick)=\\\"customerCodeChoose($event)\\\" (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n                  <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                    <span>{{item.code}}: {{ item.name }}</span>\\r\\n                  </div>\\r\\n                </dx-autocomplete>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <dxi-item cssClass='btn-small'>\\r\\n              <button (click)=\\\"editTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n                <i class=\\\"dx-icon fa fa-plus-circle icon-size\\\"></i>\\r\\n              </button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Tên đơn vị -->\\r\\n        <dxi-item cssClass=\\\"vat layout_input\\\" dataField=\\\"customer_name\\\"\\r\\n          [editorOptions]=\\\"{disabled: tod.customer_name, isRequired: false,onValueChanged: customerChanged}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Họ tên người mua, điện thoại di động -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item cssClass=\\\"vat layout_input\\\" dataField=\\\"buyer_name\\\"\\r\\n            [editorOptions]=\\\"{disabled: tod.buyer_name,onValueChanged: customerChanged}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.buyer_name }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"buyer_mobile\\\" [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.phone }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.phone }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Địa chỉ -->\\r\\n        <dxi-item cssClass=\\\"vat layout_input\\\" *ngIf=\\\"!configs.system_parameter.view_bank_account_seller\\\"\\r\\n          dataField=\\\"buyer_address\\\" [editorOptions]=\\\"{disabled: tod.buyer_address,onValueChanged: customerChanged}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Email -->\\r\\n        <dxi-item [label]=\\\"{text: 'Email'}\\\" cssClass=\\\"vat layout_input\\\"\\r\\n          [ngClass]=\\\"configs.system_parameter.view_bank_account_seller? 'vat layout_input' : ''\\\">\\r\\n          <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n            <div\\r\\n              class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n              <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                </app-tag-input-email>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n        <!-- Các trường cấu hình thêm -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.view_bank_account_seller\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item cssClass=\\\"vat layout_input\\\" dataField=\\\"buyer_address\\\"\\r\\n            [editorOptions]=\\\"{disabled: tod.buyer_address,onValueChanged: customerChanged}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.view_bank_account_seller\\\" dataField=\\\"seller_bank_account_number\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.list_bank_account_seller, onValueChanged: bankAccountSellerChange, displayExpr: 'name_display', valueExpr: 'code', showClearButton: true}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.seller_bank_account_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- nơi xuất hóa đơn -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.display_export_place\\\" dataField=\\\"export_place\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.export_places, onValueChanged: exportPlaceChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_place }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.display_export_place\\\" dataField=\\\"export_address\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_address }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.display_transport_number\\\" dataField=\\\"transport_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.transport_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.display_transport_number\\\" dataField=\\\"train_name\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.train_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- <dxi-item [visible]=\\\"isProcessInvOriginOther\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\"></dxi-item> -->\\r\\n        <!-- Loại hóa đơn gốc -->\\r\\n        <!-- Điều khoản giao hàng -->\\r\\n        <dxi-item dataField=\\\"delivery_terms\\\" *ngIf=\\\"configs.system_parameter.delivery_terms\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.delivery_terms }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Chứng từ tham chiếu -->\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONFIGS.vouchers_reference}\\\" dataField=\\\"license_number\\\"\\r\\n          *ngIf=\\\"configs.system_parameter.vouchers_reference\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Số S/O -->\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONFIGS.so_so }\\\" dataField=\\\"the_order\\\"\\r\\n          *ngIf=\\\"configs.system_parameter.invoice_the_order\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Thời hạn thanh toán -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"configs.system_parameter.payment_expire\\\">\\r\\n          <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_time }\\\" dataField=\\\"payment_expire\\\">\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Số phiếu xuất kho -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.receipts_no\\\" dataField=\\\"receipts_no\\\" [colCount]=\\\"1\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE.receipts_no }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày giao hàng -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.from_warehouse_date\\\" dataField=\\\"from_warehouse_date\\\"\\r\\n          [template]=\\\"'deliverydata'\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.delivery_date }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Xuất cho khách hàng -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.ship_receiving_name\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"ship_receiving_name\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONFIGS.ship_receiving_name }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Hình thức bán hàng -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"configs.system_parameter.form_sales\\\">\\r\\n          <dxi-item [label]=\\\"{text: _translate.CONFIGS.form_sales}\\\" dataField=\\\"sell_form\\\">\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!--Thông tin other_id -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.other_id\\\" dataField=\\\"other_id\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.other_id }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Địa chỉ nhận hàng -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.ship_receiving_address\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"ship_receiving_address\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONFIGS.ship_receiving_address }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <div *dxTemplate=\\\"let d of 'deliverydata'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.from_warehouse_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\"\\r\\n          [displayFormat]=\\\"'dd/MM/yyyy'\\\" [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n    <dx-form style=\\\"margin-top:7px\\\" [formData]=\\\"customerTempt\\\" [items]=\\\"formItems\\\" class=\\\"customer-tempt\\\">\\r\\n    </dx-form>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{_translate.CONFIRM.update_customer}}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{_translate.CONTROLL.LABEL.update}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \"::ng-deep .vat.invoice-number-create-invoice input{color:red;font-weight:bold}::ng-deep .in-hoa input{text-transform:uppercase}.icon-size{font-size:21px;padding:2px 0}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code:focus{outline:none}::ng-deep .vat.invoice-note input{color:#0070C0;font-weight:bold}::ng-deep .vat.layout_input span.dx-field-item-label-content{width:117px !important}::ng-deep .vat1.layout_input span.dx-field-item-label-content{width:144px !important}::ng-deep .layout_input_left span.dx-field-item-label-content{width:144px !important}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align .dx-field-item-label .dx-field-item-label-content{min-width:171px !important}\\n\"","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { ActivatedRoute, } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { pattern } from '@config/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { AddCustomerComponent } from '@shared/index';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { ChooseHdckComponent } from '@modules/handle-invoice/components/choose-hdck/choose-hdck.component';\r\n@Component({\r\n  selector: 'app-adjust-multipl-form-invoice',\r\n  templateUrl: './adjust-multipl-form-invoice.component.html',\r\n  styleUrls: ['./adjust-multipl-form-invoice.component.scss']\r\n})\r\nexport class AdjustMultiplFormInvoiceComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  routeSub: Subscription;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @Input() frmData: any;\r\n  @Input() type: any;\r\n  @Input() dataSource: any;\r\n  @Input() htHoaDonGoc: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() extentionGrid: any;\r\n  @Input() isShowButtonWaiteSign: boolean;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('onTemplateChange') onTemplateChange = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  @Output('adjustmentObjectChange') adjustmentObject = new EventEmitter<any>();\r\n  @Output('onTemplateTT78TypeChange') onTemplateTT78TypeChange = new EventEmitter<any>();\r\n  @Input() isTT78: boolean;\r\n  @Input() infoDangKy: any;\r\n  @Input() _oTemplateTT78: any;\r\n  originInvoiceNumber: any;\r\n  bsModalRef: BsModalRef;\r\n  select: any = {};\r\n  pattern = pattern;\r\n  tax_codes: any = [];\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  showTraLai = false;\r\n  disableInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuatOptions = [];\r\n  showPopup = false;\r\n  isHoaDonGoc = false;\r\n  customerCurent: any = {};\r\n  emails: any = [];\r\n  dataTaxCode: any;\r\n  tax_code_search: any;\r\n  configs: any = {};\r\n  private arrEmail: any = [];\r\n  listRoleBranchOrigin: Array<any>;\r\n  role_branch: boolean;\r\n  bsModalHdckRef: BsModalRef;\r\n  oCaption: any;\r\n  // thay đổi disable của 3 input customer_name, buyer_name, buyer_address\r\n  tod: any = {};\r\n  _translate: any;\r\n  formItems = [];\r\n  customForms = [];\r\n  customerTempt = {};\r\n  httpOptions = {\r\n    headers: new HttpHeaders({\r\n      'Authorization': `Bearer ${JSON.parse(localStorage.getItem('access_token')).value}`,\r\n      'TaxCode': JSON.parse(localStorage['currentUser']).account.tax_code,\r\n      'Content-Type': 'application/json',\r\n    })\r\n  };\r\n  isAdjustInv: boolean = false;\r\n  isProcessInvOriginOther: boolean = false;\r\n  typeInvoices: any;\r\n  mst_btn_options = {\r\n    text: '', icon: 'fa fa-plus-circle', type: 'default',\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n          if (customer.bank_account_number) {\r\n            this.frmData.bank_account_number = customer.bank_account_number;\r\n          }\r\n          if (customer.bank_name) {\r\n            this.frmData.bank_name = customer.bank_name;\r\n          }\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n    private http: HttpClient,\r\n    private listService: ListsService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.htHoaDonGoc == '4') {\r\n      this.isHoaDonGoc = true\r\n    } else {\r\n      this.isHoaDonGoc = false\r\n    }\r\n    this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate, this.frmData.status);\r\n    this.role_branch = this.listService.getDataConfigLocalStorage();\r\n\r\n    if (this.route.snapshot.queryParams['status'] === 'return') {\r\n      this.showTraLai = true;\r\n      this.frmData.nguoitralai = this.authService.getCurrentUser().user.name;\r\n      this.frmData.ngaytralai = moment(new Date()).format('YYYY-MM-DD');\r\n    }\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      const loaiDieuChinh = data.type;\r\n      if (loaiDieuChinh == \"dieu-chinh-nhieu\" || loaiDieuChinh == \"dieu-chinh-khac\") {\r\n        this.isAdjustInv = true;\r\n        if (loaiDieuChinh == \"dieu-chinh-khac\")\r\n          this.isProcessInvOriginOther = true;\r\n      }\r\n      else if (loaiDieuChinh == \"thay-the-khac\") {\r\n        this.isProcessInvOriginOther = true;\r\n      }\r\n      this.configs = this.authService.getConfigs();\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.currency_codes = danh_muc.DM_LOAI_TIEN ? danh_muc.DM_LOAI_TIEN.data : null;\r\n      this.select.customer_types = danh_muc.DM_NHOM_KHACH_HANG ? danh_muc.DM_NHOM_KHACH_HANG.data : null;\r\n      this.select.export_places = danh_muc.DM_NOI_XUAT_HOA_DON ? danh_muc.DM_NOI_XUAT_HOA_DON.data : null;\r\n      this.select.list_bank_account_seller = danh_muc.DM_TAI_KHOAN_NGAN_HANG ? danh_muc.DM_TAI_KHOAN_NGAN_HANG.data : null;\r\n      this.select.list_bank_account_seller.forEach(item => {\r\n        item.name_display = item.code + ': ' + item.name;\r\n      });\r\n\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        if (!this.frmData.id) {\r\n          temptTT78 = data.init[1];\r\n        }\r\n        else {\r\n          temptTT78 = data.init[3];\r\n        }\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (Number.parseInt(this.frmData.invoice_number) > 0) {\r\n            if (this.frmData.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.frmData.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n        if (this.frmData.id)\r\n          this.changeTemplateInvoice(this.frmData.invoice_date);\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n        if (!this.frmData.id) {\r\n          this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.release_status != 'DA_HUY_SO');\r\n        }\r\n      }\r\n    });\r\n    this.select.customer_object_codes = VSelectBoxService._customerObject(this._translate);\r\n    this.select.adjustment_forms = VSelectBoxService._adjustmentForms(this._translate);\r\n    //   this.select.adjustment_forms = this.select.adjustment_forms.filter(p=>p.code !==\"TANG_GIAM\");\r\n    this.select.adjustment_objects = [];\r\n    if (this.frmData.adjustment_form) {\r\n      this.adjustmentFormChange({ value: this.frmData.adjustment_form });\r\n    }\r\n    // Set disabled cho đơn vị tổ chức\r\n    this.setDisabledByCustomer_object_code(this.frmData.customer_object_code);\r\n\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          // Nếu là mẫu html\r\n          this.onTemplateChange.emit(item.is_multi_vat);\r\n          this.onTemplateTypeChange.emit(item);\r\n          if (item.fields && item.fields.length > 0) {\r\n            this.formItems = [];\r\n            this.customForms = [];\r\n            const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n            if (_arrayGrid && _arrayGrid.length > 0) {\r\n              this.extentionGrid.ma_hang = false;\r\n              this.extentionGrid.so_lo = false;\r\n              this.extentionGrid.han_dung = false;\r\n              this.extentionGrid.nuoc_san_xuat = false;\r\n              this.extentionGrid.don_hang_hop_dong = false;\r\n              for (let i = 0; i < _arrayGrid.length; i++) {\r\n                const column = _arrayGrid[i]['name'];\r\n                const value = _arrayGrid[i]['is_show'];\r\n                let _ma = VStringService._convertToViKdau(column);\r\n                this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n              }\r\n            }\r\n            const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n            if (_dulieumorong.length > 0) {\r\n              _dulieumorong.forEach(item1 => {\r\n                if (item1.is_show) {\r\n                  if (item1.data_type === 'chu') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxTextBox',\r\n                        dataField: item1.code,\r\n                        label: { text: item1.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'soluong') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxNumberBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'ngay') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxDateBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'danhmuc') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxSelectBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name }\r\n                      }\r\n                    );\r\n                  }\r\n                }\r\n              });\r\n              this.formItems.push(this.createCustomGroup());\r\n            }\r\n            if (this.frmData.invoice_options && this.frmData.invoice_options.length > 0) {\r\n              this.frmData.invoice_options.forEach(iteminv => {\r\n                this.customerTempt[iteminv.code] = iteminv.value;\r\n              });\r\n            } else {\r\n              _dulieumorong.forEach(item2 => {\r\n                this.customerTempt[item2.code] = item2.value;\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.frmData.invoice_release_id = \"\";\r\n          // Nếu là mẫu html\r\n          if (item.fields && item.fields.length > 0) {\r\n            this.formItems = [];\r\n            this.customForms = [];\r\n            const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n            if (_arrayGrid && _arrayGrid.length > 0) {\r\n              this.extentionGrid.ma_hang = false;\r\n              this.extentionGrid.so_lo = false;\r\n              this.extentionGrid.han_dung = false;\r\n              this.extentionGrid.nuoc_san_xuat = false;\r\n              this.extentionGrid.don_hang_hop_dong = false;\r\n              this.extentionGrid.ma_quan_ly = false;\r\n              for (let i = 0; i < _arrayGrid.length; i++) {\r\n                const column = _arrayGrid[i]['name'];\r\n                const value = _arrayGrid[i]['is_show'];\r\n                let _ma = VStringService._convertToViKdau(column);\r\n                this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n              }\r\n            }\r\n            const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n            if (_dulieumorong.length > 0) {\r\n              _dulieumorong.forEach(item1 => {\r\n                if (item1.is_show) {\r\n                  if (item1.data_type === 'chu') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxTextBox',\r\n                        dataField: item1.code,\r\n                        label: { text: item1.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'soluong') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxNumberBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'ngay') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxDateBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name },\r\n                        editorOptions: {\r\n                          onValueChanged: () => {\r\n                            this.changeItem(_dulieumorong);\r\n                          }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n                  if (item.data_type === 'danhmuc') {\r\n                    this.customForms.push(\r\n                      {\r\n                        editorType: 'dxSelectBox',\r\n                        dataField: item.code,\r\n                        label: { text: item.name }\r\n                      }\r\n                    );\r\n                  }\r\n                }\r\n              });\r\n              this.formItems.push(this.createCustomGroup());\r\n            }\r\n            if (this.frmData.invoice_options && this.frmData.invoice_options.length > 0) {\r\n              this.frmData.invoice_options.forEach(iteminv => {\r\n                this.customerTempt[iteminv.code] = iteminv.value;\r\n              });\r\n            } else {\r\n              _dulieumorong.forEach(item2 => {\r\n                this.customerTempt[item2.code] = item2.value;\r\n              });\r\n              this.frmData.invoice_options = _dulieumorong;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n    this.oCaption =\r\n    {\r\n      loai_hd_goc: this._translate.CONTROLL.LABEL.type + \" \" + this._translate.GRID.GENERAL.original_invoice.toLowerCase(),\r\n      mau_so_hd_goc: this._translate.GRID.INVOICE.template_code + \" \" + this._translate.CONTROLL.BUTTON.invoice_origin,\r\n      ky_hieu_hd_goc: this._translate.GRID.INVOICE.invoice_series + \" \" + this._translate.CONTROLL.BUTTON.invoice_origin,\r\n      so_hd_goc: this._translate.CONTROLL.LABEL.number + \" \" + this._translate.CONTROLL.BUTTON.invoice_origin,\r\n      ngay_hd_goc: this._translate.CONFIGS.day + \" \" + this._translate.CONTROLL.BUTTON.invoice_origin,\r\n    }\r\n    this.typeInvoices = VSelectBoxService.typeEInvoice(this._translate);\r\n  }\r\n\r\n  createForm() {\r\n    this.form.instance.beginUpdate();\r\n    this.form.instance.itemOption('business_addressa', { label: { text: 'Đia chỉaaa' }, editorOptions: { placeholder: 'Nhập địa chỉ' } });\r\n    this.form.instance.endUpdate();\r\n  }\r\n\r\n  async editTaxCode() {\r\n    this.listRoleBranchOrigin = [];\r\n    if (this.role_branch) {\r\n      const roleUser = await this.listService.getDataUserLocalStorege();\r\n      if (roleUser) {\r\n        this.listRoleBranchOrigin = await this.handleListRoleBranch(roleUser);\r\n      } else {\r\n        this.listRoleBranchOrigin = await this.listService.handleListRoleBranchUser();\r\n      }\r\n      if (Array.isArray(this.listRoleBranchOrigin) && this.listRoleBranchOrigin.length) {\r\n        if (this.listRoleBranchOrigin.length === 2) {\r\n          this.listRoleBranchOrigin = this.listRoleBranchOrigin.filter(value => {\r\n            if (value.code !== 'TAT_CA') {\r\n              value.checked = true;\r\n              return value;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n    const initialState = {\r\n      isVisibleGhiVaThemMoi: false,\r\n      role_branch: this.role_branch,\r\n      roleBranchStatus: this.listRoleBranchOrigin\r\n    };\r\n    this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n      class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const submodal = this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveData) {\r\n        const customer = this.bsModalRef.content.successSaveData;\r\n        this.frmData.customer_name = customer.name;\r\n        this.frmData.buyer_tax_code = customer.tax_code;\r\n        this.frmData.buyer_name = customer.contact_person_name;\r\n        this.frmData.buyer_address = customer.business_address;\r\n        this.frmData.customer_code = customer.code;\r\n        this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n        if (customer.email) {\r\n          this.frmData.buyer_email = customer.email;\r\n          this.emails = [];\r\n          const stringDataEmailGet = customer.email.split(';');\r\n          for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n            this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n          }\r\n        } else {\r\n          this.frmData.buyer_email = customer.email;\r\n          this.emails = [];\r\n        }\r\n        if (customer.bank_account_number) {\r\n          this.frmData.bank_account_number = customer.bank_account_number;\r\n        }\r\n        if (customer.bank_name) {\r\n          this.frmData.bank_name = customer.bank_name;\r\n        }\r\n      }\r\n      submodal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ////// Tạo form mở rộng\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '1',\r\n      items: this.customForms\r\n    };\r\n  }\r\n\r\n  updateCustomerInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  updateTaxcodeInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.tax_code) !== VStringService._getValueToString(this.frmData.buyer_tax_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (let key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.invoice_options = _dulieumorong;\r\n    });\r\n  }\r\n\r\n  async handleListRoleBranch(roleUser) {\r\n    let arrList: any;\r\n    arrList = await this.listService.handleGetDMtoCustomer(roleUser);\r\n    if (Array.isArray(arrList) && arrList.length) {\r\n      return this.listService.handleCheckAll(arrList);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  disableTemplateInput() {\r\n    if (this.frmData.invoice_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n  public removeReadonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n      // item.instance.resetValues();\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n  setDisabledByCustomer_object_code(value) {\r\n    this.tod.customer_name = false;\r\n    this.tod.buyer_name = false;\r\n    this.tod.buyer_address = false;\r\n    switch (value) {\r\n      case 'DOANH_NGHIEP':\r\n        break;\r\n      case 'CA_NHAN':\r\n        this.frmData.customer_name = '';\r\n        this.tod.customer_name = true;\r\n        break;\r\n      case 'KHACH_LE':\r\n        this.frmData.customer_name = '';\r\n        this.frmData.buyer_address = '';\r\n        this.tod.customer_name = true;\r\n        this.tod.buyer_address = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  getHtXuatValue() {\r\n    return this.frmData.status;\r\n  }\r\n\r\n  getFrmData() {\r\n    return this.frmData;\r\n  }\r\n\r\n  // sự kiện\r\n  taxCodeKeyUp = (e) => {\r\n    const str = this.frmData.buyer_tax_code;\r\n    const len = str.length;\r\n    if (len >= 3) {\r\n      this.vatService.searchMST(str).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          const arr = [];\r\n          rs.data.customers.forEach(item => {\r\n            arr.push(item);\r\n          });\r\n          this.tax_codes = arr;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  taxCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.bank_account_number = customer.bank_account_number ? customer.bank_account_number : '';\r\n    this.frmData.bank_name = customer.bank_name ? customer.bank_name : '';\r\n    ////\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.bank_account_number = customer.bank_account_number ? customer.bank_account_number : '';\r\n    this.frmData.bank_name = customer.bank_name ? customer.bank_name : '';\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerChanged = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.name) !== VStringService._getValueToString(this.frmData.customer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_person_name) !== VStringService._getValueToString(this.frmData.buyer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_mobile) !== VStringService._getValueToString(this.frmData.buyer_mobile)\r\n              || VStringService._getValueToString(this.customerCurent.business_address) !== VStringService._getValueToString(this.frmData.buyer_address)\r\n              || VStringService._getValueToString(this.customerCurent.email) !== VStringService._getValueToString(this.frmData.buyer_email)\r\n              || VStringService._getValueToString(this.customerCurent.bank_name) !== VStringService._getValueToString(this.frmData.bank_name)\r\n              || VStringService._getValueToString(this.customerCurent.bank_account_number) !== VStringService._getValueToString(this.frmData.bank_account_number)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n  customer_object_codeChange = (e) => {\r\n    this.setDisabledByCustomer_object_code(e.value);\r\n  };\r\n  adjustmentObjectChange = (e) => {\r\n\r\n  }\r\n  templateChange = (e) => {\r\n    this.select.invoice_releases.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.template_id = item.template_id;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateChange.emit(item.is_multi_vat);\r\n        this.onTemplateTypeChange.emit(item);\r\n\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._objTemplateSelect[key] = value;\r\n          }\r\n        }\r\n        if (!this._objTemplateSelect.is_discount) {\r\n          this.dataSource.items().forEach(item3 => {\r\n            item3.discount = null;\r\n            item3.amount_discount = null;\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._objTemplateSelect, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n          }\r\n        }\r\n\r\n        // Nếu là mẫu html\r\n        if (item.fields) {\r\n          this.formItems = [];\r\n          this.customForms = [];\r\n          const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n          if (_arrayGrid && _arrayGrid.length > 0) {\r\n            this.extentionGrid.ma_hang = false;\r\n            this.extentionGrid.so_lo = false;\r\n            this.extentionGrid.han_dung = false;\r\n            this.extentionGrid.nuoc_san_xuat = false;\r\n            this.extentionGrid.don_hang_hop_dong = false;\r\n            for (let i = 0; i < _arrayGrid.length; i++) {\r\n              const column = _arrayGrid[i]['name'];\r\n              const value = _arrayGrid[i]['is_show'];\r\n              const _ma = VStringService._convertToViKdau(column);\r\n              this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n            }\r\n          }\r\n          const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n          if (_dulieumorong.length > 0) {\r\n            _dulieumorong.forEach(item1 => {\r\n              if (item1.is_show) {\r\n                if (item1.data_type === 'chu') {\r\n                  this.customForms.push(\r\n                    {\r\n                      cssClass: 'vat layout_input',\r\n                      editorType: 'dxTextBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'soluong') {\r\n                  this.customForms.push(\r\n                    {\r\n                      cssClass: 'vat layout_input',\r\n                      editorType: 'dxNumberBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'ngay') {\r\n                  this.customForms.push(\r\n                    {\r\n                      cssClass: 'vat layout_input',\r\n                      editorType: 'dxDateBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'danhmuc') {\r\n                  this.customForms.push(\r\n                    {\r\n                      cssClass: 'vat layout_input',\r\n                      editorType: 'dxSelectBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name }\r\n                    }\r\n                  );\r\n                }\r\n              }\r\n            });\r\n            this.formItems.push(this.createCustomGroup());\r\n          }\r\n          _dulieumorong.forEach(value => {\r\n            this.customerTempt[value.code] = value.value;\r\n          });\r\n        } else {\r\n          this.formItems = [];\r\n          this.customerTempt = {};\r\n          this.extentionGrid.ma_hang = false;\r\n          this.extentionGrid.so_lo = false;\r\n          this.extentionGrid.han_dung = false;\r\n          this.extentionGrid.nuoc_san_xuat = false;\r\n          this.extentionGrid.don_hang_hop_dong = false;\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.invoice_release_id = \"\";\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.invoice_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateChange.emit(item.is_multi_vat);\r\n        this.onTemplateTT78TypeChange.emit(item);\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        if (!this._oTemplateTT78.is_discount) {\r\n          this.invoice_products.load().then((dataSource) => {\r\n            dataSource.forEach((item, index) => {\r\n              item.discount = null;\r\n              item.amount_discount = null;\r\n            });\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._oTemplateTT78, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n          }\r\n        }\r\n\r\n        // Nếu là mẫu html\r\n        if (item.fields) {\r\n          this.formItems = [];\r\n          this.customForms = [];\r\n          const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n          if (_arrayGrid && _arrayGrid.length > 0) {\r\n            this.extentionGrid.ma_hang = false;\r\n            this.extentionGrid.so_lo = false;\r\n            this.extentionGrid.han_dung = false;\r\n            this.extentionGrid.nuoc_san_xuat = false;\r\n            this.extentionGrid.don_hang_hop_dong = false;\r\n            this.extentionGrid.ma_quan_ly = false;\r\n            for (let i = 0; i < _arrayGrid.length; i++) {\r\n              const column = _arrayGrid[i]['name'];\r\n              const value = _arrayGrid[i]['is_show'];\r\n              const _ma = VStringService._convertToViKdau(column);\r\n              this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n            }\r\n          }\r\n          const _dulieumorong = item.fields.filter(x => x.type === '4');\r\n          if (_dulieumorong.length > 0) {\r\n            _dulieumorong.forEach(item1 => {\r\n              if (item1.is_show) {\r\n                if (item1.data_type === 'chu') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //  cssClass: 'vat layout_input',\r\n                      editorType: 'dxTextBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'soluong') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //    cssClass: 'vat layout_input',\r\n                      editorType: 'dxNumberBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'ngay') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //   cssClass: 'vat layout_input',\r\n                      editorType: 'dxDateBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name },\r\n                      editorOptions: {\r\n                        onValueChanged: () => {\r\n                          this.changeItem(_dulieumorong);\r\n                        }, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss',\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                if (item1.data_type === 'danhmuc') {\r\n                  this.customForms.push(\r\n                    {\r\n                      //    cssClass: 'vat layout_input',\r\n                      editorType: 'dxSelectBox',\r\n                      dataField: item1.code,\r\n                      label: { text: item1.name }\r\n                    }\r\n                  );\r\n                }\r\n              }\r\n            });\r\n            this.formItems.push(this.createCustomGroup());\r\n            this.frmData.invoice_options = _dulieumorong;\r\n          }\r\n          else\r\n            this.frmData.invoice_options = [];\r\n          _dulieumorong.forEach(value => {\r\n            this.customerTempt[value.code] = value.value;\r\n          });\r\n        } else {\r\n          this.formItems = [];\r\n          this.customerTempt = {};\r\n          this.extentionGrid.ma_hang = false;\r\n          this.extentionGrid.so_lo = false;\r\n          this.extentionGrid.han_dung = false;\r\n          this.extentionGrid.nuoc_san_xuat = false;\r\n          this.extentionGrid.don_hang_hop_dong = false;\r\n          this.extentionGrid.ma_quan_ly = false;\r\n          // this.frmData.invoice_options = [];\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  currencyCodeChange = (e) => {\r\n    if (this.frmData.currency_code === 'VND') {\r\n      this.frmData.currency_rate = null;\r\n    }\r\n    this.doctienbangchu(this.frmData.total_payment, this.frmData.currency_code);\r\n    // this.frmData.total_payment_in_word = Helper.tienBangChu(this.frmData.total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n  currencyRateChange = (e) => {\r\n    if (!this.isTT78)\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._objTemplateSelect, this.configs.system_parameter);\r\n    else\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._oTemplateTT78, this.configs.system_parameter);\r\n  };\r\n\r\n  exportPlaceChange = (e) => {\r\n    const _obj = this.select.export_places.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.export_address = _obj.dia_chi;\r\n      this.frmData.export_place_name = _obj.name;\r\n    }\r\n  };\r\n  bankAccountSellerChange = (e) => {\r\n    const _obj = this.select.list_bank_account_seller.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.seller_bank_account_name = _obj.name;\r\n      // this.frmData.export_place_name = _obj.name;\r\n    } else {\r\n      this.frmData.seller_bank_account_name = '';\r\n    }\r\n  };\r\n\r\n  paymentMethodChange = (e) => {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.payment_method_view_name = _obj.name;\r\n    }\r\n  };\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  capNhatDmKhachHang() {\r\n    this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.buyer_tax_code);\r\n    this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n    this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n    this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.buyer_name);\r\n    this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.buyer_mobile);\r\n    this.customerCurent.business_address = VStringService._getValueToString(this.frmData.buyer_address);\r\n    this.customerCurent.email = VStringService._getValueToString(this.frmData.buyer_email);\r\n    this.customerCurent.bank_name = VStringService._getValueToString(this.frmData.bank_name);\r\n    this.customerCurent.bank_account_number = VStringService._getValueToString(this.frmData.bank_account_number);\r\n    const data = { customer: this.customerCurent };\r\n    this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n      if (response.status === 'success') {\r\n        this.showPopup = false;\r\n      } else {\r\n        Library.notify(response.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n    });\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n    this.customerChanged(null);\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n  adjustmentFormChange = (e) => {\r\n    this.adjustmentObject.emit(e.value);\r\n    switch (e.value) {\r\n      case 'THONG_TIN':\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Mã số thuế',\r\n            code: 'MST'\r\n          },\r\n          {\r\n            name: 'Tiền chữ',\r\n            code: 'TIEN_CHU'\r\n          },\r\n          {\r\n            name: 'Tên khách hàng, Địa chỉ, ...',\r\n            code: 'KH_DC'\r\n          },\r\n        ];\r\n        if (this.frmData.total_payment_in_word) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Tăng \", \"\");\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Giảm \", \"\");\r\n        }\r\n        break;\r\n      case 'TANG':\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Hàng hóa dịch vụ',\r\n            code: 'HH_DV'\r\n          },\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC_TANG'\r\n          },\r\n        ];\r\n        if (VStringService._getValueToString(this.frmData.total_payment_in_word) != \"\" && this.frmData.total_payment_in_word != \"Không đồng chẵn.\") {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Giảm \", \"Tăng \");\r\n          if (this.isTT78) {\r\n            if (this.frmData.total_payment_in_word.includes('Tăng') == false)\r\n              this.frmData.total_payment_in_word = \"Tăng \" + this.frmData.total_payment_in_word;\r\n          }\r\n        }\r\n        break;\r\n      case 'GIAM':\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Hàng hóa dịch vụ',\r\n            code: 'HH_DV'\r\n          },\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC_GIAM'\r\n          },\r\n        ];\r\n        if (VStringService._getValueToString(this.frmData.total_payment_in_word) != \"\" && this.frmData.total_payment_in_word != \"Không đồng chẵn.\") {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Tăng \", \"Giảm \");\r\n          if (this.isTT78) {\r\n            if (this.frmData.total_payment_in_word.includes('Giảm') == false)\r\n              this.frmData.total_payment_in_word = \"Giảm \" + this.frmData.total_payment_in_word;\r\n          }\r\n        }\r\n        break;\r\n      case 'TANG_GIAM':\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Điều chỉnh tăng giảm đồng thời',\r\n            code: 'TANG_GIAM'\r\n          },\r\n        ];\r\n        this.frmData.adjustment_object = 'TANG_GIAM';\r\n        if (this.frmData.total_payment_in_word) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Tăng \", \"\");\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Giảm \", \"\");\r\n          if (this.isTT78) {\r\n            if (this.frmData.total_payment > 0) {\r\n              if (this.frmData.total_payment_in_word.includes('Tăng') == false)\r\n                this.frmData.total_payment_in_word = \"Tăng \" + this.frmData.total_payment_in_word;\r\n            }\r\n            if (this.frmData.total_payment < 0) {\r\n              if (this.frmData.total_payment_in_word.includes('Giảm') == false)\r\n                this.frmData.total_payment_in_word = \"Giảm \" + this.frmData.total_payment_in_word;\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      case 'KHAC':\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC'\r\n          },\r\n        ];\r\n        if (this.frmData.total_payment_in_word) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Tăng \", \"\");\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Giảm \", \"\");\r\n        }\r\n        this.frmData.adjustment_object = 'KHAC';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  /* Chọn hóa đơn chờ ký */\r\n  showModalHdck() {\r\n    let release = this.select.invoice_releases.filter(p => p.template_id == this.frmData.template_id)[0];\r\n    if (release) {\r\n      let invoiceReleaseId = release.value;\r\n      const initialState = {\r\n        invoiceNumberOrigin: 0,\r\n        invoiceDateOrigin: \"1900-01-01 00:00:00\",\r\n        invoiceReleaseId: invoiceReleaseId,\r\n        onSave: (data) => {\r\n          this.frmData.status = sEnum.statusInv.ChoKy;\r\n          this.frmData.id = data.id;\r\n          this.frmData.invoice_date = data.invoice_date;\r\n          this.frmData.invoice_number = data.invoice_number;\r\n        }\r\n      };\r\n      this.bsModalHdckRef = this.modalService.show(ChooseHdckComponent, {\r\n        backdrop: 'static',\r\n        keyboard: false,\r\n        class: 'modal-lg full-modal',\r\n        initialState\r\n      });\r\n    }\r\n  }\r\n  changeTemplateInvoice(strDate) {\r\n    if (this.isTT78) {\r\n      let year = \"\";\r\n      if (VStringService._getValueToString(strDate) != \"\")\r\n        year = VStringService._getValueToString(strDate).substring(4, 2);\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n      }\r\n      let templates = this.select.templatesTT78;\r\n      this.select.templatesTT78 = [];\r\n      if (templates && templates.length > 0) {\r\n        templates.forEach(item => {\r\n          if (VStringService._getValueToString(item.name) != \"\")\r\n            item.name = item.name.replace(item.name.substring(4, 2), year);\r\n          if (item.value === this.frmData.template_id) {\r\n            this.onTemplateTT78TypeChange.emit(item);\r\n          }\r\n          this.select.templatesTT78.push(item);\r\n        });\r\n      }\r\n    }\r\n  }\r\n  doctienbangchu(total_payment, currency_code) {\r\n    if (VStringService._getValueToString(this.frmData.adjustment_object) == \"TANG_GIAM\" && this.isTT78) {\r\n      let number_money = Math.abs(total_payment);\r\n      let c_money = Helper.tienBangChu(number_money, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n      this.frmData.total_payment_in_word = c_money;\r\n      if (total_payment < 0) {\r\n        this.frmData.total_payment_in_word = \"Giảm \" + c_money;\r\n        if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to reduce by \")\r\n        }\r\n      }\r\n      else if (total_payment > 0) {\r\n        this.frmData.total_payment_in_word = \"Tăng \" + c_money;\r\n        if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to increase by \")\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      this.frmData.total_payment_in_word = Helper.tienBangChu(total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n      if (this.isTT78) {\r\n        if (VStringService._getValueToString(this.frmData.total_payment_in_word) != \"\" && this.frmData.total_payment_in_word != \"Không đồng chẵn.\") {\r\n          if (this.frmData.adjustment_form === 'TANG') {\r\n            this.frmData.total_payment_in_word = \"Tăng \" + this.frmData.total_payment_in_word;\r\n            if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n              this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to increase by \")\r\n            }\r\n          }\r\n          if (this.frmData.adjustment_form == 'GIAM') {\r\n            this.frmData.total_payment_in_word = \"Giảm \" + this.frmData.total_payment_in_word;\r\n            if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n              this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to reduce by \")\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  templateCodeChanged = (e) => {\r\n    this.frmData.invoice_origin.relate_template_code = VStringService._removeNewline(e.value).toUpperCase();\r\n  };\r\n  invoiceSeriesChanged = (e) => {\r\n    this.frmData.invoice_origin.relate_invoice_series = VStringService._removeNewline(e.value).toUpperCase();\r\n  };\r\n  changeTaxCode(e) {\r\n    this.tax_code_search = e.value\r\n  }\r\n  // searchTaxCode() {\r\n  //   this.tax_code_search = this.frmData.buyer_tax_code;\r\n  //   if (!this.tod.customer_name) {\r\n  //     this.vatService.getInfoCompany(this.tax_code_search).subscribe(res => {\r\n  //       if (res.status == \"success\") {\r\n  //         this.dataTaxCode = res.data.customer;\r\n  //         this.frmData.customer_name = this.dataTaxCode.name;\r\n  //         this.frmData.buyer_address = this.dataTaxCode.business_address;\r\n  //       }\r\n  //     })\r\n  //   }\r\n  //   this.onFieldDataChanged();\r\n  // }\r\n  searchTaxCode() {\r\n    Library.showloading();\r\n    if (!this.tax_code_search) {\r\n      Library.notify(\"Vui lòng nhập mã số thuế!\", \"error\")\r\n    }\r\n    else {\r\n      this.vatService.getInfoCompany(this.tax_code_search).subscribe(res => {\r\n        if (res.status == \"success\") {\r\n          this.dataTaxCode = res.data.customer;\r\n          this.frmData.customer_name = this.dataTaxCode.name;\r\n          this.frmData.buyer_address = this.dataTaxCode.business_address;\r\n        }\r\n      })\r\n    }\r\n    this.onFieldDataChanged();\r\n    setTimeout(() => {\r\n      Library.hideloading();\r\n    }, 1000);\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <!-- phần form thông tin -->\\r\\n    <app-adjust-multipl-form-invoice [dataSource]=\\\"dataSource\\\" [invoice_products]=\\\"invoice_products\\\" [formatter]=\\\"formatter\\\"\\r\\n                      [frmData]=\\\"frmData\\\" [_objTemplateSelect]=\\\"_objTemplateSelect\\\" [extentionGrid]=\\\"extentionGrid\\\" [htHoaDonGoc] =\\\"htHoaDonGoc\\\"\\r\\n                      (onFormChange)=\\\"getDataInChildForm($event)\\\"\\r\\n                      (onTemplateChange)=\\\"onTemplateChange($event)\\\"\\r\\n                      (adjustmentObjectChange)=\\\"adjustmentObjectChange($event)\\\"\\r\\n                      [isShowButtonWaiteSign] = \\\"isShowButtonWaiteSign\\\"\\r\\n                      [_oTemplateTT78] = \\\"_oTemplateTT78\\\"\\r\\n                      [isTT78] = \\\"isTT78\\\"\\r\\n                      [infoDangKy] = \\\"infoDangKy\\\"\\r\\n                      (onTemplateTT78TypeChange)=\\\"onTemplateTT78TypeChange($event)\\\"\\r\\n                      (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\"></app-adjust-multipl-form-invoice>\\r\\n    <!-- table product -->\\r\\n    <app-adjust-multipl-product-grip #child [dataSource]=\\\"dataSource\\\" [invoice_products]=\\\"invoice_products\\\"\\r\\n                      [formDataInInvoice]=\\\"frmData\\\" [formatter]=\\\"formatter\\\" [isHdGTGT]=\\\"isHdGTGT\\\"\\r\\n                      [_objTemplateSelect]=\\\"_objTemplateSelect\\\" [extentionGrid]=\\\"extentionGrid\\\"\\r\\n                      [isTT78] = \\\"isTT78\\\"\\r\\n                      [_oTemplateTT78] = \\\"_oTemplateTT78\\\"\\r\\n                      (importExcel)=\\\"fillDataToForm($event)\\\">\\r\\n    </app-adjust-multipl-product-grip>\\r\\n\\r\\n    <div *ngIf=\\\"isHdGTGT\\\" class=\\\"table-footer\\\">\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <div class=\\\"vat amount-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.amount_after_vat\\\" step=\\\"0\\\" [format]=\\\"formatter.tong_tien\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-2\\\">\\r\\n        <div class=\\\"vat amount-vat-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.total_amount_vat\\\" step=\\\"0\\\" [format]=\\\"formatter.tien_thue\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <div class=\\\"vat amount-after-vat-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.amount\\\" step=\\\"0\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                         [disabled]=\\\"true\\\"></dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-4\\\">\\r\\n        <div class=\\\"vat amount-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.amount_without_discount\\\" step=\\\"0\\\" [format]=\\\"formatter.thanh_tien_chua_ck\\\"\\r\\n                         [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"!isHdGTGT\\\" class=\\\"table-footer\\\">\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_after_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                      [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: true, step:'0'}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-after-vat-table-footer\\\" dataField=\\\"amount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n                      [editorOptions]=\\\"{format: formatter.tong_tien, disabled: true, step:'0'}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- <dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">Chưa có VAT. Bạn có muốn cập nhật VAT cho hàng hóa này không?</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"yes(true)\\\" text=\\\"Yes\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"yes(false)\\\" text=\\\"No\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup> -->\\r\\n    <dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n              [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n      <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n        <p style=\\\"margin-bottom: 35px;\\\">Bạn có muốn cập nhật lại dữ liệu vào danh mục khách hàng không?</p>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <dx-button text=\\\"Cập nhật\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button text=\\\"Hủy\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </dx-popup>\\r\\n    <!-- vùng chọn file -->\\r\\n    <div class=\\\"row after-table\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <file-upload-multiple [fileData]=\\\"fileData\\\" (fileChange)=\\\"getFileData($event)\\\"></file-upload-multiple>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY' && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY_THU_TIEN' && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY_HOAN_TIEN') \\r\\n        ||(invoiceTemplateTT78 && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY' && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY_THU_TIEN' && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY_HOAN_TIEN') )\\\" class=\\\"vat money-pull-right\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.on_currency_amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.on_currency_amount\\\" tabIndex=\\\"-1\\\" format=\\\"0,###\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\" step=\\\"0\\\"\\r\\n                             (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\" step=\\\"0\\\"\\r\\n                             (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_amount_discount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_discount\\\" tabIndex=\\\"-1\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             [format]=\\\"formatter.tien_chiet_khau\\\"\\r\\n                             (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat5}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat5\\\" tabIndex=\\\"-1\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat8}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat8\\\" tabIndex=\\\"-1\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat10}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat10\\\" tabIndex=\\\"-1\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat_other\\\" tabIndex=\\\"-1\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             [format]=\\\"formatter.tien_thue\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_DANG_KIEM')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_DANG_KIEM'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.fees}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.registry_fee\\\" tabIndex=\\\"-1\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             [format]=\\\"formatter.tong_tien\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                             (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_XANG_DAU') \\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_XANG_DAU'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_fee\\\" tabIndex=\\\"-1\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             [format]=\\\"formatter.tong_tien\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                             (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_TONG_HOP')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_TONG_HOP'))\\\" class=\\\"dx-field\\\">\\r\\n            <div  class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertax}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n                [(value)]=\\\"frmData.other_tax\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_TONG_HOP')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_TONG_HOP'))\\\" class=\\\"dx-field\\\">\\r\\n            <div  class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n                [(value)]=\\\"frmData.other_charge\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\r\\n        || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')))\\\" class=\\\"vat money-pull-right\\\">\\r\\n         \\r\\n        <div *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\r\\n        || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.surcharge}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n                [(value)]=\\\"frmData.other_charge\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                (onValueChanged)=\\\"onNumberTicketChange()\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n         \\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n               [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [(value)]=\\\"frmData.total_other\\\"\\r\\n                (onValueChanged)=\\\"onNumberTicketChange()\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n              [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [(value)]=\\\"frmData.other_fee\\\"\\r\\n                (onValueChanged)=\\\"onNumberTicketChange()\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY')))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.refund_fee}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n                [(value)]=\\\"frmData.money_ticket_return\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                (onValueChanged)=\\\"onNumberTicketChange()\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_fare_after_tax}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n                [(value)]=\\\"frmData.total_ticket_with_vat\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')))\\\" class=\\\"dx-field\\\">\\r\\n            <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n            || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertax}}</div>\\r\\n            <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')\\r\\n            || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertaxair}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n                [(value)]=\\\"frmData.other_tax\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                (onValueChanged)=\\\"onNumberTicketChange()\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n              [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [(value)]=\\\"frmData.other_fee\\\"\\r\\n                (onValueChanged)=\\\"onNumberTicketChange()\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_fare}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n                [(value)]=\\\"frmData.total_ticket\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box\\r\\n                [(value)]=\\\"frmData.total_other\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\"\\r\\n              ></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\r\\n      || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')))\\\" class=\\\"col-md-12\\\" style=\\\"margin:10px 0 !important;\\\">\\r\\n        <h3 class=\\\"font-weight-bold\\\">{{ _translate.CONTROLL.LABEL.ticketing_service_fee}}</h3>\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\">\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 52%\\\"\\r\\n                   class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.ticketing_service_charge}}</div>\\r\\n              <div style=\\\"width: 48%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-number-box\\r\\n                  [(value)]=\\\"frmData.money_service_ticket\\\"\\r\\n                  format=\\\"#,###\\\"\\r\\n                  tabIndex=\\\"-1\\\"\\r\\n                  step=\\\"0\\\"\\r\\n                  (onValueChanged)=\\\"onVatChange()\\\"\\r\\n                ></dx-number-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\" style=\\\"max-width: 23%\\\">\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.tax_GTGT}}</div>\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-select-box\\r\\n                  [(value)]=\\\"frmData.vat_service_ticket\\\"\\r\\n                  displayExpr=\\\"name\\\"\\r\\n                  valueExpr=\\\"code\\\"\\r\\n                  tabIndex=\\\"-1\\\"\\r\\n                  [items]=\\\"select.vats\\\"\\r\\n                  (onValueChanged)=\\\"onVatChange()\\\"\\r\\n                ></dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\" style=\\\"max-width: 19%\\\">\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat}}</div>\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-number-box\\r\\n                  [(value)]=\\\"frmData.total_vat_service_ticket\\\"\\r\\n                  format=\\\"#,###\\\"\\r\\n                  tabIndex=\\\"-1\\\"\\r\\n                  step=\\\"0\\\"\\r\\n                  [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                  (onValueChanged)=\\\"onNumberChange()\\\"\\r\\n                ></dx-number-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-4 \\\" style=\\\"max-width: 33%\\\">\\r\\n            <div class=\\\"prt-1 money-pull-right\\\">\\r\\n              <div class=\\\"dx-field\\\" style=\\\"width: 395px\\\">\\r\\n                <div style=\\\"width: 44.3%\\\"\\r\\n                     class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_after_tax_service_charge}}</div>\\r\\n                <div style=\\\"width: 55.7%\\\" class=\\\"dx-field-value\\\">\\r\\n                  <dx-number-box\\r\\n                    [(value)]=\\\"frmData.total_service_ticket_with_vat\\\"\\r\\n                    format=\\\"#,###\\\"\\r\\n                    tabIndex=\\\"-1\\\"\\r\\n                    step=\\\"0\\\"\\r\\n                    [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                    (onValueChanged)=\\\"onNumberTicketChange()\\\"\\r\\n                  ></dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!-- Nghị định 92 -->\\r\\n      <div class=\\\"col-md-8\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_exemption_decree\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Đã giảm </p>\\r\\n          <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.text_exemption_decree\\\" [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> tương ứng 30% mức tỷ lệ để tính thuế giá trị gia tăng theo Nghị quyết số 406/NQ-UBTVQH15</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Nghị định 43 -->\\r\\n      <!-- Tỷ lệ % doanh thu -->\\r\\n      <div class=\\\"col-md-8\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Tỷ lệ % trên doanh thu </p>\\r\\n\\r\\n          <div class=\\\"toggle normal\\\" style=\\\"display: flex; align-items: center; margin-top: -6px;\\\">\\r\\n            <img id=\\\"link14\\\" style=\\\"cursor: pointer;padding-left: 2px;padding-right: 7px\\\" src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\"  (click)=\\\"guideSales()\\\"  alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n          </div>\\r\\n          <dx-popover\\r\\n          target=\\\"#link14\\\"\\r\\n                  position=\\\"top\\\"\\r\\n                  [width]=\\\"350\\\"\\r\\n                  [(visible)]=\\\"isDisplayGuideSale\\\">\\r\\n                  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n                      <p>- 1% : Phân phối, cung cấp hàng hóa dịch vụ</p>\\r\\n                      <p>- 5% : Dịch vụ xây dựng không bao thầu nguyên vật liệu</p>\\r\\n                      <p>- 3% : Sản xuất, vận tải, dịch vụ có gắn với hàng hóa, xây dựng có bao thầu nguyên vật liệu</p>\\r\\n                      <p>- 2% : Hoạt động kinh doanh khác</p>\\r\\n                  </div>\\r\\n              </dx-popover>\\r\\n\\r\\n          <dx-number-box [width] = \\\"50\\\" [(value)]=\\\"frmData.sales_percentage\\\" (onValueChanged)=\\\"onChangeSalePercen($event)\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> %</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Đã giảm 20% -->\\r\\n      <div class=\\\"col-md-8\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Đã giảm </p>\\r\\n          <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.money_resolution_43\\\" [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> {{ _translate.THONG_TIN.tinh_thue_nq101}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-4\\\" style=\\\"margin-top: 10px\\\">\\r\\n        <div class=\\\"vat money-pull-right\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_payment\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                             [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                             tabIndex=\\\"-1\\\"\\r\\n                             step=\\\"0\\\"\\r\\n                             (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                             (onValueChanged)=\\\"totalPaymentChange($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"vat total-payment-in-word\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_payment_in_word}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-text-box [(value)]=\\\"frmData.total_payment_in_word\\\" [disabled]=\\\"!frmData.auto_value\\\"></dx-text-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <dx-button *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"inChuyenDoi()\\\" [(icon)]=\\\"this._translate.ICONS.print\\\"\\r\\n                     [text]=\\\"inChuyenDoiText()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button *ngIf=\\\"isTuChoi\\\" (click)=\\\"xemlydotuchoi()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n                     text=\\\"{{_translate.CONTROLL.BUTTON.reason_reject}}\\\"\\r\\n                     type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <!-- <button type=\\\"button\\\" (click)=\\\"test()\\\">Test</button> -->\\r\\n          <dx-button *ngIf=\\\"!ttDaXuatHoaDon && !isAccessExportInv\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.sign_approval}}\\\"\\r\\n                     icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"eSubmit('TRINH_KY')\\\" type=\\\"default\\\"\\r\\n                     validationGroup=\\\"formData\\\"\\r\\n                     [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <dx-button *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet\\\" appScrollToInvalid\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\" [(icon)]=\\\"this._translate.ICONS.export_inv\\\"\\r\\n                     (click)=\\\"eSubmit('XUAT',true)\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n                     [useSubmitBehavior]=\\\"true\\\">\\r\\n          </dx-button>\\r\\n          <dx-button *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet\\\" appScrollToInvalid\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" [(icon)]=\\\"this._translate.ICONS.save\\\"\\r\\n                     (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\" [disabled]=\\\"isDisable\\\">\\r\\n          </dx-button>\\r\\n          <dx-button *ngIf=\\\"!showTraLai && !showKyDuyet\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.create_new}}\\\"\\r\\n                     [(icon)]=\\\"this._translate.ICONS.add_new\\\" (click)=\\\"handleAddNew()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button *ngIf=\\\"showTraLai\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.return}}\\\"\\r\\n                     icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"traLai()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button appBackButton type=\\\"default\\\" [(icon)]=\\\"this._translate.ICONS.come_back\\\"\\r\\n                     text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</form>\\r\\n<ngx-spinner\\r\\nbdColor=\\\"rgba(51,51,51,0.8)\\\"\\r\\nsize=\\\"medium\\\"\\r\\ncolor=\\\"#fff\\\"\\r\\ntype=\\\"timer\\\">\\r\\n<p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}.vat.total-payment-in-word .dx-field-label{width:12%}.vat.total-payment-in-word .dx-field-value{width:88% !important}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:25px}.pr-0.dx-selectbox .dx-texteditor-input:-moz-read-only{padding-bottom:17px}.pr-0.dx-selectbox .dx-texteditor-input:read-only{padding-bottom:17px}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { Base64 } from 'js-base64';\r\nimport { AuthService, Helper, Library, sEnum, SocketService, VChanggeMoneyService, VPreviewInvService, VStringService } from '@core/index';\r\nimport { AdjustMultiplProductGripComponent } from '../adjust-multipl-product-grip/adjust-multipl-product-grip.component';\r\nimport { AdjustMultiplFormInvoiceComponent } from '../adjust-multipl-form-invoice/adjust-multipl-form-invoice.component'\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport * as _ from 'lodash';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { Observable } from 'rxjs';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { pattern } from '@config/index';\r\nimport { isBuffer } from 'util';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-adjust-multipl-invoice',\r\n  templateUrl: './adjust-multipl-invoice.component.html',\r\n  styleUrls: ['./adjust-multipl-invoice.component.scss',]\r\n})\r\nexport class AdjustMultiplInvoiceComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  @ViewChild(AdjustMultiplProductGripComponent) productGrip: AdjustMultiplProductGripComponent;\r\n  @ViewChild(AdjustMultiplFormInvoiceComponent) formInvoice: AdjustMultiplFormInvoiceComponent;\r\n\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  frmData: InvoiceModel = new InvoiceModel(1);\r\n  frmTraLai = {\r\n    reason: ''\r\n  };\r\n  isDisable= false\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  is_multi_vat: any;\r\n  listDM: any;\r\n  showTraLai = false;\r\n  showKyDuyet = false;\r\n  isHdGTGT = false;\r\n  isAccessExportInv = false;\r\n  total_payment: any;\r\n  showPopup = false;\r\n  bsModalRef: BsModalRef;\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n\r\n  select: any = {};\r\n  _objTemplateSelect: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  extentionGrid: any = {};\r\n  configs: any;\r\n  _translate: any;\r\n  //danh sách data trong file\r\n  fileData: Array<any> = [];\r\n  tempKiFile = 0;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  timeeeeeeeeeee: any;\r\n  _isValid = false;\r\n  isTuChoi = false;\r\n  valueChange: string;\r\n  invoicereleaseTempt: any;\r\n  nodeSign: any;\r\n  private isExportInvoice: boolean;\r\n  isShowButtonWaiteSign: boolean = true;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  _oTemplateTT78: any = {};\r\n  invoiceTemplateTT78: any;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  isProcessInvOriginOther: boolean = false;\r\n  adjustment_type: any;\r\n  isDisplayGuideSale: boolean = false;\r\n  loaiHoaDonGoc: any = null;\r\n  mauHoaDonGoc: any = null;\r\n  kyHieuHoaDonGoc: any = null;\r\n  soHoaDonGoc: any = null;\r\n  ngayHoaDonGoc: any = null;\r\n  idHoaDonGoc: any = null;\r\n  htHoaDonGoc: any = null;\r\n  dcHoaDonGoc: any = null;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n    private confirmService: ConfirmService,\r\n    private spinner: NgxSpinnerService,\r\n    private configsService: ConfigsService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status === 'DA_XUAT') {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n    let a: any = moment(new Date(), 's').toDate();\r\n    let b = a - this.timeeeeeeeeeee;\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let status;\r\n    if (!this.frmData.id && !this.frmData.invoice_number) {\r\n      status = 'THEM_MOI';\r\n    }\r\n    if (this.frmData.id && !this.frmData.invoice_number) {\r\n      status = 'GHI_TAM';\r\n    }\r\n    if (this.frmData.id && this.frmData.invoice_number) {\r\n      status = 'GIU_SO';\r\n    }\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (status === 'THEM_MOI') {\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.ghiTam(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss'); // moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n            this.frmData.id = rs.data.id;\r\n            this.setDataSessionStorage(this.frmData);\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.ghiTamTT78(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss'); // moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            this.setDataSessionStorage(this.frmData);\r\n            // demo kí số vào file\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            //  Lấy xml từ serer\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else if (status === 'GHI_TAM') {\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          // Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ server\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else if (status === 'GIU_SO') {\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    const sub = this.vatService.xuatHoaDon({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n      invoice_files: this.frmData.invoice_files\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.disablleScreen();\r\n        this.fileData = this.frmData.invoice_files;\r\n        this.isShowButtonWaiteSign = false;\r\n        Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n        this.isExportInvoice = true;\r\n        this.setDataSessionStorage(this.frmData);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.timeeeeeeeeeee = moment(new Date(), 's').toDate();\r\n\r\n    if (this.route.snapshot.queryParams['status'] === 'return') {\r\n      this.showTraLai = true;\r\n    }\r\n\r\n    if (this.route.snapshot.queryParams['status'] === 'sign') {\r\n      this.showKyDuyet = true;\r\n    }\r\n    let isViewTT32 = false;\r\n    if (this.route.snapshot.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    if (VStringService._getValueToString(this.route.snapshot.queryParams['loaiHoaDonGoc']) != \"\")\r\n      this.loaiHoaDonGoc = parseInt(this.route.snapshot.queryParams['loaiHoaDonGoc']);\r\n    if (VStringService._getValueToString(this.route.snapshot.queryParams['mauHoaDonGoc']) != \"\")\r\n      this.mauHoaDonGoc = VStringService._getValueToString(this.route.snapshot.queryParams['mauHoaDonGoc']);\r\n    if (VStringService._getValueToString(this.route.snapshot.queryParams['kyHieuHoaDonGoc']) != \"\")\r\n      this.kyHieuHoaDonGoc = VStringService._getValueToString(this.route.snapshot.queryParams['kyHieuHoaDonGoc']);\r\n    if (VStringService._getValueToString(this.route.snapshot.queryParams['soHoaDonGoc']) != \"\")\r\n      this.soHoaDonGoc = VStringService._getValueToString(this.route.snapshot.queryParams['soHoaDonGoc']);\r\n    if (VStringService._getValueToString(this.route.snapshot.queryParams['ngayHoaDonGoc']) != \"\")\r\n      this.ngayHoaDonGoc = VStringService._getValueToString(this.route.snapshot.queryParams['ngayHoaDonGoc']);\r\n    if (VStringService._getValueToString(this.route.snapshot.queryParams['idHoaDonGoc']) != \"\")\r\n      this.idHoaDonGoc = VStringService._getValueToString(this.route.snapshot.queryParams['idHoaDonGoc']);\r\n    if (VStringService._getValueToString(this.route.snapshot.queryParams['htHoaDonGoc']) != \"\")\r\n      this.htHoaDonGoc = VStringService._getValueToString(this.route.snapshot.queryParams['htHoaDonGoc']);\r\n    if (VStringService._getValueToString(this.route.snapshot.queryParams['dcHoaDonGoc']) != \"\")\r\n      this.dcHoaDonGoc = VStringService._getValueToString(this.route.snapshot.queryParams['dcHoaDonGoc']);\r\n    // kết nối websocket \r\n    this.connectWebsocket();\r\n\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      const loaiDieuChinh = data.type;\r\n      if (loaiDieuChinh == \"dieu-chinh-nhieu\" || loaiDieuChinh == \"dieu-chinh-khac\") {\r\n        this.adjustment_type = 5;\r\n        if (loaiDieuChinh == \"dieu-chinh-khac\")\r\n          this.isProcessInvOriginOther = true;\r\n      }\r\n      else if (loaiDieuChinh == \"thay-the-khac\") {\r\n        this.adjustment_type = 3;\r\n        this.isProcessInvOriginOther = true;\r\n      }\r\n      this.isHdGTGT = true;\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.configs = this.authService.getConfigs();\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      this.frmData.display_currency = JSON.stringify(this.configs.display_currency);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      if (this.infoDangKy) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n          this.isTT78 = true;\r\n      }\r\n      if (this.isTT78 == true && isViewTT32)\r\n        this.isTT78 = false;\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        if (isEdit) {\r\n          temptTT78 = data.init[3];\r\n          invoice = data.init[1];\r\n        }\r\n        else {\r\n          temptTT78 = data.init[1];\r\n        }\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (invoice && Number.parseInt(invoice.invoice_number) > 0) {\r\n            if (invoice.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == invoice.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n        if (isEdit)\r\n          invoice = data.init[3];\r\n      }\r\n      if (isEdit || this.vatService.isCopy) {\r\n        if (this.vatService.isCopy) {\r\n          this.khoiTaoKhiSua(this.vatService.data);\r\n        } else {\r\n          this.khoiTaoKhiSua(invoice);\r\n        }\r\n      } else {\r\n        this.khoiTaoKhiThemMoi();\r\n      }\r\n      this.setTypeInvoice();\r\n    });\r\n    const currentUser = this.authService.getCurrentUser();\r\n    const listpermissions = currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  setDataSessionStorage(data) {\r\n    this.valueChange = JSON.stringify(data);\r\n  }\r\n\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        // Helper.dowloadFile('test.xml', 'xml', data.Data.Content);\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.frmData.issuer_name = data.Data.IssuerName;\r\n          this.xuLiApiKhiXuat();\r\n        } else {\r\n          this.frmData.invoice_files.forEach(item => {\r\n            if (item.file_name === data.Data.Name) {\r\n              item.file_content = data.Data.Content;\r\n            }\r\n          });\r\n          this.tempKiFile++;\r\n          if (this.tempKiFile === this.frmData.invoice_files.length) {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  khoiTaoKhiThemMoi() {\r\n    // khởi tạo mới lưới\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    this.select.payment_method_names.some(item => {\r\n      if (item.is_default) {\r\n        this.frmData.payment_method_name = item.code;\r\n        let _obj = this.select.payment_method_names.filter(p => p.code === item.code)[0];\r\n        if (_obj) {\r\n          this.frmData.payment_method_view_name = _obj.name;\r\n        }\r\n      }\r\n    });\r\n    if (VStringService._getValueToString(this.frmData.payment_method_name) === '') {\r\n      this.frmData.payment_method_name = 'TMCK';\r\n      this.frmData.payment_method_view_name = 'TM/CK';\r\n    }\r\n\r\n    // tạo mới đối tượng file\r\n    this.fileData = [];\r\n\r\n    // cấu hình thập phân thêm mới\r\n    // set value default\r\n    if (!this.isTT78) {\r\n      if (this.select.invoice_releases.length) {\r\n        this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.release_status != 'DA_HUY_SO');\r\n        this.frmData.invoice_release_id = this.select.invoice_releases[0].value;\r\n        this.frmData.template_id = this.select.invoice_releases[0].template_id;\r\n        this.frmData.template_code = this.select.invoice_releases[0].template_code;\r\n        for (const key in this.select.invoice_releases[0]) {\r\n          if (this.select.invoice_releases[0].hasOwnProperty(key)) {\r\n            this._objTemplateSelect[key] = this.select.invoice_releases[0][key];\r\n          }\r\n        }\r\n        this.is_multi_vat = this.select.invoice_releases[0].is_multi_vat;\r\n        this.invoicereleaseTempt = this.select.invoice_releases[0];\r\n      }\r\n    }\r\n    else {\r\n      if (this.select.templatesTT78.length) {\r\n        this.frmData.template_id = this.select.templatesTT78[0].value;\r\n        this.frmData.invoice_series = this.select.templatesTT78[0].invoice_series;\r\n        this.frmData.template_code = this.select.templatesTT78[0].template_code;\r\n        for (const key in this.select.templatesTT78[0]) {\r\n          if (this.select.templatesTT78[0].hasOwnProperty(key)) {\r\n            this._oTemplateTT78[key] = this.select.templatesTT78[0][key];\r\n          }\r\n        }\r\n        this.is_multi_vat = this.select.templatesTT78[0].is_multi_vat;\r\n        this.invoiceTemplateTT78 = this.select.templatesTT78[0];\r\n      }\r\n    }\r\n    this.frmData.currency_code = 'VND';\r\n    this.frmData.invoice_origin.relate_xml_type = this.loaiHoaDonGoc;\r\n    this.frmData.invoice_origin.relate_template_code = this.mauHoaDonGoc;\r\n    this.frmData.invoice_origin.relate_invoice_series = this.kyHieuHoaDonGoc;\r\n    this.frmData.invoice_origin.relate_invoice_number = this.soHoaDonGoc;\r\n    this.frmData.invoice_origin.relate_invoice_date = this.ngayHoaDonGoc;\r\n    this.frmData.invoice_origin.relate_invoice_type = this.htHoaDonGoc;\r\n    this.frmData.invoice_origin.relate_adjustment_type = this.dcHoaDonGoc;\r\n    this.frmData.origin_id = this.idHoaDonGoc;\r\n\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    // khởi tạo lưới từ dữ liệu sửa\r\n    const _lst = this.frmData.setInvoice_products_data(data.invoice_products);\r\n    if (_lst) {\r\n      _lst.forEach(item => {\r\n        if (item.product_name && item.unit_name) {\r\n          const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n          if (!obj1) {\r\n            if (VStringService._getValueToString(item.unit_code) == \"\")\r\n              item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n            let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n            if (oDuplicate)\r\n              item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n          }\r\n          else\r\n            if (!item.unit_code || (item.unit_code && item.unit_code != obj1.code))\r\n              item.unit_code = obj1.code;\r\n        }\r\n      });\r\n    }\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: _lst\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    // mẫu nhiều loại thuế suất ko\r\n\r\n\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    if (VStringService._getValueToString(this.frmData.adjustment_object) == \"TANG_GIAM\" && !this.isTT78) {\r\n      this.productGrip.ShowAndHidePhuongThucDC(true);\r\n    }\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    // this.is_multi_vat = data.is_multi_vat;\r\n\r\n    // lấy file\r\n    if (this.vatService.isCopy) {\r\n      this.frmData.time_print_conversion = null;\r\n      this.fileData = [];\r\n      if (!this.isTT78) {\r\n        const _objRelease = this.select.invoice_releases.filter(p => p.value === this.frmData.invoice_release_id)[0];\r\n        if (_objRelease) {\r\n          if (_objRelease.number_survival === 0) {\r\n            const _lstReleaseOther = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.invoice_series == _objRelease.invoice_series && p.template_code == _objRelease.template_code && p.release_status != 'DA_HUY_SO');\r\n            if (_lstReleaseOther && _lstReleaseOther.length > 0) {\r\n              this.frmData.invoice_release_id = _lstReleaseOther[0].value;\r\n              this.frmData.template_id = _lstReleaseOther[0].template_id;\r\n            } else {\r\n              this.frmData.invoice_release_id = null;\r\n              this.frmData.template_id = null;\r\n            }\r\n          }\r\n        }\r\n        this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.release_status !== 'DA_HUY_SO');\r\n      }\r\n      else {\r\n        let _oTempt = this.select.templatesTT78.filter(p => p.value === this.frmData.template_id)[0];\r\n        if (_oTempt) {\r\n          this.frmData.template_id = _oTempt.value;\r\n          this.frmData.invoice_series = _oTempt.invoice_series;\r\n          this.frmData.template_code = _oTempt.template_code;\r\n        }\r\n        else {\r\n          this.frmData.template_id = null;\r\n          this.frmData.invoice_series = null;\r\n          this.frmData.template_code = null;\r\n        }\r\n      }\r\n    } else {\r\n      this.fileData = data.invoice_files;\r\n    }\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          this.invoicereleaseTempt = item;\r\n        }\r\n      });\r\n      this.select.invoice_releases.some(item => {\r\n        if (item.value === this.frmData.invoice_release_id) {\r\n          this.is_multi_vat = item.is_multi_vat;\r\n          //  this._objTemplateSelect = item; // không mở(đối tượng _objTemplateSelect bị chuyển thành đối tượng item)\r\n          for (const key in item) {\r\n            if (item.hasOwnProperty(key)) {\r\n              this._objTemplateSelect[key] = item[key];\r\n            }\r\n          }\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.invoiceTemplateTT78 = item;\r\n        }\r\n      });\r\n      this.select.templatesTT78.some(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.is_multi_vat = item.is_multi_vat;\r\n          for (const key in item) {\r\n            if (item.hasOwnProperty(key)) {\r\n              this._oTemplateTT78[key] = item[key];\r\n            }\r\n          }\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n    if (VStringService._getValueToString(this.frmData.approve_status) == sEnum.statusApprove.TuChoi) {\r\n      this.isTuChoi = true;\r\n    }\r\n    if (this.frmData.status === sEnum.statusInv.DaXuat || this.frmData.status === sEnum.statusInv.ChoKy)\r\n      this.isShowButtonWaiteSign = false;\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n\r\n  }\r\n\r\n  /** Tương tác giữa các component */\r\n  onTemplateChange(e) {\r\n    this.is_multi_vat = e;\r\n  }\r\n\r\n  onTemplateTypeChange(e) {\r\n    this.invoicereleaseTempt = e;\r\n    if (this.invoicereleaseTempt.invoice_type === '01GTKT') {\r\n      this.isHdGTGT = true;\r\n    } else {\r\n      this.isHdGTGT = false;\r\n    }\r\n    this.setTypeInvoice();\r\n  }\r\n  onTemplateTT78TypeChange(e) {\r\n    this.invoiceTemplateTT78 = e;\r\n    this.setTypeInvoice();\r\n  }\r\n\r\n  fillDataToForm(e) {\r\n    this.frmData.customer_name = e[0];\r\n    this.frmData.buyer_tax_code = e[1];\r\n    this.frmData.buyer_address = e[2];\r\n  }\r\n\r\n  getDataInChildForm(e) {\r\n    this.frmData = e;\r\n    this.frmTraLai.reason = e.lido;\r\n  }\r\n\r\n  onNumberChange() {\r\n    VChanggeMoneyService._calTotalMoney(this.frmData, this.formatter, !this.frmData.auto_value);\r\n  }\r\n\r\n  updateSomeTotalInput(e) {\r\n   \r\n  }\r\n\r\n  fillAutoInput(e) {\r\n  }\r\n\r\n  // Lấy data khi chọn file đính kèm bảng kê\r\n  getFileData(fileData) {\r\n    this.fileData = fileData;\r\n  }\r\n\r\n  /** Kết thúc */\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      const p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  getFormatterToNumber(formatter) {\r\n    const s1 = formatter.replace('0,###', '');\r\n    if (s1 === '') {\r\n      return 0;\r\n    } else {\r\n      const s2 = s1.replace('.', '');\r\n      return s2.split('').length;\r\n    }\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number === 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  inChuyenDoiText() {\r\n    if (this.frmData.time_print_conversion > 0) {\r\n      return this._translate.CONTROLL.BUTTON.view_conversion;\r\n    } else {\r\n      return this._translate.CONTROLL.BUTTON.print_conversion;\r\n    }\r\n  }\r\n\r\n  // sự kiện form\r\n  totalPaymentChange = (e) => {\r\n    this.onNumberChange();\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    this.doctienbangchu(e.value, currency_code);\r\n  };\r\n\r\n  onNumberTicketChange() {\r\n    if (!this.isTT78) {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n      }\r\n    }\r\n    else {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n      }\r\n    }\r\n  }\r\n\r\n  // Các hàm chức năng chính\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n      let data = this.vatService.taodulieuXemTruocMau(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    let data = this.vatService.taodulieuXemMau(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    const data = this.vatService.taodulieuInChuyenDoi(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  ghiTam(data) {\r\n    this.isDisable = true\r\n    if (this.frmData.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.edit(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n            } else {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editTT78(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n            } else {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.ghiTam(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.ghiTamTT78(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n  xuatChoKy(data) {\r\n    // if (this.frmData.invoice_number) {\r\n    Library.showloading();\r\n    if (!this.isTT78) {\r\n      const sub = this.vatService.xuatChoKy(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.isShowButtonWaiteSign = false;\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      const sub = this.vatService.xuatChoKyTT78(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.isShowButtonWaiteSign = false;\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatHoaDon(data) {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      if (this.frmData.invoice_files.length) {\r\n        this.frmData.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.frmData.invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n      }\r\n    }\r\n  }\r\n\r\n  traLai() {\r\n    if (this.frmTraLai.reason === undefined || this.frmTraLai.reason === '') {\r\n      Library.notify(this._translate.CONTROLL.LABEL.reason_return + ' ' + this._translate.VALIDATION.required, 'error');\r\n    } else {\r\n      Library.showloading();\r\n      const sub = this.vatService.traLaiHoaDon({\r\n        id: this.frmData.id,\r\n        reason: this.frmTraLai.reason\r\n      }).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.router.navigate(['/system/invoice-sync']);\r\n          Library.notify(this._translate.NOTIFY.return_success, 'success');\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  _validForm(isOnlyCheckAm) {\r\n    const _isValid = true;\r\n    if (this.frmData.adjustment_object == \"TANG_GIAM\" && this.isTT78) {\r\n    }\r\n    else {\r\n      if ((this.frmData.amount_vat5 < 0 || this.frmData.amount_vat10 < 0 || this.frmData.total_payment < 0)\r\n      && !this.configs.system_parameter.allow_export_with_negative) {\r\n        Library.notify(this._translate.NOTIFY.discount_same_vat, 'error');\r\n        return false;\r\n      }\r\n    }\r\n    if (isOnlyCheckAm) {\r\n      return true;\r\n    }\r\n    if (this.frmData.currency_code && this.frmData.currency_code != \"VND\" && this.frmData.currency_rate === null) {\r\n      this.formInvoice.form.instance.getEditor('currency_rate').focus();\r\n      Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    if (this.frmData.customer_object_code === 'DOANH_NGHIEP') {\r\n      if (!this.frmData.customer_name) {\r\n        Library.notify(this._translate.CONTROLL.LABEL.customer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        this.formInvoice.form.instance.getEditor('customer_name').focus();\r\n        return false;\r\n      }\r\n      if (!this.frmData.buyer_address) {\r\n        Library.notify(this._translate.CONTROLL.LABEL.address + ' ' + this._translate.VALIDATION.required, 'error');\r\n        this.formInvoice.form.instance.getEditor('buyer_address').focus();\r\n        return false;\r\n      }\r\n    }\r\n    if (this.frmData.adjustment_object == \"TANG_GIAM\" && !this.isTT78) {\r\n      let _oProduct = this.frmData.invoice_products.filter(w => VStringService._getValueToString(w.adjustment_form) == \"\")[0];\r\n      if (_oProduct) {\r\n        let index = this.frmData.invoice_products.indexOf(_oProduct);\r\n        this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'adjustment_form'));\r\n        Library.notify('Phương thức điều chỉnh không được để trống.', 'error');\r\n        return false;\r\n      }\r\n    }\r\n    if (this.frmData.customer_object_code === 'CA_NHAN') {\r\n      if (!this.frmData.buyer_name) {\r\n        this.formInvoice.form.instance.getEditor('buyer_name').focus();\r\n        Library.notify(this._translate.CONTROLL.LABEL.buyer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (!this.frmData.buyer_address) {\r\n        this.formInvoice.form.instance.getEditor('buyer_address').focus();\r\n        Library.notify(this._translate.CONTROLL.LABEL.address + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n    }\r\n    if (this.frmData.customer_object_code === 'KHACH_LE') {\r\n      if (!this.frmData.buyer_name) {\r\n        this.formInvoice.form.instance.getEditor('buyer_name').focus();\r\n        Library.notify(this._translate.CONTROLL.LABEL.buyer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n    }\r\n    const _lst = this.dataSource.items().filter(p => p.product_name);\r\n    if (_lst.length === 0) {\r\n      Library.notify(this._translate.NOTIFY.no_product, 'error');\r\n      this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n      return false;\r\n    }\r\n    else {\r\n      if (!this.isTT78) {\r\n        let numberRow = this.invoicereleaseTempt.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(this._translate.NOTIFY.only_seclected_1_product_to_export_invoice, 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        let numberRow = this.invoiceTemplateTT78.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(this._translate.NOTIFY.only_seclected_1_product_to_export_invoice, 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n\r\n        if (this.frmData.list_date && VStringService._getValueToString(this.frmData.list_number) == \"\") {\r\n          this.formInvoice.form.instance.getEditor('list_number').focus();\r\n          Library.notify(\"Số bảng kê\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        if (!this.frmData.list_date && VStringService._getValueToString(this.frmData.list_number) != \"\") {\r\n          Library.notify(\"Ngày bảng kê\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        if (this.frmData.invoice_origin && this.frmData.invoice_origin.relate_xml_type != null) {\r\n          if (VStringService._getValueToString(this.frmData.invoice_origin.relate_template_code) != \"\") {\r\n            let validTemplateCode = false;\r\n            /* Thông tư 78 */\r\n            if (this.frmData.invoice_origin.relate_xml_type == 1) {\r\n              if (this.frmData.invoice_origin.relate_template_code != \"1\" && this.frmData.invoice_origin.relate_template_code != \"2\" && this.frmData.invoice_origin.relate_template_code != \"3\" && this.frmData.invoice_origin.relate_template_code != \"4\"\r\n                && this.frmData.invoice_origin.relate_template_code != \"5\" && this.frmData.invoice_origin.relate_template_code != \"6\") {\r\n                validTemplateCode = true;\r\n              }\r\n            }\r\n            else if (this.frmData.invoice_origin.relate_xml_type == 4) {\r\n              if (this.frmData.invoice_origin.relate_template_code.length == 11) {\r\n                let char1 = this.frmData.invoice_origin.relate_template_code.substring(0, 6);\r\n                let char2 = this.frmData.invoice_origin.relate_template_code.substring(7, 6);\r\n                let char3 = this.frmData.invoice_origin.relate_template_code.substring(8, 7);\r\n                let char4 = this.frmData.invoice_origin.relate_template_code.substring(8);\r\n                if (char1 != \"01GTKT\" && char1 != \"02GTTT\" && char1 != \"03XKNB\" && char1 != \"04HGDL\" && char1 != \"07KPTQ\") {\r\n                  validTemplateCode = true;\r\n                }\r\n                else {\r\n                  if (isNaN(+Number(char2)))\r\n                    validTemplateCode = true;\r\n                  else {\r\n                    if (this.frmData.invoice_origin.relate_xml_type == 4 && Number(char2) == 0)\r\n                      validTemplateCode = true;\r\n                  }\r\n                }\r\n                if (char3.length != 1 || char3 != \"/\")\r\n                  validTemplateCode = true;\r\n                if (char4.length != 3 || isNaN(+Number(char4)))\r\n                  validTemplateCode = true;\r\n              }\r\n              else\r\n                validTemplateCode = true;\r\n            }\r\n            if (validTemplateCode) {\r\n              this.formInvoice.form.instance.getEditor('invoice_origin.relate_template_code').focus();\r\n              Library.notify(\"Mẫu số\" + \" \" + \"không đúng định dạng\", 'error');\r\n              return false;\r\n            }\r\n          }\r\n          if (VStringService._getValueToString(this.frmData.invoice_origin.relate_invoice_series) != \"\") {\r\n            let validInvoiceSeries = false;\r\n            /* Thông tư 78 */\r\n            if (this.frmData.invoice_origin.relate_xml_type == 1) {\r\n              if (this.frmData.invoice_origin.relate_invoice_series.length == 6) {\r\n                let char1 = this.frmData.invoice_origin.relate_invoice_series.substring(1, 0);\r\n                let char2 = this.frmData.invoice_origin.relate_invoice_series.substring(3, 1);\r\n                let char3 = this.frmData.invoice_origin.relate_invoice_series.substring(4, 3);\r\n                let char4 = this.frmData.invoice_origin.relate_invoice_series.substring(5, 4);\r\n                let char5 = this.frmData.invoice_origin.relate_invoice_series.substring(6, 5);\r\n                if (char1 != \"C\" && char1 != \"K\")\r\n                  validInvoiceSeries = true;\r\n                if (char2.length != 2 || isNaN(+Number(char2)))\r\n                  validInvoiceSeries = true;\r\n                if (char3 != \"T\" && char3 != \"D\" && char3 != \"L\" && char3 != \"M\"\r\n                  && char3 != \"N\" && char3 != \"B\" && char3 != \"G\" && char3 != \"H\")\r\n                  validInvoiceSeries = true;\r\n                if (!isNaN(+Number(char4)) || !isNaN(+Number(char5)))\r\n                  validInvoiceSeries = true;\r\n              }\r\n              else {\r\n                validInvoiceSeries = true;\r\n              }\r\n\r\n            }\r\n            // else if (this.frmData.invoice_origin.relate_xml_type == 3) {\r\n            //   if (this.frmData.invoice_origin.relate_invoice_series.length == 6) {\r\n            //     let char1 = this.frmData.invoice_origin.relate_invoice_series.substring(1, 0);\r\n            //     let char2 = this.frmData.invoice_origin.relate_invoice_series.substring(2, 1);\r\n            //     let char3 = this.frmData.invoice_origin.relate_invoice_series.substring(3, 2);\r\n            //     let char4 = this.frmData.invoice_origin.relate_invoice_series.substring(5, 3);\r\n            //     let char5 = this.frmData.invoice_origin.relate_invoice_series.substring(6, 5);\r\n            //     if (!isNaN(+Number(char1)) || !isNaN(+Number(char2)))\r\n            //       validInvoiceSeries = true;\r\n            //     if (char3.length != 1 || char3 != \"/\")\r\n            //       validInvoiceSeries = true;\r\n            //     if (char4.length != 2 || isNaN(+Number(char4)))\r\n            //       validInvoiceSeries = true;\r\n            //     if (char5 != \"P\" && char5 != \"T\" && char5 != \"E\")\r\n            //       validInvoiceSeries = true;\r\n            //   }\r\n            //   else\r\n            //     validInvoiceSeries = true;\r\n            // }\r\n            else if (this.frmData.invoice_origin.relate_xml_type == 4) {\r\n              if (this.frmData.invoice_origin.relate_invoice_series.length == 8) {\r\n\r\n                let char1 = this.frmData.invoice_origin.relate_invoice_series.substring(3, 2);\r\n                let char2 = this.frmData.invoice_origin.relate_invoice_series.substring(4, 3);\r\n                let char3 = this.frmData.invoice_origin.relate_invoice_series.substring(5, 4);\r\n                let char4 = this.frmData.invoice_origin.relate_invoice_series.substring(7, 5);\r\n                let char5 = this.frmData.invoice_origin.relate_invoice_series.substring(8, 7);\r\n\r\n                let char6 = this.frmData.invoice_origin.relate_invoice_series.substring(2, 0);\r\n\r\n                if (!isNaN(+Number(char1)) || !isNaN(+Number(char2)))\r\n                  validInvoiceSeries = true;\r\n                if (char3.length != 1 || char3 != \"/\")\r\n                  validInvoiceSeries = true;\r\n                if (char4.length != 2 || isNaN(+Number(char4)))\r\n                  validInvoiceSeries = true;\r\n                if (char5 != \"P\")\r\n                  validInvoiceSeries = true;\r\n                if (isNaN(+Number(char6))) {\r\n                  validInvoiceSeries = true;\r\n                }\r\n                else {\r\n                  if (Number(char6) == 0 || Number(char6) > 65)\r\n                    validInvoiceSeries = true;\r\n                }\r\n              }\r\n              else\r\n                validInvoiceSeries = true;\r\n            }\r\n            if (validInvoiceSeries) {\r\n              this.formInvoice.form.instance.getEditor('invoice_origin.relate_invoice_series').focus();\r\n              Library.notify(\"Ký hiệu\" + \" \" + \"không đúng định dạng\", 'error');\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        if (VStringService._getValueToString(this.frmData.invoice_origin.relate_invoice_date) != \"\") {\r\n          let dateProcess = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          if (VStringService._getValueToString(this.frmData.invoice_date) != \"\")\r\n            dateProcess = moment(this.frmData.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let dateOrigin = moment(this.frmData.invoice_origin.relate_invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (dateOrigin > dateProcess) {\r\n            this.formInvoice.form.instance.getEditor('invoice_origin.relate_invoice_series').focus();\r\n            Library.notify(\"Ngày hóa đơn điều chỉnh phải lớn hơn hoặc bằng ngày hóa đơn gốc.\", 'error');\r\n            return false;\r\n          }\r\n        }\r\n        this.invoice_products.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion && !item.is_promotion_new && !item.commercial_discount && _isValid) {\r\n            }\r\n            else if (item.is_promotion || item.is_promotion_new || item.commercial_discount) {\r\n              if ((item.product_name == null || item.product_name == '') && _isValid) {\r\n                Library.notify(\"Tên hàng hóa\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'product_name'));\r\n                return false;\r\n              }\r\n            }\r\n            if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion) {\r\n              if (this.isHdGTGT) {\r\n                if (item.vat == null && _isValid) {\r\n                  Library.notify(\"Thuế suất\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'vat'));\r\n                  return false;\r\n                }\r\n                if (item.vat != \"-1\" && item.vat != \"-2\" && item.amount_vat == null && _isValid) {\r\n                  Library.notify(\"Tiền thuế\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount_vat'));\r\n                  return false;\r\n                }\r\n              }\r\n              if (item.amount == null && _isValid) {\r\n                Library.notify(\"Thành tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount'));\r\n                return false;\r\n              }\r\n            }\r\n          });\r\n        });\r\n      }\r\n      if (isNaN(+Number(this.frmData.invoice_origin.relate_invoice_number)) || this.frmData.invoice_origin.relate_invoice_number.includes(\".\") || this.frmData.invoice_origin.relate_invoice_number.includes(\",\") || this.frmData.invoice_origin.relate_invoice_number.includes(\"-\")) {\r\n        this.formInvoice.form.instance.getEditor('invoice_origin.relate_invoice_number').focus();\r\n        Library.notify(\"Số hóa đơn gốc\" + \" \" + \"không đúng định dạng\", 'error');\r\n        return false;\r\n      }\r\n      /* Hóa đơn bán hàng NQ43 */\r\n      if (this.frmData.is_resolution_43) {\r\n        if (!this.frmData.sales_percentage) {\r\n          Library.notify(\"Tỷ lệ % trên doanh thu không được để trống\", 'error');\r\n          return false;\r\n        }\r\n        else if (this.frmData.sales_percentage != 1 && this.frmData.sales_percentage != 2\r\n          && this.frmData.sales_percentage != 3 && this.frmData.sales_percentage != 5) {\r\n          Library.notify(\"Tỷ lệ % trên doanh thu chỉ bao gồm các giá trị: 1, 2, 3, 5\", 'error');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return _isValid;\r\n  }\r\n\r\n  eSubmit(type, isCheckNoVat?) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    this.total_payment = \"\";\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (type !== sEnum.statusInv.GhiTam) {\r\n        this._isValid = this._validForm(false);\r\n        if (!this._isValid) {\r\n          return;\r\n        }\r\n        this._isValid = InvoicesService.checkTimeExportInv(this.configs.system_parameter);\r\n        if (!this._isValid) {\r\n          Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        this._isValid = this.checkProductCode();\r\n        if (!this._isValid) {\r\n          return;\r\n        }\r\n      }\r\n      if (this.frmData.invoice_options) {\r\n        this.frmData.invoice_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n        });\r\n      }\r\n      if (this.frmData.adjustment_form === 'GIAM') {\r\n        /* Áp dụng thuế giảm trừ theo Nghị quyết số 43/2022/QH15 */\r\n        let _objNQ43 = this.frmData.invoice_products.filter(p => (p.vat == \"8\"))[0];\r\n        // if (_objNQ43 || this.frmData.is_resolution_43) {\r\n        //   let dateFromNQ43 = moment(\"01/02/2022\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n        //   let dateToNQ43 = moment(\"31/12/2022\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n        //   let invoiceDateNQ43 = moment(this.frmData.invoice_origin.relate_invoice_date).format('YYYY-MM-DD')\r\n        //   if (invoiceDateNQ43 < dateFromNQ43 || invoiceDateNQ43 > dateToNQ43) {\r\n        //     Library.notify(\"Chỉ áp dụng giảm thuế GTGT theo Nghị quyết số 43/2022/QH15 cho hóa đơn bị điều chỉnh có ngày từ 01/02/2022 đến 31/12/2022\", 'error');\r\n        //     return false;\r\n        //   }\r\n        // }\r\n      }\r\n      if (this.frmData.adjustment_object == \"TANG_GIAM\" && !this.isTT78) {\r\n        let _oProduct = this.frmData.invoice_products.filter(w => VStringService._getValueToString(w.adjustment_form) == \"\")[0];\r\n        if (_oProduct) {\r\n          let index = this.frmData.invoice_products.indexOf(_oProduct);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'adjustment_form'));\r\n          Library.notify('Phương thức điều chỉnh không được để trống.', 'error');\r\n          return false;\r\n        }\r\n      }\r\n      if (VStringService._getValueToString(this.frmData.bank_name) != \"\" && VStringService._getValueToString(this.frmData.bank_name).length > 400) {\r\n        Library.notify(this._translate.NOTIFY.bank_name_less_than_400_character, 'error');\r\n        return false;\r\n      }\r\n      if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n        Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error');\r\n        return false;\r\n      }\r\n\r\n      if (!this.isAccessExportInv && type === 'XUAT' && this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        Library.notify(this._translate.NOTIFY.you_not_permissions, 'error');\r\n        return false;\r\n      }\r\n      if (type === 'XUAT' || (type === sEnum.statusInv.TrinhKy && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy)) {\r\n        if (!this.frmData.invoice_date && !this.confirmCheckPreview && !this.isTT78) {\r\n          const setInvoiceDate = Library.confirm(this._translate.NOTIFY.warning_invoice_date, this._translate.NOTIFY.notify);\r\n          setInvoiceDate.then((dialog) => {\r\n            if (!dialog) {\r\n              this.formInvoice.form.instance.getEditor('invoice_date').focus();\r\n            }\r\n            else {\r\n              this.processXuatHoaDon(type, isCheckNoVat)\r\n            }\r\n          });\r\n        }\r\n        else\r\n          this.processXuatHoaDon(type, isCheckNoVat)\r\n      } else {\r\n        this.processGhiTam(type)\r\n      }\r\n    }, 300);\r\n  }\r\n  /* Xử lý xuất hóa đơn */\r\n  processXuatHoaDon(type, isCheckNoVat) {\r\n    let _index = 0;\r\n    let _lstInv = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      _lstInv = dataSource.filter(p => p.product_name);\r\n    });\r\n    if (this.isHdGTGT) {\r\n      for (let i = 0; i < _lstInv.length; i++) {\r\n        if (_lstInv[i].amount > 0 && !_lstInv[i].vat && !_lstInv[i].is_refund_ticket) {\r\n          let it = _lstInv[i];\r\n          _index = i;\r\n          this._isValid = false;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (!this.vatService.checkVatMauHoaDon(_lstInv, this.is_multi_vat)) {\r\n      return false;\r\n    }\r\n    if (!this._isValid && isCheckNoVat) {\r\n      const result = Library.confirm(this._translate.CONFIRM.no_vat, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(_index, 'vat'));\r\n          return false;\r\n        } else {\r\n          if (type === sEnum.statusInv.TrinhKy && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.confirmCheckPreview = true;\r\n          }\r\n          if (this.confirmCheckPreview) {\r\n            if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n              this.xuatHoaDon(this.frmData);\r\n            } else {\r\n              Helper.confirmXuatChoKy(() => {\r\n                if (!this.isAccessExportInv) {\r\n                  if (type === sEnum.statusInv.TrinhKy) {\r\n                    this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n                    this.frmData.refuse_reason = '';\r\n                  } else {\r\n                    if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                      this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                    }\r\n                  }\r\n                }\r\n                this.xuatChoKy(this.frmData);\r\n              });\r\n            }\r\n            this.confirmCheckPreview = false;\r\n          } else {\r\n            this.previewBeforeExport(type);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      if (type === sEnum.statusInv.TrinhKy && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n        this.confirmCheckPreview = true;\r\n      }\r\n      if (this.confirmCheckPreview) {\r\n        if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n          this.xuatHoaDon(this.frmData);\r\n        } else {\r\n          Helper.confirmXuatChoKy(() => {\r\n            if (!this.isAccessExportInv) {\r\n              if (type === sEnum.statusInv.TrinhKy) {\r\n                this.frmData.refuse_reason = '';\r\n                this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n              } else {\r\n                if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                  this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                }\r\n              }\r\n            }\r\n            this.xuatChoKy(this.frmData);\r\n          });\r\n        }\r\n        this.confirmCheckPreview = false;\r\n      } else {\r\n        this.previewBeforeExport(type);\r\n      }\r\n    }\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = '';\r\n    if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n      trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n    } else {\r\n      trang_thai = this._translate.THONG_TIN.xuat_cho_ky;\r\n    }\r\n    let du_lieu = this.vatService.taodulieuXemTruocMau(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn : this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  /* Xử lý ghi tạm hóa đơn */\r\n  processGhiTam(type) {\r\n    if (!this.isAccessExportInv) {\r\n      if (type === sEnum.statusInv.TrinhKy) {\r\n        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n        this.frmData.refuse_reason = '';\r\n      } else {\r\n        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    this.ghiTam(this.frmData);\r\n  }\r\n\r\n  async subData(type, data) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return false;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    await this.handleFormData();\r\n    if (this.frmData.invoice_options) {\r\n      this.frmData.invoice_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n      Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error');\r\n      return false;\r\n    }\r\n    if (!this.isAccessExportInv) {\r\n      if (type === 'TRINH_KY') {\r\n        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n        this.frmData.refuse_reason = '';\r\n      } else {\r\n        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    if (data.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.edit(data.id, data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.editTT78(data.id, data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.ghiTam(data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.ghiTamTT78(data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  handleAddNew() {\r\n    if (this.isExportInvoice) {\r\n      this.addNew();\r\n    } else {\r\n      if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n        this.confirmService.confirm()\r\n          .subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM', this.frmData).then(res => {\r\n                    if (res) {\r\n                      this.addNew();\r\n                    } else {\r\n                      return;\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  this.addNew();\r\n                  break;\r\n                case 'cancel':\r\n                  this.addNew();\r\n                  break;\r\n                default:\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n      } else {\r\n        this.addNew();\r\n      }\r\n    }\r\n  }\r\n\r\n  addNew() {\r\n    const inv = Object.assign({}, this.frmData);\r\n    this.frmData = new InvoiceModel(1);\r\n    this.frmData.invoice_date = null;\r\n    this.frmData.template_id = inv.template_id;\r\n    this.frmData.invoice_release_id = inv.invoice_release_id;\r\n    this.frmData.payment_method_name = inv.payment_method_name;\r\n    this.frmData.payment_method_view_name = inv.payment_method_view_name;\r\n    this.frmData.currency_code = inv.currency_code;\r\n    this.frmData.template_code = inv.template_code;\r\n    this.frmData.invoice_series = inv.invoice_series;\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n    this.productGrip.createUpdateEvent();\r\n    this.formInvoice.removeReadonlyAllForm();\r\n    this.formInvoice.emails = [];\r\n    this.ttDaXuatHoaDon = false;\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  handleFormData() {\r\n    this.tempKiFile = 0;\r\n    const invoice_products = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      let transport = \"\";\r\n      dataSource.forEach((item, index) => {\r\n        delete item.error;\r\n        if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n          item.row_content = item.product_name;\r\n          invoice_products.push(item);\r\n          if (item.is_transport_number) {\r\n            transport += item.product_name + \"; \";\r\n          }\r\n        }\r\n      });\r\n      if (transport != \"\") {\r\n        transport = transport.trim();\r\n        transport = transport.slice(0, -1);\r\n        this.frmData.transport_number = transport;\r\n      }\r\n      if (this.isProcessInvOriginOther)\r\n        this.frmData.is_outside_process = true;\r\n      else\r\n        this.frmData.is_adjustment_invoices = true;\r\n      this.frmData.adjustment_type = this.adjustment_type;\r\n      if (this.isProcessInvOriginOther) {\r\n        if (this.frmData.adjustment_type == 5)\r\n          this.frmData.note_view_on_invoice = `Hóa đơn này điều chỉnh cho hóa đơn số ${this.frmData.invoice_origin.relate_invoice_number}, mẫu số ${this.frmData.invoice_origin.relate_template_code}, ký hiệu ${this.frmData.invoice_origin.relate_invoice_series} ngày ${moment(this.frmData.invoice_origin.relate_invoice_date).format('DD/MM/YYYY')}`;\r\n        else if (this.frmData.adjustment_type == 3)\r\n          this.frmData.note_view_on_invoice = `Hóa đơn này thay thế cho hóa đơn số ${this.frmData.invoice_origin.relate_invoice_number}, mẫu số ${this.frmData.invoice_origin.relate_template_code}, ký hiệu ${this.frmData.invoice_origin.relate_invoice_series} ngày ${moment(this.frmData.invoice_origin.relate_invoice_date).format('DD/MM/YYYY')}`;\r\n      }\r\n      this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n      this.frmData.invoice_products = invoice_products;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n    });\r\n  }\r\n\r\n  dong() {\r\n    if (this.isHdGTGT) {\r\n      this.router.navigate(['/system/vat-invoice']);\r\n    } else {\r\n      this.router.navigate(['/system/sale-invoice']);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n    // this.socketService.close();\r\n  }\r\n\r\n  xemlydotuchoi() {\r\n    // Library.showloading();\r\n    // const sub = this.vatService.showToSendInvoice(this.frmData.id).subscribe(rs => {\r\n    //   if (rs.status === 'success') {\r\n    //     const initialState = {\r\n    //       invoice: rs.data.invoice,\r\n    //       listDM: this.listDM\r\n    //     };\r\n    //     this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n    //       class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n    //       keyboard: false\r\n    //     });\r\n    //     this.modalService.onHide.subscribe(() => {\r\n    //       if (this.bsModalRef.content.successSaveItem) {\r\n    //       }\r\n    //     });\r\n    //   } else {\r\n    //     Library.notify(rs.message, 'error');\r\n    //   }\r\n    // }, err => {\r\n    // }, () => {\r\n    //   Library.hideloading();\r\n    //   sub.unsubscribe();\r\n    // });\r\n  }\r\n\r\n  onVatChange() {\r\n    const decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n    const decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n    if (this.frmData.vat_service_ticket === '5' || this.frmData.vat_service_ticket === '10') {\r\n      this.frmData.total_vat_service_ticket = this.roundNumber((Number.parseInt(this.frmData.vat_service_ticket) * this.frmData.money_service_ticket) / 100, decimal_amount_vat);\r\n    } else {\r\n      this.frmData.total_vat_service_ticket = 0;\r\n    }\r\n    this.frmData.total_service_ticket_with_vat = this.roundNumber(this.frmData.money_service_ticket + this.frmData.total_vat_service_ticket, decimal_amount);\r\n  }\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM', this.frmData).then(value1 => {\r\n                    observer.next(value1);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  onSubmit() {\r\n  }\r\n\r\n  keyDown(e: any) {\r\n    // setTimeout(() => {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n    // }, 100);\r\n  }\r\n  adjustmentObjectChange(v) {\r\n    if (v == 'TANG_GIAM' && !this.isTT78)\r\n      this.productGrip.ShowAndHidePhuongThucDC(true);\r\n    else\r\n      this.productGrip.ShowAndHidePhuongThucDC(false);\r\n  }\r\n  xemhoadonPDF(rs) {\r\n    //Xem hóa đơn từ server\r\n    if (this.configs.system_parameter.display_template_from_server) {\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      const pdf_file = rs.data.invoice.pdf_file;\r\n      const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n      const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n      win.resizeTo(screen.availWidth, screen.availHeight);\r\n      win.focus();\r\n      this.spinner.hide();\r\n    }\r\n    else {\r\n      /* Xem hóa đơn từ Client */\r\n      let json_data = rs.data.invoice.json_data;\r\n      let appCode = \"REPX\";\r\n      if (rs.data.invoice.is_html_template)\r\n        appCode = \"HTML\";\r\n      this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC\");\r\n    }\r\n  }\r\n  /* Kiểm tra Mã hàng phải nhập không dấu, không chứa ký tự đặc biệt và tối đa 50 ký tự */\r\n  checkProductCode() {\r\n    let isValid = true;\r\n    const _lst = this.frmData.invoice_products.filter(p => p.product_name);\r\n    if (_lst.length > 0) {\r\n      for (let i = 0; i < _lst.length; i++) {\r\n        if (VStringService._getValueToString(_lst[i].product_code) != \"\" && !this.productCodePattern.test(_lst[i].product_code)) {\r\n          Library.notify(this._translate.VALIDATION.required_productCode, 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return isValid;\r\n  }\r\n  doctienbangchu(total_payment, currency_code) {\r\n    if (VStringService._getValueToString(this.frmData.adjustment_object) == \"TANG_GIAM\" && this.isTT78) {\r\n      let number_money = Math.abs(total_payment);\r\n      let c_money = Helper.tienBangChu(number_money, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n      this.frmData.total_payment_in_word = c_money;\r\n      if (total_payment < 0) {\r\n        this.frmData.total_payment_in_word = \"Giảm \" + c_money;\r\n        if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to reduce by \")\r\n        }\r\n      }\r\n      else if (total_payment > 0) {\r\n        this.frmData.total_payment_in_word = \"Tăng \" + c_money;\r\n        if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to increase by \")\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      this.frmData.total_payment_in_word = Helper.tienBangChu(total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n      if (this.isTT78) {\r\n        if (VStringService._getValueToString(this.frmData.total_payment_in_word) != \"\" && this.frmData.total_payment_in_word != \"Không đồng chẵn.\") {\r\n          if (this.frmData.adjustment_form === 'TANG') {\r\n            this.frmData.total_payment_in_word = \"Tăng \" + this.frmData.total_payment_in_word;\r\n            if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n              this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to increase by \")\r\n            }\r\n          }\r\n          if (this.frmData.adjustment_form == 'GIAM') {\r\n            this.frmData.total_payment_in_word = \"Giảm \" + this.frmData.total_payment_in_word;\r\n            if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n              this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to reduce by \")\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  setTypeInvoice() {\r\n    const template_code = this.frmData.template_code.split('/');\r\n    if (template_code[0].indexOf('02GTTT') >= 0 || template_code[0].indexOf('07KPTQ') >= 0\r\n      || template_code[0] == \"2\")\r\n      this.isHdGTGT = false;\r\n    else\r\n      this.isHdGTGT = true;\r\n  }\r\n  onChangeSalePercen(e) {\r\n    this.configs.system_parameter.value_rate_percent = e.value;\r\n    let data = {\r\n      config: {\r\n        value: JSON.stringify(this.configs.system_parameter)\r\n      }\r\n    };\r\n    this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n      if (response.status == \"success\") {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n          this.configs = this.authService.getConfigs();\r\n        });\r\n      } else {\r\n      }\r\n    }, err => { }, () => {\r\n    });\r\n    this.onNumberTicketChange();\r\n  }\r\n  guideSales() {\r\n    this.isDisplayGuideSale = !this.isDisplayGuideSale;\r\n  }\r\n}\r\n","module.exports = \"<!-- Phần không tự tính giá trị, nhập mẫu bảng kê -->\\r\\n<div class=\\\"row support-invoice\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <div class=\\\"pull-left\\\">\\r\\n      <div style=\\\"float: left;width:  30%; padding-top: 4px\\\">{{ _translate.CONTROLL.BUTTON.add_row }}</div>\\r\\n      <div style=\\\"float: left; width: 30%\\\">\\r\\n        <dx-number-box #numberBox [max]=\\\"100\\\" [min]=\\\"1\\\" [showSpinButtons]=\\\"true\\\" [(value)]=\\\"rowData\\\"></dx-number-box>\\r\\n      </div>\\r\\n      <div>\\r\\n        <dx-button style=\\\"height: 27px\\\" icon=\\\"fa fa-plus-circle\\\" type=\\\"default\\\" text=\\\"\\\"\\r\\n                   (onClick)=\\\"addRow()\\\"></dx-button>\\r\\n      </div>\\r\\n\\r\\n      <!-- <div class=\\\"dx-fieldset\\\" style=\\\"width: 170px;\\\">\\r\\n        <div class=\\\"dx-field\\\">\\r\\n          <div class=\\\"dx-field-label\\\" style=\\\"width: 51%;\\\">Thêm dòng</div>\\r\\n          <div class=\\\"dx-field-value\\\" style=\\\"width: 49%;\\\">\\r\\n            <div style=\\\"float: left\\\">\\r\\n\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field-value\\\" style=\\\"width: 49%;\\\">\\r\\n\\r\\n\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n      </div> -->\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <!-- Hóa đơn bán hàng NĐ 92 -->\\r\\n      <dx-check-box *ngIf=\\\"!isHdGTGT\\\" style=\\\"margin-right: 42px\\\" [(value)]=\\\"formDataInInvoice.is_exemption_decree\\\" text=\\\"Giảm thuế theo NĐ số 92/2021\\\" (onValueChanged)=\\\"_changeND92($event)\\\"></dx-check-box>\\r\\n      <!-- <div *ngIf=\\\"!isHdGTGT\\\" class=\\\"toggle normal\\\" style=\\\"display: inline-block; align-items: center;margin-right: 42px;margin-left: 7px;\\\">\\r\\n        <img id=\\\"link3\\\" style=\\\"cursor: pointer\\\" src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" (click)=\\\"onClickGuidReduce()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n      </div> -->\\r\\n      <!-- Nghị định 43 -->\\r\\n      <dx-check-box *ngIf=\\\"!isHdGTGT\\\" style=\\\"margin-right:20px\\\" [(value)]=\\\"formDataInInvoice.is_resolution_43\\\" text=\\\"{{ _translate.THONG_TIN.giam_thue_theo_nq43 }}\\\" (onValueChanged)=\\\"_changeNQ43($event)\\\"></dx-check-box>\\r\\n      <dx-check-box *ngIf=\\\"configs.system_parameter.view_sale_by_phone\\\" class=\\\"auto-input\\\"\\r\\n                    text=\\\"{{ _translate.CONTROLL.LABEL.sale_by_phone }}\\\"\\r\\n                    [(value)]=\\\"formDataInInvoice.sale_by_phone\\\"></dx-check-box>\\r\\n      <dx-check-box class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\"\\r\\n                    [(value)]=\\\"formDataInInvoice.auto_value\\\" (onValueChanged)=\\\"checboxTinhgiatri()\\\"></dx-check-box>\\r\\n      <dx-check-box *ngIf=\\\"isHdGTGT\\\" class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.auto_value_price }}\\\"\\r\\n                    [(value)]=\\\"formDataInInvoice.auto_value_price\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <!-- <a href=\\\"javascript:void(0)\\\" (click)=\\\"layMauBangKe()\\\" class=\\\"support-link mgr-15\\\">\\r\\n        <i [class]=\\\"_translate.ICONS.download\\\"></i><span> {{ _translate.CONTROLL.BUTTON.get_the_sample_file }}</span>\\r\\n      </a>\\r\\n      <a href=\\\"javascript:void(0)\\\" (click)=\\\"napDuLieuTuBangKe()\\\" [class.disabled-link]=\\\"ttDaXuatHoaDon\\\"\\r\\n         class=\\\"support-link\\\">\\r\\n        <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n               style=\\\"display: none;\\\"/>\\r\\n        <i [class]=\\\"_translate.ICONS.excel\\\"></i><span> {{ _translate.CONTROLL.BUTTON.import_data }}</span>\\r\\n      </a> -->\\r\\n      <dx-menu\\r\\n            [dataSource]=\\\"extras\\\"\\r\\n            displayExpr=\\\"name\\\"\\r\\n            orientation=\\\"horizontal\\\"\\r\\n            submenuDirection=\\\"auto\\\"\\r\\n            (onItemClick)=\\\"itemExtrasClick($event)\\\"\\r\\n            cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n          <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n               style=\\\"display: none;\\\"/>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n          [dragEnabled]=\\\"false\\\"\\r\\n          [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.import_type }}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"thayTheToanBo()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all }}\\\"\\r\\n                 type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"themTiep()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<!-- phần table hiển thị -->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n                  [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n                  (onKeyDown)=\\\"onGripKeyDown($event)\\\"\\r\\n                  (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n                  (onEditorPrepared)=\\\"onEditorPrepared($event)\\\"\\r\\n                  (onEditorPreparing)=\\\"onEditorPreparing($event)\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n    >\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"!ttDaXuatHoaDon\\\"></dxo-editing>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\"\\r\\n                  [allowEditing]=\\\"false\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"view_order\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\"\\r\\n                  alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Phương thức điều chỉnh -->\\r\\n      <dxi-column *ngIf=\\\"isPhuongThucDC\\\" dataField=\\\"adjustment_form\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" width=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.modes_of_adjustment }}\\\"\\r\\n                  alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [editorOptions]=\\\"{showClearButton: true}\\\">\\r\\n       <dxo-lookup [dataSource]=\\\"select.adjustment_methods\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"(extentionGrid && extentionGrid.don_hang_hop_dong) || (configs && configs.system_parameter && configs.system_parameter.display_contract_order)\\\" dataField=\\\"contract_order\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.don_hang_hop_dong }}\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.po_no_contract_no }}\\\"\\r\\n                  alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- <dxi-column *ngIf=\\\"!isPhuongThucDC\\\" cssClass=\\\"overlay-content123\\\" dataField=\\\"product_code\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_code }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n                  alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [editorOptions]=\\\"{showClearButton: true}\\\">\\r\\n        <dxo-lookup *ngIf=\\\"reloadSelectProduct\\\"\\r\\n                    [dataSource]=\\\"select.productsView\\\"\\r\\n                    displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\"\\r\\n        >\\r\\n        </dxo-lookup>\\r\\n      </dxi-column> -->\\r\\n      <!-- Mã hàng hóa -->\\r\\n      <dxi-column *ngIf=\\\"isInvoiceReplace || configs.system_parameter.is_add_product_code\\\" cssClass=\\\"overlay-content123\\\" dataField=\\\"product_code\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_code }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n                  alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [editorOptions]=\\\"{showClearButton: true}\\\">\\r\\n        <dxo-lookup *ngIf=\\\"reloadSelectProduct\\\"\\r\\n                    [dataSource]=\\\"select.productsView\\\"\\r\\n                    displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\"\\r\\n        >\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"product_name\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\"\\r\\n                  alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.incurred_refund_ticket\\\" cellTemplate=\\\"PhiHoanVe\\\"\\r\\n                  caption=\\\"{{ _translate.CONTROLL.LABEL.refund_fee }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\" [allowEditing]=\\\"false\\\"\\r\\n                  alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Số máy -->\\r\\n      <dxi-column *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.template_type=='HOA_DON_KINH_DOANH_XE') || (_oTemplateTT78 && _oTemplateTT78.template_type=='HOA_DON_KINH_DOANH_XE'))\\\"\\r\\n                  dataField=\\\"engine_number\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.engine_number }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.so_may }}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Số khung -->\\r\\n      <dxi-column *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.template_type=='HOA_DON_KINH_DOANH_XE') || (_oTemplateTT78 && _oTemplateTT78.template_type=='HOA_DON_KINH_DOANH_XE'))\\\"\\r\\n                  dataField=\\\"chassis_number\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.chassis_number }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.so_khung }}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Phí dịch vụ -->\\r\\n      <dxi-column *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.template_type=='HOA_DON_NHA_HANG_KHACH_SAN') || (_oTemplateTT78 && _oTemplateTT78.template_type=='HOA_DON_NHA_HANG_KHACH_SAN'))\\\" cellTemplate=\\\"phi_dich_vu\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.money_service }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n                  [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n                  [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.promotional_goods_on_the_invoice\\\" cellTemplate=\\\"khuyen_mai\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.promotion }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n                  [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_lot || extentionGrid.so_lo\\\" dataField=\\\"lot\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.lot }}\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.lot }}\\\"\\r\\n                  alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_expiration_date || extentionGrid.han_dung\\\" dataField=\\\"expiration_date\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.expiration_date }}\\\"\\r\\n                  alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_country || extentionGrid.nuoc_san_xuat\\\"\\r\\n                  [editorOptions]=\\\"{showClearButton: true}\\\" dataField=\\\"country_code\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.country }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.country }}\\\"\\r\\n                  alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.countrys\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.display_transport_number_from_product\\\" cellTemplate=\\\"is_transport_number\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.transport_number  }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.is_transport_number  }}\\\"\\r\\n                  [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.commercial_discount\\\" cellTemplate=\\\"cktm\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.commercial_discount }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\" [allowEditing]=\\\"false\\\"\\r\\n                  alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_provisions_on_accounts\\\" dataField=\\\"provisions_on_accounts\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.provisions_on_accounts }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.dinh_khoan }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.select_provisions_on_accounts\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\"\\r\\n                  alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.so_luong,step: '0' }\\\" [format]=\\\"formatter.so_luong\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_price_nte\\\" dataField=\\\"price_nte\\\" headerCellTemplate=\\\"price_nteHeader\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.don_gia_nte, step:'0' }\\\"\\r\\n                  [format]=\\\"formatter.don_gia_nte\\\" dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.don_gia,step: '0' }\\\" [format]=\\\"formatter.don_gia\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Thành tiền chưa trừ CK -->\\r\\n      <dxi-column *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && _objTemplateSelect.template_type!='HOA_DON_BAN_GIAO_XE' && _objTemplateSelect.template_type!='HOA_DON_BAO_DUONG_XE')\\r\\n      || (_oTemplateTT78 && _oTemplateTT78.is_discount && _oTemplateTT78.template_type!='HOA_DON_BAN_GIAO_XE' && _oTemplateTT78.template_type!='HOA_DON_BAO_DUONG_XE'))\\\" dataField=\\\"amount_without_discount\\\"\\r\\n                  headerCellTemplate=\\\"amountNoDiscountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.thanh_tien_chua_ck ,step: '0'}\\\"\\r\\n                  [format]=\\\"formatter.thanh_tien_chua_ck\\\" dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Chiết khấu -->\\r\\n      <dxi-column *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && _objTemplateSelect.template_type!='HOA_DON_BAN_GIAO_XE' && _objTemplateSelect.template_type!='HOA_DON_BAO_DUONG_XE')\\r\\n      || (_oTemplateTT78 && _oTemplateTT78.is_discount && _oTemplateTT78.template_type!='HOA_DON_BAN_GIAO_XE' && _oTemplateTT78.template_type!='HOA_DON_BAO_DUONG_XE'))\\\" dataField=\\\"discount\\\" headerCellTemplate=\\\"discountHeader\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.chiet_khau }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.ty_le_chiet_khau,step: '0' }\\\"\\r\\n                  [format]=\\\"formatter.ty_le_chiet_khau\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Tiền chiết khấu -->\\r\\n      <dxi-column *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount) || (_oTemplateTT78 && _oTemplateTT78.is_discount))\\\" dataField=\\\"amount_discount\\\"\\r\\n                  headerCellTemplate=\\\"amount_discountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.tien_chiet_khau }\\\"\\r\\n                  [format]=\\\"formatter.tien_chiet_khau\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.thanh_tien ,step: '0'}\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column cssClass=\\\"vat-invoices\\\" *ngIf=\\\"isHdGTGT\\\" dataField=\\\"vat\\\" headerCellTemplate=\\\"vatHeader\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.vat }}\\\" alignment=\\\"center\\\"\\r\\n                  [editorOptions]=\\\"{showClearButton: true ,step: '0'}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"isHdGTGT\\\" dataField=\\\"amount_vat\\\" headerCellTemplate=\\\"amountVatHeader\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.tien_thue, step: '0' }\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- Thuế khác -->\\r\\n      <dxi-column *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.template_type=='HOA_DON_VE_MAY_TONG_HOP') || (_oTemplateTT78 && _oTemplateTT78.template_type=='HOA_DON_VE_MAY_TONG_HOP') )\\\" dataField=\\\"other_tax\\\"\\r\\n                  caption=\\\"{{ _translate.CONTROLL.LABEL.othertax  }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- Tiền phí khác -->\\r\\n      <dxi-column *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.template_type=='HOA_DON_VE_MAY_TONG_HOP') || (_oTemplateTT78 && _oTemplateTT78.template_type=='HOA_DON_VE_MAY_TONG_HOP'))\\\" dataField=\\\"other_charge\\\"\\r\\n                  caption=\\\"{{ _translate.CONTROLL.LABEL.money_other  }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.tong_tien_sau_thue }}\\\"\\r\\n                  [editorOptions]=\\\"{ format: formatter.tong_tien, step:'0'}\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                  dataType=\\\"number\\\"\\r\\n                  alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- config column header -->\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.quantity }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n          src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'price_nteHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia_nte')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.price_nte }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountNoDiscountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien_chua_ck')\\\"\\r\\n           style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount_without_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ty_le_chiet_khau')\\\"\\r\\n           style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amount_discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.total_money }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_promotion_new\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'khuyen_mai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion_new\\\" [disabled]=\\\"d.data.is_promotion\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'phi_dich_vu'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_money_service\\\" (onValueChanged)=\\\"changePhiDV(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'is_transport_number'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_transport_number\\\"></dx-check-box>\\r\\n      </div>\\r\\n\\r\\n      <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\" (onValueChanged)=\\\"changeCKTM(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'PhiHoanVe'\\\">\\r\\n          <dx-check-box [(value)]=\\\"d.data.is_refund_ticket\\\" (onValueChanged)=\\\"changePhiHoanVe(d.data)\\\"></dx-check-box>\\r\\n        </div>\\r\\n      <div *dxTemplate=\\\"let d of 'product_code'\\\">\\r\\n        <!-- <dx-autocomplete valueExpr=\\\"code\\\"\\r\\n          [dataSource]=\\\"select.products\\\" [(value)]=\\\"d.data.code\\\">\\r\\n          <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n            <span>{{item.mhvth}}</span>\\r\\n          </div>\\r\\n        </dx-autocomplete> -->\\r\\n        <dxi-item editorType=\\\"dxSelectBox\\\"\\r\\n                  [editorOptions]=\\\"{items: select.productsView, displayExpr: 'name', valueExpr: 'code'}\\\"\\r\\n        >\\r\\n        </dxi-item>\\r\\n      </div>\\r\\n      <!-- <dxo-summary >\\r\\n        <dxi-total-item\\r\\n            summaryType=\\\"custom\\\"\\r\\n            [customizeText]=\\\"customizeText\\\"\\r\\n            showInColumn=\\\"amount\\\">\\r\\n        </dxi-total-item>\\r\\n      </dxo-summary> -->\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n      <!-- <dxo-summary [calculateCustomSummary]=\\\"calculateSummary\\\"> -->\\r\\n      <!-- <dxi-total-item\\r\\n            column=\\\"OrderNumber\\\"\\r\\n            summaryType=\\\"count\\\">\\r\\n        </dxi-total-item>\\r\\n        <dxi-total-item\\r\\n            column=\\\"OrderDate\\\"\\r\\n            summaryType=\\\"min\\\"\\r\\n            [customizeText]=\\\"customizeDate\\\">\\r\\n        </dxi-total-item> -->\\r\\n      <!-- <dxi-total-item cssClass=\\\"vat amount-table-footer\\\"\\r\\n            name=\\\"amount\\\"\\r\\n            column=\\\"amount\\\"\\r\\n            summaryType=\\\"sum\\\"\\r\\n            [valueFormat]=\\\"formatter.thanh_tien\\\">\\r\\n        </dxi-total-item> -->\\r\\n      <!-- <dxi-total-item *ngIf=\\\"isHdGTGT\\\"\\r\\n        name=\\\"amount_vat\\\"\\r\\n            column=\\\"amount_vat\\\"\\r\\n            summaryType=\\\"sum\\\"\\r\\n            [valueFormat]=\\\"formatter.tien_thue\\\">\\r\\n        </dxi-total-item> -->\\r\\n      <!-- <dxi-total-item\\r\\n        name=\\\"amount_after_vat\\\"\\r\\n            column=\\\"amount_after_vat\\\"\\r\\n            summaryType=\\\"custom\\\"\\r\\n            [valueFormat]=\\\"formatter.tong_tien\\\">\\r\\n        </dxi-total-item> -->\\r\\n      <!-- </dxo-summary> -->\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:20px;margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:8px}.support-invoice .support-link img,.support-invoice .support-link i{margin-right:15px;margin-top:-2px}.support-invoice .auto-input{margin-right:40px !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .styleItemToList{color:dodgerblue}.button-dropdown-extend{display:inline-flex}::ng-deep .vat-invoices .dx-texteditor-buttons-container{display:-ms-inline-grid;display:inline-grid}\\n\"","import { AfterViewInit, Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport * as XLSX from 'xlsx';\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { AddComponent, ConfigDecimalComponent } from '@shared/index';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\n\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-adjust-multipl-product-grip',\r\n  templateUrl: './adjust-multipl-product-grip.component.html',\r\n  styleUrls: ['./adjust-multipl-product-grip.component.scss']\r\n})\r\nexport class AdjustMultiplProductGripComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  // @ViewChildren(DxFormComponent) listDxForm: any;\r\n\r\n  routeSub: Subscription;\r\n\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() isHdGTGT: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() extentionGrid: any;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() isTT78: boolean;\r\n  // @Input() not_auto: any; //Không tự tính giá trị\r\n  @Input() formDataInInvoice: any; // Không tự tính giá trị\r\n  select: any = {};\r\n  _translate: any;\r\n  listDVT: any;\r\n  frmData: InvoiceModel = new InvoiceModel(1);\r\n  bsModalRef: BsModalRef;\r\n  showPopup = false; // Popup\r\n  dataExcelFile: any = null;\r\n  dataExcelFileInfo: any = null;\r\n  ttDaXuatHoaDon = false;\r\n  configs: any;\r\n  amount_after_vat: any = 0;\r\n  reloadSelectProduct = true;\r\n  isPhuongThucDC: boolean = false;\r\n  selectBoxData: any;\r\n  extras = [];\r\n  rowData = 1;\r\n  ruleError = {\r\n    '': 'này',\r\n    '-1': 'Không chịu thuế',\r\n    '0': '0%',\r\n    '5': '5%',\r\n    '10': '10%'\r\n  };\r\n  isInvoiceReplace: boolean = false;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private productsService: ProductsService,\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n  ) {\r\n    this.configs = this.authService.getConfigs();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    if (!this.isHdGTGT) {\r\n      this.formDataInInvoice.amount_vatx = null;\r\n      this.formDataInInvoice.amount_vat5 = null;\r\n      this.formDataInInvoice.amount_vat10 = null;\r\n\r\n    }\r\n    this.configs = this.authService.getConfigs();\r\n\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      const loaiDieuChinh = data.type;\r\n      if (loaiDieuChinh == \"thay-the-khac\")\r\n        this.isInvoiceReplace = true;\r\n      // put data DM for select\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      this.select.countrys = danh_muc.DM_QUOC_GIA ? danh_muc.DM_QUOC_GIA.data : null;\r\n      this.select.adjustment_methods = VSelectBoxService._adjustmentMethods(this._translate);\r\n      ///\r\n      if (this.select.select_provisions_on_accounts && this.select.select_provisions_on_accounts.length > 0) {\r\n        this.select.select_provisions_on_accounts.forEach(item => {\r\n          item.mdk = item.code + ': ' + item.name;\r\n        });\r\n      }\r\n      ///\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      if (this.isTT78) {\r\n        this.select.products = data.init[0];\r\n        if (isEdit)\r\n          invoice = data.init[1];\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'code',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              const _data = data.init[0].filter(p => p.code === key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'name'\r\n        };\r\n      }\r\n      else {\r\n        this.select.products = data.init[1];\r\n        if (isEdit)\r\n          invoice = data.init[3];\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'code',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              const _data = data.init[1].filter(p => p.code === key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'name'\r\n        };\r\n      }\r\n      this.select.products.forEach(item => {\r\n        item.mhvth = item.code + ': ' + item.name;\r\n      });\r\n      if (isEdit) {\r\n        if (invoice.invoice_products) {\r\n          invoice.invoice_products.forEach(item => {\r\n            if (item.product_name && item.unit_name) {\r\n              const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n              if (!obj1) {\r\n                if (VStringService._getValueToString(item.unit_code) == \"\")\r\n                  item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n                let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n                if (oDuplicate)\r\n                  item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n                this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n              }\r\n              else {\r\n                if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n                  let oExistUnitCode = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n                  if (!oExistUnitCode)\r\n                    this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n      else {\r\n        this.invoice_products.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (item.product_name && item.unit_name) {\r\n              const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n              if (!obj1) {\r\n                if (VStringService._getValueToString(item.unit_code) == \"\")\r\n                  item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n                let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n                if (oDuplicate)\r\n                  item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n                this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n              }\r\n              else {\r\n                if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n                  let oExistUnitCode = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n                  if (!oExistUnitCode)\r\n                    this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n                }\r\n              }\r\n            }\r\n          });\r\n        });\r\n      }\r\n    });\r\n\r\n    // Event\r\n    this.createUpdateEvent();\r\n  }\r\n\r\n  // Thêm giá trị mới vào đơn vị tính\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      let oDuplicate = this.select.unit_codes.filter(p => p.code === newItem.code)[0];\r\n      if (oDuplicate)\r\n        newItem.code = newItem.code + Helper.addtionalUnitCode();\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        if (value.product_code !== 'add') {\r\n          this.invoice_products.byKey(key).then((row) => {\r\n            switch (column) {\r\n              case 'view_order':\r\n                this.view_orderChange();\r\n                break;\r\n              case 'product_code':\r\n                this.product_codeChange(row);\r\n                break;\r\n              case 'unit_code':\r\n                this.unit_codeChange(row);\r\n                break;\r\n              case 'country_code':\r\n                this.country_codeChange(row);\r\n                break;\r\n              case 'quantity':\r\n              case 'price':\r\n              case 'price_nte':\r\n              case 'vat':\r\n              case 'amount':\r\n              case 'amount_vat':\r\n              case 'amount_after_vat':\r\n              case 'amount_discount':\r\n              case 'discount':\r\n              case 'amount_without_discount':\r\n              case 'other_tax':\r\n              case 'other_charge':\r\n                this._tinhGiaTri();\r\n                break;\r\n              case 'adjustment_form':\r\n                if (row.adjustment_form == \"TANG\") {\r\n                  if (VStringService._getValueToString(row.product_name) == \"\" || row.product_name === \"Điều chỉnh giảm\") {\r\n                    row.product_name = 'Điều chỉnh tăng';\r\n                    this.invoice_products.update(row.id, row);\r\n                  }\r\n                }\r\n                else if (row.adjustment_form == \"GIAM\") {\r\n                  if (VStringService._getValueToString(row.product_name) == \"\" || row.product_name === \"Điều chỉnh tăng\") {\r\n                    row.product_name = 'Điều chỉnh giảm';\r\n                    this.invoice_products.update(row.id, row);\r\n                  }\r\n                }\r\n                else if (row.adjustment_form == \"THONG_TIN\") {\r\n                  if (VStringService._getValueToString(row.product_name) == \"\" || row.product_name === \"Điều chỉnh tăng\" || row.product_name === \"Điều chỉnh giảm\")\r\n                    row.product_name = \"\";\r\n                  row.contract_order = null;\r\n                  row.chassis_number = null;\r\n                  row.lot = null;\r\n                  row.expiration_date = null;\r\n                  row.country_code = null;\r\n                  row.provisions_on_accounts = null;\r\n                  row.unit_code = null;\r\n                  row.quantity = null;\r\n                  row.price_nte = null;\r\n                  row.price = null;\r\n                  row.amount_without_discount = null;\r\n                  row.discount = null;\r\n                  row.amount_discount = null;\r\n                  row.discount_on_price = null;\r\n                  row.price_after_discount = null;\r\n                  row.amount = null;\r\n                  row.vat = null;\r\n                  row.other_tax = null;\r\n                  row.other_charge = null;\r\n                  row.amount_vat = null;\r\n                  row.amount_after_vat = null;\r\n                  this.invoice_products.update(row.id, row);\r\n                }\r\n                this._tinhGiaTri();\r\n                break;\r\n              default:\r\n                break;\r\n              // }\r\n            }\r\n          }, (error) => {\r\n            alert(error);\r\n          });\r\n        } else {\r\n          this.invoice_products.remove(key);\r\n          this.addRow();\r\n        }\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n      // const eles = e.rowElement.getElementsByTagName('td');\r\n      // if (!e.isEditing) {\r\n      //   eles[2].innerHTML = e.data.product_code;\r\n    }\r\n    // if (e.data.error) {\r\n    //   const ele = eles[eles.length - 1];\r\n    //   ele.style.background = 'red url(\\'assets/img/icons/fa-remove.png\\') no-repeat 2% center';\r\n    //   ele.title = e.data.error;\r\n    // }\r\n    //}\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'product_code') {\r\n        e.editorOptions.onOpened = function (arg) {\r\n          const popupInstance = arg.component._popup;\r\n          popupInstance.option('width', 400);\r\n          popupInstance.option('minWidth', 400);\r\n        };\r\n      }\r\n      if (e.dataField === 'product_name') {\r\n        e.editorName = 'dxTextArea';\r\n      }\r\n      if (e.dataField !== 'product_name' && e.dataField !== 'adjustment_form' && e.dataField !== 'unit_code') {\r\n        if (e.row.data.adjustment_form == 'THONG_TIN')\r\n          e.editorOptions.disabled = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount' || e.dataField === 'amount_vat' || e.dataField === 'amount_after_vat') && e.parentType === 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row.rowType === 'data') {\r\n      e.items = [\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.add_goods,\r\n          onItemClick: () => {\r\n            this.addProduct(e.row.data);\r\n          }\r\n        },\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.add_row,\r\n          onItemClick: () => {\r\n            this.addRow();\r\n          }\r\n        },\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.delete_row,\r\n          onItemClick: () => {\r\n            this.deleteRow(e.row.data);\r\n          }\r\n        },\r\n      ];\r\n    }\r\n  }\r\n\r\n  addProduct(row) {\r\n    Library.showloading();\r\n    this.productsService.getAllListbyListtypeByCode('DM_NHOM_HANG_HOA,DM_DON_VI_TINH,DM_TY_LE_VAT').subscribe((response) => {\r\n      const initialState = {\r\n        totalCount: 0,\r\n        groupProducts: response.data['DM_NHOM_HANG_HOA'],\r\n        unitCalculations: response.data['DM_DON_VI_TINH'],\r\n        vats: response.data['DM_TY_LE_VAT'],\r\n        groupProductListTypeId: response.data['ids']['DM_NHOM_HANG_HOA'],\r\n        unitCalculationListTypeId: response.data['ids']['DM_DON_VI_TINH'],\r\n        vatListTypeId: response.data['ids']['DM_TY_LE_VAT'],\r\n        wavehourses: [],\r\n        formatter: this.formatter,\r\n        onSaveProduct: (data, unitCodes) => {\r\n          this.select.unit_codes = unitCodes;\r\n          data.mhvth = data.code + ': ' + data.name;\r\n          this.select.products.push(data);\r\n          this.reloadSelectProduct = false;\r\n          setTimeout(() => {\r\n            this.reloadSelectProduct = true;\r\n          }, 50);\r\n\r\n          row.product_code = data.code;\r\n          row.product_name = data.name;\r\n          row.unit_code = this.checkUnitCode(data.unit_code);\r\n          row.quantity = null;\r\n          row.price = data.price ? parseFloat(data.price) : data.price;\r\n          row.amount = data.price ? parseFloat(data.price) : 0;\r\n          row.vat = data.vat ? data.vat.toString() : null;\r\n          row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n          row.amount_after_vat = row.amount + row.amount_vat;\r\n          this.invoice_products.update(row.id, row);\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  addRow() {\r\n    let len, order, orderLast;\r\n    len = this.dataSource.items().length;\r\n    orderLast = this.dataSource.items()[len - 1].order;\r\n    for (let i = 0; i < this.rowData; i++) {\r\n\r\n      if (this.dataSource.items().length >= 1) {\r\n        order = ++orderLast;\r\n      } else {\r\n        order = 1;\r\n      }\r\n\r\n      const data = this.frmData.add_invoice_products_data(order, order);\r\n      this.invoice_products.insert(data);\r\n    }\r\n    this.dataSource.reload();\r\n  }\r\n\r\n  view_orderChange() {\r\n    if (!this.isTT78) {\r\n      let _index = 0;\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (item.view_order && VStringService._getValueToString(this._objTemplateSelect.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n            item.view_order = ++_index;\r\n          }\r\n          if (VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n            if (!item.is_money_service) {\r\n              item.view_order = ++_index;\r\n            } else {\r\n              item.view_order = null;\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n    else {\r\n      let _index = 0;\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (item.view_order && VStringService._getValueToString(this._oTemplateTT78.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n            item.view_order = ++_index;\r\n          }\r\n          if (VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n            if (!item.is_money_service) {\r\n              item.view_order = ++_index;\r\n            } else {\r\n              item.view_order = null;\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  // Thay đổi cột mã hàng\r\n  product_codeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code === row.product_code) {\r\n        this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              row.product_name = product.name;\r\n              row.unit_code = this.checkUnitCode(product.unit_code);\r\n              row.quantity = null;\r\n              row.price = product.price ? parseFloat(product.price) : product.price;\r\n              row.amount = product.price ? parseFloat(product.price) : 0;\r\n              if (this.isHdGTGT) {\r\n                row.vat = product.vat != null ? product.vat.toString() : null;\r\n              } else {\r\n                row.vat = null;\r\n              }\r\n              if (this.isHdGTGT) {\r\n                row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n              } else {\r\n                row.amount_vat = null;\r\n              }\r\n              row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n              let test = this.invoice_products;\r\n              this.invoice_products.update(row.id, row);\r\n              this._tinhGiaTri();\r\n              return true;\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  unit_codeChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  country_codeChange(row) {\r\n    const _obj = this.select.countrys.filter(p => p.code === row.country_code)[0];\r\n    if (_obj) {\r\n      row.country_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.country_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  ShowAndHidePhuongThucDC(value) {\r\n    this.isPhuongThucDC = value;\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.refresh();\r\n    }, 100);\r\n  }\r\n\r\n  checboxTinhgiatri() {\r\n    this._tinhGiaTri()\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.refresh();\r\n    },150);\r\n  }\r\n\r\n  _tinhGiaTri() {\r\n    setTimeout(() => {\r\n      if (!this.isTT78) {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.formDataInInvoice, this.formatter, !this.formDataInInvoice.auto_value, this.formDataInInvoice.auto_value_price, this.select, this._objTemplateSelect, this.configs.system_parameter);\r\n        if ((VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayTongHop\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayChung\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) && !this.formDataInInvoice.auto_value) {\r\n          VChanggeMoneyService._changeMoneyTicket(this.formDataInInvoice, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n        }\r\n        this.amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n      }\r\n      else {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.formDataInInvoice, this.formatter, !this.formDataInInvoice.auto_value, this.formDataInInvoice.auto_value_price, this.select, this._oTemplateTT78, this.configs.system_parameter);\r\n        if ((VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayTongHop\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayChung\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) && !this.formDataInInvoice.auto_value) {\r\n          VChanggeMoneyService._changeMoneyTicket(this.formDataInInvoice, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n        }\r\n        this.amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n      }\r\n\r\n    }, 100);\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    let p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte,\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        // this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    setTimeout(() => {\r\n      const check = confirm(this._translate.CONFIRM.delete);\r\n      if (check && !this.ttDaXuatHoaDon) {\r\n        setTimeout(() => {\r\n          this.invoice_products.remove(item.id);\r\n\r\n          // this.dataSource.store().remove(item.id);\r\n          this.dataSource.reload();\r\n          this._tinhGiaTri();\r\n\r\n        }, 100);\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  // Lấy mẫu bảng kê\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    this.vatService.layFileMau({\r\n      customer_name: this.formDataInInvoice.customer_name,\r\n      buyer_tax_code: this.formDataInInvoice.buyer_tax_code,\r\n      buyer_address: this.formDataInInvoice.buyer_address,\r\n      buyer_name: this.formDataInInvoice.buyer_name,\r\n      invoice_type_name: \"\"\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  // Nạp dữ liệu bảng kê\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById('file-bang-ke').click();\r\n  }\r\n\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) {\r\n      throw new Error('Không thể chọn nhiều file');\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      const data = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 9 }));\r\n      const account = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 0 }));\r\n      const fileBangKe: any = document.getElementById('file-bang-ke');\r\n      fileBangKe.value = '';\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"view_order\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n      }\r\n      this.dataExcelFile = _arrData;\r\n      this.dataExcelFileInfo = account.slice(0, 4);\r\n      this.showPopup = true;\r\n    };\r\n    reader.readAsBinaryString(target.files[0]);\r\n  }\r\n\r\n  thayTheToanBo() {\r\n    this.fillDataFromFile(this.dataExcelFile, this.dataExcelFileInfo, 'thaythe');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  themTiep() {\r\n    this.fillDataFromFile(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  fillDataFromFile(fileData, info, status) {\r\n    if (info.length === 4) {\r\n      const customer_name = info[0].A.split(':');\r\n      if (customer_name.length > 1 && customer_name[1].trim() != '') {\r\n        this.formDataInInvoice.customer_name = customer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_tax_code = info[1].A.split(':');\r\n      if (buyer_tax_code.length > 1 && buyer_tax_code[1].trim() != '') {\r\n        this.formDataInInvoice.buyer_tax_code = buyer_tax_code[1].trim();\r\n      }\r\n      ////\r\n      const buyer_name = info[2].A.split(':');\r\n      if (buyer_name.length > 1 && buyer_name[1].trim() != '') {\r\n        this.formDataInInvoice.buyer_name = buyer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_address = info[3].A.split(':');\r\n      if (buyer_address.length > 1 && buyer_address[1].trim() != '') {\r\n        this.formDataInInvoice.buyer_address = buyer_address[1].trim();\r\n      }\r\n    }\r\n    if (status === 'thaythe') {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.invoice_products.remove(item.id);\r\n        });\r\n      });\r\n    } else {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount && !item.amount_vat && !item.amount_after_vat) {\r\n            this.invoice_products.remove(item.id);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n      if (element.product_name) {\r\n        let invoice = new Object;\r\n        invoice[\"id\"] = Helper.makeid();\r\n        invoice[\"view_order\"] = element.view_order ? parseInt(element.view_order) : null;\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"vat\"] = (element.vat && this.isHdGTGT) ? element.vat : null;\r\n        invoice[\"contract_order\"] = element.contract_order ? element.contract_order : \"\";\r\n        if (element.price) {\r\n          if (this.configs.system_parameter.price_after_vat) {\r\n            invoice[\"price_after_vat\"] = element.price ? Helper.toNumber(element.price) : null;\r\n            if ((invoice[\"vat\"] == 5 || invoice[\"vat\"] == 10 || invoice[\"vat\"] == 7 || invoice[\"vat\"] == 3.5) && invoice[\"price_after_vat\"] !== null)\r\n              invoice[\"price\"] = (invoice[\"price_after_vat\"] / (1 + invoice[\"vat\"] / 100));\r\n            else\r\n              invoice[\"price\"] = invoice[\"price_after_vat\"];\r\n          }\r\n          else\r\n            invoice[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        }\r\n        invoice[\"amount\"] = element.amount ? Helper.toNumber(element.amount) : null;\r\n        invoice[\"amount_vat\"] = element.amount_vat ? Helper.toNumber(element.amount_vat) : null;\r\n        // invoice[\"note\"] = element.note ? element.note : null;\r\n        invoice[\"other_tax\"] = element.other_tax ? Helper.toNumber(element.other_tax) : null;\r\n        invoice[\"other_charge\"] = element.other_charge ? Helper.toNumber(element.other_charge) : null;\r\n        invoice[\"product_exchange_rate\"] = element.product_exchange_rate ? Helper.toNumber(element.product_exchange_rate) : null;\r\n        invoice[\"product_date\"] = element.product_date ? element.product_date : null;\r\n        invoice[\"engine_number\"] = element.engine_number ? element.engine_number : null;\r\n        invoice[\"chassis_number\"] = element.chassis_number ? element.chassis_number : null;\r\n        invoice[\"management_code\"] = element.management_code ? element.management_code : null;\r\n        invoice[\"is_money_service\"] = element.is_money_service && (element.is_money_service == \"X\" || element.is_money_service == \"x\") ? true : false;\r\n        invoice[\"is_refund_ticket\"] = element.is_refund_ticket && (element.is_refund_ticket == \"X\" || element.is_refund_ticket == \"x\") ? true : false;\r\n        invoice[\"is_promotion\"] = element.is_promotion && (element.is_promotion == \"X\" || element.is_promotion == \"x\") ? true : false;\r\n        invoice[\"is_promotion_new\"] = element.is_promotion_new && (element.is_promotion_new == \"X\" || element.is_promotion_new == \"x\") ? true : false;\r\n        invoice[\"lot\"] = element.lot ? element.lot : null;\r\n        invoice[\"expiration_date\"] = element.expiration_date ? element.expiration_date : null;\r\n        if (invoice[\"amount_vat\"] !== null && invoice[\"amount\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"] + invoice[\"amount\"];\r\n        else\r\n          if (invoice[\"amount\"] !== null)\r\n            invoice[\"amount_after_vat\"] = invoice[\"amount\"];\r\n          else\r\n            if (invoice[\"amount_vat\"] !== null)\r\n              invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"];\r\n            else\r\n              invoice[\"amount_after_vat\"] = null;\r\n        if (invoice[\"other_tax\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_tax\"];\r\n        if (invoice[\"other_charge\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_charge\"];\r\n        const _obj = this.select.products.filter(p => p.code === invoice[\"product_code\"])[0];\r\n        if (!_obj && invoice[\"product_code\"] !== '') {\r\n          const _objPush = {\r\n            code: invoice[\"product_code\"],\r\n            name: invoice[\"product_name\"],\r\n            mhvth: invoice[\"product_code\"] + ': ' + invoice[\"product_name\"],\r\n          };\r\n          this.select.products.push(_objPush);\r\n        }\r\n        invoice[\"commercial_discount\"] = false;\r\n        this.invoice_products.insert(invoice);\r\n      }\r\n    });\r\n    this._tinhGiaTri();\r\n    Library.hideloading();\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n      this.dataGrid.instance.refresh();      \r\n    });\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (this.select.unit_codes && this.select.unit_codes.length > 0) {\r\n        const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n        if (_obj) {\r\n          return _obj.code;\r\n        } else {\r\n          let code = VStringService._convertToViKdau(unitName);\r\n          let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n          if (oDuplicate)\r\n            code = code + Helper.addtionalUnitCode();\r\n          this.select.unit_codes.push({ code: code, name: unitName });\r\n          return code;\r\n        }\r\n      } else {\r\n        this.select.unit_codes = [];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  calculateSummary(options) {\r\n    let amount_after_vat;\r\n    // Calculating \"CustomSummary1\"\r\n    if (options.name === 'amount_after_vat' && options.summaryProcess) {\r\n      if (options.summaryProcess === 'start') {\r\n        // Initializing \"totalValue\" here\r\n        if (this.formDataInInvoice !== undefined) {\r\n          options.totalValue = this.formDataInInvoice.amount_after_vat;\r\n          amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n        }\r\n      }\r\n      if (options.summaryProcess === 'calculate') {\r\n        if (this.formDataInInvoice !== undefined) {\r\n          options.totalValue = this.formDataInInvoice.amount_after_vat;\r\n          amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n        }\r\n        // Modifying \"totalValue\" here\r\n      }\r\n      if (options.summaryProcess === 'finalize') {\r\n\r\n        options.totalValue = amount_after_vat;\r\n        // Assigning the final value to \"totalValue\" here\r\n      }\r\n    }\r\n    // Calculating \"CustomSummary2\"\r\n    if (options.name === 'CustomSummary2') {\r\n      // ...\r\n      // Same \"if\" statements here\r\n    }\r\n  }\r\n\r\n  changePhiDV(row) {\r\n    this.view_orderChange();\r\n    if (row.is_money_service) {\r\n      row.commercial_discount = false;\r\n    }\r\n    if (row.is_money_service && VStringService._getValueToString(row.product_name) == '') {\r\n      row.product_name = 'Phí dịch vụ';\r\n      this.invoice_products.update(row.id, row);\r\n    } else if (!row.is_money_service && VStringService._getValueToString(row.product_name) === 'Phí dịch vụ') {\r\n      row.product_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  changeCKTM(row) {\r\n    if (row.commercial_discount) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  changePhiHoanVe(row) {\r\n    if (row.commercial_discount) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'LAY_MAU_BANG_KE') {\r\n      this.layMauBangKe();\r\n    } else if (e.itemData.id === 'NAP_DU_LIEU_BANG_KE') {\r\n      this.napDuLieuTuBangKe();\r\n    }\r\n  }\r\n  _changeND92(e) {\r\n    if (e.value)\r\n      this.formDataInInvoice.is_resolution_43 = !e.value;\r\n    this._tinhGiaTri();\r\n  }\r\n  _changeNQ43(e) {\r\n    if (e.value) {\r\n      this.formDataInInvoice.is_exemption_decree = !e.value;\r\n      if (this.formDataInInvoice.sales_percentage == null && parseInt(this.configs.system_parameter.value_rate_percent) > 0) {\r\n        this.formDataInInvoice.sales_percentage = parseInt(this.configs.system_parameter.value_rate_percent);\r\n      }\r\n    }\r\n    else {\r\n      this.formDataInInvoice.sales_percentage = null;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n  onClickGuidReduce() {\r\n    this.router.navigate([]).then(result => { window.open('https://ihoadon.vn/hddt/danh-muc-hang-hoa-dich-vu-duoc-giam-thue-gtgt-theo-nghi-quyet-so-406-nq-ubtvqh15.html', '_blank'); });\r\n  }\r\n}","module.exports = \"<div class=\\\"row invoice-form\\\" *ngIf=\\\"!isPXKDaiLy && !isPXKNB\\\">\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item *ngIf=\\\"!isTT78\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.invoice_form }\\\"\\r\\n          dataField=\\\"invoice_release_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.invoice_releases, onValueChanged: templateChange, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"isTT78\\\" dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"adjustment_form\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.adjustment_form}\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.adjustment_forms, onItemClick: adjustmentFormChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.adjustment_form}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"adjustment_object\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.adjustment_object}\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.adjustment_objects, onItemClick: adjustmentObjectChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.adjustment_object}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: _translate.GRID.INVOICE.invoice_date}\\\" editorType=\\\"dxDateBox\\\"\\r\\n          [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate, onValueChanged: changeDateTime}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item cssClass=\\\"vat invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\"\\r\\n          [label]=\\\"{text: _translate.GRID.INVOICE.invoice_number}\\\" editorType=\\\"dxNumberBox\\\"\\r\\n          [editorOptions]=\\\"{ disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_code}\\\" dataField=\\\"currency_code\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"currency_rate\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_rate}\\\"\\r\\n          editorType=\\\"dxNumberBox\\\"\\r\\n          [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: formatter.ty_gia}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_method}\\\" dataField=\\\"payment_method_name\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.payment_method}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item name=\\\"ht-xuat\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.export_form}}\\\"></dxo-label>\\r\\n          <div *dxTemplate>\\r\\n            <dx-select-box [(value)]=\\\"frmData.status\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\"\\r\\n              [disabled]=\\\"!configs.system_parameter.allow_keep_invoice_number\\\"></dx-select-box>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"origin-invoice-number\\\">\\r\\n            <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number_original}}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-text-box [(value)]=\\\"oldForm.invoice_number\\\" disabled=\\\"true\\\"></dx-text-box>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"origin_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"soXacThucGoc\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.certificate_code}\\\"\\r\\n          [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- <dxi-item dataField=\\\"doc_relate_symbol\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.doc_relate_symbol}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_symbol}} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"doc_relate_date\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.doc_relate_date}\\\"\\r\\n                  editorType=\\\"dxDateBox\\\"\\r\\n                  [editorOptions]=\\\"{displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          <dxi-validation-rule type=\\\"range\\\" [min]=\\\"minNgayVB\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}} {{ _translate.VALIDATION.less_date_inv }}\\\"></dxi-validation-rule>\\r\\n          <dxi-validation-rule type=\\\"range\\\" [max]=\\\"maxNgayVB\\\"\\r\\n                               message=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}} {{ _translate.VALIDATION.than_date_curent }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item> -->\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Số phiếu xuất kho -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.receipts_no\\\" dataField=\\\"receipts_no\\\" [colCount]=\\\"1\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE.receipts_no }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày giao hàng -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.from_warehouse_date\\\" dataField=\\\"from_warehouse_date\\\"\\r\\n          [template]=\\\"'deliverydata'\\\" [colCount]=\\\"1\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.delivery_date }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_export_place\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.export_place}\\\" dataField=\\\"export_place\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.export_places, onValueChanged: exportPlaceChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Xuất cho khách hàng -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.ship_receiving_name\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"ship_receiving_name\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.ship_receiving_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Địa chỉ nhận hàng -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.ship_receiving_address\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"ship_receiving_address\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.ship_receiving_address }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_transport_number\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"transport_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.transport_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn pepsi -->\\r\\n      <!-- Tên khách hàng(TT giao hàng) -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_delivery_information\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"ship_receiving_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.ship_receiving_name}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Địa chỉ giao hàng -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_delivery_information\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"ship_receiving_address\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.shipping_address}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_delivery_information\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Đơn đặt hàng( Mã số đơn hàng) -->\\r\\n        <dxi-item dataField=\\\"the_order\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.the_order}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Số tham khảo -->\\r\\n        <dxi-item dataField=\\\"consult_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.consult_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Chứng từ tham chiếu -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"configs.system_parameter.vouchers_reference\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONFIGS.vouchers_reference}\\\" dataField=\\\"license_number\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Số S/O -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"configs.system_parameter.invoice_the_order\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONFIGS.so_so }\\\" dataField=\\\"the_order\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Thời hạn thanh toán -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"configs.system_parameter.payment_expire\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_time }\\\" dataField=\\\"payment_expire\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hình thức bán hàng -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"configs.system_parameter.vouchers_reference\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONFIGS.form_sales}\\\" dataField=\\\"sell_form\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n\\r\\n      <!-- Hóa đơn bảo dưỡng xe -->\\r\\n      <!-- Địa chỉ giao hàng -->\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"place_of_delivery\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.address_delivery}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Thời hạn thanh toán -->\\r\\n        <dxi-item dataField=\\\"payment_expire\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_time}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Số wip -->\\r\\n        <dxi-item dataField=\\\"wip_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.wip_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Biển số xe -->\\r\\n        <dxi-item dataField=\\\"license_plate\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.license_plate}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Số khung -->\\r\\n        <dxi-item dataField=\\\"invoice_chassis_number\\\" [label]=\\\"{text: _translate.GRID.INVOICE_DETAILS.chassis_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn bàn giao xe -->\\r\\n      <dxi-item *ngIf=\\\"isShowBanGiaoXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Số hợp đồng -->\\r\\n        <dxi-item dataField=\\\"contract_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.vehicle_contract_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Số VSB -->\\r\\n        <dxi-item dataField=\\\"vsb_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.vehicle_vsb}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBanGiaoXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Màu xe -->\\r\\n        <dxi-item dataField=\\\"color\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.vehicle_color}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Số máy -->\\r\\n        <dxi-item dataField=\\\"invoice_engine_number\\\" [label]=\\\"{text: _translate.GRID.INVOICE_DETAILS.engine_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn nhà thuốc -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Số tham chiếu -->\\r\\n        <dxi-item dataField=\\\"license_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.reference_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Tuyến -->\\r\\n        <dxi-item dataField=\\\"route\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.route}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Đơn đặt hàng -->\\r\\n        <dxi-item dataField=\\\"the_order\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.the_order}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Số tham khảo -->\\r\\n        <dxi-item dataField=\\\"consult_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.consult_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Nhân viên thu tiền -->\\r\\n        <dxi-item dataField=\\\"cash_staff\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.cash_staff}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isTT78\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Lý do thay thế -->\\r\\n        <dxi-item dataField=\\\"destroy_reason\\\">\\r\\n          <dxo-label text=\\\"Lý do điều chỉnh\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Lý do điều chỉnh {{_translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isTT78\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"list_number\\\">\\r\\n          <dxo-label text=\\\"Số bảng kê\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"list_date\\\" [template]=\\\"'notifydate'\\\">\\r\\n          <dxo-label text=\\\"Ngày bảng kê\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <div *dxTemplate=\\\"let d of 'notifydate'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.list_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\" [displayFormat]=\\\"'dd/MM/yyyy'\\\"\\r\\n          [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'deliverydata'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.from_warehouse_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\"\\r\\n          [displayFormat]=\\\"'dd/MM/yyyy'\\\" [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.export_invoice_for}\\\" dataField=\\\"customer_object_code\\\"\\r\\n          editorType=\\\"dxSelectBox\\\" [cssClass]=\\\"'max_left'\\\"\\r\\n          [editorOptions]=\\\"{items: select.customer_object_codes, displayExpr: 'name', valueExpr: 'code', onValueChanged: customer_object_codeChange, disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.customer_group}\\\" dataField=\\\"customer_type\\\"\\r\\n          editorType=\\\"dxSelectBox\\\" [cssClass]=\\\"'max_right'\\\"\\r\\n          [editorOptions]=\\\"{items: select.customer_types, displayExpr: 'name', valueExpr: 'code', disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"search-mst\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.tax_code }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-autocomplete valueExpr=\\\"tax_code\\\" [dataSource]=\\\"tax_codes\\\" [(value)]=\\\"frmData.buyer_tax_code\\\"\\r\\n                [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"taxCodeChoose($event)\\\"\\r\\n                [disabled]=\\\"disableForm.tax_code\\\" (onValueChanged)=\\\"changeTaxCode($event)\\\"\\r\\n                (onFocusOut)=\\\"updateTaxcodeInfo($event)\\\">\\r\\n                <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                  <span>{{item.tax_code}}: {{ item.name }}</span>\\r\\n                </div>\\r\\n              </dx-autocomplete>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item cssClass='btn-small'>\\r\\n            <button (click)=\\\"searchTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n              <i class=\\\"{{_translate.ICONS.search}}\\\" style=\\\"font-size: 22px;\\\"></i>\\r\\n            </button>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button vat-handle'>\\r\\n          <dxi-item name=\\\"search-mkh\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.customer_code}}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-autocomplete valueExpr=\\\"code\\\" [dataSource]=\\\"customer_codes\\\" [(value)]=\\\"frmData.customer_code\\\"\\r\\n                [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"customerCodeChoose($event)\\\"\\r\\n                (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n                <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                  <span>{{item.code}}: {{ item.name }}</span>\\r\\n                </div>\\r\\n              </dx-autocomplete>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"mst_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.customer_name}\\\" dataField=\\\"customer_name\\\"\\r\\n          [editorOptions]=\\\"{disabled: tod.customer_name || disableForm.rest, isRequired: false,onValueChanged:onFieldDataChanged}\\\">\\r\\n          <!-- <dxi-validation-rule *ngIf=\\\"!tod.customer_name\\\" type=\\\"required\\\" message=\\\"Tên đơn vị {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.buyer_name}\\\" dataField=\\\"buyer_name\\\"\\r\\n          [editorOptions]=\\\"{disabled: tod.buyer_name || disableForm.rest, onValueChanged:onFieldDataChanged}\\\">\\r\\n          <!-- <dxi-validation-rule *ngIf=\\\"frmData.customer_object_code != 'DOANH_NGHIEP'\\\" type=\\\"required\\\" message=\\\"Họ tên người mua {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.phone}\\\" dataField=\\\"buyer_mobile\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n          <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.phone}} {{ _translate.VALIDATION.not_pattern }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isShowToKhai\\\">\\r\\n        <!-- Số hộ chiều -->\\r\\n        <dxi-item cssClass=\\\"in-hoa vat2 layout_input\\\" dataField=\\\"passport\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableTemplateInput() }\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.passport}}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.passport}} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Quốc tịch -->\\r\\n        <dxi-item cssClass=\\\"in-hoa vat3 layout_input\\\" dataField=\\\"nationality\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.nationality}}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.nationality}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isShowToKhai\\\">\\r\\n        <!-- Ngày cấp hộ chiếu -->\\r\\n        <dxi-item cssClass=\\\"vat2 layout_input\\\" editorType=\\\"dxDateBox\\\" dataField=\\\"passport_date\\\"\\r\\n          [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.passport_date}}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.passport_date}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày hết hạn hộ chiếu -->\\r\\n        <dxi-item dataField=\\\"passport_expiration_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n          [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.passport_expiration_date}}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.passport_expiration_date}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.address}\\\" dataField=\\\"buyer_address\\\"\\r\\n          [editorOptions]=\\\"{disabled: tod.buyer_address || disableForm.rest,onValueChanged:onFieldDataChanged}\\\">\\r\\n          <!-- <dxi-validation-rule *ngIf=\\\"!tod.buyer_address\\\" type=\\\"required\\\" message=\\\"Địa chỉ {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n        <dxi-item [label]=\\\"{text: 'Email'}\\\">\\r\\n          <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n            <div\\r\\n              class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n              <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                </app-tag-input-email>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n        <!--        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.bank_account_number}\\\" dataField=\\\"bank_account_number\\\"-->\\r\\n        <!--                  [editorOptions]=\\\"{disabled: disableForm.rest}\\\">-->\\r\\n        <!--        </dxi-item>-->\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.bank_name}\\\" dataField=\\\"bank_name\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!--Thông tin other_id -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.other_id\\\" dataField=\\\"other_id\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.other_id }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_export_place\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.export_address }\\\" dataField=\\\"export_address\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_transport_number\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"train_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.train_name}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn pepsi -->\\r\\n      <!-- Thời hạn thanh toán -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.display_delivery_information\\\" dataField=\\\"payment_expire\\\"\\r\\n          [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_time}\\\" [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn bảo dưỡng xe -->\\r\\n      <!-- Địa chỉ xuất hàng -->\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"shiping_point\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.address_shipping}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Ngày ra, vào xe -->\\r\\n        <dxi-item dataField=\\\"in_out_date\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.in_out_date}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Số hóa đơn nội bộ -->\\r\\n        <dxi-item dataField=\\\"invoice_internal_number\\\"\\r\\n          [label]=\\\"{text: _translate.CONTROLL.LABEL.invoice_internal_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Số km -->\\r\\n        <dxi-item dataField=\\\"kilometer_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.kilometer_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn bàn giao xe -->\\r\\n      <dxi-item *ngIf=\\\"isShowBanGiaoXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Số chứng từ -->\\r\\n        <dxi-item cssClass=\\\"vat layout_input\\\" dataField=\\\"license_number\\\"\\r\\n          [label]=\\\"{text: _translate.CONTROLL.LABEL.vehicle_license_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Kiểu xe -->\\r\\n        <dxi-item dataField=\\\"model\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.vehicle_model}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBanGiaoXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Số khung -->\\r\\n        <dxi-item cssClass=\\\"vat layout_input\\\" dataField=\\\"invoice_chassis_number\\\"\\r\\n          [label]=\\\"{text: _translate.GRID.INVOICE_DETAILS.chassis_number}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Năm sản xuất -->\\r\\n        <dxi-item dataField=\\\"manufacture_year\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.year_manufacture}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn nhà thuốc -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Địa chỉ giao hàng -->\\r\\n        <dxi-item dataField=\\\"place_of_delivery\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.address_delivery}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Kho -->\\r\\n        <dxi-item dataField=\\\"from_warehouse_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.warehouse}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Phiếu nhận hàng -->\\r\\n        <dxi-item dataField=\\\"receive_bill\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.receive_bill}\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableForm.rest}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Điều khoản giao hàng -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.delivery_terms\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"delivery_terms\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.delivery_terms }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Ghi chú -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"note\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.note }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- trường mở rộng -->\\r\\n\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\" [formData]=\\\"frmData\\\" [customerTempt]=\\\"customerTempt\\\"\\r\\n          [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'invoice_options'\\\"></app-form-extend>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-12\\\" style=\\\"margin-top:7px;margin-bottom:7px\\\">\\r\\n    <dx-form *ngIf=\\\"!isTT78\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <ng-container *ngIf=\\\"configs.system_parameter.allow_keep_invoice_number && isShowButtonWaiteSign\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item name=\\\"btn-chossen-hdck\\\">\\r\\n              <dx-button id=\\\"btn-chossen-hdck\\\" (click)=\\\"showModalHdck()\\\" icon=\\\"assets\\\\img\\\\icons\\\\GiuSo.png\\\"\\r\\n                text=\\\"{{_translate.CONTROLL.BUTTON.select_inv_wait_sign}}\\\" type=\\\"default\\\"></dx-button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </ng-container>\\r\\n\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n<!-- Phiếu xuất kho -->\\r\\n<div class=\\\"row invoice-form\\\" *ngIf=\\\"isPXKDaiLy || isPXKNB\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item *ngIf=\\\"!isTT78\\\" dataField=\\\"invoice_release_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.invoice_releases, onValueChanged: templateChange, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.invoice_form }} {{_translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Mẫu hóa đơn -->\\r\\n        <dxi-item *ngIf=\\\"isTT78\\\" dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Hợp đồng kinh tế số, ngày -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"delivery_order_number\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n            <dxo-label text=\\\"{{strTextHDKT}}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\" message=\\\"{{strTextHDKT}} {{_translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item [cssClass]=\\\"'max_right'\\\" dataField=\\\"delivery_order_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n            [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\">\\r\\n            <dxo-label text=\\\"{{strtextHDKTNgay}}\\\"></dxo-label>\\r\\n            <dxi-validation-rule *ngIf=\\\"isPXKDaiLy\\\" type=\\\"required\\\"\\r\\n              message=\\\"{{ strtextHDKTNgay }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Hình thức, lí do điều chỉnh -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"adjustment_form\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.adjustment_form}\\\"\\r\\n            editorType=\\\"dxSelectBox\\\" cssClass='pxk-left'\\r\\n            [editorOptions]=\\\"{items: select.adjustment_forms, onItemClick: adjustmentFormChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.adjustment_form}} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"adjustment_object\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.adjustment_object}\\\"\\r\\n            editorType=\\\"dxSelectBox\\\" cssClass='pxk'\\r\\n            [editorOptions]=\\\"{items: select.adjustment_objects, onItemClick: adjustmentObjectChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.adjustment_object}} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Của -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"delivery_order_by\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.of }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày hóa đơn, số hóa đơn -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"invoice_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n            [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate , onValueChanged: changeDateTime}\\\">\\r\\n            <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_date }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item cssClass=\\\"vat invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\" editorType=\\\"dxNumberBox\\\"\\r\\n            [editorOptions]=\\\"{ disabled: true}\\\" cssClass='pxk'>\\r\\n            <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Với -->\\r\\n        <dxi-item *ngIf=\\\"isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"search-mkh\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.with }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-autocomplete valueExpr=\\\"code\\\"\\r\\n                placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\" [dataSource]=\\\"customer_codes\\\"\\r\\n                [(value)]=\\\"frmData.customer_name\\\" (onItemClick)=\\\"customerCodeChoose($event)\\\"\\r\\n                (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n                <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                  <span>{{item.code}}: {{ item.name }}</span>\\r\\n                </div>\\r\\n              </dx-autocomplete>\\r\\n            </div>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.with }} {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"add_customer\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Email -->\\r\\n        <dxi-item *ngIf=\\\"!isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item [label]=\\\"{text: 'Email'}\\\"\\r\\n            [ngClass]=\\\"configs.system_parameter.view_bank_account_seller? 'vat layout_input' : ''\\\">\\r\\n            <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n              <div\\r\\n                class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n                <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                  <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                  </app-tag-input-email>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Loại tiền, tỷ giá -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"currency_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.currency_code }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.currency_code }} {{_translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"currency_rate\\\" editorType=\\\"dxNumberBox\\\" cssClass='pxk'\\r\\n            [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: '0,###.##'}\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.currency_rate }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- <dxi-item *ngIf=\\\"!isPXKDaiLy\\\"  itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n         \\r\\n        </dxi-item> -->\\r\\n        <!-- Về việc -->\\r\\n        <dxi-item *ngIf=\\\"!isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"delivery_order_content\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.delivery_order_content }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Người vận chuyển -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"isTT78 && !isPXKDaiLy\\\">\\r\\n          <dxi-item dataField=\\\"delivery_by\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.delivery_by }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule *ngIf=\\\"isPXKDaiLy\\\" type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.delivery_by }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Mã số thuế -->\\r\\n        <dxi-item *ngIf=\\\"isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"buyer_tax_code\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.tax_code }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Hình thức xuất -->\\r\\n          <dxi-item name=\\\"ht-xuat\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.export_form }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-select-box [(value)]=\\\"frmData.status\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\"\\r\\n                [disabled]=\\\"!configs.system_parameter.allow_keep_invoice_number\\\"></dx-select-box>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <!-- Số hóa đơn gốc -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button' *ngIf=\\\"isPXKDaiLy\\\">\\r\\n            <dxi-item name=\\\"origin-invoice-number\\\" cssClass='pxk-shd2 max_right'>\\r\\n              <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number_original}}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-text-box [(value)]=\\\"oldForm.invoice_number\\\" disabled=\\\"true\\\"></dx-text-box>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"origin_btn_options\\\" cssClass='btn-small'>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- MST kho nhận -->\\r\\n          <dxi-item *ngIf=\\\"isTT78 && !isPXKDaiLy\\\" dataField=\\\"buyer_tax_code\\\" [cssClass]=\\\"'max_right'\\\">\\r\\n            <dxo-label text=\\\"MST kho nhận\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Số hóa đơn gốc -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" cssClass='group-input-button' *ngIf=\\\"!isPXKDaiLy\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n            <dxi-item name=\\\"origin-invoice-number\\\" cssClass='pxk-shd'>\\r\\n              <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number_original}}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-text-box [(value)]=\\\"oldForm.invoice_number\\\" disabled=\\\"true\\\"></dx-text-box>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"origin_btn_options\\\" cssClass='btn-small'>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- hợp đồng -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"isTT78 && !isPXKDaiLy\\\">\\r\\n          <dxi-item dataField=\\\"transportation_contract\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.contract_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Hợp đồng số, Người vận chuyển -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isTT78 && isPXKDaiLy\\\">\\r\\n          <dxi-item dataField=\\\"delivery_by\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.delivery_by }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule *ngIf=\\\"isPXKDaiLy\\\" type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.delivery_by }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"transportation_contract\\\" [cssClass]=\\\"'max_right'\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.contract_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Lý do điều chỉnh -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" cssClass='group-input-button'>\\r\\n          <dxi-item dataField=\\\"destroy_reason\\\">\\r\\n            <dxo-label text=\\\"Lý do điều chỉnh \\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\" message=\\\"Lý do điều chỉnh {{_translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Phương thức vận chuyển -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"transportation_method\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.transportation_method }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.transportation_method }} {{_translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Xuất tại kho -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"search-mst\\\" dataField=\\\"from_warehouse\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: wavehourses, onValueChanged: from_warehouseChange, displayExpr: 'name', valueExpr: 'id',searchEnabled:true}\\\"\\r\\n            [cssClass]=\\\"'max_left'\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.from_warehouse }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.from_warehouse }} {{_translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"from_warehouse_btn_options\\\"\\r\\n            cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Nhập tại kho -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item dataField=\\\"to_warehouse\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: wavehourses, onValueChanged: to_warehouseChange, displayExpr: 'name', valueExpr: 'id',searchEnabled:true}\\\"\\r\\n            [cssClass]=\\\"'max_left'\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.to_warehouse }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.to_warehouse }} {{_translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"to_warehouse_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Địa chỉ kho xuất -->\\r\\n        <dxi-item *ngIf=\\\"isTT78  && !isPXKDaiLy\\\" itemType=\\\"group\\\">\\r\\n          <dxi-item dataField=\\\"shiping_point\\\">\\r\\n            <dxo-label text=\\\"Địa chỉ kho xuất\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\" message=\\\"Địa chỉ kho xuất {{_translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Địa chỉ kho nhập -->\\r\\n        <dxi-item *ngIf=\\\"isTT78  && !isPXKDaiLy\\\" itemType=\\\"group\\\">\\r\\n          <dxi-item dataField=\\\"place_of_delivery\\\">\\r\\n            <dxo-label text=\\\"Địa chỉ kho nhập\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\" message=\\\"Địa chỉ kho nhập {{_translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"isTT78\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Số bảng kê -->\\r\\n          <dxi-item dataField=\\\"list_number\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n            <dxo-label text=\\\"Số bảng kê\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- Ngày bảng kê -->\\r\\n          <dxi-item dataField=\\\"list_date\\\" [template]=\\\"'notifydate'\\\" [cssClass]=\\\"'max_right'\\\">\\r\\n            <dxo-label text=\\\"Ngày bảng kê\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\"\\r\\n          *ngIf=\\\"configs.integrate_parameter.integrate_econtract && configs.integrate_parameter.integrate_econtract.is_delivery\\\">\\r\\n          <!-- Số điện thoại người vận chuyển -->\\r\\n          <dxi-item dataField=\\\"carrier_mobile\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.carrier_mobile }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.carrier_mobile }} {{_translate.VALIDATION.not_pattern}}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <!-- Email người vận chuyển -->\\r\\n          <dxi-item dataField=\\\"carrier_email\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.carrier_email }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.email\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.carrier_email }} {{_translate.VALIDATION.not_pattern}}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Ghi chú -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item cssClass=\\\"vat invoice-note\\\" dataField=\\\"note\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.note }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n\\r\\n        <!-- Email -->\\r\\n        <dxi-item *ngIf=\\\"isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item [label]=\\\"{text: 'Email'}\\\"\\r\\n            [ngClass]=\\\"configs.system_parameter.view_bank_account_seller? 'vat layout_input' : ''\\\">\\r\\n            <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n              <div\\r\\n                class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n                <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                  <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                  </app-tag-input-email>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n\\r\\n        <!-- Trường mở rộng -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\" [formData]=\\\"frmData\\\" [customerTempt]=\\\"customerTempt\\\"\\r\\n            [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'invoice_options'\\\"></app-form-extend>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <div *dxTemplate=\\\"let d of 'notifydate'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.list_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\" [displayFormat]=\\\"'dd/MM/yyyy'\\\"\\r\\n          [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{_translate.CONFIRM.update_customer}}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{_translate.CONTROLL.LABEL.update}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \"::ng-deep .vat.invoice-number-create-invoice input{color:red;font-weight:bold}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align .dx-field-item-label .dx-field-item-label-content{min-width:171px !important}::ng-deep .vat1.layout_input span.dx-field-item-label-content{width:128px !important}::ng-deep .vat3.layout_input span.dx-field-item-label-content{width:153px !important}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code:focus{outline:none}::ng-deep .pxk span.dx-field-item-label-content{width:135px !important}::ng-deep .dx-item .pxk-left{min-width:315px !important}::ng-deep .dx-item .pxk-shd dx-text-box .dx-texteditor-input{padding:0px 10px !important}::ng-deep .dx-item .pxk-shd2 dx-text-box .dx-texteditor-input{padding:0px 10px !important}::ng-deep .dx-item .pxk-shd2 span.dx-field-item-label-content{width:135px !important}::ng-deep .vat-handle span.dx-field-item-label-content{width:153px !important}.tmr{display:flex;flex-wrap:nowrap;padding:0 !important}\\n\"","import { Component, OnInit, Input, Output, EventEmitter, OnDestroy, ViewChildren, AfterViewInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { Library, Helper, AuthService, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { pattern } from '@config/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { AddCustomerComponent } from '@shared/index';\r\nimport { ChooseHdckComponent } from '@modules/handle-invoice/components/choose-hdck/choose-hdck.component';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { Wavehourse } from '@modules/products/shared';\r\nimport { AddWavehourseComponent } from '@shared/modules/some/components/add-wavehourse/add-wavehourse.component';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport * as _ from 'lodash';\r\n\r\n@Component({\r\n  selector: 'adjust-vat-form-invoice',\r\n  templateUrl: './adjust-form-invoice.component.html',\r\n  styleUrls: ['./adjust-form-invoice.component.scss']\r\n})\r\nexport class AdjustFormInvoiceComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  routeSub: Subscription;\r\n\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @Input() wavehourses: any;\r\n  @Input() ttDaXuatHoaDon: boolean = false;\r\n  @Input() frmData: any;\r\n  @Input() dataSource: any;\r\n  @Input() oldForm: any;\r\n  @Input() type: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() extentionGrid: any;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('onRefreshForm') onRefreshForm = new EventEmitter<any>();\r\n  @Output('adjustmentObjectChange') adjustmentObject = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  @Output('onTemplateTT78TypeChange') onTemplateTT78TypeChange = new EventEmitter<any>();\r\n  @Input() infoDangKy: any;\r\n  @Input() isTT78: boolean;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() fileData: any;\r\n  @Input() isShowButtonWaiteSign: boolean;\r\n  loaiHoaDon: any;\r\n  bsModalRef: BsModalRef;\r\n  bsModalHdckRef: BsModalRef;\r\n  dataTaxCode: any;\r\n  emails: any = [];\r\n  wavehourse: any;\r\n  private arrEmail: any = [];\r\n\r\n  select: any = {};\r\n  pattern = pattern;\r\n  tax_codes: any = [];\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  minNgayVB: string;\r\n  maxNgayVB: string;\r\n  customerCurent: any = {};\r\n  showPopup = false;\r\n  tax_code_search: any;\r\n  template_temp: any;\r\n  strtextHDKTNgay: any;\r\n  strTextHDKT: any;\r\n  isShowToKhai = false;\r\n  isPXKDaiLy = false;\r\n  isPXKNB = false;\r\n  @ViewChild(FormExtendComponent) formExtend: FormExtendComponent;\r\n  disableForm = {\r\n    tax_code: true,\r\n    rest: true\r\n  };\r\n  formItems = [];\r\n  customForms = [];\r\n  customerTempt = {};\r\n  // thay đổi disable của 3 input customer_name, buyer_name, buyer_address\r\n  tod: any = {};\r\n  disableInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuatOptions = [];\r\n  _translate: any;\r\n  configs: any;\r\n  isShowBanGiaoXe: boolean;\r\n  isShowBaoDuongXe: boolean;\r\n  origin_btn_options = {\r\n    text: '', icon: 'fa fa-eye', type: 'default',\r\n    onClick: () => {\r\n      if (this.oldForm.template_code.indexOf('02GTTT') >= 0 || this.oldForm.template_code == \"2\" || this.oldForm.template_code.indexOf('07KPTQ') >= 0) {\r\n        window.open(`/system/sale-invoice/${this.oldForm.id}`, '_blank');\r\n      } else {\r\n        if (this.loaiHoaDon == \"03XKNB\" || this.loaiHoaDon == sEnum.loaihoadon.HGDL04) {\r\n          if (this.loaiHoaDon == \"03XKNB\") {\r\n            window.open(`/system/transport-invoice/${this.oldForm.id}`, '_blank');\r\n          } else {\r\n            window.open(`/system/agent-invoice/${this.oldForm.id}`, '_blank');\r\n          }\r\n        } else {\r\n          window.open(`/system/vat-invoice/${this.oldForm.id}`, '_blank');\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  mst_btn_options = {\r\n    text: '', icon: 'assets/img/icons/Them.png', type: 'default',\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n          if (customer.bank_account_number) {\r\n            this.frmData.bank_account_number = customer.bank_account_number;\r\n          }\r\n          if (customer.bank_name) {\r\n            this.frmData.bank_name = customer.bank_name;\r\n          }\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n  add_customer = {\r\n    text: \"\",\r\n    icon: \"assets/img/icons/Them.png\",\r\n    type: \"default\",\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false,\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n          if (customer.bank_account_number) {\r\n            this.frmData.bank_account_number = customer.bank_account_number;\r\n          }\r\n          if (customer.bank_name) {\r\n            this.frmData.bank_name = customer.bank_name;\r\n          }\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n  from_warehouse_btn_options = {\r\n    text: \"\",\r\n    icon: \"assets/img/icons/Them.png\",\r\n    type: \"default\",\r\n    onClick: () => {\r\n      this.wavehourse = new Wavehourse();\r\n      this.wavehourse.order = this.wavehourses.length + 1;\r\n      const initialState = {\r\n        wavehourse: this.wavehourse,\r\n        onSave: (wavehourse) => {\r\n          this.wavehourse = wavehourse;\r\n          this.wavehourses.unshift(this.wavehourse);\r\n          this.frmData.from_warehouse = this.wavehourse.id;\r\n          this.frmData.from_warehouse_name = this.wavehourse.name;\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddWavehourseComponent, {\r\n        class: 'second child-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }\r\n  };\r\n  to_warehouse_btn_options = {\r\n    text: \"\",\r\n    icon: \"assets/img/icons/Them.png\",\r\n    type: \"default\",\r\n    onClick: () => {\r\n      this.wavehourse = new Wavehourse();\r\n      this.wavehourse.order = this.wavehourses.length + 1;\r\n      const initialState = {\r\n        wavehourse: this.wavehourse,\r\n        onSave: (wavehourse) => {\r\n          this.wavehourse = wavehourse;\r\n          this.wavehourses.unshift(this.wavehourse);\r\n          this.frmData.to_warehouse = this.wavehourse.id;\r\n          this.frmData.to_warehouse_name = this.wavehourse.name;\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddWavehourseComponent, {\r\n        class: 'second child-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }\r\n  };\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.minNgayVB = moment(this.oldForm.invoice_date).format('YYYY-MM-DD');\r\n    this.maxNgayVB = moment(new Date()).format('YYYY-MM-DD');\r\n    this.loaiHoaDon = this.route.snapshot.data.type;\r\n    if (this.loaiHoaDon == '03XKNB')\r\n      this.isPXKNB = true;\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n    if (this.isPXKDaiLy) {\r\n      this.strTextHDKT = this._translate.CONTROLL.LABEL.deconomic_contract_number;\r\n      this.strtextHDKTNgay = \"Hợp đồng kinh tế ngày\";\r\n    } else {\r\n      this.strTextHDKT = this._translate.CONTROLL.LABEL.delivery_order_number;\r\n      this.strtextHDKTNgay = this._translate.CONTROLL.LABEL.date;\r\n    }\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      this.configs = this.authService.getConfigs();\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.currency_codes = data.init[1].DM_LOAI_TIEN;\r\n      this.select.customer_types = data.init[1].DM_NHOM_KHACH_HANG;\r\n      this.select.export_places = data.init[1].DM_NOI_XUAT_HOA_DON;\r\n\r\n      this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate, this.frmData.status);\r\n      if (this.loaiHoaDon == '03XKNB' || this.loaiHoaDon == sEnum.loaihoadon.HGDL04) {\r\n        this.select.adjustment_forms = VSelectBoxService._adjustmentFormsPXK(this._translate);\r\n      } else {\r\n        this.select.adjustment_forms = VSelectBoxService._adjustmentForms(this._translate);\r\n      }\r\n      this.select.customer_object_codes = VSelectBoxService._customerObject(this._translate);\r\n      if (this.configs.system_parameter.allow_keep_invoice_number === false) {\r\n        this.htXuatOptions = this.htXuatOptions.filter(e => e.code !== sEnum.hinhThucXuat.XuatChoKy);\r\n      }\r\n      if (this.isTT78) {\r\n        // this.select.adjustment_forms = this.select.adjustment_forms.filter(p => p.code != 'TANG_GIAM');\r\n        let temptTT78 = [];\r\n        temptTT78 = data.init[0].filter(item => item.template_type !== 'HOA_DON_KHOI_TAO_TU_MAY_TINH_TIEN' && item.template_type !== 'PHIEU_THU_MAY_TINH_TIEN');\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (Number.parseInt(this.frmData.invoice_number) > 0) {\r\n            if (this.frmData.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.frmData.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n        if (this.frmData.id)\r\n          this.changeTemplateInvoice(this.frmData.invoice_date);\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n      }\r\n    });\r\n    let buyer_address = this.frmData.buyer_address;\r\n    this.select.adjustment_objects = [];\r\n    if (this.frmData.adjustment_form) {\r\n      this.adjustmentFormChange({ value: this.frmData.adjustment_form, isInit: true });\r\n    }\r\n\r\n    // Set disabled cho đơn vị tổ chức\r\n    this.setDisabledByCustomer_object_code(this.frmData.customer_object_code);\r\n    this.setPropertyOfForm(this.frmData.adjustment_form, this.frmData.adjustment_object, true);\r\n    // tìm kiếm mã số thuế\r\n    buyer_address = this.frmData.buyer_address;\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n\r\n    // Khởi tạo ban đầu\r\n    this.extentionGrid.ma_hang = false;\r\n    this.extentionGrid.so_lo = false;\r\n    this.extentionGrid.han_dung = false;\r\n    this.extentionGrid.nuoc_san_xuat = false;\r\n    this.extentionGrid.don_hang_hop_dong = false;\r\n    this.extentionGrid.ma_quan_ly = false;\r\n\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n            this.isShowBanGiaoXe = true;\r\n          else\r\n            this.isShowBanGiaoXe = false;\r\n          if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n            this.isShowBaoDuongXe = true;\r\n          else\r\n            this.isShowBaoDuongXe = false;\r\n          // Nếu là mẫu html\r\n          if (item.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe)\r\n            this.isShowToKhai = true;\r\n          else\r\n            this.isShowToKhai = false;\r\n          // setTimeout(() => {\r\n          this.template_temp = item;\r\n          // })\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n            this.isShowBanGiaoXe = true;\r\n          else\r\n            this.isShowBanGiaoXe = false;\r\n          if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n            this.isShowBaoDuongXe = true;\r\n          else\r\n            this.isShowBaoDuongXe = false;\r\n          // Nếu là mẫu html\r\n          if (item.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe)\r\n            this.isShowToKhai = true;\r\n          else\r\n            this.isShowToKhai = false;\r\n          this.template_temp = item;\r\n\r\n          // })\r\n        }\r\n      });\r\n    }\r\n\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n  }\r\n\r\n  formDuLieuMoRong(item) {\r\n    this.customForms = [];\r\n    this.customerTempt = {};\r\n    Helper.resetObject(this.formItems);\r\n    if (item.fields && item.fields.length > 0) {\r\n      const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n      if (_arrayGrid && _arrayGrid.length > 0) {\r\n        this.extentionGrid.ma_hang = false;\r\n        this.extentionGrid.so_lo = false;\r\n        this.extentionGrid.han_dung = false;\r\n        this.extentionGrid.nuoc_san_xuat = false;\r\n        this.extentionGrid.don_hang_hop_dong = false;\r\n        this.extentionGrid.ma_quan_ly = false;\r\n        for (let i = 0; i < _arrayGrid.length; i++) {\r\n          const column = _arrayGrid[i]['name'];\r\n          const value = _arrayGrid[i]['is_show'];\r\n          const _ma = VStringService._convertToViKdau(column);\r\n          this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n        }\r\n      }\r\n      let _dulieumorong = _.cloneDeep(item.fields).filter(x => x.type === '4');\r\n      const invoice_options = this.frmData.invoice_options;\r\n\r\n      if (invoice_options.length > 0) {\r\n        _dulieumorong = _dulieumorong.map((dl) => {\r\n          let option = invoice_options.find(x => x.code == dl.code)\r\n          if (option) {\r\n            dl.value = option.value;\r\n          }\r\n          return dl;\r\n        });\r\n      }\r\n\r\n      this.frmData.invoice_options = _dulieumorong;\r\n      if (_dulieumorong.length > 0) {\r\n        this.formExtend.createForm(this.customForms, _dulieumorong)\r\n      }\r\n      _dulieumorong.forEach(value => {\r\n        this.customerTempt[value.code] = value.value;\r\n      });\r\n    }\r\n    else {\r\n      this.frmData.invoice_options = [];\r\n      this.extentionGrid.ma_hang = false;\r\n      this.extentionGrid.so_lo = false;\r\n      this.extentionGrid.han_dung = false;\r\n      this.extentionGrid.nuoc_san_xuat = false;\r\n      this.extentionGrid.don_hang_hop_dong = false;\r\n      this.extentionGrid.ma_quan_ly = false;\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // this.listDxForm._results[1].readOnly = true;\r\n    this.formDuLieuMoRong(this.template_temp);\r\n    let arrD:any = document.querySelectorAll('.btn-small');\r\n    arrD.forEach((item) => {\r\n      item.parentElement.parentElement.style.flex = '0 0 0 ';\r\n    })\r\n  }\r\n\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n  public removeReadonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n      // item.instance.resetValues();\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n  ////// Tạo form mở rộng\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (const key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.invoice_options = _dulieumorong;\r\n    });\r\n  }\r\n\r\n  setDisabledByCustomer_object_code(value) {\r\n    this.tod.customer_name = false;\r\n    this.tod.buyer_name = false;\r\n    this.tod.buyer_address = false;\r\n\r\n    switch (value) {\r\n      case 'DOANH_NGHIEP':\r\n        break;\r\n      case 'CA_NHAN':\r\n        this.frmData.customer_name = '';\r\n        this.tod.customer_name = true;\r\n        break;\r\n      case 'KHACH_LE':\r\n        this.frmData.customer_name = '';\r\n        this.frmData.buyer_address = '';\r\n        this.tod.customer_name = true;\r\n        this.tod.buyer_address = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  getHtXuatValue() {\r\n    return this.frmData.status;\r\n  }\r\n\r\n  // gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    if (this.frmData) {\r\n      if (this.frmData.adjustment_object === 'MST') {\r\n        this.adjustmentObject.emit('THONG_TIN_MST');\r\n      }\r\n      if (this.frmData.adjustment_object === 'KH_DC') {\r\n        this.adjustmentObject.emit('THONG_TIN_KH_DC');\r\n      }\r\n    }\r\n  }\r\n\r\n  // sự kiện\r\n  taxCodeKeyUp = (e) => {\r\n    const str = this.frmData.buyer_tax_code;\r\n    const len = str.length;\r\n    if (len >= 3) {\r\n      this.vatService.searchMST(str).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          const arr = [];\r\n          rs.data.customers.forEach(item => {\r\n            arr.push(item);\r\n          });\r\n          this.tax_codes = arr;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  adjustmentFormChange = (e) => {\r\n    this.disableForm = { tax_code: true, rest: true };\r\n    let value = e.value;\r\n    if (!e.isInit) {\r\n      this.onRefreshForm.emit();\r\n      value = e.itemData.code;\r\n    }\r\n    switch (value) {\r\n      case 'THONG_TIN':\r\n        if (!e.isInit)\r\n          this.frmData.adjustment_object = '';\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Mã số thuế',\r\n            code: 'MST'\r\n          },\r\n          {\r\n            name: 'Tiền chữ',\r\n            code: 'TIEN_CHU'\r\n          },\r\n          {\r\n            name: 'Tên khách hàng, Địa chỉ, ...',\r\n            code: 'KH_DC'\r\n          },\r\n        ];\r\n        if (this.frmData.total_payment_in_word) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Tăng \", \"\");\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Giảm \", \"\");\r\n        }\r\n        break;\r\n      case 'TANG':\r\n        if (!e.isInit)\r\n          this.frmData.adjustment_object = '';\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Hàng hóa dịch vụ',\r\n            code: 'HH_DV'\r\n          },\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC_TANG'\r\n          },\r\n        ];\r\n        if (this.frmData.total_payment_in_word) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Giảm \", \"Tăng \");\r\n          if (this.isTT78) {\r\n            if (this.frmData.total_payment_in_word.includes('Tăng') == false)\r\n              this.frmData.total_payment_in_word = \"Tăng \" + this.frmData.total_payment_in_word;\r\n          }\r\n        }\r\n        break;\r\n      case 'GIAM':\r\n        if (!e.isInit)\r\n          this.frmData.adjustment_object = '';\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Hàng hóa dịch vụ',\r\n            code: 'HH_DV'\r\n          },\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC_GIAM'\r\n          },\r\n        ];\r\n        if (this.frmData.total_payment_in_word)\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Tăng \", \"Giảm \");\r\n        if (this.isTT78) {\r\n          if (this.frmData.total_payment_in_word && this.frmData.total_payment_in_word.includes('Giảm') == false)\r\n            this.frmData.total_payment_in_word = \"Giảm \" + this.frmData.total_payment_in_word;\r\n        }\r\n        break;\r\n      case 'TANG_GIAM':\r\n        if (this.isPXKNB || this.isPXKDaiLy) {\r\n          this.select.adjustment_objects = [\r\n            {\r\n              name: 'Điều chỉnh tăng giảm đồng thời và Khác',\r\n              code: 'TANG_GIAM'\r\n            },\r\n          ];\r\n        } else {\r\n          this.select.adjustment_objects = [\r\n            {\r\n              name: 'Điều chỉnh tăng giảm đồng thời',\r\n              code: 'TANG_GIAM'\r\n            },\r\n          ];\r\n        }\r\n        this.frmData.adjustment_object = 'TANG_GIAM';\r\n        if (this.frmData.total_payment_in_word) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Tăng \", \"\");\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Giảm \", \"\");\r\n        }\r\n        this.disableForm = { tax_code: false, rest: false };\r\n        this.setPropertyOfForm(this.frmData.adjustment_form, this.frmData.adjustment_object, e.isInit);\r\n        break;\r\n      case 'KHAC':\r\n        if (!e.isInit)\r\n          this.frmData.adjustment_object = '';\r\n        this.select.adjustment_objects = [\r\n          {\r\n            name: 'Khác',\r\n            code: 'KHAC'\r\n          },\r\n        ];\r\n        if (this.frmData.total_payment_in_word) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Tăng \", \"\");\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"Giảm \", \"\");\r\n        }\r\n        this.disableForm = { tax_code: false, rest: false };\r\n        this.frmData.adjustment_object = 'KHAC';\r\n        this.setPropertyOfForm(this.frmData.adjustment_form, this.frmData.adjustment_object, e.isInit);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  adjustmentObjectChange = (e) => {\r\n    this.onRefreshForm.emit();\r\n    this.setPropertyOfForm(this.frmData.adjustment_form, e.itemData.code, false);\r\n  }\r\n  setPropertyOfForm(adjustment_form, adjustment_object, isInit) {\r\n    if (adjustment_object === 'MST') {\r\n      this.disableForm = { tax_code: false, rest: true };\r\n      this.adjustmentObject.emit('THONG_TIN_MST');\r\n    } else if (adjustment_form === 'THONG_TIN' && adjustment_object === 'KH_DC') {\r\n      this.disableForm = { tax_code: false, rest: false };\r\n      this.adjustmentObject.emit('THONG_TIN_KH_DC');\r\n    } else if (adjustment_form === 'THONG_TIN' && adjustment_object === 'TIEN_CHU') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('THONG_TIN_TIEN_CHU');\r\n    } else if (adjustment_form === 'KHAC' && adjustment_object === 'KHAC') {\r\n      this.disableForm = { tax_code: false, rest: false };\r\n      this.adjustmentObject.emit('KHAC_KHAC');\r\n    } else if (adjustment_form === 'TANG' && adjustment_object === 'HH_DV') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('TANG_HH_DV');\r\n    } else if (adjustment_form === 'TANG' && adjustment_object === 'KHAC_TANG') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('TANG_KHAC_TANG');\r\n    } else if (adjustment_form === 'GIAM' && adjustment_object === 'HH_DV') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('GIAM_HH_DV');\r\n    } else if (adjustment_form === 'GIAM' && adjustment_object === 'KHAC_GIAM') {\r\n      this.disableForm = { tax_code: true, rest: true };\r\n      this.adjustmentObject.emit('GIAM_KHAC_GIAM');\r\n    } else if (adjustment_form === 'TANG_GIAM' && adjustment_object === 'TANG_GIAM') {\r\n      this.disableForm = { tax_code: false, rest: false };\r\n      this.adjustmentObject.emit('TANG_GIAM');\r\n    }\r\n    if (adjustment_object !== 'TANG_GIAM' && !isInit) {\r\n      this.frmData.buyer_tax_code = this.oldForm.buyer_tax_code;\r\n      this.frmData.customer_name = this.oldForm.customer_name;\r\n      this.frmData.buyer_address = this.oldForm.buyer_address;\r\n      this.frmData.buyer_name = this.oldForm.buyer_name;\r\n      this.frmData.buyer_mobile = this.oldForm.buyer_mobile;\r\n    }\r\n  }\r\n\r\n  // reset trường mở rộng\r\n  public resetTMR() {\r\n    this.formExtend.resetForm();\r\n    this.formExtend.resetOptions();\r\n  }\r\n  taxCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  // total_payment_in_wordChange = (e) => {\r\n  //   if (this.frmData.adjustment_form === \"THONG_TIN\" && this.frmData.adjustment_object === \"TIEN_CHU\") {\r\n  //     let invoice_date = moment(this.oldForm.invoice_date).format(\"DD/MM/YYYY\");\r\n  //     this.dataSource.items()[0].product_name = `Điều chỉnh dòng số tiền bằng chữ của hóa đơn số ${this.oldForm.invoice_number}, ký hiệu ${this.oldForm.invoice_series} ngày ${invoice_date} từ: ${this.oldForm.total_payment_in_word} thành ${e.value}`;\r\n  //     this.productGrip.dataGrid.instance.refresh();\r\n  //   }\r\n  // }\r\n  customerCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    if (customer.bank_account_number) {\r\n      this.frmData.bank_account_number = customer.bank_account_number;\r\n    }\r\n    if (customer.bank_name) {\r\n      this.frmData.bank_name = customer.bank_name;\r\n    }\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customer_object_codeChange = (e) => {\r\n    this.setDisabledByCustomer_object_code(e.value);\r\n  }\r\n\r\n  templateChange = (e) => {\r\n    this.select.invoice_releases.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.template_id = item.template_id;\r\n        this._objTemplateSelect = item;\r\n        this.onTemplateTypeChange.emit(item);\r\n        if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n          this.isShowBanGiaoXe = true;\r\n        else\r\n          this.isShowBanGiaoXe = false;\r\n        if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n          this.isShowBaoDuongXe = true;\r\n        else\r\n          this.isShowBaoDuongXe = false;\r\n        if (!this._objTemplateSelect.is_discount) {\r\n          this.dataSource.items().forEach(item => {\r\n            item.discount = null;\r\n            item.amount_discount = null;\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n          }\r\n        }\r\n        // Nếu là mẫu html\r\n        this.formDuLieuMoRong(item);\r\n      }\r\n    });\r\n  }\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.invoice_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateTT78TypeChange.emit(item);\r\n        if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n          this.isShowBanGiaoXe = true;\r\n        else\r\n          this.isShowBanGiaoXe = false;\r\n        if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n          this.isShowBaoDuongXe = true;\r\n        else\r\n          this.isShowBaoDuongXe = false;\r\n        if (item.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe)\r\n          this.isShowToKhai = true;\r\n        else\r\n          this.isShowToKhai = false;\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        if (!this._oTemplateTT78.is_discount) {\r\n          this.invoice_products.load().then((dataSource) => {\r\n            dataSource.forEach((item, index) => {\r\n              item.discount = null;\r\n              item.amount_discount = null;\r\n            });\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n          }\r\n        }\r\n\r\n        // Nếu là mẫu html\r\n        this.formDuLieuMoRong(item);\r\n      }\r\n    });\r\n  };\r\n\r\n  currencyCodeChange = (e) => {\r\n    if (this.frmData.currency_code === 'VND') {\r\n      this.frmData.currency_rate = null;\r\n    }\r\n    this.doctienbangchu(this.frmData.total_payment, this.frmData.currency_code);\r\n    // this.frmData.total_payment_in_word = Helper.tienBangChu(this.frmData.total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n  }\r\n  exportPlaceChange = (e) => {\r\n    this.select.export_places.forEach(item => {\r\n      if (e.value === item.code) {\r\n        this.frmData.export_address = item.dia_chi;\r\n      }\r\n    });\r\n  }\r\n  currencyRateChange = (e) => {\r\n    if (!this.isTT78)\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n    else\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  xuatMauBienBan() {\r\n    Library.showloading();\r\n    const inv = Object.assign({}, this.oldForm);\r\n    inv.doc_relate_date = this.frmData.doc_relate_date;\r\n    inv.doc_relate_symbol = this.frmData.doc_relate_symbol;\r\n    inv.destroy_reason = this.frmData.destroy_reason;\r\n\r\n    inv.invoice_files = [];\r\n    this.vatService.xuatMauBienBanDc(inv).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n\r\n    // if (!this.frmData.doc_relate_symbol) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.doc_relate_symbol +\" \"+this._translate.VALIDATION.required, 'error');\r\n    // } else if (!this.frmData.doc_relate_date) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.doc_relate_date +\" \"+this._translate.VALIDATION.required, 'error');\r\n    // }\r\n    // //  else if (!this.frmData.destroy_reason) {\r\n    // //   Library.notify(this._translate.CONTROLL.LABEL.destroy_reason +\" \"+this._translate.VALIDATION.required, 'error');\r\n    // // }\r\n    // else {\r\n    //   const initialState = {\r\n    //     oldForm: this.oldForm,\r\n    //     frmData: this.frmData,\r\n    //     _objTemplateSelect: this._objTemplateSelect,\r\n    //     fileData: this.fileData,\r\n    //     onSave: (data) => {\r\n    //       console.log(data);\r\n    //       this.frmData.id = data.id;\r\n    //       this.frmData.invoice_date = data.invoice_date;\r\n    //       this.frmData.invoice_number = data.invoice_number;\r\n    //     }\r\n    //   };\r\n    //   this.bsModalRef = this.modalService.show(ReportAdjustInvComponent, {\r\n    //     backdrop: 'static',\r\n    //     keyboard: false,\r\n    //     class: 'modal-lg full-modal',\r\n    //     initialState\r\n    //   });\r\n    // }\r\n  }\r\n\r\n  showModalHdck() {\r\n    const initialState = {\r\n      invoiceNumberOrigin: this.oldForm.invoice_number,\r\n      invoiceDateOrigin: this.oldForm.invoice_date,\r\n      invoiceReleaseId: this.frmData.invoice_release_id,//this.oldForm.invoice_release_id,\r\n      onSave: (data) => {\r\n        this.frmData.status = sEnum.statusInv.ChoKy;\r\n        this.frmData.id = data.id;\r\n        this.frmData.invoice_date = data.invoice_date;\r\n        this.frmData.invoice_number = data.invoice_number;\r\n      }\r\n    };\r\n    this.bsModalHdckRef = this.modalService.show(ChooseHdckComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-lg full-modal',\r\n      initialState\r\n    });\r\n  }\r\n\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n  updateCustomerInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  updateTaxcodeInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.tax_code) !== VStringService._getValueToString(this.frmData.buyer_tax_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n  capNhatDmKhachHang() {\r\n    this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.buyer_tax_code);\r\n    this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n    this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n    this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.buyer_name);\r\n    this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.buyer_mobile);\r\n    this.customerCurent.business_address = VStringService._getValueToString(this.frmData.buyer_address);\r\n    this.customerCurent.email = VStringService._getValueToString(this.frmData.buyer_email);\r\n    this.customerCurent.bank_name = VStringService._getValueToString(this.frmData.bank_name);\r\n    this.customerCurent.bank_account_number = VStringService._getValueToString(this.frmData.bank_account_number);\r\n    const data = { customer: this.customerCurent };\r\n    this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n      if (response.status === 'success') {\r\n        this.showPopup = false;\r\n      } else {\r\n        Library.notify(response.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n    });\r\n  }\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n  paymentMethodChange = (e) => {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.payment_method_view_name = _obj.name;\r\n    }\r\n  };\r\n\r\n  changeDateTime = (e) => {\r\n    this.changeTemplateInvoice(e.value);\r\n  }\r\n\r\n  changeTemplateInvoice(strDate) {\r\n    if (this.isTT78) {\r\n      let year = \"\";\r\n      if (VStringService._getValueToString(strDate) != \"\")\r\n        year = VStringService._getValueToString(strDate).substring(4, 2);\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n      }\r\n      let templates = this.select.templatesTT78;\r\n      this.select.templatesTT78 = [];\r\n      if (templates && templates.length > 0) {\r\n        templates.forEach(item => {\r\n          if (VStringService._getValueToString(item.name) != \"\")\r\n            item.name = item.name.replace(item.name.substring(4, 2), year);\r\n          // for (const key in item) {\r\n          //   if (item.hasOwnProperty(key)) {\r\n          //     const value = item[key];\r\n          //     this._oTemplateTT78[key] = value;\r\n          //   }\r\n          // }\r\n          if (item.value === this.frmData.template_id) {\r\n            this.onTemplateTT78TypeChange.emit(item);\r\n            //  item.invoice_series = item.invoice_series.replace(item.invoice_series.substring(3, 1), year);\r\n            // this.frmData.invoice_series = item.invoice_series;\r\n            // this.frmData.template_code = item.template_code;\r\n          }\r\n          this.select.templatesTT78.push(item);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  disableTemplateInput() {\r\n    if (this.frmData.invoice_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  doctienbangchu(total_payment, currency_code) {\r\n    if (VStringService._getValueToString(this.frmData.adjustment_object) == \"TANG_GIAM\" && this.isTT78) {\r\n      let number_money = Math.abs(total_payment);\r\n      let c_money = Helper.tienBangChu(number_money, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n      this.frmData.total_payment_in_word = c_money;\r\n      if (total_payment < 0) {\r\n        this.frmData.total_payment_in_word = \"Giảm \" + c_money;\r\n        if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to reduce by \")\r\n        }\r\n      }\r\n      else if (total_payment > 0) {\r\n        this.frmData.total_payment_in_word = \"Tăng \" + c_money;\r\n        if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to increase by \")\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      this.frmData.total_payment_in_word = Helper.tienBangChu(total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n      if (this.isTT78) {\r\n        if (VStringService._getValueToString(this.frmData.total_payment_in_word) != \"\" && this.frmData.total_payment_in_word != \"Không đồng chẵn.\") {\r\n          if (this.frmData.adjustment_form === 'TANG') {\r\n            this.frmData.total_payment_in_word = \"Tăng \" + this.frmData.total_payment_in_word;\r\n            if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n              this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to increase by \")\r\n            }\r\n          }\r\n          if (this.frmData.adjustment_form == 'GIAM') {\r\n            this.frmData.total_payment_in_word = \"Giảm \" + this.frmData.total_payment_in_word;\r\n            if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n              this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to reduce by \")\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  changeTaxCode(e) {\r\n    this.tax_code_search = e.value;\r\n    this.onFieldDataChanged();\r\n  }\r\n  searchTaxCode() {\r\n    Library.showloading();\r\n    this.tax_code_search = this.frmData.buyer_tax_code;\r\n    if (!this.tax_code_search) {\r\n      Library.notify(\"Vui lòng nhập mã số thuế!\", \"error\")\r\n    }\r\n    else {\r\n      if (!this.disableForm.rest) {\r\n        this.vatService.getInfoCompany(this.tax_code_search).subscribe(res => {\r\n          if (res.status == \"success\") {\r\n            this.dataTaxCode = res.data.customer;\r\n            this.frmData.customer_name = this.dataTaxCode.name;\r\n            this.frmData.buyer_address = this.dataTaxCode.business_address;\r\n          }\r\n        })\r\n      }\r\n    }\r\n    this.onFieldDataChanged();\r\n    setTimeout(() => {\r\n      Library.hideloading();\r\n    }, 1000);\r\n  }\r\n  from_warehouseChange = (e) => {\r\n    let _obj = this.wavehourses.filter(p => p.id == e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.from_warehouse_name = _obj.name;\r\n      this.frmData.shiping_point = _obj.address;\r\n    }\r\n  }\r\n  to_warehouseChange = (e) => {\r\n    let _obj = this.wavehourses.filter(p => p.id == e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.to_warehouse_name = _obj.name;\r\n      this.frmData.place_of_delivery = _obj.address;\r\n    }\r\n  }\r\n  allowEditAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"container-fluid\\\" style=\\\"margin-bottom: 0!important; padding-left: 0!important;\\\"\\r\\n  *ngIf=\\\"!isPXKDaiLy && !isPXKNB\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"pl-0 col-md-12\\\">\\r\\n      <div class=\\\"button-redirect\\\">\\r\\n        <ul class=\\\"nav nav-tabs\\\">\\r\\n          <li class=\\\"nav-item\\\">\\r\\n            <a class=\\\"nav-link active\\\" href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.BUTTON.report_adjustment}}</a>\\r\\n          </li>\\r\\n          <li class=\\\"nav-item\\\">\\r\\n            <a class=\\\"nav-link \\\" (click)=\\\"routeReport()\\\" href=\\\"javascript:void(0)\\\">\\r\\n              {{this.textReport}}\\r\\n            </a>\\r\\n          </li>\\r\\n        </ul>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<form (ngSubmit)=\\\"onSubmit()\\\">\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <!-- phần form thông tin -->\\r\\n    <adjust-vat-form-invoice [type]=\\\"1\\\" [frmData]=\\\"frmData\\\" [oldForm]=\\\"oldForm\\\" [dataSource]=\\\"dataSource\\\"\\r\\n      [invoice_products]=\\\"invoice_products\\\" [formatter]=\\\"formatter\\\" [_objTemplateSelect]=\\\"_objTemplateSelect\\\"\\r\\n      [fileData]=\\\"fileData\\\" (adjustmentObjectChange)=\\\"adjustmentObjectChange($event)\\\"\\r\\n      (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\" [extentionGrid]=\\\"extentionGrid\\\"\\r\\n      [_oTemplateTT78]=\\\"_oTemplateTT78\\\" [isTT78]=\\\"isTT78\\\" [infoDangKy]=\\\"infoDangKy\\\"\\r\\n      (onTemplateTT78TypeChange)=\\\"onTemplateTT78TypeChange($event)\\\" [isShowButtonWaiteSign]=\\\"isShowButtonWaiteSign\\\"\\r\\n      [wavehourses]=\\\"wavehourses\\\" (onRefreshForm) = \\\"onRefreshForm()\\\" [ttDaXuatHoaDon]=\\\"ttDaXuatHoaDon\\\"></adjust-vat-form-invoice>\\r\\n\\r\\n    <!-- <dx-button id=\\\"btn-chossen-hdck\\\" (click)=\\\"showModalHdck()\\\" icon=\\\"assets\\\\img\\\\icons\\\\GiuSo.png\\\" text=\\\"Chọn hóa đơn chờ ký\\\" type=\\\"default\\\"></dx-button> -->\\r\\n\\r\\n    <!-- table product -->\\r\\n    <adjust-vat-product-grip #child [dataSource]=\\\"dataSource\\\" [invoice_products]=\\\"invoice_products\\\"\\r\\n      [formatter]=\\\"formatter\\\" [oldForm]=\\\"oldForm\\\" [frmData]=\\\"frmData\\\" [extentionGrid]=\\\"extentionGrid\\\" [isTT78]=\\\"isTT78\\\"\\r\\n      [_oTemplateTT78]=\\\"_oTemplateTT78\\\" [_objTemplateSelect]=\\\"_objTemplateSelect\\\">\\r\\n    </adjust-vat-product-grip>\\r\\n\\r\\n    <!-- <button type=\\\"button\\\" (click)=\\\"updateCustomer()\\\">aa</button> -->\\r\\n\\r\\n    <div class=\\\"table-footer\\\">\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_after_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.tong_tien, disabled: true,step:'0'}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-2\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-vat-table-footer\\\" dataField=\\\"total_amount_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.tien_thue, disabled: true, step:'0'}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-after-vat-table-footer\\\" dataField=\\\"amount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-4\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_without_discount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.thanh_tien_chua_ck, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <!-- vùng chọn file -->\\r\\n    <div class=\\\"row after-table\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <file-upload-multiple [fileData]=\\\"fileData\\\" (fileChange)=\\\"getFileData($event)\\\"></file-upload-multiple>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-2\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <!-- <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item dataField=\\\"aaa\\\" [label]=\\\"{text: 'Tiền phí khác'}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: '0,###'}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"on_currency_amount\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.on_currency_amount}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: '0,###', disabled: checkDisabledTotalPaymentInWord(),onKeyDown:keyDown}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"amount\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.amount}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: checkDisabledTotalPaymentInWord(),onKeyDown:keyDown}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"amount_vat5\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.amount_vat5}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.tien_thue, disabled: checkDisabledTotalPaymentInWord(),onKeyDown:keyDown}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"amount_vat10\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.amount_vat10}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.tien_thue, disabled: checkDisabledTotalPaymentInWord(),onKeyDown:keyDown}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"total_payment\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.amount_after_vat}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.tong_tien, onValueChanged: totalPaymentChange, disabled: checkDisabledTotalPaymentInWord(),onKeyDown:keyDown}\\\"></dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form> -->\\r\\n        <div\\r\\n          *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY' && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY_THU_TIEN' && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n        ||(invoiceTemplateTT78 && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY' && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY_THU_TIEN' && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\"\\r\\n          class=\\\"vat money-pull-right\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.on_currency_amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.on_currency_amount\\\" tabIndex=\\\"-1\\\" format=\\\"0,###\\\" step=\\\"0\\\"\\r\\n                [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_amount_discount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_discount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_chiet_khau\\\"\\r\\n                [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat5}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat5\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberChange()\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat8}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat8\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberChange()\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat10}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat10\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberChange()\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat_other\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberChange()\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_DANG_KIEM') || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_DANG_KIEM'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.fees}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.registry_fee\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_XANG_DAU') || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_XANG_DAU'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_fee\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_TONG_HOP' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_CHUNG' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_VE')) || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_TONG_HOP' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_CHUNG' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertax}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_tax\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_TONG_HOP' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_CHUNG' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_VE')) || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_TONG_HOP' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_CHUNG' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_charge\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" [disabled]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div\\r\\n          *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\r\\n        || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')))\\\"\\r\\n          class=\\\"vat money-pull-right\\\">\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.surcharge}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_charge\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY') || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [format]=\\\"formatter.tong_tien\\\" (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                [(value)]=\\\"frmData.total_other\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN') || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [(value)]=\\\"frmData.other_fee\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.refund_fee}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.money_ticket_return\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_fare_after_tax}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_ticket_with_vat\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n            || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\"\\r\\n              class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertax}}</div>\\r\\n            <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')\\r\\n            || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\"\\r\\n              class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertaxair}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_tax\\\" [format]=\\\"formatter.tong_tien\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                tabIndex=\\\"-1\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')|| (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [format]=\\\"formatter.tong_tien\\\" (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                [(value)]=\\\"frmData.other_fee\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')|| (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_fare}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_ticket\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [disabled]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_other\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [disabled]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n        </div>\\r\\n      </div>\\r\\n      <div\\r\\n        *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\r\\n      || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')))\\\"\\r\\n        class=\\\"col-md-12\\\" style=\\\"margin:10px 0 !important;\\\">\\r\\n        <h3 class=\\\"font-weight-bold\\\">{{ _translate.CONTROLL.LABEL.ticketing_service_fee}}</h3>\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\">\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 52%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.ticketing_service_charge}}\\r\\n              </div>\\r\\n              <div style=\\\"width: 48%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-number-box [(value)]=\\\"frmData.money_service_ticket\\\" format=\\\"#,###\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                  (onValueChanged)=\\\"onVatChange()\\\"></dx-number-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\" style=\\\"max-width: 23%\\\">\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.tax_GTGT}}</div>\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-select-box [(value)]=\\\"frmData.vat_service_ticket\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" tabIndex=\\\"-1\\\"\\r\\n                  [items]=\\\"select.vats\\\" (onValueChanged)=\\\"onVatChange()\\\"></dx-select-box>\\r\\n\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\" style=\\\"max-width: 19%\\\">\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat}}</div>\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-number-box [(value)]=\\\"frmData.total_vat_service_ticket\\\" format=\\\"#,###\\\" tabIndex=\\\"-1\\\"\\r\\n                  [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" step=\\\"0\\\"></dx-number-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-4 \\\" style=\\\"max-width: 33%\\\">\\r\\n            <div class=\\\"prt-1 money-pull-right\\\">\\r\\n              <div class=\\\"dx-field\\\" style=\\\"width: 395px\\\">\\r\\n                <div style=\\\"width: 44.3%\\\" class=\\\"dx-field-label\\\">{{\\r\\n                  _translate.CONTROLL.LABEL.total_after_tax_service_charge}}</div>\\r\\n                <div style=\\\"width: 55.7%\\\" class=\\\"dx-field-value\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.total_service_ticket_with_vat\\\" format=\\\"#,###\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                    [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n                  </dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Nghị định 92 -->\\r\\n      <div class=\\\"col-md-8\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_exemption_decree\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Đã giảm </p>\\r\\n          <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.text_exemption_decree\\\"\\r\\n            [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> tương ứng 30% mức tỷ lệ để tính thuế giá trị gia tăng theo Nghị\\r\\n            quyết số 406/NQ-UBTVQH15</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Nghị định 43 -->\\r\\n      <!-- Tỷ lệ % doanh thu -->\\r\\n      <div class=\\\"col-md-8\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Tỷ lệ % trên doanh thu </p>\\r\\n\\r\\n          <div class=\\\"toggle normal\\\" style=\\\"display: flex; align-items: center; margin-top: -6px;\\\">\\r\\n            <img id=\\\"link14\\\" style=\\\"cursor: pointer;padding-left: 2px;padding-right: 7px\\\"\\r\\n              src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" (click)=\\\"guideSales()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n          </div>\\r\\n          <dx-popover target=\\\"#link14\\\" position=\\\"top\\\" [width]=\\\"350\\\" [(visible)]=\\\"isDisplayGuideSale\\\">\\r\\n            <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n              <p>- 1% : Phân phối, cung cấp hàng hóa dịch vụ</p>\\r\\n              <p>- 5% : Dịch vụ xây dựng không bao thầu nguyên vật liệu</p>\\r\\n              <p>- 3% : Sản xuất, vận tải, dịch vụ có gắn với hàng hóa, xây dựng có bao thầu nguyên vật liệu</p>\\r\\n              <p>- 2% : Hoạt động kinh doanh khác</p>\\r\\n            </div>\\r\\n          </dx-popover>\\r\\n\\r\\n          <dx-number-box [width]=\\\"50\\\" [(value)]=\\\"frmData.sales_percentage\\\"\\r\\n            (onValueChanged)=\\\"onChangeSalePercen($event)\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> %</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Đã giảm 20% -->\\r\\n      <div class=\\\"col-md-7\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Đã giảm </p>\\r\\n          <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.money_resolution_43\\\"\\r\\n            [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> {{ _translate.THONG_TIN.tinh_thue_nq101}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-5\\\" style=\\\"margin-top: 10px\\\">\\r\\n        <div class=\\\"vat money-pull-right\\\">\\r\\n          <!-- Tổng tiền giảm trừ không chịu thuế -->\\r\\n          <div class=\\\"dx-field\\\" *ngIf=\\\"isHdGTGT\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_deduction_not_taxable}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_deduction_not_taxable\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                tabIndex=\\\"-1\\\" step=\\\"0\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tổng tiền giảm trừ khác -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.other_total_deduction}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_total_deduction\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_payment\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                (onValueChanged)=\\\"totalPaymentChange($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item *ngIf=\\\"frmData.adjustment_form == 'THONG_TIN' && frmData.adjustment_object == 'TIEN_CHU'\\\"\\r\\n              cssClass=\\\"vat total-payment-in-word\\\" name=\\\"origin-invoice-number\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.amount_pre_adjusted}}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-text-box [(value)]=\\\"oldForm.total_payment_in_word\\\" readOnly=\\\"true\\\"></dx-text-box>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat total-payment-in-word\\\"\\r\\n              [label]=\\\"{text: _translate.CONTROLL.LABEL.total_payment_in_word}\\\" dataField=\\\"total_payment_in_word\\\"\\r\\n              [editorOptions]=\\\"{readOnly: checkDisabledTotalPaymentInWord(), onValueChanged: total_payment_in_wordChange}\\\">\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\" *ngIf=\\\"!isPXKDaiLy && !isPXKNB\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" icon=\\\"{{_translate.ICONS.view}}\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" icon=\\\"{{_translate.ICONS.view}}\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"inChuyenDoi()\\\" icon=\\\"{{_translate.ICONS.print}}\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.print_conversion}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"isTuChoi\\\" (click)=\\\"xemlydotuchoi()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.reason_reject}}\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !isAccessExportInv\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.sign_approval}}\\\"\\r\\n            icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"eSubmit('TRINH_KY')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <!-- <button type=\\\"button\\\" (click)=\\\"test()\\\">Test</button> -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\" appScrollToInvalid\\r\\n            icon=\\\"{{_translate.ICONS.export_inv}}\\\" (click)=\\\"eSubmit('XUAT')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" appScrollToInvalid\\r\\n            icon=\\\"{{_translate.ICONS.save}}\\\" (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <dx-button appBackButton type=\\\"default\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\" *ngIf=\\\"isPXKDaiLy || isPXKNB\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <!-- Xem trước PXK -->\\r\\n          <dx-button *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\"\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.preview_internal_transport }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Xem PXK -->\\r\\n          <dx-button *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\"\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.view_internal_transport }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- In chuyển đổi PXK -->\\r\\n          <dx-button *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"inChuyenDoi()\\\" [(icon)]=\\\"this._translate.ICONS.print\\\"\\r\\n            [text]=\\\"inChuyenDoiText()\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <!-- Thủ kho xuất ký (đang chờ biến cấu hình để bắt ràng buộc nếu biến đó là true thì k hiện nút này)-->\\r\\n          <dx-button (click)=\\\"thukhoxuatky()\\\" *ngIf=\\\"isPXKNB && isShowThuKhoXuatKy\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.pencil\\\" text=\\\"{{_translate.CONTROLL.BUTTON.warehouse_keeper_sign }}\\\"\\r\\n            type=\\\"default\\\"></dx-button>\\r\\n          <!-- Hủy lệnh điều động -->\\r\\n          <dx-button *ngIf=\\\"isShowKyLenhDieuDong && isShowHuyLenhDD && isPXKNB\\\" (click)=\\\"huylenhdieudong()\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.delete\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel_maneuver_command }}\\\"\\r\\n            type=\\\"default\\\"></dx-button>\\r\\n          <!-- Ký lệnh điều động -->\\r\\n          <dx-button *ngIf=\\\"isShowKyLenhDieuDong && isPXKNB\\\" (click)=\\\"submitlenhdieudong()\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.pencil\\\" text=\\\"{{_translate.CONTROLL.BUTTON.sign_maneuver_command }}\\\"\\r\\n            type=\\\"default\\\"></dx-button>\\r\\n          <!-- Xuất phiếu xuất kho -->\\r\\n          <dx-button *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet && isAccessExportInv\\\" appScrollToInvalid\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.export_internal_transport }}\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\"\\r\\n            (click)=\\\"eSubmit('XUAT')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <!-- Ghi tạm -->\\r\\n          <dx-button *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet\\\" appScrollToInvalid\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.save_temporary }}\\\" icon=\\\"assets\\\\img\\\\icons\\\\GhiTam.png\\\"\\r\\n            [disabled]=\\\"isDisable\\\" (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\">\\r\\n          </dx-button>\\r\\n          <!-- Tạo mới -->\\r\\n          <dx-button *ngIf=\\\"!showTraLai && !showKyDuyet\\\" text=\\\"{{_translate.CONTROLL.BUTTON.create_new }}\\\"\\r\\n            icon=\\\"assets\\\\img\\\\icons\\\\LapHD.png\\\" (click)=\\\"handleAddNew()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Trả lại -->\\r\\n          <!-- <dx-button *ngIf=\\\"showTraLai\\\" text=\\\"{{_translate.CONTROLL.BUTTON.return }}\\\"\\r\\n            icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"traLai()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button *ngIf=\\\"!ttDaXuatHoaDon && showKyDuyet\\\" text=\\\"Ký duyệt\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\"\\r\\n            (click)=\\\"eSubmit('XUAT')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"></dx-button> -->\\r\\n          <!-- Quay lại -->\\r\\n          <dx-button appBackButton type=\\\"default\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\"\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.close }}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</form>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}#btn-chossen-hdck{margin-top:10px;margin-left:50%;margin-bottom:10px}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:25px}::ng-deep .mauhoadon .modal-content{width:67%}::ng-deep .mauhoadon43 .modal-content{width:72%}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild, OnDestroy, AfterViewInit, ChangeDetectorRef, ViewEncapsulation } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { Base64 } from 'js-base64';\r\nimport { SocketService, AuthService, Library, Helper, VPreviewInvService, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { AdjustProductGripComponent } from '../adjust-product-grip/adjust-product-grip.component';\r\nimport { AdjustFormInvoiceComponent } from '../adjust-form-invoice/adjust-form-invoice.component';\r\nimport { VatService, InvoiceModel } from '@modules/vat/shared';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { SendInvoicesComponent } from '@modules/handle-invoice/components/send-invoices/send-invoices.component';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { Observable } from 'rxjs';\r\nimport * as _ from 'lodash';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { PublicFeature } from '@angular/core/src/render3';\r\nimport { NotifyReduceTaxComponent } from '@shared/index';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-adjust-invoice',\r\n  templateUrl: './adjust-invoice.component.html',\r\n  styleUrls: ['./adjust-invoice.component.scss']\r\n})\r\nexport class AdjustInvoiceComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  @ViewChild(AdjustProductGripComponent) productGrip: AdjustProductGripComponent;\r\n  @ViewChild(AdjustFormInvoiceComponent) formInvoice: AdjustFormInvoiceComponent;\r\n  bsModalRef: BsModalRef;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  frmTraLai = {\r\n    reason: \"\"\r\n  };\r\n  frmData: InvoiceModel = new InvoiceModel(5);\r\n  oldForm: any;\r\n  showKyDuyet: boolean = false;\r\n  isShowKyLenhDieuDong: boolean;\r\n  isExportInvoice: boolean;\r\n  showTraLai: boolean = false;\r\n  isCheckLenhDieuDong = false;\r\n  jsonProductFirst: any;\r\n  isDisable = false;\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  dataInvoice: any;\r\n  // vat-product-grip component\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n  select: any = {};\r\n  invoice_products_old: any;\r\n  invoice_old: any;\r\n  _objTemplateSelect: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  configs: any;\r\n  tempKiFile = 0;\r\n  textReport: any;\r\n  listDM: any;\r\n  extentionGrid: any = {};\r\n  windowPreviewBeforeSubmit: any;\r\n  isShowThuKhoXuatKy: boolean;\r\n  confirmCheckPreview = false;\r\n  isTuChoi = false;\r\n  isAccessExportInv = false;\r\n  isRoleThuKhoXuatKy = false;\r\n  // danh sách data trong file\r\n  fileData: Array<any> = [];\r\n  _translate: any;\r\n  isHdGTGT = true;\r\n  valueChange: string;\r\n  invoicereleaseTempt: any;\r\n  total_payment: any;\r\n  nodeSign: any;\r\n  isShowButtonWaiteSign: boolean = true;\r\n  _oTemplateTT78: any = {};\r\n  invoiceTemplateTT78: any;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  isPassNQ43: boolean = false;\r\n  wavehourses: any;\r\n  isPXKDaiLy = false;\r\n  isPXKNB = false\r\n  loaiHoaDon: any;\r\n  resultCompareData: boolean;\r\n  isShowHuyLenhDD: boolean = false;\r\n  isDisplayGuideSale: boolean = false;\r\n  invoices: any = [];\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private confirmService: ConfirmService,\r\n    private spinner: NgxSpinnerService,\r\n    private configsService: ConfigsService,\r\n    private customeModalService: MyBsModalService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.configs = this.authService.getConfigs();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status === sEnum.statusInv.DaXuat) {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  routeReport() {\r\n    if (this.dataInvoice.origin_id !== null) {\r\n      if (this.dataInvoice.status === 'GHI_TAM') {\r\n        this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.origin_id, 'DIEU_CHINH']);\r\n      } else {\r\n        this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.id, 'DIEU_CHINH']);\r\n      }\r\n    } else {\r\n      this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.id, 'DIEU_CHINH']);\r\n    }\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let status;\r\n    if (!this.frmData.id && !this.frmData.invoice_number) {\r\n      status = 'THEM_MOI';\r\n    }\r\n    if (this.frmData.id && !this.frmData.invoice_number) {\r\n      status = 'GHI_TAM';\r\n    }\r\n    if (this.frmData.id && this.frmData.invoice_number) {\r\n      status = 'GIU_SO';\r\n    }\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (status === 'THEM_MOI') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTam(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamTT78(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else if (status === 'GHI_TAM') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else if (status === 'GIU_SO') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    let sub = this.vatService.xuatHoaDon({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n      invoice_files: this.frmData.invoice_files\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.isExportInvoice = true;\r\n        this.disablleScreen();\r\n        this.isShowButtonWaiteSign = false;\r\n        this.fileData = this.frmData.invoice_files;\r\n        this.setDataSessionStorage(this.frmData);\r\n        if (this.isRoleThuKhoXuatKy && !this.frmData.warehouse_keeper_signed)\r\n          this.isShowThuKhoXuatKy = true;\r\n        if (this.configs.system_parameter.enable_send_wrong_process && this.isTT78) {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n          else\r\n            this.startProcess_TBSaiSot();\r\n        }\r\n        else\r\n          Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    // kết nối websocket\r\n    this.connectWebsocket();\r\n    let currentUsers = this.authService.getCurrentUser();\r\n    let listpermission = currentUsers.user.permissions.split(',');\r\n    let oThuKhoXuat = listpermission.filter(p => p == sEnum.permissions.ThuKhoXuatKy);\r\n    if (oThuKhoXuat.length > 0)\r\n      this.isRoleThuKhoXuatKy = true;\r\n    else\r\n      this.isRoleThuKhoXuatKy = false;\r\n    this.loaiHoaDon = this.route.snapshot.data.type;\r\n    if (this.loaiHoaDon == '03XKNB')\r\n      this.isPXKNB = true;\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n    let isViewTT32 = false;\r\n    if (this.route.snapshot.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      if (data.init[4].length > 0) {\r\n        this.textReport = this._translate.CONTROLL.BUTTON.view_report;\r\n      } else {\r\n        this.textReport = this._translate.CONTROLL.BUTTON.create_report;\r\n      }\r\n      this.configs = this.authService.getConfigs();\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.frmData.total_payment_in_word = null;\r\n      if (this.infoDangKy) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n          this.isTT78 = true;\r\n      }\r\n      if (this.isTT78 == true && isViewTT32)\r\n        this.isTT78 = false;\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n\r\n        temptTT78 = data.init[0];\r\n\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (data.init[3] && Number.parseInt(data.init[3].invoice_number) > 0) {\r\n            if (data.init[3].is_invoice_with_code != this.infoDangKy.is_invoice_with_code && data.init[3].xml_type != '1') {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == data.init[3].is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n      }\r\n      if (data.status === 'dieuchinhmoi') {\r\n        this.khoiTaoKhiThemMoi(data.init[3]);\r\n        this.oldForm = data.init[3];\r\n        this.wavehourses = data.init[6];\r\n      } else {\r\n        this.khoiTaoKhiSua(data.init[3]);\r\n        this.oldForm = data.init[3].origin;\r\n        this.wavehourses = data.init[6];\r\n      }\r\n      if (data.init[4].length > 0 && this.isTT78) {\r\n        let oReport = data.init[4][data.init[4].length - 1];\r\n        if (oReport)\r\n          this.frmData.destroy_reason = oReport.adjustment_reason;\r\n      }\r\n      if (this.oldForm.template_code.indexOf('02GTTT') >= 0 || this.oldForm.template_code == \"2\" || this.oldForm.template_code.indexOf('07KPTQ') >= 0) {\r\n        this.isHdGTGT = false;\r\n      }\r\n      this.dataInvoice = data.init[3];\r\n    });\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.some(item => {\r\n        if (item.value === this.oldForm.invoice_release_id) {\r\n          this._objTemplateSelect = item;\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.some(item => {\r\n        if (item.value === this.oldForm.template_id) {\r\n          this.invoiceTemplateTT78 = item;\r\n          for (const key in item) {\r\n            if (item.hasOwnProperty(key)) {\r\n              this._oTemplateTT78[key] = item[key];\r\n            }\r\n          }\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n    const currentUser = this.authService.getCurrentUser();\r\n    if (currentUser && currentUser.account && (currentUser.account.tax_code == \"0102519041-999\" || currentUser.account.tax_code == \"8888888803\" || currentUser.account.tax_code == \"9999999671\"))\r\n      this.isPassNQ43 = true;\r\n    let listpermissions = currentUser.user.permissions.split(',');\r\n    let _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          if (this.ttDaXuatHoaDon)\r\n            this.sendData_TBSaiSot(data.Data.Content);\r\n          else\r\n            this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          if (this.ttDaXuatHoaDon)\r\n            this.getXml_TBSaiSot();\r\n          else {\r\n            this.frmData.issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        } else {\r\n          this.frmData.invoice_files.forEach(item => {\r\n            if (item.file_name === data.Data.Name) {\r\n              item.file_content = data.Data.Content;\r\n            }\r\n          });\r\n          this.tempKiFile++;\r\n          if (this.tempKiFile === this.frmData.invoice_files.length) {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  khoiTaoKhiThemMoi(data) {\r\n    // khởi tạo mới lưới\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.invoice_products_old = data.invoice_products;\r\n    this.invoice_old = data;\r\n    // tạo mới đối tượng file\r\n    this.fileData = [];\r\n    // khởi tạo dữ liệu form điều chỉnh\r\n    this.frmData.fillFormDieuChinh(data);\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0);\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id == this.frmData.template_id) {\r\n          this.invoicereleaseTempt = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      if (this.select.templatesTT78.length) {\r\n        this.select.templatesTT78.forEach(item => {\r\n          if (item.value === this.frmData.template_id) {\r\n            this.invoiceTemplateTT78 = item;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  checkDisabledTotalPaymentInWord() {\r\n    if ((this.frmData.adjustment_form == sEnum.adjustmentForm.thong_tin && this.frmData.adjustment_object == sEnum.adjustmentForm.tien_chu) || this.frmData.adjustment_form == sEnum.adjustmentForm.khac || this.frmData.auto_value) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    // khởi tạo lưới từ dữ liệu sửa\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.setInvoice_products_data(data.invoice_products)\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    this.frmData.adjustment_type = 5;\r\n    if (VStringService._getValueToString(this.frmData.approve_status) == sEnum.statusApprove.TuChoi) {\r\n      this.isTuChoi = true;\r\n    }\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id == this.frmData.template_id) {\r\n          this.invoicereleaseTempt = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.invoiceTemplateTT78 = item;\r\n        }\r\n      });\r\n    }\r\n    // lấy file\r\n    // this.fileData = [];\r\n    this.fileData = data.invoice_files;\r\n    // this.fileData = data.invoice_files;\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n\r\n    // co cho sua luoi hang hoa ko\r\n    let temp = this.frmData.adjustment_form + '_' + this.frmData.adjustment_object;\r\n    if (temp === 'THONG_TIN_MST' || temp === 'THONG_TIN_KH_DC' || temp === 'THONG_TIN_TIEN_CHU') {\r\n      this.productGrip.gripAllowEdit = false;\r\n    } else {\r\n      this.productGrip.gripAllowEdit = true;\r\n    }\r\n    if (temp === 'TANG_HH_DV' || temp === 'GIAM_HH_DV') {\r\n      this.setContentProductNameV2('', 'select');\r\n    }\r\n    if (VStringService._getValueToString(this.frmData.adjustment_object) == \"TANG_GIAM\" && !this.isTT78) {\r\n      this.productGrip.ShowAndHidePhuongThucDC(true);\r\n      this.productGrip.gripAllowEdit = true;\r\n    }\r\n    let ts = this.frmData.buyer_address;\r\n    if (this.frmData.status === sEnum.statusInv.DaXuat || this.frmData.status === sEnum.statusInv.ChoKy)\r\n      this.isShowButtonWaiteSign = false;\r\n\r\n  }\r\n\r\n  /** Tương tác giữa các component */\r\n  getDataInChildForm(e) {\r\n    this.frmData = e;\r\n    if (this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'MST') {\r\n      this.dataSource.items()[0].product_name = `Điều chỉnh mã số thuế Công ty/đơn vị mua hàng từ ${this.oldForm.buyer_tax_code} thành ${this.frmData.buyer_tax_code}`;\r\n      this.productGrip.dataGrid.instance.refresh();\r\n    } else if (this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'KH_DC') {\r\n      if (this.oldForm.customer_name !== this.frmData.customer_name && this.oldForm.buyer_address === this.frmData.buyer_address) {\r\n        this.dataSource.items()[0].product_name = `Điều chỉnh tên đơn vị mua hàng từ ${this.oldForm.customer_name} thành ${this.frmData.customer_name}`;\r\n      } else if (this.oldForm.customer_name === this.frmData.customer_name && this.oldForm.buyer_address !== this.frmData.buyer_address) {\r\n        this.dataSource.items()[0].product_name = `Điều chỉnh địa chỉ của đơn vị mua hàng từ ${this.oldForm.buyer_address} thành ${this.frmData.buyer_address}`;\r\n      } else if (this.oldForm.customer_name === this.frmData.customer_name && this.oldForm.buyer_address === this.frmData.buyer_address) {\r\n        this.dataSource.items()[0].product_name = '';\r\n      } else {\r\n        this.dataSource.items()[0].product_name = `Điều chỉnh tên đơn vị mua hàng từ ${this.oldForm.customer_name} thành ${this.frmData.customer_name}\\nĐiều chỉnh địa chỉ của đơn vị mua hàng từ ${this.oldForm.buyer_address} thành ${this.frmData.buyer_address}`;\r\n      }\r\n      this.productGrip.dataGrid.instance.refresh();\r\n    }\r\n  }\r\n\r\n  total_payment_in_wordChange = (e) => {\r\n    if (this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'TIEN_CHU') {\r\n      let invoice_date = moment(this.oldForm.invoice_date).format('DD/MM/YYYY');\r\n      this.dataSource.items()[0].product_name = `Điều chỉnh dòng số tiền bằng chữ của hóa đơn số ${this.oldForm.invoice_number}, ký hiệu ${this.oldForm.invoice_series} ngày ${invoice_date} từ: ${this.oldForm.total_payment_in_word} thành ${e.value}`;\r\n      this.productGrip.dataGrid.instance.refresh();\r\n    }\r\n  };\r\n\r\n  updateSomeTotalInput(e) {\r\n    // this.dataSource = e[0];\r\n    // this.invoice_products = e[1];\r\n    // this.formatter = e[2];\r\n    // let\r\n    //   amount = null, total_amount_vat = null, amount_after_vat = null, total_amount_product_vat0 = null, amount_vat5 = null, amount_vat10 = null,\r\n    //   total_amount_product_vat5 = null, total_amount_product_vat10 = null, total_amount_product_vatx = null;\r\n\r\n    // let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n    // let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    // let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n    // this.dataSource.items().forEach(item => {\r\n    //   item.amount = (item.amount !== null) ? this.roundNumber(item.amount, decimal_amount) : null;\r\n    //   item.amount_vat = (item.amount_vat !== null) ? this.roundNumber(item.amount_vat, decimal_amount_vat) : null;\r\n    //   item.amount_after_vat = (item.amount_after_vat !== null) ? this.roundNumber(item.amount_after_vat, decimal_amount_after_vat) : null;\r\n\r\n    //   if (item.amount !== null) amount += item.amount;\r\n    //   if (item.amount_vat !== null) total_amount_vat += item.amount_vat;\r\n    //   if (item.amount_after_vat !== null) amount_after_vat += item.amount_after_vat;\r\n    //   if (item.vat == 5) amount_vat5 += item.amount_vat;\r\n    //   if (item.vat == 10) amount_vat10 += item.amount_vat;\r\n    //   if (item.vat == -1) total_amount_product_vatx += item.amount;\r\n    //   if (item.vat == 0 && item.vat != \"\") total_amount_product_vat0 += item.amount;\r\n    //   if (item.vat == 5) total_amount_product_vat5 += item.amount;\r\n    //   if (item.vat == 10) total_amount_product_vat10 += item.amount;\r\n    // });\r\n\r\n    // //set value\r\n    // this.frmData.amount = this.roundNumber(amount, decimal_amount);\r\n    // this.frmData.total_amount_vat = this.roundNumber(total_amount_vat, decimal_amount_vat);\r\n    // this.frmData.amount_after_vat = this.roundNumber(amount_after_vat, decimal_amount_after_vat);\r\n    // this.frmData.amount_vat5 = this.roundNumber(amount_vat5, decimal_amount_vat);\r\n    // this.frmData.amount_vat10 = this.roundNumber(amount_vat10, decimal_amount_vat);\r\n    // this.frmData.total_amount_product_vatx = this.roundNumber(total_amount_product_vatx, decimal_amount);\r\n    // this.frmData.total_amount_product_vat0 = this.roundNumber(total_amount_product_vat0, decimal_amount);\r\n    // this.frmData.total_amount_product_vat5 = this.roundNumber(total_amount_product_vat5, decimal_amount);\r\n    // this.frmData.total_amount_product_vat10 = this.roundNumber(total_amount_product_vat10, decimal_amount);\r\n    // this.frmData.total_payment = this.roundNumber(this.frmData.amount_after_vat, decimal_amount_after_vat);\r\n  }\r\n\r\n  fillAutoInput(e) {\r\n    this.frmData.auto_value = e;\r\n  }\r\n\r\n  // Lấy data khi chọn file đính kèm bảng kê\r\n  getFileData(fileData) {\r\n    this.fileData = fileData;\r\n  }\r\n\r\n  adjustmentObjectChange(v) {\r\n    this.doctienbangchu(this.frmData.total_payment, this.frmData.currency_code);\r\n    let _noiDungDC = '';\r\n    let isDC = false;\r\n    switch (v) {\r\n      case 'TANG_HH_DV':\r\n        this.setContentProductNameV2('', 'select');\r\n        this.productGrip.gripAllowEdit = true;\r\n        this.productGrip.ShowAndHidePhuongThucDC(false, 'TANG_HH_DV');\r\n        break;\r\n      case 'TANG_KHAC_TANG':\r\n        this.setContentProductName('', 'text');\r\n        this.productGrip.gripAllowEdit = true;\r\n        this.productGrip.ShowAndHidePhuongThucDC(false);\r\n        break;\r\n      case 'GIAM_HH_DV':\r\n        this.setContentProductNameV2('', 'select');\r\n        this.productGrip.gripAllowEdit = true;\r\n        this.productGrip.ShowAndHidePhuongThucDC(false, 'GIAM_HH_DV');\r\n        break;\r\n      case 'GIAM_KHAC_GIAM':\r\n        this.setContentProductName('', 'text');\r\n        this.productGrip.gripAllowEdit = true;\r\n        this.productGrip.ShowAndHidePhuongThucDC(false);\r\n        break;\r\n      case 'THONG_TIN_MST':\r\n        isDC = true;\r\n        if (this.frmData.buyer_tax_code && this.oldForm.buyer_tax_code !== this.frmData.buyer_tax_code) {\r\n          _noiDungDC = `Điều chỉnh mã số thuế Công ty/đơn vị mua hàng từ ${this.oldForm.buyer_tax_code} thành ${this.frmData.buyer_tax_code}`;\r\n        }\r\n        break;\r\n      case 'THONG_TIN_KH_DC':\r\n        isDC = true;\r\n        if (this.frmData.customer_name && this.oldForm.customer_name !== this.frmData.customer_name) {\r\n          _noiDungDC = `Điều chỉnh tên đơn vị mua hàng từ ${this.oldForm.customer_name} thành ${this.frmData.customer_name}`;\r\n        }\r\n        if (this.frmData.buyer_name && this.oldForm.buyer_name !== this.frmData.buyer_name) {\r\n          if (_noiDungDC) {\r\n            _noiDungDC += '\\n';\r\n          }\r\n          _noiDungDC += `Điều chỉnh tên người mua từ ${this.oldForm.buyer_name} thành ${this.frmData.buyer_name}`;\r\n        }\r\n        if (this.frmData.buyer_address && this.oldForm.buyer_address !== this.frmData.buyer_address) {\r\n          if (_noiDungDC) {\r\n            _noiDungDC += '\\n';\r\n          }\r\n          _noiDungDC += `Điều chỉnh địa chỉ của đơn vị mua hàng từ ${this.oldForm.buyer_address} thành ${this.frmData.buyer_address}`;\r\n        }\r\n        break;\r\n      case 'THONG_TIN_TIEN_CHU':\r\n        isDC = true;\r\n        if (this.frmData.total_payment_in_word && this.oldForm.total_payment_in_word !== this.frmData.total_payment_in_word) {\r\n          let invoice_date = moment(this.oldForm.invoice_date).format('DD/MM/YYYY');\r\n          _noiDungDC = `Điều chỉnh dòng số tiền bằng chữ của hóa đơn số ${this.oldForm.invoice_number}, ký hiệu ${this.oldForm.invoice_series} ngày ${invoice_date} từ: ${this.oldForm.total_payment_in_word} thành ${this.frmData.total_payment_in_word}`;\r\n        }\r\n        break;\r\n      case 'KHAC_KHAC':\r\n        setTimeout(() => {\r\n          this.productGrip.changeColumnProductNameToText();\r\n        }, 100);\r\n        this.productGrip.ShowAndHidePhuongThucDC(false);\r\n        this.productGrip.gripAllowEdit = true;\r\n        break;\r\n      case 'TANG_GIAM':\r\n        this.setContentProductName('', 'text');\r\n        if (!this.isTT78)\r\n          this.productGrip.ShowAndHidePhuongThucDC(true);\r\n        else\r\n          this.productGrip.ShowAndHidePhuongThucDC(false);\r\n        this.productGrip.gripAllowEdit = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (isDC) {\r\n      this.setContentProductName(_noiDungDC, 'text');\r\n      this.productGrip.gripAllowEdit = false;\r\n      this.productGrip.ShowAndHidePhuongThucDC(false);\r\n    }\r\n  }\r\n\r\n  setContentProductName(value, type) {\r\n    setTimeout(() => {\r\n      if (this.productGrip.dataSource.items()[0]) {\r\n        if (!this.configs.system_parameter.is_add_product_code) {\r\n          this.productGrip.dataSource.items()[0].product_name = value;\r\n        }\r\n      }\r\n      if (type === 'text') {\r\n        this.productGrip.changeColumnProductNameToText();\r\n      } else if (type === 'select') {\r\n        this.productGrip.changeColumnProductNameToSelect();\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  setContentProductNameV2(value, type) {\r\n    setTimeout(() => {\r\n      if (type === 'text') {\r\n        this.productGrip.changeColumnProductNameToText();\r\n      } else if (type === 'select') {\r\n        this.productGrip.changeColumnProductNameToSelect();\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  /** Kết thúc */\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number === 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  // sự kiện form\r\n  totalPaymentChange = (e) => {\r\n    // this.onNumberChange();\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    this.doctienbangchu(e.value, currency_code);\r\n    // this.frmData.total_payment_in_word = Helper.tienBangChu(e.value, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n\r\n  // Các hàm chức năng chính\r\n  getDataPreview() {\r\n    let formatter: any = {};\r\n    formatter = this.configs.system_parameter.decpoint_is_dot ? { decimal: '.', thousands: ',' } : { decimal: ',', thousands: '.' };\r\n\r\n    let data = JSON.parse(JSON.stringify(this.frmData));\r\n    let decimal_quatity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n    let decimal_price = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia);\r\n    let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n    let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n    // let decimal_amount =  VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let total_amount_product_with_vatx = null, total_amount_product_with_vat0 = null, total_amount_product_with_vat5 = null,\r\n      total_amount_product_with_vat10 = null, amount_vat0 = null;\r\n\r\n\r\n    data.invoice_products.forEach(item => {\r\n      if (item.vat === -1) {\r\n        total_amount_product_with_vatx += item.amount_after_vat;\r\n      }\r\n      if (item.vat === 0) {\r\n        total_amount_product_with_vat0 += item.amount_after_vat;\r\n      }\r\n      if (item.vat === 0) {\r\n        amount_vat0 += item.amount_vat;\r\n      }\r\n      if (item.vat === 5) {\r\n        total_amount_product_with_vat5 += item.amount_after_vat;\r\n      }\r\n      if (item.vat === 10) {\r\n        total_amount_product_with_vat10 += item.amount_after_vat;\r\n      }\r\n      item['unit_name'] = '';\r\n      this.select.unit_codes.forEach(unit => {\r\n        item.discount = '';\r\n        item.total_discount = '';\r\n        if (unit.code === item.unit_code) {\r\n          item['unit_name'] = unit.name;\r\n        }\r\n      });\r\n      item.amount = Helper.formatMoney(item.amount, decimal_amount, formatter);\r\n      item.price = Helper.formatMoney(item.price, decimal_price, formatter);\r\n      item.quantity = Helper.formatMoney(item.quantity, decimal_quatity, formatter);\r\n      item.amount_vat = Helper.formatMoney(item.amount_vat, 0, formatter);\r\n      item.amount_after_vat = Helper.formatMoney(item.amount_after_vat, decimal_amount_after_vat, formatter);\r\n    });\r\n\r\n    data.total_amount_product_with_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n    data.total_amount_product_with_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n    data.total_amount_product_with_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n    data.total_amount_product_with_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n    data.amount_vat0 = amount_vat0;\r\n\r\n    data.total_amount_product_vatx = Helper.formatMoney(data.total_amount_product_vatx, decimal_amount, formatter);\r\n    data.total_amount_product_vat0 = Helper.formatMoney(data.total_amount_product_vat0, decimal_amount, formatter);\r\n    data.total_amount_product_vat5 = Helper.formatMoney(data.total_amount_product_vat5, decimal_amount, formatter);\r\n    data.total_amount_product_vat10 = Helper.formatMoney(data.total_amount_product_vat10, decimal_amount, formatter);\r\n    data.amount_vat5 = Helper.formatMoney(data.amount_vat5, decimal_amount_vat, formatter);\r\n    data.amount_vat10 = Helper.formatMoney(data.amount_vat10, decimal_amount_vat, formatter);\r\n    data.amount = Helper.formatMoney(data.amount, decimal_amount, formatter);\r\n    data.total_amount_vat = Helper.formatMoney(data.total_amount_vat, decimal_amount_vat, formatter);\r\n    data.total_payment = Helper.formatMoney(data.total_payment, decimal_amount_after_vat, formatter);\r\n\r\n    return data;\r\n  }\r\n\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n      let data = this.vatService.taodulieuXemTruocMau(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    let data = this.vatService.taodulieuXemMau(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    const data = this.vatService.taodulieuInChuyenDoi(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  ghiTam(data) {\r\n    this.isDisable = true\r\n    if (this.frmData.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.edit(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n            } else {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            } else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editTT78(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n            } else {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            } else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTam(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            } else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamTT78(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            } else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuatChoKy(data) {\r\n    Library.showloading();\r\n    if (!this.isTT78) {\r\n      let sub = this.vatService.xuatChoKy(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.isShowButtonWaiteSign = false;\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      let sub = this.vatService.xuatChoKyTT78(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.isShowButtonWaiteSign = false;\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatHoaDon(data) {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      if (this.frmData.invoice_files.length) {\r\n        this.frmData.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.frmData.invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n      }\r\n    }\r\n  }\r\n\r\n  _validForm(isOnlyCheckAm) {\r\n    let _isValid = true;\r\n    let invoice_products_exchange_rate;\r\n    let invoice_products;\r\n    let indexErr;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      invoice_products = dataSource.filter(item => item.product_name !== '');\r\n      invoice_products_exchange_rate = invoice_products.filter(item => item.product_exchange_rate);\r\n      indexErr = invoice_products.findIndex(item => !item.product_exchange_rate)\r\n    })\r\n    if (this.frmData.adjustment_object == \"TANG_GIAM\" && this.isTT78) {\r\n    }\r\n    else {\r\n      if ((this.frmData.amount_vat5 < 0 || this.frmData.amount_vat10 < 0 || this.frmData.total_payment < 0)\r\n      && !this.configs.system_parameter.allow_export_with_negative) {\r\n        Library.notify(this._translate.NOTIFY.discount_same_vat, 'error');\r\n        return false;\r\n      }\r\n    }\r\n    if (isOnlyCheckAm) {\r\n      return true;\r\n    }\r\n\r\n    if (this.frmData.currency_code && this.frmData.currency_code != \"VND\") {\r\n      if (invoice_products_exchange_rate && invoice_products_exchange_rate.length > 0) {\r\n        if (invoice_products_exchange_rate.length !== invoice_products.length) {\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(indexErr, 'product_exchange_rate'));\r\n          Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (!this.frmData.currency_rate) {\r\n          this.formInvoice.form.instance.getEditor('currency_rate').focus();\r\n          Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    if (this.frmData.customer_object_code === 'DOANH_NGHIEP' && this.frmData.template_code != '6') {\r\n      if (!this.frmData.customer_name) {\r\n        Library.notify(this._translate.CONTROLL.LABEL.customer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        if (this.formInvoice.form.instance.getEditor('customer_name')) {\r\n          this.formInvoice.form.instance.getEditor('customer_name').focus();\r\n        }\r\n        return false;\r\n      }\r\n      if (!this.frmData.buyer_address) {\r\n        Library.notify(this._translate.CONTROLL.LABEL.address + ' ' + this._translate.VALIDATION.required, 'error');\r\n        if (this.formInvoice.form.instance.getEditor('customer_name')) {\r\n          this.formInvoice.form.instance.getEditor('customer_name').focus();\r\n        }\r\n        return false;\r\n      }\r\n      if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n        if (!this.frmData.nationality) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('nationality').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_date').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_expiration_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n        let passport_expiration_date = new Date(this.frmData.passport_expiration_date);\r\n        let passport_date = new Date(this.frmData.passport_date);\r\n        if (passport_expiration_date <= passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + 'nhỏ hơn ' + this._translate.CONTROLL.LABEL.passport_date, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    if (this.frmData.customer_object_code === 'CA_NHAN' && this.frmData.template_code != '6') {\r\n      if (!this.frmData.buyer_name) {\r\n        if (this.formInvoice.form.instance.getEditor('buyer_name')) {\r\n          this.formInvoice.form.instance.getEditor('buyer_name').focus();\r\n        }\r\n        Library.notify(this._translate.CONTROLL.LABEL.buyer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (!this.frmData.buyer_address) {\r\n        if (this.formInvoice.form.instance.getEditor('buyer_address')) {\r\n          this.formInvoice.form.instance.getEditor('buyer_address').focus();\r\n        }\r\n        Library.notify(this._translate.CONTROLL.LABEL.address + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n        if (!this.frmData.nationality) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('nationality').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_date').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_expiration_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n        let passport_expiration_date = new Date(this.frmData.passport_expiration_date);\r\n        let passport_date = new Date(this.frmData.passport_date);\r\n        if (passport_expiration_date <= passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + 'nhỏ hơn ' + this._translate.CONTROLL.LABEL.passport_date, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    if (this.frmData.customer_object_code === 'KHACH_LE' && this.frmData.template_code != '6') {\r\n      if (!this.frmData.buyer_name) {\r\n        if (this.formInvoice.form.instance.getEditor('buyer_name')) {\r\n          this.formInvoice.form.instance.getEditor('buyer_name').focus();\r\n        }\r\n        Library.notify(this._translate.CONTROLL.LABEL.buyer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n        if (!this.frmData.nationality) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('nationality').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_date').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_expiration_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n        let passport_expiration_date = new Date(this.frmData.passport_expiration_date);\r\n        let passport_date = new Date(this.frmData.passport_date);\r\n        if (passport_expiration_date <= passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + 'nhỏ hơn ' + this._translate.CONTROLL.LABEL.passport_date, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    if (this.isTT78) {\r\n      if (this.frmData.destroy_reason === null || VStringService._getValueToString(this.frmData.destroy_reason) == \"\") {\r\n        this.formInvoice.form.instance.getEditor('destroy_reason').focus();\r\n        Library.notify(\"Lý do điều chỉnh\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (this.frmData.list_date && VStringService._getValueToString(this.frmData.list_number) == \"\") {\r\n        this.formInvoice.form.instance.getEditor('list_number').focus();\r\n        Library.notify(\"Số bảng kê\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (!this.frmData.list_date && VStringService._getValueToString(this.frmData.list_number) != \"\") {\r\n        Library.notify(\"Ngày bảng kê\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n    }\r\n    /* Hóa đơn bán hàng NQ43 */\r\n    if (this.frmData.is_resolution_43) {\r\n      if (!this.frmData.sales_percentage) {\r\n        Library.notify(\"Tỷ lệ % trên doanh thu không được để trống\", 'error');\r\n        return false;\r\n      }\r\n      else if (this.frmData.sales_percentage != 1 && this.frmData.sales_percentage != 2\r\n        && this.frmData.sales_percentage != 3 && this.frmData.sales_percentage != 5) {\r\n        Library.notify(\"Tỷ lệ % trên doanh thu chỉ bao gồm các giá trị: 1, 2, 3, 5\", 'error');\r\n        return false;\r\n      }\r\n    }\r\n    return _isValid;\r\n  }\r\n\r\n  eSubmit(type) {\r\n    let checkValid = this.formInvoice.form.instance.validate();\r\n    this.total_payment = \"\";\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    if (type != 'GHI_TAM') {\r\n      if (!this._validForm(false)) {\r\n        return;\r\n      }\r\n      if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n        Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n        return;\r\n      }\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (this.frmData.invoice_options) {\r\n        this.frmData.invoice_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n          delete item['id'];\r\n          delete item['invoice_id'];\r\n        });\r\n      }\r\n      if (this.frmData.adjustment_form === 'GIAM') {\r\n        if (this.frmData.adjustment_object === 'HH_DV') {\r\n          let isValidProduct = true;\r\n          let indexProduct = 0;\r\n          this.frmData.invoice_products.forEach(p => {\r\n            if (this.invoice_products_old) {\r\n              if (this.configs.system_parameter.is_add_product_code) {\r\n                let product = this.invoice_products_old.filter(w => w.product_code === p.product_code)[0];\r\n                if (product) {\r\n                  if (p.quantity > product.quantity || p.price > product.price || p.amount_vat > product.amount_vat || p.amount_after_vat > product.amount_after_vat) {\r\n                    this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(indexProduct, 'product_code'));\r\n                    return;\r\n                  }\r\n                  else\r\n                    ++indexProduct;\r\n                }\r\n                else\r\n                  ++indexProduct;\r\n              } else {\r\n                let product = this.invoice_products_old.filter(w => w.product_name === p.product_name)[0];\r\n                if (product) {\r\n                  if (p.quantity > product.quantity || p.price > product.price || p.amount_vat > product.amount_vat || p.amount_after_vat > product.amount_after_vat) {\r\n                    this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(indexProduct, 'product_name'));\r\n                    return;\r\n                  }\r\n                  else\r\n                    ++indexProduct;\r\n                }\r\n                else\r\n                  ++indexProduct;\r\n              }\r\n            }\r\n          });\r\n          // if (!isValidProduct) {\r\n          //   Library.notify('Giá trị của hóa đơn điều chỉnh giảm không được lớn hơn hóa đơn gốc.', 'error');\r\n          //   return false;\r\n          // }\r\n        }\r\n        // if (this.frmData.adjustment_object === 'KHAC_GIAM' && this.invoice_old) {\r\n        //   if (this.frmData.amount > this.invoice_old.amount || this.frmData.total_amount_vat > this.invoice_old.total_amount_vat || this.frmData.total_payment > this.invoice_old.total_payment) {\r\n        //     Library.notify('Giá trị của hóa đơn điều chỉnh giảm không được lớn hơn hóa đơn gốc.', 'error');\r\n        //     return false;\r\n        //   }\r\n        // }\r\n        // /* Áp dụng thuế giảm trừ theo Nghị định số 92/2021 */\r\n        // let _objND92 = this.frmData.invoice_products.filter(p => (p.vat == \"7\" || p.vat == \"3.5\"))[0];\r\n        // if (_objND92 || this.frmData.is_exemption_decree) {\r\n        //   let dateFrom = moment(\"01/11/2021\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n        //   let dateTo = moment(\"31/12/2021\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n        //   let invoiceDate = moment(this.oldForm.invoice_date).format('YYYY-MM-DD')\r\n        //   if (invoiceDate < dateFrom || invoiceDate > dateTo) {\r\n        //     Library.notify(\"Chỉ áp dụng giảm thuế GTGT theo Nghị định số 92/2021 cho hóa đơn bị điều chỉnh có ngày từ 01/11/2021 đến 31/12/2021\", 'error');\r\n        //     return false;\r\n        //   }\r\n        // }\r\n\r\n        /* Áp dụng thuế giảm trừ theo Nghị quyết số 43/2022/QH15 */\r\n        // let _objNQ43 = this.frmData.invoice_products.filter(p => (p.vat == \"8\"))[0];\r\n        // if (_objNQ43 || this.frmData.is_resolution_43) {\r\n        //   let dateFromNQ43 = moment(\"01/02/2022\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n        //   let dateToNQ43 = moment(\"31/12/2022\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n        //   let invoiceDateNQ43 = moment(this.oldForm.invoice_date).format('YYYY-MM-DD')\r\n        //   if (!this.isPassNQ43 && (invoiceDateNQ43 < dateFromNQ43 || invoiceDateNQ43 > dateToNQ43)) {\r\n        //     Library.notify(\"Chỉ áp dụng giảm thuế GTGT theo Nghị quyết số 43/2022/QH15 cho hóa đơn bị điều chỉnh có ngày từ 01/02/2022 đến 31/12/2022\", 'error');\r\n        //     return false;\r\n        //   }\r\n        // }\r\n      }\r\n      if (this.frmData.adjustment_object == \"TANG_GIAM\" && !this.isTT78) {\r\n        let _oProduct = this.frmData.invoice_products.filter(w => VStringService._getValueToString(w.adjustment_form) == \"\")[0];\r\n        if (_oProduct) {\r\n          let index = this.frmData.invoice_products.indexOf(_oProduct);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'adjustment_form'));\r\n          Library.notify('Phương thức điều chỉnh không được để trống.', 'error');\r\n          return false;\r\n        }\r\n      }\r\n      if (VStringService._getValueToString(this.frmData.bank_name) != \"\" && VStringService._getValueToString(this.frmData.bank_name).length > 400) {\r\n        Library.notify(this._translate.NOTIFY.bank_name_less_than_400_character, 'error');\r\n        return false;\r\n      }\r\n      if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n        Library.notify('Vui lòng chọn HTTT chuyển khoản cho hóa đơn có giá trị lớn hơn 20 triệu đồng', 'error');\r\n        return false;\r\n      }\r\n      if (!this.isAccessExportInv && type === 'XUAT' && this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        Library.notify(this._translate.NOTIFY.you_not_permissions, 'error');\r\n        return false;\r\n      }\r\n      if (type === 'XUAT' || (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy)) {\r\n        if (!this.frmData.invoice_date && !this.confirmCheckPreview && !this.isTT78) {\r\n          const setInvoiceDate = Library.confirm(this._translate.NOTIFY.warning_invoice_date, this._translate.NOTIFY.notify);\r\n          setInvoiceDate.then((dialog) => {\r\n            if (!dialog) {\r\n              this.formInvoice.form.instance.getEditor('invoice_date').focus();\r\n            }\r\n            else {\r\n              this.processXuatHoaDon(type);\r\n            }\r\n          });\r\n        }\r\n        else\r\n          this.processXuatHoaDon(type);\r\n      } else {\r\n        this.processGhiTam(type);\r\n      }\r\n    }, 300);\r\n  }\r\n  /* Xử lý xuất hóa đơn */\r\n  processXuatHoaDon(type) {\r\n    if (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n      this.confirmCheckPreview = true;\r\n    }\r\n    if (this.confirmCheckPreview) {\r\n      if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        this.xuatHoaDon(this.frmData);\r\n      } else {\r\n        Helper.confirmXuatChoKy(() => {\r\n          if (!this.isAccessExportInv) {\r\n            if (type === 'TRINH_KY') {\r\n              this.frmData.refuse_reason = '';\r\n              this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n            } else {\r\n              if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n              }\r\n            }\r\n\r\n          }\r\n          this.xuatChoKy(this.frmData);\r\n        });\r\n      }\r\n      this.confirmCheckPreview = false;\r\n    } else {\r\n      this.previewBeforeExport(type);\r\n    }\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = '';\r\n    if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n      trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n    } else {\r\n      trang_thai = this._translate.THONG_TIN.xuat_cho_ky;\r\n    }\r\n    let du_lieu = this.vatService.taodulieuXemTruocMau(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn : this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  /* Xử lý ghi tạm hóa đơn */\r\n  processGhiTam(type) {\r\n    if (!this.isAccessExportInv) {\r\n      if (type === 'TRINH_KY') {\r\n        this.frmData.refuse_reason = '';\r\n        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n      } else {\r\n        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    this.ghiTam(this.frmData);\r\n  }\r\n\r\n  handleFormData() {\r\n    this.tempKiFile = 0;\r\n    let invoice_products = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        delete item.error;\r\n        if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n          if ((this.frmData.adjustment_form === 'TANG' && this.frmData.adjustment_object === 'HH_DV') || (this.frmData.adjustment_form == 'GIAM' && this.frmData.adjustment_object === 'HH_DV'))\r\n            item.row_content = this.rowContentInInvoiceProduct(item, this.frmData.adjustment_form);\r\n          else\r\n            item.row_content = item.product_name;\r\n          invoice_products.push(item);\r\n          if (item.is_transport_number) {\r\n            this.frmData.transport_number = item.product_name;\r\n          }\r\n        }\r\n      });\r\n    });\r\n    if ((this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'MST') || (this.frmData.adjustment_form == 'THONG_TIN' && this.frmData.adjustment_object === 'KH_DC')) {\r\n      this.frmData.total_payment_in_word = '';\r\n    }\r\n    if (this.frmData.list_date) {\r\n      this.frmData.list_date = moment(this.frmData.list_date).format('YYYY-MM-DD');\r\n    }\r\n    this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n    let hoadon = \"Hóa đơn\";\r\n    if (this.isPXKNB || this.isPXKDaiLy)\r\n      hoadon = \"Phiếu xuất kho\"\r\n    this.frmData.note_view_on_invoice = hoadon + \" \" + `này điều chỉnh cho ` + hoadon.toLowerCase() + \" \" + `số ${this.oldForm.invoice_number}, mẫu số ${this.oldForm.template_code}, ký hiệu ${this.oldForm.invoice_series} ngày ${moment(this.oldForm.invoice_date).format('DD/MM/YYYY')}`;\r\n    this.frmData.invoice_products = invoice_products;\r\n    this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n  }\r\n\r\n  handleFormDataSub() {\r\n    const wait = (delay, ...args) => new Promise(resolve => setTimeout(resolve, delay, ...args));\r\n    return wait(200).then(() => {\r\n      this.tempKiFile = 0;\r\n      let invoice_products = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          delete item.error;\r\n          if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n            if ((this.frmData.adjustment_form === 'TANG' && this.frmData.adjustment_object === 'HH_DV') || (this.frmData.adjustment_form == 'GIAM' && this.frmData.adjustment_object === 'HH_DV'))\r\n              item.row_content = this.rowContentInInvoiceProduct(item, this.frmData.adjustment_form);\r\n            else\r\n              item.row_content = item.product_name;\r\n            invoice_products.push(item);\r\n            if (item.is_transport_number) {\r\n              this.frmData.transport_number = item.product_name;\r\n            }\r\n          }\r\n        });\r\n      });\r\n      if ((this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'MST') || (this.frmData.adjustment_form == 'THONG_TIN' && this.frmData.adjustment_object === 'KH_DC')) {\r\n        this.frmData.total_payment_in_word = '';\r\n      }\r\n      this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n      let hoadon = \"Hóa đơn\";\r\n      if (this.isPXKNB || this.isPXKDaiLy)\r\n        hoadon = \"Phiếu xuất kho\";\r\n      this.frmData.note_view_on_invoice = hoadon + \" \" + `này điều chỉnh cho ` + hoadon.toLowerCase() + \" \" + `số ${this.oldForm.invoice_number}, mẫu số ${this.oldForm.template_code}, ký hiệu ${this.oldForm.invoice_series} ngày ${moment(this.oldForm.invoice_date).format('DD/MM/YYYY')}`;\r\n      this.frmData.invoice_products = invoice_products;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n      return true;\r\n    });\r\n  }\r\n\r\n  rowContentInInvoiceProduct(row, status) {\r\n    if (this.oldForm.template_code.indexOf('02GTTT') >= 0 || this.oldForm.template_code == \"2\" || this.oldForm.template_code.indexOf('07KPTQ') >= 0) {\r\n      let status_view = (status === 'TANG') ? 'tăng' : 'giảm';\r\n      let str, temp, quantity, price;\r\n      this.oldForm.invoice_products.some(item => {\r\n        if (item.product_name === row.product_name) {\r\n          temp = item;\r\n          return true;\r\n        }\r\n      });\r\n      if (!temp)\r\n        temp = new Object;\r\n      if (temp.quantity !== row.quantity) {\r\n        quantity = true;\r\n      }\r\n      if (temp.price !== row.price) {\r\n        price = true;\r\n      }\r\n\r\n      if (quantity === true || price === true) {\r\n        str = `Điều chỉnh ${status_view} ${quantity ? 'Số lượng, ' : ''}${price ? 'Đơn giá, ' : ''}thành tiền của mặt hàng`;\r\n      } else {\r\n        str = `Điều chỉnh ${status_view} Số lượng, Đơn giá, thành tiền của mặt hàng`;\r\n      }\r\n      return str + ` ${row.product_name}`;\r\n    } else if (this.oldForm.template_code.indexOf('01GTKT') >= 0 || this.oldForm.template_code.indexOf('1') >= 0) {\r\n      let status_view = (status === 'TANG') ? 'tăng' : 'giảm';\r\n      let str, temp, quantity, price, vat;\r\n      this.oldForm.invoice_products.some(item => {\r\n        if (item.product_name === row.product_name) {\r\n          temp = item;\r\n          return true;\r\n        }\r\n      });\r\n      if (!temp)\r\n        temp = new Object;\r\n      if (temp.quantity !== row.quantity) {\r\n        quantity = true;\r\n      }\r\n      if (temp.price !== row.price) {\r\n        price = true;\r\n      }\r\n      if (temp.vat !== row.vat) {\r\n        vat = true;\r\n      }\r\n\r\n      let vat_view = ((temp.vat === -1 || temp.vat === 0 || !temp.vat) && vat !== true) ? '' : ', tiền thuế';\r\n\r\n      if (vat) {\r\n        str = `Điều chỉnh ${status_view} thuế suất và tiền thuế GTGT của mặt hàng`;\r\n      } else if (quantity === true || price === true) {\r\n        str = `Điều chỉnh ${status_view} ${quantity ? 'Số lượng, ' : ''}${price ? 'Đơn giá, ' : ''}thành tiền${vat_view} của mặt hàng`;\r\n      } else {\r\n        str = `Điều chỉnh ${status_view} Số lượng, Đơn giá, thành tiền, thuế suất${vat_view} của mặt hàng`;\r\n      }\r\n      return str + ` ${row.product_name}`;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n    // this.socketService.close();\r\n  }\r\n\r\n  xemlydotuchoi() {\r\n    Library.showloading();\r\n    let sub = this.vatService.showToSendInvoice(this.frmData.id).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n          listDM: this.listDM\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n  }\r\n\r\n  keyDown(e: any) {\r\n    // setTimeout(() => {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n    // }, 100);\r\n  }\r\n\r\n  onTemplateTypeChange(e) {\r\n    this.invoicereleaseTempt = e;\r\n  }\r\n  onTemplateTT78TypeChange(e) {\r\n    this.invoiceTemplateTT78 = e;\r\n  }\r\n  onNumberChange() {\r\n    VChanggeMoneyService._calTotalMoney(this.frmData, this.formatter, !this.frmData.auto_value);\r\n  }\r\n\r\n  onNumberTicketChange() {\r\n    if (!this.isTT78) {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n      }\r\n    }\r\n    else {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  onVatChange() {\r\n    let decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n    let decimal_vat = this.getFormatterToNumber(this.formatter.vat);\r\n    if (this.frmData.vat_service_ticket != null && this.frmData.vat_service_ticket != '-1') {\r\n      this.frmData.total_vat_service_ticket = this.roundNumber((Number.parseInt(this.frmData.vat_service_ticket) * this.frmData.money_service_ticket) / 100, decimal_amount_vat);\r\n    } else {\r\n      this.frmData.total_vat_service_ticket = null;\r\n    }\r\n    this.frmData.total_service_ticket_with_vat = this.roundNumber(this.frmData.money_service_ticket + this.frmData.total_vat_service_ticket, decimal_amount);\r\n  }\r\n\r\n  getFormatterToNumber(formatter) {\r\n    let s1 = formatter.replace('0,###', '');\r\n    if (s1 === '') {\r\n      return 0;\r\n    } else {\r\n      let s2 = s1.replace('.', '');\r\n      return s2.split('').length;\r\n    }\r\n  }\r\n\r\n  setDataSessionStorage(value) {\r\n    this.valueChange = JSON.stringify(value);\r\n  }\r\n\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  async subData(type, value) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return false;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    await this.handleFormDataSub();\r\n    if (this.frmData.invoice_options) {\r\n      this.frmData.invoice_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n      Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error');\r\n      return false;\r\n    }\r\n    if (!this.isAccessExportInv) {\r\n      if (type === 'TRINH_KY') {\r\n        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n        this.frmData.refuse_reason = '';\r\n      } else {\r\n        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    if (value.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.edit(this.frmData.id, value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.editTT78(this.frmData.id, value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.ghiTam(value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.ghiTamTT78(value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM', this.frmData).then(value1 => {\r\n                    observer.next(value1);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    }\r\n    return true;\r\n  }\r\n  onChangeSalePercen(e) {\r\n    this.configs.system_parameter.value_rate_percent = e.value;\r\n    let data = {\r\n      config: {\r\n        value: JSON.stringify(this.configs.system_parameter)\r\n      }\r\n    };\r\n    this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n      if (response.status == \"success\") {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n          this.configs = this.authService.getConfigs();\r\n        });\r\n      } else {\r\n      }\r\n    }, err => { }, () => {\r\n    });\r\n    this.onNumberTicketChange();\r\n  }\r\n  guideSales() {\r\n    this.isDisplayGuideSale = !this.isDisplayGuideSale;\r\n  }\r\n  doctienbangchu(total_payment, currency_code) {\r\n    if (VStringService._getValueToString(this.frmData.adjustment_object) == \"TANG_GIAM\" && this.isTT78) {\r\n      let number_money = Math.abs(total_payment);\r\n      let c_money = Helper.tienBangChu(number_money, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n      this.frmData.total_payment_in_word = c_money;\r\n      if (total_payment < 0) {\r\n        this.frmData.total_payment_in_word = \"Giảm \" + c_money;\r\n        if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to reduce by \")\r\n        }\r\n      }\r\n      else if (total_payment > 0) {\r\n        this.frmData.total_payment_in_word = \"Tăng \" + c_money;\r\n        if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n          this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to increase by \")\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      this.frmData.total_payment_in_word = Helper.tienBangChu(total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n      if (this.isTT78) {\r\n        if (VStringService._getValueToString(this.frmData.total_payment_in_word) != \"\" && this.frmData.total_payment_in_word != \"Không đồng chẵn.\") {\r\n          if (this.frmData.adjustment_form === 'TANG') {\r\n            this.frmData.total_payment_in_word = \"Tăng \" + this.frmData.total_payment_in_word;\r\n            if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n              this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to increase by \")\r\n            }\r\n          }\r\n          if (this.frmData.adjustment_form == 'GIAM') {\r\n            this.frmData.total_payment_in_word = \"Giảm \" + this.frmData.total_payment_in_word;\r\n            if (this.configs.system_parameter.display_read_money_english && (currency_code == 'USD' || currency_code == 'EURO' || currency_code == 'EUR' || currency_code == 'MYR' || currency_code == 'CNY' || currency_code == 'SGD' || currency_code == 'JPY')) {\r\n              this.frmData.total_payment_in_word = this.frmData.total_payment_in_word.replace(\"(\", \"(Adjusted to reduce by \")\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  startProcess_TBSaiSot() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.getXml_TBSaiSot();\r\n    } else {\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let ListSerialNumber = \"DSCKS\";\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n      }\r\n      else\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n\r\n    }\r\n  }\r\n  getXml_TBSaiSot() {\r\n    let invoices = [];\r\n    let object = new Object;\r\n    object[\"tax_authority_code\"] = this.oldForm.tax_authority_code;\r\n    object[\"template_code\"] = this.oldForm.template_code;\r\n    object[\"invoice_series\"] = this.oldForm.invoice_series;\r\n    object[\"invoice_date\"] = this.oldForm.invoice_date;\r\n    object[\"invoice_number\"] = this.oldForm.invoice_number;\r\n    object[\"reason\"] = this.frmData.destroy_reason;\r\n    object[\"notification_nature\"] = \"2\";\r\n    object[\"type_apply_invoice\"] = 1;\r\n    object[\"is_invoice_with_code\"] = this.oldForm.is_invoice_with_code;\r\n    object[\"invoice_id\"] = this.oldForm.id;\r\n    invoices.push(object);\r\n    let data = {\r\n      notification_type: 1,\r\n      invoices: invoices\r\n    };\r\n    let xmlInvoice = \"\";\r\n    let sub = this.handleInvoiceService.getXmlInvoiceWrong(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        xmlInvoice = rs.data.xml_file;\r\n        this.invoices = rs.data.invoices;\r\n        let sign_date = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (xmlInvoice != \"\") {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            this.sendData_TBSaiSot(xmlInvoice);\r\n          else\r\n            this.signXml_TBSaiSot(xmlInvoice, sign_date);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  sendData_TBSaiSot(xml_string) {\r\n    let subXuatHoaDon = this.handleInvoiceService.sendXmlInvoiceWrong({\r\n      xml_file: xml_string,\r\n      invoices: this.invoices\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n  signXml_TBSaiSot(xmlInvoice, signDate) {\r\n    let nodeSign = \"//TBao/DSCKS/NNT\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, signDate, 'NotificationData', ListSerialNumber, true);\r\n  }\r\n  inChuyenDoiText() {\r\n    if (this.frmData.time_print_conversion > 0) {\r\n      return this._translate.CONTROLL.BUTTON.view_conversion;\r\n    } else {\r\n      return this._translate.CONTROLL.BUTTON.print_conversion;\r\n    }\r\n  }\r\n  thukhoxuatky() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    Library.showloading();\r\n    const sub = this.vatService.thukhoxuatky(ids).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        Library.notify(this._translate.NOTIFY.sign_success, 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  handleAddNew() {\r\n    if (this.isExportInvoice) {\r\n      this.addNew();\r\n    } else {\r\n      if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n        this.confirmService.confirm()\r\n          .subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM', this.frmData).then(res => {\r\n                    if (res) {\r\n                      this.addNew();\r\n                    } else {\r\n                      return;\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  this.addNew();\r\n                  break;\r\n                case 'cancel':\r\n                  this.addNew();\r\n                  break;\r\n                default:\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n      } else {\r\n        this.addNew();\r\n      }\r\n    }\r\n  }\r\n  addNew() {\r\n    let inv = Object.assign({}, this.frmData);\r\n\r\n    this.frmData = new InvoiceModel(1);\r\n    this.frmData.invoice_date = null;\r\n    this.frmData.template_id = inv.template_id;\r\n    this.frmData.invoice_release_id = inv.invoice_release_id;\r\n    this.frmData.payment_method_name = inv.payment_method_name;\r\n    this.frmData.payment_method_view_name = inv.payment_method_view_name;\r\n    this.frmData.currency_code = inv.currency_code;\r\n    this.frmData.template_code = inv.template_code;\r\n    this.frmData.invoice_series = inv.invoice_series;\r\n    this.frmData.invoice_options = inv.invoice_options;\r\n    this.formInvoice.resetTMR();\r\n    this.invoice_products = new ArrayStore({\r\n      key: \"id\",\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n    this.productGrip.createUpdateEvent();\r\n    this.formInvoice.removeReadonlyAllForm();\r\n    this.formInvoice.emails = [];\r\n    this.ttDaXuatHoaDon = false;\r\n    this.getDataToCompare();\r\n  }\r\n  huylenhdieudong() {\r\n    const setInvoiceDate = Library.confirm(this._translate.NOTIFY.warning_the_dispatch_success, this._translate.NOTIFY.notify);\r\n    setInvoiceDate.then((dialog) => {\r\n      if (!dialog) {\r\n      }\r\n      else {\r\n        Library.showloading();\r\n        let ids = [];\r\n        ids.push(this.frmData.id);\r\n        let sub = this.vatService.huylenhdieudong(ids).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            Library.notify(this._translate.NOTIFY.cancel_the_dispatch_success, 'success');\r\n            this.isShowHuyLenhDD = false;\r\n            this.enableScreen();\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    });\r\n  }\r\n  enableScreen() {\r\n    this.formInvoice.allowEditAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n  }\r\n  submitlenhdieudong() {\r\n    let checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    if (!this.isCheckLenhDieuDong)\r\n      this.resultCompareData = this.checkDataFormChange(this.valueChange, this.frmData);\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(false))\r\n        return;\r\n      if (this.isCheckLenhDieuDong) {\r\n        this.kylenhdieudong();\r\n        this.isCheckLenhDieuDong = false;\r\n      } else {\r\n        this.Reviewlenhdieudong();\r\n      }\r\n    }, 300);\r\n  }\r\n  kylenhdieudong() {\r\n    if (this.frmData.id) {\r\n      let ids = [];\r\n      ids.push(this.frmData.id);\r\n      if (!this.resultCompareData) {\r\n        Library.showloading();\r\n        if (!this.isTT78) {\r\n          let sub = this.vatService.edit(this.frmData.id, this.frmData).subscribe(rs => {\r\n            if (rs.status == 'success') {\r\n              this.frmData.id = rs.data.id;\r\n              this.getDataToCompare();\r\n              const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n                if (rs.status === 'success') {\r\n                  Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                  this.isShowHuyLenhDD = true;\r\n                  this.disablleScreen();\r\n                } else {\r\n                  Library.notify(rs.message, 'error');\r\n                }\r\n              });\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => { }, () => {\r\n            Library.hideloading();\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n        else {\r\n          let sub = this.vatService.editTT78(this.frmData.id, this.frmData).subscribe(rs => {\r\n            if (rs.status == 'success') {\r\n              this.frmData.id = rs.data.id;\r\n              this.getDataToCompare();\r\n              const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n                if (rs.status === 'success') {\r\n                  Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                  this.isShowHuyLenhDD = true;\r\n                  this.disablleScreen();\r\n                } else {\r\n                  Library.notify(rs.message, 'error');\r\n                }\r\n              });\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => { }, () => {\r\n            Library.hideloading();\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n      else {\r\n        Library.showloading();\r\n        const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n            this.isShowHuyLenhDD = true;\r\n            this.disablleScreen();\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTam(this.frmData).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            let ids = [];\r\n            ids.push(this.frmData.id);\r\n            const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                this.isShowHuyLenhDD = true;\r\n                this.disablleScreen();\r\n              } else {\r\n                Library.notify(rs.message, 'error');\r\n              }\r\n            });\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamTT78(this.frmData).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            let ids = [];\r\n            ids.push(this.frmData.id);\r\n            const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                this.isShowHuyLenhDD = true;\r\n                this.disablleScreen();\r\n              } else {\r\n                Library.notify(rs.message, 'error');\r\n              }\r\n            });\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n  traLai() {\r\n    if (this.frmTraLai.reason == undefined || this.frmTraLai.reason == \"\") {\r\n      Library.notify(this._translate.CONTROLL.LABEL.reason_return + \" \" + this._translate.VALIDATION.required, 'error');\r\n    } else {\r\n      Library.showloading();\r\n      let sub = this.vatService.traLaiHoaDon({\r\n        id: this.frmData.id,\r\n        reason: this.frmTraLai.reason\r\n      }).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.router.navigate(['/system/invoice-sync']);\r\n          Library.notify(this._translate.NOTIFY.return_success, 'success');\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  Reviewlenhdieudong() {\r\n    this.handleFormData();\r\n    this.windowPreviewBeforeSubmit = window.open(\"\", \"\", `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n    this.windowPreviewBeforeSubmit.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    this.windowPreviewBeforeSubmit.blur();\r\n    let timer = setInterval(() => {\r\n      if (this.windowPreviewBeforeSubmit.closed) {\r\n        clearInterval(timer);\r\n        let isCheck = Helper.getCookie('CK_LDD');\r\n        this.windowPreviewBeforeSubmit = undefined;\r\n        if (isCheck == \"CHECKED\") {\r\n          document.cookie = \"CK_LDD=; path=/\";\r\n          this.isCheckLenhDieuDong = true;\r\n          this.submitlenhdieudong();\r\n        }\r\n      }\r\n    }, 500);\r\n    Library.showloading();\r\n    if (!this.frmData.id || !this.isShowHuyLenhDD) {\r\n      let sub = this.vatService.xemtruoclenhdieudong(this.frmData).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let pdf_file = rs.data.file_content;\r\n          let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n          this.windowPreviewBeforeSubmit.document.write(`\r\n          \r\n          <!DOCTYPE html>\r\n          <html lang=\"en\">\r\n          <head>\r\n            <meta charset=\"UTF-8\">\r\n            <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n            <title>Document</title>\r\n            <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\" />\r\n            <style type=\"text/css\" scoped>\r\n            .nhap-nhay {\r\n              background: red;\r\n              padding: 0.5px 9px;\r\n              margin-right: 5px;\r\n              border-radius: 57%;\r\n              -webkit-animation: flicker 1s infinite;\r\n            }\r\n            .ht-xuat{\r\n              width: 20%;\r\n              height: 100%;\r\n              background: #ffffff;\r\n              box-shadow: 0px 0px 8px 0px #888888;\r\n              \r\n            }\r\n            .ht-xuat > .right-nav{\r\n              display:flex;\r\n              justify-content: space-between;\r\n              align-items: center;\r\n              border-bottom: 1px solid #d5d5d5;\r\n              padding:20px;\r\n            }\r\n            @-webkit-keyframes flicker\r\n            {\r\n            0% {opacity:0;}\r\n            9% {opacity:0;}\r\n            10% {opacity:.5;}\r\n            13% {opacity:0;}\r\n            20% {opacity:.5;}\r\n            25% {opacity:1;}\r\n            }\r\n\r\n            .example {\r\n              padding: 20px;\r\n            }\r\n            \r\n            input[type=button] {\r\n              padding: 5px 10px;\r\n              margin: 10px 5px;\r\n              border-radius: 5px;\r\n              cursor: pointer;\r\n              background: #ddd;\r\n              border: 1px solid #ccc;\r\n            }\r\n            input[type=button]:hover {\r\n              background: #ccc;\r\n            }\r\n\r\n            .confirm {\r\n              display: none;\r\n            }\r\n            .confirm > div:first-of-type {\r\n              position: fixed;\r\n              width: 100%;\r\n              height: 100%;\r\n              background: rgba(0, 0, 0, 0.5);\r\n              top: 0px;\r\n              left: 0px;\r\n            }\r\n            .confirm > div:last-of-type {\r\n              padding: 10px 20px;\r\n              background: white;\r\n              position: absolute;\r\n              width: auto;\r\n              height: auto;\r\n              left: 50%;\r\n              top: 50%;\r\n              transform: translate(-50%, -50%);\r\n              border-radius: 5px;\r\n              border: 1px solid #333;\r\n            }\r\n            .confirm > div:last-of-type div:first-of-type {\r\n              min-width: 150px;\r\n              padding: 10px;\r\n            }\r\n            .confirm > div:last-of-type div:last-of-type {\r\n              text-align: right;\r\n            }\r\n          </style>\r\n          </head>\r\n          <body>\r\n          <div style=\"margin-left: 50px;\">\r\n          <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n          <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n          </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n        </div>\r\n\r\n        <div style=\"display: flex; height:84vh; justify-content: center;\">\r\n          <iframe style=\"\" width=\"70%\" height=\"100%\" src=\"${objectUrl}\"></iframe>\r\n          <div class=\"ht-xuat\">\r\n            <div class=\"right-nav\">\r\n             <button style =\" background:#007BFF;color:#ffffff; padding: 10px 50px; border: none ; outline:none; border-radius: 30px\"> <a href=\"javascript:void(0)\" style=\"text-decoration: none; color:#ffffff; font-weight: bold; padding-right:10px\" onclick=\"setConfirmInvoice()\">Đồng ý </a> <i class=\"fa fa-angle-right\"></i></button>\r\n              <a href=\"javascript:void(0)\" style=\"text-decoration: none; color: gray\" onclick=\"closeWin()\"><i class=\"fa fa-times\" style=\"font-size:25px\"></i></a>\r\n            </div>\r\n            <div style=\"display: flex; flex-direction: column; padding:10px;\">\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n                <p style=\" font-weight: 600;\">Ngày hóa đơn : </p>\r\n                <p style=\"color: orange;font-weight: 600;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n              </div>\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;padding: 10px; border-bottom: 1px solid #d5d5d5\">\r\n                <p style=\"font-weight: 600;\">Trạng thái : </p>\r\n                <p style=\"color: orange;font-weight: 600;\">Xuất  ${this._translate.CONFIRM.confirm_sign_delivery}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"confirm\">\r\n            <div></div>\r\n            <div>\r\n              <div id=\"confirmMessage\">Confirm text</div>\r\n              <div>\r\n                <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n                <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n              </div>\r\n            </div>\r\n        </div>\r\n\r\n        <script type=\"text/javascript\">\r\n        const ui = {\r\n          confirm: async (message) => createConfirm(message)\r\n        }\r\n        \r\n        const createConfirm = (message) => {\r\n          return new Promise((complete, failed)=>{\r\n            $('#confirmMessage').text(message)\r\n        \r\n            $('#confirmYes').off('click');\r\n            $('#confirmNo').off('click');\r\n            \r\n            $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n            $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n            \r\n            $('.confirm').show();\r\n          });\r\n        }\r\n                             \r\n        const setConfirmInvoice = async () => {\r\n          const confirm = await ui.confirm(\" ${this._translate.CONFIRM.confirm_sign_delivery} \");\r\n          if(confirm){\r\n            document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n            window.close();\r\n          } else{\r\n          }\r\n        } \r\n\r\n          function closeWin(){\r\n            window.close();\r\n          }\r\n        </script>\r\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n          </body>\r\n          </html>\r\n        `);\r\n          this.windowPreviewBeforeSubmit.focus();\r\n        } else {\r\n          this.windowPreviewBeforeSubmit.close();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      let ids = [];\r\n      ids.push(this.frmData.id)\r\n      let sub = this.vatService.xemlenhdieudong(ids).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let pdf_file = rs.data.file_content;\r\n          let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n          this.windowPreviewBeforeSubmit.document.write(`\r\n          <!DOCTYPE html>\r\n          <html lang=\"en\">\r\n          <head>\r\n            <meta charset=\"UTF-8\">\r\n            <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n            <title>Document</title>\r\n            <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\" />\r\n            <style type=\"text/css\" scoped>\r\n            .nhap-nhay {\r\n              background: red;\r\n              padding: 0.5px 9px;\r\n              margin-right: 5px;\r\n              border-radius: 57%;\r\n              -webkit-animation: flicker 1s infinite;\r\n            }\r\n            .ht-xuat{\r\n              width: 20%;\r\n              height: 100%;\r\n              background: #ffffff;\r\n              box-shadow: 0px 0px 8px 0px #888888;\r\n              \r\n            }\r\n            .ht-xuat > .right-nav{\r\n              display:flex;\r\n              justify-content: space-between;\r\n              align-items: center;\r\n              border-bottom: 1px solid #d5d5d5;\r\n              padding:20px;\r\n            }\r\n            @-webkit-keyframes flicker\r\n            {\r\n            0% {opacity:0;}\r\n            9% {opacity:0;}\r\n            10% {opacity:.5;}\r\n            13% {opacity:0;}\r\n            20% {opacity:.5;}\r\n            25% {opacity:1;}\r\n            }\r\n\r\n            .example {\r\n              padding: 20px;\r\n            }\r\n            \r\n            input[type=button] {\r\n              padding: 5px 10px;\r\n              margin: 10px 5px;\r\n              border-radius: 5px;\r\n              cursor: pointer;\r\n              background: #ddd;\r\n              border: 1px solid #ccc;\r\n            }\r\n            input[type=button]:hover {\r\n              background: #ccc;\r\n            }\r\n\r\n            .confirm {\r\n              display: none;\r\n            }\r\n            .confirm > div:first-of-type {\r\n              position: fixed;\r\n              width: 100%;\r\n              height: 100%;\r\n              background: rgba(0, 0, 0, 0.5);\r\n              top: 0px;\r\n              left: 0px;\r\n            }\r\n            .confirm > div:last-of-type {\r\n              padding: 10px 20px;\r\n              background: white;\r\n              position: absolute;\r\n              width: auto;\r\n              height: auto;\r\n              left: 50%;\r\n              top: 50%;\r\n              transform: translate(-50%, -50%);\r\n              border-radius: 5px;\r\n              border: 1px solid #333;\r\n            }\r\n            .confirm > div:last-of-type div:first-of-type {\r\n              min-width: 150px;\r\n              padding: 10px;\r\n            }\r\n            .confirm > div:last-of-type div:last-of-type {\r\n              text-align: right;\r\n            }\r\n          </style>\r\n          </head>\r\n          <body>\r\n          <div style=\"margin-left: 50px;\">\r\n          <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n          <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n          </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n        </div>\r\n\r\n        <div style=\"display: flex; height:84vh; justify-content: center;\">\r\n          <iframe style=\"\" width=\"70%\" height=\"100%\" src=\"${objectUrl}\"></iframe>\r\n          <div class=\"ht-xuat\">\r\n            <div class=\"right-nav\">\r\n             <button style =\" background:#007BFF;color:#ffffff; padding: 10px 50px; border: none ; outline:none; border-radius: 30px\"> <a href=\"javascript:void(0)\" style=\"text-decoration: none; color:#ffffff; font-weight: bold; padding-right:10px\" onclick=\"setConfirmInvoice()\">Đồng ý </a> <i class=\"fa fa-angle-right\"></i></button>\r\n              <a href=\"javascript:void(0)\" style=\"text-decoration: none; color: gray\" onclick=\"closeWin()\"><i class=\"fa fa-times\" style=\"font-size:25px\"></i></a>\r\n            </div>\r\n            <div style=\"display: flex; flex-direction: column; padding:10px;\">\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n                <p style=\" font-weight: 600;\">Ngày hóa đơn : </p>\r\n                <p style=\"color: orange;font-weight: 600;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n              </div>\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;padding: 10px; border-bottom: 1px solid #d5d5d5\">\r\n                <p style=\"font-weight: 600;\">Trạng thái : </p>\r\n                <p style=\"color: orange;font-weight: 600;\">Xuất  ${this._translate.CONFIRM.confirm_sign_delivery}</p>\r\n              </div>\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n                <p style=\"font-weight: 600;\">Tổng tiền : </p>\r\n                <p style=\"color: orange;font-weight: 600;\">${rs.data.invoice.total_payment}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"confirm\">\r\n            <div></div>\r\n            <div>\r\n              <div id=\"confirmMessage\">Confirm text</div>\r\n              <div>\r\n                <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n                <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n              </div>\r\n            </div>\r\n        </div>\r\n\r\n        <script type=\"text/javascript\">\r\n        const ui = {\r\n          confirm: async (message) => createConfirm(message)\r\n        }\r\n        \r\n        const createConfirm = (message) => {\r\n          return new Promise((complete, failed)=>{\r\n            $('#confirmMessage').text(message)\r\n        \r\n            $('#confirmYes').off('click');\r\n            $('#confirmNo').off('click');\r\n            \r\n            $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n            $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n            \r\n            $('.confirm').show();\r\n          });\r\n        }\r\n                             \r\n        const setConfirmInvoice = async () => {\r\n          const confirm = await ui.confirm(\" ${this._translate.CONFIRM.confirm_sign_delivery} \");\r\n          if(confirm){\r\n            document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n            window.close();\r\n          } else{\r\n          }\r\n        } \r\n\r\n          function closeWin(){\r\n            window.close();\r\n          }\r\n        </script>\r\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n          </body>\r\n          </html>\r\n        `);\r\n          this.windowPreviewBeforeSubmit.focus();\r\n        } else {\r\n          this.windowPreviewBeforeSubmit.close();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  getDataToCompare() {\r\n    this.handleFormData();\r\n    this.valueChange = JSON.stringify(this.frmData);\r\n    this.invoice_products.load().then((dataSource) => {\r\n      this.jsonProductFirst = JSON.stringify(dataSource);\r\n    });\r\n  }\r\n  onRefreshForm() {\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.productGrip.createUpdateEvent();\r\n    this.onNumberTicketChange();\r\n    this.frmData.total_payment = null;\r\n    this.frmData.amount_after_vat = null;\r\n  }\r\n}\r\n","module.exports = \"<!-- Phần không tự tính giá trị, nhập mẫu bảng kê -->\\r\\n<div class=\\\"row support-invoice\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <div class=\\\"pull-left\\\">\\r\\n      <div style=\\\"float: left;width:  30%; padding-top: 4px\\\">{{ _translate.CONTROLL.BUTTON.add_row }}</div>\\r\\n      <div style=\\\"float: left; width: 30%\\\">\\r\\n        <dx-number-box #numberBox [max]=\\\"100\\\" [min]=\\\"1\\\" [showSpinButtons]=\\\"true\\\" [(value)]=\\\"rowData\\\"></dx-number-box>\\r\\n      </div>\\r\\n      <div>\\r\\n        <dx-button style=\\\"height: 27px\\\" icon=\\\"fa fa-plus-circle\\\" type=\\\"default\\\" text=\\\"\\\" (onClick)=\\\"addRow()\\\">\\r\\n        </dx-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\" *ngIf=\\\"!isPXKDaiLy && !isPXKNB\\\">\\r\\n      <!-- Hóa đơn bán hàng NĐ 92 -->\\r\\n      <dx-check-box *ngIf=\\\"!isHdGTGT\\\" [(value)]=\\\"frmData.is_exemption_decree\\\" text=\\\"Giảm thuế theo NĐ số 92/2021\\\"\\r\\n        (onValueChanged)=\\\"_changeND92($event)\\\"></dx-check-box>\\r\\n      <div *ngIf=\\\"!isHdGTGT\\\" class=\\\"toggle normal\\\"\\r\\n        style=\\\"display: inline-block; align-items: center;margin-right: 42px;margin-left: 7px;\\\">\\r\\n        <img id=\\\"link3\\\" style=\\\"cursor: pointer\\\" src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\"\\r\\n          (click)=\\\"onClickGuidReduce()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n      </div>\\r\\n      <!-- Nghị định 43 -->\\r\\n      <dx-check-box *ngIf=\\\"!isHdGTGT\\\" style=\\\"margin-right:20px\\\" [(value)]=\\\"frmData.is_resolution_43\\\"\\r\\n        text=\\\"{{ _translate.THONG_TIN.giam_thue_theo_nq43 }}\\\" (onValueChanged)=\\\"_changeNQ43($event)\\\">\\r\\n      </dx-check-box>\\r\\n      <dx-check-box *ngIf=\\\"configs.system_parameter.view_sale_by_phone\\\" id=\\\"auto-input\\\"\\r\\n        text=\\\"{{ _translate.CONTROLL.LABEL.sale_by_phone }}\\\" [(value)]=\\\"frmData.sale_by_phone\\\"></dx-check-box>\\r\\n      <!-- Tổng tiền từ âm chuyển thành dương -->\\r\\n      <dx-check-box id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.total_money_from_negative_to_positive }}\\\"\\r\\n        [(value)]=\\\"frmData.is_total_amount_negative_to_positive\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <!-- Không tự tính -->\\r\\n      <dx-check-box id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\" [(value)]=\\\"frmData.auto_value\\\"\\r\\n        (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <!-- Tính thành tiền, tiền thuế theo số lượng và tổng tiền -->\\r\\n      <dx-check-box *ngIf=\\\"isHdGTGT\\\" id=\\\"auto-input\\\" text=\\\"{{_translate.CONTROLL.LABEL.auto_value_price }}\\\"\\r\\n        [(value)]=\\\"frmData.auto_value_price\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <dx-button text=\\\"Lấy hàng hóa HĐ gốc\\\" type=\\\"default\\\" (click)=\\\"thayTheToanBo()\\\" [disabled]=\\\"!isHangHoaDichVu\\\">\\r\\n      </dx-button>\\r\\n      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n        style=\\\"display: none;\\\" />\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\" *ngIf=\\\"isPXKDaiLy || isPXKNB\\\">\\r\\n      <!-- Không tự tính -->\\r\\n      <dx-check-box id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\" [(value)]=\\\"frmData.auto_value\\\"\\r\\n        (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <dx-button text=\\\"Lấy hàng hóa HĐ gốc\\\" type=\\\"default\\\" [disabled]=\\\"!isHangHoaDichVu\\\" (click)=\\\"thayTheToanBo()\\\">\\r\\n      </dx-button>\\r\\n      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n        style=\\\"display: none;\\\" />\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- <button type=\\\"button\\\" (click)=\\\"aa()\\\">aaa</button> -->\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.import_type }}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"thayTheToanBo()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all }}\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"themTiep()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n<!-- phần table hiển thị -->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onRowPrepared)=\\\"onRowPrepared($event)\\\" *ngIf=\\\"!isPXKDaiLy && !isPXKNB\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"gripAllowEdit\\\"></dxo-editing>\\r\\n      <!-- <dxo-selection showCheckBoxesMode=\\\"none\\\" mode=\\\"single\\\"></dxo-selection> -->\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\" [allowEditing]=\\\"false\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"view_order\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\" width=\\\"{{ _translate.GRID_WIDTH.stt }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Phương thức điều chỉnh -->\\r\\n      <dxi-column *ngIf=\\\"isPhuongThucDC\\\" dataField=\\\"adjustment_form\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.modes_of_adjustment }}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\" [editorOptions]=\\\"{showClearButton: true}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.adjustment_methods\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"(extentionGrid && extentionGrid.don_hang_hop_dong) || (configs && configs.system_parameter && configs.system_parameter.display_contract_order)\\\"\\r\\n        dataField=\\\"contract_order\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_hang_hop_dong }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.po_no_contract_no }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"extentionGrid && extentionGrid.ma_quan_ly\\\" dataField=\\\"management_code\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.don_hang_hop_dong }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.management_code }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- mã hàng hóa -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_add_product_code\\\" dataField=\\\"product_code\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_code }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n        alignment=\\\"center\\\" [editorOptions]=\\\"editorOptionsForCode\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"product_code\\\" *ngIf=\\\"!isAll\\\">\\r\\n        </dxo-lookup>\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsViewFull\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\" *ngIf=\\\"isAll\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"( !configs.system_parameter.is_add_product_code && isTextProductName )\\\"\\r\\n        [editorOptions]=\\\"{showClearButton: true}\\\" dataField=\\\"product_name\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\" alignment=\\\"left\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"product_name\\\" valueExpr=\\\"product_name\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"(!isTextProductName) || (configs.system_parameter.is_add_product_code  && isTextProductName)\\\"\\r\\n        dataField=\\\"product_name\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.incurred_refund_ticket\\\" cellTemplate=\\\"PhiHoanVe\\\"\\r\\n        caption=\\\"{{ _translate.CONTROLL.LABEL.refund_fee }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect.template_type=='HOA_DON_KINH_DOANH_XE') || (_oTemplateTT78.template_type=='HOA_DON_KINH_DOANH_XE'))\\\"\\r\\n        dataField=\\\"engine_number\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.engine_number }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_may }}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect.template_type=='HOA_DON_KINH_DOANH_XE') || (_oTemplateTT78.template_type=='HOA_DON_KINH_DOANH_XE'))\\\"\\r\\n        dataField=\\\"chassis_number\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.chassis_number }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_khung }}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && (_objTemplateSelect.template_type=='HOA_DON_NHA_HANG_KHACH_SAN' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_CHUNG')) || (_oTemplateTT78 && (_oTemplateTT78.template_type=='HOA_DON_NHA_HANG_KHACH_SAN' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG')))\\\"\\r\\n        cellTemplate=\\\"phi_dich_vu\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.money_service }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.promotional_goods_on_the_invoice\\\" cellTemplate=\\\"khuyen_mai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.promotion }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_lot\\\" dataField=\\\"lot\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.lot }}\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.lot }}\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.lot }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_expiration_date\\\" dataField=\\\"expiration_date\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.expiration_date }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_country\\\" [editorOptions]=\\\"{showClearButton: true}\\\"\\r\\n        dataField=\\\"country_code\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.country }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.country }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.countrys\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.commercial_discount\\\" cellTemplate=\\\"cktm\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.commercial_discount }}\\\" width=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_provisions_on_accounts\\\" dataField=\\\"provisions_on_accounts\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.provisions_on_accounts }}\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.dinh_khoan }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dinh_khoan }}\\\"\\r\\n        alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.select_provisions_on_accounts\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"\\r\\n          onValueChanged=\\\"b($event)\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Nàu sắc, chất liệu -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.color_material\\\" dataField=\\\"color_material\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.mau_sac }}\\\" caption=\\\"{{ _translate.CONFIGS.color_material }}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Số tham chiếu -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.items_number\\\" dataField=\\\"items_number\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.reference_number }}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Ngày -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.complete_order_date\\\" dataField=\\\"complete_order_date\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"{{ _translate.CONFIGS.day }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- mpq -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.mpq\\\" dataField=\\\"mpq\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"MPQ\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Đơn vị tính -->\\r\\n      <dxi-column dataField=\\\"unit_code\\\" [editorOptions]=\\\"lookupColumnOptions\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\" width=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Ngày -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.product_date\\\" dataField=\\\"product_date\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"{{ _translate.CONFIGS.day }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Tỷ giá -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.product_exchange_rate\\\" dataField=\\\"product_exchange_rate\\\"\\r\\n        headerCellTemplate=\\\"exchangeRateHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.ty_gia,step: '0' }\\\" [format]=\\\"formatter.ty_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\" [editorOptions]=\\\"{ format: formatter.so_luong }\\\"\\r\\n        [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Đơn giá sau thuế -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.price_after_vat\\\" dataField=\\\"price_after_vat\\\"\\r\\n        headerCellTemplate=\\\"priceaftervatHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia_sau_thue,step: '0' }\\\" [format]=\\\"formatter.don_gia_sau_thue\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_price_nte\\\" dataField=\\\"price_nte\\\"\\r\\n        headerCellTemplate=\\\"price_nteHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\" [editorOptions]=\\\"{ format: formatter.don_gia_nte }\\\"\\r\\n        [format]=\\\"formatter.don_gia_nte\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\" [editorOptions]=\\\"{ format: formatter.don_gia }\\\"\\r\\n        [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && _objTemplateSelect.template_type!='HOA_DON_BAN_GIAO_XE' && _objTemplateSelect.template_type!='HOA_DON_BAO_DUONG_XE')\\r\\n      || (_oTemplateTT78 && _oTemplateTT78.is_discount && _oTemplateTT78.template_type!='HOA_DON_BAN_GIAO_XE' && _oTemplateTT78.template_type!='HOA_DON_BAO_DUONG_XE'))\\\"\\r\\n        dataField=\\\"amount_without_discount\\\" headerCellTemplate=\\\"amountNoDiscountHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien_chua_ck }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien_chua_ck\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && _objTemplateSelect.template_type!='HOA_DON_BAN_GIAO_XE' && _objTemplateSelect.template_type!='HOA_DON_BAO_DUONG_XE')\\r\\n      || (_oTemplateTT78 && _oTemplateTT78.is_discount && _oTemplateTT78.template_type!='HOA_DON_BAN_GIAO_XE' && _oTemplateTT78.template_type!='HOA_DON_BAO_DUONG_XE'))\\\"\\r\\n        dataField=\\\"discount\\\" headerCellTemplate=\\\"discountHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.chiet_khau }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.chiet_khau }}\\\" [editorOptions]=\\\"{ format: formatter.ty_le_chiet_khau }\\\"\\r\\n        [format]=\\\"formatter.ty_le_chiet_khau\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount) || (_oTemplateTT78 && _oTemplateTT78.is_discount))\\\"\\r\\n        dataField=\\\"amount_discount\\\" headerCellTemplate=\\\"amount_discountHeader\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tien_chiet_khau }\\\" [format]=\\\"formatter.tien_chiet_khau\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.discount_on_price\\\" dataField=\\\"discount_on_price\\\"\\r\\n        headerCellTemplate=\\\"discount_on_priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.ck_theo_don_gia }\\\" [format]=\\\"formatter.ck_theo_don_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && (_objTemplateSelect.template_type=='HOA_DON_BAN_GIAO_XE' || _objTemplateSelect.template_type=='HOA_DON_BAO_DUONG_XE'))\\r\\n  || (_oTemplateTT78 && _oTemplateTT78.is_discount && (_oTemplateTT78.template_type=='HOA_DON_BAN_GIAO_XE' || _oTemplateTT78.template_type=='HOA_DON_BAO_DUONG_XE'))) || configs.system_parameter.discount_on_price\\\"\\r\\n        dataField=\\\"price_after_discount\\\" headerCellTemplate=\\\"priceHeaderAfterDiscount\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\" [editorOptions]=\\\"{ format: formatter.don_gia,step: '0' }\\\"\\r\\n        [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column cssClass=\\\"vat-invoices\\\" *ngIf=\\\"isHdGTGT\\\" dataField=\\\"vat\\\" [editorOptions]=\\\"{showClearButton: true}\\\"\\r\\n        headerCellTemplate=\\\"vatHeader\\\" width=\\\"{{ _translate.GRID_WIDTH.vat }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.vat }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && (_objTemplateSelect.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')) || (_oTemplateTT78 && (_oTemplateTT78.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n        dataField=\\\"other_tax\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.othertax  }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && (_objTemplateSelect.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')) || (_oTemplateTT78 && (_oTemplateTT78.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n        dataField=\\\"other_charge\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.money_other  }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"isHdGTGT\\\" dataField=\\\"amount_vat\\\" headerCellTemplate=\\\"amountVatHeader\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tien_thue }\\\" [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\"\\r\\n        width=\\\"{{ _translate.GRID_WIDTH.tong_tien_sau_thue }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tong_tien_sau_thue }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- config column header -->\\r\\n      <div *dxTemplate=\\\"let d of 'exchangeRateHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ty_gia')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.CONTROLL.LABEL.currency_rate }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.quantity }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }} <img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceaftervatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia_sau_thue')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.price_after_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeaderAfterDiscount'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.price_after_discount }}<img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'price_nteHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia_nte')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price_nte\\r\\n          }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'discount_on_priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ck_theo_don_gia')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.discount_on_price }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountNoDiscountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien_chua_ck')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.amount_without_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ty_le_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amount_discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.amount_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\"> {{ _translate.GRID.INVOICE_DETAILS.amount_vat\\r\\n          }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.total_money\\r\\n          }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_promotion_new\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'khuyen_mai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion_new\\\" [disabled]=\\\"d.data.is_promotion\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'phi_dich_vu'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_money_service\\\" (onValueChanged)=\\\"changePhiDV(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\" (onValueChanged)=\\\"cktmChange(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'PhiHoanVe'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_refund_ticket\\\" (onValueChanged)=\\\"changePhiHoanVe(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onRowPrepared)=\\\"onRowPrepared($event)\\\" *ngIf=\\\"isPXKDaiLy || isPXKNB\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"gripAllowEdit\\\"></dxo-editing>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.delete }}\\\" width=\\\"40\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"view_order\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.view_order }}\\\" width=\\\"40\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- mã hàng hóa -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_add_product_code\\\" dataField=\\\"product_code\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_code }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n        alignment=\\\"center\\\" [editorOptions]=\\\"editorOptionsForCode\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"product_code\\\" *ngIf=\\\"!isAll\\\">\\r\\n        </dxo-lookup>\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsViewFull\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\" *ngIf=\\\"isAll\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"( !configs.system_parameter.is_add_product_code && isTextProductName )\\\"\\r\\n        [editorOptions]=\\\"{showClearButton: true}\\\" dataField=\\\"product_name\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\" alignment=\\\"left\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"product_name\\\" valueExpr=\\\"product_name\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"(!isTextProductName) || (configs.system_parameter.is_add_product_code  && isTextProductName)\\\"\\r\\n        dataField=\\\"product_name\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Đơn hàng/ Hợp đồng -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"(extentionGrid && extentionGrid.don_hang_hop_dong) || (configs && configs.system_parameter && configs.system_parameter.display_contract_order)\\\"\\r\\n        dataField=\\\"contract_order\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_hang_hop_dong }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.po_no_contract_no }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- <dxi-column dataField=\\\"number_code\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.code }}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column> -->\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Khuyến mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.promotional_goods_on_the_invoice\\\" cellTemplate=\\\"khuyen_mai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.promotion }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.unit_code }}\\\" [width]=\\\"100\\\"\\r\\n        alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" onValueChanged=\\\"b($event)\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"isPXKDaiLy\\\" dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\" [width]=\\\"100\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"!isPXKDaiLy\\\" dataField=\\\"number_real_export\\\" headerCellTemplate=\\\"quantity_exportHeader\\\"\\r\\n        [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"!isPXKDaiLy\\\" dataField=\\\"number_real_import\\\" headerCellTemplate=\\\"quantity_importHeader\\\"\\r\\n        [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.so_luong\\t }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" [width]=\\\"90\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia }\\\" [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" [width]=\\\"109\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\" [width]=\\\"150\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- config column header -->\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.quantity }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{_translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'quantity_exportHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.quantity_export }}<img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'quantity_importHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.quantity_import }}<img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'price_nteHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia_nte')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.price_nte }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{_translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_promotion_new\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'khuyen_mai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion_new\\\" [disabled]=\\\"d.data.is_promotion\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.amount_after_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\" (onValueChanged)=\\\"cktmChange()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-bottom:10px;margin-top:20px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:15px}.support-invoice .support-link img{margin-right:15px;margin-top:-2px}.support-invoice #auto-input{margin-right:20px !important}::ng-deep .vat-invoices .dx-texteditor-buttons-container{display:-ms-inline-grid;display:inline-grid}.button-dropdown-extend{display:inline-flex}::ng-deep .wrap-column-autoC{padding:0px !important}::ng-deep .wrap-column-autoC .wrap-code-template dx-autocomplete{border:none !important}::ng-deep .wrap-column-autoC .wrap-code-template dx-autocomplete input{text-align:center}::ng-deep .wrap-column-autoC .wrap-name-template dx-autocomplete{border:none !important}::ng-deep .wrap-column-autoC .wrap-name-template dx-autocomplete input{text-align:left}\\n\"","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxDataGridComponent, DxFormComponent } from 'devextreme-angular';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\n\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { ConfigDecimalComponent } from '@shared/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport * as XLSX from 'xlsx';\r\nimport { elementAttribute } from '@angular/core/src/render3/instructions';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\nimport * as _ from 'lodash'\r\n\r\n@Component({\r\n  selector: 'adjust-vat-product-grip',\r\n  templateUrl: './adjust-product-grip.component.html',\r\n  styleUrls: ['./adjust-product-grip.component.scss']\r\n})\r\nexport class AdjustProductGripComponent implements OnInit, OnDestroy {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n\r\n  routeSub: Subscription;\r\n\r\n  contextMenu = [{ text: 'Thêm' }, { text: 'Xóa' }];\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() not_auto: any; //Không tự tính giá trị\r\n  @Input() oldForm: any; //Không tự tính giá trị\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() extentionGrid: any;\r\n  @Input() isTT78: boolean;\r\n  @Input() _oTemplateTT78: any;\r\n  select: any = {};\r\n  @Input() frmData: any;\r\n  // frmData: InvoiceModel = new InvoiceModel(1);\r\n  bsModalRef: BsModalRef;\r\n  showPopup: boolean = false; //Popup\r\n  dataExcelFile: any = null;\r\n  ttDaXuatHoaDon: boolean = false;\r\n  isTextProductName: boolean = false;\r\n  isPhuongThucDC: boolean = false;\r\n  visibleProductName: boolean = true;\r\n  gripAllowEdit: boolean = false;\r\n  configs: any;\r\n  reloadSelectProduct = true;\r\n  showDinhKhoan: false;\r\n  isAll = false;\r\n  isHdGTGT: boolean = true;\r\n  _translate: any;\r\n  productsFull: any;\r\n  rowData = 1;\r\n  isPXKDaiLy = false\r\n  isPXKNB = false;\r\n  loaiHoaDon: any;\r\n  extras = [];\r\n  dataExcelFileInfo: any = null;\r\n  isHangHoaDichVu = false;\r\n  @Output('gripChange') gripChange = new EventEmitter<Array<any>>();\r\n  @Output('autoChange') autoChange = new EventEmitter<any>();\r\n\r\n\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private productsService: ProductsService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loaiHoaDon = this.route.snapshot.data.type;\r\n    if (this.loaiHoaDon == '03XKNB')\r\n      this.isPXKNB = true;\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n    if (this.oldForm.template_code.indexOf('02GTTT') >= 0 || this.oldForm.template_code.indexOf('07KPTQ') >= 0 || this.oldForm.template_code == \"2\") {\r\n      this.isHdGTGT = false;\r\n    }\r\n    this.configs = this.authService.getConfigs();\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      //put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.countrys = data.init[1].DM_QUOC_GIA;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.adjustment_methods = VSelectBoxService._adjustmentMethods(this._translate);\r\n      //Hàng hóa dịch vụ\r\n      this.select.products = [];\r\n      this.productsFull = data.init[5];\r\n      this.productsFull.forEach(item => {\r\n        if (item.code) {\r\n          item.mhvth = item.code + ': ' + item.name;\r\n        } else {\r\n          item.mhvth = \"(Chưa có mã hàng) \" + ': ' + item.name;\r\n        }\r\n      })\r\n      let len_data = data.init.length;\r\n      this.oldForm.invoice_products.forEach(item => {\r\n        this.select.products.push(item);\r\n      });\r\n      this.select.products.forEach(item => {\r\n        if (item.product_code) {\r\n          item.mhvth = item.product_code + ': ' + item.product_name;\r\n        } else {\r\n          item.mhvth = \"(Chưa có mã hàng) \" + ': ' + item.product_name;\r\n        }\r\n      });\r\n      this.select.productsViewFull = {\r\n        store: new CustomStore({\r\n          key: 'code',\r\n          loadMode: 'raw',\r\n          load: (loadOptions) => {\r\n            return this.productsFull;\r\n          },\r\n          byKey: function (key) {\r\n            const _data = data.init[0].filter(p => p.code === key.toString());\r\n            return _data;\r\n          }\r\n        }),\r\n        paginate: true,\r\n        sort: 'name'\r\n      };\r\n      if (this.configs.system_parameter.is_add_product_code) {\r\n        this.isTextProductName = false;\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'product_code',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              const _data = data.init[0].filter(p => p.code === key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'product_name'\r\n        };\r\n      } else {\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'product_name',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              // console.log(encodeURIComponent(key) + \" abc\");\r\n              return [];\r\n              // let _data = data.init[2].filter(p => p.code == key.toString());\r\n              // return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'product_name'\r\n        };\r\n      }\r\n      if (data.init[3]) {\r\n        if (data.init[3].invoice_products) {\r\n          data.init[3].invoice_products.forEach(item => {\r\n            if (item.product_name && item.unit_code) {\r\n              const obj1 = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (!obj1) {\r\n                this.select.unit_codes.push({\r\n                  id: Helper.makeid(),\r\n                  code: item.unit_code,\r\n                  name: item.unit_name ? item.unit_name : item.unit_code\r\n                });\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n      this.invoiceService.addProductInListP(this.select.products, this.invoice_products._array, 'product_code', 'mhvth')\r\n      this.invoiceService.addProductInListP(this.productsFull, this.invoice_products._array, 'code', 'mhvth')\r\n    });\r\n\r\n    //Event\r\n    this.createUpdateEvent();\r\n  }\r\n\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      let newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n\r\n  changeColumnProductNameToSelect() {\r\n    this.isAll = false\r\n    this.isTextProductName = true;\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.refresh();\r\n    }, 100);\r\n  }\r\n\r\n  changeColumnProductNameToText() {\r\n    if (this.isPXKDaiLy || this.isPXKNB) {\r\n      this.isAll = true\r\n    } else {\r\n      if (this.configs.system_parameter.is_add_product_code) {\r\n        this.isAll = true\r\n      } else {\r\n        this.isTextProductName = false;\r\n      }\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.refresh();\r\n      }, 100);\r\n    }\r\n  }\r\n  ShowAndHidePhuongThucDC(value, phuongThucDieuChinh?) {\r\n    if (phuongThucDieuChinh == 'GIAM_HH_DV' || phuongThucDieuChinh == 'TANG_HH_DV') {\r\n      this.isHangHoaDichVu = true\r\n    } else {\r\n      this.isHangHoaDichVu = false;\r\n\r\n    }\r\n    this.isPhuongThucDC = value;\r\n    this.isAll = value\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.refresh();\r\n    }, 100);\r\n  }\r\n\r\n  //khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        let column = Object.keys(value)[0];\r\n        this.invoice_products.byKey(key).then((row) => {\r\n          switch (column) {\r\n            case 'view_order':\r\n              this.view_orderChange();\r\n              break;\r\n            case 'product_name':\r\n              this.product_nameChange(row);\r\n              break;\r\n            case 'product_code':\r\n              if (this.isAll) {\r\n                this.product_codeChangeFull(row);\r\n              } else {\r\n                this.product_codeChange(row);\r\n              }\r\n              break;\r\n            case 'unit_code':\r\n              this.unit_codeChange(row);\r\n              break;\r\n            case 'quantity':\r\n            case 'number_real_export':\r\n            case 'price':\r\n            case 'price_nte':\r\n            case 'amount':\r\n            case 'amount_vat':\r\n            case 'amount_after_vat':\r\n            case 'amount_discount':\r\n            case 'discount':\r\n            case 'amount_without_discount':\r\n            case 'other_tax':\r\n            case 'other_charge':\r\n              this._tinhGiaTri();\r\n              break;\r\n            case 'price_after_vat':\r\n              if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n              else\r\n                row.price = row.price_after_vat;\r\n              this._tinhGiaTri();\r\n              break;\r\n            case 'vat':\r\n              if (this.configs.system_parameter.price_after_vat) {\r\n                if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                  row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                else\r\n                  row.price = row.price_after_vat;\r\n              }\r\n              this._tinhGiaTri();\r\n              break;\r\n            case 'adjustment_form':\r\n              if (row.adjustment_form == \"TANG\") {\r\n                if (VStringService._getValueToString(row.product_name) == \"\" || row.product_name === \"Điều chỉnh giảm\") {\r\n                  row.product_name = 'Điều chỉnh tăng';\r\n                  this.invoice_products.update(row.id, row);\r\n                }\r\n              }\r\n              else if (row.adjustment_form == \"GIAM\") {\r\n                if (VStringService._getValueToString(row.product_name) == \"\" || row.product_name === \"Điều chỉnh tăng\") {\r\n                  row.product_name = 'Điều chỉnh giảm';\r\n                  this.invoice_products.update(row.id, row);\r\n                }\r\n              }\r\n              else if (row.adjustment_form == \"THONG_TIN\") {\r\n                if (VStringService._getValueToString(row.product_name) == \"\" || row.product_name === \"Điều chỉnh tăng\" || row.product_name === \"Điều chỉnh giảm\")\r\n                  row.product_name = \"\";\r\n                row.contract_order = null;\r\n                row.management_code = null;\r\n                row.chassis_number = null;\r\n                row.color_material = null;\r\n                row.product_exchange_rate = null;\r\n                row.product_date = null;\r\n                row.lot = null;\r\n                row.expiration_date = null;\r\n                row.country_code = null;\r\n                row.provisions_on_accounts = null;\r\n                row.unit_code = null;\r\n                row.quantity = null;\r\n                row.price_nte = null;\r\n                row.price = null;\r\n                row.price_after_vat = null;\r\n                row.amount_without_discount = null;\r\n                row.discount = null;\r\n                row.amount_discount = null;\r\n                row.discount_on_price = null;\r\n                row.price_after_discount = null;\r\n                row.amount = null;\r\n                row.vat = null;\r\n                row.other_tax = null;\r\n                row.other_charge = null;\r\n                row.items_number = null;\r\n                row.complete_order_date = null;\r\n                row.mpq = null;\r\n                row.amount_vat = null;\r\n                row.amount_after_vat = null;\r\n                this.invoice_products.update(row.id, row);\r\n              }\r\n              this._tinhGiaTri();\r\n              break;\r\n            default:\r\n              break;\r\n            // }\r\n          }\r\n        }, (error) => {\r\n          alert(error);\r\n        });\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code == 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType == 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.dataField === 'product_name' && e.parentType === 'dataRow' && e.editorName !== 'dxSelectBox') {\r\n      e.editorName = 'dxTextArea';\r\n    }\r\n    if (e.dataField !== 'product_name' && e.dataField !== 'adjustment_form' && e.dataField !== 'unit_code') {\r\n      if (e.row.data.adjustment_form == 'THONG_TIN')\r\n        e.editorOptions.disabled = true;\r\n    }\r\n    // if (e.parentType === 'dataRow') {\r\n    //   e.editorOptions.onFocusOut = (args) => {\r\n    //     if (e.dataField === 'unit_code') {\r\n    //       const _obj = this.select.unit_codes.filter(p => p.code === e.row.data.unit_code)[0];\r\n    //       if (_obj) {\r\n    //         e.row.data.unit_name = _obj.name;\r\n    //       } else {\r\n    //         e.row.data.unit_name = '';\r\n    //       }\r\n    //     }\r\n    //     if (e.dataField === 'country_code') {\r\n    //       const _obj = this.select.countrys.filter(p => p.code === e.row.data.country_code)[0];\r\n    //       if (_obj) {\r\n    //         e.row.data.country_name = _obj.name;\r\n    //       } else {\r\n    //         e.row.data.country_name = '';\r\n    //       }\r\n    //     }\r\n    //     this.invoice_products.update(e.row.data.id, e.row.data);\r\n    //   };\r\n    // }\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField == 'quantity' || e.dataField == 'price' || e.dataField == 'amount' || e.dataField == 'amount_vat' || e.dataField == 'amount_after_vat') && e.parentType == 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row && e.row.rowType === 'data') {\r\n      e.items = [{\r\n        text: 'Thêm hàng',\r\n        onItemClick: () => {\r\n          this.addRow(e.row.rowIndex);\r\n        }\r\n      },\r\n      {\r\n        text: 'Xóa hàng',\r\n        onItemClick: () => {\r\n          this.deleteRow(e.row.data);\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n  addRow(rowIndexFocus?) {\r\n    if (rowIndexFocus >= 0) {\r\n      let rowIndex = rowIndexFocus + 1;\r\n      const data = this.frmData.add_invoice_products_data(rowIndex, rowIndex);\r\n      if (data) {\r\n        this.invoice_products._array.splice(rowIndex, 0, data);\r\n        let order = 0;\r\n        this.invoice_products._array.forEach(item => {\r\n          item.order = ++order;\r\n          item.view_order = item.order;\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      let len, order, orderLast;\r\n      this.invoice_products.load().then((dataSource) => {\r\n        len = dataSource.length;\r\n        orderLast = dataSource[len - 1].order;\r\n      });\r\n      for (let i = 0; i < this.rowData; i++) {\r\n\r\n        if (len >= 1) {\r\n          order = ++orderLast;\r\n        } else {\r\n          order = 1;\r\n        }\r\n        const data = this.frmData.add_invoice_products_data(order, order);\r\n        this.invoice_products.insert(data);\r\n      }\r\n    }\r\n    this.dataSource.reload();\r\n  }\r\n\r\n  view_orderChange() {\r\n    if (!this.isTT78) {\r\n      let _index = 0;\r\n      this.dataSource.items().forEach(item => {\r\n        if (item.view_order && VStringService._getValueToString(this._objTemplateSelect.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          item.view_order = ++_index;\r\n        }\r\n        if (VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          if (!item.is_money_service) {\r\n            item.view_order = ++_index;\r\n          } else {\r\n            item.view_order = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      let _index = 0;\r\n      this.dataSource.items().forEach(item => {\r\n        if (item.view_order && VStringService._getValueToString(this._oTemplateTT78.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          item.view_order = ++_index;\r\n        }\r\n        if (VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          if (!item.is_money_service) {\r\n            item.view_order = ++_index;\r\n          } else {\r\n            item.view_order = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  //Thay đổi cột mã hàng\r\n  product_nameChange(row) {\r\n    setTimeout(() => {\r\n      this.select.products.some(item => {\r\n        if (item.product_name == row.product_name) {\r\n          //row.product_name = item.name;\r\n          row.unit_code = this.checkUnitCode(item.unit_code);\r\n          row.unit_name = item.unit_name;\r\n          row.quantity = item.quantity ? parseFloat(item.quantity) : item.quantity;\r\n          row.price_after_vat = item.price_after_vat ? parseFloat(item.price_after_vat) : item.price_after_vat;\r\n          row.price = item.price ? parseFloat(item.price) : item.price;\r\n          row.price_nte = item.price_nte ? parseFloat(item.price_nte) : item.price_nte;\r\n          row.amount = item.price ? parseFloat(item.price) : 0;\r\n          row.engine_number = item.engine_number;\r\n          row.discount_on_price = item.discount_on_price;\r\n          row.price_after_discount = item.price_after_discount;\r\n          row.amount_discount = item.amount_discount;\r\n          row.chassis_number = item.chassis_number;\r\n          row.color_material = item.color_material;\r\n          row.product_date = item.product_date;\r\n          row.product_exchange_rate = item.product_exchange_rate;\r\n          row.other_tax = item.other_tax;\r\n          row.other_charge = item.other_charge;\r\n          row.items_number = item.items_number;\r\n          row.number_real_export = item.number_real_export ? parseFloat(item.number_real_export) : null;\r\n          row.number_real_import = item.number_real_import ? parseFloat(item.number_real_import) : null;\r\n          row.mpq = item.mpq;\r\n          row.complete_order_date = item.complete_order_date;\r\n          row.contract_order = item.contract_order;\r\n          row.management_code = item.management_code;\r\n          row.is_refund_ticket = item.is_refund_ticket;\r\n          row.is_promotion = item.is_promotion;\r\n          row.is_promotion_new = item.is_promotion_new;\r\n          row.lot = item.lot;\r\n          row.expiration_date = item.expiration_date;\r\n          row.country_code = item.country_code;\r\n          if (this.isHdGTGT) {\r\n            row.vat = item.vat != null ? item.vat.toString() : null;\r\n            row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n            row.amount_after_vat = row.amount + row.amount_vat;\r\n          } else {\r\n            row.amount_after_vat = row.amount;\r\n          }\r\n          this.invoice_products.update(row.order, row);\r\n          return true;\r\n        }\r\n      });\r\n      this._tinhGiaTri();\r\n    }, 200);\r\n  }\r\n  product_codeChange(row) {\r\n    setTimeout(() => {\r\n      this.select.products.some(item => {\r\n        if (item.product_code == row.product_code && !item.notCallApi) {\r\n          row.product_name = item.product_name;\r\n          row.unit_code = this.checkUnitCode(item.unit_code);\r\n          row.unit_name = item.unit_name;\r\n          row.quantity = item.quantity ? parseFloat(item.quantity) : item.quantity;\r\n          row.price_after_vat = item.price_after_vat ? parseFloat(item.price_after_vat) : item.price_after_vat;\r\n          row.price = item.price ? parseFloat(item.price) : item.price;\r\n          row.number_real_export = item.number_real_export ? parseFloat(item.number_real_export) : null;\r\n          row.number_real_import = item.number_real_import ? parseFloat(item.number_real_import) : null;\r\n          row.price_nte = item.price_nte ? parseFloat(item.price_nte) : item.price_nte;\r\n          if (item.quantity == null || item.quantity == 0 || item.price === 0) {\r\n            row.amount = item.amount ? parseFloat(item.amount) : 0;\r\n          } else {\r\n            row.amount = item.price ? parseFloat(item.price) : 0;\r\n          }\r\n          row.engine_number = item.engine_number;\r\n          row.discount_on_price = item.discount_on_price;\r\n          row.price_after_discount = item.price_after_discount;\r\n          row.amount_discount = item.amount_discount;\r\n          row.chassis_number = item.chassis_number;\r\n          row.color_material = item.color_material;\r\n          row.product_date = item.product_date;\r\n          row.product_exchange_rate = item.product_exchange_rate;\r\n          row.other_tax = item.other_tax;\r\n          row.other_charge = item.other_charge;\r\n          row.items_number = item.items_number;\r\n          row.mpq = item.mpq;\r\n          row.complete_order_date = item.complete_order_date;\r\n          row.contract_order = item.contract_order;\r\n          row.management_code = item.management_code;\r\n          row.is_refund_ticket = item.is_refund_ticket;\r\n          row.is_promotion = item.is_promotion;\r\n          row.is_promotion_new = item.is_promotion_new;\r\n          row.lot = item.lot;\r\n          row.expiration_date = item.expiration_date;\r\n          row.country_code = item.country_code;\r\n          if (this.isHdGTGT) {\r\n            row.vat = item.vat != null ? item.vat.toString() : null;\r\n            row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n            row.amount_after_vat = row.amount + row.amount_vat;\r\n          } else {\r\n            row.amount_after_vat = row.amount;\r\n          }\r\n          this.invoice_products.update(row.order, row);\r\n          return true;\r\n        }\r\n      });\r\n      this._tinhGiaTri();\r\n    }, 200);\r\n  }\r\n  product_codeChangeFull(row) {\r\n    setTimeout(() => {\r\n      this.productsFull.some(item => {\r\n        if (item.code === row.product_code) {\r\n          if (!item.notCallApi) {\r\n            this.productsService.getProduct(item.id).subscribe(rs => {\r\n              if (rs.status == \"success\") {\r\n                let product = rs.data.product;\r\n                if (product) {\r\n                  row.product_name = product.name;\r\n                  row.unit_code = this.checkUnitCode(product.unit_code);\r\n                  row.quantity = null;\r\n                  if (this.isHdGTGT) {\r\n                    row.vat = product.vat != null ? product.vat.toString() : null;\r\n                  } else {\r\n                    row.vat = null;\r\n                  }\r\n                  if (this.configs.system_parameter.price_after_vat) {\r\n                    row.price_after_vat = product.price ? parseFloat(product.price) : product.price;\r\n                    if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                      row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                    else\r\n                      row.price = row.price_after_vat;\r\n                  }\r\n                  else\r\n                    row.price = product.price ? parseFloat(product.price) : product.price;\r\n                  row.amount = product.price ? parseFloat(product.price) : 0;\r\n                  if (this.isHdGTGT) {\r\n                    row.amount_vat = (row.vat >= 0 || row.vat == -3) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n                  } else {\r\n                    row.amount_vat = null;\r\n                  }\r\n                  row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n                  let test = this.invoice_products;\r\n                  this.invoice_products.update(row.id, row);\r\n                  this._tinhGiaTri();\r\n                  return true;\r\n                }\r\n              }\r\n              else {\r\n                Library.notify(rs.message, 'error');\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }, 200);\r\n  }\r\n  unit_codeChange(row) {\r\n    let _obj = this.select.unit_codes.filter(p => p.code == row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    let items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code == unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _tinhGiaTri() {\r\n    if (!this.isTT78) {\r\n      setTimeout(() => {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._objTemplateSelect, this.configs.system_parameter);\r\n        if (VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBay\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayThuTien\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayTongHop\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayChung\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonXangDau) {\r\n          VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n        }\r\n        if (this.isPhuongThucDC)\r\n          VChanggeMoneyService.convertToMoneyPositive(this.frmData);\r\n      }, 100);\r\n    }\r\n    else {\r\n      setTimeout(() => {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._oTemplateTT78, this.configs.system_parameter);\r\n        if (VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBay\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayThuTien\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayTongHop\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayChung\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonXangDau) {\r\n          VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n        }\r\n        if (this.isPhuongThucDC)\r\n          VChanggeMoneyService.convertToMoneyPositive(this.frmData);\r\n      }, 100);\r\n    }\r\n\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    let temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    let p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  //Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    this.modalService.onHide.subscribe(() => {\r\n      let data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n    });\r\n  }\r\n\r\n  //Xóa hàng\r\n  deleteRow(item) {\r\n    // setTimeout(() => {\r\n    let check = confirm('Bạn có đồng ý xóa không?');\r\n    if (check && !this.ttDaXuatHoaDon) {\r\n      setTimeout(() => {\r\n        this.invoice_products.remove(item.id);\r\n\r\n        // this.dataSource.store().remove(item.id);\r\n        this.dataSource.reload();\r\n        this._tinhGiaTri();\r\n\r\n      });\r\n    }\r\n    // }, 200);\r\n  }\r\n\r\n  autoInputChange() {\r\n    this.autoChange.emit(this.not_auto);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  changePhiDV(row) {\r\n    this.view_orderChange();\r\n    if (row.is_money_service) {\r\n      row.commercial_discount = false;\r\n    }\r\n    if (row.is_money_service && VStringService._getValueToString(row.product_name) == '') {\r\n      row.product_name = 'Phí dịch vụ';\r\n      this.invoice_products.update(row.id, row);\r\n    } else if (!row.is_money_service && VStringService._getValueToString(row.product_name) === 'Phí dịch vụ') {\r\n      row.product_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n  cktmChange(row) {\r\n    if (row.commercial_discount) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n  changePhiHoanVe(row) {\r\n    if (row.commercial_discount) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n  onClickGuidReduce() {\r\n    this.router.navigate([]).then(result => { window.open('https://ihoadon.vn/hddt/danh-muc-hang-hoa-dich-vu-duoc-giam-thue-gtgt-theo-nghi-quyet-so-406-nq-ubtvqh15.html', '_blank'); });\r\n  }\r\n\r\n  _changeND92(e) {\r\n    if (e.value)\r\n      this.frmData.is_resolution_43 = !e.value;\r\n    this._tinhGiaTri();\r\n  }\r\n  _changeNQ43(e) {\r\n    if (e.value) {\r\n      this.frmData.is_exemption_decree = !e.value;\r\n      if (this.frmData.sales_percentage == null && parseInt(this.configs.system_parameter.value_rate_percent) > 0) {\r\n        this.frmData.sales_percentage = parseInt(this.configs.system_parameter.value_rate_percent);\r\n      }\r\n    }\r\n    else {\r\n      this.frmData.sales_percentage = null;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'LAY_MAU_BANG_KE') {\r\n      this.layMauBangKe();\r\n    } else if (e.itemData.id === 'NAP_DU_LIEU_BANG_KE') {\r\n      this.napDuLieuTuBangKe();\r\n    }\r\n  }\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) {\r\n      throw new Error('Không thể chọn nhiều file');\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      const data = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 9 }));\r\n      const account = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 0 }));\r\n      const fileBangKe: any = document.getElementById('file-bang-ke');\r\n      fileBangKe.value = '';\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"view_order\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n      }\r\n      this.dataExcelFile = _arrData;\r\n      this.dataExcelFileInfo = account.slice(0, 4);\r\n      this.showPopup = true;\r\n    };\r\n    reader.readAsBinaryString(target.files[0]);\r\n  }\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    let ts = this._objTemplateSelect;\r\n    let fields = [];\r\n    if (!this.isTT78) {\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayTongHop\r\n        && VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung\r\n        && VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayHoanVe) {\r\n        fields.push(\"other_tax\");\r\n        fields.push(\"other_charge\");\r\n      }\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonKinhDoanhXe) {\r\n        fields.push(\"engine_number\");\r\n        fields.push(\"chassis_number\");\r\n      }\r\n    }\r\n    else {\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayTongHop\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayHoanVe) {\r\n        fields.push(\"other_tax\");\r\n        fields.push(\"other_charge\");\r\n      }\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonKinhDoanhXe) {\r\n        fields.push(\"engine_number\");\r\n        fields.push(\"chassis_number\");\r\n      }\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonNhaHangKhachSan\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung) {\r\n        fields.push(\"is_money_service\");\r\n      }\r\n      if (!this.configs.system_parameter.incurred_refund_ticket)\r\n        fields.push(\"is_refund_ticket\");\r\n      if (!this.configs.system_parameter.view_expiration_date)\r\n        fields.push(\"expiration_date\");\r\n      if (!this.configs.system_parameter.view_lot)\r\n        fields.push(\"lot\");\r\n      if (!this.configs.system_parameter.promotional_goods_on_the_invoice)\r\n        fields.push(\"is_promotion_new\");\r\n      if (!this.configs.system_parameter.is_promotion)\r\n        fields.push(\"is_promotion\");\r\n    }\r\n    if (!this.configs.system_parameter.product_exchange_rate)\r\n      fields.push(\"product_exchange_rate\");\r\n    if (!this.configs.system_parameter.product_date)\r\n      fields.push(\"product_date\");\r\n    // if (this.configs && this.configs.system_parameter && this.configs.system_parameter.display_contract_order)\r\n    //   fields.push(\"contract_order\");\r\n\r\n    if (!this.extentionGrid || (this.extentionGrid && !this.extentionGrid.ma_quan_ly)) {\r\n      fields.push(\"management_code\");\r\n    }\r\n    let invoiceType = \"\";\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.XKNB03 || this.loaiHoaDon == sEnum.loaihoadon.HGDL04) {\r\n      if (this.loaiHoaDon == sEnum.loaihoadon.XKNB03) {\r\n        invoiceType = sEnum.loaihoadon.XKNB03\r\n      } else {\r\n        invoiceType = sEnum.loaihoadon.HGDL04\r\n      }\r\n    } else {\r\n      invoiceType = \"\"\r\n    }\r\n    this.vatService.layFileMau({\r\n      customer_name: this.oldForm.customer_name,\r\n      buyer_tax_code: this.oldForm.buyer_tax_code,\r\n      buyer_address: this.oldForm.buyer_address,\r\n      buyer_name: this.oldForm.buyer_name,\r\n      invoice_type_name: invoiceType,\r\n      hiddens: fields\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById('file-bang-ke').click();\r\n  }\r\n  thayTheToanBo() {\r\n    setTimeout(() => {\r\n      Library.showloading();\r\n      if (this.loaiHoaDon == sEnum.loaihoadon.XKNB03 || this.loaiHoaDon == sEnum.loaihoadon.HGDL04) {\r\n        if (this.loaiHoaDon == sEnum.loaihoadon.XKNB03) {\r\n          this.fillDataPXK(this.oldForm.invoice_products, this.dataExcelFileInfo, 'thaythe');\r\n        } else {\r\n          this.fillDataPXKDaiLy(this.oldForm.invoice_products, this.dataExcelFileInfo, 'thaythe');\r\n        }\r\n      } else {\r\n        this.fillData(this.oldForm.invoice_products, this.dataExcelFileInfo, 'thaythe');\r\n      }\r\n\r\n      this.showPopup = false;\r\n      this.dataExcelFile = null;\r\n    }, 300);\r\n  }\r\n\r\n  themTiep() {\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.XKNB03 || this.loaiHoaDon == sEnum.loaihoadon.HGDL04) {\r\n      if (this.loaiHoaDon == sEnum.loaihoadon.XKNB03) {\r\n        this.fillDataPXK(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n      } else {\r\n        this.fillDataPXKDaiLy(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n      }\r\n    } else {\r\n      this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    }\r\n\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n  fillData(fileData, info, status) {\r\n    if (status === 'thaythe') {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.invoice_products.remove(item.id);\r\n        });\r\n      });\r\n    } else {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount && !item.amount_vat && !item.amount_after_vat) {\r\n            this.invoice_products.remove(item.id);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n      if (element.product_name) {\r\n        let invoice = new Object;\r\n        invoice[\"id\"] = Helper.makeid();\r\n        invoice[\"view_order\"] = element.view_order ? parseInt(element.view_order) : null;\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? element.quantity : null;\r\n        invoice[\"vat\"] = (element.vat && this.isHdGTGT) ? element.vat : null;\r\n        invoice[\"contract_order\"] = element.contract_order ? element.contract_order : \"\";\r\n        if (element.price) {\r\n          if (this.configs.system_parameter.price_after_vat) {\r\n            invoice[\"price_after_vat\"] = element.price ? element.price : null;\r\n            if ((invoice[\"vat\"] == 5 || invoice[\"vat\"] == 10 || invoice[\"vat\"] == 7 || invoice[\"vat\"] == 3.5) && invoice[\"price_after_vat\"] !== null)\r\n              invoice[\"price\"] = (invoice[\"price_after_vat\"] / (1 + invoice[\"vat\"] / 100));\r\n            else\r\n              invoice[\"price\"] = invoice[\"price_after_vat\"];\r\n          }\r\n          else\r\n            invoice[\"price\"] = element.price ? element.price : null;\r\n        }\r\n        invoice[\"amount\"] = element.amount ? element.amount : null;\r\n        invoice[\"amount_vat\"] = element.amount_vat ? element.amount_vat : null;\r\n        // invoice[\"note\"] = element.note ? element.note : null;\r\n        invoice[\"other_tax\"] = element.other_tax ? element.other_tax : null;\r\n        invoice[\"other_charge\"] = element.other_charge ? element.other_charge : null;\r\n        invoice[\"product_exchange_rate\"] = element.product_exchange_rate ? element.product_exchange_rate : null;\r\n        invoice[\"product_date\"] = element.product_date ? element.product_date : null;\r\n        invoice[\"engine_number\"] = element.engine_number ? element.engine_number : null;\r\n        invoice[\"chassis_number\"] = element.chassis_number ? element.chassis_number : null;\r\n        invoice[\"management_code\"] = element.management_code ? element.management_code : null;\r\n        invoice[\"is_money_service\"] = element.is_money_service;\r\n        invoice[\"is_refund_ticket\"] = element.is_refund_ticket;\r\n        invoice[\"is_promotion\"] = element.is_promotion;\r\n        invoice[\"is_promotion_new\"] = element.is_promotion_new;\r\n        invoice[\"discount\"] = element.discount ? element.discount : null;\r\n        invoice[\"amount_discount\"] = element.amount_discount ? element.amount_discount : null;\r\n        invoice[\"lot\"] = element.lot ? element.lot : null;\r\n        invoice[\"expiration_date\"] = element.expiration_date ? element.expiration_date : null;\r\n        if (invoice[\"amount_vat\"] !== null && invoice[\"amount\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"] + invoice[\"amount\"];\r\n        else\r\n          if (invoice[\"amount\"] !== null)\r\n            invoice[\"amount_after_vat\"] = invoice[\"amount\"];\r\n          else\r\n            if (invoice[\"amount_vat\"] !== null)\r\n              invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"];\r\n            else\r\n              invoice[\"amount_after_vat\"] = null;\r\n        if (invoice[\"other_tax\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_tax\"];\r\n        if (invoice[\"other_charge\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_charge\"];\r\n        const _obj = this.select.products.filter(p => p.product_code === invoice[\"product_code\"])[0];\r\n        if (!_obj && invoice[\"product_code\"] !== '') {\r\n          const _objPush = {\r\n            code: invoice[\"product_code\"],\r\n            name: invoice[\"product_name\"],\r\n            mhvth: invoice[\"product_code\"] + ': ' + invoice[\"product_name\"],\r\n          };\r\n          this.select.products.push(_objPush);\r\n        }\r\n        invoice[\"commercial_discount\"] = element.commercial_discount;\r\n        this.invoice_products.insert(invoice);\r\n      }\r\n    });\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataGrid.instance.refresh();\r\n    this._tinhGiaTri();\r\n    Library.hideloading();\r\n  }\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (this.select.unit_codes && this.select.unit_codes.length > 0) {\r\n        const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n        if (_obj) {\r\n          return _obj.code;\r\n        } else {\r\n          const code = VStringService._convertToViKdau(unitName);\r\n          this.select.unit_codes.push({ code: code, name: unitName });\r\n          return code;\r\n        }\r\n      } else {\r\n        this.select.unit_codes = [];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  fillDataPXKDaiLy(fileData, info, status) {\r\n    if (status === 'thaythe') {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.invoice_products.remove(item.id);\r\n        });\r\n      });\r\n    } else {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount && !item.amount_vat && !item.amount_after_vat) {\r\n            this.invoice_products.remove(item.id);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n\r\n      if (element.product_name) {\r\n        let invoice = new Object;\r\n        invoice[\"id\"] = Helper.makeid();\r\n        invoice[\"view_order\"] = element.view_order ? parseInt(element.view_order) : null;\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? element.quantity : null;\r\n        invoice[\"vat\"] = (element.vat && this.isHdGTGT) ? element.vat : null;\r\n        invoice[\"contract_order\"] = element.contract_order ? element.contract_order : \"\";\r\n        if (element.price) {\r\n          if (this.configs.system_parameter.price_after_vat) {\r\n            invoice[\"price_after_vat\"] = element.price ? element.price : null;\r\n            if ((invoice[\"vat\"] == 5 || invoice[\"vat\"] == 10 || invoice[\"vat\"] == 7 || invoice[\"vat\"] == 3.5) && invoice[\"price_after_vat\"] !== null)\r\n              invoice[\"price\"] = (invoice[\"price_after_vat\"] / (1 + invoice[\"vat\"] / 100));\r\n            else\r\n              invoice[\"price\"] = invoice[\"price_after_vat\"];\r\n          }\r\n          else\r\n            invoice[\"price\"] = element.price ? element.price : null;\r\n        }\r\n        invoice[\"amount\"] = element.amount ? element.amount : null;\r\n        invoice[\"amount_vat\"] = element.amount_vat ? element.amount_vat : null;\r\n        // invoice[\"note\"] = element.note ? element.note : null;\r\n        invoice[\"other_tax\"] = element.other_tax ? element.other_tax : null;\r\n        invoice[\"other_charge\"] = element.other_charge ? element.other_charge : null;\r\n        invoice[\"product_exchange_rate\"] = element.product_exchange_rate ? element.product_exchange_rate : null;\r\n        invoice[\"product_date\"] = element.product_date ? element.product_date : null;\r\n        invoice[\"engine_number\"] = element.engine_number ? element.engine_number : null;\r\n        invoice[\"chassis_number\"] = element.chassis_number ? element.chassis_number : null;\r\n        invoice[\"management_code\"] = element.management_code ? element.management_code : null;\r\n        invoice[\"is_money_service\"] = element.is_money_service;\r\n        invoice[\"is_refund_ticket\"] = element.is_refund_ticket;\r\n        invoice[\"is_promotion\"] = element.is_promotion;\r\n        invoice[\"is_promotion_new\"] = element.is_promotion_new;\r\n        invoice[\"lot\"] = element.lot ? element.lot : null;\r\n        invoice[\"expiration_date\"] = element.expiration_date ? element.expiration_date : null;\r\n        if (invoice[\"amount_vat\"] !== null && invoice[\"amount\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"] + invoice[\"amount\"];\r\n        else\r\n          if (invoice[\"amount\"] !== null)\r\n            invoice[\"amount_after_vat\"] = invoice[\"amount\"];\r\n          else\r\n            if (invoice[\"amount_vat\"] !== null)\r\n              invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"];\r\n            else\r\n              invoice[\"amount_after_vat\"] = null;\r\n        if (invoice[\"other_tax\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_tax\"];\r\n        if (invoice[\"other_charge\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_charge\"];\r\n        const _obj = this.select.products.filter(p => p.product_code === invoice[\"product_code\"])[0];\r\n        if (!_obj && invoice[\"product_code\"] !== '') {\r\n          const _objPush = {\r\n            code: invoice[\"product_code\"],\r\n            name: invoice[\"product_name\"],\r\n            mhvth: invoice[\"product_code\"] + ': ' + invoice[\"product_name\"],\r\n          };\r\n          this.select.products.push(_objPush);\r\n        }\r\n        invoice[\"commercial_discount\"] = element.commercial_discount;\r\n        this.invoice_products.insert(invoice);\r\n      }\r\n    });\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataGrid.instance.refresh();\r\n    this._tinhGiaTri();\r\n    Library.hideloading();\r\n  }\r\n\r\n  fillDataPXK(fileData, info, status) {\r\n    if (status === 'thaythe') {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.invoice_products.remove(item.id);\r\n        });\r\n      });\r\n    } else {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount && !item.amount_vat && !item.amount_after_vat) {\r\n            this.invoice_products.remove(item.id);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n\r\n      if (element.product_name) {\r\n        let invoice = new Object;\r\n        invoice[\"id\"] = Helper.makeid();\r\n        invoice[\"view_order\"] = element.view_order ? parseInt(element.view_order) : null;\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"vat\"] = (element.vat && this.isHdGTGT) ? element.vat : null;\r\n        invoice[\"contract_order\"] = element.contract_order ? element.contract_order : \"\";\r\n        if (element.price) {\r\n          if (this.configs.system_parameter.price_after_vat) {\r\n            invoice[\"price_after_vat\"] = element.price ? element.price : null;\r\n            if ((invoice[\"vat\"] == 5 || invoice[\"vat\"] == 10 || invoice[\"vat\"] == 7 || invoice[\"vat\"] == 3.5) && invoice[\"price_after_vat\"] !== null)\r\n              invoice[\"price\"] = (invoice[\"price_after_vat\"] / (1 + invoice[\"vat\"] / 100));\r\n            else\r\n              invoice[\"price\"] = invoice[\"price_after_vat\"];\r\n          }\r\n          else\r\n            invoice[\"price\"] = element.price ? element.price : null;\r\n        }\r\n        invoice[\"amount\"] = element.amount ? element.amount : null;\r\n        invoice[\"amount_vat\"] = element.amount_vat ? element.amount_vat : null;\r\n        // invoice[\"note\"] = element.note ? element.note : null;\r\n        invoice[\"other_tax\"] = element.other_tax ? element.other_tax : null;\r\n        invoice[\"other_charge\"] = element.other_charge ? element.other_charge : null;\r\n        invoice[\"product_exchange_rate\"] = element.product_exchange_rate ? element.product_exchange_rate : null;\r\n        invoice[\"product_date\"] = element.product_date ? element.product_date : null;\r\n        invoice[\"engine_number\"] = element.engine_number ? element.engine_number : null;\r\n        invoice[\"chassis_number\"] = element.chassis_number ? element.chassis_number : null;\r\n        invoice[\"management_code\"] = element.management_code ? element.management_code : null;\r\n        invoice[\"is_money_service\"] = element.is_money_service;\r\n        invoice[\"is_refund_ticket\"] = element.is_refund_ticket;\r\n        invoice[\"is_promotion\"] = element.is_promotion;\r\n        invoice[\"is_promotion_new\"] = element.is_promotion_new;\r\n        invoice[\"lot\"] = element.lot ? element.lot : null;\r\n        invoice[\"expiration_date\"] = element.expiration_date ? element.expiration_date : null;\r\n        invoice[\"number_real_export\"] = element.number_real_export ? Helper.toNumber(element.number_real_export) : null;\r\n        invoice[\"number_real_import\"] = element.number_real_import ? Helper.toNumber(element.number_real_import) : null;\r\n        if (invoice[\"amount_vat\"] !== null && invoice[\"amount\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"] + invoice[\"amount\"];\r\n        else\r\n          if (invoice[\"amount\"] !== null)\r\n            invoice[\"amount_after_vat\"] = invoice[\"amount\"];\r\n          else\r\n            if (invoice[\"amount_vat\"] !== null)\r\n              invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"];\r\n            else\r\n              invoice[\"amount_after_vat\"] = null;\r\n        if (invoice[\"other_tax\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_tax\"];\r\n        if (invoice[\"other_charge\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_charge\"];\r\n        const _obj = this.select.products.filter(p => p.product_code === invoice[\"product_code\"])[0];\r\n        if (!_obj && invoice[\"product_code\"] !== '') {\r\n          const _objPush = {\r\n            code: invoice[\"product_code\"],\r\n            name: invoice[\"product_name\"],\r\n            mhvth: invoice[\"product_code\"] + ': ' + invoice[\"product_name\"],\r\n          };\r\n          this.select.products.push(_objPush);\r\n        }\r\n        invoice[\"commercial_discount\"] = element.commercial_discount;\r\n        this.invoice_products.insert(invoice);\r\n      }\r\n    });\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataGrid.instance.refresh();\r\n    this._tinhGiaTri();\r\n    Library.hideloading();\r\n  }\r\n  onContentReady = (e) => {\r\n    const arrFooter = [\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_after_vat, class: 'table-footer-1' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.total_money, class: 'table-footer-1' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_vat, class: 'table-footer-2' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount, class: 'table-footer-3' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_without_discount, class: 'table-footer-4' },\r\n    ]\r\n    this.invoiceService.formatSumColumnGrid(arrFooter);\r\n  }\r\n  editorOptionsForCode = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: (args) => {\r\n      if (this.isAll)\r\n        return this.invoiceService.addProductInSelecBox(args, this.select.productsViewFull, this.dataGrid);\r\n      else\r\n        return this.invoiceService.addProductInSelecBox(args, this.select.productsView, this.dataGrid, { valueExpr: 'product_code' });\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">DANH SÁCH HÓA ĐƠN CHỜ KÝ</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid \\r\\n    id=\\\"gridContainer\\\"\\r\\n    [dataSource]=\\\"invoiceList\\\"\\r\\n    [showRowLines]=\\\"true\\\"\\r\\n    [allowColumnResizing]=\\\"true\\\"\\r\\n    [(selectedRowKeys)]=\\\"selectedRows\\\"\\r\\n    [columnMinWidth]=\\\"50\\\"\\r\\n    [columnResizingMode]=\\\"true\\\"\\r\\n    [columnAutoWidth]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\">\\r\\n\\r\\n    <dxo-selection selectAllMode=\\\"page\\\" mode=\\\"single\\\"></dxo-selection>\\r\\n\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <dxi-column dataField=\\\"invoice_number\\\" caption=\\\"Số hóa đơn\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"Ngày HĐ\\\" [width]=\\\"110\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"Mã số thuế\\\" [width]=\\\"140\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"Tên đơn vị\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p>{{ d.data.customer_name || d.data.buyer_name || 'Hóa đơn chờ ký' }}</p>\\r\\n    </div>\\r\\n    \\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <!-- <dxo-paging [enabled]=\\\"false\\\"></dxo-paging> -->\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button text=\\\"Chọn\\\" icon=\\\"assets\\\\img\\\\icons\\\\Ghi.png\\\" type=\\\"default\\\" (click)=\\\"choose()\\\" [disabled]=\\\"!(selectedRows.length == 1)\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"Quay lại\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n  </dx-button>\\r\\n</div>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as moment from 'moment';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { Library} from '@core/index';\r\n@Component({\r\n  selector: 'app-choose-hdck',\r\n  templateUrl: './choose-hdck.component.html',\r\n  styleUrls: ['./choose-hdck.component.scss']\r\n})\r\nexport class ChooseHdckComponent implements OnInit {\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n  ) { }\r\n\r\n  selectedRows: Array<any> = [];\r\n\r\n  invoiceList: any;\r\n  invoiceNumberOrigin: any;\r\n  invoiceDateOrigin: any;\r\n  invoiceReleaseId: any;\r\n  onSave: any;\r\n\r\n  ngOnInit() {\r\n    // console.log(this.invoiceNumberOrigin);\r\n    // console.log(this.templateCode);\r\n    Library.showloading();\r\n    this.handleInvoiceService.layCacHoaDonChoKy(this.invoiceDateOrigin, this.invoiceReleaseId).subscribe((rs: any) => {\r\n      this.invoiceList = rs.data.invoices;\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  choose() {\r\n    this.onSave(this.selectedRows[0]);\r\n    this.bsModalRef.hide();\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"row search-section\\\">\\r\\n  <div class=\\\"col-md-7\\\">\\r\\n    <app-search-advanced (searchContentChange)=\\\"getSearch($event)\\\" [isFormHandInvoice]=\\\"isFormHandInvoice\\\">\\r\\n    </app-search-advanced>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-5 list-header\\\" style=\\\"max-height: 70px;\\\">\\r\\n    <div class=\\\"pull-right button-panel\\\">\\r\\n      <dx-button *ngIf=\\\"isDaDKTT78\\\" (click)=\\\"BaoCaoCQT()\\\" icon=\\\"assets\\\\img\\\\icons\\\\DieuChinh.png\\\" text=\\\"Báo CQT HĐ sai\\\"\\r\\n        type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"dieuChinh()\\\" icon=\\\"assets\\\\img\\\\icons\\\\DieuChinh.png\\\" [disabled]=\\\"isDisableAdjust\\\"\\r\\n        text=\\\"{{ 'CONTROLL.BUTTON.adjusted' | translate }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"thayThe()\\\" icon=\\\"assets\\\\img\\\\icons\\\\ThayThe.png\\\"\\r\\n        text=\\\"{{ 'CONTROLL.BUTTON.replaced' | translate }}\\\" type=\\\"default\\\" [disabled]=\\\"isDisableReplace\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"routerCancelInvoice()\\\" [(icon)]=\\\"_translate.ICONS.delete\\\" text=\\\"Hủy HĐ\\\" type=\\\"default\\\"\\r\\n        [disabled]=\\\"selectedRows.length == 0\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainerInvoice\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n  [showRowLines]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\"\\r\\n  [showBorders]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n  (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n  <dxo-selection selectAllMode=\\\"{{pageSelect}}\\\" mode=\\\"multiple\\\">\\r\\n  </dxo-selection>\\r\\n  <!-- <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"handleinvoice\\\"></dxo-state-storing> -->\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"single\\\"></dxo-sorting>\\r\\n  <dxo-selection mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row>\\r\\n  <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" [width]=\\\"_translate.GRID_WIDTH.so_hoa_don\\\"\\r\\n    alignment=\\\"center\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"1\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n  <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n    [width]=\\\"_translate.GRID_WIDTH.mau_so_ky_hieu\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  <!-- <dxi-column dataField=\\\"template.invoice_series\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"\\r\\n      [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column> -->\\r\\n  <dxi-column dataField=\\\"invoice_date\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\" [width]=\\\"_translate.GRID_WIDTH.ngay_hoa_don\\\" dataType=\\\"date\\\"\\r\\n    format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"\\r\\n    sortOrder=\\\"desc\\\" [sortIndex]=\\\"0\\\"></dxi-column>\\r\\n  <!-- Số phiếu -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_recepts_no\\\" dataField=\\\"receipts_no\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.receipts_no' | translate }}\\\" width=\\\"{{_translate.GRID_WIDTH.so_phieu}}\\\" alignment=\\\"left\\\"\\r\\n    headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n    [width]=\\\"_translate.GRID_WIDTH.ma_so_thue\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tên khách hàng -->\\r\\n  <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\" alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_transport_number_from_product\\\" dataField=\\\"transport_number\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE_DETAILS.transport_number' | translate }}\\\"\\r\\n    width=\\\"{{_translate.GRID_WIDTH.transport_number}}\\\" alignment=\\\"left\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n  </dxi-column>\\r\\n  <dxi-column dataField=\\\"total_payment_string\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\"\\r\\n    alignment=\\\"right\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\" [width]=\\\"_translate.GRID_WIDTH.tong_tien\\\"></dxi-column>\\r\\n\\r\\n  <dxi-column cellTemplate=\\\"statusInvoice\\\" caption=\\\"{{ 'CONTROLL.LABEL.processing_status' | translate }}\\\"\\r\\n    [width]=\\\"_translate.GRID_WIDTH.trang_thai_gui_mail\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  <!-- <dxi-column dataField=\\\"note_view_on_invoice\\\" caption=\\\"{{ 'GRID.GENERAL.note' | translate }}\\\"\\r\\n              headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column> -->\\r\\n  <!-- Trạng thái gửi CQT -->\\r\\n  <dxi-column *ngIf=\\\"isDaDKTT78\\\" cellTemplate=\\\"statusSendTax\\\" caption=\\\"TT gửi HĐ sai sót\\\" [width]=\\\"106\\\"\\r\\n    alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Biên bản xử lý -->\\r\\n  <dxi-column caption=\\\"{{ 'GRID.GENERAL.handle-report' | translate }}\\\">\\r\\n    <dxi-column cellTemplate=\\\"invoice_reports\\\" caption=\\\"{{ 'GRID.GENERAL.electric_report' | translate }}\\\"\\r\\n      [width]=\\\"_translate.GRID_WIDTH.electric_report\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"file_content\\\" caption=\\\"{{ 'GRID.GENERAL.paper_report' | translate }}\\\"\\r\\n      [width]=\\\"_translate.GRID_WIDTH.electric_report\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n  </dxi-column>\\r\\n\\r\\n  <dxi-column cellTemplate=\\\"actionIcon\\\" minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong_2}}\\\"\\r\\n    width=\\\"{{_translate.GRID_WIDTH.hanh_dong_2}}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p (click)=\\\"editNotSelect(d.data)\\\" style=\\\"text-decoration: underline;cursor: pointer;\\\">\\r\\n      {{ d.data.template_code }}</p>\\r\\n    <p (click)=\\\"editNotSelect(d.data)\\\" style=\\\"text-decoration: underline;cursor: pointer;\\\">\\r\\n      {{ d.data.invoice_series }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    <a *ngIf=\\\"getStatusSendTax(d.data) != ''\\\" href=\\\"javascript:void(0)\\\"\\r\\n      (click)=\\\"ThongDiepGuiNhan(d.data)\\\">{{ getStatusSendTax(d.data) }}</a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n    <a *ngIf=\\\"d.data.status === 'DA_XUAT'\\\" class=\\\"gach-chan\\\" (click)=\\\"viewNotSelect(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ\\r\\n        ({{ d.data.time_print_conversion }})</span></a>\\r\\n    <p *ngIf=\\\"d.data.status !== 'DA_XUAT'\\\">{{ d.data.invoice_number }}<span *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ\\r\\n        ({{ d.data.time_print_conversion }})</span></p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n    <p class=\\\"gach-chan\\\" (click)=\\\"editNotSelect(d.data)\\\" *ngIf=\\\"d.data.status !='GIU_SO' && d.data.status !='DA_XUAT'\\\">\\r\\n      {{ d.data.customer_name || d.data.buyer_name }}\\r\\n    </p>\\r\\n    <p class=\\\"gach-chan\\\" (click)=\\\"editNotSelect(d.data)\\\"\\r\\n      *ngIf=\\\"d.data.status =='GIU_SO' && d.data.template_code != '6'\\\">\\r\\n      {{ d.data.customer_name || d.data.buyer_name || _translate.GRID.INVOICE.invoice_wait_for_sign }}</p>\\r\\n    <p *ngIf=\\\"d.data.status =='DA_XUAT'\\\">{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'actionEmail'\\\">\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status !='GIU_SO'\\\" class=\\\"chua-gui-khach-hang gach-chan\\\"\\r\\n      (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.un_sent' | translate }}\\r\\n    </a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status =='GIU_SO'\\\" class=\\\"cho-ky\\\"\\r\\n      (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_sign' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_GUI'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_it' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_NHAN'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.received' | translate }}</a>\\r\\n    <p *ngIf=\\\"!d.data.send_email_status\\\" href=\\\"javascript:void(0)\\\">{{ trangthaihoadon(d.data) }} <a\\r\\n        *ngIf=\\\"trangthaihoadon(d.data) == 'Lỗi ký HD' || trangthaihoadon(d.data) == 'Signed error'\\\" class=\\\"gach-chan\\\"\\r\\n        (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">({{ 'GRID.INVOICE.re_sign' | translate }})</a></p>\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'statusInvoice'\\\">\\r\\n    <ng-container [ngSwitch]=\\\"d.data.adjustment_type\\\">\\r\\n      <p *ngSwitchCase=\\\"1\\\">{{ 'GRID.GENERAL.original_invoice' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"2\\\">{{ 'GRID.GENERAL.invoice_replaced' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"3\\\">{{ 'GRID.GENERAL.invoice_replacement' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"4\\\">{{ 'GRID.GENERAL.invoice_adjusted' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"5\\\">{{ 'GRID.GENERAL.adjustment_invoice' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"6\\\">{{ 'GRID.GENERAL.invoice_deleted' | translate }}</p>\\r\\n      <p *ngSwitchCase=\\\"7\\\">{{ 'GRID.GENERAL.invoice_removed' | translate }}</p>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n  <!-- Biên bản điện tử -->\\r\\n  <div *dxTemplate=\\\"let d of 'invoice_reports'\\\">\\r\\n    <ng-container\\r\\n      *ngIf=\\\"filterReport(d.data.invoice_reports,'0').length >0 || filterReport(d.data.invoice_reports,'1').length ==0\\\">\\r\\n      <ng-container *ngFor=\\\"let data of d.data.invoice_reports; let i=index\\\">\\r\\n\\r\\n        <ng-container *ngIf=\\\"data.status === 'HOAT_DONG'\\\">\\r\\n          <div *ngIf=\\\"data.signature_status === 'CHUA_KY' && data.suggest_adjustment_content === null\\\">\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">Chưa gửi</a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n              </span>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"data.signature_status === 'NGUOI_BAN_KY' && data.suggest_adjustment_content === null\\\">\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">Chờ KH ký</a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <a title=\\\"file {{_translate.GRID.GENERAL.attach}}\\\" class=\\\"attachIcon actionIcon text-decoration\\\"\\r\\n              (click)=\\\"downloadFile(d.data,'0')\\\" href=\\\"javascript:void(0)\\\">\\r\\n            </a>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"data.signature_status === 'NGUOI_MUA_KY' && data.suggest_adjustment_content === null\\\">\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">KH đã ký</a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <a title=\\\"file {{_translate.GRID.GENERAL.attach}}\\\" class=\\\"attachIcon actionIcon text-decoration\\\"\\r\\n              (click)=\\\"downloadFile(d.data,'0')\\\" href=\\\"javascript:void(0)\\\">\\r\\n            </a>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"data.signature_status === 'CHUA_KY' && data.suggest_adjustment_content !== null\\\">\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n                  KH đề nghị điều chỉnh\\r\\n                </a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n              </span>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"data.signature_status === 'NGUOI_BAN_KY' && data.suggest_adjustment_content !== null\\\">\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n                  KH đề nghị điều chỉnh\\r\\n                </a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <a title=\\\"file {{_translate.GRID.GENERAL.attach}}\\\" class=\\\"attachIcon actionIcon text-decoration\\\"\\r\\n              (click)=\\\"downloadFile(d.data,'0')\\\" href=\\\"javascript:void(0)\\\">\\r\\n            </a>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"data.signature_status === 'NGUOI_MUA_KY' && data.suggest_adjustment_content !== null\\\">\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"viewReport(d.data.id,data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n                  KH đề nghị điều chỉnh\\r\\n                </a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <div>\\r\\n              <span>\\r\\n                <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n              </span>\\r\\n            </div>\\r\\n            <a title=\\\"file {{_translate.GRID.GENERAL.attach}}\\\" class=\\\"attachIcon actionIcon text-decoration\\\"\\r\\n              (click)=\\\"downloadFile(d.data,'0')\\\" href=\\\"javascript:void(0)\\\">\\r\\n            </a>\\r\\n          </div>\\r\\n\\r\\n        </ng-container>\\r\\n      </ng-container>\\r\\n      <!-- <ng-container *ngIf=\\\"filterReport(d.data.invoice_reports,'0').length > 0\\\">\\r\\n            <a title=\\\"file đính kèm\\\"\\r\\n               class=\\\"attachIcon actionIcon text-decoration\\\" (click)=\\\"downloadFile(data.invoice_id,'0')\\\" href=\\\"javascript:void(0)\\\">\\r\\n            </a>\\r\\n      </ng-container> -->\\r\\n      <!-- <div *ngIf=\\\"d.data.invoice_reports.length == 0\\\">\\r\\n        <div class=\\\"dropdown\\\" style=\\\"float:none;\\\">\\r\\n          <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" style=\\\"font-size: 27px\\\"\\r\\n             (click)=\\\"myFunction1(d.data.id + d.data.invoice_number)\\\"\\r\\n             href=\\\"javascript:void(0)\\\"><i class=\\\"dx-icon fa fa-plus-circle\\\"></i></a>\\r\\n          <div [id]=\\\"d.data.id + d.data.invoice_number\\\" class=\\\"dropdown-content\\\" style=\\\"min-width: 180px!important;\\\">\\r\\n            <a href=\\\"javascript:void(0)\\\"\\r\\n               (click)=\\\"cancelReport(d.data)\\\">{{ 'CONTROLL.BUTTON.cancel_report' | translate }}\\r\\n            </a>\\r\\n            <a href=\\\"javascript:void(0)\\\"\\r\\n               (click)=\\\"dieuChinhBtn(d.data)\\\">{{ 'CONTROLL.BUTTON.create_adjustment_report' | translate }}\\r\\n            </a>\\r\\n            <a href=\\\"javascript:void(0)\\\" (click)=\\\"thayTheBtn(d.data)\\\">{{ 'CONTROLL.BUTTON.create_replace_report' | translate }}\\r\\n            </a>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div>\\r\\n          <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n        </div>\\r\\n      </div> -->\\r\\n    </ng-container>\\r\\n\\r\\n    <div *ngIf=\\\"d.data.invoice_reports.length == 0\\\">\\r\\n      <!-- <div class=\\\"dropdown\\\" style=\\\"float:none;\\\">\\r\\n        <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" style=\\\"font-size: 27px\\\"\\r\\n           (click)=\\\"myFunction1(d.data.id + d.data.invoice_number)\\\"\\r\\n           href=\\\"javascript:void(0)\\\"><i class=\\\"dx-icon fa fa-plus-circle\\\"></i></a>\\r\\n        <div [id]=\\\"d.data.id + d.data.invoice_number\\\" class=\\\"dropdown-content\\\" style=\\\"min-width: 180px!important;\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\"\\r\\n             (click)=\\\"cancelReport(d.data)\\\">{{ 'CONTROLL.BUTTON.cancel_report' | translate }}\\r\\n          </a>\\r\\n          <a href=\\\"javascript:void(0)\\\"\\r\\n             (click)=\\\"dieuChinhBtn(d.data)\\\">{{ 'CONTROLL.BUTTON.create_adjustment_report' | translate }}\\r\\n          </a>\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"thayTheBtn(d.data)\\\">{{ 'CONTROLL.BUTTON.create_replace_report' | translate }}\\r\\n          </a>\\r\\n        </div>\\r\\n      </div> -->\\r\\n      <div>\\r\\n        <a class=\\\"text-decoration\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">...</a>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'file_content'\\\">\\r\\n    <div *ngIf=\\\"filterReport(d.data.invoice_reports,'0').length == 0\\\">\\r\\n      <div *ngIf=\\\"filterReport(d.data.invoice_reports,'1').length == 0 && d.data.status !='GHI_TAM'\\\"\\r\\n        style=\\\"float:none;\\\">\\r\\n        <a class=\\\"{{_translate.ICONS.upload}}\\\" (click)=\\\"dinhKemFile($event)\\\" title=\\\"{{_translate.GRID.GENERAL.attach}}\\\"\\r\\n          style=\\\"color: #007BFF;font-size:18px;cursor: pointer;line-height: 26px\\\">\\r\\n          <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"d.data.id\\\"\\r\\n            accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\"\\r\\n            style=\\\"display: none;\\\" />\\r\\n          <!-- Chọn file -->\\r\\n          <!-- <i class=\\\"{{_translate.ICONS.upload}}\\\"></i> -->\\r\\n        </a>\\r\\n        <div class=\\\"dropdown\\\">\\r\\n          <a title=\\\"{{_translate.CONTROLL.BUTTON.get_template_report}}\\\" style=\\\"float: right;\\\"\\r\\n            class=\\\"{{_translate.ICONS.download}}\\\"\\r\\n            style=\\\"color: #007BFF;font-size:18px;cursor: pointer;line-height: 26px\\\"\\r\\n            (click)=\\\"myFunction1(d.data.id + d.data.invoice_number)\\\" href=\\\"javascript:void(0)\\\"></a>\\r\\n          <div [id]=\\\"d.data.id + d.data.invoice_number\\\" class=\\\"dropdown-content\\\" style=\\\"min-width: 227px!important;\\\"\\r\\n            [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n            <!-- <a  (click)=\\\"kyHangLoat(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.sign' | translate }} <i [(class)]=\\\"_translate.ICONS.pencil\\\"></i></a> -->\\r\\n            <a (click)=\\\"downloadFileDocx(d.data, 'HUY')\\\" href=\\\"javascript:void(0)\\\">{{\\r\\n              'CONTROLL.BUTTON.get_file_content_cancel' | translate }}\\r\\n              <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n            <a (click)=\\\"downloadFileDocx(d.data, 'DIEU_CHINH')\\\" href=\\\"javascript:void(0)\\\">{{\\r\\n              'CONTROLL.BUTTON.get_file_content_adjust' | translate }}\\r\\n              <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n            <!-- <a  (click)=\\\"viewAttachFile(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.view_attach_file' | translate }} <i [(class)]=\\\"_translate.ICONS.view_attach_file\\\"></i></a> -->\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"filterReport(d.data.invoice_reports,'1').length > 0\\\" class=\\\"dropdown\\\" style=\\\"float:none;\\\">\\r\\n        <a title=\\\"file {{_translate.GRID.GENERAL.attach}}\\\" class=\\\"attachIcon actionIcon text-decoration\\\"\\r\\n          (click)=\\\"downloadFile(d.data,'1')\\\" href=\\\"javascript:void(0)\\\">\\r\\n        </a>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n    <div class=\\\"dropdown\\\">\\r\\n      <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" style=\\\"float: right;\\\" class=\\\"morongIcon actionIcon\\\"\\r\\n        (click)=\\\"myFunction(d.data.id)\\\" href=\\\"javascript:void(0)\\\"></a>\\r\\n      <div [id]=\\\"d.data.id\\\" class=\\\"dropdown-content\\\" style=\\\"margin-top: 26px!important;\\\"\\r\\n        [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n        <!-- <a  (click)=\\\"kyHangLoat(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.sign' | translate }} <i [(class)]=\\\"_translate.ICONS.pencil\\\"></i></a> -->\\r\\n        <a (click)=\\\"inChuyenDoi(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.print_conversion' | translate }}\\r\\n          <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n        <!-- <a  (click)=\\\"viewAttachFile(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.view_attach_file' | translate }} <i [(class)]=\\\"_translate.ICONS.view_attach_file\\\"></i></a> -->\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <a *ngIf=\\\"d.data.invoice_files &&d.data.invoice_files.length>0\\\" style=\\\"float: right;\\\"\\r\\n      title=\\\"{{_translate.CONTROLL.BUTTON.view_attach_file}}\\\" class=\\\"attachIcon actionIcon\\\"\\r\\n      (click)=\\\"viewAttachFile(d.data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a *ngIf=\\\"d.data.status =='GHI_TAM'\\\" style=\\\"float: right;\\\" title=\\\"{{_translate.CONTROLL.BUTTON.delete}}\\\"\\r\\n      class=\\\"xoaIcon actionIcon\\\" (click)=\\\"deleteItem(d.data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a *ngIf=\\\"d.data.status =='DA_XUAT'\\\" style=\\\"float: right;\\\" title=\\\"{{_translate.CONTROLL.BUTTON.tai_hd_xml}}\\\"\\r\\n      class=\\\"taiXmlIcon actionIcon\\\" (click)=\\\"taiHDXml(d.data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a *ngIf=\\\"d.data.status =='GHI_TAM'\\\" style=\\\"float: right;\\\" title=\\\"{{_translate.CONTROLL.BUTTON.edit}}\\\"\\r\\n      class=\\\"suaIcon actionIcon\\\" (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.view_invoice}}\\\" style=\\\"float: right;\\\" class=\\\"xemIcon actionIcon\\\"\\r\\n      (click)=\\\"view(d.data)\\\" href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n\\r\\n\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n    <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{info.column.caption}} </p>\\r\\n  </div>\\r\\n\\r\\n  <dxo-summary>\\r\\n    <dxi-total-item summaryType=\\\"custom\\\" cssClass=\\\"dxi-total-payment-total_payment_string\\\" [customizeText]=\\\"customizeText\\\" showInColumn=\\\"total_payment_string\\\">\\r\\n    </dxi-total-item>\\r\\n  </dxo-summary>\\r\\n\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"configs.system_parameter.number_row_per_page\\\"></dxo-paging>\\r\\n  <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 35, 50, 100]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n    [showInfo]=\\\"true\\\">\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n\\r\\n\\r\\n<!-- <dx-popover\\r\\n  [(target)]=\\\"popoverTarget\\\"\\r\\n  [width]=\\\"200\\\"\\r\\n>\\r\\n<div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n        <span>{{popOverText}}</span>\\r\\n</div>\\r\\n</dx-popover>   -->\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n\"","module.exports = \".chua-gui-khach-hang{color:red}.cho-ky{color:#008b8b}.gach-chan{text-decoration:underline;cursor:pointer}.search-section{padding-bottom:15px}.last-drodown{bottom:30px}.small-grid{position:fixed  !important;right:39px !important}.button-panel{margin-top:30px;margin-right:16px}::ng-deep #gridContainerInvoice .dx-cell-focus-disabled{overflow:visible !important}::ng-deep #gridContainerInvoice .dx-datagrid-rowsview{overflow:visible}.text-decoration{text-decoration:none}::ng-deep .truyen-nhan{max-width:80% !important;margin:auto}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { RemoveComponent } from '../remove/remove.component';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { Library, AuthService, VPreviewInvService, sEnum, SocketService, VStringService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { SendInvoicesComponent } from '../send-invoices/send-invoices.component';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ViewAttachFileComponent } from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport { HanldeReportService } from '@modules/handle-report/hanlde-report.service';\r\nimport { Helper } from '@core/helper/Helper';\r\nimport { finalize, map } from 'rxjs/operators';\r\nimport { forEach } from '@angular/router/src/utils/collection';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport * as moment from 'moment';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { SendDataForTaxComponent } from '@shared/index';\r\nimport { DxDataGridComponent, DxPopoverComponent } from 'devextreme-angular';\r\nimport { ReportTaxInvoiceErrorComponent } from '../report-tax-invoice-error/report-tax-invoice-error.component'\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { SearchService } from '@modules/search/shared';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @ViewChild(DxPopoverComponent) popOver: DxPopoverComponent\r\n  dataSource: any;\r\n  selectedRows: Array<any> = [];\r\n  selectedItems: Array<any> = [];\r\n  bsModalRef: BsModalRef;\r\n  paramSearch: any;\r\n  pageSize: any;\r\n  _translate: any;\r\n  clickCurent: any = undefined;\r\n  idRow: any = undefined;\r\n  checkSubmit: any;\r\n  private fileName: string;\r\n  arrayFileContent: any;\r\n  formFileContent: FormGroup;\r\n  configs: any = {};\r\n  pageSelect: any;\r\n  isDisableAdjust = true;\r\n  currentUser: any;\r\n  isDaDKTT78: boolean = false;\r\n  bsModalSignRef: BsModalRef;\r\n  infoDangKy: any;\r\n  isExistFormRelease: boolean = false;\r\n  ioSignature: Subscription;\r\n  dataInfor: any;\r\n  isFormHandInvoice: boolean = false;\r\n  isDisableReplace = true;\r\n  objStatusBtn = {};\r\n  constructor(\r\n    private authService: AuthService,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    private router: Router,\r\n    public translate: TranslateService,\r\n    private handleReportService: HanldeReportService,\r\n    private fb: FormBuilder,\r\n    private templateService: TemplateService,\r\n    private spinner: NgxSpinnerService,\r\n    private socketService: SocketService,\r\n    private searchService: SearchService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.formFileContent = this.fb.group(this.handleReportService.generatedFormControlAll);\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    this.configs = this.authService.getConfigs();\r\n    if (this.configs.system_parameter.select_invoice_current_page)\r\n      this.pageSelect = \"page\";\r\n    else\r\n      this.pageSelect = \"allPages\";\r\n    if (this.currentUser.is_convert_TT78) {\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      if (this.infoDangKy && this.infoDangKy.id) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n          this.isDaDKTT78 = true;\r\n          this.isFormHandInvoice = true;\r\n          let infoFormRelease = this.authService.getInfoFormRelease();\r\n          if (infoFormRelease && infoFormRelease.invoice_releases && infoFormRelease.invoice_releases.length > 0) {\r\n            let invoicesReleases = infoFormRelease.invoice_releases.filter(p => (parseInt(p.amount) - parseInt(p.used_amount)) > 0);\r\n            if (invoicesReleases && invoicesReleases.length > 0)\r\n              this.isExistFormRelease = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /* Hiện nút điều chỉnh/thay thế */\r\n    if (this.configs.system_parameter.incurred_adjustment_invoice || this.configs.system_parameter.process_not_in_software) {\r\n      this.isDisableAdjust = false;\r\n      if (this.configs.system_parameter.process_not_in_software)\r\n        this.isDisableReplace = false;\r\n    }\r\n  }\r\n\r\n  loadList(params?) {\r\n    this.dataSource = {};\r\n    this.dataSource.store = this.handleInvoiceService.getAll(params);\r\n\r\n    // if (params) {\r\n    //   this.dataSource.store = this.handleInvoiceService.getAll(params);\r\n    // } else {\r\n    //   this.dataSource.store = this.handleInvoiceService.getAll();\r\n    // }\r\n  }\r\n\r\n  filterReport(data, _condition) {\r\n    if (data && data.length > 0) {\r\n      return data.filter(p => p.is_paper_report == _condition && p.status == 'HOAT_DONG');\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType == 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.invoice_number) {\r\n            if (e.data.send_department_status == \"DA_GUI_CQT\")\r\n              e.rowElement.style.color = '#008B8B';\r\n            else if (e.data.send_department_status == \"DA_CAP\")\r\n              e.rowElement.style.color = 'black';\r\n            else if (e.data.send_department_status == \"DA_TIEP_NHAN\")\r\n              e.rowElement.style.color = 'black';\r\n            else\r\n              e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type === '2' || e.data.adjustment_type === '7' || e.data.adjustment_type === '6') {\r\n        let eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.invoice_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadList(e);\r\n  }\r\n\r\n  checkDisableButton() {\r\n    if (this.selectedItems.length) {\r\n      if (this.selectedItems[0].status == 'DA_XUAT') {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  myFunction(e) {\r\n    if (this.idRow && document.getElementById(this.idRow)) {\r\n      document.getElementById(this.idRow).classList.remove('show');\r\n    }\r\n    if (this.clickCurent !== undefined && this.clickCurent !== e && document.getElementById(this.clickCurent)) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    document.getElementById(e).classList.toggle('show');\r\n    this.clickCurent = e;\r\n  }\r\n\r\n  myFunction1(e) {\r\n    if (this.clickCurent && document.getElementById(this.clickCurent)) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.idRow !== '' && this.idRow !== e && document.getElementById(this.idRow)) {\r\n      document.getElementById(this.idRow).classList.remove('show');\r\n    }\r\n    document.getElementById(e).classList.toggle('show');\r\n    this.idRow = e;\r\n  }\r\n\r\n  // Chọn đối tượng trong màn hình danh sách\r\n  selectionChanged(data: any) {\r\n    this.hidenDropdownList();\r\n    this.selectedItems = data.selectedRowsData;\r\n    if (this.selectedRows.length == 1 || this.configs.system_parameter.incurred_adjustment_invoice || this.configs.system_parameter.process_not_in_software) {\r\n      if (this.selectedRows.length == 1 || this.configs.system_parameter.process_not_in_software) {\r\n        this.isDisableAdjust = false;\r\n        this.isDisableReplace = false;\r\n      }\r\n      else {\r\n        this.isDisableAdjust = false;\r\n        this.isDisableReplace = true;\r\n      }\r\n    }\r\n    else {\r\n      this.isDisableAdjust = true;\r\n      this.isDisableReplace = true;\r\n    }\r\n  }\r\n\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n\r\n  routerCancelInvoice() {\r\n    if (this.selectedItems && this.selectedItems.length > 0) {\r\n      let lstGhiTam = this.selectedItems.filter(p => p.status == 'GHI_TAM');\r\n      if (lstGhiTam && lstGhiTam.length == this.selectedItems.length) {\r\n        const ids = this.selectedRows.join(',');\r\n        const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n        result.then((dialogResult) => {\r\n          if (dialogResult) {\r\n            Library.showloading();\r\n            this.handleInvoiceService.delete(ids).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n                this.loadList(this.paramSearch);\r\n              } else {\r\n                Library.notify(rs.message, 'error');\r\n              }\r\n            }, err => {\r\n            }, () => {\r\n              Library.hideloading();\r\n            });\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        let lstInvoice = this.selectedItems.filter(p => p.status == 'DA_XUAT' && p.adjustment_type == '1');\r\n        if (lstInvoice && lstInvoice.length > 0) {\r\n          if (lstInvoice.length == 1) {\r\n            const row = lstInvoice[0];\r\n            this.setUrlNavigate();\r\n            this.router.navigate(['/system/handle-report/', row.id, 'HUY']);\r\n          }\r\n          else {\r\n            let _lstCancel = lstInvoice.filter(p => p.adjustment_type == '7' || p.adjustment_type == '2');\r\n            if (_lstCancel && _lstCancel.length > 0) {\r\n              Library.notify(this._translate.NOTIFY.choose_cancel_invoice, 'error');\r\n            }\r\n            else {\r\n              this.delete(lstInvoice);\r\n            }\r\n          }\r\n\r\n        }\r\n        else\r\n          Library.notify('Bạn không thể hủy hóa đơn này', 'error');\r\n      }\r\n    }\r\n  }\r\n\r\n  dieuChinh() {\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (this.selectedItems && this.selectedItems.length == 0) {\r\n      if (this.configs.system_parameter.process_not_in_software) {\r\n        this.router.navigate(['/system/handle-invoice/adjust-without-software']);\r\n      }\r\n      else if (this.configs.system_parameter.incurred_adjustment_invoice)\r\n        this.router.navigate(['/system/handle-invoice/multiple-adjust']);\r\n    }\r\n    else {\r\n      if (this.selectedItems && this.selectedItems.length == 1) {\r\n        const row = this.selectedItems[0];\r\n        if (row.status === 'DA_XUAT' && row.adjustment_type !== '7' && row.adjustment_type !== '2' && row.template_code != '5') {\r\n          if (row.xml_type == 4) {\r\n            this.router.navigate(['/system/handle-invoice/adjust-without-software'],\r\n              {\r\n                queryParams: {\r\n                  loaiHoaDonGoc: 3, mauHoaDonGoc: row.template_code, kyHieuHoaDonGoc: row.invoice_series, soHoaDonGoc: row.invoice_number,\r\n                  ngayHoaDonGoc: row.invoice_date, idHoaDonGoc: row.id, htHoaDonGoc: row.xml_type, dcHoaDonGoc: row.adjustment_type\r\n                }\r\n              });\r\n          }\r\n          else {\r\n            const template_code = row.template_code.split('/');\r\n            const template = row.invoice_type\r\n            if (this.isDaDKTT78) {\r\n              if (row.adjustment_type == '1') {\r\n                Library.showloading();\r\n                this.handleInvoiceService.checkStatusInvoice(row.id, true).subscribe((rs: any) => {\r\n                  if (rs.status == \"success\") {\r\n                    if (template_code[0].indexOf('01GTKT') >= 0 || template_code[0].indexOf('02GTTT') >= 0 || template_code[0].indexOf('07KPTQ') >= 0\r\n                      || template_code[0] == \"2\" || template_code[0] == \"1\") {\r\n                      this.setUrlNavigate();\r\n                      this.router.navigate(['/system/handle-report/', row.id, 'DIEU_CHINH']);\r\n                    }\r\n                    else if (template_code[0] == \"6\") {\r\n                      if (template == \"03XKNB\") {\r\n                        this.router.navigate(['/system/handle-invoice/adjust-warehouse', row.id]);\r\n                      } else {\r\n                        this.router.navigate(['/system/handle-invoice/adjust-agent', row.id]);\r\n                      }\r\n                    }\r\n                  }\r\n                  else {\r\n                    Library.notify(rs.message, 'error', 5000);\r\n                  }\r\n                }, err => {\r\n                }, () => {\r\n                  Library.hideloading();\r\n                });\r\n              } else if (row.adjustment_type == '4' && template_code[0] == \"6\") {\r\n                Library.showloading();\r\n                this.handleInvoiceService.checkStatusInvoice(row.id, false).subscribe((rs: any) => {\r\n                  if (rs.status == \"success\") {\r\n                    if (template == \"03XKNB\") {\r\n                      this.router.navigate(['/system/handle-invoice/adjust-warehouse', row.id]);\r\n                    } else {\r\n                      this.router.navigate(['/system/handle-invoice/adjust-agent', row.id]);\r\n                    }\r\n                  }\r\n                  else {\r\n                    Library.notify(rs.message, 'error', 5000);\r\n                  }\r\n                }, err => {\r\n                }, () => {\r\n                  Library.hideloading();\r\n                });\r\n              }\r\n              else {\r\n                if (template_code[0].indexOf('01GTKT') >= 0 || template_code[0].indexOf('02GTTT') >= 0 || template_code[0].indexOf('07KPTQ') >= 0\r\n                  || template_code[0] == \"2\" || template_code[0] == \"1\") {\r\n                  this.setUrlNavigate();\r\n                  this.router.navigate(['/system/handle-report/', row.id, 'DIEU_CHINH']);\r\n                } else {\r\n                  Library.notify('Bạn không thể điều chỉnh hóa đơn này', 'error');\r\n                }\r\n              }\r\n            }\r\n            else {\r\n              if (template_code[0].indexOf('01GTKT') >= 0 || template_code[0].indexOf('02GTTT') >= 0 || template_code[0].indexOf('07KPTQ') >= 0\r\n                || template_code[0] == \"2\" || template_code[0] == \"1\") {\r\n                this.setUrlNavigate();\r\n                this.router.navigate(['/system/handle-report/', row.id, 'DIEU_CHINH']);\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          Library.notify('Bạn không thể điều chỉnh hóa đơn này', 'error');\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  thayThe() {\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (this.selectedItems && this.selectedItems.length == 0 && this.configs.system_parameter.process_not_in_software) {\r\n      this.router.navigate(['/system/handle-invoice/replace-without-software']);\r\n    }\r\n    else if (this.selectedItems && this.selectedItems.length == 1) {\r\n      let row = this.selectedItems[0];\r\n      if (row.status === 'DA_XUAT' && row.adjustment_type !== '4' && row.template_code != '5') {\r\n        if (row.xml_type == 4) {\r\n          this.router.navigate(['/system/handle-invoice/replace-without-software'],\r\n            {\r\n              queryParams: {\r\n                loaiHoaDonGoc: 3, mauHoaDonGoc: row.template_code, kyHieuHoaDonGoc: row.invoice_series, soHoaDonGoc: row.invoice_number,\r\n                ngayHoaDonGoc: row.invoice_date, idHoaDonGoc: row.id, htHoaDonGoc: row.xml_type, dcHoaDonGoc: row.adjustment_type\r\n              }\r\n            });\r\n        }\r\n        else {\r\n          const template_code = row.template_code.split('/');\r\n          const template = row.invoice_type\r\n          if (this.isDaDKTT78) {\r\n            if (row.adjustment_type == '1') {\r\n              Library.showloading();\r\n              this.handleInvoiceService.checkStatusInvoice(row.id, false).subscribe((rs: any) => {\r\n                if (rs.status == \"success\") {\r\n                  if (template_code[0].indexOf('01GTKT') >= 0 || template_code[0].indexOf('02GTTT') >= 0 || template_code[0].indexOf('07KPTQ') >= 0\r\n                    || template_code[0] == \"2\" || template_code[0] == \"1\") {\r\n                    this.setUrlNavigate();\r\n                    this.router.navigate(['/system/handle-report/', row.id, 'THAY_THE']);\r\n                  } else if (template_code[0] == \"6\") {\r\n                    if (template == \"03XKNB\") {\r\n                      this.router.navigate(['/system/handle-invoice/replace-warehouse', row.id]);\r\n                    } else {\r\n                      this.router.navigate(['/system/handle-invoice/replace-agent', row.id]);\r\n                    }\r\n                  }\r\n                }\r\n                else {\r\n                  Library.notify(rs.message, 'error', 5000);\r\n                }\r\n              }, err => {\r\n              }, () => {\r\n                Library.hideloading();\r\n              });\r\n            } else if (row.adjustment_type == '3' && template_code[0] == \"6\") {\r\n              Library.showloading();\r\n              this.handleInvoiceService.checkStatusInvoice(row.id, false).subscribe((rs: any) => {\r\n                if (rs.status == \"success\") {\r\n                  if (template == \"03XKNB\") {\r\n                    this.router.navigate(['/system/handle-invoice/replace-warehouse', row.id]);\r\n                  } else {\r\n                    this.router.navigate(['/system/handle-invoice/replace-agent', row.id]);\r\n                  }\r\n                }\r\n                else {\r\n                  Library.notify(rs.message, 'error', 5000);\r\n                }\r\n              }, err => {\r\n              }, () => {\r\n                Library.hideloading();\r\n              });\r\n            }\r\n            else {\r\n              if (template_code[0].indexOf('01GTKT') >= 0 || template_code[0].indexOf('02GTTT') >= 0 || template_code[0].indexOf('07KPTQ') >= 0\r\n                || template_code[0] == \"2\" || template_code[0] == \"1\") {\r\n                this.setUrlNavigate();\r\n                this.router.navigate(['/system/handle-report/', row.id, 'THAY_THE']);\r\n              } else {\r\n                Library.notify('Bạn không thể thay thế hóa đơn này', 'error');\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            if (template_code[0].indexOf('01GTKT') >= 0 || template_code[0].indexOf('02GTTT') >= 0 || template_code[0].indexOf('07KPTQ') >= 0\r\n              || template_code[0] == \"2\" || template_code[0] == \"1\" || template_code[0].indexOf('03XKNB') >= 0) {\r\n              this.setUrlNavigate();\r\n              this.router.navigate(['/system/handle-report/', row.id, 'THAY_THE']);\r\n            } else {\r\n              Library.notify('Bạn không thể thay thế hóa đơn này!', 'error');\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        Library.notify('Bạn không thể thay thế hóa đơn này', 'error');\r\n      }\r\n    }\r\n  }\r\n\r\n  editNotSelect(row) {\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    this.hidenDropdownList();\r\n    if (row.status === 'DA_XUAT') {\r\n      Library.notify('Bạn không thể sửa hóa đơn đã xuất', 'error');\r\n    } else {\r\n      if (row.adjustment_type === '5') {\r\n        if (row.is_adjustment_invoices || row.is_outside_process) {\r\n          if (row.is_adjustment_invoices)\r\n            this.router.navigate([`/system/handle-invoice/multiple-adjust/${row.id}`]);\r\n          else\r\n            this.router.navigate([`/system/handle-invoice/adjust-without-software/${row.id}`]);\r\n        }\r\n        else {\r\n          switch (row.invoice_type) {\r\n            case '01GTKT':\r\n              this.router.navigate([`/system/handle-invoice/edit-adjust/${row.id}`]);\r\n              break;\r\n            case '02GTTT':\r\n              this.router.navigate([`/system/handle-invoice/edit-sale-adjust/${row.id}`]);\r\n              break;\r\n            case '07KPTQ':\r\n              this.router.navigate([`/system/handle-invoice/edit-non-tariff-adjust/${row.id}`]);\r\n              break;\r\n            case '04HGDL':\r\n              this.router.navigate([`/system/handle-invoice/edit-adjust-agent/${row.id}`]);\r\n              break;\r\n            case '03XKNB':\r\n              this.router.navigate([`/system/handle-invoice/edit-adjust-warehouse/${row.id}`]);\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      } else if (row.adjustment_type === '3') {\r\n        if (row.is_outside_process) {\r\n          this.router.navigate([`/system/handle-invoice/replace-without-software/${row.id}`]);\r\n        }\r\n        else {\r\n          switch (row.invoice_type) {\r\n            case '01GTKT':\r\n              this.router.navigate([`/system/handle-invoice/edit-replace/${row.id}`]);\r\n              break;\r\n            case '02GTTT':\r\n              this.router.navigate([`/system/handle-invoice/edit-sale-replace/${row.id}`]);\r\n              break;\r\n            case '07KPTQ':\r\n              this.router.navigate([`/system/handle-invoice/edit-non-tariff-replace/${row.id}`]);\r\n              break;\r\n            case '04HGDL':\r\n              this.router.navigate([`/system/handle-invoice/edit-replace-agent/${row.id}`]);\r\n              break;\r\n            case '03XKNB':\r\n              this.router.navigate([`/system/handle-invoice/edit-replace-warehouse/${row.id}`]);\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  viewNotSelect(row) {\r\n    this.hidenDropdownList();\r\n    if (row.status == 'DA_XUAT') {\r\n      if (row.xml_type == 4 && VStringService._getValueToString(row.link_pdf_file) != \"\") {\r\n        let oData =\r\n        {\r\n          url: row.link_pdf_file,\r\n          type: 'pdf'\r\n        }\r\n        let popup = window.open('about:blank', 'name', `width=200, height=100`);\r\n        popup.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n        popup.blur();\r\n        this.spinner.show();\r\n        const sub = this.searchService.getFilePdf(oData).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            let w = 1920, h = 900;\r\n            w = window.screen.availWidth * 100 / 100;\r\n            h = window.screen.availHeight * 93 / 100;\r\n            const pdf_file = rs.data.file_content;\r\n            const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n            const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n            win.resizeTo(screen.availWidth, screen.availHeight);\r\n            win.focus();\r\n            this.spinner.hide();\r\n          } else {\r\n            popup.close();\r\n            this.spinner.hide();\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n          this.spinner.hide();\r\n        }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let ids = [];\r\n        ids.push(row.id);\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          let data = this.vatService.taodulieuXemMau(ids);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_hoa_don\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      }\r\n    } else {\r\n      Library.notify('Hóa đơn bị ký lỗi, bạn vui lòng ký lại hóa đơn', 'error');\r\n    }\r\n  }\r\n\r\n  view(data) {\r\n    if (data) {\r\n      if (data) {\r\n        if (data.xml_type == 4 && VStringService._getValueToString(data.link_pdf_file) != \"\") {\r\n          let oData =\r\n          {\r\n            url: data.link_pdf_file,\r\n            type: 'pdf'\r\n          }\r\n          let popup = window.open('about:blank', 'name', `width=200, height=100`);\r\n          setTimeout(() => {\r\n            popup.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n            popup.blur();\r\n          }, 30);\r\n          this.spinner.show();\r\n          const sub = this.searchService.getFilePdf(oData).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              let w = 1920, h = 900;\r\n              w = window.screen.availWidth * 100 / 100;\r\n              h = window.screen.availHeight * 93 / 100;\r\n              const pdf_file = rs.data.file_content;\r\n              const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n              const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n              win.resizeTo(screen.availWidth, screen.availHeight);\r\n              win.focus();\r\n              this.spinner.hide();\r\n            } else {\r\n              popup.close();\r\n              this.spinner.hide();\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => {\r\n            this.spinner.hide();\r\n          }, () => {\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n        else {\r\n          this.dataInfor = data;\r\n          const ids = [];\r\n          ids.push(data.id);\r\n          if (this.configs.system_parameter.view_multi_invoice) {\r\n            let data = this.vatService.taodulieuXemMau(ids);\r\n            data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n            this.vPreviewInvService.xemMau(data);\r\n          }\r\n          else {\r\n            const initialState = {\r\n              items: ids,\r\n              isXuatHD: false,\r\n              hinhthucxuat: '',\r\n              typeAction: sEnum.typeCode.xem_hoa_don\r\n            };\r\n            this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n          }\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  viewDetailInvoice(row) {\r\n    this.router.navigate([`/system/vat-invoice/${row.id}`]);\r\n  }\r\n\r\n  viewReport(idInv, data) {\r\n    const url = window.location.pathname;\r\n    let type;\r\n    if (data.type === 'HUY') {\r\n      type = 'THAY_THE';\r\n    } else {\r\n      type = data.type;\r\n    }\r\n    if (sessionStorage.hasOwnProperty('urlCreate')) {\r\n      if (sessionStorage.getItem('urlCreate') !== null) {\r\n        sessionStorage.setItem('urlCreate', url);\r\n      } else {\r\n        sessionStorage.setItem('urlCreate', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlCreate', url);\r\n    }\r\n    this.handleReportService.createReport(idInv, type);\r\n  }\r\n\r\n  sendInvoice(id) {\r\n    Library.showloading();\r\n    let sub = this.vatService.showToSendInvoice(id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  delete(lstInvoice) {\r\n    this.hidenDropdownList();\r\n    let ids = [];\r\n    lstInvoice = lstInvoice.sort((invA, invB) => {\r\n      return <any>new Date(invB.invoice_date) - <any>new Date(invA.invoice_date) || invB.invoice_number.localeCompare(invA.invoice_number);\r\n    });\r\n\r\n    ids = lstInvoice.map(e => e.id);\r\n    Library.showloading();\r\n    let isView = false;\r\n    const sub = this.handleInvoiceService.showHDXoaBo(ids, isView).subscribe(rs => {\r\n      // let countReport = 0;\r\n      // if (rs[1].data.invoice_reports)\r\n      //   countReport = rs[1].data.invoice_reports.length;\r\n      let lstInvoice = rs[0].data.invoices.filter(p => p.adjustment_type == '7');\r\n      if (lstInvoice && lstInvoice.length > 0)\r\n        isView = true;\r\n      let lstInv = [];\r\n      ids.forEach(id => {\r\n        let inv = rs[0].data.invoices.filter(p => p.id == id)[0];\r\n        lstInv.push(inv);\r\n      });\r\n      const initialState = {\r\n        isView: isView,\r\n        data: lstInv,\r\n        configs: this.configs,\r\n        infoDangKy: this.infoDangKy\r\n        //  countReport: countReport,\r\n      };\r\n      this.bsModalRef = this.modalService.show(RemoveComponent, {\r\n        class: 'modal-lg full-width', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveItem) {\r\n          this.loadList(this.paramSearch);\r\n          this.selectedRows = [];\r\n        }\r\n      });\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  deleteItem(data) {\r\n    let ids = data.id;\r\n    const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n    result.then((dialogResult) => {\r\n      if (dialogResult) {\r\n        Library.showloading();\r\n        this.handleInvoiceService.delete(ids).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n            this.loadList(this.paramSearch);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  viewAttachFile(data) {\r\n    this.hidenDropdownList();\r\n    if (data) {\r\n      Library.showloading();\r\n      this.vatService.showAttachFile(data.id).subscribe((rs: any) => {\r\n        if (rs.status == 'success') {\r\n          if (rs.data && rs.data.invoice && rs.data.invoice.invoice_files.length > 0) {\r\n            let initialState = {\r\n              fileData: rs.data.invoice.invoice_files,\r\n              view_attach_file: true,\r\n            };\r\n            this.bsModalRef = this.modalService.show(ViewAttachFileComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-lg',\r\n              initialState\r\n            });\r\n\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_file_attach, 'error');\r\n          }\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n\r\n  inChuyenDoi(data) {\r\n    if (this.selectedItems.length || data) {\r\n      let _lst = this.selectedItems.filter(p => p.status == 'DA_XUAT');\r\n      if (_lst.length > 0 || data) {\r\n        let ids = [];\r\n        if (data) {\r\n          if (data.status == 'DA_XUAT') {\r\n            ids.push(data.id);\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_print_convert, 'error');\r\n            return;\r\n          }\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (data.xml_type == 4 && VStringService._getValueToString(data.link_pdf_file) != \"\") {\r\n          let oData =\r\n          {\r\n            url: data.link_pdf_file,\r\n            type: 'pdf'\r\n          }\r\n          let popup = window.open('about:blank', 'name', `width=200, height=100`);\r\n          popup.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n          popup.blur();\r\n          this.spinner.show();\r\n          const sub = this.searchService.getFilePdf(oData).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              let w = 1920, h = 900;\r\n              w = window.screen.availWidth * 100 / 100;\r\n              h = window.screen.availHeight * 93 / 100;\r\n              const pdf_file = rs.data.file_content;\r\n              const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n              const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n              win.resizeTo(screen.availWidth, screen.availHeight);\r\n              win.focus();\r\n              this.spinner.hide();\r\n            } else {\r\n              popup.close();\r\n              this.spinner.hide();\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => {\r\n            popup.close();\r\n            this.spinner.hide();\r\n          }, () => {\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n        else {\r\n          if (this.configs.system_parameter.view_multi_invoice) {\r\n            const data = this.vatService.taodulieuInMau(ids, false);\r\n            data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n            this.vPreviewInvService.xemMau(data);\r\n          }\r\n          else {\r\n            const initialState = {\r\n              items: ids,\r\n              isXuatHD: false,\r\n              hinhthucxuat: '',\r\n              typeAction: sEnum.typeCode.in_chuyen_doi_hd\r\n            };\r\n            this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n          }\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  customizeText = (url) => {\r\n    this.invoiceService.handleTotalGrid(url.value, this.objStatusBtn, this.dataGrid);\r\n    return '';\r\n  }\r\n\r\n  downloadFile(data, isBBGiay) {\r\n    this.hidenDropdownList();\r\n    Library.showloading();\r\n    this.handleReportService.getAllFileContentOfReport(data.id, isBBGiay)\r\n      .pipe(\r\n        map(value => {\r\n          if (value.status === 'success') {\r\n            return value.data.invoice_reports;\r\n          }\r\n        }),\r\n        finalize(() => Library.hideloading())\r\n      )\r\n      .subscribe(\r\n        value => {\r\n          this.arrayFileContent = [];\r\n          for (let i = 0; i < value.length; i++) {\r\n            if (value[i].file_content !== null) {\r\n              if (value[i].type === 'DIEU_CHINH') {\r\n                this.arrayFileContent.push({ id: value[i].id, file_content: value[i].file_content, file_name: value[i].file_name });\r\n              } else {\r\n                this.arrayFileContent.push({ id: value[i].id, file_content: value[i].file_content, file_name: value[i].file_name });\r\n              }\r\n            }\r\n          }\r\n\r\n          const initialState = {\r\n            fileData: this.arrayFileContent,\r\n            view_attach_file: true,\r\n            view_paper_report: (isBBGiay == '1' ? true : false),\r\n            _objInv: data\r\n          };\r\n          this.bsModalRef = this.modalService.show(ViewAttachFileComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg',\r\n            initialState\r\n          });\r\n\r\n        },\r\n        error => {\r\n          Library.notify(error, 'error');\r\n        }\r\n      );\r\n  }\r\n  taiHDXml(data) {\r\n    if (data) {\r\n      let ids = [];\r\n      if (data.status != sEnum.statusInv.DaXuat) {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n      if (data.xml_type == 4 && VStringService._getValueToString(data.link_xml_file) != \"\") {\r\n        let oData =\r\n        {\r\n          url: data.link_xml_file,\r\n          type: 'xml'\r\n        }\r\n        Library.showloading();\r\n        const sub = this.searchService.getFilePdf(oData).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          sub.unsubscribe();\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        ids.push(data.id);\r\n        Library.showloading();\r\n        let sub = this.vatService.xuatHDXml(ids).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n          } else {\r\n            Library.notify(rs.message, \"error\");\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n          Library.hideloading();\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n  dieuChinhBtn(data) {\r\n    const row = data;\r\n    if (row.status === 'DA_XUAT' && row.adjustment_type !== '7' && row.adjustment_type !== '2') {\r\n      const template_code = row.template_code.split('/');\r\n      switch (template_code[0]) {\r\n        case '01GTKT0':\r\n        case '1':\r\n          this.router.navigate(['/system/handle-report/', row.id, 'DIEU_CHINH']);\r\n          break;\r\n        case '02GTTT0':\r\n        case '2':\r\n          this.router.navigate([`/system/handle-invoice/sale-adjust/${row.id}`]);\r\n          break;\r\n        case '07KPTQ0':\r\n        case '2':\r\n          this.router.navigate([`/system/handle-invoice/non-tariff-adjust/${row.id}`]);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    } else {\r\n      Library.notify('Bạn không thể điều chỉnh hóa đơn này', 'error');\r\n    }\r\n  }\r\n\r\n  thayTheBtn(data) {\r\n    const row = data;\r\n    if (row.status === 'DA_XUAT' && row.adjustment_type !== 7 && row.adjustment_type !== 2 && row.adjustment_type !== 4 && row.adjustment_type !== 5) {\r\n      this.router.navigate([`/system/handle-invoice/replace/${row.id}`]);\r\n      const template_code = row.template_code.split('/');\r\n      switch (template_code[0]) {\r\n        case '01GTKT0':\r\n        case '1':\r\n          this.router.navigate(['/system/handle-report/', row.id, 'THAY_THE']);\r\n          break;\r\n        case '02GTTT0':\r\n        case '2':\r\n          this.router.navigate([`/system/handle-invoice/sale-replace/${row.id}`]);\r\n          break;\r\n        case '07KPTQ0':\r\n        case '2':\r\n          this.router.navigate([`/system/handle-invoice/non-tariff-replace/${row.id}`]);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    } else {\r\n      Library.notify('Bạn không thể thay thế hóa đơn này', 'error');\r\n    }\r\n  }\r\n\r\n  cancelReport(data) {\r\n    const row = data;\r\n    if (row.status === 'DA_XUAT' && row.adjustment_type !== '7') {\r\n      this.router.navigate(['/system/handle-report/', row.id, 'HUY']);\r\n    } else {\r\n      Library.notify('Hóa đơn đã bị hủy', 'error');\r\n    }\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n    // document.getElementById(\"file-dinh-kem\").click();\r\n    // console.log(e)\r\n\r\n  }\r\n  onDinhKemFile(e) {\r\n    const rowIndex = e.target.dataset.rowindex;\r\n    const fileAttachData: Array<any> = [];\r\n    const fileReader = new FileReader();\r\n    const file = e.target.files[0];\r\n    if (file.size <= 2000000) {\r\n      const pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n      if (pattFile.test(file.name)) {\r\n        fileReader.readAsDataURL(file);\r\n        fileReader.onload = (e) => {\r\n          const base64result = fileReader.result.toString().split(',')[1];\r\n          fileAttachData.unshift({\r\n            type: 'DK',\r\n            file_name: file.name,\r\n            file_content: base64result,\r\n          });\r\n          const data = {\r\n            invoice_report: {\r\n              invoice_id: rowIndex,\r\n              type: 'HUY',\r\n              status: 'HOAT_DONG',\r\n              signature_status: 'NGUOI_BAN_KY',\r\n              file_content: base64result,\r\n              is_paper_report: '1',\r\n              file_name: file.name\r\n            }\r\n          };\r\n          this.handleReportService.apiCreateReport(data).pipe(finalize(() => Library.hideloading()))\r\n            .subscribe(value => {\r\n              if (value.status === 'success') {\r\n                this.loadList(this.paramSearch);\r\n                Library.notify(this._translate.NOTIFY.attach_paper_report, 'success');\r\n              } else {\r\n                Library.notify(value.message, 'error');\r\n              }\r\n            },\r\n              error => {\r\n                Library.notify(error, 'error');\r\n              }\r\n            );\r\n        };\r\n      } else {\r\n        Library.notify('File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml', 'error');\r\n      }\r\n    } else {\r\n      Library.notify('Yêu cầu file nhỏ hơn 2MB', 'error');\r\n    }\r\n  }\r\n\r\n  downloadFileDocx(data, type) {\r\n    const dataSeller = JSON.parse(window.localStorage.getItem('currentUser'));\r\n\r\n    const a = {\r\n      invoice_report: {\r\n        invoice_id: data.id,\r\n        file_extension: 'docx',\r\n        doc_relate_date: moment(new Date()).format('YYYY-MM-DD'),\r\n        type: type,\r\n        json_data: {\r\n          seller_name: dataSeller.account.name,\r\n          seller_address: dataSeller.account.business_address,\r\n          seller_tax_code: dataSeller.account.tax_code,\r\n          seller_mobile: dataSeller.account.contact_mobile,\r\n          seller_surrogate_name: dataSeller.account.surrogate_name,\r\n          seller_surrogate_position: dataSeller.account.surrogate_position,\r\n          buyer_name: data.hasOwnProperty('customer_name') && data.customer_name !== null ? data.customer_name : data.buyer_name,\r\n          buyer_address: data.hasOwnProperty('buyer_address') ? data.buyer_address : null,\r\n          buyer_tax_code: data.hasOwnProperty('buyer_tax_code') ? data.buyer_tax_code : null,\r\n          buyer_mobile: data.hasOwnProperty('buyer_mobile') ? data.buyer_mobile : null,\r\n          buyer_surrogate_name: data.hasOwnProperty('buyer_surrogate_name') ? data.buyer_surrogate_name : null,\r\n          buyer_surrogate_position: data.hasOwnProperty('buyer_surrogate_position') ? data.buyer_surrogate_position : null,\r\n          template_code: data.hasOwnProperty('template_code') ? data.template_code : null,\r\n          invoice_series: data.hasOwnProperty('invoice_series') ? data.invoice_series : null,\r\n          invoice_date: data.hasOwnProperty('invoice_date') ? data.invoice_date : null,\r\n          invoice_number: data.hasOwnProperty('invoice_number') ? data.invoice_number : null,\r\n        },\r\n        is_paper_report: 1\r\n      }\r\n    };\r\n    Library.showloading();\r\n    this.handleReportService.apiGetFileContent(a).subscribe(\r\n      value => {\r\n        if (value.status === 'success') {\r\n          Helper.dowloadFile(value.data.invoice.file_name, 'docx', value.data.invoice.file_content);\r\n        } else {\r\n          Library.notify(value.message, 'error');\r\n        }\r\n      }, error => {\r\n        Library.notify(error.message, 'error');\r\n\r\n      }, () => {\r\n        Library.hideloading();\r\n      }\r\n    );\r\n  }\r\n\r\n  hidenDropdownList() {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.idRow) {\r\n      document.getElementById(this.idRow).classList.remove('show');\r\n    }\r\n  }\r\n  BaoCaoCQT() {\r\n    this.hidenDropdownList();\r\n    Library.showloading();\r\n    let sub = this.templateService.getAll1().subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let listTemplate = rs.data.templates;\r\n        let lstInvoice = this.selectedItems;\r\n        lstInvoice = lstInvoice.sort((invA, invB) => {\r\n          return <any>new Date(invB.invoice_date) - <any>new Date(invA.invoice_date) || invB.invoice_number.localeCompare(invA.invoice_number);\r\n        });\r\n        const initialState = {\r\n          data: lstInvoice,\r\n          configs: this.configs,\r\n          listTemplate: listTemplate,\r\n          infoDangKy: this.infoDangKy\r\n        };\r\n        this.bsModalRef = this.modalService.show(ReportTaxInvoiceErrorComponent, {\r\n          class: 'modal-lg full-width', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  ThongDiepGuiNhan(data) {\r\n    Library.showloading();\r\n    if (data.invoice_wrongs && data.invoice_wrongs.length > 0) {\r\n      let lstErr = data.invoice_wrongs;\r\n      const initialState = {\r\n        lstErr: lstErr,\r\n        notifyType: \"THONG_DIEP_TRUYEN_NHAN_MTT\",\r\n        send_wrong_status: data.send_wrong_status,\r\n      };\r\n      this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n        backdrop: 'static',\r\n        keyboard: true,\r\n        class: 'modal-lg truyen-nhan',\r\n        initialState\r\n      });\r\n      const subModal = this.modalService.onHide.subscribe(() => {\r\n        subModal.unsubscribe();\r\n      });\r\n      Library.hideloading();\r\n    }\r\n    else {\r\n      let message = {\r\n        message_code: data.message_wrong_code\r\n      }\r\n      let sub = this.handleInvoiceService.getInforSendRecieve(message).subscribe(\r\n        (rs: any) => {\r\n          if (rs.status == \"success\") {\r\n            let lstErr = rs.data;\r\n            const initialState = {\r\n              lstErr: lstErr,\r\n              notifyType: \"THONG_DIEP_TRUYEN_NHAN\",\r\n              send_wrong_status: data.send_wrong_status,\r\n              noi_dung_loi: data.error_content\r\n            };\r\n            this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n              backdrop: 'static',\r\n              keyboard: true,\r\n              class: 'modal-lg modal-margin-width truyen-nhan',\r\n              initialState\r\n            });\r\n            const subModal = this.modalService.onHide.subscribe(() => {\r\n              subModal.unsubscribe();\r\n            });\r\n          }\r\n          else {\r\n            Library.notify(rs.message, \"error\");\r\n          }\r\n        },\r\n        err => {\r\n\r\n        },\r\n        () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n  }\r\n  onContentReady(e) {\r\n    if (e) {\r\n      const dataSource = this.dataGrid.instance.getDataSource();\r\n      this.pageSize = dataSource ? dataSource.items().length : 0;\r\n    }\r\n  }\r\n  getStatusSendTax(data) {\r\n    let status = \"\";\r\n    if (data.invoice_wrongs && data.invoice_wrongs.length > 0) {\r\n      switch (data.invoice_wrongs[0].status) {\r\n        case \"DA_GUI\":\r\n        case \"DA_GUI_CQT\":\r\n          status = \"Đã gửi TB\";\r\n          break;\r\n        case \"KHONG_TIEP_NHAN\":\r\n          status = \"CQT không tiếp nhận\";\r\n          break;\r\n        case \"TIEP_NHAN\":\r\n          status = \"CQT tiếp nhận\";\r\n          break;\r\n        case \"CHAP_NHAN\":\r\n          status = \"CQT chấp nhận\";\r\n          break;\r\n        case \"KHONG_CHAP_NHAN\":\r\n          status = \"CQT không chấp nhận\";\r\n          break;\r\n      }\r\n    }\r\n    else {\r\n      switch (data.send_wrong_status) {\r\n        case \"DA_GUI\":\r\n        case \"DA_GUI_CQT\":\r\n          status = \"Đã gửi TB\";\r\n          break;\r\n        case \"KHONG_TIEP_NHAN\":\r\n          status = \"CQT không tiếp nhận\";\r\n          break;\r\n        case \"TIEP_NHAN\":\r\n          status = \"CQT tiếp nhận\";\r\n          break;\r\n        case \"CHAP_NHAN\":\r\n          status = \"CQT chấp nhận\";\r\n          break;\r\n        case \"KHONG_CHAP_NHAN\":\r\n          status = \"CQT không chấp nhận\";\r\n          break;\r\n      }\r\n    }\r\n    return status;\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.LABEL.cancel_invoice}}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid\\r\\n    id=\\\"invoiceHistoryGrid\\\"\\r\\n    [dataSource]=\\\"dataSource\\\"\\r\\n    [showBorders]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\"\\r\\n    (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n    (onCellPrepared)=\\\"onCellPrepared($event)\\\"\\r\\n    [showRowLines]=\\\"true\\\">\\r\\n    <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n    <!-- Số hóa đơn -->\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n              alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Mẫu số, ký hiệu -->\\r\\n    <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Ngày hóa đơn -->\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n              format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Mã số thuế -->\\r\\n     <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Tên khách hàng -->\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\"\\r\\n              alignment=\\\"left\\\" minWidth=\\\"200\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Địa chỉ bên mua -->\\r\\n    <dxi-column dataField=\\\"buyer_address\\\" caption=\\\"{{_translate.CONTROLL.LABEL.address}}\\\" minWidth=\\\"200\\\" \\r\\n                [allowEditing]=\\\"false\\\" alignment=\\\"left\\\" [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Tổng tiền -->\\r\\n    <dxi-column dataField=\\\"total_payment\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" alignment=\\\"right\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\" [allowEditing]=\\\"false\\\" dataType=\\\"number\\\" format=\\\"0,###.##\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Số văn bản -->\\r\\n    <!-- <dxi-column dataField=\\\"doc_relate_symbol\\\" [allowEditing]=\\\"!isView\\\"\\r\\n                caption=\\\"{{_translate.CONTROLL.LABEL.doc_relate_symbol}}\\\" minWidth=\\\"150\\\" alignment=\\\"left\\\">\\r\\n    </dxi-column> -->\\r\\n    <!-- Ngày văn bản -->\\r\\n    <!-- <dxi-column dataField=\\\"doc_relate_date\\\" [allowEditing]=\\\"!isView\\\" \\r\\n                caption=\\\"{{_translate.CONTROLL.LABEL.doc_relate_date}}\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"left\\\" minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\">\\r\\n    </dxi-column> -->\\r\\n    <!-- Ngày hủy -->\\r\\n    <dxi-column dataField=\\\"destroy_date\\\"\\r\\n                caption=\\\"{{ 'GRID.INVOICE.date_cancel' | translate }}\\\" [editorOptions]=\\\"{ placeholder: 'dd/MM/yyyy',useMaskBehavior:true }\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"left\\\" minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Lý do hủy -->\\r\\n    <dxi-column dataField=\\\"destroy_reason\\\"\\r\\n                caption=\\\"{{_translate.CONTROLL.LABEL.destroy_reason}}\\\" alignment=\\\"left\\\" minWidth=\\\"150\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Email -->\\r\\n    <!-- <dxi-column dataField=\\\"buyer_email\\\" [allowEditing]=\\\"!isView\\\" \\r\\n                caption=\\\"Email\\\" alignment=\\\"left\\\" minWidth=\\\"150\\\">\\r\\n    </dxi-column> -->\\r\\n    <!-- <dxi-column cellTemplate=\\\"DinhKemFile\\\" caption=\\\"{{_translate.CONTROLL.LABEL.attach_file}}\\\" [width]=\\\"150\\\" alignment=\\\"left\\\"></dxi-column> -->\\r\\n    <!-- <dxi-column *ngIf=\\\"!isView\\\" cellTemplate=\\\"downloadBB\\\" caption=\\\"{{_translate.CONTROLL.LABEL.doc_relate}}\\\" [width]=\\\"90\\\" alignment=\\\"center\\\"></dxi-column> -->\\r\\n\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template_code }}</p>\\r\\n      <p>{{ d.data.invoice_series }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n        *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.customer_name }}</p>\\r\\n      <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.customer_name || _translate.GRID.INVOICE.invoice_wait_for_sign }}</p>\\r\\n    </div>\\r\\n      <div *dxTemplate=\\\"let data of 'DinhKemFile'\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"dinhKemFile($event)\\\">\\r\\n            <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"data.rowIndex\\\" accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n             <p *ngIf=\\\"!isView || adjustment_type == '7'\\\">Chọn file</p>\\r\\n            <p *ngIf=\\\"data.data.invoice_files&&data.data.invoice_files.length\\\" (click)=\\\"downloadFile(data.data.invoice_files[0])\\\">{{data.data.invoice_files[0].file_name}}</p>\\r\\n          </a>\\r\\n        </div>\\r\\n      <!-- <div *dxTemplate=\\\"let d of 'downloadBB'\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"xuatMauBienBan(d.data)\\\"><img src=\\\"assets\\\\img\\\\icons\\\\TaiMauBangKe.png\\\"></a>\\r\\n        </div> -->\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button disableDoubleClick *ngIf=\\\"!isView\\\" text=\\\"{{_translate.CONTROLL.BUTTON.save }}\\\" (click)=\\\"xoaBo()\\\" icon=\\\"{{_translate.ICONS.save }}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back }}\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".gach-chan{text-decoration:underline}.img-upload-second{text-align:center}.img-upload-second i{margin-top:10px;width:40px;height:auto;cursor:pointer}.img-upload-second p{margin-top:10px}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { Base64 } from 'js-base64';\r\nimport * as moment from 'moment';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\n\r\nimport { Library, SocketService, AuthService, Helper, VStringService, sEnum } from '@core/index';\r\nimport { HandleInvoiceService } from '../../shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String, StringBuilder } from 'typescript-string-operations';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { pattern } from '@config/index';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n@Component({\r\n  selector: 'app-remove',\r\n  templateUrl: './remove.component.html',\r\n  styleUrls: ['./remove.component.scss']\r\n})\r\nexport class RemoveComponent implements OnInit {\r\n\r\n  data: any;\r\n  isView: any;\r\n  configs: any;\r\n  invoices: any;\r\n  invoicesStore: ArrayStore;\r\n  dataSource: DataSource;\r\n  ioSignature: any;\r\n  _language: string;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  _translate: any;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  nodeSign: any;\r\n  countReport: any;     \r\n  emailPattern: any = pattern.email;\r\n  infoDangKy: any;\r\n  isTT78: boolean = false;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private socketService: SocketService,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n    private authService: AuthService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private vPreviewInvService: ViewInvoiceService\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n  ngOnInit() {\r\n    this.invoicesStore = new ArrayStore({\r\n      key: 'id',\r\n      data: this.data\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoicesStore\r\n    });\r\n    if (this.infoDangKy && this.infoDangKy.id) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n        this.isTT78 = true;\r\n    }\r\n    // this.invoicesStore.load().then((dataSource) => {\r\n    //   dataSource.forEach((item, index) => {\r\n    //     item.doc_relate_symbol = this.createDocRelateNumber();\r\n    //   });\r\n    // });\r\n    this.connectWebsocket();\r\n  }\r\n  createDocRelateNumber() {\r\n    let number_report = \"\";\r\n    if (this.countReport < 10)\r\n      number_report = '0' + this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    else\r\n      number_report = this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    this.countReport++;\r\n    return number_report;\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          let i = this.invoiceIndex;\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content, this.invoices[i]);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.invoices[i].issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat(this.invoices[i]);\r\n          } else {\r\n            this.invoices[i].invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoices[i].invoice_files.length) {\r\n              this.xuLiApiKhiXuat(this.invoices[i]);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  _validGrid() {\r\n    let invalid = true;\r\n    this.invoicesStore.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        item.doc_relate_date = item.doc_relate_date ? moment(item.doc_relate_date).format('YYYY-MM-DD') : item.doc_relate_date;\r\n        item.destroy_date = item.destroy_date ? moment(item.destroy_date).format('YYYY-MM-DD') : item.destroy_date;\r\n        if (!item.destroy_date && invalid) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.cancel_date + \" \" + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n          invalid = false;\r\n          return false;\r\n        } else {\r\n          let currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n          if (moment(item.destroy_date) > moment(currentDate) && invalid) {\r\n            Library.notify(this._translate.NOTIFY.date_cancel_invoice_not_greater_date_current, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          let invoice_date = moment(item.invoice_date).format('YYYY-MM-DD');\r\n          if (moment(item.destroy_date) < moment(invoice_date) && invalid) {\r\n            Library.notify(this._translate.NOTIFY.date_cancel_invoice_greater_or_equal_date_invoice, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_date'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n        }\r\n        if (!item.destroy_reason && invalid) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.reason_cancels + \" \" + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'destroy_reason'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n        if (item.buyer_email && !this.emailPattern.test(item.buyer_email) && invalid) {\r\n          Library.notify('Email ' + this._translate.VALIDATION.not_pattern, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'buyer_email'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n      });\r\n    });\r\n    return invalid;\r\n  }\r\n\r\n  xoaBo() {\r\n    if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n      Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      if (this._validGrid()) {\r\n        Library.confirmVA(this._translate.CONFIRM.acction_function, this._translate.NOTIFY.notify, () => {\r\n          this.showPopup = true;\r\n          this.invoicesStore.load().then((dataSource) => {\r\n            if (dataSource.length > 0) {\r\n              this.invoices = dataSource.filter(p => p.adjustment_type != '7');\r\n              this.totalInvoice = this.invoices.length;\r\n              this.invoiceIndex = 0;\r\n              this.tempKiFile = 0;\r\n              this.xuatHoaDon();\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    let i = this.invoiceIndex;\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat(this.invoices[i]);\r\n    } else {\r\n      if (this.invoices[i].invoice_files.length) {\r\n        this.invoices[i].invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.invoices[i].invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n      }\r\n    }\r\n  }\r\n  xuLiApiKhiXuat(invoice) {\r\n    let tempTemplate = invoice.template;\r\n    delete invoice.template;\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    let data = {\r\n      id: invoice.id,\r\n      adjustment_type: \"7\",\r\n      destroy_reason: invoice.destroy_reason,\r\n      email: invoice.buyer_email,\r\n      date: invoice.destroy_date\r\n    };\r\n    let sub = this.handleInvoiceService.getXmlString(data).subscribe(rs => {\r\n      invoice.template = tempTemplate;\r\n      if (rs.status == 'success') {\r\n        xmlInvoice = rs.data.invoice.xml_string;\r\n        let isNewXml = rs.data.invoice.is_new_xml;\r\n        let sign_date = moment(rs.data.invoice.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (isNewXml)\r\n          this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n        else\r\n          this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n        if (xmlInvoice != \"\") {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n          else {\r\n            if (this.isTT78)\r\n              this.xuLyKiFile(xmlInvoice, sign_date);\r\n            else\r\n              this.xuLyKiFile(xmlInvoice, invoice.invoice_date);\r\n          }\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        //this.onImportHiding();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string, invoice) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    this.subXuatHoaDon = this.handleInvoiceService.cancelInvoice({\r\n      invoice: {\r\n        id: invoice.id,\r\n        // doc_relate_symbol: invoice.doc_relate_symbol,\r\n        // doc_relate_date: invoice.doc_relate_date,\r\n        destroy_reason: invoice.destroy_reason,\r\n        destroy_date: invoice.destroy_date,\r\n        //email: invoice.buyer_email,\r\n        xml_string: xml_string\r\n      },\r\n      invoice_files: invoice.invoice_files,\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.valueProgress += percentComplete;\r\n        this.tempKiFile = 0;\r\n        invoice.adjustment_type = '7';\r\n        if (this.invoiceIndex < this.totalInvoice - 1) {\r\n          this.invoiceIndex++;\r\n          this.bsModalRef.content.successSaveItem = 'success';\r\n          this.xuatHoaDon();\r\n        } else if (this.invoiceIndex == this.totalInvoice - 1) {\r\n          Library.notify(this._translate.NOTIFY.cancel_invoice_done, 'success');\r\n          this.isView = true;\r\n          setTimeout(() => {\r\n            this.showPopup = false;\r\n          }, 300);\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      // Library.hideloading();\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n    // document.getElementById(\"file-dinh-kem\").click();\r\n    // console.log(e)\r\n\r\n  }\r\n  choseFile(evt) {\r\n    //evt.srcElement.firstChild.click();\r\n    document.getElementById(\"file-input\").click();\r\n  }\r\n  fileChanged(e) {\r\n    setTimeout(() => {\r\n      //let rowIndex = e.target.dataset.rowindex;\r\n      let fileAttachData: Array<any> = [];\r\n      let fileReader = new FileReader();\r\n      let file = e.target.files[0];\r\n      let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n      // console.log(file)\r\n      if (pattFile.test(file.name)) {\r\n        fileReader.readAsDataURL(file);\r\n        fileReader.onload = (e) => {\r\n          let base64result = fileReader.result.toString().split(',')[1];\r\n          fileAttachData.unshift({\r\n            type: \"DK\",\r\n            file_name: file.name,\r\n            file_content: base64result,\r\n          });\r\n          // if (document.getElementById('list-file')) {\r\n          //   document.getElementById('list-file').scrollTop = 0;\r\n          // }\r\n          let _lstAttach: any = [];\r\n          _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n          if (_lstAttach == null) {\r\n            _lstAttach = [];\r\n          } else {\r\n            _lstAttach.push(fileAttachData[0]);\r\n          }\r\n          this.dataSource[0][\"invoice_files\"] = _lstAttach;\r\n          // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n          //this.dataSource.reload();\r\n        }\r\n      } else {\r\n        Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n      }\r\n    }, 200);\r\n  }\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let test = fileReader.result;\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"DK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.invoicesStore.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (index == rowIndex)\r\n              item.invoice_files = fileAttachData;\r\n          });\r\n        });\r\n        // this.dataSource[rowIndex][\"invoice_files\"] = fileAttachData;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_content\"] = base64result;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n  removeFile(i) {\r\n    let _lstAttach: any = [];\r\n    _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n    _lstAttach.splice(i, 1);\r\n  }\r\n  downloadFile(data) {\r\n    var re = /(?:\\.([^.]+))?$/;\r\n    var fileType = re.exec(data.file_name)[1];\r\n    Helper.dowloadFile(data.file_name, fileType, data.file_content);\r\n  }\r\n\r\n  xuatMauBienBan(data) {\r\n    if (this._validGrid()) {\r\n      Library.showloading();\r\n      let inv = Object.assign({}, data);\r\n      inv.adjustment_type = \"1\";\r\n      inv.auto_value_price = inv.auto_value_price == null ? false : inv.auto_value_price;\r\n      inv.invoice_files = [];\r\n      inv.doc_relate_date = moment(data.doc_relate_date).format('YYYY-MM-DD');\r\n      this.vatService.xuatMauBienBan(inv).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let file = rs.data.invoice;\r\n          Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n  viewDetailInvoice(data) {\r\n    if (data) {\r\n      const ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      }\r\n      let dulieu = this.vatService.taodulieuXemMau(ids);\r\n      dulieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(dulieu);\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n  dong() {\r\n    this.bsModalRef.hide();\r\n    // this.router.navigate(['/system/handle-invoice/']);\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'destroy_date' || e.dataField === 'destroy_reason') {\r\n        if (this.isView || e.row.data.adjustment_type == \"7\")\r\n          e.editorOptions.disabled = true;\r\n      }\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      /* Bôi đỏ các trường bắt buộc */\r\n      if (e.column.dataField == \"destroy_date\") {\r\n        if (!e.data.destroy_date) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.CONTROLL.LABEL.cancel_date + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n        else {\r\n          let currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n          let invoice_date = moment(e.data.invoice_date).format('YYYY-MM-DD');\r\n          let destroy_date = moment(e.data.destroy_date).format('YYYY-MM-DD');\r\n          if (moment(destroy_date) > moment(currentDate)) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = this._translate.NOTIFY.date_cancel_invoice_not_greater_date_current;\r\n          }\r\n          if (moment(destroy_date) < moment(invoice_date)) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = this._translate.NOTIFY.date_cancel_invoice_greater_or_equal_date_invoice;\r\n          }\r\n        }\r\n      }\r\n      if (e.column.dataField == \"destroy_reason\") {\r\n        if (!e.data.destroy_reason) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.CONTROLL.LABEL.reason_cancels + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n      }\r\n      if (e.column.dataField == \"buyer_email\") {\r\n        if (e.data.buyer_email && !this.emailPattern.test(e.data.buyer_email)) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = 'Email ' + this._translate.VALIDATION.not_pattern;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"row invoice-form\\\" *ngIf=\\\"!isPXKDaiLy && !isPXKNB\\\">\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item *ngIf=\\\"!isTT78\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.invoice_form}\\\"\\r\\n          dataField=\\\"invoice_release_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.invoice_releases, onValueChanged: templateChange, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"_translate.CONTROLL.LABEL.invoice_form {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item *ngIf=\\\"isTT78\\\" dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: _translate.GRID.INVOICE.invoice_date }\\\"\\r\\n          editorType=\\\"dxDateBox\\\"\\r\\n          [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate, onValueChanged: changeDateTime}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item cssClass=\\\"vat invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\"\\r\\n          [label]=\\\"{text: _translate.GRID.INVOICE.invoice_number }\\\" editorType=\\\"dxNumberBox\\\"\\r\\n          [editorOptions]=\\\"{ disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_code}\\\" dataField=\\\"currency_code\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"currency_rate\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_rate}\\\"\\r\\n          editorType=\\\"dxNumberBox\\\"\\r\\n          [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: formatter.ty_gia}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_method}\\\" dataField=\\\"payment_method_name\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.payment_method}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item name=\\\"ht-xuat\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_form }}\\\"></dxo-label>\\r\\n          <div *dxTemplate>\\r\\n            <dx-select-box [(value)]=\\\"frmData.status\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\"\\r\\n              [disabled]=\\\"!configs.system_parameter.allow_keep_invoice_number\\\">\\r\\n            </dx-select-box>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.view_bank_account_seller\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"seller_bank_account_number\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.list_bank_account_seller, onValueChanged: bankAccountSellerChange, displayExpr: 'name_display', valueExpr: 'code',showClearButton: true}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.seller_bank_account_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"origin-invoice-number\\\">\\r\\n            <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number_original}}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-text-box [(value)]=\\\"oldForm.invoice_number\\\" disabled=\\\"true\\\"></dx-text-box>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"origin_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"soXacThucGoc\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.certificate_code}\\\"\\r\\n          [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Chứng từ tham chiếu -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.vouchers_reference\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONFIGS.vouchers_reference}\\\" dataField=\\\"license_number\\\"\\r\\n          [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Số S/O -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"configs.system_parameter.invoice_the_order\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONFIGS.so_so }\\\" dataField=\\\"the_order\\\"\\r\\n          [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Số phiếu xuất kho -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.receipts_no\\\" dataField=\\\"receipts_no\\\" [colCount]=\\\"1\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE.receipts_no }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày giao hàng -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.from_warehouse_date\\\" dataField=\\\"from_warehouse_date\\\"\\r\\n          [template]=\\\"'deliverydata'\\\" [colCount]=\\\"1\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.delivery_date }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Xuất cho khách hàng -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.ship_receiving_name\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"ship_receiving_name\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.ship_receiving_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Địa chỉ nhận hàng -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.ship_receiving_address\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"ship_receiving_address\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.ship_receiving_address }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Thời hạn thanh toán -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"configs.system_parameter.payment_expire\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_time }\\\" dataField=\\\"payment_expire\\\"\\r\\n          [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hình thức bán hàng -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.form_sales\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONFIGS.form_sales}\\\" dataField=\\\"sell_form\\\"\\r\\n          [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_export_place\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.export_place}\\\" dataField=\\\"export_place\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.export_places, onValueChanged: exportPlaceChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_transport_number\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"transport_number\\\">\\r\\n          <dxo-label text=\\\"{{ 'CONTROLL.LABEL.transport_number' | translate }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn pepsi -->\\r\\n      <!-- Tên khách hàng(TT giao hàng) -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_delivery_information\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"ship_receiving_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.ship_receiving_name}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Địa chỉ giao hàng -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_delivery_information\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"ship_receiving_address\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.shipping_address}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_delivery_information\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Đơn đặt hàng( Mã số đơn hàng) -->\\r\\n        <dxi-item dataField=\\\"the_order\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.the_order}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Số tham khảo -->\\r\\n        <dxi-item dataField=\\\"consult_number\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.consult_number}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn bảo dưỡng xe -->\\r\\n      <!-- Địa chỉ giao hàng -->\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"place_of_delivery\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address_delivery }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Thời hạn thanh toán -->\\r\\n        <dxi-item dataField=\\\"payment_expire\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_time }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Số wip -->\\r\\n        <dxi-item dataField=\\\"wip_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.wip_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Biển số xe -->\\r\\n        <dxi-item dataField=\\\"license_plate\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.license_plate }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Số khung -->\\r\\n        <dxi-item dataField=\\\"invoice_chassis_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.chassis_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn bàn giao xe -->\\r\\n      <dxi-item *ngIf=\\\"isShowBanGiaoXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Số hợp đồng -->\\r\\n        <dxi-item dataField=\\\"contract_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.vehicle_contract_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Số VSB -->\\r\\n        <dxi-item dataField=\\\"vsb_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.vehicle_vsb }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBanGiaoXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Màu xe -->\\r\\n        <dxi-item dataField=\\\"color\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.vehicle_color }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Số máy -->\\r\\n        <dxi-item dataField=\\\"invoice_engine_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.engine_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn nhà thuốc -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Số tham chiếu -->\\r\\n        <dxi-item dataField=\\\"license_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.reference_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Tuyến -->\\r\\n        <dxi-item dataField=\\\"route\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.route }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Đơn đặt hàng -->\\r\\n        <dxi-item dataField=\\\"the_order\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.the_order }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Số tham khảo -->\\r\\n        <dxi-item dataField=\\\"consult_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.consult_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Nhân viên thu tiền -->\\r\\n        <dxi-item dataField=\\\"cash_staff\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.cash_staff }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isTT78\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Lý do thay thế -->\\r\\n        <dxi-item dataField=\\\"destroy_reason\\\">\\r\\n          <dxo-label text=\\\"Lý do thay thế\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Lý do thay thế {{_translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isTT78\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"list_number\\\">\\r\\n          <dxo-label text=\\\"Số bảng kê\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"list_date\\\" [template]=\\\"'notifydate'\\\">\\r\\n          <dxo-label text=\\\"Ngày bảng kê\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <div *dxTemplate=\\\"let d of 'notifydate'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.list_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\" [displayFormat]=\\\"'dd/MM/yyyy'\\\"\\r\\n          [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'deliverydata'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.from_warehouse_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\"\\r\\n          [displayFormat]=\\\"'dd/MM/yyyy'\\\" [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.export_invoice_for}\\\" dataField=\\\"customer_object_code\\\"\\r\\n          editorType=\\\"dxSelectBox\\\" [cssClass]=\\\"'max_left'\\\"\\r\\n          [editorOptions]=\\\"{items: select.customer_object_codes, displayExpr: 'name', valueExpr: 'code', onValueChanged: customer_object_codeChange}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.customer_group}\\\" dataField=\\\"customer_type\\\"\\r\\n          editorType=\\\"dxSelectBox\\\" [cssClass]=\\\"'max_right'\\\"\\r\\n          [editorOptions]=\\\"{items: select.customer_types, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n          <dxi-item name=\\\"search-mst\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.tax_code }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-autocomplete valueExpr=\\\"tax_code\\\" [dataSource]=\\\"tax_codes\\\" [(value)]=\\\"frmData.buyer_tax_code\\\"\\r\\n                [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"taxCodeChoose($event)\\\"\\r\\n                (onValueChanged)=\\\"changeTaxCode($event)\\\" (onFocusOut)=\\\"updateTaxcodeInfo($event)\\\">\\r\\n                <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                  <span>{{item.tax_code}}: {{ item.name }}</span>\\r\\n                </div>\\r\\n              </dx-autocomplete>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <dxi-item cssClass='btn-small'>\\r\\n            <button (click)=\\\"searchTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n              <i class=\\\"{{_translate.ICONS.search}}\\\" style=\\\"font-size: 22px;\\\"></i>\\r\\n            </button>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button vat-handle'>\\r\\n          <dxi-item name=\\\"search-mkh\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.customer_code}}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-autocomplete valueExpr=\\\"code\\\" [dataSource]=\\\"customer_codes\\\" [(value)]=\\\"frmData.customer_code\\\"\\r\\n                [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"customerCodeChoose($event)\\\"\\r\\n                (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n                <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                  <span>{{item.code}}: {{ item.name }}</span>\\r\\n                </div>\\r\\n              </dx-autocomplete>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n          <!--            <dxi-item itemType=\\\"button\\\" [buttonOptions]=\\\"mst_btn_options\\\" cssClass='btn-small'>-->\\r\\n          <!--            </dxi-item>-->\\r\\n          <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"mst_btn_options\\\" cssClass='btn-small'>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- <dxi-item name=\\\"search-mkh\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.customer_code}}\\\"></dxo-label>\\r\\n          <div *dxTemplate>\\r\\n            <dx-autocomplete valueExpr=\\\"code\\\" [dataSource]=\\\"customer_codes\\\" [(value)]=\\\"frmData.customer_code\\\"\\r\\n              [readOnly]=\\\"readOnlyCacTruongConLai\\\" (onItemClick)=\\\"customerCodeChoose($event)\\\"\\r\\n              (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n              <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                <span>{{item.code}}: {{ item.name }}</span>\\r\\n              </div>\\r\\n            </dx-autocomplete>\\r\\n          </div>\\r\\n        </dxi-item> -->\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.customer_name}\\\" dataField=\\\"customer_name\\\"\\r\\n          [editorOptions]=\\\"{disabled: tod.customer_name, isRequired: false,onValueChanged: customerChanged}\\\">\\r\\n          <!-- <dxi-validation-rule *ngIf=\\\"!tod.customer_name\\\" type=\\\"required\\\" message=\\\"Tên đơn vị {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.buyer_name}\\\" dataField=\\\"buyer_name\\\"\\r\\n          [editorOptions]=\\\"{disabled: tod.buyer_name,onValueChanged: customerChanged}\\\">\\r\\n          <!-- <dxi-validation-rule *ngIf=\\\"frmData.customer_object_code != 'DOANH_NGHIEP'\\\" type=\\\"required\\\" message=\\\"Họ tên người mua {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.phone}\\\" dataField=\\\"buyer_mobile\\\"\\r\\n          [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n          <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.phone}} không đúng định dạng\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isShowToKhai\\\">\\r\\n        <!-- Số hộ chiều -->\\r\\n        <dxi-item cssClass=\\\"in-hoa vat2 layout_input\\\" dataField=\\\"passport\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableTemplateInput() }\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.passport}}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.passport}} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Quốc tịch -->\\r\\n        <dxi-item cssClass=\\\"in-hoa vat3 layout_input\\\" dataField=\\\"nationality\\\"\\r\\n          [editorOptions]=\\\"{disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.nationality}}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.nationality}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isShowToKhai\\\">\\r\\n        <!-- Ngày cấp hộ chiếu -->\\r\\n        <dxi-item cssClass=\\\"vat2 layout_input\\\" editorType=\\\"dxDateBox\\\" dataField=\\\"passport_date\\\"\\r\\n          [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.passport_date}}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.passport_date}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày hết hạn hộ chiếu -->\\r\\n        <dxi-item dataField=\\\"passport_expiration_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n          [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\">\\r\\n          <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.passport_expiration_date}}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{_translate.CONTROLL.LABEL.passport_expiration_date}} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.address}\\\" dataField=\\\"buyer_address\\\"\\r\\n          [editorOptions]=\\\"{disabled: tod.buyer_address,onValueChanged: customerChanged}\\\">\\r\\n          <!-- <dxi-validation-rule *ngIf=\\\"!tod.buyer_address\\\" type=\\\"required\\\" message=\\\"Địa chỉ {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n\\r\\n        <dxi-item [label]=\\\"{text: 'Email'}\\\">\\r\\n          <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n            <div\\r\\n              class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n              <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                </app-tag-input-email>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n        <!--        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.bank_account_number}\\\" dataField=\\\"bank_account_number\\\"-->\\r\\n        <!--                  [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">-->\\r\\n        <!--        </dxi-item>-->\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.bank_name}\\\" dataField=\\\"bank_name\\\"\\r\\n          [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n        </dxi-item>\\r\\n        <!--Thông tin other_id -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.other_id\\\" dataField=\\\"other_id\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.other_id }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_export_place\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.export_address}\\\" dataField=\\\"export_address\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_transport_number\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"train_name\\\">\\r\\n          <dxo-label text=\\\"{{ 'CONTROLL.LABEL.train_name' | translate }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn pepsi -->\\r\\n      <!-- Thời hạn thanh toán -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.display_delivery_information\\\" dataField=\\\"payment_expire\\\"\\r\\n          [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_time}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn bảo dưỡng xe -->\\r\\n      <!-- Địa chỉ xuất hàng -->\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"shiping_point\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address_shipping }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Ngày ra, vào xe -->\\r\\n        <dxi-item dataField=\\\"in_out_date\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.in_out_date }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Số hóa đơn nội bộ -->\\r\\n        <dxi-item dataField=\\\"invoice_internal_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_internal_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Số km -->\\r\\n        <dxi-item dataField=\\\"kilometer_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.kilometer_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn bàn giao xe -->\\r\\n      <dxi-item *ngIf=\\\"isShowBanGiaoXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Số chứng từ -->\\r\\n        <dxi-item cssClass=\\\"vat layout_input\\\" dataField=\\\"license_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.vehicle_license_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Kiểu xe -->\\r\\n        <dxi-item dataField=\\\"model\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.vehicle_model }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"isShowBanGiaoXe\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Số khung -->\\r\\n        <dxi-item cssClass=\\\"vat layout_input\\\" dataField=\\\"invoice_chassis_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.chassis_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Năm sản xuất -->\\r\\n        <dxi-item dataField=\\\"manufacture_year\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.year_manufacture }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn nhà thuốc -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Địa chỉ giao hàng -->\\r\\n        <dxi-item dataField=\\\"place_of_delivery\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address_delivery }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <!-- Kho -->\\r\\n        <dxi-item dataField=\\\"from_warehouse_name\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.warehouse }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Phiếu nhận hàng -->\\r\\n        <dxi-item dataField=\\\"receive_bill\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.receive_bill }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Điều khoản giao hàng -->\\r\\n      <dxi-item *ngIf=\\\"configs.system_parameter.delivery_terms\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"delivery_terms\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.delivery_terms }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Ghi chú -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item dataField=\\\"note\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.note }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Trường mở rộng -->\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\" [formData]=\\\"frmData\\\" [customerTempt]=\\\"customerTempt\\\"\\r\\n          [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'invoice_options'\\\"></app-form-extend>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <div class=\\\"col-md-12\\\" style=\\\"margin-top:7px;margin-bottom:7px\\\">\\r\\n    <dx-form *ngIf=\\\"!isTT78\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <ng-container *ngIf=\\\"configs.system_parameter.allow_keep_invoice_number && isShowButtonWaiteSign\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item name=\\\"btn-chossen-hdck\\\">\\r\\n              <dx-button id=\\\"btn-chossen-hdck\\\" (click)=\\\"showModalHdck()\\\" icon=\\\"assets\\\\img\\\\icons\\\\GiuSo.png\\\"\\r\\n                text=\\\"{{_translate.CONTROLL.BUTTON.select_inv_wait_sign}}\\\" type=\\\"default\\\"></dx-button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </ng-container>\\r\\n\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"row invoice-form\\\" *ngIf=\\\"isPXKDaiLy || isPXKNB\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <!-- Mẫu hoá đơn -->\\r\\n          <dxi-item *ngIf=\\\"!isTT78\\\" dataField=\\\"invoice_release_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.invoice_releases, onValueChanged: templateChange, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{_translate.CONTROLL.LABEL.invoice_form }} {{_translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item *ngIf=\\\"isTT78\\\" dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <!-- Ngày hóa đơn, số hóa đơn -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n            <dxi-item dataField=\\\"invoice_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n              [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate , onValueChanged: changeDateTime}\\\"\\r\\n              [cssClass]=\\\"'max_left'\\\">\\r\\n              <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_date }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{ disabled: true}\\\" [cssClass]=\\\"'max_right'\\\">\\r\\n              <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Loại tiền, tỷ giá -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n            <dxi-item dataField=\\\"currency_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n              [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.currency_code }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{_translate.CONTROLL.LABEL.currency_code }} {{_translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <dxi-item dataField=\\\"currency_rate\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: '0,###.##'}\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.currency_rate }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n            <!-- Hình thức xuất -->\\r\\n            <dxi-item name=\\\"ht-xuat\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.export_form }}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-select-box [(value)]=\\\"frmData.status\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\"\\r\\n                  [disabled]=\\\"!configs.system_parameter.allow_keep_invoice_number\\\"></dx-select-box>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <!-- Số hóa đơn gốc -->\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button' *ngIf=\\\"isTT78 && isPXKDaiLy\\\">\\r\\n              <dxi-item name=\\\"origin-invoice-number\\\">\\r\\n                <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number_original}}\\\"></dxo-label>\\r\\n                <div *dxTemplate>\\r\\n                  <dx-text-box [(value)]=\\\"oldForm.invoice_number\\\" disabled=\\\"true\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"origin_btn_options\\\" cssClass='btn-small'>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n            <!-- MST kho nhận -->\\r\\n            <dxi-item *ngIf=\\\"isTT78 && !isPXKDaiLy\\\" dataField=\\\"buyer_tax_code\\\">\\r\\n              <dxo-label text=\\\"MST kho nhận\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Mã số thuế -->\\r\\n          <dxi-item *ngIf=\\\"isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item dataField=\\\"buyer_tax_code\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.tax_code }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Số hóa đơn gốc, hợp đồng -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isTT78 && !isPXKDaiLy\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n              <dxi-item name=\\\"origin-invoice-number\\\">\\r\\n                <dxo-label text=\\\"{{_translate.GRID.INVOICE.invoice_number_original}}\\\"></dxo-label>\\r\\n                <div *dxTemplate>\\r\\n                  <dx-text-box [(value)]=\\\"oldForm.invoice_number\\\" disabled=\\\"true\\\"></dx-text-box>\\r\\n                </div>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"origin_btn_options\\\" cssClass='btn-small'>\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n            <dxi-item dataField=\\\"transportation_contract\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.contract_number }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Lý do thay thế -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" cssClass='group-input-button'>\\r\\n            <dxi-item dataField=\\\"destroy_reason\\\">\\r\\n              <dxo-label text=\\\"Lý do thay thế\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\" message=\\\"Lý do thay thế {{_translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Xuất tại kho -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n            <dxi-item name=\\\"search-mst\\\" dataField=\\\"from_warehouse\\\" editorType=\\\"dxSelectBox\\\"\\r\\n              [editorOptions]=\\\"{items: wavehourses, onValueChanged: from_warehouseChange, displayExpr: 'name', valueExpr: 'id',searchEnabled:true}\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.from_warehouse }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{_translate.CONTROLL.LABEL.from_warehouse }} {{_translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"from_warehouse_btn_options\\\"\\r\\n              cssClass='btn-small'>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Địa chỉ kho xuất -->\\r\\n          <dxi-item *ngIf=\\\"isTT78  && !isPXKDaiLy\\\" itemType=\\\"group\\\">\\r\\n            <dxi-item dataField=\\\"shiping_point\\\">\\r\\n              <dxo-label text=\\\"Địa chỉ kho xuất\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\" message=\\\"Địa chỉ kho xuất {{_translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\"\\r\\n            *ngIf=\\\"configs.integrate_parameter.integrate_econtract && configs.integrate_parameter.integrate_econtract.is_delivery\\\">\\r\\n            <!-- Số điện thoại người vận chuyển -->\\r\\n            <dxi-item dataField=\\\"carrier_mobile\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.carrier_mobile }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\"\\r\\n                message=\\\"{{_translate.CONTROLL.LABEL.carrier_mobile }} {{_translate.VALIDATION.not_pattern}}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <!-- Email người vận chuyển -->\\r\\n            <dxi-item dataField=\\\"carrier_email\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.carrier_email }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.email\\\"\\r\\n                message=\\\"{{_translate.CONTROLL.LABEL.carrier_email }} {{_translate.VALIDATION.not_pattern}}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item *ngIf=\\\"isTT78\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n            <!-- Số bảng kê -->\\r\\n            <dxi-item dataField=\\\"list_number\\\">\\r\\n              <dxo-label text=\\\"Số bảng kê\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <!-- Ngày bảng kê -->\\r\\n            <dxi-item dataField=\\\"list_date\\\" [template]=\\\"'notifydate'\\\">\\r\\n              <dxo-label text=\\\"Ngày bảng kê\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n\\r\\n\\r\\n        <!-- Right -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <!-- Hợp đồng kinh tế số, ngày -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n            <dxi-item dataField=\\\"delivery_order_number\\\" [cssClass]=\\\"'max_left'\\\">\\r\\n              <dxo-label text=\\\"{{strTextHDKT}}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\" message=\\\"{{strTextHDKT}} {{_translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <dxi-item dataField=\\\"delivery_order_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n              [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\"\\r\\n              [cssClass]=\\\"'max_right'\\\">\\r\\n              <dxo-label text=\\\"{{strtextHDKTNgay}}\\\"></dxo-label>\\r\\n              <dxi-validation-rule *ngIf=\\\"isPXKDaiLy\\\" type=\\\"required\\\"\\r\\n                message=\\\"{{ strtextHDKTNgay }} {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Của -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item dataField=\\\"delivery_order_by\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.of }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Với -->\\r\\n          <dxi-item *ngIf=\\\"isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='vat-handle group-input-button'>\\r\\n            <dxi-item name=\\\"search-mkh\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.with }}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-autocomplete valueExpr=\\\"code\\\"\\r\\n                  placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\"\\r\\n                  [dataSource]=\\\"customer_codes\\\" [(value)]=\\\"frmData.customer_name\\\"\\r\\n                  (onItemClick)=\\\"customerCodeChoose($event)\\\" (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n                  <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                    <span>{{item.code}}: {{ item.name }}</span>\\r\\n                  </div>\\r\\n                </dx-autocomplete>\\r\\n              </div>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{_translate.CONTROLL.LABEL.with }} {{_translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"add_customer\\\" cssClass='btn-small'>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Về việc -->\\r\\n          <dxi-item *ngIf=\\\"!isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item dataField=\\\"delivery_order_content\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.delivery_order_content }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Email -->\\r\\n          <dxi-item *ngIf=\\\"!isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item [label]=\\\"{text: 'Email'}\\\"\\r\\n              [ngClass]=\\\"configs.system_parameter.view_bank_account_seller? 'vat layout_input' : ''\\\">\\r\\n              <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n                <div\\r\\n                  class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n                  <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                    <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                    </app-tag-input-email>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Email -->\\r\\n          <dxi-item *ngIf=\\\"isPXKDaiLy\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item [label]=\\\"{text: 'Email'}\\\"\\r\\n              [ngClass]=\\\"configs.system_parameter.view_bank_account_seller? 'vat layout_input' : ''\\\">\\r\\n              <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n                <div\\r\\n                  class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n                  <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                    <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                    </app-tag-input-email>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Người vận chuyển -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"isTT78 && !isPXKDaiLy\\\">\\r\\n            <dxi-item dataField=\\\"delivery_by\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.delivery_by }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule *ngIf=\\\"isPXKDaiLy\\\" type=\\\"required\\\"\\r\\n                message=\\\"{{_translate.CONTROLL.LABEL.delivery_by }} {{ _translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Hợp đồng số, Người vận chuyển -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isTT78 && isPXKDaiLy\\\">\\r\\n            <dxi-item dataField=\\\"delivery_by\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.delivery_by }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule *ngIf=\\\"isPXKDaiLy\\\" type=\\\"required\\\"\\r\\n                message=\\\"{{_translate.CONTROLL.LABEL.delivery_by }} {{ _translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <dxi-item dataField=\\\"transportation_contract\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.contract_number }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Phương thức vận chuyển -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item dataField=\\\"transportation_method\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.transportation_method }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{_translate.CONTROLL.LABEL.transportation_method }} {{_translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Nhập tại kho -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='group-input-button'>\\r\\n            <dxi-item dataField=\\\"to_warehouse\\\" editorType=\\\"dxSelectBox\\\"\\r\\n              [editorOptions]=\\\"{items: wavehourses, onValueChanged: to_warehouseChange, displayExpr: 'name', valueExpr: 'id',searchEnabled:true}\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.to_warehouse }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{_translate.CONTROLL.LABEL.to_warehouse }} {{_translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"button\\\" alignment=\\\"left\\\" [buttonOptions]=\\\"to_warehouse_btn_options\\\"\\r\\n              cssClass='btn-small'>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Địa chỉ kho nhập -->\\r\\n          <dxi-item *ngIf=\\\"isTT78  && !isPXKDaiLy\\\" itemType=\\\"group\\\">\\r\\n            <dxi-item dataField=\\\"place_of_delivery\\\">\\r\\n              <dxo-label text=\\\"Địa chỉ kho nhập\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\" message=\\\"Địa chỉ kho nhập {{_translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Ghi chú -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat invoice-note\\\" dataField=\\\"note\\\">\\r\\n              <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.note }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Trường mở rộng -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\" [formData]=\\\"frmData\\\" [customerTempt]=\\\"customerTempt\\\"\\r\\n              [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'invoice_options'\\\"></app-form-extend>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n      </dxi-item>\\r\\n      <div *dxTemplate=\\\"let d of 'notifydate'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.list_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\" [displayFormat]=\\\"'dd/MM/yyyy'\\\"\\r\\n          [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">Bạn có muốn cập nhật lại dữ liệu vào danh mục khách hàng không?</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"Cập nhật\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"Hủy\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \"::ng-deep .vat.invoice-number-create-invoice input{color:red;font-weight:bold}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code:focus{outline:none}.tmr{display:flex;flex-wrap:nowrap;padding:0 !important}::ng-deep .btn-small{flex:unset !important}\\n\"","import { Component, OnInit, Input, Output, EventEmitter, OnDestroy, ViewChildren, AfterViewInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { Library, Helper, AuthService, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { pattern } from '@config/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { AddCustomerComponent } from '@shared/index';\r\nimport { ChooseHdckComponent } from '@modules/handle-invoice/components/choose-hdck/choose-hdck.component';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { Wavehourse } from '@modules/products/shared';\r\nimport { AddWavehourseComponent } from '@shared/modules/some/components/add-wavehourse/add-wavehourse.component';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport * as _ from 'lodash';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n\r\n\r\n@Component({\r\n  selector: 'replace-vat-form-invoice',\r\n  templateUrl: './replace-form-invoice.component.html',\r\n  styleUrls: ['./replace-form-invoice.component.scss']\r\n})\r\nexport class ReplaceFormInvoiceComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  routeSub: Subscription;\r\n  @ViewChild(FormExtendComponent) formExtend: FormExtendComponent;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @Input() wavehourses: any;\r\n  @Input() ttDaXuatHoaDon: boolean = false;\r\n  @Input() frmData: any;\r\n  @Input() dataSource: any;\r\n  @Input() oldForm: any;\r\n  @Input() type: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() fileData: any;\r\n  @Input() extentionGrid: any;\r\n  @Input() isShowButtonWaiteSign: boolean;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('adjustmentObjectChange') adjustmentObject = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  @Output('onTemplateTT78TypeChange') onTemplateTT78TypeChange = new EventEmitter<any>();\r\n  @Input() infoDangKy: any;\r\n  @Input() isTT78: boolean;\r\n  @Input() _oTemplateTT78: any;\r\n  bsModalRef: BsModalRef;\r\n  select: any = {};\r\n  template_temp: any;\r\n  pattern = pattern;\r\n  tax_codes: any = [];\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  minNgayVB: string;\r\n  maxNgayVB: string;\r\n  configs: any = {};\r\n  _translate: any;\r\n  wavehourse: any;\r\n  emails: any = [];\r\n  private arrEmail: any = [];\r\n  // thay đổi disable của 3 input customer_name, buyer_name, buyer_address\r\n  formItems = [];\r\n  customForms = [];\r\n  customerTempt = {};\r\n  tod: any = {};\r\n  disableInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuatOptions = [];\r\n  showPopup: boolean = false;\r\n  customerCurent: any = {};\r\n  isShowBanGiaoXe: boolean;\r\n  isShowBaoDuongXe: boolean;\r\n  dataTaxCode: any;\r\n  tax_code_search: any;\r\n  strtextHDKTNgay: any;\r\n  strTextHDKT: any;\r\n  isPXKDaiLy = false\r\n  isPXKNB = false\r\n  loaiHoaDon: any;\r\n  isShowToKhai = false;\r\n  origin_btn_options = {\r\n    text: '', icon: 'assets/img/icons/Xem.png', type: 'default',\r\n    onClick: () => {\r\n      if (this.oldForm.template_code.indexOf('02GTTT') >= 0 || this.oldForm.template_code == \"2\" || this.oldForm.template_code.indexOf('07KPTQ') >= 0) {\r\n        window.open(`/system/sale-invoice/${this.oldForm.id}`, '_blank');\r\n      } else {\r\n        if (this.loaiHoaDon == \"03XKNB\" || this.loaiHoaDon == sEnum.loaihoadon.HGDL04) {\r\n          if (this.loaiHoaDon == \"03XKNB\") {\r\n            window.open(`/system/transport-invoice/${this.oldForm.id}`, '_blank');\r\n          } else {\r\n            window.open(`/system/agent-invoice/${this.oldForm.id}`, '_blank');\r\n          }\r\n        } else {\r\n          window.open(`/system/vat-invoice/${this.oldForm.id}`, '_blank');\r\n        }\r\n      }\r\n    }\r\n  };\r\n  add_customer = {\r\n    text: \"\",\r\n    icon: \"assets/img/icons/Them.png\",\r\n    type: \"default\",\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false,\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n          if (customer.bank_account_number) {\r\n            this.frmData.bank_account_number = customer.bank_account_number;\r\n          }\r\n          if (customer.bank_name) {\r\n            this.frmData.bank_name = customer.bank_name;\r\n          }\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n  mst_btn_options = {\r\n    text: '', icon: 'assets/img/icons/Them.png', type: 'default',\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n          if (customer.bank_account_number) {\r\n            this.frmData.bank_account_number = customer.bank_account_number;\r\n          }\r\n          if (customer.bank_name) {\r\n            this.frmData.bank_name = customer.bank_name;\r\n          }\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n  from_warehouse_btn_options = {\r\n    text: \"\",\r\n    icon: \"assets/img/icons/Them.png\",\r\n    type: \"default\",\r\n    onClick: () => {\r\n      this.wavehourse = new Wavehourse();\r\n      this.wavehourse.order = this.wavehourses.length + 1;\r\n      const initialState = {\r\n        wavehourse: this.wavehourse,\r\n        onSave: (wavehourse) => {\r\n          this.wavehourse = wavehourse;\r\n          this.wavehourses.unshift(this.wavehourse);\r\n          this.frmData.from_warehouse = this.wavehourse.id;\r\n          this.frmData.from_warehouse_name = this.wavehourse.name;\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddWavehourseComponent, {\r\n        class: 'second child-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }\r\n  };\r\n  to_warehouse_btn_options = {\r\n    text: \"\",\r\n    icon: \"assets/img/icons/Them.png\",\r\n    type: \"default\",\r\n    onClick: () => {\r\n      this.wavehourse = new Wavehourse();\r\n      this.wavehourse.order = this.wavehourses.length + 1;\r\n      const initialState = {\r\n        wavehourse: this.wavehourse,\r\n        onSave: (wavehourse) => {\r\n          this.wavehourse = wavehourse;\r\n          this.wavehourses.unshift(this.wavehourse);\r\n          this.frmData.to_warehouse = this.wavehourse.id;\r\n          this.frmData.to_warehouse_name = this.wavehourse.name;\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddWavehourseComponent, {\r\n        class: 'second child-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private authService: AuthService,\r\n    private customersService: CustomersService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loaiHoaDon = this.route.snapshot.data.type;\r\n    if (this.loaiHoaDon == '03XKNB')\r\n      this.isPXKNB = true;\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n    if (this.isPXKDaiLy) {\r\n      this.strTextHDKT = this._translate.CONTROLL.LABEL.deconomic_contract_number;\r\n      this.strtextHDKTNgay = \"Hợp đồng kinh tế ngày\";\r\n    } else {\r\n      this.strTextHDKT = this._translate.CONTROLL.LABEL.delivery_order_number;\r\n      this.strtextHDKTNgay = this._translate.CONTROLL.LABEL.date;\r\n    }\r\n    this.minNgayVB = moment(this.oldForm.invoice_date).format('YYYY-MM-DD');\r\n    this.maxNgayVB = moment(new Date()).format('YYYY-MM-DD');\r\n    this.configs = this.authService.getConfigs();\r\n\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.currency_codes = data.init[1].DM_LOAI_TIEN;\r\n      this.select.customer_types = data.init[1].DM_NHOM_KHACH_HANG;\r\n      this.select.export_places = data.init[1].DM_NOI_XUAT_HOA_DON;\r\n      this.select.list_bank_account_seller = data.init[1].DM_TAI_KHOAN_NGAN_HANG;\r\n      this.select.list_bank_account_seller.forEach(item => {\r\n        item.name_display = item.code + ': ' + item.name;\r\n      });\r\n      this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate, this.frmData.status);\r\n      if (this.configs.system_parameter.allow_keep_invoice_number === false) {\r\n        this.htXuatOptions = this.htXuatOptions.filter(e => e.code !== sEnum.hinhThucXuat.XuatChoKy);\r\n      }\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        temptTT78 = data.init[0].filter(item => item.template_type !== 'HOA_DON_KHOI_TAO_TU_MAY_TINH_TIEN' && item.template_type !== 'PHIEU_THU_MAY_TINH_TIEN');\r\n\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (Number.parseInt(this.frmData.invoice_number) > 0) {\r\n            if (this.frmData.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.frmData.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n        if (this.frmData.id)\r\n          this.changeTemplateInvoice(this.frmData.invoice_date);\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n      }\r\n    });\r\n    this.select.customer_object_codes = VSelectBoxService._customerObject(this._translate);\r\n    this.select.adjustment_objects = [];\r\n\r\n    // Set disabled cho đơn vị tổ chức\r\n    this.setDisabledByCustomer_object_code(this.frmData.customer_object_code);\r\n\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n\r\n    // Khởi tạo ban đầu\r\n    this.extentionGrid.ma_hang = false;\r\n    this.extentionGrid.so_lo = false;\r\n    this.extentionGrid.han_dung = false;\r\n    this.extentionGrid.nuoc_san_xuat = false;\r\n    this.extentionGrid.don_hang_hop_dong = false;\r\n    this.extentionGrid.ma_quan_ly = false;\r\n\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n            this.isShowBanGiaoXe = true;\r\n          else\r\n            this.isShowBanGiaoXe = false;\r\n          if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n            this.isShowBaoDuongXe = true;\r\n          else\r\n            this.isShowBaoDuongXe = false;\r\n          // Nếu là mẫu html\r\n          if (item.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe)\r\n            this.isShowToKhai = true;\r\n          else\r\n            this.isShowToKhai = false;\r\n          this.template_temp = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n            this.isShowBanGiaoXe = true;\r\n          else\r\n            this.isShowBanGiaoXe = false;\r\n          if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n            this.isShowBaoDuongXe = true;\r\n          else\r\n            this.isShowBaoDuongXe = false;\r\n          // Nếu là mẫu html\r\n          if (item.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe)\r\n            this.isShowToKhai = true;\r\n          else\r\n            this.isShowToKhai = false;\r\n          this.template_temp = item;\r\n        }\r\n      });\r\n    }\r\n\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n  }\r\n\r\n  ////// Tạo form mở rộng\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (const key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.invoice_options = _dulieumorong;\r\n    });\r\n  }\r\n\r\n  formDuLieuMoRong(item) {\r\n    this.customForms = [];\r\n    this.customerTempt = {};\r\n    Helper.resetObject(this.formItems);\r\n    if (item.fields && item.fields.length > 0) {\r\n      const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n      if (_arrayGrid && _arrayGrid.length > 0) {\r\n        this.extentionGrid.ma_hang = false;\r\n        this.extentionGrid.so_lo = false;\r\n        this.extentionGrid.han_dung = false;\r\n        this.extentionGrid.nuoc_san_xuat = false;\r\n        this.extentionGrid.don_hang_hop_dong = false;\r\n        this.extentionGrid.ma_quan_ly = false;\r\n        for (let i = 0; i < _arrayGrid.length; i++) {\r\n          const column = _arrayGrid[i]['name'];\r\n          const value = _arrayGrid[i]['is_show'];\r\n          const _ma = VStringService._convertToViKdau(column);\r\n          this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n        }\r\n      }\r\n      let _dulieumorong = _.cloneDeep(item.fields).filter(x => x.type === '4');\r\n      const invoice_options = this.frmData.invoice_options;\r\n\r\n      if (invoice_options.length > 0) {\r\n        _dulieumorong = _dulieumorong.map((dl) => {\r\n          let option = invoice_options.find(x => x.code == dl.code)\r\n          if (option) {\r\n            dl.value = option.value;\r\n          }\r\n          return dl;\r\n        });\r\n      }\r\n\r\n      this.frmData.invoice_options = _dulieumorong;\r\n      if (_dulieumorong.length > 0) {\r\n        this.formExtend.createForm(this.customForms, _dulieumorong)\r\n      }\r\n      _dulieumorong.forEach(value => {\r\n        this.customerTempt[value.code] = value.value;\r\n      });\r\n    }\r\n    else {\r\n      this.frmData.invoice_options = [];\r\n      this.extentionGrid.ma_hang = false;\r\n      this.extentionGrid.so_lo = false;\r\n      this.extentionGrid.han_dung = false;\r\n      this.extentionGrid.nuoc_san_xuat = false;\r\n      this.extentionGrid.don_hang_hop_dong = false;\r\n      this.extentionGrid.ma_quan_ly = false;\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // this.listDxForm._results[1].readOnly = true;\r\n    this.formDuLieuMoRong(this.template_temp);\r\n    let arrD: any = document.querySelectorAll('.btn-small');\r\n    arrD.forEach((item) => {\r\n      item.parentElement.parentElement.style.flex = '0 0 0 ';\r\n    })\r\n    if (this.frmData.total_payment) {\r\n      const tien_chu = Helper.tienBangChu(Math.abs(this.frmData.total_payment), VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n      this.frmData.total_payment_in_word = this.invoiceService.docTienAm(this.frmData.total_payment, tien_chu, this.configs, this.frmData.currency_code);\r\n    }\r\n  }\r\n\r\n  // reset trường mở rộng\r\n  public resetTMR() {\r\n    this.formExtend.resetForm();\r\n    this.formExtend.resetOptions();\r\n  }\r\n\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n  public removeReadonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n      // item.instance.resetValues();\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n  setDisabledByCustomer_object_code(value) {\r\n    this.tod.customer_name = false;\r\n    this.tod.buyer_name = false;\r\n    this.tod.buyer_address = false;\r\n\r\n    switch (value) {\r\n      case 'DOANH_NGHIEP':\r\n        break;\r\n      case 'CA_NHAN':\r\n        this.frmData.customer_name = '';\r\n        this.tod.customer_name = true;\r\n        break;\r\n      case 'KHACH_LE':\r\n        this.frmData.customer_name = '';\r\n        this.frmData.buyer_address = '';\r\n        this.tod.customer_name = true;\r\n        this.tod.buyer_address = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  getHtXuatValue() {\r\n    return this.frmData.status;\r\n  }\r\n\r\n  // gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  // sự kiện\r\n  taxCodeKeyUp = (e) => {\r\n    const str = this.frmData.buyer_tax_code;\r\n    const len = str.length;\r\n    if (len >= 3) {\r\n      this.vatService.searchMST(str).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          const arr = [];\r\n          rs.data.customers.forEach(item => {\r\n            arr.push(item);\r\n          });\r\n          this.tax_codes = arr;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  taxCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.bank_account_number = customer.bank_account_number ? customer.bank_account_number : \"\";\r\n    this.frmData.bank_name = customer.bank_name ? customer.bank_name : \"\";\r\n\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerChanged = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.name) !== VStringService._getValueToString(this.frmData.customer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_person_name) !== VStringService._getValueToString(this.frmData.buyer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_mobile) !== VStringService._getValueToString(this.frmData.buyer_mobile)\r\n              || VStringService._getValueToString(this.customerCurent.business_address) !== VStringService._getValueToString(this.frmData.buyer_address)\r\n              || VStringService._getValueToString(this.customerCurent.email) !== VStringService._getValueToString(this.frmData.buyer_email)\r\n              || VStringService._getValueToString(this.customerCurent.bank_name) !== VStringService._getValueToString(this.frmData.bank_name)\r\n              || VStringService._getValueToString(this.customerCurent.bank_account_number) !== VStringService._getValueToString(this.frmData.bank_account_number)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n\r\n      });\r\n\r\n    }\r\n  };\r\n  customer_object_codeChange = (e) => {\r\n    this.setDisabledByCustomer_object_code(e.value);\r\n  };\r\n\r\n  templateChange = (e) => {\r\n    this.select.invoice_releases.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.template_id = item.template_id;\r\n        this._objTemplateSelect = item;\r\n        this.onTemplateTypeChange.emit(item);\r\n        if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n          this.isShowBanGiaoXe = true;\r\n        else\r\n          this.isShowBanGiaoXe = false;\r\n        if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n          this.isShowBaoDuongXe = true;\r\n        else\r\n          this.isShowBaoDuongXe = false;\r\n        if (!this._objTemplateSelect.is_discount) {\r\n          this.dataSource.items().forEach(item => {\r\n            item.discount = null;\r\n            item.amount_discount = null;\r\n          });\r\n\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonXangDau)\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n        }\r\n      }\r\n      // Nếu là mẫu html\r\n      this.formDuLieuMoRong(item);\r\n    })\r\n  };\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value == item.value) {\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.invoice_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateTT78TypeChange.emit(item);\r\n        if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n          this.isShowBanGiaoXe = true;\r\n        else\r\n          this.isShowBanGiaoXe = false;\r\n        if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n          this.isShowBaoDuongXe = true;\r\n        else\r\n          this.isShowBaoDuongXe = false;\r\n        if (item.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe)\r\n          this.isShowToKhai = true;\r\n        else\r\n          this.isShowToKhai = false;\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        if (!this._oTemplateTT78.is_discount) {\r\n          this.invoice_products.load().then((dataSource) => {\r\n            dataSource.forEach((item, index) => {\r\n              item.discount = null;\r\n              item.amount_discount = null;\r\n            });\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n          }\r\n        }\r\n\r\n        // Nếu là mẫu html\r\n        this.formDuLieuMoRong(item);\r\n      }\r\n    });\r\n  };\r\n  //\r\n  currencyCodeChange = (e) => {\r\n    if (this.frmData.currency_code === 'VND') {\r\n      this.frmData.currency_rate = null;\r\n    }\r\n    const tien_chu = Helper.tienBangChu(Math.abs(this.frmData.total_payment), VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n    this.frmData.total_payment_in_word = this.invoiceService.docTienAm(this.frmData.total_payment, tien_chu, this.configs, this.frmData.currency_code);\r\n  }\r\n\r\n  ///////////////\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  onSubmit() {\r\n  }\r\n\r\n  //\r\n  clone(): any {\r\n    const cloneObj = new (<any>this.constructor());\r\n    for (const attribut in this) {\r\n      if (typeof this[attribut] === 'object') {\r\n        cloneObj[attribut] = this.clone();\r\n      } else {\r\n        cloneObj[attribut] = this[attribut];\r\n      }\r\n    }\r\n    return cloneObj;\r\n  }\r\n\r\n  xuatMauBienBan() {\r\n    Library.showloading();\r\n    const inv = Object.assign({}, this.oldForm);\r\n    inv.doc_relate_date = this.frmData.doc_relate_date;\r\n    inv.doc_relate_symbol = this.frmData.doc_relate_symbol;\r\n    inv.destroy_reason = this.frmData.destroy_reason;\r\n    inv.adjustment_type = '1';\r\n    inv.auto_value_price = inv.auto_value_price === null ? false : inv.auto_value_price;\r\n    // inv.invoice_products =this.oldForm.invoice_products;\r\n    // this.dataSource.items().forEach(item => {\r\n    //   if (item.product_name)\r\n    //     inv.invoice_products.push(item);\r\n    // });\r\n    inv.invoice_files = [];\r\n    this.vatService.xuatMauBienBanThuHoi(inv).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n\r\n    // if (!this.frmData.doc_relate_symbol) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.doc_relate_symbol +\" \"+this._translate.VALIDATION.required, 'error');\r\n    // } else if (!this.frmData.doc_relate_date) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.doc_relate_date +\" \"+this._translate.VALIDATION.required, 'error');\r\n    // } else if (!this.frmData.destroy_reason) {\r\n    //   Library.notify(this._translate.CONTROLL.LABEL.destroy_reason +\" \"+this._translate.VALIDATION.required, 'error');\r\n    // } else {\r\n    //   const initialState = {\r\n    //     oldForm: this.oldForm,\r\n    //     frmData: this.frmData,\r\n    //     _objTemplateSelect: this._objTemplateSelect,\r\n    //     fileData: this.fileData,\r\n    //     onSave: (data) => {\r\n    //       console.log(data);\r\n    //       this.frmData.id = data.id;\r\n    //       this.frmData.invoice_date = data.invoice_date;\r\n    //       this.frmData.invoice_number = data.invoice_number;\r\n    //     }\r\n    //   };\r\n    //   this.bsModalRef = this.modalService.show(ReportCancelInvComponent, {\r\n    //     backdrop: 'static',\r\n    //     keyboard: false,\r\n    //     class: 'modal-lg full-modal',\r\n    //     initialState\r\n    //   });\r\n    // }\r\n\r\n  }\r\n\r\n  exportPlaceChange = (e) => {\r\n    const _obj = this.select.export_places.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.export_address = _obj.dia_chi;\r\n      this.frmData.export_place_name = _obj.name;\r\n    }\r\n  };\r\n  bankAccountSellerChange = (e) => {\r\n    const _obj = this.select.list_bank_account_seller.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.seller_bank_account_name = _obj.name;\r\n      // this.frmData.export_place_name = _obj.name;\r\n    } else {\r\n      this.frmData.seller_bank_account_name = '';\r\n    }\r\n  };\r\n\r\n  paymentMethodChange = (e) => {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.payment_method_view_name = _obj.name;\r\n    }\r\n  }\r\n  currencyRateChange = (e) => {\r\n    if (!this.isTT78)\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n    else\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n  };\r\n\r\n\r\n  showModalHdck() {\r\n    const initialState = {\r\n      invoiceNumberOrigin: this.oldForm.invoice_number,\r\n      invoiceDateOrigin: this.oldForm.invoice_date,\r\n      invoiceReleaseId: this.frmData.invoice_release_id,//this.oldForm.invoice_release_id,\r\n      onSave: (data) => {\r\n        this.frmData.status = sEnum.statusInv.ChoKy;\r\n        this.frmData.id = data.id;\r\n        this.frmData.invoice_date = data.invoice_date;\r\n        this.frmData.invoice_number = data.invoice_number;\r\n      }\r\n    };\r\n    this.bsModalRef = this.modalService.show(ChooseHdckComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-lg full-modal',\r\n      initialState\r\n    });\r\n  }\r\n\r\n  capNhatDmKhachHang() {\r\n    this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.buyer_tax_code);\r\n    this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n    this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n    this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.buyer_name);\r\n    this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.buyer_mobile);\r\n    this.customerCurent.business_address = VStringService._getValueToString(this.frmData.buyer_address);\r\n    this.customerCurent.email = VStringService._getValueToString(this.frmData.buyer_email);\r\n    this.customerCurent.bank_name = VStringService._getValueToString(this.frmData.bank_name);\r\n    this.customerCurent.bank_account_number = VStringService._getValueToString(this.frmData.bank_account_number);\r\n    const data = { customer: this.customerCurent };\r\n    this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n      if (response.status === 'success') {\r\n        this.showPopup = false;\r\n      } else {\r\n        Library.notify(response.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n    });\r\n\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n  updateCustomerInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  updateTaxcodeInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.tax_code) !== VStringService._getValueToString(this.frmData.buyer_tax_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n  changeDateTime = (e) => {\r\n    this.changeTemplateInvoice(e.value);\r\n  }\r\n\r\n  changeTemplateInvoice(strDate) {\r\n    if (this.isTT78) {\r\n      let year = \"\";\r\n      if (VStringService._getValueToString(strDate) != \"\")\r\n        year = VStringService._getValueToString(strDate).substring(4, 2);\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n      }\r\n      let templates = this.select.templatesTT78;\r\n      this.select.templatesTT78 = [];\r\n      if (templates && templates.length > 0) {\r\n        templates.forEach(item => {\r\n          if (VStringService._getValueToString(item.name) != \"\")\r\n            item.name = item.name.replace(item.name.substring(4, 2), year);\r\n          // for (const key in item) {\r\n          //   if (item.hasOwnProperty(key)) {\r\n          //     const value = item[key];\r\n          //     this._oTemplateTT78[key] = value;\r\n          //   }\r\n          // }\r\n          if (item.value === this.frmData.template_id) {\r\n            this.onTemplateTT78TypeChange.emit(item);\r\n            //  item.invoice_series = item.invoice_series.replace(item.invoice_series.substring(3, 1), year);\r\n            // this.frmData.invoice_series = item.invoice_series;\r\n            // this.frmData.template_code = item.template_code;\r\n          }\r\n          this.select.templatesTT78.push(item);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  disableTemplateInput() {\r\n    if (this.frmData.invoice_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  changeTaxCode(e) {\r\n    this.tax_code_search = e.value\r\n  }\r\n  searchTaxCode() {\r\n    Library.showloading();\r\n    if (!this.tax_code_search) {\r\n      Library.notify(\"Vui lòng nhập mã số thuế!\", \"error\")\r\n    } else {\r\n      this.vatService.getInfoCompany(this.tax_code_search).subscribe(res => {\r\n        if (res.status == \"success\") {\r\n          this.dataTaxCode = res.data.customer;\r\n          this.frmData.customer_name = this.dataTaxCode.name;\r\n          this.frmData.buyer_address = this.dataTaxCode.business_address;\r\n        }\r\n      })\r\n    }\r\n    this.onFieldDataChanged();\r\n    setTimeout(() => {\r\n      Library.hideloading();\r\n    }, 1000);\r\n  }\r\n  from_warehouseChange = (e) => {\r\n    let _obj = this.wavehourses.filter(p => p.id == e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.from_warehouse_name = _obj.name;\r\n      this.frmData.shiping_point = _obj.address;\r\n    }\r\n  }\r\n  to_warehouseChange = (e) => {\r\n    let _obj = this.wavehourses.filter(p => p.id == e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.to_warehouse_name = _obj.name;\r\n      this.frmData.place_of_delivery = _obj.address;\r\n    }\r\n  }\r\n  allowEditAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"container-fluid\\\" style=\\\"margin-bottom: 0!important; padding-left: 0!important;\\\"\\r\\n  *ngIf=\\\"!isPXKDaiLy && !isPXKNB\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"pl-0 col-md-12\\\">\\r\\n      <div class=\\\"button-redirect\\\">\\r\\n        <ul class=\\\"nav nav-tabs\\\">\\r\\n          <li class=\\\"nav-item\\\">\\r\\n            <a class=\\\"nav-link active\\\" href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.BUTTON.report_replace}}</a>\\r\\n          </li>\\r\\n          <li class=\\\"nav-item\\\">\\r\\n            <a class=\\\"nav-link \\\" (click)=\\\"routeReport()\\\" href=\\\"javascript:void(0)\\\">\\r\\n              {{this.textReport}}\\r\\n            </a>\\r\\n          </li>\\r\\n        </ul>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<form (ngSubmit)=\\\"onSubmit()\\\">\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <!-- phần form thông tin -->\\r\\n    <replace-vat-form-invoice [ttDaXuatHoaDon]=\\\"ttDaXuatHoaDon\\\" [type]=\\\"1\\\" [frmData]=\\\"frmData\\\" [oldForm]=\\\"oldForm\\\" [dataSource]=\\\"dataSource\\\"\\r\\n      [invoice_products]=\\\"invoice_products\\\" [formatter]=\\\"formatter\\\" [fileData]=\\\"fileData\\\"\\r\\n      (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\" [extentionGrid]=\\\"extentionGrid\\\"\\r\\n      [isShowButtonWaiteSign]=\\\"isShowButtonWaiteSign\\\" [_oTemplateTT78]=\\\"_oTemplateTT78\\\" [isTT78]=\\\"isTT78\\\"\\r\\n      [wavehourses]=\\\"wavehourses\\\" [infoDangKy]=\\\"infoDangKy\\\"\\r\\n      (onTemplateTT78TypeChange)=\\\"onTemplateTT78TypeChange($event)\\\" [_objTemplateSelect]=\\\"_objTemplateSelect\\\">\\r\\n    </replace-vat-form-invoice>\\r\\n\\r\\n    <!-- <dx-button id=\\\"btn-chossen-hdck\\\" (click)=\\\"showModalHdck()\\\" icon=\\\"assets\\\\img\\\\icons\\\\GiuSo.png\\\"\\r\\n      text=\\\"Chọn hóa đơn chờ ký\\\" type=\\\"default\\\"></dx-button> -->\\r\\n\\r\\n    <!-- table product -->\\r\\n    <replace-vat-product-grip #child [dataSource]=\\\"dataSource\\\" [invoice_products]=\\\"invoice_products\\\"\\r\\n      [formatter]=\\\"formatter\\\" [oldForm]=\\\"oldForm\\\" [frmData]=\\\"frmData\\\" [extentionGrid]=\\\"extentionGrid\\\" [isTT78]=\\\"isTT78\\\"\\r\\n      [_oTemplateTT78]=\\\"_oTemplateTT78\\\" [_objTemplateSelect]=\\\"_objTemplateSelect\\\">\\r\\n    </replace-vat-product-grip>\\r\\n\\r\\n    <div class=\\\" table-footer\\\">\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_after_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.tong_tien, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-2\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-vat-table-footer\\\" dataField=\\\"total_amount_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.tien_thue, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-after-vat-table-footer\\\" dataField=\\\"amount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-4\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_without_discount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.thanh_tien_chua_ck, disabled: true}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <!-- vùng chọn file -->\\r\\n    <div class=\\\"row after-table\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <file-upload-multiple [fileData]=\\\"fileData\\\" (fileChange)=\\\"getFileData($event)\\\"></file-upload-multiple>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-2\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <!-- <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n             <dxi-item dataField=\\\"aaa\\\" [label]=\\\"{text: 'Tiền phí khác'}\\\" editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: '0,###'}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"on_currency_amount\\\"\\r\\n              [label]=\\\"{text: _translate.CONTROLL.LABEL.on_currency_amount}\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: '0,###', disabled: true}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"amount\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.amount}\\\"\\r\\n              editorType=\\\"dxNumberBox\\\" [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: true}\\\"></dxi-item>\\r\\n            <dxi-item *ngIf=\\\"isHdGTGT\\\" cssClass=\\\"vat money-pull-right\\\" dataField=\\\"amount_vat5\\\"\\r\\n              [label]=\\\"{text: _translate.CONTROLL.LABEL.amount_vat5}\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.tien_thue, disabled: true}\\\"></dxi-item>\\r\\n            <dxi-item *ngIf=\\\"isHdGTGT\\\" cssClass=\\\"vat money-pull-right\\\" dataField=\\\"amount_vat10\\\"\\r\\n              [label]=\\\"{text: _translate.CONTROLL.LABEL.amount_vat10}\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.tien_thue, disabled: true}\\\"></dxi-item>\\r\\n            <dxi-item cssClass=\\\"vat money-pull-right\\\" dataField=\\\"total_payment\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.amount_after_vat}\\\"\\r\\n              editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.tong_tien, onValueChanged: totalPaymentChange, disabled: true}\\\">\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form> -->\\r\\n        <div\\r\\n          *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY' && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY_THU_TIEN' && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n        ||(invoiceTemplateTT78 && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY' && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY_THU_TIEN' && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\"\\r\\n          class=\\\"vat money-pull-right\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.on_currency_amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.on_currency_amount\\\" tabIndex=\\\"-1\\\" format=\\\"0,###\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_amount_discount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_discount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_chiet_khau\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat5}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat5\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                (onValueChanged)=\\\"onNumberChange()\\\" [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat8}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat8\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                (onValueChanged)=\\\"onNumberChange()\\\" [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat10}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat10\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                (onValueChanged)=\\\"onNumberChange()\\\" [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat_other\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                (onValueChanged)=\\\"onNumberChange()\\\" [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_DANG_KIEM')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_DANG_KIEM'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.fees}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.registry_fee\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [format]=\\\"formatter.tong_tien\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_XANG_DAU')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_XANG_DAU'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_fee\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_TONG_HOP' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_CHUNG' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_VE'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_TONG_HOP' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_CHUNG' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertax}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_tax\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_TONG_HOP' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_CHUNG' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_VE'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_TONG_HOP' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_CHUNG' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_charge\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" [disabled]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div\\r\\n          *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\r\\n        || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')))\\\"\\r\\n          class=\\\"vat money-pull-right\\\">\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.surcharge}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_charge\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [format]=\\\"formatter.tong_tien\\\" (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                [(value)]=\\\"frmData.total_other\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [(value)]=\\\"frmData.other_fee\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.refund_fee}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.money_ticket_return\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_fare_after_tax}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_ticket_with_vat\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [disabled]=\\\"checkDisabledTotalPaymentInWord()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n            || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\"\\r\\n              class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertax}}</div>\\r\\n            <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')\\r\\n            || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\"\\r\\n              class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertaxair}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_tax\\\" [format]=\\\"formatter.tong_tien\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                tabIndex=\\\"-1\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [format]=\\\"formatter.tong_tien\\\" (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                [(value)]=\\\"frmData.other_fee\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_fare}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_ticket\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [disabled]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_other\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [disabled]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n        </div>\\r\\n      </div>\\r\\n      <div\\r\\n        *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\r\\n      || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')))\\\"\\r\\n        class=\\\"col-md-12\\\" style=\\\"margin:10px 0 !important;\\\">\\r\\n        <h3 class=\\\"font-weight-bold\\\">{{ _translate.CONTROLL.LABEL.ticketing_service_fee}}</h3>\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\">\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 52%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.ticketing_service_charge}}\\r\\n              </div>\\r\\n              <div style=\\\"width: 48%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-number-box [(value)]=\\\"frmData.money_service_ticket\\\" format=\\\"#,###\\\" tabIndex=\\\"-1\\\"\\r\\n                  (onValueChanged)=\\\"onVatChange()\\\"></dx-number-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\" style=\\\"max-width: 23%\\\">\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.tax_GTGT}}</div>\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-select-box [(value)]=\\\"frmData.vat_service_ticket\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"\\r\\n                  [items]=\\\"select.vats\\\" (onValueChanged)=\\\"onVatChange()\\\"></dx-select-box>\\r\\n\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\" style=\\\"max-width: 19%\\\">\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat}}</div>\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-number-box [(value)]=\\\"frmData.total_vat_service_ticket\\\" format=\\\"#,###\\\" tabIndex=\\\"-1\\\"\\r\\n                  [disabled]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-4 \\\" style=\\\"max-width: 33%\\\">\\r\\n            <div class=\\\"prt-1 money-pull-right\\\">\\r\\n              <div class=\\\"dx-field\\\" style=\\\"width: 395px\\\">\\r\\n                <div style=\\\"width: 44.3%\\\" class=\\\"dx-field-label\\\">{{\\r\\n                  _translate.CONTROLL.LABEL.total_after_tax_service_charge}}</div>\\r\\n                <div style=\\\"width: 55.7%\\\" class=\\\"dx-field-value\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.total_service_ticket_with_vat\\\" format=\\\"#,###\\\" tabIndex=\\\"-1\\\"\\r\\n                    [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\"></dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Hóa đơn bán hàng ND 92 -->\\r\\n      <div class=\\\"col-md-8\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_exemption_decree\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Đã giảm </p>\\r\\n          <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.text_exemption_decree\\\"\\r\\n            [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> tương ứng 30% mức tỷ lệ để tính thuế giá trị gia tăng theo Nghị\\r\\n            quyết số 406/NQ-UBTVQH15</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Hóa đơn bán hàng NQ 43 -->\\r\\n      <!-- Tỷ lệ % doanh thu -->\\r\\n      <div class=\\\"col-md-8\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Tỷ lệ % trên doanh thu </p>\\r\\n\\r\\n          <div class=\\\"toggle normal\\\" style=\\\"display: flex; align-items: center; margin-top: -6px;\\\">\\r\\n            <img id=\\\"link14\\\" style=\\\"cursor: pointer;padding-left: 2px;padding-right: 7px\\\"\\r\\n              src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" (click)=\\\"guideSales()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n          </div>\\r\\n          <dx-popover target=\\\"#link14\\\" position=\\\"top\\\" [width]=\\\"350\\\" [(visible)]=\\\"isDisplayGuideSale\\\">\\r\\n            <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n              <p>- 1% : Phân phối, cung cấp hàng hóa dịch vụ</p>\\r\\n              <p>- 5% : Dịch vụ xây dựng không bao thầu nguyên vật liệu</p>\\r\\n              <p>- 3% : Sản xuất, vận tải, dịch vụ có gắn với hàng hóa, xây dựng có bao thầu nguyên vật liệu</p>\\r\\n              <p>- 2% : Hoạt động kinh doanh khác</p>\\r\\n            </div>\\r\\n          </dx-popover>\\r\\n\\r\\n          <dx-number-box [width]=\\\"50\\\" [(value)]=\\\"frmData.sales_percentage\\\"\\r\\n            (onValueChanged)=\\\"onChangeSalePercen($event)\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> %</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Đã giảm 20% -->\\r\\n      <div class=\\\"col-md-7\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Đã giảm </p>\\r\\n          <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.money_resolution_43\\\"\\r\\n            [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> {{ _translate.THONG_TIN.tinh_thue_nq101}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-5\\\" style=\\\"margin-top: 10px\\\">\\r\\n        <div class=\\\"vat money-pull-right\\\">\\r\\n          <!-- Tổng tiền giảm trừ không chịu thuế -->\\r\\n          <div class=\\\"dx-field\\\" *ngIf=\\\"isHdGTGT\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_deduction_not_taxable}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_deduction_not_taxable\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tổng tiền giảm trừ khác -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.other_total_deduction}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_total_deduction\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_payment\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                (onValueChanged)=\\\"totalPaymentChange($event)\\\"></dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"vat total-payment-in-word\\\">\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_payment_in_word}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-text-box [(value)]=\\\"frmData.total_payment_in_word\\\" [disabled]=\\\"!frmData.auto_value\\\"></dx-text-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\" *ngIf=\\\"!isPXKDaiLy && !isPXKNB\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" icon=\\\"{{_translate.ICONS.view}}\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" icon=\\\"{{_translate.ICONS.view}}\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"inChuyenDoi()\\\" icon=\\\"{{_translate.ICONS.print}}\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.print_conversion}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"isTuChoi\\\" (click)=\\\"xemlydotuchoi()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.reason_reject}}\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !isAccessExportInv\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.sign_approval}}\\\"\\r\\n            icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"eSubmit('TRINH_KY')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <!-- <button type=\\\"button\\\" (click)=\\\"test()\\\">Test</button> -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\" appScrollToInvalid\\r\\n            icon=\\\"{{_translate.ICONS.export_inv}}\\\" (click)=\\\"eSubmit('XUAT', true)\\\" type=\\\"default\\\"\\r\\n            validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" appScrollToInvalid\\r\\n            icon=\\\"{{_translate.ICONS.save}}\\\" (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\">\\r\\n          </dx-button>\\r\\n          <dx-button appBackButton type=\\\"default\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-12\\\" *ngIf=\\\"isPXKDaiLy || isPXKNB\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <!-- Xem trước PXK -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\"\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.preview_internal_transport }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Xem PXK -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\"\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.view_internal_transport }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- In chuyển đổi PXK -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"inChuyenDoi()\\\" [(icon)]=\\\"this._translate.ICONS.print\\\"\\r\\n            [text]=\\\"inChuyenDoiText()\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <!-- Thủ kho xuất ký (đang chờ biến cấu hình để bắt ràng buộc nếu biến đó là true thì k hiện nút này)-->\\r\\n          <dx-button disableDoubleClick (click)=\\\"thukhoxuatky()\\\" *ngIf=\\\"isPXKNB && isShowThuKhoXuatKy\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.pencil\\\" text=\\\"{{_translate.CONTROLL.BUTTON.warehouse_keeper_sign }}\\\"\\r\\n            type=\\\"default\\\"></dx-button>\\r\\n          <!-- Hủy lệnh điều động -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"isShowKyLenhDieuDong && isShowHuyLenhDD && isPXKNB\\\" (click)=\\\"huylenhdieudong()\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.delete\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel_maneuver_command }}\\\"\\r\\n            type=\\\"default\\\"></dx-button>\\r\\n          <!-- Ký lệnh điều động -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"isShowKyLenhDieuDong && isPXKNB\\\" (click)=\\\"submitlenhdieudong()\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.pencil\\\" text=\\\"{{_translate.CONTROLL.BUTTON.sign_maneuver_command }}\\\"\\r\\n            type=\\\"default\\\"></dx-button>\\r\\n          <!-- Xuất phiếu xuất kho -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet && isAccessExportInv\\\" appScrollToInvalid\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.export_internal_transport }}\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\"\\r\\n            (click)=\\\"eSubmit('XUAT')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <!-- Ghi tạm -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet\\\" appScrollToInvalid\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.save_temporary }}\\\" icon=\\\"assets\\\\img\\\\icons\\\\GhiTam.png\\\"\\r\\n            [disabled]=\\\"isDisable\\\" (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\">\\r\\n          </dx-button>\\r\\n          <!-- Tạo mới -->\\r\\n          <dx-button *ngIf=\\\"!showTraLai && !showKyDuyet\\\" text=\\\"{{_translate.CONTROLL.BUTTON.create_new }}\\\"\\r\\n            icon=\\\"assets\\\\img\\\\icons\\\\LapHD.png\\\" (click)=\\\"handleAddNew()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Trả lại -->\\r\\n          <!-- <dx-button *ngIf=\\\"showTraLai\\\" text=\\\"{{_translate.CONTROLL.BUTTON.return }}\\\"\\r\\n          icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"traLai()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button *ngIf=\\\"!ttDaXuatHoaDon && showKyDuyet\\\" text=\\\"Ký duyệt\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\"\\r\\n          (click)=\\\"eSubmit('XUAT')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"></dx-button> -->\\r\\n          <!-- Quay lại -->\\r\\n          <dx-button appBackButton type=\\\"default\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\"\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.close }}\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</form>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}.vat.total-payment-in-word .dx-field-label{width:12%}.vat.total-payment-in-word .dx-field-value{width:88% !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}#btn-chossen-hdck{margin-top:10px;margin-left:50%;margin-bottom:10px}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:25px}::ng-deep .mauhoadon .modal-content{width:67%}::ng-deep .mauhoadon43 .modal-content{width:72%}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild, OnDestroy, AfterViewInit, ChangeDetectorRef, ViewEncapsulation } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport * as moment from 'moment';\r\nimport { Base64 } from 'js-base64';\r\n\r\nimport { SocketService, AuthService, Library, Helper, VPreviewInvService, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { ReplaceProductGripComponent } from '../replace-product-grip/replace-product-grip.component';\r\nimport { ReplaceFormInvoiceComponent } from '../replace-form-invoice/replace-form-invoice.component';\r\nimport { ChooseHdckComponent } from '@modules/handle-invoice/components/choose-hdck/choose-hdck.component';\r\nimport { VatService, InvoiceModel } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String, StringBuilder } from 'typescript-string-operations';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { SendInvoicesComponent } from '@modules/handle-invoice/components/send-invoices/send-invoices.component';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport * as _ from 'lodash';\r\nimport { Observable } from 'rxjs';\r\nimport { RouterLibraryService } from '@shared/router/router-library.service';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { pattern } from '@config/index';\r\nimport { NotifyReduceTaxComponent } from '@shared/index';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-replace-invoice',\r\n  templateUrl: './replace-invoice.component.html',\r\n  styleUrls: ['./replace-invoice.component.scss']\r\n})\r\nexport class ReplaceInvoiceComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  @ViewChild(ReplaceProductGripComponent) productGrip: ReplaceProductGripComponent;\r\n  @ViewChild(ReplaceFormInvoiceComponent) formInvoice: ReplaceFormInvoiceComponent;\r\n\r\n  bsModalRef: BsModalRef;\r\n  bsModalHdckRef: BsModalRef;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  isShowKyLenhDieuDong: boolean;\r\n  isShowHuyLenhDD: boolean = false;\r\n  isCheckLenhDieuDong = false;\r\n  isRoleThuKhoXuatKy = false;\r\n  isDisable = false;\r\n  jsonProductFirst: any\r\n  // buttonBehavior = {\r\n  //   xuat: false,\r\n  //   ghiTam: false,\r\n  // };\r\n  frmData: InvoiceModel = new InvoiceModel(3);\r\n  oldForm: any;\r\n  total_payment: any;\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  is_multi_vat: any;\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  isShowThuKhoXuatKy: boolean;\r\n  formatter: any = {};\r\n  extentionGrid: any = {};\r\n  select: any = {};\r\n  _objTemplateSelect: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  tempKiFile = 0;\r\n  dataInvoice: any;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  isHdGTGT = true;\r\n  // danh sách data trong file\r\n  fileData: Array<any> = [];\r\n  configs: any;\r\n  _translate: any;\r\n  wavehourses: any\r\n  isTuChoi = false;\r\n  listDM: any;\r\n  isAccessExportInv = false;\r\n  private dataReport: any = [];\r\n  textReport: any;\r\n  valueChange: string;\r\n  invoicereleaseTempt: any;\r\n  nodeSign: any;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  isShowButtonWaiteSign: boolean = true;\r\n  _oTemplateTT78: any = {};\r\n  invoiceTemplateTT78: any;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  isPassNQ43: boolean = false;\r\n  isDisplayGuideSale: boolean = false;\r\n  invoices: any = [];\r\n  isPXKDaiLy = false;\r\n  isPXKNB = false;\r\n  loaiHoaDon: any;\r\n  showTraLai: boolean = false;\r\n  showKyDuyet: boolean = false;\r\n  isExportInvoice: boolean;\r\n  resultCompareData: boolean;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private routerLibrary: RouterLibraryService,\r\n    private confirmService: ConfirmService,\r\n    private spinner: NgxSpinnerService,\r\n    private configsService: ConfigsService,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status === 'DA_XUAT') {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let status;\r\n    if (!this.frmData.id && !this.frmData.invoice_number) {\r\n      status = 'THEM_MOI';\r\n    }\r\n    if (this.frmData.id && !this.frmData.invoice_number) {\r\n      status = 'GHI_TAM';\r\n    }\r\n    if (this.frmData.id && this.frmData.invoice_number) {\r\n      status = 'GIU_SO';\r\n    }\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (status === 'THEM_MOI') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTam(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamTT78(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else if (status === 'GHI_TAM') {\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else if (status === 'GIU_SO') {\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      // nodeSign: thẻ đc kí vào(vùng chữ kí số)\r\n      // InvoiceData: id của thẻ(vùng dữ liệu)\r\n      // ListSerialNumber\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    const sub = this.vatService.xuatHoaDon({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n      invoice_files: this.frmData.invoice_files\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.disablleScreen();\r\n        this.isExportInvoice = true;\r\n        this.isShowButtonWaiteSign = false;\r\n        this.fileData = this.frmData.invoice_files;\r\n        this.setDataSessionStorage(this.frmData);\r\n        if (this.isRoleThuKhoXuatKy && !this.frmData.warehouse_keeper_signed)\r\n          this.isShowThuKhoXuatKy = true;\r\n        if (this.configs.system_parameter.enable_send_wrong_process && this.isTT78) {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n          else\r\n            this.startProcess_TBSaiSot();\r\n        }\r\n        else\r\n          Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    // kết nối websocket\r\n    this.connectWebsocket();\r\n    let currentUsers = this.authService.getCurrentUser();\r\n    let listpermission = currentUsers.user.permissions.split(',');\r\n    let oThuKhoXuat = listpermission.filter(p => p == sEnum.permissions.ThuKhoXuatKy);\r\n    if (oThuKhoXuat.length > 0)\r\n      this.isRoleThuKhoXuatKy = true;\r\n    else\r\n      this.isRoleThuKhoXuatKy = false;\r\n    this.loaiHoaDon = this.route.snapshot.data.type;\r\n    if (this.loaiHoaDon == '03XKNB')\r\n      this.isPXKNB = true;\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n    this.configs = this.authService.getConfigs();\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    this.formatter.display_int = this.configs.system_parameter.display_int;\r\n    ///////\r\n    let isViewTT32 = false;\r\n    if (this.route.snapshot.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      if (data.init[5].length > 0) {\r\n        this.textReport = this._translate.CONTROLL.BUTTON.view_report;\r\n      } else {\r\n        this.textReport = this._translate.CONTROLL.BUTTON.create_report;\r\n      }\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.payment_method_names = data.init[1].DM_HINH_THUC_THANH_TOAN;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      if (this.infoDangKy) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n          this.isTT78 = true;\r\n      }\r\n      if (this.isTT78 == true && isViewTT32)\r\n        this.isTT78 = false;\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        temptTT78 = data.init[0];\r\n\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (data.init[4] && Number.parseInt(data.init[4].invoice_number) > 0) {\r\n            if (data.init[4].is_invoice_with_code != this.infoDangKy.is_invoice_with_code && data.init[4].xml_type != '1') {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == data.init[4].is_invoice_with_code);\r\n            }\r\n            // id mẫu tt78 k so sánh dk vs id mẫu tt32 nên mặc định mẫu là nhiều loại thuế suất để xuất dk cho mẫu 1 loại thuế suất\r\n            if (data.init[4].xml_type == '1')\r\n              this.is_multi_vat = true;\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n      }\r\n      if (data.status === 'thaythemoi') {\r\n        this.khoiTaoKhiThemMoi(data.init[4]);\r\n        this.oldForm = data.init[4];\r\n        this.wavehourses = data.init[6];\r\n      } else {\r\n        this.khoiTaoKhiSua(data.init[4]);\r\n        this.oldForm = data.init[4].origin;\r\n        this.wavehourses = data.init[6];\r\n      }\r\n      if (data.init[5].length > 0 && this.isTT78) {\r\n        let oReport = data.init[5][data.init[5].length - 1];\r\n        if (oReport)\r\n          this.frmData.destroy_reason = oReport.destroy_reason;\r\n      }\r\n      ///test\r\n      let ts = this.oldForm.template_code;\r\n      if (this.oldForm.template_code.indexOf('02GTTT') >= 0 || this.oldForm.template_code.indexOf('07KPTQ') >= 0 || this.oldForm.template_code == \"2\") {\r\n        this.isHdGTGT = false;\r\n      }\r\n      // mẫu nhiều loại thuế suất ko\r\n      if (!this.isTT78) {\r\n        this.select.invoice_releases.some(item => {\r\n          if (item.value === this.oldForm.invoice_release_id) {\r\n            this.is_multi_vat = item.is_multi_vat;\r\n            this._objTemplateSelect = item;\r\n            return true;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.select.templatesTT78.forEach(item => {\r\n          if (item.value === this.oldForm.template_id) {\r\n            this.invoiceTemplateTT78 = item;\r\n          }\r\n        });\r\n        this.select.templatesTT78.some(item => {\r\n          if (item.value === this.oldForm.template_id) {\r\n            this.is_multi_vat = item.is_multi_vat;\r\n            for (const key in item) {\r\n              if (item.hasOwnProperty(key)) {\r\n                this._oTemplateTT78[key] = item[key];\r\n              }\r\n            }\r\n            return true;\r\n          }\r\n        });\r\n      }\r\n\r\n      this.dataInvoice = data.init[4];\r\n    });\r\n    const currentUser = this.authService.getCurrentUser();\r\n    if (currentUser && currentUser.account && (currentUser.account.tax_code == \"0102519041-999\" || currentUser.account.tax_code == \"8888888803\" || currentUser.account.tax_code == \"9999999671\"))\r\n      this.isPassNQ43 = true;\r\n    const listpermissions = currentUser.user.permissions.split(',');\r\n    let obj2 = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (obj2.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        // Helper.dowloadFile('test.xml', 'xml', data.Data.Content);\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          if (this.ttDaXuatHoaDon)\r\n            this.sendData_TBSaiSot(data.Data.Content);\r\n          else\r\n            this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          if (this.ttDaXuatHoaDon)\r\n            this.getXml_TBSaiSot();\r\n          else {\r\n            this.frmData.issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        } else {\r\n          this.frmData.invoice_files.forEach(item => {\r\n            if (item.file_name === data.Data.Name) {\r\n              item.file_content = data.Data.Content;\r\n            }\r\n          });\r\n          this.tempKiFile++;\r\n          if (this.tempKiFile === this.frmData.invoice_files.length) {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  khoiTaoKhiThemMoi(data) {\r\n    // khởi tạo mới lưới\r\n    const inv_products = this.frmData.setInvoice_products_data(data.invoice_products);\r\n    inv_products.forEach(item => {\r\n      item.vat = item.vat != null ? item.vat.toString() : null;\r\n    });\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: inv_products\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    // tạo mới đối tượng file\r\n    this.fileData = [];\r\n\r\n\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormThayThe(data);\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0);\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          this.invoicereleaseTempt = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      if (this.select.templatesTT78.length) {\r\n        this.select.templatesTT78.forEach(item => {\r\n          if (item.value === this.frmData.template_id) {\r\n            this.invoiceTemplateTT78 = item;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n  }\r\n\r\n  checkDisabledTotalPaymentInWord() {\r\n\r\n    if (this.frmData.adjustment_form === 'THONG_TIN' && this.frmData.adjustment_object === 'TIEN_CHU') {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    console.log(data);\r\n    const inv_products = this.frmData.setInvoice_products_data(data.invoice_products);\r\n    inv_products.forEach(item => {\r\n      item.vat = item.vat != null ? item.vat.toString() : null;\r\n    });\r\n    // khởi tạo lưới từ dữ liệu sửa\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: inv_products\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    this.frmData.adjustment_type = 3;\r\n    if (VStringService._getValueToString(this.frmData.approve_status) === sEnum.statusApprove.TuChoi) {\r\n      this.isTuChoi = true;\r\n    }\r\n    // lấy file\r\n    this.fileData = data.invoice_files || [];\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          this.invoicereleaseTempt = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.invoiceTemplateTT78 = item;\r\n        }\r\n      });\r\n    }\r\n\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n    if (this.frmData.status === sEnum.statusInv.DaXuat || this.frmData.status === sEnum.statusInv.ChoKy)\r\n      this.isShowButtonWaiteSign = false;\r\n  }\r\n\r\n\r\n  updateSomeTotalInput(e) {\r\n    \r\n  }\r\n\r\n  fillAutoInput(e) {\r\n    // this.frmData.auto_value = e;\r\n  }\r\n\r\n  // Lấy data khi chọn file đính kèm bảng kê\r\n  getFileData(fileData) {\r\n    this.fileData = fileData;\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number === 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  // sự kiện form\r\n  totalPaymentChange = (e) => {\r\n    if (this.frmData.auto_value)\r\n      this.frmData.amount_after_vat = this.frmData.total_payment;\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    const tien_chu = Helper.tienBangChu(Math.abs(e.value), VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n    this.frmData.total_payment_in_word = this.invoiceService.docTienAm(e.value, tien_chu, this.configs, this.frmData.currency_code);\r\n  };\r\n\r\n  // Các hàm chức năng chính\r\n\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n      let data = this.vatService.taodulieuXemTruocMau(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    let data = this.vatService.taodulieuXemMau(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    const data = this.vatService.taodulieuInChuyenDoi(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n\r\n  ghiTam(data) {\r\n    this.isDisable = true\r\n    if (this.frmData.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.edit(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n            } else {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            } else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editTT78(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n            } else {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            } else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.ghiTam(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            } else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.ghiTamTT78(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            } else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuatChoKy(data) {\r\n    Library.showloading();\r\n    if (!this.isTT78) {\r\n      const sub = this.vatService.xuatChoKy(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.isShowButtonWaiteSign = false;\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      const sub = this.vatService.xuatChoKyTT78(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.isShowButtonWaiteSign = false;\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatHoaDon(data) {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      if (this.frmData.invoice_files.length) {\r\n        this.frmData.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.frmData.invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n      }\r\n    }\r\n  }\r\n\r\n  _validForm(isOnlyCheckAm) {\r\n    let _isValid = true;\r\n    let invoice_products = this.frmData.invoice_products.filter(item => item.product_name);\r\n    let invoice_products_exchange_rate = this.frmData.invoice_products.filter(item => item.product_exchange_rate);\r\n    let indexErr = this.frmData.invoice_products.findIndex(item => !item.product_exchange_rate);\r\n    if ((this.frmData.amount_vat5 < 0 || this.frmData.amount_vat10 < 0 || this.frmData.total_payment < 0)\r\n      && !this.configs.system_parameter.allow_export_with_negative) {\r\n      Library.notify(this._translate.NOTIFY.discount_same_vat, 'error');\r\n      return false;\r\n    }\r\n    if (isOnlyCheckAm) {\r\n      if (this.checkProductCode())\r\n        return true;\r\n      else\r\n        return false;\r\n    }\r\n    if (this.frmData.currency_code && this.frmData.currency_code != \"VND\") {\r\n      if (invoice_products_exchange_rate && invoice_products_exchange_rate.length > 0) {\r\n        if (invoice_products_exchange_rate.length !== invoice_products.length) {\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(indexErr, 'product_exchange_rate'));\r\n          Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (!this.frmData.currency_rate) {\r\n          this.formInvoice.form.instance.getEditor('currency_rate').focus();\r\n          Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n   \r\n    if (this.frmData.customer_object_code === 'DOANH_NGHIEP' && this.frmData.template_code != '6') {\r\n      if (!this.frmData.customer_name) {\r\n        Library.notify(this._translate.CONTROLL.LABEL.customer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        if (this.formInvoice.form.instance.getEditor('customer_name')) {\r\n          this.formInvoice.form.instance.getEditor('customer_name').focus();\r\n        }\r\n        return false;\r\n      }\r\n      if (!this.frmData.buyer_address) {\r\n        Library.notify(this._translate.CONTROLL.LABEL.address + ' ' + this._translate.VALIDATION.required, 'error');\r\n        if (this.formInvoice.form.instance.getEditor('customer_name')) {\r\n          this.formInvoice.form.instance.getEditor('customer_name').focus();\r\n        }\r\n        return false;\r\n      }\r\n      if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n        if (!this.frmData.nationality) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('nationality').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_date').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_expiration_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n        let passport_expiration_date = new Date(this.frmData.passport_expiration_date);\r\n        let passport_date = new Date(this.frmData.passport_date);\r\n        if (passport_expiration_date <= passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + 'nhỏ hơn ' + this._translate.CONTROLL.LABEL.passport_date, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    if (this.frmData.customer_object_code === 'CA_NHAN' && this.frmData.template_code != '6') {\r\n      if (!this.frmData.buyer_name) {\r\n        if (this.formInvoice.form.instance.getEditor('buyer_name')) {\r\n          this.formInvoice.form.instance.getEditor('buyer_name').focus();\r\n        }\r\n        Library.notify(this._translate.CONTROLL.LABEL.buyer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (!this.frmData.buyer_address) {\r\n        if (this.formInvoice.form.instance.getEditor('buyer_address')) {\r\n          this.formInvoice.form.instance.getEditor('buyer_address').focus();\r\n        }\r\n        Library.notify(this._translate.CONTROLL.LABEL.address + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n        if (!this.frmData.nationality) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('nationality').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_date').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_expiration_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n        let passport_expiration_date = new Date(this.frmData.passport_expiration_date);\r\n        let passport_date = new Date(this.frmData.passport_date);\r\n        if (passport_expiration_date <= passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + 'nhỏ hơn ' + this._translate.CONTROLL.LABEL.passport_date, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    if (this.frmData.customer_object_code === 'KHACH_LE' && this.frmData.template_code != '6') {\r\n      if (!this.frmData.buyer_name) {\r\n        if (this.formInvoice.form.instance.getEditor('buyer_name')) {\r\n          this.formInvoice.form.instance.getEditor('buyer_name').focus();\r\n        }\r\n        Library.notify(this._translate.CONTROLL.LABEL.buyer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n        if (!this.frmData.nationality) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('nationality').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_date').focus();\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_expiration_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n        let passport_expiration_date = new Date(this.frmData.passport_expiration_date);\r\n        let passport_date = new Date(this.frmData.passport_date);\r\n        if (passport_expiration_date <= passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + 'nhỏ hơn ' + this._translate.CONTROLL.LABEL.passport_date, 'error');\r\n          this.formInvoice.form.instance.getEditor('passport_expiration_date').focus();\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    if (!this.frmData.total_payment && this.frmData.total_payment !== 0) {\r\n      Library.notify(\"Tổng tiền hóa đơn không được để trống\", 'error');\r\n      return false;\r\n    }\r\n    if (this.isTT78) {\r\n      if (this.frmData.destroy_reason === null || VStringService._getValueToString(this.frmData.destroy_reason) == \"\") {\r\n        this.formInvoice.form.instance.getEditor('destroy_reason').focus();\r\n        Library.notify(\"Lý do thay thế\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n    }\r\n    const _lst = this.frmData.invoice_products.filter(p => p.product_name);\r\n    if (_lst.length === 0) {\r\n      Library.notify(this._translate.NOTIFY.no_product, 'error');\r\n      this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n      return false;\r\n    }\r\n    else {\r\n      if (!this.checkProductCode())\r\n        return false;\r\n      const _lstValidThanhTien = this.frmData.invoice_products.filter(p => !p.amount && p.amount !== 0);\r\n      if (_lstValidThanhTien.length == this.frmData.invoice_products.length) {\r\n        Library.notify(\"Thành tiền không được để trống\", 'error', 5000);\r\n        this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount'));\r\n        return false;\r\n      }\r\n      const _lstValidTongTien = this.frmData.invoice_products.filter(p => !p.amount_after_vat && p.amount_after_vat !== 0);\r\n      if (_lstValidTongTien.length == this.frmData.invoice_products.length) {\r\n        Library.notify(\"Tổng tiền hàng hóa không được để trống\", 'error', 5000);\r\n        this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount_after_vat'));\r\n        return false;\r\n      }\r\n      if (!this.isTT78) {\r\n        let numberRow = this.invoicereleaseTempt.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(\"Chỉ được chọn 1 khoản thu để xuất hóa đơn\", 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        let numberRow = this.invoiceTemplateTT78.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(this._translate.NOTIFY.only_seclected_1_product_to_export_invoice, 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n        if (this.frmData.list_date && VStringService._getValueToString(this.frmData.list_number) == \"\") {\r\n          this.formInvoice.form.instance.getEditor('list_number').focus();\r\n          Library.notify(\"Số bảng kê\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        if (!this.frmData.list_date && VStringService._getValueToString(this.frmData.list_number) != \"\") {\r\n          Library.notify(\"Ngày bảng kê\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        this.invoice_products.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion && !item.is_promotion_new && !item.commercial_discount && _isValid) {\r\n              // if (item.quantity == null && _isValid) {\r\n              //   Library.notify(\"Số lượng\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'quantity'));\r\n              //   _isValid = false;\r\n              //   return false;\r\n              // }\r\n              // if (item.price == null && _isValid) {\r\n              //   Library.notify(\"Đơn giá\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'price'));\r\n              //   _isValid = false;\r\n              //   return false;\r\n              // }\r\n            }\r\n            else if (item.is_promotion || item.is_promotion_new || item.commercial_discount) {\r\n              if ((item.product_name == null || item.product_name == '') && _isValid) {\r\n                Library.notify(\"Tên hàng hóa\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'product_name'));\r\n                _isValid = false;\r\n                return false;\r\n              }\r\n            }\r\n            if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion) {\r\n              if (this.isHdGTGT && this.frmData.template_code != '6') {\r\n                if (item.vat == null && _isValid) {\r\n                  Library.notify(\"Thuế suất\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'vat'));\r\n                  _isValid = false;\r\n                  return false;\r\n                }\r\n                if (item.vat != \"-1\" && item.vat != \"-2\" && item.amount_vat == null && _isValid) {\r\n                  Library.notify(\"Tiền thuế\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount_vat'));\r\n                  _isValid = false;\r\n                  return false;\r\n                }\r\n              }\r\n              if (item.amount == null && _isValid) {\r\n                Library.notify(\"Thành tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount'));\r\n                _isValid = false;\r\n                return false;\r\n              }\r\n            }\r\n          });\r\n        });\r\n      }\r\n      /* Hóa đơn giảm trừ theo Nghị định số 92/2021  */\r\n      let _objND92 = this.frmData.invoice_products.filter(p => (p.vat == \"7\" || p.vat == \"3.5\"))[0];\r\n      if (_objND92) {\r\n        let _objCommon = this.frmData.invoice_products.filter(p => (p.vat != null && p.vat != \"7\" && p.vat != \"3.5\"))[0];\r\n        let isCheckNoVat = false;\r\n        let _lstNoVat = this.frmData.invoice_products.filter(p => p.vat == null);\r\n        _lstNoVat.forEach(item => {\r\n          if (!item.commercial_discount) {\r\n            if (item.amount != null)\r\n              isCheckNoVat = true;\r\n          }\r\n        });\r\n        if (_objCommon || isCheckNoVat) {\r\n          Library.notify(\"Vui lòng lập hóa đơn riêng cho hàng hóa, dịch vụ được giảm thuế GTGT theo Nghị định số 92/2021\", 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'vat'));\r\n          return false;\r\n        }\r\n      }\r\n      /* Hóa đơn giảm trừ theo Nghị quyết số 43/2022/QH15 */\r\n      // let _objNQ43 = this.frmData.invoice_products.filter(p => (p.vat == \"8\"))[0];\r\n      // if (_objNQ43) {\r\n      //   let _objCommonNQ43 = this.frmData.invoice_products.filter(p => (p.vat != null && p.vat != \"8\"))[0];\r\n      //   let isCheckNQ43 = false;\r\n      //   let _lstNQ43 = this.frmData.invoice_products.filter(p => p.vat == null);\r\n      //   _lstNQ43.forEach(item => {\r\n      //     if (!item.commercial_discount) {\r\n      //       if (item.amount != null)\r\n      //         isCheckNQ43 = true;\r\n      //     }\r\n      //   });\r\n      //   if (_objCommonNQ43 || isCheckNQ43) {\r\n      //     Library.notify(\"Vui lòng lập hóa đơn riêng cho hàng hóa, dịch vụ được giảm thuế GTGT theo Nghị quyết số 43/2022/QH15\", 'error', 5000);\r\n      //     this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'vat'));\r\n      //     return false;\r\n      //   }\r\n      // } \r\n      /* Hóa đơn bán hàng NQ43 */\r\n      if (this.frmData.is_resolution_43) {\r\n        if (!this.frmData.sales_percentage) {\r\n          Library.notify(\"Tỷ lệ % trên doanh thu không được để trống\", 'error');\r\n          return false;\r\n        }\r\n        else if (this.frmData.sales_percentage != 1 && this.frmData.sales_percentage != 2\r\n          && this.frmData.sales_percentage != 3 && this.frmData.sales_percentage != 5) {\r\n          Library.notify(\"Tỷ lệ % trên doanh thu chỉ bao gồm các giá trị: 1, 2, 3, 5\", 'error');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return _isValid;\r\n  }\r\n  /* Kiểm tra Mã hàng phải nhập không dấu, không chứa ký tự đặc biệt và tối đa 50 ký tự */\r\n  checkProductCode() {\r\n    let isValid = true;\r\n    const _lst = this.frmData.invoice_products.filter(p => p.product_name);\r\n    if (_lst.length > 0) {\r\n      for (let i = 0; i < _lst.length; i++) {\r\n        if (VStringService._getValueToString(_lst[i].product_code) != \"\" && !this.productCodePattern.test(_lst[i].product_code)) {\r\n          Library.notify(this._translate.VALIDATION.required_productCode, 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return isValid;\r\n  }\r\n\r\n  eSubmit(type, isCheckNoVat?) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    this.total_payment = \"\";\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (type !== 'GHI_TAM') {\r\n        if (!this._validForm(false)) {\r\n          return;\r\n        }\r\n        if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n          Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        if (!this.checkProductCode()) {\r\n          return;\r\n        }\r\n      }\r\n      if (this.frmData.invoice_options) {\r\n        this.frmData.invoice_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n          delete item['id'];\r\n          delete item['invoice_id'];\r\n        });\r\n      }\r\n      if (VStringService._getValueToString(this.frmData.bank_name) != \"\" && VStringService._getValueToString(this.frmData.bank_name).length > 400) {\r\n        Library.notify(this._translate.NOTIFY.bank_name_less_than_400_character, 'error');\r\n        return false;\r\n      }\r\n\r\n      if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n        Library.notify('Vui lòng chọn HTTT chuyển khoản cho hóa đơn có giá trị lớn hơn 20 triệu đồng', 'error');\r\n        return false;\r\n      }\r\n      if (!this.isAccessExportInv && type === 'XUAT' && this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        Library.notify(this._translate.NOTIFY.you_not_permissions, 'error');\r\n        return false;\r\n      }\r\n      if (type === 'XUAT' || (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy)) {\r\n        if (!this.frmData.invoice_date && !this.confirmCheckPreview && !this.isTT78) {\r\n          const setInvoiceDate = Library.confirm(this._translate.NOTIFY.warning_invoice_date, this._translate.NOTIFY.notify);\r\n          setInvoiceDate.then((dialog) => {\r\n            if (!dialog) {\r\n              this.formInvoice.form.instance.getEditor('invoice_date').focus();\r\n            }\r\n            else {\r\n              this.processXuatHoaDon(type, isCheckNoVat)\r\n            }\r\n          });\r\n        }\r\n        else\r\n          this.processXuatHoaDon(type, isCheckNoVat)\r\n      } else {\r\n        this.processGhiTam(type);\r\n      }\r\n    }, 300);\r\n  }\r\n  /* Xử lý xuất hóa đơn */\r\n  processXuatHoaDon(type, isCheckNoVat) {\r\n    let _index = 0;\r\n    let _isValid = true;\r\n    let _lstInv = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      _lstInv = dataSource.filter(p => p.product_name);\r\n    });\r\n    for (let i = 0; i < _lstInv.length; i++) {\r\n      if (_lstInv[i].amount > 0 && !_lstInv[i].vat && !_lstInv[i].is_refund_ticket) {\r\n        _index = i;\r\n        _isValid = false;\r\n        break;\r\n      }\r\n    }\r\n    if (!this.isHdGTGT)\r\n      _isValid = true;\r\n    if (!this.vatService.checkVatMauHoaDon(_lstInv, this.is_multi_vat)) {\r\n      return false;\r\n    }\r\n    if (!_isValid && isCheckNoVat && !this.isPXKDaiLy && !this.isPXKNB) {\r\n      const result = Library.confirm(this._translate.CONFIRM.no_vat, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(_index, 'vat'));\r\n          return false;\r\n        } else {\r\n          if (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.confirmCheckPreview = true;\r\n          }\r\n          if (this.confirmCheckPreview) {\r\n            if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n              this.xuatHoaDon(this.frmData);\r\n            } else {\r\n              Helper.confirmXuatChoKy(() => {\r\n                if (!this.isAccessExportInv) {\r\n                  if (type === 'TRINH_KY') {\r\n                    this.frmData.refuse_reason = '';\r\n                    this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n                  } else {\r\n                    if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                      this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                    }\r\n                  }\r\n                }\r\n                this.xuatChoKy(this.frmData);\r\n              });\r\n            }\r\n            this.confirmCheckPreview = false;\r\n          } else {\r\n            this.previewBeforeExport(type);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      if (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n        this.confirmCheckPreview = true;\r\n      }\r\n      if (this.confirmCheckPreview) {\r\n        if (this.formInvoice.getHtXuatValue() != sEnum.hinhThucXuat.XuatChoKy) {\r\n          this.xuatHoaDon(this.frmData);\r\n        } else {\r\n          Helper.confirmXuatChoKy(() => {\r\n            if (!this.isAccessExportInv) {\r\n              if (type === 'TRINH_KY') {\r\n                this.frmData.refuse_reason = '';\r\n                this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n              } else {\r\n                if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                  this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                }\r\n              }\r\n\r\n            }\r\n            this.xuatChoKy(this.frmData);\r\n          });\r\n        }\r\n      } else {\r\n        this.previewBeforeExport(type);\r\n\r\n      }\r\n    }\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = '';\r\n    if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n      trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n    } else {\r\n      trang_thai = this._translate.THONG_TIN.xuat_cho_ky;\r\n    }\r\n    let du_lieu = this.vatService.taodulieuXemTruocMau(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn : this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  /* Xử lý ghi tạm hóa đơn */\r\n  processGhiTam(type) {\r\n    if (!this.isAccessExportInv) {\r\n      if (type === 'TRINH_KY') {\r\n        this.frmData.refuse_reason = '';\r\n        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n      } else {\r\n        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    this.ghiTam(this.frmData);\r\n  }\r\n  handleFormData() {\r\n    this.tempKiFile = 0;\r\n    const invoice_products = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      let transport = \"\";\r\n      dataSource.forEach((item, index) => {\r\n        if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n          item.row_content = item.product_name;\r\n          invoice_products.push(item);\r\n          if (item.is_transport_number) {\r\n            transport += item.product_name + \"; \";\r\n          }\r\n        }\r\n      });\r\n      if (transport != \"\") {\r\n        transport = transport.trim();\r\n        transport = transport.slice(0, -1);\r\n        this.frmData.transport_number = transport;\r\n      }\r\n      if (this.frmData.list_date) {\r\n        this.frmData.list_date = moment(this.frmData.list_date).format('YYYY-MM-DD');\r\n      }\r\n      this.frmData.is_outside_process = false;\r\n      this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n      let hoadon = \"Hóa đơn\";\r\n      if (this.isPXKNB || this.isPXKDaiLy)\r\n        hoadon = \"Phiếu xuất kho\";\r\n      this.frmData.note_view_on_invoice = hoadon + \" \" + `này thay thế cho ` + hoadon.toLowerCase() + \" \" + `số ${this.oldForm.invoice_number}, mẫu số ${this.oldForm.template_code}, ký hiệu ${this.oldForm.invoice_series} ngày ${moment(this.oldForm.invoice_date).format('DD/MM/YYYY')}`;\r\n      this.frmData.invoice_products = invoice_products;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n    });\r\n  }\r\n  handleFormDataSub() {\r\n    const wait = (delay, ...args) => new Promise(resolve => setTimeout(resolve, delay, ...args));\r\n    return wait(200).then(() => {\r\n      this.tempKiFile = 0;\r\n      const invoice_products = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          //delete item.error;\r\n          if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n            item.row_content = item.product_name;\r\n            invoice_products.push(item);\r\n            if (item.is_transport_number) {\r\n              this.frmData.transport_number = item.product_name;\r\n            }\r\n          }\r\n        });\r\n      });\r\n      this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n      let hoadon = \"Hóa đơn\";\r\n    if (this.isPXKNB || this.isPXKDaiLy)\r\n      hoadon = \"Phiếu xuất kho\";\r\n      this.frmData.note_view_on_invoice = hoadon + \" \" + `này thay thế cho ` + hoadon.toLowerCase() + \" \" + `số ${this.oldForm.invoice_number}, mẫu số ${this.oldForm.template_code}, ký hiệu ${this.oldForm.invoice_series} ngày ${moment(this.oldForm.invoice_date).format('DD/MM/YYYY')}`;\r\n      this.frmData.invoice_products = invoice_products;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n      return true;\r\n    });\r\n  }\r\n\r\n  showModalHdck() {\r\n    const initialState = {\r\n      invoiceNumberOrigin: this.oldForm.invoice_number,\r\n      invoiceReleaseId: this.oldForm.invoice_release_id,\r\n      onSave: (data) => {\r\n        this.frmData.id = data.id;\r\n        this.frmData.invoice_date = data.invoice_date;\r\n        this.frmData.invoice_number = data.invoice_number;\r\n      }\r\n    };\r\n    this.bsModalHdckRef = this.modalService.show(ChooseHdckComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-lg full-modal',\r\n      initialState\r\n    });\r\n  }\r\n\r\n  test() {\r\n    this.productGrip.createUpdateEvent();\r\n    // this.handleFormData();\r\n    // window.scrollTo(100, 100);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n    // this.socketService.close();\r\n  }\r\n\r\n  xemlydotuchoi() {\r\n    Library.showloading();\r\n    const sub = this.vatService.showToSendInvoice(this.frmData.id).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n          listDM: this.listDM\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n  }\r\n\r\n  routeReport() {\r\n    if (this.dataInvoice.origin_id !== null) {\r\n      if (this.dataInvoice.status === 'GHI_TAM') {\r\n        this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.origin_id, 'THAY_THE']);\r\n      } else {\r\n        this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.id, 'THAY_THE']);\r\n      }\r\n    } else {\r\n      this.router.navigate(['/system/handle-report/create-report/', this.dataInvoice.id, 'THAY_THE']);\r\n    }\r\n  }\r\n\r\n  onTemplateTypeChange(e) {\r\n    this.invoicereleaseTempt = e;\r\n  }\r\n  onTemplateTT78TypeChange(e) {\r\n    this.invoiceTemplateTT78 = e;\r\n    this.is_multi_vat = e.is_multi_vat;\r\n  }\r\n  onNumberTicketChange() {\r\n    if (!this.isTT78) {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n      }\r\n    }\r\n    else {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n      }\r\n    }\r\n  }\r\n  onNumberChange() {\r\n    VChanggeMoneyService._calTotalMoney(this.frmData, this.formatter, !this.frmData.auto_value);\r\n  }\r\n\r\n  onVatChange() {\r\n    const decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n    const decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n    const decimal_vat = this.getFormatterToNumber(this.formatter.vat);\r\n    if (this.frmData.vat_service_ticket != null && this.frmData.vat_service_ticket != '-1') {\r\n      this.frmData.total_vat_service_ticket = this.roundNumber((Number.parseInt(this.frmData.vat_service_ticket) * this.frmData.money_service_ticket) / 100, decimal_amount_vat);\r\n    } else {\r\n      this.frmData.total_vat_service_ticket = null;\r\n    }\r\n    this.frmData.total_service_ticket_with_vat = this.roundNumber(this.frmData.money_service_ticket + this.frmData.total_vat_service_ticket, decimal_amount);\r\n  }\r\n\r\n  getFormatterToNumber(formatter) {\r\n    const s1 = formatter.replace('0,###', '');\r\n    if (s1 === '') {\r\n      return 0;\r\n    } else {\r\n      const s2 = s1.replace('.', '');\r\n      return s2.split('').length;\r\n    }\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  keyDown(e: any) {\r\n    // setTimeout(() => {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n    // }, 100);\r\n  }\r\n\r\n  setDataSessionStorage(value) {\r\n    this.valueChange = JSON.stringify(value);\r\n  }\r\n\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  async subData(type, value) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return false;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    await this.handleFormDataSub();\r\n    if (this.frmData.invoice_options) {\r\n      this.frmData.invoice_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n      Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error');\r\n      return false;\r\n    }\r\n    if (!this.isAccessExportInv) {\r\n      if (type === 'TRINH_KY') {\r\n        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n        this.frmData.refuse_reason = '';\r\n      } else {\r\n        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    if (value.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.edit(this.frmData.id, value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.editTT78(this.frmData.id, value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.ghiTam(value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.ghiTamTT78(value).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM', this.frmData).then(value1 => {\r\n                    observer.next(value1);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    }\r\n    return true;\r\n  }\r\n  guideSales() {\r\n    this.isDisplayGuideSale = !this.isDisplayGuideSale;\r\n  }\r\n  onChangeSalePercen(e) {\r\n    this.configs.system_parameter.value_rate_percent = e.value;\r\n    let data = {\r\n      config: {\r\n        value: JSON.stringify(this.configs.system_parameter)\r\n      }\r\n    };\r\n    this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n      if (response.status == \"success\") {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n          this.configs = this.authService.getConfigs();\r\n        });\r\n      } else {\r\n      }\r\n    }, err => { }, () => {\r\n    });\r\n    this.onNumberTicketChange();\r\n  }\r\n  startProcess_TBSaiSot() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.getXml_TBSaiSot();\r\n    } else {\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let ListSerialNumber = \"DSCKS\";\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n      }\r\n      else\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n\r\n    }\r\n  }\r\n  getXml_TBSaiSot() {\r\n    let invoices = [];\r\n    let object = new Object;\r\n    object[\"tax_authority_code\"] = this.oldForm.tax_authority_code;\r\n    object[\"template_code\"] = this.oldForm.template_code;\r\n    object[\"invoice_series\"] = this.oldForm.invoice_series;\r\n    object[\"invoice_date\"] = this.oldForm.invoice_date;\r\n    object[\"invoice_number\"] = this.oldForm.invoice_number;\r\n    object[\"reason\"] = this.frmData.destroy_reason;\r\n    object[\"notification_nature\"] = \"3\";\r\n    object[\"type_apply_invoice\"] = 1;\r\n    object[\"is_invoice_with_code\"] = this.oldForm.is_invoice_with_code;\r\n    object[\"invoice_id\"] = this.oldForm.id;\r\n    invoices.push(object);\r\n    let data = {\r\n      notification_type: 1,\r\n      invoices: invoices\r\n    };\r\n    let xmlInvoice = \"\";\r\n    let sub = this.handleInvoiceService.getXmlInvoiceWrong(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        xmlInvoice = rs.data.xml_file;\r\n        this.invoices = rs.data.invoices;\r\n        let sign_date = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (xmlInvoice != \"\") {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            this.sendData_TBSaiSot(xmlInvoice);\r\n          else\r\n            this.signXml_TBSaiSot(xmlInvoice, sign_date);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  sendData_TBSaiSot(xml_string) {\r\n    let subXuatHoaDon = this.handleInvoiceService.sendXmlInvoiceWrong({\r\n      xml_file: xml_string,\r\n      invoices: this.invoices\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n  signXml_TBSaiSot(xmlInvoice, signDate) {\r\n    let nodeSign = \"//TBao/DSCKS/NNT\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, signDate, 'NotificationData', ListSerialNumber, true);\r\n  }\r\n  inChuyenDoiText() {\r\n    if (this.frmData.time_print_conversion > 0) {\r\n      return this._translate.CONTROLL.BUTTON.view_conversion;\r\n    } else {\r\n      return this._translate.CONTROLL.BUTTON.print_conversion;\r\n    }\r\n  }\r\n  thukhoxuatky() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    Library.showloading();\r\n    const sub = this.vatService.thukhoxuatky(ids).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        Library.notify(this._translate.NOTIFY.sign_success, 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  huylenhdieudong() {\r\n    const setInvoiceDate = Library.confirm(this._translate.NOTIFY.warning_the_dispatch_success, this._translate.NOTIFY.notify);\r\n    setInvoiceDate.then((dialog) => {\r\n      if (!dialog) {\r\n      }\r\n      else {\r\n        Library.showloading();\r\n        let ids = [];\r\n        ids.push(this.frmData.id);\r\n        let sub = this.vatService.huylenhdieudong(ids).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            Library.notify(this._translate.NOTIFY.cancel_the_dispatch_success, 'success');\r\n            this.isShowHuyLenhDD = false;\r\n            this.enableScreen();\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    });\r\n  }\r\n  enableScreen() {\r\n    this.formInvoice.allowEditAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n  }\r\n  submitlenhdieudong() {\r\n    let checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    if (!this.isCheckLenhDieuDong)\r\n      this.resultCompareData = this.checkDataFormChange(this.valueChange, this.frmData);\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(false))\r\n        return;\r\n      if (this.isCheckLenhDieuDong) {\r\n        this.kylenhdieudong();\r\n        this.isCheckLenhDieuDong = false;\r\n      } else {\r\n        this.Reviewlenhdieudong();\r\n      }\r\n    }, 300);\r\n  }\r\n  handleAddNew() {\r\n    if (this.isExportInvoice) {\r\n      this.addNew();\r\n    } else {\r\n      if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n        this.confirmService.confirm()\r\n          .subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM', this.frmData).then(res => {\r\n                    if (res) {\r\n                      this.addNew();\r\n                    } else {\r\n                      return;\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  this.addNew();\r\n                  break;\r\n                case 'cancel':\r\n                  this.addNew();\r\n                  break;\r\n                default:\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n      } else {\r\n        this.addNew();\r\n      }\r\n    }\r\n  }\r\n  kylenhdieudong() {\r\n    if (this.frmData.id) {\r\n      let ids = [];\r\n      ids.push(this.frmData.id);\r\n      if (!this.resultCompareData) {\r\n        Library.showloading();\r\n        if (!this.isTT78) {\r\n          let sub = this.vatService.edit(this.frmData.id, this.frmData).subscribe(rs => {\r\n            if (rs.status == 'success') {\r\n              this.frmData.id = rs.data.id;\r\n              this.getDataToCompare();\r\n              const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n                if (rs.status === 'success') {\r\n                  Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                  this.isShowHuyLenhDD = true;\r\n                  this.disablleScreen();\r\n                } else {\r\n                  Library.notify(rs.message, 'error');\r\n                }\r\n              });\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => { }, () => {\r\n            Library.hideloading();\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n        else {\r\n          let sub = this.vatService.editTT78(this.frmData.id, this.frmData).subscribe(rs => {\r\n            if (rs.status == 'success') {\r\n              this.frmData.id = rs.data.id;\r\n              this.getDataToCompare();\r\n              const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n                if (rs.status === 'success') {\r\n                  Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                  this.isShowHuyLenhDD = true;\r\n                  this.disablleScreen();\r\n                } else {\r\n                  Library.notify(rs.message, 'error');\r\n                }\r\n              });\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => { }, () => {\r\n            Library.hideloading();\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n      else {\r\n        Library.showloading();\r\n        const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n            this.isShowHuyLenhDD = true;\r\n            this.disablleScreen();\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTam(this.frmData).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            let ids = [];\r\n            ids.push(this.frmData.id);\r\n            const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                this.isShowHuyLenhDD = true;\r\n                this.disablleScreen();\r\n              } else {\r\n                Library.notify(rs.message, 'error');\r\n              }\r\n            });\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamTT78(this.frmData).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.id = rs.data.id;\r\n            let ids = [];\r\n            ids.push(this.frmData.id);\r\n            const sub = this.vatService.kylenhdieudong(ids).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                Library.notify(this._translate.NOTIFY.sign_the_dispatch_success, 'success');\r\n                this.isShowHuyLenhDD = true;\r\n                this.disablleScreen();\r\n              } else {\r\n                Library.notify(rs.message, 'error');\r\n              }\r\n            });\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n  Reviewlenhdieudong() {\r\n    this.handleFormData();\r\n    this.windowPreviewBeforeSubmit = window.open(\"\", \"\", `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n    this.windowPreviewBeforeSubmit.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    this.windowPreviewBeforeSubmit.blur();\r\n    let timer = setInterval(() => {\r\n      if (this.windowPreviewBeforeSubmit.closed) {\r\n        clearInterval(timer);\r\n        let isCheck = Helper.getCookie('CK_LDD');\r\n        this.windowPreviewBeforeSubmit = undefined;\r\n        if (isCheck == \"CHECKED\") {\r\n          document.cookie = \"CK_LDD=; path=/\";\r\n          this.isCheckLenhDieuDong = true;\r\n          this.submitlenhdieudong();\r\n        }\r\n      }\r\n    }, 500);\r\n    Library.showloading();\r\n    if (!this.frmData.id || !this.isShowHuyLenhDD) {\r\n      let sub = this.vatService.xemtruoclenhdieudong(this.frmData).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let pdf_file = rs.data.file_content;\r\n          let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n          this.windowPreviewBeforeSubmit.document.write(`\r\n          \r\n          <!DOCTYPE html>\r\n          <html lang=\"en\">\r\n          <head>\r\n            <meta charset=\"UTF-8\">\r\n            <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n            <title>Document</title>\r\n            <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\" />\r\n            <style type=\"text/css\" scoped>\r\n            .nhap-nhay {\r\n              background: red;\r\n              padding: 0.5px 9px;\r\n              margin-right: 5px;\r\n              border-radius: 57%;\r\n              -webkit-animation: flicker 1s infinite;\r\n            }\r\n            .ht-xuat{\r\n              width: 20%;\r\n              height: 100%;\r\n              background: #ffffff;\r\n              box-shadow: 0px 0px 8px 0px #888888;\r\n              \r\n            }\r\n            .ht-xuat > .right-nav{\r\n              display:flex;\r\n              justify-content: space-between;\r\n              align-items: center;\r\n              border-bottom: 1px solid #d5d5d5;\r\n              padding:20px;\r\n            }\r\n            @-webkit-keyframes flicker\r\n            {\r\n            0% {opacity:0;}\r\n            9% {opacity:0;}\r\n            10% {opacity:.5;}\r\n            13% {opacity:0;}\r\n            20% {opacity:.5;}\r\n            25% {opacity:1;}\r\n            }\r\n\r\n            .example {\r\n              padding: 20px;\r\n            }\r\n            \r\n            input[type=button] {\r\n              padding: 5px 10px;\r\n              margin: 10px 5px;\r\n              border-radius: 5px;\r\n              cursor: pointer;\r\n              background: #ddd;\r\n              border: 1px solid #ccc;\r\n            }\r\n            input[type=button]:hover {\r\n              background: #ccc;\r\n            }\r\n\r\n            .confirm {\r\n              display: none;\r\n            }\r\n            .confirm > div:first-of-type {\r\n              position: fixed;\r\n              width: 100%;\r\n              height: 100%;\r\n              background: rgba(0, 0, 0, 0.5);\r\n              top: 0px;\r\n              left: 0px;\r\n            }\r\n            .confirm > div:last-of-type {\r\n              padding: 10px 20px;\r\n              background: white;\r\n              position: absolute;\r\n              width: auto;\r\n              height: auto;\r\n              left: 50%;\r\n              top: 50%;\r\n              transform: translate(-50%, -50%);\r\n              border-radius: 5px;\r\n              border: 1px solid #333;\r\n            }\r\n            .confirm > div:last-of-type div:first-of-type {\r\n              min-width: 150px;\r\n              padding: 10px;\r\n            }\r\n            .confirm > div:last-of-type div:last-of-type {\r\n              text-align: right;\r\n            }\r\n          </style>\r\n          </head>\r\n          <body>\r\n          <div style=\"margin-left: 50px;\">\r\n          <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n          <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n          </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n        </div>\r\n\r\n        <div style=\"display: flex; height:84vh; justify-content: center;\">\r\n          <iframe style=\"\" width=\"70%\" height=\"100%\" src=\"${objectUrl}\"></iframe>\r\n          <div class=\"ht-xuat\">\r\n            <div class=\"right-nav\">\r\n             <button style =\" background:#007BFF;color:#ffffff; padding: 10px 50px; border: none ; outline:none; border-radius: 30px\"> <a href=\"javascript:void(0)\" style=\"text-decoration: none; color:#ffffff; font-weight: bold; padding-right:10px\" onclick=\"setConfirmInvoice()\">Đồng ý </a> <i class=\"fa fa-angle-right\"></i></button>\r\n              <a href=\"javascript:void(0)\" style=\"text-decoration: none; color: gray\" onclick=\"closeWin()\"><i class=\"fa fa-times\" style=\"font-size:25px\"></i></a>\r\n            </div>\r\n            <div style=\"display: flex; flex-direction: column; padding:10px;\">\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n                <p style=\" font-weight: 600;\">Ngày hóa đơn : </p>\r\n                <p style=\"color: orange;font-weight: 600;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n              </div>\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;padding: 10px; border-bottom: 1px solid #d5d5d5\">\r\n                <p style=\"font-weight: 600;\">Trạng thái : </p>\r\n                <p style=\"color: orange;font-weight: 600;\">Xuất  ${this._translate.CONFIRM.confirm_sign_delivery}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"confirm\">\r\n            <div></div>\r\n            <div>\r\n              <div id=\"confirmMessage\">Confirm text</div>\r\n              <div>\r\n                <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n                <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n              </div>\r\n            </div>\r\n        </div>\r\n\r\n        <script type=\"text/javascript\">\r\n        const ui = {\r\n          confirm: async (message) => createConfirm(message)\r\n        }\r\n        \r\n        const createConfirm = (message) => {\r\n          return new Promise((complete, failed)=>{\r\n            $('#confirmMessage').text(message)\r\n        \r\n            $('#confirmYes').off('click');\r\n            $('#confirmNo').off('click');\r\n            \r\n            $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n            $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n            \r\n            $('.confirm').show();\r\n          });\r\n        }\r\n                             \r\n        const setConfirmInvoice = async () => {\r\n          const confirm = await ui.confirm(\" ${this._translate.CONFIRM.confirm_sign_delivery} \");\r\n          if(confirm){\r\n            document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n            window.close();\r\n          } else{\r\n          }\r\n        } \r\n\r\n          function closeWin(){\r\n            window.close();\r\n          }\r\n        </script>\r\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n          </body>\r\n          </html>\r\n        `);\r\n          this.windowPreviewBeforeSubmit.focus();\r\n        } else {\r\n          this.windowPreviewBeforeSubmit.close();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      let ids = [];\r\n      ids.push(this.frmData.id)\r\n      let sub = this.vatService.xemlenhdieudong(ids).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let pdf_file = rs.data.file_content;\r\n          let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n          this.windowPreviewBeforeSubmit.document.write(`\r\n          <!DOCTYPE html>\r\n          <html lang=\"en\">\r\n          <head>\r\n            <meta charset=\"UTF-8\">\r\n            <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n            <title>Document</title>\r\n            <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\" />\r\n            <style type=\"text/css\" scoped>\r\n            .nhap-nhay {\r\n              background: red;\r\n              padding: 0.5px 9px;\r\n              margin-right: 5px;\r\n              border-radius: 57%;\r\n              -webkit-animation: flicker 1s infinite;\r\n            }\r\n            .ht-xuat{\r\n              width: 20%;\r\n              height: 100%;\r\n              background: #ffffff;\r\n              box-shadow: 0px 0px 8px 0px #888888;\r\n              \r\n            }\r\n            .ht-xuat > .right-nav{\r\n              display:flex;\r\n              justify-content: space-between;\r\n              align-items: center;\r\n              border-bottom: 1px solid #d5d5d5;\r\n              padding:20px;\r\n            }\r\n            @-webkit-keyframes flicker\r\n            {\r\n            0% {opacity:0;}\r\n            9% {opacity:0;}\r\n            10% {opacity:.5;}\r\n            13% {opacity:0;}\r\n            20% {opacity:.5;}\r\n            25% {opacity:1;}\r\n            }\r\n\r\n            .example {\r\n              padding: 20px;\r\n            }\r\n            \r\n            input[type=button] {\r\n              padding: 5px 10px;\r\n              margin: 10px 5px;\r\n              border-radius: 5px;\r\n              cursor: pointer;\r\n              background: #ddd;\r\n              border: 1px solid #ccc;\r\n            }\r\n            input[type=button]:hover {\r\n              background: #ccc;\r\n            }\r\n\r\n            .confirm {\r\n              display: none;\r\n            }\r\n            .confirm > div:first-of-type {\r\n              position: fixed;\r\n              width: 100%;\r\n              height: 100%;\r\n              background: rgba(0, 0, 0, 0.5);\r\n              top: 0px;\r\n              left: 0px;\r\n            }\r\n            .confirm > div:last-of-type {\r\n              padding: 10px 20px;\r\n              background: white;\r\n              position: absolute;\r\n              width: auto;\r\n              height: auto;\r\n              left: 50%;\r\n              top: 50%;\r\n              transform: translate(-50%, -50%);\r\n              border-radius: 5px;\r\n              border: 1px solid #333;\r\n            }\r\n            .confirm > div:last-of-type div:first-of-type {\r\n              min-width: 150px;\r\n              padding: 10px;\r\n            }\r\n            .confirm > div:last-of-type div:last-of-type {\r\n              text-align: right;\r\n            }\r\n          </style>\r\n          </head>\r\n          <body>\r\n          <div style=\"margin-left: 50px;\">\r\n          <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n          <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n          </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n        </div>\r\n\r\n        <div style=\"display: flex; height:84vh; justify-content: center;\">\r\n          <iframe style=\"\" width=\"70%\" height=\"100%\" src=\"${objectUrl}\"></iframe>\r\n          <div class=\"ht-xuat\">\r\n            <div class=\"right-nav\">\r\n             <button style =\" background:#007BFF;color:#ffffff; padding: 10px 50px; border: none ; outline:none; border-radius: 30px\"> <a href=\"javascript:void(0)\" style=\"text-decoration: none; color:#ffffff; font-weight: bold; padding-right:10px\" onclick=\"setConfirmInvoice()\">Đồng ý </a> <i class=\"fa fa-angle-right\"></i></button>\r\n              <a href=\"javascript:void(0)\" style=\"text-decoration: none; color: gray\" onclick=\"closeWin()\"><i class=\"fa fa-times\" style=\"font-size:25px\"></i></a>\r\n            </div>\r\n            <div style=\"display: flex; flex-direction: column; padding:10px;\">\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n                <p style=\" font-weight: 600;\">Ngày hóa đơn : </p>\r\n                <p style=\"color: orange;font-weight: 600;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n              </div>\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;padding: 10px; border-bottom: 1px solid #d5d5d5\">\r\n                <p style=\"font-weight: 600;\">Trạng thái : </p>\r\n                <p style=\"color: orange;font-weight: 600;\">Xuất  ${this._translate.CONFIRM.confirm_sign_delivery}</p>\r\n              </div>\r\n              <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n                <p style=\"font-weight: 600;\">Tổng tiền : </p>\r\n                <p style=\"color: orange;font-weight: 600;\">${rs.data.invoice.total_payment}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"confirm\">\r\n            <div></div>\r\n            <div>\r\n              <div id=\"confirmMessage\">Confirm text</div>\r\n              <div>\r\n                <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n                <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n              </div>\r\n            </div>\r\n        </div>\r\n\r\n        <script type=\"text/javascript\">\r\n        const ui = {\r\n          confirm: async (message) => createConfirm(message)\r\n        }\r\n        \r\n        const createConfirm = (message) => {\r\n          return new Promise((complete, failed)=>{\r\n            $('#confirmMessage').text(message)\r\n        \r\n            $('#confirmYes').off('click');\r\n            $('#confirmNo').off('click');\r\n            \r\n            $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n            $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n            \r\n            $('.confirm').show();\r\n          });\r\n        }\r\n                             \r\n        const setConfirmInvoice = async () => {\r\n          const confirm = await ui.confirm(\" ${this._translate.CONFIRM.confirm_sign_delivery} \");\r\n          if(confirm){\r\n            document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n            window.close();\r\n          } else{\r\n          }\r\n        } \r\n\r\n          function closeWin(){\r\n            window.close();\r\n          }\r\n        </script>\r\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n          </body>\r\n          </html>\r\n        `);\r\n          this.windowPreviewBeforeSubmit.focus();\r\n        } else {\r\n          this.windowPreviewBeforeSubmit.close();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  addNew() {\r\n    let inv = Object.assign({}, this.frmData);\r\n\r\n    this.frmData = new InvoiceModel(1);\r\n    this.frmData.invoice_date = null;\r\n    this.frmData.template_id = inv.template_id;\r\n    this.frmData.invoice_release_id = inv.invoice_release_id;\r\n    this.frmData.payment_method_name = inv.payment_method_name;\r\n    this.frmData.payment_method_view_name = inv.payment_method_view_name;\r\n    this.frmData.currency_code = inv.currency_code;\r\n    this.frmData.template_code = inv.template_code;\r\n    this.frmData.invoice_series = inv.invoice_series;\r\n    this.invoice_products = new ArrayStore({\r\n      key: \"id\",\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n    this.productGrip.createUpdateEvent();\r\n    this.formInvoice.removeReadonlyAllForm();\r\n    this.formInvoice.emails = [];\r\n    this.ttDaXuatHoaDon = false;\r\n    this.getDataToCompare();\r\n  }\r\n  getDataToCompare() {\r\n    this.handleFormData();\r\n    this.valueChange = JSON.stringify(this.frmData);\r\n    this.invoice_products.load().then((dataSource) => {\r\n      this.jsonProductFirst = JSON.stringify(dataSource);\r\n    });\r\n  }\r\n}\r\n\r\n","module.exports = \"<!-- Phần không tự tính giá trị, nhập mẫu bảng kê -->\\r\\n<div class=\\\"row support-invoice\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <div class=\\\"pull-left\\\">\\r\\n      <div style=\\\"float: left;width:  30%; padding-top: 4px\\\">{{ _translate.CONTROLL.BUTTON.add_row }}</div>\\r\\n      <div style=\\\"float: left; width: 30%\\\">\\r\\n        <dx-number-box #numberBox [max]=\\\"100\\\" [min]=\\\"1\\\" [showSpinButtons]=\\\"true\\\" [(value)]=\\\"rowData\\\"></dx-number-box>\\r\\n      </div>\\r\\n      <div>\\r\\n        <dx-button style=\\\"height: 27px\\\" icon=\\\"fa fa-plus-circle\\\" type=\\\"default\\\" text=\\\"\\\" (onClick)=\\\"addRow()\\\">\\r\\n        </dx-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\" *ngIf=\\\"!isPXKDaiLy && !isPXKNB\\\">\\r\\n      <!-- Hóa đơn bán hàng NĐ 92 -->\\r\\n      <dx-check-box *ngIf=\\\"!isHdGTGT\\\" [(value)]=\\\"frmData.is_exemption_decree\\\" text=\\\"Giảm thuế theo NĐ số 92/2021\\\"\\r\\n        (onValueChanged)=\\\"_changeND92($event)\\\"></dx-check-box>\\r\\n      <div *ngIf=\\\"!isHdGTGT\\\" class=\\\"toggle normal\\\"\\r\\n        style=\\\"display: inline-block; align-items: center;margin-right: 42px;margin-left: 7px;\\\">\\r\\n        <img id=\\\"link3\\\" style=\\\"cursor: pointer\\\" src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\"\\r\\n          (click)=\\\"onClickGuidReduce()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n      </div>\\r\\n      <!-- Hóa đơn bán hàng NQ 43 -->\\r\\n      <dx-check-box *ngIf=\\\"!isHdGTGT\\\" style=\\\"margin-right:20px\\\" [(value)]=\\\"frmData.is_resolution_43\\\"\\r\\n        text=\\\"{{ _translate.THONG_TIN.giam_thue_theo_nq43 }}\\\" (onValueChanged)=\\\"_changeNQ43($event)\\\"></dx-check-box>\\r\\n      <dx-check-box *ngIf=\\\"configs.system_parameter.view_sale_by_phone\\\" id=\\\"auto-input\\\"\\r\\n        text=\\\"{{ _translate.CONTROLL.LABEL.sale_by_phone }}\\\" [(value)]=\\\"frmData.sale_by_phone\\\"></dx-check-box>\\r\\n      <!-- Tổng tiền từ âm chuyển thành dương -->\\r\\n      <dx-check-box id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.total_money_from_negative_to_positive }}\\\"\\r\\n        [(value)]=\\\"frmData.is_total_amount_negative_to_positive\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <!-- Không tự tính -->\\r\\n      <dx-check-box id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\" [(value)]=\\\"frmData.auto_value\\\"\\r\\n        (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <!-- Tính thành tiền, tiền thuế theo số lượng và tổng tiền -->\\r\\n      <dx-check-box *ngIf=\\\"isHdGTGT\\\" id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.auto_value_price }}\\\"\\r\\n        [(value)]=\\\"frmData.auto_value_price\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <!-- <a href=\\\"javascript:void(0)\\\" (click)=\\\"layMauBangKe()\\\" class=\\\"support-link mgr-15\\\">\\r\\n        <img src=\\\"assets/img/icons/TaiMauBangKe.png\\\"><span>{{ _translate.CONTROLL.BUTTON.get_the_sample_file }}</span>\\r\\n      </a>\\r\\n      <a href=\\\"javascript:void(0)\\\" (click)=\\\"napDuLieuTuBangKe()\\\" [class.disabled-link]=\\\"ttDaXuatHoaDon\\\"\\r\\n        class=\\\"support-link\\\">\\r\\n        <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n          style=\\\"display: none;\\\" />\\r\\n        <img src=\\\"assets/img/icons/NapDuLieuBangKe.png\\\"><span>{{ _translate.CONTROLL.BUTTON.import_data }}</span>\\r\\n      </a> -->\\r\\n      <dx-menu [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\"\\r\\n        (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n      </dx-menu>\\r\\n      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n        style=\\\"display: none;\\\" />\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\" *ngIf=\\\"isPXKDaiLy || isPXKNB\\\">\\r\\n      <!-- Tổng tiền từ âm chuyển thành dương -->\\r\\n      <dx-check-box id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.total_money_from_negative_to_positive }}\\\"\\r\\n        [(value)]=\\\"frmData.is_total_amount_negative_to_positive\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <!-- Không tự tính -->\\r\\n      <dx-check-box id=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\" [(value)]=\\\"frmData.auto_value\\\"\\r\\n        (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.import_type }}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"thayTheToanBo()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all }}\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"themTiep()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n<!-- <button type=\\\"button\\\" (click)=\\\"aa()\\\">aaa</button> -->\\r\\n\\r\\n<!-- phần table hiển thị -->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onCellPrepared)=\\\"onCellPrepared($event)\\\" *ngIf=\\\"!isPXKDaiLy && !isPXKNB\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" -->\\r\\n\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n      <!-- <dxo-selection showCheckBoxesMode=\\\"none\\\" mode=\\\"single\\\"></dxo-selection> -->\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"view_order\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"(extentionGrid && extentionGrid.don_hang_hop_dong) || (configs && configs.system_parameter && configs.system_parameter.display_contract_order)\\\"\\r\\n        dataField=\\\"contract_order\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_hang_hop_dong }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.po_no_contract_no }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"extentionGrid && extentionGrid.ma_quan_ly\\\" dataField=\\\"management_code\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.don_hang_hop_dong }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.management_code }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"product_code\\\" [editorOptions]=\\\"editorOptionsForCode\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_code }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n        alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\" itemTemplate=\\\"item\\\">\\r\\n\\r\\n          <!-- <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n            <div>\\r\\n              <div style=\\\"width:30%; float: left;word-wrap: break-word\\\">{{item.code }}</div>\\r\\n              <div style=\\\"width:65%; float: left;margin-left :10px;word-wrap: break-word\\\">{{item.name}}</div>\\r\\n            </div>\\r\\n    </div> -->\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"product_name\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\"\\r\\n        alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.incurred_refund_ticket\\\" cellTemplate=\\\"PhiHoanVe\\\"\\r\\n        caption=\\\"{{ _translate.CONTROLL.LABEL.refund_fee }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"((_objTemplateSelect.template_type=='HOA_DON_KINH_DOANH_XE')\\r\\n                        || (_oTemplateTT78.template_type=='HOA_DON_KINH_DOANH_XE'))\\\" dataField=\\\"engine_number\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.engine_number }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.so_may }}\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect.template_type=='HOA_DON_KINH_DOANH_XE') || (_oTemplateTT78.template_type=='HOA_DON_KINH_DOANH_XE'))\\\"\\r\\n        dataField=\\\"chassis_number\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.chassis_number }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_khung }}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && (_objTemplateSelect.template_type=='HOA_DON_NHA_HANG_KHACH_SAN' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_CHUNG')) || (_oTemplateTT78 && (_oTemplateTT78.template_type=='HOA_DON_NHA_HANG_KHACH_SAN' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG')))\\\"\\r\\n        cellTemplate=\\\"phi_dich_vu\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.money_service }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Khuyến mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.promotional_goods_on_the_invoice\\\" cellTemplate=\\\"khuyen_mai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.promotion }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_lot\\\" dataField=\\\"lot\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.lot }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.lot }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_expiration_date\\\" dataField=\\\"expiration_date\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.expiration_date }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_country\\\" [editorOptions]=\\\"{showClearButton: true}\\\"\\r\\n        dataField=\\\"country_code\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.country }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.country }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.countrys\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.display_transport_number_from_product\\\"\\r\\n        cellTemplate=\\\"is_transport_number\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.transport_number  }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.is_transport_number  }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.commercial_discount\\\" cellTemplate=\\\"cktm\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.commercial_discount }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_provisions_on_accounts\\\" dataField=\\\"provisions_on_accounts\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.provisions_on_accounts }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.dinh_khoan }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.select_provisions_on_accounts\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"\\r\\n          onValueChanged=\\\"b($event)\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Màu sắc/ chất liệu -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.color_material\\\" dataField=\\\"color_material\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.mau_sac }}\\\" caption=\\\"{{ _translate.CONFIGS.color_material }}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Số tham chiếu -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.items_number\\\" dataField=\\\"items_number\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.reference_number }}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Ngày -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.complete_order_date\\\" dataField=\\\"complete_order_date\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"{{ _translate.CONFIGS.day }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- mpq -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.mpq\\\" dataField=\\\"mpq\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"MPQ\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Đơn vị tính -->\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Ngày -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.product_date\\\" dataField=\\\"product_date\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"{{ _translate.CONFIGS.day }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Tỷ giá -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.product_exchange_rate\\\" dataField=\\\"product_exchange_rate\\\"\\r\\n        headerCellTemplate=\\\"exchangeRateHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.ty_gia,step: '0' }\\\" [format]=\\\"formatter.ty_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\" [editorOptions]=\\\"{ format: formatter.so_luong }\\\"\\r\\n        [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Đơn giá sau thuế -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.price_after_vat\\\" dataField=\\\"price_after_vat\\\"\\r\\n        headerCellTemplate=\\\"priceaftervatHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia_sau_thue,step: '0' }\\\" [format]=\\\"formatter.don_gia_sau_thue\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_price_nte\\\" dataField=\\\"price_nte\\\"\\r\\n        headerCellTemplate=\\\"price_nteHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia_nte }\\\" [format]=\\\"formatter.don_gia_nte\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia }\\\" [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && _objTemplateSelect.template_type!='HOA_DON_BAN_GIAO_XE' && _objTemplateSelect.template_type!='HOA_DON_BAO_DUONG_XE')\\r\\n      || (_oTemplateTT78 && _oTemplateTT78.is_discount && _oTemplateTT78.template_type!='HOA_DON_BAN_GIAO_XE' && _oTemplateTT78.template_type!='HOA_DON_BAO_DUONG_XE'))\\\"\\r\\n        dataField=\\\"amount_without_discount\\\" headerCellTemplate=\\\"amountNoDiscountHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien_chua_ck }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien_chua_ck\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && _objTemplateSelect.template_type!='HOA_DON_BAN_GIAO_XE' && _objTemplateSelect.template_type!='HOA_DON_BAO_DUONG_XE')\\r\\n      || (_oTemplateTT78 && _oTemplateTT78.is_discount && _oTemplateTT78.template_type!='HOA_DON_BAN_GIAO_XE' && _oTemplateTT78.template_type!='HOA_DON_BAO_DUONG_XE'))\\\"\\r\\n        dataField=\\\"discount\\\" headerCellTemplate=\\\"discountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.chiet_khau }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.ty_le_chiet_khau  }\\\" [format]=\\\"formatter.ty_le_chiet_khau \\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount) || (_oTemplateTT78 && _oTemplateTT78.is_discount))\\\"\\r\\n        dataField=\\\"amount_discount\\\" headerCellTemplate=\\\"amount_discountHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\" [editorOptions]=\\\"{ format: formatter.tien_chiet_khau }\\\"\\r\\n        [format]=\\\"formatter.tien_chiet_khau\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.discount_on_price\\\" dataField=\\\"discount_on_price\\\"\\r\\n        headerCellTemplate=\\\"discount_on_priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.ck_theo_don_gia }\\\" [format]=\\\"formatter.ck_theo_don_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && (_objTemplateSelect.template_type=='HOA_DON_BAN_GIAO_XE' || _objTemplateSelect.template_type=='HOA_DON_BAO_DUONG_XE'))\\r\\n    || (_oTemplateTT78 && _oTemplateTT78.is_discount && (_oTemplateTT78.template_type=='HOA_DON_BAN_GIAO_XE' || _oTemplateTT78.template_type=='HOA_DON_BAO_DUONG_XE'))) || configs.system_parameter.discount_on_price\\\"\\r\\n        dataField=\\\"price_after_discount\\\" headerCellTemplate=\\\"priceHeaderAfterDiscount\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\" [editorOptions]=\\\"{ format: formatter.don_gia,step: '0' }\\\"\\r\\n        [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column cssClass=\\\"vat-invoices\\\" *ngIf=\\\"isHdGTGT\\\" dataField=\\\"vat\\\" [editorOptions]=\\\"{showClearButton: true}\\\"\\r\\n        headerCellTemplate=\\\"vatHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.vat }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"isHdGTGT\\\" dataField=\\\"amount_vat\\\" headerCellTemplate=\\\"amountVatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" [editorOptions]=\\\"{ format: formatter.tien_thue }\\\"\\r\\n        [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && (_objTemplateSelect.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')) || (_oTemplateTT78 && (_oTemplateTT78.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n        dataField=\\\"other_tax\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.othertax  }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && (_objTemplateSelect.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')) || (_oTemplateTT78 && (_oTemplateTT78.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n        dataField=\\\"other_charge\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.money_other  }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tong_tien_sau_thue }}\\\" [editorOptions]=\\\"{ format: formatter.tong_tien }\\\"\\r\\n        [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- config column header -->\\r\\n      <div *dxTemplate=\\\"let d of 'exchangeRateHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ty_gia')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.CONTROLL.LABEL.currency_rate }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.quantity }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceaftervatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia_sau_thue')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.price_after_vat }}<img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeaderAfterDiscount'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.price_after_discount }}<img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'price_nteHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia_nte')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price_nte\\r\\n          }}<img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'discount_on_priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ck_theo_don_gia')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.discount_on_price }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountNoDiscountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien_chua_ck')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.amount_without_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ty_le_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amount_discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.amount_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount_vat\\r\\n          }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.total_money\\r\\n          }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_promotion_new\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'khuyen_mai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion_new\\\" [disabled]=\\\"d.data.is_promotion\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'is_transport_number'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_transport_number\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'phi_dich_vu'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_money_service\\\" (onValueChanged)=\\\"changePhiDV(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\" (onValueChanged)=\\\"changeCKTM(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'PhiHoanVe'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_refund_ticket\\\" (onValueChanged)=\\\"changePhiHoanVe(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <!-- <dxo-scrolling columnRenderingMode=\\\"virtual\\\"></dxo-scrolling> -->\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onCellPrepared)=\\\"onCellPrepared($event)\\\" *ngIf=\\\"isPXKDaiLy || isPXKNB\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.delete }}\\\" width=\\\"40\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"view_order\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.view_order }}\\\" width=\\\"40\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"product_code\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.product_code }}\\\"\\r\\n        alignment=\\\"center\\\" [editorOptions]=\\\"editorOptionsForCode\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\">\\r\\n          <!-- \\\"id\\\" contains the same values as \\\"authorId\\\" -->\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"product_name\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.product_name }}\\\" alignment=\\\"left\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\"></dxi-column>\\r\\n      <!-- Đơn hàng/ Hợp đồng -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"(extentionGrid && extentionGrid.don_hang_hop_dong) || (configs && configs.system_parameter && configs.system_parameter.display_contract_order)\\\"\\r\\n        dataField=\\\"contract_order\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_hang_hop_dong }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.po_no_contract_no }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- <dxi-column dataField=\\\"number_code\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.code }}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column> -->\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Khuyến mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.promotional_goods_on_the_invoice\\\" cellTemplate=\\\"khuyen_mai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.promotion }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.unit_code }}\\\" [width]=\\\"100\\\"\\r\\n        alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" onValueChanged=\\\"b($event)\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"isPXKDaiLy\\\" dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\" [width]=\\\"100\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column *ngIf=\\\"!isPXKDaiLy\\\" dataField=\\\"number_real_export\\\" headerCellTemplate=\\\"quantity_exportHeader\\\"\\r\\n        [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column *ngIf=\\\"!isPXKDaiLy\\\" dataField=\\\"number_real_import\\\" headerCellTemplate=\\\"quantity_importHeader\\\"\\r\\n        [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.so_luong\\t }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <!-- <dxi-column *ngIf=\\\"configs.system_parameter.view_price_nte\\\" dataField=\\\"price_nte\\\" headerCellTemplate=\\\"price_nteHeader\\\"\\r\\n        [width]=\\\"110\\\" [editorOptions]=\\\"{ format: formatter.price_nte }\\\" [format]=\\\"formatter.price_nte\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column> -->\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" [width]=\\\"90\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia }\\\" [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" [width]=\\\"109\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\" [width]=\\\"150\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- config column header -->\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.quantity }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{_translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'quantity_exportHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.quantity_export }}<img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'quantity_importHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.quantity_import }}<img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'price_nteHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia_nte')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.price_nte }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{_translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_promotion_new\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'khuyen_mai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion_new\\\" [disabled]=\\\"d.data.is_promotion\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{_translate.GRID.INVOICE_DETAILS.amount_after_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\" (onValueChanged)=\\\"cktmChange()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'product_code'\\\">\\r\\n        <!-- <dx-autocomplete valueExpr=\\\"code\\\"\\r\\n          [dataSource]=\\\"select.products\\\" [(value)]=\\\"d.data.code\\\">\\r\\n          <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n            <span>{{item.mhvth}}</span>\\r\\n          </div>\\r\\n        </dx-autocomplete> -->\\r\\n        <dxi-item editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.productsView, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n      </div>\\r\\n      <!-- <dxo-summary >\\r\\n        <dxi-total-item\\r\\n            summaryType=\\\"custom\\\" \\r\\n            [customizeText]=\\\"customizeText\\\"\\r\\n            showInColumn=\\\"amount\\\">\\r\\n        </dxi-total-item>\\r\\n      </dxo-summary> -->\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:20px;margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:15px}.support-invoice .support-link img{margin-right:15px;margin-top:-2px}.support-invoice #auto-input{margin-right:20px !important}.button-dropdown-extend{display:inline-flex}::ng-deep .vat-invoices .dx-texteditor-buttons-container{display:-ms-inline-grid;display:inline-grid}::ng-deep .wrap-column-autoC{padding:0px !important}::ng-deep .wrap-column-autoC .wrap-code-template dx-autocomplete{border:none !important}::ng-deep .wrap-column-autoC .wrap-code-template dx-autocomplete input{text-align:center}::ng-deep .wrap-column-autoC .wrap-name-template dx-autocomplete{border:none !important}::ng-deep .wrap-column-autoC .wrap-name-template dx-autocomplete input{text-align:left}\\n\"","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport * as XLSX from 'xlsx';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { ConfigDecimalComponent } from '@shared/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { pattern } from '@config/index';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\nimport * as _ from 'lodash'\r\n\r\n@Component({\r\n  selector: 'replace-vat-product-grip',\r\n  templateUrl: './replace-product-grip.component.html',\r\n  styleUrls: ['./replace-product-grip.component.scss']\r\n})\r\nexport class ReplaceProductGripComponent implements OnInit, OnDestroy {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n\r\n  routeSub: Subscription;\r\n\r\n  contextMenu = [{ text: 'Thêm' }, { text: 'Xóa' }];\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n  // @Input() not_auto: any; //Không tự tính giá trị\r\n  @Input() oldForm: any; // Không tự tính giá trị\r\n  select: any = {};\r\n  @Input() frmData: any; // Không tự tính giá trị\r\n  @Input() extentionGrid: any;\r\n  @Input() isTT78: boolean;\r\n  @Input() _oTemplateTT78: any;\r\n  // frmData: InvoiceModel = new InvoiceModel(1);\r\n  amount_after_vat: any = 0;\r\n  bsModalRef: BsModalRef;\r\n  showPopup = false; // Popup\r\n  dataExcelFile: any = null;\r\n  ttDaXuatHoaDon = false;\r\n  gripAllowEdit = false;\r\n  configs: any;\r\n  isHdGTGT = true;\r\n  dataExcelFileInfo: any = null;\r\n  _translate: any;\r\n  extras = [];\r\n  rowData = 1;\r\n  isPXKDaiLy = false\r\n  isPXKNB = false\r\n  loaiHoaDon: any\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  @Output('gripChange') gripChange = new EventEmitter<Array<any>>();\r\n  @Output('autoChange') autoChange = new EventEmitter<any>();\r\n\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private productsService: ProductsService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loaiHoaDon = this.route.snapshot.data.type;\r\n    if (this.loaiHoaDon == '03XKNB')\r\n      this.isPXKNB = true;\r\n    if (this.loaiHoaDon == sEnum.loaihoadon.HGDL04)\r\n      this.isPXKDaiLy = true;\r\n    if (this.oldForm.template_code.indexOf('02GTTT') >= 0 || this.oldForm.template_code.indexOf('07KPTQ') >= 0 || this.oldForm.template_code == \"2\") {\r\n      this.isHdGTGT = false;\r\n    }\r\n    this.configs = this.authService.getConfigs();\r\n\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.countrys = data.init[1].DM_QUOC_GIA;\r\n      // Hàng hóa dịch vụ\r\n      this.select.products = data.init[2];\r\n\r\n      this.select.products.forEach(item => {\r\n        item.mhvth = item.code + ': ' + item.name;\r\n        item.vat = item.vat != null ? item.vat.toString() : null;\r\n      });\r\n      if (data.init[4]) {\r\n        if (data.init[4].invoice_products) {\r\n          this.invoiceService.addProductInListP(this.select.products, data.init[4].invoice_products, 'code', 'mhvth')\r\n          data.init[4].invoice_products.forEach(item => {\r\n            if (item.product_name && item.unit_code) {\r\n              const obj1 = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (!obj1) {\r\n                this.select.unit_codes.push({\r\n                  id: Helper.makeid(),\r\n                  code: item.unit_code,\r\n                  name: item.unit_name ? item.unit_name : item.unit_code\r\n                });\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n      this.select.productsView = {\r\n        store: new CustomStore({\r\n          key: 'code',\r\n          loadMode: 'raw',\r\n          load: (loadOptions) => {\r\n            return this.select.products;\r\n          },\r\n          byKey: function (key) {\r\n            const _data = data.init[2].filter(p => p.code === key.toString());\r\n            return _data;\r\n          }\r\n        }),\r\n        paginate: true,\r\n        sort: 'name'\r\n      };\r\n\r\n\r\n    });\r\n    // Event\r\n    this.createUpdateEvent();\r\n  }\r\n\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    const product = this.invoice_products;\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        this.invoice_products.byKey(key).then((row) => {\r\n          switch (column) {\r\n            case 'view_order':\r\n              this.view_orderChange();\r\n              break;\r\n            case 'product_code':\r\n              this.product_codeChange(row);\r\n              break;\r\n            case 'unit_code':\r\n              this.unit_codeChange(row);\r\n              break;\r\n            case 'country_code':\r\n              this.country_codeChange(row);\r\n              break;\r\n            case 'quantity':\r\n            case 'number_real_export':\r\n            case 'number_real_import':\r\n            case 'price':\r\n            case 'price_nte':\r\n            case 'amount':\r\n            case 'amount_vat':\r\n            case 'amount_after_vat':\r\n            case 'amount_discount':\r\n            case 'discount':\r\n            case 'amount_without_discount':\r\n            case 'other_tax':\r\n            case 'other_charge':\r\n              this._tinhGiaTri();\r\n              break;\r\n            case 'price_after_vat':\r\n              if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n              else\r\n                row.price = row.price_after_vat;\r\n              this._tinhGiaTri();\r\n              break;\r\n            case 'vat':\r\n              if (this.configs.system_parameter.price_after_vat) {\r\n                if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                  row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                else\r\n                  row.price = row.price_after_vat;\r\n              }\r\n              this._tinhGiaTri();\r\n              break;\r\n            default:\r\n              break;\r\n            // }\r\n          }\r\n        }, (error) => {\r\n          alert(error);\r\n        });\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n      const eles = e.rowElement.getElementsByTagName('td');\r\n      if (!e.isEditing) {\r\n        eles[2].innerHTML = e.data.product_code;\r\n      }\r\n      if (e.data.error) {\r\n        const ele = eles[eles.length - 1];\r\n        ele.style.background = 'red url(\\'assets/img/icons/fa-remove.png\\') no-repeat 2% center';\r\n        ele.title = e.data.error;\r\n      }\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.column.dataField == \"product_code\") {\r\n        if (VStringService._getValueToString(e.data.product_code) != \"\" && !this.productCodePattern.test(e.data.product_code)) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.VALIDATION.required_productCode;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'product_code') {\r\n        e.editorOptions.onOpened = function (arg) {\r\n          const popupInstance = arg.component._popup;\r\n          popupInstance.option('width', 400);\r\n          popupInstance.option('minWidth', 400);\r\n          // popupInstance.off(\"optionChanged\", this.optionChangedHandler);\r\n          // popupInstance.on(\"optionChanged\", this.optionChangedHandler);\r\n        };\r\n      }\r\n      if (e.dataField === 'product_name') {\r\n        e.editorName = 'dxTextArea';\r\n      }\r\n      // e.editorOptions.onFocusOut = (args) => {\r\n      //   if (e.dataField === 'unit_code') {\r\n      //     if (this.select.unit_codes) {\r\n      //       const _obj = this.select.unit_codes.filter(p => p.code === e.row.data.unit_code)[0];\r\n      //       if (_obj) {\r\n      //         e.row.data.unit_name = _obj.name;\r\n      //       } else {\r\n      //         e.row.data.unit_name = 'fdsfsd';\r\n      //       }\r\n      //     }\r\n      //   }\r\n      //   if (e.dataField === 'country_code') {\r\n      //     const _obj = this.select.countrys.filter(p => p.code === e.row.data.country_code)[0];\r\n      //     if (_obj) {\r\n      //       e.row.data.country_name = _obj.name;\r\n      //     } else {\r\n      //       e.row.data.country_name = '';\r\n      //     }\r\n      //   }\r\n      //   this.invoice_products.update(e.row.data.id, e.row.data);\r\n      // };\r\n    }\r\n\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount' || e.dataField === 'amount_vat' || e.dataField === 'amount_after_vat') && e.parentType === 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row && e.row.rowType === 'data') {\r\n      e.items = [{\r\n        text: 'Thêm hàng',\r\n        onItemClick: () => {\r\n          this.addRow(e.row.rowIndex);\r\n        }\r\n      },\r\n      {\r\n        text: 'Xóa hàng',\r\n        onItemClick: () => {\r\n          this.deleteRow(e.row.data);\r\n        }\r\n      }];\r\n    }\r\n  }\r\n  /* Thêm dòng hàng hóa */\r\n  addRow(rowIndexFocus?) {\r\n    if (rowIndexFocus >= 0) {\r\n      let rowIndex = rowIndexFocus + 1;\r\n      const data = this.frmData.add_invoice_products_data(rowIndex, rowIndex);\r\n      if (data) {\r\n        this.invoice_products._array.splice(rowIndex, 0, data);\r\n        let order = 0;\r\n        this.invoice_products._array.forEach(item => {\r\n          item.order = ++order;\r\n          item.view_order = item.order;\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      let len, order, orderLast;\r\n      this.invoice_products.load().then((dataSource) => {\r\n        len = dataSource.length;\r\n        orderLast = dataSource[len - 1].order;\r\n      });\r\n      for (let i = 0; i < this.rowData; i++) {\r\n\r\n        if (len >= 1) {\r\n          order = ++orderLast;\r\n        } else {\r\n          order = 1;\r\n        }\r\n        const data = this.frmData.add_invoice_products_data(order, order);\r\n        this.invoice_products.insert(data);\r\n      }\r\n    }\r\n    this.dataSource.reload();\r\n  }\r\n\r\n  view_orderChange() {\r\n    if (!this.isTT78) {\r\n      let _index = 0;\r\n      this.dataSource.items().forEach(item => {\r\n        if (item.view_order && VStringService._getValueToString(this._objTemplateSelect.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          item.view_order = ++_index;\r\n        }\r\n        if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          if (!item.is_money_service) {\r\n            item.view_order = ++_index;\r\n          } else {\r\n            item.view_order = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      let _index = 0;\r\n      this.dataSource.items().forEach(item => {\r\n        if (item.view_order && VStringService._getValueToString(this._oTemplateTT78.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          item.view_order = ++_index;\r\n        }\r\n        if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          if (!item.is_money_service) {\r\n            item.view_order = ++_index;\r\n          } else {\r\n            item.view_order = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  // Thay đổi cột mã hàng\r\n  product_codeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code === row.product_code && !item.notCallApi) {\r\n        this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              row.product_name = product.name;\r\n              row.unit_code = this.checkUnitCode(product.unit_code);\r\n              row.quantity = null;\r\n              if (this.isHdGTGT)\r\n                row.vat = product.vat != null ? product.vat.toString() : null;\r\n              if (this.configs.system_parameter.price_after_vat) {\r\n                row.price_after_vat = product.price ? parseFloat(product.price) : product.price;\r\n                if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                  row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                else\r\n                  row.price = row.price_after_vat;\r\n              }\r\n              else\r\n                row.price = product.price ? parseFloat(product.price) : product.price;\r\n              row.amount = product.price ? parseFloat(product.price) : 0;\r\n              if (this.isHdGTGT) {\r\n                row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n                row.amount_after_vat = row.amount + row.amount_vat;\r\n              } else {\r\n                row.amount_after_vat = row.amount;\r\n              }\r\n              this.invoice_products.update(row.order, row);\r\n              this._tinhGiaTri();\r\n              return true;\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  unit_codeChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  country_codeChange(row) {\r\n    const _obj = this.select.countrys.filter(p => p.code === row.country_code)[0];\r\n    if (_obj) {\r\n      row.country_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.country_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  _tinhGiaTri() {\r\n    // this.dataSource.store().reload();\r\n    if (!this.isTT78) {\r\n      if (this.loaiHoaDon == '03XKNB' || this.loaiHoaDon == sEnum.loaihoadon.HGDL04) {\r\n        setTimeout(() => {\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, null, this.configs.system_parameter);\r\n          this.amount_after_vat = this.frmData.amount_after_vat;\r\n        }, 100);\r\n      } else {\r\n        setTimeout(() => {\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._objTemplateSelect, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayTongHop\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayChung\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n          }\r\n\r\n        }, 100);\r\n      }\r\n    }\r\n    else {\r\n      if (this.loaiHoaDon == '03XKNB' || this.loaiHoaDon == sEnum.loaihoadon.HGDL04) {\r\n        setTimeout(() => {\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, null, this.configs.system_parameter);\r\n          this.amount_after_vat = this.frmData.amount_after_vat;\r\n        }, 100);\r\n      } else {\r\n        setTimeout(() => {\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, this.select, this._oTemplateTT78, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayTongHop\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayChung\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n          }\r\n\r\n        }, 100);\r\n      }\r\n    }\r\n\r\n    // this.invoice_products = this.dataSource.items();\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    const p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n    });\r\n  }\r\n\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    // setTimeout(() => {\r\n    const check = confirm('Bạn có đồng ý xóa không?');\r\n    if (check && !this.ttDaXuatHoaDon) {\r\n      setTimeout(() => {\r\n        this.invoice_products.remove(item.id);\r\n\r\n        // this.dataSource.store().remove(item.id);\r\n        this.dataSource.reload();\r\n        this._tinhGiaTri();\r\n\r\n      });\r\n    }\r\n    // }, 200);\r\n  }\r\n\r\n  updateSomeTotalInputNotCheckCktm() {\r\n    setTimeout(() => {\r\n      this.gripChange.emit([this.dataSource, this.invoice_products, this.formatter]);\r\n    }, 200);\r\n  }\r\n\r\n  // Lấy mẫu bảng kê\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    let fields = [];\r\n    if (!this.isTT78) {\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayTongHop\r\n        && VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung\r\n        && VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayHoanVe) {\r\n        fields.push(\"other_tax\");\r\n        fields.push(\"other_charge\");\r\n      }\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonKinhDoanhXe) {\r\n        fields.push(\"engine_number\");\r\n        fields.push(\"chassis_number\");\r\n      }\r\n    }\r\n    else {\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayTongHop\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayHoanVe) {\r\n        fields.push(\"other_tax\");\r\n        fields.push(\"other_charge\");\r\n      }\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonKinhDoanhXe) {\r\n        fields.push(\"engine_number\");\r\n        fields.push(\"chassis_number\");\r\n      }\r\n      if (!this.configs.system_parameter.view_expiration_date)\r\n        fields.push(\"expiration_date\");\r\n      if (!this.configs.system_parameter.view_lot)\r\n        fields.push(\"lot\");\r\n      if (!this.configs.system_parameter.promotional_goods_on_the_invoice)\r\n        fields.push(\"is_promotion_new\");\r\n      if (!this.configs.system_parameter.is_promotion)\r\n        fields.push(\"is_promotion\");\r\n    }\r\n    if (!this.configs.system_parameter.product_exchange_rate)\r\n      fields.push(\"product_exchange_rate\");\r\n    if (!this.configs.system_parameter.product_date)\r\n      fields.push(\"product_date\");\r\n    // if (this.configs && this.configs.system_parameter && this.configs.system_parameter.display_contract_order)\r\n    //   fields.push(\"contract_order\");\r\n\r\n    if (!this.extentionGrid || (this.extentionGrid && !this.extentionGrid.ma_quan_ly)) {\r\n      fields.push(\"management_code\");\r\n    }\r\n    this.vatService.layFileMau({\r\n      customer_name: this.frmData.customer_name,\r\n      buyer_tax_code: this.frmData.buyer_tax_code,\r\n      buyer_address: this.frmData.buyer_address,\r\n      buyer_name: this.frmData.buyer_name,\r\n      invoice_type_name: \"\",\r\n      hiddens: fields\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  // Nạp dữ liệu bảng kê\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById('file-bang-ke').click();\r\n  }\r\n\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) {\r\n      throw new Error('Không thể chọn nhiều file');\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      const data = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 9 }));\r\n      const account = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 0 }));\r\n      const fileBangKe: any = document.getElementById('file-bang-ke');\r\n      fileBangKe.value = '';\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"view_order\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n      }\r\n      this.dataExcelFile = _arrData;\r\n      this.dataExcelFileInfo = account.slice(0, 4);\r\n      this.showPopup = true;\r\n    };\r\n    reader.readAsBinaryString(target.files[0]);\r\n  }\r\n\r\n  thayTheToanBo() {\r\n    this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'thaythe');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  themTiep() {\r\n    this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  fillData(fileData, info, status) {\r\n    if (info.length === 4) {\r\n      const customer_name = info[0].A.split(':');\r\n      if (customer_name.length > 1 && customer_name[1].trim() != '') {\r\n        this.frmData.customer_name = customer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_tax_code = info[1].A.split(':');\r\n      if (buyer_tax_code.length > 1 && buyer_tax_code[1].trim() != '') {\r\n        this.frmData.buyer_tax_code = buyer_tax_code[1].trim();\r\n      }\r\n      ////\r\n      const buyer_name = info[2].A.split(':');\r\n      if (buyer_name.length > 1 && buyer_name[1].trim() != '') {\r\n        this.frmData.buyer_name = buyer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_address = info[3].A.split(':');\r\n      if (buyer_address.length > 1 && buyer_address[1].trim() != '') {\r\n        this.frmData.buyer_address = buyer_address[1].trim();\r\n      }\r\n    }\r\n    if (status === 'thaythe') {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.invoice_products.remove(item.id);\r\n        });\r\n      });\r\n    } else {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount && !item.amount_vat && !item.amount_after_vat) {\r\n            this.invoice_products.remove(item.id);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n      if (element.product_name) {\r\n        let invoice = new Object;\r\n        invoice[\"id\"] = Helper.makeid();\r\n        invoice[\"view_order\"] = element.view_order ? parseInt(element.view_order) : null;\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"vat\"] = (element.vat && this.isHdGTGT) ? element.vat : null;\r\n        invoice[\"contract_order\"] = element.contract_order ? element.contract_order : \"\";\r\n        invoice[\"is_refund_ticket\"] = element.is_refund_ticket && (element.is_refund_ticket == \"X\" || element.is_refund_ticket == \"x\") ? true : false;\r\n        invoice[\"is_promotion\"] = element.is_promotion && (element.is_promotion == \"X\" || element.is_promotion == \"x\") ? true : false;\r\n        invoice[\"is_promotion_new\"] = element.is_promotion_new && (element.is_promotion_new == \"X\" || element.is_promotion_new == \"x\") ? true : false;\r\n        invoice[\"lot\"] = element.lot ? element.lot : null;\r\n        invoice[\"expiration_date\"] = element.expiration_date ? element.expiration_date : null;\r\n        if (element.price) {\r\n          if (this.configs.system_parameter.price_after_vat) {\r\n            invoice[\"price_after_vat\"] = element.price ? Helper.toNumber(element.price) : null;\r\n            if ((invoice[\"vat\"] == 5 || invoice[\"vat\"] == 10 || invoice[\"vat\"] == 7 || invoice[\"vat\"] == 3.5) && invoice[\"price_after_vat\"] !== null)\r\n              invoice[\"price\"] = (invoice[\"price_after_vat\"] / (1 + invoice[\"vat\"] / 100));\r\n            else\r\n              invoice[\"price\"] = invoice[\"price_after_vat\"];\r\n          }\r\n          else\r\n            invoice[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        }\r\n        invoice[\"amount\"] = element.amount ? Helper.toNumber(element.amount) : null;\r\n        invoice[\"amount_vat\"] = element.amount_vat ? Helper.toNumber(element.amount_vat) : null;\r\n        // invoice[\"note\"] = element.note ? element.note : null;\r\n        invoice[\"other_tax\"] = element.other_tax ? Helper.toNumber(element.other_tax) : null;\r\n        invoice[\"other_charge\"] = element.other_charge ? Helper.toNumber(element.other_charge) : null;\r\n        invoice[\"product_exchange_rate\"] = element.product_exchange_rate ? Helper.toNumber(element.product_exchange_rate) : null;\r\n        invoice[\"product_date\"] = element.product_date ? element.product_date : null;\r\n        invoice[\"engine_number\"] = element.engine_number ? element.engine_number : null;\r\n        invoice[\"chassis_number\"] = element.chassis_number ? element.chassis_number : null;\r\n        invoice[\"management_code\"] = element.management_code ? element.management_code : null;\r\n        if (invoice[\"amount_vat\"] !== null && invoice[\"amount\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"] + invoice[\"amount\"];\r\n        else\r\n          if (invoice[\"amount\"] !== null)\r\n            invoice[\"amount_after_vat\"] = invoice[\"amount\"];\r\n          else\r\n            if (invoice[\"amount_vat\"] !== null)\r\n              invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"];\r\n            else\r\n              invoice[\"amount_after_vat\"] = null;\r\n        if (invoice[\"other_tax\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_tax\"];\r\n        if (invoice[\"other_charge\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_charge\"];\r\n        const _obj = this.select.products.filter(p => p.code === invoice[\"product_code\"])[0];\r\n        if (!_obj && invoice[\"product_code\"] !== '') {\r\n          const _objPush = {\r\n            code: invoice[\"product_code\"],\r\n            name: invoice[\"product_name\"],\r\n            mhvth: invoice[\"product_code\"] + ': ' + invoice[\"product_name\"],\r\n          };\r\n          this.select.products.push(_objPush);\r\n        }\r\n        invoice[\"commercial_discount\"] = false;\r\n        this.invoice_products.insert(invoice);\r\n      }\r\n    });\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataGrid.instance.refresh();\r\n    this._tinhGiaTri();\r\n    Library.hideloading();\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (this.select.unit_codes && this.select.unit_codes.length > 0) {\r\n        const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n        if (_obj) {\r\n          return _obj.code;\r\n        } else {\r\n          let code = VStringService._convertToViKdau(unitName);\r\n          let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n          if (oDuplicate)\r\n            code = code + Helper.addtionalUnitCode();\r\n          this.select.unit_codes.push({ code: code, name: unitName });\r\n          return code;\r\n        }\r\n      } else {\r\n        this.select.unit_codes = [];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  changePhiDV(row) {\r\n    this.view_orderChange();\r\n    if (row.is_money_service) {\r\n      row.commercial_discount = false;\r\n    }\r\n    if (row.is_money_service && VStringService._getValueToString(row.product_name) === '') {\r\n      row.product_name = 'Phí dịch vụ';\r\n      this.invoice_products.update(row.id, row);\r\n    } else if (!row.is_money_service && VStringService._getValueToString(row.product_name) === 'Phí dịch vụ') {\r\n      row.product_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  changeCKTM(row) {\r\n    if (row.commercial_discount) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  changePhiHoanVe(row) {\r\n    if (row.commercial_discount) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'LAY_MAU_BANG_KE') {\r\n      this.layMauBangKe();\r\n    } else if (e.itemData.id === 'NAP_DU_LIEU_BANG_KE') {\r\n      this.napDuLieuTuBangKe();\r\n    }\r\n  }\r\n  onClickGuidReduce() {\r\n    this.router.navigate([]).then(result => { window.open('https://ihoadon.vn/hddt/danh-muc-hang-hoa-dich-vu-duoc-giam-thue-gtgt-theo-nghi-quyet-so-406-nq-ubtvqh15.html', '_blank'); });\r\n  }\r\n  _changeND92(e) {\r\n    if (e.value)\r\n      this.frmData.is_resolution_43 = !e.value;\r\n    this._tinhGiaTri();\r\n  }\r\n  _changeNQ43(e) {\r\n    if (e.value) {\r\n      this.frmData.is_exemption_decree = !e.value;\r\n      if (this.frmData.sales_percentage == null && parseInt(this.configs.system_parameter.value_rate_percent) > 0) {\r\n        this.frmData.sales_percentage = parseInt(this.configs.system_parameter.value_rate_percent);\r\n      }\r\n    }\r\n    else {\r\n      this.frmData.sales_percentage = null;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n  cktmChange(row) {\r\n    if (row.commercial_discount) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n  onContentReady = (e) => {\r\n    const arrFooter = [\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_after_vat, class: 'table-footer-1' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.total_money, class: 'table-footer-1' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_vat, class: 'table-footer-2' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount, class: 'table-footer-3' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_without_discount, class: 'table-footer-4' },\r\n    ]\r\n    this.invoiceService.formatSumColumnGrid(arrFooter);\r\n  }\r\n  editorOptionsForCode = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: (args) => {\r\n      return this.invoiceService.addProductInSelecBox(args, this.select.productsView, this.dataGrid);\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">BIÊN BẢN ĐIỀU CHỈNH HÓA ĐƠN SAI SÓT</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"dong()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\">\\r\\n      <h3 class=\\\"title\\\">CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM</h3>\\r\\n      <h3 class=\\\"title\\\">Độc lập – Tự do – Hạnh phúc</h3>\\r\\n      <h3 class=\\\"title\\\">—oOo—</h3>\\r\\n      <h3 class=\\\"title\\\">BIÊN BẢN ĐIỀU CHỈNH HÓA ĐƠN SAI SÓT</h3>\\r\\n      <h3 class=\\\"title\\\">Số: {{frmData.doc_relate_symbol}} / BBSS</h3>\\r\\n      <ul>\\r\\n        <li>\\r\\n            - Căn cứ  Điều 20, Thông tư: 39/2014/TT-BTC của Bộ Tài chính.\\r\\n        </li>\\r\\n        <li>\\r\\n            - Căn cứ Điều 9, Thông tư 32/2011/TT-BTC của Bộ Tài chính\\r\\n        </li>\\r\\n        <li>\\r\\n          Hôm nay, {{ngayVB}} đại diện hai bên gồm có:\\r\\n        </li>\\r\\n      </ul>\\r\\n      <dx-form [formData]=\\\"oldForm\\\" validationGroup=\\\"formData\\\">\\r\\n        <dxi-item class=\\\"label-text\\\" dataField=\\\"customer_name\\\" [label]=\\\"{text: 'Bên A'}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"buyer_address\\\" [label]=\\\"{text: 'Địa chỉ'}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item class=\\\"label-text\\\" dataField=\\\"buyer_tax_code\\\" [label]=\\\"{text: 'Mã số thuế'}\\\">\\r\\n          </dxi-item>\\r\\n          <dxi-item class=\\\"label-text\\\" dataField=\\\"buyer_mobile\\\" [label]=\\\"{text: 'Điện thoại'}\\\" [editorOptions]=\\\"{disabled: false}\\\">\\r\\n          </dxi-item>\\r\\n          <dxi-item class=\\\"label-text\\\" dataField=\\\"\\\" [label]=\\\"{text: 'Người đại diện'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n          </dxi-item>\\r\\n          <dxi-item class=\\\"label-text\\\" dataField=\\\"\\\" [label]=\\\"{text: 'Chức vụ'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        \\r\\n      </dx-form>\\r\\n      <br/>\\r\\n      <dx-form [formData]=\\\"benB\\\" validationGroup=\\\"formData\\\">\\r\\n      <dxi-item class=\\\"label-text\\\" dataField=\\\"name\\\" [label]=\\\"{text: 'Bên B'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item class=\\\"label-text\\\" dataField=\\\"business_address\\\" [label]=\\\"{text: 'Địa chỉ' }\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item class=\\\"label-text\\\" dataField=\\\"tax_code\\\" [label]=\\\"{text: 'Mã số thuế', class:'label-text' }\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n          </dxi-item>\\r\\n          <dxi-item class=\\\"label-text\\\" dataField=\\\"contact_mobile\\\" [label]=\\\"{text: 'Điện thoại'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n          </dxi-item>\\r\\n          <dxi-item class=\\\"label-text\\\" dataField=\\\"surrogate_name\\\" [label]=\\\"{text: 'Người đại diện'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n          </dxi-item>\\r\\n          <dxi-item class=\\\"label-text\\\" dataField=\\\"surrogate_position\\\" [label]=\\\"{text: 'Chức vụ'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dx-form>\\r\\n      <br/>\\r\\n      <p>Hai bên, thống nhất lập biên bản này để điều chỉnh hóa đơn (GTGT) như sau:</p>\\r\\n      <ul>\\r\\n          <li>\\r\\n              - Mẫu số: {{oldForm.template_code}}\\r\\n          </li>\\r\\n          <li>\\r\\n              - Ký hiệu: {{oldForm.invoice_series}} số {{oldForm.invoice_number}} ngày {{invoice_date}}\\r\\n          </li>\\r\\n        </ul>\\r\\n        <p>Chúng tôi cam kết và hoàn toàn chịu trách nhiệm về việc ghi nhận sai sót này. Đồng thời, bên Bán (Bên B) sẽ xuất hóa đơn điều chỉnh mẫu số: {{_objTemplateSelect.template_code}}, ký hiệu {{_objTemplateSelect.invoice_series}} </p>\\r\\n      <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"5\\\">\\r\\n            <dxi-item dataField=\\\"invoice_number\\\" [label]=\\\"{text: 'Số hóa đơn'}\\\">\\r\\n            <dxi-validation-rule  type=\\\"required\\\" message=\\\"Số hóa đơn {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: 'Ngày hóa đơn' }\\\" editorType=\\\"dxDateBox\\\"\\r\\n            [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\">\\r\\n          </dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"destroy_reason\\\" [label]=\\\"{text: 'Lý do điều chỉnh'}\\\">\\r\\n            <dxi-validation-rule  type=\\\"required\\\" message=\\\"Lý do điều chỉnh {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n        <p>để hai bên làm căn cứ kê khai thuế, hạch toán kế toán.</p>\\r\\n        <br/>\\r\\n      <ul>\\r\\n          <li>\\r\\n              Biên bản này lập thành 02 bản, mỗi bên giữ 01 bản có giá trị pháp lý như nhau.\\r\\n          </li>\\r\\n        </ul>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.sign}}\\\" icon=\\\"{{_translate.ICONS.pencil}}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n      (click)=\\\"onSubmit(null)\\\">\\r\\n      </dx-button>\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.close}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n      </dx-button>\\r\\n    </div>\\r\\n  </form>\"","module.exports = \".modal-body{line-height:1.5}.modal-body .title{font-weight:bold;margin-bottom:5px;text-align:center}.modal-body ul{list-style-type:none;padding-left:5px}.modal-body ul li{margin-bottom:5px}.modal-body .m-bold{font-weight:bold}.modal-body .view-document{margin-top:5px;margin-bottom:5px}.label-text{float:left}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Library, Helper, VChanggeMoneyService, AuthService, VStringService } from '@core/index';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { InfoUnitService, InfoUnit } from '@modules/info-unit/shared';\r\nimport * as moment from 'moment';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\n@Component({\r\n  selector: 'app-report-adjust-inv',\r\n  templateUrl: './report-adjust-inv.component.html',\r\n  styleUrls: ['./report-adjust-inv.component.scss']\r\n})\r\nexport class ReportAdjustInvComponent implements OnInit {\r\n\r\n  _translate: any;\r\n  customer: any;\r\n  frmData: any;\r\n  frmDataClone: any;\r\n  oldForm: any;\r\n  _objTemplateSelect: any;\r\n  benB: any = {};\r\n  fileData: any;\r\n  invoice_date = \"\";\r\n  ngayVB = \"\";\r\n\r\n  constructor(private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private infoUnitService: InfoUnitService,\r\n    private vatService: VatService,\r\n\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.frmDataClone = Object.assign({}, this.frmData);\r\n    //this.customer.name = \"CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM\";\r\n    this.invoice_date = moment(this.oldForm.invoice_date).format('DD/MM/YYYY');\r\n    this.ngayVB = \"ngày \" + moment(this.frmData.doc_relate_date).format('DD')\r\n      + \" tháng \" + moment(this.frmData.doc_relate_date).format('MM')\r\n      + \" năm \" + moment(this.frmData.doc_relate_date).format('YYYY');\r\n    this.getUnitInfo();\r\n  }\r\n  getUnitInfo() {\r\n    let accountId = this.authService.getCurrentUser().account.id;\r\n    if (accountId) {\r\n      this.infoUnitService.getInfo(accountId).subscribe((res) => {\r\n        delete res.data.account.van_account_info;\r\n        this.benB = res.data.account;\r\n      })\r\n    }\r\n  }\r\n  onSubmit(e) {\r\n    Library.showloading();\r\n    let inv = Object.assign({}, this.oldForm);\r\n    inv.doc_relate_date = this.frmData.doc_relate_date;\r\n    inv.doc_relate_symbol = this.frmData.doc_relate_symbol;\r\n    inv.destroy_reason = this.frmData.destroy_reason;\r\n\r\n    inv.invoice_date_new = this.frmData.invoice_date;\r\n    inv.invoice_number_new = this.frmData.invoice_number;\r\n    inv.template_code_new = this._objTemplateSelect.template_code;\r\n    inv.invoice_series_new = this._objTemplateSelect.invoice_series;\r\n\r\n    inv.adjustment_type = \"1\";\r\n    inv.auto_value_price = inv.auto_value_price == null ? false : inv.auto_value_price;\r\n    //inv.invoice_products =this.oldForm.invoice_products;\r\n    // this.dataSource.items().forEach(item => {\r\n    //   if (item.product_name)\r\n    //     inv.invoice_products.push(item);\r\n    // });\r\n    inv.invoice_files = [];\r\n    this.vatService.xuatMauBienBanDc(inv).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let file = rs.data.invoice;\r\n        let _attachFile = this.fileData.map(e => e.file_name);\r\n        let _index = _attachFile.indexOf(file.file_name)\r\n        if (_index == -1) {\r\n          this.fileData.push({ type: \"DK\", file_name: file.file_name, file_content: file.file_content });\r\n          //Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        } else {\r\n          this.fileData.splice(_index, 1);\r\n          this.fileData.push({ type: \"DK\", file_name: file.file_name, file_content: file.file_content });\r\n        }\r\n        this.bsModalRef.hide();\r\n        Library.notify(\"Xuất biên bản điều chỉnh thành công\", 'success');\r\n\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  dong() {\r\n    //this.isValid = false;\r\n    this.frmData.invoice_date = this.frmDataClone.invoice_date;\r\n    this.frmData.invoice_number = this.frmDataClone.invoice_number;\r\n    this.bsModalRef.hide();\r\n  }\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n  <div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title pull-left\\\">BIÊN BẢN THU HỒI HÓA ĐƠN</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"dong()\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <h3 class=\\\"title\\\">CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM</h3>\\r\\n    <h3 class=\\\"title\\\">Độc lập – Tự do – Hạnh phúc</h3>\\r\\n    <h3 class=\\\"title\\\">—oOo—</h3>\\r\\n    <h3 class=\\\"title\\\">BIÊN BẢN THU HỒI HÓA ĐƠN ĐÃ LẬP</h3>\\r\\n    <h3 class=\\\"title\\\">Số: {{frmData.doc_relate_symbol}} / BBTHHĐ</h3>\\r\\n    <ul>\\r\\n      <li>\\r\\n        - Căn cứ Thông tư số 39/2014/TT-BTC ngày 31/3/2014 của Bộ Tài chính hướng dẫn thi hành Nghị định số\\r\\n        51/2010/NĐ-CP.\\r\\n      </li>\\r\\n      <li>\\r\\n        Hôm nay, {{ngayVB}} đại diện hai bên gồm có:\\r\\n      </li>\\r\\n    </ul>\\r\\n    <dx-form [formData]=\\\"oldForm\\\" validationGroup=\\\"formData\\\">\\r\\n      <dxi-item class=\\\"label-text\\\" dataField=\\\"customer_name\\\" [label]=\\\"{text: 'Bên A'}\\\">\\r\\n      </dxi-item>\\r\\n      <dxi-item dataField=\\\"buyer_address\\\" [label]=\\\"{text: 'Địa chỉ'}\\\">\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item class=\\\"label-text\\\" dataField=\\\"buyer_tax_code\\\" [label]=\\\"{text: 'Mã số thuế'}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item class=\\\"label-text\\\" dataField=\\\"buyer_mobile\\\" [label]=\\\"{text: 'Điện thoại'}\\\" [editorOptions]=\\\"{disabled: false}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item class=\\\"label-text\\\" dataField=\\\"\\\" [label]=\\\"{text: 'Người đại diện'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item class=\\\"label-text\\\" dataField=\\\"\\\" [label]=\\\"{text: 'Chức vụ'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      \\r\\n    </dx-form>\\r\\n    <br/>\\r\\n    <dx-form [formData]=\\\"benB\\\" validationGroup=\\\"formData\\\">\\r\\n    <dxi-item class=\\\"label-text\\\" dataField=\\\"name\\\" [label]=\\\"{text: 'Bên B'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n      </dxi-item>\\r\\n      <dxi-item class=\\\"label-text\\\" dataField=\\\"business_address\\\" [label]=\\\"{text: 'Địa chỉ' }\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item class=\\\"label-text\\\" dataField=\\\"tax_code\\\" [label]=\\\"{text: 'Mã số thuế', class:'label-text' }\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item class=\\\"label-text\\\" dataField=\\\"contact_mobile\\\" [label]=\\\"{text: 'Điện thoại'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item class=\\\"label-text\\\" dataField=\\\"surrogate_name\\\" [label]=\\\"{text: 'Người đại diện'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n        <dxi-item class=\\\"label-text\\\" dataField=\\\"surrogate_position\\\" [label]=\\\"{text: 'Chức vụ'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n    <br/>\\r\\n    <p>Hai bên, thống nhất lập biên bản thu hồi hóa đơn số: {{oldForm.template_code}} đã lập, có ký hiệu {{oldForm.invoice_series}} số {{oldForm.invoice_number}} do {{benB.name}} phát hành {{invoice_date}}  để xóa bỏ theo quy định, và sẽ xuất thay thế bằng hóa đơn số {{_objTemplateSelect.template_code}}, ký hiệu {{_objTemplateSelect.invoice_series}}</p>\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"5\\\">\\r\\n          <dxi-item dataField=\\\"invoice_number\\\" [label]=\\\"{text: 'Số hóa đơn'}\\\">\\r\\n          <dxi-validation-rule  type=\\\"required\\\" message=\\\"Số hóa đơn {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: 'Ngày hóa đơn' }\\\" editorType=\\\"dxDateBox\\\"\\r\\n          [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss'}\\\">\\r\\n        </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"destroy_reason\\\" [label]=\\\"{text: 'Lý do thu hồi hóa đơn'}\\\">\\r\\n          <dxi-validation-rule  type=\\\"required\\\" message=\\\"Lý do thu hồi hóa đơn {{ _translate.VALIDATION.required }}\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n      </dx-form>\\r\\n      <br/>\\r\\n    <ul>\\r\\n        <li>\\r\\n            Chúng tôi cam kết và hoàn toàn chịu trách nhiệm về việc thu hồi và xóa bỏ hóa đơn này.\\r\\n        </li>\\r\\n        <li>\\r\\n            Biên bản này lập thành 02 bản, Bên A giữ 01 bản, bên B giữ 01 bản.\\r\\n        </li>\\r\\n      </ul>\\r\\n  </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.sign}}\\\" icon=\\\"{{_translate.ICONS.pencil}}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n    (click)=\\\"onSubmit(null)\\\">\\r\\n    </dx-button>\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.close}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n    </dx-button>\\r\\n  </div>\\r\\n</form>\"","module.exports = \".modal-body{line-height:1.5}.modal-body .title{font-weight:bold;margin-bottom:5px;text-align:center}.modal-body ul{list-style-type:none;padding-left:5px}.modal-body ul li{margin-bottom:5px}.modal-body .m-bold{font-weight:bold}.modal-body .view-document{margin-top:5px;margin-bottom:5px}.label-text{float:left}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Library, Helper, VChanggeMoneyService, AuthService, VStringService } from '@core/index';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { InfoUnitService, InfoUnit } from '@modules/info-unit/shared';\r\nimport * as moment from 'moment';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\n@Component({\r\n  selector: 'app-report-cancel-inv',\r\n  templateUrl: './report-cancel-inv.component.html',\r\n  styleUrls: ['./report-cancel-inv.component.scss']\r\n})\r\nexport class ReportCancelInvComponent implements OnInit {\r\n  _translate: any;\r\n  customer: any;\r\n  frmData: any;\r\n  frmDataClone: any;\r\n  oldForm: any;\r\n  _objTemplateSelect: any;\r\n  benB: any = {};\r\n  fileData: any;\r\n  invoice_date = \"\";\r\n  ngayVB = \"\";\r\n\r\n  constructor(private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private infoUnitService: InfoUnitService,\r\n    private vatService: VatService,\r\n\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.frmDataClone = Object.assign({}, this.frmData);\r\n    //this.customer.name = \"CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM\";\r\n    this.invoice_date = \"ngày \" + moment(this.oldForm.invoice_date).format('DD')\r\n      + \" tháng \" + moment(this.oldForm.invoice_date).format('MM')\r\n      + \" năm \" + moment(this.oldForm.invoice_date).format('YYYY');\r\n    this.ngayVB = \"ngày \" + moment(this.frmData.doc_relate_date).format('DD')\r\n      + \" tháng \" + moment(this.frmData.doc_relate_date).format('MM')\r\n      + \" năm \" + moment(this.frmData.doc_relate_date).format('YYYY');\r\n    this.getUnitInfo();\r\n  }\r\n  getUnitInfo() {\r\n    let accountId = this.authService.getCurrentUser().account.id;\r\n    if (accountId) {\r\n      this.infoUnitService.getInfo(accountId).subscribe((res) => {\r\n        delete res.data.account.van_account_info;\r\n        this.benB = res.data.account;\r\n      })\r\n    }\r\n  }\r\n  onSubmit(e) {\r\n    Library.showloading();\r\n    let inv = Object.assign({}, this.oldForm);\r\n    inv.doc_relate_date = this.frmData.doc_relate_date;\r\n    inv.doc_relate_symbol = this.frmData.doc_relate_symbol;\r\n    inv.destroy_reason = this.frmData.destroy_reason;\r\n\r\n    inv.invoice_date_new = this.frmData.invoice_date;\r\n    inv.invoice_number_new = this.frmData.invoice_number;\r\n    inv.template_code_new = this._objTemplateSelect.template_code;\r\n    inv.invoice_series_new = this._objTemplateSelect.invoice_series;\r\n\r\n    inv.adjustment_type = \"1\";\r\n    inv.auto_value_price = inv.auto_value_price == null ? false : inv.auto_value_price;\r\n    //inv.invoice_products =this.oldForm.invoice_products;\r\n    // this.dataSource.items().forEach(item => {\r\n    //   if (item.product_name)\r\n    //     inv.invoice_products.push(item);\r\n    // });\r\n    inv.invoice_files = [];\r\n    this.vatService.xuatMauBienBanThuHoi(inv).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let file = rs.data.invoice;\r\n        let _attachFile = this.fileData.map(e => e.file_name);\r\n        let _index = _attachFile.indexOf(file.file_name)\r\n        if (_index == -1) {\r\n          this.fileData.push({ type: \"DK\", file_name: file.file_name, file_content: file.file_content });\r\n          //Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        } else {\r\n          this.fileData.splice(_index, 1);\r\n          this.fileData.push({ type: \"DK\", file_name: file.file_name, file_content: file.file_content });\r\n        }\r\n        this.bsModalRef.hide();\r\n        Library.notify(\"Xuất biên bản thu hồi thành công\", 'success');\r\n\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  dong() {\r\n    //this.isValid = false;\r\n    this.frmData.invoice_date = this.frmDataClone.invoice_date;\r\n    this.frmData.invoice_number = this.frmDataClone.invoice_number;\r\n    this.bsModalRef.hide();\r\n  }\r\n}\r\n","module.exports = \"\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <div class=\\\"row search-section\\\">\\r\\n    <div class=\\\"col-md-8\\\" style=\\\"padding-right: 0px\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">THÔNG BÁO HÓA ĐƠN SAI SÓT VỚI CƠ QUAN THUẾ</h4>\\r\\n    </div>\\r\\n    <div class=\\\"col-md-4\\\" style=\\\"max-height: 70px\\\">\\r\\n      <div class=\\\"list-header row\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <div class=\\\"pull-right button-panel\\\">\\r\\n            <dx-button (click)=\\\"addRow()\\\" icon=\\\"fa fa-plus-circle\\\"\\r\\n                       text=\\\"Thêm dòng\\\" type=\\\"default\\\"></dx-button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <dx-data-grid\\r\\n    id=\\\"invoiceHistoryGrid\\\"\\r\\n    [dataSource]=\\\"dataSource\\\"\\r\\n    [showBorders]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\"\\r\\n    (onCellPrepared)=\\\"onCellPrepared($event)\\\"\\r\\n    [showRowLines]=\\\"true\\\">\\r\\n    <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n    <!-- Xóa -->\\r\\n    <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\"\\r\\n    [width]=\\\"45\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n    </dxi-column>\\r\\n    <!-- STT -->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" dataField=\\\"order\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\"\\r\\n    [width]=\\\"53\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <!-- Loại áp dụng HĐ ĐT -->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" caption=\\\"Loại áp dụng HĐ ĐT\\\" dataField=\\\"type_apply_invoice\\\"\\r\\n              alignment=\\\"left\\\" minWidth=\\\"200\\\">\\r\\n      <dxo-lookup [dataSource]=\\\"typeInvoices\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n    </dxi-column>\\r\\n    <!-- Mẫu số-->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" dataField=\\\"template_code\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}\\\"\\r\\n              [width]=\\\"113\\\" alignment=\\\"center\\\" >\\r\\n    </dxi-column>\\r\\n    <!-- Ký hiệu -->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" dataField=\\\"invoice_series\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n              [width]=\\\"113\\\" alignment=\\\"center\\\" >\\r\\n    </dxi-column>\\r\\n    <!-- Số hóa đơn -->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\"\\r\\n              caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n              alignment=\\\"center\\\" >\\r\\n    </dxi-column>\\r\\n    <!-- Ngày hóa đơn -->\\r\\n    <dxi-column [allowEditing]=\\\"false\\\" dataField=\\\"invoice_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n              format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" >\\r\\n    </dxi-column>\\r\\n    <!-- Mã CQT cấp -->\\r\\n     <dxi-column [allowEditing]=\\\"false\\\" dataField=\\\"tax_authority_code\\\" caption=\\\"Mã CQT cấp\\\"\\r\\n              minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" >\\r\\n    </dxi-column>\\r\\n    <!-- Tính chất thông báo -->\\r\\n    <dxi-column [allowEditing]=\\\"true\\\" dataField=\\\"notification_nature\\\" caption=\\\"Tính chất thông báo\\\"\\r\\n                 alignment=\\\"center\\\"\\r\\n                [editorOptions]=\\\"{showClearButton: true ,step: '0'}\\\">\\r\\n    <dxo-lookup [dataSource]=\\\"tinhchatTB\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n    </dxi-column>\\r\\n    <!-- Lý do -->\\r\\n    <dxi-column [allowEditing]=\\\"true\\\" dataField=\\\"reason\\\"\\r\\n                caption=\\\"Lý do\\\" alignment=\\\"left\\\" minWidth=\\\"150\\\">\\r\\n    </dxi-column>\\r\\n    <dxi-column [visible]=\\\"false\\\" dataField=\\\"is_invoice_with_code\\\" caption=\\\"Mã CQT cấp\\\"\\r\\n                minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" >\\r\\n   </dxi-column>\\r\\n    <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n      <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\"></dx-check-box>\\r\\n    </div>\\r\\n    <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n      <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template_code }}</p>\\r\\n      <p>{{ d.data.invoice_series }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n        *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n    </div>\\r\\n      <div *dxTemplate=\\\"let data of 'DinhKemFile'\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"dinhKemFile($event)\\\">\\r\\n            <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"data.rowIndex\\\" accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n             <p *ngIf=\\\"!isView || adjustment_type == '7'\\\">Chọn file</p>\\r\\n            <p *ngIf=\\\"data.data.invoice_files&&data.data.invoice_files.length\\\" (click)=\\\"downloadFile(data.data.invoice_files[0])\\\">{{data.data.invoice_files[0].file_name}}</p>\\r\\n          </a>\\r\\n        </div>\\r\\n      <!-- <div *dxTemplate=\\\"let d of 'downloadBB'\\\">\\r\\n          <a href=\\\"javascript:void(0)\\\" (click)=\\\"xuatMauBienBan(d.data)\\\"><img src=\\\"assets\\\\img\\\\icons\\\\TaiMauBangKe.png\\\"></a>\\r\\n        </div> -->\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" style=\\\"margin-right: 162px;\\\">\\r\\n    <dxi-item itemType=\\\"group\\\" [colCount]=\\\"3\\\">\\r\\n      <dxi-item dataField=\\\"notification_type\\\" editorType=\\\"dxCheckBox\\\" [template]=\\\"'unitRisk'\\\">\\r\\n        <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n      </dxi-item>\\r\\n      <dxi-item dataField=\\\"notification_number\\\" [editorOptions]=\\\"{readOnly: isReadOnly }\\\">\\r\\n        <dxo-label text=\\\"Số TB của CQT\\\"></dxo-label>\\r\\n      </dxi-item>\\r\\n      <dxi-item dataField=\\\"notification_date\\\" [template]=\\\"'notifydate'\\\">\\r\\n        <dxo-label text=\\\"Ngày TB của CQT\\\"></dxo-label>\\r\\n      </dxi-item>\\r\\n    </dxi-item>\\r\\n    <div *dxTemplate = \\\"let d of 'notifydate'\\\">\\r\\n      <dx-date-box [(value)]=\\\"frmData.notification_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\" [displayFormat]=\\\"'dd/MM/yyyy'\\\" [(readOnly)] = \\\"isReadOnly\\\">\\r\\n      </dx-date-box>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'unitRisk'\\\">\\r\\n      <dx-check-box [(value)]=\\\"frmData.notification_type\\\" text=\\\"HĐ CQT yêu cầu rà soát\\\" (onValueChanged)=\\\"changedUnitRisk($event)\\\"></dx-check-box>\\r\\n      <div class=\\\"toggle normal\\\" style=\\\"display: flex; align-items: center;margin-top: -17px;margin-left: 180px;\\\">\\r\\n        <img id=\\\"link3\\\" style=\\\"padding-bottom: 6px;cursor: pointer\\\" src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" (click)=\\\"onClickUnitType()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n      </div>\\r\\n      <dx-popover\\r\\n      target=\\\"#link3\\\"\\r\\n              position=\\\"top\\\"\\r\\n              [width]=\\\"327\\\"\\r\\n              [(visible)]=\\\"isDisplayUnitRisk\\\">\\r\\n              <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n                  <p>Chọn vào đây với các hóa đơn mà Cơ quan Thuế gửi thông báo yêu cầu đơn vị rà soát và giải trình</p>\\r\\n                  <p>Yêu cầu nhập số thông báo và ngày thông báo của CQT</p>\\r\\n              </div>\\r\\n          </dx-popover>\\r\\n    </div>\\r\\n  </dx-form>\\r\\n  <dx-button text=\\\"Gửi thông báo cho CQT \\\" (click)=\\\"GuiThongBao()\\\" icon=\\\"{{_translate.ICONS.save }}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"Đóng\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\"","module.exports = \".gach-chan{text-decoration:underline}.img-upload-second{text-align:center}.img-upload-second i{margin-top:10px;width:40px;height:auto;cursor:pointer}.img-upload-second p{margin-top:10px}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { Base64 } from 'js-base64';\r\nimport * as moment from 'moment';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\n\r\nimport { Library, SocketService, AuthService, Helper, VStringService, VSelectBoxService, sEnum, VPreviewInvService } from '@core/index';\r\nimport { HandleInvoiceService } from '../../shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String, StringBuilder } from 'typescript-string-operations';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { pattern } from '@config/index';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { SearchService } from '@modules/search/shared';\r\n\r\n@Component({\r\n  selector: 'app-report-tax-invoice-error',\r\n  templateUrl: './report-tax-invoice-error.component.html',\r\n  styleUrls: ['./report-tax-invoice-error.component.scss']\r\n})\r\nexport class ReportTaxInvoiceErrorComponent implements OnInit {\r\n\r\n  data: any;\r\n  isView: any;\r\n  configs: any;\r\n  invoices: any;\r\n  invoicesStore: ArrayStore;\r\n  dataSource: DataSource;\r\n  ioSignature: any;\r\n  _language: string;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  _translate: any;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  nodeSign: any;\r\n  countReport: any;\r\n  emailPattern: any = pattern.email;\r\n  invoiceData: any;\r\n  typeInvoices: any;\r\n  isDisplayUnitRisk: boolean = false;\r\n  maskTemplateCode: string = \"XX/XX/XXXX\";\r\n  rulesTemplateCode = { 'X': /[0-9]/ };\r\n  listTemplate: any;\r\n  isReadOnly: boolean = true;\r\n  infoDangKy: any;\r\n  isSchool = false;\r\n  //{ 'h': /^([0]?[0-9]|[12][0-9]|[3][01])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})/ };\r\n  tinhchatTB = [\r\n    {\r\n      name: \"Hủy\",\r\n      code: \"1\"\r\n    },\r\n    {\r\n      name: \"Điều chỉnh\",\r\n      code: \"2\"\r\n    },\r\n    {\r\n      name: \"Thay thế\",\r\n      code: \"3\"\r\n    },\r\n    {\r\n      name: \"Giải trình\",\r\n      code: \"4\"\r\n    }\r\n  ]\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  frmData = {\r\n    notification_number: \"\",\r\n    notification_type: false,\r\n    notification_date: \"\",\r\n    invoices: []\r\n  }\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private socketService: SocketService,\r\n    private handleInvoiceService: HandleInvoiceService,\r\n    private authService: AuthService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private router: Router,\r\n    private spinner: NgxSpinnerService,\r\n    private vPreviewInvService : ViewInvoiceService,\r\n    private searchService: SearchService,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n  ngOnInit() {\r\n    const account_type = this.authService.getCurrentUser().account.account_type;\r\n    if (account_type == sEnum.khoidonvi.HSSV) {\r\n      this.isSchool = true;\r\n    } else {\r\n      this.isSchool = false;\r\n    }\r\n    this.typeInvoices = VSelectBoxService.typeEInvoice(this._translate);\r\n    this.invoicesStore = new ArrayStore({\r\n      key: 'id',\r\n      data: []\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoicesStore\r\n    });\r\n\r\n    this.convertData();\r\n    this.connectWebsocket();\r\n  }\r\n  convertData() {\r\n    if (this.data && this.data.length > 0) {\r\n      let order = 0;\r\n      this.data.forEach(invoice => {\r\n        let rowInvoice = new Object;\r\n        rowInvoice[\"id\"] = invoice.id;\r\n        /* Loại áp dụng hóa đơn điện tử \r\n            - HĐ theo TT78 (Vào XML thẻ LADHDDT giá trị là 1) \r\n            - HĐ có mã xác thực theo NĐ 51/2010/NĐ-CP (Vào XML thẻ LADHDDT giá trị là 2)\r\n            - HĐĐT theo TT32 hoặc HĐ giấy theo TT39 (Vào XML thẻ LADHDDT giá trị là 3)\r\n            - HĐ đặt in theo NĐ 123/2020/NĐ-CP (Vào XML thẻ LADHDDT giá trị là 4)\r\n       */\r\n        if (invoice.xml_type == 3)\r\n          rowInvoice[\"type_apply_invoice\"] = 1;\r\n        else\r\n          rowInvoice[\"type_apply_invoice\"] = 3;\r\n        rowInvoice[\"template_code\"] = invoice.template_code;\r\n        rowInvoice[\"invoice_series\"] = invoice.invoice_series;\r\n        rowInvoice[\"invoice_number\"] = invoice.invoice_number;\r\n        rowInvoice[\"invoice_date\"] = invoice.invoice_date;\r\n        rowInvoice[\"tax_authority_code\"] = invoice.tax_authority_code;\r\n        rowInvoice[\"adjustment_type\"] = invoice.adjustment_type;\r\n        rowInvoice[\"is_invoice_with_code\"] = invoice.is_invoice_with_code;\r\n        rowInvoice[\"notification_nature\"] = \"\";\r\n        rowInvoice[\"reason\"] = \"\";\r\n        rowInvoice[\"invoice_id\"] = invoice.id;\r\n        rowInvoice[\"order\"] = ++order;\r\n        rowInvoice[\"row_edit\"] = false;\r\n        this.invoicesStore.insert(rowInvoice);\r\n      });\r\n    }\r\n    else {\r\n      this.addRow();\r\n    }\r\n  }\r\n  /* Thêm dòng hàng hóa */\r\n  addRow() {\r\n    let len, order;\r\n    this.invoicesStore.load().then((dataSource) => {\r\n      if (dataSource.length >= 1) {\r\n        len = dataSource.length;\r\n        order = dataSource[len - 1].order + 1;\r\n      } else {\r\n        order = 1;\r\n      }\r\n    });\r\n    let data = this.add_invoice(order);\r\n    this.invoicesStore.insert(data);\r\n    if (this.dataGrid && this.dataGrid.instance)\r\n      this.dataGrid.instance.refresh();\r\n  }\r\n  add_invoice(order) {\r\n    return {\r\n      id: Helper.makeid(),\r\n      order: order,\r\n      template_code: \"\",\r\n      invoice_series: \"\",\r\n      invoice_number: \"\",\r\n      type_apply_invoice: null,\r\n      invoice_date: \"\",\r\n      tax_authority_code: \"\",\r\n      notification_nature: \"\",\r\n      adjustment_type: \"\",\r\n      reason: \"\",\r\n      is_invoice_with_code: null,\r\n      row_edit: true,\r\n      invoice_id: null\r\n    }\r\n  }\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    setTimeout(() => {\r\n      const check = confirm(this._translate.CONFIRM.delete);\r\n      if (check) {\r\n        setTimeout(() => {\r\n          this.invoicesStore.remove(item.id);\r\n          if (this.dataGrid && this.dataGrid.instance)\r\n            this.dataGrid.instance.refresh();\r\n        }, 100);\r\n      }\r\n    }, 200);\r\n  }\r\n  createDocRelateNumber() {\r\n    let number_report = \"\";\r\n    if (this.countReport < 10)\r\n      number_report = '0' + this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    else\r\n      number_report = this.countReport + '/' + new Date().getFullYear() + '/BB-HBHĐ';\r\n    this.countReport++;\r\n    return number_report;\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        }\r\n        else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.xuLiApiKhiXuat();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  _validGrid() {\r\n    let invalid = true;\r\n    this.invoicesStore.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        if (!item.notification_nature && invalid) {\r\n          Library.notify(\"Tính chất thông báo\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'notification_nature'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n        else {\r\n          if (!item.row_edit) {\r\n            // Gốc và bị điều chỉnh\r\n            if (item.adjustment_type == \"1\" || item.adjustment_type == \"4\") {\r\n              if (item.notification_nature != \"2\" && item.notification_nature != \"4\") {\r\n                Library.notify(\"Chỉ được chọn tính chất thông báo là Giải trình và Điều chỉnh\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'notification_nature'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n            // Bị thay thế\r\n            if (item.adjustment_type == \"2\") {\r\n              if (item.notification_nature != \"3\" && item.notification_nature != \"4\") {\r\n                Library.notify(\"Chỉ được chọn tính chất thông báo là Giải trình và Thay thế\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'notification_nature'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n            // thay thế/điều chỉnh\r\n            if (item.adjustment_type == \"3\" || item.adjustment_type == \"5\") {\r\n              if (item.notification_nature != \"4\") {\r\n                Library.notify(\"Chỉ được chọn tính chất thông báo là Giải trình\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'notification_nature'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n            // xoá bỏ\r\n            if (item.adjustment_type == \"7\") {\r\n              if (item.notification_nature != \"4\" && item.notification_nature != \"1\") {\r\n                Library.notify(\"Chỉ được chọn tính chất thông báo là Giải trình và Huỷ\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'notification_nature'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n      \r\n          }\r\n        }\r\n        if (!item.reason && invalid) {\r\n          Library.notify('Lý do ' + this._translate.VALIDATION.required, 'error');\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'reason'));\r\n          invalid = false;\r\n          return false;\r\n        }\r\n        if (item.row_edit && invalid) {\r\n          if (!item.type_apply_invoice && invalid) {\r\n            Library.notify(\"Loại áp dụng HĐ ĐT\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'type_apply_invoice'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          if (!item.template_code && invalid) {\r\n            Library.notify(\"Mẫu số\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'template_code'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          else {\r\n            if (invalid) {\r\n              let validTemplateCode = false;\r\n              /* Thông tư 78 */\r\n              if (item.type_apply_invoice == 1) {\r\n                if (item.template_code != \"1\" && item.template_code != \"2\" && item.template_code != \"3\" && item.template_code != \"4\"\r\n                  && item.template_code != \"5\" && item.template_code != \"6\") {\r\n                  validTemplateCode = true;\r\n                }\r\n              }\r\n              else if (item.type_apply_invoice == 4) {\r\n                if (item.template_code.length == 11) {\r\n                  let char1 = item.template_code.substring(0, 6);\r\n                  let char2 = item.template_code.substring(7, 6);\r\n                  let char3 = item.template_code.substring(8, 7);\r\n                  let char4 = item.template_code.substring(8);\r\n                  if (char1 != \"01GTKT\" && char1 != \"02GTTT\" && char1 != \"03XKNB\" && char1 != \"04HGDL\" && char1 != \"07KPTQ\") {\r\n                    validTemplateCode = true;\r\n                  }\r\n                  else {\r\n                    if (isNaN(+Number(char2)))\r\n                      validTemplateCode = true;\r\n                    else {\r\n                      if (item.type_apply_invoice == 4 && Number(char2) == 0)\r\n                        validTemplateCode = true;\r\n                    }\r\n                  }\r\n                  if (char3.length != 1 || char3 != \"/\")\r\n                    validTemplateCode = true;\r\n                  if (char4.length != 3 || isNaN(+Number(char4)))\r\n                    validTemplateCode = true;\r\n                }\r\n                else\r\n                  validTemplateCode = true;\r\n              }\r\n              if (validTemplateCode) {\r\n                Library.notify(\"Mẫu số\" + \" \" + \"không đúng định dạng\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'template_code'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          if (!item.invoice_series && invalid) {\r\n            Library.notify(\"Ký hiệu\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'invoice_series'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          else {\r\n            if (invalid) {\r\n              let validInvoiceSeries = false;\r\n              /* Thông tư 78 */\r\n              if (item.type_apply_invoice == 1) {\r\n                if (item.invoice_series.length == 6) {\r\n                  let char1 = item.invoice_series.substring(1, 0);\r\n                  let char2 = item.invoice_series.substring(3, 1);\r\n                  let char3 = item.invoice_series.substring(4, 3);\r\n                  let char4 = item.invoice_series.substring(5, 4);\r\n                  let char5 = item.invoice_series.substring(6, 5);\r\n                  if (char1 != \"C\" && char1 != \"K\")\r\n                    validInvoiceSeries = true;\r\n                  if (char2.length != 2 || isNaN(+Number(char2)))\r\n                    validInvoiceSeries = true;\r\n                  if (char3 != \"T\" && char3 != \"D\" && char3 != \"L\" && char3 != \"M\"\r\n                    && char3 != \"N\" && char3 != \"B\" && char3 != \"G\" && char3 != \"H\")\r\n                    validInvoiceSeries = true;\r\n                  if (!isNaN(+Number(char4)) || !isNaN(+Number(char5)))\r\n                    validInvoiceSeries = true;\r\n                }\r\n                else {\r\n                  validInvoiceSeries = true;\r\n                }\r\n\r\n              }\r\n              // else if (item.type_apply_invoice == 3) {\r\n              //   if (item.invoice_series.length == 6) {\r\n              //     let char1 = item.invoice_series.substring(1, 0);\r\n              //     let char2 = item.invoice_series.substring(2, 1);\r\n              //     let char3 = item.invoice_series.substring(3, 2);\r\n              //     let char4 = item.invoice_series.substring(5, 3);\r\n              //     let char5 = item.invoice_series.substring(6, 5);\r\n              //     if (!isNaN(+Number(char1)) || !isNaN(+Number(char2)))\r\n              //       validInvoiceSeries = true;\r\n              //     if (char3.length != 1 || char3 != \"/\")\r\n              //       validInvoiceSeries = true;\r\n              //     if (char4.length != 2 || isNaN(+Number(char4)))\r\n              //       validInvoiceSeries = true;\r\n              //     if (char5 != \"P\" && char5 != \"T\" && char5 != \"E\")\r\n              //       validInvoiceSeries = true;\r\n              //   }\r\n              //   else\r\n              //     validInvoiceSeries = true;\r\n              // }\r\n              else if (item.type_apply_invoice == 4) {\r\n                if (item.invoice_series.length == 8) {\r\n\r\n                  let char1 = item.invoice_series.substring(3, 2);\r\n                  let char2 = item.invoice_series.substring(4, 3);\r\n                  let char3 = item.invoice_series.substring(5, 4);\r\n                  let char4 = item.invoice_series.substring(7, 5);\r\n                  let char5 = item.invoice_series.substring(8, 7);\r\n\r\n                  let char6 = item.invoice_series.substring(2, 0);\r\n\r\n                  if (!isNaN(+Number(char1)) || !isNaN(+Number(char2)))\r\n                    validInvoiceSeries = true;\r\n                  if (char3.length != 1 || char3 != \"/\")\r\n                    validInvoiceSeries = true;\r\n                  if (char4.length != 2 || isNaN(+Number(char4)))\r\n                    validInvoiceSeries = true;\r\n                  if (char5 != \"P\")\r\n                    validInvoiceSeries = true;\r\n                  if (isNaN(+Number(char6))) {\r\n                    validInvoiceSeries = true;\r\n                  }\r\n                  else {\r\n                    if (Number(char6) == 0 || Number(char6) > 65)\r\n                      validInvoiceSeries = true;\r\n                  }\r\n                }\r\n                else\r\n                  validInvoiceSeries = true;\r\n              }\r\n              if (validInvoiceSeries) {\r\n                Library.notify(\"Ký hiệu\" + \" \" + \"không đúng định dạng\", 'error');\r\n                this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'invoice_series'));\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          if (!item.invoice_number && invalid) {\r\n            Library.notify(\"Số hóa đơn\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'invoice_number'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          if (!item.invoice_date && invalid) {\r\n            Library.notify(\"Ngày hóa đơn\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'invoice_date'));\r\n            invalid = false;\r\n            return false;\r\n          }\r\n          /* Bắt mẫu số ký hiệu vs p/m */\r\n          if (VStringService._getValueToString(item.template_code) != \"\" && VStringService._getValueToString(item.invoice_series) != \"\") {\r\n            let obj = this.listTemplate.filter(p => p.template_code == item.template_code && p.invoice_series == item.invoice_series)[0];\r\n            if (obj) {\r\n              Library.notify(\"Mẫu số - ký hiệu đang có hóa đơn xuất ở hệ thống iHOADON. Vui lòng chọn hóa đơn ở phần mềm để gửi thông báo.\", 'error');\r\n              this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(index, 'invoice_date'));\r\n              invalid = false;\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n    if (this.frmData.notification_type) {\r\n      if (VStringService._getValueToString(this.frmData.notification_number) == \"\") {\r\n        Library.notify(\"Số TB của CQT không được để trống\", 'error');\r\n        invalid = false;\r\n        return false;\r\n      }\r\n      if (!this.frmData.notification_date) {\r\n        Library.notify(\"Ngày TB của CQT không được để trống\", 'error');\r\n        invalid = false;\r\n        return false;\r\n      }\r\n    }\r\n    return invalid;\r\n  }\r\n\r\n  xoaBo() {\r\n    if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n      Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      if (this._validGrid()) {\r\n        Library.confirmVA(this._translate.CONFIRM.acction_function, this._translate.NOTIFY.notify, () => {\r\n          this.showPopup = true;\r\n          this.invoicesStore.load().then((dataSource) => {\r\n            if (dataSource.length > 0) {\r\n              this.invoices = dataSource.filter(p => p.adjustment_type != '7');\r\n              this.totalInvoice = this.invoices.length;\r\n              this.invoiceIndex = 0;\r\n              this.tempKiFile = 0;\r\n              this.xuatHoaDon();\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      this.connectWebsocket();\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let ListSerialNumber = \"DSCKS\";\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n      }\r\n      else\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n\r\n    }\r\n  }\r\n  xuLiApiKhiXuat() {\r\n    let notification_type: any;\r\n    if (this.frmData.notification_type)\r\n      notification_type = 2;\r\n    else\r\n      notification_type = 1;\r\n    let data = {\r\n      notification_number: this.frmData.notification_number,\r\n      notification_type: notification_type,\r\n      notification_date: this.frmData.notification_date,\r\n      invoices: this.invoices\r\n    };\r\n    let xmlInvoice = \"\";\r\n    let sub = this.handleInvoiceService.getXmlInvoiceWrong(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        xmlInvoice = rs.data.xml_file;\r\n        this.frmData.invoices = rs.data.invoices;\r\n        let sign_date = moment(rs.data.sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n        if (xmlInvoice != \"\") {\r\n          if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n            || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing))\r\n            this.goiApiXuatHoaDon(xmlInvoice);\r\n          else\r\n            this.xuLyKiFile(xmlInvoice, sign_date);\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        //this.onImportHiding();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, invoiceDate) {\r\n    let nodeSign = \"//TBao/DSCKS/NNT\";\r\n    let ListSerialNumber = \"DSCKS\";\r\n    if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n      let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n      if (signatures && signatures.length > 0)\r\n        ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n    }\r\n    this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', nodeSign, invoiceDate, 'NotificationData', ListSerialNumber, true);\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    this.subXuatHoaDon = this.handleInvoiceService.sendXmlInvoiceWrong({\r\n      xml_file: xml_string,\r\n      invoices: this.frmData.invoices\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        Library.notify(\"Gửi thông báo hóa đơn sai sót thành công\", 'success');\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n    // document.getElementById(\"file-dinh-kem\").click();\r\n    // console.log(e)\r\n\r\n  }\r\n  choseFile(evt) {\r\n    //evt.srcElement.firstChild.click();\r\n    document.getElementById(\"file-input\").click();\r\n  }\r\n  fileChanged(e) {\r\n    setTimeout(() => {\r\n      //let rowIndex = e.target.dataset.rowindex;\r\n      let fileAttachData: Array<any> = [];\r\n      let fileReader = new FileReader();\r\n      let file = e.target.files[0];\r\n      let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n      // console.log(file)\r\n      if (pattFile.test(file.name)) {\r\n        fileReader.readAsDataURL(file);\r\n        fileReader.onload = (e) => {\r\n          let base64result = fileReader.result.toString().split(',')[1];\r\n          fileAttachData.unshift({\r\n            type: \"DK\",\r\n            file_name: file.name,\r\n            file_content: base64result,\r\n          });\r\n          // if (document.getElementById('list-file')) {\r\n          //   document.getElementById('list-file').scrollTop = 0;\r\n          // }\r\n          let _lstAttach: any = [];\r\n          _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n          if (_lstAttach == null) {\r\n            _lstAttach = [];\r\n          } else {\r\n            _lstAttach.push(fileAttachData[0]);\r\n          }\r\n          this.dataSource[0][\"invoice_files\"] = _lstAttach;\r\n          // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n          //this.dataSource.reload();\r\n        }\r\n      } else {\r\n        Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n      }\r\n    }, 200);\r\n  }\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let test = fileReader.result;\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"DK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.invoicesStore.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (index == rowIndex)\r\n              item.invoice_files = fileAttachData;\r\n          });\r\n        });\r\n        // this.dataSource[rowIndex][\"invoice_files\"] = fileAttachData;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_content\"] = base64result;\r\n        // this.dataSource[rowIndex][\"report_cancel_invoice_file_name\"] = file.name;\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n  removeFile(i) {\r\n    let _lstAttach: any = [];\r\n    _lstAttach = this.dataSource[0][\"invoice_files\"];\r\n    _lstAttach.splice(i, 1);\r\n  }\r\n  downloadFile(data) {\r\n    var re = /(?:\\.([^.]+))?$/;\r\n    var fileType = re.exec(data.file_name)[1];\r\n    Helper.dowloadFile(data.file_name, fileType, data.file_content);\r\n  }\r\n\r\n  xuatMauBienBan(data) {\r\n    if (this._validGrid()) {\r\n      Library.showloading();\r\n      let inv = Object.assign({}, data);\r\n      inv.adjustment_type = \"1\";\r\n      inv.auto_value_price = inv.auto_value_price == null ? false : inv.auto_value_price;\r\n      inv.invoice_files = [];\r\n      inv.doc_relate_date = moment(data.doc_relate_date).format('YYYY-MM-DD');\r\n      this.vatService.xuatMauBienBan(inv).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let file = rs.data.invoice;\r\n          Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n  viewDetailInvoice(data) {\r\n    if (data) {\r\n      if (data.xml_type == 4 && VStringService._getValueToString(data.link_pdf_file) != \"\") {\r\n        let oData =\r\n        {\r\n          url: data.link_pdf_file,\r\n          type: 'pdf'\r\n        }\r\n        let popup = window.open('about:blank', 'name', `width=200, height=100`);\r\n        setTimeout(() => {\r\n          popup.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n          popup.blur();\r\n        }, 30);\r\n        this.spinner.show();\r\n        const sub = this.searchService.getFilePdf(oData).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            let w = 1920, h = 900;\r\n            w = window.screen.availWidth * 100 / 100;\r\n            h = window.screen.availHeight * 93 / 100;\r\n            const pdf_file = rs.data.file_content;\r\n            const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n            const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n            win.resizeTo(screen.availWidth, screen.availHeight);\r\n            win.focus();\r\n            this.spinner.hide();\r\n          } else {\r\n            popup.close();\r\n            this.spinner.hide();\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n          this.spinner.hide();\r\n        }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const ids = [];\r\n        ids.push(data.id);\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          let data = this.vatService.taodulieuXemMau(ids);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_hoa_don\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n  dong() {\r\n    this.bsModalRef.hide();\r\n    if (this.isSchool) {\r\n      this.router.navigate(['/system/handle-invoice-student/']);\r\n    } else {\r\n      this.router.navigate(['/system/handle-invoice/']);\r\n    }\r\n  }\r\n  // onEditorPreparing(e) {\r\n  //   if (e.parentType === 'dataRow') {\r\n  //     if (e.dataField != 'notification_nature' && e.dataField != 'reason') {\r\n  //       if (!e.row.data.row_edit)\r\n  //         e.editorOptions.disabled = true;\r\n  //       else\r\n  //         e.editorOptions.disabled = false;\r\n  //     }\r\n  //   }\r\n  // }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      /* Bôi đỏ các trường bắt buộc */\r\n      if (e.column.dataField == \"notification_nature\") {\r\n        if (!e.data.notification_nature) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = \"Tính chất thông báo\" + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n        else {\r\n          if (!e.data.row_edit) {\r\n\r\n            // Gốc và bị điều chỉnh\r\n            if (e.data.adjustment_type == \"1\" || e.data.adjustment_type == \"4\") {\r\n              if (e.data.notification_nature != \"2\" && e.data.notification_nature != \"4\") {\r\n                e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n                e.cellElement.title = \"Chỉ được chọn tính chất thông báo là Giải trình và Điều chỉnh\";\r\n              }\r\n            }\r\n            // Bị thay thế\r\n            if (e.data.adjustment_type == \"2\") {\r\n              if (e.data.notification_nature != \"3\" && e.data.notification_nature != \"4\") {\r\n                e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n                e.cellElement.title = \"Chỉ được chọn tính chất thông báo là Giải trình và Thay thế\";\r\n              }\r\n            }\r\n            // thay thế/điều chỉnh\r\n            if (e.data.adjustment_type == \"3\" || e.data.adjustment_type == \"5\") {\r\n              if (e.data.notification_nature != \"4\") {\r\n                e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n                e.cellElement.title = \"Chỉ được chọn tính chất thông báo là Giải trình\";\r\n              }\r\n            }\r\n\r\n            // xoá bỏ\r\n            if (e.data.adjustment_type == \"7\") {\r\n              if (e.data.notification_nature != \"1\" && e.data.notification_nature != \"4\") {\r\n                e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n                e.cellElement.title = \"Chỉ được chọn tính chất thông báo là Giải trình và Huỷ\";\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (e.column.dataField == \"reason\") {\r\n        if (!e.data.reason) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = \"Lý do\" + \" \" + this._translate.VALIDATION.required;\r\n        }\r\n      }\r\n      /* Valid nhập tay */\r\n      if (e.data.row_edit) {\r\n        if (e.column.dataField == \"type_apply_invoice\") {\r\n          if (!e.data.type_apply_invoice) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = \"Loại áp dụng HĐ ĐT\" + \" \" + this._translate.VALIDATION.required;\r\n          }\r\n        }\r\n        if (e.column.dataField == \"template_code\") {\r\n          if (!e.data.template_code) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = \"Mẫu số\" + \" \" + this._translate.VALIDATION.required;\r\n          }\r\n          else {\r\n            let validTemplateCode = false;\r\n            if (e.data.type_apply_invoice == 1) {\r\n              if (e.data.template_code != \"1\" && e.data.template_code != \"2\" && e.data.template_code != \"3\" && e.data.template_code != \"4\"\r\n                && e.data.template_code != \"5\" && e.data.template_code != \"6\") {\r\n                validTemplateCode = true;\r\n              }\r\n            }\r\n            else if (e.data.type_apply_invoice == 4) {\r\n              if (e.data.template_code.length == 11) {\r\n                let char1 = e.data.template_code.substring(0, 6);\r\n                let char2 = e.data.template_code.substring(7, 6);\r\n                let char3 = e.data.template_code.substring(8, 7);\r\n                let char4 = e.data.template_code.substring(8);\r\n                if (char1 != \"01GTKT\" && char1 != \"02GTTT\" && char1 != \"03XKNB\" && char1 != \"04HGDL\" && char1 != \"07KPTQ\") {\r\n                  validTemplateCode = true;\r\n                }\r\n                else {\r\n                  if (isNaN(+Number(char2)))\r\n                    validTemplateCode = true;\r\n                  else {\r\n                    if (e.data.type_apply_invoice == 4 && Number(char2) == 0)\r\n                      validTemplateCode = true;\r\n                  }\r\n                }\r\n                if (char3.length != 1 || char3 != \"/\")\r\n                  validTemplateCode = true;\r\n                if (char4.length != 3 || isNaN(+Number(char4)))\r\n                  validTemplateCode = true;\r\n              }\r\n              else\r\n                validTemplateCode = true;\r\n            }\r\n            if (validTemplateCode) {\r\n              e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n              e.cellElement.title = \"Mẫu số\" + \" \" + \"không đúng định dạng\";\r\n            }\r\n          }\r\n        }\r\n        if (e.column.dataField == \"invoice_series\") {\r\n          if (!e.data.invoice_series) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = \"Ký hiệu\" + \" \" + this._translate.VALIDATION.required;\r\n          }\r\n          else {\r\n            let validInvoiceSeries = false;\r\n            /* Thông tư 78 */\r\n            if (e.data.type_apply_invoice == 1) {\r\n              if (e.data.invoice_series.length == 6) {\r\n                let char1 = e.data.invoice_series.substring(1, 0);\r\n                let char2 = e.data.invoice_series.substring(3, 1);\r\n                let char3 = e.data.invoice_series.substring(4, 3);\r\n                let char4 = e.data.invoice_series.substring(5, 4);\r\n                let char5 = e.data.invoice_series.substring(6, 5);\r\n                if (char1 != \"C\" && char1 != \"K\")\r\n                  validInvoiceSeries = true;\r\n                if (char2.length != 2 || isNaN(+Number(char2)))\r\n                  validInvoiceSeries = true;\r\n                if (char3 != \"T\" && char3 != \"D\" && char3 != \"L\" && char3 != \"M\"\r\n                  && char3 != \"N\" && char3 != \"B\" && char3 != \"G\" && char3 != \"H\")\r\n                  validInvoiceSeries = true;\r\n                if (!isNaN(+Number(char4)) || !isNaN(+Number(char5)))\r\n                  validInvoiceSeries = true;\r\n              }\r\n              else {\r\n                validInvoiceSeries = true;\r\n              }\r\n            }\r\n            // else if (e.data.type_apply_invoice == 3) {\r\n            //   if (e.data.invoice_series.length == 6) {\r\n            //     let char1 = e.data.invoice_series.substring(1, 0);\r\n            //     let char2 = e.data.invoice_series.substring(2, 1);\r\n            //     let char3 = e.data.invoice_series.substring(3, 2);\r\n            //     let char4 = e.data.invoice_series.substring(5, 3);\r\n            //     let char5 = e.data.invoice_series.substring(6, 5);\r\n            //     if (!isNaN(+Number(char1)) || !isNaN(+Number(char2)))\r\n            //       validInvoiceSeries = true;\r\n            //     if (char3.length != 1 || char3 != \"/\")\r\n            //       validInvoiceSeries = true;\r\n            //     if (char4.length != 2 || isNaN(+Number(char4)))\r\n            //       validInvoiceSeries = true;\r\n            //     if (char5 != \"P\" && char5 != \"T\" && char5 != \"E\")\r\n            //       validInvoiceSeries = true;\r\n            //   }\r\n            //   else\r\n            //     validInvoiceSeries = true;\r\n            // }\r\n            else if (e.data.type_apply_invoice == 4) {\r\n              if (e.data.invoice_series.length == 8) {\r\n\r\n                let char1 = e.data.invoice_series.substring(3, 2);\r\n                let char2 = e.data.invoice_series.substring(4, 3);\r\n                let char3 = e.data.invoice_series.substring(5, 4);\r\n                let char4 = e.data.invoice_series.substring(7, 5);\r\n                let char5 = e.data.invoice_series.substring(8, 7);\r\n\r\n                let char6 = e.data.invoice_series.substring(2, 0);\r\n\r\n                if (!isNaN(+Number(char1)) || !isNaN(+Number(char2)))\r\n                  validInvoiceSeries = true;\r\n                if (char3.length != 1 || char3 != \"/\")\r\n                  validInvoiceSeries = true;\r\n                if (char4.length != 2 || isNaN(+Number(char4)))\r\n                  validInvoiceSeries = true;\r\n                if (char5 != \"P\")\r\n                  validInvoiceSeries = true;\r\n                if (isNaN(+Number(char6))) {\r\n                  validInvoiceSeries = true;\r\n                }\r\n                else {\r\n                  if (Number(char6) == 0 || Number(char6) > 65)\r\n                    validInvoiceSeries = true;\r\n                }\r\n              }\r\n              else\r\n                validInvoiceSeries = true;\r\n            }\r\n            if (validInvoiceSeries) {\r\n              e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n              e.cellElement.title = \"Ký hiệu\" + \" \" + \"không đúng định dạng\";\r\n            }\r\n          }\r\n        }\r\n        if (e.column.dataField == \"invoice_number\") {\r\n          if (!e.data.invoice_number) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = \"Số hóa đơn\" + \" \" + this._translate.VALIDATION.required;\r\n          }\r\n        }\r\n        if (e.column.dataField == \"invoice_date\") {\r\n          if (!e.data.invoice_date) {\r\n            e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n            e.cellElement.title = \"Ngày hóa đơn\" + \" \" + this._translate.VALIDATION.required;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  GuiThongBao() {\r\n    setTimeout(() => {\r\n      if (this._validGrid()) {        \r\n        this.invoicesStore.load().then((dataSource) => {\r\n          if (dataSource.length > 0) {\r\n            this.invoices = [];\r\n            dataSource.forEach(item => {\r\n              let object = new Object;\r\n              object[\"tax_authority_code\"] = item.tax_authority_code;\r\n              object[\"template_code\"] = item.template_code;\r\n              object[\"invoice_series\"] = item.invoice_series;\r\n              object[\"invoice_date\"] = item.invoice_date;\r\n              object[\"invoice_number\"] = item.invoice_number;\r\n              object[\"reason\"] = item.reason;\r\n              object[\"notification_nature\"] = item.notification_nature;\r\n              object[\"type_apply_invoice\"] = item.type_apply_invoice;\r\n              object[\"is_invoice_with_code\"] = item.is_invoice_with_code;\r\n              object[\"invoice_id\"] = item.invoice_id;\r\n              this.invoices.push(object);\r\n            });\r\n            this.xuatHoaDon();\r\n          }\r\n        });\r\n      }\r\n    }, 300);\r\n  }\r\n  onClickUnitType() {\r\n    this.isDisplayUnitRisk = !this.isDisplayUnitRisk;\r\n  }\r\n  changedUnitRisk(data) {\r\n    this.isReadOnly = !data.value;\r\n  }\r\n}","module.exports = \"<form>\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">THEO DÕI GỬI - NHẬN HÓA ĐƠN ĐIỆN TỬ</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\">\\r\\n      <div class=\\\"container-fluid\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-lg-8\\\">\\r\\n            <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item [label]=\\\"{text: 'Mẫu hóa đơn'}\\\" dataField=\\\"template\\\"  [editorOptions]=\\\"{readOnly: true}\\\">\\r\\n                </dxi-item>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n                <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: 'Ngày hóa đơn'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item cssClass=\\\"invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\" [label]=\\\"{text: 'Số hóa đơn'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"customer_code\\\" [label]=\\\"{text: 'Mã khách hàng'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"buyer_tax_code\\\" [label]=\\\"{text: 'MST'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"buyer_name\\\" [label]=\\\"{text: 'Họ tên người mua'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"buyer_mobile\\\" [label]=\\\"{text: 'Điện thoại liên hệ'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item dataField=\\\"buyer_name\\\" [label]=\\\"{text: 'Tên khách hàng'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n            </dx-form>\\r\\n          </div>\\r\\n          <div class=\\\"col-lg-4\\\">\\r\\n            <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item cssClass=\\\"form-input-visibility\\\" dataField=\\\"invoice_date\\\" [label]=\\\"{text: 'temp'}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"a\\\" [label]=\\\"{text: 'Số xác thực'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n                  <dxi-item dataField=\\\"currency_code\\\" [label]=\\\"{text: 'Loại tiền'}\\\"  [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"currency_rate\\\" [label]=\\\"{text: 'Tỉ giá'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                  <dxi-item dataField=\\\"payment_method_name\\\" [label]=\\\"{text: 'HTTH'}\\\"  [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"buyer_email\\\" [label]=\\\"{text: 'Email'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n            </dx-form>\\r\\n          </div>\\r\\n          <div class=\\\"col-lg-12 link-send-invoice\\\">\\r\\n            <div class=\\\"pull-right\\\">\\r\\n              <a *ngIf=\\\"invoice.status == 'DA_XUAT'\\\" (click)=\\\"sendMail()\\\" href=\\\"javascript:void(0)\\\">Gửi hóa đơn</a>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <dx-data-grid\\r\\n        id=\\\"invoiceHistoryGrid\\\"\\r\\n        [dataSource]=\\\"invoice_process\\\"\\r\\n        [showBorders]=\\\"true\\\"\\r\\n        [showRowLines]=\\\"true\\\"\\r\\n        [allowColumnResizing]=\\\"true\\\"\\r\\n        [columnResizingMode]=\\\"true\\\"\\r\\n        [wordWrapEnabled]=\\\"true\\\"\\r\\n      >\\r\\n        <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n        <dxi-column cellTemplate=\\\"stt\\\" caption=\\\"STT\\\" width=\\\"80\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n        <dxi-column dataField=\\\"process_time\\\" caption=\\\"Ngày thực hiện\\\" width=\\\"180\\\" dataType=\\\"datetime\\\" format=\\\"dd/MM/yyyy HH:mm:ss\\\" dateSerializationFormat=\\\"yyyy-MM-dd HH:mm:ss\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n        <dxi-column dataField=\\\"content\\\" caption=\\\"Công việc\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n        <dxi-column dataField=\\\"user.name\\\" [width]=\\\"150\\\"  caption=\\\"Người thực hiện\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n        <div *dxTemplate=\\\"let d of 'stt'\\\">\\r\\n          <p>{{ d.rowIndex + 1 }}</p>\\r\\n        </div>\\r\\n      </dx-data-grid>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <dx-button text=\\\"Quay lại\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      </dx-button>\\r\\n    </div>\\r\\n  </form>\\r\\n\"","module.exports = \"::ng-deep .form-input-visibility{visibility:hidden}::ng-deep .invoice-number-create-invoice input{color:red;font-weight:bold}.link-send-invoice{margin-top:10px}.link-send-invoice a{text-decoration:underline}#invoiceHistoryGrid{margin-top:15px}\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nimport { Helper, Library } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { SendMailComponent } from '../send-mail/send-mail.component';\r\nimport { CustomersService } from '@modules/customers/shared';\r\n@Component({\r\n  selector: 'app-send-invoices',\r\n  templateUrl: './send-invoices.component.html',\r\n  styleUrls: ['./send-invoices.component.scss']\r\n})\r\nexport class SendInvoicesComponent implements OnInit {\r\n\r\n  frmData: any = {};\r\n  invoice: any\r\n  invoice_process: any;\r\n  email:any;\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    public bsModalSendMail: BsModalRef,\r\n    private customersService: CustomersService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.loadTableContent();\r\n    console.log(this.invoice);\r\n\r\n    let invoice = this.invoice;\r\n\r\n    this.frmData.template = `${invoice.template_code} - ${invoice.invoice_series}`;\r\n    this.frmData.invoice_date = moment(invoice.invoice_date).format('DD/MM/YYYY');\r\n    this.frmData.invoice_number = invoice.invoice_number;\r\n    this.frmData.customer_code = invoice.customer_code;\r\n    this.frmData.buyer_tax_code = invoice.buyer_tax_code;\r\n    this.frmData.buyer_name = invoice.buyer_name;\r\n    this.frmData.buyer_mobile = invoice.buyer_mobile;\r\n    this.frmData.buyer_email = invoice.buyer_email;\r\n    this.frmData.currency_code = invoice.currency_code;\r\n    this.frmData.payment_method_name = invoice.payment_method_view_name;\r\n    this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n      if(response.status ==\"success\")\r\n      {\r\n        const customer = response.data.customer;\r\n        if (customer)\r\n          this.email = customer.email;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadTableContent() {\r\n    this.invoice_process = {};\r\n    let sub = this.vatService.getInvoiceProccess(this.invoice.id).subscribe(rs => {\r\n      this.invoice_process = rs.data.invoice_process;\r\n    }, err => {}, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  sendMail() {\r\n    const initialState = {\r\n      invoice_id: this.invoice.id,\r\n      email : this.email\r\n    };\r\n    this.bsModalSendMail = this.modalService.show(SendMailComponent, {class: 'modal-md', initialState,backdrop: 'static', keyboard: false});\r\n      this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveItem == 'success_mail') {\r\n          this.loadTableContent();\r\n        }\r\n      });\r\n  }\r\n\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">GỬI EMAIL</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\">\\r\\n      <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n        <dxi-item dataField=\\\"email\\\" [label]=\\\"{text: 'Email'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Email không được để trống\\\"></dxi-validation-rule>\\r\\n          <!-- <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.email\\\" message=\\\"Email không đúng định dạng\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n      </dx-form>\\r\\n      <div style=\\\"margin-top: 10px;\\\">\\r\\n          <a style=\\\"color: silver;text-decoration: underline;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.note1}}: </a><a style=\\\"color: silver;font-size: 90%;\\\"> Nhập danh sách email. Mỗi email cách nhau bởi dấu ;</a>\\r\\n        </div>\\r\\n        <div style=\\\"margin-top: 5px;\\\">\\r\\n            <a style=\\\"color: silver;font-size: 90%;\\\">Ví dụ: admin@efy.com.vn;sale@efy.com.vn</a>\\r\\n          </div>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n      </dx-button>\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      </dx-button>\\r\\n    </div>\\r\\n  </form>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\n\r\nimport { pattern } from '@config/index';\r\nimport { Helper, Library ,AuthService} from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\n@Component({\r\n  selector: 'app-send-mail',\r\n  templateUrl: './send-mail.component.html',\r\n  styleUrls: ['./send-mail.component.scss']\r\n})\r\nexport class SendMailComponent implements OnInit {\r\n\r\n  invoice_id: any;\r\n  frmData: any = {};\r\n  email: string;\r\n  pattern = pattern;\r\n  _translate: any;\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private authService: AuthService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n   }\r\n\r\n  ngOnInit() {\r\n    this.frmData.email = this.email;\r\n  }\r\n\r\n  onSubmit(e) {\r\n    let data = [{\r\n      id: this.invoice_id,\r\n      email: this.frmData.email\r\n    }];\r\n    Library.showloading();\r\n    let sub = this.vatService.sendMail(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        Library.notify('Gửi mail thành công', 'success');\r\n        this.bsModalRef.content.successSaveItem = \"success_mail\";\r\n        this.bsModalRef.hide();\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {}, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n//library\r\nimport { devextremeModule } from '@core/index';\r\n\r\n//general\r\nimport { SharedModule, SomeModule, VatSharedModule, ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport {\r\n  HandleInvoiceService,\r\n  AdjustInvoiceResolver,\r\n  ReplaceInvoiceResolver,\r\n  AdjustSaleInvoiceResolver,\r\n  ReplaceSaleInvoiceResolver,\r\n} from './shared';\r\nimport { AdjustMultipleInvoiceResolver } from './shared/adjust-multiple-invoice.resolver';\r\nimport { ShowAdjustMultipleInvoiceResolver } from './shared/show-adjust-multiple-invoice.resolver';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { routing } from './handle-invoice.routing';\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { AdjustInvoiceComponent } from './components/adjust/adjust-invoice/adjust-invoice.component';\r\nimport { AdjustFormInvoiceComponent } from './components/adjust/adjust-form-invoice/adjust-form-invoice.component';\r\nimport { AdjustProductGripComponent } from './components/adjust/adjust-product-grip/adjust-product-grip.component';\r\nimport { ReplaceInvoiceComponent } from './components/replace/replace-invoice/replace-invoice.component';\r\nimport { ReplaceFormInvoiceComponent } from './components/replace/replace-form-invoice/replace-form-invoice.component';\r\nimport { ReplaceProductGripComponent } from './components/replace/replace-product-grip/replace-product-grip.component';\r\nimport { RemoveComponent } from './components/remove/remove.component';\r\nimport { SendInvoicesComponent } from './components/send-invoices/send-invoices.component';\r\nimport { SendMailComponent } from './components/send-mail/send-mail.component';\r\nimport { ChooseHdckComponent } from './components/choose-hdck/choose-hdck.component';\r\nimport { vTranslateModule } from '@core/module/v-translate.module';\r\nimport { ViewAttachFileComponent } from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport { ReportCancelInvComponent } from './components/report-cancel-inv/report-cancel-inv.component';\r\nimport { ReportAdjustInvComponent } from './components/report-adjust-inv/report-adjust-inv.component';\r\nimport { HanldeReportService } from '@modules/handle-report/hanlde-report.service';\r\nimport { VatDeactivateGuard } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { RouterLibraryService } from '@shared/router/router-library.service';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { DxPopoverModule } from \"devextreme-angular\";\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { AdjustMultiplInvoiceComponent } from './components/adjust-multiple/adjust-multipl-invoice/adjust-multipl-invoice.component';\r\nimport { AdjustMultiplFormInvoiceComponent } from './components/adjust-multiple/adjust-multipl-form-invoice/adjust-multipl-form-invoice.component';\r\nimport { AdjustMultiplProductGripComponent } from './components/adjust-multiple/adjust-multipl-product-grip/adjust-multipl-product-grip.component';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { NotifyReduceTaxComponent, SendDataForTaxComponent } from '@shared/index';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { ReportTaxInvoiceErrorComponent } from './components/report-tax-invoice-error/report-tax-invoice-error.component';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport { AddWavehourseComponent } from '@shared/modules/some/components/add-wavehourse/add-wavehourse.component';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    routing,\r\n    SharedModule,\r\n    VatSharedModule,\r\n    devextremeModule,\r\n    vTranslateModule,\r\n    DxPopoverModule,\r\n    NgxSpinnerModule,\r\n    SomeModule\r\n  ],\r\n  declarations: [\r\n    IndexComponent,\r\n    AdjustInvoiceComponent,\r\n    AdjustFormInvoiceComponent,\r\n    AdjustProductGripComponent,\r\n    ReplaceInvoiceComponent,\r\n    ReplaceFormInvoiceComponent,\r\n    ReplaceProductGripComponent,\r\n    RemoveComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    ChooseHdckComponent,\r\n    ReportCancelInvComponent,\r\n    ReportAdjustInvComponent,\r\n    AdjustMultiplInvoiceComponent,\r\n    AdjustMultiplFormInvoiceComponent,\r\n    AdjustMultiplProductGripComponent,\r\n    ReportTaxInvoiceErrorComponent,\r\n  ],\r\n  entryComponents: [\r\n    RemoveComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    ChooseHdckComponent,\r\n    ViewAttachFileComponent,\r\n    ReportCancelInvComponent,\r\n    ReportAdjustInvComponent,\r\n    NotifyReduceTaxComponent,\r\n    ReportTaxInvoiceErrorComponent,\r\n    SendDataForTaxComponent,\r\n    AddWavehourseComponent,\r\n    ViewInvoiceMultipageComponent,\r\n    PreviewInvoiceComponent\r\n  ],\r\n  providers: [\r\n    HandleInvoiceService,\r\n    VatService,\r\n    AdjustInvoiceResolver,\r\n    ReplaceInvoiceResolver,\r\n    AdjustSaleInvoiceResolver,\r\n    ReplaceSaleInvoiceResolver,\r\n    HanldeReportService,\r\n    VatDeactivateGuard,\r\n    RouterLibraryService,\r\n    ConfirmService,\r\n    ProductsService,\r\n    AdjustMultipleInvoiceResolver,\r\n    ShowAdjustMultipleInvoiceResolver,\r\n    CustomersService,\r\n    TemplateService,\r\n    MyBsModalService,\r\n    ViewInvoiceService\r\n  ]\r\n})\r\nexport class HandleInvoiceModule {\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IndexComponent } from './components/index/index.component';\r\nimport { AdjustInvoiceComponent } from './components/adjust/adjust-invoice/adjust-invoice.component';\r\nimport { ReplaceInvoiceComponent } from './components/replace/replace-invoice/replace-invoice.component';\r\n\r\nimport { AdjustInvoiceResolver, ReplaceInvoiceResolver, AdjustSaleInvoiceResolver, ReplaceSaleInvoiceResolver } from './shared';\r\nimport { VatDeactivateGuard } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { AdjustMultipleInvoiceResolver } from './shared/adjust-multiple-invoice.resolver';\r\nimport { AdjustMultiplInvoiceComponent } from './components/adjust-multiple/adjust-multipl-invoice/adjust-multipl-invoice.component';\r\nimport { ShowAdjustMultipleInvoiceResolver } from './shared/show-adjust-multiple-invoice.resolver';\r\n\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: IndexComponent },\r\n  {\r\n    path: 'adjust/:originId',\r\n    component: AdjustInvoiceComponent,\r\n    resolve: { init: AdjustInvoiceResolver },\r\n    canDeactivate: [VatDeactivateGuard],\r\n    data: {\r\n      type: '01GTKT',\r\n      brec: 'create_invoice_adjustment',\r\n      status: 'dieuchinhmoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'replace/:originId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ReplaceInvoiceResolver },\r\n    data: {\r\n      type: '01GTKT',\r\n      brec: 'create_invoice_instead',\r\n      status: 'thaythemoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-adjust/:invoiceId',\r\n    component: AdjustInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: AdjustInvoiceResolver },\r\n    data: {\r\n      type: '01GTKT',\r\n      brec: 'create_invoice_adjustment'\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-replace/:invoiceId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ReplaceInvoiceResolver },\r\n    data: {\r\n      type: '01GTKT',\r\n      brec: 'create_invoice_instead'\r\n    }\r\n  },\r\n  {\r\n    path: 'sale-adjust/:originId',\r\n    component: AdjustInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: AdjustInvoiceResolver },\r\n    data: {\r\n      type: '02GTTT',\r\n      brec: 'create_invoice_adjustment',\r\n      status: 'dieuchinhmoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'non-tariff-adjust/:originId',\r\n    component: AdjustInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: AdjustInvoiceResolver },\r\n    data: {\r\n      type: '07KPTQ',\r\n      brec: 'create_invoice_adjustment',\r\n      status: 'dieuchinhmoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'sale-replace/:originId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ReplaceInvoiceResolver },\r\n    data: { type: '02GTTT', brec: 'create_invoice_instead', status: 'thaythemoi' }\r\n  },\r\n  {\r\n    path: 'non-tariff-replace/:originId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ReplaceInvoiceResolver },\r\n    data: { type: '07KPTQ', brec: 'create_invoice_instead', status: 'thaythemoi' }\r\n  },\r\n  {\r\n    path: 'edit-sale-adjust/:invoiceId',\r\n    component: AdjustInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: AdjustInvoiceResolver },\r\n    data: { type: '02GTTT', brec: 'create_invoice_adjustment' }\r\n  },\r\n  {\r\n    path: 'edit-non-tariff-adjust/:invoiceId',\r\n    component: AdjustInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: AdjustInvoiceResolver },\r\n    data: { type: '07KPTQ', brec: 'create_invoice_adjustment' }\r\n  },\r\n  {\r\n    path: 'edit-sale-replace/:invoiceId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ReplaceInvoiceResolver },\r\n    data: { type: '02GTTT', brec: 'create_invoice_instead' }\r\n  },\r\n  {\r\n    path: 'edit-non-tariff-replace/:invoiceId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ReplaceInvoiceResolver },\r\n    data: { type: '07KPTQ', brec: 'create_invoice_instead' }\r\n  },\r\n  {\r\n    path: 'multiple-adjust',\r\n    component: AdjustMultiplInvoiceComponent,\r\n    resolve: { init: AdjustMultipleInvoiceResolver },\r\n    data: { type: 'dieu-chinh-nhieu', brec: 'Lập hóa đơn điều chỉnh' }\r\n  },\r\n  {\r\n    path: 'multiple-adjust/:invoiceId',\r\n    component: AdjustMultiplInvoiceComponent,\r\n    resolve: { init: ShowAdjustMultipleInvoiceResolver },\r\n    data: { type: 'dieu-chinh-nhieu', brec: 'Lập hóa đơn điều chỉnh' }\r\n  },\r\n  {\r\n    path: 'adjust-without-software',\r\n    component: AdjustMultiplInvoiceComponent,\r\n    resolve: { init: AdjustMultipleInvoiceResolver },\r\n    data: { type: 'dieu-chinh-khac', brec: 'Lập hóa đơn điều chỉnh' }\r\n  },\r\n  {\r\n    path: 'adjust-without-software/:invoiceId',\r\n    component: AdjustMultiplInvoiceComponent,\r\n    resolve: { init: ShowAdjustMultipleInvoiceResolver },\r\n    data: { type: 'dieu-chinh-khac', brec: 'Lập hóa đơn điều chỉnh' }\r\n  },\r\n  {\r\n    path: 'replace-without-software',\r\n    component: AdjustMultiplInvoiceComponent,\r\n    resolve: { init: AdjustMultipleInvoiceResolver },\r\n    data: { type: 'thay-the-khac', brec: 'Lập hóa đơn thay thế' }\r\n  },\r\n  {\r\n    path: 'replace-without-software/:invoiceId',\r\n    component: AdjustMultiplInvoiceComponent,\r\n    resolve: { init: ShowAdjustMultipleInvoiceResolver },\r\n    data: { type: 'thay-the-khac', brec: 'Lập hóa đơn thay thế' }\r\n  },\r\n  {\r\n    path: 'adjust-warehouse/:originId',\r\n    component: AdjustInvoiceComponent,\r\n    resolve: { init: AdjustInvoiceResolver },\r\n    canDeactivate: [VatDeactivateGuard],\r\n    data: {\r\n      type: '03XKNB',\r\n      brec: 'create_invoice_adjustment',\r\n      status: 'dieuchinhmoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'replace-warehouse/:originId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ReplaceInvoiceResolver },\r\n    data: {\r\n      type: '03XKNB',\r\n      brec: 'create_invoice_instead',\r\n      status: 'thaythemoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'adjust-agent/:originId',\r\n    component: AdjustInvoiceComponent,\r\n    resolve: { init: AdjustInvoiceResolver },\r\n    canDeactivate: [VatDeactivateGuard],\r\n    data: {\r\n      type: '04HGDL',\r\n      brec: 'create_invoice_adjustment',\r\n      status: 'dieuchinhmoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'replace-agent/:originId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ReplaceInvoiceResolver },\r\n    data: {\r\n      type: '04HGDL',\r\n      brec: 'create_invoice_instead',\r\n      status: 'thaythemoi'\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-adjust-warehouse/:originId',\r\n    component: AdjustInvoiceComponent,\r\n    resolve: { init: AdjustInvoiceResolver },\r\n    canDeactivate: [VatDeactivateGuard],\r\n    data: {\r\n      type: '03XKNB',\r\n      brec: 'create_invoice_adjustment',\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-adjust-agent/:originId',\r\n    component: AdjustInvoiceComponent,\r\n    resolve: { init: AdjustInvoiceResolver },\r\n    canDeactivate: [VatDeactivateGuard],\r\n    data: {\r\n      type: '04HGDL',\r\n      brec: 'create_invoice_adjustment',\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-replace-warehouse/:originId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ReplaceInvoiceResolver },\r\n    data: {\r\n      type: '03XKNB',\r\n      brec: 'create_invoice_instead',\r\n    }\r\n  },\r\n  {\r\n    path: 'edit-replace-agent/:originId',\r\n    component: ReplaceInvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ReplaceInvoiceResolver },\r\n    data: {\r\n      type: '04HGDL',\r\n      brec: 'create_invoice_instead',\r\n    }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class routing {\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map, catchError } from 'rxjs/operators';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { Library, Helper, sEnum, AuthService } from '@core/index';\r\nimport { forkJoin } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AdjustMultipleInvoiceResolver implements Resolve<any[]> {\r\n  constructor(\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    private listsService: ListsService,\r\n    private authService: AuthService,\r\n  ) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    Library.showloading();\r\n    let isTT78 = false;\r\n    let infoDangKy = this.authService.getInfoRegister();\r\n    if (infoDangKy && infoDangKy.id) {\r\n      if (infoDangKy.status == \"CHAP_NHAN\")\r\n        isTT78 = true;\r\n    }\r\n    let loaiHoaDon = route.data.type;\r\n    let _countDm = 0;\r\n    let dataJoin = [];\r\n    let dataDM: any;\r\n    /**\r\n     * Thiếu bên học sinh sinh viên, rà soát lại các hàm liên quan\r\n     */\r\n    let arr = [\r\n      {\r\n        \"code\": \"DM_NHOM_KHACH_HANG\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_LOAI_TIEN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_HINH_THUC_THANH_TOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DON_VI_TINH\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TY_LE_VAT\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DINH_KHOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_NOI_XUAT_HOA_DON\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_QUOC_GIA\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TAI_KHOAN_NGAN_HANG\",\r\n        \"order\": 0\r\n      },\r\n    ];\r\n    dataDM = this.listsService.getDMBy(arr);\r\n    if (dataDM.length > 0) {\r\n      dataDM.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    _countDm = dataDM.length;\r\n    let dataRecord: any;\r\n    /* Thông tư 78 */\r\n    if (isTT78) {\r\n      dataRecord = this.vatService.getInvoiceOtherResolverTT78(loaiHoaDon);\r\n      if (dataRecord.length > 0) {\r\n        dataRecord.forEach(element => {\r\n          dataJoin.push(element);\r\n        });\r\n      }\r\n      let dataForkJoin = forkJoin(dataJoin);\r\n      return dataForkJoin.pipe(\r\n        take(1),\r\n        map(rs => {\r\n          Library.hideloading();\r\n          let status = sEnum.statusApi.success;\r\n          let isEdit = false;\r\n          for (let index = 0; index < rs.length; index++) {\r\n            if (rs[index].status != sEnum.statusApi.success) {\r\n              Library.notify(rs[index].message, \"error\");\r\n              if (loaiHoaDon == \"01GTKT\")\r\n                this.router.navigate(['/system/vat-invoice']);\r\n              else if (loaiHoaDon == \"02GTTT\")\r\n                this.router.navigate(['/system/sale-invoice']);\r\n              break;\r\n            }\r\n          }\r\n          if (status == sEnum.statusApi.success) {\r\n            if (dataDM.length > 0) {\r\n              let _data = [];\r\n              rs.forEach((element, i) => {\r\n                if (i < dataDM.length) {\r\n                  _data.push(element);\r\n                }\r\n              });\r\n              this.authService.setDMLocal(_data);\r\n            }\r\n            /* Thông tư 78 */\r\n            let templates = Helper.convertTemplatesToInvoiceResolver(rs[dataJoin.length - 1]);\r\n            return [\r\n              rs[_countDm].data.products,\r\n              templates,\r\n              isEdit,\r\n            ];\r\n          }\r\n          else\r\n            return null;\r\n        })\r\n      );\r\n    }\r\n    else {\r\n      dataRecord = this.vatService.getMultipleAdjustResolver();\r\n      if (dataRecord.length > 0) {\r\n        dataRecord.forEach(element => {\r\n          dataJoin.push(element);\r\n        });\r\n      }\r\n      let dataForkJoin = forkJoin(dataJoin);\r\n      return dataForkJoin.pipe(\r\n        take(1),\r\n        map(rs => {\r\n          Library.hideloading();\r\n          let status = sEnum.statusApi.success;\r\n          let isEdit = false;\r\n          for (let index = 0; index < rs.length; index++) {\r\n            if (rs[index].status != sEnum.statusApi.success) {\r\n              Library.notify(rs[index].message, \"error\");\r\n              if (loaiHoaDon == \"01GTKT\")\r\n                this.router.navigate(['/system/vat-invoice']);\r\n              else if (loaiHoaDon == \"02GTTT\")\r\n                this.router.navigate(['/system/sale-invoice']);\r\n              break;\r\n            }\r\n          }\r\n          if (status == sEnum.statusApi.success) {\r\n            let invoice_releases = Helper.convertDataToInvoiceResolver(rs[_countDm]);\r\n            if (dataDM.length > 0) {\r\n              let _data = [];\r\n              rs.forEach((element, i) => {\r\n                if (i < dataDM.length) {\r\n                  _data.push(element);\r\n                }\r\n              });\r\n              this.authService.setDMLocal(_data);\r\n            }\r\n            return [\r\n              invoice_releases,\r\n              rs[dataJoin.length - 1].data.products,\r\n              isEdit\r\n            ];\r\n          }\r\n          else\r\n            return null;\r\n        })\r\n      );\r\n    }\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map } from 'rxjs/operators';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { Library, Helper, sEnum, AuthService } from '@core/index';\r\nimport { forkJoin } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ShowAdjustMultipleInvoiceResolver implements Resolve<any[]> {\r\n  constructor(\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    private listsService: ListsService,\r\n    private authService: AuthService,\r\n  ) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    let invoice_id = route.paramMap.get('invoiceId');\r\n    let isViewTT32 = false;\r\n    if (route.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    Library.showloading();\r\n    let isTT78 = false;\r\n    let infoDangKy = this.authService.getInfoRegister();\r\n    if (infoDangKy && infoDangKy.id) {\r\n      if (infoDangKy.status == \"CHAP_NHAN\")\r\n        isTT78 = true;\r\n    }\r\n    if (isTT78 == true && isViewTT32)\r\n      isTT78 = false;\r\n    let loaiHoaDon = route.data.type;\r\n    let _countDm = 0;\r\n    let dataJoin = [];\r\n    let dataDM: any;\r\n    /**\r\n     * Thiếu bên học sinh sinh viên, rà soát lại các hàm liên quan\r\n     */\r\n    let arr = [\r\n      {\r\n        \"code\": \"DM_NHOM_KHACH_HANG\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_LOAI_TIEN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_HINH_THUC_THANH_TOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DON_VI_TINH\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TY_LE_VAT\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DINH_KHOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_NOI_XUAT_HOA_DON\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_QUOC_GIA\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TAI_KHOAN_NGAN_HANG\",\r\n        \"order\": 0\r\n      },\r\n    ];\r\n    dataDM = this.listsService.getDMBy(arr);\r\n    if (dataDM.length > 0) {\r\n      dataDM.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    _countDm = dataDM.length;\r\n    let dataRecord: any;\r\n    if (isTT78) {\r\n      dataRecord = this.vatService.showInvoiceOtherResolverTT78(invoice_id, loaiHoaDon);\r\n      if (dataRecord.length > 0) {\r\n        dataRecord.forEach(element => {\r\n          dataJoin.push(element);\r\n        });\r\n      }\r\n      let dataForkJoin = forkJoin(dataJoin);\r\n      return dataForkJoin.pipe(\r\n        take(1),\r\n        map(rs => {\r\n          Library.hideloading();\r\n          let isEdit = true;\r\n          let status = sEnum.statusApi.success;\r\n          for (let index = 0; index < rs.length; index++) {\r\n            if (rs[index].status != sEnum.statusApi.success) {\r\n              Library.notify(rs[index].message, \"error\");\r\n              if (loaiHoaDon == \"01GTKT\")\r\n                this.router.navigate(['/system/vat-invoice']);\r\n              else if (loaiHoaDon == \"02GTTT\")\r\n                this.router.navigate(['/system/sale-invoice']);\r\n              break;\r\n            }\r\n          }\r\n          if (status == sEnum.statusApi.success) {\r\n            if (dataDM.length > 0) {\r\n              let _data = [];\r\n              rs.forEach((element, i) => {\r\n                if (i < dataDM.length) {\r\n                  _data.push(element);\r\n                }\r\n              });\r\n              this.authService.setDMLocal(_data);\r\n            }\r\n            let templates = Helper.convertTemplatesToInvoiceResolver(rs[dataJoin.length - 1]);\r\n            return [\r\n              rs[_countDm].data.products,\r\n              rs[dataJoin.length - 2].data.invoice,\r\n              isEdit,\r\n              templates,\r\n            ];\r\n          }\r\n          else\r\n            return null;\r\n        })\r\n      );\r\n    }\r\n    else {\r\n      dataRecord = this.vatService.showMultipleAdjustResolver(invoice_id);\r\n      if (dataRecord.length > 0) {\r\n        dataRecord.forEach(element => {\r\n          dataJoin.push(element);\r\n        });\r\n      }\r\n      let dataForkJoin = forkJoin(dataJoin);\r\n      return dataForkJoin.pipe(\r\n        take(1),\r\n        map(rs => {\r\n          Library.hideloading();\r\n          let isEdit = true;\r\n          let status = sEnum.statusApi.success;\r\n          for (let index = 0; index < rs.length; index++) {\r\n            if (rs[index].status != sEnum.statusApi.success) {\r\n              Library.notify(rs[index].message, \"error\");\r\n              if (loaiHoaDon == \"01GTKT\")\r\n                this.router.navigate(['/system/vat-invoice']);\r\n              else if (loaiHoaDon == \"02GTTT\")\r\n                this.router.navigate(['/system/sale-invoice']);\r\n              break;\r\n            }\r\n          }\r\n          if (status == sEnum.statusApi.success) {\r\n            let invoice_releases = Helper.convertDataToInvoiceResolver(rs[_countDm]);\r\n            if (dataDM.length > 0) {\r\n              let _data = [];\r\n              rs.forEach((element, i) => {\r\n                if (i < dataDM.length) {\r\n                  _data.push(element);\r\n                }\r\n              });\r\n              this.authService.setDMLocal(_data);\r\n            }\r\n            return [\r\n              invoice_releases,\r\n              rs[_countDm + 1].data.products,\r\n              isEdit,\r\n              rs[dataJoin.length - 1].data.invoice,\r\n            ];\r\n          }\r\n          else\r\n            return null;\r\n        })\r\n      );\r\n    }\r\n  }\r\n}\r\n","export * from \"./info-unit.service\";\r\nexport * from \"./info-unit.resolver\";\r\nexport * from \"./info-unit\";","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map } from 'rxjs/operators';\r\n\r\nimport { InfoUnitService } from './info-unit.service';\r\nimport { Library, Helper } from '@core/index';\r\n\r\n@Injectable()\r\nexport class InfoUnitResolver implements Resolve<any[]> {\r\n  constructor(\r\n      private infoUnitService: InfoUnitService, \r\n      private router: Router\r\n  ) {}\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    Library.showloading();\r\n    return this.infoUnitService.getDataSelect().pipe(\r\n      take(1),\r\n      map(rs => {\r\n        Library.hideloading();\r\n        if (rs.status == \"success\") {\r\n          return rs.data;\r\n        } else { // error\r\n          Library.notify(rs.message, \"error\");\r\n          this.router.navigate(['/']);\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n}","import {Injectable} from '@angular/core';\r\nimport {ApiService, CoreService} from '@core/index';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport 'rxjs/add/observable/forkJoin';\r\n\r\nimport {forkJoin} from 'rxjs/observable/forkJoin';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InfoUnitService {\r\n\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private coreService: CoreService,\r\n  ) {\r\n  }\r\n\r\n  getInfo(id) {\r\n    return this.apiService.get('/accounts/' + id);\r\n  }\r\n\r\n  getDataSelect() {\r\n    return this.apiService.get('/get-lists-by-listtype-code/DM_TINH_THANH,DM_CO_QUAN_THUE');\r\n  }\r\n\r\n  updateInfo(data, id) {\r\n    return this.apiService.put('/accounts/' + id, data);\r\n  }\r\n\r\n}\r\n","export class InfoUnit {\r\n  constructor()\r\n  {\r\n    \r\n  }\r\n  'name': string = '';\r\n  'account_type': string = '';\r\n  'tax_province_code': string = '';\r\n  'tax_district_code': string = '';\r\n  'business_address': string = '';\r\n  'transaction_address': string = '';\r\n  'phone': string = '';\r\n  'email': string = '';\r\n  'fax': string = '';\r\n  'website': string = '';\r\n  'surrogate_name': string = '';\r\n  'surrogate_position': string = '';\r\n  'submitted_person_name': string = '';\r\n  'contact_person_name': string = '';\r\n  'contact_mobile': string = '';\r\n  'tax_department': string = '';\r\n  'company_type': string = '';\r\n  'bank_name': string = '';\r\n  'bank_account_number': string = '';\r\n  'company_email': string = '';\r\n  'cert_serial': string = '';\r\n  'cert_valid_from': string = '';\r\n  'cert_valid_to': string = '';\r\n  'cert_provider': string = '';\r\n  'cert_content': string = '';\r\n  'icc_token': string = '';\r\n  'report_period': string = '';\r\n  'time_study': number = 0;\r\n  'start_time_study': number = 0;\r\n  'end_time_study': number = 0;\r\n  'time_used_xml_new': string = '';\r\n  'xml_type': number = 1;\r\n  'tax_code':  string = '';\r\n  'verify_code':  string = '';\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {CanDeactivate} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\n\r\nexport interface CanComponentDeactivate {\r\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VatDeactivateGuard implements CanDeactivate<CanComponentDeactivate> {\r\n\r\n  canDeactivate(component: CanComponentDeactivate) {\r\n    return component.canDeactivate && component.canDeactivate();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RouterLibraryService {\r\n\r\n  url = '/system/handle-invoice/';\r\n\r\n  constructor() {\r\n  }\r\n\r\n  setUrl(data: string, router) {\r\n    if (sessionStorage.hasOwnProperty(data)) {\r\n      sessionStorage.setItem(data, router);\r\n    } else {\r\n      sessionStorage.setItem(data, router);\r\n    }\r\n  }\r\n\r\n  getUrl(data: string) {\r\n    if (sessionStorage.hasOwnProperty(data)) {\r\n      return sessionStorage.getItem(data);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  setRouterPreviousHandleInvoice(type: string, path: string, value: string) {\r\n    if (type === 'GHI') {\r\n      if (path === 'adjust') {\r\n        this.url += `edit-adjust/${value}`;\r\n        this.setUrl('keyCreateHandleReport', this.url);\r\n      } else if (path === 'replace') {\r\n        this.url += `edit-replace/${value}`;\r\n        this.setUrl('keyCreateHandleReport', this.url);\r\n      } else if (path === 'sale-adjust') {\r\n        this.url += `edit-sale-adjust/${value}`;\r\n        this.setUrl('keyCreateHandleReport', this.url);\r\n      } else if (path === 'sale-replace') {\r\n        this.url += `edit-sale-replace/${value}`;\r\n        this.setUrl('keyCreateHandleReport', this.url);\r\n      }\r\n    } else {\r\n      if (path === 'adjust') {\r\n        this.url += `adjust/${value}`;\r\n        this.setUrl('keyCreateHandleReport', this.url);\r\n      } else if (path === 'replace') {\r\n        this.url += `replace/${value}`;\r\n        this.setUrl('keyCreateHandleReport', this.url);\r\n      } else if (path === 'sale-adjust') {\r\n        this.url += `sale-adjust/${value}`;\r\n        this.setUrl('keyCreateHandleReport', this.url);\r\n      } else if (path === 'sale-replace') {\r\n        this.url += `sale-replace/${value}`;\r\n        this.setUrl('keyCreateHandleReport', this.url);\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}