{"version":3,"sources":["webpack:///./src/app/core/library/invoice/my-bsmodel.service.ts","webpack:///./src/app/modules/vat/components/choose-hdck/choose-hdck.component.html","webpack:///./src/app/modules/vat/components/choose-hdck/choose-hdck.component.scss","webpack:///./src/app/modules/vat/components/choose-hdck/choose-hdck.component.ts","webpack:///./src/app/modules/vat/components/form-invoice/form-invoice.component.html","webpack:///./src/app/modules/vat/components/form-invoice/form-invoice.component.scss","webpack:///./src/app/modules/vat/components/form-invoice/form-invoice.component.ts","webpack:///./src/app/modules/vat/components/import-invoices-dt/import-invoices-dt.component.html","webpack:///./src/app/modules/vat/components/import-invoices-dt/import-invoices-dt.component.scss","webpack:///./src/app/modules/vat/components/import-invoices-dt/import-invoices-dt.component.ts","webpack:///./src/app/modules/vat/components/import-invoices/import-invoices.component.html","webpack:///./src/app/modules/vat/components/import-invoices/import-invoices.component.scss","webpack:///./src/app/modules/vat/components/import-invoices/import-invoices.component.ts","webpack:///./src/app/modules/vat/components/index/index.component.html","webpack:///./src/app/modules/vat/components/index/index.component.scss","webpack:///./src/app/modules/vat/components/index/index.component.ts","webpack:///./src/app/modules/vat/components/invoice/invoice.component.html","webpack:///./src/app/modules/vat/components/invoice/invoice.component.scss","webpack:///./src/app/modules/vat/components/invoice/invoice.component.ts","webpack:///./src/app/modules/vat/components/keep-number/keep-number.component.html","webpack:///./src/app/modules/vat/components/keep-number/keep-number.component.scss","webpack:///./src/app/modules/vat/components/keep-number/keep-number.component.ts","webpack:///./src/app/modules/vat/components/product-grip/product-grip.component.html","webpack:///./src/app/modules/vat/components/product-grip/product-grip.component.scss","webpack:///./src/app/modules/vat/components/product-grip/product-grip.component.ts","webpack:///./src/app/modules/vat/components/send-invoices/send-invoices.component.html","webpack:///./src/app/modules/vat/components/send-invoices/send-invoices.component.scss","webpack:///./src/app/modules/vat/components/send-invoices/send-invoices.component.ts","webpack:///./src/app/modules/vat/components/send-mail/send-mail.component.html","webpack:///./src/app/modules/vat/components/send-mail/send-mail.component.scss","webpack:///./src/app/modules/vat/components/send-mail/send-mail.component.ts","webpack:///./src/app/modules/vat/components/sign-many/sign-many.component.html","webpack:///./src/app/modules/vat/components/sign-many/sign-many.component.scss","webpack:///./src/app/modules/vat/components/sign-many/sign-many.component.ts","webpack:///./src/app/modules/vat/components/view-invoice/view-invoice.component.html","webpack:///./src/app/modules/vat/components/view-invoice/view-invoice.component.scss","webpack:///./src/app/modules/vat/components/view-invoice/view-invoice.component.ts","webpack:///./src/app/modules/vat/deactivate/vat-deactivate.guard.ts","webpack:///./src/app/modules/vat/vat.module.ts","webpack:///./src/app/modules/vat/vat.routing.ts"],"names":[],"mappings":"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","file":"invoice-buy-invoice-buy-module~vat-vat-module.js","sourcesContent":["import { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nexport class MyBsModalService extends BsModalService {\r\n    \r\n}","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">DANH SÁCH HÓA ĐƠN CHỜ KÝ</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid \\r\\n    id=\\\"gridContainer\\\"\\r\\n    [dataSource]=\\\"invoiceList\\\"\\r\\n    [showRowLines]=\\\"true\\\"\\r\\n    [allowColumnResizing]=\\\"true\\\"\\r\\n    [(selectedRowKeys)]=\\\"selectedRows\\\"\\r\\n    [columnMinWidth]=\\\"50\\\"\\r\\n    [columnResizingMode]=\\\"true\\\"\\r\\n    [columnAutoWidth]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\">\\r\\n\\r\\n    <dxo-selection selectAllMode=\\\"page\\\" mode=\\\"single\\\"></dxo-selection>\\r\\n\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <dxi-column dataField=\\\"invoice_number\\\" caption=\\\"Số hóa đơn\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"Ngày HĐ\\\" [width]=\\\"110\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"Mã số thuế\\\" [width]=\\\"140\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"Tên đơn vị\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p>{{ d.data.customer_name || d.data.buyer_name || 'Hóa đơn chờ ký' }}</p>\\r\\n    </div>\\r\\n    \\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <!-- <dxo-paging [enabled]=\\\"false\\\"></dxo-paging> -->\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button text=\\\"Chọn\\\" icon=\\\"assets\\\\img\\\\icons\\\\Ghi.png\\\" type=\\\"default\\\" (click)=\\\"choose()\\\" [disabled]=\\\"!(selectedRows.length == 1)\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"Quay lại\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n  </dx-button>\\r\\n</div>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { HandleInvoiceService } from '@modules/handle-invoice/shared';\r\nimport { Library} from '@core/index';\r\n\r\n@Component({\r\n  selector: 'app-choose-hdck',\r\n  templateUrl: './choose-hdck.component.html',\r\n  styleUrls: ['./choose-hdck.component.scss']\r\n})\r\nexport class ChooseHdckComponent implements OnInit {\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n  ) { }\r\n\r\n  selectedRows: Array<any> = [];\r\n\r\n  invoiceList: any;\r\n  invoiceNumberOrigin: any;\r\n  invoiceReleaseId: any;\r\n  onSave: any;\r\n\r\n  ngOnInit() {\r\n    // console.log(this.invoiceNumberOrigin);\r\n    // console.log(this.templateCode);\r\n    Library.showloading();\r\n    this.vatService.layCacHoaDonChoKy(this.invoiceNumberOrigin, this.invoiceReleaseId).subscribe((rs: any) => {\r\n      this.invoiceList = rs.data.invoices;\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  choose() {\r\n    this.onSave(this.selectedRows[0]);\r\n    this.bsModalRef.hide();\r\n  }\r\n\r\n}","module.exports = \"<div class=\\\"row invoice-form\\\">\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form tabIndex=\\\"thongTinHoaDon\\\" [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Mẫu hóa đơn TT32-->\\r\\n        <dxi-item *ngIf=\\\"!isTT78\\\" dataField=\\\"invoice_release_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.invoice_releases, onValueChanged: templateChange, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Mẫu hóa đơn TT78-->\\r\\n        <dxi-item *ngIf=\\\"isTT78\\\" dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n          <dxi-validation-rule type=\\\"required\\\"\\r\\n            message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n          </dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày hóa đơn, số hóa đơn -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"invoice_date\\\" editorType=\\\"dxDateBox\\\"\\r\\n            [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate , onValueChanged: changeDateTime}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_date }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item cssClass=\\\"vat_hdt invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\" editorType=\\\"dxNumberBox\\\"\\r\\n            [editorOptions]=\\\"{ disabled: true}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Loại tiền, tỷ giá -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"currency_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.currency_code }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"currency_rate\\\" editorType=\\\"dxNumberBox\\\"\\r\\n            [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: formatter.ty_gia}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.currency_rate }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Hình thức thanh toán, hình thức xuất -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"payment_method_name\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_method }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.payment_method }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item name=\\\"ht-xuat\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_form }}\\\"></dxo-label>\\r\\n            <div *dxTemplate>\\r\\n              <dx-select-box [(value)]=\\\"frmData.status\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\"\\r\\n                [disabled]=\\\"!configs.system_parameter.allow_keep_invoice_number\\\"></dx-select-box>\\r\\n            </div>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Tên ngân hàng -->\\r\\n        <dxi-item [label]=\\\"{text: _translate.CONTROLL.LABEL.bank_name}\\\" dataField=\\\"bank_name\\\"\\r\\n            [editorOptions]=\\\"{onValueChanged: customerChanged}\\\">\\r\\n        </dxi-item>\\r\\n        <!-- Danh sách ngân hàng -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.view_bank_account_seller\\\" dataField=\\\"seller_bank_account_number\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.list_bank_account_seller, onValueChanged: bankAccountSellerChange, displayExpr: 'name_display', valueExpr: 'code', showClearButton: true}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.seller_bank_account_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Số bảng kê, ngày bảng kê -->\\r\\n        <dxi-item *ngIf=\\\"isTT78\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"list_number\\\" [editorOptions]=\\\"{disabled: tod.buyer_address}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.list_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"list_date\\\" [template]=\\\"'notifydate'\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.list_date }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Chứng từ tham chiếu -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.vouchers_reference\\\" dataField=\\\"license_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.vouchers_reference }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Số S/O -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.invoice_the_order\\\" dataField=\\\"the_order\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.so_so }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Thời hạn thanh toán -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.payment_expire\\\" dataField=\\\"payment_expire\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_time }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Xuất cho khách hàng -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.ship_receiving_name\\\" dataField=\\\"ship_receiving_name\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.ship_receiving_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Số phiếu xuất kho -->\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" *ngIf=\\\"configs.system_parameter.receipts_no\\\" dataField=\\\"receipts_no\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.GRID.INVOICE.receipts_no }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Điều khoản giao hàng -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.delivery_terms\\\" dataField=\\\"delivery_terms\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.delivery_terms }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày giao hàng -->\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" *ngIf=\\\"configs.system_parameter.from_warehouse_date\\\"\\r\\n          dataField=\\\"from_warehouse_date\\\" [template]=\\\"'deliverydata'\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.delivery_date }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Địa chỉ nhận hàng -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.ship_receiving_address\\\" dataField=\\\"ship_receiving_address\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.ship_receiving_address }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Hình thức bán hàng -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.form_sales\\\" dataField=\\\"sell_form\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.form_sales }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Ngày trả lại, người trả lại -->\\r\\n        <dxi-item [visible]=\\\"showTraLai\\\" itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item dataField=\\\"ngaytralai\\\" editorType=\\\"dxDateBox\\\"\\r\\n            [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd'}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.date_return }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item [label]=\\\"{text: 'Người trả lại'}\\\" dataField=\\\"nguoitralai\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.person_return }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.person_return }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Lý do trả lại -->\\r\\n        <dxi-item [visible]=\\\"showTraLai\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item dataField=\\\"lido\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.reason_return }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.reason_return }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Hóa đơn bàn giao xe -->\\r\\n        <dxi-item *ngIf=\\\"isShowBanGiaoXe\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n            <!-- Số hợp đồng -->\\r\\n            <dxi-item dataField=\\\"contract_number\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.vehicle_contract_number }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <!-- Số VSB -->\\r\\n            <dxi-item dataField=\\\"vsb_number\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.vehicle_vsb }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n            <!-- Số chứng từ -->\\r\\n            <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"license_number\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.vehicle_license_number }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <!-- Kiểu xe -->\\r\\n            <dxi-item dataField=\\\"model\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.vehicle_model }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Hóa đơn bảo dưỡng xe -->\\r\\n        <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <!-- Địa chỉ giao hàng -->\\r\\n        <dxi-item dataField=\\\"place_of_delivery\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address_delivery }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Địa chỉ xuất hàng -->\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"shiping_point\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address_shipping }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Thời hạn thanh toán -->\\r\\n          <dxi-item dataField=\\\"payment_expire\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_time }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- Số wip -->\\r\\n          <dxi-item dataField=\\\"wip_number\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.wip_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Hóa đơn nhà thuốc -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n            <!-- Số tham chiếu -->\\r\\n            <dxi-item dataField=\\\"license_number\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.reference_number }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <!-- Tuyến -->\\r\\n            <dxi-item dataField=\\\"route\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.route }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <!-- Địa chỉ giao hàng -->\\r\\n            <dxi-item dataField=\\\"place_of_delivery\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address_delivery }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <!-- Nhân viên thu tiền -->\\r\\n            <dxi-item dataField=\\\"cash_staff\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.cash_staff }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Ghi chú -->\\r\\n        <dxi-item cssClass=\\\"vat_hdt invoice-note\\\" dataField=\\\"note\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.note }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <div *dxTemplate=\\\"let d of 'notifydate'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.list_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\" [displayFormat]=\\\"'dd/MM/yyyy'\\\"\\r\\n          [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'deliverydata'\\\">\\r\\n        <dx-date-box [(value)]=\\\"frmData.from_warehouse_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\"\\r\\n          [displayFormat]=\\\"'dd/MM/yyyy'\\\" [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n        </dx-date-box>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-6\\\">\\r\\n    <dx-form tabIndex=\\\"thongTinKhachHang\\\" [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <!-- Xuất hóa đơn cho, nhóm khách hàng -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"customer_object_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.customer_object_codes, displayExpr: 'name', valueExpr: 'code', onValueChanged: customer_object_codeChange}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_invoice_for }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"customer_type\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.customer_types, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_group }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Mã số thuế, mã khách hàng -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='vat_hdt layout_input group-input-button'>\\r\\n            <dxi-item name=\\\"search-mst\\\" cssClass='max_left'>\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.tax_code }}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-autocomplete valueExpr=\\\"tax_code\\\"\\r\\n                  placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\" [dataSource]=\\\"tax_codes\\\"\\r\\n                  [(value)]=\\\"frmData.buyer_tax_code\\\" [readOnly]=\\\"readOnlyCacTruongConLai\\\"\\r\\n                  (onItemClick)=\\\"taxCodeChoose($event)\\\" (onFocusOut)=\\\"updateTaxcodeInfo($event)\\\"\\r\\n                  (onValueChanged)=\\\"changeTaxCode($event)\\\">\\r\\n                  <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                    <span>{{item.tax_code}}: {{ item.name }}</span>\\r\\n                  </div>\\r\\n                </dx-autocomplete>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <dxi-item cssClass='btn-small'>\\r\\n              <button (click)=\\\"searchTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n                <i class=\\\"{{_translate.ICONS.search}}\\\" style=\\\"font-size: 22px;\\\"></i>\\r\\n              </button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" cssClass='vat_hdt layout_input group-input-button'>\\r\\n            <dxi-item name=\\\"search-mkh\\\" cssClass='max_right'>\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_code }}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-autocomplete valueExpr=\\\"code\\\"\\r\\n                  placeholder=\\\"{{ _translate.CONTROLL.PLACE_HOLDER.input_content_search }}\\\"\\r\\n                  [dataSource]=\\\"customer_codes\\\" [(value)]=\\\"frmData.customer_code\\\" [readOnly]=\\\"readOnlyCacTruongConLai\\\"\\r\\n                  (onItemClick)=\\\"customerCodeChoose($event)\\\" (onFocusOut)=\\\"updateCustomerInfo($event)\\\">\\r\\n                  <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n                    <span>{{item.code}}: {{ item.name }}</span>\\r\\n                  </div>\\r\\n                </dx-autocomplete>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n            <dxi-item cssClass='btn-small'>\\r\\n              <button (click)=\\\"editTaxCode()\\\" type=\\\"button\\\" class=\\\"button-tax-code\\\">\\r\\n                <i class=\\\"dx-icon fa fa-plus-circle icon-size\\\"></i>\\r\\n              </button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Tên đơn vị -->\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"customer_name\\\"\\r\\n          [editorOptions]=\\\"{disabled: tod.customer_name, isRequired: false,onValueChanged: customerChanged}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.customer_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Họ tên người mua, điện thoại di động -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input max_left\\\" dataField=\\\"buyer_name\\\"\\r\\n            [editorOptions]=\\\"{disabled: tod.buyer_name,onValueChanged: customerChanged}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.buyer_name }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"buyer_mobile\\\" [editorOptions]=\\\"{onValueChanged: customerChanged}\\\"\\r\\n            cssClass=\\\"vat4 invoice-note max_right\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.phone }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.phone\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.phone }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!-- Địa chỉ -->\\r\\n        <dxi-item *ngIf=\\\"configs.system_parameter.view_bank_account_seller\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"buyer_address\\\"\\r\\n            [editorOptions]=\\\"{disabled: tod.buyer_address,onValueChanged: customerChanged}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" *ngIf=\\\"!configs.system_parameter.view_bank_account_seller\\\"\\r\\n          dataField=\\\"buyer_address\\\" [editorOptions]=\\\"{disabled: tod.buyer_address,onValueChanged: customerChanged}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.address }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Email -->\\r\\n        <dxi-item [label]=\\\"{text: 'Email'}\\\" cssClass=\\\"vat_hdt layout_input\\\">\\r\\n          <div class=\\\"dx-field-item-content dx-field-item-content-location-right\\\">\\r\\n            <div\\r\\n              class=\\\"dx-textbox dx-texteditor dx-widget dx-texteditor-empty dx-validator dx-visibility-change-handler\\\">\\r\\n              <div class=\\\"dx-texteditor-container\\\" style=\\\"background: #fff; border: 1px solid #ddd;\\\">\\r\\n                <app-tag-input-email [variableName]=\\\"this.emails\\\" (numberGenerated)=\\\"renderDataEmail($event)\\\">\\r\\n                </app-tag-input-email>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n        <!-- Hóa đơn kiêm tờ khai hoàn vé -->\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isShowToKhai\\\">\\r\\n           <!-- Số hộ chiều -->\\r\\n           <dxi-item cssClass=\\\"in-hoa vat2 layout_input\\\" dataField=\\\"passport\\\" [template]=\\\"'passportTem'\\\"\\r\\n           [editorOptions]=\\\"{disabled: disableTemplateInput() }\\\">\\r\\n           <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.passport}}\\\"></dxo-label>\\r\\n           <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.passport }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n         </dxi-item>\\r\\n         <!-- Quốc tịch -->\\r\\n         <dxi-item cssClass=\\\"in-hoa vat2 layout_input\\\" dataField=\\\"nationality\\\" [template]=\\\"'nationality'\\\"\\r\\n           [editorOptions]=\\\"{disabled: disableTemplateInput()}\\\">\\r\\n           <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.nationality}}\\\"></dxo-label>\\r\\n           <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.nationality }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n         </dxi-item>\\r\\n        </dxi-item>\\r\\n        \\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isShowToKhai\\\">\\r\\n          <!-- Ngày cấp hộ chiếu -->\\r\\n          <dxi-item cssClass=\\\"in-hoa vat2 layout_input\\\" dataField=\\\"passport_date\\\"\\r\\n            [template]=\\\"'passportDate'\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.passport_date}}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.passport_date }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <!-- Ngày hết hạn hộ chiếu -->\\r\\n          <dxi-item dataField=\\\"passport_expiration_date\\\" [template]=\\\"'expiration'\\\"\\r\\n          cssClass=\\\"in-hoa vat2 layout_input\\\">\\r\\n            <dxo-label text=\\\"{{_translate.CONTROLL.LABEL.passport_expiration_date}}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.passport_expiration_date }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <!--  -->\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" *ngIf=\\\"configs.system_parameter.display_export_place\\\" dataField=\\\"export_place\\\"\\r\\n          editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.export_places, onValueChanged: exportPlaceChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_place }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" *ngIf=\\\"configs.system_parameter.display_export_place\\\" dataField=\\\"export_address\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_address }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" *ngIf=\\\"configs.system_parameter.display_transport_number\\\" dataField=\\\"transport_number\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.transport_number }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" *ngIf=\\\"configs.system_parameter.display_transport_number\\\" dataField=\\\"train_name\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.train_name }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Đơn vị tính chung -->\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" *ngIf=\\\"configs.system_parameter.unit_general\\\" dataField=\\\"unit_general\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.unit_general }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!--Thông tin other_id -->\\r\\n        <dxi-item cssClass=\\\"vat_hdt layout_input\\\" *ngIf=\\\"configs.system_parameter.other_id\\\" dataField=\\\"other_id\\\">\\r\\n          <dxo-label text=\\\"{{ _translate.CONFIGS.other_id }}\\\"></dxo-label>\\r\\n        </dxi-item>\\r\\n        <!-- Hóa đơn bàn giao xe -->\\r\\n        <dxi-item *ngIf=\\\"isShowBanGiaoXe\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Màu xe -->\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"color\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.vehicle_color }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- Số máy -->\\r\\n          <dxi-item dataField=\\\"invoice_engine_number\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.engine_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Số khung -->\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"invoice_chassis_number\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.chassis_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- Năm sản xuất -->\\r\\n          <dxi-item dataField=\\\"manufacture_year\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.year_manufacture }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <!-- Hóa đơn bảo dưỡng xe -->\\r\\n      <dxi-item *ngIf=\\\"isShowBaoDuongXe\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Ngày ra, vào xe -->\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"in_out_date\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.in_out_date }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- Số hóa đơn nội bộ -->\\r\\n          <dxi-item dataField=\\\"invoice_internal_number\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_internal_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Biển số xe -->\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"license_plate\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.license_plate }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- Số khung -->\\r\\n          <dxi-item dataField=\\\"invoice_chassis_number\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE_DETAILS.chassis_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <!-- Số km -->\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input\\\" dataField=\\\"kilometer_number\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.kilometer_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n       <!-- Hóa đơn nhà thuốc -->\\r\\n       <dxi-item *ngIf=\\\"configs.system_parameter.display_infor_put_product\\\" itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Đơn đặt hàng -->\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input max_left\\\" dataField=\\\"the_order\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.the_order }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- Số tham khảo -->\\r\\n          <dxi-item dataField=\\\"consult_number\\\" cssClass=\\\"max_right\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.consult_number }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n          <!-- Kho -->\\r\\n          <dxi-item cssClass=\\\"vat_hdt layout_input max_left\\\" dataField=\\\"from_warehouse_name\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.warehouse }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- Phiếu nhận hàng -->\\r\\n          <dxi-item dataField=\\\"receive_bill\\\" cssClass=\\\"max_right\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.receive_bill }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      </dxi-item>\\r\\n      <div *dxTemplate=\\\"let d of 'passportTem'\\\">\\r\\n        <div style=\\\"display: flex;\\\" class=\\\"customize-textbox\\\">\\r\\n          <!-- <div style=\\\"color: red;padding-right: 5px;\\\">*</div> -->\\r\\n          <dx-text-box [(value)]=\\\"frmData.passport\\\"  style=\\\"width: 100%\\\"></dx-text-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'nationality'\\\">\\r\\n        <div style=\\\"display: flex;\\\" class=\\\"customize-textbox\\\">\\r\\n          <!-- <div style=\\\"color: red;padding-right: 5px;\\\">*</div> -->\\r\\n          <dx-text-box [(value)]=\\\"frmData.nationality\\\" style=\\\"width: 100%\\\"></dx-text-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'expiration'\\\">\\r\\n        <div style=\\\"display: flex;\\\">\\r\\n          <!-- <div style=\\\"color: red;padding-right: 5px;\\\">*</div> -->\\r\\n          <dx-date-box [(value)]=\\\"frmData.passport_expiration_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\"\\r\\n            [displayFormat]=\\\"'dd/MM/yyyy'\\\" [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n          </dx-date-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'passportDate'\\\">\\r\\n        <div style=\\\"display: flex;\\\">\\r\\n          <!-- <div style=\\\"color: red;padding-right: 5px;\\\">*</div> -->\\r\\n          <dx-date-box [(value)]=\\\"frmData.passport_date\\\" type=\\\"date\\\" [useMaskBehavior]=\\\"true\\\"\\r\\n            [displayFormat]=\\\"'dd/MM/yyyy'\\\" [dateSerializationFormat]=\\\"'yyyy-MM-dd HH:mm:ss'\\\">\\r\\n          </dx-date-box>\\r\\n        </div>\\r\\n      </div>\\r\\n    </dx-form>\\r\\n    <!-- trường mở rộng -->\\r\\n    <!-- <dx-form #form3 style=\\\"margin-top:7px\\\" [formData]=\\\"customerTempt\\\" [items]=\\\"formItems\\\" class=\\\"customer-tempt\\\">\\r\\n    </dx-form> -->\\r\\n    <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\"  [formData]=\\\"frmData\\\"  [customerTempt]=\\\"customerTempt\\\" [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'invoice_options'\\\"></app-form-extend>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-12\\\" style=\\\"margin-top:7px;margin-bottom:7px\\\">\\r\\n    <dx-form #form4 *ngIf=\\\"!isTT78\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <ng-container *ngIf=\\\"configs.system_parameter.allow_keep_invoice_number && isShowButtonWaiteSign\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item name=\\\"btn-chossen-hdck\\\">\\r\\n              <dx-button id=\\\"btn-chossen-hdck\\\" (click)=\\\"showModalHdck()\\\" icon=\\\"assets\\\\img\\\\icons\\\\GiuSo.png\\\"\\r\\n                text=\\\"{{_translate.CONTROLL.BUTTON.select_inv_wait_sign}}\\\" type=\\\"default\\\"></dx-button>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </ng-container>\\r\\n\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{_translate.CONFIRM.update_customer}}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{_translate.CONTROLL.LABEL.update}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \"::ng-deep .vat_hdt.invoice-number-create-invoice input{color:red;font-weight:bold}.icon-size{font-size:21px;padding:2px 0}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code:focus{outline:none}::ng-deep .vat_hdt.invoice-note input{color:#0070C0;font-weight:bold}::ng-deep .vat_hdt.layout_input span.dx-field-item-label-content{width:144px}::ng-deep .custom-tempt .dx-texteditor-container .dx-texteditor-input-container .dx-texteditor-input{padding:0px 9px}#advBtn{margin-top:0;width:5%}:host ::ng-deep .customize-textbox dx-text-box .dx-texteditor-input,dx-number-box .dx-texteditor-input{padding:0px 9px 0px}\\n\"","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild, ViewChildren } from '@angular/core';\r\nimport { ActivatedRoute, } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { pattern } from '@config/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { AddCustomerComponent } from '@shared/index';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { ChooseHdckComponent } from '../choose-hdck/choose-hdck.component';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport * as _ from 'lodash';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n\r\n@Component({\r\n  selector: 'vat-form-invoice',\r\n  templateUrl: './form-invoice.component.html',\r\n  styleUrls: ['./form-invoice.component.scss']\r\n})\r\nexport class FormInvoiceComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  routeSub: Subscription;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @ViewChild(FormExtendComponent) formExtend: FormExtendComponent;\r\n  @Input() frmData: any;\r\n  @Input() type: any;\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() extentionGrid: any;\r\n  @Input() isShowButtonWaiteSign: boolean;\r\n  @Input() isTT78: boolean;\r\n  @Input() pkInvoiceSelectWaitSign: any;\r\n  @Input() infoDangKy: any;\r\n  @Input() isRequired: boolean;\r\n  @Input() ttDaXuatHoaDon: boolean = false;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('onInvoiceCurrent') onInvoiceCurrent = new EventEmitter<any>();\r\n  @Output('onTemplateChange') onTemplateChange = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  @Output('onTemplateTT78TypeChange') onTemplateTT78TypeChange = new EventEmitter<any>();\r\n\r\n  originInvoiceNumber: any;\r\n  bsModalRef: BsModalRef;\r\n  bsModalHdckRef: BsModalRef;\r\n  template_temp: any;\r\n  select: any = {};\r\n  isShowToKhai = false;\r\n  pattern = pattern;\r\n  tax_codes: any = [];\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  showTraLai = false;\r\n  disableInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuatOptions = [];\r\n  showPopup = false;\r\n  customerCurent: any = {};\r\n  emails: any = [];\r\n  configs: any = {};\r\n  private arrEmail: any = [];\r\n  listRoleBranchOrigin: Array<any>;\r\n  role_branch: boolean;\r\n  isShowBanGiaoXe: boolean;\r\n  isShowBaoDuongXe: boolean;\r\n  // thay đổi disable của 3 input customer_name, buyer_name, buyer_address\r\n  tod: any = {};\r\n  _translate: any;\r\n  formItems = [];\r\n  tax_code_search: any;\r\n  customForms = [];\r\n  customerTempt = {};\r\n  dataTaxCode: any;\r\n  template_type: any;\r\n  httpOptions = {\r\n    headers: new HttpHeaders({\r\n      'Authorization': `Bearer ${JSON.parse(localStorage.getItem('access_token')).value}`,\r\n      'TaxCode': JSON.parse(localStorage['currentUser']).account.tax_code,\r\n      'Content-Type': 'application/json',\r\n    })\r\n  };\r\n  mst_btn_options = {\r\n    text: '', icon: 'fa fa-plus-circle', type: 'default',\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n          if (customer.bank_account_number) {\r\n            this.frmData.bank_account_number = customer.bank_account_number;\r\n          }\r\n          if (customer.bank_name) {\r\n            this.frmData.bank_name = customer.bank_name;\r\n          }\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n    private http: HttpClient,\r\n    private listService: ListsService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.formDuLieuMoRong(this.template_temp);\r\n    if(this.frmData.total_payment){\r\n      const tien_chu = Helper.tienBangChu(Math.abs(this.frmData.total_payment), VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n      this.frmData.total_payment_in_word = this.invoiceService.docTienAm(this.frmData.total_payment, tien_chu, this.configs, this.frmData.currency_code);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate, this.frmData.status);\r\n\r\n    this.role_branch = this.listService.getDataConfigLocalStorage();\r\n    if (this.route.snapshot.queryParams['status'] === 'return') {\r\n      this.showTraLai = true;\r\n      this.frmData.nguoitralai = this.authService.getCurrentUser().user.name;\r\n      this.frmData.ngaytralai = moment(new Date()).format('YYYY-MM-DD');\r\n    }\r\n\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      this.configs = this.authService.getConfigs();\r\n\r\n      // put data DM for select\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.currency_codes = danh_muc.DM_LOAI_TIEN ? danh_muc.DM_LOAI_TIEN.data : null;\r\n      this.select.customer_types = danh_muc.DM_NHOM_KHACH_HANG ? danh_muc.DM_NHOM_KHACH_HANG.data : null;\r\n      this.select.export_places = danh_muc.DM_NOI_XUAT_HOA_DON ? danh_muc.DM_NOI_XUAT_HOA_DON.data : null;\r\n      this.select.list_bank_account_seller = danh_muc.DM_TAI_KHOAN_NGAN_HANG ? danh_muc.DM_TAI_KHOAN_NGAN_HANG.data : null;\r\n      this.select.list_bank_account_seller.forEach(item => {\r\n        item.name_display = item.code + ': ' + item.name;\r\n      });\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        if (!this.frmData.id) {\r\n          temptTT78 = data.init[1];\r\n        }\r\n        else {\r\n          temptTT78 = data.init[3];\r\n        }\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (Number.parseInt(this.frmData.invoice_number) > 0) {\r\n            if (this.frmData.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.frmData.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n        if (this.frmData.id)\r\n          this.changeTemplateInvoice(this.frmData.invoice_date);\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n        if (!this.frmData.id) {\r\n          this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.release_status != 'DA_HUY_SO');\r\n        }\r\n      }\r\n    });\r\n    this.select.customer_object_codes = VSelectBoxService._customerObject(this._translate);\r\n    this.select.adjustment_forms = VSelectBoxService._adjustmentForms(this._translate);\r\n    this.select.adjustment_objects = VSelectBoxService._adjustmentObjects(this._translate);\r\n\r\n    // Set disabled cho đơn vị tổ chức\r\n    this.setDisabledByCustomer_object_code(this.frmData.customer_object_code);\r\n\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n            this.isShowBanGiaoXe = true;\r\n          else\r\n            this.isShowBanGiaoXe = false;\r\n          if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n            this.isShowBaoDuongXe = true;\r\n          else\r\n            this.isShowBaoDuongXe = false;\r\n          // Nếu là mẫu html\r\n          if (item.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe)\r\n            this.isShowToKhai = true;\r\n          else\r\n            this.isShowToKhai = false;\r\n          this.template_temp = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.frmData.invoice_release_id = \"\";\r\n          if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n            this.isShowBanGiaoXe = true;\r\n          else\r\n            this.isShowBanGiaoXe = false;\r\n          if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n            this.isShowBaoDuongXe = true;\r\n          else\r\n            this.isShowBaoDuongXe = false;\r\n          // Nếu là mẫu html\r\n          if (item.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe)\r\n            this.isShowToKhai = true;\r\n          else\r\n            this.isShowToKhai = false;\r\n          this.template_temp = item;\r\n        }\r\n      });\r\n    }\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n  }\r\n\r\n  formDuLieuMoRong(item) {\r\n    this.customForms = [];\r\n    this.customerTempt = {};\r\n    Helper.resetObject(this.formItems);\r\n    if (item.fields && item.fields.length > 0) {\r\n      const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n      if (_arrayGrid && _arrayGrid.length > 0) {\r\n        this.extentionGrid.ma_hang = false;\r\n        this.extentionGrid.so_lo = false;\r\n        this.extentionGrid.han_dung = false;\r\n        this.extentionGrid.nuoc_san_xuat = false;\r\n        this.extentionGrid.don_hang_hop_dong = false;\r\n        this.extentionGrid.ma_quan_ly = false;\r\n        for (let i = 0; i < _arrayGrid.length; i++) {\r\n          const column = _arrayGrid[i]['name'];\r\n          const value = _arrayGrid[i]['is_show'];\r\n          const _ma = VStringService._convertToViKdau(column);\r\n          this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n        }\r\n      }\r\n      let _dulieumorong = _.cloneDeep(item.fields).filter(x => x.type === '4');\r\n      const invoice_options = this.frmData.invoice_options;\r\n\r\n      if (invoice_options.length > 0) {\r\n        _dulieumorong = _dulieumorong.map((dl) => {\r\n          let option = invoice_options.find(x => x.code == dl.code)\r\n          if (option) {\r\n            dl.value = option.value;\r\n          }\r\n          return dl;\r\n        });\r\n      }\r\n\r\n      this.frmData.invoice_options = _dulieumorong;\r\n      if (_dulieumorong.length > 0) {\r\n        this.formExtend.createForm(this.customForms, _dulieumorong)\r\n      }\r\n      _dulieumorong.forEach(value => {\r\n        this.customerTempt[value.code] = value.value;\r\n      });\r\n    }\r\n    else {\r\n      this.frmData.invoice_options = [];\r\n      this.extentionGrid.ma_hang = false;\r\n      this.extentionGrid.so_lo = false;\r\n      this.extentionGrid.han_dung = false;\r\n      this.extentionGrid.nuoc_san_xuat = false;\r\n      this.extentionGrid.don_hang_hop_dong = false;\r\n      this.extentionGrid.ma_quan_ly = false;\r\n    }\r\n  }\r\n\r\n  // createForm() {\r\n  //   this.form.instance.beginUpdate();\r\n  //   this.form.instance.itemOption('business_addressa', { label: { text: 'Đia chỉaaa' }, editorOptions: { placeholder: 'Nhập địa chỉ' } });\r\n  //   this.form.instance.endUpdate();\r\n  // }\r\n\r\n  async editTaxCode() {\r\n    this.listRoleBranchOrigin = [];\r\n    if (this.role_branch) {\r\n      const roleUser = await this.listService.getDataUserLocalStorege();\r\n      if (roleUser) {\r\n        this.listRoleBranchOrigin = await this.handleListRoleBranch(roleUser);\r\n      } else {\r\n        this.listRoleBranchOrigin = await this.listService.handleListRoleBranchUser();\r\n      }\r\n      if (Array.isArray(this.listRoleBranchOrigin) && this.listRoleBranchOrigin.length) {\r\n        if (this.listRoleBranchOrigin.length === 2) {\r\n          this.listRoleBranchOrigin = this.listRoleBranchOrigin.filter(value => {\r\n            if (value.code !== 'TAT_CA') {\r\n              value.checked = true;\r\n              return value;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n    const initialState = {\r\n      isVisibleGhiVaThemMoi: false,\r\n      role_branch: this.role_branch,\r\n      roleBranchStatus: this.listRoleBranchOrigin\r\n    };\r\n    this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n      class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const submodal = this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveData) {\r\n        const customer = this.bsModalRef.content.successSaveData;\r\n        this.frmData.customer_name = customer.name;\r\n        this.frmData.buyer_tax_code = customer.tax_code;\r\n        this.frmData.buyer_name = customer.contact_person_name;\r\n        this.frmData.buyer_address = customer.business_address;\r\n        this.frmData.customer_code = customer.code;\r\n        this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n        if (customer.email) {\r\n          this.frmData.buyer_email = customer.email;\r\n          this.emails = [];\r\n          const stringDataEmailGet = customer.email.split(';');\r\n          for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n            this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n          }\r\n        } else {\r\n          this.frmData.buyer_email = customer.email;\r\n          this.emails = [];\r\n        }\r\n        if (customer.bank_account_number) {\r\n          this.frmData.bank_account_number = customer.bank_account_number;\r\n        }\r\n        if (customer.bank_name) {\r\n          this.frmData.bank_name = customer.bank_name;\r\n        }\r\n      }\r\n      submodal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ////// Tạo form mở rộng\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n\r\n  updateCustomerInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.code) !== VStringService._getValueToString(this.frmData.customer_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  updateTaxcodeInfo = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.tax_code) !== VStringService._getValueToString(this.frmData.buyer_tax_code)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (let key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.invoice_options = _dulieumorong;\r\n    });\r\n  }\r\n\r\n  async handleListRoleBranch(roleUser) {\r\n    let arrList: any;\r\n    arrList = await this.listService.handleGetDMtoCustomer(roleUser);\r\n    if (Array.isArray(arrList) && arrList.length) {\r\n      return this.listService.handleCheckAll(arrList);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  disableTemplateInput() {\r\n    if (this.frmData.invoice_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n  public removeReadonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n  // reset trường mở rộng\r\n  public resetTMR() {\r\n    this.formExtend.resetForm();\r\n    this.formExtend.resetOptions();\r\n  }\r\n\r\n  setDisabledByCustomer_object_code(value) {\r\n    this.tod.customer_name = false;\r\n    this.tod.buyer_name = false;\r\n    this.tod.buyer_address = false;\r\n    switch (value) {\r\n      case 'DOANH_NGHIEP':\r\n        break;\r\n      case 'CA_NHAN':\r\n        this.frmData.customer_name = '';\r\n        this.tod.customer_name = true;\r\n        break;\r\n      case 'KHACH_LE':\r\n        this.frmData.customer_name = '';\r\n        this.frmData.buyer_address = '';\r\n        this.tod.customer_name = true;\r\n        this.tod.buyer_address = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  getHtXuatValue() {\r\n    return this.frmData.status;\r\n  }\r\n\r\n  getFrmData() {\r\n    return this.frmData;\r\n  }\r\n\r\n  // sự kiện\r\n  taxCodeKeyUp = (e) => {\r\n    const str = this.frmData.buyer_tax_code;\r\n    const len = str.length;\r\n    if (len >= 3) {\r\n      this.vatService.searchMST(str).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          const arr = [];\r\n          rs.data.customers.forEach(item => {\r\n            arr.push(item);\r\n          });\r\n          this.tax_codes = arr;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  taxCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.customer_code = customer.code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.bank_account_number = customer.bank_account_number ? customer.bank_account_number : '';\r\n    this.frmData.bank_name = customer.bank_name ? customer.bank_name : '';\r\n    ////\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerCodeChoose(e) {\r\n    const customer = e.itemData;\r\n    if (this.frmData.customer_object_code !== 'CA_NHAN' && this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.customer_name = customer.name;\r\n    }\r\n    this.frmData.buyer_name = customer.contact_person_name;\r\n    if (this.frmData.customer_object_code !== 'KHACH_LE') {\r\n      this.frmData.buyer_address = customer.business_address;\r\n    }\r\n    this.frmData.buyer_tax_code = customer.tax_code;\r\n    this.frmData.buyer_mobile = customer.contact_mobile;\r\n    if (customer.email) {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n      const stringDataEmailGet = customer.email.split(';');\r\n      for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n        this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n      }\r\n    } else {\r\n      this.frmData.buyer_email = customer.email;\r\n      this.emails = [];\r\n    }\r\n    this.frmData.customer_id = customer.id;\r\n    this.frmData.bank_account_number = customer.bank_account_number ? customer.bank_account_number : '';\r\n    this.frmData.bank_name = customer.bank_name ? customer.bank_name : '';\r\n    this.onFieldDataChanged();\r\n  }\r\n\r\n  customerChanged = (e) => {\r\n    if (this.frmData.customer_id) {\r\n      this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n        if (response.data) {\r\n          this.customerCurent = response.data.customer;\r\n          if (this.customerCurent) {\r\n            if (VStringService._getValueToString(this.customerCurent.name) !== VStringService._getValueToString(this.frmData.customer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_person_name) !== VStringService._getValueToString(this.frmData.buyer_name)\r\n              || VStringService._getValueToString(this.customerCurent.contact_mobile) !== VStringService._getValueToString(this.frmData.buyer_mobile)\r\n              || VStringService._getValueToString(this.customerCurent.business_address) !== VStringService._getValueToString(this.frmData.buyer_address)\r\n              || VStringService._getValueToString(this.customerCurent.email) !== VStringService._getValueToString(this.frmData.buyer_email)\r\n              || VStringService._getValueToString(this.customerCurent.bank_name) !== VStringService._getValueToString(this.frmData.bank_name)\r\n              || VStringService._getValueToString(this.customerCurent.bank_account_number) !== VStringService._getValueToString(this.frmData.bank_account_number)) {\r\n              this.showPopup = true;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n  customer_object_codeChange = (e) => {\r\n    this.setDisabledByCustomer_object_code(e.value);\r\n  };\r\n\r\n  templateChange = (e) => {\r\n    this.select.invoice_releases.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.template_id = item.template_id;\r\n        this.onTemplateChange.emit(item.is_multi_vat);\r\n        this.onTemplateTypeChange.emit(item);\r\n        if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n          this.isShowBanGiaoXe = true;\r\n        else\r\n          this.isShowBanGiaoXe = false;\r\n        if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n          this.isShowBaoDuongXe = true;\r\n        else\r\n          if (item.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe)\r\n            this.isShowToKhai = true;\r\n          else\r\n            this.isShowToKhai = false;\r\n        this.isShowBaoDuongXe = false;\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._objTemplateSelect[key] = value;\r\n          }\r\n        }\r\n        if (!this._objTemplateSelect.is_discount) {\r\n          this.invoice_products.load().then((dataSource) => {\r\n            dataSource.forEach((item, index) => {\r\n              item.discount = null;\r\n              item.amount_discount = null;\r\n            });\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n          }\r\n        }\r\n\r\n        // Nếu là mẫu html\r\n        this.formDuLieuMoRong(item);\r\n      }\r\n    });\r\n  };\r\n\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.invoice_release_id = \"\";\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.invoice_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateChange.emit(item.is_multi_vat);\r\n        this.onTemplateTT78TypeChange.emit(item);\r\n        if (item.template_type == sEnum.templatetype.HoaDonBanGiaoXe)\r\n          this.isShowBanGiaoXe = true;\r\n        else\r\n          this.isShowBanGiaoXe = false;\r\n        if (item.template_type == sEnum.templatetype.HoaDonBaoDuongXe)\r\n          this.isShowBaoDuongXe = true;\r\n        else\r\n          this.isShowBaoDuongXe = false;\r\n        if (item.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe)\r\n          this.isShowToKhai = true;\r\n        else\r\n          this.isShowToKhai = false;\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        if (!this._oTemplateTT78.is_discount) {\r\n          this.invoice_products.load().then((dataSource) => {\r\n            dataSource.forEach((item, index) => {\r\n              item.discount = null;\r\n              item.amount_discount = null;\r\n            });\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n          }\r\n        }\r\n\r\n        // Nếu là mẫu html\r\n        this.formDuLieuMoRong(item);\r\n      }\r\n    });\r\n  };\r\n\r\n\r\n  currencyCodeChange = (e) => {\r\n    if (this.frmData.currency_code === 'VND') {\r\n      this.frmData.currency_rate = null;\r\n    }\r\n    const tien_chu = Helper.tienBangChu(Math.abs(this.frmData.total_payment), VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n    this.frmData.total_payment_in_word = this.invoiceService.docTienAm(this.frmData.total_payment, tien_chu, this.configs, this.frmData.currency_code);\r\n  };\r\n  currencyRateChange = (e) => {\r\n    if (!this.isTT78)\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n    else\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n  };\r\n\r\n  exportPlaceChange = (e) => {\r\n    const _obj = this.select.export_places.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.export_address = _obj.dia_chi;\r\n      this.frmData.export_place_name = _obj.name;\r\n    }\r\n  };\r\n  bankAccountSellerChange = (e) => {\r\n    const _obj = this.select.list_bank_account_seller.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.seller_bank_account_name = _obj.name;\r\n      // this.frmData.export_place_name = _obj.name;\r\n    } else {\r\n      this.frmData.seller_bank_account_name = '';\r\n    }\r\n  };\r\n\r\n  paymentMethodChange = (e) => {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.payment_method_view_name = _obj.name;\r\n    }\r\n  };\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  capNhatDmKhachHang() {\r\n    this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.buyer_tax_code);\r\n    this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n    this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n    this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.buyer_name);\r\n    this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.buyer_mobile);\r\n    this.customerCurent.business_address = VStringService._getValueToString(this.frmData.buyer_address);\r\n    this.customerCurent.email = VStringService._getValueToString(this.frmData.buyer_email);\r\n    this.customerCurent.bank_name = VStringService._getValueToString(this.frmData.bank_name);\r\n    this.customerCurent.bank_account_number = VStringService._getValueToString(this.frmData.bank_account_number);\r\n    const data = { customer: this.customerCurent };\r\n    this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n      if (response.status === 'success') {\r\n        this.showPopup = false;\r\n      } else {\r\n        Library.notify(response.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n    });\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n\r\n  renderDataEmail($event) {\r\n    this.arrEmail = [];\r\n    this.emails = $event;\r\n    if (this.emails.length > 0) {\r\n      for (let i = 0; i < this.emails.length; i++) {\r\n        if (typeof this.emails[i] === 'object')\r\n          this.arrEmail.push(this.emails[i].value);\r\n        else\r\n          if (typeof this.emails[i] === 'string')\r\n            this.arrEmail.push(this.emails[i]);\r\n      }\r\n      const emailToString = this.arrEmail.toString();\r\n      this.frmData.buyer_email = emailToString.replace(/,/g, ';');\r\n    } else {\r\n      this.frmData.buyer_email = null;\r\n    }\r\n    this.customerChanged(null);\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n  /* Chọn hóa đơn chờ ký */\r\n  showModalHdck() {\r\n    let release = this.select.invoice_releases.filter(p => p.template_id == this.frmData.template_id)[0];\r\n    if (release) {\r\n      let invoiceReleaseId = release.value;\r\n      const initialState = {\r\n        invoiceNumberOrigin: \"0\",\r\n        invoiceReleaseId: invoiceReleaseId,\r\n        onSave: (data) => {\r\n          if (VStringService._getValueToString(this.pkInvoiceSelectWaitSign) != \"\") {\r\n            this.onInvoiceCurrent.emit(this.pkInvoiceSelectWaitSign);\r\n            this.frmData.status = sEnum.statusInv.ChoKy;\r\n          }\r\n          this.frmData.id = data.id;\r\n          this.frmData.invoice_date = data.invoice_date;\r\n          this.frmData.invoice_number = data.invoice_number;\r\n        }\r\n      };\r\n      this.bsModalHdckRef = this.modalService.show(ChooseHdckComponent, {\r\n        backdrop: 'static',\r\n        keyboard: false,\r\n        class: 'modal-lg full-modal',\r\n        initialState\r\n      });\r\n    }\r\n  }\r\n\r\n  changeDateTime = (e) => {\r\n    this.changeTemplateInvoice(e.value);\r\n  }\r\n\r\n  changeTemplateInvoice(strDate) {\r\n    if (this.isTT78) {\r\n      let year = \"\";\r\n      if (VStringService._getValueToString(strDate) != \"\")\r\n        year = VStringService._getValueToString(strDate).substring(4, 2);\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n      }\r\n      let templates = this.select.templatesTT78;\r\n      this.select.templatesTT78 = [];\r\n      if (templates && templates.length > 0) {\r\n        templates.forEach(item => {\r\n          if (VStringService._getValueToString(item.name) != \"\")\r\n            item.name = item.name.replace(item.name.substring(4, 2), year);\r\n          // for (const key in item) {\r\n          //   if (item.hasOwnProperty(key)) {\r\n          //     const value = item[key];\r\n          //     this._oTemplateTT78[key] = value;\r\n          //   }\r\n          // }\r\n          if (item.value === this.frmData.template_id) {\r\n            this.onTemplateTT78TypeChange.emit(item);\r\n            //  item.invoice_series = item.invoice_series.replace(item.invoice_series.substring(3, 1), year);\r\n            // this.frmData.invoice_series = item.invoice_series;\r\n            // this.frmData.template_code = item.template_code;\r\n          }\r\n          this.select.templatesTT78.push(item);\r\n        });\r\n      }\r\n    }\r\n  }\r\n  changeTaxCode(e) {\r\n    this.frmData.buyer_tax_code = e.value\r\n  }\r\n  searchTaxCode() {\r\n    Library.showloading();\r\n    if (!this.frmData.buyer_tax_code) {\r\n      Library.notify(\"Vui lòng nhập mã số thuế!\", \"error\")\r\n    } else {\r\n      this.vatService.getInfoCompany(this.frmData.buyer_tax_code).subscribe(res => {\r\n        if (res.status == \"success\") {\r\n          this.dataTaxCode = res.data.customer;\r\n          this.frmData.customer_name = this.dataTaxCode.name;\r\n          this.frmData.buyer_address = this.dataTaxCode.business_address;\r\n        }\r\n      })\r\n    }\r\n    setTimeout(() => {\r\n      Library.hideloading();\r\n    }, 1000);\r\n  }\r\n\r\n\r\n  focusField(tagForm, field) {\r\n    if (tagForm && field) {\r\n      const form_current = this.listDxForm.find(form => form.tabIndex === tagForm);\r\n      if (form_current) {\r\n        form_current.instance.getEditor(field).focus()\r\n      }\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"import-invoices\\\">\\r\\n  <form class=\\\"form-import-invoices\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">{{ _translate.MENU.import_invoice_from_excel}}</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"dong()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\" style=\\\"padding-bottom: 0px;\\\">\\r\\n      <div class=\\\"row inport-selector\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div *ngIf=\\\"!isTT78\\\" class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.invoice_form}}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [items]=\\\"invoice_releases\\\" displayExpr=\\\"name\\\" [(value)]=\\\"invoice_release_id\\\"\\r\\n                  valueExpr=\\\"value\\\" [disabled]=\\\"disabledInvoiceReleases\\\" (onValueChanged)=\\\"onInvoiceReleases($event)\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div *ngIf=\\\"isTT78\\\" class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.invoice_form}}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [items]=\\\"templatesTT78\\\" displayExpr=\\\"name\\\" [(value)]=\\\"template_id\\\" valueExpr=\\\"value\\\"\\r\\n                  [disabled]=\\\"disabledInvoiceReleases\\\" (onValueChanged)=\\\"onInvoiceTemplate($event)\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"field field-first\\\" style=\\\"width: 27%;\\\">\\r\\n              <div class=\\\"label\\\" style=\\\"width: 135px;\\\">{{ _translate.CONTROLL.LABEL.export_form }}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box [(value)]=\\\"htXuat\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\"\\r\\n                  [disabled]=\\\"!configs.system_parameter.allow_keep_invoice_number\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\">{{ _translate.CONTROLL.LABEL.file_name }}</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-text-box [readOnly]=\\\"true\\\" style=\\\"width: 92.5%!important; border-style: solid!important;\\\"\\r\\n                  [value]=\\\"fileName\\\"></dx-text-box>\\r\\n              </div>\\r\\n              <div class=\\\"btn-select-file\\\" style=\\\"margin-left: 30px;margin-top: 13px;\\\">\\r\\n                <a href=\\\"javascript:void(0)\\\" (click)=\\\"napDuLieuTuBangKe()\\\" class=\\\"support-link\\\">\\r\\n                  <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx, .xls\\\" (change)=\\\"onFileChanged($event)\\\"\\r\\n                    multiple=\\\"false\\\" style=\\\"display: none;\\\" />\\r\\n                  <span>{{ _translate.CONTROLL.LABEL.select_file }}</span>\\r\\n                </a>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- <div class=\\\"col-md-5\\\">\\r\\n            <div class=\\\"select-file\\\">\\r\\n              <div class=\\\"field\\\" *ngIf=\\\"!isAllowEditInvoiceDate\\\">\\r\\n                <div class=\\\"label\\\" style=\\\"width: 135px;\\\">Ngày xuất hóa đơn</div>\\r\\n                <div class=\\\"value\\\">\\r\\n                  <dx-date-box\\r\\n                    [(value)]=\\\"invoice_date\\\"\\r\\n                    displayFormat=\\\"dd/MM/yyyy\\\"\\r\\n                    dateSerializationFormat=\\\"yyyy-MM-dd\\\"\\r\\n                    >\\r\\n                  </dx-date-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div> -->\\r\\n      </div>\\r\\n      <div class=\\\"note-template-import\\\">\\r\\n        <p><span style=\\\"font-weight: 600; color: red; padding-right: 5px;\\\">{{ _translate.CONTROLL.LABEL.note1 }}</span>\\r\\n          {{ _translate.CONTROLL.LABEL.import_list_invoice_from_file_excel }}</p>\\r\\n        <p style=\\\"margin-left: 48px;\\\">{{ _translate.CONTROLL.LABEL.correct_format_download_template }} <a\\r\\n            href=\\\"javascript:void(0)\\\" style=\\\"font-weight: 600\\\" (click)=\\\"getFileTemp()\\\">{{\\r\\n            _translate.CONTROLL.LABEL.click_here }}</a></p>\\r\\n      </div>\\r\\n      <div class=\\\"read-file\\\">\\r\\n        <dx-button (click)=\\\"chonDocFile()\\\" text=\\\"{{ _translate.CONTROLL.LABEL.read_file_excel }}\\\" type=\\\"default\\\"\\r\\n          [disabled]=\\\"isDisReadFile\\\"></dx-button>\\r\\n        <dx-button (click)=\\\"configColumn()\\\" text=\\\"{{ _translate.CONTROLL.LABEL.config }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n      <!-- phần table hiển thị -->\\r\\n      <div class=\\\"row invoice-table\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <dx-data-grid id=\\\"gridImportInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n            [wordWrapEnabled]=\\\"true\\\" [columnAutoWidth]=\\\"false\\\" [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\"\\r\\n            [columnResizingMode]=\\\"true\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n            (onEditorPreparing)=\\\"onEditorPreparing($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\"\\r\\n            (onCellPrepared)=\\\"onCellPrepared($event)\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n            (onRowUpdated)=\\\"onRowUpdated($event)\\\" (onRowRemoving)=\\\"onRowRemoving($event)\\\"\\r\\n            (onKeyDown)=\\\"onGripKeyDown($event)\\\">\\r\\n            <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n            <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\" [allowDeleting]=\\\"true\\\" [useIcons]=\\\"true\\\">\\r\\n            </dxo-editing>\\r\\n            <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n            <dxo-column-fixing [enabled]=\\\"true\\\"></dxo-column-fixing>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('number_of_vouchers').is_visible\\\" dataField=\\\"number_of_vouchers\\\" [width]=\\\"130\\\"\\r\\n              caption=\\\"{{infoColumn('number_of_vouchers').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n              fixedPosition=\\\"left\\\">\\r\\n              <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('invoice_date').is_visible\\\" dataField=\\\"invoice_date\\\"\\r\\n              caption=\\\"{{infoColumn('invoice_date').column_name}}\\\" [width]=\\\"140\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\"\\r\\n              dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('customer_object_code').is_visible\\\" dataField=\\\"customer_object_code\\\"\\r\\n              [width]=\\\"70\\\" caption=\\\"{{infoColumn('customer_object_code').column_name}}\\\" alignment=\\\"center\\\"\\r\\n              [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('customer_code').is_visible\\\" dataField=\\\"customer_code\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('customer_code').column_name}}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n              fixedPosition=\\\"left\\\"></dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_tax_code').is_visible\\\" dataField=\\\"buyer_tax_code\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('buyer_tax_code').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n              fixedPosition=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"taxCodePattern\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.tax_code }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('customer_name').is_visible\\\" dataField=\\\"customer_name\\\" [width]=\\\"180\\\"\\r\\n              caption=\\\"{{infoColumn('customer_name').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n              fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_name').is_visible\\\" dataField=\\\"buyer_name\\\" [width]=\\\"120\\\"\\r\\n              caption=\\\"{{infoColumn('buyer_name').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tên HS-SV -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('student_name').is_visible\\\" dataField=\\\"student_name\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('student_name').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Lớp -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('class_name').is_visible\\\" dataField=\\\"class_name\\\" [width]=\\\"120\\\"\\r\\n              caption=\\\"{{infoColumn('class_name').column_name}}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Quốc tịch -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('nationality').is_visible\\\" dataField=\\\"nationality\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('nationality').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Hộ chiếu -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('passport').is_visible\\\" dataField=\\\"passport\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('passport').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Ngày hộ chiếu -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('passport_date').is_visible\\\" dataField=\\\"passport_date\\\" [width]=\\\"100\\\"\\r\\n              dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\"\\r\\n              caption=\\\"{{infoColumn('passport_date').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Ngày hết hạn hộ chiếu -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('passport_expiration_date').is_visible\\\" dataField=\\\"passport_expiration_date\\\"\\r\\n              dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" [width]=\\\"120\\\"\\r\\n              caption=\\\"{{infoColumn('passport_expiration_date').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_address').is_visible\\\" dataField=\\\"buyer_address\\\" [width]=\\\"200\\\"\\r\\n              caption=\\\"{{infoColumn('buyer_address').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_mobile').is_visible\\\" dataField=\\\"buyer_mobile\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('buyer_mobile').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"phonePattern\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.phone_number }} {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n            <!-- Hình thức bán hàng -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('sell_form').is_visible\\\" dataField=\\\"sell_form\\\" [width]=\\\"200\\\"\\r\\n              caption=\\\"{{infoColumn('sell_form').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Hóa đơn xe -->\\r\\n            <!-- Số hợp đồng -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('contract_number').is_visible\\\" dataField=\\\"contract_number\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('contract_number').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số VSB -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('vsb_number').is_visible\\\" dataField=\\\"vsb_number\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('vsb_number').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số chứng từ -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('license_number').is_visible\\\" dataField=\\\"license_number\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('license_number').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Kiểu xe -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('model').is_visible\\\" dataField=\\\"model\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('model').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Màu xe -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('color').is_visible\\\" dataField=\\\"color\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('color').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Năm sản xuất -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('manufacture_year').is_visible\\\" dataField=\\\"manufacture_year\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('manufacture_year').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Địa chỉ giao hàng -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('place_of_delivery').is_visible\\\" dataField=\\\"place_of_delivery\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('place_of_delivery').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Địa chỉ xuất hàng -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('shiping_point').is_visible\\\" dataField=\\\"shiping_point\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('shiping_point').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Thời hạn thanh toán -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('payment_expire').is_visible\\\" dataField=\\\"payment_expire\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('payment_expire').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số wip -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('wip_number').is_visible\\\" dataField=\\\"wip_number\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('wip_number').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Ngày ra, vào xe -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('in_out_date').is_visible\\\" dataField=\\\"in_out_date\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('in_out_date').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số hóa đơn nội bộ -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('invoice_internal_number').is_visible\\\" dataField=\\\"invoice_internal_number\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('invoice_internal_number').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Biển số xe -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('license_plate').is_visible\\\" dataField=\\\"license_plate\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('license_plate').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số km -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('kilometer_number').is_visible\\\" dataField=\\\"kilometer_number\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('kilometer_number').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số máy -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('invoice_engine_number').is_visible\\\" dataField=\\\"invoice_engine_number\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('invoice_engine_number').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số khung -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('invoice_chassis_number').is_visible\\\" dataField=\\\"invoice_chassis_number\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('invoice_chassis_number').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- End -->\\r\\n            <!-- Email nhận hóa đơn -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('buyer_email').is_visible\\\" dataField=\\\"buyer_email\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('buyer_email').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"emailPattern\\\"\\r\\n                message=\\\"Email {{ _translate.VALIDATION.not_pattern }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('payment_method_name').is_visible\\\" dataField=\\\"payment_method_name\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('payment_method_name').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.payment_method_names\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n              <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n            </dxi-column>\\r\\n            <!-- Loại tiền -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('currency_code').is_visible\\\" dataField=\\\"currency_code\\\" [width]=\\\"77\\\"\\r\\n              caption=\\\"{{infoColumn('currency_code').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tỷ giá trên hóa đơn -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('currency_rate').is_visible\\\" dataField=\\\"currency_rate\\\"\\r\\n              caption=\\\"{{infoColumn('currency_rate').column_name}}\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.ty_gia }\\\" [format]=\\\"formatter.ty_gia\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\"></dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('bank_account_number').is_visible\\\" dataField=\\\"bank_account_number\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('bank_account_number').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('bank_name').is_visible\\\" dataField=\\\"bank_name\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('bank_name').column_name}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('ship_receiving_name').is_visible\\\" dataField=\\\"ship_receiving_name\\\"\\r\\n              [width]=\\\"150\\\" caption=\\\"{{infoColumn('ship_receiving_name').column_name}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('ship_receiving_address').is_visible\\\" dataField=\\\"ship_receiving_address\\\"\\r\\n              [width]=\\\"150\\\" caption=\\\"{{infoColumn('ship_receiving_address').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('consult_number').is_visible\\\" dataField=\\\"consult_number\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('consult_number').column_name}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('the_order').is_visible\\\" dataField=\\\"the_order\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('the_order').column_name}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('transport_number').is_visible\\\" dataField=\\\"transport_number\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('transport_number').column_name}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('train_name').is_visible\\\" dataField=\\\"train_name\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('train_name').column_name}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n            <!-- Mẫu số hóa đơn -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('template_code').is_visible\\\" dataField=\\\"template_code\\\" [width]=\\\"130\\\"\\r\\n              caption=\\\"{{infoColumn('template_code').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Ký hiệu hóa đơn -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('invoice_series').is_visible\\\" dataField=\\\"invoice_series\\\" [width]=\\\"130\\\"\\r\\n              caption=\\\"{{infoColumn('invoice_series').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Số thứ tự hàng hóa -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('view_order').is_visible\\\" dataField=\\\"view_order\\\" [width]=\\\"50\\\"\\r\\n              caption=\\\"{{infoColumn('view_order').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('contract_order').is_visible\\\" dataField=\\\"contract_order\\\" [width]=\\\"130\\\"\\r\\n              caption=\\\"{{infoColumn('contract_order').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Mã hàng hóa -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('product_code').is_visible\\\" dataField=\\\"product_code\\\"\\r\\n              [editorOptions]=\\\"{showClearButton: true}\\\" caption=\\\"{{infoColumn('product_code').column_name}}\\\"\\r\\n              alignment=\\\"center\\\" [width]=\\\"100\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.products\\\" displayExpr=\\\"code\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Mã quản lý -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('management_code').is_visible\\\" dataField=\\\"management_code\\\" [width]=\\\"130\\\"\\r\\n              caption=\\\"{{infoColumn('management_code').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('product_name').is_visible\\\" dataField=\\\"product_name\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('product_name').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('engine_number').is_visible\\\" dataField=\\\"engine_number\\\" [width]=\\\"130\\\"\\r\\n              caption=\\\"{{infoColumn('engine_number').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('chassis_number').is_visible\\\" dataField=\\\"chassis_number\\\" [width]=\\\"130\\\"\\r\\n              caption=\\\"{{infoColumn('chassis_number').column_name}}\\\" alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('lot').is_visible\\\" dataField=\\\"lot\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('lot').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('expiration_date').is_visible\\\" dataField=\\\"expiration_date\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('expiration_date').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Phí hoàn vé -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('is_refund_ticket').is_visible\\\"\\r\\n              caption=\\\"{{infoColumn('is_refund_ticket').column_name}}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\"\\r\\n              alignment=\\\"center\\\" dataField=\\\"is_refund_ticket\\\"></dxi-column>\\r\\n            <!-- Phí dịch vụ -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('is_money_service').is_visible\\\"\\r\\n              caption=\\\"{{infoColumn('is_money_service').column_name}}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n              alignment=\\\"center\\\" dataField=\\\"is_money_service\\\"></dxi-column>\\r\\n            <!-- Diễn giải -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('is_promotion').is_visible\\\" dataField=\\\"is_promotion\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('is_promotion').column_name}}\\\" alignment=\\\"center\\\">\\r\\n              <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n            </dxi-column>\\r\\n            <!-- Khuyến mại -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('is_promotion_new').is_visible\\\" dataField=\\\"is_promotion_new\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('is_promotion_new').column_name}}\\\" alignment=\\\"center\\\">\\r\\n              <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('commercial_discount').is_visible\\\" dataField=\\\"commercial_discount\\\"\\r\\n              [width]=\\\"100\\\" caption=\\\"{{infoColumn('commercial_discount').column_name}}\\\" alignment=\\\"center\\\">\\r\\n              <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('provisions_on_accounts').is_visible\\\" dataField=\\\"provisions_on_accounts\\\"\\r\\n              [width]=\\\"150\\\" caption=\\\"{{infoColumn('provisions_on_accounts').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.select_provisions_on_accounts\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n              </dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Màu sắc, chất liệu -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('color_material').is_visible\\\" dataField=\\\"color_material\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('color_material').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('unit_name').is_visible\\\" dataField=\\\"unit_code\\\"\\r\\n              [editorOptions]=\\\"lookupColumnOptions\\\" caption=\\\"{{infoColumn('unit_name').column_name}}\\\" [width]=\\\"100\\\"\\r\\n              alignment=\\\"center\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Ngày -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('product_date').is_visible\\\" dataField=\\\"product_date\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('product_date').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tỷ giá trên hàng hóa -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('product_exchange_rate').is_visible\\\" dataField=\\\"product_exchange_rate\\\"\\r\\n              caption=\\\"{{infoColumn('product_exchange_rate').column_name}}\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.ty_gia }\\\" [format]=\\\"formatter.ty_gia\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\"></dxi-column>\\r\\n            <!-- Số lượng -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('quantity').is_visible\\\" dataField=\\\"quantity\\\"\\r\\n              caption=\\\"{{infoColumn('quantity').column_name}}\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"center\\\"></dxi-column>\\r\\n            <!-- Đơn giá sau thuế -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('price_after_vat').is_visible\\\" dataField=\\\"price_after_vat\\\"\\r\\n              caption=\\\"{{infoColumn('price_after_vat').column_name}}\\\" [width]=\\\"90\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.don_gia_sau_thue }\\\" [format]=\\\"formatter.don_gia_sau_thue\\\"\\r\\n              dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n            <!-- Đơn giá -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('price').is_visible\\\" dataField=\\\"price\\\"\\r\\n              caption=\\\"{{infoColumn('price').column_name}}\\\" [width]=\\\"90\\\" [editorOptions]=\\\"{ format: formatter.don_gia }\\\"\\r\\n              [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n            <!-- Thành tiền chưa trừ chiết khấu -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount_without_discount').is_visible\\\" dataField=\\\"amount_without_discount\\\"\\r\\n              caption=\\\"{{infoColumn('amount_without_discount').column_name}}\\\" [width]=\\\"109\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.thanh_tien_chua_ck }\\\" [format]=\\\"formatter.thanh_tien_chua_ck\\\"\\r\\n              dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Thành tiền -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount').is_visible\\\" dataField=\\\"amount\\\"\\r\\n              caption=\\\"{{infoColumn('amount').column_name}}\\\" [width]=\\\"109\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('discount').is_visible\\\" dataField=\\\"discount\\\"\\r\\n              caption=\\\"{{infoColumn('discount').column_name}}\\\" [width]=\\\"100\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.ty_le_chiet_khau }\\\" [format]=\\\"formatter.ty_le_chiet_khau\\\"\\r\\n              dataType=\\\"number\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount_discount').is_visible\\\" dataField=\\\"amount_discount\\\"\\r\\n              caption=\\\"{{infoColumn('amount_discount').column_name}}\\\" [width]=\\\"109\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tien_chiet_khau }\\\" [format]=\\\"formatter.tien_chiet_khau\\\"\\r\\n              dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('price_after_discount').is_visible\\\" dataField=\\\"price_after_discount\\\"\\r\\n              caption=\\\"{{infoColumn('price_after_discount').column_name}}\\\" [width]=\\\"109\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.don_gia }\\\" [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('vat').is_visible\\\" dataField=\\\"vat\\\" [editorOptions]=\\\"{showClearButton: true}\\\"\\r\\n              caption=\\\"{{infoColumn('vat').column_name}}\\\" [width]=\\\"90\\\" alignment=\\\"center\\\">\\r\\n              <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n            </dxi-column>\\r\\n            <!-- Tiền thuế -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount_vat').is_visible\\\" dataField=\\\"amount_vat\\\"\\r\\n              caption=\\\"{{infoColumn('amount_vat').column_name}}\\\" [width]=\\\"120\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tien_thue }\\\" [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\"></dxi-column>\\r\\n            <!-- Thuế khác -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('other_tax').is_visible\\\" dataField=\\\"other_tax\\\"\\r\\n              caption=\\\"{{infoColumn('other_tax').column_name}}\\\" [width]=\\\"120\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\"></dxi-column>\\r\\n            <!-- Phí khác -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('other_charge').is_visible\\\" dataField=\\\"other_charge\\\"\\r\\n              caption=\\\"{{infoColumn('other_charge').column_name}}\\\" [width]=\\\"120\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\"></dxi-column>\\r\\n\\r\\n            <dxi-column *ngIf=\\\"infoColumn('invoice_amount').is_visible\\\" dataField=\\\"invoice_amount\\\"\\r\\n              caption=\\\"{{infoColumn('invoice_amount').column_name}}\\\" [width]=\\\"130\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\"></dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('amount_after_vat').is_visible\\\" dataField=\\\"amount_after_vat\\\"\\r\\n              caption=\\\"{{infoColumn('amount_after_vat').column_name}}\\\" [width]=\\\"130\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tổng số lượng lớn -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('total_large_unit').is_visible\\\" dataField=\\\"total_large_unit\\\"\\r\\n              caption=\\\"{{infoColumn('total_large_unit').column_name}}\\\" [width]=\\\"130\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tổng số lượng nhỏ -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('total_small_unit').is_visible\\\" dataField=\\\"total_small_unit\\\"\\r\\n              caption=\\\"{{infoColumn('total_small_unit').column_name}}\\\" [width]=\\\"130\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.so_luong }\\\" [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Cộng tiền hàng trên hóa đơn-->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('invoice_amount').is_visible\\\" dataField=\\\"invoice_amount\\\"\\r\\n              caption=\\\"{{infoColumn('invoice_amount').column_name}}\\\" [width]=\\\"130\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"right\\\"></dxi-column>\\r\\n            <!-- Tổng tiền thuế trên hóa đơn -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('total_amount_vat').is_visible\\\" dataField=\\\"total_amount_vat\\\"\\r\\n              caption=\\\"{{infoColumn('total_amount_vat').column_name}}\\\" [width]=\\\"130\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tien_thue }\\\" [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Phí bảo vệ môi trường -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('environmental_fee').is_visible\\\" dataField=\\\"environmental_fee\\\"\\r\\n              caption=\\\"{{infoColumn('environmental_fee').column_name}}\\\" [width]=\\\"130\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tổng tiền thanh toán trên hóa đơn -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('total_payment').is_visible\\\" dataField=\\\"total_payment\\\"\\r\\n              caption=\\\"{{infoColumn('total_payment').column_name}}\\\" [width]=\\\"130\\\"\\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n              alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n            <!-- Tên username -->\\r\\n            <dxi-column *ngIf=\\\"infoColumn('username').is_visible\\\" dataField=\\\"username\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('username').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('billing_source').is_visible\\\" dataField=\\\"billing_source\\\" [width]=\\\"150\\\"\\r\\n              caption=\\\"{{infoColumn('billing_source').column_name}}\\\" alignment=\\\"left\\\">\\r\\n              <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n            </dxi-column>\\r\\n            <dxi-column *ngIf=\\\"infoColumn('note').is_visible\\\" dataField=\\\"note\\\" [width]=\\\"100\\\"\\r\\n              caption=\\\"{{infoColumn('note').column_name}}\\\" alignment=\\\"left\\\">\\r\\n            </dxi-column>\\r\\n            <dxi-column cellTemplate=\\\"DinhKemFile\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.attach_file }}\\\" [width]=\\\"250\\\"\\r\\n              alignment=\\\"center\\\">\\r\\n            </dxi-column>\\r\\n\\r\\n            <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n              <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n            </div>\\r\\n\\r\\n            <div *dxTemplate=\\\"let data of 'DinhKemFile'\\\">\\r\\n              <a href=\\\"javascript:void(0)\\\" (click)=\\\"dinhKemFile($event)\\\" *ngIf=\\\"data.data.number_of_vouchers != ''\\\">\\r\\n                <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"data.rowIndex\\\"\\r\\n                  accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\"\\r\\n                  style=\\\"display: none;\\\" />\\r\\n                <!-- <span><i class=\\\"fa fa-file\\\"></i></span> -->\\r\\n                {{ _translate.CONTROLL.LABEL.select_file }}\\r\\n                <p>{{data.data.file_attach_name}}</p>\\r\\n              </a>\\r\\n            </div>\\r\\n            <!-- <dxo-summary >\\r\\n                  <dxi-total-item\\r\\n                      summaryType=\\\"custom\\\"\\r\\n                      [customizeText]=\\\"customizeText\\\"\\r\\n                      showInColumn=\\\"amount\\\">\\r\\n                  </dxi-total-item>\\r\\n                </dxo-summary> -->\\r\\n            <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n            <dxo-paging [enabled]=\\\"true\\\"></dxo-paging>\\r\\n            <!-- <dxo-summary>\\r\\n              <dxi-total-item name=\\\"totalAmount\\\" column=\\\"amount\\\" summaryType=\\\"sum\\\" [customizeText]=\\\"customizeText\\\">\\r\\n              </dxi-total-item>\\r\\n              <dxi-total-item name=\\\"totalAmountVat\\\" column=\\\"amount_vat\\\" summaryType=\\\"sum\\\"\\r\\n                [customizeText]=\\\"customizeText\\\">\\r\\n              </dxi-total-item>\\r\\n              <dxi-total-item name=\\\"totalAmountAfterVat\\\" column=\\\"amount_after_vat\\\" summaryType=\\\"sum\\\"\\r\\n                [customizeText]=\\\"customizeText\\\">\\r\\n              </dxi-total-item>\\r\\n            </dxo-summary> -->\\r\\n          </dx-data-grid>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-md-7\\\">\\r\\n          <div class=\\\"note-footer\\\">\\r\\n            <p style=\\\"margin-left: 0;\\\"><span style=\\\"font-weight: 500; color: red;\\\">{{ _translate.GRID.GENERAL.note\\r\\n                }}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.can_edit_delete_on_grid }}</p>\\r\\n            <p><span class=\\\"mau-vang\\\"> </span>{{ _translate.CONTROLL.LABEL.yellow_number_of_voucher }}</p>\\r\\n            <p><span class=\\\"mau-do\\\"> </span>{{ _translate.CONTROLL.LABEL.red_incorrect_format }}</p>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"col-md-5\\\">\\r\\n          <div class=\\\"note-footer\\\" style=\\\"text-align: right; margin-right: 50px;\\\">\\r\\n            <p style=\\\"padding: 8px;\\\"></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_valid_documents }} <span\\r\\n                style=\\\"color: seagreen; font-weight: 600\\\">{{totalInvoiceInvalid}}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_voucher_wrong_format }} <span\\r\\n                style=\\\"color: red; font-weight: 600\\\">{{totalErrorInvoice}}</span></p>\\r\\n            <p>{{ _translate.CONTROLL.LABEL.number_of_voucher_duplicate }} <span\\r\\n                style=\\\"color: yellow; font-weight: 600\\\">{{totalDuplicateInvoice}}</span></p>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit && !isPepsi\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\"\\r\\n          text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice }}\\\" (click)=\\\"preview()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"!isVisibleBtnSubmit && !isPepsi\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\"\\r\\n          text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice }}\\\" (click)=\\\"xemHoaDon()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"!isVisibleBtnSubmit && !isPepsi\\\" icon=\\\"assets\\\\img\\\\icons\\\\In.png\\\"\\r\\n          text=\\\"{{ _translate.CONTROLL.BUTTON.print_conversion }}\\\" (click)=\\\"inChuyenDoi()\\\" type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-8 btn-right\\\">\\r\\n        <dx-button disableDoubleClick text=\\\"{{ _translate.CONTROLL.BUTTON.come_back}}\\\" type=\\\"default\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\"\\r\\n          (click)=\\\"dong()\\\">\\r\\n        </dx-button>\\r\\n        <!-- <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"Xuất dữ liệu trên lưới ra Excel\\\"\\r\\n          icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"xuatFile()\\\" type=\\\"default\\\"></dx-button> -->\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"Ghi tạm\\\" icon=\\\"assets\\\\img\\\\icons\\\\GhiTam.png\\\" (click)=\\\"submit('LUU')\\\"\\r\\n          type=\\\"default\\\"></dx-button>\\r\\n        <!-- <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\"  text=\\\"Xuất chờ ký\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"submit('CHO_KY')\\\" type=\\\"default\\\" ></dx-button> -->\\r\\n        <dx-button disableDoubleClick *ngIf=\\\"isVisibleBtnSubmit && isAccessExportInv\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\"\\r\\n          icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"submit('XUAT')\\\" type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.processing }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopupImport\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"500\\\" [height]=\\\"160\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"popupCachNapDuLieu\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p>{{ _translate.CONTROLL.LABEL.please_choose_load_data }} </p>\\r\\n    <div class=\\\"text-center\\\" style=\\\"margin-top: 25px\\\">\\r\\n      <dx-button (click)=\\\"thayThe($event)\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all}}\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"themTiep($event)\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</dx-popup>\"","module.exports = \".import-invoices .dx-texteditor{border-radius:0;display:inline-block;margin-right:8px;height:28px;max-height:32px}.import-invoices .select-file .field>div{display:inline-block;vertical-align:middle}.import-invoices .select-file{width:100%;display:inline-block;margin:0}.import-invoices .select-file .field .label{width:90px;margin-right:10px;text-align:right;margin-top:7px}.import-invoices .select-file .field .value{width:35% !important;margin-top:10px}.import-invoices .select-file .field.field-first{display:inline-block}.import-invoices .select-file .field.field-first .value{width:calc(100% - 150px) !important}::ng-deep .import-invoices .select-file .field .dx-texteditor{width:100% !important}.support-link{top:-2px;position:relative;padding:5px 25px 7px 25px;background-color:#337ab7;border-color:#2d6da3;color:#fff;text-decoration:none}.support-link.mgr-15{margin-right:15px}.support-link img{margin-right:10px;margin-top:-2px}#auto-input{margin-right:75px}.note-template-import{margin-top:10px;margin-left:52px;display:inline-block;width:39%}.read-file{display:inline-block;margin-left:6px;position:relative;top:-10px}.note-footer{margin-top:10px}.note-footer p{margin-left:20px;margin-bottom:5px}.mau-vang{padding-right:15px;margin-right:10px;background-color:yellow}.mau-do{padding-right:15px;margin-right:10px;background-color:red}::ng-deep #gridImportInvoice{height:400px}::ng-deep .btn-right{padding-right:0}::ng-deep .btn-right .dx-button{float:right}::ng-deep .btn-right .dx-button:last-child{margin-right:8px !important}::ng-deep #gridImportInvoice .dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit{width:40px;min-width:20px !important}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-validator.dx-datagrid-invalid .dx-highlight-outline::after{border:2px solid #d9534f}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-cell-modified .dx-highlight-outline::after{border-color:#fff}::ng-deep .form-import-invoices .inport-selector .dx-texteditor-input{padding-bottom:15px}::ng-deep .notify-modal{max-width:22%}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild, Input } from '@angular/core';\r\n\r\nimport { SocketService, AuthService, Library, sEnum, Helper, VChanggeMoneyService, VStringService, VPreviewInvService } from '@core/index';\r\n\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { ConfigColumnImportExcelComponent, NotifySuccessComponent } from '@shared/index';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String, StringBuilder } from 'typescript-string-operations';\r\nimport * as XLSX from 'xlsx';\r\nimport { pattern } from '@config/index';\r\nimport * as moment from 'moment';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { ViewInvoiceComponent } from '../view-invoice/view-invoice.component';\r\nimport { SignatureOffComponent } from '@shared/index';\r\ndeclare var $: any;\r\nimport { Location } from '@angular/common';\r\nimport { collapseTextChangeRangesAcrossMultipleVersions } from 'typescript';\r\nimport { isNull } from 'util';\r\nimport * as _ from 'lodash';\r\nimport { Router } from '@angular/router';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-import-invoices-dt',\r\n  templateUrl: './import-invoices-dt.component.html',\r\n  styleUrls: ['./import-invoices-dt.component.scss']\r\n})\r\nexport class ImportInvoicesDtComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n\r\n  invoice_releases: any;\r\n  templatesTT78: any;\r\n  infoDangKy: any;\r\n  isHdGTGT: any;\r\n  fileName = \"\";\r\n  dataExcelFile: any;\r\n  target: DataTransfer;\r\n  isDisReadFile = true;\r\n  select: any = {};\r\n  isAccessExportInv: boolean = false;\r\n  configs: any;\r\n  formatter: any = {};\r\n  frmData = new InvoiceModel(1);\r\n  fieldDisable = [\"number_of_vouchers\", \"invoice_date\", \"customer_code\", \"currency_code\", \"currency_rate\", \"customer_object_code\", \"buyer_tax_code\", \"customer_name\", \"buyer_name\", \"class_name\", \"student_name\", \"buyer_address\", \"buyer_mobile\", \"buyer_email\", \"payment_method_name\", \"bank_account_number\", \"bank_name\"];\r\n  invoice_release_id: any;\r\n  template_id: any;\r\n  invoice_date = \"\";\r\n  invoice_number = \"\";\r\n  isAllowEditInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuat = \"XuatVaKy\";\r\n  bsModalRef: BsModalRef;\r\n  listColumn: any = [];\r\n  htXuatOptions = [];\r\n  ioSignature: Subscription;\r\n  tempKiFile = 0;\r\n  ttDaXuatHoaDon: boolean = false; //Trạng thái đã xuất hóa đơn hay chưa\r\n  invoicesArr: any;\r\n  invoice: any;\r\n  totalInvoice = 0;\r\n  totalErrorInvoice = 0;\r\n  totalDuplicateInvoice = 0;\r\n  countInvoice = 1;\r\n  valueProgress: number = 0;\r\n  showPopupImport = false;\r\n  stopImport = false;\r\n  subXuatHoaDon: any;\r\n  subLuuChoXuat: any;\r\n  errorImport = false;\r\n  hoaDonImportChoXuat: any;\r\n  invoicesHaveNumberOfVouchers: any;\r\n  isBĐS: boolean = false; //Bất động sản\r\n  isPepsi: boolean = false; //pepsi\r\n  taxCodePattern = pattern.tax_code;\r\n  emailPattern = pattern.email;\r\n  loaiHoaDon:any = '';\r\n  phonePattern = pattern.phone;\r\n  datetimePattern = pattern.datetime;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  isVisibleBtnSubmit = true;\r\n  approveRequired = false;\r\n  dataFormGird = [];\r\n  disabledInvoiceReleases: boolean = false;\r\n  bsModalSignRef: BsModalRef;\r\n  invoicesId = [];\r\n  columns: any = [];\r\n  invoiceOptions: any = [];\r\n  is_multi_vat: any;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  popupCachNapDuLieu = false;\r\n  isThemTiep = true;\r\n  _translate: any;\r\n  currentUser: any;\r\n  nodeSign: any;\r\n  totalInvoiceInvalid: any;\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  isTT78: boolean = false;\r\n  template_code: any;\r\n  invoice_series: any;\r\n  isToKhaiThue = false;\r\n  isPassNQ43: boolean = false;\r\n  passport_expiration_date: any;\r\n  passport_date: any;\r\n  search: any;\r\n  constructor(\r\n    public bsModalImportRef: BsModalRef,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private modalImportService: MyBsModalService,\r\n    public bsModalViewModel: BsModalRef,\r\n    private _location: Location,\r\n    private router: Router,\r\n    private productsService: ProductsService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    //get  cấu hình\r\n    this.connectWebsocket();\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'keyData',\r\n      data: []\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    //this.htXuatOptions.splice(1, 1);\r\n    this.configs = this.authService.getConfigs();\r\n    /* Hóa đơn Pepsico */\r\n    if (this.configs.system_parameter.display_delivery_information)\r\n      this.isPepsi = true;\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n    if (this.configs.config_column_import_inv_excel && this.configs.config_column_import_inv_excel.length > 0) {\r\n      this.listColumn = Helper.listColumnImportExcel(this._translate);\r\n      this.listColumn.forEach(item => {\r\n        let _obj = this.configs.config_column_import_inv_excel.filter(p => p.column_code == item.column_code)[0];\r\n        if (_obj) {\r\n          item.is_visible = _obj.is_visible;\r\n        }\r\n      });\r\n    } else {\r\n      this.listColumn = Helper.listColumnImportExcel(this._translate);\r\n    }\r\n    if (this.infoDangKy) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n        this.isTT78 = true;\r\n        if (this.templatesTT78 && this.templatesTT78.length > 0)\r\n          this.templatesTT78 = this.templatesTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n      }\r\n    }\r\n    this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate);\r\n    if (!this.isTT78) {\r\n      if (this.invoice_releases && this.invoice_releases.length > 0) {\r\n        if (!this.hoaDonImportChoXuat)\r\n          this.invoice_release_id = this.invoice_releases[0].value;\r\n        this.template_id = this.invoice_releases[0].template_id;\r\n        this.is_multi_vat = this.invoice_releases[0].is_multi_vat;\r\n        if (this.invoice_releases[0].template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n          this.isToKhaiThue = true;\r\n        } else {\r\n          this.isToKhaiThue = false;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (this.templatesTT78 && this.templatesTT78.length > 0) {\r\n        this.invoice_series = this.templatesTT78[0].invoice_series;\r\n        this.template_code = this.templatesTT78[0].template_code;\r\n        this.template_id = this.templatesTT78[0].value;\r\n        this.is_multi_vat = this.templatesTT78[0].is_multi_vat;\r\n        if (this.templatesTT78[0].template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n          this.isToKhaiThue = true;\r\n        } else {\r\n          this.isToKhaiThue = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.hoaDonImportChoXuat) {\r\n      this.invoice_date = this.hoaDonImportChoXuat[0].invoice_date ? moment(this.hoaDonImportChoXuat[0].invoice_date).format('YYYY-MM-DD HH:mm:ss') : \"\";\r\n      if (!this.isTT78)\r\n        this.invoice_release_id = this.hoaDonImportChoXuat[0].invoice_release_id;\r\n      else\r\n        this.template_id = this.hoaDonImportChoXuat[0].template_id;\r\n      this.htXuat = this.hoaDonImportChoXuat[0].status;\r\n\r\n      if (this.htXuat == sEnum.statusInv.GhiTam)\r\n        this.htXuat = 'XuatVaKy';\r\n      if (!this.isTT78) {\r\n        if (this.invoice_releases && this.invoice_releases.length > 0) {\r\n          let template = this.invoice_releases.filter(p => p.value == this.invoice_release_id);\r\n          if (template.length > 0) {\r\n            if (VStringService._getValueToString(template[0].template_type) == sEnum.templatetype.HoaDonBatDongSan)\r\n              this.isBĐS = true;\r\n            else\r\n              this.isBĐS = false;\r\n            this.is_multi_vat = template[0].is_multi_vat;\r\n          }\r\n          if (this.hoaDonImportChoXuat[0].status == \"GIU_SO\") {\r\n            this.disabledInvoiceReleases = true;\r\n          }\r\n          this.layDuLieuTuHoaDonChoXuat();\r\n        }\r\n      }\r\n      else {\r\n        if (this.templatesTT78 && this.templatesTT78.length > 0) {\r\n          let template = this.templatesTT78.filter(p => p.value == this.template_id);\r\n          if (template.length > 0) {\r\n            if (VStringService._getValueToString(template[0].template_type) == sEnum.templatetype.HoaDonBatDongSan)\r\n              this.isBĐS = true;\r\n            else\r\n              this.isBĐS = false;\r\n            this.is_multi_vat = template[0].is_multi_vat;\r\n          }\r\n          if (this.hoaDonImportChoXuat[0].status == \"GIU_SO\") {\r\n            this.disabledInvoiceReleases = true;\r\n          }\r\n          if (this.hoaDonImportChoXuat[0].status == \"GHI_TAM\") {\r\n            const isExistKyLoi = this.hoaDonImportChoXuat.some(item => parseInt(item.invoice_number) > 0);\r\n            if (isExistKyLoi)\r\n              this.disabledInvoiceReleases = true;\r\n          }\r\n          this.layDuLieuTuHoaDonChoXuat();\r\n        }\r\n      }\r\n    }\r\n    else\r\n      this.loadRow(10);\r\n    if (!this.isTT78) {\r\n      if (VStringService._getValueToString(this.invoice_release_id) != \"\" && this.invoice_releases && this.invoice_releases.length > 0) {\r\n        let oFormRelease = this.invoice_releases.filter(p => p.value == this.invoice_release_id)[0];\r\n        if (oFormRelease) {\r\n          if (oFormRelease.fields && oFormRelease.fields.length > 0) {\r\n            const _dulieumorong = oFormRelease.fields.filter(x => x.type === '4');\r\n            if (_dulieumorong.length > 0) {\r\n              _dulieumorong.forEach(item => {\r\n                if (item.is_show) {\r\n                  let oField = {\r\n                    column_code: item.code,\r\n                    column_name: item.name,\r\n                    is_visible: true\r\n                  }\r\n                  this.listColumn.push(oField);\r\n                  if (item.data_type === 'chu') {\r\n                    let column =\r\n                    {\r\n                      caption: item.name,\r\n                      dataField: item.code,\r\n                      width: 150,\r\n                    };\r\n                    this.columns.push(column);\r\n                  }\r\n                  if (item.data_type === 'soluong') {\r\n                    let column =\r\n                    {\r\n                      caption: item.name,\r\n                      dataField: item.code,\r\n                      width: 150,\r\n                      dataType: \"number\",\r\n                      editorOptions: {\r\n                        format: '#,###'\r\n                      },\r\n                      format: '#,###'\r\n                    };\r\n                    this.columns.push(column);\r\n                  }\r\n                  if (item.data_type === 'ngay') {\r\n                    let column =\r\n                    {\r\n                      caption: item.name,\r\n                      dataField: item.code,\r\n                      width: 150,\r\n                      dataType: 'date',\r\n                      format: \"dd/MM/yyyy\",\r\n                      dateSerializationFormat: \"yyyy-MM-dd\"\r\n                    };\r\n                    this.columns.push(column);\r\n                  }\r\n                  let invoiceOption =\r\n                  {\r\n                    code: item.code,\r\n                    name: item.name,\r\n                    value: '',\r\n                    data_type: item.data_type\r\n                  }\r\n                  this.invoiceOptions.push(invoiceOption);\r\n                }\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (VStringService._getValueToString(this.template_id) != \"\" && this.templatesTT78 && this.templatesTT78.length > 0) {\r\n        let oFormRelease = this.templatesTT78.filter(p => p.value == this.template_id)[0];\r\n        if (oFormRelease) {\r\n          if (oFormRelease.fields && oFormRelease.fields.length > 0) {\r\n            const _dulieumorong = oFormRelease.fields.filter(x => x.type === '4');\r\n            if (_dulieumorong.length > 0) {\r\n              _dulieumorong.forEach(item => {\r\n                if (item.is_show) {\r\n                  let oField = {\r\n                    column_code: item.code,\r\n                    column_name: item.name,\r\n                    is_visible: true\r\n                  }\r\n                  this.listColumn.push(oField);\r\n                  if (item.data_type === 'chu') {\r\n                    let column =\r\n                    {\r\n                      caption: item.name,\r\n                      dataField: item.code,\r\n                      width: 150,\r\n                    };\r\n                    this.columns.push(column);\r\n                  }\r\n                  if (item.data_type === 'soluong') {\r\n                    let column =\r\n                    {\r\n                      caption: item.name,\r\n                      dataField: item.code,\r\n                      width: 150,\r\n                      dataType: \"number\",\r\n                      editorOptions: {\r\n                        format: '#,###'\r\n                      },\r\n                      format: '#,###'\r\n                    };\r\n                    this.columns.push(column);\r\n                  }\r\n                  if (item.data_type === 'ngay') {\r\n                    let column =\r\n                    {\r\n                      caption: item.name,\r\n                      dataField: item.code,\r\n                      width: 150,\r\n                      dataType: 'date',\r\n                      format: \"dd/MM/yyyy\",\r\n                      dateSerializationFormat: \"yyyy-MM-dd\"\r\n                    };\r\n                    this.columns.push(column);\r\n                  }\r\n                  let invoiceOption =\r\n                  {\r\n                    code: item.code,\r\n                    name: item.name,\r\n                    value: '',\r\n                    data_type: item.data_type\r\n                  }\r\n                  this.invoiceOptions.push(invoiceOption);\r\n                }\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (this.currentUser && this.currentUser.account && (this.currentUser.account.tax_code == \"0102519041-999\" || this.currentUser.account.tax_code == \"8888888803\" || this.currentUser.account.tax_code == \"9999999671\"))\r\n      this.isPassNQ43 = true;\r\n    let listpermissions = this.currentUser.user.permissions.split(',');\r\n    let _obj = listpermissions.filter(p => p == \"phe_duyet\");\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else\r\n      this.isAccessExportInv = false;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach((item, index) => {\r\n        if (item.product_name && item.unit_name) {\r\n          const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n          if (!obj1) {\r\n            if (VStringService._getValueToString(item.unit_code) == \"\")\r\n              item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n            let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n            if (oDuplicate)\r\n              item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n            this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n          }\r\n          else {\r\n            if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n              let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (!oDuplicate)\r\n                this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n    this.createUpdateEvent();\r\n  }\r\n  ngAfterViewInit() {\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.push(item);\r\n      });\r\n    }\r\n  }\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.invoice.issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat();\r\n          } else {\r\n            this.invoice.invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoice.invoice_files.length) {\r\n              this.xuLiApiKhiXuat();\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.errorImport = true;\r\n        this.showPopupImport = false;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  layDuLieuTuHoaDonChoXuat() {\r\n    this.hoaDonImportChoXuat.forEach(invoice => {\r\n      this.invoice_release_id = invoice.invoice_release_id;\r\n      this.template_id = invoice.template_id;\r\n      this.template_code = invoice.template_code;\r\n      this.invoice_series = invoice.invoice_series;\r\n      let number_of_vouchers = invoice.number_of_vouchers ? invoice.number_of_vouchers : Helper.genNumberOfVoucher(this.hoaDonImportChoXuat);\r\n      if(invoice.invoice_products && invoice.invoice_products.length > 0){\r\n        for (let i = 0; i < invoice.invoice_products.length; i++) {\r\n          invoice.invoice_products = invoice.invoice_products.sort((itemA, itemB) => {\r\n            return itemA.order - itemB.order;\r\n          });\r\n          let product = invoice.invoice_products[i];\r\n          this.layDuLieuDong(product, invoice, i, number_of_vouchers);\r\n        }\r\n      }else {\r\n        this.layDuLieuDong({}, invoice, 0, number_of_vouchers);\r\n      }\r\n    });\r\n    this.checkStatusData();\r\n  }\r\n\r\n\r\n  layDuLieuDong(product, invoice, i, number_of_vouchers) {\r\n    let rowInvoice = new Object;\r\n    if (i == 0) {\r\n      this.invoicesId.push(invoice.id)\r\n      rowInvoice[\"statusData\"] = \"INVALID\";\r\n      rowInvoice[\"id\"] = invoice.id;\r\n      rowInvoice[\"status\"] = invoice.status;\r\n      rowInvoice[\"number_of_vouchers\"] = number_of_vouchers;\r\n      rowInvoice[\"customer_code\"] = invoice.customer_code;\r\n      rowInvoice[\"currency_code\"] = invoice.currency_code;\r\n      rowInvoice[\"customer_object_code\"] = invoice.customer_object_code == \"CA_NHAN\" ? true : false;\r\n      rowInvoice[\"lot\"] = invoice.lot;\r\n      rowInvoice[\"expiration_date\"] = invoice.expiration_date;\r\n      rowInvoice[\"buyer_tax_code\"] = invoice.buyer_tax_code;\r\n      rowInvoice[\"customer_name\"] = invoice.customer_name;\r\n      rowInvoice[\"buyer_name\"] = invoice.buyer_name;\r\n      rowInvoice[\"student_name\"] = invoice.student_name;\r\n      rowInvoice[\"class_name\"] = invoice.class_name;\r\n      rowInvoice[\"buyer_address\"] = invoice.buyer_address;\r\n      rowInvoice[\"the_order\"] = invoice.the_order;\r\n      rowInvoice[\"consult_number\"] = invoice.consult_number;\r\n      rowInvoice[\"ship_receiving_address\"] = invoice.ship_receiving_address;\r\n      rowInvoice[\"ship_receiving_name\"] = invoice.ship_receiving_name;\r\n      rowInvoice[\"buyer_mobile\"] = invoice.buyer_mobile;\r\n      rowInvoice[\"currency_rate\"] = invoice.currency_rate;\r\n      ///// HĐ xe\r\n      rowInvoice[\"contract_number\"] = invoice.contract_number;\r\n      rowInvoice[\"total_large_unit\"] = invoice.total_large_unit;\r\n      rowInvoice[\"total_small_unit\"] = invoice.total_small_unit;\r\n      rowInvoice[\"billing_source\"] = invoice.billing_source;\r\n      rowInvoice[\"vsb_number\"] = invoice.vsb_number;\r\n      rowInvoice[\"license_number\"] = invoice.license_number;\r\n      rowInvoice[\"sell_form\"] = invoice.sell_form;\r\n      rowInvoice[\"model\"] = invoice.model;\r\n      rowInvoice[\"color\"] = invoice.color;\r\n      rowInvoice[\"invoice_engine_number\"] = invoice.invoice_engine_number;\r\n      rowInvoice[\"invoice_chassis_number\"] = invoice.invoice_chassis_number;\r\n      rowInvoice[\"manufacture_year\"] = invoice.manufacture_year;\r\n      rowInvoice[\"place_of_delivery\"] = invoice.place_of_delivery;\r\n      rowInvoice[\"shiping_point\"] = invoice.shiping_point;\r\n      rowInvoice[\"payment_expire\"] = invoice.payment_expire;\r\n      rowInvoice[\"wip_number\"] = invoice.wip_number;\r\n      rowInvoice[\"in_out_date\"] = invoice.in_out_date;\r\n      rowInvoice[\"invoice_internal_number\"] = invoice.invoice_internal_number;\r\n      rowInvoice[\"license_plate\"] = invoice.license_plate;\r\n      rowInvoice[\"kilometer_number\"] = invoice.kilometer_number;\r\n      /////\r\n      rowInvoice[\"buyer_email\"] = invoice.buyer_email;\r\n      rowInvoice[\"payment_method_name\"] = invoice.payment_method_name;\r\n      rowInvoice[\"payment_method_view_name\"] = invoice.payment_method_view_name;\r\n\r\n      rowInvoice[\"bank_account_number\"] = invoice.bank_account_number;\r\n      rowInvoice[\"bank_name\"] = invoice.bank_name;\r\n      rowInvoice[\"note\"] = invoice.note;\r\n      rowInvoice[\"transport_number\"] = invoice.transport_number;\r\n      rowInvoice[\"train_name\"] = invoice.train_name;\r\n      rowInvoice[\"invoice_number\"] = invoice.invoice_number;\r\n      rowInvoice[\"invoice_date\"] = invoice.invoice_date;\r\n      rowInvoice[\"nationality\"] = invoice.nationality;\r\n      rowInvoice[\"passport\"] = invoice.passport;\r\n      rowInvoice[\"passport_date\"] = invoice.passport_date;\r\n      rowInvoice[\"passport_expiration_date\"] = invoice.passport_expiration_date;\r\n      /* Hóa đơn Pepsi */\r\n      rowInvoice[\"template_code\"] = invoice.template_code;\r\n      rowInvoice[\"invoice_series\"] = invoice.invoice_series;\r\n      rowInvoice[\"total_amount_vat\"] = invoice.total_amount_vat;\r\n      rowInvoice[\"total_payment\"] = invoice.total_payment;\r\n      rowInvoice[\"username\"] = invoice.username;\r\n      rowInvoice[\"total_large_unit\"] = invoice.total_large_unit;\r\n      rowInvoice[\"total_small_unit\"] = invoice.total_small_unit;\r\n      /* Các trường mở rộng */\r\n      rowInvoice[\"invoice_options\"] = invoice.invoice_options;\r\n      if (rowInvoice[\"invoice_options\"] && rowInvoice[\"invoice_options\"].length > 0) {\r\n        rowInvoice[\"invoice_options\"].forEach(invOption => {\r\n          rowInvoice[invOption.code] = invOption.value;\r\n        });\r\n      }\r\n      if (this.isBĐS || this.isPepsi)\r\n        rowInvoice[\"invoice_amount\"] = invoice.amount;\r\n      rowInvoice[\"environmental_fee\"] = invoice.environmental_fee;\r\n    } else {\r\n      rowInvoice[\"number_of_vouchers\"] = \"\";\r\n      rowInvoice[\"customer_code\"] = \"\";\r\n      rowInvoice[\"currency_code\"] = \"\";\r\n      rowInvoice[\"currency_rate\"] = null;\r\n      rowInvoice[\"customer_object_code\"] = false;\r\n      rowInvoice[\"lot\"] = \"\";\r\n      rowInvoice[\"expiration_date\"] = \"\";\r\n      rowInvoice[\"buyer_tax_code\"] = \"\";\r\n      rowInvoice[\"customer_name\"] = \"\";\r\n      rowInvoice[\"buyer_name\"] = \"\";\r\n      rowInvoice[\"class_name\"] = \"\";\r\n      rowInvoice[\"student_name\"] = \"\";\r\n      rowInvoice[\"buyer_address\"] = \"\";\r\n      rowInvoice[\"the_order\"] = \"\";\r\n      rowInvoice[\"consult_number\"] = \"\";\r\n      rowInvoice[\"ship_receiving_address\"] = \"\";\r\n      rowInvoice[\"ship_receiving_name\"] = \"\";\r\n      rowInvoice[\"buyer_mobile\"] = \"\";\r\n      /* Hóa đơn Pepsi */\r\n      rowInvoice[\"total_large_unit\"] = null;\r\n      rowInvoice[\"total_small_unit\"] = null;\r\n      rowInvoice[\"total_amount_vat\"] = null;\r\n      rowInvoice[\"total_payment\"] = null;\r\n      rowInvoice[\"invoice_amount\"] = null;\r\n      rowInvoice[\"environmental_fee\"] = null;\r\n      rowInvoice[\"template_code\"] = \"\";\r\n      rowInvoice[\"invoice_series\"] = \"\";\r\n      rowInvoice[\"username\"] = \"\";\r\n      /* HĐ xe */\r\n      rowInvoice[\"contract_number\"] = \"\";\r\n      rowInvoice[\"billing_source\"] = \"\";\r\n      rowInvoice[\"vsb_number\"] = \"\";\r\n      rowInvoice[\"license_number\"] = \"\";\r\n      rowInvoice[\"sell_form\"] = \"\";\r\n      rowInvoice[\"model\"] = \"\";\r\n      rowInvoice[\"color\"] = \"\";\r\n      rowInvoice[\"invoice_engine_number\"] = \"\";\r\n      rowInvoice[\"invoice_chassis_number\"] = \"\";\r\n      rowInvoice[\"manufacture_year\"] = \"\";\r\n      rowInvoice[\"place_of_delivery\"] = \"\";\r\n      rowInvoice[\"shiping_point\"] = \"\";\r\n      rowInvoice[\"payment_expire\"] = \"\";\r\n      rowInvoice[\"wip_number\"] = \"\";\r\n      rowInvoice[\"in_out_date\"] = \"\";\r\n      rowInvoice[\"invoice_internal_number\"] = \"\";\r\n      rowInvoice[\"license_plate\"] = \"\";\r\n      rowInvoice[\"kilometer_number\"] = \"\";\r\n      /////\r\n      rowInvoice[\"buyer_email\"] = \"\";\r\n      rowInvoice[\"payment_method_name\"] = \"\";\r\n      rowInvoice[\"payment_method_view_name\"] = \"\";\r\n      /* Các trường mở rộng */\r\n      rowInvoice[\"invoice_options\"] = invoice.invoice_options;\r\n      if (rowInvoice[\"invoice_options\"] && rowInvoice[\"invoice_options\"].length > 0) {\r\n        rowInvoice[\"invoice_options\"].forEach(invOption => {\r\n          rowInvoice[invOption.code] = \"\";\r\n        });\r\n      }\r\n      rowInvoice[\"bank_account_number\"] = \"\";\r\n      rowInvoice[\"bank_name\"] = \"\";\r\n      rowInvoice[\"note\"] = \"\";\r\n      rowInvoice[\"dataType\"] = \"HANG_HOA\";\r\n      rowInvoice[\"productNumberOfVouchers\"] = number_of_vouchers //invoice.number_of_vouchers\r\n    }\r\n    rowInvoice[\"product_code\"] = product.product_code;\r\n    rowInvoice[\"product_name\"] = product.product_name;\r\n    rowInvoice[\"commercial_discount\"] = product.commercial_discount ? product.commercial_discount : false;\r\n    rowInvoice[\"is_promotion\"] = product.is_promotion ? product.is_promotion : false;/* Diễn giải */\r\n    rowInvoice[\"is_promotion_new\"] = product.is_promotion_new ? product.is_promotion_new : false;/* Khuyến mại */\r\n    rowInvoice[\"engine_number\"] = product.engine_number;\r\n    rowInvoice[\"price_after_discount\"] = product.price_after_discount;\r\n    rowInvoice[\"chassis_number\"] = product.chassis_number;\r\n    rowInvoice[\"color_material\"] = product.color_material;\r\n    rowInvoice[\"contract_order\"] = product.contract_order;\r\n    rowInvoice[\"management_code\"] = product.management_code;\r\n    rowInvoice[\"provisions_on_accounts\"] = product.provisions_on_accounts;\r\n    rowInvoice[\"unit_code\"] = product.unit_code;\r\n    rowInvoice[\"unit_name\"] = product.unit_name;\r\n    rowInvoice[\"quantity\"] = product.quantity;\r\n    rowInvoice[\"other_tax\"] = product.other_tax;\r\n    rowInvoice[\"other_charge\"] = product.other_charge;\r\n    rowInvoice[\"discount\"] = product.discount;\r\n    rowInvoice[\"amount_discount\"] = product.amount_discount;\r\n    rowInvoice[\"amount_without_discount\"] = product.amount_without_discount;\r\n    rowInvoice[\"price\"] = product.price;\r\n    rowInvoice[\"product_exchange_rate\"] = product.product_exchange_rate;\r\n    rowInvoice[\"product_date\"] = product.product_date;\r\n    rowInvoice[\"price_after_vat\"] = product.price_after_vat;\r\n    rowInvoice[\"amount\"] = product.amount;\r\n    rowInvoice[\"vat\"] = product.vat;\r\n    rowInvoice[\"amount_vat\"] = product.amount_vat;\r\n    rowInvoice[\"amount_after_vat\"] = product.amount_after_vat;\r\n    rowInvoice[\"order\"] = product.order;\r\n    rowInvoice[\"view_order\"] = product.view_order;\r\n    // máy bay\r\n    rowInvoice[\"is_refund_ticket\"] = product.is_refund_ticket ? product.is_refund_ticket : false;\r\n    rowInvoice[\"is_money_service\"] = product.is_money_service ? product.is_money_service : false;\r\n    console.log('rowInvoice: ', rowInvoice);\r\n\r\n    this.invoice_products.insert(rowInvoice);\r\n  }\r\n\r\n\r\n\r\n  cktmChange() {\r\n\r\n  }\r\n  loadRow(countRow) {\r\n    let tempRow = this.frmData.tempImportRow(countRow, this.isPepsi);\r\n    tempRow.forEach(element => {\r\n      this.invoice_products.insert(element);\r\n    });\r\n  }\r\n\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById(\"file-bang-ke\").click();\r\n    this.isThemTiep = false;\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n  }\r\n\r\n  log(val) { console.log(val); }\r\n\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"BK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.invoice_products.load().then((dataSource) => {\r\n          dataSource[rowIndex][\"file_attach\"] = fileAttachData;\r\n          dataSource[rowIndex][\"file_attach_name\"] = file.name;\r\n        });\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n\r\n  customizeText(e) {\r\n    if (!e.value) {\r\n      e.value = 0;\r\n    }\r\n    let formatter = new Intl.NumberFormat('ja-JP');\r\n    let totalMoney = formatter.format(parseFloat(e.value));\r\n    return totalMoney;\r\n  }\r\n\r\n  onFileChanged(evt) {\r\n    this.target = <DataTransfer>(evt.target);\r\n    this.fileName = this.target.files[0].name;\r\n    // this.fileSize = target.files[0].size/1024;\r\n    if (this.target.files.length !== 1) {\r\n      Library.notify('Không thể chọn nhiều file', 'error');\r\n      throw new Error('Không thể chọn nhiều file');\r\n    };\r\n    this.isDisReadFile = false;\r\n  }\r\n\r\n  addRow() {\r\n    let len, order;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      if (dataSource.length >= 1) {\r\n        len = dataSource.length;\r\n        order = dataSource[len - 1].order + 1;\r\n      } else {\r\n        order = 1;\r\n      }\r\n    });\r\n    if (this.isPepsi)\r\n      order = null;\r\n    let data = this.frmData.addImportRow(order, order);\r\n    this.invoice_products.insert(data);\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  getFileTemp() {\r\n    Library.showloading();\r\n    let arrColumn = this.listColumn.filter(p => p.is_visible == true);\r\n    let columnsName = arrColumn.map(e => e.column_code);\r\n    let data = {\r\n      invoice: {\r\n        invoice_type: sEnum.exportType.hoadon,\r\n        columns: columnsName,\r\n        template_id: this.template_id\r\n      }\r\n    }\r\n    this.vatService.getFileTemmpImportInvoices(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất file Excel thành công\", 'success');\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    })\r\n  }\r\n\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return 'Hoàn thành: ' + percent + '%';\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình nạp dữ liệu sẽ dừng lại nếu bạn đóng cửa sổ này\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      if (this.subLuuChoXuat) {\r\n        this.subLuuChoXuat.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n      this.totalInvoice = 0;\r\n      this.isVisibleBtnSubmit = false;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  getDataFromGird() {\r\n    this.invoice_products.load().then((dataSource) => {\r\n      if (dataSource.length > 0) {\r\n        dataSource.forEach(row => {\r\n          if (row.number_of_vouchers || row.productNumberOfVouchers) {\r\n            this.dataFormGird.push(row);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  chonDocFile() {\r\n    this.popupCachNapDuLieu = true;\r\n  }\r\n\r\n  thayThe(e) {\r\n    this.isThemTiep = false;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  themTiep(e) {\r\n    this.isThemTiep = true;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  readFile() {\r\n    this.isDisReadFile = true;\r\n    Library.showloading();\r\n    const reader: FileReader = new FileReader();\r\n\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      let data = <any>(XLSX.utils.sheet_to_json(ws, { header: \"A\", range: 0 }));\r\n\r\n      let fileBangKe: any = document.getElementById(\"file-bang-ke\");\r\n      fileBangKe.value = \"\";\r\n      if (this.currentUser.account.tax_code != \"0500233676\") {\r\n        let _arrData: any = [];\r\n        if (data && data[0]) {\r\n          let columnsName = data.map(e => e.A);\r\n          let _index = columnsName.indexOf(\"number_of_vouchers\")\r\n\r\n          if (_index == -1) {\r\n            Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n            return false;\r\n          } else {\r\n            if (_index > 0) {\r\n              data.splice(0, _index);\r\n            }\r\n            for (let i = 1; i < data.length; i++) {\r\n              let _row: any = {}\r\n              for (const key in data[i]) {\r\n                if (data[i].hasOwnProperty(key)) {\r\n                  const column = data[0][key]\r\n                  const value = data[i][key];\r\n                  _row[column] = value;\r\n                }\r\n              }\r\n              _arrData.push(_row);\r\n            }\r\n          }\r\n          this.dataExcelFile = _arrData;\r\n          this.fillData(this.dataExcelFile);\r\n        }\r\n      } else {\r\n        this.dataExcelFile = data;\r\n        this.fillDataBravo(this.dataExcelFile);\r\n      }\r\n\r\n      //  this.countAll = data.length;\r\n      //  this.showPopupImport = true;\r\n    };\r\n    reader.readAsBinaryString(this.target.files[0]);\r\n  }\r\n\r\n  fillData(fileData) {\r\n    this.getDataFromGird();\r\n    let count = 2;\r\n    let view_order = 0;\r\n    let data = [];\r\n    let numberOfVouchers = [];\r\n    let isValid = true;\r\n    let _index = 0;\r\n    if (!this.isThemTiep) {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.invoice_products.remove(item.keyData);\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n      let invoice = new Object;\r\n      if (element.number_of_vouchers) {\r\n        invoice[\"statusData\"] = \"INVALID\"\r\n        let invoiceDate = Helper.processDate(element.invoice_date);\r\n        let passport_date = Helper.processDate(element.passport_date);\r\n        this.passport_date = new Date(Helper.processDate(element.passport_date));\r\n        let passport_expiration_date = Helper.processDate(element.passport_expiration_date);\r\n        this.passport_expiration_date = new Date(Helper.processDate(element.passport_expiration_date))\r\n        if (invoiceDate == \"ERROR\") {\r\n          Library.notify(\"Ngày hóa đơn không đúng định dạng\", \"error\");\r\n          isValid = false;\r\n          return;\r\n        }\r\n        else\r\n          if (invoiceDate != \"\")\r\n            invoice[\"invoice_date\"] = invoiceDate;\r\n        invoice[\"customer_code\"] = element.customer_code ? element.customer_code : \"\";\r\n        invoice[\"currency_code\"] = element.currency_code ? element.currency_code : \"VND\";\r\n        invoice[\"currency_rate\"] = element.currency_rate ? element.currency_rate : null;\r\n        invoice[\"customer_object_code\"] = element.customer_object_code && (element.customer_object_code == \"X\" || element.customer_object_code == \"x\") ? true : false;\r\n        invoice[\"buyer_tax_code\"] = element.buyer_tax_code ? element.buyer_tax_code : \"\";\r\n        invoice[\"customer_name\"] = element.customer_name ? element.customer_name : \"\";\r\n        invoice[\"buyer_name\"] = element.buyer_name ? element.buyer_name : \"\";\r\n        invoice[\"student_name\"] = element.student_name ? element.student_name : \"\";\r\n        invoice[\"class_name\"] = element.class_name ? element.class_name : \"\";\r\n        invoice[\"buyer_address\"] = element.buyer_address ? element.buyer_address : \"\";\r\n        invoice[\"the_order\"] = element.the_order ? element.the_order : \"\";\r\n        invoice[\"consult_number\"] = element.consult_number ? element.consult_number : \"\";\r\n        invoice[\"ship_receiving_address\"] = element.ship_receiving_address ? element.ship_receiving_address : \"\";\r\n        invoice[\"ship_receiving_name\"] = element.ship_receiving_name ? element.ship_receiving_name : \"\";\r\n        invoice[\"buyer_mobile\"] = element.buyer_mobile ? element.buyer_mobile : \"\";\r\n        invoice[\"nationality\"] = element.nationality ? element.nationality : \"\";\r\n        invoice[\"passport\"] = element.passport ? element.passport : \"\";\r\n        invoice[\"passport_date\"] = passport_date;\r\n        invoice[\"passport_expiration_date\"] = passport_expiration_date;\r\n        ///// HĐ xe\r\n        invoice[\"contract_number\"] = element.contract_number ? element.contract_number : \"\";\r\n        invoice[\"vsb_number\"] = element.vsb_number ? element.vsb_number : \"\";\r\n        invoice[\"license_number\"] = element.license_number ? element.license_number : \"\";\r\n        invoice[\"sell_form\"] = element.sell_form ? element.sell_form : \"\";\r\n        invoice[\"model\"] = element.model ? element.model : \"\";\r\n        invoice[\"color\"] = element.color ? element.color : \"\";\r\n        invoice[\"invoice_engine_number\"] = element.invoice_engine_number ? element.invoice_engine_number : \"\";\r\n        invoice[\"invoice_chassis_number\"] = element.invoice_chassis_number ? element.invoice_chassis_number : \"\";\r\n        invoice[\"manufacture_year\"] = element.manufacture_year ? element.manufacture_year : \"\";\r\n        invoice[\"place_of_delivery\"] = element.place_of_delivery ? element.place_of_delivery : \"\";\r\n        invoice[\"shiping_point\"] = element.shiping_point ? element.shiping_point : \"\";\r\n        invoice[\"payment_expire\"] = element.payment_expire ? element.payment_expire : \"\";\r\n        invoice[\"wip_number\"] = element.wip_number ? element.wip_number : \"\";\r\n        invoice[\"in_out_date\"] = element.in_out_date ? element.in_out_date : \"\";\r\n        invoice[\"invoice_internal_number\"] = element.invoice_internal_number ? element.invoice_internal_number : \"\";\r\n        invoice[\"license_plate\"] = element.license_plate ? element.license_plate : \"\";\r\n        invoice[\"kilometer_number\"] = element.kilometer_number ? element.kilometer_number : \"\";\r\n        /////máy bay\r\n        invoice[\"is_money_service\"] = element.is_money_service && (element.is_money_service == \"X\" || element.is_money_service == \"x\") ? true : false;\r\n        invoice[\"is_refund_ticket\"] = element.is_refund_ticket && (element.is_refund_ticket == \"X\" || element.is_refund_ticket == \"x\") ? true : false;\r\n        /////\r\n        invoice[\"buyer_email\"] = element.buyer_email ? element.buyer_email : \"\";\r\n        // Đơn vị Pepsi mặc định là  chuyển khoản\r\n        if (this.isPepsi) {\r\n          invoice[\"payment_method_name\"] = element.payment_method_name ? this.getPaymentMethodCodeByName(element.payment_method_name) : \"CK\";\r\n          invoice[\"payment_method_view_name\"] = element.payment_method_name ? element.payment_method_name : \"Chuyển khoản\";\r\n        }\r\n        else {\r\n          invoice[\"payment_method_name\"] = element.payment_method_name ? this.getPaymentMethodCodeByName(element.payment_method_name) : \"\";\r\n          invoice[\"payment_method_view_name\"] = element.payment_method_name ? element.payment_method_name : \"\";\r\n        }\r\n        invoice[\"bank_account_number\"] = element.bank_account_number ? element.bank_account_number : \"\";\r\n        invoice[\"bank_name\"] = element.bank_name ? element.bank_name : \"\";\r\n        invoice[\"note\"] = element.note ? element.note : \"\";\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        invoice[\"engine_number\"] = element.engine_number ? element.engine_number : \"\";\r\n        invoice[\"price_after_discount\"] = element.price_after_discount ? element.price_after_discount : \"\";\r\n        invoice[\"chassis_number\"] = element.chassis_number ? element.chassis_number : \"\";\r\n        invoice[\"color_material\"] = element.color_material ? element.color_material : \"\";\r\n        invoice[\"contract_order\"] = element.contract_order ? element.contract_order : \"\";\r\n        invoice[\"management_code\"] = element.management_code ? element.management_code : \"\";\r\n\r\n        if (invoice[\"product_code\"] != \"\") {\r\n          let _obj = this.select.products.filter(p => p.code == invoice[\"product_code\"])[0];\r\n          if (!_obj) {\r\n            let _objPush = {\r\n              code: invoice[\"product_code\"],\r\n              name: invoice[\"product_name\"],\r\n              mhvth: invoice[\"product_code\"] + \": \" + invoice[\"product_name\"],\r\n            }\r\n            this.select.products.push(_objPush);\r\n          }\r\n\r\n        }\r\n        invoice[\"lot\"] = element.lot ? element.lot : \"\";\r\n        invoice[\"expiration_date\"] = element.expiration_date ? element.expiration_date : \"\";\r\n        invoice[\"product_date\"] = element.product_date ? element.product_date : \"\";\r\n        invoice[\"transport_number\"] = element.transport_number ? element.transport_number : \"\";\r\n        invoice[\"train_name\"] = element.train_name ? element.train_name : \"\";\r\n        invoice[\"is_promotion\"] = element.is_promotion && (element.is_promotion == \"X\" || element.is_promotion == \"x\") ? true : false;/* Diễn giải */\r\n        invoice[\"is_promotion_new\"] = element.is_promotion_new && (element.is_promotion_new == \"X\" || element.is_promotion_new == \"x\") ? true : false;/* Khuyến mại */\r\n        invoice[\"commercial_discount\"] = element.commercial_discount && (element.commercial_discount == \"X\" || element.commercial_discount == \"x\") ? true : false;\r\n        invoice[\"provisions_on_accounts\"] = element.provisions_on_accounts ? this.checkProvisionsOnAccounts(element.provisions_on_accounts) : \"\";\r\n        invoice[\"provisions_on_accounts_name\"] = element.provisions_on_accounts ? element.provisions_on_accounts : \"\";\r\n\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"other_tax\"] = element.other_tax ? Helper.toNumber(element.other_tax) : null;\r\n        invoice[\"other_charge\"] = element.other_charge ? Helper.toNumber(element.other_charge) : null;\r\n        invoice[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        invoice[\"product_exchange_rate\"] = element.product_exchange_rate ? Helper.toNumber(element.product_exchange_rate) : null;\r\n        invoice[\"price_after_vat\"] = element.price_after_vat ? Helper.toNumber(element.price_after_vat) : null;\r\n        // if (this.configs.system_parameter.price_after_vat) {\r\n        //   if (this.isHdGTGT)\r\n        //     invoice[\"vat\"] = element.vat ? this.checkVat(element.vat) : \"\";\r\n        //   if ((invoice[\"vat\"] == 5 || invoice[\"vat\"] == 10) && invoice[\"price_after_vat\"])\r\n        //     invoice[\"price\"] = (invoice[\"price_after_vat\"] / (1 + invoice[\"vat\"] / 100));\r\n        //   else\r\n        //     invoice[\"price\"] = invoice[\"price_after_vat\"];\r\n        // }\r\n\r\n        /* Các trường mở rộng */\r\n        let optionClone = _.cloneDeep(this.invoiceOptions);\r\n        optionClone.forEach(invOption => {\r\n          for (var key in element) {\r\n            if (invOption.code === key) {\r\n              if (invOption.data_type === 'ngay') {\r\n                let date = Helper.processDate(element[key]);\r\n                if (date == \"ERROR\") {\r\n                  Library.notify(invOption.name + \" không đúng định dạng\", \"error\");\r\n                  isValid = false;\r\n                  return;\r\n                }\r\n                else\r\n                  if (date != \"\")\r\n                    invOption.value = date;\r\n              }\r\n              else if (invOption.data_type === 'soluong') {\r\n                invOption.value = element[key] ? Helper.toNumber(element[key]) : null;\r\n              }\r\n              else\r\n                invOption.value = element[key];\r\n            }\r\n          }\r\n        });\r\n        invoice[\"invoice_options\"] = optionClone;\r\n        /* Các trường mở rộng */\r\n        if (invoice[\"invoice_options\"] && invoice[\"invoice_options\"].length > 0) {\r\n          invoice[\"invoice_options\"].forEach(invOption => {\r\n            invoice[invOption.code] = invOption.value;\r\n          });\r\n        }\r\n        invoice[\"discount\"] = element.discount ? Helper.toNumber(element.discount) : null;\r\n        invoice[\"amount_discount\"] = element.amount_discount ? Helper.toNumber(element.amount_discount) : null;\r\n        invoice[\"amount_without_discount\"] = element.amount_without_discount ? Helper.toNumber(element.amount_without_discount) : null;\r\n\r\n        invoice[\"amount\"] = element.amount && element.amount.trim() != \"-\" ? Helper.toNumber(element.amount) : null;\r\n        if (this.isHdGTGT) {\r\n          invoice[\"vat\"] = element.vat ? this.checkVat(element.vat) : \"\";\r\n          invoice[\"vat_name\"] = element.vat_name ? element.vat_name : \"\";\r\n          invoice[\"amount_vat\"] = element.amount_vat && element.amount_vat.trim() != \"-\" ? Helper.toNumber(element.amount_vat) : null;\r\n        }\r\n        invoice[\"amount_after_vat\"] = element.amount_after_vat && element.amount_after_vat.trim() != \"-\" ? Helper.toNumber(element.amount_after_vat) : null;\r\n        invoice[\"note\"] = element.note ? element.note : \"\";\r\n        if (_index == 0 && !this.isPepsi) {\r\n          if (element.quantity) {\r\n            let arr = element.quantity.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.so_luong = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.so_luong = VChanggeMoneyService.formatDecimalColumn(0);\r\n\r\n          }\r\n          if (element.discount) {\r\n            let arr = element.discount.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.ty_le_chiet_khau = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.ty_le_chiet_khau = VChanggeMoneyService.formatDecimalColumn(0);\r\n\r\n          }\r\n          if (element.price) {\r\n            let arr = element.price.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.don_gia = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.don_gia = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.product_exchange_rate || element.currency_rate) {\r\n            let arr = [];\r\n            if (element.product_exchange_rate)\r\n              arr = element.product_exchange_rate.split('.');\r\n            else\r\n              arr = element.currency_rate.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.ty_gia = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.ty_gia = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.price_after_vat) {\r\n            let arr = element.price_after_vat.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.don_gia_sau_thue = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.don_gia_sau_thue = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.amount_discount) {\r\n            let arr = element.amount_discount.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.tien_chiet_khau = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.tien_chiet_khau = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.amount_without_discount) {\r\n            let arr = element.amount_without_discount.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.thanh_tien_chua_ck = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.thanh_tien_chua_ck = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n\r\n          if (element.amount) {\r\n            let arr = element.amount.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.thanh_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.thanh_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n          if (element.amount_vat) {\r\n            let arr = element.amount_vat.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.tien_thue = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.tien_thue = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n          if (element.amount_after_vat) {\r\n            let arr = element.amount_after_vat.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n        }\r\n        _index++;\r\n        if (this.checkNumberOfVouchers(element.number_of_vouchers) != -1) {\r\n          let stt = 0;\r\n          this.invoice_products.load().then((dataSource) => {\r\n            let hanghoa = dataSource.filter(p => (p.number_of_vouchers == element.number_of_vouchers || p.productNumberOfVouchers == element.number_of_vouchers) && !p.is_promotion && !p.is_promotion_new)[0];\r\n            if (hanghoa)\r\n              stt = Math.max.apply(Math, dataSource.filter(p => (p.number_of_vouchers == element.number_of_vouchers || p.productNumberOfVouchers == element.number_of_vouchers) && !p.is_promotion && !p.is_promotion_new).map(function (o) { return o.order; }))\r\n            ++stt;\r\n          });\r\n          invoice[\"dataType\"] = \"HANG_HOA\";\r\n          invoice[\"number_of_vouchers\"] = \"\";\r\n          invoice[\"invoice_date\"] = \"\";\r\n          invoice[\"customer_code\"] = \"\";\r\n          invoice[\"currency_code\"] = \"\";\r\n          invoice[\"currency_rate\"] = null;\r\n          invoice[\"customer_object_code\"] = false;\r\n          invoice[\"buyer_tax_code\"] = \"\";\r\n          invoice[\"customer_name\"] = \"\";\r\n          invoice[\"buyer_name\"] = \"\";\r\n          invoice[\"student_name\"] = \"\";\r\n          invoice[\"class_name\"] = \"\";\r\n          invoice[\"buyer_address\"] = \"\";\r\n          invoice[\"the_order\"] = \"\";\r\n          invoice[\"consult_number\"] = \"\";\r\n          invoice[\"ship_receiving_address\"] = \"\";\r\n          invoice[\"ship_receiving_name\"] = \"\";\r\n          invoice[\"buyer_mobile\"] = \"\";\r\n          ///// HĐ xe\r\n          invoice[\"contract_number\"] = \"\";\r\n          invoice[\"vsb_number\"] = \"\";\r\n          invoice[\"license_number\"] = \"\";\r\n          invoice[\"sell_form\"] = \"\";\r\n          invoice[\"model\"] = \"\";\r\n          invoice[\"color\"] = \"\";\r\n          invoice[\"invoice_engine_number\"] = \"\";\r\n          invoice[\"invoice_chassis_number\"] = \"\";\r\n          invoice[\"manufacture_year\"] = \"\";\r\n          invoice[\"place_of_delivery\"] = \"\";\r\n          invoice[\"shiping_point\"] = \"\";\r\n          invoice[\"payment_expire\"] = \"\";\r\n          invoice[\"wip_number\"] = \"\";\r\n          invoice[\"in_out_date\"] = \"\";\r\n          invoice[\"invoice_internal_number\"] = \"\";\r\n          invoice[\"license_plate\"] = \"\";\r\n          invoice[\"kilometer_number\"] = \"\";\r\n          /////\r\n          invoice[\"buyer_email\"] = \"\";\r\n          invoice[\"payment_method_name\"] = \"\";\r\n          invoice[\"payment_method_view_name\"] = \"\";\r\n          invoice[\"bank_account_number\"] = \"\";\r\n          invoice[\"bank_name\"] = \"\";\r\n          invoice[\"note\"] = \"\";\r\n          invoice[\"productNumberOfVouchers\"] = element.number_of_vouchers;\r\n          invoice[\"order\"] = stt;\r\n          /* Hóa đơn Pepsi */\r\n          invoice[\"total_large_unit\"] = null;\r\n          invoice[\"total_small_unit\"] = null;\r\n          invoice[\"total_amount_vat\"] = null;\r\n          invoice[\"total_payment\"] = null;\r\n          invoice[\"invoice_amount\"] = null;\r\n          invoice[\"environmental_fee\"] = null;\r\n          invoice[\"template_code\"] = \"\";\r\n          invoice[\"invoice_series\"] = \"\";\r\n          invoice[\"username\"] = \"\";\r\n          invoice[\"billing_source\"] = \"\";\r\n          /* Các trường mở rộng */\r\n          if (invoice[\"invoice_options\"] && invoice[\"invoice_options\"].length > 0) {\r\n            invoice[\"invoice_options\"].forEach(invOption => {\r\n              invoice[invOption.code] = \"\";\r\n            });\r\n          }\r\n          if (this.isPepsi)\r\n            invoice[\"view_order\"] = element.view_order ? element.view_order : \"\";\r\n          else {\r\n            if (invoice[\"is_promotion\"] || invoice[\"is_promotion_new\"] || this.isBĐS) {\r\n              invoice[\"view_order\"] = \"\";\r\n            } else\r\n              invoice[\"view_order\"] = stt;\r\n          }\r\n        } else {\r\n          invoice[\"number_of_vouchers_backup\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          numberOfVouchers.push(invoice[\"number_of_vouchers\"]);\r\n          invoice[\"order\"] = 1;\r\n          if (this.isPepsi)\r\n            invoice[\"view_order\"] = element.view_order ? element.view_order : \"\";\r\n          else\r\n            invoice[\"view_order\"] = 1;\r\n          invoice[\"environmental_fee\"] = element.environmental_fee && element.environmental_fee.trim() != \"-\" ? Helper.toNumber(element.environmental_fee) : null;\r\n          if (this.isBĐS)\r\n            invoice[\"invoice_amount\"] = element.invoice_amount && element.invoice_amount.trim() != \"-\" ? Helper.toNumber(element.invoice_amount) : null;\r\n          if (this.isPepsi) {\r\n            invoice[\"total_large_unit\"] = element.total_large_unit && element.total_large_unit.trim() != \"-\" ? Helper.toNumber(element.total_large_unit) : null;\r\n            invoice[\"total_small_unit\"] = element.total_small_unit && element.total_small_unit.trim() != \"-\" ? Helper.toNumber(element.total_small_unit) : null;\r\n            invoice[\"template_code\"] = element.template_code ? element.template_code : \"\";\r\n            invoice[\"invoice_series\"] = element.invoice_series ? element.invoice_series : \"\";\r\n            invoice[\"invoice_amount\"] = element.invoice_amount && element.invoice_amount.trim() != \"-\" ? Helper.toNumber(element.invoice_amount) : null;\r\n            invoice[\"total_amount_vat\"] = element.total_amount_vat && element.total_amount_vat.trim() != \"-\" ? Helper.toNumber(element.total_amount_vat) : null;\r\n            invoice[\"total_payment\"] = element.total_payment && element.total_payment.trim() != \"-\" ? Helper.toNumber(element.total_payment) : null;\r\n            invoice[\"username\"] = element.username ? element.username : \"\";\r\n            invoice[\"billing_source\"] = element.billing_source ? element.billing_source : \"\";\r\n          }\r\n          else if (invoice[\"is_promotion\"] || invoice[\"is_promotion_new\"] || this.isBĐS)\r\n            invoice[\"view_order\"] = \"\";\r\n        }\r\n        this.invoice_products.insert(invoice);\r\n      }\r\n    });\r\n    if (isValid) {\r\n      let dataTempt = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        let datagroup = dataSource.filter(p => p.number_of_vouchers);\r\n        if (datagroup && datagroup.length > 0) {\r\n          datagroup.forEach(e => {\r\n            let listItem = dataSource.filter(w => w.productNumberOfVouchers == e.number_of_vouchers);\r\n            dataTempt.push(e);\r\n            if (listItem && listItem.length > 0) {\r\n              listItem.forEach(inv => {\r\n                dataTempt.push(inv);\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n      this.invoicesHaveNumberOfVouchers = [];\r\n      if (this.configs.system_parameter.the_same_number_of_voucher) {\r\n        this.vatService.getInvoicesHaveNumberOfVouchers(numberOfVouchers).subscribe((res: any) => {\r\n          if (res.status == \"success\") {\r\n            this.invoicesHaveNumberOfVouchers = res.data.invoices;\r\n            this.checkDuplicateNumberOfVouchers(dataTempt);\r\n            this.checkStatusData();\r\n            this.dataGrid.instance.refresh();\r\n          }\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        this.checkDuplicateNumberOfVouchers(dataTempt);\r\n        this.checkStatusData();\r\n        this.dataGrid.instance.refresh();\r\n      }\r\n    }\r\n    this.createUpdateEvent();\r\n    Library.hideloading();\r\n\r\n  }\r\n  fillDataBravo(fileData) {\r\n    this.getDataFromGird();\r\n    let data = [];\r\n    let count = 2;\r\n    let view_order = 0;\r\n    let numberOfVouchers = [];\r\n    let isValid = true;\r\n    let _index = 0;\r\n    fileData.forEach(element => {\r\n      let invoice = new Object;\r\n      if (element.A) {\r\n        invoice[\"statusData\"] = \"INVALID\"\r\n        let _arrDate = element.B.split('/');\r\n        if (_arrDate.length == 3) {\r\n          if (_arrDate[1] <= 12) {\r\n            invoice[\"invoice_date\"] = _arrDate[2] + \"-\" + _arrDate[1] + \"-\" + _arrDate[0] + \" \" + moment().format('HH:mm:ss');\r\n          } else {\r\n            isValid = false;\r\n            Library.notify(\"Ngày hóa đơn không đúng định dạng\", \"error\");\r\n            return;\r\n          }\r\n        } else {\r\n          //invoice[\"invoice_date\"] = \"\";\r\n        }\r\n        invoice[\"customer_code\"] = element.C ? element.C : \"\";\r\n        invoice[\"customer_object_code\"] = element.D && (element.D == \"X\" || element.D == \"x\") ? true : false;\r\n        invoice[\"buyer_tax_code\"] = element.E ? element.E : \"\";\r\n        invoice[\"customer_name\"] = element.F ? element.F : \"\";\r\n        invoice[\"buyer_name\"] = element.G ? element.G : \"\";\r\n        invoice[\"student_name\"] = element.G ? element.G : \"\";\r\n        invoice[\"class_name\"] = element.G ? element.G : \"\";\r\n        invoice[\"buyer_address\"] = element.H ? element.H : \"\";\r\n        invoice[\"buyer_mobile\"] = element.I ? element.I : \"\";\r\n        invoice[\"buyer_email\"] = element.J ? element.J : \"\";\r\n        invoice[\"payment_method_name\"] = element.K ? this.getPaymentMethodCodeByName(element.K) : \"\";\r\n        invoice[\"payment_method_view_name\"] = element.K ? element.K : \"\";\r\n        invoice[\"bank_account_number\"] = element.L ? element.L : \"\";\r\n        invoice[\"bank_name\"] = element.M ? element.M : \"\";\r\n        invoice[\"product_code\"] = element.N ? element.N : \"\";\r\n        invoice[\"product_name\"] = element.O ? element.O : \"\";\r\n        if (invoice[\"product_code\"] != \"\") {\r\n          let _obj = this.select.products.filter(p => p.code == invoice[\"product_code\"])[0];\r\n          if (!_obj) {\r\n            let _objPush = {\r\n              code: invoice[\"product_code\"],\r\n              name: invoice[\"product_name\"],\r\n              mhvth: invoice[\"product_code\"] + \": \" + invoice[\"product_name\"],\r\n            }\r\n            this.select.products.push(_objPush);\r\n          }\r\n\r\n        }\r\n        invoice[\"is_promotion\"] = element.P && (element.P == \"X\" || element.P == \"x\") ? true : false;\r\n        invoice[\"is_promotion_new\"] = element.P && (element.P == \"X\" || element.P == \"x\") ? true : false;\r\n        invoice[\"commercial_discount\"] = element.Q && (element.Q == \"X\" || element.Q == \"x\") ? true : false;\r\n\r\n        invoice[\"provisions_on_accounts\"] = element.R ? this.checkProvisionsOnAccounts(element.R) : \"\";\r\n        invoice[\"provisions_on_accounts_name\"] = element.R ? element.R : \"\";\r\n\r\n        invoice[\"unit_code\"] = element.S ? this.getUnitCodeByUnitName(element.S) : \"\";\r\n        invoice[\"unit_name\"] = element.S ? element.S : \"\";\r\n        invoice[\"quantity\"] = element.T ? Helper.toNumber(element.T) : null;\r\n        invoice[\"price\"] = element.U ? Helper.toNumber(element.U) : null;\r\n        invoice[\"amount\"] = element.V && element.V.trim() != \"-\" ? Helper.toNumber(element.V) : null;\r\n        if (this.isHdGTGT) {\r\n          invoice[\"vat\"] = element.W ? this.checkVat(element.W) : \"\";\r\n          invoice[\"vat_name\"] = element.W ? element.W : \"\";\r\n          invoice[\"amount_vat\"] = element.X && element.X.trim() != \"-\" ? Helper.toNumber(element.X) : null;\r\n        }\r\n        invoice[\"amount_after_vat\"] = element.Y && element.Y.trim() != \"-\" ? Helper.toNumber(element.Y) : null;\r\n        invoice[\"note\"] = element.Z ? element.Z : \"\";\r\n        if (_index == 0) {\r\n          if (element.quantity) {\r\n            let arr = element.quantity.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.so_luong = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.so_luong = VChanggeMoneyService.formatDecimalColumn(0);\r\n\r\n          }\r\n          if (element.price) {\r\n            let arr = element.price.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.don_gia = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.don_gia = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n          if (element.amount) {\r\n            let arr = element.amount.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.thanh_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.thanh_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n          if (element.amount_vat) {\r\n            let arr = element.amount_vat.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.tien_thue = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.tien_thue = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n          if (element.amount_after_vat) {\r\n            let arr = element.amount_after_vat.split('.');\r\n            if (arr.length == 2) {\r\n              this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(arr[1].length);\r\n            } else\r\n              this.formatter.tong_tien = VChanggeMoneyService.formatDecimalColumn(0);\r\n          }\r\n        }\r\n        _index++;\r\n        if (this.checkNumberOfVouchers(element.A) != -1) {\r\n          invoice[\"dataType\"] = \"HANG_HOA\";\r\n          invoice[\"number_of_vouchers\"] = \"\";\r\n          invoice[\"invoice_date\"] = \"\";\r\n          invoice[\"customer_code\"] = \"\";\r\n          invoice[\"customer_object_code\"] = false;\r\n          invoice[\"buyer_tax_code\"] = \"\";\r\n          invoice[\"customer_name\"] = \"\";\r\n          invoice[\"buyer_name\"] = \"\";\r\n          invoice[\"class_name\"] = \"\";\r\n          invoice[\"student_name\"] = \"\";\r\n          invoice[\"buyer_address\"] = \"\";\r\n          invoice[\"buyer_mobile\"] = \"\";\r\n          invoice[\"buyer_email\"] = \"\";\r\n          invoice[\"payment_method_name\"] = \"\";\r\n          invoice[\"payment_method_view_name\"] = \"\";\r\n          invoice[\"bank_account_number\"] = \"\";\r\n          invoice[\"bank_name\"] = \"\";\r\n          invoice[\"note\"] = \"\";\r\n          invoice[\"productNumberOfVouchers\"] = element.A;\r\n          invoice[\"order\"] = count;\r\n          if (invoice[\"is_promotion\"] || invoice[\"is_promotion_new\"]) {\r\n            invoice[\"view_order\"] = \"\";\r\n          } else\r\n            invoice[\"view_order\"] = (++view_order);\r\n          count++;\r\n        } else {\r\n          invoice[\"number_of_vouchers_backup\"] = element.A ? element.A : \"\";\r\n          invoice[\"number_of_vouchers\"] = element.A ? element.A : \"\";\r\n          numberOfVouchers.push(invoice[\"number_of_vouchers\"]);\r\n          invoice[\"order\"] = 1;\r\n          invoice[\"view_order\"] = 1;\r\n          count = 2;\r\n          view_order = 1;\r\n        }\r\n        data.push(invoice);\r\n      }\r\n    });\r\n    if (isValid) {\r\n      this.invoicesHaveNumberOfVouchers = [];\r\n      this.checkDuplicateNumberOfVouchers(data);\r\n      this.checkStatusData();\r\n      // if(data.length < 10){\r\n      //   this.loadRow(10-data.length);\r\n      // }\r\n      this.dataGrid.instance.refresh();\r\n    }\r\n    Library.hideloading();\r\n  }\r\n  checkVat(vat) {\r\n    if (vat == \"Không chịu thuế\" || vat == \"không chịu thuế\") {\r\n      return -1;\r\n    }\r\n    else if (vat == \"Không kê khai, tính nộp thuế GTGT\" || vat == \"không kê khai, tính nộp thuế GTGT\")\r\n      return -2;\r\n    else if (vat == \"Trường hợp khác\" || vat == \"trường hợp khác\")\r\n      return -3;\r\n    else if (vat == \"10% x 70%\")\r\n      return 7;\r\n    else if (vat == \"5% x 70%\")\r\n      return 3.5;\r\n    else {\r\n      return parseInt(vat);\r\n    }\r\n  }\r\n  checkDuplicateNumberOfVouchers(data) {\r\n    if (this.isThemTiep) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        let foundOnGird = this.dataFormGird.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n        if (foundOnGird.length > 0 && data[i].number_of_vouchers && data[i].statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n          data[i].statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n        }\r\n      }\r\n      this.invoice_products = new ArrayStore({\r\n        key: 'keyData',\r\n        data: data\r\n      });\r\n      this.dataSource = new DataSource({\r\n        store: this.invoice_products\r\n      });\r\n    } else {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n      }\r\n      this.invoice_products = new ArrayStore({\r\n        key: 'keyData',\r\n        data: data\r\n      });\r\n      this.dataSource = new DataSource({\r\n        store: this.invoice_products\r\n      });\r\n    }\r\n    this.dataFormGird = [];\r\n  }\r\n\r\n  checkNumberOfVouchers(numberOfVouchers) {\r\n    let foundNumberOfVouchers;\r\n    this.invoice_products.load().then((dataSource) => {\r\n      foundNumberOfVouchers = dataSource.findIndex((item) => {\r\n        return item.number_of_vouchers == numberOfVouchers;\r\n      });\r\n    });\r\n    return foundNumberOfVouchers;\r\n  }\r\n\r\n  checkStatusData() {\r\n    this.invoice_products.load().then((dataSource) => {\r\n      let invalid = dataSource.filter((item) => {\r\n        return item.number_of_vouchers && item.statusData == \"INVALID\";\r\n      });\r\n      let errorDuplicateDatabase = dataSource.filter((item) => {\r\n        return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_DATABASE\";\r\n      });\r\n      let errorDuplicateOngird = dataSource.filter((item) => {\r\n        return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_ONGIRD\";\r\n      });\r\n      let errorData = dataSource.filter((item) => {\r\n        return item.statusData == \"DATA_ERROR\";\r\n      });\r\n      this.totalInvoiceInvalid = invalid.length;\r\n      this.totalDuplicateInvoice = errorDuplicateDatabase.length;\r\n      this.totalErrorInvoice = errorDuplicateOngird.length + errorData.length;\r\n    });\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number == 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row) {\r\n      if (e.row.rowType === \"data\") {\r\n        e.items = [{\r\n          text: \"Thêm khách hàng\",\r\n          onItemClick: () => {\r\n            this.addRow();\r\n          }\r\n        },\r\n        {\r\n          text: \"Thêm hàng hóa\",\r\n          onItemClick: () => {\r\n            if (e.row.data.number_of_vouchers || e.row.data.productNumberOfVouchers) {\r\n              let temp = e.row.data.number_of_vouchers ? e.row.data.number_of_vouchers : e.row.data.productNumberOfVouchers;\r\n              this.invoice_products.load().then((dataSource) => {\r\n                let products = dataSource.filter((item) => {\r\n                  return item.number_of_vouchers == temp || item.productNumberOfVouchers == temp;\r\n                });\r\n                let data = this.frmData.addImportRow(products.length + 1, products.length + 1);\r\n                data.dataType = \"HANG_HOA\";\r\n                if (e.row.data.number_of_vouchers) {\r\n                  data[\"productNumberOfVouchers\"] = e.row.data.number_of_vouchers;\r\n                  dataSource.splice(e.rowIndex + products.length, 0, data);\r\n                } else {\r\n                  data[\"productNumberOfVouchers\"] = e.row.data.productNumberOfVouchers;\r\n                  let index = dataSource.map(function (e) { return e.number_of_vouchers; }).indexOf(e.row.data.number_of_vouchers);\r\n                  dataSource.splice(index + products.length - 1, 0, data);\r\n                }\r\n                this.invoice_products.clear();\r\n                dataSource.forEach(row => {\r\n                  this.invoice_products.insert(row);\r\n                })\r\n              });\r\n              this.dataGrid.instance.refresh();\r\n            } else {\r\n              Library.notify(\"Bạn chưa nhập số phiếu / chứng từ\", \"error\");\r\n            }\r\n          }\r\n        }];\r\n      }\r\n    }\r\n  }\r\n  onInvoiceReleases(e) {\r\n    let selectedItem = e.component.option(\"selectedItem\");\r\n    this.template_id = selectedItem.template_id;\r\n    this.invoice_release_id = e.value;\r\n    this.is_multi_vat = selectedItem.is_multi_vat;\r\n    if (VStringService._getValueToString(selectedItem.template_type) == sEnum.templatetype.HoaDonBatDongSan)\r\n      this.isBĐS = true;\r\n    else\r\n      this.isBĐS = false;\r\n    //Load lại danh sách cấu hình các trường\r\n    if (this.configs.config_column_import_inv_excel && this.configs.config_column_import_inv_excel.length > 0) {\r\n      this.listColumn = Helper.listColumnImportExcel(this._translate);\r\n      this.listColumn.forEach(item => {\r\n        let _obj = this.configs.config_column_import_inv_excel.filter(p => p.column_code == item.column_code)[0];\r\n        if (_obj) {\r\n          item.is_visible = _obj.is_visible;\r\n        }\r\n      });\r\n    } else {\r\n      this.listColumn = Helper.listColumnImportExcel(this._translate);\r\n    }\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.forEach((column, index) => {\r\n          if (column[\"dataField\"] == item.dataField)\r\n            this.dataGrid.columns.splice(index, 1);\r\n        });\r\n      });\r\n    }\r\n\r\n    this.columns = [];\r\n    this.invoiceOptions = [];\r\n\r\n    if (selectedItem.fields && selectedItem.fields.length > 0) {\r\n      const _dulieumorong = selectedItem.fields.filter(x => x.type === '4');\r\n      if (_dulieumorong.length > 0) {\r\n        _dulieumorong.forEach(item => {\r\n          if (item.is_show) {\r\n            let oField = {\r\n              column_code: item.code,\r\n              column_name: item.name,\r\n              is_visible: true\r\n            }\r\n            this.listColumn.push(oField);\r\n            let column =\r\n            {\r\n              caption: item.name,\r\n              dataField: item.code,\r\n              width: 150\r\n            };\r\n            this.columns.push(column);\r\n            let invoiceOption =\r\n            {\r\n              code: item.code,\r\n              name: item.name,\r\n              value: '',\r\n              data_type: item.data_type\r\n            }\r\n            this.invoiceOptions.push(invoiceOption);\r\n          }\r\n        });\r\n        if (this.columns.length > 0) {\r\n          this.columns.forEach(item => {\r\n            this.dataGrid.columns.push(item);\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onInvoiceTemplate(e) {\r\n    let selectedItem = e.component.option(\"selectedItem\");\r\n    this.template_id = e.value;\r\n    this.template_code = selectedItem.template_code;\r\n    this.invoice_series = selectedItem.invoice_series;\r\n    this.is_multi_vat = selectedItem.is_multi_vat;\r\n    if (selectedItem.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n      this.isToKhaiThue = true;\r\n    } else {\r\n      this.isToKhaiThue = false\r\n    }\r\n    if (VStringService._getValueToString(selectedItem.template_type) == sEnum.templatetype.HoaDonBatDongSan)\r\n      this.isBĐS = true;\r\n    else\r\n      this.isBĐS = false;\r\n    //Load lại danh sách cấu hình các trường\r\n    if (this.configs.config_column_import_inv_excel && this.configs.config_column_import_inv_excel.length > 0) {\r\n      this.listColumn = Helper.listColumnImportExcel(this._translate);\r\n      this.listColumn.forEach(item => {\r\n        let _obj = this.configs.config_column_import_inv_excel.filter(p => p.column_code == item.column_code)[0];\r\n        if (_obj) {\r\n          item.is_visible = _obj.is_visible;\r\n        }\r\n      });\r\n    } else {\r\n      this.listColumn = Helper.listColumnImportExcel(this._translate);\r\n    }\r\n    if (this.columns.length > 0) {\r\n      this.columns.forEach(item => {\r\n        this.dataGrid.columns.forEach((column, index) => {\r\n          if (column[\"dataField\"] == item.dataField)\r\n            this.dataGrid.columns.splice(index, 1);\r\n        });\r\n      });\r\n    }\r\n\r\n    this.columns = [];\r\n    this.invoiceOptions = [];\r\n\r\n    if (selectedItem.fields && selectedItem.fields.length > 0) {\r\n      const _dulieumorong = selectedItem.fields.filter(x => x.type === '4');\r\n      if (_dulieumorong.length > 0) {\r\n        _dulieumorong.forEach(item => {\r\n          if (item.is_show) {\r\n            let oField = {\r\n              column_code: item.code,\r\n              column_name: item.name,\r\n              is_visible: true\r\n            }\r\n            this.listColumn.push(oField);\r\n            if (item.data_type === 'chu') {\r\n              let column =\r\n              {\r\n                caption: item.name,\r\n                dataField: item.code,\r\n                width: 150,\r\n              };\r\n              this.columns.push(column);\r\n            }\r\n            if (item.data_type === 'soluong') {\r\n              let column =\r\n              {\r\n                caption: item.name,\r\n                dataField: item.code,\r\n                width: 150,\r\n                dataType: \"number\",\r\n                editorOptions: {\r\n                  format: '#,###'\r\n                },\r\n                format: '#,###'\r\n              };\r\n              this.columns.push(column);\r\n            }\r\n            if (item.data_type === 'ngay') {\r\n              let column =\r\n              {\r\n                caption: item.name,\r\n                dataField: item.code,\r\n                width: 150,\r\n                dataType: 'date',\r\n                format: \"dd/MM/yyyy\",\r\n                dateSerializationFormat: \"yyyy-MM-dd\"\r\n              };\r\n              this.columns.push(column);\r\n            }\r\n            let invoiceOption =\r\n            {\r\n              code: item.code,\r\n              name: item.name,\r\n              value: '',\r\n              data_type: item.data_type\r\n            }\r\n            this.invoiceOptions.push(invoiceOption);\r\n          }\r\n        });\r\n        if (this.columns.length > 0) {\r\n          this.columns.forEach(item => {\r\n            this.dataGrid.columns.push(item);\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  onContentReady(e) {\r\n    e.component.columnOption(\"command:edit\", {\r\n      visibleIndex: -1\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.row.data) {\r\n        if (e.row.data.dataType && e.row.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.dataField)) {\r\n          e.editorOptions.disabled = true;\r\n        }\r\n      }\r\n      e.editorOptions.onValueChanged = (args) => {\r\n        switch (e.dataField) {\r\n          case \"number_of_vouchers\":\r\n            this.onNumberOfVouchers(e, args.value);\r\n            break;\r\n          // case \"product_code\":\r\n          //   this.productCodeChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"quantity\":\r\n          // case \"discount\":\r\n          // case \"amount_discount\":\r\n          // case \"price\":\r\n          // case \"amount_vat\":\r\n          // case \"amount_after_vat\":\r\n          //   this.priceChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"vat\":\r\n          //   this.vatChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"unit_code\":\r\n          //   this.unitChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          // case \"amount\":\r\n          //   this.amountChange(e, args.value);\r\n          //   this.dataGrid.instance.refresh();\r\n          //   break;\r\n          default:\r\n            break;\r\n        }\r\n        this.checkStatusData();\r\n        e.setValue(args.value);\r\n      };\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.data.dataType && e.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.column.dataField)) {\r\n        e.cellElement.style.background = \"#F1F1F1\";\r\n      }\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_ONGIRD\" && e.column.dataField == \"number_of_vouchers\") {\r\n        e.cellElement.style.background = \"#FF0000\";\r\n      }\r\n      if (e.data.number_of_vouchers) {\r\n        switch (e.column.dataField) {\r\n          case \"buyer_address\":\r\n            if (e.data.customer_object_code == false) this.setStatusDataOnCellPrepared(e, \"Địa chỉ không được để trống\");\r\n            break;\r\n          case \"payment_method_name\":\r\n            this.setStatusDataOnCellPrepared(e, \"Hình thức thanh toán không được để trống\");\r\n            break;\r\n          case \"template_code\":\r\n            this.setStatusDataOnCellPrepared(e, \"Mẫu số hóa đơn không được để trống\");\r\n            break;\r\n          case \"invoice_series\":\r\n            this.setStatusDataOnCellPrepared(e, \"Ký hiệu hóa đơn không được để trống\");\r\n            break;\r\n          case \"product_name\":\r\n            this.setStatusDataOnCellPrepared(e, \"Tên hàng hóa không được để trống\");\r\n            break;\r\n          case \"amount\":\r\n            this.setStatusDataOnCellPrepared(e, \"Thành tiền không được để trống\");\r\n            break;\r\n          case \"amount_after_vat\":\r\n            this.setStatusDataOnCellPrepared(e, \"Tổng tiền không được để trống\");\r\n            break;\r\n          case \"customer_name\":\r\n            if (e.data.customer_object_code == false) this.setStatusDataOnCellPrepared(e, \"Tên đơn vị tổ chức không được để trống\");\r\n            break;\r\n          case \"buyer_name\":\r\n            if (e.data.customer_object_code == true) this.setStatusDataOnCellPrepared(e, \"Tên khách hàng không được để trống\");\r\n            break;\r\n          case \"product_code\":\r\n            this.setStatusDataOnCellPrepared(e, this._translate.VALIDATION.required_productCode);\r\n            break;\r\n          case \"passport_expiration_date\":\r\n            if (this.isToKhaiThue) {\r\n              let passport_date = new Date(e.data.passport_date)\r\n              if (!e.value) {\r\n                this.setStatusDataOnCellPrepared(e, \"Ngày hết hạn hộ chiếu không được để trống\");\r\n              }\r\n              if (e.value && passport_date >= e.value) {\r\n                this.setStatusDataOnCellPrepared(e, \"Ngày cấp hộ chiếu không được lớn hơn ngày hết hạn hộ chiếu\");\r\n              }\r\n            }\r\n            break;\r\n          case \"passport_date\":\r\n            if (this.isToKhaiThue) {\r\n              let passport_expiration_date = new Date(e.data.passport_expiration_date)\r\n              if (!e.value) {\r\n                this.setStatusDataOnCellPrepared(e, \"Ngày cấp hộ chiếu không được để trống\");\r\n              }\r\n              if (e.value && e.value >= passport_expiration_date) {\r\n                this.setStatusDataOnCellPrepared(e, \"Ngày cấp hộ chiếu không được lớn hơn ngày hết hạn hộ chiếu\");\r\n              }\r\n            }\r\n            break;\r\n          case \"passport\":\r\n            if (this.isToKhaiThue) {\r\n              if (!e.value) {\r\n                this.setStatusDataOnCellPrepared(e, \"Hộ chiếu không được để trống\");\r\n              }\r\n            }\r\n            break;\r\n          case \"nationality\":\r\n            if (this.isToKhaiThue) {\r\n              if (!e.value) {\r\n                this.setStatusDataOnCellPrepared(e, \"Quốc tịch không được để trống\");\r\n              }\r\n            }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      } else if (e.data.number_of_vouchers == \"\" && e.data.dataType == \"KHACH_HANG\" && e.data.product_name && e.column.dataField == \"number_of_vouchers\") {\r\n        this.setStatusDataOnCellPrepared(e, \"Số phiếu, chứng từ không được để trống\");\r\n      }\r\n    }\r\n  }\r\n\r\n  setStatusDataOnCellPrepared(e, message) {\r\n    if (((e.column.dataField == \"amount\" || e.column.dataField == \"amount_after_vat\") && e.value == null && !e.data.is_promotion) || ((e.column.dataField != \"amount\" && e.column.dataField != \"amount_after_vat\" && e.column.dataField != \"product_code\") && (e.value == null || e.value == \"\")) || (e.column.dataField == \"product_code\" && VStringService._getValueToString(e.value) != \"\" && !this.productCodePattern.test(e.value)) || (this.isToKhaiThue && (e.column.dataField == \"passport_date\" || e.column.dataField == \"passport_expiration_date\"))) {\r\n      e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n      e.cellElement.title = message;\r\n      if (e.data.statusData != \"ERROR_DUPLICATE_DATABASE\" && e.data.statusData != \"ERROR_DUPLICATE_ONGIRD\") e.data.statusData = \"DATA_ERROR\";\r\n    }\r\n    else {\r\n      if (e.data.customer_object_code == false && (e.data.buyer_address == null || e.data.buyer_address == \"\" || e.data.customer_name == null || e.data.customer_name == \"\"))\r\n        e.data.statusData == \"DATA_ERROR\";\r\n      else\r\n        if (VStringService._getValueToString(e.data.product_code) != \"\" && !this.productCodePattern.test(e.data.product_code))\r\n          e.data.statusData == \"DATA_ERROR\";\r\n        else\r\n          if (e.data.customer_object_code == true && (e.data.buyer_name == null || e.data.buyer_name == \"\"))\r\n            e.data.statusData == \"DATA_ERROR\";\r\n          else\r\n            if (e.data.payment_method_name == null || e.data.payment_method_name == \"\")\r\n              e.data.statusData == \"DATA_ERROR\";\r\n            else\r\n              if (e.data.product_name == null || e.data.product_name == \"\")\r\n                e.data.statusData == \"DATA_ERROR\";\r\n              else\r\n                if (e.data.amount == null)\r\n                  e.data.statusData == \"DATA_ERROR\";\r\n                else if (e.key.statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n                  let passport_expiration_date = new Date(e.data.passport_expiration_date)\r\n                  let passport_date = new Date(e.data.passport_date)\r\n                  if (this.isToKhaiThue && (e.data.passport_expiration_date == \"\" || e.data.passport_date == \"\" || e.data.nationality == \"\" || e.data.passport == \"\" || passport_date >= passport_expiration_date)) {\r\n                    e.data.statusData == \"DATA_ERROR\";\r\n                  } else {\r\n                    e.data.statusData = \"INVALID\"\r\n                  }\r\n                }\r\n                else\r\n                  if (e.data.amount_after_vat == null)\r\n                    e.data.statusData == \"DATA_ERROR\";\r\n                  else if (e.data.number_of_vouchers == \"\" && e.data.dataType == \"KHACH_HANG\" && e.data.product_name && e.column.dataField == \"number_of_vouchers\")\r\n                    e.data.statusData == \"DATA_ERROR\";\r\n                  else\r\n                    e.data.statusData = \"INVALID\"\r\n    }\r\n  }\r\n  onRowRemoving(e) {\r\n    const number_of_vouchers = e.data.number_of_vouchers\r\n    if (number_of_vouchers) {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach(row => {\r\n          if (row.productNumberOfVouchers == number_of_vouchers || row.number_of_vouchers == number_of_vouchers) {\r\n            this.invoice_products.remove(row.keyData);\r\n          }\r\n        });\r\n      })\r\n    }\r\n    else {\r\n      this.invoice_products.remove(e.key);\r\n    }\r\n    this.checkStatusData();\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code == \"Delete\") {\r\n      // console.log(e.event.srcElement);\r\n      e.event.srcElement.value = null;\r\n      // e.event.srcElement.parentNode.parentNode.querySelector('input').value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.data) {\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_DATABASE\" && e.data.number_of_vouchers) {\r\n        e.rowElement.style.background = \"#FFFF00\";\r\n      } else {\r\n        e.rowElement.style.background = \"\";\r\n      }\r\n    }\r\n    this.checkStatusData();\r\n  }\r\n\r\n  onRowUpdated(e) {\r\n    //  this.onNumberOfVouchers(e);\r\n    // let column = Object.keys(e.data)[0];\r\n    // switch (column) {\r\n    //   case \"number_of_vouchers\":\r\n    //     this.onNumberOfVouchers(e);\r\n    //     break;\r\n    //   case \"product_code\":\r\n    //     this.productCodeChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"quantity\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"discount\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount_discount\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"price\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"vat\":\r\n    //     this.vatChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"unit_code\":\r\n    //     this.unitChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount\":\r\n    //     this.amountChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount_vat\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   case \"amount_after_vat\":\r\n    //     this.priceChange(e);\r\n    //     this.dataGrid.instance.refresh();\r\n    //     break;\r\n    //   default:\r\n    //     break;\r\n    // }\r\n    // this.checkStatusData();\r\n  }\r\n\r\n\r\n\r\n  onNumberOfVouchers(e, value) {\r\n    let numberOfVouchers = value;\r\n    if (e.row.key.number_of_vouchers_backup) {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        for (let i = 0; i < dataSource.length; i++) {\r\n          const row = dataSource[i];\r\n          if (row.productNumberOfVouchers && row.productNumberOfVouchers == e.row.key.number_of_vouchers_backup) {\r\n            dataSource[i].productNumberOfVouchers = numberOfVouchers;\r\n          }\r\n        }\r\n      });\r\n      e.row.key.number_of_vouchers_backup = numberOfVouchers;\r\n    }\r\n\r\n    if (numberOfVouchers != \"\") {\r\n      //// Tạm đóng 14/07/2020\r\n      if (this.configs.system_parameter.the_same_number_of_voucher) {\r\n        this.vatService.getInvoicesHaveNumberOfVouchers([numberOfVouchers]).subscribe((res: any) => {\r\n          let dupInvoices = res.data.invoices;\r\n          if (dupInvoices.length > 0) {\r\n            e.row.key.statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n            // this.totalDuplicateInvoice++;\r\n            // if (this.totalInvoice > 0) this.totalInvoice--\r\n          } else {\r\n            if (e.row.key.statusData = \"ERROR_DUPLICATE_DATABASE\") {\r\n              e.row.key.statusData = \"INVALID\";\r\n              // if (this.totalDuplicateInvoice > 0) this.totalDuplicateInvoice--;\r\n            }\r\n            // this.totalInvoice++;\r\n          }\r\n          this.invoice_products.load().then((dataSource) => {\r\n            let foundOnGird = dataSource.filter((item) => {\r\n              return item.number_of_vouchers == numberOfVouchers;\r\n            });\r\n            if (foundOnGird.length > 1 && e.row.key.statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n              e.row.key.statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n            }\r\n          });\r\n          this.dataGrid.instance.refresh();\r\n          this.checkStatusData();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  //Thay đổi cột mã hàng\r\n  // productCodeChange(e, value) {\r\n  //   this.select.products.some(item => {\r\n  //     if (item.code == value) {\r\n  //       e.row.key.product_name = item.name;\r\n  //       e.row.key.unit_code = this.checkUnitCode(item.unit_code);\r\n  //       e.row.key.quantity = null;\r\n  //       e.row.key.engine_number = null;\r\n  //       e.row.key.price_after_discount = null;\r\n  //       e.row.key.chassis_number = null;\r\n  //       e.row.key.contract_order = null;\r\n  //       e.row.key.product_exchange_rate = null;\r\n  //       e.row.key.price = item.price ? parseFloat(item.price) : item.price;\r\n  //       e.row.key.amount = item.price ? parseFloat(item.price) : 0;\r\n  //       e.row.key.discount = item.discount ? parseFloat(item.discount) : null;\r\n  //       e.row.key.amount_discount = (e.row.key.discount > 0) ? this.caculatorAmountDiscount(e.row.key.price, e.row.key.discount) : null;\r\n  //       if (e.row.key.amount_discount > 0)\r\n  //         e.row.key.amount -= e.row.key.amount_discount;\r\n  //       if (this.isHdGTGT) {\r\n  //         e.row.key.vat = item.vat ? parseFloat(item.vat) : null;\r\n  //         e.row.key.amount_vat = (e.row.row.key.vat >= 0) ? this.caculatorAmountVat(e.row.key.amount, e.row.key.vat) : null;\r\n  //       }\r\n  //       e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n  //     }\r\n  //   });\r\n  // }\r\n\r\n  priceChange(e, value) {\r\n    let quantity = e.row.key.quantity || 1;\r\n    let price = value || 0;\r\n    if (price != null) {\r\n      e.row.key.amount = price * quantity;\r\n      e.row.key.amount_discount = (e.row.key.discount > 0) ? this.caculatorAmountDiscount(e.row.key.price, e.row.key.discount) : e.row.key.amount_discount;\r\n      if (e.row.key.amount_discount > 0)\r\n        e.row.key.amount -= e.key.amount_discount;\r\n      if (this.isHdGTGT)\r\n        e.row.key.amount_vat = (e.row.key.vat >= 0) ? this.caculatorAmountVat(e.row.key.amount, e.row.key.vat) : null;\r\n      e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n    }\r\n  }\r\n\r\n  vatChange(e, value) {\r\n    if (this.isHdGTGT)\r\n      e.row.key.amount_vat = (value >= 0) ? this.caculatorAmountVat(e.row.key.amount, value) : null;\r\n    e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n  }\r\n  unitChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n  amountChange(e, value) {\r\n    if (!e.row.key.quantity && !e.row.key.price) {\r\n      e.row.key.amount_after_vat = value;\r\n    } else {\r\n      let quantity = e.row.key.quantity || 1;\r\n      let price = e.row.key.price || 0;\r\n      if (price != null) {\r\n        e.row.key.amount = e.row.key.price * quantity;\r\n        e.row.key.amount_discount = (e.row.key.discount > 0) ? this.caculatorAmountDiscount(e.row.key.price, e.row.key.discount) : e.row.key.amount_discount;\r\n        if (e.row.key.amount_discount > 0)\r\n          e.row.key.amount -= e.row.key.amount_discount;\r\n        if (this.isHdGTGT)\r\n          e.row.key.amount_vat = (e.row.key.vat >= 0) ? this.caculatorAmountVat(e.row.key.amount, e.row.key.vat) : null;\r\n        e.row.key.amount_after_vat = e.row.key.amount + (this.isHdGTGT ? e.row.key.amount_vat : 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  checkValidNumberOfVouchers() {\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach(row => {\r\n        if (row.number_of_vouchers == \"\") {\r\n          Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n        } else {\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    let items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code == unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  checkProvisionsOnAccounts(name) {\r\n    let found = this.select.select_provisions_on_accounts.find(function (element) {\r\n      return element.name === name;;\r\n    });\r\n    let code = \"\";\r\n\r\n    if (found) {\r\n      code = found.code;\r\n    } else {\r\n      Library.notify(\"Định khoản chưa có trong danh mục\", \"error\");\r\n    }\r\n\r\n    return code;\r\n  }\r\n\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    let temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  caculatorAmountDiscount(price, discount) {\r\n    let temp = price * discount / 100;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) != \"\") {\r\n      if (!this.select.unit_codes)\r\n        this.select.unit_codes = [];\r\n      let _obj = this.select.unit_codes.filter(p => p.name == unitName)[0];\r\n      if (_obj) {\r\n        return _obj.code;\r\n      } else {\r\n        let code = VStringService._convertToViKdau(unitName);\r\n        let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n        if (oDuplicate)\r\n          code = code + Helper.addtionalUnitCode();\r\n        this.select.unit_codes.push({ code: code, name: unitName });\r\n        return code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getPaymentMethodCodeByName(payment_method_name) {\r\n    let items = this.select.payment_method_names;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].name == payment_method_name) {\r\n        return items[i].code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    let status;\r\n    if (!this.invoice.id) {\r\n      status = 'THEM_MOI';\r\n    }\r\n    else {\r\n      if (!this.invoice.bill_number)\r\n        status = 'GHI_TAM';\r\n      else {\r\n        if (this.invoice.status == \"GIU_SO\")\r\n          status = 'GIU_SO';\r\n        else if (this.invoice.status == \"GHI_TAM\")\r\n          status = 'GHI_TAM';\r\n      }\r\n    }\r\n    // if (!this.invoice.id && !this.invoice.invoice_number) status = 'THEM_MOI';\r\n    // if (this.invoice.id && !this.invoice.invoice_number) status = 'GHI_TAM';\r\n    // if (this.invoice.id && this.invoice.invoice_number) status = 'GIU_SO';\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (status == 'THEM_MOI') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.ghiTam(this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.invoice_number = rs.data.invoice_number;\r\n            this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.invoice.id = rs.data.id;\r\n            this.invoicesId.push(rs.data.id);\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, this.invoice.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.ghiTamTT78(this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.invoice_number = rs.data.invoice_number;\r\n            this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.invoice.id = rs.data.id;\r\n            this.invoicesId.push(rs.data.id);\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                let ListSerialNumber = \"DSCKS\";\r\n                if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n                  let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n                  if (signatures && signatures.length > 0)\r\n                    ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n                }\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, invoice_sign_date, 'InvoiceData', ListSerialNumber, true);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else if (status == 'GHI_TAM') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.edit(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editTT78(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                let ListSerialNumber = \"DSCKS\";\r\n                if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n                  let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n                  if (signatures && signatures.length > 0)\r\n                    ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n                }\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, invoice_sign_date, 'InvoiceData', ListSerialNumber, true);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n\r\n    } else if (status == 'GIU_SO') {\r\n      if (!this.isTT78) {\r\n        let sub = this.vatService.edit(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        let sub = this.vatService.editTT78(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            //demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                let ListSerialNumber = \"DSCKS\";\r\n                if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n                  let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n                  if (signatures && signatures.length > 0)\r\n                    ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n                }\r\n                this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, invoice_sign_date, 'InvoiceData', ListSerialNumber, true);\r\n              }\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.subXuatHoaDon = this.vatService.xuatHoaDon({\r\n      id: this.invoice.id,\r\n      xml_string: xml_string\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        // this.formInvoice.readonlyAllForm();\r\n        this.ttDaXuatHoaDon = true;\r\n        this.valueProgress += percentComplete;\r\n        if (this.countInvoice < this.totalInvoice) {\r\n          this.countInvoice++;\r\n          this.xuatHoaDon();\r\n        } else if (this.countInvoice == this.totalInvoice) {\r\n          this.valueProgress = 100;\r\n          this.bsModalImportRef.content.successSaveItem = \"success\";\r\n          if (this.isPepsi) {\r\n            this.isVisibleBtnSubmit = false;\r\n            this.showPopupImport = false;\r\n            const initialState = {\r\n              status: sEnum.notify.XuatHoaDon\r\n            };\r\n            this.bsModalSignRef = this.modalService.show(NotifySuccessComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'notify-modal',\r\n              initialState\r\n            });\r\n            const subModal = this.modalService.onHide.subscribe(() => {\r\n              subModal.unsubscribe();\r\n            });\r\n          }\r\n          else {\r\n            Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n            this.isVisibleBtnSubmit = false;\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            this.funcNavigate();\r\n          }\r\n        }\r\n      } else {\r\n        this.showPopupImport = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  xuatHoaDon() {\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      this.connectWebsocket();\r\n      if (this.invoice && this.invoice.invoice_files.length) {\r\n        this.invoice.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.invoice_date);\r\n        });\r\n      } else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n      }\r\n    }\r\n    this.tempKiFile = 0;\r\n  }\r\n\r\n  xuatChoKy() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (!this.isTT78) {\r\n      this.subLuuChoXuat = this.vatService.xuatChoKy(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.xuatChoKy();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            this.bsModalImportRef.content.successSaveItem = \"success\";\r\n            this.funcNavigate();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.subLuuChoXuat = this.vatService.xuatChoKyTT78(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.xuatChoKy();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n            this.bsModalImportRef.content.successSaveItem = \"success\";\r\n            this.funcNavigate();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  luuChoXuat() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.invoice.id) {\r\n      if (!this.isTT78) {\r\n        this.subLuuChoXuat = this.vatService.edit(this.invoice.id, this.invoice).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.id = rs.data.id;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.luuChoXuat();\r\n            } else if (this.countInvoice == this.totalInvoice) {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n              this.showPopupImport = false;\r\n              this.bsModalImportRef.content.successSaveItem = \"success\";\r\n              this.bsModalImportRef.hide();\r\n              this.funcNavigate();\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.subLuuChoXuat = this.vatService.editTT78(this.invoice.id, this.invoice).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.id = rs.data.id;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.luuChoXuat();\r\n            } else if (this.countInvoice == this.totalInvoice) {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n              this.showPopupImport = false;\r\n              this.bsModalImportRef.content.successSaveItem = \"success\";\r\n              this.bsModalImportRef.hide();\r\n              this.funcNavigate();\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      if (!this.isTT78) {\r\n        this.subLuuChoXuat = this.vatService.ghiTam(this.invoice).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.id = rs.data.id;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.luuChoXuat();\r\n            } else if (this.countInvoice == this.totalInvoice) {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n              this.showPopupImport = false;\r\n              this.bsModalImportRef.hide();\r\n              this.bsModalImportRef.content.successSaveItem = \"success\";\r\n              this.funcNavigate();\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.subLuuChoXuat = this.vatService.ghiTamTT78(this.invoice).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            this.invoice.id = rs.data.id;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.luuChoXuat();\r\n            } else if (this.countInvoice == this.totalInvoice) {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n              this.showPopupImport = false;\r\n              this.bsModalImportRef.hide();\r\n              this.bsModalImportRef.content.successSaveItem = \"success\";\r\n              this.funcNavigate();\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuatFile() {\r\n    let invoices = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach(element => {\r\n        if (element.number_of_vouchers) {\r\n          let invoice = {};\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n          invoice[\"customer_code\"] = element.customer_code; //mã đơn vị (mã khách hàng)\r\n          invoice[\"currency_code\"] = element.currency_code;\r\n          invoice[\"customer_object_code\"] = element.customer_object_code ? \"CA_NHAN\" : \"DOANH_NGHIEP\"; //Mã loại hóa đơn\r\n          invoice[\"buyer_tax_code\"] = element.buyer_tax_code; //Mã số thuế\r\n          invoice[\"customer_name\"] = element.customer_name; //Tên đơn vị (Tên khách hàng)\r\n          invoice[\"buyer_name\"] = element.buyer_name; //Tên người mua\r\n          invoice[\"student_name\"] = element.student_name;\r\n          invoice[\"class_name\"] = element.class_name;\r\n          invoice[\"buyer_mobile\"] = element.buyer_mobile; //Điện thoại liên hệ\r\n          ///// HĐ xe\r\n          invoice[\"contract_number\"] = element.contract_number;\r\n          invoice[\"currency_rate\"] = element.currency_rate;\r\n          invoice[\"vsb_number\"] = element.vsb_number;\r\n          invoice[\"license_number\"] = element.license_number;\r\n          invoice[\"sell_form\"] = element.sell_form;\r\n          invoice[\"model\"] = element.model;\r\n          invoice[\"color\"] = element.color;\r\n          invoice[\"invoice_engine_number\"] = element.invoice_engine_number;\r\n          invoice[\"invoice_chassis_number\"] = element.invoice_chassis_number;\r\n          invoice[\"manufacture_year\"] = element.manufacture_year;\r\n          invoice[\"place_of_delivery\"] = element.place_of_delivery;\r\n          invoice[\"shiping_point\"] = element.shiping_point;\r\n          invoice[\"payment_expire\"] = element.payment_expire;\r\n          invoice[\"wip_number\"] = element.wip_number;\r\n          invoice[\"in_out_date\"] = element.in_out_date;\r\n          invoice[\"invoice_internal_number\"] = element.invoice_internal_number;\r\n          invoice[\"license_plate\"] = element.license_plate;\r\n          invoice[\"kilometer_number\"] = element.kilometer_number;\r\n          /////\r\n          invoice[\"buyer_email\"] = element.buyer_email; //Email\r\n          invoice[\"buyer_address\"] = element.buyer_address; //Địa chỉ\r\n          invoice[\"the_order\"] = element.the_order; //Địa chỉ\r\n          invoice[\"consult_number\"] = element.consult_number; //Địa chỉ\r\n          invoice[\"ship_receiving_address\"] = element.ship_receiving_address; //Địa chỉ\r\n          invoice[\"ship_receiving_name\"] = element.ship_receiving_name; //Địa chỉ\r\n          invoice[\"payment_method_name\"] = element.payment_method_view_name; //Hình thức thanh toán\r\n          invoice[\"bank_account_number\"] = element.bank_account_number; //Số tài khoản\r\n          invoice[\"bank_name\"] = element.bank_name; //thuộc ngân hàng\r\n          invoice[\"note\"] = element.note; //ghi chú\r\n          /* Hóa đơn Pepsi */\r\n          invoice[\"total_large_unit\"] = element.total_large_unit;\r\n          invoice[\"total_small_unit\"] = element.total_small_unit;\r\n          invoice[\"billing_source\"] = element.billing_source;\r\n          invoice[\"template_code\"] = element.template_code;\r\n          invoice[\"invoice_series\"] = element.invoice_series;\r\n          invoice[\"invoice_amount\"] = element.invoice_amount;\r\n          invoice[\"environmental_fee\"] = element.environmental_fee;\r\n          invoice[\"total_amount_vat\"] = element.total_amount_vat;\r\n          invoice[\"total_payment\"] = element.total_payment;\r\n          invoice[\"username\"] = element.username;\r\n\r\n          let product = {\r\n            product_name: element.product_name,\r\n            provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n            unit_name: element.unit_name,\r\n            quantity: element.quantity,\r\n            other_tax: element.other_tax,\r\n            other_charge: element.other_charge,\r\n            price: element.price,\r\n            product_exchange_rate: element.product_exchange_rate,\r\n            price_after_vat: element.price_after_vat,\r\n            amount: element.amount,\r\n            vat_name: element.vat_name,\r\n            amount_vat: element.amount_vat,\r\n            amount_after_vat: element.amount_after_vat,\r\n            discount: element.discount,\r\n            amount_discount: element.amount_discount,\r\n            amount_without_discount: element.amount_without_discount,\r\n            engine_number: element.engine_number,\r\n            price_after_discount: element.price_after_discount,\r\n            chassis_number: element.chassis_number,\r\n            color_material: element.color_material,\r\n            contract_order: element.contract_order,\r\n            view_order: element.view_order,\r\n            management_code: element.management_code,\r\n          }\r\n          invoice[\"invoice_products\"] = [];\r\n          invoice[\"invoice_products\"].push(product);\r\n          invoices.push(invoice);\r\n        }\r\n\r\n        if (element.productNumberOfVouchers) {\r\n          // console.log(element)\r\n          let invoiceProduct = {\r\n            product_name: element.product_name,\r\n            provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n            unit_name: element.unit_name,\r\n            quantity: element.quantity,\r\n            other_tax: element.other_tax,\r\n            other_charge: element.other_charge,\r\n            price: element.price,\r\n            product_exchange_rate: element.product_exchange_rate,\r\n            price_after_vat: element.price_after_vat,\r\n            amount: element.amount,\r\n            vat_name: element.vat,\r\n            amount_vat: element.amount_vat,\r\n            amount_after_vat: element.amount_after_vat,\r\n            discount: element.discount,\r\n            amount_discount: element.amount_discount,\r\n            amount_without_discount: element.amount_without_discount,\r\n            engine_number: element.engine_number,\r\n            price_after_discount: element.price_after_discount,\r\n            chassis_number: element.chassis_number,\r\n            color_material: element.color_material,\r\n            contract_order: element.contract_order,\r\n            view_order: element.view_order,\r\n            management_code: element.management_code,\r\n          }\r\n          for (let i = 0; i < invoices.length; i++) {\r\n            if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n              invoices[i].invoice_products.push(invoiceProduct);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    let data = {\r\n      \"invoices\": invoices\r\n    }\r\n    Library.showloading();\r\n    this.vatService.exportToExcel(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất dữ liệu ra excel thành công\", \"success\");\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  convertGirdToInvoices(type, typeSubmit?) {\r\n    let invoices = [];\r\n    let invalid = true;\r\n    let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n    let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n    let decimal_quantity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n    let decimal_tygia = VChanggeMoneyService.getFormatterToNumber(this.formatter.ty_gia);\r\n    let decimal_amount_discount = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_chiet_khau);\r\n    this.invoice_products.load().then((dataSource) => {\r\n      dataSource.forEach((element, index) => {\r\n        if (element.number_of_vouchers == \"\" && element.dataType == \"KHACH_HANG\" && element.product_name && type == \"submit\") {\r\n          Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n          invalid = false;\r\n          return;\r\n        }\r\n        if (element.number_of_vouchers) {\r\n          if (type == \"submit\") {\r\n            if ((element.customer_name == null || element.customer_name == \"\") && element.customer_object_code == false) { Library.notify(\"Tên đơn vị, tổ chức không được để trống\", \"error\"); invalid = false; return false; }\r\n            if ((element.buyer_name == null || element.buyer_name == \"\") && element.customer_object_code == true) { Library.notify(\"Tên khách hàng không được để trống\", \"error\"); invalid = false; return false; }\r\n            if ((element.buyer_address == null || element.buyer_address == \"\") && element.customer_object_code == false) { Library.notify(\"Địa chỉ không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (element.payment_method_name == \"\" || element.payment_method_name == null) { Library.notify(\"Hình thức thanh toán không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (element.product_name == null || element.product_name == \"\") { Library.notify(\"Tên hàng hóa không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (element.amount_after_vat == null && !element.is_promotion) { Library.notify(\"Tổng tiền không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (element.amount == null && !element.is_promotion) { Library.notify(\"Thành tiền không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (this.infoColumn('template_code').is_visible && element.template_code == \"\") { Library.notify(\"Mẫu số hóa đơn không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (this.infoColumn('invoice_series').is_visible && element.invoice_series == \"\") { Library.notify(\"Ký hiệu hóa đơn không được để trống\", \"error\"); invalid = false; return false; }\r\n            if (element.is_money_service == true && element.is_refund_ticket == true) { Library.notify(\"Không được chọn hàng hóa đồng thời là Phí dịch vụ và Phí hoàn vé\", \"error\"); invalid = false; return false; }\r\n            if (VStringService._getValueToString(element.product_code) != \"\" && !this.productCodePattern.test(element.product_code)) {\r\n              Library.notify(this._translate.VALIDATION.required_productCode, \"error\");\r\n              invalid = false;\r\n              return false;\r\n            }\r\n            if (typeSubmit == 'XUAT') {\r\n              if (this.isToKhaiThue) {\r\n                let passport_date = new Date(element.passport_date);\r\n                let passport_expiration_date = new Date(element.passport_expiration_date)\r\n                if (element.nationality == \"\") { Library.notify(\"Quốc tịch không được để trống\", \"error\"); invalid = false; return false; }\r\n                if (element.passport == \"\") { Library.notify(\"Hộ chiếu không được để trống\", \"error\"); invalid = false; return false; }\r\n                if (element.passport_date === null) { Library.notify(\"Ngày hộ chiếu không được để trống\", \"error\"); invalid = false; return false; }\r\n                if (element.passport_expiration_date === null) { Library.notify(\"Ngày hết hạn hộ chiếu không được để trống\", \"error\"); invalid = false; return false; }\r\n                if (passport_date >= passport_expiration_date) { Library.notify(\"Ngày hết hạn hộ chiếu không được nhỏ hơn ngày cấp hộ chiếu\", \"error\"); invalid = false; return false; }\r\n              }\r\n            }\r\n          }\r\n          let invoice = new InvoiceModel(1);\r\n          if (element.id) {\r\n            invoice.id = element.id;\r\n            invoice.status = element.status;\r\n          }\r\n          /* Các trường mở rộng */\r\n          if (this.invoiceOptions && this.invoiceOptions.length > 0) {\r\n            let optionClone = _.cloneDeep(this.invoiceOptions);\r\n            optionClone.forEach(invOption => {\r\n              for (var key in element) {\r\n                if (invOption.code === key) {\r\n                  if (invOption.data_type == 'ngay' && element[key])\r\n                    invOption.value = moment(element[key]).format('YYYY-MM-DD HH:mm:ss');\r\n                  else\r\n                    invOption.value = element[key];\r\n                }\r\n              }\r\n            });\r\n            invoice.invoice_options = [];\r\n            optionClone.forEach(val => invoice.invoice_options.push(Object.assign({}, val)));\r\n          }\r\n          invoice.invoice_number = element.invoice_number;\r\n          invoice.invoice_release_id = this.invoice_release_id;\r\n          invoice.template_id = this.template_id;\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n          invoice.invoice_date = element.invoice_date ? moment(element.invoice_date).format('YYYY-MM-DD HH:mm:ss') : moment().format('YYYY-MM-DD HH:mm:ss'); // Ngày hóa đơn\r\n          invoice.customer_object_code = element.customer_object_code ? \"CA_NHAN\" : \"DOANH_NGHIEP\"; //Mã loại hóa đơn\r\n          invoice.buyer_tax_code = element.buyer_tax_code; //Mã số thuế\r\n          invoice.buyer_name = element.buyer_name; //Tên người mua\r\n          invoice.class_name = element.class_name;\r\n          invoice.student_name = element.student_name;\r\n          invoice.customer_name = element.customer_name //Tên đơn vị (Tên khách hàng)\r\n          invoice.customer_code = element.customer_code; //mã đơn vị (mã khách hàng)\r\n          invoice.currency_code = element.currency_code;\r\n          invoice.currency_rate = this.roundNumber(element.currency_rate, decimal_tygia);\r\n          invoice.buyer_address = element.buyer_address; //Địa chỉ\r\n          invoice.the_order = element.the_order; //Điện thoại liên hệ\r\n          invoice.consult_number = element.consult_number; //Điện thoại liên hệ\r\n          invoice.ship_receiving_address = element.ship_receiving_address; //Điện thoại liên hệ\r\n          invoice.ship_receiving_name = element.ship_receiving_name; //Điện thoại liên hệ\r\n          invoice.buyer_mobile = element.buyer_mobile; //Điện thoại liên hệ\r\n          invoice.nationality = element.nationality;\r\n          invoice.passport = element.passport;\r\n          invoice.passport_date = element.passport_date ? moment(element.passport_date).format('YYYY-MM-DD HH:mm:ss') : moment().format('YYYY-MM-DD HH:mm:ss');\r\n          invoice.passport_expiration_date = element.passport_expiration_date ? moment(element.passport_expiration_date).format('YYYY-MM-DD HH:mm:ss') : moment().format('YYYY-MM-DD HH:mm:ss');\r\n          ///// HĐ xe\r\n          invoice.contract_number = element.contract_number;\r\n          invoice.total_large_unit = this.roundNumber(element.total_large_unit, decimal_quantity);\r\n          invoice.total_small_unit = this.roundNumber(element.total_small_unit, decimal_quantity);\r\n          invoice.billing_source = element.billing_source;\r\n          invoice.vsb_number = element.vsb_number;\r\n          invoice.license_number = element.license_number;\r\n          invoice.sell_form = element.sell_form;\r\n          invoice.model = element.model;\r\n          invoice.color = element.color;\r\n          invoice.invoice_engine_number = element.invoice_engine_number;\r\n          invoice.invoice_chassis_number = element.invoice_chassis_number;\r\n          invoice.manufacture_year = element.manufacture_year;\r\n          invoice.place_of_delivery = element.place_of_delivery;\r\n          invoice.shiping_point = element.shiping_point;\r\n          invoice.payment_expire = element.payment_expire;\r\n          invoice.wip_number = element.wip_number;\r\n          invoice.in_out_date = element.in_out_date;\r\n          invoice.invoice_internal_number = element.invoice_internal_number;\r\n          invoice.license_plate = element.license_plate;\r\n          invoice.kilometer_number = element.kilometer_number;\r\n          /////\r\n          /* Hóa đơn Pepsi */\r\n          if (this.isPepsi) {\r\n            invoice.template_code = element.template_code;\r\n            invoice.invoice_series = element.invoice_series;\r\n          }\r\n          else {\r\n            invoice.template_code = this.template_code;\r\n            invoice.invoice_series = this.invoice_series;\r\n          }\r\n\r\n          invoice.username = element.username;\r\n          /////\r\n          invoice.buyer_email = element.buyer_email; //Email\r\n          invoice.payment_method_name = element.payment_method_name; //Hình thức thanh toán\r\n          invoice.payment_method_view_name = element.payment_method_view_name; //Hình thức thanh toán\r\n          if (!invoice.payment_method_view_name) {\r\n            let _obj = this.select.payment_method_names.filter(p => p.code == element.payment_method_name)[0];\r\n            if (_obj) {\r\n              invoice.payment_method_view_name = _obj.name;\r\n            }\r\n          }\r\n          invoice.bank_account_number = element.bank_account_number; //Số tài khoản\r\n          invoice.bank_name = element.bank_name; //thuộc ngân hàng\r\n          invoice.note = element.note; //ghi chú\r\n          invoice.transport_number = element.transport_number;\r\n          invoice.train_name = element.train_name;\r\n          if (this.isToKhaiThue) {\r\n            invoice.nationality = element.nationality;\r\n            invoice.passport = element.passport;\r\n            invoice.passport_date = element.passport_date;\r\n            invoice.passport_expiration_date = element.passport_expiration_date;\r\n          }\r\n          //máy bay\r\n          invoice.invoice_products[0].is_refund_ticket = element.is_refund_ticket;\r\n          invoice.invoice_products[0].is_money_service = element.is_money_service;\r\n          invoice.invoice_products[0].product_code = element.product_code;\r\n          invoice.invoice_products[0].product_name = element.product_name;\r\n          invoice.invoice_products[0].engine_number = element.engine_number;\r\n          invoice.invoice_products[0].price_after_discount = element.price_after_discount;\r\n          invoice.invoice_products[0].chassis_number = element.chassis_number;\r\n          invoice.invoice_products[0].color_material = element.color_material;\r\n          invoice.invoice_products[0].contract_order = element.contract_order;\r\n          invoice.invoice_products[0].management_code = element.management_code;\r\n          invoice.invoice_products[0].unit_code = element.unit_code;\r\n          invoice.invoice_products[0].unit_name = element.unit_name;\r\n          invoice.invoice_products[0].quantity = element.quantity;\r\n          invoice.invoice_products[0].other_tax = element.other_tax;\r\n          invoice.invoice_products[0].other_charge = element.other_charge;\r\n          invoice.invoice_products[0].discount = element.discount;\r\n          invoice.invoice_products[0].amount_discount = element.amount_discount;\r\n          invoice.invoice_products[0].amount_without_discount = element.amount_without_discount;\r\n          invoice.invoice_products[0].price = element.price;\r\n          invoice.invoice_products[0].product_exchange_rate = element.product_exchange_rate;\r\n          invoice.invoice_products[0].price_after_vat = element.price_after_vat;\r\n          invoice.invoice_products[0].amount = element.amount;\r\n          invoice.invoice_products[0].vat = element.vat;\r\n          invoice.invoice_products[0].amount_vat = element.amount_vat;\r\n          invoice.invoice_products[0].amount_after_vat = element.amount_after_vat;\r\n          invoice.invoice_products[0].order = element.order;\r\n          invoice.invoice_products[0].view_order = element.view_order;\r\n          invoice.invoice_products[0].provisions_on_accounts = element.provisions_on_accounts;\r\n          invoice.invoice_products[0].commercial_discount = element.commercial_discount;\r\n          invoice.invoice_products[0].is_promotion = element.is_promotion;\r\n          invoice.invoice_products[0].is_promotion_new = element.is_promotion_new;\r\n          invoice.invoice_products[0].lot = element.lot;\r\n          invoice.invoice_products[0].expiration_date = element.expiration_date;\r\n          invoice.invoice_products[0].product_date = element.product_date;\r\n          invoice.invoice_products[0][\"row_content\"] = element.product_name\r\n          invoice.display_currency = JSON.stringify(this.configs.display_currency);\r\n\r\n          let decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n\r\n          invoice.decimal_places_json = decimal_places_json;\r\n          if (element.file_attach) {\r\n            invoice.invoice_files = element.file_attach;\r\n          } else {\r\n            invoice.invoice_files = [];\r\n          }\r\n          invoice.environmental_fee = element.environmental_fee ? this.roundNumber(element.environmental_fee, decimal_amount) : null;;\r\n          if (this.isBĐS) {\r\n            invoice.amount = element.invoice_amount ? this.roundNumber(element.invoice_amount, decimal_amount) : null;;\r\n            invoice.total_amount_vat = element.amount_vat ? this.roundNumber(element.amount_vat, decimal_amount_vat) : null;\r\n            invoice.amount_after_vat = element.amount_after_vat ? this.roundNumber(element.amount_after_vat, decimal_amount_after_vat) : null;\r\n            if (element.vat == -1 && element.amount_after_vat !== null)\r\n              invoice.amount_after_vatx = this.roundNumber(element.amount_after_vat, decimal_amount_after_vat);\r\n            if (element.vat == 0 && element.amount_after_vat !== null)\r\n              invoice.amount_after_vat0 = this.roundNumber(element.amount_after_vat, decimal_amount_after_vat);\r\n            if (element.vat == 5 && element.amount_after_vat !== null)\r\n              invoice.amount_after_vat5 = this.roundNumber(element.amount_after_vat, decimal_amount_after_vat);\r\n            if (element.vat == 8 && element.amount_after_vat !== null)\r\n              invoice.amount_after_vat8 = this.roundNumber(element.amount_after_vat, decimal_amount_after_vat);\r\n            if (element.vat == 10 && element.amount_after_vat !== null)\r\n              invoice.amount_after_vat10 = this.roundNumber(element.amount_after_vat, decimal_amount_after_vat);\r\n            /////\r\n            if (element.vat == -1) invoice.total_amount_product_vatx = element.amount ? this.roundNumber(element.amount, decimal_amount) : null;\r\n            if (element.vat == 0) invoice.total_amount_product_vat0 = element.amount ? this.roundNumber(element.amount, decimal_amount) : null;\r\n            if (element.vat == 5) invoice.total_amount_product_vat5 = element.amount ? this.roundNumber(element.amount, decimal_amount) : null;\r\n            if (element.vat == 8) invoice.total_amount_product_vat8 = element.amount ? this.roundNumber(element.amount, decimal_amount) : null;\r\n            if (element.vat == 10) invoice.total_amount_product_vat10 = element.amount ? this.roundNumber(element.amount, decimal_amount) : null;\r\n            if (element.vat == 5)\r\n              invoice.amount_vat5 = element.amount_vat ? this.roundNumber(element.amount_vat, decimal_amount_vat) : null;\r\n            if (element.vat == 8)\r\n              invoice.amount_vat8 = element.amount_vat ? this.roundNumber(element.amount_vat, decimal_amount_vat) : null;\r\n            if (element.vat == 10)\r\n              invoice.amount_vat10 = element.amount_vat ? this.roundNumber(element.amount_vat, decimal_amount_vat) : null;\r\n            if (element.vat == 0)\r\n              invoice.amount_vat0 = element.amount_vat ? this.roundNumber(element.amount_vat, decimal_amount_vat) : null;\r\n            invoice.total_payment = this.roundNumber(invoice.amount_after_vat, decimal_amount_after_vat)\r\n            invoice.auto_value = true;\r\n          }\r\n          if (this.isPepsi) {\r\n            invoice.total_large_unit = this.roundNumber(element.total_large_unit, decimal_quantity);\r\n            invoice.total_small_unit = this.roundNumber(element.total_small_unit, decimal_quantity);\r\n            invoice.amount = element.invoice_amount ? this.roundNumber(element.invoice_amount, decimal_amount) : null;;\r\n            invoice.total_amount_vat = element.total_amount_vat ? this.roundNumber(element.total_amount_vat, decimal_amount_vat) : null;\r\n            invoice.total_payment = element.total_payment ? this.roundNumber(element.total_payment, decimal_amount_after_vat) : null;\r\n            invoice.auto_value = true;\r\n          }\r\n          invoices.push(invoice);\r\n        }\r\n\r\n        if (element.productNumberOfVouchers) {\r\n          // console.log(element)\r\n          let invoiceProduct = {\r\n            product_code: element.product_code,\r\n            product_name: element.product_name,\r\n            engine_number: element.engine_number,\r\n            price_after_discount: element.price_after_discount,\r\n            chassis_number: element.chassis_number,\r\n            color_material: element.color_material,\r\n            contract_order: element.contract_order,\r\n            management_code: element.management_code,\r\n            provisions_on_accounts: element.provisions_on_accounts,\r\n            unit_code: element.unit_code,\r\n            unit_name: element.unit_name,\r\n            quantity: element.quantity,\r\n            other_tax: element.other_tax,\r\n            other_charge: element.other_charge,\r\n            price: element.price,\r\n            product_exchange_rate: element.product_exchange_rate,\r\n            price_after_vat: element.price_after_vat,\r\n            vat: element.vat,\r\n            commercial_discount: element.commercial_discount,\r\n            is_promotion: element.is_promotion,/* Diễn giải */\r\n            is_promotion_new: element.is_promotion_new,/* Khuyến mại */\r\n            lot: element.lot,\r\n            expiration_date: element.expiration_date,\r\n            product_date: element.product_date,\r\n            amount_discount: element.amount_discount,\r\n            amount_without_discount: element.amount_without_discount,\r\n            discount: element.discount,\r\n            order: element.order,\r\n            amount: element.amount,\r\n            amount_vat: element.amount_vat,\r\n            amount_after_vat: element.amount_after_vat,\r\n            view_order: element.view_order,\r\n            row_content: element.product_name,\r\n            // máy bay\r\n            is_money_service: element.is_money_service, // Phí dịch vụ\r\n            is_refund_ticket: element.is_refund_ticket, // Phí hoàn vé\r\n          }\r\n          for (let i = 0; i < invoices.length; i++) {\r\n            if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n              //if (invoiceProduct.product_name != \"Tổng\")\r\n              invoices[i].invoice_products.push(invoiceProduct);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n\r\n    for (let i = 0; i < invoices.length; i++) {\r\n      let\r\n        amount = null, total_amount_vat = null, amount_after_vat = null, amount_after_vatx = null, amount_after_vat0 = null, amount_after_vat5 = null, amount_after_vat8 = null, amount_after_vat10 = null, total_amount_product_vat0 = null, amount_vat5 = null, amount_vat8 = null, amount_vat10 = null, amount_vat0 = null,\r\n        total_amount_product_vat5 = null, total_amount_product_vat8 = null, total_amount_product_vat10 = null, total_amount_product_vatx = null, amount_after_vat_other = null, amount_after_vat_kkknt = null, total_amount_product_vat_kkknt, total_amount_product_vat_other, amount_vat_other, other_charge = null, other_tax = null, amount_discount = null;\r\n      let _objTong = invoices[i].invoice_products.filter(p => p.product_name == \"Tổng\")[0];\r\n      invoices[i].invoice_products = invoices[i].invoice_products.filter(p => p.product_name != \"Tổng\");\r\n      invoices[i].invoice_products.forEach((product, index) => {\r\n        //\r\n        if (this.isTT78) {\r\n          if (VStringService._getValueToString(product.product_name) != \"\" && !product.is_promotion && !product.is_promotion_new && !product.commercial_discount && invalid) {\r\n            // if (product.quantity == null && invalid) {\r\n            //   Library.notify(\"Số lượng\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            //   invalid = false;\r\n            //   return false;\r\n            // }\r\n            // if (product.price == null && invalid) {\r\n            //   Library.notify(\"Đơn giá\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n            //   invalid = false;\r\n            //   return false;\r\n            // }\r\n          }\r\n          else if (product.is_promotion || product.is_promotion_new || product.commercial_discount) {\r\n            if ((product.product_name == null || product.product_name == '') && invalid) {\r\n              Library.notify(\"Tên hàng hóa\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              invalid = false;\r\n              return false;\r\n            }\r\n          }\r\n          if (VStringService._getValueToString(product.product_name) != \"\" && !product.is_promotion) {\r\n            if (this.isHdGTGT) {\r\n              if (product.vat == null && invalid) {\r\n                Library.notify(\"Thuế suất\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                invalid = false;\r\n                return false;\r\n              }\r\n              if (product.vat != \"-1\" && product.vat != \"-2\" && product.amount_vat == null && invalid) {\r\n                Library.notify(\"Tiền thuế\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                invalid = false;\r\n                return false;\r\n              }\r\n            }\r\n            if (product.amount == null && invalid) {\r\n              Library.notify(\"Thành tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              invalid = false;\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        //\r\n        // product.order = index + 1;\r\n        // product.view_order = index + 1;\r\n        if (!product.is_promotion && !product.is_promotion_new) {\r\n          if (!this.isBĐS) {\r\n            if (product.commercial_discount || product.is_refund_ticket) {\r\n              if (product.amount !== null) amount -= product.amount;\r\n              if (product.amount_vat !== null) total_amount_vat -= product.amount_vat;\r\n              if (product.amount_after_vat !== null) amount_after_vat -= product.amount_after_vat;\r\n              if (product.other_tax !== null) other_tax -= product.other_tax;\r\n              if (product.other_charge !== null) other_charge -= product.other_charge;\r\n              if (product.vat == -1 && product.amount_after_vat !== null) amount_after_vatx -= product.amount_after_vat;\r\n              if (product.vat == 0 && product.amount_after_vat !== null) amount_after_vat0 -= product.amount_after_vat;\r\n              if (product.vat == 5 && product.amount_after_vat !== null) amount_after_vat5 -= product.amount_after_vat;\r\n              if (product.vat == 8 && product.amount_after_vat !== null) amount_after_vat8 -= product.amount_after_vat;\r\n              if (product.vat == 10 && product.amount_after_vat !== null) amount_after_vat10 -= product.amount_after_vat;\r\n              if (product.vat == -2 && product.amount_after_vat !== null) amount_after_vat_kkknt -= product.amount_after_vat;\r\n              if ((product.vat == -3 || product.vat == 7 || product.vat == 3.5) && product.amount_after_vat !== null) amount_after_vat_other -= product.amount_after_vat;\r\n\r\n              if (product.vat == 0 && product.amount_vat !== null) amount_vat0 -= product.amount_vat;\r\n              if (product.vat == 5 && product.amount_vat !== null) amount_vat5 -= product.amount_vat;\r\n              if (product.vat == 8 && product.amount_vat !== null) amount_vat8 -= product.amount_vat;\r\n              if (product.vat == 10 && product.amount_vat !== null) amount_vat10 -= product.amount_vat;\r\n              if ((product.vat == -3 || product.vat == 7 || product.vat == 3.5) && product.amount_vat !== null) amount_vat_other -= product.amount_vat;\r\n\r\n              if (product.vat == -1) total_amount_product_vatx -= product.amount;\r\n              if (product.vat == 0) total_amount_product_vat0 -= product.amount;\r\n              if (product.vat == 5) total_amount_product_vat5 -= product.amount;\r\n              if (product.vat == 8) total_amount_product_vat8 -= product.amount;\r\n              if (product.vat == 10) total_amount_product_vat10 -= product.amount;\r\n              if (product.vat == -2) total_amount_product_vat_kkknt -= product.amount;\r\n              if (product.vat == -3 || product.vat == 7 || product.vat == 3.5) total_amount_product_vat_other -= product.amount;\r\n            }\r\n            else {\r\n              if (product.amount !== null) amount += product.amount;\r\n              if (product.amount_vat !== null) total_amount_vat += product.amount_vat;\r\n              if (product.amount_after_vat !== null) amount_after_vat += product.amount_after_vat;\r\n              if (product.other_tax !== null) other_tax += product.other_tax;\r\n              if (product.other_charge !== null) other_charge += product.other_charge;\r\n              if (product.vat == -1 && product.amount_after_vat !== null) amount_after_vatx += product.amount_after_vat;\r\n              if (product.vat == 0 && product.amount_after_vat !== null) amount_after_vat0 += product.amount_after_vat;\r\n              if (product.vat == 5 && product.amount_after_vat !== null) amount_after_vat5 += product.amount_after_vat;\r\n              if (product.vat == 8 && product.amount_after_vat !== null) amount_after_vat8 += product.amount_after_vat;\r\n              if (product.vat == 10 && product.amount_after_vat !== null) amount_after_vat10 += product.amount_after_vat;\r\n              if (product.vat == -2 && product.amount_after_vat !== null) amount_after_vat_kkknt += product.amount_after_vat;\r\n              if ((product.vat == -3 || product.vat == 7 || product.vat == 3.5) && product.amount_after_vat !== null) amount_after_vat_other += product.amount_after_vat;\r\n\r\n              if (product.vat == 0 && product.amount_vat !== null) amount_vat0 += product.amount_vat;\r\n              if (product.vat == 5 && product.amount_vat !== null) amount_vat5 += product.amount_vat;\r\n              if (product.vat == 8 && product.amount_vat !== null) amount_vat8 += product.amount_vat;\r\n              if (product.vat == 10 && product.amount_vat !== null) amount_vat10 += product.amount_vat;\r\n              if ((product.vat == -3 || product.vat == 7 || product.vat == 3.5) && product.amount_vat !== null) amount_vat_other += product.amount_vat;\r\n\r\n              if (product.vat == -1) total_amount_product_vatx += product.amount;\r\n              if (product.vat == 0) total_amount_product_vat0 += product.amount;\r\n              if (product.vat == 5) total_amount_product_vat5 += product.amount;\r\n              if (product.vat == 8) total_amount_product_vat8 += product.amount;\r\n              if (product.vat == 10) total_amount_product_vat10 += product.amount;\r\n              if (product.vat == -2) total_amount_product_vat_kkknt += product.amount;\r\n              if (product.vat == -3 || product.vat == 7 || product.vat == 3.5) total_amount_product_vat_other += product.amount;\r\n            }\r\n            //Tính tổng tiền chiết khấu\r\n            if (product.commercial_discount)\r\n              amount_discount += product.amount;\r\n            else if (product.amount_discount != null)\r\n              amount_discount += product.amount_discount;\r\n\r\n            if (!this.is_multi_vat && index > 0 && invoices[i].invoice_products[index].vat != invoices[i].invoice_products[index - 1].vat && invalid) {\r\n              let _obj = invoices[i].invoice_products.filter(p => !p.is_promotion && !p.is_promotion_new && p.vat != null)[0];\r\n              let temp = _obj ? _obj.vat : null;\r\n              if (!this.is_multi_vat) {\r\n                let check_same_vat = true;\r\n                invoices[i].invoice_products.forEach(item => {\r\n                  if (item.vat != null) {\r\n                    if (item.vat !== temp && item.product_name && !item.is_promotion && !item.is_promotion_new) {\r\n                      check_same_vat = false;\r\n                    }\r\n                  }\r\n                });\r\n                if (!check_same_vat) {\r\n                  Library.notify('Mẫu hóa đơn đăng ký 1 loại thuế suất. Vui lòng kiểm tra lại thuế suất của hàng hóa', 'error');\r\n                  invalid = false;\r\n                  return;\r\n                }\r\n              }\r\n              // let _lstVat = invoices[i].invoice_products.filter(p => p.vat == -1 || p.vat == 0 || p.vat == 5 || p.vat == 10 || p.vat == -2 || p.vat == -3);\r\n              // if (_lstVat.length > 0) {\r\n              //   Library.notify('Mẫu hóa đơn đăng ký 1 loại thuế suất. Vui lòng kiểm tra lại thuế suất của hàng hóa', 'error');\r\n              //   invalid = false;\r\n              //   return;\r\n              // }\r\n            }\r\n          }\r\n        }\r\n      });\r\n      if (!this.isBĐS) {\r\n        if (this.isPepsi)\r\n          invoices[i].amount = invoices[i].amount ? this.roundNumber(invoices[i].amount, decimal_amount) : null;\r\n        else\r\n          invoices[i].amount = _objTong ? this.roundNumber(_objTong.amount, decimal_amount) : this.roundNumber(amount, decimal_amount);\r\n        if (this.isPepsi)\r\n          invoices[i].total_amount_vat = invoices[i].total_amount_vat ? this.roundNumber(invoices[i].total_amount_vat, decimal_amount_vat) : null;\r\n        else\r\n          invoices[i].total_amount_vat = _objTong ? this.roundNumber(_objTong.amount_vat, decimal_amount_vat) : this.roundNumber(total_amount_vat, decimal_amount_vat);\r\n        invoices[i].amount_after_vat = _objTong ? this.roundNumber(_objTong.amount_after_vat, decimal_amount_after_vat) : this.roundNumber(amount_after_vat, decimal_amount_after_vat);\r\n\r\n        invoices[i].amount_after_vatx = amount_after_vatx != null ? this.roundNumber(amount_after_vatx, decimal_amount_after_vat) : null;\r\n        invoices[i].amount_after_vat0 = amount_after_vat0 != null ? this.roundNumber(amount_after_vat0, decimal_amount_after_vat) : null;\r\n        invoices[i].amount_after_vat5 = amount_after_vat5 != null ? this.roundNumber(amount_after_vat5, decimal_amount_after_vat) : null;\r\n        invoices[i].amount_after_vat8 = amount_after_vat8 != null ? this.roundNumber(amount_after_vat8, decimal_amount_after_vat) : null;\r\n        invoices[i].amount_after_vat10 = amount_after_vat10 != null ? this.roundNumber(amount_after_vat10, decimal_amount_after_vat) : null;\r\n        invoices[i].amount_after_vat_kkknt = amount_after_vat_kkknt != null ? this.roundNumber(amount_after_vat_kkknt, decimal_amount_after_vat) : null;\r\n        invoices[i].amount_after_vat_other = amount_after_vat_other != null ? this.roundNumber(amount_after_vat_other, decimal_amount_after_vat) : null;\r\n        invoices[i].other_tax = other_tax != null ? this.roundNumber(other_tax, decimal_amount_after_vat) : null;\r\n        invoices[i].other_charge = other_charge != null ? this.roundNumber(other_charge, decimal_amount_after_vat) : null;\r\n        invoices[i].amount_discount = amount_discount != null ? this.roundNumber(amount_discount, decimal_amount_discount) : null;\r\n        if (this.isHdGTGT) {\r\n\r\n          if (!this.is_multi_vat && _objTong) {\r\n            let _objVat5 = invoices[i].invoice_products.filter(p => p.vat == 5)[0];\r\n            if (_objVat5)\r\n              invoices[i].amount_vat5 = this.roundNumber(_objTong.amount_vat, decimal_amount_vat);\r\n            let _objVat8 = invoices[i].invoice_products.filter(p => p.vat == 8)[0];\r\n            if (_objVat8)\r\n              invoices[i].amount_vat8 = this.roundNumber(_objTong.amount_vat, decimal_amount_vat);\r\n            let _objVat10 = invoices[i].invoice_products.filter(p => p.vat == 10)[0];\r\n            if (_objVat10)\r\n              invoices[i].amount_vat10 = this.roundNumber(_objTong.amount_vat, decimal_amount_vat);\r\n            let _objVatOther = invoices[i].invoice_products.filter(p => (p.vat == -3 || p.vat == 7 || p.vat == 3.5))[0];\r\n            if (_objVatOther)\r\n              invoices[i].amount_vat_other = this.roundNumber(_objTong.amount_vat, decimal_amount_vat);\r\n          } else {\r\n            invoices[i].amount_vat0 = amount_vat0 != null ? this.roundNumber(amount_vat0, decimal_amount_vat) : null;\r\n            invoices[i].amount_vat5 = amount_vat5 != null ? this.roundNumber(amount_vat5, decimal_amount_vat) : null;\r\n            invoices[i].amount_vat8 = amount_vat8 != null ? this.roundNumber(amount_vat8, decimal_amount_vat) : null;\r\n            invoices[i].amount_vat10 = amount_vat10 != null ? this.roundNumber(amount_vat10, decimal_amount_vat) : null;\r\n            invoices[i].amount_vat_other = amount_vat_other != null ? this.roundNumber(amount_vat_other, decimal_amount_vat) : null;\r\n          }\r\n        }\r\n        invoices[i].total_amount_product_vatx = total_amount_product_vatx != null ? this.roundNumber(total_amount_product_vatx, decimal_amount) : null;\r\n        invoices[i].total_amount_product_vat0 = total_amount_product_vat0 != null ? this.roundNumber(total_amount_product_vat0, decimal_amount) : null;\r\n        invoices[i].total_amount_product_vat5 = total_amount_product_vat5 != null ? this.roundNumber(total_amount_product_vat5, decimal_amount) : null;\r\n        invoices[i].total_amount_product_vat8 = total_amount_product_vat8 != null ? this.roundNumber(total_amount_product_vat8, decimal_amount) : null;\r\n        invoices[i].total_amount_product_vat10 = total_amount_product_vat10 != null ? this.roundNumber(total_amount_product_vat10, decimal_amount) : null;\r\n        invoices[i].total_amount_product_vat_kkknt = total_amount_product_vat_kkknt != null ? this.roundNumber(total_amount_product_vat_kkknt, decimal_amount) : null;\r\n        invoices[i].total_amount_product_vat_other = total_amount_product_vat_other != null ? this.roundNumber(total_amount_product_vat_other, decimal_amount) : null;\r\n        if (this.isPepsi)\r\n          invoices[i].total_payment = invoices[i].total_payment ? this.roundNumber(invoices[i].total_payment, decimal_amount_after_vat) : null;\r\n        else\r\n          invoices[i].total_payment = this.roundNumber(invoices[i].amount_after_vat, decimal_amount_after_vat);\r\n      }\r\n\r\n      const tien_chu = Helper.tienBangChu(Math.abs(invoices[i].total_payment), decimal_amount_after_vat, invoices[i].currency_code, this.configs.system_parameter.display_read_money_english);\r\n      invoices[i].total_payment_in_word = this.invoiceService.docTienAm(invoices[i].total_payment, tien_chu, this.configs, invoices[i].currency_code);\r\n      if (invoices[i].total_payment > 20000000 && (invoices[i].payment_method_name == 'TM') && type == \"submit\" && invalid) {\r\n        Library.notify('Vui lòng chọn HTTT chuyển khoản cho hóa đơn có giá trị lớn hơn 20 triệu đồng', 'error');\r\n        console.log(invoices);\r\n        let countRowBefore = 0;\r\n        for (let j = 0; j < i; j++) {\r\n          countRowBefore += invoices[j].invoice_products.length;\r\n        }\r\n        this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(countRowBefore, 'payment_method_name'));\r\n        invalid = false;\r\n        return;\r\n      }\r\n      /* Hóa đơn giảm trừ theo Nghị định số 92/2021  */\r\n      let _objND92 = invoices[i].invoice_products.filter(p => (p.vat == \"7\" || p.vat == \"3.5\"))[0];\r\n      if (_objND92) {\r\n        let _objCommon = invoices[i].invoice_products.filter(p => (p.vat != \"7\" && p.vat != \"3.5\"))[0];\r\n        let isCheckNoVat = false;\r\n        let _lstNoVat = invoices[i].invoice_products.filter(p => p.vat == null);\r\n        _lstNoVat.forEach(itemS => {\r\n          if (!itemS.commercial_discount) {\r\n            if (itemS.amount != null)\r\n              isCheckNoVat = true;\r\n          }\r\n        });\r\n        if ((_objCommon || isCheckNoVat) && invalid) {\r\n          Library.notify(\"Vui lòng lập hóa đơn riêng cho hàng hóa, dịch vụ được giảm thuế GTGT theo Nghị định số 92/2021\", 'error', 5000);\r\n          this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(0, 'vat'));\r\n          return false;\r\n        }\r\n        let dateFrom = moment(\"01/11/2021\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n        let dateTo = moment(\"31/12/2021\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n        let invoiceDate: any;\r\n        if (!invoices[i].invoice_date)\r\n          invoiceDate = moment(new Date()).format('YYYY-MM-DD');\r\n        else\r\n          invoiceDate = moment(invoices[i].invoice_date).format('YYYY-MM-DD')\r\n        if ((invoiceDate < dateFrom || invoiceDate > dateTo) && invalid) {\r\n          Library.notify(\"Chỉ áp dụng giảm thuế GTGT theo Nghị định số 92/2021 cho các hóa đơn từ ngày 01/11/2021 đến 31/12/2021\", 'error');\r\n          return false;\r\n        }\r\n      }\r\n      /* Hóa đơn giảm Nghị Quyết 43 */\r\n      let _objNQ43 = invoices[i].invoice_products.filter(p => (p.vat == \"8\"))[0];\r\n      // if (_objNQ43) {\r\n      //   let dateFromNQ43 = moment(\"01/02/2022\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n      //   let dateToNQ43 = moment(\"31/12/2022\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n      //   let invoiceDateNQ43: any;\r\n      //   if (!invoices[i].invoice_date)\r\n      //     invoiceDateNQ43 = moment(new Date()).format('YYYY-MM-DD');\r\n      //   else\r\n      //     invoiceDateNQ43 = moment(invoices[i].invoice_date).format('YYYY-MM-DD')\r\n      //   if ((invoiceDateNQ43 < dateFromNQ43 || invoiceDateNQ43 > dateToNQ43) && invalid && !this.isPassNQ43) {\r\n      //     Library.notify(\"Chỉ áp dụng giảm thuế GTGT theo Nghị quyết số 43/2022/QH15 cho các hóa đơn từ ngày 01/02/2022 đến 31/12/2022\", 'error');\r\n      //     return false;\r\n      //   }\r\n      // }\r\n      /* Check phí dịch vụ, phí hoàn vé */\r\n      let _lstPhiDichVu = invoices[i].invoice_products.filter(p => p.is_money_service);\r\n      if (_lstPhiDichVu && _lstPhiDichVu.length > 1) {\r\n        Library.notify(\"Chỉ được chọn 1 hàng hóa là Phí dịch vụ\", 'error');\r\n        return false;\r\n      }\r\n      let _lstPhiHoanVe = invoices[i].invoice_products.filter(p => p.is_refund_ticket);\r\n      if (_lstPhiHoanVe && _lstPhiHoanVe.length > 1) {\r\n        Library.notify(\"Chỉ được chọn 1 hàng hóa là Phí hoàn vé\", 'error');\r\n        return false;\r\n      }\r\n      // Valid tỷ giá\r\n      let invoice_products = invoices[i].invoice_products.filter(item => item.product_exchange_rate);\r\n      if (invoices[i].currency_code && invoices[i].currency_code != \"VND\") {\r\n        if (invoice_products && invoice_products.length > 0) {\r\n          if (invoice_products.length !== invoices[i].invoice_products.length) {\r\n            Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n            return false;\r\n          }\r\n        }\r\n        else {\r\n          if (!invoices[i].currency_rate) {\r\n            Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.totalInvoice = invoices.length;\r\n    this.invoicesArr = invoices;\r\n    this.invoicesArr = this.invoicesArr.sort((itemA, itemB) => {\r\n      return new Date(itemA.invoice_date).getTime() - new Date(itemB.invoice_date).getTime();\r\n    });\r\n    return invalid;\r\n  }\r\n  date_sort_desc(date1, date2) {\r\n    // This is a comparison function that will result in dates being sorted in\r\n    // DESCENDING order.\r\n    if (date1 > date2) return -1;\r\n    if (date1 < date2) return 1;\r\n    return 0;\r\n  };\r\n  /* Xem trước hóa đơn */\r\n  preview() {\r\n    let convert = this.convertGirdToInvoices(\"preview\");\r\n    if (convert) {\r\n      if (this.configs.system_parameter.display_template_from_server) {\r\n        const initialState = {\r\n          items: this.invoicesArr,\r\n          isXuatHD: false,\r\n          typeAction: 'NAP_EXCEL_HD'\r\n        };\r\n        this.bsModalViewModel = this.modalImportService.show\r\n          (\r\n            ViewInvoiceComponent,\r\n            {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-xl view-invoice',\r\n              initialState\r\n            }\r\n          );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          subModal.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        this.checkCKS(\"XEM_TRUOC\");\r\n      }\r\n    }\r\n  }\r\n\r\n  previewBeforeSubmit() {\r\n    this.convertGirdToInvoices(\"preview\");\r\n    if (this.configs.system_parameter.display_template_from_server) {\r\n      let hinhthucxuat = \"\";\r\n      if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n        hinhthucxuat = \"và ký\";\r\n      } else {\r\n        hinhthucxuat = \"chờ ký\";\r\n      }\r\n      const initialState = {\r\n        items: this.invoicesArr,\r\n        isXuatHD: true,\r\n        hinhthucxuat: hinhthucxuat,\r\n        typeAction: 'NAP_EXCEL_HD'\r\n      };\r\n\r\n      this.bsModalViewModel = this.modalImportService.show\r\n        (\r\n          ViewInvoiceComponent,\r\n          {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-xl view-invoice',\r\n            initialState\r\n          }\r\n        );\r\n      const subModal = this.modalImportService.onHide.subscribe(() => {\r\n        if (this.bsModalViewModel.content.successSaveItem == \"DONG_Y\") {\r\n          this.confirmCheckPreview = true;\r\n          this.submit('XUAT');\r\n        }\r\n        subModal.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      this.checkCKS(\"XUAT_HOA_DON\");\r\n    }\r\n  }\r\n\r\n\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      let newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      let oDuplicate = this.select.unit_codes.filter(p => p.code === newItem.code)[0];\r\n      if (oDuplicate)\r\n        newItem.code = newItem.code + Helper.addtionalUnitCode();\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption(\"unit_code\", \"lookup\", {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: \"name\",\r\n          valueExpr: \"code\"\r\n        });\r\n      });\r\n      return newItem;\r\n    }.bind(this)\r\n  }\r\n  getDataPreview() {\r\n    let formatter;\r\n    let invoicesPreview = [];\r\n    this.convertGirdToInvoices(\"preview\");\r\n\r\n\r\n    let displayInt = this.configs.system_parameter.display_int ? this.configs.system_parameter.display_int : false;\r\n    formatter = this.configs.system_parameter.decpoint_is_dot ? { decimal: \".\", thousands: \",\", display_int: displayInt } : { decimal: \",\", thousands: \".\", display_int: displayInt };\r\n\r\n    this.invoicesArr.forEach(data => {\r\n      let decimal_quatity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n      let decimal_price = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia);\r\n      let decimal_price_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia_sau_thue);\r\n      let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n      let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n      let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n      let decimal_ty_gia = VChanggeMoneyService.getFormatterToNumber(this.formatter.ty_gia);\r\n      let amount_without_discount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien_chua_ck);\r\n\r\n      let total_amount_product_with_vatx = null, total_amount_product_with_vat0 = null, total_amount_product_with_vat5 = null, total_amount_product_with_vat8 = null, total_amount_product_with_vat10 = null, amount_vat0 = null, total_amount_product_vat_kkknt = null, total_amount_product_vat_other = null;\r\n\r\n      data.invoice_products.forEach(item => {\r\n        if (!item.is_promotion && !item.is_promotion_new) {\r\n          if (item.commercial_discount) {\r\n            if (item.vat == -1) total_amount_product_with_vatx -= item.amount_after_vat;\r\n            if (item.vat == 0) total_amount_product_with_vat0 -= item.amount_after_vat;\r\n            if (item.vat == 0) amount_vat0 -= item.amount_vat;\r\n            if (item.vat == 5) total_amount_product_with_vat5 -= item.amount_after_vat;\r\n            if (item.vat == 8) total_amount_product_with_vat8 -= item.amount_after_vat;\r\n            if (item.vat == 10) total_amount_product_with_vat10 -= item.amount_after_vat;\r\n            if (item.vat == -2) total_amount_product_vat_kkknt -= item.amount_after_vat;\r\n            if (item.vat == -3 || item.vat == 7 || item.vat == 3.5) total_amount_product_vat_other -= item.amount_after_vat;\r\n          } else {\r\n            if (item.vat == -1) total_amount_product_with_vatx += item.amount_after_vat;\r\n            if (item.vat == 0) total_amount_product_with_vat0 += item.amount_after_vat;\r\n            if (item.vat == 0) amount_vat0 += item.amount_vat;\r\n            if (item.vat == 5) total_amount_product_with_vat5 += item.amount_after_vat;\r\n            if (item.vat == 8) total_amount_product_with_vat8 += item.amount_after_vat;\r\n            if (item.vat == 10) total_amount_product_with_vat10 += item.amount_after_vat;\r\n            if (item.vat == -2) total_amount_product_vat_kkknt += item.amount_after_vat;\r\n            if (item.vat == -3 || item.vat == 7 || item.vat == 3.5) total_amount_product_vat_other += item.amount_after_vat;\r\n          }\r\n        }\r\n\r\n        item['unit_name'] = \"\";\r\n        this.select.unit_codes.forEach(unit => {\r\n          item.discount = \"\";\r\n          item.total_discount = \"\";\r\n          if (unit.code == item.unit_code) {\r\n            item['unit_name'] = unit.name;\r\n          }\r\n        });\r\n\r\n        item.amount = Helper.formatMoney(item.amount, decimal_amount, formatter);\r\n        item.price = Helper.formatMoney(item.price, decimal_price, formatter);\r\n        item.product_exchange_rate = Helper.formatMoney(item.product_exchange_rate, decimal_ty_gia, formatter);\r\n        item.price_after_vat = Helper.formatMoney(item.price_after_vat, decimal_price_after_vat, formatter);\r\n        item.quantity = Helper.formatMoney(item.quantity, decimal_quatity, formatter);\r\n        item.other_tax = Helper.formatMoney(item.other_tax, decimal_amount, formatter);\r\n        item.other_charge = Helper.formatMoney(item.other_charge, decimal_amount, formatter);\r\n        item.discount = Helper.formatMoney(item.discount, decimal_quatity, formatter);\r\n        item.amount_discount = Helper.formatMoney(item.amount_discount, decimal_quatity, formatter);\r\n        item.amount_without_discount = Helper.formatMoney(item.amount_without_discount, amount_without_discount, formatter);\r\n\r\n      });\r\n      let _obj = this.select.payment_method_names.filter(p => p.code == data.payment_method_name)[0];\r\n      if (_obj) {\r\n        data.payment_method_view_name = _obj.name;\r\n      }\r\n      data.total_amount_product_vat_kkknt = Helper.formatMoney(total_amount_product_vat_kkknt, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_vat_other = Helper.formatMoney(total_amount_product_vat_other, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat8 = Helper.formatMoney(total_amount_product_with_vat8, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n\r\n      data.amount_after_vat_kkknt = Helper.formatMoney(total_amount_product_vat_kkknt, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat_other = Helper.formatMoney(total_amount_product_vat_other, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat8 = Helper.formatMoney(total_amount_product_with_vat8, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n\r\n\r\n      data.amount_after_vat_kkknt = Helper.formatMoney(data.amount_after_vat_kkknt, decimal_amount, formatter);\r\n      data.amount_after_vat_other = Helper.formatMoney(data.amount_after_vat_other, decimal_amount, formatter);\r\n      data.total_amount_product_vatx = Helper.formatMoney(data.total_amount_product_vatx, decimal_amount, formatter);\r\n      data.total_amount_product_vat0 = Helper.formatMoney(data.total_amount_product_vat0, decimal_amount, formatter);\r\n      data.total_amount_product_vat5 = Helper.formatMoney(data.total_amount_product_vat5, decimal_amount, formatter);\r\n      data.total_amount_product_vat8 = Helper.formatMoney(data.total_amount_product_vat8, decimal_amount, formatter);\r\n      data.total_amount_product_vat10 = Helper.formatMoney(data.total_amount_product_vat10, decimal_amount, formatter);\r\n\r\n      data.amount_vat0 = amount_vat0;\r\n      data.amount_vat_other = Helper.formatMoney(data.amount_vat_other, decimal_amount_vat, formatter);\r\n      data.amount_vat5 = Helper.formatMoney(data.amount_vat5, decimal_amount_vat, formatter);\r\n      data.amount_vat8 = Helper.formatMoney(data.amount_vat8, decimal_amount_vat, formatter);\r\n      data.amount_vat10 = Helper.formatMoney(data.amount_vat10, decimal_amount_vat, formatter);\r\n\r\n      data.amount = Helper.formatMoney(data.amount, decimal_amount, formatter);\r\n      data.total_amount_vat = Helper.formatMoney(data.total_amount_vat, decimal_amount_vat, formatter);\r\n      data.total_payment = Helper.formatMoney(data.total_payment, decimal_amount_after_vat, formatter);\r\n\r\n      invoicesPreview.push(data);\r\n    });\r\n\r\n    return invoicesPreview;\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    win.blur();\r\n    Library.showloading();\r\n\r\n    let sub = this.vatService.inChuyenDoiInvoiceImport(this.invoicesId, false).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n        win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n        //   win.document.write(`\r\n        //   <a id=\"idA\" title=\"Download File\" style=\"font-family: \\'Verdana\\';color: #333;font-weight: 600;float:right; margin-bottom: 5px;\r\n        //     margin-right: 20px;\" download=\"hoadon.pdf\" href=\"data:application/pdf;base64,${pdf_file}\">Tải File</a>\r\n        //   <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n\r\n        // `);\r\n        //   win.resizeTo(screen.availWidth, screen.availHeight);\r\n        //   win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xemHoaDon() {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    win.blur();\r\n    Library.showloading();\r\n    let sub = this.vatService.xemHoaDonInvoiceImport(this.invoicesId).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n        win.open(objectUrl, \"name\", \"width=\" + w + \", height=\" + h);\r\n        // win.document.write(`<iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}\"></iframe>`)\r\n        // win.resizeTo(screen.availWidth, screen.availHeight);\r\n        // win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  submit(type) {\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.checkStatusData()\r\n    if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n      Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n      return;\r\n    }\r\n    if (this.totalDuplicateInvoice > 0) {\r\n      Library.notify(\"Số phiếu, chứng từ bị trùng\", \"error\");\r\n      return;\r\n    }\r\n    setTimeout(() => {\r\n      let convert = this.convertGirdToInvoices(\"submit\", type);\r\n      if (convert) {\r\n        if (this.isPepsi)\r\n          this.confirmCheckPreview = true;\r\n        let dayExport = this.invoice_date ? moment(this.invoice_date).format('DD/MM/YYYY') : moment(new Date()).format('DD/MM/YYYY');\r\n        if (type == \"XUAT\") {\r\n          if (this.confirmCheckPreview) {\r\n            // Library.confirmVA(`Tất cả hóa đơn đã nhập sẽ được xuất hóa đơn vào ngày <strong>${dayExport}</strong>. Bạn có chắc chắn không?`, \"Thông báo\", () => {\r\n            this.showPopupImport = true;\r\n            if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n              this.xuatHoaDon();\r\n            } else {\r\n              this.xuatChoKy();\r\n            }\r\n            this.confirmCheckPreview = false;\r\n            // });\r\n          } else {\r\n            this.previewBeforeSubmit();\r\n          }\r\n        } else if (type == \"LUU\") {\r\n          this.showPopupImport = true;\r\n          this.luuChoXuat();\r\n        }\r\n      }\r\n    }, 300);\r\n  }\r\n  /* */\r\n  configColumn() {\r\n    const initialState = {\r\n      listColumn: this.listColumn,\r\n      listColumnClone: this.listColumn,\r\n      configs: this.configs,\r\n      exportType: sEnum.exportType.hoadon\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigColumnImportExcelComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    let subModal = this.modalService.onHide.subscribe(() => {\r\n      let data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this.listColumn = data.listColumn;\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  infoColumn(columnName) {\r\n    if (this.listColumn && this.listColumn.length > 0) {\r\n      let _obj = this.listColumn.filter(p => p.column_code == columnName)[0];\r\n      if (_obj) {\r\n        if ((_obj.column_code == \"vat\" || _obj.column_code == \"amount_vat\") && !this.isHdGTGT) {\r\n          _obj.is_visible = false;\r\n        }\r\n        return _obj;\r\n      } else return { column_code: \"\", column_name: \"\", is_visible: false };\r\n    }\r\n  }\r\n\r\n  checkCKS(typeView) {\r\n    this.connectWebsocket();\r\n    if (this.socketService.checkNull()) {\r\n      this.socketService.connect();\r\n    }\r\n    setTimeout(() => {\r\n      const res = this.socketService.getStatusCertificate();\r\n      if (res && res.status === 'error' && res.code == 10) {\r\n        const initialState = {\r\n          typeNotify: \"XEM_MAU\",\r\n        };\r\n        this.bsModalRef = this.modalService.show(SignatureOffComponent, {\r\n          class: 'modal-lg', backdrop: 'static',\r\n          keyboard: false,\r\n          initialState\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n\r\n        });\r\n      }\r\n      else {\r\n        if (typeView == \"XEM_TRUOC\") {\r\n          const initialState = {\r\n            items: this.invoicesArr,\r\n            isXuatHD: false,\r\n            typeAction: 'NAP_EXCEL_HD'\r\n          };\r\n          this.bsModalViewModel = this.modalImportService.show\r\n            (\r\n              ViewInvoiceComponent,\r\n              {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'modal-xl view-invoice',\r\n                initialState\r\n              }\r\n            );\r\n          const subModal = this.modalImportService.onHide.subscribe(() => {\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n        else if (typeView == \"XUAT_HOA_DON\") {\r\n          let hinhthucxuat = \"\";\r\n          if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n            hinhthucxuat = \"và ký\";\r\n          } else {\r\n            hinhthucxuat = \"chờ ký\";\r\n          }\r\n          const initialState = {\r\n            items: this.invoicesArr,\r\n            isXuatHD: true,\r\n            hinhthucxuat: hinhthucxuat,\r\n            typeAction: 'NAP_EXCEL_HD'\r\n          };\r\n\r\n          this.bsModalViewModel = this.modalImportService.show\r\n            (\r\n              ViewInvoiceComponent,\r\n              {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'modal-xl view-invoice',\r\n                initialState\r\n              }\r\n            );\r\n          const subModal = this.modalImportService.onHide.subscribe(() => {\r\n            if (this.bsModalViewModel.content.successSaveItem == \"DONG_Y\") {\r\n              this.connectWebsocket();\r\n              this.confirmCheckPreview = true;\r\n              this.submit('XUAT');\r\n            }\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  dong() {\r\n    this.bsModalImportRef.hide();\r\n    this.funcNavigate();\r\n  }\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        this.invoice_products.byKey(key).then((row) => {\r\n          switch (column) {\r\n            case 'unit_code':\r\n              this.unitChange(row);\r\n              break;\r\n            case 'payment_method_code':\r\n              this.paymentMethodChange(row);\r\n              break;\r\n            case 'product_code':\r\n              this.productCodeChange(row);\r\n              break;\r\n            default:\r\n              break;\r\n            // }\r\n          }\r\n        }, (error) => {\r\n        });\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  //Thay đổi cột mã hàng\r\n  productCodeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code === row.product_code) {\r\n        let sub = this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              row.product_name = product.name;\r\n              row.unit_code = this.checkUnitCode(product.unit_code);\r\n              this.invoice_products.update(row.id, row);\r\n              this.unitChange(row);\r\n              return true;\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        },\r\n          err => { },\r\n          () => {\r\n            sub.unsubscribe();\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n  paymentMethodChange(row) {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === row.payment_method_code)[0];\r\n    if (_obj) {\r\n      row.payment_method_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.payment_method_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n  funcNavigate() {\r\n    if(this.loaiHoaDon && this.loaiHoaDon == sEnum.loaihoadon.KPTQ07) {\r\n      if (this.search)\r\n        this.router.navigate([`/system/non-tariff-invoice`], { queryParams: this.search });\r\n      else\r\n        this.router.navigate([`/system/non-tariff-invoice`]);\r\n    }\r\n    else if (this.isHdGTGT) {\r\n      if (this.search)\r\n        this.router.navigate([`/system/vat-invoice`], { queryParams: this.search });\r\n      else\r\n        this.router.navigate([`/system/vat-invoice`]);\r\n    }\r\n    else {\r\n      if (this.search)\r\n        this.router.navigate([`/system/sale-invoice`], { queryParams: this.search });\r\n      else\r\n        this.router.navigate([`/system/sale-invoice`]);\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"import-invoices\\\"> \\r\\n  <form class=\\\"form-import-invoices\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">IMPORT THÔNG TIN HÓA ĐƠN TỪ EXCEL</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalImportRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\" style=\\\"padding-bottom: 0px;\\\">\\r\\n      <div class=\\\"row inport-selector\\\">\\r\\n        <div class=\\\"col-md-12\\\">\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field field-first\\\" style=\\\"width: 44%;\\\">\\r\\n              <div class=\\\"label\\\">Mẫu hóa đơn</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box \\r\\n                  [items]=\\\"invoice_releases\\\" \\r\\n                  displayExpr=\\\"name\\\" \\r\\n                  [(value)]=\\\"invoice_release_id\\\"\\r\\n                  valueExpr=\\\"value\\\" \\r\\n                  [disabled]=\\\"disabledInvoiceReleases\\\"\\r\\n                  (onValueChanged)=\\\"onInvoiceReleases($event)\\\"\\r\\n                  >\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"field field-first\\\" style=\\\"width: 27%;\\\">\\r\\n              <div class=\\\"label\\\" style=\\\"width: 135px;\\\">Hình thức xuất</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-select-box \\r\\n                  [(value)]=\\\"htXuat\\\"\\r\\n                  displayExpr=\\\"name\\\"\\r\\n                  valueExpr=\\\"code\\\"\\r\\n                  [items]=\\\"htXuatOptions\\\"\\r\\n                  >\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"field field-first\\\" *ngIf=\\\"!isAllowEditInvoiceDate\\\" style=\\\"width: 27%;\\\">\\r\\n              <div class=\\\"label\\\" style=\\\"width: 135px;\\\">Ngày xuất hóa đơn</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-date-box \\r\\n                  [(value)]=\\\"invoice_date\\\"\\r\\n                  displayFormat=\\\"dd/MM/yyyy\\\"\\r\\n                  [useMaskBehavior]=\\\"true\\\"\\r\\n                  dateSerializationFormat=\\\"yyyy-MM-dd HH:mm:ss\\\"\\r\\n                  >\\r\\n                </dx-date-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field\\\">\\r\\n              <div class=\\\"label\\\">Tên file</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-text-box [readOnly]=\\\"true\\\" [value]=\\\"fileName\\\"></dx-text-box>\\r\\n              </div>\\r\\n              <div class=\\\"btn-select-file\\\" style=\\\"margin-left: 10px;\\\">\\r\\n                  <a href=\\\"javascript:void(0)\\\" (click)=\\\"napDuLieuTuBangKe()\\\" class=\\\"support-link\\\">\\r\\n                      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx, .xls\\\" (change)=\\\"onFileChanged($event)\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n                      <span>Chọn file</span>\\r\\n                    </a>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- <div class=\\\"col-md-5\\\">\\r\\n          <div class=\\\"select-file\\\">\\r\\n            <div class=\\\"field\\\" *ngIf=\\\"!isAllowEditInvoiceDate\\\">\\r\\n              <div class=\\\"label\\\" style=\\\"width: 135px;\\\">Ngày xuất hóa đơn</div>\\r\\n              <div class=\\\"value\\\">\\r\\n                <dx-date-box \\r\\n                  [(value)]=\\\"invoice_date\\\"\\r\\n                  displayFormat=\\\"dd/MM/yyyy\\\"\\r\\n                  dateSerializationFormat=\\\"yyyy-MM-dd\\\"\\r\\n                  >\\r\\n                </dx-date-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div> -->\\r\\n      </div>\\r\\n      <div class=\\\"note-template-import\\\">\\r\\n        <p><span style=\\\"font-weight: 600; color: red; padding-right: 5px;\\\">Lưu ý</span> Chức năng này Import danh sách hóa đơn từ file Excel. File này cần</p>\\r\\n        <p style=\\\"margin-left: 48px;\\\">đúng định dạng (Template). Bạn có thể tải Template mẫu Excel <a href=\\\"javascript:void(0)\\\" style=\\\"font-weight: 600\\\" (click)=\\\"getFileTemp()\\\">Tại đây</a></p>\\r\\n      </div>\\r\\n      <div class=\\\"read-file\\\">\\r\\n      <dx-button (click)=\\\"chonDocFile()\\\" text=\\\"Đọc file Excel\\\" type=\\\"default\\\" [disabled]=\\\"isDisReadFile\\\"></dx-button>\\r\\n      </div>\\r\\n      <!-- phần table hiển thị -->\\r\\n      <div class=\\\"row invoice-table\\\">\\r\\n          <div class=\\\"col-md-12\\\">\\r\\n            <dx-data-grid \\r\\n              id=\\\"gridImportInvoice\\\"\\r\\n              [dataSource]=\\\"dataSource\\\"\\r\\n              [showBorders]=\\\"true\\\"\\r\\n              [showRowLines]=\\\"true\\\"\\r\\n              [wordWrapEnabled]=\\\"true\\\"\\r\\n              [columnAutoWidth]=\\\"false\\\"\\r\\n              [allowColumnResizing]=\\\"true\\\"\\r\\n              [columnMinWidth]=\\\"50\\\"\\r\\n              [columnResizingMode]=\\\"true\\\"\\r\\n              (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n              (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n              (onContentReady)=\\\"onContentReady($event)\\\"\\r\\n              (onCellPrepared)=\\\"onCellPrepared($event)\\\"\\r\\n              (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n              (onRowUpdated)=\\\"onRowUpdated($event)\\\"\\r\\n              (onRowRemoving)=\\\"onRowRemoving($event)\\\"\\r\\n              (onKeyDown)=\\\"onGripKeyDown($event)\\\">\\r\\n              <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n              <dxo-editing \\r\\n                mode=\\\"cell\\\" \\r\\n                [allowUpdating]=\\\"true\\\"\\r\\n                [allowDeleting]=\\\"true\\\"\\r\\n                [useIcons]=\\\"true\\\">\\r\\n              </dxo-editing>\\r\\n              <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n              <dxo-column-fixing [enabled]=\\\"true\\\"></dxo-column-fixing>\\r\\n\\r\\n              <dxi-column dataField=\\\"number_of_vouchers\\\" [width]=\\\"130\\\" caption=\\\"Số phiếu/Chứng từ\\\" alignment=\\\"left\\\" \\r\\n                [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n                <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"customer_object_code\\\" [width]=\\\"70\\\" caption=\\\"Cá nhân\\\" alignment=\\\"center\\\" \\r\\n              [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"customer_code\\\" [width]=\\\"100\\\" caption=\\\"Mã khách hàng\\\" alignment=\\\"center\\\" \\r\\n              [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n              \\r\\n              <dxi-column dataField=\\\"buyer_tax_code\\\" [width]=\\\"100\\\" caption=\\\"MST/MNS\\\" alignment=\\\"left\\\" \\r\\n              [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n              <dxi-validation-rule \\r\\n                type=\\\"pattern\\\"\\r\\n                [pattern]=\\\"taxCodePattern\\\" message=\\\"Mã số thuế không đúng định dạng\\\"\\r\\n              ></dxi-validation-rule></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"customer_name\\\" [width]=\\\"180\\\" caption=\\\"Tên đơn vị, tổ chức\\\" alignment=\\\"left\\\" \\r\\n                [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"buyer_name\\\" [width]=\\\"120\\\" caption=\\\"Người mua hàng\\\" alignment=\\\"left\\\" \\r\\n              [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"buyer_address\\\" [width]=\\\"200\\\" caption=\\\"Địa chỉ\\\" alignment=\\\"left\\\">\\r\\n                  <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"buyer_mobile\\\" [width]=\\\"100\\\" caption=\\\"Điện thoại\\\" alignment=\\\"left\\\">\\r\\n                <dxi-validation-rule \\r\\n                type=\\\"pattern\\\"\\r\\n                [pattern]=\\\"phonePattern\\\" message=\\\"Mã số thuế không đúng định dạng\\\"\\r\\n              ></dxi-validation-rule>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"buyer_email\\\" [width]=\\\"150\\\" caption=\\\"Email nhận hóa đơn\\\" alignment=\\\"left\\\">\\r\\n              <dxi-validation-rule \\r\\n                type=\\\"pattern\\\"\\r\\n                [pattern]=\\\"emailPattern\\\" message=\\\"Mã số thuế không đúng định dạng\\\"></dxi-validation-rule>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"payment_method_name\\\" [width]=\\\"100\\\" caption=\\\"HTTT\\\" alignment=\\\"left\\\">\\r\\n                <dxo-lookup [dataSource]=\\\"select.payment_method_names\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n                <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n              </dxi-column>\\r\\n              \\r\\n              <dxi-column dataField=\\\"bank_account_number\\\" [width]=\\\"100\\\" caption=\\\"Số tài khoản\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"bank_name\\\" [width]=\\\"150\\\" caption=\\\"Tên ngân hàng\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"product_code\\\" caption=\\\"Mã hàng\\\" alignment=\\\"center\\\" [width]=\\\"100\\\">\\r\\n                <dxo-lookup [dataSource]=\\\"select.products\\\" displayExpr=\\\"code\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"product_name\\\" [width]=\\\"150\\\" caption=\\\"Tên hàng hóa, dịch vụ\\\" alignment=\\\"left\\\">\\r\\n                  <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"provisions_on_accounts\\\" [width]=\\\"150\\\" caption=\\\"Định khoản\\\" alignment=\\\"left\\\">\\r\\n                <dxo-lookup [dataSource]=\\\"select.select_provisions_on_accounts\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"unit_code\\\" caption=\\\"Đơn vị tính\\\" [width]=\\\"100\\\" alignment=\\\"center\\\">\\r\\n                <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"quantity\\\" caption=\\\"Số lượng\\\" [width]=\\\"100\\\" [editorOptions]=\\\"{ format: formatter.so_luong }\\\" \\r\\n              [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"price\\\" caption=\\\"Đơn giá\\\" [width]=\\\"90\\\" [editorOptions]=\\\"{ format: formatter.don_gia }\\\" \\r\\n              [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"amount\\\" caption=\\\"Thành tiền\\\" [width]=\\\"109\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien }\\\" \\r\\n              [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"vat\\\" caption=\\\"VAT\\\" [width]=\\\"90\\\" alignment=\\\"center\\\">\\r\\n                <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n              </dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"amount_vat\\\" caption=\\\"Tiền VAT\\\" [width]=\\\"120\\\" [editorOptions]=\\\"{ format: formatter.tien_thue }\\\" \\r\\n              [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n\\r\\n              <dxi-column dataField=\\\"amount_after_vat\\\" caption=\\\"Tổng tiền\\\" [width]=\\\"130\\\" \\r\\n              [editorOptions]=\\\"{ format: formatter.tong_tien }\\\" \\r\\n              [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n              <!-- <dxi-validation-rule type=\\\"required\\\" message=\\\"Trường này không được để trống\\\"></dxi-validation-rule> -->\\r\\n              </dxi-column>\\r\\n              <dxi-column dataField=\\\"note\\\" [width]=\\\"100\\\" caption=\\\"Ghi chú\\\" alignment=\\\"left\\\">\\r\\n              </dxi-column>\\r\\n              <dxi-column cellTemplate=\\\"DinhKemFile\\\" caption=\\\"Đính kèm file\\\" [width]=\\\"250\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n              <div *dxTemplate=\\\"let data of 'DinhKemFile'\\\">\\r\\n                <a href=\\\"javascript:void(0)\\\" (click)=\\\"dinhKemFile($event)\\\" *ngIf=\\\"data.data.number_of_vouchers != ''\\\">\\r\\n                  <input type=\\\"file\\\" id=\\\"file-dinh-kem\\\" [attr.data-rowindex]=\\\"data.rowIndex\\\" accept=\\\".xlsx, .docx, .doc, .pdf, .xls, .xml\\\" (change)=\\\"onDinhKemFile($event)\\\" multiple=\\\"false\\\" style=\\\"display: none;\\\"/>\\r\\n                  <!-- <span><i class=\\\"fa fa-file\\\"></i></span> --> \\r\\n                  Chọn file\\r\\n                  <p>{{data.data.file_attach_name}}</p>\\r\\n                </a>\\r\\n              </div>\\r\\n              <!-- <dxo-summary >\\r\\n                <dxi-total-item\\r\\n                    summaryType=\\\"custom\\\" \\r\\n                    [customizeText]=\\\"customizeText\\\"\\r\\n                    showInColumn=\\\"amount\\\">\\r\\n                </dxi-total-item>\\r\\n              </dxo-summary> -->\\r\\n              <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n              <dxo-summary>\\r\\n                <dxi-total-item\\r\\n                    name=\\\"totalAmount\\\"\\r\\n                    column=\\\"amount\\\"\\r\\n                    summaryType=\\\"sum\\\"\\r\\n                    [customizeText]=\\\"customizeText\\\">\\r\\n                </dxi-total-item>\\r\\n                <dxi-total-item\\r\\n                    name=\\\"totalAmountVat\\\"\\r\\n                    column=\\\"amount_vat\\\"\\r\\n                    summaryType=\\\"sum\\\"\\r\\n                    [customizeText]=\\\"customizeText\\\">\\r\\n                </dxi-total-item>\\r\\n                <dxi-total-item\\r\\n                    name=\\\"totalAmountAfterVat\\\"\\r\\n                    column=\\\"amount_after_vat\\\"\\r\\n                    summaryType=\\\"sum\\\"\\r\\n                    [customizeText]=\\\"customizeText\\\">\\r\\n                </dxi-total-item>\\r\\n              </dxo-summary>\\r\\n            </dx-data-grid>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-md-7\\\">\\r\\n              <div class=\\\"note-footer\\\">\\r\\n                  <p style=\\\"margin-left: 0;\\\"><span style=\\\"font-weight: 500; color: red;\\\">Ghi chú</span></p>\\r\\n                  <p>Có thể sửa xóa trực tiếp trên lưới. Click chuột phải để thêm dòng nhập liệu</p>\\r\\n                  <p><span class=\\\"mau-vang\\\"> </span>Màu vàng: Số chứng từ bị trùng với dữ liệu hóa đơn đã xuất</p>\\r\\n                  <p><span class=\\\"mau-do\\\"> </span>Màu đỏ: Thông tin sai định dạng</p>\\r\\n              </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-5\\\">\\r\\n              <div class=\\\"note-footer\\\" style=\\\"text-align: right; margin-right: 50px;\\\">\\r\\n                  <p style=\\\"padding: 8px;\\\"></p>\\r\\n                  <p>Số chứng từ hợp lệ: <span style=\\\"color: seagreen; font-weight: 600\\\">{{totalInvoice}}</span></p>\\r\\n                  <p>Số chứng từ bị sai định dạng thông tin: <span style=\\\"color: red; font-weight: 600\\\">{{totalErrorInvoice}}</span></p>\\r\\n                  <p>Số chứng từ bị trùng: <span style=\\\"color: yellow; font-weight: 600\\\">{{totalDuplicateInvoice}}</span></p>\\r\\n              </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        \\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <div class=\\\"col-md-4\\\">\\r\\n        <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"Xem trước hóa đơn\\\" (click)=\\\"preview()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button *ngIf=\\\"!isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xem.png\\\" text=\\\"Xem hóa đơn\\\" (click)=\\\"xemHoaDon()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button *ngIf=\\\"!isVisibleBtnSubmit\\\" icon=\\\"assets\\\\img\\\\icons\\\\In.png\\\" text=\\\"In chuyển đổi\\\" (click)=\\\"inChuyenDoi()\\\" type=\\\"default\\\"></dx-button>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-8 btn-right\\\">\\r\\n        <dx-button text=\\\"Quay lại\\\" type=\\\"default\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" (click)=\\\"bsModalImportRef.hide()\\\"></dx-button>\\r\\n        <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"Xuất dữ liệu trên lưới ra Excel\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"xuatFile()\\\" type=\\\"default\\\"></dx-button>\\r\\n        <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\" text=\\\"Ghi tạm\\\" icon=\\\"assets\\\\img\\\\icons\\\\GhiTam.png\\\" (click)=\\\"submit('LUU')\\\" type=\\\"default\\\"></dx-button>\\r\\n        <!-- <dx-button *ngIf=\\\"isVisibleBtnSubmit\\\"  text=\\\"Xuất chờ ký\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"submit('CHO_KY')\\\" type=\\\"default\\\" ></dx-button> -->\\r\\n        <dx-button *ngIf=\\\"isVisibleBtnSubmit && isAccessExportInv\\\"  text=\\\"Xuất hóa đơn\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatHD.png\\\" (click)=\\\"submit('XUAT')\\\" type=\\\"default\\\" ></dx-button>\\r\\n      </div>\\r\\n        \\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"Quá trình đang xử lý\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopupImport\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<dx-popup \\r\\n  class=\\\"popup\\\" \\r\\n  [width]=\\\"500\\\" \\r\\n  [height]=\\\"160\\\" \\r\\n  [showTitle]=\\\"true\\\" \\r\\n  title=\\\"Thông báo\\\" \\r\\n  [dragEnabled]=\\\"false\\\" \\r\\n  [closeOnOutsideClick]=\\\"true\\\"\\r\\n  [(visible)]=\\\"popupCachNapDuLieu\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p>Bạn vui lòng chọn cách nạp dữ liệu: </p>\\r\\n    <div class=\\\"text-center\\\" style=\\\"margin-top: 25px\\\">\\r\\n      <dx-button (click)=\\\"thayThe($event)\\\" text=\\\"Thay thế toàn bộ\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"themTiep($event)\\\" text=\\\"Thêm tiếp\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n  \\r\\n</dx-popup>\"","module.exports = \".import-invoices .dx-texteditor{border-radius:0;display:inline-block;margin-right:8px;height:28px;max-height:32px}.import-invoices .select-file .field>div{display:inline-block;vertical-align:middle}.import-invoices .select-file{width:100%;display:inline-block;margin:0}.import-invoices .select-file .field .label{width:90px;margin-right:10px;text-align:right}.import-invoices .select-file .field .value{width:35% !important}.import-invoices .select-file .field.field-first{display:inline-block}.import-invoices .select-file .field.field-first .value{width:calc(100% - 150px) !important}::ng-deep .import-invoices .select-file .field .dx-texteditor{width:100% !important}.support-link{top:-2px;position:relative;padding:5px 25px 7px 25px;background-color:#337ab7;border-color:#2d6da3;color:#fff;text-decoration:none}.support-link.mgr-15{margin-right:15px}.support-link img{margin-right:10px;margin-top:-2px}#auto-input{margin-right:75px}.note-template-import{margin-top:10px;margin-left:52px;display:inline-block;width:39%}.read-file{display:inline-block;margin-left:6px;position:relative;top:-10px}.note-footer{margin-top:10px}.note-footer p{margin-left:20px;margin-bottom:5px}.mau-vang{padding-right:15px;margin-right:10px;background-color:yellow}.mau-do{padding-right:15px;margin-right:10px;background-color:red}::ng-deep #gridImportInvoice{height:400px}::ng-deep .btn-right{padding-right:0}::ng-deep .btn-right .dx-button{float:right}::ng-deep .btn-right .dx-button:last-child{margin-right:8px !important}::ng-deep #gridImportInvoice .dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit{width:40px;min-width:20px !important}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-validator.dx-datagrid-invalid .dx-highlight-outline::after{border:2px solid #d9534f}::ng-deep .dx-datagrid-rowsview .dx-data-row .dx-cell-modified .dx-highlight-outline::after{border-color:#fff}::ng-deep .form-import-invoices .inport-selector .dx-texteditor-input{padding-bottom:15px}\\n\"","import { Component, OnInit, ViewChild, Input } from '@angular/core';\r\n\r\nimport { SocketService, sEnum, AuthService, Library, Helper, VChanggeMoneyService } from '@core/index';\r\n\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as XLSX from 'xlsx';\r\nimport { pattern } from '@config/index';\r\nimport * as moment from 'moment';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-import-invoices',\r\n  templateUrl: './import-invoices.component.html',\r\n  styleUrls: ['./import-invoices.component.scss']\r\n})\r\nexport class ImportInvoicesComponent implements OnInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n\r\n  dataSource: any = [];\r\n  invoice_releases: any;\r\n  fileName = \"\";\r\n  dataExcelFile: any;\r\n  target: DataTransfer;\r\n  isDisReadFile = true;\r\n  select: any = {};\r\n  isAccessExportInv: boolean = false;\r\n  configs: any;\r\n  formatter: any = {};\r\n  frmData = new InvoiceModel(1);\r\n  fieldDisable = [\"number_of_vouchers\", \"customer_code\", \"customer_object_code\", \"buyer_tax_code\", \"customer_name\", \"buyer_name\", \"buyer_address\", \"buyer_mobile\", \"buyer_email\", \"payment_method_name\", \"bank_account_number\", \"bank_name\"];\r\n  invoice_release_id: any;\r\n  template_id: any;\r\n  invoice_date = \"\";\r\n  isAllowEditInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuat = \"XuatVaKy\";\r\n  htXuatOptions = [\r\n    {\r\n      name: \"Xuất và ký\",\r\n      code: \"XuatVaKy\"\r\n    },\r\n    {\r\n      name: \"Xuất chờ ký\",\r\n      code: \"XuatChoKy\"\r\n    }\r\n  ];\r\n\r\n  ioSignature: Subscription;\r\n  tempKiFile = 0;\r\n  coKiSoTapChung = false;\r\n  ttDaXuatHoaDon: boolean = false; //Trạng thái đã xuất hóa đơn hay chưa\r\n  invoicesArr: any;\r\n\r\n  invoice: any;\r\n  totalInvoice = 0;\r\n  totalErrorInvoice = 0;\r\n  totalDuplicateInvoice = 0;\r\n  countInvoice = 1;\r\n\r\n  valueProgress: number = 0;\r\n  showPopupImport = false;\r\n  stopImport = false;\r\n  subXuatHoaDon: any;\r\n  subLuuChoXuat: any;\r\n  errorImport = false;\r\n  hoaDonImportChoXuat: any;\r\n  invoicesHaveNumberOfVouchers: any;\r\n\r\n  taxCodePattern = pattern.tax_code;\r\n  emailPattern = pattern.email;\r\n  phonePattern = pattern.phone;\r\n\r\n  isVisibleBtnSubmit = true;\r\n  approveRequired = false;\r\n  dataFormGird = [];\r\n  disabledInvoiceReleases: boolean = false;\r\n\r\n  invoicesId = [];\r\n\r\n  is_multi_vat: any;\r\n\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n\r\n  popupCachNapDuLieu = false;\r\n  cachNapDuLieu = true;\r\n  configdisplayCurrency: any;\r\n  listColumn: any = [];\r\n  _translate: any;\r\n  constructor(\r\n    public bsModalImportRef: BsModalRef,\r\n    private modalImportService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    //get cấu hình\r\n    this.connectWebsocket();\r\n    this.loadRow(10);\r\n    this.configs.forEach(item => {\r\n      if (item.name == \"decimal_places_json\") {\r\n        this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(item.value));\r\n      }\r\n      if (item.name == \"integrate_parameter\") {\r\n        let config = JSON.parse(item.value);\r\n        this.coKiSoTapChung = config.concentrate_signature.is_concentrate_signature;\r\n      }\r\n      if (item.name == \"display_currency\") {\r\n        this.configdisplayCurrency = item.value;\r\n      }\r\n    });\r\n    let configColumnImport = this.configs.filter(p => p.name == \"config_column_import_inv_excel\")[0];\r\n    if (configColumnImport && configColumnImport.value) {\r\n      this.listColumn = JSON.parse(configColumnImport.value);\r\n    } else {\r\n      this.listColumn = Helper.listColumnImportExcel(this._translate);\r\n    }\r\n    if (this.invoice_releases.length) {\r\n      // this.invoice_release_id = this.invoice_releases[0].value; \r\n      this.template_id = this.invoice_releases[0].template_id;\r\n      this.is_multi_vat = this.invoice_releases[0].is_multi_vat;\r\n    }\r\n\r\n    if (this.hoaDonImportChoXuat) {\r\n      this.invoice_date = this.hoaDonImportChoXuat[0].invoice_date ? moment(this.hoaDonImportChoXuat[0].invoice_date).format('YYYY-MM-DD HH:mm:ss') : \"\";\r\n      this.invoice_release_id = this.hoaDonImportChoXuat[0].invoice_release_id;\r\n      if (this.hoaDonImportChoXuat[0].status == \"GIU_SO\") {\r\n        this.disabledInvoiceReleases = true;\r\n      }\r\n      this.layDuLieuTuHoaDonChoXuat();\r\n    }\r\n    let currentUser = this.authService.getCurrentUser();\r\n\r\n    let listpermissions = currentUser.user.permissions.split(',');\r\n    let _obj = listpermissions.filter(p => p == \"phe_duyet\");\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else\r\n      this.isAccessExportInv = false;\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          // Helper.dowloadFile('test.xml', 'xml', data.Data.Content);\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.xuLiApiKhiXuat();\r\n          } else {\r\n            this.invoice.invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoice.invoice_files.length) {\r\n              this.xuLiApiKhiXuat();\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.errorImport = true;\r\n        this.showPopupImport = false;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  layDuLieuTuHoaDonChoXuat() {\r\n    let data = [];\r\n    let ids = \"\";\r\n    this.hoaDonImportChoXuat.forEach(invoice => {\r\n      // console.log(element)\r\n      for (let i = 0; i < invoice.invoice_products.length; i++) {\r\n        let rowInvoice = new Object;\r\n        invoice.invoice_products = invoice.invoice_products.sort((itemA, itemB) => {\r\n          return itemA.order - itemB.order;\r\n        });\r\n        let product = invoice.invoice_products[i];\r\n        this.invoice_release_id = invoice.invoice_release_id;\r\n        if (i == 0) {\r\n          this.invoicesId.push(invoice.id)\r\n          rowInvoice[\"statusData\"] = \"INVALID\";\r\n          rowInvoice[\"id\"] = invoice.id;\r\n          rowInvoice[\"number_of_vouchers\"] = invoice.number_of_vouchers;\r\n          rowInvoice[\"customer_code\"] = invoice.customer_code;\r\n          rowInvoice[\"customer_object_code\"] = invoice.customer_object_code == \"CA_NHAN\" ? true : false;\r\n          rowInvoice[\"buyer_tax_code\"] = invoice.buyer_tax_code;\r\n          rowInvoice[\"customer_name\"] = invoice.customer_name;\r\n          rowInvoice[\"buyer_name\"] = invoice.buyer_name;\r\n          rowInvoice[\"buyer_address\"] = invoice.buyer_address;\r\n          rowInvoice[\"buyer_mobile\"] = invoice.buyer_mobile;\r\n          rowInvoice[\"buyer_email\"] = invoice.buyer_email;\r\n          rowInvoice[\"payment_method_name\"] = invoice.payment_method_name;\r\n          rowInvoice[\"payment_method_view_name\"] = invoice.payment_method_view_name;\r\n\r\n          rowInvoice[\"bank_account_number\"] = invoice.bank_account_number;\r\n          rowInvoice[\"bank_name\"] = invoice.bank_name;\r\n        } else {\r\n          rowInvoice[\"number_of_vouchers\"] = \"\";\r\n          rowInvoice[\"customer_code\"] = \"\";\r\n          rowInvoice[\"customer_object_code\"] = false;\r\n          rowInvoice[\"buyer_tax_code\"] = \"\";\r\n          rowInvoice[\"customer_name\"] = \"\";\r\n          rowInvoice[\"buyer_name\"] = \"\";\r\n          rowInvoice[\"buyer_address\"] = \"\";\r\n          rowInvoice[\"buyer_mobile\"] = \"\";\r\n          rowInvoice[\"buyer_email\"] = \"\";\r\n          rowInvoice[\"payment_method_name\"] = \"\";\r\n          rowInvoice[\"payment_method_view_name\"] = \"\";\r\n\r\n          rowInvoice[\"bank_account_number\"] = \"\";\r\n          rowInvoice[\"bank_name\"] = \"\";\r\n          rowInvoice[\"dataType\"] = \"HANG_HOA\";\r\n          rowInvoice[\"productNumberOfVouchers\"] = invoice.number_of_vouchers\r\n        }\r\n        rowInvoice[\"product_code\"] = product.product_code;\r\n        rowInvoice[\"product_name\"] = product.product_name;\r\n        // if (invoice[\"product_code\"] != \"\") {\r\n        //   let _obj = this.select.products.filter(p => p.code == invoice[\"product_code\"])[0];\r\n        //   if (!_obj) {\r\n        //     let _objPush = {\r\n        //       code: invoice[\"product_code\"],\r\n        //       name: invoice[\"product_name\"],\r\n        //       mhvth: invoice[\"product_code\"] + \": \" + invoice[\"product_name\"],\r\n        //     }\r\n        //     this.select.products.push(_objPush);\r\n        //   }\r\n\r\n        // }\r\n        rowInvoice[\"provisions_on_accounts\"] = product.provisions_on_accounts;\r\n        rowInvoice[\"unit_code\"] = product.unit_code;\r\n        rowInvoice[\"unit_name\"] = product.unit_name;\r\n        rowInvoice[\"quantity\"] = product.quantity;\r\n        rowInvoice[\"price\"] = product.price;\r\n        rowInvoice[\"amount\"] = product.amount;\r\n        rowInvoice[\"vat\"] = product.vat;\r\n        rowInvoice[\"amount_vat\"] = product.amount_vat;\r\n        rowInvoice[\"amount_after_vat\"] = product.amount_after_vat;\r\n        rowInvoice[\"order\"] = product.order;\r\n        rowInvoice[\"view_order\"] = product.view_order;\r\n        data.push(rowInvoice);\r\n      }\r\n\r\n    });\r\n\r\n    this.dataSource = data;\r\n    this.checkStatusData();\r\n    // if(data.length < 10){\r\n    //   this.loadRow(10-data.length);\r\n    // }\r\n  }\r\n\r\n  loadRow(countRow) {\r\n    let isPepsi = false;\r\n    let tempRow = this.frmData.tempImportRow(countRow,isPepsi);\r\n    tempRow.forEach(element => {\r\n      this.dataSource.push(element);\r\n    });\r\n  }\r\n\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById(\"file-bang-ke\").click();\r\n    this.cachNapDuLieu = false;\r\n  }\r\n\r\n  dinhKemFile(evt) {\r\n    evt.srcElement.firstChild.click();\r\n    // document.getElementById(\"file-dinh-kem\").click();\r\n    // console.log(e)\r\n\r\n  }\r\n\r\n  log(val) { console.log(val); }\r\n\r\n  onDinhKemFile(e) {\r\n    let rowIndex = e.target.dataset.rowindex;\r\n    let fileAttachData: Array<any> = [];\r\n    let fileReader = new FileReader();\r\n    let file = e.target.files[0];\r\n    let pattFile = /(\\.xlsx|\\.docx|\\.doc|\\.pdf|\\.xls|\\.xml)$/i;\r\n    // console.log(file)\r\n    if (pattFile.test(file.name)) {\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = (e) => {\r\n        let base64result = fileReader.result.toString().split(',')[1];\r\n        fileAttachData.unshift({\r\n          type: \"BK\",\r\n          file_name: file.name,\r\n          file_content: base64result,\r\n        });\r\n        if (document.getElementById('list-file')) {\r\n          document.getElementById('list-file').scrollTop = 0;\r\n        }\r\n        this.dataSource[rowIndex][\"file_attach\"] = fileAttachData;\r\n        this.dataSource[rowIndex][\"file_attach_name\"] = file.name;\r\n      }\r\n    } else {\r\n      Library.notify(\"File bạn chọn không đúng định dạng xls, xlsx, doc, docx, pdf, xml\", \"error\");\r\n    }\r\n  }\r\n\r\n  customizeText(e) {\r\n    if (!e.value) {\r\n      e.value = 0;\r\n    }\r\n    let formatter = new Intl.NumberFormat('ja-JP');\r\n    let totalMoney = formatter.format(parseFloat(e.value));\r\n    return totalMoney;\r\n  }\r\n\r\n  onFileChanged(evt) {\r\n    this.target = <DataTransfer>(evt.target);\r\n    this.fileName = this.target.files[0].name;\r\n    // this.fileSize = target.files[0].size/1024;\r\n    if (this.target.files.length !== 1) {\r\n      Library.notify('Không thể chọn nhiều file', 'error');\r\n      throw new Error('Không thể chọn nhiều file');\r\n    };\r\n    this.isDisReadFile = false;\r\n  }\r\n\r\n  addRow() {\r\n    let len, order;\r\n    if (this.dataSource.length >= 1) {\r\n      len = this.dataSource.length;\r\n      order = this.dataSource[len - 1].order + 1;\r\n    } else {\r\n      order = 1;\r\n    }\r\n\r\n    let data = this.frmData.addImportRow(order, order);\r\n    // console.log(data)\r\n    this.dataSource.push(data);\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  getFileTemp() {\r\n    Library.showloading();\r\n    let arrColumn = this.listColumn.filter(p => p.is_visible == true);\r\n    let columnsName = arrColumn.map(e => e.column_code);\r\n    let data = {\r\n      invoice: {\r\n        columns: columnsName\r\n      }\r\n    }\r\n    this.vatService.getFileTemmpImportInvoices(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất file Excel thành công\", 'success');\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    })\r\n  }\r\n\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return 'Hoàn thành: ' + percent + '%';\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình nạp dữ liệu sẽ dừng lại nếu bạn đóng cửa xổ này\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      if (this.subLuuChoXuat) {\r\n        this.subLuuChoXuat.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  getDataFromGird() {\r\n    if (this.dataSource.length > 0) {\r\n      this.dataSource.forEach(row => {\r\n        if (row.number_of_vouchers || row.productNumberOfVouchers) {\r\n          this.dataFormGird.push(row);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  chonDocFile() {\r\n    this.popupCachNapDuLieu = true;\r\n  }\r\n\r\n  thayThe(e) {\r\n    this.cachNapDuLieu = false;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  themTiep(e) {\r\n    this.cachNapDuLieu = true;\r\n    this.popupCachNapDuLieu = false;\r\n    this.readFile();\r\n  }\r\n\r\n  readFile() {\r\n    this.isDisReadFile = true;\r\n    Library.showloading();\r\n    const reader: FileReader = new FileReader();\r\n\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      let data = <any>(XLSX.utils.sheet_to_json(ws, { header: \"A\", range: 5 }));\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        if (data[0].A != \"number_of_vouchers\") {\r\n          Library.notify(\"File mẫu không đúng định dạng\", \"error\");\r\n          return false;\r\n        } else {\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n      }\r\n      let fileBangKe: any = document.getElementById(\"file-bang-ke\");\r\n      fileBangKe.value = \"\";\r\n      this.dataExcelFile = _arrData;\r\n      this.fillData(this.dataExcelFile);\r\n      //  this.countAll = data.length;\r\n      //  this.showPopupImport = true;\r\n    };\r\n    reader.readAsBinaryString(this.target.files[0]);\r\n  }\r\n\r\n  fillData(fileData) {\r\n    this.getDataFromGird();\r\n    let data = [];\r\n    let count = 2;\r\n    let numberOfVouchers = [];\r\n    fileData.forEach(element => {\r\n      let invoice = new Object;\r\n      if (element.number_of_vouchers) {\r\n        invoice[\"statusData\"] = \"INVALID\"\r\n        invoice[\"customer_code\"] = element.customer_code ? element.customer_code : \"\";\r\n        invoice[\"customer_object_code\"] = element.customer_object_code && (element.customer_object_code == \"amount_after_vat\" || element.customer_object_code == \"x\") ? true : false;\r\n        invoice[\"buyer_tax_code\"] = element.buyer_tax_code ? element.buyer_tax_code : \"\";\r\n        invoice[\"customer_name\"] = element.customer_name ? element.customer_name : \"\";\r\n        invoice[\"buyer_name\"] = element.buyer_name ? element.buyer_name : \"\";\r\n        invoice[\"buyer_address\"] = element.buyer_address ? element.buyer_address : \"\";\r\n        invoice[\"buyer_mobile\"] = element.buyer_mobile ? element.buyer_mobile : \"\";\r\n        invoice[\"buyer_email\"] = element.buyer_email ? element.buyer_email : \"\";\r\n        invoice[\"payment_method_name\"] = element.payment_method_name ? this.getPaymentMethodCodeByName(element.payment_method_name) : \"\";\r\n        invoice[\"payment_method_view_name\"] = element.payment_method_name ? element.payment_method_name : \"\";\r\n        invoice[\"bank_account_number\"] = element.bank_account_number ? element.bank_account_number : \"\";\r\n        invoice[\"bank_name\"] = element.bank_name ? element.bank_name : \"\";\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        if (invoice[\"product_code\"] != \"\") {\r\n          let _obj = this.select.products.filter(p => p.code == invoice[\"product_code\"])[0];\r\n          if (!_obj) {\r\n            let _objPush = {\r\n              code: invoice[\"product_code\"],\r\n              name: invoice[\"product_name\"],\r\n              mhvth: invoice[\"product_code\"] + \": \" + invoice[\"product_name\"],\r\n            }\r\n            this.select.products.push(_objPush);\r\n          }\r\n\r\n        }\r\n        invoice[\"provisions_on_accounts\"] = element.provisions_on_accounts ? this.checkProvisionsOnAccounts(element.provisions_on_accounts) : \"\";\r\n        invoice[\"provisions_on_accounts_name\"] = element.provisions_on_accounts ? element.provisions_on_accounts : \"\";\r\n\r\n        invoice[\"unit_code\"] = element.unit_code ? this.getUnitCodeByUnitName(element.unit_code) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_code ? element.unit_code : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        invoice[\"amount\"] = element.amount && element.amount.trim() != \"-\" ? Helper.toNumber(element.amount) : null;\r\n        invoice[\"vat\"] = element.vat ? this.checkVat(element.vat) : \"\";\r\n        invoice[\"vat_name\"] = element.vat ? element.vat : \"\";\r\n        invoice[\"amount_vat\"] = element.amount_vat && element.amount_vat.trim() != \"-\" ? Helper.toNumber(element.amount_vat) : null;\r\n        invoice[\"amount_after_vat\"] = element.amount_after_vat && element.amount_after_vat.trim() != \"-\" ? Helper.toNumber(element.amount_after_vat) : null;\r\n        invoice[\"note\"] = element.note ? element.note : \"\";\r\n\r\n        if (this.checkNumberOfVouchers(element.number_of_vouchers, data) != -1) {\r\n          invoice[\"dataType\"] = \"HANG_HOA\";\r\n          invoice[\"number_of_vouchers\"] = \"\";\r\n          invoice[\"productNumberOfVouchers\"] = element.number_of_vouchers;\r\n          invoice[\"order\"] = count;\r\n          invoice[\"view_order\"] = count;\r\n          count++;\r\n        } else {\r\n          invoice[\"number_of_vouchers_backup\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          invoice[\"number_of_vouchers\"] = element.number_of_vouchers ? element.number_of_vouchers : \"\";\r\n          numberOfVouchers.push(invoice[\"number_of_vouchers\"]);\r\n          invoice[\"order\"] = 1;\r\n          invoice[\"view_order\"] = 1;\r\n          count = 2;\r\n        }\r\n        data.push(invoice);\r\n      }\r\n    });\r\n    this.vatService.getInvoicesHaveNumberOfVouchers(numberOfVouchers).subscribe((res: any) => {\r\n      if (res.status == \"success\") {\r\n        this.invoicesHaveNumberOfVouchers = res.data.invoices;\r\n        this.checkDuplicateNumberOfVouchers(data);\r\n        this.checkStatusData();\r\n        // if(data.length < 10){\r\n        //   this.loadRow(10-data.length);\r\n        // }\r\n        this.dataGrid.instance.refresh();\r\n      }\r\n      Library.hideloading();\r\n    });\r\n\r\n  }\r\n  checkVat(vat) {\r\n    if (vat == \"Không chịu thuế\" || vat == \"không chịu thuế\") {\r\n      return -1;\r\n    } else {\r\n      return parseInt(vat);\r\n    }\r\n  }\r\n  checkDuplicateNumberOfVouchers(data) {\r\n    if (this.cachNapDuLieu) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        let foundOnGird = this.dataFormGird.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n        if (foundOnGird.length > 0 && data[i].number_of_vouchers && data[i].statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n          data[i].statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n        }\r\n      }\r\n      this.dataSource = this.dataFormGird.concat(data);\r\n    } else {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const row = data[i];\r\n        let foundOnDatabase = this.invoicesHaveNumberOfVouchers.filter((item) => {\r\n          return item.number_of_vouchers == row.number_of_vouchers;\r\n        });\r\n        if (foundOnDatabase.length > 0) {\r\n          data[i].statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n        }\r\n      }\r\n      this.dataSource = data;\r\n    }\r\n    this.dataFormGird = [];\r\n  }\r\n\r\n  checkNumberOfVouchers(numberOfVouchers, invoiceSArr) {\r\n    const foundNumberOfVouchers = invoiceSArr.findIndex((item) => {\r\n      return item.number_of_vouchers == numberOfVouchers;\r\n    });\r\n    return foundNumberOfVouchers;\r\n  }\r\n\r\n  checkStatusData() {\r\n    let invalid = this.dataSource.filter((item) => {\r\n      return item.number_of_vouchers && item.statusData == \"INVALID\";\r\n    });\r\n    let errorDuplicateDatabase = this.dataSource.filter((item) => {\r\n      return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_DATABASE\";\r\n    });\r\n    let errorDuplicateOngird = this.dataSource.filter((item) => {\r\n      return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_ONGIRD\";\r\n    });\r\n\r\n    let errorData = this.dataSource.filter((item) => {\r\n      return item.statusData == \"DATA_ERROR\";\r\n    });\r\n    this.totalInvoice = invalid.length;\r\n    this.totalDuplicateInvoice = errorDuplicateDatabase.length;\r\n    this.totalErrorInvoice = errorDuplicateOngird.length + errorData.length;\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number == 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row.rowType === \"data\") {\r\n      e.items = [{\r\n        text: \"Thêm khách hàng\",\r\n        onItemClick: () => {\r\n          this.addRow();\r\n        }\r\n      },\r\n      {\r\n        text: \"Thêm hàng hóa\",\r\n        onItemClick: () => {\r\n          if (e.row.data.number_of_vouchers || e.row.data.productNumberOfVouchers) {\r\n            let temp = e.row.data.number_of_vouchers ? e.row.data.number_of_vouchers : e.row.data.productNumberOfVouchers;\r\n            let products = this.dataSource.filter((item) => {\r\n              return item.number_of_vouchers == temp || item.productNumberOfVouchers == temp;\r\n            });\r\n            let data = this.frmData.addImportRow(products.length + 1, products.length + 1);\r\n            data.dataType = \"HANG_HOA\";\r\n            if (e.row.data.number_of_vouchers) {\r\n              data[\"productNumberOfVouchers\"] = e.row.data.number_of_vouchers;\r\n              this.dataSource.splice(e.rowIndex + products.length, 0, data);\r\n            } else {\r\n              data[\"productNumberOfVouchers\"] = e.row.data.productNumberOfVouchers;\r\n              let index = this.dataSource.map(function (e) { return e.number_of_vouchers; }).indexOf(e.row.data.number_of_vouchers);\r\n              this.dataSource.splice(index + products.length - 1, 0, data);\r\n            }\r\n\r\n            this.dataGrid.instance.refresh();\r\n          } else {\r\n            Library.notify(\"Bạn chưa nhập số phiếu / chứng từ\", \"error\");\r\n          }\r\n        }\r\n      }];\r\n    }\r\n  }\r\n  onInvoiceReleases(e) {\r\n    let selectedItem = e.component.option(\"selectedItem\");\r\n    this.template_id = selectedItem.template_id;\r\n    this.invoice_release_id = e.value;\r\n    this.is_multi_vat = selectedItem.is_multi_vat;\r\n\r\n  }\r\n  onContentReady(e) {\r\n    e.component.columnOption(\"command:edit\", {\r\n      visibleIndex: -1\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.row.data) {\r\n      if (e.row.data.dataType && e.row.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.dataField)) {\r\n        e.editorOptions.disabled = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.data.dataType && e.data.dataType == \"HANG_HOA\" && this.fieldDisable.includes(e.column.dataField)) {\r\n        e.cellElement.style.background = \"#F1F1F1\";\r\n      }\r\n\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_ONGIRD\" && e.column.dataField == \"number_of_vouchers\") {\r\n        e.cellElement.style.background = \"#FF0000\";\r\n      }\r\n\r\n      if (e.data.number_of_vouchers) {\r\n        switch (e.column.dataField) {\r\n          case \"buyer_address\":\r\n            this.setStatusDataOnCellPrepared(e, \"Địa chỉ không được để trống\");\r\n            break;\r\n          case \"payment_method_name\":\r\n            this.setStatusDataOnCellPrepared(e, \"Hình thức thanh toán không được để trống\");\r\n            break;\r\n          case \"product_name\":\r\n            this.setStatusDataOnCellPrepared(e, \"Tên hàng hóa không được để trống\");\r\n            break;\r\n          case \"amount\":\r\n            this.setStatusDataOnCellPrepared(e, \"Thành tiền không được để trống\");\r\n            break;\r\n          case \"amount_after_vat\":\r\n            this.setStatusDataOnCellPrepared(e, \"Tổng tiền không được để trống\");\r\n            break;\r\n          case \"customer_name\":\r\n            if (e.data.customer_object_code == false) this.setStatusDataOnCellPrepared(e, \"Tên đơn vị tổ chức không được để trống\");\r\n            break;\r\n          case \"buyer_name\":\r\n            if (e.data.customer_object_code == true) this.setStatusDataOnCellPrepared(e, \"Tên khách hàng không được để trống\");\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      } else if (e.data.number_of_vouchers == \"\" && e.data.dataType == \"KHACH_HANG\" && e.data.product_name && e.column.dataField == \"number_of_vouchers\") {\r\n        this.setStatusDataOnCellPrepared(e, \"Số phiếu, chứng từ không được để trống\");\r\n      }\r\n    }\r\n  }\r\n\r\n  setStatusDataOnCellPrepared(e, message) {\r\n    if (!e.value) {\r\n      e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n      e.cellElement.title = message;\r\n      if (e.data.statusData != \"ERROR_DUPLICATE_DATABASE\" && e.data.statusData != \"ERROR_DUPLICATE_ONGIRD\") e.data.statusData = \"DATA_ERROR\";\r\n    }\r\n    else if (e.value && e.data.statusData == \"DATA_ERROR\") {\r\n      e.data.statusData = \"INVALID\"\r\n    }\r\n  }\r\n  onRowRemoving(e) {\r\n    const number_of_vouchers = e.data.number_of_vouchers\r\n    let indexRemove = [];\r\n    this.dataSource.forEach(row => {\r\n      if (row.productNumberOfVouchers == number_of_vouchers) {\r\n        indexRemove.push(this.dataSource.indexOf(row));\r\n        // if(row.statusData){\r\n        //   if(row.statusData == \"ERROR_DUPLICATE_DATABASE\") this.totalDuplicateInvoice--;\r\n        //   if(row.statusData == \"ERROR_DUPLICATE_ONGIRD\") this.totalErrorInvoice--;\r\n        // }\r\n      }\r\n    });\r\n    for (let i = indexRemove.length - 1; i >= 0; i--) {\r\n      this.dataSource.splice(indexRemove[i], 1);\r\n    }\r\n    this.checkStatusData();\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code == \"Delete\") {\r\n      // console.log(e.event.srcElement);\r\n      e.event.srcElement.value = null;\r\n      // e.event.srcElement.parentNode.parentNode.querySelector('input').value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.data) {\r\n      if (e.data.statusData == \"ERROR_DUPLICATE_DATABASE\" && e.data.number_of_vouchers) {\r\n        e.rowElement.style.background = \"#FFFF00\";\r\n      } else {\r\n        e.rowElement.style.background = \"\";\r\n      }\r\n    }\r\n    this.checkStatusData();\r\n  }\r\n\r\n  onRowUpdated(e) {\r\n    let column = Object.keys(e.data)[0];\r\n    switch (column) {\r\n      case \"number_of_vouchers\":\r\n        this.onNumberOfVouchers(e);\r\n        break;\r\n      case \"product_code\":\r\n        this.productCodeChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"quantity\":\r\n        this.priceChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"price\":\r\n        this.priceChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"vat\":\r\n        this.vatChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"amount\":\r\n        this.amountChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"amount_vat\":\r\n        this.priceChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      case \"amount_after_vat\":\r\n        this.priceChange(e);\r\n        this.dataGrid.instance.refresh();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.checkStatusData();\r\n    // this.dataGrid.instance.saveEditData();\r\n  }\r\n\r\n\r\n\r\n  onNumberOfVouchers(e) {\r\n    let numberOfVouchers = e.data.number_of_vouchers;\r\n    if (e.key.number_of_vouchers_backup) {\r\n      for (let i = 0; i < this.dataSource.length; i++) {\r\n        const row = this.dataSource[i];\r\n        if (row.productNumberOfVouchers && row.productNumberOfVouchers == e.key.number_of_vouchers_backup) {\r\n          this.dataSource[i].productNumberOfVouchers = numberOfVouchers;\r\n        }\r\n      }\r\n      e.key.number_of_vouchers_backup = numberOfVouchers;\r\n    }\r\n\r\n    if (numberOfVouchers != \"\") {\r\n      this.vatService.getInvoicesHaveNumberOfVouchers([numberOfVouchers]).subscribe((res: any) => {\r\n        let dupInvoices = res.data.invoices;\r\n        if (dupInvoices.length > 0) {\r\n          e.key.statusData = \"ERROR_DUPLICATE_DATABASE\";\r\n          // this.totalDuplicateInvoice++;\r\n          // if (this.totalInvoice > 0) this.totalInvoice--\r\n        } else {\r\n          if (e.key.statusData = \"ERROR_DUPLICATE_DATABASE\") {\r\n            e.key.statusData = \"INVALID\";\r\n            // if (this.totalDuplicateInvoice > 0) this.totalDuplicateInvoice--;\r\n          }\r\n          // this.totalInvoice++;\r\n        }\r\n\r\n        let foundOnGird = this.dataSource.filter((item) => {\r\n          return item.number_of_vouchers == numberOfVouchers;\r\n        });\r\n        if (foundOnGird.length > 1 && e.key.statusData != \"ERROR_DUPLICATE_DATABASE\") {\r\n          e.key.statusData = \"ERROR_DUPLICATE_ONGIRD\";\r\n        }\r\n        this.dataGrid.instance.refresh();\r\n      });\r\n    }\r\n  }\r\n\r\n  //Thay đổi cột mã hàng\r\n  productCodeChange(e) {\r\n    this.select.products.some(item => {\r\n      if (item.code == e.data.product_code) {\r\n        e.key.product_name = item.name;\r\n        e.key.unit_code = this.checkUnitCode(item.unit_code);\r\n        e.key.quantity = null;\r\n        e.key.price = item.price ? parseFloat(item.price) : item.price;\r\n        e.key.amount = item.price ? parseFloat(item.price) : 0;\r\n        e.key.vat = item.vat ? parseFloat(item.vat) : null;\r\n        e.key.amount_vat = (e.key.vat >= 0) ? this.caculatorAmountVat(e.key.amount, e.key.vat) : null;\r\n        e.key.amount_after_vat = e.key.amount + e.key.amount_vat;\r\n      }\r\n    });\r\n  }\r\n\r\n  priceChange(e) {\r\n    let quantity = e.key.quantity || 1;\r\n    let price = e.key.price || 0;\r\n    if (price != null) {\r\n      e.key.amount = e.key.price * quantity;\r\n      e.key.amount_vat = (e.key.vat >= 0) ? this.caculatorAmountVat(e.key.amount, e.key.vat) : null;\r\n      e.key.amount_after_vat = e.key.amount + e.key.amount_vat;\r\n    }\r\n  }\r\n\r\n  vatChange(e) {\r\n    e.key.amount_vat = (e.key.vat >= 0) ? this.caculatorAmountVat(e.key.amount, e.key.vat) : null;\r\n    e.key.amount_after_vat = e.key.amount + e.key.amount_vat;\r\n  }\r\n\r\n  amountChange(e) {\r\n    if (!e.key.quantity && !e.key.price) {\r\n      e.key.amount_after_vat = e.key.amount;\r\n    } else {\r\n      let quantity = e.key.quantity || 1;\r\n      let price = e.key.price || 0;\r\n      if (price != null) {\r\n        e.key.amount = e.key.price * quantity;\r\n        e.key.amount_vat = (e.key.vat >= 0) ? this.caculatorAmountVat(e.key.amount, e.key.vat) : null;\r\n        e.key.amount_after_vat = e.key.amount + e.key.amount_vat;\r\n      }\r\n    }\r\n  }\r\n\r\n  checkValidNumberOfVouchers() {\r\n    this.dataSource.forEach(row => {\r\n      if (row.number_of_vouchers == \"\") {\r\n        Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n      } else {\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    let items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code == unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  checkProvisionsOnAccounts(name) {\r\n    let found = this.select.select_provisions_on_accounts.find(function (element) {\r\n      return element.name === name;;\r\n    });\r\n    let code = \"\";\r\n\r\n    if (found) {\r\n      code = found.code;\r\n    } else {\r\n      Library.notify(\"Định khoản chưa có trong danh mục\", \"error\");\r\n    }\r\n\r\n    return code;\r\n  }\r\n  getFormatterToNumber(formatter) {\r\n    let s1 = formatter.replace(\"0,###\", \"\");\r\n    if (s1 == \"\") {\r\n      return 0;\r\n    } else {\r\n      let s2 = s1.replace(\".\", \"\");\r\n      return s2.split(\"\").length;\r\n    }\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    let temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      let p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    let items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].name == unitName) {\r\n        return items[i].code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getPaymentMethodCodeByName(payment_method_name) {\r\n    let items = this.select.payment_method_names;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].name == payment_method_name) {\r\n        return items[i].code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    let status;\r\n    if (!this.invoice.id && !this.invoice.invoice_number) status = 'THEM_MOI';\r\n    if (this.invoice.id && !this.invoice.invoice_number) status = 'GHI_TAM';\r\n    if (this.invoice.id && this.invoice.invoice_number) status = 'GIU_SO';\r\n    if (status == 'THEM_MOI') {\r\n      let sub = this.vatService.ghiTam(this.invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.invoice_number = rs.data.invoice_number;\r\n          this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.invoice.id = rs.data.id;\r\n          this.invoicesId.push(rs.data.id);\r\n          //demo kí số vào file\r\n          if (this.coKiSoTapChung) {\r\n            this.goiApiXuatHoaDon(Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          } else {\r\n            this.socketService.kiSo(() => this.connectWebsocket(), Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status == 'GHI_TAM') {\r\n      let sub = this.vatService.edit(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n          //demo kí số vào file\r\n          if (this.coKiSoTapChung) {\r\n            this.goiApiXuatHoaDon(Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          } else {\r\n            this.socketService.kiSo(() => this.connectWebsocket(), Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    } else if (status == 'GIU_SO') {\r\n      let sub = this.vatService.edit(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n          //demo kí số vào file\r\n          if (this.coKiSoTapChung) {\r\n            this.goiApiXuatHoaDon(Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          } else {\r\n            this.socketService.kiSo(() => this.connectWebsocket(), Base64.encode(Helper.createXMLInvoiceFile(this.invoice, this.invoice_releases, rs.data.invoice_date)));\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.subXuatHoaDon = this.vatService.xuatHoaDon({\r\n      id: this.invoice.id,\r\n      xml_string: xml_string\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        // this.formInvoice.readonlyAllForm();\r\n        this.ttDaXuatHoaDon = true;\r\n        this.valueProgress += percentComplete;\r\n        if (this.countInvoice < this.totalInvoice) {\r\n          this.countInvoice++;\r\n          this.xuatHoaDon();\r\n        } else if (this.countInvoice == this.totalInvoice) {\r\n          Library.notify('Xuất hóa đơn thành công', 'success');\r\n          this.isVisibleBtnSubmit = false;\r\n          this.showPopupImport = false;\r\n        }\r\n      } else {\r\n        this.showPopupImport = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  xuatHoaDon() {\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n\r\n    if (this.coKiSoTapChung) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      if (this.invoice && this.invoice.invoice_files.length) {\r\n        this.invoice.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.invoice_date);\r\n        });\r\n      } else {\r\n        this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXA+PC90ZW1wPg==', 'ten_filek_the_trung-dc-nhi.xml', '//temp');\r\n      }\r\n    }\r\n    this.tempKiFile = 0;\r\n  }\r\n\r\n  xuatChoKy() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    this.subLuuChoXuat = this.vatService.xuatChoKy(this.invoice).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.invoice.id = rs.data.id;\r\n        this.valueProgress += percentComplete;\r\n        if (this.countInvoice < this.totalInvoice) {\r\n          this.countInvoice++;\r\n          this.xuatChoKy();\r\n        } else if (this.countInvoice == this.totalInvoice) {\r\n          Library.notify('Xuât chờ ký hóa đơn thành công', 'success');\r\n          this.showPopupImport = false;\r\n          this.bsModalImportRef.hide();\r\n        }\r\n      } else {\r\n        this.showPopupImport = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  luuChoXuat() {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.invoice.id) {\r\n      this.subLuuChoXuat = this.vatService.edit(this.invoice.id, this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.luuChoXuat();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify('Cập nhật hóa đơn lưu chờ xuất hóa đơn thành công', 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    } else {\r\n      this.subLuuChoXuat = this.vatService.ghiTam(this.invoice).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          this.invoice.id = rs.data.id;\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.luuChoXuat();\r\n          } else if (this.countInvoice == this.totalInvoice) {\r\n            Library.notify('Lưu chờ xuất hóa đơn thành công', 'success');\r\n            this.showPopupImport = false;\r\n            this.bsModalImportRef.hide();\r\n          }\r\n        } else {\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  xuatFile() {\r\n    let invoices = [];\r\n    this.dataSource.forEach(element => {\r\n      if (element.number_of_vouchers) {\r\n        let invoice = {};\r\n        invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n        invoice[\"customer_code\"] = element.customer_code; //mã đơn vị (mã khách hàng)\r\n        invoice[\"customer_object_code\"] = element.customer_object_code ? \"CA_NHAN\" : \"DOANH_NGHIEP\"; //Mã loại hóa đơn\r\n        invoice[\"buyer_tax_code\"] = element.buyer_tax_code; //Mã số thuế\r\n        invoice[\"customer_name\"] = element.customer_name; //Tên đơn vị (Tên khách hàng)\r\n        invoice[\"buyer_name\"] = element.buyer_name; //Tên người mua\r\n        invoice[\"buyer_mobile\"] = element.buyer_mobile; //Điện thoại liên hệ\r\n        invoice[\"buyer_email\"] = element.buyer_email; //Email\r\n        invoice[\"buyer_address\"] = element.buyer_address; //Địa chỉ\r\n        invoice[\"payment_method_name\"] = element.payment_method_view_name; //Hình thức thanh toán\r\n        invoice[\"bank_account_number\"] = element.bank_account_number; //Số tài khoản\r\n        invoice[\"bank_name\"] = element.bank_name; //thuộc ngân hàng\r\n        let product = {\r\n          product_name: element.product_name,\r\n          provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n          unit_name: element.unit_name,\r\n          quantity: element.quantity,\r\n          price: element.price,\r\n          amount: element.amount,\r\n          vat_name: element.vat_name,\r\n          amount_vat: element.amount_vat,\r\n          amount_after_vat: element.amount_after_vat,\r\n          discount: \"\",\r\n          amount_discount: null\r\n        }\r\n        invoice[\"invoice_products\"] = [];\r\n        invoice[\"invoice_products\"].push(product);\r\n        invoices.push(invoice);\r\n      }\r\n\r\n      if (element.productNumberOfVouchers) {\r\n        // console.log(element)\r\n        let invoiceProduct = {\r\n          product_name: element.product_name,\r\n          provisions_on_accounts_name: element.provisions_on_accounts_name,\r\n          unit_name: element.unit_name,\r\n          quantity: element.quantity,\r\n          price: element.price,\r\n          amount: element.amount,\r\n          vat_name: element.vat,\r\n          amount_vat: element.amount_vat,\r\n          amount_after_vat: element.amount_after_vat,\r\n          discount: \"\",\r\n          amount_discount: null\r\n        }\r\n        for (let i = 0; i < invoices.length; i++) {\r\n          if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n            invoices[i].invoice_products.push(invoiceProduct);\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    let data = {\r\n      \"invoices\": invoices\r\n    }\r\n    Library.showloading();\r\n    this.vatService.exportToExcel(data).subscribe((res: any) => {\r\n      if (res.status == 'success') {\r\n        let file = res.data.product;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        Library.notify(\"Xuất dữ liệu ra excel thành công\", \"success\");\r\n      } else {\r\n        Library.notify(res.message, 'error');\r\n      }\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  convertGirdToInvoices(type) {\r\n    let invoices = [];\r\n    let invalid = true;\r\n    this.dataSource.forEach((element, index) => {\r\n      if (element.number_of_vouchers == \"\" && element.dataType == \"KHACH_HANG\" && element.product_name && type == \"submit\") {\r\n        Library.notify(\"Số phiếu, chứng từ không được để trống\", \"error\");\r\n        invalid = false;\r\n        return;\r\n      }\r\n      if (element.number_of_vouchers) {\r\n        if (type == \"submit\") {\r\n          if (element.customer_name == \"\" && element.customer_object_code == false) { Library.notify(\"Tên đơn vị, tổ chức không được để trống\", \"error\"); invalid = false; return false; }\r\n          if (element.buyer_name == \"\" && element.customer_object_code == true) { Library.notify(\"Tên khách hàng không được để trống\", \"error\"); invalid = false; return false; }\r\n          if (element.buyer_address == \"\") { Library.notify(\"Địa chỉ không được để trống\", \"error\"); invalid = false; return false; }\r\n          if (element.payment_method_name == \"\") { Library.notify(\"Hình thức thanh toán không được để trống\", \"error\"); invalid = false; return false; }\r\n          if (element.product_name == \"\") { Library.notify(\"Tên hàng hóa không được để trống\", \"error\"); invalid = false; return false; }\r\n          if (element.amount_after_vat == \"\") { Library.notify(\"Tổng tiền không được để trống\", \"error\"); invalid = false; return false; }\r\n        }\r\n        let invoice = new InvoiceModel(1);\r\n        if (element.id) {\r\n          invoice.id = element.id;\r\n        }\r\n        invoice.invoice_release_id = this.invoice_release_id;\r\n        invoice.template_id = this.template_id;\r\n        invoice[\"number_of_vouchers\"] = element.number_of_vouchers; // số phiếu chứng từ\r\n        invoice.customer_object_code = element.customer_object_code ? \"CA_NHAN\" : \"DOANH_NGHIEP\"; //Mã loại hóa đơn\r\n        invoice.buyer_tax_code = element.buyer_tax_code; //Mã số thuế\r\n        invoice.buyer_name = element.buyer_name; //Tên người mua\r\n        invoice.customer_name = element.customer_name //Tên đơn vị (Tên khách hàng)\r\n        invoice.customer_code = element.customer_code; //mã đơn vị (mã khách hàng)\r\n        invoice.buyer_address = element.buyer_address; //Địa chỉ\r\n        invoice.buyer_mobile = element.buyer_mobile; //Điện thoại liên hệ\r\n        invoice.buyer_email = element.buyer_email; //Email\r\n        invoice.payment_method_name = element.payment_method_name; //Hình thức thanh toán\r\n        invoice.payment_method_view_name = element.payment_method_view_name; //Hình thức thanh toán\r\n        invoice.bank_account_number = element.bank_account_number; //Số tài khoản\r\n        invoice.bank_name = element.bank_name; //thuộc ngân hàng\r\n        invoice.invoice_products[0].product_code = element.product_code;\r\n        invoice.invoice_products[0].product_name = element.product_name;\r\n        invoice.invoice_products[0].unit_code = element.unit_code;\r\n        invoice.invoice_products[0].unit_name = element.unit_name;\r\n        invoice.invoice_products[0].quantity = element.quantity;\r\n        invoice.invoice_products[0].price = element.price;\r\n        invoice.invoice_products[0].amount = element.amount;\r\n        invoice.invoice_products[0].vat = element.vat;\r\n        invoice.invoice_products[0].amount_vat = element.amount_vat;\r\n        invoice.invoice_products[0].amount_after_vat = element.amount_after_vat;\r\n        invoice.invoice_products[0].order = element.order;\r\n        invoice.invoice_products[0].view_order = element.view_order;\r\n        invoice.invoice_products[0].provisions_on_accounts = element.provisions_on_accounts;\r\n        invoice.invoice_products[0][\"row_content\"] = element.product_name\r\n\r\n        invoice.currency_code = 'VND';\r\n        invoice.display_currency = this.configdisplayCurrency;\r\n        let decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n        invoice.decimal_places_json = decimal_places_json;\r\n        if (element.file_attach) {\r\n          invoice.invoice_files = element.file_attach;\r\n        } else {\r\n          invoice.invoice_files = [];\r\n        }\r\n        invoices.push(invoice);\r\n      }\r\n\r\n      if (element.productNumberOfVouchers) {\r\n        // console.log(element)\r\n        let invoiceProduct = {\r\n          product_code: element.product_code,\r\n          product_name: element.product_name,\r\n          provisions_on_accounts: element.provisions_on_accounts,\r\n          unit_code: element.unit_code,\r\n          unit_name: element.unit_name,\r\n          quantity: element.quantity,\r\n          price: element.price,\r\n          vat: element.vat,\r\n          discount: element.discount,\r\n          order: element.order,\r\n          amount: element.amount,\r\n          amount_vat: element.amount_vat,\r\n          amount_after_vat: element.amount_after_vat,\r\n          view_order: element.view_order,\r\n          row_content: element.product_name\r\n        }\r\n        for (let i = 0; i < invoices.length; i++) {\r\n          if (invoices[i].number_of_vouchers == element.productNumberOfVouchers) {\r\n            invoices[i].invoice_products.push(invoiceProduct);\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    let decimal_amount_after_vat = this.getFormatterToNumber(this.formatter.tong_tien);\r\n    let decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n    let decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n\r\n    for (let i = 0; i < invoices.length; i++) {\r\n      let\r\n        amount = null, total_amount_vat = null, amount_after_vat = null, total_amount_product_vat0 = null, amount_vat5 = null, amount_vat10 = null,\r\n        total_amount_product_vat5 = null, total_amount_product_vat10 = null, total_amount_product_vatx = null;\r\n\r\n      invoices[i].invoice_products.forEach((product, index) => {\r\n        if (product.amount !== null) amount += product.amount;\r\n        if (product.amount_vat !== null) total_amount_vat += product.amount_vat;\r\n        if (product.amount_after_vat !== null) amount_after_vat += product.amount_after_vat;\r\n        if (product.vat == 5) amount_vat5 += product.amount_vat;\r\n        if (product.vat == 10) amount_vat10 += product.amount_vat;\r\n        if (product.vat == -1) total_amount_product_vatx += product.amount;\r\n        if (product.vat == 0) total_amount_product_vat0 += product.amount;\r\n        if (product.vat == 5) total_amount_product_vat5 += product.amount;\r\n        if (product.vat == 10) total_amount_product_vat10 += product.amount;\r\n\r\n        if (!this.is_multi_vat && index > 0 && invoices[i].invoice_products[index].vat != invoices[i].invoice_products[index - 1].vat) {\r\n          // console.log(invoices[i].invoice_products[index].vat + \"---\" + invoices[i].invoice_products[index-1].vat)\r\n          Library.notify('Mẫu hóa đơn đăng ký 1 loại thuế suất. Vui lòng kiểm tra lại thuế suất của hàng hóa', 'error');\r\n          invalid = false;\r\n          return;\r\n        }\r\n\r\n      });\r\n\r\n      invoices[i].invoice_date = this.invoice_date;\r\n\r\n      invoices[i].amount = this.roundNumber(amount, decimal_amount);\r\n      invoices[i].total_amount_vat = this.roundNumber(total_amount_vat, decimal_amount_vat);\r\n      invoices[i].amount_after_vat = this.roundNumber(amount_after_vat, decimal_amount_after_vat);\r\n      invoices[i].amount_vat5 = this.roundNumber(amount_vat5, decimal_amount_vat);\r\n      invoices[i].amount_vat10 = this.roundNumber(amount_vat10, decimal_amount_vat);\r\n      invoices[i].total_amount_product_vatx = this.roundNumber(total_amount_product_vatx, decimal_amount);\r\n      invoices[i].total_amount_product_vat0 = this.roundNumber(total_amount_product_vat0, decimal_amount);\r\n      invoices[i].total_amount_product_vat5 = this.roundNumber(total_amount_product_vat5, decimal_amount);\r\n      invoices[i].total_amount_product_vat10 = this.roundNumber(total_amount_product_vat10, decimal_amount);\r\n      invoices[i].total_payment = this.roundNumber(invoices[i].amount_after_vat, decimal_amount_after_vat);\r\n      invoices[i].total_payment_in_word = Helper.tienBangChu(invoices[i].total_payment, decimal_amount_after_vat, invoices[i].currency_code, this.configs.system_parameter.display_read_money_english);\r\n      if (invoices[i].total_payment > 20000000 && (invoices[i].payment_method_name == 'TM') && type == \"submit\") {\r\n        Library.notify('Vui lòng chọn HTTT chuyển khoản cho hóa đơn có giá trị lớn hơn 20 triệu đồng', 'error');\r\n        console.log(invoices);\r\n        let countRowBefore = 0;\r\n        for (let j = 0; j < i; j++) {\r\n          countRowBefore += invoices[j].invoice_products.length;\r\n        }\r\n        this.dataGrid.instance.focus(this.dataGrid.instance.getCellElement(countRowBefore, 'payment_method_name'));\r\n        invalid = false;\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.totalInvoice = invoices.length;\r\n    this.invoicesArr = invoices;\r\n    return invalid;\r\n  }\r\n\r\n  preview() {\r\n    let dataPreview = {\r\n      \"template\": { \"id\": this.template_id },\r\n      \"invoices\": this.getDataPreview()\r\n    }\r\n\r\n    Library.showloading();\r\n    let win = window.open(\"\", \"\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = \"Đang tải dữ liệu!\";\r\n    win.blur();\r\n    let sub = this.vatService.previewInvoiceImport(dataPreview).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        // const initialState = {\r\n        //   pdf_file: pdf_file\r\n        // };\r\n        // this.modalService.show(PreviewInvoiceComponent, {class: 'modal-lg full-modal', initialState});\r\n        win.document.write(`\r\n        <a id=\"idA\" title=\"Download File\" style=\"font-family: \\'Verdana\\';color: #333;font-weight: 600;float:right; margin-bottom: 5px;\r\n          margin-right: 20px;\" download=\"hoadon.pdf\" href=\"data:application/pdf;base64,${pdf_file}\">Tải File</a>\r\n        <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n        \r\n      `);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  previewBeforeSubmit() {\r\n\r\n    let dataPreview = {\r\n      \"template\": { \"id\": this.template_id },\r\n      \"invoices\": this.getDataPreview()\r\n    }\r\n    Library.showloading();\r\n    this.windowPreviewBeforeSubmit = window.open(\"\", \"\", `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n    this.windowPreviewBeforeSubmit.document.body.innerHTML = \"Đang tải dữ liệu!\";\r\n    this.windowPreviewBeforeSubmit.blur();\r\n\r\n    let timer = setInterval(() => {\r\n      if (this.windowPreviewBeforeSubmit.closed) {\r\n        clearInterval(timer);\r\n        let isCheck = Helper.getCookie('CK_CFM_I');\r\n        this.windowPreviewBeforeSubmit = undefined;\r\n        if (isCheck == \"CHECKED\") {\r\n          document.cookie = \"CK_CFM_I=; path=/\";\r\n          this.confirmCheckPreview = true;\r\n          this.submit('XUAT');\r\n        }\r\n      }\r\n    }, 500);\r\n    let data = this.getDataPreview();\r\n    let htx = \"\";\r\n    if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n      htx = \"và ký\";\r\n    } else {\r\n      htx = \"chờ ký\";\r\n    }\r\n    let sub = this.vatService.previewInvoiceImport(dataPreview).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        this.windowPreviewBeforeSubmit.document.write(`\r\n        <style type=\"text/css\" scoped>\r\n            .nhap-nhay { \r\n              background: red;\r\n              padding: 0.5px 9px;\r\n              margin-right: 5px;\r\n              border-radius: 57%;\r\n              -webkit-animation: flicker 1s infinite;\r\n            } \r\n            .ht-xuat{\r\n              display: inline-block;\r\n              margin-right: 50px;\r\n              padding: 15px;\r\n              float: right;\r\n              background: #e48e08;\r\n            }\r\n            @-webkit-keyframes flicker\r\n            {\r\n            0% {opacity:0;}\r\n            9% {opacity:0;}\r\n            10% {opacity:.5;}\r\n            13% {opacity:0;}\r\n            20% {opacity:.5;}\r\n            25% {opacity:1;}\r\n            }\r\n            .example {\r\n              padding: 20px;\r\n            }\r\n            \r\n            input[type=button] {\r\n              padding: 5px 10px;\r\n              margin: 10px 5px;\r\n              border-radius: 5px;\r\n              cursor: pointer;\r\n              background: #ddd;\r\n              border: 1px solid #ccc;\r\n            }\r\n            input[type=button]:hover {\r\n              background: #ccc;\r\n            }\r\n\r\n            .confirm {\r\n              display: none;\r\n            }\r\n            .confirm > div:first-of-type {\r\n              position: fixed;\r\n              width: 100%;\r\n              height: 100%;\r\n              background: rgba(0, 0, 0, 0.5);\r\n              top: 0px;\r\n              left: 0px;\r\n            }\r\n            .confirm > div:last-of-type {\r\n              padding: 10px 20px;\r\n              background: white;\r\n              position: absolute;\r\n              width: auto;\r\n              height: auto;\r\n              left: 50%;\r\n              top: 50%;\r\n              transform: translate(-50%, -50%);\r\n              border-radius: 5px;\r\n              border: 1px solid #333;\r\n            }\r\n            .confirm > div:last-of-type div:first-of-type {\r\n              min-width: 150px;\r\n              padding: 10px;\r\n            }\r\n            .confirm > div:last-of-type div:last-of-type {\r\n              text-align: right;\r\n            }\r\n        </style>\r\n        <div style=\"margin-left: 50px;\">\r\n          <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n          <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n          </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n        </div>\r\n\r\n        <div>\r\n          <iframe style=\"margin-left: 170px;\" width=\"70%\" height=\"95%\" src=\"data:application/pdf;base64,${pdf_file}\"></iframe>\r\n          <div class=\"ht-xuat\">\r\n            <p style=\"color: #fff;font-size: 17px;text-align: center;margin-bottom: 0;\">Ngày hóa đơn</p>\r\n            <p style=\"color: #fff;font-size: 17px;text-align: center;margin-bottom: 10px;margin-top: 5px;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n            <h3 style=\"color: #fff; text-align: center; text-transform: uppercase;margin-top: 5px;\">Xuất ${htx}</h3>\r\n          </div>\r\n        </div>\r\n\r\n        <div style=\"text-align: center; margin: 20px 0 50px; font-size: 22px; font-weight: 600;\">\r\n          <a href=\"javascript:void(0)\" style=\"text-decoration: none;\" onclick=\"setConfirmInvoice()\">Đồng ý </a>|\r\n          <a href=\"javascript:void(0)\" style=\"text-decoration: none;\" onclick=\"closeWin()\">Đóng</a>\r\n        </div>\r\n\r\n        <div class=\"confirm\">\r\n            <div></div>\r\n            <div>\r\n              <div id=\"confirmMessage\">Confirm text</div>\r\n              <div>\r\n                <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n                <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n              </div>\r\n            </div>\r\n        </div>\r\n\r\n        <script type=\"text/javascript\">\r\n        const ui = {\r\n          confirm: async (message) => createConfirm(message)\r\n        }\r\n        \r\n        const createConfirm = (message) => {\r\n          return new Promise((complete, failed)=>{\r\n            $('#confirmMessage').text(message)\r\n        \r\n            $('#confirmYes').off('click');\r\n            $('#confirmNo').off('click');\r\n            \r\n            $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n            $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n            \r\n            $('.confirm').show();\r\n          });\r\n        }\r\n                             \r\n        const setConfirmInvoice = async () => {\r\n          const confirm = await ui.confirm(\"Bạn có chắc chắn muốn xuất hóa đơn ${htx} không?\");\r\n          if(confirm){\r\n            document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n            window.close();\r\n          } else{\r\n          }\r\n        } \r\n\r\n          function closeWin(){\r\n            window.close();\r\n          }\r\n        </script>\r\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n        `);\r\n        this.windowPreviewBeforeSubmit.focus();\r\n      } else {\r\n        this.windowPreviewBeforeSubmit.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n\r\n\r\n  getDataPreview() {\r\n    let formatter;\r\n    let invoicesPreview = [];\r\n    this.convertGirdToInvoices(\"preview\");\r\n\r\n    this.configs.forEach(item => {\r\n      if (item.name == sEnum.configSys.system_parameter) {\r\n        let _obj = JSON.parse(item.value);\r\n        let displayInt = _obj.display_int ? _obj.display_int : false;\r\n        formatter = _obj.decpoint_is_dot ? { decimal: \".\", thousands: \",\", display_int: displayInt } : { decimal: \",\", thousands: \".\", display_int: displayInt };\r\n      }\r\n\r\n    });\r\n\r\n    this.invoicesArr.forEach(data => {\r\n      let decimal_quatity = this.getFormatterToNumber(this.formatter.so_luong);\r\n      let decimal_price = this.getFormatterToNumber(this.formatter.don_gia);\r\n      let decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n      let decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n      let decimal_amount_after_vat = this.getFormatterToNumber(this.formatter.tong_tien);\r\n      let total_amount_product_with_vatx = null, total_amount_product_with_vat0 = null, total_amount_product_with_vat5 = null, total_amount_product_with_vat10 = null, amount_vat0 = null;\r\n\r\n      data.invoice_products.forEach(item => {\r\n        if (item.commercial_discount) {\r\n          if (item.vat == -1) total_amount_product_with_vatx -= item.amount_after_vat;\r\n          if (item.vat == 0) total_amount_product_with_vat0 -= item.amount_after_vat;\r\n          if (item.vat == 0) amount_vat0 -= item.amount_vat;\r\n          if (item.vat == 5) total_amount_product_with_vat5 -= item.amount_after_vat;\r\n          if (item.vat == 10) total_amount_product_with_vat10 -= item.amount_after_vat;\r\n        } else {\r\n          if (item.vat == -1) total_amount_product_with_vatx += item.amount_after_vat;\r\n          if (item.vat == 0) total_amount_product_with_vat0 += item.amount_after_vat;\r\n          if (item.vat == 0) amount_vat0 += item.amount_vat;\r\n          if (item.vat == 5) total_amount_product_with_vat5 += item.amount_after_vat;\r\n          if (item.vat == 10) total_amount_product_with_vat10 += item.amount_after_vat;\r\n        }\r\n        item['unit_name'] = \"\";\r\n        this.select.unit_codes.forEach(unit => {\r\n          item.discount = \"\";\r\n          item.total_discount = \"\";\r\n          if (unit.code == item.unit_code) {\r\n            item['unit_name'] = unit.name;\r\n          }\r\n        });\r\n\r\n        item.amount = Helper.formatMoney(item.amount, decimal_amount, formatter);\r\n        item.price = Helper.formatMoney(item.price, decimal_price, formatter);\r\n        item.quantity = Helper.formatMoney(item.quantity, decimal_quatity, formatter);\r\n      });\r\n      let _obj = this.select.payment_method_names.filter(p => p.code == data.payment_method_name)[0];\r\n      if (_obj) {\r\n        data.payment_method_view_name = _obj.name;\r\n      }\r\n      data.total_amount_product_with_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n      data.total_amount_product_with_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vatx = Helper.formatMoney(total_amount_product_with_vatx, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat0 = Helper.formatMoney(total_amount_product_with_vat0, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat5 = Helper.formatMoney(total_amount_product_with_vat5, decimal_amount_after_vat, formatter);\r\n      data.amount_after_vat10 = Helper.formatMoney(total_amount_product_with_vat10, decimal_amount_after_vat, formatter);\r\n      data.amount_vat0 = amount_vat0;\r\n\r\n      data.total_amount_product_vatx = Helper.formatMoney(data.total_amount_product_vatx, decimal_amount, formatter);\r\n      data.total_amount_product_vat0 = Helper.formatMoney(data.total_amount_product_vat0, decimal_amount, formatter);\r\n      data.total_amount_product_vat5 = Helper.formatMoney(data.total_amount_product_vat5, decimal_amount, formatter);\r\n      data.total_amount_product_vat10 = Helper.formatMoney(data.total_amount_product_vat10, decimal_amount, formatter);\r\n      data.amount_vat5 = Helper.formatMoney(data.amount_vat5, decimal_amount_vat, formatter);\r\n      data.amount_vat10 = Helper.formatMoney(data.amount_vat10, decimal_amount_vat, formatter);\r\n      data.amount = Helper.formatMoney(data.amount, decimal_amount, formatter);\r\n      data.total_amount_vat = Helper.formatMoney(data.total_amount_vat, decimal_amount_vat, formatter);\r\n      data.total_payment = Helper.formatMoney(data.total_payment, decimal_amount_after_vat, formatter);\r\n\r\n      invoicesPreview.push(data);\r\n    });\r\n\r\n    return invoicesPreview;\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    Library.showloading();\r\n    let win = window.open(\"\", \"\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = \"Đang tải dữ liệu!\";\r\n    win.blur();\r\n    let sub = this.vatService.inChuyenDoiInvoiceImport(this.invoicesId,false).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        win.document.write(`\r\n        <a id=\"idA\" title=\"Download File\" style=\"font-family: \\'Verdana\\';color: #333;font-weight: 600;float:right; margin-bottom: 5px;\r\n          margin-right: 20px;\" download=\"hoadon.pdf\" href=\"data:application/pdf;base64,${pdf_file}\">Tải File</a>\r\n        <iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}#download=1\"></iframe>\r\n        \r\n      `);\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xemHoaDon() {\r\n    Library.showloading();\r\n    let win = window.open(\"\", \"\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = \"Đang tải dữ liệu!\";\r\n    win.blur();\r\n    let sub = this.vatService.xemHoaDonInvoiceImport(this.invoicesId).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        let pdf_file = rs.data.invoice.pdf_file;\r\n        win.document.write(`<iframe width=\"100%\" height=\"97%\" src=\"data:application/pdf;base64,${pdf_file}\"></iframe>`)\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n      } else {\r\n        win.close();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  submit(type) {\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    this.checkStatusData()\r\n    if (this.totalDuplicateInvoice > 0) {\r\n      Library.notify(\"Số phiếu, chứng từ bị trùng\", \"error\");\r\n      return;\r\n    }\r\n    let convert = this.convertGirdToInvoices(\"submit\");\r\n    if (convert) {\r\n      let dayExport = this.invoice_date ? moment(this.invoice_date).format('DD/MM/YYYY') : moment(new Date()).format('DD/MM/YYYY');\r\n      if (type == \"XUAT\") {\r\n        if (this.confirmCheckPreview) {\r\n          // Library.confirmVA(`Tất cả hóa đơn đã nhập sẽ được xuất hóa đơn vào ngày <strong>${dayExport}</strong>. Bạn có chắc chắn không?`, \"Thông báo\", () => {\r\n          this.showPopupImport = true;\r\n          if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.xuatHoaDon();\r\n          } else if (this.htXuat != sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.xuatChoKy();\r\n          }\r\n          this.confirmCheckPreview = false;\r\n          // });\r\n        } else {\r\n          this.previewBeforeSubmit();\r\n        }\r\n      } else if (type == \"LUU\") {\r\n        this.showPopupImport = true;\r\n        this.luuChoXuat();\r\n      }\r\n\r\n      // else if (type == \"CHO_KY\") {\r\n      //   Library.confirmVA(`Tất cả hóa đơn đã nhập sẽ được xuất hóa đơn vào ngày <strong>${dayExport}</strong>. Bạn có chắc chắn không?`, \"Thông báo\", () => {\r\n      //     this.showPopupImport = true;\r\n      //   });\r\n      // }\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","module.exports = \"<div class=\\\"row search-section\\\">\\r\\n  <div class=\\\"col-md-8\\\" style=\\\"padding-right: 0px\\\">\\r\\n    <app-search-advanced (searchContentChange)=\\\"getSearch($event)\\\">\\r\\n    </app-search-advanced>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-4\\\" style=\\\"max-height: 70px\\\">\\r\\n    <div class=\\\"list-header row\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div *ngIf=\\\"isListHeader\\\" class=\\\"pull-right button-panel\\\">\\r\\n          <dx-button (click)=\\\"lapHoaDon()\\\" [(icon)]=\\\"_translate.ICONS.plus\\\"\\r\\n            text=\\\"{{ 'CONTROLL.BUTTON.create_invoice' | translate }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button *ngIf=\\\"taxCodeThueHCM.includes(curentUser.account.tax_code)\\\" id=\\\"product3\\\" (click)=\\\"taiHDXml()\\\"\\r\\n            [(icon)]=\\\"_translate.ICONS.xml\\\" text=\\\"{{ 'CONTROLL.BUTTON.tai_hd_xml' | translate }}\\\" type=\\\"default\\\">\\r\\n          </dx-button>\\r\\n          <dx-button *ngIf=\\\"isAccessExportInv && configs.system_parameter.allow_keep_invoice_number\\\"\\r\\n            [(icon)]=\\\"_translate.ICONS.pencil\\\" (click)=\\\"kyHangLoat()\\\" text=\\\"{{ 'CONTROLL.BUTTON.sign' | translate }}\\\"\\r\\n            type=\\\"default\\\" [disabled]=\\\"!selectedRows.length\\\"></dx-button>\\r\\n            <!--  -->\\r\\n          <dx-menu [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\"\\r\\n            submenuDirection=\\\"auto\\\" (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"!isListHeader\\\" class=\\\"pull-right button-panel\\\">\\r\\n          <dx-menu style=\\\"margin-right: 8px!important;\\\" [dataSource]=\\\"dataAddInvoiceBuy\\\" displayExpr=\\\"name\\\"\\r\\n            orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\" (onItemClick)=\\\"itemExtrasClick($event)\\\"\\r\\n            cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n          <dx-button *ngIf=\\\"isAccessExportInv\\\" [(icon)]=\\\"_translate.ICONS.pencil\\\" (click)=\\\"kyHangLoat()\\\"\\r\\n            text=\\\"{{ 'CONTROLL.BUTTON.delete' | translate }}\\\" type=\\\"default\\\" [disabled]=\\\"!selectedRows.length\\\">\\r\\n          </dx-button>\\r\\n          <dx-menu [dataSource]=\\\"data_extras_invoice_buy\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\"\\r\\n            submenuDirection=\\\"auto\\\" (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainerVat\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n  [showRowLines]=\\\"true\\\" [showBorders]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n  [columnAutoWidth]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n  (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n  <!-- <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling> -->\\r\\n  <dxo-selection selectAllMode=\\\"{{pageSelect}}\\\" mode=\\\"multiple\\\">\\r\\n  </dxo-selection>\\r\\n  <!-- <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"vat\\\"></dxo-state-storing> -->\\r\\n  <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n  <dxo-sorting mode=\\\"multiple\\\"></dxo-sorting>\\r\\n  <dxo-selection mode=\\\"multiple\\\"></dxo-selection>\\r\\n  <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row>\\r\\n  <!-- Số hóa đơn -->\\r\\n  <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n    alignment=\\\"center\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"1\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Mã số đơn hàng -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_the_order\\\" dataField=\\\"the_order\\\"\\r\\n    caption=\\\"{{ 'CONTROLL.LABEL.the_order_no_code' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_phieu}}\\\"\\r\\n    alignment=\\\"left\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Số phiếu -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_recepts_no\\\" dataField=\\\"receipts_no\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.receipts_no' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.so_phieu}}\\\"\\r\\n    alignment=\\\"left\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Mẫu số, ký hiệu -->\\r\\n  <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Ngày hóa đơn -->\\r\\n  <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n    format=\\\"dd/MM/yyyy\\\" sortOrder=\\\"desc\\\" [sortIndex]=\\\"0\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Người chuyển -->\\r\\n  <dxi-column *ngIf=\\\"isEFY\\\" dataField=\\\"export_user\\\" caption=\\\"{{ 'CONTROLL.LABEL.transferer' | translate }}\\\"\\r\\n    alignment=\\\"left\\\" minWidth=\\\"150\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Mã số thuế -->\\r\\n  <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tên khách hàng -->\\r\\n  <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\" alignment=\\\"left\\\"\\r\\n    minWidth=\\\"200\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Số đơn vận -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_transport_number_from_product\\\" dataField=\\\"transport_number\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE_DETAILS.transport_number' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.transport_number}}\\\" alignment=\\\"left\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Thành tiền -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_recepts_no\\\" dataField=\\\"amount_string\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE_DETAILS.amount' | translate }}\\\" alignment=\\\"right\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.thanh_tien}}\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tiền thuế -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.display_recepts_no\\\" dataField=\\\"total_amount_vat_string\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE_DETAILS.amount_vat' | translate }}\\\" alignment=\\\"right\\\"\\r\\n    headerCellTemplate=\\\"titleHeaderTemplate\\\" minWidth=\\\"{{_translate.GRID_WIDTH.thanh_tien}}\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Tổng tiền -->\\r\\n  <dxi-column dataField=\\\"total_payment_string\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\"\\r\\n    alignment=\\\"right\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\" minWidth=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Trạng thái thanh toán -->\\r\\n  <dxi-column *ngIf=\\\"configs.system_parameter.check_payment_status\\\" cellTemplate=\\\"viewPaymentStatus\\\"\\r\\n    caption=\\\"{{ 'GRID.INVOICE.payment_status' | translate }}\\\" minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\"\\r\\n    alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Trạng thái gửi CQT -->\\r\\n  <dxi-column *ngIf=\\\"isTT78\\\" cellTemplate=\\\"statusSendTax\\\" caption=\\\"Trạng thái gửi CQT\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Email, trạng thái hóa đơn -->\\r\\n  <dxi-column cellTemplate=\\\"actionEmail\\\" caption=\\\"{{ 'GRID.INVOICE.send_email_status' | translate }}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <!-- Chức năng -->\\r\\n  <dxi-column cellTemplate=\\\"actionIcon\\\" minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong}}\\\"\\r\\n    minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong}}\\\" alignment=\\\"center\\\">\\r\\n  </dxi-column>\\r\\n  <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n    <p>{{ d.data.template_code }}</p>\\r\\n    <p>{{ d.data.invoice_series }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n    <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n        *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n    <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n    <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name ||\\r\\n      _translate.GRID.INVOICE.invoice_wait_for_sign }}</p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'actionEmail'\\\">\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status !='GIU_SO'\\\" class=\\\"chua-gui-khach-hang gach-chan\\\"\\r\\n      (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.un_sent' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'GUI_LOI'\\\" style=\\\"color: red;\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.send_mail_error' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status =='GIU_SO'\\\" class=\\\"cho-ky\\\"\\r\\n      (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_sign' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_GUI'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_it' | translate }}</a>\\r\\n    <a *ngIf=\\\"d.data.send_email_status == 'DA_NHAN'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.received' | translate }}</a>\\r\\n    <p *ngIf=\\\"!d.data.send_email_status\\\" href=\\\"javascript:void(0)\\\">{{ trangthaihoadon(d.data) }} <a\\r\\n        *ngIf=\\\"trangthaihoadon(d.data) == 'Lỗi ký HD' || trangthaihoadon(d.data) == 'Signed error'\\\" class=\\\"gach-chan\\\"\\r\\n        (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">({{ 'GRID.INVOICE.re_sign' | translate }})</a></p>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_GUI_CQT' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Đã gửi để cấp mã</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_CAP' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Đã cấp mã</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'KHONG_DU_DK_CAP_MA' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\" style=\\\"color: red;\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">Không đủ ĐK cấp mã</a>\\r\\n\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'CHUA_GUI_CQT' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Chưa gửi CQT</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_GUI_CQT' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">Đã gửi CQT</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'DA_TIEP_NHAN' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\">CQT đã tiếp nhận</a>\\r\\n    <a *ngIf=\\\"d.data.send_department_status == 'KHONG_HOP_LE' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n      href=\\\"javascript:void(0)\\\" style=\\\"color: red;\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">CQT kiểm tra không hợp lệ </a>\\r\\n  </div>\\r\\n  <!-- Trạng thái thanh toán -->\\r\\n  <div *dxTemplate=\\\"let d of 'viewPaymentStatus'\\\">\\r\\n    <a href=\\\"javascript:void(0)\\\">{{ trangthaithanhtoan(d.data) }}</a>\\r\\n  </div>\\r\\n  <!--  -->\\r\\n  <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.view_invoice}}\\\" class=\\\"xemIcon actionIcon\\\" (click)=\\\"view(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\">\\r\\n    </a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.edit}}\\\" class=\\\"suaIcon actionIcon\\\" (click)=\\\"edit(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <a title=\\\"{{_translate.CONTROLL.BUTTON.delete}}\\\" class=\\\"xoaIcon actionIcon\\\" (click)=\\\"delete(d.data)\\\"\\r\\n      href=\\\"javascript:void(0)\\\"></a>\\r\\n    <a *ngIf=\\\"d.data.invoice_files.length>0\\\" title=\\\"{{_translate.CONTROLL.BUTTON.view_attach_file}}\\\"\\r\\n      class=\\\"attachIcon actionIcon\\\" (click)=\\\"viewAttachFile(d.data)\\\" href=\\\"javascript:void(0)\\\"></a>\\r\\n    <div class=\\\"dropdown\\\">\\r\\n      <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" class=\\\"morongIcon actionIcon\\\" (click)=\\\"myFunction(d.data.id)\\\"\\r\\n        href=\\\"javascript:void(0)\\\"></a>\\r\\n      <div [id]=\\\"d.data.id\\\" class=\\\"dropdown-content\\\"\\r\\n        [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n        <a *ngIf=\\\"isAccessExportInv && configs.system_parameter.allow_keep_invoice_number\\\" (click)=\\\"kyHangLoat(d.data)\\\"\\r\\n          href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.sign' | translate }} <i\\r\\n            [class]=\\\"_translate.ICONS.pencil\\\"></i></a>\\r\\n        <a (click)=\\\"inChuyenDoi(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.print_conversion' | translate }}\\r\\n          <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n        <a (click)=\\\"copy(d.data)\\\" href=\\\"javascript:void(0)\\\">{{'CONTROLL.BUTTON.copy' | translate}}\\r\\n          <i [class]=\\\"_translate.ICONS.copy\\\"></i></a>\\r\\n        <a *ngIf=\\\"configs.system_parameter.delivery_bill_print\\\" (click)=\\\"inPXK(d.data)\\\" href=\\\"javascript:void(0)\\\">{{\\r\\n          'CONTROLL.BUTTON.delivery_bill_print' | translate }}\\r\\n          <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n        <a *ngIf=\\\"configs.system_parameter.display_delivery_information\\\" (click)=\\\"inBBTraHang(d.data)\\\"\\r\\n          href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.delivery_record' | translate }}\\r\\n          <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n    <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{info.column.caption}} </p>\\r\\n  </div>\\r\\n  <dxo-summary>\\r\\n    <dxi-total-item summaryType=\\\"custom\\\" cssClass=\\\"dxi-total-payment-total_payment_string\\\" [customizeText]=\\\"customizeText\\\" showInColumn=\\\"total_payment_string\\\">\\r\\n    </dxi-total-item>\\r\\n  </dxo-summary>\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"configs.system_parameter.number_row_per_page\\\"></dxo-paging>\\r\\n  <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 35, 50, 100]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n    [showInfo]=\\\"true\\\" infoText=\\\"{{ _translate.DXO_PAGER.page}}\\\">>\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n\\r\\n<app-download-pdf></app-download-pdf>\"","module.exports = \".chua-gui-khach-hang{color:red}.cho-ky{color:#008b8b}.gach-chan{text-decoration:underline}.search-section{padding-bottom:15px}.button-panel{margin-top:30px}.mainmenubtn{background-color:red;color:white;border:none;cursor:pointer;padding:20px;margin-top:20px}.last-drodown{bottom:30px}.small-grid{position:fixed  !important;right:39px !important}::ng-deep #gridContainerVat .dx-cell-focus-disabled{overflow:visible !important}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { DxDataGridComponent, DxMenuComponent } from 'devextreme-angular';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { AuthService, Helper, Library, VPreviewInvService, sEnum, VStringService, SocketService } from '@core/index';\r\nimport { KeepNumberComponent } from '../keep-number/keep-number.component';\r\nimport { SendInvoicesComponent } from '../send-invoices/send-invoices.component';\r\nimport { ImportInvoicesDtComponent } from '../import-invoices-dt/import-invoices-dt.component';\r\nimport { SignManyComponent } from '../sign-many/sign-many.component';\r\nimport { ViewAttachFileComponent } from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport { SendListEmailComponent, SendDataForTaxComponent } from '@shared/index';\r\nimport * as moment from 'moment';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { map, skip, take } from \"rxjs/operators\";\r\nimport { forkJoin, interval, of } from \"rxjs\";\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport * as JSZip from 'jszip';\r\nimport { saveAs } from 'file-saver';\r\nimport { DownloadPdfComponent } from '@shared/components/download-pdf/download-pdf.component';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  @ViewChild(DxMenuComponent) dxMenu: DxMenuComponent;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @ViewChild('expandMenu') expandMenu;\r\n  @ViewChild(DownloadPdfComponent) downloadPdf: DownloadPdfComponent;\r\n  dataSource: any;\r\n  selectedRows: Array<any> = [];\r\n  selectedItems: Array<any> = [];\r\n  bsModalRef: BsModalRef;\r\n  bsModalImportRef: BsModalRef;\r\n  bsModalSignRef: BsModalRef;\r\n  listDM: any;\r\n  pageSize: any;\r\n  loaiHoaDon: string;\r\n  isAccessExportInv = true;\r\n  invoice_releases = [];\r\n  templatesTT78 = [];\r\n  infoDangKy: any = {};\r\n  paramSearch: any;\r\n  htmlString: 'a';\r\n  _language: string;\r\n  _translate: any;\r\n  checkSubmit: any;\r\n  extras = [];\r\n  data_extras_invoice_buy = [];\r\n  extend = [];\r\n  private wasInside = false;\r\n  select: any = {};\r\n  configs: any = {};\r\n  disEditMulti = true;\r\n  hoaDonImportChoXuat: any;\r\n  footerSum = {\r\n    summary: '',\r\n    summary_deduction: '',\r\n  };\r\n  objPXK = {};\r\n  clickCurent = '';\r\n  dataInfor: any;\r\n  isSearchUI: boolean;\r\n  isListHeader: boolean;\r\n  dataAddInvoiceBuy = [];\r\n  curentUser: any = {};\r\n  taxCodeThueHCM = [\"0102519041-555\"];\r\n  pageSelect: any;\r\n  isTT78: boolean = false;\r\n  isExistFormRelease: boolean = false;\r\n  currentUser: any;\r\n  isEFY: boolean = false;\r\n  ioSignature: Subscription;\r\n  objStatusBtn = {}\r\n\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n  invoices = [];\r\n  isExportFailed: boolean = false;\r\n  province_name: any;\r\n  showCustomButton = true;\r\n  fileArray: any = [];\r\n  dataJoin: any = [];\r\n  constructor(\r\n    private authService: AuthService,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    private modalImportService: BsModalService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    public translate: TranslateService,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService,\r\n    private sanitizer: DomSanitizer,\r\n    private invoiceService: InvoiceService,\r\n    private vPreviewInvService : ViewInvoiceService\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    this.curentUser = this.authService.getCurrentUser();\r\n    translate.use(this._language);\r\n    this.objPXK = {\r\n      id: 'IN_PXK',\r\n      name: this._translate.CONTROLL.BUTTON.delivery_bill_print,\r\n      icon: this._translate.ICONS.print\r\n    }\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.extend,\r\n      items: [\r\n        // {\r\n        //   id: \"NAP_HD_TU_EXCEL\",\r\n        //   name: this._translate.CONTROLL.BUTTON.import_invoice_from_excel,\r\n        //   icon: this._translate.ICONS.excel\r\n        // },\r\n        {\r\n          id: 'NAP_HD_TU_EXCEL_DT',\r\n          name: this._translate.CONTROLL.BUTTON.import_invoice_from_excel,\r\n          icon: this._translate.ICONS.excel\r\n        },\r\n        {\r\n          id: 'SUA',\r\n          name: this._translate.CONTROLL.BUTTON.edit,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n        {\r\n          id: 'XOA',\r\n          name: this._translate.CONTROLL.BUTTON.delete,\r\n          icon: this._translate.ICONS.delete\r\n        },\r\n        {\r\n          id: 'XEM',\r\n          name: this._translate.CONTROLL.BUTTON.view_invoice,\r\n          icon: this._translate.ICONS.view\r\n        }, {\r\n          id: 'INCHUYENDOI',\r\n          name: this._translate.CONTROLL.BUTTON.print_conversion,\r\n          icon: this._translate.ICONS.print\r\n        },\r\n        {\r\n          id: 'GUI_BEN_MUA',\r\n          name: this._translate.CONTROLL.LABEL.send_invoice,\r\n          icon: this._translate.ICONS.send_email\r\n        },\r\n        {\r\n          id: 'TAI_HD_PDF',\r\n          name: this._translate.CONTROLL.BUTTON.tai_hd_pdf,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n      ]\r\n    }];\r\n    this.data_extras_invoice_buy = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.LABEL.export_data,\r\n      items: [\r\n        {\r\n          id: 'LIST_INVOICE_BUY',\r\n          name: this._translate.CONTROLL.LABEL.list_invoice_buy,\r\n          icon: this._translate.ICONS.excel\r\n        },\r\n        {\r\n          id: 'DETAILS_OF_EACH_GOODS_AND_SERVICE',\r\n          name: this._translate.CONTROLL.LABEL.details_of_each_goods_and_service,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n      ]\r\n    }];\r\n    this.dataAddInvoiceBuy = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.add,\r\n      items: [\r\n        {\r\n          id: 'ADD_ONE_INVOICE',\r\n          name: this._translate.CONTROLL.LABEL.add_one_invoice,\r\n          icon: this._translate.ICONS.add_new\r\n        },\r\n        {\r\n          id: 'ADD_MULTIPLE_INVOICE',\r\n          name: this._translate.CONTROLL.LABEL.add_multiple_invoice,\r\n          icon: this._translate.ICONS.add_new\r\n        },\r\n      ]\r\n    }];\r\n    this.extend = [{\r\n      id: '1',\r\n      name: '',\r\n      items: [\r\n        {\r\n          id: 'INCHUYENDOI',\r\n          name: this._translate.CONTROLL.BUTTON.print_conversion,\r\n          icon: 'assets/img/icons/In.png'\r\n        },\r\n      ]\r\n    }];\r\n  }\r\n  ngOnInit() {\r\n    this.handleUI(this.route.snapshot.data.type);\r\n    this.configs = this.authService.getConfigs();\r\n    if (this.configs.system_parameter.delivery_bill_print)\r\n      this.extras[0].items.push(this.objPXK);\r\n    if (!this.taxCodeThueHCM.includes(this.curentUser.account.tax_code)) {\r\n      this.extras[0].items.push({ id: \"TAI_HD_XML\", name: this._translate.CONTROLL.BUTTON.tai_hd_xml, icon: this._translate.ICONS.xml });\r\n    }\r\n    if (this.configs.system_parameter.allow_to_print_delivery_each_invoice)\r\n      this.extras[0].items.push({ id: \"IN_BB_GIAO_NHAN\", name: this._translate.CONTROLL.BUTTON.print_delivery_minutes, icon: this._translate.ICONS.xml });\r\n    if (this.curentUser.account.tax_code == \"0102519041\")\r\n      this.isEFY = true;\r\n    if (this.configs.system_parameter.select_invoice_current_page)\r\n      this.pageSelect = \"page\";\r\n    else\r\n      this.pageSelect = \"allPages\";\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (this.currentUser && this.currentUser.account && this.currentUser.account.van_account_info) {\r\n      this.province_name = this.currentUser.account.van_account_info.city_name;\r\n    }\r\n    this.vatService.isCopy = false;\r\n    this.vatService.data = null;\r\n    const listpermissions = this.currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n    if (this.currentUser.is_convert_TT78) {\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      if (this.infoDangKy && this.infoDangKy.id) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n          this.isTT78 = true;\r\n          let infoFormRelease = this.authService.getInfoFormRelease();\r\n          if (infoFormRelease && infoFormRelease.invoice_releases && infoFormRelease.invoice_releases.length > 0) {\r\n            let invoicesReleases = infoFormRelease.invoice_releases.filter(p => (parseInt(p.amount) - parseInt(p.used_amount)) > 0);\r\n            if (invoicesReleases && invoicesReleases.length > 0)\r\n              this.isExistFormRelease = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // if (localStorage.getItem('new_member')) {\r\n      //   Library.notify(this._translate.NOTIFY.you_must_create_a_release_notice_before_invoicing, 'warning');\r\n      // }\r\n    }\r\n  }\r\n\r\n  handleUI(value) {\r\n    if (value === '03GTKT') {\r\n      this.isSearchUI = false;\r\n      this.isListHeader = false;\r\n    } else {\r\n      this.isSearchUI = true;\r\n      this.isListHeader = true;\r\n    }\r\n    this.loaiHoaDon = value;\r\n  }\r\n  /* Xử lý sự kiện click phần mở rộng của từng hóa đơn*/\r\n  myFunction(id) {\r\n    if (this.clickCurent !== '' && this.clickCurent !== id) {\r\n      let valueCurrent = document.getElementById(this.clickCurent);\r\n      if (!valueCurrent)\r\n        document.getElementById(id).classList.toggle('show');\r\n      else {\r\n        document.getElementById(this.clickCurent).classList.remove('show');\r\n        document.getElementById(id).classList.toggle('show');\r\n      }\r\n    }\r\n    else\r\n      document.getElementById(id).classList.toggle('show');\r\n    this.clickCurent = id;\r\n\r\n  }\r\n  loadList(params?) {\r\n    this.dataSource = {};\r\n    const ref = {};\r\n    if (params) {\r\n      const _lst = this.vatService.getAll(this.loaiHoaDon, params);      \r\n      this.dataSource.store = _lst;\r\n    } else {\r\n      this.dataSource.store = this.vatService.getAll(this.loaiHoaDon);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.invoice_number) {\r\n            if (e.data.send_department_status == \"DA_GUI_CQT\")\r\n              e.rowElement.style.color = '#008B8B';\r\n            else if (e.data.send_department_status == \"DA_CAP\")\r\n              e.rowElement.style.color = 'black';\r\n            else if (e.data.send_department_status == \"DA_TIEP_NHAN\")\r\n              e.rowElement.style.color = 'black';\r\n            else\r\n              e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type === '2' || e.data.adjustment_type === '7' || e.data.adjustment_type === '6') {\r\n        const eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadList(e);\r\n  }\r\n\r\n  checkDisableButton() {\r\n    if (this.selectedItems.length) {\r\n      if (this.selectedItems[0].status === 'DA_XUAT') {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.invoice_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // Chọn đối tượng trong màn hình danh sách\r\n  selectionChanged(data: any) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    this.disEditMulti = true;\r\n    this.selectedItems = data.selectedRowsData;\r\n    // if (this.selectedItems.length > 0) {\r\n    //   const checks = this.selectedItems.filter((item) => {\r\n    //     return item.number_of_vouchers;\r\n    //   });\r\n    //   const checkDaXuat = this.selectedItems.filter((item) => {\r\n    //     return item.status === 'DA_XUAT';\r\n    //   });\r\n    //   if (checks.length === this.selectedItems.length && checkDaXuat.length === 0) {\r\n    //     this.disEditMulti = false;\r\n    //   }\r\n    //}\r\n  }\r\n\r\n  async lapHoaDon() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (this.loaiHoaDon === '01GTKT')\r\n    // this.router.navigate(['system/vat-invoice/create'], { queryParams: { code: this.loaiHoaDon } });\r\n    {\r\n      this.router.navigate(['system/vat-invoice/create']);\r\n    } else {\r\n      if (this.loaiHoaDon == sEnum.loaihoadon.KPTQ07)\r\n        this.router.navigate(['system/non-tariff-invoice/create']);\r\n      else if (this.loaiHoaDon == sEnum.loaihoadon.GTTT02)\r\n        this.router.navigate(['system/sale-invoice/create']);\r\n    }\r\n  }\r\n\r\n  async copy(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    const row = data ? data : this.selectedItems[0];\r\n    let sub = this.vatService.show(row.id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        if (rs.data.invoice) {\r\n          rs.data.invoice.id = null;\r\n          rs.data.invoice.origin_id = null;\r\n          rs.data.invoice.adjustment_type = '1';\r\n          rs.data.invoice.adjustment_object = null;\r\n          rs.data.invoice.adjustment_form = null;\r\n          rs.data.invoice.refuse_reason = null;\r\n          rs.data.invoice.destroy_reason = null;\r\n          rs.data.invoice.destroy_date = null;\r\n          rs.data.invoice.invoice_number = null;\r\n          rs.data.invoice.invoice_date = null;\r\n          rs.data.invoice.approve_status = null;\r\n          rs.data.invoice.status = rs.data.invoice.status == 'DA_XUAT' ? 'GHI_TAM' : rs.data.invoice.status;\r\n          rs.data.invoice.updated_at = null;\r\n          rs.data.invoice.user_id = null;\r\n          rs.data.invoice.van_id = null;\r\n          rs.data.invoice.invoice_order = null;\r\n          rs.data.invoice.status_order = null;\r\n          rs.data.invoice.doc_relate_date = null;\r\n          rs.data.invoice.doc_relate_symbol = null;\r\n          rs.data.invoice.note_view_on_invoice = null;\r\n          rs.data.invoice.send_department_status = null;\r\n          rs.data.invoice.extend_json_invoice = null;\r\n          rs.data.invoice.is_outside_process = false;\r\n          rs.data.invoice.other_id = null;\r\n          rs.data.invoice.verify_code = null;\r\n          if (rs.data.invoice.invoice_options && rs.data.invoice.invoice_options.length > 0) {\r\n            rs.data.invoice.invoice_options.forEach(item => {\r\n              delete item['id'];\r\n              delete item['invoice_id'];\r\n            });\r\n          }\r\n          this.vatService.data = rs.data.invoice;\r\n          this.vatService.isCopy = true;\r\n        }\r\n        if (this.loaiHoaDon === '01GTKT') {\r\n          this.router.navigate(['system/vat-invoice/create']);\r\n        } else {\r\n          if (this.loaiHoaDon == sEnum.loaihoadon.KPTQ07)\r\n            this.router.navigate(['system/non-tariff-invoice/create']);\r\n          else if (this.loaiHoaDon == sEnum.loaihoadon.GTTT02)\r\n            this.router.navigate(['system/sale-invoice/create']);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  async edit(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    let rowData = null;\r\n    if (data) {\r\n      if (VStringService._getValueToString(data.status) == sEnum.statusInv.DaXuat)\r\n        Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n      else {\r\n        if (VStringService._getValueToString(data.status) == sEnum.statusInv.GhiTam && VStringService._getValueToString(data.send_department_status) == 'KHONG_DU_DK_CAP_MA')\r\n          Library.notify(\"Không sửa được hóa đơn không đủ điều kiện cấp mã\", 'error');\r\n        else\r\n          rowData = data;\r\n      }\r\n    }\r\n    else {\r\n      if (this.selectedItems.length > 0) {\r\n        if (this.selectedItems.length == 1)\r\n          rowData = this.selectedItems[0];\r\n        else {\r\n          /* Không cho sửa hóa đơn đã xuất nhưng đã gửi thuế, trường hợp này trạng thái hóa đơn đang là ghi tạm, hoặc hóa đơn đã được thuế chấp nhận trạng thái là đã xuất */\r\n          let _hdDaXuat = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat)[0];\r\n          let oInvoice = this.selectedItems.filter(p => p.send_department_status)[0];\r\n          if (_hdDaXuat || oInvoice) {\r\n            Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n            return;\r\n          }\r\n          /* Hóa đơn sửa phải cùng thông báo phát hành */\r\n          let invDefault = this.selectedItems[0];\r\n          let invCompare = this.selectedItems.filter(p => p.invoice_release_id != invDefault.invoice_release_id)[0];\r\n          if (invCompare) {\r\n            Library.notify(this._translate.NOTIFY.same_release_invoice, 'error');\r\n            return;\r\n          }\r\n          /* Hóa đơn sửa phải cùng mẫu */\r\n          const isCheckAllEquals = this.selectedItems.every(item => item.template_id == this.selectedItems[0].template_id);\r\n          if (!isCheckAllEquals) {\r\n            Library.notify(this._translate.THONG_TIN.chon_hoa_don_cung_mau, 'error');\r\n            return;\r\n          }\r\n          /* Hóa đơn sửa phải là hóa đơn gốc */\r\n          const isExistOther = this.selectedItems.find(item => item.adjustment_type != 1);\r\n          if (isExistOther) {\r\n            Library.notify(this._translate.THONG_TIN.cho_phep_sua_hoa_don_goc, 'error');\r\n            return;\r\n          }\r\n          /* Hóa đơn sửa phải cùng trạng thái (ghi tạm hoặc giữ số) */\r\n          let arrStatusInv = [\"GIU_SO\", \"GHI_TAM\"];\r\n          let arrStatusItem = this.selectedItems.map((obj: any) => obj.status);\r\n          let result = arrStatusInv.every(val => arrStatusItem.includes(val));\r\n          if (result) {\r\n            Library.notify(this._translate.NOTIFY.same_status_invoice, 'error');\r\n            return;\r\n          }\r\n\r\n          this.openImportForm(rowData);\r\n        }\r\n      }\r\n    }\r\n    if (rowData) {\r\n      // if (VStringService._getValueToString(rowData.number_of_vouchers) != '')\r\n      //   this.openImportForm(rowData);\r\n      // else {\r\n      if (this.isTT78 && rowData.xml_type != '3' && rowData.status == 'DA_XUAT' && Number.parseInt(rowData.invoice_number) > 0) {\r\n        if (VStringService._getValueToString(rowData.adjustment_type) == 5) {\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust/${VStringService._getValueToString(rowData.id)}`], { queryParams: { status: 'viewInvTT32' } });\r\n        } else if (VStringService._getValueToString(rowData.adjustment_type) == 3) {\r\n          this.router.navigate([`/system/handle-invoice/edit-replace/${VStringService._getValueToString(rowData.id)}`], { queryParams: { status: 'viewInvTT32' } });\r\n        } else {\r\n          if (this.loaiHoaDon === '01GTKT') {\r\n            this.router.navigate([`/system/vat-invoice/${VStringService._getValueToString(rowData.id)}`], { queryParams: { status: 'viewInvTT32' } });\r\n          } else {\r\n            if (this.loaiHoaDon == sEnum.loaihoadon.KPTQ07)\r\n              this.router.navigate([`/system/non-tariff-invoice/${VStringService._getValueToString(rowData.id)}`], { queryParams: { status: 'viewInvTT32' } });\r\n            else if (this.loaiHoaDon == sEnum.loaihoadon.GTTT02)\r\n              this.router.navigate([`/system/sale-invoice/${VStringService._getValueToString(rowData.id)}`], { queryParams: { status: 'viewInvTT32' } });\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        if (VStringService._getValueToString(rowData.adjustment_type) == 5) {\r\n          if (this.loaiHoaDon === '01GTKT')\r\n            this.router.navigate([`/system/handle-invoice/edit-adjust/${VStringService._getValueToString(rowData.id)}`]);\r\n          else\r\n            this.router.navigate([`/system/handle-invoice/edit-sale-adjust/${VStringService._getValueToString(rowData.id)}`]);\r\n        } else if (VStringService._getValueToString(rowData.adjustment_type) == 3) {\r\n          if (this.loaiHoaDon === '01GTKT')\r\n            this.router.navigate([`/system/handle-invoice/edit-replace/${VStringService._getValueToString(rowData.id)}`]);\r\n          else\r\n            this.router.navigate([`/system/handle-invoice/edit-sale-replace/${VStringService._getValueToString(rowData.id)}`]);\r\n        } else {\r\n          if (this.loaiHoaDon === '01GTKT') {\r\n            this.router.navigate([`/system/vat-invoice/${VStringService._getValueToString(rowData.id)}`]);\r\n          } else {\r\n            if (this.loaiHoaDon == sEnum.loaihoadon.KPTQ07)\r\n              this.router.navigate([`/system/non-tariff-invoice/${VStringService._getValueToString(rowData.id)}`]);\r\n            else if (this.loaiHoaDon == sEnum.loaihoadon.GTTT02)\r\n              this.router.navigate([`/system/sale-invoice/${VStringService._getValueToString(rowData.id)}`]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async openImportForm(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    Library.showloading();\r\n    let _lst = [];\r\n    if (data) {\r\n      _lst.push(data.id);\r\n    } else {\r\n      _lst = this.selectedRows;\r\n    }\r\n    const subRoute = this.vatService.getEditImportInvoice(_lst, '', this.loaiHoaDon).subscribe((res: any) => {\r\n      this.invoice_releases = Helper.convertDataToImportInvoice(res[0]);\r\n      // Hàng hóa dịch vụ\r\n      setTimeout(() => {\r\n        this.select.products = res[1].data.products;\r\n        this.hoaDonImportChoXuat = res[2].data.invoices.sort((itemA, itemB) => {\r\n          return moment(itemA.created_at, 'YYYY-MM-DD HH:mm:ss').valueOf() - moment(itemB.created_at, 'YYYY-MM-DD HH:mm:ss').valueOf();\r\n        });\r\n        this.select.unit_codes = res[3].data.DM_DON_VI_TINH;\r\n        this.select.select_provisions_on_accounts = res[3].data.DM_DINH_KHOAN;\r\n        this.select.payment_method_names = res[3].data.DM_HINH_THUC_THANH_TOAN;\r\n        this.select.vats = res[3].data.DM_TY_LE_VAT;\r\n        this.templatesTT78 = Helper.convertTemplatesToInvoiceResolver(res[5]).filter(item => item.template_type !== 'HOA_DON_KHOI_TAO_TU_MAY_TINH_TIEN' && item.template_type !== 'PHIEU_THU_MAY_TINH_TIEN');\r\n        this.hoaDonImportChoXuat.forEach(invoice => {\r\n          invoice.invoice_products.forEach(row => {\r\n            if (row.product_code) {\r\n              const _obj = this.select.products.filter(p => p.code === row.product_code)[0];\r\n              if (!_obj) {\r\n                const _objPush = {\r\n                  code: row.product_code,\r\n                  name: row.product_name,\r\n                  mhvth: row.product_code + ': ' + row.product_name,\r\n                };\r\n                this.select.products.push(_objPush);\r\n              }\r\n            }\r\n          });\r\n        });\r\n        let search = InvoicesService.getSearchParams(this.route);\r\n        const initialState = {\r\n          isHdGTGT: this.loaiHoaDon === '01GTKT' ? true : false,\r\n          invoice_releases: this.invoice_releases,\r\n          select: this.select,\r\n          hoaDonImportChoXuat: this.hoaDonImportChoXuat,\r\n          templatesTT78: this.templatesTT78,\r\n          infoDangKy: this.infoDangKy,\r\n          search: search,\r\n          loaiHoaDon: this.loaiHoaDon\r\n        };\r\n        this.bsModalImportRef = this.modalImportService.show\r\n          (\r\n            ImportInvoicesDtComponent,\r\n            {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-lg full-width',\r\n              initialState\r\n            }\r\n          );\r\n        const subModal = this.modalImportService.onHide.subscribe(() => {\r\n          if (this.bsModalImportRef.content.successSaveItem) {\r\n            this.selectedItems = [];\r\n            this.selectedRows = [];\r\n          }\r\n          this.loadList(this.paramSearch);\r\n          subModal.unsubscribe();\r\n        });\r\n      }, 10);\r\n      Library.hideloading();\r\n    }, (err) => {\r\n    }, () => {\r\n      subRoute.unsubscribe();\r\n    });\r\n  }\r\n\r\n  async editNotSelect(row) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (row.status === 'DA_XUAT') {\r\n      Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n    } else {\r\n      if (row.adjustment_type == '5') {\r\n        if (this.loaiHoaDon === '01GTKT')\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust/${row.id}`]);\r\n        else\r\n          this.router.navigate([`/system/handle-invoice/edit-sale-adjust/${row.id}`]);\r\n      } else if (row.adjustment_type == '3') {\r\n        if (this.loaiHoaDon === '01GTKT')\r\n          this.router.navigate([`/system/handle-invoice/edit-replace/${row.id}`]);\r\n        else\r\n          this.router.navigate([`/system/handle-invoice/edit-sale-replace/${row.id}`]);\r\n      } else {\r\n        if (this.loaiHoaDon == '01GTKT') {\r\n          this.router.navigate([`/system/vat-invoice/${row.id}`]);\r\n        } else {\r\n          if (this.loaiHoaDon == sEnum.loaihoadon.KPTQ07)\r\n            this.router.navigate([`/system/non-tariff-invoice/${row.id}`]);\r\n          else\r\n            this.router.navigate([`/system/sale-invoice/${row.id}`]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  viewDetailInvoice(row) {\r\n    if (this.isTT78 && row.xml_type != '3' && row.status == 'DA_XUAT' && Number.parseInt(row.invoice_number) > 0) {\r\n      if (Number.parseInt(row.adjustment_type) == 5) {\r\n        if (this.loaiHoaDon == '01GTKT')\r\n          this.router.navigate([`/system/handle-invoice/edit-adjust/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n        else\r\n          this.router.navigate([`/system/handle-invoice/edit-sale-adjust/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n      } else if (Number.parseInt(row.adjustment_type) == 3) {\r\n        if (this.loaiHoaDon == '01GTKT')\r\n          this.router.navigate([`/system/handle-invoice/edit-replace/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n        else\r\n          this.router.navigate([`/system/handle-invoice/edit-sale-replace/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n      } else {\r\n        if (this.loaiHoaDon === '01GTKT') {\r\n          this.router.navigate([`/system/vat-invoice/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n        } else {\r\n          if (this.loaiHoaDon == sEnum.loaihoadon.KPTQ07)\r\n            this.router.navigate([`/system/non-tariff-invoice/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n          else\r\n            this.router.navigate([`/system/sale-invoice/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (Number.parseInt(row.adjustment_type) == 5) {\r\n        if (row.is_adjustment_invoices || row.is_outside_process) {\r\n          if (row.is_adjustment_invoices)\r\n            this.router.navigate([`/system/handle-invoice/multiple-adjust/${row.id}`]);\r\n          else\r\n            this.router.navigate([`/system/handle-invoice/adjust-without-software/${row.id}`]);\r\n        }\r\n        else {\r\n          if (this.loaiHoaDon === '01GTKT')\r\n            this.router.navigate([`/system/handle-invoice/edit-adjust/${row.id}`]);\r\n          else if (this.loaiHoaDon == sEnum.loaihoadon.KPTQ07)\r\n            this.router.navigate([`/system/handle-invoice/edit-non-tariff-adjust/${row.id}`]);\r\n          else\r\n            this.router.navigate([`/system/handle-invoice/edit-sale-adjust/${row.id}`]);\r\n        }\r\n\r\n      } else if (Number.parseInt(row.adjustment_type) == 3) {\r\n        if (row.is_outside_process)\r\n          this.router.navigate([`/system/handle-invoice/replace-without-software/${row.id}`]);\r\n        else {\r\n          if (this.loaiHoaDon === '01GTKT')\r\n            this.router.navigate([`/system/handle-invoice/edit-replace/${row.id}`]);\r\n          else if (this.loaiHoaDon == sEnum.loaihoadon.KPTQ07)\r\n            this.router.navigate([`/system/handle-invoice/edit-non-tariff-replace/${row.id}`]);\r\n          else\r\n            this.router.navigate([`/system/handle-invoice/edit-sale-replace/${row.id}`]);\r\n        }\r\n      } else {\r\n        if (this.loaiHoaDon === '01GTKT') {\r\n          this.router.navigate([`/system/vat-invoice/${row.id}`]);\r\n        } else {\r\n          if (this.loaiHoaDon == sEnum.loaihoadon.KPTQ07)\r\n            this.router.navigate([`/system/non-tariff-invoice/${row.id}`]);\r\n          else\r\n            this.router.navigate([`/system/sale-invoice/${row.id}`]);\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  async delete(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.selectedItems.length || data) {\r\n      const status = '';\r\n      let ids = '';\r\n      if (data) {\r\n        ids = data.id;\r\n      } else {\r\n        ids = this.selectedRows.join(',');\r\n      }\r\n      const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          Library.showloading();\r\n          this.vatService.delete(ids).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n              this.loadList(this.paramSearch);\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => {\r\n          }, () => {\r\n            Library.hideloading();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  giuSo() {\r\n    Library.showloading();\r\n    const sub = this.vatService.getTemplate().subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const initialState = {\r\n          invoice_releases: rs.data.invoice_releases\r\n        };\r\n        this.bsModalRef = this.modalService.show(KeepNumberComponent, {\r\n          class: 'modal-lg', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n  \r\n  view(data) {\r\n    if (this.selectedItems.length > 0 || data) {\r\n      const _lst = this.selectedItems.filter(p => p.status === 'DA_XUAT');\r\n      if (_lst.length > 0 || data) {\r\n        // if (_lst.length > 10) {\r\n        //   Library.notify(this._translate.NOTIFY.only_up_to_100_invoices_can_be_selected_for_viewing, 'error');\r\n        //   return false;\r\n        // }\r\n        if (this.selectedItems.length === 1) {\r\n          this.dataInfor = this.selectedItems[0];\r\n        } else {\r\n          this.dataInfor = data;\r\n        }\r\n        let ids = [];\r\n        if (data) {\r\n          ids.push(data.id);\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          let data = this.vatService.taodulieuXemMau(ids);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_hoa_don\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  inChuyenDoi(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.selectedItems.length || data) {\r\n      const _lst = this.selectedItems.filter(p => p.status == 'DA_XUAT');\r\n      if (_lst.length > 0 || data) {\r\n        let ids = [];\r\n        if (data) {\r\n          if (data.status === 'DA_XUAT') {\r\n            ids.push(data.id);\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_print_convert, 'error');\r\n            return;\r\n          }\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          const data = this.vatService.taodulieuInMau(ids, false);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          // Xem nhiều trang \r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.in_chuyen_doi_hd\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  guibenmua(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'DA_XUAT') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      if (this.selectedItems.filter(p => p.status === 'DA_XUAT').length === 0) {\r\n        check = false;\r\n      }\r\n    }\r\n\r\n    if (check && (this.selectedItems.length || data)) {\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedItems.filter(p => p.status === 'DA_XUAT').map(p => p.id);\r\n      }\r\n      this.vatService.layCacHoaDonKySoHangLoat(ids, this.loaiHoaDon).subscribe((rs: any) => {\r\n        if (rs[0].status === 'success') {\r\n          const initialState = {\r\n            invoiceList: rs[0].data.invoices,\r\n            configs: rs[1].data.configs\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SendListEmailComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_invoice_selected, 'error');\r\n    }\r\n  }\r\n\r\n  viewAttachFile(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (data) {\r\n      Library.showloading();\r\n      this.vatService.showAttachFile(data.id).subscribe((rs: any) => {\r\n        if (rs.status === 'success') {\r\n          if (rs.data && rs.data.invoice && rs.data.invoice.invoice_files.length > 0) {\r\n            const initialState = {\r\n              fileData: rs.data.invoice.invoice_files,\r\n              view_attach_file: true,\r\n            };\r\n            this.bsModalSignRef = this.modalService.show(ViewAttachFileComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-lg',\r\n              initialState\r\n            });\r\n\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_file_attach, 'error');\r\n          }\r\n\r\n          // let subModal = this.modalService.onHide.subscribe(() => {\r\n          //   if (this.bsModalSignRef.content.successSaveItem) {\r\n          //     this.selectedItems = [];\r\n          //     this.selectedRows = [];\r\n          //     //this.loadList(this.paramSearch);\r\n          //     subModal.unsubscribe();\r\n          //   }\r\n          // });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n\r\n  sendInvoice(id) {\r\n    Library.showloading();\r\n    let sub = this.vatService.showToSendInvoice(id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            this.loadList(this.paramSearch);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  customizeText = (url) => {\r\n    this.invoiceService.handleTotalGrid(url.value, this.objStatusBtn, this.dataGrid);\r\n    return '';\r\n  }\r\n\r\n  kyHangLoat(data?) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n      Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n      return;\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'GIU_SO') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      this.selectedItems.forEach(item => {\r\n        if (item.status !== 'GIU_SO') {\r\n          check = false;\r\n        }\r\n      });\r\n    }\r\n    if (check && (this.selectedItems.length || data)) {\r\n      // if (this.selectedItems.length > 50 && !data) {\r\n      //   Library.notify(this._translate.NOTIFY.only_up_to_25_invoices_can_be_selected_for_sign, 'error');\r\n      //   return false;\r\n      // }\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedRows;\r\n      }\r\n      this.vatService.getInvoicesWaitSign(ids, this.loaiHoaDon).subscribe((rs: any) => {\r\n        if (rs[0].status === 'success') {\r\n          let search = InvoicesService.getSearchParams(this.route);\r\n          const initialState = {\r\n            invoiceList: rs[0].data.invoices,\r\n            configs: rs[1].data.configs,\r\n            isHdGTGT: this.loaiHoaDon === '01GTKT' ? true : false,\r\n            search: search\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SignManyComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(this.paramSearch);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_invoice_waite_sign_selected, 'error');\r\n    }\r\n  }\r\n\r\n  async napHDTuExcelDt() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    Library.showloading();\r\n    this.vatService.getImportInvoice(this.loaiHoaDon).subscribe((res: any) => {\r\n      this.invoice_releases = Helper.convertDataToImportInvoice(res[0]);\r\n      // Hàng hóa dịch vụ\r\n      this.templatesTT78 = Helper.convertTemplatesToInvoiceResolver(res[4]).filter(item => item.template_type !== 'HOA_DON_KHOI_TAO_TU_MAY_TINH_TIEN' && item.template_type !== 'PHIEU_THU_MAY_TINH_TIEN');\r\n      this.select.products = res[1].data.products;\r\n      ////\r\n      if (this.configs.system_parameter.display_delivery_information) {\r\n        this.invoice_releases = null;\r\n        this.templatesTT78 = null;\r\n      }\r\n      ////\r\n      this.select.unit_codes = res[2].data.DM_DON_VI_TINH;\r\n      this.select.select_provisions_on_accounts = res[2].data.DM_DINH_KHOAN;\r\n      this.select.payment_method_names = res[2].data.DM_HINH_THUC_THANH_TOAN;\r\n      this.select.vats = res[2].data.DM_TY_LE_VAT;\r\n      let search = InvoicesService.getSearchParams(this.route);\r\n      const initialState = {\r\n        isHdGTGT: this.loaiHoaDon === '01GTKT' ? true : false,\r\n        invoice_releases: this.invoice_releases,\r\n        select: this.select,\r\n        isAccessExportInv: this.isAccessExportInv,\r\n        templatesTT78: this.templatesTT78,\r\n        infoDangKy: this.infoDangKy,\r\n        search: search,\r\n        loaiHoaDon: this.loaiHoaDon\r\n      };\r\n      this.bsModalImportRef = this.modalImportService.show(\r\n        ImportInvoicesDtComponent,\r\n        {\r\n          backdrop: 'static',\r\n          keyboard: false,\r\n          class: 'modal-lg full-width',\r\n          initialState\r\n        }\r\n      );\r\n      const subModal = this.modalImportService.onHide.subscribe(() => {\r\n        if (this.bsModalImportRef.content.successSaveItem) {\r\n          this.selectedItems = [];\r\n          this.selectedRows = [];\r\n        }\r\n        this.loadList(this.paramSearch);\r\n        subModal.unsubscribe();\r\n      });\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  inPXK(data) {\r\n    if (this.selectedItems.length > 0 || data) {\r\n      const _lst = this.selectedItems.filter(p => p.adjustment_type != \"7\" && p.adjustment_type != \"2\");\r\n      if (_lst.length > 0 || data) {\r\n        if (this.selectedItems.length === 1) {\r\n          this.dataInfor = this.selectedItems[0];\r\n        } else {\r\n          this.dataInfor = data;\r\n        }\r\n        let ids = [];\r\n        if (data) {\r\n          if (data.adjustment_type == \"7\" || data.adjustment_type == \"2\") {\r\n            Library.notify(this._translate.NOTIFY.not_print_transport, 'error');\r\n            return;\r\n          }\r\n          ids.push(data.id);\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        const dulieu = this.vatService.taodulieuInPXK(ids);\r\n        dulieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n        this.vPreviewInvService.xemMau(dulieu);\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.not_print_transport, 'error');\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  /* Tải file xml hóa đơn*/\r\n  taiHDXml() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = [];\r\n        ids = _lst.map(e => e.id);\r\n        Library.showloading();\r\n        let sub = this.vatService.xuatHDXml(ids).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n          } else {\r\n            Library.notify(rs.message, \"error\");\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n  /* In biên bản trả hàng */\r\n  inBBTraHang(data) {\r\n    if (data) {\r\n      if (data.status != sEnum.statusInv.DaXuat) {\r\n        Library.notify(this._translate.NOTIFY.not_print_delivery_record, 'error');\r\n        return;\r\n      }\r\n      Library.showloading();\r\n      let sub = this.vatService.xuatBBTraHang(data.id).subscribe(res => {\r\n        if (res.status === 'success') {\r\n          const file = res.data.invoice;\r\n          Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n        } else {\r\n          Library.notify(res.message, 'error');\r\n        }\r\n        Library.hideloading();\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n        Library.hideloading();\r\n      });\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.not_print_delivery_record, 'error');\r\n      return;\r\n    }\r\n  }\r\n  taiHDPdf() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = _lst.map(e => e.id);\r\n        this.downloadPdf.downloadPdf(ids, 'invoices', 'invoice', false);\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n  inBBGiaoNhan() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems;\r\n      let ids = [];\r\n      ids = _lst.map(e => e.id);\r\n      const initialState = {\r\n        items: ids,\r\n        isXuatHD: false,\r\n        hinhthucxuat: '',\r\n        typeAction: 'BIEN_BAN_GIAO_NHAN',\r\n        province_name: this.province_name\r\n      };\r\n      this.vPreviewInvService.hienthiFormViewMau(initialState);\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'NAP_HD_TU_EXCEL_DT') {\r\n      this.napHDTuExcelDt();\r\n    } else if (e.itemData.id === 'GIU_SO') {\r\n      this.giuSo();\r\n    } else if (e.itemData.id === 'KY_SO') {\r\n      this.kyHangLoat(null);\r\n    } else if (e.itemData.id === 'SUA') {\r\n      this.edit(null);\r\n    } else if (e.itemData.id === 'XOA') {\r\n      this.delete(null);\r\n    } else if (e.itemData.id === 'XEM') {\r\n      this.view(null);\r\n    } else if (e.itemData.id === 'INCHUYENDOI') {\r\n      this.inChuyenDoi(null);\r\n    } else if (e.itemData.id === 'GUI_BEN_MUA') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'LIST_INVOICE_BUY') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'DETAILS_OF_EACH_GOODS_AND_SERVICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'ADD_ONE_INVOICE') {\r\n      this.router.navigate(['/system/invoice-buy/create']);\r\n    } else if (e.itemData.id === 'ADD_MULTIPLE_INVOICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'IN_PXK') {\r\n      this.inPXK(null);\r\n    } else if (e.itemData.id == \"TAI_HD_XML\") {\r\n      this.taiHDXml();\r\n    } else if (e.itemData.id == \"TAI_HD_PDF\") {\r\n      this.taiHDPdf();\r\n    } else if (e.itemData.id == \"IN_BB_GIAO_NHAN\") {\r\n      this.inBBGiaoNhan();\r\n    }\r\n  }\r\n  LydoKTiepNhan(data) {\r\n    let lstErr = JSON.parse(data.error_content_invoice);\r\n    const initialState = {\r\n      lstErr: lstErr,\r\n      notifyType: \"THONG_BAO_LOI_CQT\"\r\n    };\r\n    this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n      backdrop: 'static',\r\n      keyboard: true,\r\n      class: 'modal-lg modal-margin-width',\r\n      initialState\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n    // this.ioSignature.unsubscribe();\r\n  }\r\n  /* Trạng thái thanh toán */\r\n  trangthaithanhtoan(data) {\r\n    if (Number.parseInt(data.invoice_number) > 0) {\r\n      if (data.payment_status)\r\n        return \"Đã thanh toán\";\r\n      else\r\n        return \"Chưa thanh toán\";\r\n    }\r\n    else\r\n      return \"\";\r\n  }\r\n  iterator(a, take, skip) {\r\n    let current = skip * 10;\r\n    let l = a.length;\r\n    let end = current + take;\r\n    let part = a.slice(current, end);\r\n    current = end < l ? end : 0;\r\n    return part;\r\n  }\r\n\r\n  onContentReady(e) {\r\n    if (e) {\r\n      const dataSource = this.dataGrid.instance.getDataSource();\r\n      this.pageSize = dataSource ? dataSource.items().length : 0;\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <!-- Thông tin trên hóa đơn -->\\r\\n    <vat-form-invoice [dataSource]=\\\"dataSource\\\" [invoice_products]=\\\"invoice_products\\\" [formatter]=\\\"formatter\\\"\\r\\n      [frmData]=\\\"frmData\\\" [_objTemplateSelect]=\\\"_objTemplateSelect\\\" [_oTemplateTT78]=\\\"_oTemplateTT78\\\"\\r\\n      [extentionGrid]=\\\"extentionGrid\\\" (onInvoiceCurrent)=\\\"onInvoiceCurrent($event)\\\"\\r\\n      (onFormChange)=\\\"getDataInChildForm($event)\\\" (onTemplateChange)=\\\"onTemplateChange($event)\\\"\\r\\n      [isShowButtonWaiteSign]=\\\"isShowButtonWaiteSign\\\" [isTT78]=\\\"isTT78\\\" [infoDangKy]=\\\"infoDangKy\\\"\\r\\n      [pkInvoiceSelectWaitSign]=\\\"pkInvoiceSelectWaitSign\\\" (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\"\\r\\n      (onTemplateTT78TypeChange)=\\\"onTemplateTT78TypeChange($event)\\\" [isRequired]=\\\"isRequired\\\" [ttDaXuatHoaDon]=\\\"ttDaXuatHoaDon\\\"></vat-form-invoice>\\r\\n    <!-- Hàng hóa trên hóa đơn -->\\r\\n    <vat-product-grip #child [dataSource]=\\\"dataSource\\\" [invoice_products]=\\\"invoice_products\\\"\\r\\n      [formDataInInvoice]=\\\"frmData\\\" [isTT78]=\\\"isTT78\\\" [formatter]=\\\"formatter\\\" [isHdGTGT]=\\\"isHdGTGT\\\"\\r\\n      [_objTemplateSelect]=\\\"_objTemplateSelect\\\" [_oTemplateTT78]=\\\"_oTemplateTT78\\\" [extentionGrid]=\\\"extentionGrid\\\"\\r\\n      (importExcel)=\\\"fillDataToForm($event)\\\">\\r\\n    </vat-product-grip>\\r\\n\\r\\n    <!-- Hiển thị tiền trên footer bảng hàng hóa hóa đơn GTGT -->\\r\\n    <div *ngIf=\\\"isHdGTGT\\\" class=\\\"table-footer\\\">\\r\\n      <!-- Tổng tiền -->\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <div class=\\\"vat amount-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.amount_after_vat\\\" step=\\\"0\\\" [format]=\\\"formatter.tong_tien\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Tiền thuế -->\\r\\n      <div class=\\\"table-footer-2\\\">\\r\\n        <div class=\\\"vat amount-vat-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.total_amount_vat\\\" step=\\\"0\\\" [format]=\\\"formatter.tien_thue\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Thành tiền -->\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <div class=\\\"vat amount-after-vat-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.amount\\\" step=\\\"0\\\" [format]=\\\"formatter.thanh_tien\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Thành tiền chưa chiết khấu -->\\r\\n      <div class=\\\"table-footer-4\\\">\\r\\n        <div class=\\\"vat amount-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.amount_without_discount\\\" step=\\\"0\\\" [format]=\\\"formatter.thanh_tien_chua_ck\\\"\\r\\n            [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- Hiển thị tiền trên footer bảng hàng hóa hóa đơn bán hàng -->\\r\\n    <div *ngIf=\\\"!isHdGTGT\\\" class=\\\"table-footer\\\">\\r\\n      <!-- Tổng tiền -->\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_after_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: true, step:'0'}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <!-- Thành tiền -->\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-after-vat-table-footer\\\" dataField=\\\"amount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.tong_tien, disabled: true, step:'0'}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n    </div>\\r\\n    <dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n      [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n      <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n        <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.update_customer }}</p>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <dx-button text=\\\"{{ _translate.CONTROLL.LABEL.update }}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </dx-popup>\\r\\n    <!-- vùng chọn file -->\\r\\n    <div class=\\\"row after-table\\\">\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <file-upload-multiple [fileData]=\\\"fileData\\\" (fileChange)=\\\"getFileData($event)\\\"></file-upload-multiple>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-2\\\">\\r\\n      </div>\\r\\n      <div class=\\\"col-md-5\\\">\\r\\n        <div\\r\\n          *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY' && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY_THU_TIEN' && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY_HOAN_TIEN') \\r\\n        ||(invoiceTemplateTT78 && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY' && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY_THU_TIEN' && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY_HOAN_TIEN') )\\\"\\r\\n          class=\\\"vat money-pull-right\\\">\\r\\n          <!-- Cộng tiền hàng nguyên tệ -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.on_currency_amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.on_currency_amount\\\" tabIndex=\\\"-1\\\" format=\\\"0,###\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Thành tiền -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Cộng chiết khấu -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_amount_discount}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_discount\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                [format]=\\\"formatter.tien_chiet_khau\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tiền thuế GTGT (5%) -->\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat5}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat5\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tiền thuế GTGT (8%) -->\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat8}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat8\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tiền thuế GTGT (10%) -->\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat10}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat10\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tiền thuế GTGT (Khác) -->\\r\\n          <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.amount_vat_other\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Phí bảo vệ môi trường -->\\r\\n          <div *ngIf=\\\"configs.system_parameter.environmental_fee\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">Phí bảo vệ môi trường</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.environmental_fee\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" (onValueChanged)=\\\"changeEnvironmentalFee()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Lệ phí cấp GCN đăng kiểm -->\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_DANG_KIEM')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_DANG_KIEM'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.fees}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.registry_fee\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tiền phí khác -> other_fee -->\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_XANG_DAU') \\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_XANG_DAU'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_fee\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Thuế khác -->\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type=='HOA_DON_VE_MAY_TONG_HOP' || invoicereleaseTempt.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || invoicereleaseTempt.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')) || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type=='HOA_DON_VE_MAY_TONG_HOP' || invoiceTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || invoiceTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertax}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_tax\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" (onKeyDown)=\\\"keyDown($event)\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tiền phí khác ->other_charge -->\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type=='HOA_DON_VE_MAY_TONG_HOP' || invoicereleaseTempt.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || invoicereleaseTempt.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')) || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type=='HOA_DON_VE_MAY_TONG_HOP' || invoiceTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || invoiceTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_charge\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" [disabled]=\\\"!frmData.auto_value\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div\\r\\n          *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\r\\n        || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')))\\\"\\r\\n          class=\\\"vat money-pull-right\\\">\\r\\n          <!-- Phụ thu -->\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.surcharge}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_charge\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tiền phí khác ->total_other -->\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY'))\\\" class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [(value)]=\\\"frmData.total_other\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tiền phí khác->other_fee -->\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [(value)]=\\\"frmData.other_fee\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Phí hoàn vé -->\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.refund_fee}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.money_ticket_return\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tổng tiền vé sau thuế -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_fare_after_tax}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_ticket_with_vat\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\"\\r\\n                step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\" [disabled]=\\\"!frmData.auto_value\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <div\\r\\n            *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\r\\n            || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')))\\\"\\r\\n              class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertax}}</div>\\r\\n            <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')\\r\\n            || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\"\\r\\n              class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.othertaxair}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_tax\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tiền phí khác -->\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\r\\n          || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.money_other}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                [(value)]=\\\"frmData.other_fee\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tổng tiền vé -->\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_fare}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_ticket\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" [disabled]=\\\"!frmData.auto_value\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tổng các khoản khác -->\\r\\n          <div *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n          || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\"\\r\\n            class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_other\\\" [format]=\\\"formatter.tong_tien\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                (onKeyDown)=\\\"keyDown($event)\\\" [disabled]=\\\"!frmData.auto_value\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div\\r\\n        *ngIf=\\\"((invoicereleaseTempt && (invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY' || invoicereleaseTempt.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN'))\\r\\n      || (invoiceTemplateTT78 && (invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY' || invoiceTemplateTT78.template_type==='HOA_DON_VE_MAY_BAY_THU_TIEN')))\\\"\\r\\n        class=\\\"col-md-12\\\" style=\\\"margin:10px 0 !important;\\\">\\r\\n        <!-- Phí dịch vụ bán vé -->\\r\\n        <h3 class=\\\"font-weight-bold\\\">{{ _translate.CONTROLL.LABEL.ticketing_service_fee}}</h3>\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\">\\r\\n            <!-- Tiền phí dịch vụ bán vé -->\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 52%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.ticketing_service_charge}}\\r\\n              </div>\\r\\n              <div style=\\\"width: 48%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-number-box [(value)]=\\\"frmData.money_service_ticket\\\" format=\\\"#,###\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                  (onValueChanged)=\\\"onVatChange()\\\">\\r\\n                </dx-number-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right thue-suat-may-bay\\\" style=\\\"max-width: 23%\\\">\\r\\n            <!-- Thuế suất GTGT (%) -->\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.tax_GTGT}}</div>\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-select-box [(value)]=\\\"frmData.vat_service_ticket\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" tabIndex=\\\"-1\\\"\\r\\n                  [items]=\\\"select.vats\\\" (onValueChanged)=\\\"onVatChange()\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-3 pr-0 money-pull-right\\\" style=\\\"max-width: 19%\\\">\\r\\n            <!-- Tiền thuế -->\\r\\n            <div class=\\\"dx-field\\\">\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat}}</div>\\r\\n              <div style=\\\"width: 50%\\\" class=\\\"dx-field-value\\\">\\r\\n                <dx-number-box [(value)]=\\\"frmData.total_vat_service_ticket\\\" format=\\\"#,###\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                  [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\">\\r\\n                </dx-number-box>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-md-4 \\\" style=\\\"max-width: 33%\\\">\\r\\n            <div class=\\\"prt-1 money-pull-right\\\">\\r\\n              <!-- Tổng phí dịch vụ sau thuế -->\\r\\n              <div class=\\\"dx-field\\\" style=\\\"width: 395px\\\">\\r\\n                <div style=\\\"width: 44.3%\\\" class=\\\"dx-field-label\\\">{{\\r\\n                  _translate.CONTROLL.LABEL.total_after_tax_service_charge}}</div>\\r\\n                <div style=\\\"width: 55.7%\\\" class=\\\"dx-field-value\\\">\\r\\n                  <dx-number-box [(value)]=\\\"frmData.total_service_ticket_with_vat\\\" format=\\\"#,###\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                    [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberTicketChange()\\\">\\r\\n                  </dx-number-box>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Giảm trừ nghị định 92 -->\\r\\n      <div class=\\\"col-md-8\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_exemption_decree\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Đã giảm </p>\\r\\n          <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.text_exemption_decree\\\"\\r\\n            [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> tương ứng 30% mức tỷ lệ để tính thuế giá trị gia tăng theo Nghị\\r\\n            quyết số 406/NQ-UBTVQH15</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Giảm trừ nghị quyết 43 -->\\r\\n      <!-- Tỷ lệ % doanh thu -->\\r\\n      <div class=\\\"col-md-8\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Tỷ lệ % trên doanh thu </p>\\r\\n\\r\\n          <div class=\\\"toggle normal\\\" style=\\\"display: flex; align-items: center; margin-top: -6px;\\\">\\r\\n            <img id=\\\"link14\\\" style=\\\"cursor: pointer;padding-left: 2px;padding-right: 7px\\\"\\r\\n              src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" (click)=\\\"guideSales()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n          </div>\\r\\n          <dx-popover target=\\\"#link14\\\" position=\\\"top\\\" [width]=\\\"350\\\" [(visible)]=\\\"isDisplayGuideSale\\\">\\r\\n            <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n              <p>- 1% : Phân phối, cung cấp hàng hóa dịch vụ</p>\\r\\n              <p>- 5% : Dịch vụ xây dựng không bao thầu nguyên vật liệu</p>\\r\\n              <p>- 3% : Sản xuất, vận tải, dịch vụ có gắn với hàng hóa, xây dựng có bao thầu nguyên vật liệu</p>\\r\\n              <p>- 2% : Hoạt động kinh doanh khác</p>\\r\\n            </div>\\r\\n          </dx-popover>\\r\\n\\r\\n          <dx-number-box [width]=\\\"50\\\" [(value)]=\\\"frmData.sales_percentage\\\"\\r\\n            (onValueChanged)=\\\"onChangeSalePercen($event)\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> %</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- Đã giảm 20% -->\\r\\n      <div class=\\\"col-md-7\\\" style=\\\"margin-top:5px\\\">\\r\\n        <div *ngIf=\\\"frmData.is_resolution_43\\\" style=\\\"display: inline-flex;margin-top:5px\\\">\\r\\n          <p style=\\\"margin-right: 5px;margin-top: 5px\\\">Đã giảm </p>\\r\\n          <dx-number-box [format]=\\\"formatter.tong_tien\\\" [(value)]=\\\"frmData.money_resolution_43\\\"\\r\\n            [readOnly]=\\\"!frmData.auto_value\\\"></dx-number-box>\\r\\n          <p style=\\\"margin-left: 5px;margin-top: 5px\\\"> {{ _translate.THONG_TIN.tinh_thue_nq101}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-5\\\" style=\\\"margin-top: 10px\\\">\\r\\n        <div class=\\\"vat money-pull-right\\\">\\r\\n          <!-- Tổng tiền giảm trừ không chịu thuế -->\\r\\n          <div class=\\\"dx-field\\\" *ngIf=\\\"isHdGTGT\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_deduction_not_taxable}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_deduction_not_taxable\\\" [format]=\\\"formatter.tong_tien\\\" >\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tổng tiền giảm trừ khác -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.other_total_deduction}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.other_total_deduction\\\" [format]=\\\"formatter.tong_tien\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Tổng tiền sau thuế -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-number-box [(value)]=\\\"frmData.total_payment\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                [disabled]=\\\"!frmData.auto_value\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                (onValueChanged)=\\\"totalPaymentChange($event)\\\">\\r\\n              </dx-number-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"vat total-payment-in-word\\\">\\r\\n          <!-- Số tiền bằng chữ -->\\r\\n          <div class=\\\"dx-field\\\">\\r\\n            <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_payment_in_word}}</div>\\r\\n            <div class=\\\"dx-field-value\\\">\\r\\n              <dx-text-box [(value)]=\\\"frmData.total_payment_in_word\\\" [disabled]=\\\"!frmData.auto_value\\\"></dx-text-box>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row button-action\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"pull-left\\\">\\r\\n          <!-- Xem trước hóa đơn -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon\\\" (click)=\\\"preview()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Xem hóa đơn -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- In chuyển đổi -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon\\\" (click)=\\\"inChuyenDoi()\\\" [(icon)]=\\\"this._translate.ICONS.print\\\"\\r\\n            [text]=\\\"inChuyenDoiText()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Lý do từ chối -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"isTuChoi\\\" (click)=\\\"xemlydotuchoi()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n            text=\\\"{{_translate.CONTROLL.BUTTON.reason_reject}}\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <!-- Trình ký -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !isAccessExportInv\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.sign_approval}}\\\"\\r\\n            icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"eSubmit('TRINH_KY')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\"\\r\\n            [useSubmitBehavior]=\\\"true\\\"></dx-button>\\r\\n          <!-- Xuất hóa đơn -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet\\\" appScrollToInvalid\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\" [(icon)]=\\\"this._translate.ICONS.export_inv\\\"\\r\\n            (click)=\\\"eSubmit('XUAT',true)\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n          </dx-button>\\r\\n          <!-- Ghi tạm -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet\\\" appScrollToInvalid\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" [(icon)]=\\\"this._translate.ICONS.save\\\"\\r\\n            (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\"\\r\\n            [disabled]=\\\"isDisable\\\">\\r\\n          </dx-button>\\r\\n          <!-- Tạo mới -->\\r\\n          <dx-button disableDoubleClick *ngIf=\\\"!showTraLai && !showKyDuyet\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.create_new}}\\\"\\r\\n            [(icon)]=\\\"this._translate.ICONS.add_new\\\" (click)=\\\"handleAddNew()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Trả lại -->\\r\\n          <dx-button *ngIf=\\\"showTraLai\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.return}}\\\"\\r\\n            icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"traLai()\\\" type=\\\"default\\\"></dx-button>\\r\\n          <!-- Đóng -->\\r\\n          <dx-button *ngIf=\\\"!showTraLai\\\" appBackButton type=\\\"default\\\" [(icon)]=\\\"this._translate.ICONS.come_back\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n          <!-- Đóng -->\\r\\n          <dx-button *ngIf=\\\"showTraLai\\\" type=\\\"default\\\" [(icon)]=\\\"this._translate.ICONS.come_back\\\"\\r\\n            text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\" (click)=\\\"dongtralai()\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</form>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}.vat.total-payment-in-word .dx-field-label{width:12%}.vat.total-payment-in-word .dx-field-value{width:88% !important}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:25px}.pr-0.dx-selectbox .dx-texteditor-input:-moz-read-only{padding-bottom:17px}.pr-0.dx-selectbox .dx-texteditor-input:read-only{padding-bottom:17px}::ng-deep .nd92Notify .modal-content{width:80%}::ng-deep .mauhoadon .modal-content{width:67%}::ng-deep .mauhoadon43 .modal-content{width:72%}::ng-deep .thue-suat-may-bay .dx-selectbox .dx-texteditor-input{padding-bottom:13px}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { Base64 } from 'js-base64';\r\nimport { AuthService, Helper, Library, sEnum, SocketService, VChanggeMoneyService, VPreviewInvService, VStringService } from '@core/index';\r\nimport { ProductGripComponent } from '../product-grip/product-grip.component';\r\nimport { FormInvoiceComponent } from '../form-invoice/form-invoice.component';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { SendInvoicesComponent } from '../send-invoices/send-invoices.component';\r\nimport * as _ from 'lodash';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { Observable } from 'rxjs';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { ConfigsService } from '@modules/configs/shared';\r\nimport { pattern } from '@config/index';\r\nimport { NotifyReduceTaxComponent } from '@shared/index';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-create-invoice',\r\n  templateUrl: './invoice.component.html',\r\n  styleUrls: ['./invoice.component.scss']\r\n})\r\nexport class InvoiceComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  @ViewChild(ProductGripComponent) productGrip: ProductGripComponent;\r\n  @ViewChild(FormInvoiceComponent) formInvoice: FormInvoiceComponent;\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  frmData: InvoiceModel = new InvoiceModel(1);\r\n  frmTraLai = {\r\n    reason: ''\r\n  };\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  is_multi_vat: any;\r\n  total_payment: any;\r\n  listDM: any;\r\n  showTraLai = false;\r\n  showKyDuyet = false;\r\n  isHdGTGT = false;\r\n  isAccessExportInv = false;\r\n  showPopup = false;\r\n  bsModalRef: BsModalRef;\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n  select: any = {};\r\n  isDisable = false;\r\n  _objTemplateSelect: any = {};\r\n  _oTemplateTT78: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  extentionGrid: any = {};\r\n  configs: any;\r\n  _translate: any;\r\n  fileData: Array<any> = [];\r\n  tempKiFile = 0;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  _isValid = false;\r\n  isTuChoi = false;\r\n  valueChange: string;\r\n  invoicereleaseTempt: any;\r\n  invoiceTemplateTT78: any;\r\n  nodeSign: any;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  pkInvoiceCurrent: any;\r\n  pkInvoiceSelectWaitSign: any;\r\n  isShowButtonWaiteSign: boolean = true;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  isPassNQ43: boolean = false;\r\n  isDisplayGuideSale: boolean = false;\r\n  isRequired = false;\r\n  private isExportInvoice: boolean;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n    private confirmService: ConfirmService,\r\n    private configsService: ConfigsService,\r\n    private spinner: NgxSpinnerService,\r\n    private vPreviewInvService: ViewInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status === sEnum.statusInv.DaXuat || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && this.frmData.send_department_status === 'KHONG_DU_DK_CAP_MA')\r\n      || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && this.frmData.send_department_status === 'DA_GUI_CQT' && this.frmData.is_invoice_with_code)) {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n    /* Ẩn nghị định 92 */\r\n    // if (!this.isHdGTGT) {\r\n    //   if (this.configs.system_parameter.is_tb_nd92 === undefined) {\r\n    //     const initialState = {\r\n    //       typeNotify: \"DOI_TUONG_GIAM_THUE\",\r\n    //     };\r\n    //     this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n    //       backdrop: 'static',\r\n    //       keyboard: false,\r\n    //       class: 'nd92Notify modal-lg',\r\n    //       initialState\r\n    //     });\r\n\r\n    //     const subModal = this.modalService.onHide.subscribe(() => {\r\n    //       if (this.bsModalRef.content.successSaveItem == \"DONG_Y\") {\r\n    //         this.configs.system_parameter.is_tb_nd92 = true;\r\n    //       }\r\n    //       else {\r\n    //         this.configs.system_parameter.is_tb_nd92 = false;\r\n    //       }\r\n    //       let data = {\r\n    //         config: {\r\n    //           value: JSON.stringify(this.configs.system_parameter)\r\n    //         }\r\n    //       };\r\n    //       this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n    //         if (response.status == \"success\") {\r\n    //           this.configsService.getAll().subscribe((res) => {\r\n    //             if (res.data && res.data.configs)\r\n    //               this.authService.setConfigs(res.data.configs);\r\n    //           });\r\n    //           if (this.configs.system_parameter.is_tb_nd92) {\r\n    //             const initialState = {\r\n    //               typeNotify: \"HANG_HOA_GIAM_THUE\",\r\n    //             };\r\n    //             this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n    //               backdrop: 'static',\r\n    //               keyboard: false,\r\n    //               class: 'nd92Notify modal-lg',\r\n    //               initialState\r\n    //             });\r\n    //             const subModal = this.modalService.onHide.subscribe(() => {\r\n    //               if (this.bsModalRef.content.successSaveItem == \"DONG_Y\")\r\n    //                 this.frmData.is_exemption_decree = true;\r\n    //               else\r\n    //                 this.frmData.is_exemption_decree = false;\r\n    //               subModal.unsubscribe();\r\n    //             });\r\n    //           }\r\n    //         } else {\r\n    //         }\r\n    //       }, err => { }, () => {\r\n    //       });\r\n    //       subModal.unsubscribe();\r\n    //     });\r\n    //   }\r\n    //   else {\r\n    //     if (this.configs.system_parameter.is_tb_nd92 && !this.frmData.id) {\r\n    //       const initialState = {\r\n    //         typeNotify: \"HANG_HOA_GIAM_THUE\",\r\n    //       };\r\n    //       this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n    //         backdrop: 'static',\r\n    //         keyboard: false,\r\n    //         class: 'nd92Notify modal-lg',\r\n    //         initialState\r\n    //       });\r\n    //       const subModal = this.modalService.onHide.subscribe(() => {\r\n    //         if (this.bsModalRef.content.successSaveItem == \"DONG_Y\")\r\n    //           this.frmData.is_exemption_decree = true;\r\n    //         else\r\n    //           this.frmData.is_exemption_decree = false;\r\n    //         subModal.unsubscribe();\r\n    //       });\r\n    //     }\r\n    //   }\r\n    // }\r\n    let dateFromNQ43 = moment(\"01/07/2023\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n    let invoiceDateNQ43 = moment(new Date()).format('YYYY-MM-DD');\r\n    if (this.isPassNQ43)\r\n      invoiceDateNQ43 = moment(\"01/07/2023\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n    /* Nghị quyết số 43/2022/QH15 */\r\n    if (!this.isHdGTGT && invoiceDateNQ43 >= dateFromNQ43) {\r\n      if (this.configs.system_parameter.is_tb_nq43 === undefined) {\r\n        const initialState = {\r\n          typeNotify: \"DOI_TUONG_GIAM_THUE_NQ43\",\r\n        };\r\n        this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n          backdrop: 'static',\r\n          keyboard: false,\r\n          class: 'nd92Notify modal-lg',\r\n          initialState\r\n        });\r\n\r\n        const subModal = this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem == \"DONG_Y\") {\r\n            this.configs.system_parameter.is_tb_nq43 = true;\r\n          }\r\n          else {\r\n            this.configs.system_parameter.is_tb_nq43 = false;\r\n          }\r\n          let data = {\r\n            config: {\r\n              value: JSON.stringify(this.configs.system_parameter)\r\n            }\r\n          };\r\n          this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n            if (response.status == \"success\") {\r\n              this.configsService.getAll().subscribe((res) => {\r\n                if (res.data && res.data.configs)\r\n                  this.authService.setConfigs(res.data.configs);\r\n              });\r\n              if (this.configs.system_parameter.is_tb_nq43) {\r\n                const initialState = {\r\n                  typeNotify: \"DOI_TUONG_GIAM_THUE_NQ43\",\r\n                };\r\n                this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                  backdrop: 'static',\r\n                  keyboard: false,\r\n                  class: 'nd92Notify modal-lg',\r\n                  initialState\r\n                });\r\n                const subModal = this.modalService.onHide.subscribe(() => {\r\n                  if (this.bsModalRef.content.successSaveItem == \"DONG_Y\")\r\n                    this.frmData.is_resolution_43 = true;\r\n                  else\r\n                    this.frmData.is_resolution_43 = false;\r\n                  subModal.unsubscribe();\r\n                });\r\n              }\r\n            } else {\r\n            }\r\n          }, err => { }, () => {\r\n          });\r\n          subModal.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        if (this.configs.system_parameter.is_tb_nq43 && !this.frmData.id) {\r\n          const initialState = {\r\n            typeNotify: \"DOI_TUONG_GIAM_THUE_NQ43\",\r\n          };\r\n          this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'nd92Notify modal-lg',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalRef.content.successSaveItem == \"DONG_Y\")\r\n              this.frmData.is_resolution_43 = true;\r\n            else\r\n              this.frmData.is_resolution_43 = false;\r\n            subModal.unsubscribe();\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /* Disbale Form và bảng hàng hóa */\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    Library.showloading();\r\n    let status;\r\n    if (!this.frmData.id && !this.frmData.invoice_number) {\r\n      status = sEnum.processInv.ThemMoi;\r\n    }\r\n    if (this.frmData.id && !this.frmData.invoice_number) {\r\n      status = sEnum.statusInv.GhiTam;\r\n    }\r\n    if (this.frmData.id && this.frmData.invoice_number) {\r\n      status = sEnum.statusInv.ChoKy;\r\n    }\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (status === sEnum.processInv.ThemMoi) {\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.ghiTam(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss'); // moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n            this.frmData.id = rs.data.id;\r\n            this.setDataSessionStorage(this.frmData);\r\n            // demo kí số vào file\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            //  Lấy xml từ serer\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.ghiTamTT78(this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss'); // moment(rs.data.invoice_date).format('DD/MM/YYYY');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.frmData.id = rs.data.id;\r\n            this.setDataSessionStorage(this.frmData);\r\n            // demo kí số vào file\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            //  Lấy xml từ serer\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else if (status === sEnum.statusInv.GhiTam) {\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ server\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_number = rs.data.invoice_number;\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ server\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else if (status === sEnum.statusInv.ChoKy) {\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.edit(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, this.frmData.invoice_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editTT78(this.frmData.id, this.frmData, true).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n            // demo kí số vào file\r\n            //  Lấy xml từ serer\r\n            isNewXml = rs.data.is_new_xml;\r\n            if (isNewXml)\r\n              this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n            else\r\n              this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n            xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n            if (xmlInvoice != \"\") {\r\n              if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              } else {\r\n                this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n              }\r\n            }\r\n          } else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n  goiApiXuatHoaDon(xml_string) {\r\n    setTimeout(function () {\r\n      Library.showloading();\r\n    }, 20);\r\n    const sub = this.vatService.xuatHoaDon({\r\n      id: this.frmData.id,\r\n      xml_string: xml_string,\r\n      invoice_files: this.frmData.invoice_files\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.disablleScreen();\r\n        this.fileData = this.frmData.invoice_files;\r\n        if (VStringService._getValueToString(this.pkInvoiceCurrent) != \"\") {\r\n          this.vatService.delete(this.pkInvoiceCurrent).subscribe(rs => {\r\n          }, err => {\r\n          });\r\n        }\r\n        this.isShowButtonWaiteSign = false;\r\n        Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n        this.isExportInvoice = true;\r\n        this.setDataSessionStorage(this.frmData);\r\n        /* Cập nhật lại thông tin theo NĐ 92 */\r\n        if (!this.isHdGTGT) {\r\n          if (this.frmData.is_exemption_decree && !this.configs.system_parameter.is_tb_nd92) {\r\n            this.configs.system_parameter.is_tb_nd92 = true;\r\n            let data = {\r\n              config: {\r\n                value: JSON.stringify(this.configs.system_parameter)\r\n              }\r\n            };\r\n            this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n              if (response.status == \"success\") {\r\n                this.configsService.getAll().subscribe((res) => {\r\n                  if (res.data && res.data.configs)\r\n                    this.authService.setConfigs(res.data.configs);\r\n                });\r\n              } else {\r\n              }\r\n            }, err => { }, () => {\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.route.snapshot.queryParams['status'] === 'return') {\r\n      this.showTraLai = true;\r\n    }\r\n    if (this.route.snapshot.queryParams['status'] === 'sign') {\r\n      this.showKyDuyet = true;\r\n    }\r\n    let isViewTT32 = false;\r\n    if (this.route.snapshot.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    // kết nối websocket\r\n    this.connectWebsocket();\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // get cấu hình\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.configs = this.authService.getConfigs();\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      this.frmData.display_currency = JSON.stringify(this.configs.display_currency);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      const loaiHoaDon = data.type;\r\n      if (loaiHoaDon === sEnum.loaihoadon.GTKT01) {\r\n        this.isHdGTGT = true;\r\n      } else {\r\n        this.isHdGTGT = false;\r\n      }\r\n      if (this.infoDangKy) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n          this.isTT78 = true;\r\n      }\r\n      if (this.isTT78 == true && isViewTT32)\r\n        this.isTT78 = false;\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        if (isEdit) {\r\n          temptTT78 = data.init[3];\r\n          invoice = data.init[1];\r\n        }\r\n        else {\r\n          temptTT78 = data.init[1];\r\n        }\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          if (invoice && Number.parseInt(invoice.invoice_number) > 0) {\r\n            if (invoice.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == invoice.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n        if (isEdit)\r\n          invoice = data.init[3];\r\n      }\r\n      if (isEdit || this.vatService.isCopy) {\r\n        if (this.vatService.isCopy) {\r\n          this.khoiTaoKhiSua(this.vatService.data);\r\n        } else {\r\n          this.khoiTaoKhiSua(invoice);\r\n        }\r\n      } else {\r\n        this.khoiTaoKhiThemMoi();\r\n      }\r\n    });\r\n    const currentUser = this.authService.getCurrentUser();\r\n    if (currentUser && currentUser.account && (currentUser.account.tax_code == \"0102519041-999\" || currentUser.account.tax_code == \"8888888803\" || currentUser.account.tax_code == \"9999999671\"))\r\n      this.isPassNQ43 = true;\r\n    const listpermissions = currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  setDataSessionStorage(data) {\r\n    this.valueChange = JSON.stringify(data);\r\n  }\r\n\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  /* Kết nối đến socket */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.frmData.issuer_name = data.Data.IssuerName;\r\n          this.xuLiApiKhiXuat();\r\n        } else {\r\n          this.frmData.invoice_files.forEach(item => {\r\n            if (item.file_name === data.Data.Name) {\r\n              item.file_content = data.Data.Content;\r\n            }\r\n          });\r\n          this.tempKiFile++;\r\n          if (this.tempKiFile === this.frmData.invoice_files.length) {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  khoiTaoKhiThemMoi() {\r\n    // Khởi tạo thông tin hàng hóa\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n\r\n    this.select.payment_method_names.some(item => {\r\n      if (item.is_default) {\r\n        this.frmData.payment_method_name = item.code;\r\n        let _obj = this.select.payment_method_names.filter(p => p.code === item.code)[0];\r\n        if (_obj) {\r\n          this.frmData.payment_method_view_name = _obj.name;\r\n        }\r\n      }\r\n    });\r\n    if (VStringService._getValueToString(this.frmData.payment_method_name) === '') {\r\n      this.frmData.payment_method_name = 'TMCK';\r\n      this.frmData.payment_method_view_name = 'TM/CK';\r\n    }\r\n    // tạo mới đối tượng file\r\n    this.fileData = [];\r\n    // cấu hình thập phân thêm mới\r\n    // set value default\r\n    if (!this.isTT78) {\r\n      if (this.select.invoice_releases.length) {\r\n        this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.release_status != 'DA_HUY_SO');\r\n        this.frmData.invoice_release_id = this.select.invoice_releases[0].value;\r\n        this.frmData.template_id = this.select.invoice_releases[0].template_id;\r\n        for (const key in this.select.invoice_releases[0]) {\r\n          if (this.select.invoice_releases[0].hasOwnProperty(key)) {\r\n            this._objTemplateSelect[key] = this.select.invoice_releases[0][key];\r\n          }\r\n        }\r\n        this.is_multi_vat = this.select.invoice_releases[0].is_multi_vat;\r\n        this.invoicereleaseTempt = this.select.invoice_releases[0];\r\n      }\r\n    }\r\n    else {\r\n      if (this.select.templatesTT78.length) {\r\n        this.frmData.template_id = this.select.templatesTT78[0].value;\r\n        this.frmData.invoice_series = this.select.templatesTT78[0].invoice_series;\r\n        this.frmData.template_code = this.select.templatesTT78[0].template_code;\r\n        for (const key in this.select.templatesTT78[0]) {\r\n          if (this.select.templatesTT78[0].hasOwnProperty(key)) {\r\n            this._oTemplateTT78[key] = this.select.templatesTT78[0][key];\r\n          }\r\n        }\r\n        this.is_multi_vat = this.select.templatesTT78[0].is_multi_vat;\r\n        this.invoiceTemplateTT78 = this.select.templatesTT78[0];\r\n      }\r\n    }\r\n    this.frmData.currency_code = 'VND';\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    // Khởi tạo thông tin hàng hóa\r\n    const _lst = this.frmData.setInvoice_products_data(data.invoice_products);\r\n    if (_lst) {\r\n      _lst.forEach(item => {\r\n        if (item.product_name && item.unit_name) {\r\n          const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n          if (!obj1) {\r\n            if (VStringService._getValueToString(item.unit_code) == \"\")\r\n              item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n            let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n            if (oDuplicate)\r\n              item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n          }\r\n          else\r\n            if (!item.unit_code || (item.unit_code && item.unit_code != obj1.code))\r\n              item.unit_code = obj1.code;\r\n        }\r\n      });\r\n    }\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: _lst\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    // khởi tạo dữ liệu form\r\n    this.frmData.fillFormData(data);\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    // lấy file\r\n    if (this.vatService.isCopy) {\r\n      this.frmData.time_print_conversion = null;\r\n      this.fileData = [];\r\n      if (!this.isTT78) {\r\n        const _objRelease = this.select.invoice_releases.filter(p => p.value === this.frmData.invoice_release_id)[0];\r\n        if (_objRelease) {\r\n          if (_objRelease.number_survival === 0) {\r\n            const _lstReleaseOther = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.invoice_series == _objRelease.invoice_series && p.template_code == _objRelease.template_code && p.release_status != 'DA_HUY_SO');\r\n            if (_lstReleaseOther && _lstReleaseOther.length > 0) {\r\n              this.frmData.invoice_release_id = _lstReleaseOther[0].value;\r\n              this.frmData.template_id = _lstReleaseOther[0].template_id;\r\n            } else {\r\n              this.frmData.invoice_release_id = null;\r\n              this.frmData.template_id = null;\r\n            }\r\n          }\r\n        }\r\n        this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.release_status !== 'DA_HUY_SO');\r\n      }\r\n      else {\r\n        let _oTempt = this.select.templatesTT78.filter(p => p.value === this.frmData.template_id)[0];\r\n        if (_oTempt) {\r\n          this.frmData.template_id = _oTempt.value;\r\n          this.frmData.invoice_series = _oTempt.invoice_series;\r\n          this.frmData.template_code = _oTempt.template_code;\r\n        }\r\n        else {\r\n          this.frmData.template_id = null;\r\n          this.frmData.invoice_series = null;\r\n          this.frmData.template_code = null;\r\n        }\r\n      }\r\n    } else {\r\n      this.fileData = data.invoice_files;\r\n    }\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          this.invoicereleaseTempt = item;\r\n        }\r\n      });\r\n      this.select.invoice_releases.some(item => {\r\n        if (item.value === this.frmData.invoice_release_id) {\r\n          this.is_multi_vat = item.is_multi_vat;\r\n          //  this._objTemplateSelect = item; // không mở(đối tượng _objTemplateSelect bị chuyển thành đối tượng item)\r\n          for (const key in item) {\r\n            if (item.hasOwnProperty(key)) {\r\n              this._objTemplateSelect[key] = item[key];\r\n            }\r\n          }\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.invoiceTemplateTT78 = item;\r\n        }\r\n      });\r\n      this.select.templatesTT78.some(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.is_multi_vat = item.is_multi_vat;\r\n          for (const key in item) {\r\n            if (item.hasOwnProperty(key)) {\r\n              this._oTemplateTT78[key] = item[key];\r\n            }\r\n          }\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n\r\n    if (VStringService._getValueToString(this.frmData.approve_status) == sEnum.statusApprove.TuChoi) {\r\n      this.isTuChoi = true;\r\n    }\r\n    if (this.frmData.status === sEnum.statusInv.DaXuat || this.frmData.status === sEnum.statusInv.ChoKy)\r\n      this.isShowButtonWaiteSign = false;\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.decimal_places_json));\r\n    this.pkInvoiceSelectWaitSign = this.frmData.id;\r\n  }\r\n  /*  */\r\n  onTemplateChange(e) {\r\n    this.is_multi_vat = e;\r\n  }\r\n  /*  */\r\n  onTemplateTypeChange(e) {\r\n    this.invoicereleaseTempt = e;\r\n  }\r\n  onTemplateTT78TypeChange(e) {\r\n    this.invoiceTemplateTT78 = e;\r\n  }\r\n  /*  */\r\n  onInvoiceCurrent(e) {\r\n    this.pkInvoiceCurrent = e;\r\n  }\r\n  /*  */\r\n  fillDataToForm(e) {\r\n    this.frmData.customer_name = e[0];\r\n    this.frmData.buyer_tax_code = e[1];\r\n    this.frmData.buyer_address = e[2];\r\n  }\r\n  /*  */\r\n  getDataInChildForm(e) {\r\n    this.frmData = e;\r\n    this.frmTraLai.reason = e.lido;\r\n  }\r\n  /* Tính tiền */\r\n  onNumberChange() {\r\n    VChanggeMoneyService._calTotalMoney(this.frmData, this.formatter, !this.frmData.auto_value);\r\n  }\r\n  changeEnvironmentalFee() {\r\n    if (!this.isTT78) {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n      let decimal_amount_after_vat = this.getFormatterToNumber(this.formatter.tong_tien);\r\n      this.frmData.total_payment = this.roundNumber(this.frmData.total_payment + this.frmData.environmental_fee, decimal_amount_after_vat);\r\n    }\r\n    else {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n      let decimal_amount_after_vat = this.getFormatterToNumber(this.formatter.tong_tien);\r\n      this.frmData.total_payment = this.roundNumber(this.frmData.total_payment + this.frmData.environmental_fee, decimal_amount_after_vat);\r\n    }\r\n  }\r\n  /* Lấy data khi chọn file đính kèm bảng kê */\r\n  getFileData(fileData) {\r\n    this.fileData = fileData;\r\n  }\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      const p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  getFormatterToNumber(formatter) {\r\n    const s1 = formatter.replace('0,###', '');\r\n    if (s1 === '') {\r\n      return 0;\r\n    } else {\r\n      const s2 = s1.replace('.', '');\r\n      return s2.split('').length;\r\n    }\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number === 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n  /* Xem/In chuyển đổi */\r\n  inChuyenDoiText() {\r\n    if (this.frmData.time_print_conversion > 0) {\r\n      return this._translate.CONTROLL.BUTTON.view_conversion;\r\n    } else {\r\n      return this._translate.CONTROLL.BUTTON.print_conversion;\r\n    }\r\n  }\r\n  /* Tổng tiền thanh toán */\r\n  totalPaymentChange = (e) => {\r\n    this.onNumberChange();\r\n    if (this.frmData.auto_value)\r\n      this.frmData.amount_after_vat = this.frmData.total_payment;\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    let tien_chu = Helper.tienBangChu(Math.abs(e.value), this.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);//Helper.money(e.value, currency_code);\r\n    this.frmData.total_payment_in_word = this.invoiceService.docTienAm(e.value, tien_chu, this.configs, this.frmData.currency_code);\r\n  };\r\n\r\n  onNumberTicketChange() {\r\n    if (!this.isTT78) {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n      }\r\n    }\r\n    else {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n      }\r\n    }\r\n  }\r\n\r\n  /* Xem trước hóa đơn */\r\n  preview() {\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n      let data = this.vatService.taodulieuXemTruocMau(this.frmData);\r\n      data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(data);\r\n    }, 300);\r\n  }\r\n  view() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    let data = this.vatService.taodulieuXemMau(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n  /* In chuyển đổi */\r\n  inChuyenDoi() {\r\n    let ids = [];\r\n    ids.push(this.frmData.id);\r\n    const data = this.vatService.taodulieuInChuyenDoi(ids);\r\n    data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    this.vPreviewInvService.xemMau(data);\r\n  }\r\n  /* Ghi tạm */\r\n  ghiTam(data) {\r\n    this.isDisable = true\r\n    if (this.frmData.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.edit(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (VStringService._getValueToString(this.pkInvoiceCurrent) != \"\") {\r\n              this.vatService.delete(this.pkInvoiceCurrent).subscribe(rs => {\r\n              }, err => {\r\n              });\r\n            }\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n            } else {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false;\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.editTT78(this.frmData.id, data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (VStringService._getValueToString(this.pkInvoiceCurrent) != \"\") {\r\n              this.vatService.delete(this.pkInvoiceCurrent).subscribe(rs => {\r\n              }, err => {\r\n              });\r\n            }\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n              Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n            } else {\r\n              Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            }\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false;\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        const sub = this.vatService.ghiTam(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            this.pkInvoiceSelectWaitSign = this.frmData.id;\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else\r\n              Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false;\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n      else {\r\n        const sub = this.vatService.ghiTamTT78(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.status == sEnum.statusInv.ChoKy)\r\n              this.isShowButtonWaiteSign = false;\r\n            this.frmData.id = rs.data.id;\r\n            this.pkInvoiceSelectWaitSign = this.frmData.id;\r\n            Library.notify(this._translate.NOTIFY.save_invoice_success, 'success');\r\n            this.setDataSessionStorage(this.frmData);\r\n          } else {\r\n            if (rs.message.includes('CHUA_CO_BIEN_GIAM_TRU')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else if (rs.message.includes('MAU_HOA_DON_NQ43')) {\r\n              const initialState = {\r\n                typeNotify: \"MAU_HOA_DON_NQ43\",\r\n              };\r\n              this.bsModalRef = this.modalService.show(NotifyReduceTaxComponent, {\r\n                backdrop: 'static',\r\n                keyboard: false,\r\n                class: 'mauhoadon43 modal-lg',\r\n                initialState\r\n              });\r\n            }\r\n            else {\r\n              Library.notify(rs.message, 'error');\r\n              this.isDisable = false;\r\n            }\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          this.isDisable = false;\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  xuatHoaDon(data) {\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat();\r\n    } else {\r\n      if (this.frmData.invoice_files.length) {\r\n        this.frmData.invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.frmData.invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n      }\r\n    }\r\n  }\r\n  /* Xuất chờ ký */\r\n  xuatChoKy(data) {\r\n    Library.showloading();\r\n    if (!this.isTT78) {\r\n      const sub = this.vatService.xuatChoKy(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.isShowButtonWaiteSign = false;\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (VStringService._getValueToString(this.pkInvoiceCurrent) != \"\") {\r\n            this.vatService.delete(this.pkInvoiceCurrent).subscribe(rs => {\r\n            }, err => {\r\n            });\r\n          }\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n          /* Cập nhật lại thông tin theo NĐ 92 */\r\n          if (!this.isHdGTGT) {\r\n            if (this.frmData.is_exemption_decree && !this.configs.system_parameter.is_tb_nd92) {\r\n              this.configs.system_parameter.is_tb_nd92 = true;\r\n              let data = {\r\n                config: {\r\n                  value: JSON.stringify(this.configs.system_parameter)\r\n                }\r\n              };\r\n              this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n                if (response.status == \"success\") {\r\n                  this.configsService.getAll().subscribe((res) => {\r\n                    if (res.data && res.data.configs)\r\n                      this.authService.setConfigs(res.data.configs);\r\n                  });\r\n                } else {\r\n                }\r\n              }, err => { }, () => {\r\n              });\r\n            }\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      const sub = this.vatService.xuatChoKyTT78(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.isShowButtonWaiteSign = false;\r\n          this.frmData.id = rs.data.id;\r\n          this.frmData.invoice_number = rs.data.invoice_number;\r\n          this.frmData.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          if (VStringService._getValueToString(this.pkInvoiceCurrent) != \"\") {\r\n            this.vatService.delete(this.pkInvoiceCurrent).subscribe(rs => {\r\n            }, err => {\r\n            });\r\n          }\r\n          if (this.frmData.approve_status === sEnum.statusApprove.ChoDuyet) {\r\n            Library.notify(this._translate.NOTIFY.sign_board_success, 'success');\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n          }\r\n          this.setDataSessionStorage(this.frmData);\r\n          /* Cập nhật lại thông tin theo NĐ 92 */\r\n          if (!this.isHdGTGT) {\r\n            if (this.frmData.is_exemption_decree && !this.configs.system_parameter.is_tb_nd92) {\r\n              this.configs.system_parameter.is_tb_nd92 = true;\r\n              let data = {\r\n                config: {\r\n                  value: JSON.stringify(this.configs.system_parameter)\r\n                }\r\n              };\r\n              this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n                if (response.status == \"success\") {\r\n                  this.configsService.getAll().subscribe((res) => {\r\n                    if (res.data && res.data.configs)\r\n                      this.authService.setConfigs(res.data.configs);\r\n                  });\r\n                } else {\r\n                }\r\n              }, err => { }, () => {\r\n              });\r\n            }\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  dongtralai() {\r\n    const link = document.createElement('a');\r\n    link.setAttribute('target', '_self');\r\n    link.setAttribute('href', '/system/invoice-sync/');\r\n    document.body.appendChild(link);\r\n    link.click();\r\n  }\r\n  /* Trả lại */\r\n  traLai() {\r\n    if (this.frmTraLai.reason === undefined || this.frmTraLai.reason === '') {\r\n      Library.notify(this._translate.CONTROLL.LABEL.reason_return + ' ' + this._translate.VALIDATION.required, 'error');\r\n    } else {\r\n      Library.showloading();\r\n      const sub = this.vatService.traLaiHoaDon({\r\n        id: this.frmData.id,\r\n        reason: this.frmTraLai.reason\r\n      }).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          Library.notify(this._translate.NOTIFY.return_success, 'success');\r\n          const link = document.createElement('a');\r\n          link.setAttribute('target', '_self');\r\n          link.setAttribute('href', '/system/invoice-sync/');\r\n          document.body.appendChild(link);\r\n          link.click();\r\n        } else {\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n  /* Validate */\r\n  _validForm(isOnlyCheckAm) {\r\n    let _isValid = true;\r\n    let invoice_products = this.frmData.invoice_products.filter(item => item.product_exchange_rate);\r\n    let indexErr = this.frmData.invoice_products.findIndex(item => !item.product_exchange_rate);\r\n    if ((this.frmData.amount_vat5 < 0 || this.frmData.amount_vat10 < 0 || this.frmData.total_payment < 0)\r\n      && !this.configs.system_parameter.allow_export_with_negative) {\r\n      Library.notify(this._translate.NOTIFY.discount_same_vat, 'error');\r\n      return false;\r\n    }\r\n    if (isOnlyCheckAm) {\r\n      if (this.checkProductCode())\r\n        return true;\r\n      else\r\n        return false;\r\n    }\r\n    if (this.frmData.currency_code && this.frmData.currency_code != \"VND\") {\r\n      if (invoice_products && invoice_products.length > 0) {\r\n        if (invoice_products.length !== this.frmData.invoice_products.length) {\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(indexErr, 'product_exchange_rate'));\r\n          Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (!this.frmData.currency_rate) {\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinHoaDon', 'currency_rate');\r\n          // this.formInvoice.form.instance.getEditor('currency_rate').focus();\r\n          Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n      }\r\n      // if (!this.frmData.currency_rate || (invoice_products.length > 0 && invoice_products.length !== this.frmData.invoice_products.length)) {\r\n      //   if (invoice_products.length > 0 && invoice_products.length !== this.frmData.invoice_products.length) {\r\n      //     this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(indexErr, 'product_exchange_rate'));\r\n      //     Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n      //     return false;\r\n      //   } else {\r\n      //     this.formInvoice.form.instance.getEditor('currency_rate').focus();\r\n      //     Library.notify(this._translate.CONTROLL.LABEL.currency_rate + ' ' + this._translate.VALIDATION.required, 'error');\r\n      //     return false;\r\n      //   }\r\n      // }\r\n    }\r\n    if (this.frmData.customer_object_code === 'DOANH_NGHIEP') {\r\n      if (!this.frmData.customer_name) {\r\n        Library.notify(this._translate.CONTROLL.LABEL.customer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'customer_name');\r\n        return false;\r\n      }\r\n      if (!this.frmData.buyer_address) {\r\n        Library.notify(this._translate.CONTROLL.LABEL.address + ' ' + this._translate.VALIDATION.required, 'error');\r\n        InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'buyer_address');\r\n        return false;\r\n      }\r\n      if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n        if (!this.frmData.nationality) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'nationality');\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport');\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport_date');\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_expiration_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport_expiration_date');\r\n          return false;\r\n        }\r\n        let passport_expiration_date = new Date(this.frmData.passport_expiration_date);\r\n        let passport_date = new Date(this.frmData.passport_date);\r\n        if (passport_expiration_date <= passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + 'nhỏ hơn ' + this._translate.CONTROLL.LABEL.passport_date, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport_expiration_date');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    if (this.frmData.customer_object_code === 'CA_NHAN') {\r\n      if (!this.frmData.buyer_name) {\r\n        InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'buyer_name');\r\n        Library.notify(this._translate.CONTROLL.LABEL.buyer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (!this.frmData.buyer_address) {\r\n        InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'buyer_address');\r\n        Library.notify(this._translate.CONTROLL.LABEL.address + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n        if (!this.frmData.nationality) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'nationality');\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport');\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport_date');\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_expiration_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport_expiration_date');\r\n          return false;\r\n        }\r\n        let passport_expiration_date = new Date(this.frmData.passport_expiration_date);\r\n        let passport_date = new Date(this.frmData.passport_date);\r\n        if (passport_expiration_date <= passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + 'nhỏ hơn ' + this._translate.CONTROLL.LABEL.passport_date, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport_expiration_date');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    if (this.frmData.customer_object_code === 'KHACH_LE') {\r\n      if (!this.frmData.buyer_name) {\r\n        InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'buyer_name');\r\n        Library.notify(this._translate.CONTROLL.LABEL.buyer_name + ' ' + this._translate.VALIDATION.required, 'error');\r\n        return false;\r\n      }\r\n      if (this.invoiceTemplateTT78.template_type == sEnum.templatetype.HoaDonKiemToKhaiHoanVe) {\r\n        if (!this.frmData.nationality) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.nationality + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'nationality');\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport');\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport_date');\r\n          return false;\r\n        }\r\n        if (!this.frmData.passport_expiration_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + this._translate.VALIDATION.required, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport_expiration_date');\r\n          return false;\r\n        }\r\n        let passport_expiration_date = new Date(this.frmData.passport_expiration_date);\r\n        let passport_date = new Date(this.frmData.passport_date);\r\n        if (passport_expiration_date <= passport_date) {\r\n          Library.notify(this._translate.CONTROLL.LABEL.passport_expiration_date + ' ' + 'nhỏ hơn ' + this._translate.CONTROLL.LABEL.passport_date, 'error');\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinKhachHang', 'passport_expiration_date');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    if (!this.frmData.total_payment && this.frmData.total_payment !== 0) {\r\n      Library.notify(this._translate.CONTROLL.LABEL.amount_after_vat + ' ' + this._translate.VALIDATION.required, 'error');\r\n      return false;\r\n    }\r\n    const _lst = this.frmData.invoice_products.filter(p => p.product_name);\r\n    if (_lst.length === 0) {\r\n      Library.notify(this._translate.NOTIFY.no_product, 'error');\r\n      this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n      return false;\r\n    }\r\n    else {\r\n      if (!this.checkProductCode())\r\n        return false;\r\n\r\n      const _lstValidThanhTien = this.frmData.invoice_products.filter(p => !p.amount && p.amount !== 0);\r\n      if (_lstValidThanhTien.length == this.frmData.invoice_products.length) {\r\n        Library.notify(this._translate.GRID.INVOICE_DETAILS.amount + ' ' + this._translate.VALIDATION.required, 'error', 5000);\r\n        this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount'));\r\n        return false;\r\n      }\r\n      const _lstValidTongTien = this.frmData.invoice_products.filter(p => !p.amount_after_vat && p.amount_after_vat !== 0);\r\n      if (_lstValidTongTien.length == this.frmData.invoice_products.length) {\r\n        Library.notify(this._translate.CONTROLL.LABEL.total_money_goods + ' ' + this._translate.VALIDATION.required, 'error', 5000);\r\n        this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount_after_vat'));\r\n        return false;\r\n      }\r\n      if (!this.isTT78) {\r\n        let numberRow = this.invoicereleaseTempt.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(this._translate.NOTIFY.only_seclected_1_product_to_export_invoice, 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        let numberRow = this.invoiceTemplateTT78.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(this._translate.NOTIFY.only_seclected_1_product_to_export_invoice, 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n        if (this.frmData.list_date && VStringService._getValueToString(this.frmData.list_number) == \"\") {\r\n          InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinHoaDon', 'list_number');\r\n          Library.notify(\"Số bảng kê\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        if (!this.frmData.list_date && VStringService._getValueToString(this.frmData.list_number) != \"\") {\r\n          Library.notify(\"Ngày bảng kê\" + ' ' + this._translate.VALIDATION.required, 'error');\r\n          return false;\r\n        }\r\n        this.invoice_products.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion && !item.is_promotion_new && !item.commercial_discount && _isValid) {\r\n              // if (item.quantity == null && _isValid) {\r\n              //   Library.notify(\"Số lượng\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'quantity'));\r\n              //   _isValid = false;\r\n              //   return false;\r\n              // }\r\n              // if (item.price == null && _isValid) {\r\n              //   Library.notify(\"Đơn giá\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'price'));\r\n              //   _isValid = false;\r\n              //   return false;\r\n              // }\r\n            }\r\n            else if (item.is_promotion || item.is_promotion_new || item.commercial_discount) {\r\n              if ((item.product_name == null || item.product_name == '') && _isValid) {\r\n                Library.notify(\"Tên hàng hóa\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'product_name'));\r\n                _isValid = false;\r\n                return false;\r\n              }\r\n            }\r\n            if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion) {\r\n              if (this.isHdGTGT) {\r\n                if (item.vat == null && _isValid) {\r\n                  Library.notify(\"Thuế suất\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'vat'));\r\n                  _isValid = false;\r\n                  return false;\r\n                }\r\n                if (item.vat != \"-1\" && item.vat != \"-2\" && item.amount_vat == null && _isValid) {\r\n                  Library.notify(\"Tiền thuế\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount_vat'));\r\n                  _isValid = false;\r\n                  return false;\r\n                }\r\n              }\r\n              if (item.amount == null && _isValid) {\r\n                Library.notify(\"Thành tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount'));\r\n                _isValid = false;\r\n                return false;\r\n              }\r\n            }\r\n          });\r\n        });\r\n      }\r\n      /* Hóa đơn giảm trừ theo Nghị định số 92/2021  */\r\n      let _objND92 = this.frmData.invoice_products.filter(p => (p.vat == \"7\" || p.vat == \"3.5\"))[0];\r\n      if (_objND92) {\r\n        let _objCommon = this.frmData.invoice_products.filter(p => (p.vat != null && p.vat != \"7\" && p.vat != \"3.5\"))[0];\r\n        let isCheckNoVat = false;\r\n        let _lstNoVat = this.frmData.invoice_products.filter(p => p.vat == null);\r\n        _lstNoVat.forEach(item => {\r\n          if (!item.commercial_discount) {\r\n            if (item.amount != null)\r\n              isCheckNoVat = true;\r\n          }\r\n        });\r\n        if (_objCommon || isCheckNoVat) {\r\n          Library.notify(\"Vui lòng lập hóa đơn riêng cho hàng hóa, dịch vụ được giảm thuế GTGT theo Nghị định số 92/2021\", 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'vat'));\r\n          return false;\r\n        }\r\n      }\r\n      // /* Hóa đơn giảm trừ theo Nghị quyết 43 (Giảm 20%) */\r\n      // let _objNQ43 = this.frmData.invoice_products.filter(p => (p.vat == \"8\"))[0];\r\n      // if (_objNQ43) {\r\n      //   let _objCommonNQ43 = this.frmData.invoice_products.filter(p => (p.vat != null && p.vat != \"8\"))[0];\r\n      //   let isCheckNQ43 = false;\r\n      //   let _lstNQ43 = this.frmData.invoice_products.filter(p => p.vat == null);\r\n      //   _lstNQ43.forEach(item => {\r\n      //     if (!item.commercial_discount) {\r\n      //       if (item.amount != null)\r\n      //         isCheckNQ43 = true;\r\n      //     }\r\n      //   });\r\n      //   if (_objCommonNQ43 || isCheckNQ43) {\r\n      //     Library.notify(\"Vui lòng lập hóa đơn riêng cho hàng hóa, dịch vụ được giảm thuế GTGT theo Nghị quyết số 43/2022/QH15\", 'error', 5000);\r\n      //     this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'vat'));\r\n      //     return false;\r\n      //   }\r\n      // }\r\n      /* Hóa đơn bán hàng NQ43 */\r\n      if (this.frmData.is_resolution_43) {\r\n        if (!this.frmData.sales_percentage) {\r\n          Library.notify(\"Tỷ lệ % trên doanh thu không được để trống\", 'error');\r\n          return false;\r\n        }\r\n        else if (this.frmData.sales_percentage != 1 && this.frmData.sales_percentage != 2\r\n          && this.frmData.sales_percentage != 3 && this.frmData.sales_percentage != 5) {\r\n          Library.notify(\"Tỷ lệ % trên doanh thu chỉ bao gồm các giá trị: 1, 2, 3, 5\", 'error');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return _isValid;\r\n  }\r\n  /* Kiểm tra Mã hàng phải nhập không dấu, không chứa ký tự đặc biệt và tối đa 50 ký tự */\r\n  checkProductCode() {\r\n    let isValid = true;\r\n    const _lst = this.frmData.invoice_products.filter(p => p.product_name);\r\n    if (_lst.length > 0) {\r\n      for (let i = 0; i < _lst.length; i++) {\r\n        if (VStringService._getValueToString(_lst[i].product_code) != \"\" && !this.productCodePattern.test(_lst[i].product_code)) {\r\n          Library.notify(this._translate.VALIDATION.required_productCode, 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return isValid;\r\n  }\r\n  /* Xuất hóa đơn */\r\n  eSubmit(type, isCheckNoVat?) {\r\n    // const checkValid = this.formInvoice.form.instance.validate();\r\n    // if (!checkValid.isValid) {\r\n    //   return;\r\n    // }\r\n    let ts = this.pkInvoiceCurrent;\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n    if (type == 'GHI_TAM') {\r\n      this.isRequired = false\r\n    } else {\r\n      this.isRequired = true;\r\n    }\r\n    this.total_payment = \"\";\r\n    setTimeout(() => {\r\n      this.handleFormData();\r\n      if (type !== sEnum.statusInv.GhiTam) {\r\n        this._isValid = this._validForm(false);\r\n        if (!this._isValid) {\r\n          return;\r\n        }\r\n        this._isValid = InvoicesService.checkTimeExportInv(this.configs.system_parameter);\r\n        if (!this._isValid) {\r\n          Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        this._isValid = this.checkProductCode();\r\n        if (!this._isValid) {\r\n          return;\r\n        }\r\n      }\r\n      if (this.frmData.invoice_options) {\r\n        this.frmData.invoice_options.forEach(item => {\r\n          delete item['is_show'];\r\n          delete item['type'];\r\n          delete item['width'];\r\n          delete item['statusData'];\r\n        });\r\n      }\r\n\r\n      if ((this._objTemplateSelect && this._objTemplateSelect.template_type == 'HOA_DON_VE_MAY_BAY_CHUNG') || (this._oTemplateTT78 && this._oTemplateTT78.template_type == 'HOA_DON_VE_MAY_BAY_CHUNG')) {\r\n        let products = this.frmData.invoice_products.filter(p => p.is_money_service);\r\n        if (products && products.length > 1) {\r\n          Library.notify(\"Chỉ được phép chọn 1 dòng dữ liệu là Phí dịch vụ\", 'error');\r\n          return false;\r\n        }\r\n      }\r\n      if (this.configs.system_parameter.incurred_refund_ticket) {\r\n        let pPhiHoanVe = this.frmData.invoice_products.filter(p => p.is_refund_ticket);\r\n        if (pPhiHoanVe && pPhiHoanVe.length > 1) {\r\n          Library.notify(\"Chỉ được chọn 1 hàng hóa là Phí hoàn vé\", 'error');\r\n          return false;\r\n        }\r\n        let products = this.frmData.invoice_products.filter(p => p.is_refund_ticket && p.is_money_service);\r\n        if (products && products.length > 0) {\r\n          Library.notify(\"Không được chọn hàng hóa đồng thời là Phí dịch vụ và Phí hoàn vé\", 'error');\r\n          return false;\r\n        }\r\n      }\r\n\r\n      if (VStringService._getValueToString(this.frmData.bank_name) != \"\" && VStringService._getValueToString(this.frmData.bank_name).length > 400) {\r\n        Library.notify(this._translate.NOTIFY.bank_name_less_than_400_character, 'error');\r\n        return false;\r\n      }\r\n      if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n        Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error');\r\n        return false;\r\n      }\r\n\r\n      if (!this.isAccessExportInv && type === 'XUAT' && this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        Library.notify(this._translate.NOTIFY.you_not_permissions, 'error');\r\n        return false;\r\n      }\r\n      if (type === 'XUAT' || (type === sEnum.statusInv.TrinhKy && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy)) {\r\n        if (!this.frmData.invoice_date && !this.confirmCheckPreview && !this.isTT78) {\r\n          const setInvoiceDate = Library.confirm(this._translate.NOTIFY.warning_invoice_date, this._translate.NOTIFY.notify);\r\n          setInvoiceDate.then((dialog) => {\r\n            if (!dialog) {\r\n              InvoicesService.focusField(this.formInvoice.listDxForm, 'thongTinHoaDon', 'invoice_date');\r\n            }\r\n            else {\r\n              this.processXuatHoaDon(type, isCheckNoVat)\r\n            }\r\n          });\r\n        }\r\n        else\r\n          this.processXuatHoaDon(type, isCheckNoVat);\r\n      } else {\r\n        this.processGhiTam(type)\r\n      }\r\n    }, 300);\r\n  }\r\n  /* Xử lý xuất hóa đơn */\r\n  processXuatHoaDon(type, isCheckNoVat) {\r\n    let _index = 0;\r\n    let _lstInv = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      _lstInv = dataSource.filter(p => p.product_name);\r\n    });\r\n    if (this.isHdGTGT) {\r\n      for (let i = 0; i < _lstInv.length; i++) {\r\n        if (_lstInv[i].amount > 0 && !_lstInv[i].vat && !_lstInv[i].is_refund_ticket) {\r\n          let it = _lstInv[i];\r\n          _index = i;\r\n          this._isValid = false;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (this.isHdGTGT || this.frmData.is_exemption_decree) {\r\n      /* Áp dụng thuế giảm trừ theo Nghị định số 92/2021 */\r\n      let _objND92 = this.frmData.invoice_products.filter(p => (p.vat == \"7\" || p.vat == \"3.5\"))[0];\r\n      if (_objND92 || this.frmData.is_exemption_decree) {\r\n        let dateFrom = moment(\"01/11/2021\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n        let dateTo = moment(\"31/12/2021\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n        let invoiceDate: any;\r\n        if (!this.frmData.invoice_date)\r\n          invoiceDate = moment(new Date()).format('YYYY-MM-DD');\r\n        else\r\n          invoiceDate = moment(this.frmData.invoice_date).format('YYYY-MM-DD')\r\n        if (invoiceDate < dateFrom || invoiceDate > dateTo) {\r\n          Library.notify(\"Chỉ áp dụng giảm thuế GTGT theo Nghị định số 92/2021 cho các hóa đơn từ ngày 01/11/2021 đến 31/12/2021\", 'error');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    /* Áp dụng thuế giảm trừ theo Nghị quyết số 43/2022/QH15 */\r\n    // if (this.isHdGTGT || this.frmData.is_resolution_43) {\r\n    //   let _objNQ43 = this.frmData.invoice_products.filter(p => (p.vat == \"8\"))[0];\r\n    //   if (_objNQ43 || this.frmData.is_resolution_43) {\r\n    //     let dateFromNQ43 = moment(\"01/02/2022\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n    //     let dateToNQ43 = moment(\"31/12/2022\", 'DD/MM/YYYY').format('YYYY-MM-DD');\r\n    //     let invoiceDateNQ43: any;\r\n    //     if (!this.frmData.invoice_date)\r\n    //       invoiceDateNQ43 = moment(new Date()).format('YYYY-MM-DD');\r\n    //     else\r\n    //       invoiceDateNQ43 = moment(this.frmData.invoice_date).format('YYYY-MM-DD')\r\n    //     if (!this.isPassNQ43 && (invoiceDateNQ43 < dateFromNQ43 || invoiceDateNQ43 > dateToNQ43)) {\r\n    //       Library.notify(\"Chỉ áp dụng giảm thuế GTGT theo Nghị quyết số 43/2022/QH15 cho các hóa đơn từ ngày 01/02/2022 đến 31/12/2022\", 'error');\r\n    //       return false;\r\n    //     }\r\n    //   }\r\n    // }\r\n\r\n    if (!this.vatService.checkVatMauHoaDon(_lstInv, this.is_multi_vat)) {\r\n      return false;\r\n    }\r\n    if (!this._isValid && isCheckNoVat) {\r\n      const result = Library.confirm(this._translate.CONFIRM.no_vat, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(_index, 'vat'));\r\n          return false;\r\n        } else {\r\n          if (type === sEnum.statusInv.TrinhKy && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.confirmCheckPreview = true;\r\n          }\r\n          if (this.confirmCheckPreview) {\r\n            if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n              this.xuatHoaDon(this.frmData);\r\n            } else {\r\n              Helper.confirmXuatChoKy(() => {\r\n                if (!this.isAccessExportInv) {\r\n                  if (type === sEnum.statusInv.TrinhKy) {\r\n                    this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n                    this.frmData.refuse_reason = '';\r\n                  } else {\r\n                    if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                      this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                    }\r\n                  }\r\n                }\r\n                this.xuatChoKy(this.frmData);\r\n              });\r\n            }\r\n            this.confirmCheckPreview = false;\r\n          } else {\r\n            this.previewBeforeExport(type);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      if (type === sEnum.statusInv.TrinhKy && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n        this.confirmCheckPreview = true;\r\n      }\r\n      if (this.confirmCheckPreview) {\r\n        if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n          this.xuatHoaDon(this.frmData);\r\n        } else {\r\n          Helper.confirmXuatChoKy(() => {\r\n            if (!this.isAccessExportInv) {\r\n              if (type === sEnum.statusInv.TrinhKy) {\r\n                this.frmData.refuse_reason = '';\r\n                this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n              } else {\r\n                if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                  this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                }\r\n              }\r\n            }\r\n            this.xuatChoKy(this.frmData);\r\n          });\r\n        }\r\n        this.confirmCheckPreview = false;\r\n      } else {\r\n        this.previewBeforeExport(type);\r\n      }\r\n    }\r\n  }\r\n  previewBeforeExport(type) {\r\n    this.handleFormData();\r\n    let trang_thai = '';\r\n    if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n      trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n    } else {\r\n      trang_thai = this._translate.THONG_TIN.xuat_cho_ky;\r\n    }\r\n    let du_lieu = this.vatService.taodulieuXemTruocMau(this.frmData);\r\n    du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n    let content_invoice = {\r\n      du_lieu: du_lieu,\r\n      ngay_hoa_don: \"\",\r\n      trang_thai: trang_thai,\r\n      tong_tien: \"\",\r\n      title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n      note_warn: this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n      is_display_img_note: true,\r\n      text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n      text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n      question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n    }\r\n    const initialState = {\r\n      content_invoice: content_invoice,\r\n    };\r\n\r\n    this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      class: 'modal-xl prv-s-invoice v-s-invoice',\r\n      initialState\r\n    });\r\n\r\n    const subModal = this.customeModalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n        this.confirmCheckPreview = true;\r\n        this.eSubmit(type);\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  /* Xử lý ghi tạm hóa đơn */\r\n  processGhiTam(type) {\r\n    if (!this.isAccessExportInv) {\r\n      if (type === sEnum.statusInv.TrinhKy) {\r\n        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n        this.frmData.refuse_reason = '';\r\n      } else {\r\n        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    this.ghiTam(this.frmData);\r\n  }\r\n\r\n  async subData(type, data) {\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return false;\r\n    }\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    await this.handleFormDataSub();\r\n    if (this.frmData.invoice_options) {\r\n      this.frmData.invoice_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n      Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error');\r\n      return false;\r\n    }\r\n    if (!this.isAccessExportInv) {\r\n      if (type === sEnum.statusInv.TrinhKy) {\r\n        this.frmData.approve_status = sEnum.statusApprove.ChoDuyet;\r\n        this.frmData.refuse_reason = '';\r\n      } else {\r\n        if (this.frmData.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.frmData.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    if (data.id) {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.edit(data.id, data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.editTT78(data.id, data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n\r\n    } else {\r\n      Library.showloading();\r\n      if (!this.isTT78) {\r\n        return await this.vatService.ghiTam(data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        return await this.vatService.ghiTamTT78(data).toPromise().then(res => {\r\n          Library.hideloading();\r\n          if (res.status === 'success') {\r\n            Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n            return true;\r\n          } else {\r\n            Library.notify(res.message, 'error');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  /* Tạo mới */\r\n  handleAddNew() {\r\n    if (this.isExportInvoice) {\r\n      this.addNew();\r\n    } else {\r\n      if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n        this.confirmService.confirm()\r\n          .subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData(sEnum.statusInv.GhiTam, this.frmData).then(res => {\r\n                    if (res) {\r\n                      this.addNew();\r\n                    } else {\r\n                      return;\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  this.addNew();\r\n                  break;\r\n                case 'cancel':\r\n                  this.addNew();\r\n                  break;\r\n                default:\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n      } else {\r\n        this.addNew();\r\n      }\r\n    }\r\n  }\r\n  /* Tạo mới */\r\n  addNew() {\r\n    const inv = Object.assign({}, this.frmData);\r\n    this.frmData = new InvoiceModel(1);\r\n    this.frmData.invoice_date = null;\r\n    this.frmData.template_id = inv.template_id;\r\n    this.frmData.invoice_release_id = inv.invoice_release_id;\r\n    this.frmData.payment_method_name = inv.payment_method_name;\r\n    this.frmData.payment_method_view_name = inv.payment_method_view_name;\r\n    this.frmData.currency_code = inv.currency_code;\r\n    this.frmData.template_code = inv.template_code;\r\n    this.frmData.invoice_series = inv.invoice_series;\r\n    this.frmData.invoice_options = inv.invoice_options;\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n    this.productGrip.createUpdateEvent();\r\n    this.formInvoice.removeReadonlyAllForm();\r\n    this.formInvoice.resetTMR();\r\n    this.formInvoice.emails = [];\r\n    this.ttDaXuatHoaDon = false;\r\n    this.setDataSessionStorage(this.frmData);\r\n  }\r\n\r\n  handleFormData() {\r\n    this.tempKiFile = 0;\r\n    const invoice_products = [];\r\n    this.invoice_products.load().then((dataSource) => {\r\n      let transport = \"\";\r\n      dataSource.forEach((item, index) => {\r\n        delete item.error;\r\n        if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n          item.row_content = item.product_name;\r\n          if (VStringService._getValueToString(this.pkInvoiceCurrent) != \"\")\r\n            item.id = Helper.makeid();\r\n          invoice_products.push(item);\r\n          if (item.is_transport_number) {\r\n            transport += item.product_name + \"; \";\r\n          }\r\n        }\r\n      });\r\n      if (transport != \"\") {\r\n        transport = transport.trim();\r\n        transport = transport.slice(0, -1);\r\n        this.frmData.transport_number = transport;\r\n      }\r\n      if (this.frmData.list_date) {\r\n        this.frmData.list_date = moment(this.frmData.list_date).format('YYYY-MM-DD');\r\n      }\r\n      this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n      this.frmData.invoice_products = invoice_products;\r\n      this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n    });\r\n  }\r\n  handleFormDataSub() {\r\n    const wait = (delay, ...args) => new Promise(resolve => setTimeout(resolve, delay, ...args));\r\n    return wait(200).then(() => {\r\n      this.tempKiFile = 0;\r\n      const invoice_products = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          delete item.error;\r\n          if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n            item.row_content = item.product_name;\r\n            invoice_products.push(item);\r\n            if (item.is_transport_number) {\r\n              this.frmData.transport_number = item.product_name;\r\n            }\r\n          }\r\n        });\r\n        this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n        this.frmData.invoice_products = invoice_products;\r\n        this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n      });\r\n      return true;\r\n    });\r\n  }\r\n\r\n  dong() {\r\n    if (this.isHdGTGT) {\r\n      this.router.navigate(['/system/vat-invoice']);\r\n    } else {\r\n      this.router.navigate(['/system/sale-invoice']);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  xemlydotuchoi() {\r\n    Library.showloading();\r\n    const sub = this.vatService.showToSendInvoice(this.frmData.id).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n          listDM: this.listDM\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  onVatChange() {\r\n    const decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n    const decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n    if (this.frmData.vat_service_ticket != null && this.frmData.vat_service_ticket != '-1') {\r\n      this.frmData.total_vat_service_ticket = this.roundNumber((Number.parseInt(this.frmData.vat_service_ticket) * this.frmData.money_service_ticket) / 100, decimal_amount_vat);\r\n    } else {\r\n      this.frmData.total_vat_service_ticket = null;\r\n    }\r\n    this.frmData.total_service_ticket_with_vat = this.roundNumber(this.frmData.money_service_ticket + this.frmData.total_vat_service_ticket, decimal_amount);\r\n  }\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.showTraLai) {\r\n      this.configsService.getAll().subscribe((res) => {\r\n        if (res.data && res.data.configs) {\r\n          this.authService.setConfigs(res.data.configs);\r\n          this.configs = this.authService.getConfigs();\r\n        }\r\n      });\r\n      if (!this.checkDataFormChange(this.valueChange, this.frmData)) {\r\n        return new Observable<boolean>(\r\n          (observer) => {\r\n            this.confirmService.confirm().subscribe(\r\n              value => {\r\n                switch (value) {\r\n                  case 'yes':\r\n                    this.subData(sEnum.statusInv.GhiTam, this.frmData).then(value1 => {\r\n                      observer.next(value1);\r\n                      observer.complete();\r\n                    });\r\n                    break;\r\n                  case 'no':\r\n                    observer.next(true);\r\n                    observer.complete();\r\n                    break;\r\n                  case 'cancel':\r\n                    observer.next(false);\r\n                    observer.complete();\r\n                    break;\r\n                  default:\r\n                    observer.next(true);\r\n                    observer.complete();\r\n                    break;\r\n                }\r\n              }\r\n            );\r\n          });\r\n      } else {\r\n        return true;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  keyDown(e: any) {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n  kiemtraToolKy() {\r\n    return true;\r\n  }\r\n  guideSales() {\r\n    this.isDisplayGuideSale = !this.isDisplayGuideSale;\r\n  }\r\n  onChangeSalePercen(e) {\r\n    this.configs.system_parameter.value_rate_percent = e.value;\r\n    let data = {\r\n      config: {\r\n        value: JSON.stringify(this.configs.system_parameter)\r\n      }\r\n    };\r\n    this.configsService.update(this.configs.id.system_parameter, data).subscribe((response: any) => {\r\n      if (response.status == \"success\") {\r\n        this.configsService.getAll().subscribe((res) => {\r\n          if (res.data && res.data.configs)\r\n            this.authService.setConfigs(res.data.configs);\r\n          this.configs = this.authService.getConfigs();\r\n        });\r\n      } else {\r\n      }\r\n    }, err => { }, () => {\r\n    });\r\n    this.onNumberTicketChange();\r\n  }\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n  <div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title pull-left\\\">HÓA ĐƠN CHỜ KÝ</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <dx-form id=\\\"cancelForm\\\" [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n        <dxi-item [label]=\\\"{text: 'Mẫu hóa đơn'}\\\" dataField=\\\"invoice_release_id\\\" editorType=\\\"dxSelectBox\\\" [editorOptions]=\\\"{items: invoice_releases, displayExpr: 'name', valueExpr: 'value', onValueChanged: invoiceReleaseChange}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Mẫu hóa đơn không được để trống\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item dataField=\\\"invoice_type_name\\\" [label]=\\\"{text: 'Loại hóa đơn'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: 'Ngày hóa đơn'}\\\" editorType=\\\"dxDateBox\\\" [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd'}\\\">\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item dataField=\\\"number_of_invoice\\\" [label]=\\\"{text: 'Số lượng hóa đơn'}\\\" editorType=\\\"dxNumberBox\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Số lượng hóa đơn không được để trống\\\"></dxi-validation-rule>\\r\\n          <dxi-validation-rule type=\\\"range\\\" [max]=\\\"soTon\\\" message=\\\"Số hóa đơn vượt quá số hóa đơn đã đăng ký\\\"></dxi-validation-rule>\\r\\n        </dxi-item>\\r\\n        <dxi-item name=\\\"text-support\\\">\\r\\n          <div *dxTemplate>\\r\\n            <p *ngIf=\\\"soTon\\\" style=\\\"margin-top: 3px;\\\">(Tổng số hóa đơn còn lại: {{ soTon }})</p>\\r\\n          </div>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n  </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <dx-button text=\\\"Ghi\\\" icon=\\\"fa fa-floppy-o\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n    </dx-button>\\r\\n    <dx-button text=\\\"Quay lại\\\" icon=\\\"assets\\\\img\\\\icons\\\\QuayLai.png\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    </dx-button>\\r\\n  </div>\\r\\n</form>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport * as moment from 'moment';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { Helper, Library } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\n@Component({\r\n  selector: 'app-keep-number',\r\n  templateUrl: './keep-number.component.html',\r\n  styleUrls: ['./keep-number.component.scss']\r\n})\r\nexport class KeepNumberComponent implements OnInit {\r\n\r\n  invoice_releases: any;\r\n  frmData: any = {};\r\n  soTon: number = 0;\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    let invoice_releases = [];\r\n    this.frmData.invoice_date = moment(new Date()).format(\"YYYY-MM-DD\");;\r\n    this.invoice_releases.forEach(item => {\r\n      let soTon = parseInt(item.amount) - parseInt(item.used_amount);\r\n      invoice_releases.push({\r\n        name: `${item.template.template_code} - ${item.template.invoice_series} (${Helper.formatNumberInvoice(item.begin_number)} - ${Helper.formatNumberInvoice(item.end_number)}) - Số tồn: ${soTon}`,\r\n        value: item.id,\r\n        template_id: item.template_id,\r\n        invoice_type_name: item.invoice_type_name,\r\n        soTon: soTon\r\n      });\r\n    });\r\n    this.invoice_releases = invoice_releases;\r\n  }\r\n\r\n  invoiceReleaseChange = (e) => {\r\n    console.log(e.value);\r\n    this.invoice_releases.some(item => {\r\n      if (item.value == e.value) {\r\n        this.frmData.invoice_type_name = item.invoice_type_name;\r\n        this.frmData.template_id = item.template_id;\r\n        this.soTon = item.soTon;\r\n        return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  onSubmit(e) {\r\n    let data = { ...this.frmData };\r\n    delete data.invoice_type_name;\r\n\r\n    Library.showloading();\r\n    let sub = this.vatService.giuSo(data).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        Library.notify('Thành công', 'success');\r\n        this.bsModalRef.content.successSaveItem = \"success\";\r\n        this.bsModalRef.hide();\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {}, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n}\r\n","module.exports = \"<!-- Phần không tự tính giá trị, nhập mẫu bảng kê -->\\r\\n<div class=\\\"row support-invoice\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <!-- Thêm dòng -->\\r\\n    <div class=\\\"pull-left\\\">\\r\\n      <div style=\\\"float: left;width:  30%; padding-top: 4px\\\">{{ _translate.CONTROLL.BUTTON.add_row }}</div>\\r\\n      <div style=\\\"float: left; width: 30%\\\">\\r\\n        <dx-number-box #numberBox [max]=\\\"100\\\" [min]=\\\"1\\\" [showSpinButtons]=\\\"true\\\" [(value)]=\\\"rowData\\\"></dx-number-box>\\r\\n      </div>\\r\\n      <div>\\r\\n        <dx-button style=\\\"height: 27px\\\" icon=\\\"fa fa-plus-circle\\\" type=\\\"default\\\" text=\\\"\\\" (onClick)=\\\"addRow()\\\">\\r\\n        </dx-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <!-- Hóa đơn bán hàng NĐ 92 -->\\r\\n      <dx-check-box *ngIf=\\\"isShowND92\\\" [(value)]=\\\"formDataInInvoice.is_exemption_decree\\\"\\r\\n        text=\\\"Giảm thuế theo NĐ số 92/2021\\\" (onValueChanged)=\\\"_tinhGiaTri($event)\\\"></dx-check-box>\\r\\n      <div *ngIf=\\\"isShowND92\\\" class=\\\"toggle normal\\\"\\r\\n        style=\\\"display: inline-block; align-items: center;margin-right: 42px;margin-left: 7px;\\\">\\r\\n        <img id=\\\"link3\\\" style=\\\"cursor: pointer\\\" src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\"\\r\\n          (click)=\\\"onClickGuidReduce()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n      </div>\\r\\n      <!-- Hóa đơn bán hàng NQ 43 -->\\r\\n      <dx-check-box *ngIf=\\\"!isHdGTGT\\\" style=\\\"margin-right: 20px\\\" [(value)]=\\\"formDataInInvoice.is_resolution_43\\\"\\r\\n        text=\\\"{{ _translate.THONG_TIN.giam_thue_theo_nq43 }}\\\" (onValueChanged)=\\\"_changeNQ43($event)\\\"></dx-check-box>\\r\\n      <!-- <div *ngIf=\\\"!isHdGTGT\\\" class=\\\"toggle normal\\\" style=\\\"display: inline-block; align-items: center;margin-right: 42px;margin-left: 7px;\\\">\\r\\n        <img id=\\\"link4\\\" style=\\\"cursor: pointer\\\" src=\\\"assets\\\\img\\\\icons\\\\Icon_Information.png\\\" (click)=\\\"onClickGuidNQ43()\\\" alt=\\\"efy.vn\\\" alt=\\\"Efy.vn\\\">\\r\\n      </div> -->\\r\\n      <!-- Bán hàng qua điện thoại -->\\r\\n      <dx-check-box *ngIf=\\\"configs.system_parameter.view_sale_by_phone\\\" class=\\\"auto-input\\\"\\r\\n        text=\\\"{{ _translate.CONTROLL.LABEL.sale_by_phone }}\\\" [(value)]=\\\"formDataInInvoice.sale_by_phone\\\"></dx-check-box>\\r\\n      <!-- Tổng tiền từ âm chuyển thành dương -->\\r\\n      <dx-check-box class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.total_money_from_negative_to_positive }}\\\"\\r\\n        [(value)]=\\\"formDataInInvoice.is_total_amount_negative_to_positive\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\">\\r\\n      </dx-check-box>\\r\\n      <!-- Không tự tính giá trị -->\\r\\n      <dx-check-box class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\"\\r\\n        [(value)]=\\\"formDataInInvoice.auto_value\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <!-- Tính thành tiền, tiền thuế theo số lượng và tổng tiền -->\\r\\n      <dx-check-box *ngIf=\\\"isHdGTGT\\\" class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.auto_value_price }}\\\"\\r\\n        [(value)]=\\\"formDataInInvoice.auto_value_price\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <dx-menu [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\"\\r\\n        (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n      </dx-menu>\\r\\n      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n        style=\\\"display: none;\\\" />\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.import_type }}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"thayTheToanBo()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all }}\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"themTiep()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<!-- phần table hiển thị -->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onCellPrepared)=\\\"onCellPrepared($event)\\\"  (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"!ttDaXuatHoaDon\\\"></dxo-editing>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxo-scrolling mode=\\\"virtual\\\">\\r\\n        <!-- or \\\"virtual\\\" | \\\"infinite\\\" -->\\r\\n      </dxo-scrolling>\\r\\n      <!-- Xóa -->\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- STT -->\\r\\n      <dxi-column dataField=\\\"view_order\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Đơn hàng/ Hợp đồng -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"(extentionGrid && extentionGrid.don_hang_hop_dong) || (configs && configs.system_parameter && configs.system_parameter.display_contract_order)\\\"\\r\\n        dataField=\\\"contract_order\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_hang_hop_dong }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.po_no_contract_no }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Mã hàng hóa -->\\r\\n      <dxi-column cssClass=\\\"overlay-content123\\\" dataField=\\\"product_code\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_code }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n        alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [editorOptions]=\\\"editorOptionsForCode\\\">\\r\\n        <dxo-lookup *ngIf=\\\"reloadSelectProduct\\\" [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Mã quản lý -->\\r\\n      <dxi-column *ngIf=\\\"extentionGrid && extentionGrid.ma_quan_ly\\\" dataField=\\\"management_code\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.management_code }}\\\"\\r\\n        alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Tên hàng hóa -->\\r\\n      <dxi-column dataField=\\\"product_name\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.product_name }}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Phí hoàn vé -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.incurred_refund_ticket\\\" cellTemplate=\\\"PhiHoanVe\\\"\\r\\n        caption=\\\"{{ _translate.CONTROLL.LABEL.refund_fee }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Số máy -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.template_type=='HOA_DON_KINH_DOANH_XE') || (_oTemplateTT78 && _oTemplateTT78.template_type=='HOA_DON_KINH_DOANH_XE'))\\\"\\r\\n        dataField=\\\"engine_number\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.engine_number }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_may }}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Số khung -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.template_type=='HOA_DON_KINH_DOANH_XE') || (_oTemplateTT78 && _oTemplateTT78.template_type=='HOA_DON_KINH_DOANH_XE'))\\\"\\r\\n        dataField=\\\"chassis_number\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.chassis_number }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_khung }}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Phí dịch vụ -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && (_objTemplateSelect.template_type=='HOA_DON_NHA_HANG_KHACH_SAN' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_CHUNG')) || (_oTemplateTT78 && (_oTemplateTT78.template_type=='HOA_DON_NHA_HANG_KHACH_SAN' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG')))\\\"\\r\\n        cellTemplate=\\\"phi_dich_vu\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.money_service }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Khuyến mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.promotional_goods_on_the_invoice\\\" cellTemplate=\\\"khuyen_mai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.promotion }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Số lô -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_lot || extentionGrid.so_lo\\\" dataField=\\\"lot\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.lot }}\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.lot }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Hạn sử dụng -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_expiration_date || extentionGrid.han_dung\\\"\\r\\n        dataField=\\\"expiration_date\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.expiration_date }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Số tham chiếu -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.items_number\\\" dataField=\\\"items_number\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.reference_number }}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Ngày -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.complete_order_date\\\" dataField=\\\"complete_order_date\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"{{ _translate.CONFIGS.day }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- mpq -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.mpq\\\" dataField=\\\"mpq\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"MPQ\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Quốc gia -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_country || extentionGrid.nuoc_san_xuat\\\"\\r\\n        [editorOptions]=\\\"{showClearButton: true}\\\" dataField=\\\"country_code\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.country }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.country }}\\\"\\r\\n        alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.countrys\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Số đơn vận -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.display_transport_number_from_product\\\"\\r\\n        cellTemplate=\\\"is_transport_number\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.transport_number  }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.is_transport_number  }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Chiết khấu thương mại -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.commercial_discount\\\" cellTemplate=\\\"cktm\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.commercial_discount }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.cktm }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Định khoản -->\\r\\n      <dxi-column cssClass=\\\"dinh-khoan\\\" *ngIf=\\\"configs.system_parameter.view_provisions_on_accounts\\\"\\r\\n        dataField=\\\"provisions_on_accounts\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.provisions_on_accounts }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.dinh_khoan }}\\\" alignment=\\\"center\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.select_provisions_on_accounts\\\" displayExpr=\\\"mdk\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Màu sắc/ chất liệu -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.color_material\\\" dataField=\\\"color_material\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.mau_sac }}\\\" caption=\\\"{{ _translate.CONFIGS.color_material }}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column>\\r\\n      <!-- Hành trình -->\\r\\n      <!-- <dxi-column *ngIf=\\\"((_objTemplateSelect && (_objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE' )) || (_oTemplateTT78 && (_oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE' )))\\\" dataField=\\\"journey_name\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.mau_sac }}\\\"\\r\\n                  caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.journey_name }}\\\"\\r\\n                  alignment=\\\"left\\\"></dxi-column> -->\\r\\n      <!-- Đơn vị tính -->\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Ngày -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.product_date\\\" dataField=\\\"product_date\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.han_su_dung }}\\\" caption=\\\"{{ _translate.CONFIGS.day }}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Tỷ giá -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.product_exchange_rate\\\" dataField=\\\"product_exchange_rate\\\"\\r\\n        headerCellTemplate=\\\"exchangeRateHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.ty_gia,step: '0' }\\\" [format]=\\\"formatter.ty_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Số lượng -->\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\" [editorOptions]=\\\"{ format: formatter.so_luong,step: '0' }\\\"\\r\\n        [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Đơn giá sau thuế -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.price_after_vat\\\" dataField=\\\"price_after_vat\\\"\\r\\n        headerCellTemplate=\\\"priceaftervatHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia_sau_thue,step: '0' }\\\" [format]=\\\"formatter.don_gia_sau_thue\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- Đơn giá NT -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.view_price_nte\\\" dataField=\\\"price_nte\\\"\\r\\n        headerCellTemplate=\\\"price_nteHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia_nte, step:'0' }\\\" [format]=\\\"formatter.don_gia_nte\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- Đơn giá -->\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia,step: '0' }\\\" [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Thành tiền chưa trừ CK -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && _objTemplateSelect.template_type!='HOA_DON_BAN_GIAO_XE' && _objTemplateSelect.template_type!='HOA_DON_BAO_DUONG_XE')\\r\\n      || (_oTemplateTT78 && _oTemplateTT78.is_discount && _oTemplateTT78.template_type!='HOA_DON_BAN_GIAO_XE' && _oTemplateTT78.template_type!='HOA_DON_BAO_DUONG_XE'))\\\"\\r\\n        dataField=\\\"amount_without_discount\\\" headerCellTemplate=\\\"amountNoDiscountHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.thanh_tien_chua_ck ,step: '0'}\\\" [format]=\\\"formatter.thanh_tien_chua_ck\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Chiết khấu -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && _objTemplateSelect.template_type!='HOA_DON_BAN_GIAO_XE' && _objTemplateSelect.template_type!='HOA_DON_BAO_DUONG_XE')\\r\\n      || (_oTemplateTT78 && _oTemplateTT78.is_discount && _oTemplateTT78.template_type!='HOA_DON_BAN_GIAO_XE' && _oTemplateTT78.template_type!='HOA_DON_BAO_DUONG_XE'))\\\"\\r\\n        dataField=\\\"discount\\\" headerCellTemplate=\\\"discountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.chiet_khau }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.ty_le_chiet_khau,step: '0' }\\\" [format]=\\\"formatter.ty_le_chiet_khau\\\"\\r\\n        dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Tiền chiết khấu -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount) || (_oTemplateTT78 && _oTemplateTT78.is_discount))\\\"\\r\\n        dataField=\\\"amount_discount\\\" headerCellTemplate=\\\"amount_discountHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\" [editorOptions]=\\\"{ format: formatter.tien_chiet_khau }\\\"\\r\\n        [format]=\\\"formatter.tien_chiet_khau\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Chiết khấu theo đơn giá -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.discount_on_price\\\" dataField=\\\"discount_on_price\\\"\\r\\n        headerCellTemplate=\\\"discount_on_priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.tien_chiet_khau }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.ck_theo_don_gia }\\\" [format]=\\\"formatter.ck_theo_don_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Đơn giá sau chiết khấu -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && _objTemplateSelect.is_discount && (_objTemplateSelect.template_type=='HOA_DON_BAN_GIAO_XE' || _objTemplateSelect.template_type=='HOA_DON_BAO_DUONG_XE'))\\r\\n      || (_oTemplateTT78 && _oTemplateTT78.is_discount && (_oTemplateTT78.template_type=='HOA_DON_BAN_GIAO_XE' || _oTemplateTT78.template_type=='HOA_DON_BAO_DUONG_XE'))) || configs.system_parameter.discount_on_price\\\"\\r\\n        dataField=\\\"price_after_discount\\\" headerCellTemplate=\\\"priceHeaderAfterDiscount\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\" [editorOptions]=\\\"{ format: formatter.don_gia,step: '0' }\\\"\\r\\n        [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\" alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Thành tiền -->\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.thanh_tien ,step: '0'}\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Vat -->\\r\\n      <dxi-column cssClass=\\\"vat-invoices\\\" *ngIf=\\\"isHdGTGT\\\" dataField=\\\"vat\\\" headerCellTemplate=\\\"vatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.vat }}\\\" alignment=\\\"center\\\"\\r\\n        [editorOptions]=\\\"{showClearButton: true ,step: '0'}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Tiền thuế -->\\r\\n      <dxi-column *ngIf=\\\"isHdGTGT\\\" dataField=\\\"amount_vat\\\" headerCellTemplate=\\\"amountVatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" [editorOptions]=\\\"{ format: formatter.tien_thue, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- Thuế khác -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && (_objTemplateSelect.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')) || (_oTemplateTT78 && (_oTemplateTT78.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n        dataField=\\\"other_tax\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.othertax  }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- Tiền phí khác -->\\r\\n      <dxi-column\\r\\n        *ngIf=\\\"((_objTemplateSelect && (_objTemplateSelect.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _objTemplateSelect.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')) || (_oTemplateTT78 && (_oTemplateTT78.template_type=='HOA_DON_VE_MAY_TONG_HOP' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_CHUNG' || _oTemplateTT78.template_type=='HOA_DON_VE_MAY_BAY_HOAN_VE')))\\\"\\r\\n        dataField=\\\"other_charge\\\" caption=\\\"{{ _translate.CONTROLL.LABEL.money_other  }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" [editorOptions]=\\\"{ format: formatter.thanh_tien, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- Tổng tiền -->\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tong_tien_sau_thue }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tong_tien, step:'0'}\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- config column header -->\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.quantity }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'exchangeRateHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ty_gia')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.CONTROLL.LABEL.currency_rate }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceaftervatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia_sau_thue')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.price_after_vat }}<img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeaderAfterDiscount'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.price_after_discount }}<img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'price_nteHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia_nte')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.price_nte }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountNoDiscountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien_chua_ck')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.amount_without_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ty_le_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">{{\\r\\n          _translate.GRID.INVOICE_DETAILS.discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amount_discountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_chiet_khau')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_discount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'discount_on_priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('ck_theo_don_gia')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.discount_on_price }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.total_money }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_promotion_new\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'khuyen_mai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion_new\\\" [disabled]=\\\"d.data.is_promotion\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'phi_dich_vu'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_money_service\\\" (onValueChanged)=\\\"changePhiDV(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'is_transport_number'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_transport_number\\\"></dx-check-box>\\r\\n      </div>\\r\\n\\r\\n      <div *dxTemplate=\\\"let d of 'cktm'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.commercial_discount\\\" (onValueChanged)=\\\"changeCKTM(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'PhiHoanVe'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_refund_ticket\\\" (onValueChanged)=\\\"changePhiHoanVe(d.data)\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <!-- <div *dxTemplate=\\\"let d of 'product_code'\\\" style=\\\"border: none;\\\" class=\\\"wrap-code-template\\\">\\r\\n        <dx-autocomplete valueExpr=\\\"code\\\" [dataSource]=\\\"select.productsView\\\" (onFocusOut)=\\\"product_fieldChange(d.data, 'product_code')\\\" [(value)]=\\\"d.data.product_code\\\" (onItemClick)=\\\"product_fieldChange(d.data, 'product_code')\\\">\\r\\n          <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n            <span>{{item.code}}: {{ item.name }}</span>\\r\\n          </div>\\r\\n        </dx-autocomplete>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'product_name'\\\" style=\\\"border: none;\\\" class=\\\"wrap-name-template\\\">\\r\\n        <dx-autocomplete valueExpr=\\\"name\\\" [dataSource]=\\\"select.productsView\\\" (onFocusOut)=\\\"product_fieldChange(d.data, 'product_name')\\\" [(value)]=\\\"d.data.product_name\\\" (onItemClick)=\\\"product_fieldChange(d.data, 'product_name')\\\">\\r\\n          <div *dxTemplate=\\\"let item of 'item'\\\">\\r\\n            <span>{{ item.name }}</span>\\r\\n          </div>\\r\\n        </dx-autocomplete>\\r\\n      </div> -->\\r\\n      <dxo-paging [enabled]=\\\"true\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:20px;margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:8px}.support-invoice .support-link img,.support-invoice .support-link i{margin-right:15px;margin-top:-2px}.support-invoice .auto-input{margin-right:20px !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .styleItemToList{color:dodgerblue}.button-dropdown-extend{display:inline-flex}::ng-deep .vat-invoices .dx-texteditor-buttons-container{display:-ms-inline-grid;display:inline-grid}::ng-deep #gridInvoice{height:208px}::ng-deep .popGuid .dx-widget{display:inline-block}::ng-deep .wrap-column-autoC{padding:0px !important}::ng-deep .wrap-column-autoC .wrap-code-template dx-autocomplete{border:none !important}::ng-deep .wrap-column-autoC .wrap-code-template dx-autocomplete input{text-align:center}::ng-deep .wrap-column-autoC .wrap-name-template dx-autocomplete{border:none !important}::ng-deep .wrap-column-autoC .wrap-name-template dx-autocomplete input{text-align:left}\\n\"","import { AfterViewInit, Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport * as XLSX from 'xlsx';\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { AddComponent, ConfigDecimalComponent } from '@shared/index';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { pattern } from '@config/index';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport * as _ from 'lodash';\r\n\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'vat-product-grip',\r\n  templateUrl: './product-grip.component.html',\r\n  styleUrls: ['./product-grip.component.scss']\r\n})\r\nexport class ProductGripComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  // @ViewChildren(DxFormComponent) listDxForm: any;\r\n\r\n  routeSub: Subscription;\r\n\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() isHdGTGT: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() extentionGrid: any;\r\n  @Input() isTT78: boolean;\r\n  // @Input() not_auto: any; //Không tự tính giá trị\r\n  @Input() formDataInInvoice: any; // Không tự tính giá trị\r\n  select: any = {};\r\n  _translate: any;\r\n  listDVT: any;\r\n  frmData: InvoiceModel = new InvoiceModel(1);\r\n  bsModalRef: BsModalRef;\r\n  showPopup = false; // Popup \r\n  dataExcelFile: any = null;\r\n  dataExcelFileInfo: any = null;\r\n  ttDaXuatHoaDon = false;\r\n  _disDiengiai = false;\r\n  _disKhuyenMai = false;\r\n  configs: any;\r\n  amount_after_vat: any = 0;\r\n  reloadSelectProduct = true;\r\n  selectBoxData: any;\r\n  extras = [];\r\n  rowData = 1;\r\n  firstTime = true;\r\n  productCodePattern: any = pattern.productCodePattern;\r\n  isDisplayReduceGuid: boolean = false;\r\n  productViews = [];\r\n  isShowND92: boolean = false;\r\n  ruleError = {\r\n    '': 'này',\r\n    '-1': 'Không chịu thuế',\r\n    '0': '0%',\r\n    '5': '5%',\r\n    '10': '10%'\r\n  };\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private productsService: ProductsService,\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private invoiceService: InvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (!this.isHdGTGT) {\r\n      this.formDataInInvoice.amount_vatx = null;\r\n      this.formDataInInvoice.amount_vat5 = null;\r\n      this.formDataInInvoice.amount_vat10 = null;\r\n    }\r\n    this.configs = this.authService.getConfigs();\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      this.select.countrys = danh_muc.DM_QUOC_GIA ? danh_muc.DM_QUOC_GIA.data : null;\r\n      ///\r\n      if (this.select.select_provisions_on_accounts && this.select.select_provisions_on_accounts.length > 0) {\r\n        this.select.select_provisions_on_accounts.forEach(item => {\r\n          item.mdk = item.code + ': ' + item.name;\r\n        });\r\n      }\r\n      ///\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      if (this.isTT78) {\r\n        this.select.products = data.init[0];\r\n        if (isEdit) {\r\n          invoice = data.init[1];\r\n          if (invoice.invoice_products.length > 0) {\r\n            this.invoiceService.addProductInListP(this.select.products, invoice.invoice_products, 'code', 'mhvth')\r\n          }\r\n        }\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'code',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              const _data = data.init[0].filter(p => p.code === key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'name'\r\n        };\r\n      }\r\n      else {\r\n        this.select.products = data.init[1];\r\n        if (isEdit)\r\n          invoice = data.init[3];\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'code',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              const _data = data.init[1].filter(p => p.code === key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'name'\r\n        };\r\n      }\r\n      this.select.products.forEach(item => {\r\n        item.mhvth = item.mhvth ? item.mhvth : (item.code + ': ' + item.name);\r\n      });\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (item.product_name && item.unit_name) {\r\n            const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n            if (!obj1) {\r\n              if (VStringService._getValueToString(item.unit_code) == \"\")\r\n                item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n              let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (oDuplicate)\r\n                item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n              this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n            }\r\n            else {\r\n              if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n                let oExistUnitCode = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n                if (!oExistUnitCode)\r\n                  this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n    });\r\n\r\n    // Event\r\n    this.createUpdateEvent();\r\n  }\r\n\r\n  editorOptionsForCode = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: (args) => {\r\n      return this.invoiceService.addProductInSelecBox(args, this.select.productsView, this.dataGrid);\r\n    }\r\n  }\r\n\r\n  // Thêm giá trị mới vào đơn vị tính\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      let oDuplicate = this.select.unit_codes.filter(p => p.code === newItem.code)[0];\r\n      if (oDuplicate)\r\n        newItem.code = newItem.code + Helper.addtionalUnitCode();\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        if (value.product_code !== 'add') {\r\n          this.invoice_products.byKey(key).then((row) => {\r\n            switch (column) {\r\n              case 'view_order':\r\n                this.view_orderChange();\r\n                break;\r\n              case 'product_code':\r\n                this.product_codeChange(row);\r\n                break;\r\n              case 'unit_code':\r\n                this.unit_codeChange(row);\r\n                break;\r\n              case 'country_code':\r\n                this.country_codeChange(row);\r\n                break;\r\n              case 'quantity':\r\n              case 'price':\r\n              case 'price_nte':\r\n              case 'amount':\r\n              case 'amount_vat':\r\n              case 'amount_after_vat':\r\n              case 'amount_discount':\r\n              case 'discount':\r\n              case 'amount_without_discount':\r\n              case 'other_tax':\r\n              case 'other_charge':\r\n              case 'discount_on_price':\r\n                this._tinhGiaTri();\r\n                break;\r\n              case 'price_after_vat':\r\n                if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                  row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                else\r\n                  row.price = row.price_after_vat;\r\n                this._tinhGiaTri();\r\n                break;\r\n              case 'vat':\r\n                if (this.configs.system_parameter.price_after_vat) {\r\n                  if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                    row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                  else\r\n                    row.price = row.price_after_vat;\r\n                }\r\n                this._tinhGiaTri();\r\n                break;\r\n              default:\r\n                break;\r\n              // }\r\n            }\r\n          }, (error) => {\r\n            alert(error);\r\n          });\r\n        } else {\r\n          this.invoice_products.remove(key);\r\n          this.addRow(null);\r\n        }\r\n      });\r\n    }, 100);\r\n  }\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n      const eles = e.rowElement.getElementsByTagName('td');\r\n      if (!e.isEditing) {\r\n        if (eles) {\r\n          for (let i = 0; i < eles.length; i++) {\r\n            if (eles[i].className.includes('dinh-khoan'))\r\n              eles[i].innerHTML = e.data.provisions_on_accounts;\r\n          }\r\n          eles[2].innerHTML = e.data.product_code;\r\n        }\r\n      }\r\n      if (e.data.error) {\r\n        const ele = eles[eles.length - 1];\r\n        ele.style.background = 'red url(\\'assets/img/icons/fa-remove.png\\') no-repeat 2% center';\r\n        ele.title = e.data.error;\r\n      }\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'product_code') {\r\n\r\n        e.editorOptions.onOpened = function (arg) {\r\n          const popupInstance = arg.component._popup;\r\n          popupInstance.option('width', 400);\r\n          popupInstance.option('minWidth', 400);\r\n        };\r\n      }\r\n      if (e.dataField === 'product_name') {\r\n        e.editorName = 'dxTextArea';\r\n        //  e.editorOptions.autoResizeEnabled = true;\r\n      }\r\n      //   e.editorOptions.onValueChanged = (args) => {\r\n      //     if (e.dataField === 'unit_code') {\r\n      //       const _obj = this.select.unit_codes.filter(p => p.code === e.row.data.unit_code)[0];\r\n      //       if (_obj) {\r\n      //         e.row.data.unit_name = _obj.name;\r\n      //       } else {\r\n      //         e.row.data.unit_name = '';\r\n      //       }\r\n      //     }\r\n      //     if (e.dataField === 'country_code') {\r\n      //       const _obj = this.select.countrys.filter(p => p.code === e.row.data.country_code)[0];\r\n      //       if (_obj) {\r\n      //         e.row.data.country_name = _obj.name;\r\n      //       } else {\r\n      //         e.row.data.country_name = '';\r\n      //       }\r\n      //     }\r\n      //     e.setValue(args.value);\r\n      //  //   this.invoice_products.update(e.row.data.id, e.row.data);\r\n      //   };\r\n      // this.invoice_products.update(e.row.data.id, e.row.data);\r\n    }\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount' || e.dataField === 'amount_vat' || e.dataField === 'amount_after_vat') && e.parentType === 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row && e.row.rowType === 'data') {\r\n      e.items = [\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.add_goods,\r\n          onItemClick: () => {\r\n            this.addProduct(e.row.data);\r\n          }\r\n        },\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.add_row,\r\n          onItemClick: () => {\r\n            this.addRow(e.row.rowIndex);\r\n          }\r\n        },\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.delete_row,\r\n          onItemClick: () => {\r\n            this.deleteRow(e.row.data);\r\n          }\r\n        },\r\n      ];\r\n    }\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.column.dataField == \"product_code\") {\r\n        if (VStringService._getValueToString(e.data.product_code) != \"\" && !this.productCodePattern.test(e.data.product_code)) {\r\n          e.cellElement.style.background = \"red url('assets/img/icons/fa-remove.png') no-repeat 2% center\";\r\n          e.cellElement.title = this._translate.VALIDATION.required_productCode;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  addProduct(row) {\r\n    Library.showloading();\r\n    this.productsService.getAllListbyListtypeByCode('DM_NHOM_HANG_HOA,DM_DON_VI_TINH,DM_TY_LE_VAT').subscribe((response) => {\r\n      const initialState = {\r\n        totalCount: 0,\r\n        groupProducts: response.data['DM_NHOM_HANG_HOA'],\r\n        unitCalculations: this.select.unit_codes,//response.data['DM_DON_VI_TINH'],\r\n        vats: response.data['DM_TY_LE_VAT'],\r\n        groupProductListTypeId: response.data['ids']['DM_NHOM_HANG_HOA'],\r\n        unitCalculationListTypeId: response.data['ids']['DM_DON_VI_TINH'],\r\n        vatListTypeId: response.data['ids']['DM_TY_LE_VAT'],\r\n        wavehourses: [],\r\n        formatter: this.formatter,\r\n        onSaveProduct: (data, unitCodes) => {\r\n          this.select.unit_codes = unitCodes;\r\n          data.mhvth = data.code + ': ' + data.name;\r\n          this.select.products.push(data);\r\n          this.reloadSelectProduct = false;\r\n          setTimeout(() => {\r\n            this.reloadSelectProduct = true;\r\n          }, 50);\r\n\r\n          row.product_code = data.code;\r\n          row.product_name = data.name;\r\n          row.unit_code = this.checkUnitCode(data.unit_code);\r\n          row.quantity = null;\r\n          row.vat = data.vat ? data.vat.toString() : null;\r\n          if (this.configs.system_parameter.price_after_vat) {\r\n            row.price_after_vat = data.price ? parseFloat(data.price) : data.price;\r\n            if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n              row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n            else\r\n              row.price = row.price_after_vat;\r\n          }\r\n          else\r\n            row.price = data.price ? parseFloat(data.price) : data.price;\r\n          row.amount = data.price ? parseFloat(data.price) : 0;\r\n          row.amount_vat = (row.vat >= 0 || row.vat == -3) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n          row.amount_after_vat = row.amount + row.amount_vat;\r\n          this.unit_codeChange(row);\r\n          this.invoice_products.update(row.id, row);\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  /* Thêm dòng hàng hóa */\r\n  addRow(rowIndexFocus?) {\r\n    if (rowIndexFocus >= 0) {\r\n      let rowIndex = rowIndexFocus + 1;\r\n      const data = this.frmData.add_invoice_products_data(rowIndex, rowIndex);\r\n      if (data) {\r\n        this.invoice_products._array.splice(rowIndex, 0, data);\r\n        let order = 0;\r\n        this.invoice_products._array.forEach(item => {\r\n          item.order = ++order;\r\n          item.view_order = item.order;\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      let len, order, orderLast;\r\n      this.invoice_products.load().then((dataSource) => {\r\n        len = dataSource.length;\r\n        orderLast = dataSource[len - 1].order;\r\n      });\r\n\r\n      for (let i = 0; i < this.rowData; i++) {\r\n\r\n        if (len >= 1) {\r\n          order = ++orderLast;\r\n        } else {\r\n          order = 1;\r\n        }\r\n        const data = this.frmData.add_invoice_products_data(order, order);\r\n        this.invoice_products.insert(data);\r\n      }\r\n    }\r\n    this.dataGrid.instance.refresh();\r\n  }\r\n\r\n  view_orderChange() {\r\n    if (!this.isTT78) {\r\n      let _index = 0;\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (item.view_order && VStringService._getValueToString(this._objTemplateSelect.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n            item.view_order = ++_index;\r\n          }\r\n          if (VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n            if (!item.is_money_service) {\r\n              item.view_order = ++_index;\r\n            } else {\r\n              item.view_order = null;\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n    else {\r\n      let _index = 0;\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (item.view_order && VStringService._getValueToString(this._oTemplateTT78.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n            item.view_order = ++_index;\r\n          }\r\n          if (VStringService._getValueToString(this._oTemplateTT78.template_type) == sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n            if (!item.is_money_service) {\r\n              item.view_order = ++_index;\r\n            } else {\r\n              item.view_order = null;\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  // Thay đổi cột mã hàng\r\n  product_codeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code === row.product_code && !item.notCallApi) {\r\n        this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let product = rs.data.product;\r\n            if (product) {\r\n              row.product_name = product.name;\r\n              row.unit_code = this.checkUnitCode(product.unit_code);\r\n              row.quantity = null;\r\n              if (this.isHdGTGT) {\r\n                row.vat = product.vat != null ? product.vat.toString() : null;\r\n              } else {\r\n                row.vat = null;\r\n              }\r\n              if (this.configs.system_parameter.price_after_vat) {\r\n                row.price_after_vat = product.price ? parseFloat(product.price) : product.price;\r\n                if ((row.vat == 5 || row.vat == 10) && row.price_after_vat)\r\n                  row.price = (row.price_after_vat / (1 + row.vat / 100));\r\n                else\r\n                  row.price = row.price_after_vat;\r\n              }\r\n              else\r\n                row.price = product.price ? parseFloat(product.price) : product.price;\r\n              row.amount = product.price ? parseFloat(product.price) : 0;\r\n              if (this.isHdGTGT) {\r\n                row.amount_vat = (row.vat >= 0 || row.vat == -3) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n              } else {\r\n                row.amount_vat = null;\r\n              }\r\n              row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n              let test = this.invoice_products;\r\n              this.invoice_products.update(row.id, row);\r\n              this._tinhGiaTri();\r\n              return true;\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  unit_codeChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  country_codeChange(row) {\r\n    const _obj = this.select.countrys.filter(p => p.code === row.country_code)[0];\r\n    if (_obj) {\r\n      row.country_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.country_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _tinhGiaTri() {\r\n    setTimeout(() => {\r\n      if (!this.isTT78) {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.formDataInInvoice, this.formatter, !this.formDataInInvoice.auto_value, this.formDataInInvoice.auto_value_price, this.select, this._objTemplateSelect, this.configs.system_parameter);\r\n        if ((VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayTongHop\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayChung\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n          || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) && !this.formDataInInvoice.auto_value) {\r\n          VChanggeMoneyService._changeMoneyTicket(this.formDataInInvoice, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n        }\r\n        this.amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n      }\r\n      else {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.formDataInInvoice, this.formatter, !this.formDataInInvoice.auto_value, this.formDataInInvoice.auto_value_price, this.select, this._oTemplateTT78, this.configs.system_parameter);\r\n        if ((VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayTongHop\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayChung\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanVe\r\n          || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) && !this.formDataInInvoice.auto_value) {\r\n          VChanggeMoneyService._changeMoneyTicket(this.formDataInInvoice, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n        }\r\n        this.amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n      }\r\n\r\n    }, 100);\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    let p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte,\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        // this.formatter[data.column] = data.character;\r\n        this._tinhGiaTri();\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    setTimeout(() => {\r\n      const check = confirm(this._translate.CONFIRM.delete);\r\n      if (check && !this.ttDaXuatHoaDon) {\r\n        setTimeout(() => {\r\n          this.invoice_products.remove(item.id);\r\n          this.dataGrid.instance.refresh();\r\n          this._tinhGiaTri();\r\n\r\n        }, 100);\r\n      }\r\n    }, 200);\r\n  }\r\n  // Lấy mẫu bảng kê\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    let ts = this._objTemplateSelect;\r\n    let fields = [];\r\n    if (!this.isTT78) {\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayTongHop\r\n        && VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung\r\n        && VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonVeMayBayHoanVe) {\r\n        fields.push(\"other_tax\");\r\n        fields.push(\"other_charge\");\r\n      }\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonKinhDoanhXe) {\r\n        fields.push(\"engine_number\");\r\n        fields.push(\"chassis_number\");\r\n      }\r\n    }\r\n    else {\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayTongHop\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayHoanVe) {\r\n        fields.push(\"other_tax\");\r\n        fields.push(\"other_charge\");\r\n      }\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonKinhDoanhXe) {\r\n        fields.push(\"engine_number\");\r\n        fields.push(\"chassis_number\");\r\n      }\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonNhaHangKhachSan\r\n        && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonVeMayBayChung) {\r\n        fields.push(\"is_money_service\");\r\n      }\r\n      if (!this.configs.system_parameter.incurred_refund_ticket)\r\n        fields.push(\"is_refund_ticket\");\r\n      if (!this.configs.system_parameter.view_expiration_date)\r\n        fields.push(\"expiration_date\");\r\n      if (!this.configs.system_parameter.view_lot)\r\n        fields.push(\"lot\");\r\n      if (!this.configs.system_parameter.promotional_goods_on_the_invoice)\r\n        fields.push(\"is_promotion_new\");\r\n      if (!this.configs.system_parameter.is_promotion)\r\n        fields.push(\"is_promotion\");\r\n    }\r\n    if (!this.configs.system_parameter.product_exchange_rate)\r\n      fields.push(\"product_exchange_rate\");\r\n    if (!this.configs.system_parameter.product_date)\r\n      fields.push(\"product_date\");\r\n    // if (this.configs && this.configs.system_parameter && this.configs.system_parameter.display_contract_order)\r\n    //   fields.push(\"contract_order\");\r\n\r\n    if (!this.extentionGrid || (this.extentionGrid && !this.extentionGrid.ma_quan_ly)) {\r\n      fields.push(\"management_code\");\r\n    }\r\n    this.vatService.layFileMau({\r\n      customer_name: this.formDataInInvoice.customer_name,\r\n      buyer_tax_code: this.formDataInInvoice.buyer_tax_code,\r\n      buyer_address: this.formDataInInvoice.buyer_address,\r\n      buyer_name: this.formDataInInvoice.buyer_name,\r\n      invoice_type_name: \"\",\r\n      hiddens: fields\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  // Nạp dữ liệu bảng kê\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById('file-bang-ke').click();\r\n  }\r\n\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) {\r\n      throw new Error('Không thể chọn nhiều file');\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      const data = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 9 }));\r\n      const account = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 0 }));\r\n      const fileBangKe: any = document.getElementById('file-bang-ke');\r\n      fileBangKe.value = '';\r\n      let _arrData: any = [];\r\n      if (data && data[0]) {\r\n        let columnsName = data.map(e => e.A);\r\n        let _index = columnsName.indexOf(\"view_order\")\r\n\r\n        if (_index == -1) {\r\n          Library.notify(\"File mẫu không đúng định dạng. Vui lòng nhấn vào Tại đây để lấy lại file mẫu\", \"error\");\r\n          return false;\r\n        } else {\r\n          if (_index > 0) {\r\n            data.splice(0, _index);\r\n          }\r\n          for (let i = 1; i < data.length; i++) {\r\n            let _row: any = {}\r\n            for (const key in data[i]) {\r\n              if (data[i].hasOwnProperty(key)) {\r\n                const column = data[0][key]\r\n                const value = data[i][key];\r\n                _row[column] = value;\r\n              }\r\n            }\r\n            _arrData.push(_row);\r\n          }\r\n        }\r\n      }\r\n      this.dataExcelFile = _arrData;\r\n      this.dataExcelFileInfo = account.slice(0, 4);\r\n      this.showPopup = true;\r\n    };\r\n    reader.readAsBinaryString(target.files[0]);\r\n  }\r\n\r\n  thayTheToanBo() {\r\n    this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'thaythe');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  themTiep() {\r\n    this.fillData(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  fillData(fileData, info, status) {\r\n    if (info.length === 4) {\r\n      const customer_name = info[0].A.split(':');\r\n      if (customer_name.length > 1 && customer_name[1].trim() != '') {\r\n        this.formDataInInvoice.customer_name = customer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_tax_code = info[1].A.split(':');\r\n      if (buyer_tax_code.length > 1 && buyer_tax_code[1].trim() != '') {\r\n        this.formDataInInvoice.buyer_tax_code = buyer_tax_code[1].trim();\r\n      }\r\n      ////\r\n      const buyer_name = info[2].A.split(':');\r\n      if (buyer_name.length > 1 && buyer_name[1].trim() != '') {\r\n        this.formDataInInvoice.buyer_name = buyer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_address = info[3].A.split(':');\r\n      if (buyer_address.length > 1 && buyer_address[1].trim() != '') {\r\n        this.formDataInInvoice.buyer_address = buyer_address[1].trim();\r\n      }\r\n    }\r\n    if (status === 'thaythe') {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          this.invoice_products.remove(item.id);\r\n        });\r\n      });\r\n    } else {\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount && !item.amount_vat && !item.amount_after_vat) {\r\n            this.invoice_products.remove(item.id);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    fileData.forEach(element => {\r\n      if (element.product_name) {\r\n        let invoice = new Object;\r\n        invoice[\"id\"] = Helper.makeid();\r\n        invoice[\"view_order\"] = element.view_order ? parseInt(element.view_order) : null;\r\n        invoice[\"product_code\"] = element.product_code ? element.product_code : \"\";\r\n        invoice[\"product_name\"] = element.product_name ? element.product_name : \"\";\r\n        invoice[\"unit_code\"] = element.unit_name ? this.getUnitCodeByUnitName(element.unit_name) : \"\";\r\n        invoice[\"unit_name\"] = element.unit_name ? element.unit_name : \"\";\r\n        invoice[\"quantity\"] = element.quantity ? Helper.toNumber(element.quantity) : null;\r\n        invoice[\"vat\"] = (element.vat && this.isHdGTGT) ? element.vat : null;\r\n        invoice[\"contract_order\"] = element.contract_order ? element.contract_order : \"\";\r\n        if (element.price) {\r\n          if (this.configs.system_parameter.price_after_vat) {\r\n            invoice[\"price_after_vat\"] = element.price ? Helper.toNumber(element.price) : null;\r\n            if ((invoice[\"vat\"] == 5 || invoice[\"vat\"] == 10 || invoice[\"vat\"] == 7 || invoice[\"vat\"] == 3.5) && invoice[\"price_after_vat\"] !== null)\r\n              invoice[\"price\"] = (invoice[\"price_after_vat\"] / (1 + invoice[\"vat\"] / 100));\r\n            else\r\n              invoice[\"price\"] = invoice[\"price_after_vat\"];\r\n          }\r\n          else\r\n            invoice[\"price\"] = element.price ? Helper.toNumber(element.price) : null;\r\n        }\r\n        invoice[\"amount\"] = element.amount ? Helper.toNumber(element.amount) : null;\r\n        invoice[\"amount_vat\"] = element.amount_vat ? Helper.toNumber(element.amount_vat) : null;\r\n        // invoice[\"note\"] = element.note ? element.note : null;\r\n        invoice[\"other_tax\"] = element.other_tax ? Helper.toNumber(element.other_tax) : null;\r\n        invoice[\"other_charge\"] = element.other_charge ? Helper.toNumber(element.other_charge) : null;\r\n        invoice[\"product_exchange_rate\"] = element.product_exchange_rate ? Helper.toNumber(element.product_exchange_rate) : null;\r\n        invoice[\"product_date\"] = element.product_date ? element.product_date : null;\r\n        invoice[\"engine_number\"] = element.engine_number ? element.engine_number : null;\r\n        invoice[\"chassis_number\"] = element.chassis_number ? element.chassis_number : null;\r\n        invoice[\"management_code\"] = element.management_code ? element.management_code : null;\r\n        invoice[\"is_money_service\"] = element.is_money_service && (element.is_money_service == \"X\" || element.is_money_service == \"x\") ? true : false;\r\n        invoice[\"is_refund_ticket\"] = element.is_refund_ticket && (element.is_refund_ticket == \"X\" || element.is_refund_ticket == \"x\") ? true : false;\r\n        invoice[\"is_promotion\"] = element.is_promotion && (element.is_promotion == \"X\" || element.is_promotion == \"x\") ? true : false;\r\n        invoice[\"is_promotion_new\"] = element.is_promotion_new && (element.is_promotion_new == \"X\" || element.is_promotion_new == \"x\") ? true : false;\r\n        invoice[\"lot\"] = element.lot ? element.lot : null;\r\n        invoice[\"expiration_date\"] = element.expiration_date ? element.expiration_date : null;\r\n        if (invoice[\"amount_vat\"] !== null && invoice[\"amount\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"] + invoice[\"amount\"];\r\n        else\r\n          if (invoice[\"amount\"] !== null)\r\n            invoice[\"amount_after_vat\"] = invoice[\"amount\"];\r\n          else\r\n            if (invoice[\"amount_vat\"] !== null)\r\n              invoice[\"amount_after_vat\"] = invoice[\"amount_vat\"];\r\n            else\r\n              invoice[\"amount_after_vat\"] = null;\r\n        if (invoice[\"other_tax\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_tax\"];\r\n        if (invoice[\"other_charge\"] !== null)\r\n          invoice[\"amount_after_vat\"] = invoice[\"amount_after_vat\"] + invoice[\"other_charge\"];\r\n        const _obj = this.select.products.filter(p => p.code === invoice[\"product_code\"])[0];\r\n        if (!_obj && invoice[\"product_code\"] !== '') {\r\n          const _objPush = {\r\n            code: invoice[\"product_code\"],\r\n            name: invoice[\"product_name\"],\r\n            mhvth: invoice[\"product_code\"] + ': ' + invoice[\"product_name\"],\r\n          };\r\n          this.select.products.push(_objPush);\r\n        }\r\n        invoice[\"commercial_discount\"] = false;\r\n        this.invoice_products.insert(invoice);\r\n      }\r\n    });\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataGrid.instance.refresh();\r\n    this._tinhGiaTri();\r\n    Library.hideloading();\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (!this.select.unit_codes || !Array.isArray(this.select.unit_codes)) {\r\n        this.select.unit_codes = [];\r\n      }\r\n      const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n      if (_obj) {\r\n        return _obj.code;\r\n      } else {\r\n        let code = VStringService._convertToViKdau(unitName);\r\n        let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n        if (oDuplicate)\r\n          code = code + Helper.addtionalUnitCode();\r\n        this.select.unit_codes.push({ code: code, name: unitName });\r\n        return code;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  calculateSummary(options) {\r\n    let amount_after_vat;\r\n    // Calculating \"CustomSummary1\"\r\n    if (options.name === 'amount_after_vat' && options.summaryProcess) {\r\n      if (options.summaryProcess === 'start') {\r\n        // Initializing \"totalValue\" here\r\n        if (this.formDataInInvoice !== undefined) {\r\n          options.totalValue = this.formDataInInvoice.amount_after_vat;\r\n          amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n        }\r\n      }\r\n      if (options.summaryProcess === 'calculate') {\r\n        if (this.formDataInInvoice !== undefined) {\r\n          options.totalValue = this.formDataInInvoice.amount_after_vat;\r\n          amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n        }\r\n        // Modifying \"totalValue\" here\r\n      }\r\n      if (options.summaryProcess === 'finalize') {\r\n\r\n        options.totalValue = amount_after_vat;\r\n        // Assigning the final value to \"totalValue\" here\r\n      }\r\n    }\r\n    // Calculating \"CustomSummary2\"\r\n    if (options.name === 'CustomSummary2') {\r\n      // ...\r\n      // Same \"if\" statements here\r\n    }\r\n  }\r\n\r\n  changePhiDV(row) {\r\n    this.view_orderChange();\r\n    if (row.is_money_service) {\r\n      row.commercial_discount = false;\r\n    }\r\n    if (row.is_money_service && VStringService._getValueToString(row.product_name) == '') {\r\n      row.product_name = 'Phí dịch vụ';\r\n      this.invoice_products.update(row.id, row);\r\n    } else if (!row.is_money_service && VStringService._getValueToString(row.product_name) === 'Phí dịch vụ') {\r\n      row.product_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  changeCKTM(row) {\r\n    if (row.commercial_discount) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n  changePhiHoanVe(row) {\r\n    if (row.is_refund_ticket) {\r\n      row.is_money_service = false;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'LAY_MAU_BANG_KE') {\r\n      this.layMauBangKe();\r\n    } else if (e.itemData.id === 'NAP_DU_LIEU_BANG_KE') {\r\n      this.napDuLieuTuBangKe();\r\n    }\r\n  }\r\n  onClickGuidReduce() {\r\n    this.router.navigate([]).then(result => { window.open('https://ihoadon.vn/hddt/danh-muc-hang-hoa-dich-vu-duoc-giam-thue-gtgt-theo-nghi-quyet-so-406-nq-ubtvqh15.html', '_blank'); });\r\n  }\r\n  onClickGuidNQ43() {\r\n    this.router.navigate([]).then(result => { window.open('https://ihoadon.vn/hddt/danh-muc-hang-hoa-dich-vu-duoc-giam-thue-gtgt-theo-nghi-quyet-so-406-nq-ubtvqh15.html', '_blank'); });\r\n  }\r\n\r\n  _changeNQ43(e) {\r\n    if (e.value) {\r\n      if (this.formDataInInvoice.sales_percentage == null && parseInt(this.configs.system_parameter.value_rate_percent) > 0) {\r\n        this.formDataInInvoice.sales_percentage = parseInt(this.configs.system_parameter.value_rate_percent);\r\n      }\r\n    }\r\n    else {\r\n      this.formDataInInvoice.sales_percentage = null;\r\n    }\r\n    this._tinhGiaTri();\r\n  }\r\n  onContentReady = (e) => {\r\n    const arrFooter = [\r\n      { name: this._translate.GRID.INVOICE_DETAILS.total_money, class: 'table-footer-1' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_vat, class: 'table-footer-2' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount, class: 'table-footer-3' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_without_discount, class: 'table-footer-4' },\r\n    ]\r\n    this.invoiceService.formatSumColumnGrid(arrFooter);\r\n    if (this.firstTime) {\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.refresh();\r\n        this.dataGrid.instance.updateDimensions();\r\n        this.firstTime = false;\r\n      }, 10);\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.LABEL.process_invoice}}</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\">\\r\\n      <div class=\\\"container-fluid\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-lg-7\\\">\\r\\n            <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item [label]=\\\"{text: _translate.GRID.INVOICE.template_code }\\\" dataField=\\\"template\\\"  [editorOptions]=\\\"{readOnly: true}\\\">\\r\\n                </dxi-item>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n                <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: _translate.GRID.INVOICE.invoice_date}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item cssClass=\\\"invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\" [label]=\\\"{text: _translate.GRID.INVOICE.invoice_number}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"customer_code\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.customer_code}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"buyer_tax_code\\\" [label]=\\\"{text: _translate.GRID.INVOICE.buyer_tax_code }\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"buyer_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.buyer_name }\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"buyer_mobile\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.phone }\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item dataField=\\\"buyer_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.customer_name}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n            </dx-form>\\r\\n          </div>\\r\\n          <div class=\\\"col-lg-5\\\">\\r\\n            <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                <dxi-item cssClass=\\\"form-input-visibility\\\" dataField=\\\"invoice_date\\\" [label]=\\\"{text: 'temp'}\\\"></dxi-item>\\r\\n                <!-- <dxi-item dataField=\\\"a\\\" [label]=\\\"{text: 'Số xác thực'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item> -->\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n                  <dxi-item dataField=\\\"currency_code\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_code}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"currency_rate\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_rate}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n              <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n                  <dxi-item dataField=\\\"payment_method_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_method}\\\"  [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n                <dxi-item dataField=\\\"buyer_email\\\" [label]=\\\"{text: 'Email'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              </dxi-item>\\r\\n            </dx-form>\\r\\n          </div>\\r\\n          <div class=\\\"col-lg-12 link-send-invoice\\\">\\r\\n            <div class=\\\"pull-right\\\">\\r\\n              <a *ngIf=\\\"invoice.status == 'DA_XUAT'\\\" (click)=\\\"sendMail()\\\" href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.LABEL.send_invoice}}</a>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <dx-data-grid\\r\\n        id=\\\"invoiceHistoryGrid\\\"\\r\\n        [dataSource]=\\\"invoice_process\\\"\\r\\n        (onEditorPreparing) = \\\"onEditorPreparing($event)\\\"\\r\\n        [showBorders]=\\\"true\\\"\\r\\n        [wordWrapEnabled]=\\\"true\\\"\\r\\n        [showRowLines]=\\\"true\\\">\\r\\n        <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n        <dxi-column cellTemplate=\\\"stt\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.view_order}}\\\" width=\\\"80\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n        <dxi-column dataField=\\\"process_time\\\" caption=\\\"{{_translate.CONTROLL.LABEL.date_made}}\\\" width=\\\"180\\\" dataType=\\\"datetime\\\" format=\\\"dd/MM/yyyy HH:mm:ss\\\" dateSerializationFormat=\\\"yyyy-MM-dd HH:mm:ss\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n        <dxi-column dataField=\\\"content\\\" cellTemplate=\\\"content\\\" caption=\\\"{{_translate.CONTROLL.LABEL.task}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n        <dxi-column dataField=\\\"user_name\\\" caption=\\\"{{_translate.CONTROLL.LABEL.person_made}}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n        <div *dxTemplate=\\\"let d of 'stt'\\\">\\r\\n          <p>{{ d.rowIndex + 1 }}</p>\\r\\n        </div>\\r\\n        <div *dxTemplate=\\\"let d of 'content'\\\">\\r\\n              {{ d.data.content}}\\r\\n          </div>\\r\\n      </dx-data-grid>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back }}\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      </dx-button>\\r\\n    </div>\\r\\n  </form>\\r\\n\"","module.exports = \"::ng-deep .form-input-visibility{visibility:hidden}::ng-deep .invoice-number-create-invoice input{color:red;font-weight:bold}.link-send-invoice{margin-top:10px}.link-send-invoice a{text-decoration:underline}#invoiceHistoryGrid{margin-top:15px}\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nimport { Helper, AuthService, Library, VStringService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { SendMailComponent } from '../send-mail/send-mail.component';\r\nimport { CustomersService } from '@modules/customers/shared';\r\n\r\n@Component({\r\n  selector: 'app-send-invoices',\r\n  templateUrl: './send-invoices.component.html',\r\n  styleUrls: ['./send-invoices.component.scss']\r\n})\r\nexport class SendInvoicesComponent implements OnInit {\r\n\r\n  frmData: any = {};\r\n  invoice: any\r\n  invoice_process: any;\r\n  _translate: any;\r\n  email: any;\r\n  constructor(\r\n    private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    public bsModalSendMail: BsModalRef,\r\n    private customersService: CustomersService,\r\n\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadTableContent();\r\n    let invoice = this.invoice;\r\n    let template_code = invoice.template_code? invoice.template_code : invoice.template.template_code;\r\n    let invoice_series = invoice.invoice_series? invoice.invoice_series : invoice.template.invoice_series;\r\n    this.frmData.template = `${template_code} - ${invoice_series}`;\r\n    this.frmData.invoice_date = moment(invoice.invoice_date).format('DD/MM/YYYY');\r\n    this.frmData.invoice_number = invoice.invoice_number;\r\n    this.frmData.customer_code = invoice.customer_code;\r\n    this.frmData.buyer_tax_code = invoice.buyer_tax_code;\r\n    this.frmData.buyer_name = invoice.buyer_name;\r\n    this.frmData.buyer_mobile = invoice.buyer_mobile;\r\n    this.frmData.buyer_email = invoice.buyer_email;\r\n    this.frmData.currency_code = invoice.currency_code;\r\n    this.frmData.payment_method_name = invoice.payment_method_view_name;\r\n    this.frmData.customer_id = invoice.customer_id;\r\n    this.email = invoice.buyer_email;\r\n    this.customersService.getCustomer(this.frmData.customer_id).subscribe(response => {\r\n      if (response.status == \"success\") {\r\n        let emailInCategory = \"\";\r\n        const customer = response.data.customer;\r\n        if (customer)\r\n          emailInCategory = customer.email;\r\n        if (this.email) {\r\n          if (emailInCategory != \"\") {\r\n            let arrEmail = emailInCategory.split(';');\r\n            arrEmail.forEach(item => {\r\n              if (this.email.indexOf(item) < 0)\r\n                this.email = this.email + \";\" + item;\r\n            });\r\n          }\r\n        }\r\n        else {\r\n          this.email = emailInCategory;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  loadTableContent() {\r\n    this.invoice_process = {};\r\n    let sub = this.vatService.getInvoiceProccess(this.invoice.id).subscribe(rs => {\r\n      const mapObj = {\r\n        T: \"; \",\r\n      };\r\n      this.invoice_process = rs.data.invoice_process;\r\n      if (this.invoice_process && this.invoice_process.length > 0) {\r\n        this.invoice_process.forEach(item => {\r\n          item.content = VStringService._getValueToString(item.content).replace(/;/g, \"; \");\r\n        });\r\n      }\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  sendMail() {\r\n    const initialState = {\r\n      invoice_id: this.invoice.id,\r\n      email: this.email,\r\n      customer_id: this.frmData.customer_id\r\n    };\r\n    this.bsModalSendMail = this.modalService.show(SendMailComponent, { class: 'modal-md', initialState, backdrop: 'static', keyboard: false });\r\n    this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == 'success_mail') {\r\n        this.loadTableContent();\r\n      }\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.dataField === 'content' && e.parentType == \"dataRow\") {\r\n      e.editorName = 'dxTextArea';\r\n    }\r\n  }\r\n\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.BUTTON.send}} EMAIL</h4>\\r\\n      <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\">\\r\\n      <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n        <dxi-item dataField=\\\"email\\\" [label]=\\\"{text: 'Email'}\\\">\\r\\n          <dxi-validation-rule type=\\\"required\\\" message=\\\"Email {{_translate.VALIDATION.required}}\\\"></dxi-validation-rule>\\r\\n          <!-- <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.email\\\" message=\\\"Email {{_translate.VALIDATION.not_pattern}}\\\"></dxi-validation-rule> -->\\r\\n        </dxi-item>\\r\\n      </dx-form>\\r\\n      <div style=\\\"margin-top: 10px;\\\">\\r\\n          <a style=\\\"color: silver;text-decoration: underline;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.note1}}: </a><a style=\\\"color: silver;font-size: 90%;\\\"> {{_translate.CONTROLL.LABEL.note_email}}</a>\\r\\n        </div>\\r\\n        <div style=\\\"margin-top: 5px;\\\">\\r\\n            <a style=\\\"color: silver;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.example}}: admin@efy.com.vn;sale@efy.com.vn</a>\\r\\n          </div>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n      </dx-button>\\r\\n      <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      </dx-button>\\r\\n    </div>\\r\\n  </form>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\n\r\nimport { pattern } from '@config/index';\r\nimport { Helper, Library, AuthService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { CustomersService } from '@modules/customers/shared';\r\n\r\n@Component({\r\n  selector: 'app-send-mail',\r\n  templateUrl: './send-mail.component.html',\r\n  styleUrls: ['./send-mail.component.scss']\r\n})\r\nexport class SendMailComponent implements OnInit {\r\n\r\n  invoice_id: any;\r\n  frmData: any = {};\r\n  email: string;\r\n  customer_id: string;\r\n  pattern = pattern;\r\n  _translate: any;\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private authService: AuthService,\r\n    private customersService: CustomersService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.frmData.email = this.email;\r\n  }\r\n\r\n  onSubmit(e) {\r\n    let data = [{\r\n      id: this.invoice_id,\r\n      email: this.frmData.email\r\n    }];\r\n    Library.showloading();\r\n    let sub = this.vatService.sendMail(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        let updateEmail = {\r\n          id: this.customer_id,\r\n          email: this.frmData.email\r\n        };\r\n        this.customersService.uploadEmailtoCustomer(updateEmail).subscribe(rsl => {\r\n          if (rsl.status == 'success') {\r\n\r\n          }\r\n        });\r\n        Library.notify(this._translate.NOTIFY.send_mail_success, 'success');\r\n        this.bsModalRef.content.successSaveItem = \"success_mail\";\r\n        this.bsModalRef.hide();\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{ 'MENU.list_invoice_waiting_for_signing' | translate }}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"dong()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid \\r\\n    id=\\\"gridContainer\\\"\\r\\n    [dataSource]=\\\"invoiceList\\\"\\r\\n    [showRowLines]=\\\"true\\\"\\r\\n    [allowColumnResizing]=\\\"true\\\"\\r\\n    [columnMinWidth]=\\\"50\\\"\\r\\n    [columnResizingMode]=\\\"true\\\"\\r\\n    [columnAutoWidth]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\">\\r\\n\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template_code\\\" caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template.invoice_series\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\" [width]=\\\"90\\\" alignment=\\\"center\\\" [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\" [width]=\\\"110\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"buyer_tax_code\\\" caption=\\\"{{ 'GRID.INVOICE.buyer_tax_code' | translate }}\\\" [width]=\\\"140\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'GRID.INVOICE.customer_name' | translate }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"total_payment\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" dataType=\\\"number\\\" format=\\\"0,###.##\\\"  alignment=\\\"right\\\" ></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"statusName\\\" caption=\\\"{{ 'GRID.GENERAL.status' | translate }}\\\" [width]=\\\"130\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n        *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template.template_code }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name }}</p>\\r\\n      <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.customer_name || d.data.buyer_name || 'Hóa đơn chờ ký' }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'statusName'\\\">\\r\\n      <p style=\\\"color:green;\\\" *ngIf=\\\"d.data.status =='DA_XUAT'\\\">Đã ký</p>\\r\\n      <p style=\\\"color: red;\\\" *ngIf=\\\"d.data.status !='DA_XUAT' && d.data.status !='GIU_SO'\\\">{{ d.data.status }}</p>\\r\\n    </div>\\r\\n    \\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <div style=\\\"width: 89%\\\">\\r\\n    <label class=\\\"custom-control-label\\\"\\r\\n           for=\\\"customRadio212\\\">{{reportCountERR}}</label>\\r\\n  </div>\\r\\n\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.sign}}\\\" icon=\\\"{{_translate.ICONS.pencil}}\\\" *ngIf=\\\"!daXong\\\" type=\\\"default\\\" (click)=\\\"kyHangLoat()\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\"","module.exports = \".custom-control-label{margin-top:4px;color:red;font-weight:800;font-family:Times New Roman}\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as moment from 'moment';\r\n\r\nimport { Helper, Library, SocketService, AuthService, VStringService, VPreviewInvService, sEnum } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n@Component({\r\n  selector: 'app-sign-many',\r\n  templateUrl: './sign-many.component.html',\r\n  styleUrls: ['./sign-many.component.scss']\r\n})\r\nexport class SignManyComponent implements OnInit {\r\n\r\n  invoices: any;\r\n  configs: any;\r\n  invoiceList: any;\r\n  ioSignature: any;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  _translate: any;\r\n  nodeSign: any;\r\n  isExportFailed: boolean = false;\r\n  reportCountERR: any = \"\";\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  isHdGTGT: any;\r\n  search: any;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private spinner: NgxSpinnerService,\r\n    private vPreviewInvService: ViewInvoiceService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    if (this.infoDangKy) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n        this.isTT78 = true;\r\n    }\r\n    this.convertData();\r\n    this.connectWebsocket();\r\n  }\r\n\r\n  convertData() {\r\n    this.invoiceList.forEach(item => {\r\n      item.invoice_date = moment(item.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n      delete item.updated_at;\r\n      delete item.decpoint_is_dot;\r\n      delete item.money_decimal_format;\r\n      item.invoice_products = item.invoice_products.sort((itemA, itemB) => {\r\n        return itemA.order - itemB.order;\r\n      });\r\n    });\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          let i = this.invoiceIndex;\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content, this.invoices[i]);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.invoices[i].issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat(this.invoices[i]);\r\n          } else {\r\n            this.invoices[i].invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoices[i].invoice_files.length) {\r\n              this.xuLiApiKhiXuat(this.invoices[i]);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        if (data.Description == \"\") {\r\n          this.showPopup = false;\r\n          this.errorImport = true;\r\n        }\r\n        else {\r\n          this.invoiceList[this.invoiceIndex].status = data.Description;\r\n          this.isExportFailed = true;\r\n          this.continuteExportInvoice(false);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  continuteExportInvoice(isSuccess) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.valueProgress += percentComplete;\r\n    if (this.invoiceIndex == this.totalInvoice - 1) {\r\n      if (!this.isExportFailed && isSuccess)\r\n        Library.notify(this._translate.NOTIFY.sign_success, 'success', 5000);\r\n      else {\r\n        let lstInvoiceERR = this.invoiceList.filter(p => p.status != \"DA_XUAT\" && p.status != \"GIU_SO\");\r\n        this.reportCountERR = \"Có \" + lstInvoiceERR.length + \" hóa đơn ký lỗi. Đề nghị kiểm tra lại!\";\r\n        Library.notify(\"Có \" + lstInvoiceERR.length + \" hóa đơn ký lỗi\", 'success', 5000);\r\n      }\r\n      this.daXong = true;\r\n      setTimeout(() => {\r\n        this.showPopup = false;\r\n      }, 300);\r\n    }\r\n    else if (this.invoiceIndex < this.totalInvoice - 1) {\r\n      this.invoiceIndex++;\r\n      this.xuatHoaDon();\r\n    }\r\n  }\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  xuLiApiKhiXuat(invoice) {\r\n    let tempTemplate = invoice.template;\r\n    delete invoice.template;\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (!this.isTT78) {\r\n      let sub = this.vatService.edit(invoice.id, invoice, true).subscribe(rs => {\r\n        invoice.template = tempTemplate;\r\n        if (rs.status == 'success') {\r\n          invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, invoice.invoice_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.invoiceList[this.invoiceIndex].status = rs.message;\r\n          this.isExportFailed = true;\r\n          this.continuteExportInvoice(false);\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      let sub = this.vatService.editTT78(invoice.id, invoice, true).subscribe(rs => {\r\n        invoice.template = tempTemplate;\r\n        if (rs.status == 'success') {\r\n          invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.invoiceList[this.invoiceIndex].status = rs.message;\r\n          this.isExportFailed = true;\r\n          this.continuteExportInvoice(false);\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string, invoice) {\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    this.subXuatHoaDon = this.vatService.xuatHoaDon({\r\n      id: invoice.id,\r\n      xml_string: xml_string,\r\n      invoice_files: invoice.invoice_files\r\n    }).subscribe(rs => {\r\n      let isSuccess = false;\r\n      this.ganXong = true;\r\n      this.tempKiFile = 0;\r\n      if (rs.status == 'success') {\r\n        this.invoiceList[this.invoiceIndex].status = 'DA_XUAT';\r\n        isSuccess = true;\r\n      } else {\r\n        this.invoiceList[this.invoiceIndex].status = rs.message;\r\n        this.isExportFailed = true;\r\n      }\r\n      this.continuteExportInvoice(isSuccess);\r\n    }, err => { }, () => {\r\n      // Library.hideloading();\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    let i = this.invoiceIndex;\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat(this.invoices[i]);\r\n    } else {\r\n      if (this.invoices[i].invoice_files.length) {\r\n        this.invoices[i].invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.invoices[i].invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n      }\r\n    }\r\n  }\r\n\r\n  kyHangLoat() {\r\n    Library.confirmVA(this._translate.CONFIRM.sign_inv, this._translate.NOTIFY.notify, () => {\r\n      this.showPopup = true;\r\n      this.invoices = JSON.parse(JSON.stringify(this.invoiceList.filter(item => item.status != 'DA_XUAT')));\r\n      this.totalInvoice = this.invoices.length;\r\n      this.invoiceIndex = 0;\r\n      this.tempKiFile = 0;\r\n      this.xuatHoaDon();\r\n    });\r\n  }\r\n\r\n  dong() {\r\n    if (this.ganXong) {\r\n      this.bsModalRef.content.successSaveItem = \"success\";\r\n    }\r\n    this.bsModalRef.hide();\r\n    if (this.isHdGTGT) {\r\n      if (this.search)\r\n        this.router.navigate([`/system/vat-invoice`], { queryParams: this.search });\r\n      else\r\n        this.router.navigate([`/system/vat-invoice`]);\r\n    }\r\n    else {\r\n      if (this.search)\r\n        this.router.navigate([`/system/sale-invoice`], { queryParams: this.search });\r\n      else\r\n        this.router.navigate([`/system/sale-invoice`]);\r\n    }\r\n  }\r\n\r\n  viewDetailInvoice(data) {\r\n    if (data) {\r\n      const ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      }\r\n      let dulieu = this.vatService.taodulieuXemMau(ids);\r\n      dulieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      this.vPreviewInvService.xemMau(dulieu);\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{lblTitle}}</h4>\\r\\n  <div>\\r\\n    <div *ngFor=\\\"let item of items | paginate: { itemsPerPage: 1, currentPage: p }; let i = index\\\">\\r\\n    </div>\\r\\n    <pagination-controls style=\\\"width: 50%;\\\" (pageChange)=\\\"getPage($event)\\\"></pagination-controls>\\r\\n  </div>\\r\\n  <div style=\\\"display: flex; align-items: center;\\\">\\r\\n    <dx-button *ngIf=\\\"isXuatHD\\\" text=\\\"Đồng ý\\\" icon=\\\"{{_translate.ICONS.save}}\\\" type=\\\"default\\\" (click)=\\\"dongy()\\\">\\r\\n    </dx-button>\\r\\n    <i class=\\\"fa fa-times\\\" style=\\\"font-size:25px; cursor: pointer;\\\" (click)=\\\"dong()\\\"></i>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <div class=\\\"body-content\\\">\\r\\n    <div *ngIf=\\\"isXuatHD\\\" class=\\\"canh-bao\\\">\\r\\n      <p style=\\\"font-weight: 600;\\\">\\r\\n        <span class=\\\"nhap-nhay\\\"></span>\\r\\n        <span style=\\\"font-size: 17px;\\\">Lưu ý: </span>\\r\\n        Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên\\r\\n        hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.\\r\\n      </p>\\r\\n    </div>\\r\\n    <div style=\\\"display: flex; width: 100%;\\\">\\r\\n      <iframe height=\\\"{{heightT}}\\\" id=\\\"preview-iframe\\\"></iframe>\\r\\n      <div *ngIf=\\\"isXuatHD\\\" class=\\\"thong-tin-hoa-don\\\">\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\" font-weight: 600;\\\" *ngIf=\\\"!isHoaDon\\\">Ngày chứng từ : </p>\\r\\n          <p style=\\\" font-weight: 600;\\\" *ngIf=\\\"isHoaDon\\\">Ngày hóa đơn : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">{{ngayHD}}</p>\\r\\n        </div>\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\"font-weight: 600;\\\">Trạng thái : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">Xuất {{hinhthucxuat}}</p>\\r\\n        </div>\\r\\n        <div class=\\\"e-invoice\\\">\\r\\n          <p style=\\\"font-weight: 600;\\\">Tổng tiền : </p>\\r\\n          <p style=\\\"color: orange;font-weight: 600;\\\">{{total_payment}}</p>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".modal-header{display:flex;justify-content:space-between;align-items:center}.pagination{display:flex}.pagination a{color:black;float:left;padding:8px 16px;text-decoration:none}::ng-deep .body-content{height:100%}.modal-body .body-content{display:flex;justify-content:center;align-items:center;flex-direction:column}.nhap-nhay{background:red;padding:0.5px 9px;margin-right:5px;border-radius:57%;-webkit-animation:flicker 1s infinite}@-webkit-keyframes flicker{0%{opacity:0}9%{opacity:0}10%{opacity:.5}13%{opacity:0}20%{opacity:.5}25%{opacity:1}}.example{padding:20px}input[type=button]{padding:5px 10px;margin:10px 5px;border-radius:5px;cursor:pointer;background:#ddd;border:1px solid #ccc}input[type=button]:hover{background:#ccc}.confirm{display:none}.confirm>div:first-of-type{position:fixed;width:100%;height:100%;background:rgba(0,0,0,0.5);top:0px;left:0px}.confirm>div:last-of-type{padding:10px 20px;background:white;position:absolute;width:auto;height:auto;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border-radius:5px;border:1px solid #333}.confirm>div:last-of-type div:first-of-type{min-width:150px;padding:10px}.confirm>div:last-of-type div:last-of-type{text-align:right}.canh-bao{margin-bottom:10px}#preview-iframe{width:calc(100% - 20px)}\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { VStringService, SocketService, AuthService, sEnum, Library, Helper, VChanggeMoneyService, VPreviewInvService } from '@core/index';\r\ndeclare var $: any;\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\n\r\n@Component({\r\n  selector: 'app-view-invoice',\r\n  templateUrl: './view-invoice.component.html',\r\n  styleUrls: ['./view-invoice.component.scss']\r\n})\r\nexport class ViewInvoiceComponent implements OnInit {\r\n  bsModalSignRef: BsModalRef;\r\n  items: any;\r\n  key: string = 'name';\r\n  reverse: boolean = false;\r\n  objectUrl: any;\r\n  mainTest: any;\r\n  _language: string;\r\n  _translate: any;\r\n  isXuatHD: any;\r\n  ngayHD: any;\r\n  hinhthucxuat: any;\r\n  configs: any;\r\n  ioSignature: Subscription;\r\n  lblTitle: any;\r\n  isTaiHD: boolean = false;\r\n  invoices = [];\r\n  showPopup = false;\r\n  total_payment: any;\r\n  totalInvoice: number;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  isExportFailed: boolean = false;\r\n  toltal_payment: any;\r\n  isHoaDon = false;\r\n  sort(key) {\r\n    this.key = key;\r\n    this.reverse = !this.reverse;\r\n  }\r\n  p: number = 1;\r\n  widthT: any;\r\n  heightT: any;\r\n  typeAction: any;// XEM_HOA_DON;IN_CHUYEN_DOI;NAP_EXCEL\r\n  ids: any;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n  constructor(\r\n    public bsModal: BsModalRef,\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    public translate: TranslateService,\r\n    private authService: AuthService,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.connectWebsocket();\r\n    this.configs = this.authService.getConfigs();\r\n    this.heightT = screen.availHeight - 195;\r\n    switch (this.typeAction) {\r\n      case \"NAP_EXCEL\":\r\n        this.lblTitle = \"BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ\";\r\n        this.isTaiHD = false;\r\n        this.isHoaDon = false;\r\n        break;\r\n      case \"NAP_EXCEL_HD\":\r\n        this.lblTitle = \"BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ\";\r\n        this.isTaiHD = false;\r\n        this.isHoaDon= true\r\n        break;\r\n      case \"XEM_HOA_DON\":\r\n        this.lblTitle = \"XEM HÓA ĐƠN ĐIỆN TỬ\";\r\n        this.isTaiHD = true;\r\n        break;\r\n      case \"IN_CHUYEN_DOI\":\r\n        this.lblTitle = \"IN CHUYỂN ĐỔI HÓA ĐƠN ĐIỆN TỬ\";\r\n        this.isTaiHD = true;\r\n        break;\r\n    }\r\n    this.getPage(1, 'desc', 'created');\r\n  }\r\n  viewTransport(item) {\r\n    let id = item.id;\r\n  }\r\n\r\n  getPage(page: number, sort: string = 'desc', order: string = 'created') {\r\n    switch (this.typeAction) {\r\n      case \"NAP_EXCEL\":\r\n        this.action_napexcel(page);\r\n        break;\r\n      case \"NAP_EXCEL_HD\":\r\n        this.action_napexcel(page);\r\n        break;\r\n      case \"XEM_HOA_DON\":\r\n        this.action_xemhoadon(page);\r\n        break;\r\n      case \"IN_CHUYEN_DOI\":\r\n        this.action_inchuyendoi(page);\r\n        break;\r\n    }\r\n  }\r\n  action_napexcel(page) {\r\n    this.p = page;\r\n    let oTransport: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        oTransport = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let invoicesArr = [];\r\n    invoicesArr.push(oTransport);\r\n    let data = {\r\n      invoices: invoicesArr\r\n    }\r\n    let sub = this.vatService.previewInvoiceImport(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.toltal_payment = rs.data.invoice.toltal_payment;\r\n          this.objectUrl = rs.data.invoice.pdf_file;\r\n          this.total_payment = rs.data.invoice.total_payment;\r\n          this.ngayHD = moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          this.total_payment = rs.data.invoice.total_payment;\r\n          let invoice_date = rs.data.invoice.invoice_date;\r\n          let json_data = rs.data.invoice.json_data;\r\n          let appCode = \"REPX\";\r\n          if (rs.data.invoice.is_html_template)\r\n            appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, invoice_date, this.toltal_payment);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n        this.spinner.hide();\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  action_xemhoadon(page) {\r\n    this.p = page;\r\n    let id: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        id = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let arrId = [];\r\n    arrId.push(id);\r\n    let sub = this.vatService.xemHoaDonInvoiceImport(arrId).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.objectUrl = rs.data.invoice.pdf_file;\r\n          this.ngayHD = moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          let invoice_date = rs.data.invoice.invoice_date;\r\n          let json_data = rs.data.invoice.json_data;\r\n          let appCode = \"REPX\";\r\n          if (rs.data.invoice.is_html_template)\r\n            appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, invoice_date);\r\n        }\r\n      } else {\r\n        this.spinner.hide();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  action_inchuyendoi(page) {\r\n    this.p = page;\r\n    let id: any;\r\n    let index = 1;\r\n    for (let item of this.items) {\r\n      if (index == page) {\r\n        id = item;\r\n        break;\r\n      }\r\n      index = index + 1;\r\n    }\r\n    this.spinner.show();\r\n    let arrId = [];\r\n    arrId.push(id);\r\n    let sub = this.vatService.inChuyenDoiInvoiceImport(arrId, true).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        //Xem hóa đơn từ server\r\n        if (this.configs.system_parameter.display_template_from_server) {\r\n          this.objectUrl = rs.data.invoice.pdf_file;\r\n          this.ngayHD = moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY');\r\n          this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n          let iframe = document.getElementById('preview-iframe');\r\n          iframe.setAttribute(\"src\", this.mainTest);\r\n          this.spinner.hide();\r\n        }\r\n        else {\r\n          /* Xem hóa đơn từ Client */\r\n          let invoice_date = rs.data.invoice.invoice_date;\r\n          let json_data = rs.data.invoice.json_data;\r\n          let appCode = \"REPX\";\r\n          if (rs.data.invoice.is_html_template)\r\n            appCode = \"HTML\";\r\n          this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC_KHI_XUAT\", this.hinhthucxuat, invoice_date);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n        this.spinner.hide();\r\n      }\r\n    }, err => {\r\n      this.spinner.hide();\r\n    }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  dong() {\r\n    // this.router.navigate(['/system/transport-invoice']);\r\n    this.bsModal.hide()\r\n  }\r\n  dongy() {\r\n    this.bsModal.content.successSaveItem = 'DONG_Y';\r\n    this.bsModal.hide();\r\n  }\r\n  /* Kết nối đến socket */\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_viewInvoice') {\r\n        if (data.Status == \"success\")\r\n          this.viewInvoice(data.Data.Content, data.Data.typeView, data.Data.hinhthucxuat, data.Data.invoice_date);\r\n        else if (data.Status == \"error\") {\r\n          this.spinner.hide();\r\n          Library.notify(data.Description, 'error');\r\n        }\r\n      }\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n  }\r\n  viewInvoice(content, typeView, hinhthucxuat, invoice_date) {\r\n    this.objectUrl = content;\r\n    this.ngayHD = moment(invoice_date).format('DD/MM/YYYY');\r\n    this.mainTest = \"data:application/pdf;base64,\" + this.objectUrl;\r\n    let iframe = document.getElementById('preview-iframe');\r\n    iframe.setAttribute(\"src\", this.mainTest);\r\n    this.spinner.hide();\r\n  }\r\n  taihoadon() {\r\n    this.invoices = this.items\r\n    this.showPopup = true;\r\n    this.totalInvoice = Math.floor(this.invoices.length / 10) + 1;\r\n    this.invoiceIndex = 0;\r\n    this.tempKiFile = 0;\r\n    this.xulyTaiFilePdf();\r\n  }\r\n  xulyTaiFilePdf() {\r\n    let ids = this.iterator(this.invoices, 10, this.invoiceIndex);\r\n    let is_convert = true;\r\n    if (this.typeAction == \"XEM_HOA_DON\")\r\n      is_convert = false\r\n    let sub = this.vatService.xuatHDPdf(ids, is_convert).subscribe(rs => {\r\n      let isSuccess = false;\r\n      this.ganXong = true;\r\n      this.tempKiFile = 0;\r\n      if (rs.status == 'success') {\r\n        Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n        isSuccess = true;\r\n      } else {\r\n        this.isExportFailed = true;\r\n      }\r\n      this.continuteExportInvoice(isSuccess);\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  continuteExportInvoice(isSuccess) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    this.valueProgress += percentComplete;\r\n    if (this.invoiceIndex == this.totalInvoice - 1) {\r\n      if (!this.isExportFailed && isSuccess)\r\n        Library.notify(\"Tải hóa đơn thành công\", 'success', 5000);\r\n      else {\r\n        // Danh sách lỗi\r\n      }\r\n      this.daXong = true;\r\n      setTimeout(() => {\r\n        this.showPopup = false;\r\n      }, 300);\r\n    }\r\n    else if (this.invoiceIndex < this.totalInvoice - 1) {\r\n      this.invoiceIndex++;\r\n      this.xulyTaiFilePdf();\r\n    }\r\n  }\r\n  iterator(a, take, skip) {\r\n    let current = skip * 10;\r\n    let l = a.length;\r\n    let end = current + take;\r\n    let part = a.slice(current, end);\r\n    current = end < l ? end : 0;\r\n    return part;\r\n  }\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(\"Cảnh báo: Quá trình tải hóa đơn sẽ dừng lại nếu bạn đóng cửa sổ này?\");\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {CanDeactivate} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\n\r\nexport interface CanComponentDeactivate {\r\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VatDeactivateGuard implements CanDeactivate<CanComponentDeactivate> {\r\n\r\n  canDeactivate(component: CanComponentDeactivate) {\r\n    return component.canDeactivate && component.canDeactivate();\r\n  }\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\n// library\r\nimport {CoreModule, devextremeModule} from '@core/index';\r\n// general\r\nimport {SharedModule, VatSharedModule, SomeModule,NotifySuccessComponent} from '@shared/index';\r\nimport {VatService, InvoiceResolver, ShowInvoiceResolver} from './shared';\r\nimport {routing} from './vat.routing';\r\nimport {IndexComponent} from './components/index/index.component';\r\nimport {InvoiceComponent} from './components/invoice/invoice.component';\r\nimport {KeepNumberComponent} from './components/keep-number/keep-number.component';\r\nimport {SendInvoicesComponent} from './components/send-invoices/send-invoices.component';\r\nimport {SendMailComponent} from './components/send-mail/send-mail.component';\r\nimport {ProductGripComponent} from './components/product-grip/product-grip.component';\r\nimport {FormInvoiceComponent} from './components/form-invoice/form-invoice.component';\r\nimport {ImportInvoicesComponent} from './components/import-invoices/import-invoices.component';\r\nimport {SignManyComponent} from './components/sign-many/sign-many.component';\r\nimport {vTranslateModule} from '@core/module/v-translate.module';\r\nimport {ViewAttachFileComponent} from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport {ImportInvoicesDtComponent} from './components/import-invoices-dt/import-invoices-dt.component';\r\nimport {TagInputModule} from 'ngx-chips';\r\nimport {DxLookupModule,DxTooltipModule,DxPopoverModule  } from 'devextreme-angular';\r\nimport {VatDeactivateGuard} from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport {ConfirmService} from '@shared/service/confirm.service';\r\nimport {ListsService} from '@modules/lists/shared';\r\nimport {CustomersService} from '@modules/customers/shared';\r\nimport { ChooseHdckComponent } from './components/choose-hdck/choose-hdck.component';\r\nimport { NotifyReduceTaxComponent, SendListEmailComponent, SendDataForTaxComponent } from '@shared/index';\r\nimport { ViewInvoiceComponent } from './components/view-invoice/view-invoice.component';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    routing,\r\n    SharedModule,\r\n    VatSharedModule,\r\n    SomeModule,\r\n    devextremeModule,\r\n    vTranslateModule,\r\n    DxLookupModule,\r\n    TagInputModule,\r\n    DxTooltipModule,\r\n    DxPopoverModule,\r\n    NgxPaginationModule,\r\n    NgxSpinnerModule\r\n  ],\r\n  exports: [\r\n    IndexComponent,\r\n    InvoiceComponent,\r\n    KeepNumberComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    ProductGripComponent,\r\n    FormInvoiceComponent,\r\n    ImportInvoicesComponent,\r\n    SignManyComponent,\r\n  ],\r\n  declarations: [\r\n    IndexComponent,\r\n    InvoiceComponent,\r\n    KeepNumberComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    ProductGripComponent,\r\n    FormInvoiceComponent,\r\n    ImportInvoicesComponent,\r\n    SignManyComponent,\r\n    ImportInvoicesDtComponent,\r\n    ChooseHdckComponent,\r\n    ViewInvoiceComponent\r\n  ],\r\n  entryComponents: [\r\n    KeepNumberComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    ImportInvoicesComponent,\r\n    ImportInvoicesDtComponent,\r\n    SignManyComponent,\r\n    ViewAttachFileComponent,\r\n    NotifySuccessComponent,\r\n    ChooseHdckComponent,\r\n    NotifyReduceTaxComponent,\r\n    SendDataForTaxComponent,\r\n    SendListEmailComponent,\r\n    ViewInvoiceComponent,\r\n    SignatureOffComponent,\r\n    ViewInvoiceMultipageComponent,\r\n    PreviewInvoiceComponent\r\n  ],\r\n  providers: [\r\n    VatService,\r\n    InvoiceResolver,\r\n    ShowInvoiceResolver,\r\n    VatDeactivateGuard,\r\n    ConfirmService,\r\n    ListsService,\r\n    CustomersService,\r\n    MyBsModalService,\r\n    InvoicesService\r\n  ]\r\n})\r\nexport class VatModule {\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {Routes, RouterModule} from '@angular/router';\r\n\r\nimport {IndexComponent} from './components/index/index.component';\r\nimport {InvoiceComponent} from './components/invoice/invoice.component';\r\n\r\n// import { CreateInvoiceGuard } from '@shared/index';\r\nimport {InvoiceResolver, ShowInvoiceResolver} from './shared';\r\nimport {VatDeactivateGuard} from '@modules/vat/deactivate/vat-deactivate.guard';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: IndexComponent\r\n  },\r\n  {\r\n    path: 'create',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: {init: InvoiceResolver},\r\n    data: {brec: 'create_invoice'}\r\n  },\r\n  {\r\n    path: ':invoiceId',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: {init: ShowInvoiceResolver},\r\n    data: {brec: 'invoice_details'}\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class routing {\r\n}\r\n"],"sourceRoot":""}