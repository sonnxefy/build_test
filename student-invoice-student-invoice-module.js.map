{"version":3,"sources":["webpack:///./src/app/core/library/invoice/my-bsmodel.service.ts","webpack:///./src/app/modules/student-invoice/components/form-student-invoive/form-student-invoive.component.html","webpack:///./src/app/modules/student-invoice/components/form-student-invoive/form-student-invoive.component.scss","webpack:///./src/app/modules/student-invoice/components/form-student-invoive/form-student-invoive.component.ts","webpack:///./src/app/modules/student-invoice/components/index/index.component.html","webpack:///./src/app/modules/student-invoice/components/index/index.component.scss","webpack:///./src/app/modules/student-invoice/components/index/index.component.ts","webpack:///./src/app/modules/student-invoice/components/invoice/invoice.component.html","webpack:///./src/app/modules/student-invoice/components/invoice/invoice.component.scss","webpack:///./src/app/modules/student-invoice/components/invoice/invoice.component.ts","webpack:///./src/app/modules/student-invoice/components/invoices-duplicates/invoices-duplicates.component.html","webpack:///./src/app/modules/student-invoice/components/invoices-duplicates/invoices-duplicates.component.scss","webpack:///./src/app/modules/student-invoice/components/invoices-duplicates/invoices-duplicates.component.ts","webpack:///./src/app/modules/student-invoice/components/list-student/list-student.component.html","webpack:///./src/app/modules/student-invoice/components/list-student/list-student.component.scss","webpack:///./src/app/modules/student-invoice/components/list-student/list-student.component.ts","webpack:///./src/app/modules/student-invoice/components/product-grip/product-grip.component.html","webpack:///./src/app/modules/student-invoice/components/product-grip/product-grip.component.scss","webpack:///./src/app/modules/student-invoice/components/product-grip/product-grip.component.ts","webpack:///./src/app/modules/student-invoice/components/send-invoices/send-invoices.component.html","webpack:///./src/app/modules/student-invoice/components/send-invoices/send-invoices.component.scss","webpack:///./src/app/modules/student-invoice/components/send-invoices/send-invoices.component.ts","webpack:///./src/app/modules/student-invoice/components/send-mail/send-mail.component.html","webpack:///./src/app/modules/student-invoice/components/send-mail/send-mail.component.scss","webpack:///./src/app/modules/student-invoice/components/send-mail/send-mail.component.ts","webpack:///./src/app/modules/student-invoice/components/sign-many/sign-many.component.html","webpack:///./src/app/modules/student-invoice/components/sign-many/sign-many.component.scss","webpack:///./src/app/modules/student-invoice/components/sign-many/sign-many.component.ts","webpack:///./src/app/modules/student-invoice/components/student-invoice-grip/student-invoice-grip.component.html","webpack:///./src/app/modules/student-invoice/components/student-invoice-grip/student-invoice-grip.component.scss","webpack:///./src/app/modules/student-invoice/components/student-invoice-grip/student-invoice-grip.component.ts","webpack:///./src/app/modules/student-invoice/shared/index.ts","webpack:///./src/app/modules/student-invoice/shared/show-student-invoice.resolver.ts","webpack:///./src/app/modules/student-invoice/shared/student-invoice.resolver.ts","webpack:///./src/app/modules/student-invoice/shared/student-invoice.service.ts","webpack:///./src/app/modules/student-invoice/student-invoice.module.ts","webpack:///./src/app/modules/student-invoice/student-invoice.routing.ts","webpack:///./src/app/modules/vat/deactivate/vat-deactivate.guard.ts"],"names":[],"mappings":"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","file":"student-invoice-student-invoice-module.js","sourcesContent":["import { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nexport class MyBsModalService extends BsModalService {\r\n    \r\n}","module.exports = \"<div class=\\\"row invoice-form\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\" (onFieldDataChanged)=\\\"onFieldDataChanged()\\\">\\r\\n      <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <!-- Mẫu hoá đơn -->\\r\\n          <dxi-item *ngIf=\\\"!isTT78\\\" dataField=\\\"invoice_release_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.invoice_releases, onValueChanged: templateChange, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <dxi-item dataField=\\\"template_id\\\" editorType=\\\"dxSelectBox\\\"\\r\\n            [editorOptions]=\\\"{items: select.templatesTT78, onValueChanged: onChangeTem, displayExpr: 'name', valueExpr: 'value', disabled: disableTemplateInput()}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }}\\\" *ngIf=\\\"isTT78 && !isReceipts\\\"></dxo-label>\\r\\n            <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.receipt_form }}\\\" *ngIf=\\\"isTT78 && isReceipts\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\" *ngIf=\\\"isTT78 && isReceipts\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.receipt_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n            <dxi-validation-rule type=\\\"required\\\" *ngIf=\\\"isTT78 && !isReceipts\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.invoice_form }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <!-- Ngày hoá đơn -->\\r\\n          <dxi-item dataField=\\\"invoice_date\\\" editorType=\\\"dxDateBox\\\" *ngIf=\\\"!isReceipts\\\"\\r\\n            [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate, onValueChanged: changeDateTime}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE.invoice_date }}\\\"></dxo-label>\\r\\n          </dxi-item>\\r\\n          <!-- ngày phiếu thu -->\\r\\n          <dxi-item dataField=\\\"invoice_date\\\" editorType=\\\"dxDateBox\\\" *ngIf=\\\"isReceipts \\\"\\r\\n            [editorOptions]=\\\"{useMaskBehavior:true, displayFormat: 'dd/MM/yyyy', dateSerializationFormat: 'yyyy-MM-dd HH:mm:ss', disabled: disableInvoiceDate, onValueChanged: changeDateTime}\\\">\\r\\n            <dxo-label text=\\\"{{ _translate.GRID.INVOICE.receipts_date}}\\\"></dxo-label>\\r\\n            <dxi-validation-rule type=\\\"required\\\"\\r\\n              message=\\\"{{ _translate.CONTROLL.LABEL.receipts_date }} {{ _translate.VALIDATION.required }}\\\">\\r\\n            </dxi-validation-rule>\\r\\n          </dxi-item>\\r\\n          <!-- Ghi chú -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"!isReceipts\\\">\\r\\n            <dxi-item cssClass=\\\"vat invoice-note\\\" dataField=\\\"note\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.note }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\" *ngIf=\\\"isReceipts\\\">\\r\\n            <!-- Ghi chú -->\\r\\n            <dxi-item cssClass=\\\"vat invoice-note\\\" dataField=\\\"note\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.note }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n\\r\\n\\r\\n        </dxi-item>\\r\\n        <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n          <!-- Loại tiền/tỉ giá -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n            <dxi-item cssClass=\\\"max_left\\\" dataField=\\\"currency_code\\\" editorType=\\\"dxSelectBox\\\"\\r\\n              [editorOptions]=\\\"{items: select.currency_codes, onValueChanged: currencyCodeChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.currency_code }}\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n            <dxi-item cssClass=\\\"max_right\\\" dataField=\\\"currency_rate\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{disabled: frmData.currency_code == 'VND',onValueChanged: currencyRateChange, format: '0,###.##'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.currency_rate }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\" *ngIf=\\\"isReceipts && frmData.currency_code != 'VND'\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.currency_rate }} {{ _translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n\\r\\n          <!-- hóa đơn kiêm phiếu thu tiền -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"!isReceipts\\\">\\r\\n            <!-- Hình thức thanh toán-->\\r\\n            <dxi-item cssClass=\\\"max_left\\\" dataField=\\\"payment_method_name\\\" editorType=\\\"dxSelectBox\\\"\\r\\n              [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_method }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.payment_method }} {{ _translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <!-- Hình thức xuất -->\\r\\n            <dxi-item name=\\\"ht-xuat\\\" cssClass=\\\"max_right\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.export_form }}\\\"></dxo-label>\\r\\n              <div *dxTemplate>\\r\\n                <dx-select-box [(value)]=\\\"frmData.status\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" [items]=\\\"htXuatOptions\\\">\\r\\n                </dx-select-box>\\r\\n              </div>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Tỉ lệ miễn giảm HP/Năm học -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"!isReceipts\\\">\\r\\n            <!-- Tỷ lệ miễn giảm HP -->\\r\\n            <dxi-item dataField=\\\"student_reduce_rate_code\\\" editorType=\\\"dxSelectBox\\\" cssClass=\\\"max_left\\\"\\r\\n              [editorOptions]=\\\"{items: select.student_reduce_rate_codes,onValueChanged: reduceMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.exemption_and_reduction_rates }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.exemption_and_reduction_rates }} {{ _translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <!-- Năm học -->\\r\\n            <dxi-item dataField=\\\"study_year\\\" editorType=\\\"dxSelectBox\\\" cssClass=\\\"max_right\\\"\\r\\n              [editorOptions]=\\\"{items: select.arrayYears,onValueChanged: yearMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.study_year }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.study_year }} {{ _translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n\\r\\n          <!-- Phiếu thu -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isReceipts\\\">\\r\\n            <!-- Hình thức thanh toán-->\\r\\n            <dxi-item dataField=\\\"payment_method_name\\\" editorType=\\\"dxSelectBox\\\" cssClass=\\\"max_left\\\"\\r\\n              [editorOptions]=\\\"{items: select.payment_method_names,onValueChanged: paymentMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.payment_method }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.payment_method }} {{ _translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n            <!-- Tỷ lệ miễn giảm HP -->\\r\\n            <dxi-item dataField=\\\"student_reduce_rate_code\\\" editorType=\\\"dxSelectBox\\\" cssClass=\\\"max_right\\\"\\r\\n              [editorOptions]=\\\"{items: select.student_reduce_rate_codes,onValueChanged: reduceMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.exemption_and_reduction_rates }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.exemption_and_reduction_rates }} {{ _translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <!-- Năm học -->\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\" *ngIf=\\\"isReceipts\\\">\\r\\n            <dxi-item dataField=\\\"study_year\\\" cssClass=\\\"max_left\\\" editorType=\\\"dxSelectBox\\\"\\r\\n              [editorOptions]=\\\"{items: select.arrayYears,onValueChanged: yearMethodChange, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n              <dxo-label text=\\\"{{ _translate.CONTROLL.LABEL.study_year }}\\\"></dxo-label>\\r\\n              <dxi-validation-rule type=\\\"required\\\"\\r\\n                message=\\\"{{ _translate.CONTROLL.LABEL.study_year }} {{ _translate.VALIDATION.required }}\\\">\\r\\n              </dxi-validation-rule>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <app-form-extend [disableForm]=\\\"ttDaXuatHoaDon\\\" [formData]=\\\"frmData\\\" [customerTempt]=\\\"customerTempt\\\"\\r\\n              [formItems]=\\\"formItems\\\" [typeOptions]=\\\"'invoice_options'\\\"></app-form-extend>\\r\\n          </dxi-item>\\r\\n        </dxi-item>\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n    <!-- <dx-form style=\\\"margin-top:7px\\\" [formData]=\\\"customerTempt\\\" [items]=\\\"formItems\\\" class=\\\"customer-tempt\\\">\\r\\n    </dx-form> -->\\r\\n  </div>\\r\\n</div>\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{_translate.CONFIRM.update_customer}}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{_translate.CONTROLL.LABEL.update}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\"","module.exports = \".icon-size{font-size:21px;padding:2px 0}.button-tax-code{background:#337ab7;color:#fff;border-color:transparent;border:none}.button-tax-code:focus{outline:none}::ng-deep .layout_input_left span.dx-field-item-label-content{width:144px !important}::ng-deep .customer-tempt .dx-layout-manager .dx-label-h-align .dx-field-item-label .dx-field-item-label-content{min-width:171px !important}\\n\"","import { Component, OnInit, Input, Output, EventEmitter, OnDestroy, ViewChildren, ViewChild, AfterViewInit } from '@angular/core';\r\nimport { ActivatedRoute, } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { DxFormComponent } from 'devextreme-angular';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { VSelectBoxService } from '@core/library/public/v-select-box.service';\r\nimport { Library, Helper, AuthService, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { pattern } from '@config/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { AddCustomerComponent } from '@shared/index';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { ListsService } from '@modules/lists/shared';\r\n// import { injectTemplateRef } from '@angular/core/src/render3';\r\nimport { FormExtendComponent } from '@shared/components/form-extend/form-extend.component';\r\nimport * as _ from 'lodash'\r\n\r\n@Component({\r\n  selector: 'app-form-student-invoive',\r\n  templateUrl: './form-student-invoive.component.html',\r\n  styleUrls: ['./form-student-invoive.component.scss']\r\n})\r\nexport class FormStudentInvoiveComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  routeSub: Subscription;\r\n  @ViewChildren(DxFormComponent) listDxForm: any;\r\n  @ViewChild(DxFormComponent) form: DxFormComponent;\r\n  @ViewChild(FormExtendComponent) formExtend: FormExtendComponent;\r\n  @Input() ttDaXuatHoaDon: boolean = false;\r\n  @Input() frmData: any;\r\n  @Input() type: any;\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() _objTemplateSelect: any;\r\n\r\n  @Input() extentionGrid: any;\r\n  @Output('onFormChange') formEvent = new EventEmitter<any>();\r\n  @Output('onTemplateChange') onTemplateChange = new EventEmitter<any>();\r\n  @Output('onTemplateTypeChange') onTemplateTypeChange = new EventEmitter<any>();\r\n  @Output('onStudyYearChange') onStudyYearChange = new EventEmitter<any>();\r\n  @Output('onRedueFeeChange') onRedueFeeChange = new EventEmitter<any>();\r\n  @Output('onTemplateTT78TypeChange') onTemplateTT78TypeChange = new EventEmitter<any>();\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() isTT78: boolean;\r\n  @Input() infoDangKy: any;\r\n\r\n  originInvoiceNumber: any;\r\n  bsModalRef: BsModalRef;\r\n  template_temp: any;\r\n  select: any = {};\r\n  pattern = pattern;\r\n  tax_codes: any = [];\r\n  customer_codes: any = [];\r\n  readOnlyCacTruongConLai: boolean;\r\n  showTraLai = false;\r\n  disableInvoiceDate = this.authService.isAllowEditInvoiceDate();\r\n  htXuatOptions = [];\r\n  showPopup = false;\r\n  customerCurent: any = {};\r\n  emails: any = [];\r\n  configs: any = {};\r\n  private arrEmail: any = [];\r\n  listRoleBranchOrigin: Array<any>;\r\n  role_branch: boolean;\r\n  isReceipts = false;\r\n  // thay đổi disable của 3 input customer_name, buyer_name, buyer_address\r\n  tod: any = {};\r\n  _translate: any;\r\n  formItems = [];\r\n  customForms = [];\r\n  customerTempt = {};\r\n  httpOptions = {\r\n    headers: new HttpHeaders({\r\n      'Authorization': `Bearer ${JSON.parse(localStorage.getItem('access_token')).value}`,\r\n      'TaxCode': JSON.parse(localStorage['currentUser']).account.tax_code,\r\n      'Content-Type': 'application/json',\r\n    })\r\n  };\r\n  mst_btn_options = {\r\n    text: '', icon: 'fa fa-plus-circle', type: 'default',\r\n    onClick: () => {\r\n      const initialState = {\r\n        isVisibleGhiVaThemMoi: false\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n      const submodal = this.modalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveData) {\r\n          const customer = this.bsModalRef.content.successSaveData;\r\n          this.frmData.customer_name = customer.name;\r\n          this.frmData.buyer_tax_code = customer.tax_code;\r\n          this.frmData.buyer_name = customer.contact_person_name;\r\n          this.frmData.buyer_address = customer.business_address;\r\n          this.frmData.customer_code = customer.code;\r\n          this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n          if (customer.email) {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n            const stringDataEmailGet = customer.email.split(';');\r\n            for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n              this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n            }\r\n          } else {\r\n            this.frmData.buyer_email = customer.email;\r\n            this.emails = [];\r\n          }\r\n          if (customer.bank_account_number) {\r\n            this.frmData.bank_account_number = customer.bank_account_number;\r\n          }\r\n          if (customer.bank_name) {\r\n            this.frmData.bank_name = customer.bank_name;\r\n          }\r\n        }\r\n        submodal.unsubscribe();\r\n      });\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n    private http: HttpClient,\r\n    private listService: ListsService\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.formDuLieuMoRong(this.template_temp);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.htXuatOptions = VSelectBoxService._htXuatOptions(this._translate, this.frmData.status);\r\n    this.role_branch = this.listService.getDataConfigLocalStorage();\r\n    let loaiHoaDon = this.route.snapshot.data.type\r\n    if (loaiHoaDon === '08HSPT') {\r\n      this.isReceipts = true;\r\n    }\r\n    if (this.route.snapshot.queryParams['status'] === 'return') {\r\n      this.showTraLai = true;\r\n      this.frmData.nguoitralai = this.authService.getCurrentUser().user.name;\r\n      this.frmData.ngaytralai = moment(new Date()).format('YYYY-MM-DD');\r\n    }\r\n\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      this.configs = this.authService.getConfigs();\r\n      // put data DM for select\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.student_reduce_rate_codes = danh_muc.DM_TY_LE_MIEN_GIAM_HOC_PHI ? danh_muc.DM_TY_LE_MIEN_GIAM_HOC_PHI.data : null;\r\n      this.select.currency_codes = danh_muc.DM_LOAI_TIEN ? danh_muc.DM_LOAI_TIEN.data : null;\r\n      this.select.export_places = danh_muc.DM_NOI_XUAT_HOA_DON ? danh_muc.DM_NOI_XUAT_HOA_DON.data : null;\r\n      this.select.list_bank_account_seller = danh_muc.DM_TAI_KHOAN_NGAN_HANG ? danh_muc.DM_TAI_KHOAN_NGAN_HANG.data : null;\r\n      this.select.list_bank_account_seller.forEach(item => {\r\n        item.name_display = item.code + ': ' + item.name;\r\n      });\r\n      if (this.isTT78 || loaiHoaDon === '08HSPT') {\r\n        let temptTT78 = [];\r\n        if (!this.frmData.id) {\r\n          temptTT78 = data.init[1];\r\n        }\r\n        else {\r\n          temptTT78 = data.init[3];\r\n        }\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          if (!this.isReceipts)\r\n            this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          else\r\n            this.select.templatesTT78 = temptTT78;\r\n          if (Number.parseInt(this.frmData.invoice_number) > 0) {\r\n            if (this.frmData.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.frmData.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n        if (this.frmData.id)\r\n          this.changeTemplateInvoice(this.frmData.invoice_date);\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n        if (!this.frmData.id) {\r\n          this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.release_status != 'DA_HUY_SO');\r\n        }\r\n      }\r\n      let a: any = moment();\r\n      const currentUser = this.authService.getCurrentUser();\r\n      this.select.arrayYears = Helper.listYears(currentUser.account.start_time_study, a);\r\n    });\r\n\r\n    this.select.adjustment_forms = VSelectBoxService._adjustmentForms(this._translate);\r\n    this.select.adjustment_objects = VSelectBoxService._adjustmentObjects(this._translate);\r\n\r\n    // Set disabled cho đơn vị tổ chức\r\n    this.setDisabledByCustomer_object_code(this.frmData.customer_object_code);\r\n\r\n    // tìm kiếm mã số thuế\r\n    this.tax_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'tax_code');\r\n      }\r\n    });\r\n\r\n    // // tìm kiếm mã khách hàng\r\n    this.customer_codes = new DataSource({\r\n      load: (loadOptions) => {\r\n        return this.vatService.getDataSourceForm(loadOptions.searchValue, 'code');\r\n      }\r\n    });\r\n    if (!this.isTT78 && !this.isReceipts) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.template_id === this.frmData.template_id) {\r\n          // Nếu là mẫu html\r\n          this.template_temp = item;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          // Nếu là mẫu html\r\n          this.frmData.invoice_release_id = \"\";\r\n          this.template_temp = item;\r\n        }\r\n      });\r\n    }\r\n\r\n    if (this.frmData.buyer_email) {\r\n      this.emails = [];\r\n      const emailToString = this.frmData.buyer_email;\r\n      const a11 = emailToString.replace(/;/g, ',');\r\n      this.emails = a11.split(',');\r\n    }\r\n  }\r\n\r\n  // createForm() {\r\n  //   this.form.instance.beginUpdate();\r\n  //   this.form.instance.itemOption('business_addressa', { label: { text: 'Đia chỉaaa' }, editorOptions: { placeholder: 'Nhập địa chỉ' } });\r\n  //   this.form.instance.endUpdate();\r\n  // }\r\n\r\n  async editTaxCode() {\r\n    this.listRoleBranchOrigin = [];\r\n    if (this.role_branch) {\r\n      const roleUser = await this.listService.getDataUserLocalStorege();\r\n      if (roleUser) {\r\n        this.listRoleBranchOrigin = await this.handleListRoleBranch(roleUser);\r\n      } else {\r\n        this.listRoleBranchOrigin = await this.listService.handleListRoleBranchUser();\r\n      }\r\n      if (Array.isArray(this.listRoleBranchOrigin) && this.listRoleBranchOrigin.length) {\r\n        if (this.listRoleBranchOrigin.length === 2) {\r\n          this.listRoleBranchOrigin = this.listRoleBranchOrigin.filter(value => {\r\n            if (value.code !== 'TAT_CA') {\r\n              value.checked = true;\r\n              return value;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n    const initialState = {\r\n      isVisibleGhiVaThemMoi: false,\r\n      role_branch: this.role_branch,\r\n      roleBranchStatus: this.listRoleBranchOrigin\r\n    };\r\n    this.bsModalRef = this.modalService.show(AddCustomerComponent, {\r\n      class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const submodal = this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveData) {\r\n        const customer = this.bsModalRef.content.successSaveData;\r\n        this.frmData.customer_name = customer.name;\r\n        this.frmData.buyer_tax_code = customer.tax_code;\r\n        this.frmData.buyer_name = customer.contact_person_name;\r\n        this.frmData.buyer_address = customer.business_address;\r\n        this.frmData.customer_code = customer.code;\r\n        this.frmData.buyer_mobile = customer.contact_mobile;\r\n\r\n        if (customer.email) {\r\n          this.frmData.buyer_email = customer.email;\r\n          this.emails = [];\r\n          const stringDataEmailGet = customer.email.split(';');\r\n          for (let i = 0; i < stringDataEmailGet.length; i++) {\r\n            this.emails.push({ display: stringDataEmailGet[i], value: stringDataEmailGet[i] });\r\n          }\r\n        } else {\r\n          this.frmData.buyer_email = customer.email;\r\n          this.emails = [];\r\n        }\r\n        if (customer.bank_account_number) {\r\n          this.frmData.bank_account_number = customer.bank_account_number;\r\n        }\r\n        if (customer.bank_name) {\r\n          this.frmData.bank_name = customer.bank_name;\r\n        }\r\n      }\r\n      submodal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  ////// Tạo form mở rộng\r\n  createCustomGroup() {\r\n    return {\r\n      itemType: 'group',\r\n      colCount: '2',\r\n      items: this.customForms\r\n    };\r\n  }\r\n\r\n  /////// sự kiện thay đổi các trường mở rộng\r\n  changeItem(_dulieumorong) {\r\n    _dulieumorong.forEach(item => {\r\n      for (let key in this.customerTempt) {\r\n        if (item.code === key) {\r\n          item.value = this.customerTempt[key];\r\n        }\r\n      }\r\n      this.frmData.invoice_options = _dulieumorong;\r\n    });\r\n  }\r\n\r\n  async handleListRoleBranch(roleUser) {\r\n    let arrList: any;\r\n    arrList = await this.listService.handleGetDMtoCustomer(roleUser);\r\n    if (Array.isArray(arrList) && arrList.length) {\r\n      return this.listService.handleCheckAll(arrList);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  disableTemplateInput() {\r\n    if (this.frmData.invoice_number) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  formDuLieuMoRong(item) {\r\n    this.customForms = [];\r\n    this.customerTempt = {};\r\n    Helper.resetObject(this.formItems);\r\n    if (item.fields && item.fields.length > 0) {\r\n      const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n      if (_arrayGrid && _arrayGrid.length > 0) {\r\n        this.extentionGrid.ma_hang = false;\r\n        this.extentionGrid.so_lo = false;\r\n        this.extentionGrid.han_dung = false;\r\n        this.extentionGrid.nuoc_san_xuat = false;\r\n        this.extentionGrid.don_hang_hop_dong = false;\r\n        this.extentionGrid.ma_quan_ly = false;\r\n        for (let i = 0; i < _arrayGrid.length; i++) {\r\n          const column = _arrayGrid[i]['name'];\r\n          const value = _arrayGrid[i]['is_show'];\r\n          const _ma = VStringService._convertToViKdau(column);\r\n          this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n        }\r\n      }\r\n      let _dulieumorong = _.cloneDeep(item.fields).filter(x => x.type === '4');\r\n      const invoice_options = this.frmData.invoice_options;\r\n\r\n      if (invoice_options.length > 0) {\r\n        _dulieumorong = _dulieumorong.map((dl) => {\r\n          let option = invoice_options.find(x => x.code == dl.code)\r\n          if (option) {\r\n            dl.value = option.value;\r\n          }\r\n          return dl;\r\n        });\r\n      }\r\n\r\n      this.frmData.invoice_options = _dulieumorong;\r\n      if (_dulieumorong.length > 0) {\r\n        this.formExtend.createForm(this.customForms, _dulieumorong)\r\n      }\r\n      _dulieumorong.forEach(value => {\r\n        this.customerTempt[value.code] = value.value;\r\n      });\r\n    }\r\n    else {\r\n      this.frmData.invoice_options = [];\r\n      this.extentionGrid.ma_hang = false;\r\n      this.extentionGrid.so_lo = false;\r\n      this.extentionGrid.han_dung = false;\r\n      this.extentionGrid.nuoc_san_xuat = false;\r\n      this.extentionGrid.don_hang_hop_dong = false;\r\n      this.extentionGrid.ma_quan_ly = false;\r\n    }\r\n  }\r\n\r\n  readonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = true;\r\n    });\r\n    this.readOnlyCacTruongConLai = true;\r\n  }\r\n\r\n  public removeReadonlyAllForm() {\r\n    this.listDxForm._results.forEach(item => {\r\n      item.readOnly = false;\r\n      // item.instance.resetValues();\r\n    });\r\n    this.readOnlyCacTruongConLai = false;\r\n  }\r\n\r\n  setDisabledByCustomer_object_code(value) {\r\n    this.tod.customer_name = false;\r\n    this.tod.buyer_name = false;\r\n    this.tod.buyer_address = false;\r\n    switch (value) {\r\n      case 'DOANH_NGHIEP':\r\n        break;\r\n      case 'CA_NHAN':\r\n        this.frmData.customer_name = '';\r\n        this.tod.customer_name = true;\r\n        break;\r\n      case 'KHACH_LE':\r\n        this.frmData.customer_name = '';\r\n        this.frmData.buyer_address = '';\r\n        this.tod.customer_name = true;\r\n        this.tod.buyer_address = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // gửi data lên parent component\r\n  onFieldDataChanged() {\r\n    this.formEvent.emit(this.frmData);\r\n  }\r\n\r\n  getHtXuatValue() {\r\n    return this.frmData.status;\r\n  }\r\n\r\n  getFrmData() {\r\n    return this.frmData;\r\n  }\r\n  yearMethodChange = (e) => {\r\n    this.select.arrayYears.forEach(item => {\r\n      if (e.value === item.code) {\r\n        this.onStudyYearChange.emit(item);\r\n      }\r\n    });\r\n  }\r\n  // sự kiện\r\n\r\n  templateChange = (e) => {\r\n    this.select.invoice_releases.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.template_id = item.template_id;\r\n        this.onTemplateChange.emit(item.is_multi_vat);\r\n        this.onTemplateTypeChange.emit(item);\r\n\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._objTemplateSelect[key] = value;\r\n          }\r\n        }\r\n        if (!this._objTemplateSelect.is_discount) {\r\n          this.dataSource.items().forEach(item3 => {\r\n            item3.discount = null;\r\n            item3.amount_discount = null;\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n          }\r\n        }\r\n\r\n        // Nếu là mẫu html\r\n        if (item.fields) {\r\n          this.formItems = [];\r\n          this.customForms = [];\r\n          const _arrayGrid = item.fields.filter(x => x.type === '5');\r\n          if (_arrayGrid && _arrayGrid.length > 0) {\r\n            this.extentionGrid.ma_hang = false;\r\n            this.extentionGrid.so_lo = false;\r\n            this.extentionGrid.han_dung = false;\r\n            this.extentionGrid.nuoc_san_xuat = false;\r\n            for (let i = 0; i < _arrayGrid.length; i++) {\r\n              const column = _arrayGrid[i]['name'];\r\n              const value = _arrayGrid[i]['is_show'];\r\n              const _ma = VStringService._convertToViKdau(column);\r\n              this.extentionGrid[VStringService._convertToViKdau(column)] = value;\r\n            }\r\n          }\r\n        } else {\r\n          this.formItems = [];\r\n          this.customerTempt = {};\r\n          this.extentionGrid.ma_hang = false;\r\n          this.extentionGrid.so_lo = false;\r\n          this.extentionGrid.han_dung = false;\r\n          this.extentionGrid.nuoc_san_xuat = false;\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  onChangeTem = (e) => {\r\n    this.select.templatesTT78.forEach(item => {\r\n      if (e.value === item.value) {\r\n        this.frmData.invoice_release_id = \"\";\r\n        this.frmData.template_id = item.value;\r\n        this.frmData.invoice_series = item.invoice_series;\r\n        this.frmData.template_code = item.template_code;\r\n        this.onTemplateChange.emit(item.is_multi_vat);\r\n        this.onTemplateTT78TypeChange.emit(item);\r\n        for (const key in item) {\r\n          if (item.hasOwnProperty(key)) {\r\n            const value = item[key];\r\n            this._oTemplateTT78[key] = value;\r\n          }\r\n        }\r\n        if (!this._oTemplateTT78.is_discount) {\r\n          this.invoice_products.load().then((dataSource) => {\r\n            dataSource.forEach((item, index) => {\r\n              item.discount = null;\r\n              item.amount_discount = null;\r\n            });\r\n          });\r\n          VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n          if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n            || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n            VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n          }\r\n        }\r\n\r\n        // Nếu là mẫu html\r\n        this.formDuLieuMoRong(item);\r\n      }\r\n    });\r\n  };\r\n\r\n  currencyCodeChange = (e) => {\r\n    if (this.frmData.currency_code === 'VND') {\r\n      this.frmData.currency_rate = null;\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(this.frmData.total_payment, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), this.frmData.currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n  currencyRateChange = (e) => {\r\n    if (!this.isTT78)\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n    else\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n  };\r\n\r\n\r\n  paymentMethodChange = (e) => {\r\n    const _obj = this.select.payment_method_names.filter(p => p.code === e.value)[0];\r\n    if (_obj) {\r\n      this.frmData.payment_method_view_name = _obj.name;\r\n    }\r\n  };\r\n\r\n  reduceMethodChange = (e) => {\r\n    this.select.student_reduce_rate_codes.forEach(item => {\r\n      if (e.value === item.code) {\r\n        this.onRedueFeeChange.emit(item);\r\n      }\r\n    });\r\n  };\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  capNhatDmKhachHang() {\r\n    this.customerCurent.tax_code = VStringService._getValueToString(this.frmData.buyer_tax_code);\r\n    this.customerCurent.name = VStringService._getValueToString(this.frmData.customer_name);\r\n    this.customerCurent.code = VStringService._getValueToString(this.frmData.customer_code);\r\n    this.customerCurent.contact_person_name = VStringService._getValueToString(this.frmData.buyer_name);\r\n    this.customerCurent.contact_mobile = VStringService._getValueToString(this.frmData.buyer_mobile);\r\n    this.customerCurent.business_address = VStringService._getValueToString(this.frmData.buyer_address);\r\n    this.customerCurent.email = VStringService._getValueToString(this.frmData.buyer_email);\r\n    this.customerCurent.bank_name = VStringService._getValueToString(this.frmData.bank_name);\r\n    this.customerCurent.bank_account_number = VStringService._getValueToString(this.frmData.bank_account_number);\r\n    const data = { customer: this.customerCurent };\r\n    this.customersService.edit(data, this.customerCurent.id).subscribe((response: any) => {\r\n      if (response.status === 'success') {\r\n        this.showPopup = false;\r\n      } else {\r\n        Library.notify(response.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n    });\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n  }\r\n  changeDateTime = (e) => {\r\n    this.changeTemplateInvoice(e.value);\r\n  }\r\n\r\n   // reset trường mở rộng\r\n   public resetTMR() {\r\n    this.formExtend.resetForm();\r\n    this.formExtend.resetOptions();\r\n  }\r\n\r\n  changeTemplateInvoice(strDate) {\r\n    if (this.isTT78) {\r\n      let year = \"\";\r\n      if (VStringService._getValueToString(strDate) != \"\")\r\n        year = VStringService._getValueToString(strDate).substring(4, 2);\r\n      else {\r\n        let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n        year = VStringService._getValueToString(invoiceDate).substring(4, 2);\r\n      }\r\n      let templates = this.select.templatesTT78;\r\n      this.select.templatesTT78 = [];\r\n      if (templates && templates.length > 0) {\r\n        templates.forEach(item => {\r\n          if (VStringService._getValueToString(item.name) != \"\")\r\n            item.name = item.name.replace(item.name.substring(4, 2), year);\r\n          // for (const key in item) {\r\n          //   if (item.hasOwnProperty(key)) {\r\n          //     const value = item[key];\r\n          //     this._oTemplateTT78[key] = value;\r\n          //   }\r\n          // }\r\n          if (item.value === this.frmData.template_id) {\r\n            this.onTemplateTT78TypeChange.emit(item);\r\n            //  item.invoice_series = item.invoice_series.replace(item.invoice_series.substring(3, 1), year);\r\n            // this.frmData.invoice_series = item.invoice_series;\r\n            // this.frmData.template_code = item.template_code;\r\n          }\r\n          this.select.templatesTT78.push(item);\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"row search-section\\\">\\r\\n  <div class=\\\"col-md-8\\\" style=\\\"padding-right: 0px\\\">\\r\\n    <app-search-advanced (searchContentChange)=\\\"getSearch($event)\\\" [isSearchStudent]=\\\"isSearchStudent\\\"\\r\\n      (objParamsExport)=\\\"getObjParams($event)\\\" [isReceipts]=\\\"isReceipts\\\">\\r\\n    </app-search-advanced>\\r\\n  </div>\\r\\n  <div class=\\\"col-md-4\\\" style=\\\"max-height: 70px\\\">\\r\\n    <div class=\\\"list-header row\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div *ngIf=\\\"isListHeader\\\" class=\\\"pull-right button-panel\\\">\\r\\n          <dx-button (click)=\\\"lapHoaDon()\\\" [(icon)]=\\\"_translate.ICONS.plus\\\"\\r\\n            text=\\\"{{ 'CONTROLL.BUTTON.create_invoice' | translate }}\\\" type=\\\"default\\\" *ngIf=\\\"!isReceipts\\\"></dx-button>\\r\\n          <dx-button (click)=\\\"lapHoaDon()\\\" [(icon)]=\\\"_translate.ICONS.plus\\\"\\r\\n            text=\\\"{{ 'CONTROLL.BUTTON.create_repceipt' | translate }}\\\" type=\\\"default\\\" *ngIf=\\\"isReceipts\\\"></dx-button>\\r\\n          <!-- <dx-button (click)=\\\"lapHoaDon()\\\" [(icon)]=\\\"_translate.ICONS.plus\\\"\\r\\n            text=\\\"{{ 'CONTROLL.LABEL.export_data' | translate }}\\\" type=\\\"default\\\" *ngIf=\\\"isReceipts\\\"></dx-button> -->\\r\\n          <dx-button *ngIf=\\\"taxCodeThueHCM.includes(currentUser.account.tax_code) && !isReceipts\\\" (click)=\\\"taiHDXml()\\\"\\r\\n            [(icon)]=\\\"_translate.ICONS.xml\\\" text=\\\"{{ 'CONTROLL.BUTTON.tai_hd_xml' | translate }}\\\" type=\\\"default\\\">\\r\\n          </dx-button>\\r\\n          <!-- <dx-button (click)=\\\"edit()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Sua.png\\\" text=\\\"{{ 'CONTROLL.BUTTON.edit' | translate }}\\\" type=\\\"default\\\" [disabled]=\\\"!(selectedRows.length == 1) && disEditMulti\\\"></dx-button> -->\\r\\n          <!-- <dx-button (click)=\\\"delete()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xoa.png\\\" text=\\\"Xóa\\\" type=\\\"default\\\" [disabled]=\\\"!selectedRows.length\\\"></dx-button> -->\\r\\n          <dx-button *ngIf=\\\"isAccessExportInv && configs.system_parameter.allow_keep_invoice_number && !isReceipts\\\"\\r\\n            [(icon)]=\\\"_translate.ICONS.pencil\\\" (click)=\\\"kyHangLoat()\\\" text=\\\"{{ 'CONTROLL.BUTTON.sign' | translate }}\\\"\\r\\n            type=\\\"default\\\" [disabled]=\\\"!selectedRows.length\\\"></dx-button>\\r\\n          <!-- <dx-button (click)=\\\"giuSo()\\\" icon=\\\"assets\\\\img\\\\icons\\\\Xoa.png\\\" text=\\\"Giữ số\\\" type=\\\"default\\\"></dx-button> -->\\r\\n          <dx-menu *ngIf=\\\"test && !isReceipts\\\" [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\"\\r\\n            submenuDirection=\\\"auto\\\" (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n          <dx-menu *ngIf=\\\"test && isReceipts\\\" [dataSource]=\\\"extrasextrasReceipts\\\" displayExpr=\\\"name\\\"\\r\\n            orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\" (onItemClick)=\\\"itemExtrasClick($event)\\\"\\r\\n            cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n        </div>\\r\\n\\r\\n        <div *ngIf=\\\"!isListHeader\\\" class=\\\"pull-right button-panel\\\">\\r\\n\\r\\n          <dx-menu style=\\\"margin-right: 8px!important;\\\" *ngIf=\\\"test\\\" [dataSource]=\\\"dataAddInvoiceBuy\\\" displayExpr=\\\"name\\\"\\r\\n            orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\" (onItemClick)=\\\"itemExtrasClick($event)\\\"\\r\\n            cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n\\r\\n          <dx-button *ngIf=\\\"isAccessExportInv\\\" [(icon)]=\\\"_translate.ICONS.pencil\\\" (click)=\\\"kyHangLoat()\\\"\\r\\n            text=\\\"{{ 'CONTROLL.BUTTON.delete' | translate }}\\\" type=\\\"default\\\" [disabled]=\\\"!selectedRows.length\\\">\\r\\n          </dx-button>\\r\\n          <dx-menu *ngIf=\\\"test\\\" [dataSource]=\\\"data_extras_invoice_buy\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\"\\r\\n            submenuDirection=\\\"auto\\\" (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n          </dx-menu>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<dx-data-grid id=\\\"gridContainerStudent\\\" [dataSource]=\\\"dataSourceBatch\\\" [showRowLines]=\\\"true\\\"\\r\\n  (onCellClick)=\\\"onCellClickBatch($event)\\\" [showColumnHeaders]=\\\"false\\\" [showBorders]=\\\"true\\\"\\r\\n  (onRowPrepared)=\\\"onRowPreparedBatch($event)\\\">\\r\\n  <dxo-master-detail [enabled]=\\\"true\\\" template=\\\"masterDetail\\\"></dxo-master-detail>\\r\\n  <dxo-sorting mode=\\\"single\\\"></dxo-sorting>\\r\\n  <!-- <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row> -->\\r\\n  <!-- <dxo-selection mode=\\\"multiple\\\"></dxo-selection> -->\\r\\n  <dxi-column [visible]=\\\"false\\\" dataField=\\\"date_batch\\\" sortOrder=\\\"desc\\\"></dxi-column>\\r\\n  <dxi-column cellTemplate=\\\"displaybatch\\\" sortOrder=\\\"desc\\\" dataField=\\\"code\\\" caption=\\\"Mã đợt xuất\\\"></dxi-column>\\r\\n\\r\\n  <div *dxTemplate=\\\"let d of 'displaybatch'\\\">\\r\\n    <div *ngIf=\\\"!isReceipts\\\">\\r\\n      <span (click)=\\\"LoadInvoiceByBatchId(d.data)\\\">Đợt xuất: {{ d.data.code }} - Ngày HĐ {{d.data.date_batch }} </span>\\r\\n      <span *ngIf=\\\"d.data.count_da_xuat > 0 \\\">({{d.data.count_da_xuat}} hóa đơn đã xuất)</span>\\r\\n      <a class=\\\"cho-ky-hd\\\" (click)=\\\"suaHDGIUSO(d.data)\\\" *ngIf=\\\"d.data.count_giu_so >0 \\\"\\r\\n        href=\\\"javascript:void(0)\\\">({{d.data.count_giu_so}} hóa đơn chờ ký)</a>\\r\\n      <a class=\\\"ky-loi-hd\\\" (click)=\\\"suaHDXUATLOI(d.data)\\\" *ngIf=\\\"d.data.count_xuat_loi >0 \\\"\\r\\n        href=\\\"javascript:void(0)\\\">({{d.data.count_xuat_loi}} hóa đơn ký lỗi)</a>\\r\\n      <a class=\\\"ghi-tam-hd\\\" (click)=\\\"suaHDGHITAM(d.data)\\\" *ngIf=\\\"d.data.count_ghi_tam >0 \\\"\\r\\n        href=\\\"javascript:void(0)\\\">({{d.data.count_ghi_tam}} hóa đơn ghi tạm)</a>\\r\\n      <a class=\\\"ky-loi-hd\\\" (click)=\\\"suaHDGHITAM(d.data)\\\" *ngIf=\\\"d.data.count_khong_cap_ma >0 \\\"\\r\\n        href=\\\"javascript:void(0)\\\">({{d.data.count_khong_cap_ma}} hóa đơn không đủ ĐK cấp mã)</a>\\r\\n      <a class=\\\"da-gui-cap-ma\\\" (click)=\\\"suaHDGHITAM(d.data)\\\" *ngIf=\\\"d.data.count_cho_cap_ma >0 \\\"\\r\\n        href=\\\"javascript:void(0)\\\">({{d.data.count_cho_cap_ma}} hóa đơn đã gửi để cấp mã)</a>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"isReceipts\\\">\\r\\n      <span (click)=\\\"LoadInvoiceByBatchId(d.data)\\\">Đợt xuất: {{ d.data.code }} - Ngày PT {{d.data.date_batch }} </span>\\r\\n      <span *ngIf=\\\"d.data.count_da_xuat > 0 \\\">({{d.data.count_da_xuat}} phiếu thu đã xuất)</span>\\r\\n      <a class=\\\"cho-ky-hd\\\" (click)=\\\"suaHDGIUSO(d.data)\\\" *ngIf=\\\"d.data.count_giu_so >0 \\\"\\r\\n        href=\\\"javascript:void(0)\\\">({{d.data.count_giu_so}} phiếu thu chờ ký)</a>\\r\\n      <a class=\\\"ky-loi-hd\\\" (click)=\\\"suaHDXUATLOI(d.data)\\\" *ngIf=\\\"d.data.count_xuat_loi >0 \\\"\\r\\n        href=\\\"javascript:void(0)\\\">({{d.data.count_xuat_loi}} phiếu thu ký lỗi)</a>\\r\\n      <a class=\\\"ghi-tam-hd\\\" (click)=\\\"suaHDGHITAM(d.data)\\\" *ngIf=\\\"d.data.count_ghi_tam >0 \\\"\\r\\n        href=\\\"javascript:void(0)\\\">({{d.data.count_ghi_tam}} phiếu thu ghi tạm)</a>\\r\\n      <a class=\\\"ky-loi-hd\\\" (click)=\\\"suaHDGHITAM(d.data)\\\" *ngIf=\\\"d.data.count_khong_cap_ma >0 \\\"\\r\\n        href=\\\"javascript:void(0)\\\">({{d.data.count_khong_cap_ma}} phiếu thu không đủ ĐK cấp mã)</a>\\r\\n      <a class=\\\"da-gui-cap-ma\\\" (click)=\\\"suaHDGHITAM(d.data)\\\" *ngIf=\\\"d.data.count_cho_cap_ma >0 \\\"\\r\\n        href=\\\"javascript:void(0)\\\">({{d.data.count_cho_cap_ma}} phiếu thu đã gửi để cấp mã)</a>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div *dxTemplate=\\\"let masterDetailItem of 'masterDetail'\\\">\\r\\n\\r\\n    <dx-data-grid id=\\\"gridContainerVat\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n      [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n      [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\"\\r\\n      (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling> -->\\r\\n      <dxo-selection selectAllMode=\\\"page\\\" mode=\\\"multiple\\\">\\r\\n      </dxo-selection>\\r\\n      <!-- <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"vat\\\"></dxo-state-storing> -->\\r\\n      <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n      <dxo-sorting mode=\\\"single\\\"></dxo-sorting>\\r\\n      <dxo-selection mode=\\\"multiple\\\" selectAllMode=\\\"{{pageSelect}}\\\"></dxo-selection>\\r\\n      <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row>\\r\\n      <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\" *ngIf=\\\"!isReceipts\\\"\\r\\n        caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" width=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n        alignment=\\\"center\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n      <!-- số phiếu thu -->\\r\\n      <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\" *ngIf=\\\"isReceipts\\\"\\r\\n        caption=\\\"{{ 'GRID.INVOICE.receipts_number' | translate }}\\\" width=\\\"{{_translate.GRID_WIDTH.so_hoa_don}}\\\"\\r\\n        alignment=\\\"center\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"></dxi-column>\\r\\n      <dxi-column cellTemplate=\\\"templateCode\\\"\\r\\n        caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}, {{ 'GRID.INVOICE.invoice_series' | translate }}\\\"\\r\\n        width=\\\"{{_translate.GRID_WIDTH.mau_so_ky_hieu}}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- <dxi-column dataField=\\\"template.invoice_series\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\" [width]=\\\"79\\\" alignment=\\\"center\\\" [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column> -->\\r\\n      <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\" *ngIf=\\\"!isReceipts\\\"\\r\\n        width=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\" [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\"\\r\\n        format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Ngày lập -->\\r\\n      <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"Ngày lập\\\" width=\\\"{{_translate.GRID_WIDTH.ngay_hoa_don}}\\\"\\r\\n        [editorOptions]=\\\"{useMaskBehavior:true}\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" *ngIf=\\\"isReceipts\\\"\\r\\n        dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n\\r\\n      <dxi-column dataField=\\\"class_name\\\" caption=\\\"{{ 'CONTROLL.LABEL.class' | translate }}\\\"\\r\\n        width=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"left\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\">\\r\\n      </dxi-column>\\r\\n\\r\\n      <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'CONTROLL.LABEL.name_student' | translate }}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"total_payment\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" dataType=\\\"number\\\"\\r\\n        format=\\\"0,###.##\\\" alignment=\\\"right\\\" headerCellTemplate=\\\"titleHeaderTemplate\\\"\\r\\n        width=\\\"{{_translate.GRID_WIDTH.tong_tien}}\\\"></dxi-column>\\r\\n      <!-- Trạng thái gửi CQT -->\\r\\n      <dxi-column *ngIf=\\\"isTT78 && !isReceipts\\\" cellTemplate=\\\"statusSendTax\\\" caption=\\\"Trạng thái gửi CQT\\\"\\r\\n        minWidth=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column cellTemplate=\\\"actionEmail\\\" caption=\\\"{{ 'GRID.INVOICE.send_email_status' | translate }}\\\"\\r\\n        width=\\\"{{_translate.GRID_WIDTH.trang_thai_gui_mail}}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column cellTemplate=\\\"actionIcon\\\" minWidth=\\\"{{_translate.GRID_WIDTH.hanh_dong}}\\\"\\r\\n        width=\\\"{{_translate.GRID_WIDTH.hanh_dong}}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n        <p>{{ d.data.template_code }}</p>\\r\\n        <p>{{ d.data.invoice_series }}</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n        <a class=\\\"gach-chan\\\" (click)=\\\"viewDetailInvoice(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}\\r\\n          <span *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n        <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.student_name }}</p>\\r\\n        <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.student_name || _translate.GRID.INVOICE.invoice_wait_for_sign }}\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'actionEmail'\\\">\\r\\n        <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status !='GIU_SO'\\\"\\r\\n          class=\\\"chua-gui-khach-hang gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{\\r\\n          'GRID.INVOICE.un_sent' | translate }}</a>\\r\\n        <a *ngIf=\\\"d.data.send_email_status == 'CHUA_GUI' && d.data.status =='GIU_SO'\\\" class=\\\"cho-ky\\\"\\r\\n          (click)=\\\"sendInvoice(d.data.id)\\\" href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_sign' | translate }}</a>\\r\\n        <a *ngIf=\\\"d.data.send_email_status == 'DA_GUI'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n          href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.wait_for_it' | translate }}</a>\\r\\n        <a *ngIf=\\\"d.data.send_email_status == 'DA_NHAN'\\\" class=\\\"gach-chan\\\" (click)=\\\"sendInvoice(d.data.id)\\\"\\r\\n          href=\\\"javascript:void(0)\\\">{{ 'GRID.INVOICE.received' | translate }}</a>\\r\\n        <p *ngIf=\\\"!d.data.send_email_status\\\" href=\\\"javascript:void(0)\\\">{{ trangthaihoadon(d.data) }} <a\\r\\n            *ngIf=\\\"trangthaihoadon(d.data) == 'Lỗi ký HD' || trangthaihoadon(d.data) == 'Signed error'\\\"\\r\\n            class=\\\"gach-chan\\\" (click)=\\\"editNotSelect(d.data)\\\" href=\\\"javascript:void(0)\\\">({{ 'GRID.INVOICE.re_sign' |\\r\\n            translate }})</a></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'statusSendTax'\\\">\\r\\n        <a *ngIf=\\\"d.data.send_department_status == 'DA_GUI_CQT' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n          href=\\\"javascript:void(0)\\\">Đã gửi để cấp mã</a>\\r\\n        <a *ngIf=\\\"d.data.send_department_status == 'DA_CAP' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n          href=\\\"javascript:void(0)\\\">Đã cấp mã</a>\\r\\n        <a *ngIf=\\\"d.data.send_department_status == 'KHONG_DU_DK_CAP_MA' && d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n          href=\\\"javascript:void(0)\\\" style=\\\"color: red;\\\" (click)=\\\"LydoKTiepNhan(d.data)\\\">Không đủ ĐK cấp mã</a>\\r\\n\\r\\n        <a *ngIf=\\\"d.data.send_department_status == 'CHUA_GUI_CQT' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n          href=\\\"javascript:void(0)\\\">Chưa gửi CQT</a>\\r\\n        <a *ngIf=\\\"d.data.send_department_status == 'DA_GUI_CQT' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n          href=\\\"javascript:void(0)\\\">Đã gửi CQT</a>\\r\\n        <a *ngIf=\\\"d.data.send_department_status == 'DA_TIEP_NHAN' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n          href=\\\"javascript:void(0)\\\">CQT đã tiếp nhận</a>\\r\\n        <a *ngIf=\\\"d.data.send_department_status == 'KHONG_HOP_LE' && !d.data.is_invoice_with_code && d.data.xml_type=='3'\\\"\\r\\n          href=\\\"javascript:void(0)\\\">CQT kiểm tra không hợp lệ </a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'actionIcon'\\\">\\r\\n        <a title=\\\"{{_translate.CONTROLL.BUTTON.view_invoice}}\\\" class=\\\"xemIcon actionIcon\\\" (click)=\\\"view(d.data)\\\"\\r\\n          href=\\\"javascript:void(0)\\\">\\r\\n        </a>\\r\\n        <a title=\\\"{{_translate.CONTROLL.BUTTON.edit}}\\\" class=\\\"suaIcon actionIcon\\\" (click)=\\\"edit(d.data)\\\"\\r\\n          href=\\\"javascript:void(0)\\\">\\r\\n        </a>\\r\\n        <a title=\\\"{{_translate.CONTROLL.BUTTON.delete}}\\\" class=\\\"xoaIcon actionIcon\\\" (click)=\\\"delete(d.data)\\\"\\r\\n          href=\\\"javascript:void(0)\\\">\\r\\n        </a>\\r\\n        <!--        <a *ngIf=\\\"d.data.invoice_files.length>0\\\" title=\\\"{{_translate.CONTROLL.BUTTON.view_attach_file}}\\\"-->\\r\\n        <!--           class=\\\"attachIcon actionIcon\\\" (click)=\\\"viewAttachFile(d.data)\\\" href=\\\"javascript:void(0)\\\">-->\\r\\n        <!--        </a>-->\\r\\n        <div class=\\\"dropdown\\\" *ngIf=\\\"!isReceipts\\\">\\r\\n          <a title=\\\"{{_translate.CONTROLL.BUTTON.extend}}\\\" class=\\\"morongIcon actionIcon\\\" (click)=\\\"myFunction(d.data.id)\\\"\\r\\n            href=\\\"javascript:void(0)\\\"></a>\\r\\n          <div [id]=\\\"d.data.id\\\" class=\\\"dropdown-content\\\"\\r\\n            [ngClass]=\\\"{'last-drodown':( pageSize - 1 == d.rowIndex || pageSize - 2 == d.rowIndex || pageSize - 3 == d.rowIndex) && pageSize > 4, 'small-grid': pageSize < 5}\\\">\\r\\n            <a *ngIf=\\\"isAccessExportInv && configs.system_parameter.allow_keep_invoice_number\\\"\\r\\n              (click)=\\\"kyHangLoat(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.sign' | translate }} <i\\r\\n                [class]=\\\"_translate.ICONS.pencil\\\"></i></a>\\r\\n            <a (click)=\\\"inChuyenDoi(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.print_conversion' | translate\\r\\n              }}\\r\\n              <i [class]=\\\"_translate.ICONS.print\\\"></i></a>\\r\\n            <!-- <a (click)=\\\"copy(d.data)\\\" href=\\\"javascript:void(0)\\\">{{'CONTROLL.BUTTON.copy' | translate}}\\r\\n              <i [class]=\\\"_translate.ICONS.copy\\\"></i>\\r\\n            </a> -->\\r\\n            <!-- <a  (click)=\\\"viewAttachFile(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ 'CONTROLL.BUTTON.view_attach_file' | translate }} <i [(class)]=\\\"_translate.ICONS.view_attach_file\\\"></i></a> -->\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let info of 'titleHeaderTemplate'\\\">\\r\\n        <p><i class=\\\"fa fa-sort icon-dx-sort\\\"></i> {{info.column.caption}} </p>\\r\\n      </div>\\r\\n\\r\\n      <dxo-summary>\\r\\n        <dxi-total-item summaryType=\\\"custom\\\" [customizeText]=\\\"customizeText\\\" showInColumn=\\\"total_payment\\\">\\r\\n        </dxi-total-item>\\r\\n      </dxo-summary>\\r\\n\\r\\n      <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n      </dxo-remote-operations>\\r\\n      <dxo-paging [pageSize]=\\\"15\\\"></dxo-paging>\\r\\n      <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 50, 100, 150]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n        [showInfo]=\\\"true\\\" infoText=\\\"{{ _translate.DXO_PAGER.page}}\\\">>\\r\\n      </dxo-pager>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n  <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n  </dxo-remote-operations>\\r\\n  <dxo-paging [pageSize]=\\\"15\\\"></dxo-paging>\\r\\n  <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[15, 50, 100]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n    [showInfo]=\\\"true\\\" infoText=\\\"{{ _translate.DXO_PAGER.page}}\\\">>\\r\\n  </dxo-pager>\\r\\n</dx-data-grid>\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\\r\\n\\r\\n<app-download-pdf></app-download-pdf>\\r\\n\"","module.exports = \".chua-gui-khach-hang{color:red}.cho-ky{color:#008b8b}.ghi-tam-hd{color:#DEA960}.cho-ky-hd{color:#008B8B}.ky-loi-hd{color:red}.da-gui-cap-ma{color:blue}.gach-chan{text-decoration:underline}.search-section{padding-bottom:15px}.button-panel{margin-top:30px}.mainmenubtn{background-color:red;color:white;border:none;cursor:pointer;padding:20px;margin-top:20px}.last-drodown{bottom:30px}.small-grid{position:fixed  !important;right:39px !important}::ng-deep #gridContainerVat .dx-cell-focus-disabled{overflow:visible !important}::ng-deep #gridContainerVat .dx-datagrid-rowsview{overflow:visible}::ng-deep .view-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router, NavigationExtras } from '@angular/router';\r\nimport { DxMenuComponent } from 'devextreme-angular';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { Library, Helper, AuthService, VPreviewInvService, VStringService, sEnum, SocketService } from '@core/index';\r\nimport { SendInvoicesComponent } from '../send-invoices/send-invoices.component';\r\nimport { ViewAttachFileComponent } from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport { SendListEmailComponent, SendDataForTaxComponent } from '@shared/index';\r\nimport * as moment from 'moment';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { StudentInvoiceService } from '@modules/student-invoice/shared';\r\nimport { SignManyComponent } from '../sign-many/sign-many.component';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { collapseTextChangeRangesAcrossMultipleVersions } from 'typescript';\r\nimport { DownloadPdfComponent } from '@shared/components/download-pdf/download-pdf.component';\r\nimport { ViewInvoiceService } from '@shared/service/view-invoice.service';\r\n\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.scss']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n  @ViewChild(DxMenuComponent) dxMenu: DxMenuComponent;\r\n  @ViewChild(DxDataGridComponent) productGrip: DxDataGridComponent;\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @ViewChild('expandMenu') expandMenu;\r\n  @ViewChild(DownloadPdfComponent) downloadPdf: DownloadPdfComponent;\r\n  pageSize: any\r\n  dataSource: any;\r\n  dataSourceBatch: any;\r\n  selectedRows: Array<any> = [];\r\n  selectedItems: Array<any> = [];\r\n  bsModalRef: BsModalRef;\r\n  bsModalImportRef: BsModalRef;\r\n  bsModalSignRef: BsModalRef;\r\n  listDM: any;\r\n  total_payment: any;\r\n  loaiHoaDon: string;\r\n  test = true;\r\n  isAccessExportInv = true;\r\n  invoice_releases = [];\r\n  paramSearch: any;\r\n  _language: string;\r\n  _translate: any;\r\n  checkSubmit: any;\r\n  pageSelect: any;\r\n  extras = [];\r\n  extrasextrasReceipts = []\r\n  data_extras_invoice_buy = [];\r\n  extend = [];\r\n  private wasInside = false;\r\n  select: any = {};\r\n  configs: any = {};\r\n  disEditMulti = true;\r\n  hoaDonImportChoXuat: any;\r\n  footerSum = {\r\n    summary: '',\r\n    summary_deduction: '',\r\n\r\n  };\r\n  clickCurent = '';\r\n  objParams: any;\r\n  dataInfor: any;\r\n  isSearchUI: boolean;\r\n  isListHeader: boolean;\r\n  dataAddInvoiceBuy = [];\r\n  isShowInvoice = true;\r\n  currentUser: any;\r\n  selectBatch: any = {};\r\n  isSearchStudent = true;\r\n  isReceipts = false;\r\n  taxCodeThueHCM = [\"0102519041-555\"];\r\n  isTT78: boolean = false;\r\n  isExistFormRelease: boolean = false;\r\n  infoDangKy: any = {};\r\n  ioSignature: Subscription;\r\n  constructor(\r\n    private authService: AuthService,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    private modalImportService: BsModalService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    public translate: TranslateService,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService,\r\n    private vPreviewInvService: ViewInvoiceService\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.extend,\r\n      items: [\r\n        // {\r\n        //   id: \"NAP_HD_TU_EXCEL\",\r\n        //   name: this._translate.CONTROLL.BUTTON.import_invoice_from_excel,\r\n        //   icon: this._translate.ICONS.excel\r\n        // },\r\n        // {\r\n        //   id: 'NAP_HD_TU_EXCEL_DT',\r\n        //   name: this._translate.CONTROLL.BUTTON.import_invoice_from_excel,\r\n        //   icon: this._translate.ICONS.excel\r\n        // },\r\n        {\r\n          id: 'SUA',\r\n          name: this._translate.CONTROLL.BUTTON.edit,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n        {\r\n          id: 'XOA',\r\n          name: this._translate.CONTROLL.BUTTON.delete,\r\n          icon: this._translate.ICONS.delete\r\n        },\r\n        {\r\n          id: 'XEM',\r\n          name: this._translate.CONTROLL.BUTTON.view_invoice,\r\n          icon: this._translate.ICONS.view\r\n        }, {\r\n          id: 'INCHUYENDOI',\r\n          name: this._translate.CONTROLL.BUTTON.print_conversion,\r\n          icon: this._translate.ICONS.print\r\n        },\r\n        {\r\n          id: 'GUI_BEN_MUA',\r\n          name: this._translate.CONTROLL.LABEL.send_invoice,\r\n          icon: this._translate.ICONS.send_email\r\n        },\r\n        {\r\n          id: 'TAI_HD_PDF',\r\n          name: this._translate.CONTROLL.BUTTON.tai_hd_pdf,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n      ]\r\n    }];\r\n    this.extrasextrasReceipts = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.extend,\r\n      items: [\r\n        {\r\n          id: 'SUA',\r\n          name: this._translate.CONTROLL.BUTTON.edit,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n        {\r\n          id: 'XOA',\r\n          name: this._translate.CONTROLL.BUTTON.delete,\r\n          icon: this._translate.ICONS.delete\r\n        },\r\n        {\r\n          id: 'XEM',\r\n          name: this._translate.CONTROLL.BUTTON.view_receipts,\r\n          icon: this._translate.ICONS.view\r\n        },\r\n        {\r\n          id: 'GUI_PHIEU_THU',\r\n          name: this._translate.CONTROLL.LABEL.send_receipts,\r\n          icon: this._translate.ICONS.send_email\r\n        },\r\n        {\r\n          id: 'TAI_HD_PDF',\r\n          name: this._translate.CONTROLL.BUTTON.tai_hd_pdf,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n      ]\r\n    }];\r\n    this.data_extras_invoice_buy = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.LABEL.export_data,\r\n      items: [\r\n        {\r\n          id: 'LIST_INVOICE_BUY',\r\n          name: this._translate.CONTROLL.LABEL.list_invoice_buy,\r\n          icon: this._translate.ICONS.excel\r\n        },\r\n        {\r\n          id: 'DETAILS_OF_EACH_GOODS_AND_SERVICE',\r\n          name: this._translate.CONTROLL.LABEL.details_of_each_goods_and_service,\r\n          icon: this._translate.ICONS.edit\r\n        },\r\n      ]\r\n    }];\r\n    this.dataAddInvoiceBuy = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.add,\r\n      items: [\r\n        {\r\n          id: 'ADD_ONE_INVOICE',\r\n          name: this._translate.CONTROLL.LABEL.add_one_invoice,\r\n          icon: this._translate.ICONS.add_new\r\n        },\r\n        {\r\n          id: 'ADD_MULTIPLE_INVOICE',\r\n          name: this._translate.CONTROLL.LABEL.add_multiple_invoice,\r\n          icon: this._translate.ICONS.add_new\r\n        },\r\n      ]\r\n    }];\r\n    this.extend = [{\r\n      id: '1',\r\n      name: '',\r\n      items: [\r\n        {\r\n          id: 'INCHUYENDOI',\r\n          name: this._translate.CONTROLL.BUTTON.print_conversion,\r\n          icon: 'assets/img/icons/In.png'\r\n        },\r\n      ]\r\n    }];\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.handleUI(this.route.snapshot.data.type);\r\n    this.configs = this.authService.getConfigs();\r\n    if (this.configs.system_parameter.select_invoice_current_page)\r\n      this.pageSelect = \"page\";\r\n    else\r\n      this.pageSelect = \"allPages\";\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    if (!this.taxCodeThueHCM.includes(this.currentUser.account.tax_code)) {\r\n      this.extras[0].items.push({ id: \"TAI_HD_XML\", name: this._translate.CONTROLL.BUTTON.tai_hd_xml, icon: this._translate.ICONS.xml });\r\n    }\r\n    this.vatService.isCopy = false;\r\n    this.vatService.data = null;\r\n    const listpermissions = this.currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n    if (this.currentUser.is_convert_TT78) {\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      if (this.infoDangKy && this.infoDangKy.id) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\") {\r\n          this.isTT78 = true;\r\n          let infoFormRelease = this.authService.getInfoFormRelease();\r\n          if (infoFormRelease && infoFormRelease.invoice_releases && infoFormRelease.invoice_releases.length > 0) {\r\n            let invoicesReleases = infoFormRelease.invoice_releases.filter(p => (parseInt(p.amount) - parseInt(p.used_amount)) > 0);\r\n            if (invoicesReleases && invoicesReleases.length > 0)\r\n              this.isExistFormRelease = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // if (localStorage.getItem('new_member')) {\r\n      //   Library.notify(this._translate.NOTIFY.you_must_create_a_release_notice_before_invoicing, 'warning');\r\n      // }\r\n    }\r\n  }\r\n\r\n  handleUI(value) {\r\n    if (value === '03GTKT') {\r\n      this.isSearchUI = false;\r\n      this.isListHeader = false;\r\n    } else if (value === '08HSPT') {\r\n      this.isReceipts = true;\r\n      this.isSearchUI = true;\r\n      this.isListHeader = true;\r\n      this.isSearchStudent = false;\r\n    }\r\n    else {\r\n      this.isSearchUI = true;\r\n      this.isListHeader = true;\r\n    }\r\n    this.loaiHoaDon = value;\r\n  }\r\n\r\n  myFunction(e) {\r\n    document.getElementById(e).classList.toggle('show');\r\n    this.clickCurent = e;\r\n\r\n  }\r\n  loadListBatch() {\r\n    if (this.paramSearch != '&' && this.paramSearch != \"\") {\r\n      const sub = this.vatService.getListBatchId(this.loaiHoaDon, this.paramSearch).subscribe(rs => {\r\n        if (rs.status == \"success\") {\r\n          let arrBatch = rs.data.batch_ids;\r\n          let _indexfilter_groups = 8888;\r\n          let paramsDateSearchs = `&`;\r\n          if (arrBatch && arrBatch.length > 0) {\r\n            paramsDateSearchs += VStringService._removeNewline(`filter_groups[${_indexfilter_groups}][filters][3][key]=id`);\r\n            for (let i = 0; i < arrBatch.length; i++) {\r\n              paramsDateSearchs += VStringService._removeNewline(`&filter_groups[${_indexfilter_groups}][filters][3][value][${i}]=${arrBatch[i].batch_id}`);\r\n            }\r\n            paramsDateSearchs += VStringService._removeNewline(`&filter_groups[${_indexfilter_groups}][filters][3][operator]=in&`);\r\n            paramsDateSearchs += this.objParams\r\n            this.dataSourceBatch = {};\r\n            this.dataSourceBatch.store = this.vatService.getAllBatch(this.loaiHoaDon, paramsDateSearchs);\r\n            this.loadListDataItem(arrBatch[0].batch_id);\r\n            if (this.productGrip) {\r\n              this.productGrip.instance.collapseAll(-1);\r\n              this.productGrip.instance.expandRow(arrBatch[0].batch_id);\r\n            }\r\n          }\r\n          else {\r\n            paramsDateSearchs += VStringService._removeNewline(`filter_groups[${_indexfilter_groups}][filters][3][key]=id`);\r\n            paramsDateSearchs += VStringService._removeNewline(`&filter_groups[${_indexfilter_groups}][filters][3][value][0]=88888888-7777-6666-5555-444444444444`);\r\n            paramsDateSearchs += VStringService._removeNewline(`&filter_groups[${_indexfilter_groups}][filters][3][operator]=in&`);\r\n            paramsDateSearchs += this.objParams\r\n            this.dataSourceBatch = {};\r\n            this.dataSourceBatch.store = this.vatService.getAllBatch(this.loaiHoaDon, paramsDateSearchs);\r\n          }\r\n        }\r\n        else {\r\n          let paramsDateSearchs = `&`;\r\n          let _indexfilter_groups = 8888;\r\n          paramsDateSearchs += VStringService._removeNewline(`filter_groups[${_indexfilter_groups}][filters][3][key]=id`);\r\n          paramsDateSearchs += VStringService._removeNewline(`&filter_groups[${_indexfilter_groups}][filters][3][value][0]=88888888-7777-6666-5555-444444444444`);\r\n          paramsDateSearchs += VStringService._removeNewline(`&filter_groups[${_indexfilter_groups}][filters][3][operator]=in&`);\r\n          paramsDateSearchs += this.objParams\r\n          this.dataSourceBatch = {};\r\n          this.dataSourceBatch.store = this.vatService.getAllBatch(this.loaiHoaDon, paramsDateSearchs);\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.dataSourceBatch = {};\r\n      this.dataSourceBatch.store = this.vatService.getAllBatch(this.loaiHoaDon);\r\n      if (this.productGrip)\r\n        this.productGrip.instance.collapseAll(-1);\r\n    }\r\n  }\r\n\r\n  loadListDataItem(idBatch: string) {\r\n    this.dataSource = {};\r\n    this.dataSource.store = this.loadList(idBatch);\r\n  }\r\n  onCellClickBatch(e) {\r\n    if (e.rowType == \"data\") {\r\n      if (e.text == '' || this.isShowInvoice) {\r\n        e.component.collapseAll(-1);\r\n        e.component.expandRow(e.key);\r\n        this.loadListDataItem(e.key);\r\n\r\n      }\r\n      this.selectBatch = e.row.data;\r\n    }\r\n  }\r\n  loadList(idBatch) {\r\n    this.dataSource = {};\r\n    const ref = {};\r\n    if (this.isReceipts) {\r\n      if (this.paramSearch != '&' && this.paramSearch != \"\") {\r\n        const _lst = this.vatService.getAllStudentReceipts(this.loaiHoaDon, idBatch, this.paramSearch);\r\n        this.dataSource.store = _lst;\r\n        this.footerSum = {\r\n          summary: _lst.summary,\r\n          summary_deduction: _lst.summary_deduction,\r\n        };\r\n      } else {\r\n        this.dataSource.store = this.vatService.getAllStudentReceipts(this.loaiHoaDon, idBatch);\r\n      }\r\n    } else {\r\n      if (this.paramSearch != '&' && this.paramSearch != \"\") {\r\n        const _lst = this.vatService.getAllStudent(this.loaiHoaDon, idBatch, this.paramSearch);\r\n        this.dataSource.store = _lst;\r\n        this.footerSum = {\r\n          summary: _lst.summary,\r\n          summary_deduction: _lst.summary_deduction,\r\n        };\r\n      } else {\r\n        this.dataSource.store = this.vatService.getAllStudent(this.loaiHoaDon, idBatch);\r\n      }\r\n    }\r\n  }\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.invoice_number) {\r\n            if (e.data.send_department_status == \"DA_GUI_CQT\")\r\n              e.rowElement.style.color = '#008B8B';\r\n            else if (e.data.send_department_status == \"DA_CAP\")\r\n              e.rowElement.style.color = 'black';\r\n            else if (e.data.send_department_status == \"DA_TIEP_NHAN\")\r\n              e.rowElement.style.color = 'black';\r\n            else\r\n              e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      if (e.data.adjustment_type === '2' || e.data.adjustment_type === '7' || e.data.adjustment_type === '6') {\r\n        const eles = e.rowElement.getElementsByTagName('td');\r\n        for (let i = 0; i < eles.length; i++) {\r\n          if (i !== 9 && i !== 1) {\r\n            eles[i].style.textDecoration = 'line-through';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  onRowPreparedBatch(e) {\r\n    if (e.rowType === 'data') {\r\n      switch (e.data.status) {\r\n        case 'DA_XUAT':\r\n          break;\r\n        case 'GHI_TAM':\r\n          if (e.data.invoice_number) {\r\n            if (e.data.send_department_status == \"DA_GUI_CQT\")\r\n              e.rowElement.style.color = '#008B8B';\r\n            else if (e.data.send_department_status == \"DA_CAP\")\r\n              e.rowElement.style.color = 'black';\r\n            else if (e.data.send_department_status == \"DA_TIEP_NHAN\")\r\n              e.rowElement.style.color = 'black';\r\n            else\r\n              e.rowElement.style.color = 'red';\r\n          } else {\r\n            e.rowElement.style.color = '#DEA960';\r\n          }\r\n          break;\r\n        case 'GIU_SO':\r\n          e.rowElement.style.color = '#008B8B';\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  getSearch(e) {\r\n    this.paramSearch = e;\r\n    this.loadListBatch();\r\n  }\r\n\r\n  checkDisableButton() {\r\n    if (this.selectedItems.length) {\r\n      if (this.selectedItems[0].status === 'DA_XUAT') {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  trangthaihoadon(data) {\r\n    switch (data.status) {\r\n      case 'DA_XUAT':\r\n        break;\r\n      case 'GHI_TAM':\r\n        if (data.invoice_number) {\r\n          return this._translate.GRID.INVOICE.signed_error;\r\n        } else {\r\n          return this._translate.CONTROLL.BUTTON.save_temporary;\r\n        }\r\n      case 'GIU_SO':\r\n        return this._translate.GRID.INVOICE.wait_for_sign;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // Chọn đối tượng trong màn hình danh sách\r\n  selectionChanged(data: any) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    this.disEditMulti = true;\r\n    this.selectedItems = data.selectedRowsData;\r\n    if (this.selectedItems.length > 0) {\r\n      const checks = this.selectedItems.filter((item) => {\r\n        return item.number_of_vouchers;\r\n      });\r\n      const checkDaXuat = this.selectedItems.filter((item) => {\r\n        return item.status === 'DA_XUAT';\r\n      });\r\n      if (checks.length === this.selectedItems.length && checkDaXuat.length === 0) {\r\n        this.disEditMulti = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  async lapHoaDon() {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (this.loaiHoaDon === '01GTKT')\r\n      this.router.navigate(['system/student-vat-invoice/create']);\r\n    else if (this.loaiHoaDon === '08HSPT')\r\n      this.router.navigate(['system/receipts/create-receipts']);\r\n    else\r\n      if (this.loaiHoaDon === '02GTTT')\r\n        this.router.navigate(['system/student-sale-invoice/create']);\r\n      else\r\n        this.router.navigate(['system/student-sale-invoice']);\r\n  }\r\n  async copy(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    const row = data ? data : this.selectedItems[0];\r\n    let sub = this.vatService.show(row.id).subscribe(rs => {\r\n      if (rs.status == \"success\") {\r\n        if (rs.data.invoice) {\r\n          rs.data.invoice.id = null;\r\n          rs.data.invoice.origin_id = null;\r\n          rs.data.invoice.adjustment_type = \"1\";\r\n          rs.data.invoice.adjustment_object = null;\r\n          rs.data.invoice.adjustment_form = null;\r\n          rs.data.invoice.refuse_reason = null;\r\n          rs.data.invoice.destroy_reason = null;\r\n          rs.data.invoice.invoice_number = null;\r\n          rs.data.invoice.invoice_date = null;\r\n          rs.data.invoice.approve_status = null;\r\n          rs.data.invoice.status = rs.data.invoice.status == \"DA_XUAT\" ? \"GHI_TAM\" : rs.data.invoice.status;\r\n          rs.data.invoice.updated_at = null;\r\n          rs.data.invoice.user_id = null;\r\n          rs.data.invoice.van_id = null;\r\n          rs.data.invoice.invoice_order = null;\r\n          rs.data.invoice.status_order = null;\r\n          rs.data.invoice.doc_relate_date = null;\r\n          rs.data.invoice.doc_relate_symbol = null;\r\n          rs.data.invoice.note_view_on_invoice = null;\r\n\r\n          this.vatService.data = rs.data.invoice;\r\n          this.vatService.isCopy = true;\r\n        }\r\n        if (this.loaiHoaDon === '01GTKT')\r\n          this.router.navigate(['system/student-vat-invoice/create']);\r\n        else\r\n          if (this.loaiHoaDon === '02GTTT')\r\n            this.router.navigate(['system/student-sale-invoice/create']);\r\n          else\r\n            this.router.navigate(['system/student-sale-invoice']);\r\n      }\r\n    });\r\n  }\r\n  async edit(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    const row = data ? data : this.selectedItems[0];\r\n    let isChildInvoices = false;\r\n    let ids = this.selectedItems.map((obj: any) => obj.id);\r\n    let counttotalInv = parseFloat(this.selectBatch.count_da_xuat ? this.selectBatch.count_da_xuat : 0) + parseFloat(this.selectBatch.count_giu_so ? this.selectBatch.count_giu_so : 0) + parseFloat(this.selectBatch.count_xuat_loi ? this.selectBatch.count_xuat_loi : 0) + parseFloat(this.selectBatch.count_ghi_tam ? this.selectBatch.count_ghi_tam : 0);\r\n    let lstBatch = this.selectedRows;\r\n    if (data)\r\n      ids.push(data.id);\r\n    if (ids.length < counttotalInv)\r\n      isChildInvoices = true;\r\n    let words: string[];\r\n    if (VStringService._getValueToString(row.status) == sEnum.statusInv.GhiTam && VStringService._getValueToString(row.send_department_status) == 'KHONG_DU_DK_CAP_MA') {\r\n      Library.notify(\"Không sửa được hóa đơn không đủ điều kiện cấp mã\", 'error');\r\n      return;\r\n    }\r\n    if (this.disEditMulti === false) {\r\n      if (this.selectedItems.length === 1 && row.status === 'DA_XUAT') {\r\n        Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n      } else {\r\n      }\r\n    } else {\r\n      if (row.status === 'DA_XUAT') {\r\n        Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n      } else {\r\n        if (row.adjustment_type === 5) {\r\n          this.router.navigate([`/system/handle-invoice-student/edit-adjust/${row.id}`]);\r\n        } else if (row.adjustment_type === 3) {\r\n          this.router.navigate([`/system/handle-invoice-student/edit-replace/${row.id}`]);\r\n        } else {\r\n          let navigationExtras: NavigationExtras = {\r\n            queryParams:\r\n            {\r\n              \"ids\": ids,\r\n              \"isChildInvoices\": isChildInvoices\r\n            }\r\n          };\r\n          if (this.loaiHoaDon === '01GTKT')\r\n            this.router.navigate([`/system/student-vat-invoice/edit`], navigationExtras);\r\n          else if (this.loaiHoaDon === '02GTTT')\r\n            this.router.navigate([`/system/student-sale-invoice/edit`], navigationExtras);\r\n          else if (this.loaiHoaDon == sEnum.loaihoadon.HSPT)\r\n            this.router.navigate([`/system/receipts/edit-receipts`], navigationExtras);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  openImportForm(data) {\r\n  }\r\n\r\n  async editNotSelect(row) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.isExistFormRelease) {\r\n      Library.notify(\"Vui lòng hủy dải hóa đơn theo TT32 chưa sử dụng trước khi lập hóa đơn theo TT78\", \"error\", 5000);\r\n      return;\r\n    }\r\n    if (row.status === 'DA_XUAT') {\r\n      Library.notify(this._translate.NOTIFY.you_cannot_edit_an_exported_invoice, 'error');\r\n    } else {\r\n      let ids = [];\r\n      ids.push(row.id);\r\n      if (row.adjustment_type === 5) {\r\n        this.router.navigate([`/system/handle-invoice/edit-adjust/${row.id}`]);\r\n      } else if (row.adjustment_type === 3) {\r\n        this.router.navigate([`/system/handle-invoice/edit-replace/${row.id}`]);\r\n      } else {\r\n        let navigationExtras: NavigationExtras = {\r\n          queryParams:\r\n          {\r\n            \"ids\": ids,\r\n            \"isChildInvoices\": true\r\n          }\r\n        };\r\n        if (this.loaiHoaDon === '01GTKT')\r\n          this.router.navigate([`/system/student-vat-invoice/edit`], navigationExtras);\r\n        else if (this.loaiHoaDon === '02GTTT')\r\n          this.router.navigate([`/system/student-sale-invoice/edit`], navigationExtras);\r\n        else if (this.loaiHoaDon == sEnum.loaihoadon.HSPT)\r\n          this.router.navigate([`/system/student-sale-invoice/edit-receipts`], navigationExtras);\r\n      }\r\n    }\r\n  }\r\n\r\n  viewDetailInvoice(row) {\r\n    let ids = [];\r\n    ids.push(row.id);\r\n    if (this.isTT78 && row.xml_type != '3' && row.status == 'DA_XUAT' && Number.parseInt(row.invoice_number) > 0) {\r\n      if (row.adjustment_type === '5') {\r\n        switch (row.invoice_type) {\r\n          case '01GTKT':\r\n            if (row.batch_id)\r\n              this.router.navigate([`/system/handle-invoice-student/edit-adjust-vat/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n            else\r\n              this.router.navigate([`/system/handle-invoice/edit-adjust/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n            break;\r\n          case '02GTTT':\r\n            if (row.batch_id)\r\n              this.router.navigate([`/system/handle-invoice-student/edit-adjust-sale/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n            else\r\n              this.router.navigate([`/system/handle-invoice/edit-sale-adjust/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      } else if (row.adjustment_type == '3') {\r\n        switch (row.invoice_type) {\r\n          case '01GTKT':\r\n            if (row.batch_id)\r\n              this.router.navigate([`/system/handle-invoice-student/edit-replace-vat/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n            else\r\n              this.router.navigate([`/system/handle-invoice/edit-replace/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n            break;\r\n          case '02GTTT':\r\n            if (row.batch_id)\r\n              this.router.navigate([`/system/handle-invoice-student/edit-replace-sale/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n            else\r\n              this.router.navigate([`/system/handle-invoice/edit-sale-replace/${row.id}`], { queryParams: { status: 'viewInvTT32' } });\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      } else {\r\n        let navigationExtras: NavigationExtras = {\r\n          queryParams:\r\n          {\r\n            \"ids\": ids,\r\n            \"isChildInvoices\": false,\r\n            \"status\": 'viewInvTT32'\r\n          }\r\n        };\r\n        if (this.loaiHoaDon === '01GTKT')\r\n          this.router.navigate([`/system/student-vat-invoice/edit`], navigationExtras);\r\n        else if (this.loaiHoaDon === '02GTTT')\r\n          this.router.navigate([`/system/student-sale-invoice/edit`], navigationExtras);\r\n        else if (this.loaiHoaDon == sEnum.loaihoadon.HSPT)\r\n          this.router.navigate([`/system/receipts/edit-receipts`], navigationExtras);\r\n      }\r\n    }\r\n    else {\r\n      if (row.adjustment_type === '5') {\r\n        switch (row.invoice_type) {\r\n          case '01GTKT':\r\n            if (row.batch_id)\r\n              this.router.navigate([`/system/handle-invoice-student/edit-adjust-vat/${row.id}`]);\r\n            else\r\n              this.router.navigate([`/system/handle-invoice/edit-adjust/${row.id}`]);\r\n            break;\r\n          case '02GTTT':\r\n            if (row.batch_id)\r\n              this.router.navigate([`/system/handle-invoice-student/edit-adjust-sale/${row.id}`]);\r\n            else\r\n              this.router.navigate([`/system/handle-invoice/edit-sale-adjust/${row.id}`]);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      } else if (row.adjustment_type == '3') {\r\n        switch (row.invoice_type) {\r\n          case '01GTKT':\r\n            if (row.batch_id)\r\n              this.router.navigate([`/system/handle-invoice-student/edit-replace-vat/${row.id}`]);\r\n            else\r\n              this.router.navigate([`/system/handle-invoice/edit-replace/${row.id}`]);\r\n            break;\r\n          case '02GTTT':\r\n            if (row.batch_id)\r\n              this.router.navigate([`/system/handle-invoice-student/edit-replace-sale/${row.id}`]);\r\n            else\r\n              this.router.navigate([`/system/handle-invoice/edit-sale-replace/${row.id}`]);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      } else {\r\n        let navigationExtras: NavigationExtras = {\r\n          queryParams:\r\n          {\r\n            \"ids\": ids,\r\n            \"isChildInvoices\": false\r\n          }\r\n        };\r\n        if (this.loaiHoaDon === '01GTKT')\r\n          this.router.navigate([`/system/student-vat-invoice/edit`], navigationExtras);\r\n        else if (this.loaiHoaDon === '02GTTT')\r\n          this.router.navigate([`/system/student-sale-invoice/edit`], navigationExtras);\r\n        else if (this.loaiHoaDon == sEnum.loaihoadon.HSPT)\r\n          this.router.navigate([`/system/receipts/edit-receipts`], navigationExtras);\r\n      }\r\n    }\r\n  }\r\n\r\n  async delete(data) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    if (this.selectedItems.length || data) {\r\n      const status = '';\r\n      let ids = '';\r\n      let batch_id = '';\r\n      if (data) {\r\n        ids = data.id;\r\n        batch_id = data.batch_id;\r\n      } else {\r\n        ids = this.selectedRows.join(',');\r\n        batch_id = this.selectedItems[0].batch_id;\r\n      }\r\n      const object = {\r\n        'invoiceIds': ids,\r\n        'batchId': batch_id,\r\n      };\r\n      const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n      result.then((dialogResult) => {\r\n        if (dialogResult) {\r\n          Library.showloading();\r\n          this.vatService.deleteInvoiceWithBatch(object).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n              if (rs.data == \"delete_batch\")\r\n                this.loadListBatch();\r\n              else {\r\n                this.loadListBatch();\r\n                if (this.productGrip) {\r\n                  this.productGrip.instance.collapseAll(-1);\r\n                  this.productGrip.instance.expandRow(batch_id);\r\n                }\r\n                this.loadList(batch_id);\r\n              }\r\n\r\n            } else {\r\n              Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => {\r\n          }, () => {\r\n            Library.hideloading();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  giuSo() {\r\n  }\r\n\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n\r\n  view(data) {\r\n    if (this.selectedItems.length > 0 || data) {\r\n      let _lst = []\r\n      if (this.isReceipts) {\r\n        _lst = this.selectedItems;\r\n      } else {\r\n        _lst = this.selectedItems.filter(p => p.status === 'DA_XUAT');\r\n      }\r\n      if (_lst.length > 0 || data) {\r\n        if (this.selectedItems.length === 1) {\r\n          this.dataInfor = this.selectedItems[0];\r\n        } else {\r\n          this.dataInfor = data;\r\n        }\r\n        let ids = [];\r\n        if (data) {\r\n          ids.push(data.id);\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          let data = this.vatService.taodulieuXemMau(ids);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.xem_hoa_don\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  inChuyenDoi(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (this.selectedItems.length || data) {\r\n      const _lst = this.selectedItems.filter(p => p.status == 'DA_XUAT');\r\n      if (_lst.length > 0 || data) {\r\n        let ids = [];\r\n        if (data) {\r\n          if (data.status === 'DA_XUAT') {\r\n            ids.push(data.id);\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_print_convert, 'error');\r\n            return;\r\n          }\r\n        } else {\r\n          ids = _lst.map(e => e.id);\r\n        }\r\n        if (this.configs.system_parameter.view_multi_invoice) {\r\n          const data = this.vatService.taodulieuInchuyendoiHS(ids);\r\n          data['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n          this.vPreviewInvService.xemMau(data);\r\n        }\r\n        else {\r\n          const initialState = {\r\n            items: ids,\r\n            isXuatHD: false,\r\n            hinhthucxuat: '',\r\n            typeAction: sEnum.typeCode.in_chuyen_doi_hs\r\n          };\r\n          this.vPreviewInvService.xemMauPhanTrang(initialState);\r\n        }\r\n      } else {\r\n        Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n      }\r\n\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  guibenmua(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'DA_XUAT') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      if (this.selectedItems.filter(p => p.status === 'DA_XUAT').length === 0) {\r\n        check = false;\r\n      }\r\n    }\r\n\r\n    if (check && (this.selectedItems.length || data)) {\r\n      Library.showloading();\r\n      let batch_id = this.selectedItems[0].batch_id;\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedItems.filter(p => p.status === 'DA_XUAT').map(p => p.id);\r\n      }\r\n      this.vatService.layCacHoaDonKySoHangLoat(ids, this.loaiHoaDon).subscribe((rs: any) => {\r\n        if (rs[0].status === 'success') {\r\n          const initialState = {\r\n            invoiceList: rs[0].data.invoices,\r\n            configs: rs[1].data.configs,\r\n            isReceipts: this.isReceipts\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SendListEmailComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadList(batch_id);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_invoice_selected, 'error');\r\n    }\r\n  }\r\n\r\n  viewAttachFile(data) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (data) {\r\n      Library.showloading();\r\n      this.vatService.showAttachFile(data.id).subscribe((rs: any) => {\r\n        if (rs.status === 'success') {\r\n          if (rs.data && rs.data.invoice && rs.data.invoice.invoice_files.length > 0) {\r\n            const initialState = {\r\n              fileData: rs.data.invoice.invoice_files,\r\n              view_attach_file: true,\r\n            };\r\n            this.bsModalSignRef = this.modalService.show(ViewAttachFileComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-lg',\r\n              initialState\r\n            });\r\n\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.not_file_attach, 'error');\r\n          }\r\n\r\n          // let subModal = this.modalService.onHide.subscribe(() => {\r\n          //   if (this.bsModalSignRef.content.successSaveItem) {\r\n          //     this.selectedItems = [];\r\n          //     this.selectedRows = [];\r\n          //     //this.loadList(this.paramSearch);\r\n          //     subModal.unsubscribe();\r\n          //   }\r\n          // });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n  }\r\n\r\n  sendInvoice(id) {\r\n    Library.showloading();\r\n    let batch_id: any;\r\n    if (!id)\r\n      batch_id = this.selectedItems[0].batch_id;\r\n    let sub = this.vatService.showToSendInvoice(id).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n          isReceipts: this.isReceipts\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n            if (batch_id)\r\n              this.loadList(batch_id);\r\n            else\r\n              this.loadList(rs.data.invoice.batch_id);\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  customizeText(e) {\r\n    const formatter = new Intl.NumberFormat('ja-JP');\r\n    let totalMoney = '0';\r\n    if (e && e.value) {\r\n      const _arr = e.value.split('&');\r\n      if (_arr.length > 1) {\r\n        // totalMoney = \"TTHĐ bán ra:\" + '\\n' + formatter.format(parseFloat(_arr[0] || \"0\"));\r\n        totalMoney = formatter.format(parseFloat(_arr[0] || '0'));\r\n        // if (_arr[1] != \"\")\r\n        //   totalMoney += '\\n' + \"TTHĐ giảm trừ:\" + '\\n' + formatter.format(parseFloat(_arr[1] || \"0\"));\r\n      }\r\n    }\r\n    return totalMoney;\r\n  }\r\n\r\n\r\n  kyHangLoat(data?) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    if (!InvoicesService.checkTimeExportInv(this.configs.system_parameter)) {\r\n      Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error');\r\n      return;\r\n    }\r\n    let check = true;\r\n    if (data) {\r\n      if (data.status !== 'GIU_SO') {\r\n        check = false;\r\n      }\r\n    } else {\r\n      this.selectedItems.forEach(item => {\r\n        if (item.status !== 'GIU_SO') {\r\n          check = false;\r\n        }\r\n      });\r\n    }\r\n    if (check && (this.selectedItems.length || data)) {\r\n      // if (this.selectedItems.length > 25 && !data) {\r\n      //   Library.notify('Chỉ được chọn tối đa 25 hóa đơn để ký hàng loạt', 'error');\r\n      //   return false;\r\n      // }\r\n      Library.showloading();\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      } else {\r\n        ids = this.selectedRows;\r\n      }\r\n      let batch_id = this.selectedItems[0].batch_id;\r\n      this.vatService.layCacHoaDonKySoHangLoat(ids, this.loaiHoaDon).subscribe((rs: any) => {\r\n        if (rs[0].status === 'success') {\r\n          const initialState = {\r\n            invoiceList: rs[0].data.invoices,\r\n            configs: rs[1].data.configs\r\n          };\r\n          this.bsModalSignRef = this.modalService.show(SignManyComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n          const subModal = this.modalService.onHide.subscribe(() => {\r\n            if (this.bsModalSignRef.content.successSaveItem) {\r\n              this.selectedItems = [];\r\n              this.selectedRows = [];\r\n              this.loadListBatch();\r\n              this.loadList(batch_id);\r\n              subModal.unsubscribe();\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n        }\r\n\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_invoice_waite_sign_selected, 'error');\r\n    }\r\n  }\r\n\r\n  napHDTuExcelDt() {\r\n  }\r\n  taiHDXml() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = [];\r\n        ids = _lst.map(e => e.id);\r\n        Library.showloading();\r\n        let sub = this.vatService.xuatHDXml(ids).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            Helper.dowloadFile(rs.data.file_name, 'zip', rs.data.file_content);\r\n          } else {\r\n            Library.notify(rs.message, \"error\");\r\n          }\r\n        }, err => { }, () => {\r\n          sub.unsubscribe();\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'NAP_HD_TU_EXCEL_DT') {\r\n      this.napHDTuExcelDt();\r\n    } else if (e.itemData.id === 'GIU_SO') {\r\n      this.giuSo();\r\n    } else if (e.itemData.id === 'KY_SO') {\r\n      this.kyHangLoat(null);\r\n    } else if (e.itemData.id === 'SUA') {\r\n      this.edit(null);\r\n    } else if (e.itemData.id === 'XOA') {\r\n      this.delete(null);\r\n    } else if (e.itemData.id === 'XEM') {\r\n      this.view(null);\r\n    } else if (e.itemData.id === 'INCHUYENDOI') {\r\n      this.inChuyenDoi(null);\r\n    } else if (e.itemData.id === 'GUI_BEN_MUA') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'LIST_INVOICE_BUY') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'DETAILS_OF_EACH_GOODS_AND_SERVICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id === 'ADD_ONE_INVOICE') {\r\n      this.router.navigate(['/system/invoice-buy/create']);\r\n    } else if (e.itemData.id === 'ADD_MULTIPLE_INVOICE') {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id == \"TAI_HD_XML\") {\r\n      this.taiHDXml();\r\n    } else if (e.itemData.id == \"GUI_PHIEU_THU\") {\r\n      this.guibenmua(null);\r\n    } else if (e.itemData.id == \"TAI_HD_PDF\") {\r\n      this.taiHDPdf();\r\n    }\r\n\r\n  }\r\n\r\n\r\n  taiHDPdf() {\r\n    if (this.selectedItems.length > 0) {\r\n      const _lst = this.selectedItems.filter(p => p.status == sEnum.statusInv.DaXuat);\r\n      if (_lst.length > 0) {\r\n        let ids = _lst.map(e => e.id);\r\n        this.downloadPdf.downloadPdf(ids, 'invoices', 'invoice', false);\r\n      }\r\n      else {\r\n        Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n        return;\r\n      }\r\n    }\r\n    else {\r\n      Library.notify(this._translate.NOTIFY.invoice_export_status, 'error');\r\n      return;\r\n    }\r\n  }\r\n\r\n  async suaHDGIUSO(e) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    let isChildInvoices = false;\r\n    this.isShowInvoice = false;\r\n    let et = this.vatService.getListIdByBatchId(this.loaiHoaDon, e.id, \"GIU_SO\", false).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        if (rs.data.invoices.length > 0) {\r\n          let counttotalInv = parseFloat(this.selectBatch.count_da_xuat) + parseFloat(this.selectBatch.count_giu_so) + parseFloat(this.selectBatch.count_xuat_loi) + parseFloat(this.selectBatch.count_ghi_tam);\r\n          if (rs.data.invoices.length < counttotalInv)\r\n            isChildInvoices = true;\r\n          let ids = rs.data.invoices.map((obj: any) => obj.id);\r\n          let navigationExtras: NavigationExtras = {\r\n            queryParams:\r\n            {\r\n              \"ids\": ids,\r\n              \"isChildInvoices\": isChildInvoices\r\n            }\r\n          };\r\n          if (this.loaiHoaDon === '01GTKT')\r\n            this.router.navigate([`/system/student-vat-invoice/edit`], navigationExtras);\r\n          else if (this.loaiHoaDon === '02GTTT')\r\n            this.router.navigate([`/system/student-sale-invoice/edit`], navigationExtras);\r\n          else if (this.loaiHoaDon == sEnum.loaihoadon.HSPT)\r\n            this.router.navigate([`/system/student-sale-invoice/edit-receipts`], navigationExtras);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  async suaHDXUATLOI(e) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    this.isShowInvoice = false;\r\n    let isChildInvoices = false;\r\n    let et = this.vatService.getListIdByBatchId(this.loaiHoaDon, e.id, \"GHI_TAM\", true).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        if (rs.data.invoices.length > 0) {\r\n          let counttotalInv = parseFloat(this.selectBatch.count_da_xuat) + parseFloat(this.selectBatch.count_giu_so) + parseFloat(this.selectBatch.count_xuat_loi) + parseFloat(this.selectBatch.count_ghi_tam);\r\n          if (rs.data.invoices.length < counttotalInv)\r\n            isChildInvoices = true;\r\n          let ids = rs.data.invoices.map((obj: any) => obj.id);\r\n          let navigationExtras: NavigationExtras = {\r\n            queryParams:\r\n            {\r\n              \"ids\": ids,\r\n              \"isChildInvoices\": isChildInvoices\r\n            }\r\n          };\r\n          if (this.loaiHoaDon === '01GTKT')\r\n            this.router.navigate([`/system/student-vat-invoice/edit`], navigationExtras);\r\n          else if (this.loaiHoaDon === '02GTTT')\r\n            this.router.navigate([`/system/student-sale-invoice/edit`], navigationExtras);\r\n          else if (this.loaiHoaDon == sEnum.loaihoadon.HSPT)\r\n            this.router.navigate([`/system/student-sale-invoice/edit-receipts`], navigationExtras);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  async suaHDGHITAM(e) {\r\n    let isCheckInitFee = await this.authService.checkInitialFee(sEnum.initial_fee.hoadonbanra);\r\n    if (!isCheckInitFee)\r\n      return;\r\n    this.isShowInvoice = false;\r\n    let isChildInvoices = false;\r\n    let et = this.vatService.getListIdByBatchId(this.loaiHoaDon, e.id, \"GHI_TAM\", false).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        if (rs.data.invoices.length > 0) {\r\n          let counttotalInv = parseFloat(this.selectBatch.count_da_xuat) + parseFloat(this.selectBatch.count_giu_so) + parseFloat(this.selectBatch.count_xuat_loi) + parseFloat(this.selectBatch.count_ghi_tam);\r\n          if (rs.data.invoices.length < counttotalInv)\r\n            isChildInvoices = true;\r\n          let ids = rs.data.invoices.map((obj: any) => obj.id);\r\n          let navigationExtras: NavigationExtras = {\r\n            queryParams:\r\n            {\r\n              \"ids\": ids,\r\n              \"isChildInvoices\": isChildInvoices\r\n            }\r\n          };\r\n          if (this.loaiHoaDon === '01GTKT')\r\n            this.router.navigate([`/system/student-vat-invoice/edit`], navigationExtras);\r\n          else if (this.loaiHoaDon === '02GTTT')\r\n            this.router.navigate([`/system/student-sale-invoice/edit`], navigationExtras);\r\n          else if (this.loaiHoaDon == sEnum.loaihoadon.HSPT)\r\n            this.router.navigate([`/system/receipts/edit-receipts`], navigationExtras);\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n  LoadInvoiceByBatchId(e) {\r\n    this.isShowInvoice = true;\r\n  }\r\n  LydoKTiepNhan(data) {\r\n    let lstErr = JSON.parse(data.error_content_invoice);\r\n    const initialState = {\r\n      lstErr: lstErr,\r\n      notifyType: \"THONG_BAO_LOI_CQT\"\r\n    };\r\n    this.bsModalSignRef = this.modalService.show(SendDataForTaxComponent, {\r\n      backdrop: 'static',\r\n      keyboard: true,\r\n      class: 'modal-lg modal-margin-width',\r\n      initialState\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n  ngOnDestroy() {\r\n  }\r\n  onContentReady(e) {\r\n    if (e) {\r\n      const dataSource = this.dataGrid.instance.getDataSource();\r\n      this.pageSize = dataSource.items().length\r\n    }\r\n  }\r\n  getObjParams(e) {\r\n    if (e.code) {\r\n      this.objParams = `filter_groups[4][filters][4][key]=code&filter_groups[4][filters][4][value]=${e.code}&filter_groups[4][filters][4][operator]=ct&`\r\n    } else {\r\n      this.objParams = ''\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n  <div class=\\\"invoice-container\\\">\\r\\n    <iframe id=\\\"preview-iframe-student\\\" width=\\\"0%\\\" height=\\\"0%\\\" style=\\\"margin-left: 9px;height:0px\\\"></iframe>\\r\\n    <!-- phần form thông tin -->\\r\\n    <app-form-student-invoive [dataSource]=\\\"dataSource\\\" [invoice_products]=\\\"invoice_products\\\" [formatter]=\\\"formatter\\\"\\r\\n      [frmData]=\\\"frmData\\\" [_objTemplateSelect]=\\\"_objTemplateSelect\\\" [extentionGrid]=\\\"extentionGrid\\\"\\r\\n      (onFormChange)=\\\"getDataInChildForm($event)\\\" (onTemplateChange)=\\\"onTemplateChange($event)\\\"\\r\\n      (onStudyYearChange)=\\\"onStudyYearChange($event)\\\" [ttDaXuatHoaDon]=\\\"ttDaXuatHoaDon\\\" (onRedueFeeChange)=\\\"onRedueFeeChange($event)\\\"\\r\\n      [_oTemplateTT78]=\\\"_oTemplateTT78\\\" [isTT78]=\\\"isTT78\\\" [infoDangKy]=\\\"infoDangKy\\\"\\r\\n      (onTemplateTT78TypeChange)=\\\"onTemplateTT78TypeChange($event)\\\"\\r\\n      (onTemplateTypeChange)=\\\"onTemplateTypeChange($event)\\\"></app-form-student-invoive>\\r\\n    <!-- table product -->\\r\\n    <app-product-grip #child [dataSource]=\\\"dataSource\\\" [invoice_products]=\\\"invoice_products\\\"\\r\\n      [formDataInInvoice]=\\\"frmData\\\" [formatter]=\\\"formatter\\\" [isHdGTGT]=\\\"isHdGTGT\\\"\\r\\n      [_objTemplateSelect]=\\\"_objTemplateSelect\\\" [extentionGrid]=\\\"extentionGrid\\\" [fee_months]=\\\"fee_months\\\"\\r\\n      [arrProducts]=\\\"arrProducts\\\" (onCheckDuplicate)=\\\"onCheckDuplicate($event)\\\"\\r\\n      [student_reduce_rate_code]=\\\"student_reduce_rate_code\\\" [_oTemplateTT78]=\\\"_oTemplateTT78\\\" [isTT78]=\\\"isTT78\\\"\\r\\n      (importExcel)=\\\"fillDataToForm($event)\\\">\\r\\n    </app-product-grip>\\r\\n\\r\\n    <div *ngIf=\\\"isHdGTGT\\\" class=\\\"table-footer\\\">\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <div class=\\\"vat amount-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.amount_after_vat\\\" step=\\\"0\\\" [format]=\\\"formatter.tong_tien\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-2\\\">\\r\\n        <div class=\\\"vat amount-vat-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.total_amount_vat\\\" step=\\\"0\\\" [format]=\\\"formatter.tien_thue\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <div class=\\\"vat amount-after-vat-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.amount\\\" step=\\\"0\\\" [format]=\\\"formatter.thanh_tien\\\" [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-4\\\">\\r\\n        <div class=\\\"vat amount-table-footer\\\">\\r\\n          <dx-number-box [value]=\\\"frmData.amount_without_discount\\\" step=\\\"0\\\" [format]=\\\"formatter.thanh_tien_chua_ck\\\"\\r\\n            [disabled]=\\\"true\\\">\\r\\n          </dx-number-box>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"!isHdGTGT\\\" class=\\\"table-footer\\\">\\r\\n      <div class=\\\"table-footer-1\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-table-footer\\\" dataField=\\\"amount_after_vat\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.thanh_tien, disabled: true, step:'0'}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n      <div class=\\\"table-footer-3\\\">\\r\\n        <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n          <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n            <dxi-item cssClass=\\\"vat amount-after-vat-table-footer\\\" dataField=\\\"amount\\\" editorType=\\\"dxNumberBox\\\"\\r\\n              [editorOptions]=\\\"{format: formatter.tong_tien, disabled: true, step:'0'}\\\">\\r\\n              <dxo-label [visible]=\\\"false\\\"></dxo-label>\\r\\n            </dxi-item>\\r\\n          </dxi-item>\\r\\n        </dx-form>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"Thông báo\\\" [dragEnabled]=\\\"false\\\"\\r\\n      [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n      <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n        <p style=\\\"margin-bottom: 35px;\\\">Bạn có muốn cập nhật lại dữ liệu vào danh mục khách hàng không?</p>\\r\\n        <div class=\\\"pull-right\\\">\\r\\n          <dx-button text=\\\"Cập nhật\\\" type=\\\"default\\\"></dx-button>\\r\\n          <dx-button text=\\\"Hủy\\\" type=\\\"default\\\"></dx-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </dx-popup>\\r\\n    <!-- vùng chọn file -->\\r\\n    <div class=\\\"container-fluid pl-0 pr-0\\\">\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-md-3\\\">\\r\\n          <app-list-student [variableStudent]=\\\"select.class_codes\\\" [variableTLMG]=\\\"select.student_reduce_rate_codes\\\"\\r\\n            [ttDaXuatHoaDon]=\\\"ttDaXuatHoaDon\\\" (studentGenerated)=\\\"renderDataStudent($event)\\\">\\r\\n          </app-list-student>\\r\\n        </div>\\r\\n        <div class=\\\"col-md-9 pl-0\\\">\\r\\n          <!-- danh sách học sinh -->\\r\\n          <app-student-invoice-grip [dataSource]=\\\"studentSelect\\\" [valueFormInvoice]=\\\"frmData\\\" [isReceipts]=\\\"isReceipts\\\"\\r\\n            (onStudentChange)=\\\"onStudentChange($event)\\\"></app-student-invoice-grip>\\r\\n          <div class=\\\"row after-table\\\">\\r\\n            <div class=\\\"col-md-6\\\">\\r\\n              <div class=\\\"selected\\\">Đã chọn <span style=\\\"color: darkgreen\\\">{{totalInvoice}}</span> HS-SV</div>\\r\\n              <div *ngIf=\\\"totalDuplicate>0 && !isReceipts\\\" class=\\\"invoiced\\\">Có <span\\r\\n                  style=\\\"color: darkred;font-weight: 600;\\\">{{totalDuplicate}}</span> HS-SV <span\\r\\n                  class=\\\"export-invoice\\\">đã được lập hóa đơn</span> thu học phí cho tháng đang chọn\\r\\n              </div>\\r\\n              <div *ngIf=\\\"totalDuplicate>0 && isReceipts\\\" class=\\\"invoiced\\\">Có <span\\r\\n                style=\\\"color: darkred;font-weight: 600;\\\">{{totalDuplicate}}</span> HS-SV <span\\r\\n                class=\\\"export-invoice\\\">đã được lập phiếu thu</span> thu học phí cho tháng đang chọn\\r\\n            </div>\\r\\n              <div *ngIf=\\\"totalDuplicate>0\\\" class=\\\"detail\\\">Xem chi tiết <a class=\\\"m-bold\\\"\\r\\n                  style=\\\"font-weight: 600;padding-right: 15px\\\" href=\\\"javascript:void(0)\\\"\\r\\n                  (click)=\\\"showInvoiceDuplicate()\\\">Tại đây</a>\\r\\n                <dx-button (click)=\\\"filterStudentDuplicate()\\\"\\r\\n                  text=\\\"{{ _translate.CONTROLL.BUTTON.unchecked_student_duplicate}}\\\" type=\\\"default\\\"></dx-button>\\r\\n              </div>\\r\\n              <file-upload-multiple *ngIf=\\\"hideD\\\" [fileData]=\\\"fileData\\\" (fileChange)=\\\"getFileData($event)\\\">\\r\\n              </file-upload-multiple>\\r\\n            </div>\\r\\n            <!-- <div class=\\\"col-md-1\\\">\\r\\n            </div> -->\\r\\n            <div class=\\\"col-md-6\\\">\\r\\n              <div\\r\\n                *ngIf=\\\"((invoicereleaseTempt && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY' && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY_THU_TIEN' && invoicereleaseTempt.template_type!='HOA_DON_VE_MAY_BAY_HOAN_TIEN')\\r\\n                || (invoiceTemplateTT78 && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY' && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY_THU_TIEN' && invoiceTemplateTT78.template_type!='HOA_DON_VE_MAY_BAY_HOAN_TIEN'))\\\"\\r\\n                class=\\\"vat money-pull-right\\\">\\r\\n                <div class=\\\"dx-field\\\">\\r\\n                  <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.on_currency_amount}}</div>\\r\\n                  <div class=\\\"dx-field-value\\\">\\r\\n                    <dx-number-box [(value)]=\\\"frmData.on_currency_amount\\\" tabIndex=\\\"-1\\\" format=\\\"0,###\\\"\\r\\n                      [disabled]=\\\"!frmData.auto_value\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n                  </div>\\r\\n                </div>\\r\\n                <div class=\\\"dx-field\\\">\\r\\n                  <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount}}</div>\\r\\n                  <div class=\\\"dx-field-value\\\">\\r\\n                    <dx-number-box [(value)]=\\\"frmData.amount\\\" tabIndex=\\\"-1\\\" [format]=\\\"formatter.thanh_tien\\\"\\r\\n                      [disabled]=\\\"!frmData.auto_value\\\" step=\\\"0\\\" (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n                  </div>\\r\\n                </div>\\r\\n                <div class=\\\"dx-field\\\">\\r\\n                  <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_amount_discount}}</div>\\r\\n                  <div class=\\\"dx-field-value\\\">\\r\\n                    <dx-number-box [(value)]=\\\"frmData.amount_discount\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                      [format]=\\\"formatter.tien_chiet_khau\\\" (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n                  </div>\\r\\n                </div>\\r\\n                <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n                  <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat5}}</div>\\r\\n                  <div class=\\\"dx-field-value\\\">\\r\\n                    <dx-number-box [(value)]=\\\"frmData.amount_vat5\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                      [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n                  </div>\\r\\n                </div>\\r\\n                <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n                  <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat8}}</div>\\r\\n                  <div class=\\\"dx-field-value\\\">\\r\\n                    <dx-number-box [(value)]=\\\"frmData.amount_vat8\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" [format]=\\\"formatter.tien_thue\\\"\\r\\n                      [disabled]=\\\"!frmData.auto_value\\\" (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n                  </div>\\r\\n                </div>\\r\\n                <div *ngIf=\\\"isHdGTGT\\\" class=\\\"dx-field\\\">\\r\\n                  <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_vat10}}</div>\\r\\n                  <div class=\\\"dx-field-value\\\">\\r\\n                    <dx-number-box [(value)]=\\\"frmData.amount_vat10\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\"\\r\\n                      [format]=\\\"formatter.tien_thue\\\" [disabled]=\\\"!frmData.auto_value\\\"\\r\\n                      (onValueChanged)=\\\"onNumberChange()\\\"></dx-number-box>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"col-md-6\\\">\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"col-md-6\\\" style=\\\"margin-top: 10px\\\">\\r\\n              <div class=\\\"vat money-pull-right\\\">\\r\\n                <div class=\\\"dx-field\\\">\\r\\n                  <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.amount_after_vat}}</div>\\r\\n                  <div class=\\\"dx-field-value\\\">\\r\\n                    <dx-number-box [(value)]=\\\"frmData.total_payment\\\" [format]=\\\"formatter.tong_tien\\\"\\r\\n                      [disabled]=\\\"!frmData.auto_value\\\" tabIndex=\\\"-1\\\" step=\\\"0\\\" (onKeyDown)=\\\"keyDown($event)\\\"\\r\\n                      (onValueChanged)=\\\"totalPaymentChange($event)\\\"></dx-number-box>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"col-md-12\\\">\\r\\n              <div class=\\\"vat total-payment-in-word\\\">\\r\\n                <div class=\\\"dx-field\\\">\\r\\n                  <div class=\\\"dx-field-label\\\">{{ _translate.CONTROLL.LABEL.total_payment_in_word}}</div>\\r\\n                  <div class=\\\"dx-field-value\\\">\\r\\n                    <dx-text-box [(value)]=\\\"frmData.total_payment_in_word\\\" [disabled]=\\\"!frmData.auto_value\\\">\\r\\n                    </dx-text-box>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"row button-action\\\">\\r\\n            <div class=\\\"col-md-12\\\">\\r\\n              <div class=\\\"pull-left\\\">\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !isReceipts\\\" (click)=\\\"preview()\\\"\\r\\n                  [(icon)]=\\\"this._translate.ICONS.view\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.preview_invoice}}\\\"\\r\\n                  type=\\\"default\\\"></dx-button>\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon && !isReceipts\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n                  text=\\\"{{ _translate.CONTROLL.BUTTON.view_invoice}}\\\" type=\\\"default\\\"></dx-button>\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && isReceipts\\\" (click)=\\\"preview()\\\"\\r\\n                  [(icon)]=\\\"this._translate.ICONS.view\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.preview_receipts}}\\\"\\r\\n                  type=\\\"default\\\"></dx-button>\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"ttDaXuatHoaDon && isReceipts\\\" (click)=\\\"view()\\\" [(icon)]=\\\"this._translate.ICONS.view\\\"\\r\\n                  text=\\\"{{ _translate.CONTROLL.BUTTON.view_receipts}}\\\" type=\\\"default\\\"></dx-button>\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"hideD && !isReceipts\\\" (click)=\\\"inChuyenDoi()\\\" [(icon)]=\\\"this._translate.ICONS.print\\\"\\r\\n                  [text]=\\\"inChuyenDoiText()\\\" type=\\\"default\\\"></dx-button>\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"isTuChoi && !isReceipts\\\" (click)=\\\"xemlydotuchoi()\\\"\\r\\n                  [(icon)]=\\\"this._translate.ICONS.view\\\" text=\\\"{{_translate.CONTROLL.BUTTON.reason_reject}}\\\"\\r\\n                  type=\\\"default\\\"></dx-button>\\r\\n              </div>\\r\\n              <div class=\\\"pull-right\\\">\\r\\n                <!-- <button type=\\\"button\\\" (click)=\\\"test()\\\">Test</button> -->\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !isAccessExportInv\\\"\\r\\n                  text=\\\"{{ _translate.CONTROLL.BUTTON.sign_approval}}\\\" icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\"\\r\\n                  (click)=\\\"eSubmit('TRINH_KY')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n                </dx-button>\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet && !isReceipts\\\" appScrollToInvalid\\r\\n                  text=\\\"{{ _translate.CONTROLL.BUTTON.export_invoice}}\\\" [(icon)]=\\\"this._translate.ICONS.export_inv\\\"\\r\\n                  (click)=\\\"eSubmit('XUAT',false)\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n                </dx-button>\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet && isReceipts\\\" appScrollToInvalid\\r\\n                  text=\\\"{{ _translate.CONTROLL.BUTTON.export_receipts}}\\\" [(icon)]=\\\"this._translate.ICONS.export_inv\\\"\\r\\n                  (click)=\\\"eSubmit('XUAT',false)\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n                </dx-button>\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"!ttDaXuatHoaDon && !showTraLai && !showKyDuyet\\\" appScrollToInvalid\\r\\n                  text=\\\"{{ _translate.CONTROLL.BUTTON.save_temporary}}\\\" [(icon)]=\\\"this._translate.ICONS.save\\\"\\r\\n                  (click)=\\\"eSubmit('GHI_TAM')\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n                </dx-button>\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"!showTraLai && !showKyDuyet\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.create_new}}\\\"\\r\\n                  [(icon)]=\\\"this._translate.ICONS.add_new\\\" (click)=\\\"handleAddNew()\\\" type=\\\"default\\\"></dx-button>\\r\\n                <dx-button disableDoubleClick *ngIf=\\\"showTraLai\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.return}}\\\"\\r\\n                  icon=\\\"assets\\\\img\\\\icons\\\\XuatFile.png\\\" (click)=\\\"traLai()\\\" type=\\\"default\\\"></dx-button>\\r\\n                <dx-button appBackButton type=\\\"default\\\" [(icon)]=\\\"this._translate.ICONS.come_back\\\"\\r\\n                  text=\\\"{{ _translate.CONTROLL.BUTTON.close}}\\\"></dx-button>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</form>\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"400\\\" [height]=\\\"120\\\" [showTitle]=\\\"true\\\" title=\\\"Quá trình đang xử lý\\\"\\r\\n  [dragEnabled]=\\\"false\\\" (onShowing)=\\\"onImportShowing($event)\\\" (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopupImport\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar [min]=\\\"0\\\" [max]=\\\"100\\\" [value]=\\\"valueProgress\\\" [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n          <span>{{thongbao}}</span>\\r\\n      </p> -->\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<ngx-spinner bdColor=\\\"rgba(51,51,51,0.8)\\\" size=\\\"medium\\\" color=\\\"#fff\\\" type=\\\"timer\\\">\\r\\n  <p style=\\\"font-size: 20px; color: white\\\">Loading...</p>\\r\\n</ngx-spinner>\"","module.exports = \".invoice-container{padding-top:15px}.after-table{margin-top:10px}::ng-deep .vat.total-payment-in-word{margin-top:15px}::ng-deep .vat.total-payment-in-word input{color:#000000;font-weight:bold;text-align:right}.vat.total-payment-in-word .dx-field-label{width:13%}.vat.total-payment-in-word .dx-field-value{width:87% !important}::ng-deep .vat.money-pull-right input{text-align:right}::ng-deep .pr-0.money-pull-right input{text-align:right}::ng-deep .prt-1.money-pull-right input{text-align:right}.vat.money-pull-right .dx-field-label{width:45%}.vat.money-pull-right .dx-field-value{width:55% !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}.button-action{margin-top:18px}.table-footer{height:40px;background:#E3E3E3;padding-top:3px}.table-footer .table-footer-1{display:inline-block;width:109px;float:right}.table-footer .table-footer-2{display:inline-block;width:120px;margin-right:32px;float:right}.table-footer .table-footer-3{display:inline-block;width:150px;margin-right:90px;float:right}.table-footer .table-footer-4{display:inline-block;width:109px;margin-right:190px;float:right}.dx-field-value.dx-widget,.dx-field-value:not(.dx-widget)>.dx-widget{height:25px}.pr-0.dx-selectbox .dx-texteditor-input:-moz-read-only{padding-bottom:17px}.pr-0.dx-selectbox .dx-texteditor-input:read-only{padding-bottom:17px}.selected{font-weight:600;padding-bottom:5px}.invoiced{padding-bottom:5px}.export-invoice{font-weight:600;padding-bottom:5px}.detail{padding-bottom:5px}::ng-deep .prv-s-invoice .modal-content{border:0px;border-radius:0px}::ng-deep .v-s-invoice{max-width:100%;margin:0px;height:100%}\\n\"","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport * as moment from 'moment';\r\nimport { Base64 } from 'js-base64';\r\nimport { AuthService, Helper, Library, sEnum, SocketService, VChanggeMoneyService, VPreviewInvService, VStringService } from '@core/index';\r\nimport { ProductGripComponent } from '../product-grip/product-grip.component';\r\nimport { FormStudentInvoiveComponent } from '../form-student-invoive/form-student-invoive.component';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport { SendInvoicesComponent } from '../send-invoices/send-invoices.component';\r\nimport * as _ from 'lodash';\r\nimport { CanComponentDeactivate } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport { Observable } from 'rxjs';\r\nimport { InvoicesService } from '@core/library/invoice/invoices.service';\r\nimport { String } from 'typescript-string-operations';\r\nimport { ConfirmService } from '@shared/service/confirm.service';\r\nimport { InvoicesDuplicatesComponent } from '../invoices-duplicates/invoices-duplicates.component';\r\nimport { StudentInvoiceGripComponent } from '@modules/student-invoice/components/student-invoice-grip/student-invoice-grip.component';\r\nimport { async } from '@angular/core/testing';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { NotifyService } from '@modules/release-notify/shared';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { StudentInvoiceService } from '@modules/student-invoice/shared';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-invoice',\r\n  templateUrl: './invoice.component.html',\r\n  styleUrls: ['./invoice.component.scss']\r\n})\r\nexport class InvoiceComponent implements OnInit, OnDestroy, AfterViewInit, CanComponentDeactivate {\r\n  @ViewChild(ProductGripComponent) productGrip: ProductGripComponent;\r\n  @ViewChild(FormStudentInvoiveComponent) formInvoice: FormStudentInvoiveComponent;\r\n  @ViewChild(StudentInvoiceGripComponent) studentGrid: StudentInvoiceGripComponent;\r\n\r\n  ioSignature: Subscription;\r\n  routeSub: Subscription;\r\n  frmData: InvoiceModel = new InvoiceModel(1);\r\n  frmTraLai = {\r\n    reason: ''\r\n  };\r\n  isReceipts = false;\r\n  ttDaXuatHoaDon = false; // Trạng thái đã xuất hóa đơn hay chưa\r\n  customer_codes: any;\r\n  total_payment: any;\r\n  is_multi_vat: any;\r\n  listDM: any;\r\n  showTraLai = false;\r\n  showKyDuyet = false;\r\n  isHdGTGT = false;\r\n  isAccessExportInv = false;\r\n  showPopup = false;\r\n  bsModalRef: BsModalRef;\r\n  invoice_products: ArrayStore;\r\n  dataSource: DataSource;\r\n  formatter: any = {};\r\n  arrayIdEdit = [];\r\n  select: any = {};\r\n  formatNumber = Helper.numberInvoiceFormatDev;\r\n  extentionGrid: any = {};\r\n  configs: any;\r\n  _translate: any;\r\n  // danh sách data trong file\r\n  fileData: Array<any> = [];\r\n  tempKiFile = 0;\r\n  windowPreviewBeforeSubmit: any;\r\n  confirmCheckPreview = false;\r\n  _isValid = false;\r\n  isTuChoi = false;\r\n  valueChange: string;\r\n  studentSelect: any = [];\r\n  fee_months: any;\r\n  arrProducts = [];\r\n  dataFormGird = [];\r\n  totalInvoice = 0;\r\n  invoicesArr: any;\r\n  invoice: any = {};\r\n  countInvoice = 1;\r\n  subLuuChoXuat: any;\r\n  valueProgress = 0;\r\n  showPopupImport = false;\r\n  errorImport = false;\r\n  subXuatHoaDon: any;\r\n  invoicesId = [];\r\n  totalDuplicate = 0;\r\n  trRow: any;\r\n  paper_size: any;\r\n  iframe: any;\r\n  template: any;\r\n  arrHtml: any;\r\n  reportHeight: string = \"1026px\";\r\n  hideD = false;\r\n  student_reduce_rate_code: any;\r\n  currentUser: any;\r\n  countRelease = 0;\r\n  totalCountWaitSign = 0;\r\n  isXuat = true;\r\n  isChildInvoices = false;\r\n  private isExportInvoice: boolean;\r\n  jsonStudents: any;\r\n  nodeSign: any;\r\n  arrColumns = [\r\n    {\r\n      name: 'columnSTT',\r\n      value: 'valueSTT',\r\n      class: 'center',\r\n      height: \"25px\",\r\n      title: \"Số thứ tự\",\r\n      content: \"1\"\r\n    },\r\n    {\r\n      name: 'name-1a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueMaHangHoa',\r\n      class: 'name-1a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Mã hàng\",\r\n      content: \"MH001\"\r\n    },\r\n    {\r\n      name: 'columnTenHangHoa',\r\n      value: 'valueTenHangHoa',\r\n      class: 'columnTenHangHoa',\r\n      height: \"25px\",\r\n      title: \"Tên hàng hóa\",\r\n      content: \"Hóa đơn điện tử\"\r\n    },\r\n    {\r\n      name: 'columnSoMay',\r\n      value: 'valueSoMay',\r\n      class: 'columnSoMay',\r\n      height: \"25px\",\r\n      title: \"Số máy\",\r\n      content: \"Q12P\"\r\n    },\r\n    {\r\n      name: 'columnSoKhung',\r\n      value: 'valueSoKhung',\r\n      class: 'columnSoKhung',\r\n      height: \"25px\",\r\n      title: \"Số khung\",\r\n      content: \"K123K\"\r\n    },\r\n    {\r\n      name: 'name-2a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueSolo',\r\n      class: 'name-2a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Số lô\",\r\n      content: \"SL001\"\r\n    },\r\n    {\r\n      name: 'name-3a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueHanDung',\r\n      class: 'name-3a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Hạn dùng\",\r\n      content: \"60 ngày\"\r\n    },\r\n    {\r\n      name: 'name-4a783984-576d-c322-7843-bdacf97ac189',\r\n      value: 'valueNuocSx',\r\n      class: 'name-4a783984-576d-c322-7843-bdacf97ac189',\r\n      height: \"25px\",\r\n      title: \"Nước sản xuất\",\r\n      content: \"Việt Nam\"\r\n    },\r\n    {\r\n      name: 'columnDonViTinh',\r\n      value: 'valueDonViTinh',\r\n      class: 'center',\r\n      height: \"25px\",\r\n      title: \"Đơn vị tính\",\r\n      content: \"Chiếc\"\r\n    },\r\n    {\r\n      name: 'columnSoLuong',\r\n      value: 'valueSoLuong',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Số lượng\",\r\n      content: \"1\"\r\n    },\r\n    {\r\n      name: 'columnDonGia',\r\n      value: 'valueDonGia',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Đơn giá\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnTienCK',\r\n      value: 'valueTienCK',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Tiền chiết khấu\",\r\n      content: \"\"\r\n    },\r\n    {\r\n      name: 'columnThanhTienChuaCK',\r\n      value: 'valueThanhTienChuaCK',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Thành tiền chưa chiết khấu\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnThanhTien',\r\n      value: 'valueThanhTien',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Thành tiền\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnThueSuatGTGT',\r\n      value: 'valueThueSuatGTGT',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thuế suất GTGT\",\r\n      content: \"0\"\r\n    },\r\n    {\r\n      name: 'columnTienThueGTGT',\r\n      value: 'valueTienThueGTGT',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Tiền thuế GTGT\",\r\n      content: \"0\"\r\n    },\r\n    {\r\n      name: 'columnThanhTienSauThue',\r\n      value: 'valueThanhTienSauThue',\r\n      class: 'number',\r\n      height: \"25px\",\r\n      title: \"Thành tiền sau thuế\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnMaSo',\r\n      value: 'valueMaSo',\r\n      class: 'columnMaSo',\r\n      height: \"25px\",\r\n      title: \"Mã số\",\r\n      content: \"MS001\"\r\n    },\r\n    {\r\n      name: 'columnThucXuat',\r\n      value: 'valueThucXuat',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thực xuất\",\r\n      content: \"10\"\r\n    },\r\n    {\r\n      name: 'columnThucNhap',\r\n      value: 'valueThucNhap',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thực nhập\",\r\n      content: \"10\"\r\n    },\r\n    {\r\n      name: 'columnThueKhac',\r\n      value: 'valueThueKhac',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Thuế khác\",\r\n      content: \"1.000.000\"\r\n    },\r\n    {\r\n      name: 'columnPhiKhac',\r\n      value: 'valuePhiKhac',\r\n      class: 'number-center',\r\n      height: \"25px\",\r\n      title: \"Phí khác\",\r\n      content: \"1.000.000\"\r\n    },\r\n  ];\r\n  invoicereleaseTempt: any;\r\n  _objTemplateSelect: any = {};\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  _oTemplateTT78: any = {};\r\n  invoiceTemplateTT78: any;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n    private cdRef: ChangeDetectorRef,\r\n    public translate: TranslateService,\r\n    private customersService: CustomersService,\r\n    private confirmService: ConfirmService,\r\n    private templateService: TemplateService,\r\n    private notifyService: NotifyService,\r\n    private spinner: NgxSpinnerService,\r\n    private studentInvoiceService: StudentInvoiceService,\r\n    private customeModalService: MyBsModalService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.frmData.status === 'DA_XUAT' || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && this.frmData.send_department_status === 'KHONG_DU_DK_CAP_MA')\r\n      || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && this.frmData.send_department_status === 'DA_GUI_CQT' && this.frmData.is_invoice_with_code)) {\r\n      this.disablleScreen();\r\n      this.cdRef.detectChanges();\r\n    }\r\n    let a: any = moment(new Date(), 's').toDate();\r\n    this.setDataSessionStorage(this.frmData);\r\n    this.setStudentChange(this.studentSelect);\r\n  }\r\n\r\n  disablleScreen() {\r\n    this.formInvoice.readonlyAllForm();\r\n    this.productGrip.ttDaXuatHoaDon = true;\r\n    this.studentGrid.ttDaXuatHoaDon = true;\r\n    this.ttDaXuatHoaDon = true;\r\n  }\r\n\r\n  xuLiApiKhiXuat() {\r\n    if (this.isXuat) {\r\n      let status;\r\n      if (!this.invoice.id && !this.invoice.invoice_number) {\r\n        status = 'THEM_MOI';\r\n      }\r\n      if (this.invoice.id && !this.invoice.invoice_number) {\r\n        status = 'GHI_TAM';\r\n      }\r\n      if (this.invoice.id && this.invoice.invoice_number) {\r\n        status = 'GIU_SO';\r\n      }\r\n      let xmlInvoice = \"\";\r\n\r\n      let isNewXml = 0;\r\n      if (status === 'THEM_MOI') {\r\n        if (this.isReceipts) {\r\n          const sub = this.vatService.ghiTamForSeriesRecept(this.invoice, true).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              if (rs.data.batch_id) {\r\n                this.invoicesArr.forEach(element => {\r\n                  element.batch_id = rs.data.batch_id;\r\n                });\r\n              }\r\n              this.invoice.verify_code = rs.data.verify_code;\r\n              this.invoice.invoice_number = rs.data.invoice_number;\r\n              this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n              let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n              this.invoice.id = rs.data.id;\r\n              this.invoicesId.push(rs.data.id);\r\n              // demo kí số vào file\r\n              // Lấy xml từ server\r\n              isNewXml = rs.data.is_new_xml;\r\n              if (isNewXml)\r\n                this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n              else\r\n                this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n              xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n              if (xmlInvoice != \"\") {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              }\r\n            } else {\r\n              this.refreshStudent();\r\n              this.ghiTam(rs.message);\r\n              // this.showPopupImport = false;\r\n              // this.errorImport = true;\r\n              //   Library.notify(, 'error');\r\n            }\r\n          }, err => {\r\n          }, () => {\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n        else {\r\n          if (!this.isTT78) {\r\n            const sub = this.vatService.ghiTamForSeries(this.invoice, true).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                if (rs.data.batch_id) {\r\n                  this.invoicesArr.forEach(element => {\r\n                    element.batch_id = rs.data.batch_id;\r\n                  });\r\n                }\r\n                this.invoice.verify_code = rs.data.verify_code;\r\n                this.invoice.invoice_number = rs.data.invoice_number;\r\n                this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n                this.invoice.id = rs.data.id;\r\n                this.invoicesId.push(rs.data.id);\r\n                // demo kí số vào file\r\n                // Lấy xml từ server\r\n                isNewXml = rs.data.is_new_xml;\r\n                if (isNewXml)\r\n                  this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n                else\r\n                  this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n                xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n                if (xmlInvoice != \"\") {\r\n                  if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                    || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                    this.goiApiXuatHoaDon(xmlInvoice);\r\n                  } else {\r\n                    this.xuLyKiFile(xmlInvoice, this.invoice.invoice_date);\r\n                  }\r\n                }\r\n              } else {\r\n                this.refreshStudent();\r\n                this.ghiTam(rs.message);\r\n                // this.showPopupImport = false;\r\n                // this.errorImport = true;\r\n                //   Library.notify(, 'error');\r\n              }\r\n            }, err => {\r\n            }, () => {\r\n              sub.unsubscribe();\r\n            });\r\n          }\r\n          else {\r\n            const sub = this.vatService.ghiTamForSeriesTT78(this.invoice, true).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                if (rs.data.batch_id) {\r\n                  this.invoicesArr.forEach(element => {\r\n                    element.batch_id = rs.data.batch_id;\r\n                  });\r\n                }\r\n                this.invoice.verify_code = rs.data.verify_code;\r\n                this.invoice.invoice_number = rs.data.invoice_number;\r\n                this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n                let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n                this.invoice.id = rs.data.id;\r\n                this.invoicesId.push(rs.data.id);\r\n                // demo kí số vào file\r\n                // Lấy xml từ server\r\n                isNewXml = rs.data.is_new_xml;\r\n                if (isNewXml)\r\n                  this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n                else\r\n                  this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n                xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n                if (xmlInvoice != \"\") {\r\n                  if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                    || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                    this.goiApiXuatHoaDon(xmlInvoice);\r\n                  } else {\r\n                    this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n                  }\r\n                }\r\n              } else {\r\n                this.refreshStudent();\r\n                this.ghiTam(rs.message);\r\n                // this.showPopupImport = false;\r\n                // this.errorImport = true;\r\n                //   Library.notify(, 'error');\r\n              }\r\n            }, err => {\r\n            }, () => {\r\n              sub.unsubscribe();\r\n            });\r\n          }\r\n        }\r\n      } else if (status === 'GHI_TAM') {\r\n        if (this.isReceipts) {\r\n          const sub = this.vatService.editBatchRecept(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              if (rs.data.batch_id) {\r\n                this.invoicesArr.forEach(element => {\r\n                  element.batch_id = rs.data.batch_id;\r\n                });\r\n              }\r\n              this.invoice.verify_code = rs.data.verify_code;\r\n              this.invoice.invoice_number = rs.data.invoice_number;\r\n              this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n              let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n              this.invoicesId.push(this.invoice.id);\r\n              // demo kí số vào file\r\n              // Lấy xml từ server\r\n              isNewXml = rs.data.is_new_xml;\r\n              if (isNewXml)\r\n                this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n              else\r\n                this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n              xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n              if (xmlInvoice != \"\") {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              }\r\n            } else {\r\n              this.refreshStudent();\r\n              this.ghiTam(rs.message);\r\n              // this.showPopupImport = false;\r\n              // this.errorImport = true;\r\n              // Library.notify(rs.message, 'error');\r\n            }\r\n          }, err => {\r\n          }, () => {\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n        else {\r\n          if (!this.isTT78) {\r\n            const sub = this.vatService.editBatch(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                if (rs.data.batch_id) {\r\n                  this.invoicesArr.forEach(element => {\r\n                    element.batch_id = rs.data.batch_id;\r\n                  });\r\n                }\r\n                this.invoice.verify_code = rs.data.verify_code;\r\n                this.invoice.invoice_number = rs.data.invoice_number;\r\n                this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n                this.invoicesId.push(this.invoice.id);\r\n                // demo kí số vào file\r\n                // Lấy xml từ server\r\n                isNewXml = rs.data.is_new_xml;\r\n                if (isNewXml)\r\n                  this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n                else\r\n                  this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n                xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n                if (xmlInvoice != \"\") {\r\n                  if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                    || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                    this.goiApiXuatHoaDon(xmlInvoice);\r\n                  } else {\r\n                    this.xuLyKiFile(xmlInvoice, this.invoice.invoice_date);\r\n                  }\r\n                }\r\n              } else {\r\n                this.refreshStudent();\r\n                this.ghiTam(rs.message);\r\n                // this.showPopupImport = false;\r\n                // this.errorImport = true;\r\n                // Library.notify(rs.message, 'error');\r\n              }\r\n            }, err => {\r\n            }, () => {\r\n              sub.unsubscribe();\r\n            });\r\n          }\r\n          else {\r\n            const sub = this.vatService.editBatchTT78(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                if (rs.data.batch_id) {\r\n                  this.invoicesArr.forEach(element => {\r\n                    element.batch_id = rs.data.batch_id;\r\n                  });\r\n                }\r\n                this.invoice.verify_code = rs.data.verify_code;\r\n                this.invoice.invoice_number = rs.data.invoice_number;\r\n                this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n                let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n                this.invoicesId.push(this.invoice.id);\r\n                // demo kí số vào file\r\n                // Lấy xml từ server\r\n                isNewXml = rs.data.is_new_xml;\r\n                if (isNewXml)\r\n                  this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n                else\r\n                  this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n                xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n                if (xmlInvoice != \"\") {\r\n                  if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                    || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                    this.goiApiXuatHoaDon(xmlInvoice);\r\n                  } else {\r\n                    this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n                  }\r\n                }\r\n              } else {\r\n                this.refreshStudent();\r\n                this.ghiTam(rs.message);\r\n                // this.showPopupImport = false;\r\n                // this.errorImport = true;\r\n                // Library.notify(rs.message, 'error');\r\n              }\r\n            }, err => {\r\n            }, () => {\r\n              sub.unsubscribe();\r\n            });\r\n          }\r\n        }\r\n      } else if (status === 'GIU_SO') {\r\n        if (this.isReceipts) {\r\n          const sub = this.vatService.editBatchRecept(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              if (rs.data.batch_id) {\r\n                this.invoicesArr.forEach(element => {\r\n                  element.batch_id = rs.data.batch_id;\r\n                });\r\n              }\r\n              this.invoice.verify_code = rs.data.verify_code;\r\n              this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n              let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n              this.invoicesId.push(this.invoice.id);\r\n              // demo kí số vào file\r\n              // Lấy xml từ server\r\n              isNewXml = rs.data.is_new_xml;\r\n              if (isNewXml)\r\n                this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n              else\r\n                this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n              xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n              if (xmlInvoice != \"\") {\r\n                this.goiApiXuatHoaDon(xmlInvoice);\r\n              }\r\n            } else {\r\n              this.refreshStudent();\r\n              this.ghiTam(rs.message);\r\n              // this.showPopupImport = false;\r\n              // this.errorImport = true;\r\n              // Library.notify(, 'error');\r\n            }\r\n          }, err => {\r\n          }, () => {\r\n            sub.unsubscribe();\r\n          });\r\n        }\r\n        else {\r\n          if (!this.isTT78) {\r\n            const sub = this.vatService.editBatch(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                if (rs.data.batch_id) {\r\n                  this.invoicesArr.forEach(element => {\r\n                    element.batch_id = rs.data.batch_id;\r\n                  });\r\n                }\r\n                this.invoice.verify_code = rs.data.verify_code;\r\n                this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n                this.invoicesId.push(this.invoice.id);\r\n                // demo kí số vào file\r\n                // Lấy xml từ server\r\n                isNewXml = rs.data.is_new_xml;\r\n                if (isNewXml)\r\n                  this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n                else\r\n                  this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n                xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n                if (xmlInvoice != \"\") {\r\n                  if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                    || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                    this.goiApiXuatHoaDon(xmlInvoice);\r\n                  } else {\r\n                    this.xuLyKiFile(xmlInvoice, this.invoice.invoice_date);\r\n                  }\r\n                }\r\n              } else {\r\n                this.refreshStudent();\r\n                this.ghiTam(rs.message);\r\n                // this.showPopupImport = false;\r\n                // this.errorImport = true;\r\n                // Library.notify(, 'error');\r\n              }\r\n            }, err => {\r\n            }, () => {\r\n              sub.unsubscribe();\r\n            });\r\n          }\r\n          else {\r\n            const sub = this.vatService.editBatchTT78(this.invoice.id, this.invoice, true).subscribe(rs => {\r\n              if (rs.status === 'success') {\r\n                if (rs.data.batch_id) {\r\n                  this.invoicesArr.forEach(element => {\r\n                    element.batch_id = rs.data.batch_id;\r\n                  });\r\n                }\r\n                this.invoice.verify_code = rs.data.verify_code;\r\n                this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n                let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n                this.invoicesId.push(this.invoice.id);\r\n                // demo kí số vào file\r\n                // Lấy xml từ server\r\n                isNewXml = rs.data.is_new_xml;\r\n                if (isNewXml)\r\n                  this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n                else\r\n                  this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n                xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n                if (xmlInvoice != \"\") {\r\n                  if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n                    || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n                    this.goiApiXuatHoaDon(xmlInvoice);\r\n                  } else {\r\n                    this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n                  }\r\n                }\r\n              } else {\r\n                this.refreshStudent();\r\n                this.ghiTam(rs.message);\r\n                // this.showPopupImport = false;\r\n                // this.errorImport = true;\r\n                // Library.notify(, 'error');\r\n              }\r\n            }, err => {\r\n            }, () => {\r\n              sub.unsubscribe();\r\n            });\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string) {\r\n    if (this.isXuat) {\r\n      const percentComplete = 100 / this.totalInvoice;\r\n      if (this.isReceipts) {\r\n        this.valueProgress += percentComplete;\r\n        if (this.countInvoice < this.totalInvoice) {\r\n          this.countInvoice++;\r\n          this.xuatHoaDon();\r\n        } else if (this.countInvoice === this.totalInvoice) {\r\n          this.setDataSessionStorage(this.frmData);\r\n          this.isChildInvoices = false;\r\n          this.disablleScreen();\r\n          this.refreshStudent();\r\n          this.setStudentChange(this.studentSelect);\r\n          this.isExportInvoice = true;\r\n          if (this.isReceipts) {\r\n            Library.notify(this._translate.NOTIFY.export_success_re, 'success');\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n          }\r\n          // this.isVisibleBtnSubmit = false;\r\n          this.showPopupImport = false;\r\n          this.errorImport = true;\r\n        }\r\n      } else {\r\n        this.subXuatHoaDon = this.vatService.xuatHoaDon({\r\n          id: this.invoice.id,\r\n          xml_string: xml_string\r\n        }).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            // this.formInvoice.readonlyAllForm();\r\n            //    this.ttDaXuatHoaDon = true;\r\n            this.invoice.status = rs.data.status;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.xuatHoaDon();\r\n            } else if (this.countInvoice === this.totalInvoice) {\r\n              this.setDataSessionStorage(this.frmData);\r\n              this.isChildInvoices = false;\r\n              this.disablleScreen();\r\n              this.refreshStudent();\r\n              this.setStudentChange(this.studentSelect);\r\n              this.isExportInvoice = true;\r\n              Library.notify(this._translate.NOTIFY.export_success, 'success');\r\n              // this.isVisibleBtnSubmit = false;\r\n              this.showPopupImport = false;\r\n              this.errorImport = true;\r\n            }\r\n          } else {\r\n            this.refreshStudent();\r\n            this.setStudentChange(this.studentSelect);\r\n            this.ghiTam(rs.message);\r\n            // this.showPopupImport = false;\r\n            // this.errorImport = true;\r\n            // Library.notify(, 'error');\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.route.snapshot.data.type === '08HSPT') {\r\n      this.isReceipts = true;\r\n    }\r\n    if (this.route.snapshot.queryParams['status'] === 'return') {\r\n      this.showTraLai = true;\r\n    }\r\n    if (this.route.snapshot.queryParams['status'] === 'sign') {\r\n      this.showKyDuyet = true;\r\n    }\r\n    let isViewTT32 = false;\r\n    if (this.route.snapshot.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    // kết nối websocket\r\n    this.connectWebsocket();\r\n    let a: any = moment();\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    this.select.arrayYears = Helper.listYears(this.currentUser.account.start_time_study, a);\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // get cấu hình\r\n      this.configs = this.authService.getConfigs();\r\n      this.infoDangKy = this.authService.getInfoRegister();\r\n      this.formatter = VChanggeMoneyService.getFormatterColumnInv(this.configs.decimal_places_json);\r\n      this.frmData.display_currency = JSON.stringify(this.configs.display_currency);\r\n      this.formatter.display_int = this.configs.system_parameter.display_int;\r\n      // put data DM for select\r\n      this.select.invoice_releases = data.init[0];\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.payment_method_names = danh_muc.DM_HINH_THUC_THANH_TOAN ? danh_muc.DM_HINH_THUC_THANH_TOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      this.select.class_codes = danh_muc.DM_LOP_HOC ? danh_muc.DM_LOP_HOC.data : null;\r\n      this.select.student_reduce_rate_codes = danh_muc.DM_TY_LE_MIEN_GIAM_HOC_PHI ? danh_muc.DM_TY_LE_MIEN_GIAM_HOC_PHI.data : null;\r\n      const loaiHoaDon = data.type;\r\n      this.isChildInvoices = data.init[4] == \"true\" ? true : false;\r\n      this.isHdGTGT = loaiHoaDon === '01GTKT';\r\n      if (this.infoDangKy) {\r\n        if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n          this.isTT78 = true;\r\n      }\r\n      if (this.isTT78 == true && isViewTT32)\r\n        this.isTT78 = false;\r\n      if (this.isReceipts)\r\n        this.isTT78 = true;\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      if (this.isTT78) {\r\n        let temptTT78 = [];\r\n        if (isEdit) {\r\n          temptTT78 = data.init[3];\r\n          invoice = data.init[1];\r\n        }\r\n        else {\r\n          temptTT78 = data.init[1];\r\n        }\r\n        if (temptTT78 && temptTT78.length > 0) {\r\n          if (!this.isReceipts)\r\n            this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == this.infoDangKy.is_invoice_with_code);\r\n          else\r\n            this.select.templatesTT78 = temptTT78;\r\n          if (invoice && Number.parseInt(invoice.invoice_number) > 0) {\r\n            if (invoice.is_invoice_with_code != this.infoDangKy.is_invoice_with_code) {\r\n              this.select.templatesTT78 = temptTT78.filter(p => p.is_invoice_with_code == invoice.is_invoice_with_code);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        this.select.invoice_releases = data.init[0];\r\n        if (isEdit)\r\n          invoice = data.init[3];\r\n      }\r\n      if (isEdit) {\r\n        this.khoiTaoKhiSua(invoice);\r\n      } else {\r\n        this.khoiTaoKhiThemMoi();\r\n      }\r\n    });\r\n    const listpermissions = this.currentUser.user.permissions.split(',');\r\n    const _obj = listpermissions.filter(p => p === 'phe_duyet');\r\n    if (_obj.length > 0) {\r\n      this.isAccessExportInv = true;\r\n    } else {\r\n      this.isAccessExportInv = false;\r\n    }\r\n  }\r\n\r\n  setDataSessionStorage(data) {\r\n    this.valueChange = JSON.stringify(data);\r\n  }\r\n\r\n  checkDataFormChange(dataChange, dataForm) {\r\n    const dataBefore = JSON.parse(dataChange);\r\n    const dataAfter = JSON.parse(JSON.stringify(dataForm));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  checkStudentChange(jsonStudentBefore, arrStudentAfter) {\r\n    const dataBefore = JSON.parse(jsonStudentBefore);\r\n    const dataAfter = JSON.parse(JSON.stringify(arrStudentAfter));\r\n    return _.isEqual(dataBefore, dataAfter);\r\n  }\r\n\r\n  setStudentChange(data) {\r\n    this.jsonStudents = JSON.stringify(data);\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_Sign') {\r\n        // Helper.dowloadFile('test.xml', 'xml', data.Data.Content);\r\n        if (data.Data.Name === 'hoadon.xml') {\r\n          this.goiApiXuatHoaDon(data.Data.Content);\r\n        } else if (data.Data.Name === 'ten_filek_the_trung-dc-nhi.xml') {\r\n          this.invoice.issuer_name = data.Data.IssuerName;\r\n          this.xuLiApiKhiXuat();\r\n        } else {\r\n          this.frmData.invoice_files.forEach(item => {\r\n            if (item.file_name === data.Data.Name) {\r\n              item.file_content = data.Data.Content;\r\n            }\r\n          });\r\n          this.tempKiFile++;\r\n          if (this.tempKiFile === this.frmData.invoice_files.length) {\r\n            this.xuLiApiKhiXuat();\r\n          }\r\n        }\r\n      } else if (data.SvcName === 'efy_viewInvoice') {\r\n        if (data.Status == \"success\")\r\n          this.viewInvoice(data.Data.Content, data.Data.typeView, data.Data.hinhthucxuat, data.Data.invoice_date);\r\n        else if (data.Status == \"error\") {\r\n          const popUp = window.open('about:blank', 'name', 'width=200, height=100');\r\n          if (popUp == null || typeof (popUp) == 'undefined') {\r\n          }\r\n          else\r\n            popUp.close();\r\n          Library.notify(data.Description, 'error');\r\n          this.spinner.hide();\r\n        }\r\n      }\r\n    }, err => {\r\n    });\r\n  }\r\n\r\n  khoiTaoKhiThemMoi() {\r\n    // khởi tạo mới lưới\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    if (this.isReceipts) {\r\n      this.frmData.invoice_date = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n    }\r\n    this.select.payment_method_names.some(item => {\r\n      if (item.is_default) {\r\n        this.frmData.payment_method_name = item.code;\r\n        const _obj = this.select.payment_method_names.filter(p => p.code === item.code)[0];\r\n        if (_obj) {\r\n          this.frmData.payment_method_view_name = _obj.name;\r\n        }\r\n      }\r\n    });\r\n    if (VStringService._getValueToString(this.frmData.payment_method_name) === '') {\r\n      this.frmData.payment_method_name = 'TMCK';\r\n      this.frmData.payment_method_view_name = 'TM/CK';\r\n    }\r\n    this.fee_months = this.select.arrayYears[1];\r\n    // tạo mới đối tượng file\r\n    this.fileData = [];\r\n\r\n    // cấu hình thập phân thêm mới\r\n    // set value default\r\n    if (!this.isTT78) {\r\n      if (this.select.invoice_releases.length) {\r\n        this.select.invoice_releases = this.select.invoice_releases.filter(p => p.number_survival > 0 && p.release_status != 'DA_HUY_SO');\r\n        this.frmData.invoice_release_id = this.select.invoice_releases[0].value;\r\n        this.frmData.template_id = this.select.invoice_releases[0].template_id;\r\n        for (const key in this.select.invoice_releases[0]) {\r\n          if (this.select.invoice_releases[0].hasOwnProperty(key)) {\r\n            this._objTemplateSelect[key] = this.select.invoice_releases[0][key];\r\n          }\r\n        }\r\n\r\n        this.is_multi_vat = this.select.invoice_releases[0].is_multi_vat;\r\n        this.invoicereleaseTempt = this.select.invoice_releases[0];\r\n        this.getTemplate();\r\n      }\r\n    }\r\n    else {\r\n      if (this.select.templatesTT78.length) {\r\n        this.frmData.template_id = this.select.templatesTT78[0].value;\r\n        this.frmData.invoice_series = this.select.templatesTT78[0].invoice_series;\r\n        this.frmData.template_code = this.select.templatesTT78[0].template_code;\r\n        for (const key in this.select.templatesTT78[0]) {\r\n          if (this.select.templatesTT78[0].hasOwnProperty(key)) {\r\n            this._oTemplateTT78[key] = this.select.templatesTT78[0][key];\r\n          }\r\n        }\r\n        this.is_multi_vat = this.select.templatesTT78[0].is_multi_vat;\r\n        this.invoiceTemplateTT78 = this.select.templatesTT78[0];\r\n        this.getTemplateTT78();\r\n      }\r\n    }\r\n\r\n    this.frmData.currency_code = 'VND';\r\n    this.frmData.student_reduce_rate_code = 'KHONG_MIEN_GIAM';\r\n    this.select.student_reduce_rate_codes.forEach(item => {\r\n      if (this.frmData.student_reduce_rate_code === item.code) {\r\n        this.student_reduce_rate_code = item.note;\r\n      }\r\n    });\r\n    this.frmData.study_year = this.select.arrayYears[1].code;\r\n    this.setDataSessionStorage(this.frmData);\r\n    this.setStudentChange(this.studentSelect);\r\n  }\r\n\r\n  khoiTaoKhiSua(data) {\r\n    // khởi tạo lưới từ dữ liệu sửa\r\n    const _lst = this.frmData.setInvoice_products_data(data.invoice_products);\r\n    if (_lst) {\r\n      _lst.forEach(item => {\r\n        if (item.product_name && item.unit_name) {\r\n          const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n          if (!obj1) {\r\n            if (VStringService._getValueToString(item.unit_code) == \"\")\r\n              item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n            let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n            if (oDuplicate)\r\n              item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n          }\r\n          else\r\n            if (!item.unit_code || (item.unit_code && item.unit_code != obj1.code))\r\n              item.unit_code = obj1.code;\r\n        }\r\n      });\r\n    }\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: _lst\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.frmData.fillFormData(data.invoices);\r\n    this.arrayIdEdit = data.students.map((obj: any) => obj.id);\r\n    this.fee_months = this.select.arrayYears.filter(p => p.code == this.frmData.study_year)[0];\r\n    let lstGiuSo = data.students.filter(p => p.status == \"GIU_SO\");\r\n    if (lstGiuSo)\r\n      this.totalCountWaitSign = lstGiuSo.length;\r\n    // mẫu nhiều loại thuế suất ko\r\n    this.renderDataStudent(data.students, true);\r\n\r\n    // khởi tạo dữ liệu form\r\n    if (this.frmData.vat_service_ticket != null) {\r\n      this.frmData.vat_service_ticket = this.frmData.vat_service_ticket.toString();\r\n    }\r\n    // lấy file\r\n    this.fileData = data.invoice_files;\r\n\r\n    this.frmData.invoice_files = data.invoice_files;\r\n    if (!this.isTT78) {\r\n      this.select.invoice_releases.forEach(item => {\r\n        if (item.value === this.frmData.invoice_release_id) {\r\n          this.invoicereleaseTempt = item;\r\n          this.getTemplate();\r\n        }\r\n      });\r\n      this.select.invoice_releases.some(item => {\r\n        if (item.value === this.frmData.invoice_release_id) {\r\n          this.is_multi_vat = item.is_multi_vat;\r\n          for (const key in item) {\r\n            if (item.hasOwnProperty(key)) {\r\n              this._objTemplateSelect[key] = item[key];\r\n            }\r\n          }\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.select.templatesTT78.forEach(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.invoiceTemplateTT78 = item;\r\n          this.getTemplateTT78();\r\n        }\r\n      });\r\n      this.select.templatesTT78.some(item => {\r\n        if (item.value === this.frmData.template_id) {\r\n          this.is_multi_vat = item.is_multi_vat;\r\n          for (const key in item) {\r\n            if (item.hasOwnProperty(key)) {\r\n              this._oTemplateTT78[key] = item[key];\r\n            }\r\n          }\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n\r\n    this.select.student_reduce_rate_codes.forEach(item => {\r\n      if (this.frmData.student_reduce_rate_code === item.code) {\r\n        this.student_reduce_rate_code = item.note;\r\n      }\r\n    });\r\n\r\n    if (VStringService._getValueToString(this.frmData.approve_status) == sEnum.statusApprove.TuChoi) {\r\n      this.isTuChoi = true;\r\n    }\r\n    if (data.invoice_options) {\r\n      this.frmData.invoice_options = data.invoice_options;\r\n    }\r\n    //  if (this.frmData.status != \"DA_XUAT\")\r\n    this.onCheckDuplicate(_lst);\r\n    // cấu hình thập phân thêm mới\r\n    this.formatter = VChanggeMoneyService.getFormatterColumnInv(JSON.parse(data.invoices.decimal_places_json));\r\n    this.loadInvoiceProduct(_lst);\r\n    this.setDataSessionStorage(this.frmData);\r\n    this.setStudentChange(this.studentSelect);\r\n  }\r\n\r\n  /** Tương tác giữa các component  */\r\n  onTemplateChange(e) {\r\n    this.is_multi_vat = e;\r\n  }\r\n\r\n  onStudyYearChange(e) {\r\n    this.fee_months = e;\r\n  }\r\n\r\n  onRedueFeeChange(e) {\r\n    this.dataSource.items().forEach(item => {\r\n      const product = this.arrProducts.filter(p => p.code = item.product_code)[0];\r\n      if (product) {\r\n        item.price = parseFloat(product.price) - (product.price * parseFloat(e.note)) / 100;\r\n      }\r\n    });\r\n    if (!this.isTT78)\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n    else\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n    this.student_reduce_rate_code = e.note;\r\n    this.onCheckDuplicate(null);\r\n  }\r\n\r\n  onTemplateTypeChange(e) {\r\n    this.invoicereleaseTempt = e;\r\n    this.getTemplate();\r\n    this.onCheckDuplicate(null);\r\n  }\r\n\r\n  onTemplateTT78TypeChange(e) {\r\n    this.invoiceTemplateTT78 = e;\r\n    this.getTemplateTT78();\r\n    this.onCheckDuplicate(null);\r\n  }\r\n\r\n  fillDataToForm(e) {\r\n    this.frmData.customer_name = e[0];\r\n    this.frmData.buyer_tax_code = e[1];\r\n    this.frmData.buyer_address = e[2];\r\n  }\r\n\r\n  getDataInChildForm(e) {\r\n    this.frmData = e;\r\n    this.frmTraLai.reason = e.lido;\r\n  }\r\n\r\n  onNumberChange() {\r\n    VChanggeMoneyService._changeMoney(this.frmData);\r\n  }\r\n\r\n  updateSomeTotalInput(e) {\r\n\r\n  }\r\n\r\n  fillAutoInput(e) {\r\n    // this.frmData.auto_value = e;\r\n  }\r\n\r\n  // Lấy data khi chọn file đính kèm bảng kê\r\n  getFileData(fileData) {\r\n    this.fileData = fileData;\r\n  }\r\n\r\n  /** Kết thúc */\r\n\r\n  roundNumber(number, n): number {\r\n    if (number == null) {\r\n      return number;\r\n    } else {\r\n      const p = Math.pow(10, n);\r\n      return Math.round(number * p) / p;\r\n    }\r\n  }\r\n\r\n  getFormatterToNumber(formatter) {\r\n    const s1 = formatter.replace('0,###', '');\r\n    if (s1 === '') {\r\n      return 0;\r\n    } else {\r\n      const s2 = s1.replace('.', '');\r\n      return s2.split('').length;\r\n    }\r\n  }\r\n\r\n  formatDecimalColumn(number) {\r\n    if (number === 0) {\r\n      return '0,###';\r\n    } else {\r\n      return '0,###.' + '0'.repeat(number);\r\n    }\r\n  }\r\n\r\n  inChuyenDoiText() {\r\n    if (this.frmData.time_print_conversion > 0) {\r\n      return this._translate.CONTROLL.BUTTON.view_conversion;\r\n    } else {\r\n      return this._translate.CONTROLL.BUTTON.print_conversion;\r\n    }\r\n  }\r\n\r\n  // sự kiện form\r\n  totalPaymentChange = (e) => {\r\n    this.onNumberChange();\r\n    let currency_code = this.frmData.currency_code;\r\n    if (this.configs.system_parameter.view_price_nte) {\r\n      currency_code = 'VND';\r\n    }\r\n    this.frmData.total_payment_in_word = Helper.tienBangChu(e.value, VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien), currency_code, this.configs.system_parameter.display_read_money_english);\r\n  };\r\n\r\n  onNumberTicketChange() {\r\n    if (!this.isTT78) {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._objTemplateSelect, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._objTemplateSelect.template_type));\r\n      }\r\n    }\r\n    else {\r\n      VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.frmData, this.formatter, !this.frmData.auto_value, this.frmData.auto_value_price, null, this._oTemplateTT78, this.configs.system_parameter);\r\n      if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBay\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayThuTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonVeMayBayHoanTien\r\n        || VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonXangDau) {\r\n        VChanggeMoneyService._changeMoneyTicket(this.frmData, this.formatter, VStringService._getValueToString(this._oTemplateTT78.template_type));\r\n      }\r\n    }\r\n  }\r\n\r\n  // xem trước\r\n  async preview() {\r\n    if (this.template && this.template.number_of_row > 0) {\r\n      await this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n      this.convertGridToInvoices(true);\r\n      Library.showloading();\r\n      let win = window.open(\"\", \"\", \"width=200, height=100\");\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      this.createFormTypeBase64(true);\r\n      win.document.write(`\r\n      <div width=\"70%\" height=\"95%\">\r\n      ${this.arrHtml}\r\n      </div>\r\n      `);\r\n      setTimeout(() => {\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n        Library.hideloading();\r\n      }, 100);\r\n    }\r\n    else {\r\n      await this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n      this.convertGridToInvoices(true);\r\n      // let invoces = [];\r\n      // invoces.push(this.invoicesArr[0]);\r\n      let data = {\r\n        invoices: [this.invoicesArr[0]]\r\n      };\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      const win = window.open('about:blank', 'name', 'width=200, height=100');\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      this.spinner.show();\r\n      const sub = this.vatService.previewInvoiceImport(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.xemhoadonPDF(rs);\r\n        } else {\r\n          win.close();\r\n          this.spinner.hide();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n        this.spinner.hide();\r\n      }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  async previewBeforeSubmit(type) {\r\n    let header = 'BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ';\r\n    let date = 'Ngày hóa đơn'\r\n    let note = 'Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.'\r\n    if (this.isReceipts) {\r\n      header = 'BẢN DỰ THẢO PHIẾU THU';\r\n      date = 'Ngày phiếu thu'\r\n      note = 'Đề nghị đơn vị kiểm tra thật kỹ các nội dung phiếu thu đã nhập trước khi xuất như: Ngày phiếu thu, Tên HS-SV, Tên khoản thu, Tổng tiền,…để tránh xuất sai.'\r\n    }\r\n    // Mẫu html\r\n    if (this.template && this.template.number_of_row > 0) {\r\n      await this.handleFormData();\r\n      const data = {\r\n        invoices: this.invoicesArr\r\n      };\r\n      this.createFormTypeBase64(true);\r\n      let invoiceDate: any;\r\n      if (this.frmData.invoice_date)\r\n        invoiceDate = moment(this.frmData.invoice_date).format('DD/MM/YYYY');\r\n      else\r\n        invoiceDate = moment().format('DD/MM/YYYY');\r\n      let htx = '';\r\n      if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy && !this.isReceipts) {\r\n        htx = 'Xuất và ký';\r\n      } else if (this.isReceipts) {\r\n        htx = ''\r\n      }\r\n      else {\r\n        htx = 'Xuất chờ ký';\r\n      }\r\n      let du_lieu: any = {};\r\n      du_lieu['configs'] = sEnum.cauhinhxemmau.htmlHS;\r\n      du_lieu['file_content'] = this.arrHtml;\r\n      let content_invoice = {\r\n        du_lieu: du_lieu,\r\n        ngay_hoa_don: invoiceDate,\r\n        trang_thai: htx,\r\n        tong_tien: \"\",\r\n        title_invoice_type: header,\r\n        note_warn: note,\r\n        is_display_img_note: true,\r\n        text_ngay_hoa_don: date,\r\n        text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n        question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n      }\r\n      const initialState = {\r\n        content_invoice: content_invoice,\r\n      };\r\n\r\n      this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n        backdrop: 'static',\r\n        keyboard: false,\r\n        class: 'modal-xl prv-s-invoice v-s-invoice',\r\n        initialState\r\n      });\r\n\r\n      const subModal = this.customeModalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n          this.confirmCheckPreview = true;\r\n          if (type === 'TRINH_KY') {\r\n            this.eSubmit('TRINH_KY');\r\n          } else {\r\n            this.eSubmit('XUAT');\r\n          }\r\n        }\r\n        subModal.unsubscribe();\r\n      });\r\n    }\r\n    // mẫu repx\r\n    else {\r\n      await this.handleFormData();\r\n      let trang_thai = '';\r\n      if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n      } else {\r\n        trang_thai = this._translate.THONG_TIN.xuat_cho_ky;\r\n      }\r\n      let du_lieu = this.vatService.taodulieuXemTruocMauHS([this.invoicesArr[0]]);\r\n      du_lieu['configs'] = sEnum.cauhinhxemmau.hoadon;\r\n      let content_invoice = {\r\n        du_lieu: du_lieu,\r\n        ngay_hoa_don: \"\",\r\n        trang_thai: trang_thai,\r\n        tong_tien: \"\",\r\n        so_hoa_don: this.invoicesArr.length,\r\n        title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n        note_warn: this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n        is_display_img_note: true,\r\n        text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n        text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n        question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n      }\r\n      const initialState = {\r\n        content_invoice: content_invoice,\r\n      };\r\n\r\n      this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n        backdrop: 'static',\r\n        keyboard: false,\r\n        class: 'modal-xl prv-s-invoice v-s-invoice',\r\n        initialState\r\n      });\r\n\r\n      const subModal = this.customeModalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n          this.confirmCheckPreview = true;\r\n          if (type === 'TRINH_KY') {\r\n            this.eSubmit('TRINH_KY');\r\n          } else {\r\n            this.eSubmit('XUAT');\r\n          }\r\n        }\r\n        subModal.unsubscribe();\r\n      });\r\n\r\n\r\n\r\n      //   await this.handleFormData();\r\n      //   let invoces = [];\r\n      //   invoces.push(this.invoicesArr[0]);\r\n      //   const data = {\r\n      //     invoices: invoces\r\n      //   };\r\n\r\n      //   Library.showloading();\r\n      //   this.windowPreviewBeforeSubmit = window.open('', '', `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n      //   this.windowPreviewBeforeSubmit.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      //   this.windowPreviewBeforeSubmit.blur();\r\n\r\n      //   const timer = setInterval(() => {\r\n      //     if (this.windowPreviewBeforeSubmit.closed) {\r\n      //       clearInterval(timer);\r\n      //       const isCheck = Helper.getCookie('CK_CFM_I');\r\n      //       this.windowPreviewBeforeSubmit = undefined;\r\n      //       if (isCheck === 'CHECKED') {\r\n      //         document.cookie = 'CK_CFM_I=; path=/';\r\n      //         this.confirmCheckPreview = true;\r\n      //         if (type === 'TRINH_KY') {\r\n      //           this.eSubmit('TRINH_KY');\r\n      //         } else {\r\n      //           this.eSubmit('XUAT');\r\n      //         }\r\n      //       }\r\n      //     }\r\n      //   }, 500);\r\n        // let data = VPreviewInvService._getDataPreview1(this.frmData, this.configs, this.formatter, this.select);\r\n\r\n      //   let htx = '';\r\n      //   if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n      //     htx = 'và ký';\r\n      //   } else {\r\n      //     htx = 'chờ ký';\r\n      //   }\r\n      //   Library.showloading();\r\n        // const sub = this.vatService.previewInvoiceImport(data).subscribe(rs => {\r\n      //     if (rs.status === 'success') {\r\n      //       const pdf_file = rs.data.invoice.pdf_file;\r\n      //       const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n      //       this.windowPreviewBeforeSubmit.document.write(`\r\n      //       <!DOCTYPE html>\r\n      //       <html lang=\"en\">\r\n      //       <head>\r\n      //         <meta charset=\"UTF-8\">\r\n      //         <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n      //         <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n      //         <title>Document</title>\r\n      //         <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\" />\r\n      //         <style type=\"text/css\" scoped>\r\n      //         .nhap-nhay {\r\n      //           background: red;\r\n      //           padding: 0.5px 9px;\r\n      //           margin-right: 5px;\r\n      //           border-radius: 57%;\r\n      //           -webkit-animation: flicker 1s infinite;\r\n      //         }\r\n      //         .ht-xuat{\r\n      //           width: 20%;\r\n      //           height: 100%;\r\n      //           background: #ffffff;\r\n      //           box-shadow: 0px 0px 8px 0px #888888;\r\n\r\n      //         }\r\n      //         .ht-xuat > .right-nav{\r\n      //           display:flex;\r\n      //           justify-content: space-between;\r\n      //           align-items: center;\r\n      //           border-bottom: 1px solid #d5d5d5;\r\n      //           padding:20px;\r\n      //         }\r\n      //         @-webkit-keyframes flicker\r\n      //         {\r\n      //         0% {opacity:0;}\r\n      //         9% {opacity:0;}\r\n      //         10% {opacity:.5;}\r\n      //         13% {opacity:0;}\r\n      //         20% {opacity:.5;}\r\n      //         25% {opacity:1;}\r\n      //         }\r\n      //         .example {\r\n      //           padding: 20px;\r\n      //         }\r\n\r\n      //         input[type=button] {\r\n      //           padding: 5px 10px;\r\n      //           margin: 10px 5px;\r\n      //           border-radius: 5px;\r\n      //           cursor: pointer;\r\n      //           background: #ddd;\r\n      //           border: 1px solid #ccc;\r\n      //         }\r\n      //         input[type=button]:hover {\r\n      //           background: #ccc;\r\n      //         }\r\n\r\n      //         .confirm {\r\n      //           display: none;\r\n      //         }\r\n      //         .confirm > div:first-of-type {\r\n      //           position: fixed;\r\n      //           width: 100%;\r\n      //           height: 100%;\r\n      //           background: rgba(0, 0, 0, 0.5);\r\n      //           top: 0px;\r\n      //           left: 0px;\r\n      //         }\r\n      //         .confirm > div:last-of-type {\r\n      //           padding: 10px 20px;\r\n      //           background: white;\r\n      //           position: absolute;\r\n      //           width: auto;\r\n      //           height: auto;\r\n      //           left: 50%;\r\n      //           top: 50%;\r\n      //           transform: translate(-50%, -50%);\r\n      //           border-radius: 5px;\r\n      //           border: 1px solid #333;\r\n      //         }\r\n      //         .confirm > div:last-of-type div:first-of-type {\r\n      //           min-width: 150px;\r\n      //           padding: 10px;\r\n      //         }\r\n      //         .confirm > div:last-of-type div:last-of-type {\r\n      //           text-align: right;\r\n      //         }\r\n      //       </style>\r\n      //       </head>\r\n      //       <body>\r\n      //       <div style=\"margin-left: 50px;\">\r\n      //       <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n      //       <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n      //       </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n      //     </div>\r\n\r\n      //     <div style=\"display: flex; height:84vh; justify-content: center;\">\r\n      //       <iframe style=\"\" width=\"70%\" height=\"100%\" src=\"${objectUrl}\"></iframe>\r\n      //       <div class=\"ht-xuat\">\r\n      //         <div class=\"right-nav\">\r\n      //          <button style =\" background:#007BFF;color:#ffffff; padding: 10px 50px; border: none ; outline:none; border-radius: 30px\"> <a href=\"javascript:void(0)\" style=\"text-decoration: none; color:#ffffff; font-weight: bold; padding-right:10px\" onclick=\"setConfirmInvoice()\">Đồng ý </a> <i class=\"fa fa-angle-right\"></i></button>\r\n      //           <a href=\"javascript:void(0)\" style=\"text-decoration: none; color: gray\" onclick=\"closeWin()\"><i class=\"fa fa-times\" style=\"font-size:25px\"></i></a>\r\n      //         </div>\r\n      //         <div style=\"display: flex; flex-direction: column; padding:10px;\">\r\n      //           <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n      //             <p style=\" font-weight: 600;\">Ngày hóa đơn : </p>\r\n      //             <p style=\"color: orange;font-weight: 600;\">${moment(rs.data.invoice.invoice_date).format('DD/MM/YYYY')}</p>\r\n      //           </div>\r\n      //           <div style=\"display: flex; justify-content: space-between; align-items: center;padding: 10px; border-bottom: 1px solid #d5d5d5\">\r\n      //             <p style=\"font-weight: 600;\">Trạng thái : </p>\r\n      //             <p style=\"color: orange;font-weight: 600;\">Xuất ${htx}</p>\r\n      //           </div>\r\n      //           <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n      //             <p style=\"font-weight: 600;\">Tổng tiền : </p>\r\n      //             <p style=\"color: orange;font-weight: 600;\">${rs.data.invoice.total_payment}</p>\r\n      //           </div>\r\n      //         </div>\r\n      //       </div>\r\n      //     </div>\r\n\r\n      //     <div class=\"confirm\">\r\n      //         <div></div>\r\n      //         <div>\r\n      //           <div id=\"confirmMessage\">Confirm text</div>\r\n      //           <div>\r\n      //             <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n      //             <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n      //           </div>\r\n      //         </div>\r\n      //     </div>\r\n\r\n      //     <script type=\"text/javascript\">\r\n      //     const ui = {\r\n      //       confirm: async (message) => createConfirm(message)\r\n      //     }\r\n\r\n      //     const createConfirm = (message) => {\r\n      //       return new Promise((complete, failed)=>{\r\n      //         $('#confirmMessage').text(message)\r\n\r\n      //         $('#confirmYes').off('click');\r\n      //         $('#confirmNo').off('click');\r\n\r\n      //         $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n      //         $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n\r\n      //         $('.confirm').show();\r\n      //       });\r\n      //     }\r\n\r\n      //     const setConfirmInvoice = async () => {\r\n      //       const confirm = await ui.confirm(\"Bạn có chắc chắn muốn xuất hóa đơn ${htx} không?\");\r\n      //       if(confirm){\r\n      //         document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n      //         window.close();\r\n      //       } else{\r\n      //       }\r\n      //     } \r\n\r\n      //       function closeWin(){\r\n      //         window.close();\r\n      //       }\r\n      //     </script>\r\n      //     <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n      //       </body>\r\n      //       </html>\r\n      //     `);\r\n      //       this.windowPreviewBeforeSubmit.focus();\r\n      //     } else {\r\n      //       this.windowPreviewBeforeSubmit.close();\r\n      //       Library.notify(rs.message, 'error');\r\n      //     }\r\n      //   }, err => {\r\n      //   }, () => {\r\n      //     Library.hideloading();\r\n      //     sub.unsubscribe();\r\n      //   });\r\n    }\r\n\r\n\r\n  }\r\n\r\n  // Xem lại hoá đơn\r\n  async view() {\r\n    if (this.template.number_of_row > 0) {\r\n      await this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n      this.convertGridToInvoices(true, true);\r\n      Library.showloading();\r\n      let win = window.open('about:blank', 'name', \"width=200, height=100\");\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      this.createFormTypeBase64(false);\r\n      win.document.write(`\r\n      <div width=\"70%\" height=\"95%\">\r\n      ${this.arrHtml}\r\n      </div>\r\n      `);\r\n      setTimeout(() => {\r\n        win.resizeTo(screen.availWidth, screen.availHeight);\r\n        win.focus();\r\n        Library.hideloading();\r\n      }, 100);\r\n    }\r\n    else {\r\n      await this.handleFormData();\r\n      if (!this._validForm(true)) {\r\n        return;\r\n      }\r\n      this.convertGridToInvoices(true, true);\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      const win = window.open('about:blank', 'name', 'width=200, height=100');\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      this.spinner.show();\r\n      const sub = this.vatService.xemHoaDonInvoiceImport([this.invoicesArr[0].id]).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.xemhoadonPDF(rs);\r\n        } else {\r\n          win.close();\r\n          this.spinner.hide();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n        this.spinner.hide();\r\n      }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  inChuyenDoi() {\r\n    let w = 1920, h = 900;\r\n    w = window.screen.availWidth * 100 / 100;\r\n    h = window.screen.availHeight * 93 / 100;\r\n    let win = window.open(\"about:blank\", \"name\", \"width=200, height=100\");\r\n    win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n    win.blur();\r\n    this.spinner.show();\r\n    let ids = [];\r\n    ids.push(this.invoicesId[0]);\r\n    let sub = this.vatService.inChuyenDoiInvoiceImport(ids, false).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        this.xemhoadonPDF(rs);\r\n      } else {\r\n        win.close();\r\n        this.spinner.hide();\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n  xuatChoKy() {\r\n    const percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.isReceipts) {\r\n      this.subLuuChoXuat = this.vatService.xuatChoKyForSeriesRecept(this.invoice).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          if (rs.data.batch_id) {\r\n            this.invoicesArr.forEach(element => {\r\n              element.batch_id = rs.data.batch_id;\r\n            });\r\n          }\r\n          this.invoice.verify_code = rs.data.verify_code;\r\n          this.invoice.invoice_number = rs.data.invoice_number;\r\n          this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          this.invoice.id = rs.data.id;\r\n          this.invoicesId.push(rs.data.id);\r\n          this.valueProgress += percentComplete;\r\n          if (this.countInvoice < this.totalInvoice) {\r\n            this.countInvoice++;\r\n            this.xuatChoKy();\r\n          } else if (this.countInvoice === this.totalInvoice) {\r\n            this.refreshStudent();\r\n            this.setDataSessionStorage(this.frmData);\r\n            this.setStudentChange(this.studentSelect);\r\n            this.isChildInvoices = false;\r\n            Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            //   this.bsModalImportRef.hide();\r\n          }\r\n        } else {\r\n          this.refreshStudent();\r\n          this.setStudentChange(this.studentSelect);\r\n          this.ghiTam(rs.message);\r\n          // this.showPopupImport = false;\r\n          // this.errorImport = true;\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n      });\r\n    }\r\n    else {\r\n      if (!this.isTT78) {\r\n        this.subLuuChoXuat = this.vatService.xuatChoKyForSeries(this.invoice).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.batch_id) {\r\n              this.invoicesArr.forEach(element => {\r\n                element.batch_id = rs.data.batch_id;\r\n              });\r\n            }\r\n            this.invoice.verify_code = rs.data.verify_code;\r\n            this.invoice.invoice_number = rs.data.invoice_number;\r\n            this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.invoice.id = rs.data.id;\r\n            this.invoicesId.push(rs.data.id);\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.xuatChoKy();\r\n            } else if (this.countInvoice === this.totalInvoice) {\r\n              this.refreshStudent();\r\n              this.setDataSessionStorage(this.frmData);\r\n              this.setStudentChange(this.studentSelect);\r\n              this.isChildInvoices = false;\r\n              Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n              this.showPopupImport = false;\r\n              this.errorImport = true;\r\n              //   this.bsModalImportRef.hide();\r\n            }\r\n          } else {\r\n            this.refreshStudent();\r\n            this.setStudentChange(this.studentSelect);\r\n            this.ghiTam(rs.message);\r\n            // this.showPopupImport = false;\r\n            // this.errorImport = true;\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n        });\r\n      }\r\n      else {\r\n        this.subLuuChoXuat = this.vatService.xuatChoKyForSeriesTT78(this.invoice).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.batch_id) {\r\n              this.invoicesArr.forEach(element => {\r\n                element.batch_id = rs.data.batch_id;\r\n              });\r\n            }\r\n            this.invoice.verify_code = rs.data.verify_code;\r\n            this.invoice.invoice_number = rs.data.invoice_number;\r\n            this.invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n            this.invoice.id = rs.data.id;\r\n            this.invoicesId.push(rs.data.id);\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.xuatChoKy();\r\n            } else if (this.countInvoice === this.totalInvoice) {\r\n              this.refreshStudent();\r\n              this.setDataSessionStorage(this.frmData);\r\n              this.setStudentChange(this.studentSelect);\r\n              this.isChildInvoices = false;\r\n              Library.notify(this._translate.NOTIFY.export_wait_sign_success, 'success');\r\n              this.showPopupImport = false;\r\n              this.errorImport = true;\r\n              //   this.bsModalImportRef.hide();\r\n            }\r\n          } else {\r\n            this.refreshStudent();\r\n            this.setStudentChange(this.studentSelect);\r\n            this.ghiTam(rs.message);\r\n            // this.showPopupImport = false;\r\n            // this.errorImport = true;\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n        });\r\n      }\r\n    }\r\n  }\r\n  ghiTam(message) {\r\n    const percentComplete = 100 / this.totalInvoice;\r\n    this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n    if (this.invoice.id) {\r\n      if (this.isReceipts) {\r\n        this.subLuuChoXuat = this.vatService.editBatchRecept(this.invoice.id, this.invoice).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.batch_id) {\r\n              this.invoicesArr.forEach(element => {\r\n                element.batch_id = rs.data.batch_id;\r\n              });\r\n            }\r\n            this.invoice.id = rs.data.id;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.ghiTam(message);\r\n            } else if (this.countInvoice == this.totalInvoice) {\r\n              this.refreshStudent();\r\n              this.setDataSessionStorage(this.frmData);\r\n              this.setStudentChange(this.studentSelect);\r\n              this.isChildInvoices = false;\r\n              this.arrayIdEdit = this.invoicesArr.map((obj: any) => obj.id);\r\n              if (message == \"\")\r\n                Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n              else\r\n                Library.notify(message, 'error', 5000);\r\n              this.showPopupImport = false;\r\n              this.errorImport = true;\r\n              return true;\r\n              // this.bsModalImportRef.hide();\r\n            }\r\n          } else {\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error', 5000);\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        if (!this.isTT78) {\r\n          this.subLuuChoXuat = this.vatService.editBatch(this.invoice.id, this.invoice).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              if (rs.data.batch_id) {\r\n                this.invoicesArr.forEach(element => {\r\n                  element.batch_id = rs.data.batch_id;\r\n                });\r\n              }\r\n              this.invoice.id = rs.data.id;\r\n              this.valueProgress += percentComplete;\r\n              if (this.countInvoice < this.totalInvoice) {\r\n                this.countInvoice++;\r\n                this.ghiTam(message);\r\n              } else if (this.countInvoice == this.totalInvoice) {\r\n                this.refreshStudent();\r\n                this.setDataSessionStorage(this.frmData);\r\n                this.setStudentChange(this.studentSelect);\r\n                this.isChildInvoices = false;\r\n                this.arrayIdEdit = this.invoicesArr.map((obj: any) => obj.id);\r\n                if (message == \"\")\r\n                  Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n                else\r\n                  Library.notify(message, 'error', 5000);\r\n                this.showPopupImport = false;\r\n                this.errorImport = true;\r\n                return true;\r\n                // this.bsModalImportRef.hide();\r\n              }\r\n            } else {\r\n              this.showPopupImport = false;\r\n              this.errorImport = true;\r\n              Library.notify(rs.message, 'error', 5000);\r\n              return false;\r\n            }\r\n          });\r\n        }\r\n        else {\r\n          this.subLuuChoXuat = this.vatService.editBatchTT78(this.invoice.id, this.invoice).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              if (rs.data.batch_id) {\r\n                this.invoicesArr.forEach(element => {\r\n                  element.batch_id = rs.data.batch_id;\r\n                });\r\n              }\r\n              this.invoice.id = rs.data.id;\r\n              this.valueProgress += percentComplete;\r\n              if (this.countInvoice < this.totalInvoice) {\r\n                this.countInvoice++;\r\n                this.ghiTam(message);\r\n              } else if (this.countInvoice == this.totalInvoice) {\r\n                this.refreshStudent();\r\n                this.setDataSessionStorage(this.frmData);\r\n                this.setStudentChange(this.studentSelect);\r\n                this.isChildInvoices = false;\r\n                this.arrayIdEdit = this.invoicesArr.map((obj: any) => obj.id);\r\n                if (message == \"\")\r\n                  Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n                else\r\n                  Library.notify(message, 'error', 5000);\r\n                this.showPopupImport = false;\r\n                this.errorImport = true;\r\n                return true;\r\n                // this.bsModalImportRef.hide();\r\n              }\r\n            } else {\r\n              this.showPopupImport = false;\r\n              this.errorImport = true;\r\n              Library.notify(rs.message, 'error', 5000);\r\n              return false;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      if (this.isReceipts) {\r\n        this.subLuuChoXuat = this.vatService.ghiTamForSeriesRecept(this.invoice).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.batch_id) {\r\n              this.invoicesArr.forEach(element => {\r\n                element.batch_id = rs.data.batch_id;\r\n              });\r\n            }\r\n            this.invoice.id = rs.data.id;\r\n            this.valueProgress += percentComplete;\r\n            if (this.countInvoice < this.totalInvoice) {\r\n              this.countInvoice++;\r\n              this.ghiTam(message);\r\n            } else if (this.countInvoice === this.totalInvoice) {\r\n              this.refreshStudent();\r\n              this.setDataSessionStorage(this.frmData);\r\n              this.setStudentChange(this.studentSelect);\r\n              this.isChildInvoices = false;\r\n              if (message == \"\")\r\n                Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n              else\r\n                Library.notify(message, 'error', 5000);\r\n              this.showPopupImport = false;\r\n              this.errorImport = true;\r\n              return true;\r\n              //  this.bsModalImportRef.hide();\r\n            }\r\n          } else {\r\n            this.refreshStudent();\r\n            this.showPopupImport = false;\r\n            this.errorImport = true;\r\n            Library.notify(rs.message, 'error', 5000);\r\n            return false;\r\n          }\r\n        }\r\n          , err => {\r\n          }, () => {\r\n\r\n          });\r\n      }\r\n      else {\r\n        if (!this.isTT78) {\r\n          this.subLuuChoXuat = this.vatService.ghiTamForSeries(this.invoice).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              if (rs.data.batch_id) {\r\n                this.invoicesArr.forEach(element => {\r\n                  element.batch_id = rs.data.batch_id;\r\n                });\r\n              }\r\n              this.invoice.id = rs.data.id;\r\n              this.valueProgress += percentComplete;\r\n              if (this.countInvoice < this.totalInvoice) {\r\n                this.countInvoice++;\r\n                this.ghiTam(message);\r\n              } else if (this.countInvoice === this.totalInvoice) {\r\n                this.refreshStudent();\r\n                this.setDataSessionStorage(this.frmData);\r\n                this.setStudentChange(this.studentSelect);\r\n                this.isChildInvoices = false;\r\n                if (message == \"\")\r\n                  Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n                else\r\n                  Library.notify(message, 'error', 5000);\r\n                this.showPopupImport = false;\r\n                this.errorImport = true;\r\n                return true;\r\n                //  this.bsModalImportRef.hide();\r\n              }\r\n            } else {\r\n              this.refreshStudent();\r\n              this.showPopupImport = false;\r\n              this.errorImport = true;\r\n              Library.notify(rs.message, 'error', 5000);\r\n              return false;\r\n            }\r\n          }\r\n            , err => {\r\n            }, () => {\r\n\r\n            });\r\n        }\r\n        else {\r\n          this.subLuuChoXuat = this.vatService.ghiTamForSeriesTT78(this.invoice).subscribe(rs => {\r\n            if (rs.status === 'success') {\r\n              if (rs.data.batch_id) {\r\n                this.invoicesArr.forEach(element => {\r\n                  element.batch_id = rs.data.batch_id;\r\n                });\r\n              }\r\n              this.invoice.id = rs.data.id;\r\n              this.valueProgress += percentComplete;\r\n              if (this.countInvoice < this.totalInvoice) {\r\n                this.countInvoice++;\r\n                this.ghiTam(message);\r\n              } else if (this.countInvoice === this.totalInvoice) {\r\n                this.refreshStudent();\r\n                this.setDataSessionStorage(this.frmData);\r\n                this.setStudentChange(this.studentSelect);\r\n                this.isChildInvoices = false;\r\n                if (message == \"\")\r\n                  Library.notify(this._translate.NOTIFY.update_success, 'success');\r\n                else\r\n                  Library.notify(message, 'error', 5000);\r\n                this.showPopupImport = false;\r\n                this.errorImport = true;\r\n                return true;\r\n                //  this.bsModalImportRef.hide();\r\n              }\r\n            } else {\r\n              this.refreshStudent();\r\n              this.showPopupImport = false;\r\n              this.errorImport = true;\r\n              Library.notify(rs.message, 'error', 5000);\r\n              return false;\r\n            }\r\n          }\r\n            , err => {\r\n            }, () => {\r\n\r\n            });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    if (this.isXuat) {\r\n      this.invoice = this.invoicesArr[this.countInvoice - 1];\r\n      if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n        || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing) || this.isReceipts) {\r\n        this.xuLiApiKhiXuat();\r\n      } else {\r\n        if (this.invoice && this.invoice.invoice_files.length) {\r\n          this.invoice.invoice_files.forEach(item => {\r\n            this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.frmData.invoice_date);\r\n          });\r\n        } else {\r\n          if (this.isTT78) {\r\n            let ListSerialNumber = \"DSCKS\";\r\n            if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n              let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n              if (signatures && signatures.length > 0)\r\n                ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n            }\r\n            let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n            this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n          }\r\n          else\r\n            this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice');\r\n        }\r\n      }\r\n      this.tempKiFile = 0;\r\n    }\r\n  }\r\n\r\n  traLai() {\r\n    if (this.frmTraLai.reason === undefined || this.frmTraLai.reason === '') {\r\n      Library.notify(this._translate.CONTROLL.LABEL.reason_return + ' ' + this._translate.VALIDATION.required, 'error', 5000);\r\n    } else {\r\n      Library.showloading();\r\n      const sub = this.vatService.traLaiHoaDon({\r\n        id: this.frmData.id,\r\n        reason: this.frmTraLai.reason\r\n      }).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          this.router.navigate(['/system/invoice-sync']);\r\n          Library.notify(this._translate.NOTIFY.return_success, 'success');\r\n        } else {\r\n          Library.notify(rs.message, 'error', 5000);\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n  }\r\n\r\n  _validForm(isOnlyCheckAm) {\r\n    let _isValid = true;\r\n    const _lst = this.frmData.invoice_products;\r\n    if (!this.frmData.total_payment && this.frmData.total_payment !== 0) {\r\n      Library.notify(\"Tổng tiền hóa đơn không được để trống\", 'error');\r\n      return false;\r\n    }\r\n    if (_lst.length === 0) {\r\n      Library.notify(this._translate.NOTIFY.no_revenue, 'error', 5000);\r\n      this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n      return false;\r\n    }\r\n    else {\r\n      const _lstValidThanhTien = this.frmData.invoice_products.filter(p => !p.amount && p.amount !== 0);\r\n      if (_lstValidThanhTien.length == this.frmData.invoice_products.length) {\r\n        Library.notify(\"Thành tiền không được để trống\", 'error', 5000);\r\n        this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount'));\r\n        return false;\r\n      }\r\n      const _lstValidTongTien = this.frmData.invoice_products.filter(p => !p.amount_after_vat && p.amount_after_vat !== 0);\r\n      if (_lstValidTongTien.length == this.frmData.invoice_products.length) {\r\n        Library.notify(\"Tổng tiền hàng hóa không được để trống\", 'error', 5000);\r\n        this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'amount_after_vat'));\r\n        return false;\r\n      }\r\n      for (let i = 0; i < _lst.length; i++) {\r\n        if ((_lst[i].group_code == \"HOCPHI\" || _lst[i].group_code == \"HOCTHEM\") && (_lst[i].school_fee_month == '' || !_lst[i].school_fee_month)) {\r\n          Library.notify(this._translate.GRID.INVOICE_DETAILS.school_fee_month + \" \" + this._translate.VALIDATION.required, 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n        let _lstProduct = _lst.filter(p => p.product_code == _lst[i].product_code)\r\n        if (_lstProduct && _lstProduct.length > 1) {\r\n          Library.notify(\"Mã '\" + _lst[i].product_code + \"' bị trùng\", 'error', 5000);\r\n          this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(i, 'product_code'));\r\n          return false;\r\n        }\r\n      }\r\n      if (!this.isTT78) {\r\n        let numberRow = this.invoicereleaseTempt.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(this._translate.NOTIFY.only_seclected_1_revenue_to_export_invoice, 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        let numberRow = this.invoiceTemplateTT78.numberRow;\r\n        if (numberRow == 100) {\r\n          if (_lst.length > 1) {\r\n            Library.notify(this._translate.NOTIFY.only_seclected_1_product_to_export_invoice, 'error', 5000);\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(0, 'product_code'));\r\n            return false;\r\n          }\r\n        }\r\n        this.invoice_products.load().then((dataSource) => {\r\n          dataSource.forEach((item, index) => {\r\n            if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion && !item.is_promotion_new && !item.commercial_discount && _isValid) {\r\n              // if (item.quantity == null && _isValid) {\r\n              //   Library.notify(\"Số lượng\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'quantity'));\r\n              //   _isValid = false;\r\n              //   return false;\r\n              // }\r\n              // if (item.price == null && _isValid) {\r\n              //   Library.notify(\"Đơn giá\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n              //   this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'price'));\r\n              //   _isValid = false;\r\n              //   return false;\r\n              // }\r\n            }\r\n            else if (item.is_promotion || item.is_promotion_new || item.commercial_discount) {\r\n              if ((item.product_name == null || item.product_name == '') && _isValid) {\r\n                Library.notify(\"Tên hàng hóa\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'product_name'));\r\n                _isValid = false;\r\n                return false;\r\n              }\r\n            }\r\n            if (VStringService._getValueToString(item.product_name) != \"\" && !item.is_promotion) {\r\n              if (this.isHdGTGT) {\r\n                if (item.vat == null && _isValid) {\r\n                  Library.notify(\"Thuế suất\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'vat'));\r\n                  _isValid = false;\r\n                  return false;\r\n                }\r\n                if (item.vat != \"-1\" && item.amount_vat == null && _isValid) {\r\n                  Library.notify(\"Tiền thuế\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                  this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount_vat'));\r\n                  _isValid = false;\r\n                  return false;\r\n                }\r\n              }\r\n              if (item.amount == null && _isValid) {\r\n                Library.notify(\"Thành tiền\" + \" \" + this._translate.VALIDATION.required, 'error');\r\n                this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(index, 'amount'));\r\n                _isValid = false;\r\n                return false;\r\n              }\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }\r\n    const _lstStudents = this.studentSelect.filter(p => p.student_name);\r\n    if (_lstStudents.length === 0) {\r\n      Library.notify(this._translate.NOTIFY.no_student, 'error', 5000);\r\n      if (this.studentGrid.dataGrid.instance)\r\n        this.studentGrid.dataGrid.instance.focus(this.studentGrid.dataGrid.instance.getCellElement(0, 'student_code'));\r\n      return false;\r\n    }\r\n    else {\r\n      ///Tỷ lệ miễn giảm không trùng với thông tin đã chọn\r\n      for (let i = 0; i < _lstStudents.length; i++) {\r\n        if (_lstStudents[i].statusData == 'OTHER_REDUCE') {\r\n          if (this.isReceipts) {\r\n            return true;\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.different_reduce, 'error', 5000);\r\n            this.studentGrid.dataGrid.instance.focus(this.studentGrid.dataGrid.instance.getCellElement(i, 'student_code'));\r\n            return false;\r\n          }\r\n        }\r\n        if (_lstStudents[i].statusData == 'ERROR_DUPLICATE') {\r\n          if (this.isReceipts) {\r\n            return true;\r\n          } else {\r\n            Library.notify(this._translate.NOTIFY.invoice_duplicate, 'error', 5000);\r\n            this.studentGrid.dataGrid.instance.focus(this.studentGrid.dataGrid.instance.getCellElement(i, 'student_code'));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return _isValid;\r\n  }\r\n\r\n  async eSubmit(type, isCheckNoVat?) {\r\n    this.isXuat = true;\r\n    this.invoicesId = [];\r\n    this.total_payment = \"\";\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return;\r\n    }\r\n    await this.handleFormData();\r\n    this._isValid = this._validForm(false);\r\n    if (!this._isValid) {\r\n      return;\r\n    }\r\n    if (type !== 'GHI_TAM') {\r\n      this._isValid = await this.checkNumberRelease();\r\n      if (!this._isValid) {\r\n        Library.notify(this._translate.NOTIFY.cannot_export_invoice, 'error', 5000);\r\n        return;\r\n      }\r\n      this._isValid = InvoicesService.checkTimeExportInv(this.configs.system_parameter);\r\n      if (!this._isValid) {\r\n        Library.notify(String.Format(this._translate.NOTIFY.time_export_inv, moment(this.configs.system_parameter.time_start).format('HH:mm'), moment(this.configs.system_parameter.time_end).format('HH:mm')), 'error', 5000);\r\n        return;\r\n      }\r\n      if (!this.frmData.invoice_date) {\r\n        this.formInvoice.form.instance.getEditor(\"invoice_date\").focus();\r\n        Library.notify(this._translate.CONTROLL.LABEL.invoice_date + \" \" + this._translate.VALIDATION.required, 'error', 5000);\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return;\r\n    }\r\n\r\n\r\n    if (this.frmData.invoice_options) {\r\n      this.frmData.invoice_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n      Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error', 5000);\r\n      return false;\r\n    }\r\n\r\n    if (!this.isAccessExportInv && type === 'XUAT' && this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy && !this.isReceipts) {\r\n      Library.notify(this._translate.NOTIFY.you_not_permissions, 'error', 5000);\r\n      return false;\r\n    }\r\n\r\n    this.convertGridToInvoices(false);\r\n\r\n    if (type === 'XUAT' || (type === 'TRINH_KY' && this.frmData.status === sEnum.hinhThucXuat.XuatChoKy)) {\r\n      let _index = 0;\r\n      if (!this.isTT78) {\r\n        let totalExport = this.totalInvoice - this.totalCountWaitSign;\r\n        if (totalExport > this.countRelease) {\r\n          Library.notify(\"Số lượng hóa đơn được phép xuất trong TBPH còn \" + this.countRelease + \" số nhỏ hơn Số lượng hóa đơn đang thực hiện xuất \" + totalExport + \" số.\", 'error', 5000);\r\n          return false;\r\n        }\r\n      }\r\n      let _lstInv = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        _lstInv = dataSource.filter(p => p.product_name);\r\n      });\r\n      if (this.isHdGTGT) {\r\n        for (let i = 0; i < _lstInv.length; i++) {\r\n          if (_lstInv[i].amount > 0 && !_lstInv[i].vat) {\r\n            _index = i;\r\n            this._isValid = false;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      if (!this.vatService.checkVatMauHoaDon(_lstInv, this.is_multi_vat)) {\r\n        return false;\r\n      }\r\n\r\n      if (!this._isValid && isCheckNoVat) {\r\n        const result = Library.confirm(this._translate.CONFIRM.no_vat, this._translate.NOTIFY.notify);\r\n        result.then(async (dialogResult) => {\r\n          if (dialogResult) {\r\n            this.productGrip.dataGrid.instance.focus(this.productGrip.dataGrid.instance.getCellElement(_index, 'vat'));\r\n            return false;\r\n          } else {\r\n            if (type === 'TRINH_KY' && this.invoice.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n              this.confirmCheckPreview = true;\r\n            }\r\n            if (this.confirmCheckPreview) {\r\n\r\n              if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n                this.showPopupImport = true;\r\n                if (await this.checkInvoiceDeleted() === true) {\r\n                  this.refreshBatchIds();\r\n                  this.xuatHoaDon();\r\n                }\r\n              } else {\r\n                Helper.confirmXuatChoKy(async () => {\r\n                  this.showPopupImport = true;\r\n                  if (!this.isAccessExportInv) {\r\n                    if (type === 'TRINH_KY') {\r\n                      this.invoice.approve_status = sEnum.statusApprove.ChoDuyet;\r\n                      this.invoice.refuse_reason = '';\r\n                    } else {\r\n                      if (this.invoice.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                        this.invoice.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                      }\r\n                    }\r\n                  }\r\n                  if (await this.checkInvoiceDeleted() === true) {\r\n                    this.refreshBatchIds();\r\n                    this.xuatChoKy();\r\n                  }\r\n                });\r\n              }\r\n              this.confirmCheckPreview = false;\r\n            } else {\r\n              this.previewBeforeSubmit(type);\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        if (type === 'TRINH_KY' && this.invoice.status === sEnum.hinhThucXuat.XuatChoKy) {\r\n          this.confirmCheckPreview = true;\r\n        }\r\n        if (this.confirmCheckPreview) {\r\n\r\n          if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n            this.showPopupImport = true;\r\n            if (await this.checkInvoiceDeleted() === true) {\r\n              this.refreshBatchIds();\r\n              this.xuatHoaDon();\r\n            }\r\n          } else {\r\n            Helper.confirmXuatChoKy(async () => {\r\n              this.showPopupImport = true;\r\n              if (!this.isAccessExportInv) {\r\n                if (type === 'TRINH_KY') {\r\n                  this.invoice.refuse_reason = '';\r\n                  this.invoice.approve_status = sEnum.statusApprove.ChoDuyet;\r\n                } else {\r\n                  if (this.invoice.approve_status !== sEnum.statusApprove.TuChoi) {\r\n                    this.invoice.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n                  }\r\n                }\r\n              }\r\n              if (await this.checkInvoiceDeleted() === true) {\r\n                this.refreshBatchIds();\r\n                this.xuatChoKy();\r\n              }\r\n            });\r\n          }\r\n          this.confirmCheckPreview = false;\r\n        } else {\r\n          await this.previewBeforeSubmit(type);\r\n        }\r\n      }\r\n    } else {\r\n      this.showPopupImport = true;\r\n      if (!this.isAccessExportInv) {\r\n        if (type === 'TRINH_KY') {\r\n          this.invoice.approve_status = sEnum.statusApprove.ChoDuyet;\r\n          this.invoice.refuse_reason = '';\r\n        } else {\r\n          if (this.invoice.approve_status !== sEnum.statusApprove.TuChoi) {\r\n            this.invoice.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n          }\r\n        }\r\n      }\r\n      if (await this.checkInvoiceDeleted() === true) {\r\n        this.refreshBatchIds();\r\n        this.ghiTam(\"\");\r\n      }\r\n    }\r\n  }\r\n\r\n  async subData(type) {\r\n    this.isXuat = true;\r\n    this.invoicesId = [];\r\n    const checkValid = this.formInvoice.form.instance.validate();\r\n    if (!checkValid.isValid) {\r\n      return false;\r\n    }\r\n    await this.handleFormData();\r\n    this._isValid = this._validForm(false);\r\n    if (!this._isValid) {\r\n      return false;\r\n    }\r\n\r\n    if (this.windowPreviewBeforeSubmit) {\r\n      this.windowPreviewBeforeSubmit.focus();\r\n      return false;\r\n    }\r\n    if (this.frmData.invoice_options) {\r\n      this.frmData.invoice_options.forEach(item => {\r\n        delete item['is_show'];\r\n        delete item['type'];\r\n        delete item['width'];\r\n        delete item['statusData'];\r\n      });\r\n    }\r\n    if (this.frmData.total_payment > 20000000 && (this.frmData.payment_method_name === 'TM')) {\r\n      Library.notify(this._translate.NOTIFY.payment_method_more_than_20_million, 'error', 5000);\r\n      return false;\r\n    }\r\n\r\n    if (!this.isAccessExportInv && type === 'XUAT' && this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy && !this.isReceipts) {\r\n      Library.notify(this._translate.NOTIFY.you_not_permissions, 'error', 5000);\r\n      return false;\r\n    }\r\n    this.convertGridToInvoices(false);\r\n    this.showPopupImport = true;\r\n    if (!this.isAccessExportInv) {\r\n      if (type === 'TRINH_KY') {\r\n        this.invoice.approve_status = sEnum.statusApprove.ChoDuyet;\r\n        this.invoice.refuse_reason = '';\r\n      } else {\r\n        if (this.invoice.approve_status !== sEnum.statusApprove.TuChoi) {\r\n          this.invoice.approve_status = sEnum.statusApprove.ChuaTrinhKy;\r\n        }\r\n      }\r\n    }\r\n    if (await this.checkInvoiceDeleted() === true) {\r\n      this.refreshBatchIds();\r\n      return this.ghiTam(\"\");\r\n    }\r\n  }\r\n\r\n  handleAddNew() {\r\n    if (this.isExportInvoice) {\r\n      this.addNew();\r\n    } else {\r\n      if (!this.checkDataFormChange(this.valueChange, this.frmData) || !this.checkStudentChange(this.jsonStudents, this.studentSelect)) {\r\n        this.confirmService.confirm()\r\n          .subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM').then(res => {\r\n                    if (res) {\r\n                      this.addNew();\r\n                    } else {\r\n                      return;\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  this.addNew();\r\n                  break;\r\n                case 'cancel':\r\n                  this.addNew();\r\n                  break;\r\n                default:\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n      } else {\r\n        this.addNew();\r\n      }\r\n    }\r\n  }\r\n\r\n  addNew() {\r\n    const inv = Object.assign({}, this.frmData);\r\n    this.frmData = new InvoiceModel(1);\r\n    this.frmData.invoice_date = null;\r\n    this.frmData.template_id = inv.template_id;\r\n    this.frmData.invoice_release_id = inv.invoice_release_id;\r\n    this.frmData.payment_method_name = inv.payment_method_name;\r\n    this.frmData.payment_method_view_name = inv.payment_method_view_name;\r\n    this.frmData.currency_code = inv.currency_code;\r\n    this.frmData.student_reduce_rate_code = inv.student_reduce_rate_code;\r\n    this.frmData.study_year = inv.study_year;\r\n    this.frmData.invoice_options = inv.invoice_options;\r\n    this.formInvoice.resetTMR();\r\n    this.frmData.template_code = inv.template_code;\r\n    this.frmData.invoice_series = inv.invoice_series;\r\n    this.arrayIdEdit = [];\r\n    this.totalDuplicate = 0;\r\n    this.totalInvoice = 0;\r\n    this.isXuat = true;\r\n    this.isChildInvoices = false;\r\n    this.invoice_products = new ArrayStore({\r\n      key: 'id',\r\n      data: this.frmData.invoice_products_data()\r\n    });\r\n    this.dataSource = new DataSource({\r\n      store: this.invoice_products\r\n    });\r\n    this.studentSelect = [];\r\n    this.productGrip.ttDaXuatHoaDon = false;\r\n    this.productGrip.createUpdateEvent();\r\n    this.formInvoice.removeReadonlyAllForm();\r\n    this.ttDaXuatHoaDon = false;\r\n    this.setDataSessionStorage(this.frmData);\r\n    this.setStudentChange(this.studentSelect);\r\n  }\r\n  students_data() {\r\n    let arr = [];\r\n    for (let i = 0; i < 5; i++) {\r\n      arr.push({\r\n        order: i + 1,\r\n        student_id: \"\", //mã hàng\r\n        invoice_number: null,\r\n        invoice_date: null,\r\n        id: null,\r\n        student_code: '',\r\n        student_name: '',\r\n        buyer_name: '',\r\n        buyer_mobile: '',\r\n        buyer_address: '',\r\n        buyer_email: '',\r\n        student_reduce_rate_code: '',\r\n        class_code: '',\r\n        class_name: '',\r\n        customer_name: '',\r\n        customer_code: '',\r\n        buyer_tax_code: '',\r\n        bank_account_number: '',\r\n        tax_authority_code: '',\r\n        send_department_status: '',\r\n        invoice_sign_date: null,\r\n        statusData: 'INVALID'\r\n      });\r\n    }\r\n    return arr;\r\n  }\r\n  handleFormData() {\r\n    const wait = (delay, ...args) => new Promise(resolve => setTimeout(resolve, delay, ...args));\r\n    return wait(300).then(() => {\r\n      this.tempKiFile = 0;\r\n      const invoice_products = [];\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          delete item.error;\r\n          if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n            item.row_content = item.product_name;\r\n            invoice_products.push(item);\r\n            if (item.is_transport_number) {\r\n              this.frmData.transport_number = item.product_name;\r\n            }\r\n          }\r\n        });\r\n        this.frmData.invoice_files = JSON.parse(JSON.stringify(this.fileData));\r\n        this.frmData.invoice_products = invoice_products;\r\n        this.frmData.decimal_places_json = JSON.stringify(VChanggeMoneyService.getObjFormatterToColumn(this.formatter));\r\n      });\r\n      return true;\r\n    });\r\n  }\r\n\r\n  convertGridToInvoices(isview, isViewDaXuat?) {\r\n    const invoices = [];\r\n    let lstStudents = [];\r\n    if (!isview)\r\n      lstStudents = this.studentSelect.filter(p => p.status != \"DA_XUAT\");\r\n    else\r\n      lstStudents = this.studentSelect;\r\n    lstStudents.forEach((element, index) => {\r\n      const invoice = new InvoiceModel(1);\r\n      if (element.id) {\r\n        invoice.id = element.id;\r\n        invoice.status = element.status;\r\n      }\r\n      else\r\n        invoice.status = this.frmData.status;\r\n      invoice.invoice_series_order = index;\r\n      /// Thông tin hóa đơn\r\n      invoice.invoice_number = element.invoice_number;\r\n      if (isViewDaXuat) {\r\n        if (element.invoice_date)\r\n          invoice.invoice_date = element.invoice_date;\r\n        else\r\n          invoice.invoice_date = this.frmData.invoice_date;\r\n      }\r\n      else\r\n        invoice.invoice_date = this.frmData.invoice_date;\r\n      invoice.invoice_release_id = this.frmData.invoice_release_id;\r\n      if (this.frmData.batch_id)\r\n        invoice.batch_id = this.frmData.batch_id;\r\n      else {\r\n        if (element.batch_id)\r\n          invoice.batch_id = element.batch_id;\r\n        else\r\n          invoice.batch_id = null;\r\n      }\r\n      invoice.verify_code = element.verify_code;\r\n      invoice.template_id = this.frmData.template_id;\r\n      invoice.template_code = this.frmData.template_code;\r\n      invoice.invoice_series = this.frmData.invoice_series;\r\n      invoice.currency_code = this.frmData.currency_code;\r\n      invoice.currency_rate = this.frmData.currency_rate;\r\n      invoice.payment_method_name = this.frmData.payment_method_name;\r\n      invoice.payment_method_view_name = this.frmData.payment_method_view_name;\r\n      invoice.note_view_on_invoice = this.frmData.note_view_on_invoice;\r\n      // invoice.student_reduce_rate_code = this.frmData.student_reduce_rate_code;\r\n      invoice.study_year = this.frmData.study_year;\r\n      invoice.invoice_files = this.frmData.invoice_files;\r\n      invoice.decimal_places_json = this.frmData.decimal_places_json;\r\n      invoice.invoice_options = this.frmData.invoice_options;\r\n      invoice.amount = this.frmData.amount;\r\n      invoice.total_amount_vat = this.frmData.total_amount_vat;\r\n      invoice.amount_after_vat = this.frmData.amount_after_vat;\r\n      invoice.amount_after_vatx = this.frmData.amount_after_vatx;\r\n      invoice.amount_after_vat0 = this.frmData.amount_after_vat0;\r\n      invoice.amount_after_vat5 = this.frmData.amount_after_vat5;\r\n      invoice.amount_after_vat10 = this.frmData.amount_after_vat10;\r\n      invoice.amount_vat5 = this.frmData.amount_vat5;\r\n      invoice.amount_vat10 = this.frmData.amount_vat10;\r\n      invoice.amount_vat0 = this.frmData.amount_vat0;\r\n      invoice.total_amount_product_vatx = this.frmData.total_amount_product_vatx;\r\n      invoice.total_amount_product_vat0 = this.frmData.total_amount_product_vat0;\r\n      invoice.total_amount_product_vat5 = this.frmData.total_amount_product_vat5;\r\n      invoice.total_amount_product_vat10 = this.frmData.total_amount_product_vat10;\r\n      invoice.total_payment = this.frmData.total_payment;\r\n      invoice.total_payment_in_word = this.frmData.total_payment_in_word;\r\n      invoice.note = this.frmData.note;\r\n      //// Thông tin học sinh\r\n      invoice.student_id = element.student_id;\r\n      invoice.student_code = element.student_code;\r\n      invoice.student_name = element.student_name;\r\n      invoice.buyer_name = element.buyer_name;\r\n      invoice.buyer_mobile = element.buyer_mobile;\r\n      invoice.buyer_address = element.buyer_address;\r\n      invoice.buyer_email = element.buyer_email;\r\n      invoice.class_code = element.class_code;\r\n      invoice.class_name = element.class_name;\r\n      invoice.customer_name = element.customer_name;\r\n      invoice.customer_code = element.customer_code;\r\n      invoice.buyer_tax_code = element.buyer_tax_code;\r\n      invoice.bank_account_number = element.bank_account_number;\r\n      invoice.tax_authority_code = element.tax_authority_code;\r\n      invoice.send_department_status = element.send_department_status;\r\n      invoice.invoice_sign_date = element.invoice_sign_date;\r\n      invoice.student_reduce_rate_code = element.student_reduce_rate_code;\r\n      ///// Thông tin hàng hóa  id: Helper.makeid(),\r\n      // this.frmData.invoice_products.forEach(element => {\r\n      //   element.id = Helper.makeid();\r\n      // });\r\n      invoice.invoice_products = [];\r\n      this.frmData.invoice_products.forEach(val => invoice.invoice_products.push(Object.assign({}, val)));\r\n      invoice.invoice_products.forEach(element => {\r\n        element.id = Helper.makeid();\r\n      });\r\n      invoices.push(invoice);\r\n    });\r\n    this.invoicesArr = [];\r\n    this.invoicesArr = invoices;\r\n    this.invoicesArr = this.invoicesArr.sort((itemA, itemB) => {\r\n      return new Date(itemA.invoice_date).getTime() - new Date(itemB.invoice_date).getTime();\r\n    });\r\n    this.totalInvoice = this.invoicesArr.length;\r\n    this.countInvoice = 1;\r\n    return invoices;\r\n  }\r\n\r\n  dong() {\r\n    if (this.isHdGTGT) {\r\n      this.router.navigate(['/system/vat-invoice']);\r\n    } else {\r\n      this.router.navigate(['/system/sale-invoice']);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.ioSignature.unsubscribe();\r\n    this.routeSub.unsubscribe();\r\n    // this.socketService.close();\r\n  }\r\n\r\n  xemlydotuchoi() {\r\n    Library.showloading();\r\n    const sub = this.vatService.showToSendInvoice(this.frmData.id).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const initialState = {\r\n          invoice: rs.data.invoice,\r\n          listDM: this.listDM\r\n        };\r\n        this.bsModalRef = this.modalService.show(SendInvoicesComponent, {\r\n          class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n          keyboard: false\r\n        });\r\n        this.modalService.onHide.subscribe(() => {\r\n          if (this.bsModalRef.content.successSaveItem) {\r\n          }\r\n        });\r\n      } else {\r\n        Library.notify(rs.message, 'error', 5000);\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  onVatChange() {\r\n    const decimal_amount = this.getFormatterToNumber(this.formatter.thanh_tien);\r\n    const decimal_amount_vat = this.getFormatterToNumber(this.formatter.tien_thue);\r\n    if (this.frmData.vat_service_ticket === '5' || this.frmData.vat_service_ticket === '10') {\r\n      this.frmData.total_vat_service_ticket = this.roundNumber((Number.parseInt(this.frmData.vat_service_ticket) * this.frmData.money_service_ticket) / 100, decimal_amount_vat);\r\n    } else {\r\n      this.frmData.total_vat_service_ticket = 0;\r\n    }\r\n    this.frmData.total_service_ticket_with_vat = this.roundNumber(this.frmData.money_service_ticket + this.frmData.total_vat_service_ticket, decimal_amount);\r\n  }\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.checkDataFormChange(this.valueChange, this.frmData) || !this.checkStudentChange(this.jsonStudents, this.studentSelect)) {\r\n      return new Observable<boolean>(\r\n        (observer) => {\r\n          this.confirmService.confirm().subscribe(\r\n            value => {\r\n              switch (value) {\r\n                case 'yes':\r\n                  this.subData('GHI_TAM').then(value1 => {\r\n                    observer.next(true);\r\n                    observer.complete();\r\n                  });\r\n                  break;\r\n                case 'no':\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n                case 'cancel':\r\n                  observer.next(false);\r\n                  observer.complete();\r\n                  break;\r\n                default:\r\n                  observer.next(true);\r\n                  observer.complete();\r\n                  break;\r\n              }\r\n            }\r\n          );\r\n        });\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  onSubmit() {\r\n  }\r\n\r\n  keyDown(e: any) {\r\n    // setTimeout(() => {\r\n    if (e.event.key === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n    // }, 100);\r\n  }\r\n\r\n  renderDataStudent(students, isInv = false) {\r\n    let data = [];\r\n    if (isInv) {\r\n      students.forEach(element => {\r\n        const invoice = {};\r\n        invoice['student_id'] = element.student_id ? element.student_id : '';\r\n        invoice['invoice_number'] = element.invoice_number ? element.invoice_number : null;\r\n        invoice['invoice_date'] = element.invoice_date ? element.invoice_date : null;\r\n        invoice['id'] = element.id ? element.id : null;\r\n        invoice['invoice_series_order'] = element.invoice_series_order ? element.invoice_series_order : null;\r\n        invoice['student_code'] = element.student_code ? element.student_code : '';\r\n        invoice['status'] = element.status ? element.status : '';\r\n        invoice['student_name'] = element.student_name ? element.student_name : '';\r\n        invoice['buyer_name'] = element.buyer_name ? element.buyer_name : '';\r\n        invoice['buyer_mobile'] = element.buyer_mobile ? element.buyer_mobile : '';\r\n        invoice['buyer_address'] = element.buyer_address ? element.buyer_address : '';\r\n        invoice['buyer_email'] = element.buyer_email ? element.buyer_email : '';\r\n        invoice['student_reduce_rate_code'] = element.student_reduce_rate_code ? element.student_reduce_rate_code : '';\r\n        invoice['class_code'] = element.class_code ? element.class_code : '';\r\n        invoice['class_name'] = element.class_name ? element.class_name : '';\r\n        invoice['customer_name'] = element.customer_name ? element.customer_name : '';\r\n        invoice['customer_code'] = element.customer_code ? element.customer_code : '';\r\n        invoice['verify_code'] = element.verify_code ? element.verify_code : '';\r\n        invoice['buyer_tax_code'] = element.buyer_tax_code ? element.buyer_tax_code : '';\r\n        invoice['bank_account_number'] = element.bank_account_number ? element.bank_account_number : '';\r\n        invoice['tax_authority_code'] = element.tax_authority_code ? element.tax_authority_code : null;\r\n        invoice['send_department_status'] = element.send_department_status ? element.send_department_status : null;\r\n        invoice['invoice_sign_date'] = element.invoice_sign_date ? element.invoice_sign_date : null;\r\n        invoice['statusData'] = 'INVALID';\r\n        data.push(invoice);\r\n      });\r\n    }\r\n    else {\r\n      students.forEach(element => {\r\n        const invoice = {};\r\n        let objClass = this.select.class_codes.filter(p => p.code == element.class_code)[0];\r\n        if (objClass)\r\n          element.class_name = objClass.name;\r\n        else\r\n          element.class_name = '';\r\n        invoice['student_id'] = element.id ? element.id : '';\r\n        invoice['invoice_number'] = null;\r\n        invoice['invoice_date'] = null;\r\n        invoice['id'] = null;\r\n        invoice['student_code'] = element.code ? element.code : '';\r\n        invoice['student_name'] = element.name ? element.name : '';\r\n        invoice['buyer_name'] = element.buyer_name ? element.buyer_name : '';\r\n        invoice['buyer_mobile'] = element.mobile ? element.mobile : '';\r\n        invoice['buyer_address'] = element.address ? element.address : '';\r\n        invoice['buyer_email'] = element.email ? element.email : '';\r\n        invoice['student_reduce_rate_code'] = element.student_reduce_rate_code ? element.student_reduce_rate_code : '';\r\n        invoice['class_code'] = element.class_code ? element.class_code : '';\r\n        invoice['class_name'] = element.class_name ? element.class_name : '';\r\n        invoice['customer_name'] = element.customer_name ? element.customer_name : '';\r\n        invoice['customer_code'] = element.customer_code ? element.customer_code : '';\r\n        invoice['buyer_tax_code'] = element.buyer_tax_code ? element.buyer_tax_code : '';\r\n        invoice['bank_account_number'] = element.bank_account_number ? element.bank_account_number : '';\r\n        invoice['tax_authority_code'] = null;\r\n        invoice['send_department_status'] = null;\r\n        invoice['invoice_sign_date'] = null;\r\n        invoice['statusData'] = 'INVALID';\r\n        data.push(invoice);\r\n      });\r\n    }\r\n    this.getDataFromGird();\r\n    this.checkDuplicateCodeStudent(data);\r\n    this.onCheckDuplicate(null);\r\n  }\r\n\r\n  getDataFromGird() {\r\n    if (this.studentSelect.length > 0) {\r\n      this.studentSelect.forEach(row => {\r\n        this.dataFormGird.push(row);\r\n      });\r\n    }\r\n  }\r\n\r\n  checkDuplicateCodeStudent(data) {\r\n    if (data.length > 0) {\r\n      if (this.studentSelect.length > 0) {\r\n        data.forEach(item => {\r\n          if (!this.checkDuplicateArr(item)) {\r\n            this.studentSelect.push(item);\r\n          }\r\n        });\r\n      } else {\r\n        this.studentSelect = this.checkItemArrDuplicate(data);\r\n      }\r\n      let _index = 0;\r\n      let _index_view_order = 0;\r\n      this.studentSelect.forEach(item => {\r\n        item.order = ++_index;\r\n        item.view_order = ++_index_view_order;\r\n        if (item.invoice_date != null)\r\n          item.invoice_date = moment(item.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n      });\r\n      this.totalInvoice = this.studentSelect.length;\r\n    }\r\n  }\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return 'Hoàn thành: ' + percent + '%';\r\n  }\r\n  checkDuplicateArr(item) {\r\n    return this.studentSelect.some(itemStudent => item.student_code === itemStudent.student_code);\r\n  }\r\n  checkItemArrDuplicate(arr) {\r\n    return arr.reduce((previousValue, currentValue) => {\r\n      if (checkValue(currentValue)) {\r\n        return previousValue;\r\n      } else {\r\n        return previousValue.concat(currentValue);\r\n      }\r\n\r\n      function checkValue(value) {\r\n        return previousValue.some(item => {\r\n          return item.student_code === value.student_code;\r\n        });\r\n      }\r\n    }, []);\r\n  }\r\n\r\n  onStudentChange(item) {\r\n    if (item) {\r\n      const revenues = [];\r\n      const student_codes = item.student_code;\r\n      this.dataSource.items().filter(p => p.product_name).forEach(item => {\r\n        const revenue = {};\r\n        revenue['product_code'] = item.product_code;\r\n        revenue['school_fee_month'] = item.school_fee_month;\r\n        revenue['group_code'] = item.group_code;\r\n        revenues.push(revenue);\r\n      });\r\n      let data: any;\r\n      if (!this.isTT78) {\r\n        data = {\r\n          'student_codes': student_codes,\r\n          'revenues': revenues,\r\n          'study_year': this.frmData.study_year,\r\n          'with_products': true,\r\n          'invoice_release_id': this.invoicereleaseTempt.value\r\n        };\r\n      }\r\n      else {\r\n        data = {\r\n          'student_codes': student_codes,\r\n          'revenues': revenues,\r\n          'study_year': this.frmData.study_year,\r\n          'with_products': true,\r\n          'template_id': this.invoiceTemplateTT78.value\r\n        };\r\n      }\r\n      const sub = this.vatService.checkDuplicate(data).subscribe(rs => {\r\n        if (rs.status === 'success') {\r\n          if (rs.data.invoices.length > 0) {\r\n            const initialState = {\r\n              invoiceList: rs.data.invoices,\r\n              isReceipts: this.isReceipts\r\n            };\r\n            this.bsModalRef = this.modalService.show(InvoicesDuplicatesComponent, {\r\n              backdrop: 'static',\r\n              keyboard: false,\r\n              class: 'modal-lg full-modal',\r\n              initialState\r\n            });\r\n          }\r\n        } else {\r\n          Library.notify(rs.message, 'error', 5000);\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      let _lst = this.studentSelect.filter(p => p.statusData == 'ERROR_DUPLICATE');\r\n      this.totalInvoice = this.studentSelect.length;\r\n      this.totalDuplicate = _lst.length;\r\n    }\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.import_data);\r\n      this.refreshStudent();\r\n    }\r\n    if (r) {\r\n      this.showPopupImport = false;\r\n      this.errorImport = true;\r\n      this.isXuat = false;\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      if (this.subLuuChoXuat) {\r\n        this.subLuuChoXuat.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      this.isXuat = true;\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onCheckDuplicate(data) {\r\n    if (this.frmData.status === 'DA_XUAT' || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && this.frmData.send_department_status === 'KHONG_DU_DK_CAP_MA')\r\n      || (this.frmData.id != null && this.frmData.status === sEnum.statusInv.GhiTam && this.frmData.send_department_status === 'DA_GUI_CQT' && this.frmData.is_invoice_with_code)) {\r\n\r\n    }\r\n    else {\r\n      const revenues = [];\r\n      const student_codes = this.studentSelect.length === 0 ? '' : this.studentSelect.map((obj: any) => obj.student_code).join(';');\r\n      let arrayProduct = [];\r\n      if (data)\r\n        arrayProduct = data;\r\n      else\r\n        arrayProduct = this.dataSource.items();\r\n      arrayProduct.filter(p => p.product_name).forEach(item => {\r\n        const revenue = {};\r\n        revenue['product_code'] = item.product_code;\r\n        revenue['school_fee_month'] = item.school_fee_month;\r\n        revenue['group_code'] = item.group_code;\r\n        revenues.push(revenue);\r\n      });\r\n      if (revenues.length > 0 && student_codes) {\r\n        let data: any;\r\n        if (!this.isTT78) {\r\n          data = {\r\n            'student_codes': student_codes,\r\n            'revenues': revenues,\r\n            'study_year': this.frmData.study_year,\r\n            'with_products': false,\r\n            'invoice_release_id': this.invoicereleaseTempt.value\r\n          };\r\n        }\r\n        else {\r\n          data = {\r\n            'student_codes': student_codes,\r\n            'revenues': revenues,\r\n            'study_year': this.frmData.study_year,\r\n            'with_products': false,\r\n            'template_id': this.invoiceTemplateTT78.value\r\n          };\r\n        }\r\n        const sub = this.vatService.checkDuplicate(data).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            if (rs.data.invoices.length > 0) {\r\n              this.studentSelect.forEach(student => {\r\n                let _obj = rs.data.invoices.filter(p => p.student_code == student.student_code)[0];\r\n                if (_obj) {\r\n                  student.statusData = 'ERROR_DUPLICATE';\r\n                }\r\n                else {\r\n                  if (student.student_reduce_rate_code != this.frmData.student_reduce_rate_code)\r\n                    student.statusData = 'OTHER_REDUCE';\r\n                  else\r\n                    student.statusData = 'INVALID';\r\n                }\r\n              });\r\n            }\r\n            else {\r\n              this.studentSelect.forEach(student => {\r\n                if (student.student_reduce_rate_code != this.frmData.student_reduce_rate_code)\r\n                  student.statusData = 'OTHER_REDUCE';\r\n                else\r\n                  student.statusData = 'INVALID';\r\n              });\r\n            }\r\n            if (this.studentGrid.dataGrid.instance)\r\n              this.studentGrid.dataGrid.instance.refresh();\r\n            this.totalDuplicate = rs.data.total;\r\n          } else {\r\n            Library.notify(rs.message, 'error', 5000);\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      } else if (revenues.length === 0 && student_codes) {\r\n        this.studentSelect.forEach(student => {\r\n          if (student.student_reduce_rate_code != this.frmData.student_reduce_rate_code)\r\n            student.statusData = 'OTHER_REDUCE';\r\n          else\r\n            student.statusData = 'INVALID';\r\n        });\r\n        if (this.studentGrid.dataGrid.instance)\r\n          this.studentGrid.dataGrid.instance.refresh();\r\n        this.totalDuplicate = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  showInvoiceDuplicate() {\r\n    const revenues = [];\r\n    const student_codes = this.studentSelect.length === 0 ? '' : this.studentSelect.map((obj: any) => obj.student_code).join(';');\r\n    this.dataSource.items().filter(p => p.product_name).forEach(item => {\r\n      const revenue = {};\r\n      revenue['product_code'] = item.product_code;\r\n      revenue['school_fee_month'] = item.school_fee_month;\r\n      revenue['group_code'] = item.group_code;\r\n      revenues.push(revenue);\r\n    });\r\n    let data: any;\r\n    if (!this.isTT78) {\r\n      data = {\r\n        'student_codes': student_codes,\r\n        'revenues': revenues,\r\n        'study_year': this.frmData.study_year,\r\n        'with_products': true,\r\n        'invoice_release_id': this.invoicereleaseTempt.value\r\n      };\r\n    }\r\n    else {\r\n      data = {\r\n        'student_codes': student_codes,\r\n        'revenues': revenues,\r\n        'study_year': this.frmData.study_year,\r\n        'with_products': true,\r\n        'template_id': this.invoiceTemplateTT78.value\r\n      };\r\n    }\r\n\r\n    const sub = this.vatService.checkDuplicate(data).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        if (rs.data.invoices.length > 0) {\r\n          const initialState = {\r\n            invoiceList: rs.data.invoices,\r\n            isReceipts: this.isReceipts\r\n          };\r\n          this.bsModalRef = this.modalService.show(InvoicesDuplicatesComponent, {\r\n            backdrop: 'static',\r\n            keyboard: false,\r\n            class: 'modal-lg full-modal',\r\n            initialState\r\n          });\r\n        }\r\n      } else {\r\n        Library.notify(rs.message, 'error', 5000);\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  filterStudentDuplicate() {\r\n    this.studentSelect = this.studentSelect.filter(item => item.statusData !== 'ERROR_DUPLICATE');\r\n    let _index = 0;\r\n    let _index_view_order = 0;\r\n    this.studentSelect.forEach(item => {\r\n      item.order = ++_index;\r\n      item.view_order = ++_index_view_order;\r\n      if (item.invoice_date != null)\r\n        item.invoice_date = moment(item.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n    });\r\n    this.totalInvoice = this.studentSelect.length;\r\n    this.totalDuplicate = 0;\r\n  }\r\n  checkInvoiceDeleted() {\r\n    let arrIds = [];\r\n    if (this.arrayIdEdit.length > 0) {\r\n      this.arrayIdEdit.forEach(element => {\r\n        let arrInvExists = this.invoicesArr.filter(p => p.id);\r\n        if (arrInvExists && arrInvExists.length > 0) {\r\n          let obj = arrInvExists.filter(p => p.id == element)[0];\r\n          if (!obj) {\r\n            arrIds.push(element);\r\n          }\r\n        }\r\n        else\r\n          arrIds.push(element);\r\n      });\r\n      if (arrIds.length > 0) {\r\n        let strIds = arrIds.join(',');\r\n        const object = {\r\n          'invoiceIds': strIds,\r\n          'batchId': this.frmData.batch_id,\r\n        };\r\n        return this.vatService.deleteInvoiceWithBatch(object).toPromise().then(\r\n          result => {\r\n            if (result.status == \"success\") {\r\n              if (result.data == \"delete_batch\") {\r\n                this.invoicesArr.forEach(inv => {\r\n                  inv.batch_id = null;\r\n                });\r\n              }\r\n              return true;\r\n            } else {\r\n              Library.notify(result.message, 'error', 5000);\r\n              return false;\r\n            }\r\n          }\r\n        )\r\n      }\r\n      else\r\n        return true;\r\n    }\r\n    else {\r\n      return true;\r\n    }\r\n  }\r\n  createFormTypeBase64(isPreview) {\r\n    let raw_file_Decode = Base64.decode(this.template.raw_file);\r\n    let raw_file_Parse = JSON.parse(raw_file_Decode);\r\n    let htmlBefore = raw_file_Parse.html + \"</html>\";\r\n    let watermark_image_default = raw_file_Parse.watermark_image_default;\r\n    let watermark_image = raw_file_Parse.watermark_image;\r\n    let countRow = this.template.number_of_row;\r\n    let arrayHtml = \"\";\r\n    let heightRow = \"\";\r\n    switch (this.template.paper_size) {\r\n      case sEnum.paperSizes.A4Doc:\r\n        heightRow = \"25px;\";\r\n        break;\r\n      case sEnum.paperSizes.A4Ngang:\r\n        heightRow = \"25px;\";\r\n        break;\r\n      case sEnum.paperSizes.A5Ngang:\r\n        heightRow = \"18px;\";\r\n        this.reportHeight = \"500px\";\r\n        break;\r\n      default:\r\n        heightRow = \"25px;\";\r\n        break;\r\n    }\r\n    let _index = 0;\r\n    this.invoicesArr.forEach(item => {\r\n      console.log('item: ',item);\r\n      this.iframe = document.getElementById('preview-iframe-student');\r\n      this.iframe.contentDocument.open(\"text/html\", \"replace\");\r\n      this.iframe.contentDocument.write(htmlBefore);\r\n      this.iframe.contentDocument.close();\r\n\r\n      _index++;\r\n      $(\"#preview-iframe-student\").contents().find(\".container\").css({\r\n        'padding-top': '10px',\r\n        'padding-bottom': '30px'\r\n      })\r\n\r\n      //////// Thêm ảnh  nền\r\n      $(\"#preview-iframe-student\").contents().find(\".bg-template-parent\").css('display', 'block');\r\n      $(\"#preview-iframe-student\").contents().find(\".bg-template-parent\").find(\".bg-template\").css('background-image', 'url(data:image/' + \"jpg\" + ';base64,' + watermark_image + ')').css('display', 'block');\r\n      //////// Footer\r\n      $(\"#preview-iframe-student\").contents().find(\".report-footer\").css({ display: 'block' });\r\n      /////Fill dữ liệu vào hóa đơn\r\n      // Ngày hóa đơn\r\n      let a: any = moment();\r\n      let invDate: any;\r\n      if (item.invoice_date)\r\n        invDate = moment(item.invoice_date);\r\n      else\r\n        invDate = moment();\r\n      let yearInv = invDate.year();\r\n      let monthInv = invDate.month() < 12 ? invDate.month() + 1 : 1\r\n      let dayInv = invDate.date();\r\n      if ($(\"#preview-iframe-student\").contents().find(\".NgayHD\")[0])\r\n        $('#preview-iframe-student').contents().find(\".NgayHD\").html(dayInv);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".ThangHD\")[0])\r\n        $('#preview-iframe-student').contents().find(\".ThangHD\").html(monthInv);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".NamHD\")[0])\r\n        $('#preview-iframe-student').contents().find(\".NamHD\").html(yearInv);\r\n      /// Ẩn thông tin chữ ký số\r\n      if (isPreview) {\r\n        if ($(\"#preview-iframe-student\").contents().find(\".efy-esign-none\")[0])\r\n          $('#preview-iframe-student').contents().find(\".efy-esign-none\").css('display', 'none');\r\n\r\n        if ($(\"#preview-iframe-student\").contents().find(\".lblSignValid\")[0])\r\n          $('#preview-iframe-student').contents().find(\".lblSignValid\").css('display', 'none');\r\n\r\n        if ($(\"#preview-iframe-student\").contents().find(\".lblKyBoi\")[0])\r\n          $('#preview-iframe-student').contents().find(\".lblKyBoi\").css('display', 'none');\r\n\r\n        if ($(\"#preview-iframe-student\").contents().find(\".lblKyNgay\")[0])\r\n          $('#preview-iframe-student').contents().find(\".lblKyNgay\").css('display', 'none');\r\n\r\n        if ($(\"#preview-iframe-student\").contents().find(\".seler-sign-date\")[0])\r\n          $('#preview-iframe-student').contents().find(\".seler-sign-date\").css('display', 'none');\r\n\r\n        if ($(\"#preview-iframe-student\").contents().find(\".seler-sign-name\")[0])\r\n          $('#preview-iframe-student').contents().find(\".seler-sign-name\").css('display', 'none');\r\n      }\r\n      else {\r\n        if (this.configs.system_parameter.display_time_sign_invoice) {\r\n          let singDate = invDate.format('DD/MM/YYYY HH:mm:ss');\r\n          if (item.invoice_sign_date)\r\n            singDate = moment(item.invoice_sign_date).format('DD/MM/YYYY HH:mm:ss');\r\n          if ($(\"#preview-iframe-student\").contents().find(\".seler-sign-date\")[0])\r\n            $('#preview-iframe-student').contents().find(\".seler-sign-date\").html(singDate);\r\n          if ($(\"#preview-iframe-student\").contents().find(\".seler-sign-name\")[0])\r\n            $('#preview-iframe-student').contents().find(\".seler-sign-name\").html(this.currentUser.account.name);\r\n        }\r\n        else {\r\n          let singDate = invDate.format('DD/MM/YYYY');\r\n          if (item.invoice_sign_date)\r\n            singDate = moment(item.invoice_sign_date).format('DD/MM/YYYY');\r\n          if ($(\"#preview-iframe-student\").contents().find(\".seler-sign-date\")[0])\r\n            $('#preview-iframe-student').contents().find(\".seler-sign-date\").html(singDate);\r\n          if ($(\"#preview-iframe-student\").contents().find(\".seler-sign-name\")[0])\r\n            $('#preview-iframe-student').contents().find(\".seler-sign-name\").html(this.currentUser.account.name);\r\n        }\r\n      }\r\n\r\n\r\n\r\n\r\n      ////////Thông tin mẫu số, ký hiệu ,số hóa đơn\r\n      if ($(\"#preview-iframe-student\").contents().find(\".number-form\")[0])\r\n        $('#preview-iframe-student').contents().find(\".number-form\").html(this.template.template_code);\r\n      if ($(\"#preview-iframe-student\").contents().find(\".symbol\")[0])\r\n        $('#preview-iframe-student').contents().find(\".symbol\").html(this.template.invoice_series);\r\n      if ($('#preview-iframe-student').contents().find(\".symbol-number-form\")[0])\r\n        $('#preview-iframe-student').contents().find(\".symbol-number-form\").html(this.template.template_code + this.template.invoice_series.toUpperCase());\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".invoice-number\")[0])\r\n        $('#preview-iframe-student').contents().find(\".invoice-number\").html(item.invoice_number);\r\n      /* Mã cơ quan thuế */\r\n      if (this.template.is_decree_new) {\r\n        if (this.template.is_invoice_with_code) {\r\n          $('#preview-iframe-student').contents().find(\".tax_authority_code\").css('display', 'block');\r\n          if ($(\"#preview-iframe-student\").contents().find(\".ma-co-quan-thue\")[0]) {\r\n            $('#preview-iframe-student').contents().find(\".ma-co-quan-thue\").html(item.tax_authority_code);\r\n            if (item.send_department_status == \"KHONG_DU_DK_CAP_MA\")\r\n              $('#preview-iframe-student').contents().find(\".ma-co-quan-thue\").html('Không đủ điều kiện cấp mã');\r\n          }\r\n        }\r\n        else\r\n          $('#preview-iframe-student').contents().find(\".tax_authority_code\").css('display', 'none');\r\n      }\r\n      /////////Tên học sinh\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-9c103984-576d-c322-7843-bdacf97bd888\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-9c103984-576d-c322-7843-bdacf97bd888\").html(item.student_name);\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-9c103984-576d-c322-7843-bdacf97ac189\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-9c103984-576d-c322-7843-bdacf97ac189\").html(item.student_name);\r\n      ///// mã số thuế bên mua\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-8d903984-576d-c322-7843-bdacf97ac100\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-8d903984-576d-c322-7843-bdacf97ac100\").html(item.buyer_tax_code);\r\n      //////// Địa chỉ bên mua\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-7c103984-576d-c322-7843-bdacf97ac189\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-7c103984-576d-c322-7843-bdacf97ac189\").html(item.buyer_address);\r\n      /////// Hình thức thanh toán\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-3a9f145a-549a-01ea-e507-cc7b0ab28a69\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-3a9f145a-549a-01ea-e507-cc7b0ab28a69\").html(item.payment_method_view_name);\r\n      ////// Tài khoản bên mua\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-d0f2a367-8ca8-006a-eb0c-cf3261f00a1c\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-d0f2a367-8ca8-006a-eb0c-cf3261f00a1c\").html(item.bank_account_number);\r\n      /////// Ghi chú trên hóa đơn\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00a1c\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00a1c\").html(item.note);\r\n      /////// Tên đơn vị \r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-8c103984-576d-c322-7843-bdacf97ac189\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-8c103984-576d-c322-7843-bdacf97ac189\").html(item.customer_name);\r\n      ////// Lớp\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-7d873098-576d-c322-7843-bdacf97ac100\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-7d873098-576d-c322-7843-bdacf97ac100\").html(item.class_name);\r\n      /// Mã tra cứu\r\n      if ($(\"#preview-iframe-student\").contents().find(\".matracuu\")[0])\r\n        $('#preview-iframe-student').contents().find(\".matracuu\").html(item.verify_code);\r\n      /* Loại tiền */\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00999\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-f0f2a367-8ca8-006a-eb0c-cf3261f00999\").html(item.currency_code);\r\n      // Các trường mở rộng\r\n      if (item.invoice_options && item.invoice_options.length > 0) {\r\n        item.invoice_options.forEach(option => {\r\n          if ($(\"#preview-iframe-student\").contents().find(\".value-\" + option.code)[0]) {\r\n            let value = option.value;\r\n            if (option.data_type == 'soluong' && option.value)\r\n              value = option.value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n            if (option.data_type == 'ngay' && option.value)\r\n              value = moment(option.value).format('DD/MM/YYYY');\r\n\r\n            $('#preview-iframe-student').contents().find(\".value-\" + option.code).html(value);\r\n          }\r\n        })\r\n      }\r\n\r\n      $('#preview-iframe-student').contents().find('.report-container').css({ height: this.reportHeight });\r\n      $('#preview-iframe-student').contents().find('.detail').css({ display: 'block' });\r\n      ////////Fill thông tin hàng hóa\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-8l873098-576d-c322-7843-bdacf97ac100\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-8l873098-576d-c322-7843-bdacf97ac100\").html(item.invoice_products[0].product_name);\r\n      let format;\r\n      let displayInt = this.formatter.display_int ? this.formatter.display_int : (this.configs.display_int ? this.configs.display_int : false);\r\n      format = this.configs.decpoint_is_dot ? { decimal: \".\", thousands: \",\", display_int: displayInt } : { decimal: \",\", thousands: \".\", display_int: displayInt };\r\n\r\n      let decimal_quatity = VChanggeMoneyService.getFormatterToNumber(this.formatter.so_luong);\r\n      // let decimal_number_real_export = VChanggeMoneyService.getFormatterToNumber(formatter.so_luong);\r\n      // let decimal_number_real_import = VChanggeMoneyService.getFormatterToNumber(formatter.so_luong);\r\n\r\n      let decimal_price = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia);\r\n      let decimal_price_nte = VChanggeMoneyService.getFormatterToNumber(this.formatter.don_gia_nte);\r\n      let decimal_amount = VChanggeMoneyService.getFormatterToNumber(this.formatter.thanh_tien);\r\n      let decimal_amount_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tien_thue);\r\n      let decimal_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.vat);\r\n      let decimal_amount_after_vat = VChanggeMoneyService.getFormatterToNumber(this.formatter.tong_tien);\r\n      if (_index == 1) {\r\n\r\n        this.trRow = \"\";\r\n        item.invoice_products.forEach(product => {\r\n          this.trRow += '<tr class=\"detail-data font-color-data text-left\">';\r\n          var ths = $(\"#preview-iframe-student\").contents().find(\"#tbDetail\").find(\"th\");\r\n          for (var j = 0; j < ths.length; j++) {\r\n            let className = ths[j].className;\r\n            switch (className) {\r\n              case \"columnSTT\":\r\n                if ($(\"#preview-iframe-student\").contents().find(\".columnSTT\")[0])\r\n                  this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center\"><span class=\"valueSTT\">' + product.view_order + '</span></td>';\r\n                break;\r\n\r\n              case \"name-1a783984-576d-c322-7843-bdacf97ac189\":\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center name-1a783984-576d-c322-7843-bdacf97ac189 columnMaHangHoa\"><span class=\"valueMaHangHoa\">' + product.product_code + '</span></td>';\r\n                break;\r\n\r\n              case \"columnTenHangHoa\":\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\"><span class=\"valueTenHangHoa\">' + product.product_name + '</span></td>';\r\n                break;\r\n\r\n              case \"name-2a783984-576d-c322-7843-bdacf97ac189\":\r\n                let lot = product.lot ? product.lot : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"name-2a783984-576d-c322-7843-bdacf97ac189 columnSoLo\"><span class=\"valueSolo\">' + lot + '</span> </td>';\r\n                break;\r\n\r\n              case \"name-3a783984-576d-c322-7843-bdacf97ac189\":\r\n                let expiration_date = product.expiration_date ? product.expiration_date : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"name-3a783984-576d-c322-7843-bdacf97ac189 columnHanDung\"><span class=\"valueHanDung\">' + expiration_date + '</span> </td>';\r\n                break;\r\n\r\n              case \"name-4a783984-576d-c322-7843-bdacf97ac189\":\r\n                let country_name = product.country_name ? product.country_name : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"name-4a783984-576d-c322-7843-bdacf97ac189 columnNuocSanXuat\"><span class=\"valueNuocSx\">' + country_name + '</span> </td>';\r\n                break;\r\n\r\n              case \"columnDonViTinh\":\r\n                let unit_name = product.unit_name ? product.unit_name : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center\"><span class=\"valueDonViTinh\">' + unit_name + '</span></td>';\r\n                break;\r\n\r\n              case \"columnSoLuong\":\r\n                let quantity = product.quantity ? Helper.formatMoney(product.quantity, decimal_quatity, format) : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number-center\"><span class=\"valueSoLuong\">' + quantity + '</span></td>';\r\n                break;\r\n\r\n              case \"columnDonGia\":\r\n                let price = product.price ? Helper.formatMoney(product.price, decimal_price, format) : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueDonGia\">' + price + '</span></td>';\r\n                break;\r\n\r\n              case \"columnThueSuatGTGT\":\r\n                let vat = product.vat ? product.vat : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number-center\"><span class=\"valueThueSuatGTGT\">' + vat + '</span></td>';\r\n                break;\r\n\r\n              case \"columnTienThueGTGT\":\r\n                let amount_vat = product.amount_vat ? product.amount_vat : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueTienThueGTGT\">' + amount_vat + '</span></td>';\r\n                break;\r\n\r\n              case \"columnTienCK\":\r\n                let amount_discount = product.amount_discount ? product.amount_discount : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueTienCK\">' + amount_discount + '</span></td>';\r\n                break;\r\n\r\n              case \"columnThanhTien\":\r\n                let amount = product.amount ? Helper.formatMoney(product.amount, decimal_amount, format) : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueThanhTien\">' + amount + '</span></td>';\r\n                break;\r\n\r\n              case \"columnThanhTienSauThue\":\r\n                let amount_after_vat = product.amount_after_vat ? product.amount_after_vat : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueThanhTienSauThue\">' + amount_after_vat + '</span></td>';\r\n                break;\r\n\r\n              case \"columnThucXuat\":\r\n                let number_real_export = product.number_real_export ? product.number_real_export : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number-center\"><span class=\"valueThucXuat\">' + number_real_export + '</span></td>';\r\n                break;\r\n\r\n              case \"columnThucNhap\":\r\n                let number_real_import = product.number_real_import ? product.number_real_import : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number-center\"><span class=\"valueThucNhap\">' + number_real_import + '</span></td>';\r\n                break;\r\n\r\n              case \"columnThanhTienChuaCK\":\r\n                let amount_without_discount = product.amount_without_discount ? product.amount_without_discount : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueThanhTienChuaCK\">' + amount_without_discount + '</span></td>';\r\n                break;\r\n\r\n              case \"columnSoMay\":\r\n                let engine_number = product.engine_number ? product.engine_number : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center\"><span class=\"valueSoMay\">' + engine_number + '</span></td>';\r\n                break;\r\n\r\n              case \"columnSoKhung\":\r\n                let chassis_number = product.chassis_number ? product.chassis_number : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"center\"><span class=\"valueSoKhung\">' + chassis_number + '</span></td>';\r\n                break;\r\n\r\n              case \"columnThueKhac\":\r\n                let other_tax = product.other_tax ? product.other_tax : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valueThueKhac\">' + other_tax + '</span></td>';\r\n                break;\r\n\r\n              case \"columnPhiKhac\":\r\n                let other_charge = product.other_charge ? product.other_charge : \"\";\r\n                this.trRow += '<td style=\"height: \"' + heightRow + '\" class=\"number\"><span class=\"valuePhiKhac\">' + other_charge + '</span></td>';\r\n                break;\r\n            }\r\n          }\r\n          this.trRow += '</tr>';\r\n        });\r\n        if (item.invoice_products.length < countRow) {\r\n          let count = countRow - item.invoice_products.length;\r\n          this.createRowData(count);\r\n        }\r\n      }\r\n      $(\"#preview-iframe-student\").contents().find(\".tbody-content-detail\").append($(this.trRow));\r\n\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_HH_DV_GTGT_KHONG_THUE\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_HH_DV_GTGT_KHONG_THUE\").html(item.total_amount_product_vatx);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_HH_DV_GTGT0\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_HH_DV_GTGT0\").html(item.total_amount_product_vat0);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_HH_DV_GTGT5\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_HH_DV_GTGT5\").html(item.total_amount_product_vat5);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_HH_DV_GTGT10\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_HH_DV_GTGT10\").html(item.total_amount_product_vat10);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TONG_TIEN_HH_DV_GTGT\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TONG_TIEN_HH_DV_GTGT\").html(item.amount);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_THUE_GTGT\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_THUE_GTGT\").html(this.template.symbol_no_vat);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_THUE_GTGT0\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_THUE_GTGT0\").html(item.amount_vat0);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_THUE_GTGT5\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_THUE_GTGT5\").html(item.amount_vat5);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_THUE_GTGT10\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_THUE_GTGT10\").html(item.amount_vat10);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TONG_TIEN_THUE_GTGT\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TONG_TIEN_THUE_GTGT\").html(item.total_amount_vat);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_THANH_TOAN_KHONG_THUE\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_THANH_TOAN_KHONG_THUE\").html(item.amount_after_vatx);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_THANH_TOAN_GTGT0\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_THANH_TOAN_GTGT0\").html(item.amount_after_vat0);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_THANH_TOAN_GTGT5\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_THANH_TOAN_GTGT5\").html(item.amount_after_vat5);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TIEN_THANH_TOAN_GTGT10\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TIEN_THANH_TOAN_GTGT10\").html(item.amount_after_vat10);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".TONG_TIEN_THANH_TOAN\")[0])\r\n        $('#preview-iframe-student').contents().find(\".TONG_TIEN_THANH_TOAN\").html(item.amount_after_vat);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".total-amount-product-without-vat\")[0])\r\n        $('#preview-iframe-student').contents().find(\".total-amount-product-without-vat\").html(Helper.formatMoney(item.amount, decimal_amount, format));\r\n\r\n      if (item.invoice_products[0].vat && item.invoice_products[0].vat != -1) {\r\n        if ($(\"#preview-iframe-student\").contents().find(\".vat-percentage\")[0])\r\n          $('#preview-iframe-student').contents().find(\".vat-percentage\").html(item.invoice_products[0].vat + \" %\");\r\n      }\r\n      else\r\n        if ($(\"#preview-iframe-student\").contents().find(\".vat-percentage\")[0])\r\n          $('#preview-iframe-student').contents().find(\".vat-percentage\").html(this.template.symbol_no_vat);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".total-amount-vat\")[0])\r\n        $('#preview-iframe-student').contents().find(\".total-amount-vat\").html(Helper.formatMoney(item.total_amount_vat, decimal_amount_vat, format));\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".total-payment\")[0])\r\n        $('#preview-iframe-student').contents().find(\".total-payment\").html(Helper.formatMoney(item.total_payment, decimal_amount_after_vat, format));\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".value-1h883984-576d-c322-7843-bdacf97ac189\")[0])\r\n        $('#preview-iframe-student').contents().find(\".value-1h883984-576d-c322-7843-bdacf97ac189\").html(item.total_payment_in_word);\r\n\r\n      if ($(\"#preview-iframe-student\").contents().find(\".total-payment-word\")[0])\r\n        $('#preview-iframe-student').contents().find(\".total-payment-word\").html(item.total_payment_in_word);\r\n\r\n      let width = $(\"#preview-iframe-student\").contents().find(\".container\").width();\r\n      let height = parseInt($(\"#preview-iframe-student\").contents().find(\".container\").height()) + 41;\r\n      ////// Thêm ảnh khung\r\n      $(\"#preview-iframe-student\").contents().find(\".container\").css({\r\n        'background-image': 'url(data:image/' + \"jpg\" + ';base64,' + watermark_image_default + ')',\r\n        'display': 'block',\r\n        'background-size': width + 'px ' + height + 'px'\r\n      })\r\n      ///The End\r\n\r\n      let htmlAfter = `<html style=\"margin: auto;\" xmlns:inv=\"http://laphoadon.gdt.gov.vn/2014/09/invoicexml/v1\" xmlns:user=\"http://mycompany.com/mynamespace\"\r\n          xmlns:sign=\"http://www.w3.org/2000/09/xmldsig#\">`+ this.iframe.contentDocument.documentElement.innerHTML + \"</html></br></br></br>\";\r\n      arrayHtml += htmlAfter;\r\n    });\r\n    this.arrHtml = arrayHtml;\r\n  }\r\n  getTemplate() {\r\n    this.templateService.show(this.invoicereleaseTempt.template_id).toPromise().then(rs => {\r\n      if (rs.status == \"success\") {\r\n        this.template = rs.data.template;\r\n        this.onCheckDuplicate(null);\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n  }\r\n  getTemplateTT78() {\r\n    this.templateService.show(this.invoiceTemplateTT78.value).toPromise().then(rs => {\r\n      if (rs.status == \"success\") {\r\n        this.template = rs.data.template;\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n  }\r\n  createRowData(countRow) {\r\n    for (let i = 0; i < countRow; i++) {\r\n      this.trRow += '<tr class=\"detail-data font-color-data text-left\">';\r\n      var ths = $(\"#preview-iframe-student\").contents().find(\"#tbDetail\").find(\"th\");\r\n      for (var j = 0; j < ths.length; j++) {\r\n        let className = ths[j].className;\r\n        let column = this.arrColumns.filter(p => p.name == className)[0];\r\n        if (column) {\r\n          let valueColumn = column.value;\r\n          let height = column.height;\r\n          if (this.template.paper_size == sEnum.paperSizes.A5Ngang)\r\n            height = \"18px\";\r\n          if (i > 0)\r\n            valueColumn = '';\r\n          if ($(\"#preview-iframe-student\").contents().find(\".\" + column.name)[0])\r\n            this.trRow += '<td style=\"height: ' + height + ';\"' + ' class=\"' + column.class + '\"><span class=\"' + valueColumn + '\"></span></td>';\r\n        }\r\n      }\r\n      this.trRow += '</tr>';\r\n    }\r\n  }\r\n  refreshStudent() {\r\n    this.invoicesArr.forEach(invoice => {\r\n      this.studentSelect.forEach(element => {\r\n        if (element.student_id === invoice.student_id) {\r\n          element.id = invoice.id;\r\n          element.invoice_number = invoice.invoice_number;\r\n          element.invoice_date = invoice.invoice_date;\r\n          element.batch_id = invoice.batch_id;\r\n          element.status = invoice.status;\r\n          element.verify_code = invoice.verify_code;\r\n        }\r\n      });\r\n    });\r\n  }\r\n  checkNumberRelease() {\r\n    if (!this.isTT78) {\r\n      return this.notifyService.show(this.invoicereleaseTempt.value).toPromise().then(rs => {\r\n        if (rs.status == \"success\") {\r\n          let soton = parseInt(rs.data.invoice_release.amount) - parseInt(rs.data.invoice_release.used_amount);\r\n          if (soton > 0) {\r\n            this.countRelease = soton;\r\n            return true;\r\n          }\r\n          else {\r\n            if (this.totalCountWaitSign > 0)\r\n              return true;\r\n            else\r\n              return false;\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      });\r\n    }\r\n    else\r\n      return true;\r\n  }\r\n  refreshBatchIds() {\r\n    const frmDataCompare = JSON.parse(this.valueChange);\r\n    frmDataCompare.status = this.frmData.status;\r\n    // frmDataCompare.invoice_date = this.frmData.invoice_date;\r\n    let jsonTempt = JSON.stringify(frmDataCompare);\r\n    if (this.isChildInvoices && !this.checkDataFormChange(jsonTempt, this.frmData)) {\r\n      this.invoicesArr.forEach(item => {\r\n        item.batch_old_id = item.batch_id;\r\n        item.batch_id = null;\r\n      });\r\n    }\r\n  }\r\n  loadInvoiceProduct(lstInvoiceProduct) {\r\n    const invoice_products = [];\r\n    lstInvoiceProduct.forEach((item, index) => {\r\n      if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n        item.row_content = item.product_name;\r\n        invoice_products.push(item);\r\n        if (item.is_transport_number) {\r\n          this.frmData.transport_number = item.product_name;\r\n        }\r\n      }\r\n    });\r\n    this.frmData.invoice_products = invoice_products;\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  xemhoadonPDF(rs) {\r\n    //Xem hóa đơn từ server\r\n    if (this.configs.system_parameter.display_template_from_server) {\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      const pdf_file = rs.data.invoice.pdf_file;\r\n      const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n      const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n      win.resizeTo(screen.availWidth, screen.availHeight);\r\n      win.focus();\r\n      this.spinner.hide();\r\n    }\r\n    else {\r\n      /* Xem hóa đơn từ Client */\r\n      let json_data = rs.data.invoice.json_data;\r\n      let appCode = \"REPX\";\r\n      if (rs.data.invoice.is_html_template)\r\n        appCode = \"HTML\";\r\n      this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC\");\r\n    }\r\n  }\r\n  async viewInvoice(content, typeView, hinhthucxuat, invoice_date) {\r\n    if (typeView == \"XEM_TRUOC\") {\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      const pdf_file = content;\r\n      const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n      const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n      win.resizeTo(screen.availWidth, screen.availHeight);\r\n      win.focus();\r\n      this.spinner.hide();\r\n    }\r\n    else if (typeView == \"XEM_TRUOC_KHI_XUAT\") {\r\n      let trang_thai = '';\r\n      if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n        trang_thai = this._translate.THONG_TIN.xuat_va_ky;\r\n      } else {\r\n        trang_thai = this._translate.THONG_TIN.xuat_cho_ky;\r\n      }\r\n      let du_lieu:any = {};\r\n      du_lieu['configs'] = sEnum.cauhinhxemmau.hoadonHSClient;\r\n      du_lieu['file_content'] = content;\r\n      let content_invoice = {\r\n        du_lieu: du_lieu,\r\n        ngay_hoa_don: invoice_date,\r\n        trang_thai: trang_thai,\r\n        tong_tien: \"\",\r\n        title_invoice_type: this._translate.THONG_TIN.ban_du_thao_hoa_don.toUpperCase(),\r\n        note_warn: this._translate.THONG_TIN.luu_y_truoc_khi_xuat,\r\n        is_display_img_note: true,\r\n        text_ngay_hoa_don: this._translate.THONG_TIN.ngay_hoa_don,\r\n        text_tong_tien: this._translate.THONG_TIN.tong_tien,\r\n        question_again: this._translate.THONG_TIN.ban_co_chac_chan_xuat_hoa_don_khong\r\n      }\r\n      const initialState = {\r\n        content_invoice: content_invoice,\r\n      };\r\n\r\n      this.bsModalRef = this.customeModalService.show(PreviewInvoiceComponent, {\r\n        backdrop: 'static',\r\n        keyboard: false,\r\n        class: 'modal-xl prv-s-invoice v-s-invoice',\r\n        initialState\r\n      });\r\n\r\n      const subModal = this.customeModalService.onHide.subscribe(() => {\r\n        if (this.bsModalRef.content.successSaveItem == sEnum.actionHander.DongY) {\r\n          this.confirmCheckPreview = true;\r\n            if (hinhthucxuat === sEnum.statusInv.TrinhKy) {\r\n              this.eSubmit(sEnum.statusInv.TrinhKy);\r\n            } else {\r\n              this.eSubmit('XUAT');\r\n            }\r\n        }\r\n        subModal.unsubscribe();\r\n      });\r\n\r\n\r\n      // const pdf_file = content;\r\n      // const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n      // this.windowPreviewBeforeSubmit = window.open(objectUrl, 'name', `width=${screen.availWidth}, height=${screen.availHeight}`);\r\n      // this.windowPreviewBeforeSubmit.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      // this.windowPreviewBeforeSubmit.blur();\r\n\r\n      // const timer = setInterval(() => {\r\n      //   if (this.windowPreviewBeforeSubmit.closed) {\r\n      //     clearInterval(timer);\r\n      //     const isCheck = Helper.getCookie('CK_CFM_I');\r\n      //     this.windowPreviewBeforeSubmit = undefined;\r\n      //     if (isCheck === 'CHECKED') {\r\n      //       document.cookie = 'CK_CFM_I=; path=/';\r\n      //       this.confirmCheckPreview = true;\r\n      //       if (hinhthucxuat === sEnum.statusInv.TrinhKy) {\r\n      //         this.eSubmit(sEnum.statusInv.TrinhKy);\r\n      //       } else {\r\n      //         this.eSubmit('XUAT');\r\n      //       }\r\n      //     }\r\n      //   }\r\n      // }, 500);\r\n      // let htx = '';\r\n      // if (this.formInvoice.getHtXuatValue() !== sEnum.hinhThucXuat.XuatChoKy) {\r\n      //   htx = 'và ký';\r\n      // } else {\r\n      //   htx = 'chờ ký';\r\n      // }\r\n\r\n\r\n      // this.windowPreviewBeforeSubmit.document.write(`\r\n      // <!DOCTYPE html>\r\n      //     <html lang=\"en\">\r\n      //     <head>\r\n      //       <meta charset=\"UTF-8\">\r\n      //       <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n      //       <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n      //       <title>Document</title>\r\n      //       <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\" />\r\n      //       <style type=\"text/css\" scoped>\r\n      //       .nhap-nhay {\r\n      //         background: red;\r\n      //         padding: 0.5px 9px;\r\n      //         margin-right: 5px;\r\n      //         border-radius: 57%;\r\n      //         -webkit-animation: flicker 1s infinite;\r\n      //       }\r\n      //       .ht-xuat{\r\n      //         width: 20%;\r\n      //         height: 100%;\r\n      //         background: #ffffff;\r\n      //         box-shadow: 0px 0px 8px 0px #888888;\r\n              \r\n      //       }\r\n      //       .ht-xuat > .right-nav{\r\n      //         display:flex;\r\n      //         justify-content: space-between;\r\n      //         align-items: center;\r\n      //         border-bottom: 1px solid #d5d5d5;\r\n      //         padding:20px;\r\n      //       }\r\n      //       @-webkit-keyframes flicker\r\n      //       {\r\n      //       0% {opacity:0;}\r\n      //       9% {opacity:0;}\r\n      //       10% {opacity:.5;}\r\n      //       13% {opacity:0;}\r\n      //       20% {opacity:.5;}\r\n      //       25% {opacity:1;}\r\n      //       }\r\n      //       .example {\r\n      //         padding: 20px;\r\n      //       }\r\n            \r\n      //       input[type=button] {\r\n      //         padding: 5px 10px;\r\n      //         margin: 10px 5px;\r\n      //         border-radius: 5px;\r\n      //         cursor: pointer;\r\n      //         background: #ddd;\r\n      //         border: 1px solid #ccc;\r\n      //       }\r\n      //       input[type=button]:hover {\r\n      //         background: #ccc;\r\n      //       }\r\n\r\n      //       .confirm {\r\n      //         display: none;\r\n      //       }\r\n      //       .confirm > div:first-of-type {\r\n      //         position: fixed;\r\n      //         width: 100%;\r\n      //         height: 100%;\r\n      //         background: rgba(0, 0, 0, 0.5);\r\n      //         top: 0px;\r\n      //         left: 0px;\r\n      //       }\r\n      //       .confirm > div:last-of-type {\r\n      //         padding: 10px 20px;\r\n      //         background: white;\r\n      //         position: absolute;\r\n      //         width: auto;\r\n      //         height: auto;\r\n      //         left: 50%;\r\n      //         top: 50%;\r\n      //         transform: translate(-50%, -50%);\r\n      //         border-radius: 5px;\r\n      //         border: 1px solid #333;\r\n      //       }\r\n      //       .confirm > div:last-of-type div:first-of-type {\r\n      //         min-width: 150px;\r\n      //         padding: 10px;\r\n      //       }\r\n      //       .confirm > div:last-of-type div:last-of-type {\r\n      //         text-align: right;\r\n      //       }\r\n      //     </style>\r\n      //     </head>\r\n      //     <body>\r\n      //     <div style=\"margin-left: 50px;\">\r\n      //     <h3 style=\"color: red; text-align: center;\">BẢN DỰ THẢO HÓA ĐƠN ĐIỆN TỬ</h3>\r\n      //     <p style=\"font-weight: 600;\"><span class=\"nhap-nhay\"></span><span style=\"font-size: 17px;\">Lưu ý: \r\n      //     </span>Đề nghị đơn vị kiểm tra thật kỹ các nội dung hóa đơn đã nhập trước khi xuất như: Ngày hóa đơn, Bên mua hàng, Tên hàng hóa dịch vụ, Tổng tiền,…để tránh xuất sai.</>\r\n      //   </div>\r\n\r\n      //   <div style=\"display: flex; height:84vh; justify-content: center;\">\r\n      //     <iframe style=\"\" width=\"70%\" height=\"100%\" src=\"${objectUrl}\"></iframe>\r\n      //     <div class=\"ht-xuat\">\r\n      //       <div class=\"right-nav\">\r\n      //        <button style =\" background:#007BFF;color:#ffffff; padding: 10px 50px; border: none ; outline:none; border-radius: 30px\"> <a href=\"javascript:void(0)\" style=\"text-decoration: none; color:#ffffff; font-weight: bold; padding-right:10px\" onclick=\"setConfirmInvoice()\">Đồng ý </a> <i class=\"fa fa-angle-right\"></i></button>\r\n      //         <a href=\"javascript:void(0)\" style=\"text-decoration: none; color: gray\" onclick=\"closeWin()\"><i class=\"fa fa-times\" style=\"font-size:25px\"></i></a>\r\n      //       </div>\r\n      //       <div style=\"display: flex; flex-direction: column; padding:10px;\">\r\n      //         <div style=\"display: flex; justify-content: space-between; align-items: center;padding:10px; border-bottom: 1px solid #d5d5d5\">\r\n      //           <p style=\" font-weight: 600;\">Ngày hóa đơn : </p>\r\n      //           <p style=\"color: orange;font-weight: 600;\">${moment(invoice_date).format('DD/MM/YYYY')}</p>\r\n      //         </div>\r\n      //         <div style=\"display: flex; justify-content: space-between; align-items: center;padding: 10px; border-bottom: 1px solid #d5d5d5\">\r\n      //           <p style=\"font-weight: 600;\">Trạng thái : </p>\r\n      //           <p style=\"color: orange;font-weight: 600;\">Xuất ${htx}</p>\r\n      //         </div>\r\n      //       </div>\r\n      //     </div>\r\n      //   </div>\r\n      //   <div class=\"confirm\">\r\n      //       <div></div>\r\n      //       <div>\r\n      //         <div id=\"confirmMessage\">Confirm text</div>\r\n      //         <div>\r\n      //           <input id=\"confirmYes\" type=\"button\" value=\"Đồng ý\" />\r\n      //           <input id=\"confirmNo\" type=\"button\" value=\"Quay lại\" />\r\n      //         </div>\r\n      //       </div>\r\n      //   </div>\r\n\r\n      //   <script type=\"text/javascript\">\r\n      //   const ui = {\r\n      //     confirm: async (message) => createConfirm(message)\r\n      //   }\r\n        \r\n      //   const createConfirm = (message) => {\r\n      //     return new Promise((complete, failed)=>{\r\n      //       $('#confirmMessage').text(message)\r\n        \r\n      //       $('#confirmYes').off('click');\r\n      //       $('#confirmNo').off('click');\r\n            \r\n      //       $('#confirmYes').on('click', ()=> { $('.confirm').hide(); complete(true); });\r\n      //       $('#confirmNo').on('click', ()=> { $('.confirm').hide(); complete(false); });\r\n            \r\n      //       $('.confirm').show();\r\n      //     });\r\n      //   }\r\n                             \r\n      //   const setConfirmInvoice = async () => {\r\n      //     const confirm = await ui.confirm(\"Bạn có chắc chắn muốn xuất hóa đơn ${htx} không?\");\r\n      //     if(confirm){\r\n      //       document.cookie = \"CK_CFM_I=CHECKED; path=/\";\r\n      //       window.close();\r\n      //     } else{\r\n      //     }\r\n      //   } \r\n\r\n      //     function closeWin(){\r\n      //       window.close();\r\n      //     }\r\n      //   </script>\r\n      //   <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n      //     </body>\r\n      //     </html>\r\n      // `);\r\n      // this.windowPreviewBeforeSubmit.focus();\r\n      // this.spinner.hide();\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\" *ngIf=\\\"!isReceipts\\\">{{ 'MENU.info_invoice_duplicate' | translate }}</h4>\\r\\n  <h4 class=\\\"modal-title pull-left\\\" *ngIf=\\\"isReceipts\\\">{{ 'MENU.info_receipts_duplicate' | translate }}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid id=\\\"gridContainer\\\" (onEditingStart)=\\\"onEditingStart($event)\\\"\\r\\n    (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"invoice_list\\\" [showRowLines]=\\\"true\\\"\\r\\n    [allowColumnResizing]=\\\"true\\\" [columnMinWidth]=\\\"50\\\" [columnResizingMode]=\\\"true\\\" [columnAutoWidth]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\"\\r\\n    (onEditorPreparing)=\\\"onEditorPreparing($event)\\\">\\r\\n    <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"true\\\"></dxo-editing>\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <!-- Số hóa đơn -->\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\" *ngIf=\\\"!isReceipts\\\"\\r\\n      minWidth=\\\"{{ _translate.GRID_WIDTH.so_hoa_don }}\\\" caption=\\\"{{  _translate.GRID.INVOICE.invoice_number }}\\\"\\r\\n      alignment=\\\"left\\\" [fixed]=\\\"true\\\" sortOrder=\\\"desc\\\" fixedPosition=\\\"left\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Số phiếu thu -->\\r\\n    <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\" *ngIf=\\\"isReceipts\\\"\\r\\n      minWidth=\\\"{{ _translate.GRID_WIDTH.so_hoa_don }}\\\" caption=\\\"{{  _translate.GRID.INVOICE.receipts_number }}\\\"\\r\\n      alignment=\\\"left\\\" [fixed]=\\\"true\\\" sortOrder=\\\"desc\\\" fixedPosition=\\\"left\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Ngày hóa đơn -->\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ngay_hoa_don }}\\\" *ngIf=\\\"!isReceipts\\\"\\r\\n      caption=\\\"{{   _translate.GRID.INVOICE.invoice_date }}\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" alignment=\\\"left\\\"\\r\\n      [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <!-- Ngày phiếu thu -->\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ngay_hoa_don }}\\\" *ngIf=\\\"isReceipts\\\"\\r\\n      caption=\\\"{{   _translate.GRID.INVOICE.receipts_date }}\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" alignment=\\\"left\\\"\\r\\n      [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <!-- Mã HS-SV -->\\r\\n    <dxi-column dataField=\\\"student_code\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hoc_sinh }}\\\"\\r\\n      caption=\\\"{{  _translate.CONTROLL.LABEL.code_student }}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n      [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <!-- Tên HS-SV -->\\r\\n    <dxi-column dataField=\\\"student_name\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hoc_sinh }}\\\"\\r\\n      caption=\\\"{{  _translate.CONTROLL.LABEL.name_student }}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n      [allowEditing]=\\\"false\\\"></dxi-column>\\r\\n    <!-- Lớp -->\\r\\n    <dxi-column dataField=\\\"class_name\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.lop }}\\\"\\r\\n      caption=\\\"{{  _translate.CONTROLL.LABEL.class }}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n      [allowEditing]=\\\"false\\\"></dxi-column>\\r\\n    <!-- Mã khoản thu -->\\r\\n    <dxi-column dataField=\\\"product_code\\\" caption=\\\"{{ _translate.GRID.REVENUE.revenue_code }}\\\"\\r\\n      minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"\\r\\n      [allowEditing]=\\\"false\\\">\\r\\n    </dxi-column>\\r\\n    <!-- Tháng thu HP -->\\r\\n    <dxi-column dataField=\\\"school_fee_month\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.school_fee_month }}\\\"\\r\\n      minWidth=\\\"{{ _translate.GRID_WIDTH.thang_thu_hp }}\\\" [editorOptions]=\\\"{disabled: true}\\\" alignment=\\\"center\\\"\\r\\n      [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [allowEditing]=\\\"false\\\"></dxi-column>\\r\\n    <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n      <a class=\\\"gach-chan\\\" (click)=\\\"view(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n          *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n    </div>\\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\"\\r\\n    (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\"","module.exports = \"::ng-deep .form-input-visibility{visibility:hidden}::ng-deep .invoice-number-create-invoice input{color:red;font-weight:bold}.link-send-invoice{margin-top:10px}.link-send-invoice a{text-decoration:underline}#invoiceHistoryGrid{margin-top:15px}.gach-chan{text-decoration:underline;text-align:center}\\n\"","import { Component, OnInit, ViewChild, HostListener } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { DxMenuComponent } from 'devextreme-angular';\r\nimport List from 'devextreme/ui/list';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { Library, Helper, AuthService, VPreviewInvService, SocketService } from '@core/index';\r\nimport { ViewAttachFileComponent } from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport * as moment from 'moment';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CustomersService } from '@modules/customers/shared';\r\nimport ArrayStore from 'devextreme/data/array_store';\r\nimport { Subscription } from 'rxjs';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\n\r\n@Component({\r\n  selector: 'app-invoices-duplicates',\r\n  templateUrl: './invoices-duplicates.component.html',\r\n  styleUrls: ['./invoices-duplicates.component.scss']\r\n})\r\nexport class InvoicesDuplicatesComponent implements OnInit {\r\n  loaiHoaDon: string;\r\n  selectedItems: Array<any> = [];\r\n  _language: string;\r\n  _translate: any;\r\n  ganXong = false;\r\n  clickCurent = '';\r\n  disEditMulti = true;\r\n  invoiceList: any;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  invoices: any;\r\n  invoice_list: any = [];\r\n  isReceipts: any;\r\n  configs: any;\r\n  dataInfor: any;\r\n  checkSubmit: any;\r\n  ioSignature: Subscription;\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private vatService: VatService,\r\n    public translate: TranslateService,\r\n    private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private socketService: SocketService,\r\n    private spinner: NgxSpinnerService,\r\n    private customersService: CustomersService,\r\n  ) {\r\n    this._language = this.authService.getLanguage();\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this._language);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.convertData();\r\n    this.configs = this.authService.getConfigs();\r\n  }\r\n\r\n  convertData() {\r\n    this.invoiceList.forEach(item => {\r\n      item.invoice_products.forEach(element => {\r\n        let invoice = new Object;\r\n        invoice[\"id\"] = item.id;\r\n        invoice[\"student_id\"] = item.student_id;\r\n        invoice[\"invoice_number\"] = item.invoice_number;\r\n        invoice[\"invoice_date\"] = item.invoice_date;\r\n        invoice[\"class_name\"] = item.class_name;\r\n        invoice[\"student_code\"] = item.student_code;\r\n        invoice[\"student_name\"] = item.student_name;\r\n        invoice[\"product_code\"] = element.product_code;\r\n        invoice[\"school_fee_month\"] = element.school_fee_month;\r\n        this.invoice_list.push(invoice);\r\n      });\r\n    });\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n\r\n  }\r\n\r\n  onEditorPrepared(e) {\r\n    if (e.dataField == 'buyer_email' && e.parentType == 'dataRow') {\r\n      //   e.row.cells[6].text = \"htkt\";\r\n      //  e.editorOptions.onValueChanged = function(args){\r\n      //    e.row.cells[6].value = args.value;\r\n      //       e.setValue(args.value);\r\n      //  }\r\n    }\r\n  }\r\n\r\n  onEditingStart(e) {\r\n    e.component.saveEditData();\r\n  }\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDon().subscribe(message => {\r\n      const data: any = message;\r\n      if (data.SvcName === 'efy_viewInvoice') {\r\n        if (data.Status == \"success\")\r\n          this.viewInvoice(data.Data.Content, data.Data.typeView, data.Data.hinhthucxuat, data.Data.invoice_date);\r\n        else if (data.Status == \"error\") {\r\n          const popUp = window.open('about:blank', 'name', 'width=200, height=100');\r\n          if (popUp == null || typeof (popUp) == 'undefined') {\r\n          }\r\n          else\r\n            popUp.close();\r\n          Library.notify(data.Description, 'error');\r\n          this.spinner.hide();\r\n        }\r\n      }\r\n    });\r\n  }\r\n  setUrlNavigate() {\r\n    const url = window.location.pathname;\r\n    if (sessionStorage.hasOwnProperty('urlIndex')) {\r\n      if (sessionStorage.getItem('urlIndex') !== null) {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      } else {\r\n        sessionStorage.setItem('urlIndex', url);\r\n      }\r\n    } else {\r\n      sessionStorage.setItem('urlIndex', url);\r\n    }\r\n  }\r\n  viewInvoice(content, typeView, hinhthucxuat, invoice_date) {\r\n    if (typeView == \"XEM_TRUOC\") {\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      const pdf_file = content;\r\n      const objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n      const win = window.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n      win.resizeTo(screen.availWidth, screen.availHeight);\r\n      win.focus();\r\n      this.spinner.hide();\r\n    }\r\n  }\r\n  view(data) {\r\n    if (data) {\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      }\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      let win = window.open('about:blank', 'name', 'width=200, height=100');\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      Library.showloading();\r\n      if (this.configs.system_parameter.display_template_from_server) {\r\n        let sub = this.vatService.xemHoaDonInvoiceImport(ids).subscribe(rs => {\r\n          if (rs.status == 'success') {\r\n            let pdf_file = rs.data.invoice.pdf_file;\r\n            let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n            win.resizeTo(screen.availWidth, screen.availHeight);\r\n            win.focus();\r\n            win.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n          } else {\r\n            win.close();\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n        }, () => {\r\n          Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      } else {\r\n        let popup = window.open('about:blank', 'name', `width=200, height=100`);\r\n        popup.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n        popup.blur();\r\n        this.spinner.show();\r\n        const sub = this.vatService.xemHoaDonInvoiceImport(ids).subscribe(rs => {\r\n          if (rs.status === 'success') {\r\n            /* Xem hóa đơn từ Client */\r\n            let json_data = rs.data.invoice.json_data;\r\n            let appCode = \"REPX\";\r\n            if (rs.data.invoice.is_html_template)\r\n              appCode = \"HTML\";\r\n            this.socketService.xemhoadon(() => this.connectWebsocket(), json_data, appCode, \"XEM_TRUOC\");\r\n          } else {\r\n            popup.close();\r\n            this.spinner.hide();\r\n            // this.checkSubmit.close();\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        }, err => {\r\n          this.spinner.hide();\r\n        }, () => {\r\n          //  Library.hideloading();\r\n          sub.unsubscribe();\r\n        });\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n\r\n  dong() {\r\n    this.bsModalRef.content.successSaveItem = 'success';\r\n    this.bsModalRef.hide();\r\n  }\r\n\r\n  selectionChanged(data: any) {\r\n    if (this.clickCurent) {\r\n      document.getElementById(this.clickCurent).classList.remove('show');\r\n    }\r\n    this.disEditMulti = true;\r\n    this.selectedItems = data.selectedRowsData;\r\n    if (this.selectedItems.length > 0) {\r\n      let checks = this.selectedItems.filter((item) => {\r\n        return item.number_of_vouchers;\r\n      });\r\n      let checkDaXuat = this.selectedItems.filter((item) => {\r\n        return item.status == 'DA_XUAT';\r\n      });\r\n      if (checks.length == this.selectedItems.length && checkDaXuat.length == 0) {\r\n        this.disEditMulti = false;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n","module.exports = \"<div class=\\\"container-fluid pl-0 pr-0 mb-0\\\">\\r\\n  <div class=\\\"row support-invoice\\\">\\r\\n    <div class=\\\"col-md-12\\\">\\r\\n      <h4 class=\\\"label-student\\\">Chọn HS - SV ở danh sách dưới đây:</h4>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-6 bg-white\\\" style=\\\"padding-top: 5px\\\">\\r\\n      <!-- <button (click)=\\\"reloadStudent()\\\" class=\\\"btn-menu\\\">\\r\\n        <i class=\\\"fa fa-refresh\\\"></i>\\r\\n      </button> -->\\r\\n      <button class=\\\"btn-menu\\\" (click)=\\\"addStudent()\\\">\\r\\n        <i class=\\\"fa fa-plus-square-o\\\"></i>\\r\\n      </button>\\r\\n      <button class=\\\"btn-menu\\\" (click)=\\\"editStudent()\\\">\\r\\n        <i class=\\\"fa fa-pencil-square-o\\\"></i>\\r\\n      </button>\\r\\n      <button class=\\\"btn-menu text-danger\\\" (click)=\\\"deleteStudent()\\\">\\r\\n        <i class=\\\"fa fa-trash\\\"></i>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"!isSelected\\\" class=\\\"col-md-6 bg-white text-right\\\"\\r\\n      style=\\\"display: flex;align-items: center;justify-content: flex-end;\\\">\\r\\n      <img [class]=\\\"classClick\\\" (click)=\\\"renderDataStudent()\\\"\\r\\n        src=\\\"assets/img/icons/MovetoRight.png\\\" alt=\\\"Chọn\\\" style=\\\"height: 31px;cursor: pointer;margin-top: -1px;\\\">\\r\\n      <!-- <dx-button (click)=\\\"renderDataStudent()\\\" [disabled]=\\\"!isRender\\\" type=\\\"default\\\" text=\\\"Chọn\\\">\\r\\n          <i [class]=\\\"_translate.ICONS.moviewHand\\\"></i>\\r\\n      </dx-button> -->\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"row pt-1 pb-1\\\">\\r\\n    <div class=\\\"row gr-g-dropdown\\\">\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n        <div class=\\\"label\\\">Lớp</div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-8 gr-dropdown\\\">\\r\\n        <dx-drop-down-box [(value)]=\\\"valueFilterClass\\\" valueExpr=\\\"code\\\" displayExpr=\\\"name\\\" placeholder=\\\"Select...\\\" [dataSource]=\\\"dataClass\\\">\\r\\n          <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n            <dx-tree-view [dataSource]=\\\"dataClass\\\" keyExpr=\\\"code\\\" selectionMode=\\\"multiple\\\"\\r\\n              showCheckBoxesMode=\\\"selectAll\\\" displayExpr=\\\"name\\\" (onSelectionChanged)=\\\"getListClass($event)\\\">\\r\\n            </dx-tree-view>\\r\\n          </div>\\r\\n        </dx-drop-down-box>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- <app-input-dropdown-checkbox [listItem]=\\\"dataClass\\\" (shareCheckedList)=\\\"getListClass($event)\\\">\\r\\n      </app-input-dropdown-checkbox> -->\\r\\n  </div>\\r\\n  <div class=\\\"row pt-1 pb-1\\\">\\r\\n    <div class=\\\"row gr-g-dropdown\\\">\\r\\n      <div class=\\\"col-md-3\\\">\\r\\n        <div class=\\\"label\\\">TLMG</div>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-8 gr-dropdown\\\">\\r\\n        <dx-drop-down-box [(value)]=\\\"valueFilterTLMG\\\" valueExpr=\\\"code\\\" displayExpr=\\\"name\\\" placeholder=\\\"Select...\\\" [dataSource]=\\\"dataTLMG\\\">\\r\\n          <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n            <dx-tree-view [dataSource]=\\\"dataTLMG\\\" keyExpr=\\\"code\\\" selectionMode=\\\"multiple\\\"\\r\\n              showCheckBoxesMode=\\\"selectAll\\\" displayExpr=\\\"name\\\" (onSelectionChanged)=\\\"getListTLMG($event)\\\">\\r\\n            </dx-tree-view>\\r\\n          </div>\\r\\n        </dx-drop-down-box>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- <div class=\\\"label col-md-3 style-text-droplist\\\">TLMG</div>\\r\\n    <div class=\\\"valueProcess col-md-9 pl-lg-0\\\">\\r\\n      <app-input-dropdown-checkbox [listItem]=\\\"dataTLMG\\\" (shareCheckedList)=\\\"getListTLMG($event)\\\">\\r\\n      </app-input-dropdown-checkbox>\\r\\n    </div> -->\\r\\n  </div>\\r\\n  <div class=\\\"row pt-1 pb-1\\\">\\r\\n    <div class=\\\"label col-md-3 style-text-droplist\\\">\\r\\n      <!-- <input *ngIf=\\\"hideD\\\" type=\\\"checkbox\\\" [(ngModel)]=\\\"isCheckedAll\\\" (change)=\\\"getSelectedAll($event)\\\"\\r\\n        class=\\\"regular-checkbox mt-1\\\" /> -->\\r\\n    </div>\\r\\n    <div class=\\\"valueProcess col-md-9 pl-lg-0\\\">\\r\\n      <div style=\\\"display: inline-flex\\\" class=\\\"w-100\\\">\\r\\n        <input type=\\\"text\\\" [(ngModel)]=\\\"keySearch\\\" (ngModelChange)=\\\"keyWordChange($event)\\\" name=\\\"keySearch\\\"\\r\\n          class=\\\"w-100 selectAllSearch\\\" placeholder=\\\"Nhập mã HS - SV, tên HS - SV\\\"\\r\\n          (keydown.enter)=\\\"$event.preventDefault()\\\" (keydown.enter)=\\\"searchKeyWord()\\\">\\r\\n        <div class=\\\"\\\">\\r\\n          <button class=\\\"btn-search\\\" (click)=\\\"searchKeyWord()\\\">\\r\\n            <i class=\\\"fa fa-search\\\"></i>\\r\\n          </button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-12\\\">\\r\\n      <dx-data-grid id=\\\"gridContainerStudent\\\" [dataSource]=\\\"arrClass\\\" [showRowLines]=\\\"true\\\"\\r\\n        (onCellClick)=\\\"onCellClickClass($event)\\\" [showColumnHeaders]=\\\"false\\\" [showBorders]=\\\"true\\\">\\r\\n        <dxo-master-detail [enabled]=\\\"true\\\" template=\\\"masterDetail\\\"></dxo-master-detail>\\r\\n        <dxo-sorting mode=\\\"single\\\"></dxo-sorting>\\r\\n        <!-- <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row> -->\\r\\n        <!-- <dxo-selection mode=\\\"multiple\\\"></dxo-selection> -->\\r\\n        <dxi-column cellTemplate=\\\"displaybatch\\\" sortOrder=\\\"asc\\\" dataField=\\\"code\\\" caption=\\\"Mã đợt xuất\\\"></dxi-column>\\r\\n        <div *dxTemplate=\\\"let d of 'displaybatch'\\\">\\r\\n          <div>\\r\\n            <span>{{ d.data.code }}</span>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div *dxTemplate=\\\"let masterDetailItem of 'masterDetail'\\\">\\r\\n\\r\\n          <dx-data-grid id=\\\"gridContainerVat\\\" (onSelectionChanged)=\\\"selectionChanged($event)\\\" [dataSource]=\\\"dataSource\\\"\\r\\n            [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\" [(selectedRowKeys)]=\\\"selectedRows\\\" [allowColumnResizing]=\\\"true\\\"\\r\\n            [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" [showColumnHeaders]=\\\"true\\\">\\r\\n            <!-- <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling> -->\\r\\n            <dxo-selection selectAllMode=\\\"page\\\" mode=\\\"multiple\\\">\\r\\n            </dxo-selection>\\r\\n            <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row>\\r\\n            <!-- <dxo-state-storing [enabled]=\\\"true\\\" type=\\\"sessionStorage\\\" storageKey=\\\"vat\\\"></dxo-state-storing> -->\\r\\n            <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n            <dxo-sorting mode=\\\"multiple\\\"></dxo-sorting>\\r\\n            <dxo-selection mode=\\\"multiple\\\"></dxo-selection>\\r\\n            <dxi-column cellTemplate=\\\"displayStudent\\\" dataField=\\\"name\\\" caption=\\\"Họ và tên\\\"></dxi-column>\\r\\n            <div *dxTemplate=\\\"let d of 'displayStudent'\\\">\\r\\n              <div>\\r\\n                <span>{{ d.data.name }}({{ d.data.code }})</span>\\r\\n\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <!-- <dxo-remote-operations [sorting]=\\\"true\\\" [paging]=\\\"true\\\" [filtering]=\\\"true\\\" [summary]=\\\"true\\\">\\r\\n            </dxo-remote-operations>  -->\\r\\n            <dxo-paging [pageSize]=\\\"100\\\"></dxo-paging>\\r\\n            <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[100, 150, 200]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n              [showInfo]=\\\"true\\\" infoText=\\\"{{ _translate.DXO_PAGER.page}}\\\">>\\r\\n            </dxo-pager>\\r\\n          </dx-data-grid>\\r\\n        </div>\\r\\n        <dxo-paging [pageSize]=\\\"50\\\"></dxo-paging>\\r\\n        <dxo-pager [showPageSizeSelector]=\\\"true\\\" [allowedPageSizes]=\\\"[50, 100, 150]\\\" [showNavigationButtons]=\\\"true\\\"\\r\\n          [showInfo]=\\\"true\\\" infoText=\\\"{{ _translate.DXO_PAGER.page}}\\\">>\\r\\n        </dxo-pager>\\r\\n      </dx-data-grid>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\"","module.exports = \".style-text-droplist{line-height:24px;text-align:right}.style-input-checkbox{line-height:42px}.btn-menu{background:transparent;border:none;outline:none;line-height:33px;font-size:21px}.btn-search{font-size:17px;outline:none;background-color:#337ab7;color:#fff;border:none;padding:3px 7px}.regular-checkbox{outline:none;-webkit-appearance:none;background-color:#fafafa;border:1px solid #cacece;padding:8px;border-radius:3px;display:inline-block;position:relative}.regular-checkbox-item{outline:none;-webkit-appearance:none;background-color:#fafafa;border:1px solid #cacece;padding:6px;border-radius:3px;display:inline-block;position:relative}.regular-checkbox:checked{background-color:#f8fcff;border:1px solid #adb8c0;color:#99a1a7}.regular-checkbox-item:checked{background-color:#f8fcff;border:1px solid #adb8c0;color:#99a1a7}.regular-checkbox:checked:after{content:'\\\\2714';font-size:18px;position:absolute;left:2px;bottom:0;color:#0b8ae8}.regular-checkbox-item:checked:after{content:'\\\\2714';font-size:13px;position:absolute;left:2px;bottom:0;color:#0b8ae8}ul,#myUL{list-style-type:none}.animaltion{position:relative;-webkit-animation-name:mymove;animation-name:mymove;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-iteration-count:6;animation-iteration-count:6}@-webkit-keyframes mymove{from{opacity:0}to{top:1}}@keyframes mymove{from{opacity:0}to{top:1}}#myUL{margin:0;padding:0}.caret{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.caret::before{content:\\\"\\\\25B6\\\";color:black;display:inline-block;margin-right:6px}.caret-down::before{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.text-class{font-weight:600;color:#676161;font-size:15px}.selectAllSearch{height:26px;padding:0 3px;outline:none}.label-student{font-size:14px;font-weight:600;text-transform:uppercase;color:#0e76bc}.list-student{padding:10px;border:1px solid #ddd;max-height:390px;overflow:auto}.checkbox-item{padding:6px !important}#gridContainerStudent{height:397px}.gr-g-dropdown{display:flex !important;flex-direction:row;flex-wrap:nowrap;align-items:center;margin:0;width:100%}.gr-g-dropdown .label{float:right}.gr-g-dropdown .gr-dropdown{padding-right:0px !important;padding-left:0px !important;margin-right:0px !important}\\n\"","import { Component, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { AuthService } from '@core/services';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { StudentInvoiceService } from '@modules/student-invoice/shared';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { Library } from '@core/library';\r\nimport { AddStudentComponent } from '@shared/components/add-student/add-student.component';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport * as _ from 'lodash';\r\n@Component({\r\n  selector: 'app-list-student',\r\n  templateUrl: './list-student.component.html',\r\n  styleUrls: ['./list-student.component.scss']\r\n})\r\nexport class ListStudentComponent implements OnInit {\r\n  @Input() set variableStudent(value) {\r\n    if (Array.isArray(value) && value.length) {\r\n      this.arrClass = value.sort(this.sortArr);\r\n      this.setDataListStudentandClass(this.arrClass);\r\n    }\r\n  }\r\n  @Input() set ttDaXuatHoaDon(value) {\r\n    this.isSelected = value;\r\n  }\r\n  @Input() set variableTLMG(value) {\r\n    if (Array.isArray(value) && value.length) {\r\n      this.dataTLMG = value;\r\n    }\r\n  }\r\n\r\n  @Output('studentGenerated') studentGenerated = new EventEmitter<any>();\r\n  @Input() keySearch: string;\r\n  @ViewChild(DxDataGridComponent) productGrip: DxDataGridComponent;\r\n  bsModalRef: BsModalRef;\r\n  _translate: any;\r\n  selectedRows: any;\r\n  classList = [];\r\n  arrClass = [];\r\n  dataSource = [];\r\n  isSelected = false;\r\n  classStudentList = [];\r\n  studentListAll = [];\r\n  step: string;\r\n  dataClass = [];\r\n  dataTLMG = [];\r\n  isFillter = false;\r\n  valueFilterClass:any = [];\r\n  listStudentClass:any = {};\r\n  valueFilterTLMG = [];\r\n  dataStudentToString: string;\r\n  isRender = false; //có thể bỏ\r\n  hideD = false;\r\n  clickCurent = '';\r\n  isCheckedAll = false; //có thể bỏ\r\n  selectedItems: Array<any> = [];\r\n  classClick: any;\r\n  dm: any;\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private studentService: StudentInvoiceService,\r\n    private modalService: BsModalService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.dm = this.authService.getDMLocal();\r\n  }\r\n\r\n  setDataListStudentandClass(dataStudent) {\r\n    // list class student\r\n    this.classStudentList = this.returnAllStudentinStudentFillter(dataStudent);\r\n    // list class\r\n    this.dataClass = dataStudent.reduce((previousValue, currentValue) => {\r\n      if (checkItemDuplicate(currentValue.code)) {\r\n        return previousValue;\r\n      } else {\r\n        return previousValue.concat(\r\n          {\r\n            name: currentValue.name,\r\n            code: currentValue.code,\r\n            checked: false\r\n          }\r\n        );\r\n      }\r\n\r\n      function checkItemDuplicate(item) {\r\n        return previousValue.some(result => {\r\n          return result.code === item;\r\n        });\r\n      }\r\n    }, []);\r\n    // this.countCheckedStudent(this.studentList);\r\n  }\r\n\r\n  returnAllStudentinStudentFillter(dataArrOrigin) {\r\n    return dataArrOrigin.reduce((previousValue, currentValue) => {\r\n      if (checkItemDuplicate(currentValue.code)) {\r\n        return previousValue;\r\n      } else {\r\n        return previousValue.concat(\r\n          {\r\n            id: currentValue.id,\r\n            name: currentValue.name,\r\n            code: currentValue.code,\r\n            checked: false,\r\n            isShow: false,\r\n            childrenList: []\r\n          }\r\n        );\r\n      }\r\n\r\n      function checkItemDuplicate(item) {\r\n        return previousValue.some(result => {\r\n          return result.code === item;\r\n        });\r\n      }\r\n    }, []);\r\n  }\r\n\r\n  returnStudentSearch(dataStudent) {\r\n    const dataArr = dataStudent.reduce((previousValue, currentValue) => {\r\n      if (checkItemDuplicate(currentValue.class_code)) {\r\n        return previousValue;\r\n      } else {\r\n        return previousValue.concat(\r\n          {\r\n            name: currentValue.class_name,\r\n            code: currentValue.class_code,\r\n            checked: false,\r\n            isShow: true,\r\n            childrenList: []\r\n          }\r\n        );\r\n      }\r\n\r\n      function checkItemDuplicate(item) {\r\n        return previousValue.some(result => {\r\n          return result.code === item;\r\n        });\r\n      }\r\n    }, []);\r\n    dataStudent.forEach(item => {\r\n      dataArr.forEach(itemClassList => {\r\n        if (item.class_code === itemClassList.code) {\r\n          itemClassList['checked'] = false;\r\n          itemClassList.childrenList.push(item);\r\n        }\r\n      });\r\n    });\r\n    return dataArr;\r\n  }\r\n\r\n  // event emit ra khi chọn lớp\r\n  // filter student to Class\r\n  async getListClass($event) {\r\n    let nodes = $event.component.getNodes();\r\n    let nodes_temp = nodes.filter(node => node.selected == true)\r\n    this.valueFilterClass = _.map(nodes_temp, 'key')\r\n    this.getClassCode();\r\n  }\r\n\r\n  // // filter student to TLMG\r\n  async getListTLMG($event) {\r\n    let nodes = $event.component.getNodes();\r\n    let nodes_temp = nodes.filter(node => node.selected == true)\r\n    this.valueFilterTLMG = _.map(nodes_temp, 'key');\r\n    // this.getClassCode();\r\n    // this.valueFilterTLMG = $event;\r\n  }\r\n\r\n  async isShowList($event, code) {\r\n    if (!this.isFillter) {\r\n      if (this.checkChildrenClass(code) > 0) {\r\n        this.classStudentList.map(item => {\r\n          if (code === item.code) {\r\n            return item.isShow = !item.isShow;\r\n          }\r\n        });\r\n      } else {\r\n        const isShow = await this.getStudentToClass(code).then(value => {\r\n          if (value.status === 'success' && value.data.meta.total > 0) {\r\n            this.classStudentList.map(item => {\r\n              if (code === item.code) {\r\n                return item.childrenList = value.data.students;\r\n              }\r\n            });\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n        if (isShow) {\r\n          this.classStudentList.map(item => {\r\n            if (code === item.code) {\r\n              return item.isShow = true;\r\n            }\r\n          });\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.not_find_students, 'error');\r\n        }\r\n      }\r\n    } else {\r\n      if (Array.isArray(this.studentListAll) && this.studentListAll.length) {\r\n        this.studentListAll.map(item => {\r\n          if (code === item.code) {\r\n            return item.isShow = !item.isShow;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  checkChildrenClass(code): number {\r\n    const count = this.classStudentList.filter(item => {\r\n      if (code === item.code) {\r\n        return item.childrenList;\r\n      }\r\n    });\r\n    return count[0].childrenList.length;\r\n  }\r\n\r\n  async getStudentToClass(code) {\r\n    // this.valueFilterClass = [];\r\n    Library.showloading();\r\n    return await this.studentService.getStudentToClass(code, [], this.valueFilterTLMG, this.keySearch);\r\n  }\r\n\r\n  getSelectedAllValue(value: boolean, code: string) {\r\n    if (!this.isFillter) {\r\n      this.classStudentList.forEach(item => {\r\n        if (item.code === code) {\r\n          item['checked'] = true;\r\n          if (item.childrenList.length && Array.isArray(item.childrenList)) {\r\n            item.childrenList.map(itemChecked => itemChecked.checked = value);\r\n          }\r\n        }\r\n      });\r\n      this.setDataStudentListToString();\r\n      // this.countCheckedStudent(this.classStudentList);\r\n    } else {\r\n      this.studentListAll.forEach(item => {\r\n        if (item.code === code) {\r\n          item['checked'] = true;\r\n          if (item.childrenList.length && Array.isArray(item.childrenList)) {\r\n            item.childrenList.map(itemChecked => itemChecked.checked = value);\r\n          }\r\n        }\r\n      });\r\n      // this.countCheckedStudent(this.studentListAll);\r\n    }\r\n  }\r\n\r\n  getSelectedItem(isChecked: boolean, name: any, idClass) {\r\n    if (isChecked) {\r\n      if (!this.isFillter) {\r\n        this.classStudentList = this.handleSelectedItem(this.classStudentList, isChecked, name, idClass);\r\n        this.setDataStudentListToString();\r\n        // this.countCheckedStudent(this.classStudentList);\r\n      } else {\r\n        this.studentListAll = this.handleSelectedItem(this.studentListAll, isChecked, name, idClass);\r\n        // this.countCheckedStudent(this.studentListAll);\r\n      }\r\n    } else {\r\n      if (!this.isFillter) {\r\n        this.classStudentList = this.handleSelectedItem(this.classStudentList, isChecked, name, idClass);\r\n        this.setDataStudentListToString();\r\n        // this.countCheckedStudent(this.classStudentList);\r\n      } else {\r\n        this.studentListAll = this.handleSelectedItem(this.studentListAll, isChecked, name, idClass);\r\n        // this.countCheckedStudent(this.studentListAll);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleSelectedItem(dataClass: any, isChecked: boolean, codeStudent: any, idClass) {\r\n    let i = 0;\r\n    if (isChecked) {\r\n      dataClass.map(classList => {\r\n        if (classList.code === idClass && classList.childrenList.length && Array.isArray(classList.childrenList)) {\r\n          classList.childrenList.map(item => {\r\n            if (item.code === codeStudent) {\r\n              return item.checked = true;\r\n            }\r\n          });\r\n          classList.childrenList.forEach(item => {\r\n            if (item.checked) {\r\n              i++;\r\n            }\r\n          });\r\n        }\r\n      });\r\n      dataClass.map(classList => {\r\n        if (classList.code === idClass && Array.isArray(classList.childrenList) && classList.childrenList.length === i) {\r\n          return classList.checked = true;\r\n        }\r\n      });\r\n      return dataClass;\r\n    } else {\r\n      dataClass.map(classList => {\r\n        if (classList.code === idClass && classList.childrenList.length && Array.isArray(classList.childrenList)) {\r\n          classList.childrenList.map(item => {\r\n            if (item.code === codeStudent) {\r\n              return item.checked = false;\r\n            }\r\n          });\r\n          classList.childrenList.forEach(item => {\r\n            if (item.checked) {\r\n              i++;\r\n            }\r\n          });\r\n        }\r\n      });\r\n      dataClass.map(classList => {\r\n        if (classList.code === idClass && Array.isArray(classList.childrenList) && classList.childrenList.length > i) {\r\n          return classList.checked = false;\r\n        }\r\n      });\r\n      return dataClass;\r\n    }\r\n  }\r\n\r\n  // getSelectedAll($event) {\r\n  //   if (this.isFillter) {\r\n  //     this.studentListAll.forEach(item => {\r\n  //       item.checked = $event.target.checked;\r\n  //       if (item.childrenList.length && Array.isArray(item.childrenList)) {\r\n  //         item.childrenList.map(itemChecked => itemChecked.checked = $event.target.checked);\r\n  //       }\r\n  //     });\r\n  //     // this.countCheckedStudent(this.studentListAll);\r\n  //   } else {\r\n  //     this.classStudentList.forEach(item => {\r\n  //       item.checked = $event.target.checked;\r\n  //       if (item.childrenList.length && Array.isArray(item.childrenList)) {\r\n  //         item.childrenList.map(itemChecked => itemChecked.checked = $event.target.checked);\r\n  //       }\r\n  //     });\r\n  //     // this.countCheckedStudent(this.classStudentList);\r\n  //     this.setDataStudentListToString();\r\n  //   }\r\n  // }\r\n\r\n  setDataStudentListToString() {\r\n    this.dataStudentToString = JSON.stringify(this.classStudentList);\r\n  }\r\n\r\n  parseDataStudentListToArray() {\r\n    this.classStudentList = JSON.parse(this.dataStudentToString);\r\n    // this.countCheckedStudent(this.classStudentList);\r\n    // this.returnisCheckedAll();\r\n  }\r\n\r\n  sortArr(previousValue, currentValue) {\r\n    const bandA = previousValue.code.toUpperCase();\r\n    const bandB = currentValue.code.toUpperCase();\r\n\r\n    let comparison = 0;\r\n    if (bandA > bandB) {\r\n      comparison = 1;\r\n    } else if (bandA < bandB) {\r\n      comparison = -1;\r\n    }\r\n    return comparison;\r\n  }\r\n\r\n  renderDataStudent() {\r\n    this.studentGenerated.emit(this.selectedItems);\r\n  }\r\n\r\n  // returnDataStudentChecked() {\r\n  //   const dataStudent = [];\r\n  //   if (!this.isFillter) {\r\n  //     this.classStudentList.forEach(itemClass => {\r\n  //       if (Array.isArray(itemClass.childrenList) && itemClass.childrenList.length) {\r\n  //         itemClass.childrenList.forEach(item => {\r\n  //           if (item.checked) {\r\n  //             dataStudent.push(item);\r\n  //           }\r\n  //         });\r\n  //       }\r\n  //     });\r\n  //   } else {\r\n  //     this.studentListAll.forEach(itemClass => {\r\n  //       if (Array.isArray(itemClass.childrenList) && itemClass.childrenList.length) {\r\n  //         itemClass.childrenList.forEach(item => {\r\n  //           if (item.checked) {\r\n  //             dataStudent.push(item);\r\n  //           }\r\n  //         });\r\n  //       }\r\n  //     });\r\n  //   }\r\n  //   return dataStudent;\r\n  // }\r\n\r\n  // countCheckedStudent(dataChecked) {\r\n  //   let i = 0;\r\n  //   dataChecked.forEach(itemClass => {\r\n  //     if (Array.isArray(itemClass.childrenList) && itemClass.childrenList.length) {\r\n  //       itemClass.childrenList.forEach(item => {\r\n  //         if (item.checked) {\r\n  //           i++;\r\n  //         }\r\n  //       });\r\n  //     }\r\n  //   });\r\n  //   this.isRender = i > 0;\r\n  // }\r\n\r\n  // returnisCheckedAll() {\r\n  //   if (Array.isArray(this.classStudentList) && this.classStudentList.length) {\r\n  //     let i = 0;\r\n  //     this.classStudentList.forEach(itemClass => {\r\n  //       if (!itemClass.checked) {\r\n  //         i++;\r\n  //       }\r\n  //     });\r\n  //     this.isCheckedAll = i === 0;\r\n  //   }\r\n  // }\r\n\r\n  async addStudent() {\r\n    let dataCount = 1;\r\n    await this.studentService.getCountStudent().then(result => {\r\n      if (result.status === 'success') {\r\n        dataCount = result.data.meta.total + 1;\r\n      }\r\n    });\r\n    if (this.productGrip) {\r\n      this.productGrip.instance.collapseAll(-1);\r\n    }\r\n    const initialState = {\r\n      // totalCount: this.dataGrid.instance.totalCount(),\r\n      classCodes: this.arrClass,\r\n      student_reduce_rate_codes: this.dataTLMG,\r\n      totalCount: dataCount,\r\n      classCodeListTypeId: this.getIdDmLop(),\r\n    };\r\n    this.bsModalRef = this.modalService.show(AddStudentComponent, {\r\n      class: 'modal-lg full-modal',\r\n      initialState,\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n    });\r\n\r\n    this.modalService.onHide.subscribe(() => {\r\n      this.studentService.getAllClass()\r\n        .then(result => {\r\n          this.dm.DM_LOP_HOC.data = result.data.DM_LOP_HOC;\r\n          localStorage.setItem('DANH_MUC', JSON.stringify(this.dm));\r\n          this.dataClass = _.map(result.data.DM_LOP_HOC, (item: any) => ({\r\n            code: item.code,\r\n            name: item.name,\r\n            checked: false\r\n          }));\r\n          this.dataClass = this.dataClass.sort(this.sortArr);\r\n          this.arrClass = this.arrClass.sort(this.sortArr);\r\n        })\r\n      if (this.bsModalRef.content.successSaveItem) {\r\n        if (this.productGrip) {\r\n          this.productGrip.instance.collapseAll(-1);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  editStudent() {\r\n    if (this.selectedItems.length === 1) {\r\n      const initialState = {\r\n        student: this.selectedItems[0],\r\n        classCodes: this.arrClass,\r\n        student_reduce_rate_codes: this.dataTLMG,\r\n        classCodeListTypeId: this.getIdDmLop(),\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddStudentComponent, {\r\n        class: 'modal-lg full-modal',\r\n        initialState,\r\n        backdrop: 'static',\r\n        keyboard: false,\r\n      });\r\n      this.modalService.onHide.subscribe(() => {\r\n        this.studentService.getAllClass()\r\n          .then(result => {\r\n            this.dm.DM_LOP_HOC.data = result.data.DM_LOP_HOC;\r\n            localStorage.setItem('DANH_MUC', JSON.stringify(this.dm));\r\n            this.dataClass = _.map(result.data.DM_LOP_HOC, (item: any) => ({\r\n              code: item.code,\r\n              name: item.name,\r\n              checked: false\r\n            }))\r\n          })\r\n        if (this.bsModalRef.content.successSaveItem) {\r\n          if (this.productGrip) {\r\n            this.productGrip.instance.collapseAll(-1);\r\n          }\r\n        }\r\n      });\r\n\r\n    } else if (this.selectedItems.length > 1) {\r\n      Library.notify(this._translate.NOTIFY.only_seclected_student_to_edit, 'error');\r\n      return;\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_selected_student, 'error');\r\n      return;\r\n    }\r\n  }\r\n\r\n  deleteStudent() {\r\n    if (this.selectedItems.length > 0) {\r\n      const ids = this.selectedItems.map((obj: any) => obj.id).join(',');\r\n      const result = Library.confirm(this._translate.CONFIRM.delete, this._translate.NOTIFY.notify);\r\n      if (result) {\r\n        result.then((dialogResult) => {\r\n          if (dialogResult) {\r\n            Library.showloading();\r\n            this.studentService.deleteStudent(ids).subscribe((response: any) => {\r\n              if (response.status === 'success') {\r\n                Library.notify(this._translate.NOTIFY.delete_success, 'success');\r\n                if (this.productGrip) {\r\n                  this.productGrip.instance.collapseAll(-1);\r\n                }\r\n                // if (this.isFillter) {\r\n                //   this.isFillter = false;\r\n                //   this.setDataListStudentandClass(this.arrClass);\r\n                // } else {\r\n                //   this.setDataListStudentandClass(this.arrClass);\r\n                // }\r\n              } else {\r\n                Library.notify(this._translate.NOTIFY.an_error_occurred, 'error');\r\n              }\r\n              Library.hideloading();\r\n            });\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_selected_student, 'error');\r\n      return;\r\n    }\r\n  }\r\n\r\n  // reloadStudent() {\r\n  //   if (Array.isArray(this.arrClass) && this.arrClass.length) {\r\n  //     this.isFillter = false;\r\n  //     this.setDataListStudentandClass(this.arrClass);\r\n  //   }\r\n  // }\r\n\r\n  async searchKeyWord() {\r\n    await this.studentService.getClassBySearch(null, this.valueFilterClass, this.valueFilterTLMG, this.keySearch).then(\r\n      result => {\r\n        this.arrClass = [];\r\n        if (result.status === 'success' && result.data.meta.total > 0) {\r\n          if (result.data.students.length > 0) {\r\n            let temp_filterClass = _.uniq(_.map(result.data.students, 'class_code'));            \r\n            this.arrClass = _.map(_.filter(this.dataClass, item => temp_filterClass.includes(item.code)), ({code, name}) => ({code, name}))            \r\n            if (this.productGrip) {\r\n              this.productGrip.instance.collapseAll(-1);\r\n              this.productGrip.instance.expandRow(this.arrClass[0]);\r\n              this.loadListDataItem(this.arrClass[0].code);\r\n              \r\n            }\r\n          }\r\n          return true;\r\n        } else {\r\n          Library.notify(this._translate.NOTIFY.not_find_students, 'error');\r\n          return false;\r\n        }\r\n      }\r\n    );\r\n\r\n  }\r\n\r\n  keyWordChange($event: any) {\r\n    // if ($event === '') {\r\n    //   this.isFillter = false;\r\n    //   this.parseDataStudentListToArray();\r\n    // } else {\r\n    //   this.setDataStudentListToString();\r\n    // }\r\n  }\r\n  onCellClickClass(e) {\r\n    if (e.rowType == \"data\") {\r\n      e.component.collapseAll(-1);\r\n      if(!e.row.isExpanded) {\r\n        e.component.expandRow(e.key);\r\n        this.loadListDataItem(e.row.data.code);\r\n      }\r\n    }\r\n  }\r\n  loadListDataItem(classCode) {\r\n    this.dataSource = [];\r\n    this.getStudentToClass(classCode).then(value => {\r\n      if (value.status === 'success' && value.data.meta.total > 0) {\r\n        this.dataSource = value.data.students;\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    });\r\n  }\r\n  selectionChanged(data: any) {\r\n    if (this.selectedItems.length == 0)\r\n      this.classClick = 'animaltion';\r\n    this.selectedItems = data.selectedRowsData;\r\n    // if (this.selectedItems.length > 0) {\r\n    //   this.isRender = true;\r\n    // }\r\n    // else\r\n    //   this.isRender = false;\r\n  }\r\n  getClassCode() {\r\n    if(this.valueFilterClass.length > 0){\r\n      this.arrClass = _.map(_.filter(this.dataClass, item => this.valueFilterClass.includes(item.code)), ({code, name}) => ({code, name}))\r\n    }else {\r\n      this.arrClass = _.map(this.dataClass, ({code, name}) => ({code, name}))\r\n    }\r\n  }\r\n  groupBy(list, keyGetter) {\r\n    const map = new Map();\r\n    list.forEach((item) => {\r\n      const key = keyGetter(item);\r\n      const collection = map.get(key);\r\n      if (!collection) {\r\n        map.set(key, [item]);\r\n      } else {\r\n        collection.push(item);\r\n      }\r\n    });\r\n    return map;\r\n  }\r\n  getIdDmLop() {\r\n    let classCodeListTypeId = '';\r\n    const lstType = this.authService.getListtypes();\r\n    const dm_lop = lstType.find(item => item.code == \"DM_LOP_HOC\");\r\n    if (dm_lop)\r\n      classCodeListTypeId = dm_lop.id;\r\n    return classCodeListTypeId;\r\n  }\r\n}\r\n","module.exports = \"<!-- Phần không tự tính giá trị, nhập mẫu bảng kê -->\\r\\n<div class=\\\"row support-invoice\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <div class=\\\"pull-left\\\">\\r\\n      <div style=\\\"float: left;width:  30%; padding-top: 4px\\\">{{ _translate.CONTROLL.BUTTON.add_row }}</div>\\r\\n      <div style=\\\"float: left; width: 30%\\\">\\r\\n        <dx-number-box #numberBox [max]=\\\"100\\\" [min]=\\\"1\\\" [showSpinButtons]=\\\"true\\\" [(value)]=\\\"rowData\\\"></dx-number-box>\\r\\n      </div>\\r\\n      <div>\\r\\n        <dx-button style=\\\"height: 27px\\\" icon=\\\"fa fa-plus-circle\\\" type=\\\"default\\\" text=\\\"\\\" (onClick)=\\\"addRow()\\\">\\r\\n        </dx-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-check-box *ngIf=\\\"configs.system_parameter.view_sale_by_phone\\\" id=\\\"auto-input\\\"\\r\\n        text=\\\"{{ _translate.CONTROLL.LABEL.sale_by_phone }}\\\" [(value)]=\\\"formDataInInvoice.sale_by_phone\\\"></dx-check-box>\\r\\n      <dx-check-box class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.no_calculation }}\\\"\\r\\n        [(value)]=\\\"formDataInInvoice.auto_value\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <dx-check-box *ngIf=\\\"isHdGTGT\\\" class=\\\"auto-input\\\" text=\\\"{{ _translate.CONTROLL.LABEL.auto_value_price }}\\\"\\r\\n        [(value)]=\\\"formDataInInvoice.auto_value_price\\\" (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      <dx-menu [dataSource]=\\\"extras\\\" displayExpr=\\\"name\\\" orientation=\\\"horizontal\\\" submenuDirection=\\\"auto\\\"\\r\\n        *ngIf=\\\"showmenu\\\" (onItemClick)=\\\"itemExtrasClick($event)\\\" cssClass='button-dropdown-extend'>\\r\\n      </dx-menu>\\r\\n      <input type=\\\"file\\\" id=\\\"file-bang-ke\\\" accept=\\\".xlsx\\\" (change)=\\\"onFileBangKeChange($event)\\\" multiple=\\\"false\\\"\\r\\n        style=\\\"display: none;\\\" />\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup class=\\\"popup\\\" [width]=\\\"350\\\" [height]=\\\"175\\\" [showTitle]=\\\"true\\\" title=\\\"{{ _translate.NOTIFY.notify }}\\\"\\r\\n  [dragEnabled]=\\\"false\\\" [closeOnOutsideClick]=\\\"true\\\" [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{ _translate.CONFIRM.import_type }}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"thayTheToanBo()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.replace_all }}\\\" type=\\\"default\\\">\\r\\n      </dx-button>\\r\\n      <dx-button (click)=\\\"themTiep()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.add_more }}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{ _translate.CONTROLL.BUTTON.cancel }}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\\r\\n<!-- phần table hiển thị -->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoice\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onCellClick)=\\\"onCellClick($event)\\\"\\r\\n      (onEditorPreparing)=\\\"onEditorPreparing($event)\\\" (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onContentReady)=\\\"onContentReady($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"!ttDaXuatHoaDon\\\"></dxo-editing>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxi-column cellTemplate=\\\"deleteColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.delete }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.delete_column }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\"\\r\\n        fixedPosition=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <dxi-column dataField=\\\"view_order\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\" alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Mã khoản thu -->\\r\\n      <dxi-column cssClass=\\\"overlay-content123\\\" dataField=\\\"product_code\\\"\\r\\n        caption=\\\"{{ _translate.GRID.REVENUE.revenue_code }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ma_hang }}\\\"\\r\\n        alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\" [editorOptions]=\\\"{showClearButton: true}\\\">\\r\\n        <dxo-lookup *ngIf=\\\"reloadSelectProduct\\\" [dataSource]=\\\"select.productsView\\\" displayExpr=\\\"mhvth\\\" valueExpr=\\\"code\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Tên khoản thu -->\\r\\n      <dxi-column dataField=\\\"product_name\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.ten_hang }}\\\"\\r\\n        caption=\\\"{{ _translate.GRID.REVENUE.revenue_name }}\\\" alignment=\\\"left\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Diễn giải -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_promotion\\\" cellTemplate=\\\"dien_giai\\\"\\r\\n        caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.explain }}\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.dien_giai }}\\\"\\r\\n        [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Tháng thu HP -->\\r\\n      <dxi-column dataField=\\\"school_fee_month\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.school_fee_month }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.thang_thu_hp }}\\\" [editorOptions]=\\\"{disabled: true}\\\" alignment=\\\"center\\\"\\r\\n        [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Học kỳ -->\\r\\n      <dxi-column *ngIf=\\\"configs.system_parameter.is_semester\\\" dataField=\\\"semester\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.hoc_ky }}\\\" caption=\\\"{{  _translate.GRID.INVOICE_DETAILS.semester }}\\\"\\r\\n        alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column>\\r\\n      <!-- Đơn vị tính -->\\r\\n      <dxi-column dataField=\\\"unit_code\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.unit_code }}\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.unit_code }}\\\" alignment=\\\"center\\\" [editorOptions]=\\\"lookupColumnOptions\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.unit_codes\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\" onValueChanged=\\\"b($event)\\\">\\r\\n        </dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Số lượng -->\\r\\n      <dxi-column dataField=\\\"quantity\\\" headerCellTemplate=\\\"quantityHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.so_luong }}\\\" [editorOptions]=\\\"{ format: formatter.so_luong,step: '0' }\\\"\\r\\n        [format]=\\\"formatter.so_luong\\\" dataType=\\\"number\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Đơn giá -->\\r\\n      <dxi-column dataField=\\\"price\\\" headerCellTemplate=\\\"priceHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.don_gia }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.don_gia,step: '0' }\\\" [format]=\\\"formatter.don_gia\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Thành tiền -->\\r\\n      <dxi-column dataField=\\\"amount\\\" headerCellTemplate=\\\"amountHeader\\\" minWidth=\\\"{{ _translate.GRID_WIDTH.thanh_tien }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.thanh_tien ,step: '0'}\\\" [format]=\\\"formatter.thanh_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Vat -->\\r\\n      <dxi-column cssClass=\\\"vat-invoices\\\" *ngIf=\\\"isHdGTGT\\\" dataField=\\\"vat\\\" headerCellTemplate=\\\"vatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.vat }}\\\" alignment=\\\"center\\\"\\r\\n        [editorOptions]=\\\"{showClearButton: true ,step: '0'}\\\">\\r\\n        <dxo-lookup [dataSource]=\\\"select.vats\\\" displayExpr=\\\"name\\\" valueExpr=\\\"code\\\"></dxo-lookup>\\r\\n      </dxi-column>\\r\\n      <!-- Tiền thuế -->\\r\\n      <dxi-column *ngIf=\\\"isHdGTGT\\\" dataField=\\\"amount_vat\\\" headerCellTemplate=\\\"amountVatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tien_thue }}\\\" [editorOptions]=\\\"{ format: formatter.tien_thue, step: '0' }\\\"\\r\\n        [format]=\\\"formatter.tien_thue\\\" dataType=\\\"number\\\" alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- Tổng tiền -->\\r\\n      <dxi-column dataField=\\\"amount_after_vat\\\" headerCellTemplate=\\\"amountAfterVatHeader\\\"\\r\\n        minWidth=\\\"{{ _translate.GRID_WIDTH.tong_tien_sau_thue }}\\\"\\r\\n        [editorOptions]=\\\"{ format: formatter.tong_tien, step:'0'}\\\" [format]=\\\"formatter.tong_tien\\\" dataType=\\\"number\\\"\\r\\n        alignment=\\\"right\\\"></dxi-column>\\r\\n      <!-- config column header -->\\r\\n      <div *dxTemplate=\\\"let d of 'quantityHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('so_luong')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.quantity }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'priceHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('don_gia')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.price }}<img\\r\\n            src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'dien_giai'\\\">\\r\\n        <dx-check-box [(value)]=\\\"d.data.is_promotion\\\" [disabled]=\\\"d.data.is_promotion_new\\\"\\r\\n          (onValueChanged)=\\\"_tinhGiaTri()\\\"></dx-check-box>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('thanh_tien')\\\" style=\\\"cursor: pointer;\\\">{{ _translate.GRID.INVOICE_DETAILS.amount }}\\r\\n          <img src=\\\"assets/img/icons/SoThapPhan.png\\\">\\r\\n        </p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'vatHeader'\\\">\\r\\n        <p>VAT</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tien_thue')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.amount_vat }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'amountAfterVatHeader'\\\">\\r\\n        <p (click)=\\\"configDecimal('tong_tien')\\\" style=\\\"cursor: pointer;\\\">\\r\\n          {{ _translate.GRID.INVOICE_DETAILS.total_money }} <img src=\\\"assets/img/icons/SoThapPhan.png\\\"></p>\\r\\n      </div>\\r\\n      <!-- config column -->\\r\\n      <div id=\\\"context-table\\\" *dxTemplate=\\\"let d of 'deleteColumn'\\\">\\r\\n        <a class=\\\"delete-row\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"deleteRow(d.data)\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'product_code'\\\">\\r\\n        <dxi-item editorType=\\\"dxSelectBox\\\"\\r\\n          [editorOptions]=\\\"{items: select.productsView, displayExpr: 'name', valueExpr: 'code'}\\\">\\r\\n        </dxi-item>\\r\\n      </div>\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:20px;margin-bottom:10px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:8px}.support-invoice .support-link img,.support-invoice .support-link i{margin-right:15px;margin-top:-2px}.support-invoice .auto-input{margin-right:75px !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .styleItemToList{color:dodgerblue}.button-dropdown-extend{display:inline-flex}::ng-deep .vat-invoices .dx-texteditor-buttons-container{display:-ms-inline-grid;display:inline-grid}\\n\"","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport * as XLSX from 'xlsx';\r\nimport { AuthService, Helper, Library, VChanggeMoneyService, VStringService } from '@core/index';\r\nimport { AddComponent, ConfigDecimalComponent } from '@shared/index';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { sEnum } from '@config/sEnum';\r\nimport { SelectMonthComponent } from '@shared/components/select-month/select-month.component';\r\nimport { InvoiceService } from '@shared/service/invoice.service';\r\n\r\ndeclare var $: any;\r\n\r\n\r\n@Component({\r\n  selector: 'app-product-grip',\r\n  templateUrl: './product-grip.component.html',\r\n  styleUrls: ['./product-grip.component.scss']\r\n})\r\nexport class ProductGripComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  routeSub: Subscription;\r\n\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() isHdGTGT: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() fee_months: any;\r\n  @Input() student_reduce_rate_code: any;\r\n  @Input() extentionGrid: any;\r\n  @Input() formDataInInvoice: any; // Không tự tính giá trị\r\n  @Input() arrProducts = [];\r\n  @Input() studentSelect: any;\r\n  @Input() _oTemplateTT78: any;\r\n  @Input() isTT78: boolean;\r\n  @Output('onCheckDuplicate') onCheckDuplicate = new EventEmitter<any>();\r\n  select: any = {};\r\n  _translate: any;\r\n  frmData: InvoiceModel = new InvoiceModel(1);\r\n  bsModalRef: BsModalRef;\r\n  showPopup = false; // Popup\r\n  dataExcelFile: any = null;\r\n  dataExcelFileInfo: any = null;\r\n  ttDaXuatHoaDon = false;\r\n  configs: any;\r\n  amount_after_vat: any = 0;\r\n  reloadSelectProduct = true;\r\n  extras = [];\r\n  rowData = 1;\r\n  showmenu = false;\r\n  selectMonth = false;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private productsService: ProductsService,\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n    private invoiceService: InvoiceService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    if (!this.isHdGTGT) {\r\n      this.formDataInInvoice.amount_vatx = null;\r\n      this.formDataInInvoice.amount_vat5 = null;\r\n      this.formDataInInvoice.amount_vat10 = null;\r\n    }\r\n    this.configs = this.authService.getConfigs();\r\n    let test = this._objTemplateSelect;\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      let danh_muc = this.authService.getDMLocal();\r\n      this.select.unit_codes = danh_muc.DM_DON_VI_TINH ? danh_muc.DM_DON_VI_TINH.data : null;\r\n      this.select.select_provisions_on_accounts = danh_muc.DM_DINH_KHOAN ? danh_muc.DM_DINH_KHOAN.data : null;\r\n      this.select.vats = danh_muc.DM_TY_LE_VAT ? danh_muc.DM_TY_LE_VAT.data : null;\r\n      this.select.revenue_forms = danh_muc.DM_HINH_THUC_THU ? danh_muc.DM_HINH_THUC_THU.data : null;\r\n      this.select.countrys = danh_muc.DM_QUOC_GIA ? danh_muc.DM_QUOC_GIA.data : null;\r\n      // Hàng hóa dịch vụ\r\n      let isEdit = false;\r\n      let invoice: any;\r\n      if (data.init[2] == true)\r\n        isEdit = true;\r\n      if (this.isTT78) {\r\n        this.select.products = data.init[0];\r\n        if (isEdit)\r\n          invoice = data.init[1];\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'code',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              return data.init[0].filter(p => p.code === key.toString());\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'name'\r\n        };\r\n      }\r\n      else {\r\n        this.select.products = data.init[1];\r\n        if (isEdit)\r\n          invoice = data.init[3];\r\n        this.select.productsView = {\r\n          store: new CustomStore({\r\n            key: 'code',\r\n            loadMode: 'raw',\r\n            load: (loadOptions) => {\r\n              return this.select.products;\r\n            },\r\n            byKey: function (key) {\r\n              const _data = data.init[1].filter(p => p.code === key.toString());\r\n              return _data;\r\n            }\r\n          }),\r\n          paginate: true,\r\n          sort: 'name'\r\n        };\r\n      }\r\n      this.select.products.forEach(item => {\r\n        item.mhvth = item.code + ': ' + item.name;\r\n      });\r\n      this.invoice_products.load().then((dataSource) => {\r\n        dataSource.forEach((item, index) => {\r\n          if (item.product_name && item.unit_name) {\r\n            const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n            if (!obj1) {\r\n              if (VStringService._getValueToString(item.unit_code) == \"\")\r\n                item.unit_code = VStringService._convertToViKdau(item.unit_name);\r\n              let oDuplicate = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n              if (oDuplicate)\r\n                item.unit_code = item.unit_code + Helper.addtionalUnitCode();\r\n              this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n            }\r\n            else {\r\n              if (VStringService._getValueToString(item.unit_code) != \"\") {\r\n                let oExistUnitCode = this.select.unit_codes.filter(p => p.code === item.unit_code)[0];\r\n                if (!oExistUnitCode)\r\n                  this.select.unit_codes.push({ code: item.unit_code, name: item.unit_name });\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n    });\r\n    // Event\r\n    this.createUpdateEvent();\r\n  }\r\n\r\n  // Thêm giá trị mới vào đơn vị tính\r\n  lookupColumnOptions = {\r\n    acceptCustomValue: true,\r\n    showClearButton: true,\r\n    onCustomItemCreating: function (args) {\r\n      //\r\n      //\r\n      const newItem: any = {};\r\n      newItem.code = VStringService._convertToViKdau(args.text);\r\n      let oDuplicate = this.select.unit_codes.filter(p => p.code === newItem.code)[0];\r\n      if (oDuplicate)\r\n        newItem.code = newItem.code + Helper.addtionalUnitCode();\r\n      newItem.name = args.text;\r\n      this.select.unit_codes.unshift(newItem);\r\n\r\n      setTimeout(() => {\r\n        this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n          dataSource: this.select.unit_codes,\r\n          displayExpr: 'name',\r\n          valueExpr: 'code'\r\n        });\r\n      });\r\n\r\n      return newItem;\r\n    }.bind(this)\r\n  };\r\n\r\n  // khởi tạo sự kiện khi update\r\n  createUpdateEvent() {\r\n    setTimeout(() => {\r\n      this.invoice_products.on('updated', (key, value) => {\r\n        const column = Object.keys(value)[0];\r\n        if (value.product_code !== 'add') {\r\n          this.invoice_products.byKey(key).then((row) => {\r\n            switch (column) {\r\n              case 'view_order':\r\n                this.view_orderChange();\r\n                break;\r\n              case 'product_code':\r\n                this.product_codeChange(row);\r\n                break;\r\n              case 'product_name':\r\n                this.product_nameChange(row);\r\n                break;\r\n              case 'unit_code':\r\n                this.unit_codeChange(row);\r\n                break;\r\n              case 'quantity':\r\n              case 'price':\r\n              case 'price_nte':\r\n              case 'vat':\r\n              case 'amount':\r\n              case 'amount_vat':\r\n              case 'amount_after_vat':\r\n              case 'amount_discount':\r\n              case 'discount':\r\n              case 'amount_without_discount':\r\n              case 'other_tax':\r\n              case 'other_charge':\r\n                this._tinhGiaTri();\r\n                break;\r\n              default:\r\n                break;\r\n              // }\r\n            }\r\n          }, (error) => {\r\n            alert(error);\r\n          });\r\n        } else {\r\n          this.invoice_products.remove(key);\r\n          this.addRow();\r\n        }\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      e.rowElement.style.whiteSpace = 'pre-wrap';\r\n      const eles = e.rowElement.getElementsByTagName('td');\r\n      if (!e.isEditing) {\r\n        eles[2].innerHTML = e.data.product_code;\r\n      }\r\n      if (e.data.error) {\r\n        const ele = eles[eles.length - 1];\r\n        ele.style.background = 'red url(\\'assets/img/icons/fa-remove.png\\') no-repeat 2% center';\r\n        ele.title = e.data.error;\r\n      }\r\n    }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.parentType === 'dataRow') {\r\n      if (e.dataField === 'product_code') {\r\n        e.editorOptions.onOpened = function (arg) {\r\n          const popupInstance = arg.component._popup;\r\n          popupInstance.option('width', 400);\r\n          popupInstance.option('minWidth', 400);\r\n        };\r\n      }\r\n\r\n      if (e.dataField === 'product_name' || e.dataField === 'school_fee_month') {\r\n        e.editorName = 'dxTextArea';\r\n      }\r\n\r\n      // e.editorOptions.onFocusOut = (args) => {\r\n      //   if (e.dataField === 'unit_code') {\r\n      //     const _obj = this.select.unit_codes.filter(p => p.code === e.row.data.unit_code)[0];\r\n      //     if (_obj) {\r\n      //       e.row.data.unit_name = _obj.name;\r\n      //     } else {\r\n      //       e.row.data.unit_name = '';\r\n      //     }\r\n      //   }\r\n      //   if (e.dataField === 'country_code') {\r\n      //     const _obj = this.select.countrys.filter(p => p.code === e.row.data.country_code)[0];\r\n      //     if (_obj) {\r\n      //       e.row.data.country_name = _obj.name;\r\n      //     } else {\r\n      //       e.row.data.country_name = '';\r\n      //     }\r\n      //   }\r\n      //   this.invoice_products.update(e.row.data.id, e.row.data);\r\n      // };\r\n    }\r\n  }\r\n\r\n\r\n  onEditorPrepared(e) {\r\n    if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount' || e.dataField === 'amount_vat' || e.dataField === 'amount_after_vat') && e.parentType === 'dataRow') {\r\n      e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n        e.component.cancelEditData();\r\n      };\r\n\r\n      e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n        this.selectionStart = this.selectionEnd;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n    if (e.row.rowType === 'data') {\r\n      e.items = [\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.add_goods,\r\n          onItemClick: () => {\r\n            this.addProduct(e.row.data);\r\n          }\r\n        },\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.add_row,\r\n          onItemClick: () => {\r\n            this.addRow();\r\n          }\r\n        },\r\n        {\r\n          text: this._translate.CONTROLL.BUTTON.delete_row,\r\n          onItemClick: () => {\r\n            this.deleteRow(e.row.data);\r\n          }\r\n        },\r\n      ];\r\n    }\r\n  }\r\n\r\n  addProduct(row) {\r\n    Library.showloading();\r\n    this.productsService.getAllListbyListtypeByCode('DM_NHOM_HANG_HOA,DM_DON_VI_TINH,DM_TY_LE_VAT').subscribe((response) => {\r\n      const initialState = {\r\n        totalCount: 0,\r\n        groupProducts: response.data['DM_NHOM_HANG_HOA'],\r\n        unitCalculations: this.select.unit_codes,//response.data['DM_DON_VI_TINH'],\r\n        vats: response.data['DM_TY_LE_VAT'],\r\n        groupProductListTypeId: response.data['ids']['DM_NHOM_HANG_HOA'],\r\n        unitCalculationListTypeId: response.data['ids']['DM_DON_VI_TINH'],\r\n        vatListTypeId: response.data['ids']['DM_TY_LE_VAT'],\r\n        wavehourses: [],\r\n        formatter: this.formatter,\r\n        onSaveProduct: (data, unitCodes) => {\r\n          this.select.unit_codes = unitCodes;\r\n          data.mhvth = data.code + ': ' + data.name;\r\n          this.select.products.push(data);\r\n          this.reloadSelectProduct = false;\r\n          setTimeout(() => {\r\n            this.reloadSelectProduct = true;\r\n          }, 50);\r\n\r\n          row.product_code = data.code;\r\n          row.product_name = data.name;\r\n          row.group_code = data.group_code;\r\n          row.unit_code = this.checkUnitCode(data.unit_code);\r\n          row.quantity = null;\r\n          row.price = data.price ? parseFloat(data.price) : data.price;\r\n          row.amount = data.price ? parseFloat(data.price) : 0;\r\n          row.vat = data.vat ? data.vat.toString() : null;\r\n          row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n          row.amount_after_vat = row.amount + row.amount_vat;\r\n          this.unit_codeChange(row);\r\n          this.invoice_products.update(row.id, row);\r\n        }\r\n      };\r\n      this.bsModalRef = this.modalService.show(AddComponent, {\r\n        class: 'modal-lg full-modal', initialState, backdrop: 'static',\r\n        keyboard: false\r\n      });\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  addRow() {\r\n    let len, order, orderLast;\r\n    len = this.dataSource.items().length;\r\n    orderLast = this.dataSource.items()[len - 1].order;\r\n    for (let i = 0; i < this.rowData; i++) {\r\n\r\n      if (this.dataSource.items().length >= 1) {\r\n        order = ++orderLast;\r\n      } else {\r\n        order = 1;\r\n      }\r\n\r\n      const data = this.frmData.add_invoice_products_data(order, order);\r\n      this.invoice_products.insert(data);\r\n    }\r\n    this.dataSource.reload();\r\n  }\r\n\r\n  view_orderChange() {\r\n    let _index = 0;\r\n    if (!this.isTT78) {\r\n      this.dataSource.items().forEach(item => {\r\n        if (item.view_order && VStringService._getValueToString(this._objTemplateSelect.template_type) !== sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          item.view_order = ++_index;\r\n        }\r\n        if (VStringService._getValueToString(this._objTemplateSelect.template_type) === sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          if (!item.is_money_service) {\r\n            item.view_order = ++_index;\r\n          } else {\r\n            item.view_order = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      this.dataSource.items().forEach(item => {\r\n        if (item.view_order && VStringService._getValueToString(this._oTemplateTT78.template_type) !== sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          item.view_order = ++_index;\r\n        }\r\n        if (VStringService._getValueToString(this._oTemplateTT78.template_type) === sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n          if (!item.is_money_service) {\r\n            item.view_order = ++_index;\r\n          } else {\r\n            item.view_order = null;\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  // Thay đổi cột mã hàng \r\n  product_codeChange(row) {\r\n    this.select.products.some(item => {\r\n      if (item.code === row.product_code) {\r\n        this.productsService.getProduct(item.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let productServ = rs.data.product;\r\n            if (productServ) {\r\n              let isUpdate = true;\r\n              let _indexNumber = 0;\r\n              if (isUpdate) {\r\n                if (productServ.form_revenue == sEnum.hinhthucthu.Thang) {\r\n                  this.selectMonth = true;\r\n\r\n                  const initialState = {\r\n                    fee_months: this.fee_months,\r\n                    product_code: row.product_code\r\n                  };\r\n                  this.bsModalRef = this.modalService.show(SelectMonthComponent, {\r\n                    class: 'second child-modal',\r\n                    initialState,\r\n                    backdrop: 'static',\r\n                    keyboard: false,\r\n                  });\r\n                  let index = 0;\r\n                  this.modalService.onHide.subscribe(() => {\r\n                    if (this.selectMonth) {\r\n                      index++;\r\n                      if (index == 1) {\r\n                        if (this.bsModalRef.content.successSaveItem) {\r\n                          if (row.product_code == this.bsModalRef.content.product_code) {\r\n                            let _lstMonth = this.bsModalRef.content.successSaveData;\r\n                            _lstMonth = _lstMonth.split(';').filter(p => p != \"\");\r\n                            row.school_fee_month = this.bsModalRef.content.successSaveData;\r\n                            row.product_name = productServ.name;\r\n                            if (this.select.revenue_forms && this.select.revenue_forms.length > 0) {\r\n                              const _obj = this.select.revenue_forms.filter(p => p.code === productServ.form_revenue)[0];\r\n                              if (_obj) {\r\n                                row.semester = _obj.name;\r\n                              }\r\n                            }\r\n                            row.unit_code = this.checkUnitCode(productServ.unit_code);\r\n                            if (row.unit_code == \"NAM\" || row.unit_code == \"NAMHOC\" || row.unit_code == \"KY\")\r\n                              row.quantity = 1;\r\n                            else\r\n                              if (row.unit_code == \"THANG\")\r\n                                row.quantity = _lstMonth.length;\r\n                              else\r\n                                row.quantity = null;\r\n                            row.price = productServ.price ? parseFloat(productServ.price) : productServ.price;\r\n                            row.price = row.price ? parseFloat(row.price) - (row.price * parseFloat(this.student_reduce_rate_code)) / 100 : row.price;\r\n                            row.amount = row.price ? parseFloat(row.price) * parseFloat(row.quantity) : row.price;\r\n                            if (this.isHdGTGT) {\r\n                              row.vat = productServ.vat != null ? productServ.vat.toString() : null;\r\n                            } else {\r\n                              row.vat = null;\r\n                            }\r\n                            if (this.isHdGTGT) {\r\n                              row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n                            } else {\r\n                              row.amount_vat = null;\r\n                            }\r\n                            row.group_code = productServ.group_code;\r\n                            row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n                            this.invoice_products.update(row.id, row);\r\n                            this._tinhGiaTri();\r\n                            let prot = this.arrProducts;\r\n                            if (!this.arrProducts || (this.arrProducts && this.arrProducts.length == 0)) {\r\n                              const IProduct = {\r\n                                code: productServ.code,\r\n                                price: productServ.price\r\n                              };\r\n                              this.arrProducts.push(IProduct);\r\n                            } else {\r\n                              const product = this.arrProducts.filter(p => p.code === productServ.code)[0];\r\n                              if (!product) {\r\n                                const IProduct = {\r\n                                  code: productServ.code,\r\n                                  price: productServ.price\r\n                                };\r\n                                this.arrProducts.push(IProduct);\r\n                              }\r\n                            }\r\n                            if (row.school_fee_month !== '') {\r\n                              this.onCheckDuplicate.emit(null);\r\n                            }\r\n                            return true;\r\n                          }\r\n\r\n                        }\r\n                        else {\r\n                          if (row.product_code == this.bsModalRef.content.product_code) {\r\n                            row.school_fee_month = \"\";\r\n                            row.product_name = productServ.name;\r\n                            row.group_code = productServ.group_code;\r\n                            row.unit_code = this.checkUnitCode(productServ.unit_code);\r\n                            row.quantity = null;\r\n                            if (this.select.revenue_forms && this.select.revenue_forms.length > 0) {\r\n                              const _obj = this.select.revenue_forms.filter(p => p.code === productServ.form_revenue)[0];\r\n                              if (_obj) {\r\n                                row.semester = _obj.name;\r\n                              }\r\n                            }\r\n                            row.price = productServ.price ? parseFloat(productServ.price) : productServ.price;\r\n                            row.price = row.price ? parseFloat(row.price) - (row.price * parseFloat(this.student_reduce_rate_code)) / 100 : row.price;\r\n                            row.amount = row.price ? parseFloat(productServ.price) : row.price;\r\n                            if (this.isHdGTGT) {\r\n                              row.vat = productServ.vat != null ? productServ.vat.toString() : null;\r\n                            } else {\r\n                              row.vat = null;\r\n                            }\r\n                            if (this.isHdGTGT) {\r\n                              row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n                            } else {\r\n                              row.amount_vat = null;\r\n                            }\r\n                            row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n                            let test = this.invoice_products;\r\n                            this.invoice_products.update(row.id, row);\r\n                            this._tinhGiaTri();\r\n                            if (!this.arrProducts || (this.arrProducts && this.arrProducts.length == 0)) {\r\n                              const IProduct = {\r\n                                code: productServ.code,\r\n                                price: productServ.price\r\n                              };\r\n                              this.arrProducts.push(IProduct);\r\n                            } else {\r\n                              const product = this.arrProducts.filter(p => p.code === productServ.code)[0];\r\n                              if (!product) {\r\n                                const IProduct = {\r\n                                  code: productServ.code,\r\n                                  price: productServ.price\r\n                                };\r\n                                this.arrProducts.push(IProduct);\r\n                              }\r\n                            }\r\n                            if (row.school_fee_month !== '') {\r\n                              this.onCheckDuplicate.emit(null);\r\n                            }\r\n                            return true;\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  });\r\n\r\n                }\r\n                else {\r\n                  row.school_fee_month = '';\r\n                  const _oHinhThucThu = this.select.revenue_forms.filter(p => p.code == productServ.form_revenue)[0];\r\n                  if (_oHinhThucThu) {\r\n                    if (_oHinhThucThu.note) {\r\n                      const mapObj = {\r\n                        T: VStringService._getValueToString(this.fee_months.code).split('-')[0],\r\n                        S: VStringService._getValueToString(this.fee_months.code).split('-')[1],\r\n                      };\r\n                      row.school_fee_month = VStringService._getValueToString(_oHinhThucThu.note).replace(/T|S/gi, function (matched) {\r\n                        return mapObj[matched];\r\n                      });\r\n                    }\r\n                  }\r\n                  let _lstMonth = null;\r\n                  if (row.school_fee_month !== '') {\r\n                    _lstMonth = row.school_fee_month.split(';').filter(p => p !== '');\r\n                  }\r\n                  if (_lstMonth) {\r\n                    row.quantity = _lstMonth.length;\r\n                  } else {\r\n                    row.quantity = null;\r\n                  }\r\n                  if (this.select.revenue_forms && this.select.revenue_forms.length > 0) {\r\n                    const _obj = this.select.revenue_forms.filter(p => p.code === productServ.form_revenue)[0];\r\n                    if (_obj) {\r\n                      row.semester = _obj.name;\r\n                    }\r\n                  }\r\n                  row.product_name = productServ.name;\r\n                  row.group_code = productServ.group_code;\r\n                  row.unit_code = this.checkUnitCode(productServ.unit_code);\r\n                  if (row.unit_code == \"NAM\" || row.unit_code == \"NAMHOC\" || row.unit_code == \"KY\")\r\n                    row.quantity = 1;\r\n                  else\r\n                    if (row.unit_code == \"THANG\")\r\n                      row.quantity = _lstMonth.length;\r\n                    else\r\n                      row.quantity = null;\r\n                  row.price = productServ.price ? parseFloat(productServ.price) : productServ.price;\r\n                  row.price = row.price ? parseFloat(row.price) - (row.price * parseFloat(this.student_reduce_rate_code)) / 100 : row.price;\r\n                  if (row.quantity) {\r\n                    row.amount = row.price ? parseFloat(row.price) * parseFloat(row.quantity) : row.price;\r\n                  } else {\r\n                    row.amount = row.price ? parseFloat(row.price) : row.price;\r\n                  }\r\n                  if (this.isHdGTGT) {\r\n                    row.vat = productServ.vat != null ? productServ.vat.toString() : null;\r\n                  } else {\r\n                    row.vat = null;\r\n                  }\r\n                  if (this.isHdGTGT) {\r\n                    row.amount_vat = (row.vat >= 0) ? this.caculatorAmountVat(row.amount, row.vat) : null;\r\n                  } else {\r\n                    row.amount_vat = null;\r\n                  }\r\n                  row.amount_after_vat = row.amount + (row.amount_vat != null ? row.amount_vat : 0);\r\n                  this.invoice_products.update(row.id, row);\r\n                  this._tinhGiaTri();\r\n                  if (!this.arrProducts || (this.arrProducts && this.arrProducts.length == 0)) {\r\n                    const IProduct = {\r\n                      code: productServ.code,\r\n                      price: productServ.price\r\n                    };\r\n                    this.arrProducts.push(IProduct);\r\n                  } else {\r\n                    const product = this.arrProducts.filter(p => p.code === productServ.code)[0];\r\n                    if (!product) {\r\n                      const IProduct = {\r\n                        code: productServ.code,\r\n                        price: productServ.price\r\n                      };\r\n                      this.arrProducts.push(IProduct);\r\n                    }\r\n                  }\r\n                  if (row.school_fee_month !== '') {\r\n                    this.onCheckDuplicate.emit(null);\r\n                  }\r\n                  return true;\r\n                }\r\n\r\n              } else {\r\n                return false;\r\n              }\r\n            }\r\n\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  unit_codeChange(row) {\r\n    const _obj = this.select.unit_codes.filter(p => p.code === row.unit_code)[0];\r\n    if (_obj) {\r\n      row.unit_name = _obj.name;\r\n      this.invoice_products.update(row.id, row);\r\n    } else {\r\n      row.unit_name = '';\r\n      this.invoice_products.update(row.id, row);\r\n    }\r\n  }\r\n\r\n  product_nameChange(row) {\r\n    this.invoice_products.update(row.id, row);\r\n    this.refreshInvoiceProduct();\r\n  }\r\n  refreshInvoiceProduct() {\r\n    const invoice_products = [];\r\n    this.dataSource.items().forEach((item, index) => {\r\n      if (item.product_code || item.product_name || (!item.product_name && item.is_promotion)) {\r\n        item.row_content = item.product_name;\r\n        invoice_products.push(item);\r\n        if (item.is_transport_number) {\r\n          this.formDataInInvoice.transport_number = item.product_name;\r\n        }\r\n      }\r\n    });\r\n    this.formDataInInvoice.invoice_products = invoice_products;\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _tinhGiaTri() {\r\n    if (!this.isTT78) {\r\n      setTimeout(() => {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.formDataInInvoice, this.formatter, !this.formDataInInvoice.auto_value, this.formDataInInvoice.auto_value_price, this.select, this._objTemplateSelect, this.configs.system_parameter);\r\n        this.amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n      }, 100);\r\n    }\r\n    else {\r\n      setTimeout(() => {\r\n        VChanggeMoneyService._changeMoneyItem(this.dataSource, this.invoice_products, this.formDataInInvoice, this.formatter, !this.formDataInInvoice.auto_value, this.formDataInInvoice.auto_value_price, this.select, this._oTemplateTT78, this.configs.system_parameter);\r\n        this.amount_after_vat = this.formDataInInvoice.amount_after_vat;\r\n      }, 100);\r\n    }\r\n\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    let p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  // Bật modal thay đổi số thập phân\r\n  configDecimal(n) {\r\n    const initialState = {\r\n      column: n,\r\n      formatter: this.formatter,\r\n      showDonGiaNte: this.configs.system_parameter.view_price_nte,\r\n    };\r\n    this.bsModalRef = this.modalService.show(ConfigDecimalComponent, {\r\n      class: 'modal-lg', initialState, backdrop: 'static',\r\n      keyboard: false\r\n    });\r\n    const subModal = this.modalService.onHide.subscribe(() => {\r\n      const data = this.bsModalRef.content.successSaveItem;\r\n      if (data) {\r\n        this._tinhGiaTri();\r\n      }\r\n      subModal.unsubscribe();\r\n    });\r\n  }\r\n\r\n  // Xóa hàng\r\n  deleteRow(item) {\r\n    setTimeout(() => {\r\n      const check = confirm(this._translate.CONFIRM.delete);\r\n      if (check && !this.ttDaXuatHoaDon) {\r\n        setTimeout(() => {\r\n          this.invoice_products.remove(item.id);\r\n\r\n          // this.dataSource.store().remove(item.id);\r\n          this.dataSource.reload();\r\n          this._tinhGiaTri();\r\n          const product = this.arrProducts.filter(p => p.code === item.product_code)[0];\r\n          let index = this.arrProducts.indexOf(product);\r\n          this.arrProducts.splice(index, 1);\r\n          this.onCheckDuplicate.emit(null);\r\n        }, 100);\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  updateSomeTotalInput() {\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  // Lấy mẫu bảng kê\r\n  layMauBangKe() {\r\n    Library.showloading();\r\n    this.vatService.layFileMau({\r\n      customer_name: this.formDataInInvoice.customer_name,\r\n      buyer_tax_code: this.formDataInInvoice.buyer_tax_code,\r\n      buyer_address: this.formDataInInvoice.buyer_address,\r\n      buyer_name: this.formDataInInvoice.buyer_name,\r\n      invoice_type_name: \"\"\r\n    }).subscribe(rs => {\r\n      if (rs.status === 'success') {\r\n        const file = rs.data.invoice;\r\n        Helper.dowloadFile(file.file_name, 'xlsx', file.file_content);\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {\r\n    }, () => {\r\n      Library.hideloading();\r\n    });\r\n  }\r\n\r\n  // Nạp dữ liệu bảng kê\r\n  napDuLieuTuBangKe() {\r\n    document.getElementById('file-bang-ke').click();\r\n  }\r\n\r\n  onFileBangKeChange(evt) {\r\n    const target: DataTransfer = <DataTransfer>(evt.target);\r\n    if (target.files.length !== 1) {\r\n      throw new Error('Không thể chọn nhiều file');\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n    reader.onload = (e: any) => {\r\n      /* read workbook */\r\n      const bstr: string = e.target.result;\r\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\r\n\r\n      /* grab first sheet */\r\n      const wsname: string = wb.SheetNames[0];\r\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\r\n\r\n      /* save data */\r\n      const data = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 10 }));\r\n      const account = <any>(XLSX.utils.sheet_to_json(ws, { header: 'A', range: 0 }));\r\n      const fileBangKe: any = document.getElementById('file-bang-ke');\r\n      fileBangKe.value = '';\r\n      this.dataExcelFile = data;\r\n      this.dataExcelFileInfo = account.slice(0, 4);\r\n      this.showPopup = true;\r\n    };\r\n    reader.readAsBinaryString(target.files[0]);\r\n  }\r\n\r\n  thayTheToanBo() {\r\n    this.fillDataFromFile(this.dataExcelFile, this.dataExcelFileInfo, 'thaythe');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  themTiep() {\r\n    this.fillDataFromFile(this.dataExcelFile, this.dataExcelFileInfo, 'themtiep');\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  huy() {\r\n    this.showPopup = false;\r\n    this.dataExcelFile = null;\r\n  }\r\n\r\n  fillDataFromFile(data, info, status) {\r\n    if (info.length === 4) {\r\n      const customer_name = info[0].A.split(':');\r\n      if (customer_name.length > 1) {\r\n        this.formDataInInvoice.customer_name = customer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_tax_code = info[1].A.split(':');\r\n      if (buyer_tax_code.length > 1) {\r\n        this.formDataInInvoice.buyer_tax_code = buyer_tax_code[1].trim();\r\n      }\r\n      ////\r\n      const buyer_name = info[2].A.split(':');\r\n      if (buyer_name.length > 1) {\r\n        this.formDataInInvoice.buyer_name = buyer_name[1].trim();\r\n      }\r\n      ////\r\n      const buyer_address = info[3].A.split(':');\r\n      if (buyer_address.length > 1) {\r\n        this.formDataInInvoice.buyer_address = buyer_address[1].trim();\r\n      }\r\n    }\r\n    if (status === 'thaythe') {\r\n      this.dataSource.items().forEach(item => {\r\n        // this.dataSource.store().remove(item.id);\r\n        this.invoice_products.remove(item.id);\r\n\r\n\r\n      });\r\n    } else {\r\n      this.dataSource.items().forEach(item => {\r\n        if (!item.product_code && !item.product_name && !item.quantity && !item.price && !item.amount && !item.amount_vat && !item.amount_after_vat) {\r\n          this.invoice_products.remove(item.id);\r\n\r\n        }\r\n      });\r\n    }\r\n    // let arr = [];\r\n    let j = 10000;\r\n    data.forEach(item => {\r\n      // item.A = item.A || \"0\";\r\n      item.B = item.B || '';\r\n      item.C = item.C || '';\r\n      item.D = item.D || '';\r\n      // item.E = item.E || '0';\r\n      // item.F = item.F || '0';\r\n      // item.G = item.G || '0';\r\n      // item.H = item.H || \"0\";\r\n      // item.I = item.I || \"0\";\r\n      const temp: any = {};\r\n      if (this.formDataInInvoice.auto_value) {\r\n        temp.id = Helper.makeid();\r\n        if (item.A) {\r\n          temp.view_order = parseInt(item.A, 10);\r\n        } else {\r\n          temp.view_order = null;\r\n        }\r\n        temp.product_code = item.B;\r\n\r\n        temp.product_name = item.C;\r\n        temp.unit_code = this.getUnitCodeByUnitName(item.D);\r\n        if (item.E) {\r\n          temp.quantity = Helper.toNumber(item.E);\r\n        }\r\n        if (item.F) {\r\n          temp.price = Helper.toNumber(item.F);\r\n        }\r\n        if (item.G) {\r\n          temp.amount = Helper.toNumber(item.G);\r\n        }\r\n        if (item.H && this.isHdGTGT) {\r\n          temp.vat = item.H;\r\n        } else {\r\n          temp.vat = null;\r\n        }\r\n        if (this.isHdGTGT) {\r\n          temp.amount_vat = item.I != null ? Helper.toNumber(item.I) : null;\r\n        } else {\r\n          temp.amount_vat = null;\r\n        }\r\n        temp.amount_after_vat = temp.amount_vat + temp.amount;\r\n      } else {\r\n        temp.id = Helper.makeid();\r\n        // temp.order = (status == 'thaythe') ? parseInt(item.A) : j;\r\n        if (item.A) {\r\n          temp.view_order = parseInt(item.A, 10);\r\n        } else {\r\n          temp.view_order = null;\r\n        }\r\n        temp.product_code = item.B;\r\n        temp.product_name = item.C;\r\n        temp.unit_code = this.getUnitCodeByUnitName(item.D);\r\n        if (item.E) {\r\n          temp.quantity = Helper.toNumber(item.E);\r\n        }\r\n        if (item.F) {\r\n          temp.price = Helper.toNumber(item.F);\r\n        }\r\n        if (item.G) {\r\n          temp.amount = Helper.toNumber(item.G);\r\n        }\r\n        // temp.amount = temp.price * temp.quantity;\r\n        if (item.H && this.isHdGTGT) {\r\n          temp.vat = item.H; // parseInt(item.H);\r\n        } else {\r\n          temp.vat = null;\r\n        }\r\n      }\r\n      const _obj = this.select.products.filter(p => p.code === temp.product_code)[0];\r\n      if (!_obj && temp.product_code !== '') {\r\n        const _objPush = {\r\n          code: temp.product_code,\r\n          name: temp.product_name,\r\n          mhvth: temp.product_code + ': ' + temp.product_name,\r\n        };\r\n        this.select.products.push(_objPush);\r\n      }\r\n      temp.commercial_discount = false;\r\n      // arr.push(temp);\r\n      // this.dataSource.store().insert(temp);\r\n      this.invoice_products.insert(temp);\r\n      j++;\r\n    });\r\n    setTimeout(() => {\r\n      this.dataGrid.instance.columnOption('unit_code', 'lookup', {\r\n        dataSource: this.select.unit_codes,\r\n        displayExpr: 'name',\r\n        valueExpr: 'code'\r\n      });\r\n    });\r\n    this.dataSource.reload();\r\n    this._tinhGiaTri();\r\n  }\r\n\r\n  getUnitCodeByUnitName(unitName) {\r\n    if (VStringService._getValueToString(unitName) !== '') {\r\n      if (this.select.unit_codes && this.select.unit_codes.length > 0) {\r\n        const _obj = this.select.unit_codes.filter(p => p.name === unitName)[0];\r\n        if (_obj) {\r\n          return _obj.code;\r\n        } else {\r\n          let code = VStringService._convertToViKdau(unitName);\r\n          let oDuplicate = this.select.unit_codes.filter(p => p.code === code)[0];\r\n          if (oDuplicate)\r\n            code = code + Helper.addtionalUnitCode();\r\n          this.select.unit_codes.push({ code: code, name: unitName });\r\n          return code;\r\n        }\r\n      } else {\r\n        this.select.unit_codes = [];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  itemExtrasClick(e) {\r\n    if (e.itemData.id === 'LAY_MAU_BANG_KE') {\r\n      this.layMauBangKe();\r\n    } else if (e.itemData.id === 'NAP_DU_LIEU_BANG_KE') {\r\n      this.napDuLieuTuBangKe();\r\n    }\r\n  }\r\n\r\n  onCellClick(e) {\r\n    if (e.column.dataField === 'school_fee_month') {\r\n      this.selectMonth = false;\r\n      const product = this.select.products.filter(p => p.code === e.row.data.product_code)[0];\r\n      if (product) {\r\n        this.productsService.getProduct(product.id).subscribe(rs => {\r\n          if (rs.status == \"success\") {\r\n            let productServ = rs.data.product;\r\n            if (productServ) {\r\n              if (productServ.form_revenue === sEnum.hinhthucthu.Thang) {\r\n                const initialState = {\r\n                  fee_months: this.fee_months,\r\n                  month_year: e.row.data.school_fee_month,\r\n                  product_code: e.row.data.product_code\r\n                };\r\n                this.bsModalRef = this.modalService.show(SelectMonthComponent, {\r\n                  class: 'second child-modal',\r\n                  initialState,\r\n                  backdrop: 'static',\r\n                  keyboard: false,\r\n                });\r\n                let index = 0;\r\n                this.modalService.onHide.subscribe(() => {\r\n                  if (!this.selectMonth) {\r\n                    index++;\r\n                    let tr = index;\r\n                    if (index == 1) {\r\n                      if (e.row.data.product_code == this.bsModalRef.content.product_code) {\r\n                        if (this.bsModalRef.content.successSaveItem) {\r\n                          e.row.data.school_fee_month = this.bsModalRef.content.successSaveData;\r\n                        }\r\n                        else {\r\n                        }\r\n                        let _lstMonth = [];\r\n                        if (e.row.data.school_fee_month)\r\n                          _lstMonth = e.row.data.school_fee_month.split(';').filter(p => p !== '');\r\n                        if (_lstMonth && _lstMonth.length > 0) {\r\n                          e.row.data.quantity = _lstMonth.length;\r\n                        } else {\r\n                          e.row.data.quantity = null;\r\n                        }\r\n                        if (e.row.data.quantity) {\r\n                          e.row.data.amount = e.row.data.price ? parseFloat(e.row.data.price) * parseFloat(e.row.data.quantity) : 0;\r\n                        } else {\r\n                          e.row.data.amount = e.row.data.price ? parseFloat(e.row.data.price) : 0;\r\n                        }\r\n                        if (this.isHdGTGT) {\r\n                          e.row.data.amount_vat = (e.row.data.vat >= 0) ? this.caculatorAmountVat(e.row.data.amount, e.row.data.vat) : null;\r\n                        } else {\r\n                          e.row.data.amount_vat = null;\r\n                        }\r\n                        e.row.data.amount_after_vat = e.row.data.amount + (e.row.data.amount_vat != null ? e.row.data.amount_vat : 0);\r\n                        this.invoice_products.update(e.row.data.id, e.row.data);\r\n                        this._tinhGiaTri();\r\n                        if (e.row.data.school_fee_month && e.row.data.school_fee_month !== '') {\r\n                          this.onCheckDuplicate.emit(null);\r\n                        }\r\n                        return true;\r\n                      }\r\n                    }\r\n                  }\r\n                });\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            Library.notify(rs.message, 'error');\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  onContentReady = (e) => {\r\n    const arrFooter = [\r\n      { name: this._translate.GRID.INVOICE_DETAILS.total_money, class: 'table-footer-1' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_vat, class: 'table-footer-2' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount, class: 'table-footer-3' },\r\n      { name: this._translate.GRID.INVOICE_DETAILS.amount_without_discount, class: 'table-footer-4' },\r\n    ]\r\n    const domGrid = document.querySelector('#gridInvoice');\r\n    this.invoiceService.formatSumColumnGrid(arrFooter, domGrid);\r\n  }\r\n}\r\n","module.exports = \"<form>\\r\\n  <div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title pull-left\\\" *ngIf=\\\"!isReceipts\\\">{{_translate.CONTROLL.LABEL.process_invoice}}</h4>\\r\\n    <h4 class=\\\"modal-title pull-left\\\" *ngIf=\\\"isReceipts\\\">{{_translate.CONTROLL.LABEL.process_receipts}}</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <!-- hóa đơn kiêm phiếu thu tiền -->\\r\\n    <div class=\\\"container-fluid\\\" *ngIf=\\\"!isReceipts\\\">\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-lg-7\\\">\\r\\n          <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item [label]=\\\"{text: _translate.GRID.INVOICE.template_code }\\\" dataField=\\\"template\\\"\\r\\n                [editorOptions]=\\\"{readOnly: true}\\\">\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n              <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: _translate.GRID.INVOICE.invoice_date}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item cssClass=\\\"invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\"\\r\\n                [label]=\\\"{text: _translate.GRID.INVOICE.invoice_number}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"customer_code\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.customer_code}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"buyer_tax_code\\\" [label]=\\\"{text: _translate.GRID.INVOICE.buyer_tax_code }\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"buyer_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.buyer_name }\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"buyer_mobile\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.phone }\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item dataField=\\\"buyer_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.customer_name}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n          </dx-form>\\r\\n        </div>\\r\\n        <div class=\\\"col-lg-5\\\">\\r\\n          <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item cssClass=\\\"form-input-visibility\\\" dataField=\\\"invoice_date\\\" [label]=\\\"{text: 'temp'}\\\"></dxi-item>\\r\\n              <!-- <dxi-item dataField=\\\"a\\\" [label]=\\\"{text: 'Số xác thực'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item> -->\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n              <dxi-item dataField=\\\"currency_code\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_code}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"currency_rate\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.currency_rate}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item dataField=\\\"payment_method_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_method}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"buyer_email\\\" [label]=\\\"{text: 'Email'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n          </dx-form>\\r\\n        </div>\\r\\n        <div class=\\\"col-lg-12 link-send-invoice\\\">\\r\\n          <div class=\\\"pull-right\\\">\\r\\n            <a *ngIf=\\\"invoice.status == 'DA_XUAT'\\\" (click)=\\\"sendMail()\\\"\\r\\n              href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.LABEL.send_invoice}}</a>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- Phiếu thu -->\\r\\n    <div class=\\\"container-fluid\\\" *ngIf=\\\"isReceipts\\\">\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-lg-7\\\">\\r\\n          <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item [label]=\\\"{text: _translate.GRID.INVOICE.template_receipts }\\\" dataField=\\\"template\\\"\\r\\n                [editorOptions]=\\\"{readOnly: true}\\\">\\r\\n              </dxi-item>\\r\\n            </dxi-item>\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"2\\\">\\r\\n              <dxi-item cssClass=\\\"invoice-number-create-invoice\\\" dataField=\\\"invoice_number\\\"\\r\\n                [label]=\\\"{text: _translate.GRID.INVOICE.receipts_number}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"invoice_date\\\" [label]=\\\"{text: _translate.GRID.INVOICE.receipts_date}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"class_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.class}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"student_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.name_student }\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n          </dx-form>\\r\\n        </div>\\r\\n        <div class=\\\"col-lg-5\\\">\\r\\n          <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n            <dxi-item itemType=\\\"group\\\" [colCount]=\\\"1\\\">\\r\\n              <dxi-item dataField=\\\"payment_method_name\\\" [label]=\\\"{text: _translate.CONTROLL.LABEL.payment_method}\\\"\\r\\n                [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n              <dxi-item dataField=\\\"amount\\\" [label]=\\\"{text: 'Tổng tiền'}\\\" [editorOptions]=\\\"{disabled: true}\\\">\\r\\n              </dxi-item>\\r\\n              <dxi-item dataField=\\\"buyer_email\\\" [label]=\\\"{text: 'Email'}\\\" [editorOptions]=\\\"{disabled: true}\\\"></dxi-item>\\r\\n            </dxi-item>\\r\\n          </dx-form>\\r\\n        </div>\\r\\n        <div class=\\\"col-lg-12 link-send-invoice\\\">\\r\\n          <div class=\\\"pull-right\\\">\\r\\n            <a *ngIf=\\\"invoice.status == 'DA_XUAT' && !isReceipts\\\" (click)=\\\"sendMail()\\\"\\r\\n              href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.LABEL.send_invoice}}</a>\\r\\n            <a *ngIf=\\\"invoice.status == 'DA_XUAT' && isReceipts\\\" (click)=\\\"sendMail()\\\"\\r\\n              href=\\\"javascript:void(0)\\\">{{_translate.CONTROLL.LABEL.send_receipts}}</a>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <dx-data-grid id=\\\"invoiceHistoryGrid\\\" [dataSource]=\\\"invoice_process\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      [showBorders]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\" [showRowLines]=\\\"true\\\">\\r\\n      <dxo-scrolling mode=\\\"virtual\\\"></dxo-scrolling>\\r\\n      <dxi-column cellTemplate=\\\"stt\\\" caption=\\\"{{_translate.GRID.INVOICE_DETAILS.view_order}}\\\" width=\\\"80\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"process_time\\\" caption=\\\"{{_translate.CONTROLL.LABEL.date_made}}\\\" width=\\\"180\\\"\\r\\n        dataType=\\\"datetime\\\" format=\\\"dd/MM/yyyy HH:mm:ss\\\" dateSerializationFormat=\\\"yyyy-MM-dd HH:mm:ss\\\"\\r\\n        alignment=\\\"center\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"content\\\" cellTemplate=\\\"content\\\" caption=\\\"{{_translate.CONTROLL.LABEL.task}}\\\"\\r\\n        alignment=\\\"left\\\"></dxi-column>\\r\\n      <dxi-column dataField=\\\"user_name\\\" caption=\\\"{{_translate.CONTROLL.LABEL.person_made}}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <div *dxTemplate=\\\"let d of 'stt'\\\">\\r\\n        <p>{{ d.rowIndex + 1 }}</p>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'content'\\\">\\r\\n        {{ d.data.content}}\\r\\n      </div>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back }}\\\" icon=\\\"{{_translate.ICONS.come_back }}\\\" type=\\\"default\\\"\\r\\n      (click)=\\\"bsModalRef.hide()\\\">\\r\\n    </dx-button>\\r\\n  </div>\\r\\n</form>\"","module.exports = \"::ng-deep .form-input-visibility{visibility:hidden}::ng-deep .invoice-number-create-invoice input{color:red;font-weight:bold}.link-send-invoice{margin-top:10px}.link-send-invoice a{text-decoration:underline}#invoiceHistoryGrid{margin-top:15px}\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport * as moment from 'moment';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nimport { Helper, AuthService, Library } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { SendMailComponent } from '../send-mail/send-mail.component';\r\n\r\n@Component({\r\n  selector: 'app-send-invoices',\r\n  templateUrl: './send-invoices.component.html',\r\n  styleUrls: ['./send-invoices.component.scss']\r\n})\r\nexport class SendInvoicesComponent implements OnInit {\r\n  isReceipts: any;\r\n  frmData: any = {};\r\n  invoice: any\r\n  invoice_process: any;\r\n  _translate: any;\r\n  constructor(\r\n    private authService: AuthService,\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private modalService: BsModalService,\r\n    public bsModalSendMail: BsModalRef,\r\n\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadTableContent();\r\n    let invoice = this.invoice;\r\n\r\n    this.frmData.template = `${invoice.template_code} - ${invoice.invoice_series}`;\r\n    this.frmData.invoice_date = moment(invoice.invoice_date).format('DD/MM/YYYY');\r\n    this.frmData.invoice_number = invoice.invoice_number;\r\n    this.frmData.customer_code = invoice.customer_code;\r\n    this.frmData.buyer_tax_code = invoice.buyer_tax_code;\r\n    this.frmData.buyer_name = invoice.buyer_name;\r\n    this.frmData.buyer_mobile = invoice.buyer_mobile;\r\n    this.frmData.buyer_email = invoice.buyer_email;\r\n    this.frmData.currency_code = invoice.currency_code;\r\n    this.frmData.payment_method_name = invoice.payment_method_view_name;\r\n    this.frmData.class_name = invoice.class_name;\r\n    this.frmData.amount = invoice.amount;\r\n    this.frmData.student_name = invoice.student_name;\r\n  }\r\n\r\n  loadTableContent() {\r\n    this.invoice_process = {};\r\n    let sub = this.vatService.getInvoiceProccess(this.invoice.id).subscribe(rs => {\r\n      this.invoice_process = rs.data.invoice_process;\r\n    }, err => { }, () => {\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  sendMail() {\r\n    const initialState = {\r\n      invoice_id: this.invoice.id,\r\n      email: this.frmData.buyer_email\r\n    };\r\n    this.bsModalSendMail = this.modalService.show(SendMailComponent, { class: 'modal-md', initialState, backdrop: 'static', keyboard: false });\r\n    this.modalService.onHide.subscribe(() => {\r\n      if (this.bsModalRef.content.successSaveItem == 'success_mail') {\r\n        this.loadTableContent();\r\n      }\r\n    });\r\n  }\r\n  onEditorPreparing(e) {\r\n    if (e.dataField === 'content' && e.parentType == \"dataRow\") {\r\n      e.editorName = 'dxTextArea';\r\n    }\r\n  }\r\n\r\n}\r\n","module.exports = \"<form (ngSubmit)=\\\"onSubmit($event)\\\">\\r\\n  <div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title pull-left\\\">{{_translate.CONTROLL.BUTTON.send}} EMAIL</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <dx-form [formData]=\\\"frmData\\\" validationGroup=\\\"formData\\\">\\r\\n      <dxi-item dataField=\\\"email\\\" [label]=\\\"{text: 'Email'}\\\">\\r\\n        <dxi-validation-rule type=\\\"required\\\" message=\\\"Email {{_translate.VALIDATION.required}}\\\"></dxi-validation-rule>\\r\\n        <!-- <dxi-validation-rule type=\\\"pattern\\\" [pattern]=\\\"pattern.email\\\" message=\\\"Email {{_translate.VALIDATION.not_pattern}}\\\"></dxi-validation-rule> -->\\r\\n      </dxi-item>\\r\\n    </dx-form>\\r\\n    <div style=\\\"margin-top: 10px;\\\">\\r\\n        <a style=\\\"color: silver;text-decoration: underline;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.note1}}: </a><a style=\\\"color: silver;font-size: 90%;\\\"> {{_translate.CONTROLL.LABEL.note_email}}</a>\\r\\n      </div>\\r\\n      <div style=\\\"margin-top: 5px;\\\">\\r\\n          <a style=\\\"color: silver;font-size: 90%;\\\">{{_translate.CONTROLL.LABEL.example}}: admin@efy.com.vn;sale@efy.com.vn</a>\\r\\n        </div>\\r\\n  </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.send}}\\\" icon=\\\"{{_translate.ICONS.send_email}}\\\" type=\\\"default\\\" validationGroup=\\\"formData\\\" [useSubmitBehavior]=\\\"true\\\">\\r\\n    </dx-button>\\r\\n    <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    </dx-button>\\r\\n  </div>\\r\\n</form>\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\n\r\nimport { pattern } from '@config/index';\r\nimport { Helper, Library,AuthService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\n@Component({\r\n  selector: 'app-send-mail',\r\n  templateUrl: './send-mail.component.html',\r\n  styleUrls: ['./send-mail.component.scss']\r\n})\r\nexport class SendMailComponent implements OnInit {\r\n\r\n  invoice_id: any;\r\n  frmData: any = {};\r\n  email: string;\r\n  pattern = pattern;\r\n  _translate: any;\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private authService: AuthService,\r\n  ) { \r\n    this._translate = this.authService.getTranslate();\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.frmData.email = this.email;\r\n  }\r\n\r\n  onSubmit(e) {\r\n    let data = [{\r\n      id: this.invoice_id,\r\n      email: this.frmData.email\r\n    }];\r\n    Library.showloading();\r\n    let sub = this.vatService.sendMail(data).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        Library.notify(this._translate.NOTIFY.send_mail_success, 'success');\r\n        this.bsModalRef.content.successSaveItem = \"success_mail\";\r\n        this.bsModalRef.hide();\r\n      } else {\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => {}, () => {\r\n      Library.hideloading();\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title pull-left\\\">{{ 'MENU.list_invoice_waiting_for_signing' | translate }}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"bsModalRef.hide()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <dx-data-grid \\r\\n    id=\\\"gridContainer\\\"\\r\\n    [dataSource]=\\\"invoiceList\\\"\\r\\n    [showRowLines]=\\\"true\\\"\\r\\n    [allowColumnResizing]=\\\"true\\\"\\r\\n    [columnMinWidth]=\\\"50\\\"\\r\\n    [columnResizingMode]=\\\"true\\\"\\r\\n    [columnAutoWidth]=\\\"true\\\"\\r\\n    [wordWrapEnabled]=\\\"true\\\">\\r\\n\\r\\n    <dxo-load-panel [enabled]=\\\"true\\\"></dxo-load-panel>\\r\\n    <dxi-column dataField=\\\"invoice_number\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_number' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template_code\\\" caption=\\\"{{ 'GRID.INVOICE.template_code' | translate }}\\\" [width]=\\\"110\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"template.invoice_series\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_series' | translate }}\\\" [width]=\\\"90\\\" alignment=\\\"center\\\" [allowSorting]=\\\"false\\\" [allowFiltering]=\\\"false\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"invoice_date\\\" caption=\\\"{{ 'GRID.INVOICE.invoice_date' | translate }}\\\" [width]=\\\"110\\\" dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" dateSerializationFormat=\\\"yyyy-MM-dd\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"class_name\\\" caption=\\\"{{ 'CONTROLL.LABEL.class' | translate }}\\\" width=\\\"{{_translate.GRID_WIDTH.ma_so_thue}}\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"customerName\\\" caption=\\\"{{ 'CONTROLL.LABEL.name_student' | translate }}\\\" alignment=\\\"left\\\"></dxi-column>\\r\\n    <dxi-column dataField=\\\"total_payment\\\" caption=\\\"{{ 'GRID.INVOICE.total_payment' | translate }}\\\" dataType=\\\"number\\\" format=\\\"0,###.##\\\"  alignment=\\\"right\\\" ></dxi-column>\\r\\n    <dxi-column cellTemplate=\\\"statusName\\\" caption=\\\"{{ 'GRID.GENERAL.status' | translate }}\\\" [width]=\\\"130\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n    <div *dxTemplate=\\\"let d of 'templateCode'\\\">\\r\\n      <p>{{ d.data.template.template_code }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'customerName'\\\">\\r\\n      <p *ngIf=\\\"d.data.status !='GIU_SO'\\\">{{ d.data.student_name }}</p>\\r\\n      <p *ngIf=\\\"d.data.status =='GIU_SO'\\\">{{ d.data.student_name || _translate.GRID.INVOICE.invoice_wait_for_sign }}</p>\\r\\n    </div>\\r\\n    <div *dxTemplate=\\\"let d of 'statusName'\\\">\\r\\n      <p *ngIf=\\\"d.data.statusByMe =='DA_KY'\\\">Đã ký</p>\\r\\n      <p *ngIf=\\\"d.data.statusByMe !='DA_KY'\\\">{{ d.data.statusByMe }}</p>\\r\\n    </div>\\r\\n    \\r\\n    <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n  </dx-data-grid>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.sign}}\\\" icon=\\\"{{_translate.ICONS.pencil}}\\\" *ngIf=\\\"!daXong\\\" type=\\\"default\\\" (click)=\\\"kyHangLoat()\\\">\\r\\n  </dx-button>\\r\\n  <dx-button text=\\\"{{_translate.CONTROLL.BUTTON.come_back}}\\\" icon=\\\"{{_translate.ICONS.come_back}}\\\" type=\\\"default\\\" (click)=\\\"dong()\\\">\\r\\n  </dx-button>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<!-- popup -->\\r\\n<dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"400\\\"\\r\\n  [height]=\\\"120\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"{{_translate.NOTIFY.processing}}\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  (onShowing)=\\\"onImportShowing($event)\\\"\\r\\n  (onHiding)=\\\"onImportHiding($event)\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <div style=\\\"height: 30px;\\\">\\r\\n      <dx-progress-bar \\r\\n        [min]=\\\"0\\\" \\r\\n        [max]=\\\"100\\\" \\r\\n        [value]=\\\"valueProgress\\\"\\r\\n        [statusFormat]=\\\"format\\\">\\r\\n      </dx-progress-bar>\\r\\n    </div>\\r\\n    <!-- <p style=\\\"height: 25px;\\\">\\r\\n        <span>{{thongbao}}</span>\\r\\n    </p> -->\\r\\n  </div>\\r\\n</dx-popup>\\r\\n\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport * as moment from 'moment';\r\n\r\nimport { Helper, Library, SocketService, AuthService, VStringService } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\n\r\n@Component({\r\n  selector: 'app-sign-many',\r\n  templateUrl: './sign-many.component.html',\r\n  styleUrls: ['./sign-many.component.scss']\r\n})\r\nexport class SignManyComponent implements OnInit {\r\n\r\n  invoices: any;\r\n  configs: any;\r\n  invoiceList: any;\r\n  ioSignature: any;\r\n  invoiceIndex = 0;\r\n  tempKiFile = 0;\r\n  tempTemplate: any;\r\n  daXong: boolean = false;\r\n  ganXong: boolean = false;\r\n  valueProgress: number = 0;\r\n  errorImport: boolean = false;\r\n  subXuatHoaDon: any;\r\n  showPopup = false;\r\n  totalInvoice: number;\r\n  _translate: any;\r\n  nodeSign: any;\r\n  isTT78: boolean = false;\r\n  infoDangKy: any;\r\n  format = (value) => {\r\n    let percent = Math.round(value * 100);\r\n    return this._translate.NOTIFY.finish + \": \" + percent + '%';\r\n  }\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private vatService: VatService,\r\n    private socketService: SocketService,\r\n    private authService: AuthService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n    const currentUser = this.authService.getCurrentUser();\r\n    this.infoDangKy = this.authService.getInfoRegister();\r\n    if (this.infoDangKy) {\r\n      if (this.infoDangKy.status == \"CHAP_NHAN\")\r\n        this.isTT78 = true;\r\n    }\r\n    this.convertData();\r\n    this.connectWebsocket();\r\n  }\r\n\r\n  convertData() {\r\n    this.invoiceList.forEach(item => {\r\n      item.invoice_date = moment(item.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n      delete item.updated_at;\r\n      delete item.decpoint_is_dot;\r\n      delete item.money_decimal_format;\r\n      item.invoice_products = item.invoice_products.sort((itemA, itemB) => {\r\n        return itemA.order - itemB.order;\r\n      });\r\n    });\r\n  }\r\n\r\n  onImportShowing(e) {\r\n    this.valueProgress = 0;\r\n  }\r\n\r\n  onImportHiding(e) {\r\n    let r = true;\r\n    if (this.valueProgress < 100 && this.errorImport == false) {\r\n      r = confirm(this._translate.CONFIRM.sign_stop);\r\n    }\r\n    if (r) {\r\n      if (this.subXuatHoaDon) {\r\n        this.subXuatHoaDon.unsubscribe();\r\n      }\r\n      this.valueProgress = 0;\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  connectWebsocket() {\r\n    this.ioSignature = this.socketService.lapHoaDonImport().subscribe(message => {\r\n      let data: any = message;\r\n      if (data.Status == 'success') {\r\n        if (data.SvcName == \"efy_Sign\") {\r\n          let i = this.invoiceIndex;\r\n          if (data.Data.Name == 'hoadon.xml') {\r\n            this.goiApiXuatHoaDon(data.Data.Content, this.invoices[i]);\r\n          } else if (data.Data.Name == 'ten_filek_the_trung-dc-nhi.xml') {\r\n            this.invoices[i].issuer_name = data.Data.IssuerName;\r\n            this.xuLiApiKhiXuat(this.invoices[i]);\r\n          } else {\r\n            this.invoices[i].invoice_files.forEach(item => {\r\n              if (item.file_name == data.Data.Name) {\r\n                item.file_content = data.Data.Content;\r\n              }\r\n            });\r\n            this.tempKiFile++;\r\n            if (this.tempKiFile == this.invoices[i].invoice_files.length) {\r\n              this.xuLiApiKhiXuat(this.invoices[i]);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(data.Description, 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  xuLyKiFile(xmlInvoice, signDate) {\r\n    if (this.isTT78) {\r\n      let ListSerialNumber = \"DSCKS\";\r\n      if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n        let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n        if (signatures && signatures.length > 0)\r\n          ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n      }\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate, 'InvoiceData', ListSerialNumber, true);\r\n    }\r\n    else\r\n      this.socketService.kiSo(() => this.connectWebsocket(), xmlInvoice, 'hoadon.xml', this.nodeSign, signDate);\r\n  }\r\n\r\n  xuLiApiKhiXuat(invoice) {\r\n    let tempTemplate = invoice.template;\r\n    delete invoice.template;\r\n    let xmlInvoice = \"\";\r\n    let isNewXml = 0;\r\n    if (!this.isTT78) {\r\n      let sub = this.vatService.edit(invoice.id, invoice, true).subscribe(rs => {\r\n        invoice.template = tempTemplate;\r\n        if (rs.status == 'success') {\r\n          invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, invoice.invoice_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.invoiceList[this.invoiceIndex].statusByMe = rs.message;\r\n          this.showPopup = false;\r\n          this.errorImport = true;\r\n          //this.onImportHiding();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n    else {\r\n      let sub = this.vatService.editTT78(invoice.id, invoice, true).subscribe(rs => {\r\n        invoice.template = tempTemplate;\r\n        if (rs.status == 'success') {\r\n          invoice.invoice_date = moment(rs.data.invoice_date).format('YYYY-MM-DD HH:mm:ss');\r\n          let invoice_sign_date = moment(rs.data.invoice_sign_date).format('YYYY-MM-DD HH:mm:ss');\r\n          //demo kí số vào file\r\n          //  Lấy xml từ serer\r\n          isNewXml = rs.data.is_new_xml;\r\n          if (isNewXml)\r\n            this.nodeSign = \"//HDon/DSCKS/NBan\";\r\n          else\r\n            this.nodeSign = \"//inv:transaction/inv:invoices/inv:invoice\";\r\n          xmlInvoice = VStringService._getValueToString(rs.data.xml_string);\r\n          if (xmlInvoice != \"\") {\r\n            if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n              || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n              this.goiApiXuatHoaDon(xmlInvoice, invoice);\r\n            } else {\r\n              this.xuLyKiFile(xmlInvoice, invoice_sign_date);\r\n            }\r\n          }\r\n        } else {\r\n          this.invoiceList[this.invoiceIndex].statusByMe = rs.message;\r\n          this.showPopup = false;\r\n          this.errorImport = true;\r\n          //this.onImportHiding();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => { }, () => {\r\n        sub.unsubscribe();\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  goiApiXuatHoaDon(xml_string, invoice) {\r\n    let percentComplete = 100 / this.totalInvoice;\r\n    // Helper.dowloadFile('hoadon.xml', 'xml', xml_string);\r\n    this.subXuatHoaDon = this.vatService.xuatHoaDon({\r\n      id: invoice.id,\r\n      xml_string: xml_string,\r\n      invoice_files: invoice.invoice_files\r\n    }).subscribe(rs => {\r\n      if (rs.status == 'success') {\r\n        this.valueProgress += percentComplete;\r\n        this.invoiceList[this.invoiceIndex].statusByMe = 'DA_KY';\r\n        this.ganXong = true;\r\n        this.tempKiFile = 0;\r\n\r\n        if (this.invoiceIndex < this.totalInvoice - 1) {\r\n          this.invoiceIndex++;\r\n          this.xuatHoaDon();\r\n        } else if (this.invoiceIndex == this.totalInvoice - 1) {\r\n          Library.notify(this._translate.NOTIFY.sign_success, 'success');\r\n          this.daXong = true;\r\n          setTimeout(() => {\r\n            this.showPopup = false;\r\n          }, 300);\r\n        }\r\n      } else {\r\n        this.invoiceList[this.invoiceIndex].statusByMe = rs.message;\r\n        this.showPopup = false;\r\n        this.errorImport = true;\r\n        Library.notify(rs.message, 'error');\r\n      }\r\n    }, err => { }, () => {\r\n      // Library.hideloading();\r\n      this.subXuatHoaDon.unsubscribe();\r\n    });\r\n  }\r\n\r\n  xuatHoaDon() {\r\n    let i = this.invoiceIndex;\r\n    if (this.configs.integrate_parameter.concentrate_signature.is_concentrate_signature\r\n      || (this.configs.integrate_parameter.remote_signing && this.configs.integrate_parameter.remote_signing.is_remote_signing)) {\r\n      this.xuLiApiKhiXuat(this.invoices[i]);\r\n    } else {\r\n      if (this.invoices[i].invoice_files.length) {\r\n        this.invoices[i].invoice_files.forEach(item => {\r\n          this.socketService.kiFile(() => this.connectWebsocket(), item.file_content, item.file_name, item.file_name.split('.').pop(), true, this.invoices[i].invoice_date);\r\n        });\r\n      }\r\n      else {\r\n        if (this.isTT78) {\r\n          let ListSerialNumber = \"DSCKS\";\r\n          if (this.infoDangKy && this.infoDangKy.registration_signature) {\r\n            let signatures = this.infoDangKy.registration_signature.filter(p => p.register_form == \"THEM_MOI\" || p.register_form == \"GIA_HAN\");\r\n            if (signatures && signatures.length > 0)\r\n              ListSerialNumber = signatures.map((obj: any) => obj.cert_serial).join(';');\r\n          }\r\n          let invoiceDate = moment(new Date()).format('YYYY-MM-DD HH:mm:ss');\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice', invoiceDate, \"\", ListSerialNumber, true);\r\n        }\r\n        else\r\n          this.socketService.kiSo(() => this.connectWebsocket(), 'PHRlbXBJbnZvaWNlPjwvdGVtcEludm9pY2U+', 'ten_filek_the_trung-dc-nhi.xml', '//tempInvoice')\r\n      }\r\n    }\r\n  }\r\n\r\n  kyHangLoat() {\r\n    Library.confirmVA(this._translate.CONFIRM.sign_inv, this._translate.NOTIFY.notify, () => {\r\n      this.showPopup = true;\r\n      this.invoices = JSON.parse(JSON.stringify(this.invoiceList.filter(item => item.statusByMe != 'DA_KY')));\r\n      console.log(this.invoices);\r\n      this.totalInvoice = this.invoices.length;\r\n      this.invoiceIndex = 0;\r\n      this.tempKiFile = 0;\r\n      this.xuatHoaDon();\r\n    });\r\n  }\r\n\r\n  dong() {\r\n    if (this.ganXong) {\r\n      this.bsModalRef.content.successSaveItem = \"success\";\r\n    }\r\n    this.bsModalRef.hide()\r\n  }\r\n\r\n\r\n}","module.exports = \"<!-- Phần không tự tính giá trị, nhập mẫu bảng kê -->\\r\\n<div class=\\\"row support-invoice\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <h4 class=\\\"label-student pull-left\\\">{{_translate.CONTROLL.LABEL.list_student_selected}}</h4>\\r\\n    <!-- <h1>DANH SÁCH HS - SV ĐÃ ĐƯỢC CHỌN </h1> -->\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- phần table hiển thị -->\\r\\n<div class=\\\"row invoice-table\\\">\\r\\n  <div class=\\\"col-md-12\\\">\\r\\n    <dx-data-grid id=\\\"gridInvoiceStudent\\\" [dataSource]=\\\"dataSource\\\" [showBorders]=\\\"true\\\" [showRowLines]=\\\"true\\\"\\r\\n      [allowColumnResizing]=\\\"true\\\" [columnResizingMode]=\\\"true\\\" [wordWrapEnabled]=\\\"true\\\"\\r\\n      (onKeyDown)=\\\"onGripKeyDown($event)\\\" (onContextMenuPreparing)=\\\"onContextMenuPreparing($event)\\\"\\r\\n      (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" (onEditorPreparing)=\\\"onEditorPreparing($event)\\\"\\r\\n      (onRowPrepared)=\\\"onRowPrepared($event)\\\" (onCellPrepared)=\\\"onCellPrepared($event)\\\"\\r\\n      (onContentReady)=\\\"onContentReady($event)\\\" noDataText=\\\"Chưa có dữ liệu\\\" (onRowRemoving)=\\\"onRowRemoving($event)\\\">\\r\\n      <!-- [wordWrapEnabled]=\\\"true\\\" (onEditorPrepared)=\\\"onEditorPrepared($event)\\\" -->\\r\\n      <dxo-editing mode=\\\"cell\\\" [allowUpdating]=\\\"!ttDaXuatHoaDon\\\" [allowDeleting]=\\\"true\\\" [useIcons]=\\\"true\\\">\\r\\n        <dxo-texts confirmDeleteMessage=\\\"Bạn có chắc chắn xóa bản ghi đã chọn?\\\">\\r\\n        </dxo-texts>\\r\\n      </dxo-editing>\\r\\n      <dxo-scrolling mode=\\\"virtual\\\">\\r\\n        <!-- or \\\"virtual\\\" | \\\"infinite\\\" -->\\r\\n      </dxo-scrolling>\\r\\n      <dxo-sorting mode=\\\"false\\\"></dxo-sorting>\\r\\n      <dxo-column-fixing [enabled]=\\\"true\\\"></dxo-column-fixing>\\r\\n      <dxo-filter-row [visible]=\\\"true\\\"></dxo-filter-row>\\r\\n      <dxi-column dataField=\\\"invoice_series_order\\\" alignment=\\\"center\\\" [visible]=\\\"false\\\" sortOrder=\\\"asc\\\"></dxi-column>\\r\\n      <!-- Số thứ tự -->\\r\\n      <!-- <dxi-column dataField=\\\"view_order\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.view_order }}\\\"\\r\\n                  minWidth=\\\"{{ _translate.GRID_WIDTH.stt }}\\\" allowFiltering=\\\"false\\\" allowHeaderFiltering = \\\"false\\\"\\r\\n                  alignment=\\\"center\\\" [fixed]=\\\"true\\\" fixedPosition=\\\"left\\\"></dxi-column> -->\\r\\n      <!-- Hóa đơn trùng -->\\r\\n      <dxi-column cellTemplate=\\\"duplicateColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.duplicate_invoice }}\\\"\\r\\n        *ngIf=\\\"!isReceipts\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Phiếu thu trùng -->\\r\\n      <dxi-column cellTemplate=\\\"duplicateColumn\\\" caption=\\\"{{ _translate.GRID.INVOICE_DETAILS.receipts_invoice }}\\\"\\r\\n        *ngIf=\\\"isReceipts\\\" [allowEditing]=\\\"false\\\" width=\\\"100\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Mã HS-SV -->\\r\\n      <dxi-column dataField=\\\"student_code\\\" *ngIf=\\\"!isReceipts\\\" caption=\\\"{{  _translate.CONTROLL.LABEL.code_student }}\\\"\\r\\n        alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Tên HS-SV -->\\r\\n      <dxi-column dataField=\\\"student_name\\\" *ngIf=\\\"!isReceipts\\\" caption=\\\"{{  _translate.CONTROLL.LABEL.name_student }}\\\"\\r\\n        alignment=\\\"left\\\" allowFiltering=\\\"true\\\"></dxi-column>\\r\\n      <!-- Số hóa đơn -->\\r\\n      <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\" *ngIf=\\\"!isReceipts\\\"\\r\\n        caption=\\\"{{  _translate.GRID.INVOICE.invoice_number }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Số phiếu thu -->\\r\\n      <dxi-column cellTemplate=\\\"invoiceNumber\\\" dataField=\\\"invoice_number\\\" *ngIf=\\\"isReceipts\\\" width=\\\"100\\\"\\r\\n        caption=\\\"{{  _translate.GRID.INVOICE.receipts_number }}\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Ngày phiếu thu -->\\r\\n      <dxi-column dataField=\\\"invoice_date\\\" *ngIf=\\\"isReceipts\\\" caption=\\\"{{   _translate.GRID.INVOICE.receipts_date }}\\\"\\r\\n        dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Mã HS-SV -->\\r\\n      <dxi-column dataField=\\\"student_code\\\" *ngIf=\\\"isReceipts\\\" caption=\\\"{{  _translate.CONTROLL.LABEL.code_student }}\\\"\\r\\n        alignment=\\\"center\\\" width=\\\"100\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Tên HS-SV -->\\r\\n      <dxi-column dataField=\\\"student_name\\\" *ngIf=\\\"isReceipts\\\" caption=\\\"{{  _translate.CONTROLL.LABEL.name_student }}\\\"\\r\\n        alignment=\\\"left\\\" allowFiltering=\\\"true\\\"></dxi-column>\\r\\n      <!-- Ngày hóa đơn -->\\r\\n      <dxi-column dataField=\\\"invoice_date\\\" *ngIf=\\\"!isReceipts\\\" caption=\\\"{{   _translate.GRID.INVOICE.invoice_date }}\\\"\\r\\n        dataType=\\\"date\\\" format=\\\"dd/MM/yyyy\\\" [allowEditing]=\\\"false\\\" alignment=\\\"center\\\"></dxi-column>\\r\\n      <!-- Lớp -->\\r\\n      <dxi-column dataField=\\\"class_name\\\" width=\\\"70\\\" caption=\\\"{{  _translate.CONTROLL.LABEL.class }}\\\" alignment=\\\"center\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Tỉ lệ miễn giảm -->\\r\\n      <dxi-column cellTemplate=\\\"student_reduce_rate_code\\\" *ngIf=\\\"isReceipts\\\" width=\\\"120\\\"\\r\\n        caption=\\\"{{ _translate.CONTROLL.LABEL.exemption_and_reduction_rates}}\\\" alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- Địa chỉ -->\\r\\n      <dxi-column dataField=\\\"buyer_address\\\" caption=\\\"{{  _translate.CONTROLL.LABEL.address }}\\\"\\r\\n        alignment=\\\"left\\\">\\r\\n      </dxi-column>\\r\\n      <!-- config column -->\\r\\n      <div *dxTemplate=\\\"let d of 'duplicateColumn'\\\">\\r\\n        <a *ngIf=\\\"d.data.statusData == 'ERROR_DUPLICATE'\\\" class=\\\"copyIcon actionIcon\\\" href=\\\"javascript:void(0)\\\"\\r\\n          (click)=\\\"duplicateColumn(d.data)\\\"><i></i></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'invoiceNumber'\\\">\\r\\n        <a class=\\\"gach-chan\\\" (click)=\\\"view(d.data)\\\" href=\\\"javascript:void(0)\\\">{{ d.data.invoice_number }}<span\\r\\n            *ngIf=\\\"d.data.time_print_conversion\\\">-CĐ ({{ d.data.time_print_conversion }})</span></a>\\r\\n      </div>\\r\\n      <div *dxTemplate=\\\"let d of 'student_reduce_rate_code'\\\">\\r\\n        <p *ngIf=\\\"d.data.student_reduce_rate_code == 'MIEN_GIAM_70'\\\">Miễn giảm 70%</p>\\r\\n        <p *ngIf=\\\"d.data.student_reduce_rate_code == 'MIEN_GIAM_100'\\\">Miễn giảm 100%</p>\\r\\n        <p *ngIf=\\\"d.data.student_reduce_rate_code == 'MIEN_GIAM_50'\\\">Miễn giảm 50%</p>\\r\\n        <p *ngIf=\\\"d.data.student_reduce_rate_code == 'KHONG_MIEN_GIAM'\\\">Không miễn giảm</p>\\r\\n      </div>\\r\\n      <!-- <div *dxTemplate=\\\"let d of 'invoiceDate'\\\">\\r\\n        <div class=\\\"gach-chan\\\">{{ d.data.invoice_date }}</div>\\r\\n      </div> -->\\r\\n      <dxo-paging [enabled]=\\\"false\\\"></dxo-paging>\\r\\n      <dxo-remote-operations [sorting]=\\\"false\\\" [filtering]=\\\"false\\\"></dxo-remote-operations>\\r\\n    </dx-data-grid>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- <dx-popup\\r\\n  class=\\\"popup\\\"\\r\\n  [width]=\\\"350\\\"\\r\\n  [height]=\\\"175\\\"\\r\\n  [showTitle]=\\\"true\\\"\\r\\n  title=\\\"Thông báo\\\"\\r\\n  [dragEnabled]=\\\"false\\\"\\r\\n  [closeOnOutsideClick]=\\\"true\\\"\\r\\n  [(visible)]=\\\"showPopup\\\">\\r\\n  <div *dxTemplate=\\\"let data of 'content'\\\">\\r\\n    <p style=\\\"margin-bottom: 35px;\\\">{{_translate.CONFIRM.update_customer}}</p>\\r\\n    <div class=\\\"pull-right\\\">\\r\\n      <dx-button (click)=\\\"capNhatDmKhachHang()\\\" text=\\\"{{_translate.CONTROLL.LABEL.update}}\\\" type=\\\"default\\\"></dx-button>\\r\\n      <dx-button (click)=\\\"huy()\\\" text=\\\"{{_translate.CONTROLL.BUTTON.cancel}}\\\" type=\\\"default\\\"></dx-button>\\r\\n    </div>\\r\\n  </div>\\r\\n</dx-popup> -->\"","module.exports = \".delete-row i{color:#0E77BB;font-size:18px}.support-invoice{margin-top:5px;margin-bottom:5px}.support-invoice .support-link{padding:6px 15px;border:1px solid #007bff;text-decoration:none}.support-invoice .support-link.mgr-15{margin-right:8px}.support-invoice .support-link img,.support-invoice .support-link i{margin-right:15px;margin-top:-2px}.support-invoice .auto-input{margin-right:75px !important}::ng-deep .vat.amount-table-footer input,::ng-deep .vat.amount-vat-table-footer input,::ng-deep .vat.amount-after-vat-table-footer input{font-weight:bold;text-align:right;color:#0034F5}::ng-deep .styleItemToList{color:dodgerblue}.button-dropdown-extend{display:inline-flex}.label-student{font-size:14px;font-weight:600;text-transform:uppercase;color:#0e76bc}.ColumnsAutomatic{background-color:maroon;text-align:center}.cho-ky{color:#008b8b}.gach-chan{color:#008b8b;text-align:center}::ng-deep #gridInvoiceStudent .dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit{width:40px;min-width:20px !important}::ng-deep #gridInvoiceStudent{height:290px}\\n\"","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal/bs-modal-ref.service';\r\nimport { BsModalService } from 'ngx-bootstrap/modal';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport CustomStore from 'devextreme/data/custom_store';\r\nimport { AuthService, VStringService, Library, VPreviewInvService } from '@core/index';\r\nimport { InvoiceModel, VatService } from '@modules/vat/shared';\r\nimport { ProductsService } from '@modules/products/shared';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { sEnum } from '@config/sEnum';\r\n\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-student-invoice-grip',\r\n  templateUrl: './student-invoice-grip.component.html',\r\n  styleUrls: ['./student-invoice-grip.component.scss']\r\n})\r\nexport class StudentInvoiceGripComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild(DxDataGridComponent) dataGrid: DxDataGridComponent;\r\n  @Input() dataSource: any;\r\n  @Input() invoice_products: any;\r\n  @Input() formatter: any;\r\n  @Input() isHdGTGT: any;\r\n  @Input() _objTemplateSelect: any;\r\n  @Input() valueFormInvoice: any;\r\n  @Input() formDataInInvoice: any; // Không tự tính giá trị\r\n  @Input() isReceipts: any;\r\n  @Output('onStudentChange') onStudentChange = new EventEmitter<any>();\r\n  routeSub: Subscription;\r\n  select: any = {};\r\n  _translate: any;\r\n  frmData: InvoiceModel = new InvoiceModel(1);\r\n  bsModalRef: BsModalRef;\r\n  showPopup = false; // Popup\r\n  dataExcelFile: any = null;\r\n  ttDaXuatHoaDon = false;\r\n  configs: any;\r\n  amount_after_vat: any = 0;\r\n  extras = [];\r\n  rowData = 1;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private modalService: BsModalService,\r\n    private vatService: VatService,\r\n    private productsService: ProductsService,\r\n    private authService: AuthService,\r\n    public translate: TranslateService,\r\n  ) {\r\n    this._translate = this.authService.getTranslate();\r\n    translate.use(this.authService.getLanguage());\r\n    this.extras = [{\r\n      id: '1',\r\n      name: this._translate.CONTROLL.BUTTON.import_from_excel,\r\n      items: [\r\n        {\r\n          id: 'LAY_MAU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.get_the_sample_file,\r\n          icon: this._translate.ICONS.download\r\n        },\r\n        {\r\n          id: 'NAP_DU_LIEU_BANG_KE',\r\n          name: this._translate.CONTROLL.BUTTON.import_data,\r\n          icon: this._translate.ICONS.excel\r\n        }\r\n      ]\r\n    }];\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.configs = this.authService.getConfigs();\r\n\r\n    // let a = moment(new Date()).format('HH:mm:ss.SSS');\r\n    this.routeSub = this.route.data.subscribe((data: any) => {\r\n      // put data DM for select\r\n      this.select.unit_codes = data.init[1].DM_DON_VI_TINH;\r\n      this.select.select_provisions_on_accounts = data.init[1].DM_DINH_KHOAN;\r\n      this.select.vats = data.init[1].DM_TY_LE_VAT;\r\n      this.select.countrys = data.init[1].DM_QUOC_GIA;\r\n      // Hàng hóa dịch vụ\r\n    //   if(data.init[2])\r\n    //   {\r\n    //     this.select.products = data.init[2];\r\n    //     this.select.products.forEach(item => {\r\n    //       item.mhvth = item.code + ': ' + item.name;\r\n    //     });\r\n    //   }\r\n    //   if (data.init[4]) {\r\n    //     if (data.init[4].invoice_products) {\r\n    //       data.init[4].invoice_products.forEach(item => {\r\n    //         if (item.product_name && item.unit_name) {\r\n    //           const obj1 = this.select.unit_codes.filter(p => p.name === item.unit_name)[0];\r\n    //           if (!obj1) {\r\n    //             this.select.unit_codes.push({ code: VStringService._convertToViKdau(item.unit_name), name: item.unit_name });\r\n    //           }\r\n    //         }\r\n    //       });\r\n    //     }\r\n    //   }\r\n\r\n    //   this.select.productsView = {\r\n    //     store: new CustomStore({\r\n    //       key: 'code',\r\n    //       loadMode: 'raw',\r\n    //       load: (loadOptions) => {\r\n    //         return this.select.products;\r\n    //       },\r\n    //       byKey: function (key) {\r\n    //         return data.init[2].filter(p => p.code === key.toString());\r\n    //       }\r\n    //     }),\r\n    //     paginate: true,\r\n    //     sort: 'name'\r\n    //   };\r\n     });\r\n\r\n  }\r\n\r\n  onGripKeyDown(e) {\r\n    if (e.event.code === 'Delete') {\r\n      e.event.srcElement.value = null;\r\n    }\r\n  }\r\n\r\n  onRowPrepared(e) {\r\n    // if (e.rowType === 'data') {\r\n    //   e.rowElement.style.whiteSpace = 'pre-wrap';\r\n    //   const eles = e.rowElement.getElementsByTagName('td');\r\n    //   if (!e.isEditing) {\r\n    //     eles[2].innerHTML = e.data.product_code;\r\n    //   }\r\n    //   if (e.data.error) {\r\n    //     const ele = eles[eles.length - 1];\r\n    //     ele.style.background = 'red url(\\'assets/img/icons/fa-remove.png\\') no-repeat 2% center';\r\n    //     ele.title = e.data.error;\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  onEditorPreparing(e) {\r\n    if (e.parentType == \"filterRow\") {\r\n      // if (e.dataField != \"student_name\") {\r\n      //   e.cancel = true;\r\n      // }\r\n    }\r\n  }\r\n\r\n\r\n  onEditorPrepared(e) {\r\n    // if ((e.dataField === 'amount_without_discount' || e.dataField === 'discount' || e.dataField === 'amount_discount' || e.dataField === 'quantity' || e.dataField === 'price' || e.dataField === 'amount' || e.dataField === 'amount_vat' || e.dataField === 'amount_after_vat') && e.parentType === 'dataRow') {\r\n    //   e.editorElement.childNodes[1].firstChild.onwheel = (evt) => {\r\n    //     e.component.cancelEditData();\r\n    //   };\r\n\r\n    //   e.editorElement.childNodes[1].firstChild.addEventListener('select', function () {\r\n    //     this.selectionStart = this.selectionEnd;\r\n    //   }, false);\r\n    // }\r\n  }\r\n\r\n  view_orderChange() {\r\n    let _index = 0;\r\n    this.dataSource.items().forEach(item => {\r\n      if (item.view_order && VStringService._getValueToString(this._objTemplateSelect.template_type) != sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n        item.view_order = ++_index;\r\n      }\r\n      if (VStringService._getValueToString(this._objTemplateSelect.template_type) == sEnum.templatetype.HoaDonNhaHangKhachSan) {\r\n        if (!item.is_money_service) {\r\n          item.view_order = ++_index;\r\n        } else {\r\n          item.view_order = null;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  checkUnitCode(unitCode) {\r\n    const items = this.select.unit_codes;\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].code === unitCode) {\r\n        return unitCode;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  caculatorAmountVat(amount, vat) {\r\n    const temp = amount / 100 * vat;\r\n    return this.roundNumber(temp, 5);\r\n  }\r\n\r\n  roundNumber(number, n): number {\r\n    let p = Math.pow(10, n);\r\n    return Math.round(number * p) / p;\r\n  }\r\n\r\n  duplicateColumn(item) {\r\n    this.onStudentChange.emit(item);\r\n  }\r\n\r\n  updateSomeTotalInput() {\r\n    // let arr = [], amountk = 0, amountx = 0, amount0 = 0, amount5 = 0, amount10 = 0;\r\n    // this.dataSource.items().forEach(item => {\r\n    //   if (item.commercial_discount) {\r\n    //     if (item.vat == 5) amount5 -= item.amount_after_vat;\r\n    //     if (item.vat == 10) amount10 -= item.amount_after_vat;\r\n    //     if (item.vat == -1) amountx -= item.amount_after_vat;\r\n    //     if (item.vat == 0 && item.vat != \"\") amount0 -= item.amount_after_vat;\r\n    //     if (item.vat === \"\") amountk -= item.amount_after_vat;\r\n    //   } else {\r\n    //     if (item.vat == 5) amount5 += item.amount_after_vat;\r\n    //     if (item.vat == 10) amount10 += item.amount_after_vat;\r\n    //     if (item.vat == -1) amountx += item.amount_after_vat;\r\n    //     if (item.vat == 0 && item.vat != \"\") amount0 += item.amount_after_vat;\r\n    //     if (item.vat === \"\") amountk += item.amount_after_vat;\r\n    //   }\r\n    // });\r\n\r\n    // if (amountk < 0) {\r\n    //   arr.push('');\r\n    // }\r\n    // if (amountx < 0) {\r\n    //   arr.push('-1');\r\n    // }\r\n    // if (amount0 < 0) {\r\n    //   arr.push('0');\r\n    // }\r\n    // if (amount5 < 0) {\r\n    //   arr.push('5');\r\n    // }\r\n    // if (amount10 < 0) {\r\n    //   arr.push('10');\r\n    // }\r\n\r\n    // this.dataSource.items().forEach(item => {\r\n    //   item.vat = item.vat;\r\n    //   if (item.product_code || item.product_name || item.quantity || item.price || item.amount || item.amount_vat || item.amount_after_vat) {\r\n    //     if (item.vat != null) {\r\n    //       if (arr.includes(item.vat.toString())) {\r\n\r\n    //         item.error = `Tiền hàng sau khi trừ chiết khấu của cùng loại thuế suất ${this.ruleError[item.vat.toString()]} < 0.\\nVui lòng kiểm tra lại thông tin hóa đơn.`;\r\n    //       } else {\r\n    //         item.error = 0;\r\n    //       }\r\n    //     }\r\n    //     this.invoice_products.update(item.order, item);\r\n    //   }\r\n    // });\r\n    // setTimeout(() => {\r\n    //   this.gripChange.emit([this.dataSource, this.invoice_products, this.formatter]);\r\n    //   this.dataGrid.instance.refresh();\r\n    // }, 200);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routeSub.unsubscribe();\r\n  }\r\n\r\n  onRowRemoving(e) {\r\n    const student_id = e.data.student_id;\r\n    const indexRemove = [];\r\n    this.dataSource.forEach(row => {\r\n      if (row.student_id === student_id) {\r\n        indexRemove.push(this.dataSource.indexOf(row));\r\n      }\r\n    });\r\n    for (let i = indexRemove.length - 1; i >= 0; i--) {\r\n      this.dataSource.splice(indexRemove[i], 1);\r\n    }\r\n    this.checkStatusData();\r\n    let _index = 0;\r\n    let _index_view_order = 0;\r\n    this.dataSource.forEach(item => {\r\n      item.order = ++_index;\r\n      item.view_order = ++_index_view_order;\r\n    });\r\n    this.dataGrid.instance.refresh();\r\n    this.onStudentChange.emit(null);\r\n  }\r\n\r\n  checkStatusData() {\r\n    // let errorDuplicateDatabase = this.dataSource.filter((item) => {\r\n    //   return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_DATABASE\";\r\n    // });\r\n    // let errorDuplicateOngird = this.dataSource.filter((item) => {\r\n    //   return item.number_of_vouchers && item.statusData == \"ERROR_DUPLICATE_ONGIRD\";\r\n    // });\r\n\r\n    // let errorData = this.dataSource.filter((item) => {\r\n    //   return item.statusData == \"DATA_ERROR\";\r\n    // });\r\n    // this.totalDuplicateInvoice = errorDuplicateDatabase.length;\r\n    // this.totalErrorInvoice = errorDuplicateOngird.length + errorData.length;\r\n  }\r\n\r\n  onContextMenuPreparing(e) {\r\n  }\r\n  onContentReady(e) {\r\n    e.component.columnOption(\"command:edit\", {\r\n      visibleIndex: -1\r\n    });\r\n  }\r\n  onCellPrepared(e) {\r\n    if (e.rowType === 'data') {\r\n      if (e.data.statusData === 'OTHER_REDUCE') {\r\n        this.setStatusDataOnCellPrepared(e, this._translate.NOTIFY.different_reduce, false);\r\n      }\r\n      if (e.data.statusData === 'ERROR_DUPLICATE') {\r\n        this.setStatusDataOnCellPrepared(e, this._translate.NOTIFY.invoice_duplicate, true);\r\n      }\r\n\r\n      if (e.data.number_of_vouchers) {\r\n        switch (e.column.dataField) {\r\n          case 'buyer_address':\r\n            if (e.data.customer_object_code === false) {\r\n              this.setStatusDataOnCellPrepared(e, 'Địa chỉ không được để trống', false);\r\n            }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      } else if (e.data.number_of_vouchers === '' && e.data.dataType === 'KHACH_HANG' && e.data.product_name && e.column.dataField === 'number_of_vouchers') {\r\n        this.setStatusDataOnCellPrepared(e, 'Số phiếu, chứng từ không được để trống', false);\r\n      }\r\n      if (e.column.command === \"edit\") {\r\n        if (e.row.data.invoice_number) {\r\n          let tempt = e.cellElement.children;\r\n          tempt[0].outerHTML = \"\";\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async setStatusDataOnCellPrepared(e, message, isDuplicate) {\r\n    if (!e.value) {\r\n      if (!isDuplicate) {\r\n        await e.row.cells.forEach(item => {\r\n          if (item.cellElement) {\r\n            // item.cellElement.style.background = 'red url(\\'assets/img/icons/fa-remove.png\\') no-repeat 2% center';\r\n            item.cellElement.style.background = 'red';\r\n            item.cellElement.title = message;\r\n          }\r\n        });\r\n      } else {\r\n        await e.row.cells.forEach(item => {\r\n          if (item.cellElement) {\r\n            item.cellElement.style.background = 'yellow';\r\n            item.cellElement.title = message;\r\n          }\r\n        });\r\n      }\r\n    } else if (e.value && e.data.statusData === 'DATA_ERROR') {\r\n      e.data.statusData = 'INVALID';\r\n    }\r\n  }\r\n  view(data) {\r\n    if (data && data.invoice_number) {\r\n      let ids = [];\r\n      if (data) {\r\n        ids.push(data.id);\r\n      }\r\n      let w = 1920, h = 900;\r\n      w = window.screen.availWidth * 100 / 100;\r\n      h = window.screen.availHeight * 93 / 100;\r\n      let win = window.open('about:blank', 'name', 'width=200, height=100');\r\n      win.document.body.innerHTML = this._translate.NOTIFY.loading;\r\n      win.blur();\r\n      Library.showloading();\r\n      let sub = this.vatService.xemHoaDonInvoiceForSeries(ids).subscribe(rs => {\r\n        if (rs.status == 'success') {\r\n          let pdf_file = rs.data.invoice.pdf_file;\r\n          let objectUrl = VPreviewInvService._getUrlInvoice(pdf_file);\r\n          win.resizeTo(screen.availWidth, screen.availHeight);\r\n          win.focus();\r\n          win.open(objectUrl, 'name', 'width=' + w + ', height=' + h);\r\n        } else {\r\n          win.close();\r\n          Library.notify(rs.message, 'error');\r\n        }\r\n      }, err => {\r\n      }, () => {\r\n        Library.hideloading();\r\n        sub.unsubscribe();\r\n      });\r\n    } else {\r\n      Library.notify(this._translate.NOTIFY.no_record_selected, 'error');\r\n    }\r\n  }\r\n}\r\n\r\n","export * from './student-invoice.service';\r\nexport * from './student-invoice.resolver';\r\nexport * from './show-student-invoice.resolver';","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map } from 'rxjs/operators';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { StudentInvoiceService } from './student-invoice.service';\r\nimport { Library, Helper, AuthService, sEnum } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { forkJoin } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class ShowInvoiceResolver implements Resolve<any[]> {\r\n  constructor(\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    private listsService: ListsService,\r\n    private authService: AuthService,\r\n  ) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    Library.showloading();\r\n    let isTT78 = false;\r\n    let isViewTT32 = false;\r\n    if (route.queryParams['status'] === 'viewInvTT32') {\r\n      isViewTT32 = true;\r\n    }\r\n    let infoDangKy = this.authService.getInfoRegister();\r\n    if (infoDangKy && infoDangKy.id) {\r\n      if (infoDangKy.status == \"CHAP_NHAN\")\r\n        isTT78 = true;\r\n    }\r\n    if (isTT78 == true && isViewTT32)\r\n      isTT78 = false;\r\n    let loaiHoaDon = route.data.type;\r\n    if (loaiHoaDon == sEnum.loaihoadon.HSPT)\r\n      isTT78 = true;\r\n    let ids = [];\r\n    let invoice_id = route.paramMap.get('invoiceId');\r\n    let isChildInvoices = false;\r\n    if (invoice_id) {\r\n      ids.push(invoice_id);\r\n    }\r\n    else {\r\n      let objQuery = []\r\n      if (Array.isArray(route.queryParams.ids)) {\r\n        objQuery = route.queryParams.ids\r\n      } else {\r\n        objQuery.push(route.queryParams.ids)\r\n      }\r\n      isChildInvoices = route.queryParams.isChildInvoices;\r\n      for (const key in objQuery) {\r\n        if (objQuery.hasOwnProperty(key)) {\r\n          ids.push(objQuery[key]);\r\n        }\r\n      }\r\n    }\r\n    let _countDm = 0;\r\n    let dataJoin = [];\r\n    let dataDM: any;\r\n    let arr = [\r\n      {\r\n        \"code\": \"DM_NHOM_KHACH_HANG\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_LOAI_TIEN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_HINH_THUC_THANH_TOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DON_VI_TINH\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TY_LE_VAT\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DINH_KHOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_NOI_XUAT_HOA_DON\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_QUOC_GIA\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TAI_KHOAN_NGAN_HANG\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TY_LE_MIEN_GIAM_HOC_PHI\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_HINH_THUC_THU\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_LOP_HOC\",\r\n        \"order\": 0\r\n      },\r\n    ];\r\n    dataDM = this.listsService.getDMBy(arr);\r\n    if (dataDM.length > 0) {\r\n      dataDM.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    _countDm = dataDM.length;\r\n    let dataRecord: any;\r\n    if (isTT78) {\r\n      dataRecord = this.vatService.showInvoiceResolverSeriesTT78(ids, loaiHoaDon);\r\n      if (dataRecord.length > 0) {\r\n        dataRecord.forEach(element => {\r\n          dataJoin.push(element);\r\n        });\r\n      }\r\n      let dataForkJoin = forkJoin(dataJoin);\r\n      return dataForkJoin.pipe(\r\n        take(1),\r\n        map(rs => {\r\n          Library.hideloading();\r\n          let status = sEnum.statusApi.success;\r\n          let isEdit = true;\r\n          for (let index = 0; index < rs.length; index++) {\r\n            if (rs[index].status != sEnum.statusApi.success) {\r\n              Library.notify(rs[index].message, \"error\");\r\n              if (loaiHoaDon == \"01GTKT\")\r\n                this.router.navigate(['/system/student-vat-invoice']);\r\n              else if (loaiHoaDon == \"02GTTT\")\r\n                this.router.navigate(['/system/student-sale-invoice']);\r\n              else if (loaiHoaDon == \"03XKNB\")\r\n                this.router.navigate(['/system/transport-invoice']);\r\n              status = sEnum.statusApi.error;\r\n              break;\r\n            }\r\n          }\r\n          if (status == sEnum.statusApi.success) {\r\n            let templates = Helper.convertTemplatesToInvoiceResolver(rs[_countDm]).filter(item => item.template_type !== 'HOA_DON_KHOI_TAO_TU_MAY_TINH_TIEN' && item.template_type !== 'PHIEU_THU_MAY_TINH_TIEN');\r\n            if (dataDM.length > 0) {\r\n              let _data = [];\r\n              rs.forEach((element, i) => {\r\n                if (i < dataDM.length) {\r\n                  _data.push(element);\r\n                }\r\n              });\r\n              this.authService.setDMLocal(_data);\r\n            }\r\n            return [\r\n              rs[_countDm + 1].data.products,\r\n              rs[dataJoin.length - 1].data,\r\n              isEdit,\r\n              templates,\r\n              isChildInvoices\r\n            ];\r\n          }\r\n          else\r\n            return null;\r\n        })\r\n      );\r\n    }\r\n    else {\r\n      dataRecord = this.vatService.showInvoiceResolverSeries(ids, loaiHoaDon);\r\n      if (dataRecord.length > 0) {\r\n        dataRecord.forEach(element => {\r\n          dataJoin.push(element);\r\n        });\r\n      }\r\n      let dataForkJoin = forkJoin(dataJoin);\r\n      return dataForkJoin.pipe(\r\n        take(1),\r\n        map(rs => {\r\n          Library.hideloading();\r\n          let status = sEnum.statusApi.success;\r\n          let isEdit = true;\r\n          for (let index = 0; index < rs.length; index++) {\r\n            if (rs[index].status != sEnum.statusApi.success) {\r\n              Library.notify(rs[index].message, \"error\");\r\n              if (loaiHoaDon == \"01GTKT\")\r\n                this.router.navigate(['/system/student-vat-invoice']);\r\n              else if (loaiHoaDon == \"02GTTT\")\r\n                this.router.navigate(['/system/student-sale-invoice']);\r\n              else if (loaiHoaDon == \"03XKNB\")\r\n                this.router.navigate(['/system/transport-invoice']);\r\n              status = sEnum.statusApi.error;\r\n              break;\r\n            }\r\n          }\r\n          if (status == sEnum.statusApi.success) {\r\n            let invoice_releases = Helper.convertDataToInvoiceResolver(rs[_countDm]);\r\n            if (dataDM.length > 0) {\r\n              let _data = [];\r\n              rs.forEach((element, i) => {\r\n                if (i < dataDM.length) {\r\n                  _data.push(element);\r\n                }\r\n              });\r\n              this.authService.setDMLocal(_data);\r\n            }\r\n            return [\r\n              invoice_releases,\r\n              rs[_countDm + 1].data.products,\r\n              isEdit,\r\n              rs[dataJoin.length - 1].data,\r\n              isChildInvoices\r\n            ];\r\n          }\r\n          else\r\n            return null;\r\n        })\r\n      );\r\n    }\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { take, map, catchError } from 'rxjs/operators';\r\nimport { ListsService } from '@modules/lists/shared';\r\nimport { StudentInvoiceService } from './student-invoice.service';\r\nimport { Library, Helper, AuthService, sEnum } from '@core/index';\r\nimport { VatService } from '@modules/vat/shared';\r\nimport { forkJoin } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class InvoiceResolver implements Resolve<any[]> {\r\n  constructor(\r\n    private vatService: VatService,\r\n    private router: Router,\r\n    private listsService: ListsService,\r\n    private authService: AuthService,\r\n  ) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any[]> {\r\n    Library.showloading();\r\n    let isTT78 = false;\r\n    let infoDangKy = this.authService.getInfoRegister();\r\n    if (infoDangKy && infoDangKy.id) {\r\n      if (infoDangKy.status == \"CHAP_NHAN\")\r\n        isTT78 = true;\r\n    }\r\n    let loaiHoaDon = route.data.type;\r\n    if (loaiHoaDon == sEnum.loaihoadon.HSPT)\r\n      isTT78 = true;\r\n    let _countDm = 0;\r\n    let dataJoin = [];\r\n    let dataDM: any;\r\n    let arr = [\r\n      {\r\n        \"code\": \"DM_NHOM_KHACH_HANG\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_LOAI_TIEN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_HINH_THUC_THANH_TOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DON_VI_TINH\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TY_LE_VAT\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_DINH_KHOAN\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_NOI_XUAT_HOA_DON\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_QUOC_GIA\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TAI_KHOAN_NGAN_HANG\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_TY_LE_MIEN_GIAM_HOC_PHI\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_HINH_THUC_THU\",\r\n        \"order\": 0\r\n      },\r\n      {\r\n        \"code\": \"DM_LOP_HOC\",\r\n        \"order\": 0\r\n      },\r\n    ];\r\n    dataDM = this.listsService.getDMBy(arr);\r\n    if (dataDM.length > 0) {\r\n      dataDM.forEach(element => {\r\n        dataJoin.push(element);\r\n      });\r\n    }\r\n    _countDm = dataDM.length;\r\n    if (isTT78) {\r\n      let dataRecord = this.vatService.getInvoiceResolverTT78(loaiHoaDon);\r\n      if (dataRecord.length > 0) {\r\n        dataRecord.forEach(element => {\r\n          dataJoin.push(element);\r\n        });\r\n      }\r\n      let dataForkJoin = forkJoin(dataJoin);\r\n      return dataForkJoin.pipe(\r\n        take(1),\r\n        map(rs => {\r\n          Library.hideloading();\r\n          let status = sEnum.statusApi.success;\r\n          let isEdit = false;\r\n          for (let index = 0; index < rs.length; index++) {\r\n            if (rs[index].status != sEnum.statusApi.success) {\r\n              Library.notify(rs[index].message, \"error\");\r\n              if (loaiHoaDon == \"01GTKT\")\r\n                this.router.navigate(['/system/student-vat-invoice']);\r\n              else if (loaiHoaDon == \"02GTTT\")\r\n                this.router.navigate(['/system/student-sale-invoice']);\r\n              else if (loaiHoaDon == \"03XKNB\")\r\n                this.router.navigate(['/system/transport-invoice']);\r\n              status = sEnum.statusApi.error;\r\n              break;\r\n            }\r\n          }\r\n          if (status == sEnum.statusApi.success) {\r\n            if (dataDM.length > 0) {\r\n              let _data = [];\r\n              rs.forEach((element, i) => {\r\n                if (i < dataDM.length) {\r\n                  _data.push(element);\r\n                }\r\n              });\r\n              this.authService.setDMLocal(_data);\r\n            }\r\n            /* Thông tư 78 */\r\n            let templates = Helper.convertTemplatesToInvoiceResolver(rs[dataJoin.length - 1]).filter(item => item.template_type !== 'HOA_DON_KHOI_TAO_TU_MAY_TINH_TIEN'&& item.template_type !== 'PHIEU_THU_MAY_TINH_TIEN');\r\n            return [\r\n              rs[_countDm].data.products,\r\n              templates,\r\n              isEdit,\r\n            ];\r\n          }\r\n          else\r\n            return null;\r\n        })\r\n      );\r\n    }\r\n    else {\r\n      let dataRecord = this.vatService.getInvoiceResolver(loaiHoaDon);\r\n      if (dataRecord.length > 0) {\r\n        dataRecord.forEach(element => {\r\n          dataJoin.push(element);\r\n        });\r\n      }\r\n      let dataForkJoin = forkJoin(dataJoin);\r\n      return dataForkJoin.pipe(\r\n        take(1),\r\n        map(rs => {\r\n          Library.hideloading();\r\n          let status = sEnum.statusApi.success;\r\n          let isEdit = false;\r\n          for (let index = 0; index < rs.length; index++) {\r\n            if (rs[index].status != sEnum.statusApi.success) {\r\n              Library.notify(rs[index].message, \"error\");\r\n              if (loaiHoaDon == \"01GTKT\")\r\n                this.router.navigate(['/system/student-vat-invoice']);\r\n              else if (loaiHoaDon == \"02GTTT\")\r\n                this.router.navigate(['/system/student-sale-invoice']);\r\n              else if (loaiHoaDon == \"03XKNB\")\r\n                this.router.navigate(['/system/transport-invoice']);\r\n              status = sEnum.statusApi.error;\r\n              break;\r\n            }\r\n          }\r\n          if (status == sEnum.statusApi.success) {\r\n            let invoice_releases = Helper.convertDataToInvoiceResolver(rs[_countDm]);\r\n            if (dataDM.length > 0) {\r\n              let _data = [];\r\n              rs.forEach((element, i) => {\r\n                if (i < dataDM.length) {\r\n                  _data.push(element);\r\n                }\r\n              });\r\n              this.authService.setDMLocal(_data);\r\n            }\r\n            return [\r\n              invoice_releases,\r\n              rs[dataJoin.length - 1].data.products,\r\n              isEdit\r\n            ];\r\n          }\r\n          else\r\n            return null;\r\n        })\r\n      );\r\n    }\r\n  }\r\n}","import {Injectable} from '@angular/core';\r\nimport {ApiService, CoreService, Library, VStringService} from '@core/index';\r\nimport * as moment from 'moment';\r\nimport {finalize} from 'rxjs/operators';\r\nimport {forkJoin} from 'rxjs';\r\n\r\n@Injectable()\r\nexport class StudentInvoiceService {\r\n\r\n  currentDate = moment(new Date()).format('YYYY-MM-DD');\r\n  data: any;\r\n  isCopy = false;\r\n\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private coreService: CoreService,\r\n  ) {\r\n  }\r\n\r\n  getAllBatch(params?) {\r\n    // const includes = 'includes[]=input_invoice_products';\r\n    // const sort = '&sort[0][key]=invoice_date&sort[0][direction]=DESC';\r\n    if (params) {\r\n      return this.apiService.getDataTable('/batchs');\r\n    } else {\r\n      return this.apiService.getDataTable('/batchs');\r\n    }\r\n  }\r\n\r\n  getAllStudentToBatch(idBatch, params?) {\r\n    const includes = 'includes[]=template&options[sum_payment_process]=1&includes[]=invoice_files&options[is_view_index]=1';\r\n    let filter = VStringService._removeNewline(`\r\n&filter_groups[0][filters][0][key]=batch_id\r\n&filter_groups[0][filters][0][value]=${idBatch}\r\n&filter_groups[0][filters][0][operator]=eq`);\r\n    if (params) {\r\n      filter += '&' + params;\r\n    }\r\n    const sort = '&sort[0][key]=status_order&sort[0][direction]=ASC';\r\n    return this.apiService.getDataTable('/invoices', includes + filter, sort);\r\n    // &filter_groups[0][filters][-1][key]=adjustment_type\r\n    //   &filter_groups[0][filters][-1][value][0]=1\r\n    //   &filter_groups[0][filters][-1][value][1]=2\r\n    //   &filter_groups[0][filters][-1][value][2]=3\r\n    //   &filter_groups[0][filters][-1][value][3]=4\r\n    //   &filter_groups[0][filters][-1][value][4]=5\r\n    //   &filter_groups[0][filters][-1][value][5]=7\r\n    //   &filter_groups[0][filters][-1][operator]=in\r\n    // &filter_groups[1][or]=true\r\n    //   &filter_groups[1][filters][0][key]=crm_id\r\n    //   &filter_groups[1][filters][0][value]=null\r\n    //   &filter_groups[1][filters][0][operator]=eq\r\n    //   &filter_groups[1][filters][1][key]=status\r\n    //   &filter_groups[1][filters][1][value]=DA_XUAT\r\n    //   &filter_groups[1][filters][1][operator]=eq\r\n    //   &filter_groups[2][filters][0][key]=template.invoice_type\r\n    //   &filter_groups[2][filters][0][value]=01GTKT\r\n    //   &filter_groups[2][filters][0][operator]=eq\r\n  }\r\n\r\n  getStudentToClass(code_class,paramsClass,paramsTLMG,contentSearch) {\r\n    let parUrl = '/students?';\r\n    let arrClass = paramsClass;\r\n    if(arrClass && arrClass.length>0)\r\n    {\r\n      parUrl += `&filter_groups[0][filters][0][key]=class_code`;\r\n      for (let i = 0; i < arrClass.length; i++) {\r\n        parUrl += `&filter_groups[0][filters][0][value][${i}]=${arrClass[i]}`;\r\n      }\r\n      parUrl += `&filter_groups[0][filters][0][operator]=in`;\r\n    }\r\n    else\r\n    {\r\n      parUrl += `&filter_groups[0][filters][0][key]=class_code`;\r\n      parUrl += `&filter_groups[0][filters][0][value]=${code_class}`;\r\n      parUrl += `&filter_groups[0][filters][0][operator]=eq`;\r\n    }\r\n    if(paramsTLMG && paramsTLMG.length>0)\r\n    {\r\n      parUrl += `&filter_groups[1][filters][0][key]=student_reduce_rate_code`;\r\n      for (let j = 0; j < paramsTLMG.length; j++) {\r\n        parUrl += `&filter_groups[1][filters][0][value][${j}]=${paramsTLMG[j]}`;\r\n      }\r\n      parUrl += `&filter_groups[1][filters][0][operator]=in`;\r\n    }\r\n    if(contentSearch)\r\n    {\r\n      let _indexfilter_groups = 8888;\r\n      parUrl+= `&filter_groups[${_indexfilter_groups}][or]=true\r\n            &filter_groups[${_indexfilter_groups}][filters][0][key]=code\r\n            &filter_groups[${_indexfilter_groups}][filters][0][value]=${contentSearch}\r\n            &filter_groups[${_indexfilter_groups}][filters][0][operator]=ct\r\n            &filter_groups[${_indexfilter_groups}][filters][1][key]=name\r\n            &filter_groups[${_indexfilter_groups}][filters][1][value]=${contentSearch}\r\n            &filter_groups[${_indexfilter_groups}][filters][1][operator]=ct&`\r\n    }\r\n    parUrl+=`&sort[0][key]=order&sort[0][direction]=ASC`;\r\n    return this.apiService.get(parUrl).pipe(finalize(() => Library.hideloading())).toPromise();\r\n  }\r\n\r\n  getClassBySearch(code_class,paramsClass,paramsTLMG,contentSearch) {\r\n    let parUrl = '/students?';\r\n    let arrClass = paramsClass;\r\n    if(arrClass && arrClass.length>0)\r\n    {\r\n      parUrl += `&filter_groups[0][filters][0][key]=class_code`;\r\n      for (let i = 0; i < arrClass.length; i++) {\r\n        parUrl += `&filter_groups[0][filters][0][value][${i}]=${arrClass[i]}`;\r\n      }\r\n      parUrl += `&filter_groups[0][filters][0][operator]=in`;\r\n    }\r\n    else\r\n    {\r\n      if(code_class)\r\n      {\r\n        parUrl += `&filter_groups[0][filters][0][key]=class_code`;\r\n        parUrl += `&filter_groups[0][filters][0][value]=${code_class}`;\r\n        parUrl += `&filter_groups[0][filters][0][operator]=eq`;\r\n      }\r\n    }\r\n    if(paramsTLMG && paramsTLMG.length>0)\r\n    {\r\n      parUrl += `&filter_groups[1][filters][0][key]=student_reduce_rate_code`;\r\n      for (let j = 0; j < paramsTLMG.length; j++) {\r\n        parUrl += `&filter_groups[1][filters][0][value][${j}]=${paramsTLMG[j]}`;\r\n      }\r\n      parUrl += `&filter_groups[1][filters][0][operator]=in`;\r\n    }\r\n    if(contentSearch)\r\n    {\r\n      let _indexfilter_groups = 8888;\r\n      parUrl+= `&filter_groups[${_indexfilter_groups}][or]=true\r\n            &filter_groups[${_indexfilter_groups}][filters][0][key]=code\r\n            &filter_groups[${_indexfilter_groups}][filters][0][value]=${contentSearch}\r\n            &filter_groups[${_indexfilter_groups}][filters][0][operator]=ct\r\n            &filter_groups[${_indexfilter_groups}][filters][1][key]=name\r\n            &filter_groups[${_indexfilter_groups}][filters][1][value]=${contentSearch}\r\n            &filter_groups[${_indexfilter_groups}][filters][1][operator]=ct&`\r\n    }\r\n    return this.apiService.get(parUrl).pipe(finalize(() => Library.hideloading())).toPromise();\r\n  }\r\n\r\n  fillterStudentToClassOrTLMG(key: string, params: Array<any>) {\r\n    Library.showloading();\r\n    let parUrl = '/students';\r\n    if (Array.isArray(params) && params.length) {\r\n      parUrl += `?&filter_groups[0][filters][0][key]=${key}`;\r\n      for (let i = 0; i < params.length; i++) {\r\n        parUrl += `&filter_groups[0][filters][0][value][${i}]=${params[i]}`;\r\n      }\r\n      parUrl += `&filter_groups[0][filters][0][operator]=in`;\r\n    }\r\n    return this.apiService.get(parUrl).pipe(finalize(() => Library.hideloading())).toPromise();\r\n  }\r\n\r\n  getClassByCode(params: Array<any>) {\r\n    Library.showloading();\r\n    let parUrl = '/lists';\r\n    if (Array.isArray(params) && params.length) {\r\n      parUrl += `?filter_groups[0][filters][0][key]=code`;\r\n      for (let i = 0; i < params.length; i++) {\r\n        parUrl += `&filter_groups[0][filters][0][value][${i}]=${params[i]}`;\r\n      }\r\n      parUrl += `&filter_groups[0][filters][0][operator]=in`;\r\n    }\r\n    return this.apiService.get(parUrl).pipe(finalize(() => Library.hideloading())).toPromise();\r\n  }\r\n\r\n  getAllClass()\r\n  {\r\n    Library.showloading();\r\n   return this.apiService.get('/get-lists-by-listtype-code/DM_LOP_HOC').pipe(finalize(() => Library.hideloading())).toPromise();\r\n  }\r\n\r\n  fillterStudentToClassAndTLMG(keyClass: string, paramsClass: Array<any>, keyTLMG: string, paramsTLMG: Array<any>) {\r\n    let parUrl = '/students';\r\n    Library.showloading();\r\n    if(Array.isArray(paramsClass) && paramsClass.length > 0){\r\n      parUrl += `?&filter_groups[0][filters][0][key]=${keyClass}`;\r\n      for (let i = 0; i < paramsClass.length; i++) {\r\n        parUrl += `&filter_groups[0][filters][0][value][${i}]=${paramsClass[i]}`;\r\n      }\r\n      parUrl += `&filter_groups[0][filters][0][operator]=in`;\r\n    }\r\n    if (Array.isArray(paramsTLMG) && paramsTLMG.length > 0) {\r\n      parUrl += `&filter_groups[1][filters][0][key]=${keyTLMG}`;\r\n      for (let j = 0; j < paramsTLMG.length; j++) {\r\n        parUrl += `&filter_groups[1][filters][0][value][${j}]=${paramsTLMG[j]}`;\r\n      }\r\n      parUrl += `&filter_groups[1][filters][0][operator]=in`;\r\n    }\r\n    return this.apiService.get(parUrl).pipe(finalize(() => Library.hideloading())).toPromise();\r\n  }\r\n\r\n  fillterStudentToNameAndCode(params: string) {\r\n    const parUrlSearchName = `/students?filter_groups[1][filters][0][key]=code&filter_groups[1][filters][0][value]=${params}&filter_groups[1][filters][0][operator]=ct`;\r\n    const parUrl = `/students?filter_groups[2][filters][0][key]=name&filter_groups[2][filters][0][value]=${params}&filter_groups[2][filters][0][operator]=ct`;\r\n    return forkJoin([\r\n      this.apiService.get(parUrlSearchName).toPromise(),\r\n      this.apiService.get(parUrl).toPromise()\r\n    ]);\r\n  }\r\n\r\n  deleteStudent(id) {\r\n    return this.apiService.delete('/students/' + id);\r\n  }\r\n\r\n  getCountStudent() {\r\n    Library.showloading();\r\n    return this.apiService.get('/students').pipe(finalize(() => Library.hideloading())).toPromise();\r\n  }\r\n\r\n  show(id) {\r\n    return this.apiService.get('/invoices/' + id + '?includes[]=invoice_products&includes[]=invoice_options');\r\n  }\r\n\r\n  showToSendInvoice(id) {\r\n    return this.apiService.get('/invoices/' + id + '?includes[]=template');\r\n  }\r\n\r\n  sendMail(data) {\r\n    return this.apiService.post('/invoices-send-mail', {invoices: data});\r\n  }\r\n\r\n  delete(id) {\r\n    return this.apiService.delete('/invoices/' + id);\r\n  }\r\n\r\n  layFileMau(data) {\r\n    return this.apiService.post('/invoices-export-template-product', {invoice: data});\r\n  }\r\n\r\n  ghiTam(data, invoice_number: boolean = false) {\r\n    const url = invoice_number ? '/invoices?options[invoice_number]=1' : '/invoices';\r\n    return this.apiService.post(url, {invoice: data});\r\n  }\r\n\r\n  xuatChoKy(data) {\r\n    if (data.id) {\r\n      return this.apiService.put(`/invoices/${data.id}?options[invoice_number]=1&options[sign_later]=1`, {invoice: data});\r\n    }\r\n    return this.apiService.post('/invoices?options[invoice_number]=1&options[sign_later]=1', {invoice: data});\r\n  }\r\n\r\n  edit(id, data, invoice_number: boolean = false) {\r\n    const url = invoice_number ? `/invoices/${id}?options[invoice_number]=1` : `/invoices/${id}`;\r\n    return this.apiService.put(url, {invoice: data});\r\n  }\r\n\r\n  xuatHoaDon(data) {\r\n    return this.apiService.post('/invoices-export', {invoice: data});\r\n  }\r\n  xuatPhieuThu(data) {\r\n    return this.apiService.post('/invoices/batch/receipt?options[invoice_number]=1', {invoice: data});\r\n  }\r\n  view(id) {\r\n    return this.apiService.post('/invoices-view', {invoice: {ids: [id]}});\r\n  }\r\n\r\n  inChuyenDoi(id) {\r\n    return this.apiService.post('/invoices-conversion', {invoice: {ids: [id]}});\r\n  }\r\n\r\n  giuSo(data) {\r\n    return this.apiService.post('/invoices-keep-number', {invoice: data});\r\n  }\r\n\r\n  getTemplate() {\r\n    return this.apiService.get(`/invoice-releases?includes[]=template&filter_groups[0][filters][0][key]=release_status&filter_groups[0][filters][0][value]=DA_TB_THUE&filter_groups[0][filters][0][operator]=eq&filter_groups[0][filters][1][key]=start_using_date&filter_groups[0][filters][1][value]=${this.currentDate}&filter_groups[0][filters][1][operator]=lte`); //&filter_groups[0][filters][2][key]=number_exists&filter_groups[0][filters][2][value]=1&filter_groups[0][filters][2][operator]=eq\r\n  }\r\n\r\n  preview(data) {\r\n    return this.apiService.post('/invoices-preview', {\r\n      invoices: [\r\n        data\r\n      ]\r\n    });\r\n  }\r\n\r\n  xemHoaDonInvoiceImport(ids) {\r\n    return this.apiService.post('/invoices-view', {invoice: {ids: ids}});\r\n  }\r\n\r\n  tuchoi(data) {\r\n    return this.apiService.post('/invoices/refuse', {invoice: data});\r\n  }\r\n\r\n}\r\n","import {FormStudentInvoiveComponent} from './components/form-student-invoive/form-student-invoive.component';\r\nimport {StudentInvoiceRouting} from '@modules/student-invoice/student-invoice.routing';\r\nimport {InvoiceResolver, ShowInvoiceResolver, StudentInvoiceService} from './shared';\r\nimport {ListStudentComponent} from './components/list-student/list-student.component';\r\nimport {ProductGripComponent} from './components/product-grip/product-grip.component';\r\nimport {SendInvoicesComponent} from './components/send-invoices/send-invoices.component';\r\nimport {SendMailComponent} from './components/send-mail/send-mail.component';\r\nimport {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\n// library\r\nimport {devextremeModule} from '@core/index';\r\nimport {VatService} from '@modules/vat/shared';\r\n// general\r\nimport {SomeModule, VatSharedModule} from '@shared/index';\r\nimport {IndexComponent} from './components/index/index.component';\r\nimport {ViewAttachFileComponent} from '@shared/modules/vat-shared/components/view-attach-file/view-attach-file.component';\r\nimport {TagInputModule} from 'ngx-chips';\r\nimport {DxDataGridModule, DxDateBoxModule, DxLookupModule} from 'devextreme-angular';\r\nimport {VatDeactivateGuard} from '@modules/vat/deactivate/vat-deactivate.guard';\r\nimport {ConfirmService} from '@shared/service/confirm.service';\r\nimport {ListsService} from '@modules/lists/shared';\r\nimport {StudentInvoiceGripComponent} from './components/student-invoice-grip/student-invoice-grip.component';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport {vTranslateModule} from '@core/module/v-translate.module';\r\nimport {InvoiceComponent} from '@modules/student-invoice/components/invoice/invoice.component';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\nimport { InvoicesDuplicatesComponent } from './components/invoices-duplicates/invoices-duplicates.component';\r\nimport { SignManyComponent } from './components/sign-many/sign-many.component';\r\nimport { TemplateService } from '@modules/template/shared';\r\nimport { NotifyService } from '@modules/release-notify/shared';\r\nimport { SendListEmailComponent, SendDataForTaxComponent } from '@shared/index';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\nimport { ViewInvoiceMultipageComponent } from '@shared/index';\r\nimport { SignatureOffComponent } from '@shared/index';\r\nimport { MyBsModalService } from '@core/library/invoice/my-bsmodel.service';\r\nimport { PreviewInvoiceComponent } from '@shared/components/preview-invoice/preview-invoice.component';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    StudentInvoiceRouting,\r\n    SharedModule,\r\n    vTranslateModule,\r\n    SomeModule,\r\n    devextremeModule,\r\n    DxLookupModule,\r\n    TagInputModule,\r\n    VatSharedModule,\r\n    DxDateBoxModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    DxDataGridModule,\r\n    NgxSpinnerModule\r\n  ],\r\n  declarations: [\r\n    IndexComponent,\r\n    FormStudentInvoiveComponent,\r\n    InvoiceComponent,\r\n    ListStudentComponent,\r\n    ProductGripComponent,\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    StudentInvoiceGripComponent,\r\n    InvoicesDuplicatesComponent,\r\n    SignManyComponent,\r\n  ],\r\n  entryComponents: [\r\n    SendInvoicesComponent,\r\n    SendMailComponent,\r\n    ViewAttachFileComponent,\r\n    InvoicesDuplicatesComponent,\r\n    SignManyComponent,\r\n    SendDataForTaxComponent,\r\n    ViewInvoiceMultipageComponent,\r\n    SignatureOffComponent,\r\n    PreviewInvoiceComponent\r\n  ],\r\n  providers: [\r\n    StudentInvoiceService,\r\n    InvoiceResolver,\r\n    ShowInvoiceResolver,\r\n    VatDeactivateGuard,\r\n    ConfirmService,\r\n    ListsService,\r\n    VatService,\r\n    TemplateService,\r\n    NotifyService,\r\n    MyBsModalService\r\n  ]\r\n})\r\nexport class StudentInvoiceModule {\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { IndexComponent } from '@modules/student-invoice/components/index/index.component';\r\nimport { InvoiceComponent } from '@modules/student-invoice/components/invoice/invoice.component';\r\nimport { InvoiceResolver, ShowInvoiceResolver } from './shared';\r\nimport { VatDeactivateGuard } from '@modules/vat/deactivate/vat-deactivate.guard';\r\nconst routes: Routes = [\r\n  { path: '', component: IndexComponent },\r\n  {\r\n    path: 'create',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: InvoiceResolver },\r\n    data: { brec: 'create_invoice' }\r\n  },\r\n  {\r\n    path: 'create-receipts',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: InvoiceResolver },\r\n    data: { brec: 'create_receipts', type: \"08HSPT\" }\r\n  },\r\n  {\r\n    path: 'edit',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ShowInvoiceResolver },\r\n    data: { brec: 'invoice_details' }\r\n  },\r\n  {\r\n    path: 'edit-receipts',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ShowInvoiceResolver },\r\n    data: { brec: 'receipts_details', type: \"08HSPT\" }\r\n  },\r\n  {\r\n    path: ':invoiceId',\r\n    component: InvoiceComponent,\r\n    canDeactivate: [VatDeactivateGuard],\r\n    resolve: { init: ShowInvoiceResolver },\r\n    data: { brec: 'invoice_details' }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class StudentInvoiceRouting {\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {CanDeactivate} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\n\r\nexport interface CanComponentDeactivate {\r\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VatDeactivateGuard implements CanDeactivate<CanComponentDeactivate> {\r\n\r\n  canDeactivate(component: CanComponentDeactivate) {\r\n    return component.canDeactivate && component.canDeactivate();\r\n  }\r\n}\r\n"],"sourceRoot":""}